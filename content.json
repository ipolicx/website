{"pages":[{"title":"","text":"","link":"/404.html"},{"title":"å…³äº","text":"ä¸€ä¸ªå¯¹ç€æ‰‹æœºå¾®ç¬‘çš„å¥³å­©ï¼Œæˆ‘ä¹Ÿä¼šçŒœæµ‹å¥¹å¾®ç¬‘ï¼Œæ˜¯æ‹äººçš„å¯†è¯­ï¼Œè¿˜æ˜¯æœ‹å‹çš„é—®å€™ï¼Œæˆ–è®¸æ˜¯çœ‹ä¸€æ®µç¬‘è¯ï¼Œæ€»ä¹‹ï¼Œå¾ˆç¾ã€‚æˆ‘æƒ³åè¿‡å»ï¼Œä½†å¥¹çš„ç›®å…‰æŠ•è¿‡æ¥ï¼Œæˆ‘åˆä½ä¸‹äº†å¤´ï¼Œåƒä¸ªçŠ¯é”™çš„å­©å­ã€‚","link":"/about/index.html"},{"title":"","text":"[{\"value\":\"01\",\"sj\":\"-\",\"name\":\"Androidå¼€å‘\"},{\"value\":\"0101\",\"sj\":\"01\",\"name\":\"å·¥å…·\"},{\"value\":\"0102\",\"sj\":\"01\",\"name\":\"åŠ¨ç”»\"},{\"value\":\"0103\",\"sj\":\"01\",\"name\":\"Kotlin\"},{\"value\":\"0104\",\"sj\":\"01\",\"name\":\"æ¡†æ¶\"},{\"value\":\"0105\",\"sj\":\"01\",\"name\":\"æ¡ˆä¾‹\"},{\"value\":\"0106\",\"sj\":\"01\",\"name\":\"æ€§èƒ½ä¼˜åŒ–\"},{\"value\":\"0107\",\"sj\":\"01\",\"name\":\"è‡ªå®šä¹‰ç»„ä»¶\"},{\"value\":\"0108\",\"sj\":\"01\",\"name\":\"åŸºç¡€çŸ¥è¯†\"},{\"value\":\"0109\",\"sj\":\"01\",\"name\":\"å…¶ä»–\"},{\"value\":\"010101\",\"sj\":\"0101\",\"name\":\"Android Studio å®ç”¨å°æŠ€å·§\",\"url\":\"https://dp2px.com/2017/11/15/androidstudiojq/\"},{\"value\":\"010102\",\"sj\":\"0101\",\"name\":\"Android Studio 3.0 Releaseæ–°åŠŸèƒ½\",\"url\":\"https://dp2px.com/2017/11/20/androidstudio3-0/\"},{\"value\":\"010103\",\"sj\":\"0101\",\"name\":\"Android Studio3.0ä¾èµ–æ–¹å¼\",\"url\":\"https://dp2px.com/2018/01/04/androidcompile/\"},{\"value\":\"010104\",\"sj\":\"0101\",\"name\":\"å‘å¸ƒAndroidé¡¹ç›®åˆ°JCenterä»“åº“\",\"url\":\"https://dp2px.com/2019/03/22/jcenter/\"},{\"value\":\"010201\",\"sj\":\"0102\",\"name\":\"Androidå®ç°çš„ä¸€ä¸ªç‚¹èµåŠ¨ç”»\",\"url\":\"https://dp2px.com/2018/02/06/likeanim/\"},{\"value\":\"010202\",\"sj\":\"0102\",\"name\":\"PhysicsBasedAnimationå­¦ä¹ \",\"url\":\"https://dp2px.com/2017/11/18/physicsanim/\"},{\"value\":\"010203\",\"sj\":\"0102\",\"name\":\"Android Transitionå­¦ä¹ ç¬”è®°\",\"url\":\"https://dp2px.com/2017/11/16/androidtransition/\"},{\"value\":\"010204\",\"sj\":\"0102\",\"name\":\"Androidå±æ€§åŠ¨ç”»Interpolatorå’ŒViewPropertyAnimatorçš„ç”¨æ³•\",\"url\":\"https://dp2px.com/2017/11/11/objectanim-pro2/\"},{\"value\":\"010205\",\"sj\":\"0102\",\"name\":\"Androidä¸­çš„å±æ€§åŠ¨ç”»é«˜çº§ç”¨æ³•\",\"url\":\"https://dp2px.com/2017/11/11/objectanim-pro/\"},{\"value\":\"010206\",\"sj\":\"0102\",\"name\":\"Androidä¸­çš„å±æ€§åŠ¨ç”»åŸºç¡€ç”¨æ³•\",\"url\":\"https://dp2px.com/2017/11/11/objectanim/\"},{\"value\":\"010207\",\"sj\":\"0102\",\"name\":\"Androidä¸­çš„SVG\",\"url\":\"https://dp2px.com/2017/11/04/androidsvg/\"},{\"value\":\"010301\",\"sj\":\"0103\",\"name\":\"Kotlinè¯­æ³•åˆæ¢\",\"url\":\"https://dp2px.com/2019/01/30/kotlin1/\"},{\"value\":\"010302\",\"sj\":\"0103\",\"name\":\"Lambdaç¼–ç¨‹\",\"url\":\"https://dp2px.com/2019/01/31/kotlin2/\"},{\"value\":\"010303\",\"sj\":\"0103\",\"name\":\"Kotlinä¸­çš„byå…³é”®å­—\",\"url\":\"https://dp2px.com/2019/01/31/kotlin3/\"},{\"value\":\"010304\",\"sj\":\"0103\",\"name\":\"Kotlinçš„å¯ç©ºæ€§\",\"url\":\"https://dp2px.com/2019/02/01/kotlin4/\"},{\"value\":\"010305\",\"sj\":\"0103\",\"name\":\"Kotlinçš„æ•°æ®ç±»å‹å’Œé›†åˆ\",\"url\":\"https://dp2px.com/2019/02/01/kotlin5/\"},{\"value\":\"010306\",\"sj\":\"0103\",\"name\":\"Kotlinä¸­çš„objectå…³é”®å­—\",\"url\":\"https://dp2px.com/2019/02/01/kotlin6/\"},{\"value\":\"010307\",\"sj\":\"0103\",\"name\":\"Kotlinå¼€å‘Androidçš„å¥‡æŠ€æ·«å·§è®°å½•\",\"url\":\"https://dp2px.com/2019/02/15/kotlin7/\"},{\"value\":\"010308\",\"sj\":\"0103\",\"name\":\"Androidå¼€å‘ä¸­Kotlinçš„æ‰©å±•åº“åŠå®ç°Parcelable\",\"url\":\"https://dp2px.com/2019/02/20/kotlin8/\"},{\"value\":\"010309\",\"sj\":\"0103\",\"name\":\"ç”±Javaæ³›å‹çœ‹Kotlinçš„æ³›å‹\",\"url\":\"https://dp2px.com/2019/02/21/kotlin9/\"},{\"value\":\"010401\",\"sj\":\"0104\",\"name\":\"ä»å“åº”å¼ç¼–ç¨‹è°ˆRxJava\",\"url\":\"https://dp2px.com/2017/11/05/rxjava/\"},{\"value\":\"010402\",\"sj\":\"0104\",\"name\":\"Retrofitå°è£…ç½‘ç»œè¯·æ±‚æ¡†æ¶\",\"url\":\"https://dp2px.com/2017/11/09/retrofit/\"},{\"value\":\"010403\",\"sj\":\"0104\",\"name\":\"Rxjava2ä½¿ç”¨æ€»ç»“\",\"url\":\"https://dp2px.com/2019/06/13/rxjava2/\"},{\"value\":\"010404\",\"sj\":\"0104\",\"name\":\"Dagger2å…¥é—¨å­¦ä¹ è®°å½•\",\"url\":\"https://dp2px.com/2017/11/16/dagger/\"},{\"value\":\"010405\",\"sj\":\"0104\",\"name\":\"Dagger2å…¥é—¨å­¦ä¹ ä¹‹MVPé¡¹ç›®æ•´åˆ(ä¸Š)\",\"url\":\"https://dp2px.com/2018/02/03/dagger2/\"},{\"value\":\"010406\",\"sj\":\"0104\",\"name\":\"Dagger2å…¥é—¨å­¦ä¹ ä¹‹MVPé¡¹ç›®æ•´åˆ(ä¸‹)\",\"url\":\"https://dp2px.com/2018/02/03/dagger2android/\"},{\"value\":\"010501\",\"sj\":\"0105\",\"name\":\"ä½¿ç”¨CoordinatorLayoutså®ç°çš„é¦–é¡µç‚«é…·æ•ˆæœ\",\"url\":\"https://dp2px.com/2017/11/29/androiddemo1/\"},{\"value\":\"010502\",\"sj\":\"0105\",\"name\":\"å…·æœ‰ç«‹ä½“æ„Ÿçš„Materialé£æ ¼å¾ªç¯æ»šåŠ¨Banner\",\"url\":\"https://dp2px.com/2017/11/30/androidbanner/\"},{\"value\":\"010503\",\"sj\":\"0105\",\"name\":\"Androidç»“æ„è®¾è®¡ç³»åˆ—[1]--åˆè¯†å·¥ç¨‹\",\"url\":\"https://dp2px.com/2019/04/01/architecture1/\"},{\"value\":\"010504\",\"sj\":\"0105\",\"name\":\"Androidç»“æ„è®¾è®¡ç³»åˆ—[2]--è§£è€¦åˆ\",\"url\":\"https://dp2px.com/2019/04/01/architecture2/\"},{\"value\":\"010601\",\"sj\":\"0106\",\"name\":\"Androidé¡¹ç›®ä¼˜åŒ–æ£€æµ‹å·¥å…·Lint\",\"url\":\"https://dp2px.com/2019/06/28/android-lint/\"},{\"value\":\"010701\",\"sj\":\"0107\",\"name\":\"Androidä¸­è‡ªå®šä¹‰é”®ç›˜å’Œè¾“å…¥æ³•\",\"url\":\"https://dp2px.com/2019/03/26/customekeyboard/\"},{\"value\":\"010801\",\"sj\":\"0108\",\"name\":\"Androidå†…éƒ¨åˆ†äº«[1]â€”â€”æ¦‚è¿°å’Œèµ·æ­¥\",\"url\":\"https://dp2px.com/2019/07/13/android-train1/\"},{\"value\":\"010802\",\"sj\":\"0108\",\"name\":\"Androidå†…éƒ¨åˆ†äº«[2]â€”â€”æ•°æ®å­˜å‚¨å’Œç»‘å®š\",\"url\":\"https://dp2px.com/2019/07/31/android-train2/\"},{\"value\":\"010901\",\"sj\":\"0109\",\"name\":\"Android 6.0/7.0æƒé™é—®é¢˜\",\"url\":\"https://dp2px.com/2017/11/08/androidpermission/\"},{\"value\":\"010902\",\"sj\":\"0109\",\"name\":\"FileProvider\",\"url\":\"https://dp2px.com/2017/12/06/fileprovider/\"},{\"value\":\"010903\",\"sj\":\"0109\",\"name\":\"Androidå†å²ç‰ˆæœ¬å˜è¿\",\"url\":\"https://dp2px.com/2019/02/14/android-version/\"},{\"value\":\"010904\",\"sj\":\"0109\",\"name\":\"Googleå®˜æ–¹æ¶æ„ç»„ä»¶Lifecycleå’ŒLiveData\",\"url\":\"https://dp2px.com/2019/04/08/lifecycle/\"},{\"value\":\"010905\",\"sj\":\"0109\",\"name\":\"Android æµ…è‰²çŠ¶æ€æ è®¾ç½®\",\"url\":\"https://dp2px.com/2018/02/01/lightstatubar/\"},{\"value\":\"010906\",\"sj\":\"0109\",\"name\":\"Androidå¼€å‘ä¸­çš„ä¸€äº›æŠ€å·§\",\"url\":\"https://dp2px.com/2019/06/28/android-skill/\"},{\"value\":\"010907\",\"sj\":\"0109\",\"name\":\"Androidä¸­çš„DownloadManagerä½¿ç”¨\",\"url\":\"https://dp2px.com/2019/03/28/androiddownload/\"},{\"value\":\"010908\",\"sj\":\"0109\",\"name\":\"å‘å¸ƒAndroidé¡¹ç›®åˆ°JCenterä»“åº“\",\"url\":\"https://dp2px.com/2019/03/22/jcenter/\"}]","link":"/json-data/frame-android.json"},{"title":"","text":"[{\"value\":\"01\",\"sj\":\"-\",\"name\":\"ç‰©è”ç½‘å’Œæ¥å£æŠ€æœ¯\"},{\"value\":\"0101\",\"sj\":\"01\",\"name\":\"é€šä¿¡\"},{\"value\":\"0102\",\"sj\":\"01\",\"name\":\"Androidç³»ç»Ÿ\"},{\"value\":\"0103\",\"sj\":\"01\",\"name\":\"å¾®æœºåŸç†å’Œæ¥å£æŠ€æœ¯\"},{\"value\":\"0104\",\"sj\":\"01\",\"name\":\"å•ç‰‡æœºæŠ€æœ¯\"},{\"value\":\"0105\",\"sj\":\"01\",\"name\":\"C/C++\"},{\"value\":\"010101\",\"sj\":\"0101\",\"name\":\"Androidä¸­çš„ä¸²å£é€šä¿¡\",\"url\":\"https://dp2px.com/2019/05/30/serialport/\"},{\"value\":\"010102\",\"sj\":\"0101\",\"name\":\"Modbusçš„ASCIIå’ŒRTUé€šä¿¡\",\"url\":\"https://dp2px.com/2019/06/10/modbus-rtu/\"},{\"value\":\"010103\",\"sj\":\"0101\",\"name\":\"PCå’ŒAndroidæ¨¡æ‹Ÿå™¨ä¹‹é—´è™šæ‹Ÿä¸²å£é€šä¿¡\",\"url\":\"https://dp2px.com/2019/06/12/virtualserial/\"},{\"value\":\"010104\",\"sj\":\"0101\",\"name\":\"Androidä¸­ä½¿ç”¨MQTTåè®®é€šä¿¡\",\"url\":\"https://dp2px.com/2019/06/22/mqtt1/\"},{\"value\":\"010201\",\"sj\":\"0102\",\"name\":\"é€šè¿‡MediaScannerç†è§£JNIåŸç†\",\"url\":\"https://dp2px.com/2019/03/11/jni1/\"},{\"value\":\"010202\",\"sj\":\"0102\",\"name\":\"Androidç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹\",\"url\":\"https://dp2px.com/2019/03/12/systeminit/\"},{\"value\":\"010301\",\"sj\":\"0103\",\"name\":\"æ“ä½œç³»ç»Ÿå­¦ä¹ â€”â€”ä½•ä¸ºè™šæ‹Ÿ\",\"url\":\"https://dp2px.com/2019/03/08/operatingsystem1/\"},{\"value\":\"010302\",\"sj\":\"0103\",\"name\":\"Intel CPU å‘å±•ç®€å² [å¤–é“¾]\",\"url\":\"https://mp.weixin.qq.com/s/HZTRgtlmtxNYmJx3fnujPw\"},{\"value\":\"010401\",\"sj\":\"0104\",\"name\":\"ä»ç¬¬ä¸€è¡Œä»£ç åˆ°è·‘é©¬ç¯çš„åˆ¶ä½œ [æœ¬ç«™å…¬ä¼—å·]\",\"url\":\"https://mp.weixin.qq.com/s/DvFEv5s3BCP1UEc6Pmv5QA\"},{\"value\":\"010402\",\"sj\":\"0104\",\"name\":\"æµæ°´ç¯ç¨‹åºæ˜¯å¦‚ä½•å†™å…¥å•ç‰‡æœºçš„ [æœ¬ç«™å…¬ä¼—å·]\",\"url\":\"https://mp.weixin.qq.com/s/hhbaXbw0vM-q0nkzNrzIqw\"},{\"value\":\"010403\",\"sj\":\"0104\",\"name\":\"å•ç‰‡æœºç«Ÿç„¶ä¹Ÿå–œæ¬¢æˆ´æ‰‹è¡¨ [æœ¬ç«™å…¬ä¼—å·]\",\"url\":\"https://mp.weixin.qq.com/s/ZtR_evF8X5HCot6p0WSF_Q\"},{\"value\":\"010404\",\"sj\":\"0104\",\"name\":\"æ¥è®©å•ç‰‡æœºä¸ºä½ å”±ä¸€é¦–ä½ å–œæ¬¢çš„æ­Œ [æœ¬ç«™å…¬ä¼—å·]\",\"url\":\"https://mp.weixin.qq.com/s/sszbloHcisfIztNSMj4Mqg\"},{\"value\":\"010405\",\"sj\":\"0104\",\"name\":\"è®©æ•°ç ç®¡æ˜¾ç¤º4ä½ä»»æ„æ•°å­— [æœ¬ç«™å…¬ä¼—å·]\",\"url\":\"https://mp.weixin.qq.com/s/LeL0jYZeJtyyojrMpynkTg\"},{\"value\":\"010501\",\"sj\":\"0105\",\"name\":\"Cè¯­è¨€ä¸­æ ¸å¿ƒçŸ¥è¯†ç‚¹æ¢³ç†\",\"url\":\"https://dp2px.com/2019/03/21/cpp1/\"},{\"value\":\"010502\",\"sj\":\"0105\",\"name\":\"Cè¯­è¨€æ§åˆ¶å°å°æ¸¸æˆ--è´ªåƒè›‡\",\"url\":\"https://dp2px.com/2019/03/22/cpp2/\"},{\"value\":\"010502\",\"sj\":\"0105\",\"name\":\"Cè¯­è¨€æ ‡å‡†åº“æ¢³ç†\",\"url\":\"https://dp2px.com/2019/07/04/cpp3/\"},{\"value\":\"010502\",\"sj\":\"0105\",\"name\":\"å¦‚ä½•ä¼˜é›…çš„æ­å»ºCè¯­è¨€å­¦ä¹ ç¯å¢ƒ\",\"url\":\"https://dp2px.com/2019/07/06/cpp4/\"}]","link":"/json-data/frame-iot.json"},{"title":"","text":"[{\"tag\":\"Pythonå¯¼å›¾\",\"url\":\"https://www.policx.com/program/Python/mind/\",\"class\":\"is-warning\"},{\"tag\":\"HTTPçŠ¶æ€ç æ±‡æ€»\",\"url\":\"https://www.policx.com/program/%EF%A3%BF/http/\",\"class\":\"is-danger\"},{\"tag\":\"Linux\",\"url\":\"https://www.policx.com/program/Linux/linux/\",\"class\":\"is-danger\"},{\"tag\":\"Git\",\"url\":\"https://www.policx.com/program/Git/git/\",\"class\":\"is-success\"},{\"tag\":\"Markdown çš„è®¾è®¡å“²å­¦\",\"url\":\"https://www.policx.com/program/Markdown/markdown/\",\"class\":\"is-success\"},{\"tag\":\"Node.js\",\"url\":\"https://www.policx.com/program/JavaScript/node/\",\"class\":\"is-danger\"},{\"tag\":\"é è°±çš„iOS\",\"url\":\"https://www.policx.com/program/%EF%A3%BF/kaopu/\",\"class\":\"is-danger\"},{\"tag\":\"å–„ç”¨ä½³è½¯\",\"url\":\"https://www.policx.com/tags/å–„ç”¨ä½³è½¯/\",\"class\":\"is-success\"},{\"tag\":\"æŸ¥çœ‹æ›´å¤š\",\"url\":\"https://www.policx.com/tags/\",\"class\":\"is-white\"}]","link":"/json-data/hot-tags.json"},{"title":"","text":"[{\"value\":\"01\",\"sj\":\"-\",\"name\":\"å‰ç«¯å¼€å‘\"},{\"value\":\"0101\",\"sj\":\"01\",\"name\":\"WebåŸºç¡€\"},{\"value\":\"0102\",\"sj\":\"01\",\"name\":\"JavaScripté¢å‘å¯¹è±¡\"},{\"value\":\"0103\",\"sj\":\"01\",\"name\":\"å‰ç«¯æ¡†æ¶\"},{\"value\":\"010101\",\"sj\":\"0101\",\"name\":\"HTML\"},{\"value\":\"010102\",\"sj\":\"0101\",\"name\":\"CSS\"},{\"value\":\"010103\",\"sj\":\"0101\",\"name\":\"JavaScript\"},{\"value\":\"010104\",\"sj\":\"0101\",\"name\":\"DOMæ¨¡å‹\"},{\"value\":\"010105\",\"sj\":\"0101\",\"name\":\"ç»ƒä¹ æ¡ˆä¾‹\"},{\"value\":\"010106\",\"sj\":\"0101\",\"name\":\"å…¶ä»–\"},{\"value\":\"010201\",\"sj\":\"0102\",\"name\":\"JavaScripté¢å‘å¯¹è±¡ï¼ˆ1ï¼‰\",\"url\":\"https://dp2px.com/2018/10/19/web-js-object1/\"},{\"value\":\"010202\",\"sj\":\"0102\",\"name\":\"JavaScripté¢å‘å¯¹è±¡ï¼ˆ2ï¼‰\",\"url\":\"https://dp2px.com/2018/10/19/web-js-object2/\"},{\"value\":\"010203\",\"sj\":\"0102\",\"name\":\"JavaScripté¢å‘å¯¹è±¡ï¼ˆ3ï¼‰\",\"url\":\"https://dp2px.com/2018/10/20/web-js-object3/\"},{\"value\":\"010301\",\"sj\":\"0103\",\"name\":\"jQuery\"},{\"value\":\"010302\",\"sj\":\"0103\",\"name\":\"Bulma\"},{\"value\":\"010303\",\"sj\":\"0103\",\"name\":\"Vue.js\"},{\"value\":\"01010101\",\"sj\":\"010101\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ1ï¼‰HTMLåŸºç¡€çŸ¥è¯†\",\"url\":\"https://dp2px.com/2018/09/28/web-jichu/\"},{\"value\":\"01010102\",\"sj\":\"010101\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ20ï¼‰HTML5åŸºæœ¬ç»“æ„\",\"url\":\"https://dp2px.com/2018/10/17/web-html5-p1/\"},{\"value\":\"01010103\",\"sj\":\"010101\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ21ï¼‰HTML5çš„å…¶ä»–æ ‡ç­¾å’Œè¡¥å……\",\"url\":\"https://dp2px.com/2018/10/18/web-html5-p2/\"},{\"value\":\"01010201\",\"sj\":\"010102\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ2ï¼‰CSSåŸºç¡€çŸ¥è¯†\",\"url\":\"https://dp2px.com/2018/09/29/web-jichu-css/\"},{\"value\":\"01010202\",\"sj\":\"010102\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ3ï¼‰CSSåŸºç¡€çŸ¥è¯†\",\"url\":\"https://dp2px.com/2018/09/30/web-css2/\"},{\"value\":\"01010203\",\"sj\":\"010102\",\"name\":\"CSS3ä¸­çš„åŠ¨ç”»å±æ€§çª¥æ¢\",\"url\":\"https://dp2px.com/2019/07/24/web-css/\"},{\"value\":\"01010204\",\"sj\":\"010102\",\"name\":\"CSS åª’ä½“æŸ¥è¯¢å’Œå“åº”å¼æ–­ç‚¹\",\"url\":\"https://dp2px.com/2019/07/25/web-css3/\"},{\"value\":\"01010205\",\"sj\":\"010102\",\"name\":\"CSS flexboxå¼¹æ€§å¸ƒå±€\",\"url\":\"https://dp2px.com/2019/07/26/web-css4/\"},{\"value\":\"01010206\",\"sj\":\"010102\",\"name\":\"CSS å¤šèƒŒæ™¯å’Œæ¸å˜\",\"url\":\"https://dp2px.com/2019/07/29/web-css5/\"},{\"value\":\"01010207\",\"sj\":\"010102\",\"name\":\"CSS æ»¤é•œ\",\"url\":\"https://dp2px.com/2019/07/29/web-css6/\"},{\"value\":\"01010208\",\"sj\":\"010102\",\"name\":\"CSS èƒŒæ™¯æ··åˆæ¨¡å¼\",\"url\":\"https://dp2px.com/2019/07/30/web-css7/\"},{\"value\":\"01010301\",\"sj\":\"010103\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ4ï¼‰JavaScriptåŸºç¡€\",\"url\":\"https://dp2px.com/2018/10/01/web-js1/\"},{\"value\":\"01010302\",\"sj\":\"010103\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ5ï¼‰JavaScriptåŸºç¡€\",\"url\":\"https://dp2px.com/2018/10/01/web-js2/\"},{\"value\":\"01010303\",\"sj\":\"010103\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ7ï¼‰JavaScriptå°æ¡ˆä¾‹\",\"url\":\"https://dp2px.com/2018/10/03/web-demo1/\"},{\"value\":\"01010304\",\"sj\":\"010103\",\"name\":\"ç«‹å³æ‰§è¡Œå‡½æ•°å’Œæ¨¡å—åŒ–\",\"url\":\"https://dp2px.com/2019/07/12/web-js-object4/\"},{\"value\":\"01010401\",\"sj\":\"010104\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ6ï¼‰æµè§ˆå™¨å¯¹è±¡æ¨¡å‹DOM\",\"url\":\"https://dp2px.com/2018/10/02/web-dom/\"},{\"value\":\"01010501\",\"sj\":\"010105\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ8ï¼‰JavaScriptå®è·µæ¡ˆä¾‹\",\"url\":\"https://dp2px.com/2018/10/03/web-demo2/\"},{\"value\":\"01010502\",\"sj\":\"010105\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ9ï¼‰ä¸€ä¸ªé™æ€é¡µé¢Demo\",\"url\":\"https://dp2px.com/2018/10/08/web-boyahudong/\"},{\"value\":\"01010503\",\"sj\":\"010105\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ10ï¼‰JSå®è·µæ¡ˆä¾‹--é¼ æ ‡è·Ÿéš\",\"url\":\"https://dp2px.com/2018/10/13/web-jindouyun/\"},{\"value\":\"01010504\",\"sj\":\"010105\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ12ï¼‰JSå®è·µæ¡ˆä¾‹--ç•™è¨€æ¿\",\"url\":\"https://dp2px.com/2018/10/13/web-leaveword/\"},{\"value\":\"01010505\",\"sj\":\"010105\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ13ï¼‰JSå®è·µæ¡ˆä¾‹--è‡ªåŠ¨è½®æ’­å›¾ç‰‡\",\"url\":\"https://dp2px.com/2018/10/14/web-demo-autoimg/\"},{\"value\":\"01010506\",\"sj\":\"010105\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ14ï¼‰JSå®è·µæ¡ˆä¾‹--æ—‹è½¬æœ¨é©¬æ•ˆæœ\",\"url\":\"https://dp2px.com/2018/10/14/web-demo-routeimg/\"},{\"value\":\"01010601\",\"sj\":\"010106\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ11ï¼‰offsetå®¶æ—\",\"url\":\"https://dp2px.com/2018/10/13/web-offset/\"},{\"value\":\"01030101\",\"sj\":\"010301\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ15ï¼‰jQueryé€‰æ‹©å™¨å’ŒDOMæ“ä½œ\",\"url\":\"https://dp2px.com/2018/10/15/web-jquery1/\"},{\"value\":\"01030102\",\"sj\":\"010301\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ16ï¼‰jQueryæ“ä½œHTMLå±æ€§å’Œå…ƒç´ \",\"url\":\"https://dp2px.com/2018/10/16/web-jquery2/\"},{\"value\":\"01030103\",\"sj\":\"010301\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ17ï¼‰jQueryä¸­çš„äº‹ä»¶\",\"url\":\"https://dp2px.com/2018/10/16/web-jquery3/\"},{\"value\":\"01030104\",\"sj\":\"010301\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ18ï¼‰jQueryä¸­çš„åŠ¨ç”»\",\"url\":\"https://dp2px.com/2018/10/16/web-jquery4/\"},{\"value\":\"01030105\",\"sj\":\"010301\",\"name\":\"Webå‰ç«¯åŸºç¡€ï¼ˆ19ï¼‰jQueryå¯¹æ–‡æœ¬æ¡†å’Œè¡¨å•çš„æ“ä½œ\",\"url\":\"https://dp2px.com/2018/10/17/web-jquery5/\"},{\"value\":\"01030106\",\"sj\":\"010301\",\"name\":\"Ajaxåœ¨jQueryä¸­çš„ä½¿ç”¨\",\"url\":\"https://dp2px.com/2018/10/20/web-ajax/\"},{\"value\":\"01030201\",\"sj\":\"010302\",\"name\":\"CSS æ¡†æ¶ Bulma ä¸­æ–‡æ–‡æ¡£ï¼ˆç¿»è¯‘ï¼‰\",\"url\":\"https://dp2px.com/2019/06/05/bulma/\"},{\"value\":\"01030301\",\"sj\":\"010303\",\"name\":\"VueJsæºç å­¦ä¹ [1]--Flowç±»å‹æ£€æµ‹\",\"url\":\"https://dp2px.com/2019/07/17/vuejs/\"},{\"value\":\"01030302\",\"sj\":\"010303\",\"name\":\"VueJsæºç å­¦ä¹ [2]--æºç æ„å»º\",\"url\":\"https://dp2px.com/2019/07/17/vuejs2/\"},{\"value\":\"01030303\",\"sj\":\"010303\",\"name\":\"VueJså­¦ä¹ éšç¬”--æ¨¡æ¿è¯­æ³•\",\"url\":\"https://dp2px.com/2019/07/19/vuejs2-1/\"},{\"value\":\"01030304\",\"sj\":\"010303\",\"name\":\"VueJså­¦ä¹ éšç¬”--Styleç»‘å®šå’Œæ¡ä»¶æ¸²æŸ“\",\"url\":\"https://dp2px.com/2019/07/19/vuejs3/\"},{\"value\":\"01030305\",\"sj\":\"010303\",\"name\":\"VueJså­¦ä¹ éšç¬”--ç¬¬ä¸€ä¸ªVueå·¥ç¨‹\",\"url\":\"https://dp2px.com/2019/07/19/vuejs4/\"},{\"value\":\"01030306\",\"sj\":\"010303\",\"name\":\"VueJså­¦ä¹ éšç¬”--ç»„ä»¶åŒ–\",\"url\":\"https://dp2px.com/2019/07/20/vuejs5/\"},{\"value\":\"01030307\",\"sj\":\"010303\",\"name\":\"VueJså­¦ä¹ éšç¬”--æ’æ§½å’Œå¼‚æ­¥ç»„ä»¶\",\"url\":\"https://dp2px.com/2019/07/22/vuejs6/\"},{\"value\":\"01030308\",\"sj\":\"010303\",\"name\":\"VueJs + Elements + Axios æˆ‘çš„ä¹¦ç­¾é¡µ\",\"url\":\"https://dp2px.com/2019/07/23/vuejs7/\"}]","link":"/json-data/frame-web.json"},{"title":"","text":"[{\"img\":\"https://gitee.com/policx/im/raw/master/images/2D60KQ.jpg\",\"url\":\"https://www.policx.com/program/Python/mind/\",\"alt\":\"Pythonå¯¼å›¾\"},{\"img\":\"https://gitee.com/policx/im/raw/master/images/96tChd.jpeg\",\"url\":\"https://www.policx.com/Software/DragAndDrop/\",\"alt\":\"ã€Œæ‹–æ”¾ã€Mac çš„åº•å±‚èƒ½åŠ›ï¼Œä¹Ÿæ˜¯æ•ˆç‡ç¥æŠ€\"},{\"img\":\"https://gitee.com/policx/im/raw/master/images/jaKjA6.jpg\",\"url\":\"https://www.policx.com/notes/programmer/\",\"alt\":\"ä¸ºä»€ä¹ˆæˆä¸ºä¸€åç¨‹åºå‘˜è¿™ä¹ˆéš¾ï¼Ÿ\"},{\"img\":\"https://gitee.com/policx/im/raw/master/images/qzQ6eH.jpeg\",\"url\":\"https://www.policx.com/notes/macbook/\",\"alt\":\"Mac æŠ€å·§\"},{\"img\":\"https://gitee.com/policx/im/raw/master/images/IKefJD.jpg\",\"url\":\"https://www.policx.com/program/%EF%A3%BF/http/\",\"alt\":\"HTTPçŠ¶æ€ç æ±‡æ€»\"},{\"img\":\"https://gitee.com/policx/im/raw/master/images/7DdxoR.jpg\",\"url\":\"https://www.policx.com/program/%EF%A3%BF/iphone/\",\"alt\":\"iPhoneå¼€å‘è€…é€‰é¡¹\"}]","link":"/json-data/main-banner.json"},{"title":"ç•™è¨€æ¿","text":"åœ¨ä¸€åˆ‡å˜å¥½ä¹‹å‰ï¼Œæˆ‘ä»¬æ€»è¦ç»å†ä¸€äº›ä¸å¼€å¿ƒçš„æ—¥å­ï¼Œè¿™æ®µæ—¥å­ä¹Ÿè®¸å¾ˆé•¿ï¼Œä¹Ÿè®¸åªæ˜¯ä¸€è§‰é†’æ¥ï¼Œæ‰€ä»¥è€å¿ƒç‚¹ï¼Œç»™å¥½è¿ä¸€ç‚¹æ—¶é—´ã€‚","link":"/message/index.html"},{"title":"","text":"Powered by æ°´å¯’çš„åšå®¢ å‰ç«¯çŸ¥è¯†ä½“ç³» AndroidçŸ¥è¯†ä½“ç³» ç‰©è”ç½‘å’Œæ¥å£ä½“ç³» å°æç¤ºï¼šä½ å¯ä»¥ç‚¹å‡»åˆ†ç±»æ ‘çš„ å¶å­èŠ‚ç‚¹ çš„å°åœ†ç‚¹ç›´æ¥æŸ¥çœ‹å¯¹åº”çš„æ–‡ç« å†…å®¹ã€‚ function transData(t, a, i, e) { for (var o = [], n = {}, l = a, r = i, d = e, s = 0, c = 0, h = t.length; s < h; s++) n[t[s][l]] = t[s]; for (; c < h; c++) { var m = t[c], g = n[m[r]]; g ? (!g[d] && (g[d] = []), g[d].push(m)) : o.push(m) } return o } function clickNode(t, a, i) { void 0 != i && \"\" !== i && window.open(i) } var webChart = echarts.init(document.getElementById(\"book-web\")); webChart.showLoading(), $.get(\"https://dp2px.com/json-data/frame-web.json\", function (t) { webChart.hideLoading(), echarts.util.each(t.children, function (t, a) { a % 2 === 0 && (t.collapsed = !0) }), webChart.setOption(option = { tooltip: { trigger: \"item\", triggerOn: \"mousemove\" }, series: [{ type: \"tree\", data: transData(t, \"value\", \"sj\", \"children\"), top: \"1%\", left: \"100px\", bottom: \"1%\", right: \"40%\", symbol: \"emptyCircle\", symbolSize: 10, label: { normal: { position: \"left\", verticalAlign: \"middle\", align: \"right\", fontSize: 14 } }, leaves: { label: { normal: { position: \"right\", verticalAlign: \"middle\", align: \"left\" } } }, initialTreeDepth: 3, expandAndCollapse: !0, animationDuration: 550, animationDurationUpdate: 750 }] }), webChart.on(\"click\", function (t) { var a = t.data.name, i = t.data.value, e = t.data.url; clickNode(a, i, e) }) }); var androidChart = echarts.init(document.getElementById(\"book-android\")); androidChart.showLoading(), $.get(\"https://dp2px.com/json-data/frame-android.json\", function (t) { androidChart.hideLoading(), echarts.util.each(t.children, function (t, a) { a % 2 === 0 && (t.collapsed = !0) }), androidChart.setOption(option = { tooltip: { trigger: \"item\", triggerOn: \"mousemove\" }, series: [{ type: \"tree\", data: transData(t, \"value\", \"sj\", \"children\"), top: \"1%\", left: \"120px\", bottom: \"1%\", right: \"40%\", symbolSize: 10, label: { normal: { position: \"left\", verticalAlign: \"middle\", align: \"right\", fontSize: 14 } }, leaves: { label: { normal: { position: \"right\", verticalAlign: \"middle\", align: \"left\" } } }, initialTreeDepth: 3, expandAndCollapse: !0, animationDuration: 550, animationDurationUpdate: 750 }] }), androidChart.on(\"click\", function (t) { var a = t.data.name, i = t.data.value, e = t.data.url; clickNode(a, i, e) }) }); var iotChart = echarts.init(document.getElementById(\"book-iot\")); iotChart.showLoading(), $.get(\"https://dp2px.com/json-data/frame-iot.json\", function (t) { iotChart.hideLoading(), echarts.util.each(t.children, function (t, a) { a % 2 === 0 && (t.collapsed = !0) }), iotChart.setOption(option = { tooltip: { trigger: \"item\", triggerOn: \"mousemove\" }, series: [{ type: \"tree\", data: transData(t, \"value\", \"sj\", \"children\"), top: \"1%\", left: \"150px\", bottom: \"1%\", right: \"40%\", symbolSize: 10, label: { normal: { position: \"left\", verticalAlign: \"middle\", align: \"right\", fontSize: 14 } }, leaves: { label: { normal: { position: \"right\", verticalAlign: \"middle\", align: \"left\" } } }, initialTreeDepth: 3, expandAndCollapse: !0, animationDuration: 550, animationDurationUpdate: 750 }] }), iotChart.on(\"click\", function (t) { var a = t.data.name, i = t.data.value, e = t.data.url; clickNode(a, i, e) }) })","link":"/mind/index.html"},{"title":"","text":"","link":"/music/index.html"},{"title":"","text":"Powered by æ°´å¯’çš„åšå®¢ è¯´æ˜ï¼šå¦‚æœæ²¡æœ‰æ˜¾ç¤ºå°è¯•åˆ·æ–°ä¸€æ¬¡ï¼Œä»¥ä¸Šå›¾ç‰‡æ•°æ®å‡æ¥è‡ªäºï¼šhttps://www.apiopen.top/ ï¼Œå¦‚æœ‰ä¾µæƒå¾ˆæŠ±æ­‰è¯·åŠæ—¶å‘ŠçŸ¥ç«™é•¿ã€‚ $(function () { $.getJSON(\"https://api.apiopen.top/getImages?page=0&&count=50\", function (e) { console.log(e); for (var t = 0; t < e.result.length; t++)$(\"#out-image-gallery\").append(''), $(\".justified-gallery2\").justifiedGallery({ rowHeight: 300, margins: 4, randomize: !0 }) }) })","link":"/photos/index.html"}],"posts":[{"title":"Hexo front-matter æ€ä¹ˆå†™ï¼Ÿ","text":"Front-matter æ˜¯æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ â€” åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ã€‚ å‚æ•° æè¿° é»˜è®¤å€¼ layout å¸ƒå±€ title æ ‡é¢˜ date å»ºç«‹æ—¥æœŸ æ–‡ä»¶å»ºç«‹æ—¥æœŸ updated æ›´æ–°æ—¥æœŸ æ–‡ä»¶æ›´æ–°æ—¥æœŸ comments å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½ true/false comment Icarus ä¸»é¢˜å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½ true/false thumbnail å°é¢å›¾ Icarus ä¸»é¢˜æœ‰æ•ˆ url feature å°é¢å›¾ Gridea ä¸»é¢˜æœ‰æ•ˆ url password åŠ å¯† hideInList åˆ—è¡¨ä¸­éšè— true/false published å‘è¡¨ true/false tags æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ toc å¼€å¯ç›®å½• true/false categories åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ permalink è¦†ç›–æ–‡ç« ç½‘å€ link ç‚¹å‡»æ–‡ç« è·³è½¬åœ°å€","link":"/blog/front-matter/"},{"title":"Hexo+Github+Netlifyéƒ¨ç½²ä¸ªäººåšå®¢","text":"Netlify æ˜¯ä¸€ä¸ªæä¾›é™æ€èµ„æºç½‘ç»œæ‰˜ç®¡çš„ç»¼åˆå¹³å°ï¼Œæä¾›CIæœåŠ¡ï¼Œèƒ½å¤Ÿå°†æ‰˜ç®¡ GitHubï¼ŒGitLab ç­‰ç½‘ç«™ä¸Šçš„ Jekyllï¼ŒHexoï¼ŒHugo ç­‰ä»£ç è‡ªåŠ¨ç¼–è¯‘å¹¶ç”Ÿæˆé™æ€ç½‘ç«™ã€‚ä½¿ç”¨githubåˆ†æ”¯å’ŒnetlifyæœåŠ¡çš„æ–¹å¼éƒ¨ç½²hexoï¼Œæ­å»ºä¸€å¥—å¯è·¨å¹³å°ã€å¯å¤šäººå†™ä½œ,éšæ—¶éšåœ°å‘å¸ƒç¼–è¾‘æ–‡å­—,å¯è¢«ç™¾åº¦æ”¶å½•,å¯è‡ªå®šåŸŸå,å…è´¹HTTPSçš„åšå®¢ç³»ç»Ÿï¼ï¼ ä»€ä¹ˆæ˜¯Hexo Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚ æ›´å¤šåŸºç¡€çŸ¥è¯†å¯å‚è€ƒhexoå®˜ç½‘ï¼Œæœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹æ˜¯ä»‹ç»éƒ¨ç½²çš„æŠ€å·§ã€‚å¦‚æœå·²æŒæ¡hexoçš„åŸºç¡€çŸ¥è¯†ï¼Œå¯ç›´æ¥è·³åˆ°éƒ¨ç½²ç« èŠ‚è¿›è¡Œæµè§ˆã€‚ å®‰è£…å®‰è£…hexoä¹‹å‰éœ€è¦å®‰è£…ä¸€ä¸‹ç¯å¢ƒï¼š Node.js Git å®‰è£…å®Œnodeåç”±äºnpmæ˜¯è‡ªå¸¦çš„ï¼Œå¯èƒ½ç‰ˆæœ¬æœ‰äº›è½åï¼Œéœ€è¦å…ˆå°†è‡ªèº«å‡çº§ä¸€ä¸‹ã€‚ 1npm -g install npm ç”±äºå›½å†…äº’è”ç½‘ç¯å¢ƒï¼Œå¯¼è‡´npmä¸‹è½½å¤±è´¥ï¼Œå¯ä½¿ç”¨npmæ·˜å®é•œåƒcnpm 1npm install -g cnpm --registry=https://registry.npm.taobao.org å¦‚é‡åˆ°npmä¸‹è½½ç»„ä»¶å¤±è´¥æ—¶ï¼Œå¯ä½¿ç”¨cnpmè¿›è¡Œä¸‹è½½ï¼Œåªéœ€å°†npmæ›¿æ¢ä¸ºcnpmï¼Œä¸‹æ–¹ä»£ç å°†ç»§ç»­ä½¿ç”¨npmï¼Œè¯·æ ¹æ®è‡ªèº«ç½‘ç»œç¯å¢ƒé€‰æ‹©é€‚åˆçš„ä½¿ç”¨ã€‚ä»¥ä¸Šç¯å¢ƒå¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œä¸‹é¢å°±å¼€å§‹å®‰è£…hexoäº† 1npm install -g hexo-cli ä¹‹ååœ¨å‘½ä»¤è¡Œä¸­æµ‹è¯•è¾“å…¥ 1hexo version åˆ›å»ºä¸ªäººç«™ç‚¹å®‰è£…hexoå®Œæˆåï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¯¥ä½¿ç”¨hexoæ¥åˆ›å»ºè‡ªå·±çš„ä¸ªäººç«™ç‚¹äº†ã€‚ 123hexo init &lt;folder&gt; #ä½¿ç”¨hexoå‘½ä»¤åœ¨æŒ‡å®šçš„&lt;folder&gt;æ–‡ä»¶å¤¹ä¸‹åˆå§‹åŒ–åˆ›å»ºä¸€ä¸ªåšå®¢é¡¹ç›®cd &lt;folder&gt; #è¿›å…¥åˆ›å»ºå¥½çš„é¡¹ç›®ç›®å½•npm install #ä½¿ç”¨npmå®‰è£…æ‰€éœ€ä¾èµ–ã€‚ æ–°å»ºå®Œæˆåè¯¦ç»†çš„ç›®å½•å«ä¹‰ä»¥åŠé…ç½®æ•™ç¨‹ï¼Œè¯·å‚é˜…hexoå®˜ç½‘æ–‡æ¡£çš„ä»‹ç»æœ¬ç¯‡æ–‡ç« æš‚ä¸èµ˜è¿°ã€‚ä¸Šé¢ä»£ç æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å°±å·²ç»åˆ›å»ºå¥½äº†ä¸€ä¸ªè‡ªå·±çš„ä¸ªäººåšå®¢äº†ï¼Œä¸‹é¢æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨hexoçš„å‘½ä»¤å·¥å…·ç”Ÿæˆåšå®¢å¹¶ç”¨è‡ªå¸¦çš„æœåŠ¡å™¨æ¨¡å—å¯åŠ¨ï¼Œé¢„è§ˆä¸‹æˆ‘ä»¬çš„åšå®¢ã€‚ 123hexo clean #æ¸…ç†å„ç§ç¼“å­˜å’Œæ—§æ–‡ä»¶hexo g #ç”Ÿæˆé™æ€æ–‡ä»¶hexo s #å¼€å¯æœåŠ¡å™¨é¢„è§ˆ æ‰§è¡Œå®Œ hexo s åå‘½ä»¤è¡Œçª—å£å°†æç¤ºæ‚¨å¦‚ä¸‹ä¿¡æ¯ 123456789INFO Start processingWARN ===============================================================WARN ========================= ATTENTION! ==========================WARN ===============================================================WARN NexT repository is moving here: https://github.com/theme-nextWARN ===============================================================WARN It's rebase to v6.0.0 and future maintenance will resume thereWARN ===============================================================INFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop. å…¶ä¸­æœåŠ¡å™¨é¢„è§ˆåœ°å€å°±æ˜¯ http://localhost:4000/è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ä¸ªäººåšå®¢åˆ›å»ºå¥½äº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è¿›å…¥éƒ¨ç½²ç¯èŠ‚ã€‚ éƒ¨ç½²è¿›å…¥è¿™é‡Œæ‰æ˜¯æˆ‘ä»¬çš„é‡ç‚¹ç¯èŠ‚ï¼Œå› ä¸ºå¯¹äºhexoæ¥è¯´å…¥é—¨çº§çš„æ•™ç¨‹éå¸ƒæ»¡ç½‘ï¼Œéšä¾¿æœä¸€ä¸‹åˆ°å¤„éƒ½æ˜¯ï¼Œä½†æ˜¯æ¶‰åŠåˆ°ä¸€äº›å…³é”®çš„ç¯èŠ‚ï¼Œæˆ–è€…æ˜¯é«˜çº§ç‚¹çš„æ•™ç¨‹ç”¨æ³•ï¼Œå°±å¾ˆå°‘ï¼Œå®˜ç½‘æ–‡æ¡£ä¹Ÿä»‹ç»çš„å«ç³Šå…¶è¾ï¼Œä»¥è‡³äºæœ‰äº›åœ°æ–¹æˆ‘ä»¬éƒ½æé”™äº†ç”¨æ³•ï¼Œç”šè‡³æ ¹æœ¬å°±ä¸æ™“å¾—æ€ä¹ˆå»ç”¨ã€‚é‚£ä¹ˆè¿™é‡Œé’ˆå¯¹éƒ¨ç½²ï¼Œæˆ‘è¿›è¡Œé‡ç‚¹ä»‹ç»ï¼Œå¹¶ä¸”ä»¥æˆ‘æœ¬èº«çš„åšå®¢å®æˆ˜éƒ¨ç½²ç»éªŒä¸ºæ¡ˆä¾‹ï¼Œæ¥è®²è§£hexoçš„é«˜çº§éƒ¨ç½²æ–¹å¼ï¼Œæ‰“é€ å¯è·¨å¹³å°ï¼Œå¤šäººå†™ä½œç¼–è¾‘æ–‡ç« ï¼Œå¯CDNåŠ é€Ÿï¼Œå¯HTTPSï¼Œå¯ç™¾åº¦æ”¶å½•ï¼Œå¯è‡ªå®šä¹‰åŸŸåï¼Œæ— éœ€å¤‡æ¡ˆï¼Œæ— éœ€ä¸€åˆ†é’±è´¹ç”¨çš„éƒ¨ç½²æ–¹æ¡ˆã€‚æ¥ä¸‹æ¥æˆ‘åˆ†æ­¥éª¤çš„è·Ÿå¤§å®¶æ¥ä»‹ç»æˆ‘çš„éƒ¨ç½²æ–¹æ¡ˆã€‚ ä»€ä¹ˆæ˜¯éƒ¨ç½²ç»è¿‡ç¬¬ä¸€ä¸ªç« èŠ‚ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ hexo g å’Œ hexo s å‘½ä»¤ç”Ÿæˆå¹¶å¼€å¯æœåŠ¡åï¼Œæˆ‘ä»¬æœ¬åœ°è®¿é—®çš„æµ‹è¯•åŸŸåå®é™…æ˜¯æŒ‡å‘äº†æˆ‘ä»¬å½“å‰ç›®å½•ä¸‹çš„ public ç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ hexo g å‘½ä»¤ç”Ÿæˆçš„é™æ€æ–‡ä»¶å°±æ˜¯ public ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œéƒ¨ç½²çš„è¿‡ç¨‹å°±æ˜¯å°†è¿™ä¸ª public ç›®å½•ä¸‹çš„æ–‡ä»¶æ”¾åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šè¿™æ ·å°±å®Œæˆäº†éƒ¨ç½²ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©netlifyæœåŠ¡éƒ¨ç½²Netlify æœ‰å¦‚ä¸‹çš„åŠŸèƒ½: èƒ½å¤Ÿæ‰˜ç®¡æœåŠ¡ï¼Œå…è´¹ CDN èƒ½å¤Ÿç»‘å®šè‡ªå®šä¹‰åŸŸå èƒ½å¤Ÿå¯ç”¨å…è´¹çš„TLSè¯ä¹¦ï¼Œå¯ç”¨HTTPS æ”¯æŒè‡ªåŠ¨æ„å»º æä¾› Webhooks å’Œ API ä½¿ç”¨ Netlifyé¦–å…ˆä½¿ç”¨ä½ çš„ GitHub è´¦å·ç™»é™† Netlifyï¼Œç™»é™†åè¿›å…¥ç©ºé—´ç®¡ç†ä¸­å¿ƒï¼Œï¼Œç‚¹å‡»New site from gitæŒ‰é’®å¼€å§‹éƒ¨ç½²ä½ çš„åšå®¢ï¼š ç„¶åæ ¹æ®è‡ªå·±çš„æ‰˜ç®¡å¹³å°ï¼Œå¯ä»¥é€‰æ‹©GitHubã€GitLabæˆ–è€…BitBucketï¼ˆè¿™é‡Œä»¥ GitHub ä¸ºä¾‹ï¼‰ï¼š ç‚¹å‡»GitHubä¹‹åä¼šå¼¹å‡ºä¸€ä¸ªè®©ä½ æˆæƒçš„çª—å£ï¼Œç»™ Netlify æˆæƒåï¼Œå°±ä¼šè‡ªåŠ¨è¯»å–ä½  GitHub çš„ä»“åº“ï¼š é€‰æ‹©ä»“åº“åï¼ŒNetlify ä¼šè‡ªåŠ¨è¯†åˆ«åˆ° hexoï¼Œå¹¶å¡«å…¥ç›¸å…³ä¿¡æ¯ï¼Œè¿™æ—¶å€™åªè¦æ— è„‘ç‚¹å‡» Deploy siteå°±å¯ä»¥ï¼š ç¨ç­‰ä¸€æ®µæ—¶é—´å°±å¯ä»¥çœ‹åˆ°ä½ çš„åšå®¢å·²ç»éƒ¨ç½²æˆåŠŸï¼Œå¹¶ä¸”ç»™ä½ åˆ†é…äº†ä¸€ä¸ªäºŒçº§åŸŸåï¼ˆå…ˆè®°ä¸‹è¿™ä¸ªäºŒçº§åŸŸåï¼‰ï¼š å¦‚æœä½ è¦ç»‘å®šè‡ªå·±ä¹°çš„åŸŸåï¼Œå°±ç›´æ¥ç‚¹å‡»ç¬¬äºŒæ­¥Set up custom domainã€‚æ·»åŠ è‡ªå®šä¹‰åŸŸåï¼Œå…ˆæ·»åŠ ä¸å¸¦wwwçš„åŸŸåä½œä¸ºä¸»åŸŸåï¼Œå®ƒä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªwww.domain.ccé‡å®šå‘åˆ°domain.ccï¼š è®¾ç½®å®Œï¼ŒNetlify ä¼šæç¤ºä½ å»åŸŸåDNSè§£æå¤„ï¼Œä¿®æ”¹åŸŸåçš„CNAMEè®°å½•ï¼š å»ä½ çš„ DNS è§£ææä¾›å•†é‡Œé¢ï¼Œå°† CNAME è®°å½•å€¼æ›´æ”¹ä¸º Netlify ç»™ä½ çš„äºŒçº§åŸŸåï¼š ä¿®æ”¹å®Œï¼Œå°±å¯ä»¥çœ‹åˆ° Netlify çŠ¶æ€æ›´æ–°ï¼š Netlifyé»˜è®¤ä¼šå¯ç”¨ HTTPSï¼Œè€Œä¸”ä¸èƒ½å…³é—­ï¼Œå¦‚æœä½ æ²¡æœ‰è¯ä¹¦ï¼Œå®ƒä¼šå¸®ä½ å»Letâ€™s Encryptç”³è¯·å…è´¹çš„è¯ä¹¦ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±ç”³è¯·è¯ä¹¦ï¼Œä»¥é˜¿é‡Œå…è´¹çš„ ssl è¯ä¹¦ä¸ºä¾‹ï¼Œä¸‹è½½è¯ä¹¦è¯ä¹¦æ—¶é€‰æœåŠ¡å™¨ç±»å‹ä¸ºApacheçš„è¯ä¹¦ï¼ŒNetlify é…ç½®å¡«å†™å¦‚ä¸‹ï¼š è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸Šé¢æµç¨‹èµ°å®Œï¼Œå…¶å®å·²ç»å¯ä»¥è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œåªè¦ push äº†ä»£ç ï¼Œå°±ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä½ å¯ä»¥åœ¨ä¸‹é¢åœ°æ–¹æŸ¥çœ‹éƒ¨ç½²çš„ä¿¡æ¯ï¼š å¦‚æœä½ ä¸æƒ³ç”¨ Netlify çš„æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ç”¨ [Circle][14] çš„æœåŠ¡ï¼Œå®ƒå’Œ GitHub å…³è”ï¼Œæä¾› CI æœåŠ¡ã€‚ä½ éœ€è¦åšçš„äº‹åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª.circleæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ–°å»ºä¸€ä¸ªconfig.ymlæ–‡ä»¶ï¼ˆæ³¨æ„æŠŠç›¸å…³ä¿¡æ¯æ›¿æ¢æˆè‡ªå·±çš„ï¼‰ï¼š # Javascript Node CircleCI 2.0 configuration file # # Check https://circleci.com/docs/2.0/language-javascript/ for more details # version: 2 jobs: build: docker: # specify the version you desire here - image: circleci/node:7.10 # Specify service dependencies here if necessary # CircleCI maintains a library of pre-built images # documented at https://circleci.com/docs/2.0/circleci-images/ # - image: circleci/mongo:3.4.4 working_directory: ~/repo steps: - checkout # Download and cache dependencies - restore_cache: keys: - v1-dependencies-{{ checksum \"package.json\" }} # fallback to using the latest cache if no exact match is found - v1-dependencies- - add_ssh_keys: fingerprints: - &quot;ä½ çš„ ssh keyçš„fingerprints&quot; - run: git config --global user.email &quot;user@domain.com&quot; - run: git config --global user.name &quot;user&quot; - run: npm install - run: sudo npm install hexo-cli -g - save_cache: paths: - node_modules key: v1-dependencies-{{ checksum \"package.json\" }} # run tests! - run: hexo clean - run: hexo g - run: hexo dè¿™æ—¶å€™ï¼Œä½ åªè¦æäº¤ä»£ç åˆ°è¿™ä¸ªä»“åº“ï¼Œcircle å°±ä¼šå¸®ä½ è‡ªåŠ¨éƒ¨ç½²äº†ã€‚ æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨Netlifyéƒ¨ç½²åšå®¢åŠéƒ¨ç½²è‡ªåŠ¨åŒ– hexoé«˜çº§éƒ¨ç½²æ•™ç¨‹,åˆ©ç”¨github+netlifyéƒ¨ç½²","link":"/blog/netlify/"},{"title":"hexo-theme-icarus","text":"Hexo-theme-icarus æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ Hexo ä¸»é¢˜ï¼Œå¼€å‘è€… Ruipeng Zhang åŒæ—¶è¿˜ç»´æŠ¤äº† hexo-theme-hueman å’Œ hexo-theme-minos ä¸¤ä¸ªé¡¹ç›®ã€‚ icarus æ˜¯ä¸€ä¸ªä¸‰æ ç»“æ„çš„è‡ªé€‚åº”ä¸»é¢˜ï¼Œé¢„ç½®äº†å¤§é‡ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿ä½¿ç”¨è€…å¿«é€Ÿå»ºç«™ã€‚æ•´ä½“é£æ ¼ç®€çº¦ï¼Œé€‚åˆå„ç§ç±»å‹çš„ç«™ç‚¹ï¼Œæ— è®ºæ˜¯æŠ€æœ¯æ–‡ç« ï¼Œè¿˜æ˜¯æ‘„å½±ä½³ä½œï¼Œéƒ½å¯ä»¥å®Œç¾æ‰¿è½½ã€‚ æ•ˆæœå›¾ å®‰è£…åœ¨å‘½ä»¤è¡Œä¸­cdè‡³åšå®¢æ ¹ç›®å½•ï¼ŒåŠ è½½ä¸»é¢˜ï¼š 1git clone https://github.com/ppoffice/hexo-theme-icarus.git themes/icarus åŸºç¡€é…ç½®é¦–å…ˆï¼Œè¦åœ¨åšå®¢æ ¹ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­åšä¸¤ä»¶äº‹æƒ…ï¼š è®¾ç½®è¯­è¨€: language: zh-CN è®¾ç½®ä¸»é¢˜ä¸º icarus: theme: icarus icarus ä¸ºæˆ‘ä»¬é¢„ç½®äº†å¤šè¾¾ 12 ç§è¯­è¨€ï¼Œé»˜è®¤æ˜¯è‹±æ–‡ã€‚ä¸€å¼€å§‹æˆ‘æ²¡æœ‰è®¾ç½®è¯­è¨€ï¼Œç”µè„‘ä¸Šæ‰“å¼€ä½¿ç”¨çš„æ˜¯è‹±æ–‡ï¼Œä½†æ˜¯æ‰‹æœºä¸Šçœ‹å°±æ˜¯ä¸€ç§ç±»ä¼¼è‘¡è„ç‰™è¯­çš„æ–‡å­—ã€‚æ²¡æœ‰æ·±ç©¶åŸå› ï¼Œæ‰€ä»¥è¿˜æ˜¯æŒ‰ç…§åšå®¢çš„å—ä¼—ä»¥åŠå¹³æ—¶çš„å–œå¥½è®¾ç½®ä¸€ä¸‹è¯­è¨€ï¼Œzh-CNæ˜¯ç®€ä½“ä¸­æ–‡ã€‚ icarus çš„æ–‡ä»¶ç»“æ„å…ˆæ¥çœ‹çœ‹ icarus ä¸»é¢˜çš„æ–‡ä»¶ç»“æ„å§ï¼Œè®©æˆ‘ä»¬å‡†å¤‡å¥½å°–å«å£°ï¼ 123456789101112131415â”œâ”€includesâ”œâ”€languagesâ”œâ”€layoutâ”‚ â”œâ”€commentâ”‚ â”œâ”€commonâ”‚ â”œâ”€donateâ”‚ â”œâ”€pluginâ”‚ â”œâ”€searchâ”‚ â”œâ”€shareâ”‚ â””â”€widgetâ”œâ”€sriptsâ””â”€source â”œâ”€css â”œâ”€images â””â”€js ä»”ç»†è§‚å¯Ÿæ¸²æŸ“æ–‡ä»¶ layout ç›®å½•ï¼Œå°±å¯ä»¥å‘ç° icarus çš„å¼ºå¤§äº†ï¼Œè¯„è®ºã€æèµ ã€æœç´¢ã€åˆ†äº«ä»¥åŠè¯¸å¤šç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œéƒ½å·²ç»é›†æˆå¥½å•¦ï¼å†è¯´ä¸€éï¼Œé›†æˆå¥½å•¦ï¼icarus çš„ç®€ä¸­ç¿»è¯‘ç›¸å¯¹ä¸­è§„ä¸­çŸ©ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„æ–‡æ¡ˆé£æ ¼ä¿®æ”¹ languages ç›®å½•ä¸‹çš„ zh-CN.yml æ–‡ä»¶ã€‚ _config.yml æ–‡ä»¶é…ç½®é¦–æ¬¡åœ¨åšå®¢æ ¹ç›®å½•æ‰§è¡Œ hexo clean æˆ–è€… hexo g éƒ½ä¼šè§¦å‘ icarus è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª _config.yml æ–‡ä»¶ï¼Œæˆ‘ä»¬é€ä¸€è¯´æ˜ã€‚ logologo ä¼šå±•ç¤ºåœ¨é¡¶éƒ¨å¯¼èˆªæ çš„æœ€å·¦ä¾§ä»¥åŠåº•éƒ¨çš„footeråŒºåŸŸï¼Œå¤§å®¶å¯ä»¥æ›¿æ¢ source/images/ ä¸‹çš„ logo æ–‡ä»¶ï¼Œä½¿ç”¨ svg æˆ–è€… png æ ¼å¼çš„éƒ½å¯ä»¥ã€‚ç ”ç©¶æºç å‘ç°ï¼Œè¿™ä¸ªåœ°æ–¹ç»™æ²¡æœ‰ logo çš„åŒå­¦ä¿ç•™äº†ä¸€å¥—æ–‡å­—æ–¹æ¡ˆï¼š /layout/common/navbar.ejs12345&lt;% if (has_config('logo.text') &amp;&amp; get_config('logo.text')) { %&gt; &lt;%= get_config('logo.text') %&gt;&lt;% } else { %&gt; &lt;img src=\"&lt;%- url_for(get_config('logo')) %&gt;\" alt=\"&lt;%= get_config('title') %&gt;\" height=\"28\"&gt;&lt;% } %&gt; ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç»™ logo æ·»åŠ  text å±æ€§ï¼Œå°±ä¼šä¼˜å…ˆå±•ç¤ºé¢„è®¾æ–‡å­—ä½œä¸º logoï¼š 12logo: text: your name è¿™å¯¹äºä¸ä¼šç”» logo çš„åŒå­¦æ¥è¯´æ— ç–‘æ˜¯ä¸ªå¤§å¥½æ¶ˆæ¯äº†ï¼š è¯„è®ºç³»ç»Ÿicarus é¢„ç½®äº† Changyan Disqus Facebook Gitment Gitalk Isso LiveRe å’Œ Valine å…«å¤§ä¸»æµè¯„è®ºæ’ä»¶ã€‚ è¿™é‡Œä»¥æˆ‘ä½¿ç”¨çš„ Valine ä¸ºä¾‹ã€‚é¦–å…ˆåœ¨ LeanCloud æ³¨å†Œä¸€ä¸ªå…è´¹çš„å¼€å‘è´¦å·ï¼Œæ–°å»ºä¸€ä¸ªæ–°åº”ç”¨ï¼Œå¹¶æŠŠ appid å’Œ appkey é…ç½®åœ¨å¯¹åº”éƒ¨åˆ†ï¼š 1234567comment: type: valine app_id: # (required) LeanCloud application id app_key: # (required) LeanCloud application key notify: # (optional) receive email notification verify: # (optional) show verification code placeholder: # (optional) comment box placeholder text å…¶ä½™çš„ä¸‰é¡¹é€‰å¡«ï¼Œè¿™æ ·å°±å®Œæˆäº† Valine çš„åŸºæœ¬é…ç½®äº†ã€‚æ­¤å¤–ï¼ŒValine åŒæ­¥ Gravatar å¤´åƒï¼Œåªè¦åœ¨è¯„è®ºçš„æ—¶å€™ç•™ä¸‹é‚®ç®±ï¼Œå°±ä¼šå±•ç¤ºä½ ç‹¬ä¸€æ— äºŒçš„å¤´åƒå’¯ï¼ æ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœæœ‰çš„æ–‡ç« ä¸å¸Œæœ›åˆ«äººè¯„è®ºï¼Œä½†æ˜¯æˆ‘ä»¬åˆå¸Œæœ›æŠŠæ•´ä¸ªç«™ç‚¹çš„è¯„è®ºå…³é—­çš„è¯ï¼Œå°±éœ€è¦å¯¹æŒ‡å®šæ–‡ç« è¿›è¡Œè¯„è®ºå…³é—­æ“ä½œäº†ã€‚æ“ä½œä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨æ–‡ç«  markdown æ–‡ä»¶çš„ front-matter åŒºåŸŸè®¾ç½® comments comment ä¸º false å³å¯ï¼š æ³¨æ„ï¼šæ˜¯ comment æ²¡æœ‰ s 1234---title: article titlecomment: false--- æ‰“èµä½œä¸ºç¨‹åºå‘˜çš„æ”¶å…¥æ¥æºä¹‹ä¸€ï¼Œæ‰“èµæ˜¯å¿…ä¸å¯å°‘çš„å•¦ã€‚icarus æä¾›äº† æ”¯ä»˜å® å¾®ä¿¡ PayPal å’Œ Patreon å››ç§æ–¹å¼ï¼š 1234567891011121314151617donate: - type: alipay qrcode: /images/alipay.JPG - type: wechat qrcode: /images/wechat.JPG - # type: paypal # Paypal business ID or email address # business: '' # Currency code # currency_code: USD - # type: patreon # URL to the Patreon page # url: '' æ”¯ä»˜å® å’Œ å¾®ä¿¡ åªéœ€è¦æä¾›äºŒç»´ç å°±å¯ä»¥äº†ï¼Œå¯ä»¥ä½¿ç”¨æœ¬åœ°é™æ€èµ„æºæˆ–è€…å›¾åºŠé“¾æ¥ã€‚æ•ˆæœå¦‚ä¸‹ï¼Œå¤§å®¶æ‡‚çš„ï¼š widgetæˆ‘è§‰å¾—è¿™æ˜¯ icarus æ¯”è¾ƒç²¾é«“çš„éƒ¨åˆ†äº†ï¼Œæ‰€æœ‰çš„ widget éƒ½æ˜¯ä¸€ä¸ªå¡ç‰‡ï¼Œ\bå¯ä»¥è‡ªç”±æ‘†æ”¾åœ¨ä»»ä½•ä½ç½®ï¼š åŒ…æ‹¬æ–‡ç« åœ¨å†…ï¼Œä¸ªäººèµ„æ–™ã€é“¾æ¥ã€åˆ†ç±»ã€æœ€æ–°æ–‡ç« ã€å½’æ¡£ã€æ ‡ç­¾å’Œæ ‡ç­¾äº‘éƒ½æ˜¯ä¸€ä¸ªå¡ç‰‡ï¼Œå¯ä»¥åœ¨ _config.yml ä¸­è®¾ç½®å„ä¸ªå¡ç‰‡çš„å…·ä½“å±æ€§ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½®å¡ç‰‡å‡ºç°åœ¨ç½‘ç«™çš„å·¦ä¾§è¿˜æ˜¯å³ä¾§ï¼š 123456widgets: - # Widget name type: tagcloud # Where should the widget be placed, left or right position: left å…¶ä»–è®¾ç½®ï¼ˆç½®é¡¶/é˜…è¯»é‡ç»Ÿè®¡ï¼‰è¿˜æœ‰ä¸€äº›å…¶ä»–çš„è®¾ç½®å°±ä¸åœ¨è¿™é‡Œèµ˜è¿°äº†ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ å®˜æ–¹æ–‡æ¡£ è¿›è¡Œäº†è§£ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘æ ¹æ®å®é™…éœ€æ±‚ï¼Œåœ¨ icarus ä¸»é¢˜å†…æ·»åŠ äº† ç½®é¡¶æ–‡ç«  å’Œ é˜…è¯»é‡ç»Ÿè®¡ çš„ä¸¤ä¸ªå°åŠŸèƒ½ï¼Œå¤§å®¶å¦‚æœæœ‰å…´è¶£ï¼Œå¯ä»¥å‰å¾€æˆ‘çš„åšå®¢å’Œæˆ‘äº¤æµå–”:-O åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/blog/hexo-theme-icarus/"},{"title":"å–„ç”¨ä½³è½¯ Blinks","text":"æˆ‘ä»¬å·²ç»ç¦»ä¸å¼€ç”µå­å±å¹•äº†ï¼ ä¸ç®¡æ˜¯å®¶ç”¨çš„ç”µè§†æœºï¼ŒåŠå…¬ç”¨çš„ç”µè„‘ï¼Œè¿˜æ˜¯æ— æ—¶æ— åˆ»æŠŠç©çš„æ‰‹æœºï¼Œå¤§éƒ¨åˆ†æ—¶é—´å’Œæˆ‘ä»¬å…±å¤„çš„è®¾å¤‡ï¼Œéƒ½æœ‰æ˜¾ç¤ºå±ã€‚ é«˜äº®ã€è“å…‰ã€å±é—ªéƒ½ä¼šå¯¹çœ¼ç›é€ æˆæŸå®³ï¼Œã€ŒæŠ¤çœ¼ã€å˜æˆäº†ç”¨æˆ·çš„å¼ºéœ€æ±‚ï¼Œä¹Ÿæ˜¯è®¾å¤‡å‚å•†éœ€è¦ä¸ºç”¨æˆ·è€ƒè™‘çš„é—®é¢˜ã€‚ åœ¨ MacOS å¢åŠ ã€Œå¤œè§ˆã€åŠŸèƒ½ä¹‹å‰ï¼Œå¤šå¹´çš„æŠ¤çœ¼åŠŸèƒ½ç©ºç¼ºæ˜¯ç”±è¯¸å¦‚ã€Œf.luxã€è¿™ç±»è½¯ä»¶æ¥å¡«è¡¥çš„ï¼Œ å°±ç®—åˆ°ç°åœ¨ï¼Œã€Œf.luxã€ä»ç„¶ä¸è¿‡æ—¶ï¼Œé™¤äº†å‡å°‘è“å…‰ï¼Œã€Œf.luxã€è¿˜èƒ½éšæ—¶é—´å˜æ¢å±å¹•é¢œè‰²ã€‚ è¿‡æ»¤è“å…‰ã€è°ƒæ•´è‰²æ¸©ï¼Œæ˜¯ä¸€ç§æŠ¤çœ¼æ€è·¯ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ€è·¯ã€‚ ç ”ç©¶æ˜¾ç¤ºï¼Œç›¯ç€ç”µè„‘å±å¹•å·¥ä½œçš„äººçœ¨çœ¼é¢‘æ¬¡å¤§æ¦‚æ˜¯æ­£å¸¸æ°´å¹³çš„ 1/4ï¼Œè€Œæ­£å¸¸çœ¨çœ¼å¯ä¿æŒçœ¼ç›è¡¨é¢æ¹¿æ¶¦ï¼Œå‡å°‘å¹²ç‡¥å’Œåˆºæ¿€ã€‚ ã€ŒBlinksã€æ˜¯ä¸€æ¬¾ Mac çœ¨çœ¼æé†’è½¯ä»¶ï¼Œå®ƒå¹¶ä¸ä¼šæé†’ä½ åŸç†ç”µè„‘ï¼Œè¿™ä¹Ÿä¸æ˜¾ç¤ºï¼Œè€Œæ˜¯æé†’ä½ è¯¥æ›´å¯†é›†åœ°çœ¨çœ¨çœ¼äº†ã€‚çœ‹çœ‹å®ƒéƒ½æœ‰å“ªäº›åŠŸèƒ½å’Œè‡ªå®šä¹‰é¡¹ï¼š 1.ä¸¤ç§æé†’æ¨¡å¼ï¼šåŠ¨ç”»å’ŒéåŠ¨ç”» 2.å¯éšç³»ç»Ÿå¯åŠ¨ 3.å¯è®¾ç½®æ—¶é—´é—´éš” 4.å¯è®¾ç½®å…¨å±ä¸‹ç¦ç”¨ï¼Œä¸æ‰“æ‰°æ²‰æµ¸å·¥ä½œ 5.é€šçŸ¥çª—å£ä¸ä¼šå½±å“åœ¨ç”¨çš„åº”ç”¨ã€é”®ç›˜å’Œé¼ æ ‡åŠ¨ä½œ 6.å¯è®¾ç½®èƒŒæ™¯é€æ˜åº¦ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/Software/Blinks/"},{"title":"å–„ç”¨ä½³è½¯--aiXcoder","text":"ä»ç¨‹åºå‘˜åˆ°æ•°æ®å·¥ç¨‹å¸ˆï¼Œç¼–å†™ç¨‹åºä»£ç æ˜¯ä¸€é¡¹åŸºæœ¬åŠŸï¼Œä½†æ˜¯ç¼–å†™å†—é•¿ä»£ç çš„è¿‡ç¨‹ä¹Ÿæå¤§åœ°æ¶ˆè€—äº†å¼€å‘è€…çš„è€å¿ƒã€‚è¿‘æ¥ï¼Œæœ‰ä¸å°‘å…³äºä»£ç è¡¥å…¨å·¥å…·çš„æ¶ˆæ¯çˆ†å‡ºï¼Œä¾‹å¦‚ï¼Œæ¥è‡ªç¾å›½çš„ Kiteï¼Œæ¥è‡ªåŠ æ‹¿å¤§çš„ TabNine ç­‰ï¼Œä¸€æ—¶é—´è·å¾—äº†ä¸å°‘ç¨‹åºå‘˜çš„å…³æ³¨ã€‚ä½†å…¶å®å¾ˆå¤šäººè¿˜å¹¶ä¸çŸ¥é“ï¼Œåœ¨è¿™äº›å›½å¤–äº§å“ä¸æ–­è¢«åª’ä½“æ¨é€çš„èƒŒåï¼Œæœ‰ä¸€æ¬¾èƒ½åŠ›æ›´ä¸ºå¼ºå¤§ã€æ›´æ—©å°†æ·±åº¦å­¦ä¹ åº”ç”¨äºä»£ç è¡¥å…¨çš„äº§å“ï¼Œä¸€æ¬¾æºè‡ªä¸­å›½çš„å·¥å…·â€”â€”aiXcoderï¼Œå®ƒçš„ç ”å‘è€…ä»¬æ¥è‡ªäºåŒ—äº¬å¤§å­¦ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæœºå™¨ä¹‹å¿ƒé‡‡è®¿äº†é¡¹ç›®æ€»è´Ÿè´£äººåŒ—äº¬å¤§å­¦è®¡ç®—æœºç§‘å­¦æŠ€æœ¯ç³»å‰¯æ•™æˆææˆˆï¼Œè¯·ä»–ä¸ºè¯»è€…æœ‹å‹è§£è¯»è‡ªåŠ¨ä»£ç è¡¥å…¨èƒŒåçš„æŠ€æœ¯ï¼Œä»¥åŠ aiXcoder èƒŒåçš„æŠ€æœ¯ç‰¹æ€§å’Œä¼˜åŠ¿ã€‚aiXcoder å®˜ç½‘ï¼šhttps://www.aixcoder.com/#/ aiXcoder çš„ä»£ç è¡¥å…¨æ•ˆæœ æˆ‘ä»¬å…ˆçœ‹çœ‹å†™ TensorFlow æ—¶çš„ä»£ç è¡¥å…¨æ•ˆæœï¼š å¦‚ä¸Šæ‰€ç¤ºï¼ŒaiXcoder åœ¨ TensorFlow çš„ä»£ç ç¯å¢ƒä¸‹èƒ½å¤Ÿç›´æ¥ã€ŒçŒœæµ‹ã€åˆ°æ¨¡å‹å»ºç«‹åçš„ä¸€ç³»åˆ—ä»£ç æµç¨‹ã€‚ä¾‹å¦‚ï¼Œåœ¨å®šä¹‰äº† loss ä¹‹åéœ€è¦å®šä¹‰ optimizerï¼Œä¹‹åéœ€è¦ train_opã€init æ–¹æ³•ï¼Œç„¶åæœ€ç»ˆå®šä¹‰æ¨¡å‹çš„ä¿å­˜æ–¹å¼ saverï¼Œä»¥åŠå¼€å§‹è¿è¡Œè®¡ç®—å›¾ã€‚è¿™æ ·ä¸€ä¸ªæµç¨‹åŸºæœ¬ä¸Šæ˜¯æ·±åº¦å­¦ä¹ å¼€å‘è€…æ‰€çŸ¥æ™“çš„ï¼Œä½†æ˜¯æŒ‰ç…§æµç¨‹å†™ä¸‹æ¥éå¸¸ç¹çã€‚åœ¨ aiXcoder çš„æç¤ºä¸‹ï¼Œå¼€å‘é€Ÿåº¦å¾—åˆ°äº†æå‡ã€‚ aiXcoder æ”¯æŒ Javaã€C++/Cã€Pythonã€PHPã€JavaScript ç­‰è¯­è¨€ï¼Œä»¥æ’ä»¶çš„æ–¹å¼é›†æˆåˆ°ç°æœ‰çš„ IDE ä¸­ï¼Œå¦‚ Pycharmã€Android Studioã€VS Codeã€Eclipseã€Webstormã€Sublime ç­‰ï¼Œæ’ä»¶çš„èƒŒåæ˜¯ä¸€ä¸ªå¼ºå¤§çš„äº‘ç«¯æ·±åº¦å­¦ä¹ å¼•æ“ã€‚ é’ˆå¯¹å¼€å‘è€…ï¼Œè¯¥äº§å“ç›®å‰åˆ†ä¸ºç¤¾åŒºç‰ˆã€ä¸“ä¸šç‰ˆå’Œä¼ä¸šç‰ˆã€‚ç¤¾åŒºç‰ˆæ˜¯å®Œå…¨å…è´¹çš„ï¼Œä¸“ä¸šç‰ˆä¹Ÿå¯ä»¥é€šè¿‡åˆ†äº«è€Œå…è´¹è·å¾—ã€‚å®ƒä»¬é—´çš„ä¸åŒä¹‹å¤„åœ¨äºæ¨¡å‹ä¼šä¸ä¼šç»§ç»­å­¦ä¹ ï¼Œç¤¾åŒºç‰ˆä¸»è¦åˆ©ç”¨äº‹å…ˆè®­ç»ƒå¥½çš„å…¬ç”¨æ¨¡å‹åšé¢„æµ‹ï¼Œè€Œä¸“ä¸šç‰ˆåˆ™ä¼šæ ¹æ®ç”¨æˆ·çš„ä»£ç ä¹ æƒ¯åŠç»“æ„ä½œè¿›ä¸€æ­¥çš„è°ƒæ•´ã€‚ä¼ä¸šç‰ˆæ˜¯ aiXcoder åŠŸèƒ½æœ€ä¸ºå¼ºå¤§çš„ç‰ˆæœ¬ï¼Œå®ƒèƒ½å¤Ÿåœ¨ä¼ä¸šå†…éƒ¨çš„ç§æœ‰äº‘ä¸­è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶èƒ½å¤Ÿåˆ©ç”¨ä¼ä¸šè‡ªå·±çš„ä»£ç æ¥è¿›è¡Œæ¨¡å‹çš„ä¼˜åŒ–è®­ç»ƒï¼Œä»è€Œå…·æœ‰æ›´é«˜çš„å‡†ç¡®ç‡å’Œè¿è¡Œæ€§èƒ½ã€‚ aiXcoder ç”¨èµ·æ¥æ€ä¹ˆæ · ç™¾é—»ä¸å¦‚ä¸€è§ï¼Œæœºå™¨ä¹‹å¿ƒä¹Ÿå¯¹ aiXocder è¿›è¡Œäº†ä½¿ç”¨æµ‹è¯•ã€‚ æœºå™¨ä¹‹å¿ƒåœ¨ Pycharm ä¸Šè¯•ç”¨äº†ç¤¾åŒºç‰ˆ/ä¸“ä¸šç‰ˆï¼Œå®ƒä»¬éƒ½æ˜¯éœ€è¦åœ¨çº¿æ¨æ–­ã€‚ä¸åŒçš„åœ°æ–¹åœ¨äºä¸“ä¸šç‰ˆè¿˜éœ€è¦é¢å¤–çš„å†…å­˜ï¼Œå› ä¸ºæ¯ä¸€ä¸ª Pro ç”¨æˆ·éƒ½éœ€è¦é¢å¤–çš„ç¼“å†²åŒºæ¥å‚¨å­˜æ¨¡å‹ã€Œå­¦åˆ°çš„ã€ç”¨æˆ·ä¹ æƒ¯ã€‚å½“ç„¶ï¼ŒPro ç”¨æˆ·çš„ç¼“å†²åŒºæ˜¯æ˜¯åªæœ‰è¯¥æ’ä»¶èƒ½è®¿é—®çš„ã€‚ ä½¿ç”¨ä½“ä¼š ä¸€èˆ¬è€Œè¨€ï¼Œå½“æˆ‘ä»¬é€‰æ‹© Python å’Œ PyCharm æ—¶ï¼Œä»£ç è¡¥å…¨å°±è‡ªç„¶ç”¨ IDE è‡ªå¸¦çš„å·¥å…·ã€‚ä½¿ç”¨ aiXcoder ç¬¬ä¸€ä¸ªæ„Ÿå—æ˜¯å®ƒæ¯”è‡ªå¸¦çš„è¡¥å…¨å·¥å…·çµæ´»å¾—å¤šï¼Œå› ä¸ºä»¥å‰çš„è¡¥å…¨ä¸»è¦ä½“ç°åœ¨ Python å‡½æ•°æˆ–å…¶å®ƒåŒ…çš„ APIï¼Œè€Œ aiXcoder è¿˜ä¼šé¢„æµ‹å˜é‡åæ˜¯ä»€ä¹ˆã€è¿ç®—æ˜¯ä»€ä¹ˆã€æƒ³è°ƒç”¨çš„å‡½æ•°åˆæ˜¯ä»€ä¹ˆã€‚ è™½ç„¶ä»£ç è¡¥å…¨çš„æ¨æ–­è¿‡ç¨‹å…¨æ˜¯åœ¨äº‘ç«¯å®Œæˆçš„ï¼Œä½†åœ¨æˆ‘ä»¬çš„ä½¿ç”¨ä¸­ï¼Œä¸€èˆ¬ç½‘ç»œç¯å¢ƒç”šè‡³ 4G éƒ½èƒ½æœ‰å®æ—¶çš„åé¦ˆï¼Œæ‰€ä»¥è¡¥å…¨é€Ÿåº¦ä¸ŠåŸºæœ¬å’Œ Pycharm è‡ªå¸¦çš„å·¥å…·å·®ä¸å¤šã€‚ææˆˆæ•™æˆè¡¨ç¤ºï¼Œç›®å‰ aiXcoder ç»å¤§å¤šæ•°éƒ½èƒ½åœ¨ 200ms å·¦å³å¾—åˆ°åé¦ˆï¼Œæœ‰éƒ¨åˆ†åœ°åŒºçš„ç”¨æˆ·ç”±äºç½‘ç»œå»¶è¿Ÿé—®é¢˜å¯èƒ½ä¼šæ„Ÿè§‰åˆ°å¡é¡¿ï¼ŒaiXcoder æ­£åœ¨å…¨å›½å„ä¸ªä¸»è¦åŸå¸‚éƒ¨ç½²æœåŠ¡å™¨ï¼Œä»¥æå‡ç”¨æˆ·ä½“éªŒã€‚åŒæ—¶ï¼ŒaiXcoder å›¢é˜Ÿä¹Ÿç‰¹åˆ«å…³æ³¨æ¨¡å‹å‹ç¼©æŠ€æœ¯ï¼Œå¸Œæœ›æŠŠåŸºäº CPU çš„æ¨ç†è¿ç®—æ—¶é—´å‹ç¼©åˆ°å¯æ¥å—çš„ç¨‹åº¦ï¼Œä»è€Œæ¨å‡ºèƒ½å¤Ÿåœ¨ CPU ä¸Šè¿è¡Œçš„æœ¬åœ°ç‰ˆã€‚ æ€»ä½“è€Œè¨€ï¼ŒaiXcoder æä¾›çš„è¡¥å…¨åŠŸèƒ½åœ¨é¢„æµ‹å˜é‡åã€å‡½æ•°åæˆ–å…³é”®å­—ç­‰æ•ˆæœä¸Šç¡®å®éå¸¸çµæ´»ï¼Œè€Œä¸”å®ƒè¿˜ä¼šå­¦ä¹ å¼€å‘è€…çš„ä»£ç é£æ ¼ä¸ç¼–ç¨‹æ¨¡å¼ï¼Œå› æ­¤æ•ˆæœè¿˜æ˜¯æŒºå¥½çš„ã€‚ å¦‚ä¸‹æ˜¯è‡ªåŠ¨è¡¥å…¨çš„ä¸€äº›å€™é€‰ï¼Œä¸€äº›å‡½æ•°åç§°å¯èƒ½æ˜¯å¼€å‘è€…ä¹‹é—´ç»å¸¸ä½¿ç”¨çš„ï¼Œå› æ­¤å¾—åˆ°äº†æ¨èï¼š å¯¹äºä¸€äº›å˜é‡ï¼ŒaiXcoder å¯æ ¹æ®å˜é‡ç±»å‹æå‡ºè¯¥å˜é‡å¯èƒ½çš„æ“ä½œï¼Œæ¯”å¦‚ï¼Œå¯¹äºä¸‹å›¾çš„å˜é‡ã€Œmã€ï¼ŒaiXcoder æå‡ºäº†ä¸€ä¸ªå¯¹å­—ç¬¦ä¸²è¿›è¡Œå¢åŠ çš„ä»£ç ï¼š å¯¹æ¯”æµ‹è¯„ aiXcoder å®˜æ–¹ä¹Ÿå°†äº§å“å’Œå…¶ä»–ä»£ç è¡¥å…¨å·¥å…·è¿›è¡Œäº†å¯¹æ¯”ï¼ŒåŒ…æ‹¬ Kite å’Œ TabNine ç­‰ã€‚ åœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­ï¼ŒaiXcoder ä¼šä½¿ç”¨ Kite æˆ– TabNine å®˜æ–¹æä¾›çš„ç¤ºä¾‹ä»£ç ï¼Œå¹¶æµ‹è¯•å®Œæˆè¿™æ®µä»£ç åˆ°åº•éœ€è¦å¤šå°‘æ¬¡æŒ‰é”®ã€‚ç»“æœè¡¨æ˜ï¼ŒaiXcoder è¾ƒå…¶ä»–æ’ä»¶åœ¨æ•ˆç‡ä¸Šæå‡ 1.5 å€ä»¥ä¸Šã€‚ aiXcoder æ˜¯å¦‚ä½•æ‰“é€ çš„ èƒ½å¤Ÿå®ç°é«˜æ•ˆä»£ç è¡¥å…¨çš„ aiXcoderï¼ŒèƒŒåæœ‰ç€å¼ºå¤§çš„æŠ€æœ¯æ”¯æ’‘ã€‚æ®ææˆˆæ•™æˆä»‹ç»ï¼ŒaiXcoder å¾ˆæ—©å°±è¯•è¿‡äº†è¯­è¨€æ¨¡å‹ï¼Œå°†ä»£ç è§†ä¸ºä¸€ç§è¯­è¨€ä»è€Œç›´æ¥å»ºæ¨¡ï¼Œè¿™å°±å’Œ Deep TabNine ä¸€æ ·ã€‚ä½†æ˜¯ç ”ç©¶è€…å¾ˆå¿«å‘ç°ï¼Œåªæœ‰è¯­è¨€æ¨¡å‹æ˜¯è¡Œä¸é€šçš„ï¼Œå®ƒæ€»ä¼šæå‡ºä¸€äº›æ¯«æ— æ„ä¹‰ã€å¾ˆä¸ç§‘å­¦çš„è¡¥å…¨å»ºè®®ã€‚ä¸ºæ­¤ï¼ŒaiXcoder èåˆäº†åŸºäºåºåˆ—çš„ç¨‹åºä»£ç è¯­è¨€æ¨¡å‹ã€åŸºäºæŠ½è±¡è¯­æ³•æ ‘å’Œç¨‹åºé€»è¾‘å…³ç³»çš„å›¾ç¥ç»ç½‘ç»œç­‰æ–¹æ³•ï¼Œå…±åŒæ‰“é€ ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿã€‚ ä¸ºä»€ä¹ˆç›´æ¥ç”Ÿæˆä»£ç æ˜¯å›°éš¾çš„ å¦‚æœæ·±åº¦å­¦ä¹ æ¨¡å‹èƒ½æ ¹æ®å¼€å‘è€…çš„æ„å›¾ï¼Œä»¥ç«¯åˆ°ç«¯çš„æ–¹å¼ç›´æ¥ç”Ÿæˆå¯¹åº”çš„ä»£ç ï¼Œé‚£ä¹ˆè¿™æ ·çš„æ¨¡å‹ä¼šå¾ˆã€Œä¼˜é›…ã€ã€‚ä½†æ˜¯ç»è¿‡ç ”ç©¶å‘ç°ï¼Œè¿™æ ·çš„ä»»åŠ¡éœ€æ±‚æ˜¯å¾ˆéš¾å®ç°çš„ï¼Œè¿™å’Œä»»åŠ¡æœ¬èº«æ‰€ä¾èµ–çš„æ•°æ®çš„æ€§è´¨æœ‰å…³ç³»ã€‚ ææˆˆæ•™æˆä»æœºå™¨å­¦ä¹ æ‰€ä¾èµ–çš„æ•°æ®æ€§è´¨çš„è§’åº¦ï¼Œå¯¹ä»£ç ç”Ÿæˆä»»åŠ¡å’Œä¼ ç»Ÿçš„å›¾åƒå¤„ç†ä»»åŠ¡ã€è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„ä¸åŒï¼Œç»™å‡ºä¸€ç§è¾ƒä¸ºå½¢è±¡åŒ–çš„è§£é‡Šã€‚ å¯¹äºå›¾åƒè¯†åˆ«æˆ–å›¾åƒåˆ†ç±»ä»»åŠ¡è€Œè¨€ï¼Œæœºå™¨å­¦ä¹ çš„ç›®æ ‡æ˜¯å»ºç«‹ä¸€ä¸ªè¿ç»­çš„æ•°æ®é›†ï¼ˆå›¾åƒæ•°æ®ï¼‰åˆ°ä¸€ä¸ªè¿‘ä¹è¿ç»­çš„ã€æœ‰ç€æ¥è¿‘æ¸…æ™°è¾¹ç•Œçš„æ•°æ®é›†ï¼ˆæ ‡ç­¾ï¼‰ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚ è¿™æ ·ä¸€æ¥ï¼Œç”±äºå›¾åƒæ•°æ®å¼‚å¸¸çš„ç¨ å¯†ï¼Œè€Œæ ‡ç­¾é›†åˆæœ‰è¶³å¤Ÿæ¸…æ™°çš„è¾¹ç•Œï¼Œé‚£ä¹ˆè¿™å°±ç›¸å½“äºä¸€ä¸ªæ ‡ç­¾æ‹¥æœ‰å¤§é‡çš„æ•°æ®å¯ä»¥å­¦ä¹ ã€‚è¿™æ ·çš„æ˜ å°„å…³ç³»æ˜¯æ¯”è¾ƒå®¹æ˜“å»ºç«‹çš„ï¼Œè¿™ä¹Ÿæ˜¯æœºå™¨å­¦ä¹ ä¸­å’Œå›¾åƒç›¸å…³çš„ä»»åŠ¡ç›¸å¯¹è¾ƒä¸ºå®¹æ˜“å®Œæˆçš„åŸå› ã€‚ å¯¹äºè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡è€Œè¨€ï¼Œæœºå™¨å­¦ä¹ éœ€è¦ä»ä¸€ä¸ªè¾ƒä¸ºè¿ç»­çš„ï¼ˆç¦»æ•£åº¦é«˜äºå›¾åƒï¼‰ã€æœ‰ç€è¾ƒæ¸…æ™°è¾¹ç•Œçš„æ•°æ®é›†å»ºç«‹ä¸å¦ä¸€ä¸ªè¾ƒä¸ºè¿ç»­çš„ã€æœ‰ç€è¾ƒæ¸…æ™°çš„è¾¹ç•Œçš„æ•°æ®é›†ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚ è€Œç”±äºè‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„æ–‡æœ¬æ•°æ®ç›¸æ¯”å›¾åƒæ•°æ®æ›´ä¸ºç¨€ç–ï¼Œå› æ­¤è‡ªç„¶è¯­è¨€å¤„ç†ç›¸å…³çš„ä»»åŠ¡æ›´éš¾å–å¾—è¾ƒå¥½çš„æ¨¡å‹æ€§èƒ½ã€‚ ä½†æ˜¯åœ¨ä»£ç ç”Ÿæˆæ–¹é¢ï¼Œä»ç¼–ç¨‹è€…çš„æ„å›¾ï¼ˆintentï¼‰ç”Ÿæˆç¨‹åºä»£ç çš„é—®é¢˜ï¼Œå¯ä»¥çœ‹åšæ˜¯ã€Œç¨‹åºå‘˜æ„å›¾ç©ºé—´ã€åˆ°ã€Œç¨‹åºä»£ç ç©ºé—´ã€çš„æ˜ å°„ï¼Œå…¶ä¸­æ„å›¾å¯ä»¥æ˜¯ç”±è‡ªç„¶è¯­è¨€æè¿°çš„ä¿¡æ¯ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™æ˜¯ä»ä¸€ä¸ªè¾ƒä¸ºè¿ç»­çš„ã€æœ‰ç€è¾ƒæ¸…æ™°è¾¹ç•Œçš„æ•°æ®é›†ï¼Œå‘ä¸€ä¸ªæ›´åŠ ç¦»æ•£è€Œæ²¡æœ‰æ¸…æ™°è¾¹ç•Œçš„æ•°æ®é›†è¿›è¡Œæ˜ å°„ã€‚ æ¢å¥è¯è¯´ï¼Œå°½ç®¡ä»£ç ç”Ÿæˆçš„æ„å›¾è¾ƒä¸ºæ¸…æ¥šï¼Œä½†æ˜¯å®ç°è¯¥æ„å›¾çš„ä»£ç æ•°æ®å´æ¯”è¾ƒç¨€ç–ï¼Œè€Œä¸”å³ä¾¿å¯¹äºç›¸åŒçš„æ„å›¾ï¼Œå…¶å¯¹åº”çš„å®ç°ä»£ç ä¹‹é—´ä»å­˜åœ¨è¾ƒå¤§å·®è·ï¼Œå› æ­¤è¿™æ ·çš„ä»»åŠ¡æ˜¯éå¸¸éš¾å­¦ä¹ çš„ã€‚ ä¸ºæ­¤ï¼Œåœ¨ aiXcoder çš„å®é™…å®ç°ä¸­ï¼Œå¯¹ä¸åŒåº”ç”¨é¢†åŸŸçš„ä»£ç éƒ½é‡‡ç”¨äº†ç‰¹å®šçš„æ¨¡å‹ï¼Œå®ƒä»¬ä»…ä½¿ç”¨è¯¥é¢†åŸŸçš„æ•°æ®è¿›è¡Œè®­ç»ƒã€‚ä¾‹å¦‚ï¼Œå¯¹ TensorFlow æˆ– PyTorch ç­‰æ¡†æ¶ä¹Ÿæœ‰å…¶ç‰¹å®šçš„ä»£ç è¡¥å…¨æ¨¡å‹ã€‚è¿™æ ·åšçš„ä¸»è¦ç›®çš„å°±æ˜¯åŠ å¼ºç¨‹åºåˆ†å¸ƒçš„ç¨ å¯†æ€§ï¼Œåœ¨ç‰¹å®šé¢†åŸŸä¸‹ï¼Œä»£ç åˆ†å¸ƒæ›´åŠ æ¥è¿‘è¿ç»­æ€§ã€‚å¯è§ï¼Œæ ¹æ®ç¼–ç¨‹è€…çš„ã€Œæ„å›¾ã€æ¥ã€Œç›´æ¥ã€ç”Ÿæˆå®Œæ•´ä»£ç æ˜¯éå¸¸å›°éš¾çš„ï¼Œä½†ææˆˆæ•™æˆè¡¨ç¤ºï¼Œå¯ä»¥ç”¨ç±»ä¼¼çš„æŠ€æœ¯æ¥è¾…åŠ©äººç±»ç¨‹åºå‘˜æ¥ç¼–å†™ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç¨‹åºå‘˜å·²ç»å†™ä¸‹çš„ä»£ç ä¸­è·å–ç¨‹åºå‘˜çš„ã€Œç¼–ç¨‹æ„å›¾ã€ï¼Œç„¶åç»¼åˆåˆ†æä»£ç ï¼Œçš„ç»“æ„ä¿¡æ¯ã€å˜é‡å¼•ç”¨ä¿¡æ¯ã€API åºåˆ—ä¿¡æ¯ã€ç»§æ‰¿å…³ç³»ä¿¡æ¯ç­‰ç­‰ï¼Œä»¥è‡ªåŠ¨ç”Ÿæˆåç»­ä»£ç ã€‚ç„¶è€Œï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œåªæœ‰è¯­è¨€æ¨¡å‹æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦å¯¹å¾ˆå¤šå…¶å®ƒä»£ç ç‰¹å¾è¿›è¡Œåˆ†æï¼Œæ‰èƒ½åšå¥½ç”Ÿæˆå¼çš„ä»£ç è¡¥å…¨ã€‚ å•çº¯çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹åˆæ€ä¹ˆæ ·ï¼Ÿ æèµ·ä»£ç è¡¥å…¨ï¼Œæœ‰äº›äººå¯èƒ½ä¼šä¸‹æ„è¯†çš„è®¤ä¸ºè¿™ä»…ä»…æ˜¯ä¸€ä¸ªæ™®é€šçš„è¯­è¨€å»ºæ¨¡ä»»åŠ¡ï¼Œæ¨¡å‹åªéœ€è¦æ ¹æ®å¼€å‘è€…ä¹‹å‰å†™çš„ä»£ç é¢„æµ‹ä¹‹åçš„ä»£ç å³å¯ã€‚å› æ­¤ä½¿ç”¨æœ€å…ˆè¿›çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼Œå†åœ¨ä»£ç æ•°æ®ä¸Šè¿›è¡Œå¾®è°ƒè¯´ä¸å®šæ˜¯ä¸€ç§å¥½æ–¹æ³•ã€‚ ä½†æ˜¯ææˆˆæ•™æˆè¡¨ç¤ºï¼Œè¿™æ ·çš„æƒ³æ³•æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹åœ¨ä»£ç è¡¥å…¨ä»»åŠ¡ä¸­æ•ˆæœä¸ä½³ï¼Œä¸»è¦æ˜¯å› ä¸ºä»£ç è¡¥å…¨ä»»åŠ¡æœ¬èº«å­˜åœ¨è¯¸å¤šä¸åŒäºè‡ªç„¶è¯­è¨€åˆ†æä»»åŠ¡çš„æŒ‘æˆ˜ã€‚ é¦–å…ˆæ˜¯ä»£ç æ–‡æœ¬ä¸­å­˜åœ¨çš„è¯­ä¹‰æŠ½è±¡æ€§é—®é¢˜ã€‚ä»£ç çš„è¯­ä¹‰ï¼ˆåŠŸèƒ½è¯­ä¹‰ï¼‰ä¸å…¶å­—é¢è¡¨ç¤ºä¹‹é—´å­˜åœ¨æ›´å¤§çš„å·®è·ã€‚æˆ‘ä»¬æ— æ³•æ ¹æ®å­—é¢ç¡®å®šä»£ç çš„å‡†ç¡®è¯­ä¹‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»£ç ä¸­ï¼Œåªæ”¹å˜ä¸€ä¸ªå­—ç¬¦å°±æœ‰å¯èƒ½å®Œå…¨æ”¹å˜æ•´è¡Œä»£ç çš„åŠŸèƒ½ï¼Œå› æ­¤å¤„ç†ä»£ç çš„è¯­è¨€å¹¶å‡†ç¡®æå–å…¶å«ä¹‰ç›¸æ¯”è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡æ›´æ£˜æ‰‹ã€‚ 1f = open(&apos;word_ids.txt&apos;,&apos;r&apos;)f = open(&apos;word_ids.txt&apos;,&apos;w&apos;) ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨ Python ä»£ç ä¸­ï¼Œæ‰“å¼€æŸä¸ªæ–‡ä»¶æ—¶ä½¿ç”¨ã€Œrã€å’Œã€Œwã€ä¼šå®ç°å®Œå…¨ä¸åŒçš„åŠŸèƒ½ã€‚ æ­¤å¤–ï¼Œä»£ç çš„åŠŸèƒ½è¯­ä¹‰éš¾ä»¥è¿›è¡Œå…·ä½“çš„è¡¨è¾¾å’Œåˆ»ç”»ï¼Œè€Œä¸”ä»£ç åŠŸèƒ½è¯­ä¹‰çš„è¡¨è¾¾æ–¹å¼å¤šç§å¤šæ ·ã€‚ä¾‹å¦‚ï¼Œæœ‰å¤šç§ä»£ç çš„å½¢å¼æ–‡æœ¬ç”¨äºå®ç°æŸä¸ªåŠŸèƒ½ï¼Œä¸èƒ½è¯´æŸä¸€ç§ä»£ç æ˜¯å¯¹çš„è€Œå¦ä¸€ç§æ˜¯é”™çš„ã€‚ 1list_a = [] for i in items: result = test(i) list_a.append(result) list_a = [test(i) for i in items] å¦‚å›¾æ‰€ç¤ºï¼Œå®ç° list_a çš„ä»£ç å¯ä»¥æ˜¯å¤šç§å¤šæ ·çš„ï¼Œä½†è¯­è¨€æ¨¡å‹ä¼šå°†å®ƒä»¬å­¦ä¹ ä¸ºå®Œå…¨ä¸åŒçš„è¡¨å¾ã€‚ åŒæ—¶ï¼Œä»£ç æ–‡æœ¬æœ¬èº«çš„ç»“æ„éå¸¸å¤æ‚ã€‚ä¾‹å¦‚ï¼Œä»£ç çš„è¯­ä¹‰ä¸ä»£ç ç»“æ„ï¼ˆå¦‚è¡Œä¸è¡Œçš„ç¼©è¿›ï¼‰ä¹‹é—´å­˜åœ¨è¾ƒå¤§çš„å…³è”æ€§ï¼Œä»£ç è¯­ä¹‰ä¾èµ–äºä»£ç ç»“æ„è¿›è¡Œè¡¨è¾¾ã€‚è¿™æ˜¯é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹éš¾ä»¥è¡¨ç¤ºçš„ç‰¹å¾ã€‚ æœ€åï¼Œä»£ç å…·æœ‰æ¼”åŒ–æ€§çš„ç‰¹å¾ã€‚ä»£ç è¾ƒè‡ªç„¶è¯­è¨€çš„è¿­ä»£é€Ÿåº¦æ›´å¿«ï¼Œå› æ­¤é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ä¸èƒ½å¤ŸåŠæ—¶æ•æ‰æ¼”åŒ–ç‰¹å¾ã€‚ è€ƒè™‘åˆ°ä»£ç è¯­è¨€ä¸­çš„è¯¸å¤šç‰¹æ€§ï¼Œå•çº¯çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹æ— æ³•å¾—åˆ°éå¸¸å¥½çš„æ•ˆæœã€‚ æ ¸å¿ƒæŠ€æœ¯ æ—¢ç„¶å•ç‹¬çš„è¯­è¨€æ¨¡å‹ä¸è¡Œï¼Œé‚£ä¹ˆ aiXcoder åˆç»“åˆäº†å“ªäº›æŠ€æœ¯ï¼Œå®ƒåˆæ˜¯é ä»€ä¹ˆæ¥è¡¥å…¨ä»£ç çš„ï¼Ÿæ€»ä½“è€Œè¨€ï¼ŒaiXcoder ä¸»è¦ä¾èµ–äºå…¶ç‰¹æœ‰çš„å¯¹ç¨‹åºä»£ç è¿›è¡Œå­¦ä¹ çš„æ·±åº¦ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œè¯¥æ¨¡å‹èƒ½å¤Ÿå¯¹ç¨‹åºçš„å¦‚ä¸‹å‡ ç±»ç‰¹å¾è¿›è¡Œåˆ†æï¼š ç¨‹åºçš„ç»“æ„è¯­ä¹‰ç‰¹å¾ï¼šç¨‹åºè¯­è¨€æ˜¯ä¸€ç§ç»“æ„æ€§å¾ˆå¼ºçš„è¯­è¨€ï¼Œç¨‹åºçš„ç»“æ„ä¿¡æ¯ä¹Ÿä½“ç°ç€ç¨‹åºçš„è¯­ä¹‰ã€‚ä¾‹å¦‚ï¼ŒæŠ½è±¡è¯­æ³•æ ‘æ˜¯å¯¹ä»£ç è¿›è¡Œè§£æçš„ä¸€ç§è¾ƒä¸ºé€šç”¨çš„ç»“æ„ï¼Œå®ƒä½“ç°äº†ä»£ç çš„è¯­ä¹‰ç‰¹å¾ï¼ŒaiXcoder ä¾¿å……åˆ†åˆ©ç”¨äº†æŠ½è±¡è¯­æ³•æ ‘ï¼Œå¯¹ç¨‹åºå‘˜å·²ç»å†™ä¸‹çš„ä»£ç çš„è¯­ä¹‰è¿›è¡Œè§£è¯»ã€‚ ç¨‹åºå…ƒç´ é—´çš„é€»è¾‘å…³ç³»ï¼šç¨‹åºä»£ç çš„ä¸åŒå…ƒç´ ä¹‹é—´å­˜åœ¨ç€ä¸åŒçš„å…³ç³»ï¼Œä¾‹å¦‚ç¨‹åºå˜é‡ä¹‹é—´çš„å¼•ç”¨å…³ç³»ã€ç±»ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ã€æ–¹æ³•ä¸å‚æ•°ä¹‹é—´çš„è°ƒç”¨å…³ç³»ç­‰ç­‰ã€‚ç¨‹åºæœ¬èº«åˆå¯ä»¥è¡¨ç¤ºä¸ºå¤šç§å›¾ï¼Œä¾‹å¦‚æ§åˆ¶æµå›¾ã€æ•°æ®æµå›¾ã€è°ƒç”¨å…³ç³»å›¾ç­‰ç­‰ã€‚aiXcoder å€ŸåŠ©å›¾ç¥ç»ç½‘ç»œèƒ½å¤Ÿå¯¹ç¨‹åºå…ƒç´ ä¹‹é—´çš„å¤šç§å…³ç³»è¿›è¡Œå»ºæ¨¡ï¼Œä»è€Œèƒ½å¤Ÿå¯¹ç¨‹åºå…ƒç´ ä¹‹é—´çš„å¤æ‚å…³ç³»è¿›è¡Œåˆ†æå’Œæ¨ç†ã€‚ ç¨‹åºè¯­è¨€åºåˆ—æ¨¡å‹ï¼šå½“ç„¶ï¼Œç¨‹åºè¯­è¨€ä¹Ÿå…·æœ‰ä¸è‡ªç„¶è¯­è¨€ç›¸ä¼¼çš„ä¸€é¢ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨ç¨‹åºæ ‡è¯†ç¬¦ä¹‹é—´çš„åºåˆ—å…³ç³»å»ºç«‹ç¨‹åºè¯­è¨€æ¨¡å‹ã€‚aiXcoder ä¹Ÿä½¿ç”¨äº†æœ€æ–°çš„æ·±åº¦å­¦ä¹ è¯­è¨€æ¨¡å‹å¯¹ç¨‹åºä¸­çš„åºåˆ—ä¿¡æ¯è¿›è¡Œå»ºæ¨¡ã€‚ åœ¨è·å¾—ç¨‹åºä»£ç çš„å„ç§ç‰¹å¾ä¹‹åï¼Œå°±è¯¥æŠŠè¿™äº›ç‰¹å¾è¾“å…¥æ·±åº¦ç¥ç»ç½‘ç»œè¿›è¡Œåˆ†æäº†ï¼Œä½†è¿™å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºåœ¨è¾“å…¥ç¥ç»ç½‘ç»œä¹‹å‰éœ€è¦æŠŠè¿™äº›ç‰¹å¾è¿›è¡Œå‘é‡åŒ–è¡¨ç¤ºã€‚åœ¨ç ”ç©¶è¿‡ç¨‹ä¸­ï¼ŒåŒ—äº¬å¤§å­¦æå‡ºäº†ä¸€ç³»åˆ—è§£å†³ç¨‹åºè¯­è¨€æˆåˆ†ç›¸é‡åŒ–çš„åŠæ³•ï¼Œå¹¶ä¸”åœ¨å›½é™…ä¸Šæœ€æ—©å‘è¡¨äº†ç›¸å…³çš„è®ºæ–‡ï¼Œè¿™äº›éƒ½ä¸º aiXcoder çš„æ„é€ æ‰“ä¸‹äº†åŸºç¡€ã€‚ å›¢é˜Ÿä»‹ç» ææˆˆæ•™æˆæ‰€åœ¨çš„åŒ—äº¬å¤§å­¦é«˜å¯ä¿¡è½¯ä»¶æŠ€æœ¯æ•™è‚²éƒ¨é‡ç‚¹å®éªŒå®¤æ˜¯å›½å†…é¡¶å°–çš„è½¯ä»¶ç§‘å­¦ç ”ç©¶å›¢é˜Ÿï¼Œæ˜¯åŒ—äº¬å¤§å­¦è®¡ç®—æœºè½¯ä»¶ä¸ç†è®ºå…¨å›½é‡ç‚¹å­¦ç§‘çš„ä¸»è¦æ”¯æ’‘ï¼Œå…¶å»ºè®¾å†å²å¯ä»¥è¿½æº¯åˆ° 1955 å¹´ï¼Œè‡³ä»Šå·²æœ‰ 60 å¤šå¹´çš„å­¦æœ¯æ²‰æ·€å’Œç§¯ç´¯ã€‚è¯¥å›¢é˜Ÿåœ¨è‘—åè½¯ä»¶ç§‘å­¦å®¶æ¨èŠ™æ¸…é™¢å£«å’Œæ¢…å®é™¢å£«çš„å¸¦é¢†ä¸‹ï¼Œå·²ç»æˆé•¿ä¸ºè¯¥é¢†åŸŸå›½é™…é¢†å…ˆçš„ç ”ç©¶å›¢é˜Ÿã€‚åŸºäºæ·±åº¦å­¦ä¹ çš„ä»£ç åˆ†æä¸ç”Ÿæˆä¸€ç›´æ˜¯ææˆˆæ•™æˆçš„ç ”ç©¶æ–¹å‘ï¼Œä¹Ÿæ˜¯åŒ—å¤§é«˜å¯ä¿¡è½¯ä»¶æŠ€æœ¯æ•™è‚²éƒ¨é‡ç‚¹å®éªŒå®¤é‡ç‚¹å…³æ³¨çš„é¢†åŸŸï¼Œä»–ä»¬ä» 2013 å¹´å¼€å§‹å°±å¼€å±•äº†åŸºäºæ·±åº¦å­¦ä¹ çš„ä»£ç åˆ†æç ”ç©¶ï¼Œä» 2015 å¹´å¼€å§‹å°±å°†æ·±åº¦å­¦ä¹ ç”¨äºä»£ç ç”Ÿæˆï¼Œæ˜¯æœ€å¼€å§‹è¿›è¡Œç›¸å…³ç ”ç©¶çš„å›¢é˜Ÿä¹‹ä¸€ã€‚è¯¥å›¢é˜Ÿåœ¨ AAAI/IJCAI/ACL ç­‰é¡¶ä¼šä¸Šå‘è¡¨è¿‡å¾ˆå¤šä»£ç ç”Ÿæˆçš„ç›¸å…³è®ºæ–‡ï¼Œè¿™ä¹Ÿæ˜¯ä¸€å¤§ç¬”æŠ€æœ¯ç´¯ç§¯ã€‚ ææˆˆæ•™æˆæ˜¯ aiXcoder åˆ›å§‹äººï¼ŒåŒ—äº¬å¤§å­¦è®¡ç®—æœºç§‘å­¦æŠ€æœ¯ç³»å‰¯æ•™æˆï¼ŒCCF è½¯ä»¶å·¥ç¨‹ä¸“å§”ä¼šç§˜ä¹¦é•¿ï¼Œæ–¯å¦ç¦å¤§å­¦è®¡ç®—æœºç³»äººå·¥æ™ºèƒ½å®éªŒå®¤è®¿é—®å‰¯æ•™æˆã€‚ä¸»è¦ç ”ç©¶æ–¹å‘ï¼šç¨‹åºåˆ†æï¼Œç¨‹åºç”Ÿæˆï¼Œæ·±åº¦å­¦ä¹ ã€‚æ‰€åœ¨ç ”ç©¶å›¢é˜Ÿèšç„¦äºåŸºäºæœºå™¨å­¦ä¹ æ¦‚ç‡æ¨¡å‹çš„ç¨‹åºè¯­è¨€å¤„ç†ï¼Œåœ¨ä»£ç åŠŸèƒ½åˆ†æã€ä»£ç è‡ªåŠ¨è¡¥å…¨ã€ä»£ç ç¼ºé™·æ£€æµ‹ç­‰æ–¹é¢å–å¾—å¹¶ä¿æŒäº†å›½é™…ä¸Šé¢†å…ˆçš„ç ”ç©¶æˆæœã€‚ æœºå™¨ä¹‹å¿ƒåŸåˆ› ğŸ‘‡ ä½œè€…ï¼šæ€æºã€ä¸€é¸£","link":"/Software/aixcoder/"},{"title":"å–„ç”¨ä½³è½¯-Moom","text":"ã€ŒMoomã€æ˜¯ä¸€æ¬¾ Mac çª—å£æ•´ç†è½¯ä»¶ï¼ŒåŠŸèƒ½å’Œã€ŒMagnetã€ç±»ä¼¼ï¼Œè½¯ä»¶æä¾›äº†å‡ ä¸ªé¢„ç½®çš„çª—å£ä½ç½®ä¾›ä½ é€‰æ‹©ï¼Œä½¿çª—å£æ’åˆ—ä¸ä¼šæ‚ä¹±æ— ç« ï¼Œä¸ç®¡æ˜¯å•é¡¹äº‹åŠ¡è¿˜æ˜¯ååŒä»»åŠ¡éƒ½èƒ½äº•äº•æœ‰æ¡ã€‚ é¦–å…ˆè¦è¯´ï¼Œä¸ªäººæ›´å–œæ¬¢ã€ŒMagnetã€ï¼Œå› ä¸ºå…¶å­˜åœ¨æ„Ÿä½ï¼Œåªéœ€è¦è®°ä½å‡ ä¸ªå¿«æ·é”®ä¾¿èƒ½éšå¿ƒæ‰€æ¬²åœ°ä½¿ç”¨å¹¶è·å¾—æå¥½çš„ä½“éªŒã€‚ ã€ŒMoomã€åœ¨çƒ­é”®çš„æ•ˆç‡ä¸Šå¹¶ä¸å¦‚ã€ŒMagnetã€ï¼Œå› ä¸ºä»–çš„çƒ­é”®é€»è¾‘æ˜¯éœ€è¦ä¸¤æ­¥æ‰èƒ½å®Œæˆï¼Œå³ç¬¬ä¸€æ­¥å‘¼å‡ºã€ŒMoomã€ï¼Œç¬¬äºŒéƒ¨é€‰æ‹©é¢„è®¾åŠ¨ä½œã€‚ä½†å®ƒç»™äº†ç”¨æˆ·å…¶ä»–å¯èƒ½æ›´å¥½çš„é€‰æ‹©ã€‚ åªéœ€è¦å°†é¼ æ ‡æŒ‡é’ˆæ‚¬åœåœ¨ä»»æ„çª—å£çš„ç»¿è‰²æœ€å¤§åŒ–æŒ‰é’®ä¸Šï¼Œã€ŒMoomã€çš„å¼¹å‡ºèœå•å°±ä¼šå‡ºç°ï¼Œé€‰æ‹©å…¶ä¸­çš„é¢„è®¾å³å¯å°†è¯¥çª—å£å˜æ¢åˆ°æƒ³è¦çš„ä½ç½®å’Œå°ºå¯¸æ¯”ä¾‹ã€‚ è¿™æ›´ç¬¦åˆä½¿ç”¨ç›´è§‰ï¼Œå¹¶è¢«å¾ˆå¤šæ›´å€¾å‘ä½¿ç”¨é¼ æ ‡çš„ç”¨æˆ·æ¥å—ã€‚ è¿˜æœ‰ï¼Œå½“ä½ å°†é¼ æ ‡æŒ‡é’ˆæ‚¬åœåœ¨ä»»æ„çª—å£çš„ç»¿è‰²æœ€å¤§åŒ–æŒ‰é’®ä¸Šï¼Œå¹¶æŒ‰ä½ Option é”®ï¼Œã€ŒMoomã€ä¼šç»™ä½ æ›´å¤šçš„é€‰æ‹©ï¼Œä¸»è¦æ˜¯ 1/4 çª—å£çš„æ‰©å±•ã€‚ ã€ŒMoomã€è¿˜æ”¯æŒâ€è¾¹ç¼˜å’Œè§’è½å¸é™„â€ï¼Œæ‹–æ‹½çª—å£åˆ°å±å¹•è¾¹ç¼˜æˆ–ä¸€è§’ï¼Œä¾¿èƒ½è§¦å‘ç›¸åº”çš„çª—å£å˜æ¢ã€‚ ã€ŒMoomã€è¿˜æä¾›äº†è¯¸å¤šè‡ªå®šä¹‰é¡¹ï¼Œæ¯”å¦‚å°ºå¯¸æ¯”ä¾‹ã€ä¿å­˜å½“å‰çª—å£ä½ç½®æ¯”ä¾‹ä¸ºé¢„è®¾ã€å“åº”æ—¶é—´ç­‰ï¼Œå¦‚æœä½ æ›´å–œæ¬¢å…¶å’Œçª—å£çš„èåˆæ€§ï¼Œä¸å¦¨è¯•è¯•ã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/Software/Moom/"},{"title":"å–„ç”¨ä½³è½¯ uPic","text":"å¯¹äºmarkdowné‡åº¦ç”¨æˆ·è€Œè¨€ï¼Œä¸€æ¬¾å¥½ç”¨çš„å›¾åºŠå·¥å…·èƒ½å¤Ÿæœ‰æ•ˆæå‡æ•ˆç‡ã€‚ä»Windowsåˆ°Macï¼Œç¬”è€…ä¹Ÿç®—æ˜¯è¾—è½¬ç”¨è¿‡å¤šæ¬¾å›¾åºŠå®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬iPicã€PicGoç­‰ç­‰ã€‚è€Œè‡ªä»æ›´æ¢æ–°çš„å·¥ä½œç¯å¢ƒä¹‹åï¼Œç¬”è€…å¯¹äºå›¾åºŠå®¢æˆ·ç«¯åˆæœ‰äº†æ–°çš„éœ€æ±‚â€”â€”è‡ªå®šä¹‰å›¾åºŠã€‚ å¹¸å¥½ï¼Œä¸€æ¬¡æœºç¼˜å·§åˆè®©ç¬”è€…é‡åˆ°äº†uPicï¼Œé™¤äº†æ”¯æŒå¾®åšã€SM.MSã€ä¸ƒç‰›äº‘ã€è…¾è®¯äº‘ç­‰å›¾åºŠä¹‹å¤–ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰é…ç½®å›¾åºŠã€‚ uPicä¸‹è½½åœ°å€ï¼šhttps://github.com/gee1k/uPic/releases ç¬”è€…ç›®å‰å·¥ä½œæ‰€ç”¨çš„ç¼–è¾‘å™¨ï¼Œæ—¢ä¸æ”¯æŒå¤–é“¾ï¼Œä¹Ÿä¸æ”¯æŒå›¾ç‰‡ç²˜è´´åè‡ªåŠ¨ä¸Šä¼ ï¼Œä¸€æ—¦æ¶‰åŠå¤šå›¾æ–‡ç« ï¼Œå…‰ä¸Šä¼ å›¾ç‰‡å°±æµªè´¹ä¸å°‘æ—¶é—´ã€‚å› æ­¤ï¼Œç¬”è€…èŒç”Ÿäº†æ„å»ºè‡ªå®šä¹‰å›¾åºŠçš„æƒ³æ³•ï¼Œæ›´å¹¸è¿çš„æ˜¯ï¼Œç¬”è€…å…¬å¸å¯¹äºå›¾ç‰‡ä¸Šä¼ æœåŠ¡å¹¶æ²¡æœ‰åšå¤ªå¤šçš„é™åˆ¶ï¼Œä¹Ÿè®©è¿™ç§æƒ³æ³•æˆä¸ºå¯èƒ½ã€‚ uPicæ˜¯ä¸€æ¬¾å¼€æºç®€æ´çš„å›¾åºŠå®¢æˆ·ç«¯ï¼Œæ–¹ä¾¿ç”¨æˆ·ç›´æ¥ä¸Šä¼ å›¾ç‰‡åˆ°æŒ‡å®šçš„å­˜å‚¨ç©ºé—´ï¼Œå¹¶è·å–æœ‰æ•ˆçš„markdownå›¾ç‰‡åœ°å€ï¼Œå…¶é»˜è®¤å›¾åºŠä¸ºSM.MSï¼Œå½“ç„¶ä¹Ÿæ”¯æŒé…ç½®è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰å¸¸è§çš„å¯¹è±¡å­˜å‚¨ã€‚æœ€å…³é”®çš„æ˜¯æ”¯æŒå›¾åºŠè‡ªå®šä¹‰é…ç½®ï¼Œä¹Ÿè®©æˆ‘æ¯…ç„¶æŠ›å¼ƒäº†ä¸€ç›´ä»¥æ¥ä»˜è´¹ä½¿ç”¨çš„iPicã€‚ å…¶å®èµ·åˆå¹¶ä¸é¡ºåˆ©ï¼Œåˆšä¸Šæ‰‹çš„uPicï¼ˆå¤§æ¦‚æ˜¯v0.7.0ç‰ˆæœ¬ï¼‰ï¼Œè‡ªå®šä¹‰å›¾åºŠé…ç½®å¹¶ä¸é€‚ç”¨äºç¬”è€…å¸¸ç”¨çš„ç¼–è¾‘å™¨ç¯å¢ƒã€‚å¥½åœ¨è½¯ä»¶å¼€å‘è€…@svendè¶³å¤Ÿçƒ­å¿ƒï¼Œåœ¨äº†è§£äº†ç¬”è€…çš„éœ€æ±‚åŠç¼–è¾‘ç¯å¢ƒä¹‹åï¼Œé‡æ„äº†è‡ªå®šä¹‰å›¾åºŠï¼Œä½¿å¾—ç¬”è€…çš„æƒ³æ³•å¾—ä»¥å®ç°ï¼ŒåŒ…æ‹¬å¤§å®¶åœ¨åé¦ˆç¾¤é‡Œæå‡ºçš„ä¸€äº›å»ºè®®ï¼Œä¹Ÿéƒ½åŠæ—¶é‡‡çº³å¹¶æ›´æ–°ã€‚ ç›´åˆ°æœ€æ–°å‘å¸ƒçš„v0.8.0ç‰ˆæœ¬ï¼ŒuPicå·²ç»æˆä¸ºä¸€æ¬¾éå¸¸æˆç†Ÿä¸”å¼ºå¤§çš„å›¾åºŠå®¢æˆ·ç«¯ï¼Œä¸”å®‰è£…åŒ…å¤§å°ä¹Ÿä¸è¿‡æ‰10.5Mã€‚ å¥½äº†ï¼Œå•°å—¦äº†è¿™ä¹ˆå¤šï¼Œä¹Ÿè¯¥è¿›å…¥æ­£é¢˜äº†ã€‚ uPicç›®å‰ä»…æ”¯æŒMacç«¯ï¼Œé»˜è®¤ä¸Šä¼ åˆ°SM.MSåŒ¿åå›¾åºŠï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æ”¯æŒå¾®åšã€ç äº‘ã€Githubä»¥åŠè…¾è®¯äº‘ã€é˜¿é‡Œäº‘ã€åˆæ‹äº‘ã€ä¸ƒç‰›äº‘æ€»å…±å…«ä¸ªå›¾åºŠã€‚å…¶ä¸­ï¼Œç”±äºå¾®åšè¿‘æœŸå·²ç»é™†ç»­å¼€å¯é˜²ç›—é“¾ï¼Œç¬”è€…ä¸å»ºè®®åœ¨ä¸ªäººåšå®¢ä¸­ä½¿ç”¨ã€‚åœ¨ä¸Šä¼ æ–¹å¼ä¸Šï¼ŒuPicæ”¯æŒæœ¬åœ°é€‰æ‹©/å¤åˆ¶æ–‡ä»¶ä¸Šä¼ ã€æˆªå›¾ä¸Šä¼ ï¼Œç”šè‡³å¯ç›´æ¥æ‹–åŠ¨æ–‡ä»¶åˆ°èœå•æ uPicå›¾æ ‡ä¸Šå®Œæˆä¸Šä¼ åŠ¨ä½œã€‚ åœ¨æœ€æ–°æ›´æ–°v0.8.0ç‰ˆæœ¬ä¹‹åï¼ŒuPicæ–°å¢æ”¯æŒç›´æ¥ä»æµè§ˆå™¨ä¸­å¤åˆ¶æˆ–è€…æ‹–åŠ¨åœ¨çº¿å›¾ç‰‡ä¸Šä¼ åˆ°æŒ‡å®šå›¾åºŠï¼Œè¿™æ ·å°±ä¸ç”¨ä¸‹è½½åˆ°æœ¬åœ°å†è¿›è¡Œä¸Šä¼ ã€‚ ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGIFåŠ¨å›¾ä¸å¤§ä¸€æ ·ï¼Œç›´æ¥ä»æµè§ˆå™¨ä¸­å¤åˆ¶æˆ–è€…æ‹–åŠ¨GIFä¸Šä¼ è‡³uPicå›¾åºŠï¼Œå¯èƒ½æœ€ç»ˆä¸Šä¼ çš„åªæ˜¯GIFå›¾ä¸­ä¸€å¸§çš„ç”»é¢ï¼Œæ‰€ä»¥å¯¹äºGIFæœ€å¥½è¿˜æ˜¯å…ˆä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åä½¿ç”¨uPicä¸Šä¼ åˆ°å›¾åºŠã€‚ åœ¨â€œè®¾ç½®â€”â€”æ‹“å±•â€”â€”è®¿è¾¾æ‹“å±•â€ä¸­å‹¾é€‰uPicä¸€é¡¹ï¼Œå³å¯å¼€å¯æœ¬åœ°æ–‡ä»¶å³é”®èœå•ä¸­â€œä½¿ç”¨uPicä¸Šä¼ â€çš„åŠŸèƒ½ï¼Œä¹Ÿç®—æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ä¸€ç§æœ¬åœ°æ–‡ä»¶ä¸Šä¼ æ–¹å¼ã€‚\u001b ä¸€æ—¦å®Œæˆä¸Šä¼ åŠ¨ä½œï¼Œæ‰€è¾“å‡ºçš„æ–‡ä»¶é“¾æ¥ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œç›´æ¥åœ¨æ–‡æ¡£ä¸­ç²˜è´´å³å¯ï¼Œåœ¨è¾“å‡ºé“¾æ¥æ ¼å¼ä¸Šå¯æ ¹æ®éœ€æ±‚é€‰æ‹©URLã€HTMLã€Markdownä¸‰ç§ã€‚ ç‚¹å‡»èœå•æ uPicå›¾æ ‡ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹æœ€è¿‘åæ¡ä¸Šä¼ è®°å½•ï¼ŒåŒæ—¶å¯ä»¥é¢„è§ˆä¸Šä¼ å†…å®¹ç¼©ç•¥å›¾ï¼Œä»¥ä¾¿é€‰æ‹©é‡æ–°å¤åˆ¶ã€‚ç†Ÿç»ƒä½¿ç”¨å¿«æ·é”®æ“ä½œï¼Œå¯ä»¥è¿›ä¸€æ­¥æå‡ä½¿ç”¨æ•ˆç‡ã€‚uPicæ”¯æŒä¸‰ç§ä¸Šä¼ æ–¹å¼çš„è‡ªå®šä¹‰å¿«æ·é”®ã€‚åŸºæœ¬ä¸ç”¨ç‚¹å‡»èœå•äº†å»é€‰æ‹©ï¼Œå³å¯å®Œæˆä¸Šä¼ åŠ¨ä½œã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è®¾å®šå¥½çš„å¿«æ·é”®å®Œæˆæˆªå›¾ä¸Šä¼ æ“ä½œï¼ŒæŒ‰ä½é¼ æ ‡æ¡†é€‰æ‰€éœ€åŒºåŸŸï¼Œæ¾å¼€é¼ æ ‡ä¹‹åå³å®Œæˆæˆªå›¾å¹¶ç›´æ¥ä¸Šä¼ åˆ°å›¾åºŠï¼ˆæ³¨æ„æ²¡æœ‰ç¡®è®¤æˆªå›¾çš„è¿‡ç¨‹å“¦ï½ï¼‰ã€‚ä½¿ç”¨è¿™æ®µæ—¶é—´ï¼Œç¬”è€…æ„Ÿè§‰uPicå·²ç»è¶³å¤Ÿæˆä¸ºä¸€æ¬¾é«˜æ•ˆã€ç®€æ´çš„å›¾åºŠå®¢æˆ·ç«¯ï¼Œæ”¯æŒå¼ºå¤§çš„è‡ªå®šä¹‰å›¾åºŠé…ç½®ï¼Œæ”¯æŒå¤åˆ¶/æ‹–åŠ¨ä¸Šä¼ ä»¥åŠå¿«æ·é”®æ“ä½œã€‚ä¸è¿‡åœ¨éƒ¨åˆ†ä½“éªŒä¸ŠiPicä¾ç„¶å€¼å¾—uPicå€Ÿé‰´ï¼Œä¾‹å¦‚å¤åˆ¶å›¾ç‰‡åç‚¹å‡»èœå•æ çš„iPicï¼Œèƒ½å¤Ÿæ¯”è¾ƒç›´è§‚åœ°çœ‹åˆ°å·²å¤åˆ¶å›¾ç‰‡åŠè¿‘æœŸä¸Šä¼ å›¾ç‰‡çš„é¢„è§ˆï¼Œä½“éªŒæ›´åŠ ç›´è§‚ã€‚ä¸å¾—ä¸æçš„æ˜¯ï¼Œå¼€å‘è€…@svendè™½ç„¶åªåˆ©ç”¨ä¸šä½™æ—¶é—´æ›´æ–°ç»´æŠ¤ï¼ŒåŒæ ·ä¿æŒäº†è¾ƒé«˜çš„æ›´æ–°é¢‘ç‡ï¼Œå‘ç°bugæˆ–è€…å…¶ä»–ä¸ç¨³å®šçš„å› ç´ æ›´æ˜¯ä¼šè¿å¤œä¿®å¤ï¼Œå¹¶ä¸”ä¼šåŠæ—¶åé¦ˆç”¨æˆ·çš„æ„è§ã€‚ä½œä¸ºä¸€æ¬¾å…è´¹çš„Macå›¾åºŠå®¢æˆ·ç«¯ï¼ŒuPicå·²ç»èµ¢å¾—äº†è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·äº²çã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/Software/uPic/"},{"title":"Software/macOS 10.14 Mojave  æ–°â¼¿â¼Šâ»”","text":"è‹¹æœ Mac æ“ä½œç³»ç»Ÿ","link":"/Software/mac/"},{"title":"ã€Œæ‹–æ”¾ã€Mac çš„åº•å±‚èƒ½åŠ›ï¼Œä¹Ÿæ˜¯æ•ˆç‡ç¥æŠ€","text":"ä¸ªäººæƒ¯ç”¨ Mac æ‹–æ”¾ï¼Œä½†æ¯æ¯èº«è¾¹åŒäº‹çœ‹æˆ‘çš„æ“ä½œä¹ æƒ¯ï¼Œéƒ½å¤§æƒŠå¤±è‰²ï¼Œæ„Ÿå¹ Mac è¿˜æœ‰è¿™ç§æ“ä½œï¼Œæ‰€ä»¥å†³å®šå•ç‹¬è®²ä¸€ç¯‡ Mac æ‹–æ”¾ã€‚ Macçš„æ‹–æ”¾å‡ ä¹æ˜¯å…¨å±€çš„ï¼Œæ¯”å¦‚ä½ å¯ä»¥å°†å›¾ç‰‡æ–‡ä»¶ä»åº”ç”¨æ‹–åˆ° Finderï¼ŒåŒæ ·å¯ä»¥å°†æ–‡ä»¶ä» Finder æ‹–è‡³åº”ç”¨å†…ï¼Œç”šè‡³ä»åº”ç”¨Aæ‹–æ‹½è‡³åº”ç”¨Bã€‚ æ€»ä¹‹ï¼ŒåŸºäº Finder çš„æ–‡ä»¶æ‹–æ‹½ï¼Œè®©ç³»ç»Ÿå’Œåº”ç”¨ã€åº”ç”¨å’Œåº”ç”¨ååŒèµ·æ¥ï¼Œå¤§å¤§æé€Ÿã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ã€‚ åº”ç”¨-&gt;Finder 1.å¾®ä¿¡-&gt;Finder 2.æµè§ˆå™¨-&gt;Finder å‡ºäºç‰ˆæƒå®‰å…¨çš„è€ƒè™‘ï¼Œä»¥åŠå‰ç«¯æŠ€æœ¯çš„æé€Ÿé©æ–°ï¼Œéƒ¨åˆ†ç½‘ç«™å·²ä¸å†æ”¯æŒå°†å›¾ç‰‡æ‹–æ‹½è‡³ Finderï¼Œä½†å¤šæ•°ç½‘ç«™ä»ç„¶æ”¯æŒã€‚ 3.PDF-&gt;Finder å¦‚æœä½ åªéœ€è¦ PDF 20Pä¸­çš„1Pï¼Œå¯ä»¥å•ç‹¬æ‹–æ‹½è‡³Finderã€‚ Finder-&gt;åº”ç”¨ 1.Finder-&gt;å¾®ä¿¡ 2.Finder-&gt;åŠå…¬å¥—ä»¶ 3.Finder-&gt;PDF åº”ç”¨-&gt;åº”ç”¨ 1.æµè§ˆå™¨-&gt;å¾®ä¿¡ 2.å¾®ä¿¡-&gt;åŠå…¬å¥—ä»¶ é™¤äº†ä»¥ä¸Šâ€åº”ç”¨-&gt;Finderï¼ŒFinder-&gt;åº”ç”¨ï¼Œåº”ç”¨-&gt;åº”ç”¨â€å‡ ç§æ‹–æ”¾ï¼ŒMac è¿˜æœ‰å…¶ä»–å¾ˆå¤šåœ°æ–¹æ”¯æŒæ­¤æ“ä½œï¼Œæ¯”å¦‚æ–‡ä»¶æ‹–æ‹½è‡³åƒåœ¾æ¡¶ã€åº”ç”¨æ‹–æ‹½è‡³Dockerã€æ–‡ä»¶æ‹–æ‹½è‡³ Docker ä¸Šåº”ç”¨å›¾æ ‡å³å¯æ‰“å¼€â€¦â€¦ ä½¿ç”¨æ‹–æ‹½ï¼Œè¿˜æ˜¯å¤åˆ¶ç²˜è´´ï¼Œæˆ–æ˜¯é€šè¿‡å„ä¸ªåº”ç”¨çš„èœå•å®Œæˆæ“ä½œï¼Œéƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚æœä½ çŸ¥é“äº† MacOS çš„ä¸€é¡¹æ–°èƒ½åŠ›ï¼Œä¸å¦¨è¯•è¯•ã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/Software/DragAndDrop/"},{"title":"å–„ç”¨ä½³è½¯ é¢„è§ˆ","text":"ã€Œé¢„è§ˆã€ä½œä¸º Mac è‡ªå¸¦çš„ PDF&amp;å›¾ç‰‡ åº”ç”¨ï¼Œå¤§éƒ½æ•°ç”¨æˆ·åªæ˜¯æ‹¿æ¥å½“ å›¾åƒæŸ¥çœ‹å™¨ ä½¿ç”¨ï¼Œè€Œå¹¶ä¸äº†è§£å®ƒçš„è¯¸å¤šåŠŸèƒ½ã€‚Mac å¾ˆå¤šç³»ç»Ÿçº§åº”ç”¨éƒ½æœ‰å¾ˆå¥½çš„ä½“éªŒï¼Œæ¯”å¦‚æˆªå›¾ã€æé†’äº‹é¡¹ã€å½•å±ç­‰ç­‰ï¼Œå®ƒä»¬æ»¡è¶³ç¡¬æ€§éœ€æ±‚ï¼Œä¸”å’Œ iPhone èƒ½æ›´å¥½çš„ååŒï¼Œè™½ç„¶éƒ¨åˆ†ä¸å¦‚ç¬¬ä¸‰æ–¹è½¯ä»¶åŠŸèƒ½ä¸°å¯Œï¼Œä½†ä¹Ÿååˆ†ç®€æ´ã€‚ æˆ‘ä½¿ç”¨ã€Œé¢„è§ˆã€æœ€é¢‘ç¹çš„åŠŸèƒ½å°±æ˜¯ PDF åˆ›å»ºã€åˆå¹¶å’Œæ’åºäº†ã€‚ æ¯”å¦‚è¦åšä¸Šä¸ªæœˆçš„æŠ¥é”€å‡­è¯ï¼Œæ‰€æœ‰å‡­è¯æ‹ç…§ã€æ”¶é›†å®Œæ¯•åï¼Œåœ¨ Finder ä¸­å…¨é€‰-å³é”®ï¼Œå¯ä»¥åˆ›å»º PDFã€‚æ‰“å¼€è¯¥ PDF æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸Šä¸‹æ‹–æ‹½è¿›è¡Œæ’åºï¼Œå¦‚æœè¦åŠ å…¥æ–°çš„å‡­è¯ï¼Œå¯ä»¥ä» Finder å°†å›¾ç‰‡æˆ– PDF æ–‡ä»¶æ‹–æ‹½è‡³ã€Œé¢„è§ˆã€å·¦ä¾§ç¼©ç•¥å›¾åˆ—è¡¨ä¸­ã€‚ é™¤äº†è¿™ä¸ªï¼Œã€Œé¢„è§ˆã€è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œéšä¾¿è®²å‡ ä¸ªï¼š 1.ç­¾å éœ€è¦ç»™æ–‡ä»¶ç­¾åï¼Œæ²¡æœ‰æ‰“å°æœºï¼Œåªéœ€è¦ç”¨ã€Œé¢„è§ˆã€æ‰“å¼€éœ€è¦ç­¾åçš„æ–‡ä»¶ï¼Œç‚¹å‡»ç­¾åèœå•ï¼Œå¯ä»¥é€šè¿‡ è§¦æ‘¸æ¿ä¹¦å†™ã€æ‘„åƒå¤´è·å–ä¸¤ç§æ–¹å¼ç”Ÿæˆç­¾åï¼Œé™„åŠ åœ¨éœ€è¦ç­¾åçš„æ–‡ä»¶ä¸Šã€‚ 2.åŠ å¯† å¦‚æœä½ çš„ PDF æ–‡ä»¶æ¶‰åŠæœºå¯†ï¼Œå¯ä»¥ç‚¹å‡»ã€Œé¢„è§ˆã€çš„å¯¼å‡ºï¼Œé€‰æ‹© PDF æ ¼å¼ï¼Œé€‰æ‹©å¯†ç é€‰é¡¹ï¼Œè®¾ç½®éœ€è¦çš„å¯†ç å³å¯ã€‚ 3.æ ¼å¼è½¬æ¢ã€Œé¢„è§ˆã€å¯ä»¥å°†å›¾åƒæ–‡ä»¶è½¬æ¢ä¸ºè®¸å¤šæ–‡ä»¶ç±»å‹ï¼ŒåŒ…æ‹¬ HEICã€JPEGã€JPEG 2000ã€PDFã€PNG å’Œ TIFF ç­‰ï¼Œåªéœ€è¦åœ¨å¯¼å‡ºæ—¶é€‰æ‹©éœ€è¦çš„æ ¼å¼ã€‚å…¶ä¸­ï¼ŒJPEGã€JPEG 2000æ”¯æŒè°ƒèŠ‚è´¨é‡å¤§å°ï¼ŒPDF æ”¯æŒåŠ å¯†å’Œæ»¤é•œé€‰é¡¹ï¼ŒQuartz æ»¤é•œè¿˜åŒ…æ‹¬äº†å‡å°æ–‡ä»¶å°ºå¯¸çš„å­é€‰é¡¹ã€‚ 4.å›¾ç‰‡å¤„ç† è°ƒæ•´å°ºå¯¸ã€é¢œè‰²ã€å³æ—¶ AlphaæŠ å›¾ã€é€Ÿå†™ã€å½¢çŠ¶â€¦â€¦ èƒ½å¤Ÿæ»¡è¶³ç®€å•çš„å›¾ç‰‡å¤„ç†éœ€æ±‚ã€‚ è¿˜æœ‰å…¶ä»–ä¸€äº›åŠŸèƒ½å°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹è¿™ã€Œé¢„è§ˆã€çš„å®˜æ–¹ä½¿ç”¨æ‰‹å†Œï¼Œä¸å¦¨æŒ–æ˜ä¸‹ã€‚","link":"/Software/preview/"},{"title":"è¶…æ—¶ç©ºä»çŠ¯","text":"ä½ å›å¤´çœ‹äº†æˆ‘ä¸€çœ¼ æˆ‘è§‰å¾—é‚£å¾ˆä¹…å¾ˆä¹…","link":"/label/Accomplice/"},{"title":"WWDC 2014","text":"Remembering that you are going to die is the best way I know to avoid the trap of thinking you have something to loseã€‚ è°¨è®°è‡ªå·±æ€»ä¼šæ­»å»ï¼Œæ˜¯è®©è‡ªå·±é¿å…é™·å…¥â€œäººç”Ÿæœ‰æ‰€å¤±â€æ€è€ƒçš„æœ€ä½³æ–¹æ³•ã€‚","link":"/news/2014/"},{"title":"WWDC 2015","text":"I think the greatest value of learning how to thinkâ€¦. I think everybody in this country should learn how to program a computer, should learn a computer language, because it teaches you how to think, itâ€™s like going to law school, I donâ€™t think anybody should be a lawyer, but I think going to law school may actually be useful coz it teaches you how to think in a certain way. In the same way the computer programming teaches you in a slightly different way how to thinkâ€¦ And so â€¦ I view computer science as a liberal art. It should be something everybody takes in a year in their life, one of the courses they take is, you know learning how to program. â€”â€”â€“ Steve Jobs æˆ‘è®¤ä¸ºå­¦ä¹ æ€è€ƒæœ€å¤§çš„ä»·å€¼åœ¨äºâ€¦ æˆ‘è§‰å¾—æ‰€æœ‰ç¾å›½äººéƒ½åº”è¯¥å­¦ä¹ ç¼–ç¨‹ï¼Œå­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå­¦ä¹ ç¼–ç¨‹æ•™ä½ å¦‚ä½•æ€è€ƒï¼Œå°±åƒå­¦æ³•å¾‹ä¸€æ ·ï¼Œå­¦æ³•å¾‹çš„äººæœªå¿…éƒ½æˆä¸ºå¾‹å¸ˆï¼Œä½†æ³•å¾‹æ•™ä½ ä¸€ç§æ€è€ƒæ–¹å¼ã€‚åŒæ ·ç¼–ç¨‹ä¼šæ•™ä½ å¦ä¸€ç§æ€è€ƒæ–¹å¼ï¼Œæ‰€ä»¥æˆ‘æŠŠè®¡ç®—æœºç§‘å­¦çœ‹æˆåŸºç¡€æ•™è‚²ï¼Œæ˜¯æ¯ä¸ªäººéƒ½åº”è¯¥èŠ±ä¸€å¹´æ—¶é—´å­¦ä¹ çš„è¯¾ç¨‹ã€‚ â€”â€”â€“ å²è’‚å¤«Â·ä¹”å¸ƒæ–¯","link":"/news/2015/"},{"title":"WWDC 2016","text":"Thereâ€™s a phrase in Buddhism, â€˜Beginnerâ€™s mind.â€™ Itâ€™s wonderful to have a beginnerâ€™s mind. ä½›æ•™ä¸­æœ‰ä¸€å¥è¯ï¼šåˆå­¦è€…çš„å¿ƒæ€ï¼šæ‹¥æœ‰åˆå­¦è€…çš„å¿ƒæ€æ˜¯ä»¶äº†ä¸èµ·çš„äº‹æƒ…ã€‚","link":"/news/2016/"},{"title":"WWDC 2017","text":"We think basically you watch television to turn your brain off, and you work on your computer when you want to turn your brain on. æˆ‘ä»¬è®¤ä¸ºçœ‹ç”µè§†çš„æ—¶å€™ï¼Œäººçš„å¤§è„‘åŸºæœ¬åœæ­¢å·¥ä½œï¼Œæ‰“å¼€ç”µè„‘çš„æ—¶å€™ï¼Œå¤§è„‘æ‰å¼€å§‹è¿è½¬ã€‚","link":"/news/2017/"},{"title":"2020å¹´é¡¶çº§ç¼–ç¨‹è¯­è¨€çš„ç»Ÿè®¡æ•°æ®å’Œè°ƒæŸ¥ç»“æœå¦‚ä½•ï¼Ÿ","text":"æ¯”è¾ƒç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ä»¶éå¸¸å¤æ‚çš„äº‹æƒ…ï¼Œæ‰€ä»¥æœ‰è®¸å¤šå›¾å½¢æ’å›¾/ç¬‘è¯è¯•å›¾è±¡å¾ç¼–ç¨‹è¯­è¨€ ã€‚ æˆ‘å‘ç°å¾ˆå°‘ï¼Œæˆ‘æ­£åœ¨å¼€å§‹è¿™ç¯‡æ–‡ç« ã€‚ ç®€å•æ¥è¯´ï¼Œ ç¼–ç¨‹è¯­è¨€ä½¿äººç±»èƒ½å¤ŸæŒ‡å¯¼å’Œæ§åˆ¶æœºå™¨ã€‚ å› æ­¤ï¼Œå¾ˆè‡ªç„¶ä¼šæœ‰è¿™ä¹ˆå¤šè¯­è¨€è¯•å›¾ä½¿è¿™ä¸ªè¿‡ç¨‹æ›´åŠ å¼ºå¤§å’Œç®€å•ã€‚ ç”±äºè¿™ä¸ªåŸå› ï¼Œæœ‰æ•°ç™¾ç§ç¼–ç¨‹è¯­è¨€ ï¼Œå…¶ä¸­è®¸å¤šç¼–ç¨‹è¯­è¨€ç°åœ¨å·²ç»ä¸å†ä½¿ç”¨ï¼Œå¾ˆå°‘æœ‰å°†åœ¨æœªæ¥å‡ å¹´è¿‡æ—¶ï¼Œç„¶åæœ‰ä¸€äº›è¯­è¨€å°†ç»§ç»­å¹¶è¯æ˜å…¶åœ¨æœªæ¥å‡ å¹´çš„ä½¿ç”¨å’Œç„¶åæœ‰æ–°çš„ç¼–ç¨‹è¯­è¨€äº‰å–æ¥å—ã€‚ æœ¬æ–‡å°†ä»‹ç»é¡¶çº§ç¼–ç¨‹è¯­è¨€çš„è¶‹åŠ¿ï¼Œè¿™äº›è¶‹åŠ¿å°†åœ¨2020å¹´ç»§ç»­ã€‚ ä¸ºäº†é¢„æµ‹2020å¹´ ç¼–ç¨‹è¯­è¨€çš„è¶‹åŠ¿ï¼Œæœ¬æ–‡æ ¹æ®ç¼–ç¨‹è¯­è¨€ä½¿ç”¨æ¥è‡ªçœŸå®è°ƒæŸ¥ ï¼Œå„ç§æ”¶é›†çš„ç»Ÿè®¡æ•°æ® ï¼Œæœç´¢ç»“æœå’Œè–ªèµ„è¶‹åŠ¿çš„æ•°æ®ã€‚ æœ¬æ–‡å°†å¸®åŠ©æ–°å­¦ä¹ è€…é€‰æ‹©ä¸€ç§ç¼–ç¨‹è¯­è¨€è¿›è¡Œå­¦ä¹ å’Œä¸“å®¶å­¦ä¹ ï¼Œè¿™å°†æœ‰åŠ©äºå†³å®šåˆ‡æ¢åˆ°å¦ä¸€ç§è¯­è¨€æˆ–ç»§ç»­ä½¿ç”¨ä»–çš„ä¸“ä¸šè¯­è¨€ã€‚ åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘å‡†å¤‡äº†ä¸¤ä¸ªè¡¨ï¼Œæ€»ç»“äº†è¿‡å»äº”å¹´ï¼ˆ2015-19ï¼‰ä¸­ç¼–ç¨‹è¯­è¨€çš„æµè¡Œè¶‹åŠ¿ã€‚ è¯¥æ•°æ®æ¥è‡ª2015 - 19å¹´çš„ Stackoverflow äººæ°”è°ƒæŸ¥ ã€‚ ä¸ºäº†æ¸…æ¥šå‡†ç¡®åœ°ç†è§£ï¼Œç¼–ç¨‹è¯­è¨€åˆ†ä¸ºä¸¤ç»„ï¼Œç¬¬ä¸€ç»„æ˜¯ 2000 å¹´ä»¥å‰è¯ç”Ÿçš„è¯­è¨€ï¼Œç¬¬äºŒç»„æ˜¯ 2000 å¹´ä»¥åè¯ç”Ÿçš„è¯­è¨€ã€‚ é€‰æ‹©2000ä½œä¸ºè¾¹ç•Œåªæ˜¯éšæœºçš„ï¼Œä½†å¯¹äºç†è§£è¿™ä¸¤ç»„çš„ç¼–ç¨‹è¶‹åŠ¿éå¸¸æœ‰å¸®åŠ©ã€‚ è¯¥è¡¨è¿˜åˆ—å‡ºäº†è¿™äº›ç¼–ç¨‹/è„šæœ¬è¯­è¨€çš„èµ·æºå¹´ä»½å’Œä¸»è¦æˆ–è®°å½•çš„ç›®çš„ã€‚ è¯­è¨€ èµ·æº 2015å¹´ 2016 2017å¹´ 2018 2019 ä¸»è¦ç›®çš„ Javascript 1995å¹´ 54.4ï¼… 55.4ï¼… 62.5ï¼… 71.5ï¼… 67.8ï¼… Webå¼€å‘ï¼ŒåŠ¨æ€å†…å®¹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ Java 1995å¹´ 37.4ï¼… 36.3ï¼… 39.7ï¼… 45.4ï¼… 41.1ï¼… ä¼ä¸šåº”ç”¨ Bash/Shell 1971å¹´è‡³1979å¹´ - - - 40.4ï¼… 36.6ï¼… è‡ªåŠ¨åŒ–å’Œç³»ç»Ÿç®¡ç†å‘˜ Python 1991å¹´ 23.8ï¼… 24.9ï¼… 32.0ï¼… 37.9ï¼… 41.7ï¼… ä¸€èˆ¬ç”¨é€” PHP 1995å¹´ 29.7ï¼… 25.9ï¼… 28.1ï¼… 31.4ï¼… 26.4ï¼… Webå¼€å‘ï¼ŒæœåŠ¡å™¨ç«¯ C ++ 1980è‡³1983å¹´ 20.6ï¼… 19.4ï¼… 22.3ï¼… 24.6ï¼… 23.5ï¼… ä¸€èˆ¬ç”¨é€” C 1972å¹´ 16.4ï¼… 15.5ï¼… 19.0ï¼… 22.1ï¼… 20.6ï¼… é€šç”¨ï¼Œä½çº§ç¼–ç¨‹ Ruby 1995å¹´ 8ï¼… 8.9ï¼… 9.1ï¼… 10.3ï¼… 8.4ï¼… Webå¼€å‘ R 1993å¹´ - - 4.5ï¼… 6.0ï¼… 5.8ï¼… ç»Ÿè®¡è®¡ç®— Objective-C 1986å¹´ 7.8ï¼… 6.5ï¼… 6.4ï¼… 7.3ï¼… 4.8ï¼… ä¸€èˆ¬ç”¨é€” è§‚å¯Ÿï¼š é™¤äº†Pythonä¹‹å¤–ï¼Œä»2018å¹´åˆ°2019å¹´æ‰€æœ‰è¯­è¨€çš„æµè¡Œåº¦éƒ½åœ¨ä¸‹é™ã€‚ PythonPythonæ˜¯è‡ªè¿‡å»äº”å¹´ä»¥æ¥ä¸æ–­ä¸Šå‡çš„å”¯ä¸€è¯­è¨€ã€‚ å®ƒæ˜¯ä¸€ç§é€šç”¨è¯­è¨€ï¼Œå› æ­¤æœ‰äººå¸Œæœ›åœ¨2020å¹´åªå­¦ä¹ ä¸€é—¨ç¼–ç¨‹ï¼Œå¹¶å¸Œæœ›æ¶µç›–æ›´å¤šçš„è½¯ä»¶å¼€å‘é¢†åŸŸï¼Œç„¶åå¯ä»¥é€‰æ‹©Python ã€‚ JAVAJavaæ­£åœ¨ä¸Šå‡ä½†åœ¨2019å¹´ä¸‹é™ï¼ŒåŸå› æ˜¯Kotlinåœ¨Androidå¹³å°ä¸Šè·å¾—äº†æ™®åŠã€‚ Javaæ˜¯ç¼–ç¨‹è¯­è¨€çš„ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œä½†ç°åœ¨å®ƒåœ¨Oracleä¸‹é¢ ï¼Œ è°·æ­Œæ­£åœ¨æ¨å¹¿Kotlinï¼Œå› æ­¤å®ƒå¤„äºå†²çªåŒºåŸŸã€‚ äº‹å®ä¸Šï¼Œç”±äºå…¶å¼€å‘äººå‘˜åŸºç¡€ï¼Œæ¡†æ¶å’Œé—ç•™åº”ç”¨ç¨‹åºï¼Œå¤§é‡å…¬å¸æ­£åœ¨ä½¿ç”¨Javaå¹¶ç»§ç»­ä½¿ç”¨Java ã€‚ C / C ++Cå’ŒC ++ä»ç„¶ä¿æŒç€å¤§çº¦20ï¼…ï¼Œå¹¶ä¸”ç”±äºå…¶å›ºæœ‰çš„åŠŸèƒ½å’Œé—ç•™ç³»ç»Ÿï¼Œå®ƒå°†ä¼šå­˜åœ¨ã€‚ JAVASCRIPTJavaScriptå—æ¬¢è¿ç¨‹åº¦å¯å½’å› äºæµè¡Œçš„JavaScriptåº“å’Œnode.jsç­‰æ¡†æ¶çš„å¢é•¿.JSæ˜¯åŠ¨æ€ç½‘ç«™çš„è¯­è¨€ï¼Œç”±äºå…¶ç§¯æçš„å¼€å‘ï¼Œ Mozillaçš„æ”¯æŒå’Œæƒ©ç½šï¼Œå®ƒå°†æˆä¸ºæœªæ¥å‡ å¹´çš„é¦–é€‰ã€‚ å›¾ä¹¦é¦†å’Œæ¡†æ¶ ã€‚ æ‰€ä»¥ï¼Œå¦‚æœæœ‰äººæƒ³è¦è¿›è¡ŒWebå¼€å‘ï¼Œé‚£ä¹ˆjavascriptæ˜¯å¿…é¡»çš„ã€‚ RRè¿‘å¹´æ¥è¶Šæ¥è¶Šå—æ¬¢è¿ï¼ŒåŸå› åœ¨äºæ•°æ®åˆ†æçš„å¢é•¿å’Œæ™®åŠã€‚ å®ƒè¢«æ•°æ®ç§‘å­¦å®¶ä½¿ç”¨ï¼Œä½†ä¸Pythonç›¸æ¯”ï¼Œå®ƒå·²ç»æˆä¸ºé€šç”¨è¯­è¨€ï¼Œå¹¶ä¸”æ‹¥æœ‰å¤§é‡æ•°æ®ç§‘å­¦åº“å’Œæ¨¡å—çš„æ´»è·ƒå¼€å‘äººå‘˜ã€‚ å› æ­¤ï¼Œå¦‚æœä»–ä»¬å¿…é¡»åªé€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼Œé‚£ä¹ˆäººä»¬å¯ä»¥æ›´å–œæ¬¢Pythonè€Œä¸æ˜¯æ•°æ®ç§‘å­¦ä¸­çš„æƒ³è¦è½½ä½“ï¼Œé‚£ä¹ˆå­¦ä¹ ä¸¤è€…éƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ Rubyä¸PHPä¸€æ ·ï¼Œ Rubyä¹Ÿé¢ä¸´æ¥è‡ªJavaScriptç”šè‡³Pythonçš„æ¿€çƒˆç«äº‰ï¼Œä»¥å»ºç«‹åç«¯Webå¼€å‘ç¼–ç¨‹è¯­è¨€ã€‚ æ‰€ä»¥ï¼Œå†æ¬¡å¯¹äºwebå¼€å‘javascriptå’ŒPython ï¼ˆæœåŠ¡å™¨ç«¯ï¼ˆFlaskï¼ŒDjangoç­‰ï¼‰å°†æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¹¶å°†æä¾›æ¯”Rubyæ›´å¤šçš„åŸŸçµæ´»æ€§ã€‚ PHPåœ¨2019å¹´ ï¼Œ PHPæµè¡Œåº¦æ€¥å‰§ä¸‹é™ï¼Œè¿™å¯ä»¥è¿½æº¯åˆ°æœåŠ¡å™¨ç«¯å¯¹javascriptå’ŒPythonçš„æ¥å—ç¨‹åº¦ã€‚ å› æ­¤ï¼Œå¦‚æœæœ‰äººæƒ³è¦è¿›è¡ŒæœåŠ¡å™¨ç«¯Webå¼€å‘ï¼Œé‚£ä¹ˆPHPä»ç„¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œæœ‰å¤§é‡æµè¡Œçš„æ¡†æ¶ï¼Œå¦‚CakePHP ï¼Œ Codeigniterç­‰ï¼Œå¦åˆ™é€‰æ‹©é€šç”¨ç¼–ç¨‹è¯­è¨€ä¼šæ›´å¥½ã€‚ OBJECTIVE-Cåœ¨Appleè¿ç§»åˆ°Swiftè¯­è¨€ä¹‹å‰ï¼Œ Objective-Cæ˜¯Appleè½¯ä»¶ï¼ˆå¦‚MacOS ï¼Œ iOSç­‰ï¼‰çš„ä¸»è¦è¯­è¨€ã€‚ å› æ­¤ï¼Œè¿™ç§è½¬å˜åæ˜ åœ¨ä¸¤ç§è¯­è¨€çš„æµè¡Œä¸­ï¼Œå³Objective-Cçš„å—æ¬¢è¿ç¨‹åº¦ä¸‹é™ï¼Œè€ŒSwiftçš„æ™®åŠæ­£åœ¨ä¸Šå‡ã€‚ æ‰€ä»¥ï¼Œå¦‚æœæœ‰äººæƒ³æˆä¸ºAppleäº§å“çš„å¼€å‘è€…ï¼Œé‚£ä¹ˆSwiftåº”è¯¥æ˜¯é¦–é€‰è¯­è¨€ã€‚ è§‚å¯Ÿï¼š SwiftSwiftå–ä»£äº†Objective-Cä½œä¸ºAppleç›¸å…³è½¯ä»¶å’Œåº”ç”¨ç¨‹åºçš„ä¸»è¦è¯­è¨€ã€‚ ç”±äºè‹¹æœå…¬å¸æ”¯æŒå’Œæ¨å¹¿å®ƒï¼Œå› æ­¤è‡ªæˆç«‹ä»¥æ¥å—æ¬¢è¿ç¨‹åº¦è¶Šæ¥è¶Šé«˜ï¼Œè€ŒAppleå°†ç»§ç»­ä½¿ç”¨å®ƒï¼Œæ‰€ä»¥å¦‚æœæœ‰äººæ­£åœ¨å¯»æ‰¾ç‰¹å®šäºAppleçš„å¼€å‘å¹³å°ï¼Œé‚£ä¹ˆSwiftå°†æˆä¸ºä¸€ç§å¿…é¡»çŸ¥é“çš„ç¼–ç¨‹è¯­è¨€ã€‚ è¿™ä¸»è¦æ˜¯ä¾›åº”å•†å’Œäº§å“ç‰¹å®šçš„è¯­è¨€ï¼Œåœ¨Appleçš„ç”Ÿæ€ç³»ç»Ÿä¹‹å¤–ä½¿ç”¨ç‡éå¸¸ä½ã€‚ GoGoï¼ˆGolangï¼‰è¶Šæ¥è¶Šå—åˆ°Googleçš„ç»´æŠ¤ï¼Œä½¿ç”¨å’Œæ¨å¹¿ã€‚ Goå¼€å‘çš„åŠ¨æœºæ˜¯è§£å†³å¯¹ä¸€äº›æµè¡Œè¯­è¨€çš„æ‰¹è¯„ï¼Œå¹¶åœ¨ä¸€ä¸ªåœ°æ–¹ä¿æŒæœ€ä½³çŠ¶æ€ã€‚ è‡ª2017å¹´ä»¥æ¥ï¼Œ Goçš„å—æ¬¢è¿ç¨‹åº¦è¶Šæ¥è¶Šé«˜ï¼Œå¹¶ä¸”åœ¨è°·æ­Œçš„æ”¯æŒä¸‹ï¼Œå®ƒå°†åœ¨æœªæ¥å‡ å¹´å†…äº«å—åˆ°è¿™ä¸€ç‚¹ã€‚ è°·æ­Œä¹Ÿå°†Goä½œä¸ºæ–°é¡¹ç›®çš„ä¸»è¦è¯­è¨€å¹¶ç”¨Goå–ä»£å…¶ä»–è¯­è¨€ï¼Œè¿™ç§è¶‹åŠ¿åœ¨æœªæ¥å‡ å¹´å°†å˜å¾—æœ‰ç”¨å’Œé‡è¦ï¼Œå› æ­¤äººä»¬å¯ä»¥é€‰æ‹©Goä½œä¸ºä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ã€‚ KotlinKotlinä½œä¸ºAndroidå¼€å‘çš„Javaçš„æ›¿ä»£å“è€Œè¢«æä¾›ï¼Œå¹¶ä¸”å®ƒå†æ¬¡å¾—åˆ°Googleçš„æ”¯æŒå’Œæ¨å¹¿ï¼Œå› æ­¤è¿‘å¹´æ¥å®ƒä¹Ÿå—åˆ°å¼€å‘äººå‘˜çš„æ¬¢è¿å¹¶è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚ å› æ­¤ï¼Œéšç€Androidçš„å¢é•¿ï¼Œ Googleçš„æ”¯æŒä»¥åŠç®€æ´çš„è¯­æ³•ï¼Œå®ƒå°†æˆä¸ºAndroid åº”ç”¨ç¨‹åº å¼€å‘äººå‘˜çš„ä¸€ä¸ªé€‰æ‹©ï¼Œæ˜¯å­¦ä¹ Android App å¼€å‘äººå‘˜çš„ä¸é”™é€‰æ‹©ã€‚ Kotlinå°†æˆä¸ºAndroid å¼€å‘çš„æ°å‡ºç¼–ç¨‹ç¯å¢ƒã€‚ ScalaScalaè¯•å›¾å»ºç«‹Javaçš„æ›¿ä»£å“ï¼Œä½†åœ¨å¼€å‘äººå‘˜ä¸­å¹¶æ²¡æœ‰å¾—åˆ°å¾ˆå¥½çš„è§£å†³ã€‚ å®ƒæ²¡æœ‰æ¥è‡ªä»»ä½•è·¨å›½å…¬å¸çš„å¤§åŠ›æ”¯æŒï¼Œè®¤ä¸ºåŠŸèƒ½è¯­è¨€å’Œå¯¹JVMçš„ä¾èµ–å¹¶æ²¡æœ‰æä¾›å¤ªå¤§çš„æ™®åŠèŒƒå›´ã€‚ å¯èƒ½ä¼šæœ‰ç¨³å®šçš„å¢é•¿ï¼Œä½†é€Ÿåº¦å¾ˆæ…¢ï¼Œè€Œä¸”è‚¯å®šä¸æ˜¯ä¸€ç§åˆå­¦è€…å­¦ä¹ çš„è¯­è¨€ã€‚ JuliaJuliaæ—¨åœ¨æé«˜â€œCâ€çš„é€Ÿåº¦å’ŒPythonçš„ç®€å•æ€§ï¼Œä½†å¥‡æ€ªçš„æ˜¯ï¼Œåœ¨Stackoverflow è°ƒæŸ¥ä¸­æ²¡æœ‰å‘ç°ä»»ä½•å—æ¬¢è¿ç¨‹åº¦ï¼Œä½†åœ¨æ•°æ®ç§‘å­¦é¢†åŸŸå—åˆ°æ¬¢è¿ï¼Œå¹¶ä¸”ä»é•¿è¿œæ¥çœ‹è¢«è§†ä¸ºRå’ŒPythonçš„æŒ‘æˆ˜è€…ã€‚ å½“ç„¶ï¼Œæœ±è‰å¨…ä¼šæœ‰å¢é•¿ï¼Œä½†ä»ç„¶ï¼Œ Pythonæˆ–Ræ›´é€‚åˆå·¥ä½œå’Œæˆé•¿ã€‚ Cï¼ƒCï¼ƒæ˜¯.NETæ¡†æ¶çš„è¯­è¨€ï¼Œç”±Microsoftå¼€å‘ã€‚ å®ƒçš„å—æ¬¢è¿ç¨‹åº¦åœ¨è¿‡å»å‡ å¹´ä¸­åŸºæœ¬ä¿æŒä¸å˜ï¼Œå¹¶å°†ç»§ç»­ä¿æŒç±»ä¼¼çš„è¶‹åŠ¿ã€‚ è¿™æ˜¯ç‰¹å®šäºä¾›åº”å•†çš„è¯­è¨€ï¼Œå› æ­¤å¦‚æœæƒ³è¦åœ¨Microsoftå¼€å‘ç¯å¢ƒä¸­å·¥ä½œï¼Œå¯ä»¥é€‰æ‹©æ­¤è¯­è¨€ã€‚ æœ€è¿‘ï¼Œ å¾®è½¯å·²å¼€æº.NETï¼Œå› æ­¤ä¼šå‡ºç°ä¸€äº›ä¸Šå‡è¶‹åŠ¿ï¼Œä½†å®ƒåˆæ˜¯ç‰¹å®šäºä¾›åº”å•†çš„ï¼Œå› æ­¤ä¸ä¼šå—åˆ°å¤ªå¤§å½±å“ã€‚ RUSTRust ï¼Œ Clojureç­‰æ˜¯å…·æœ‰ç”¨æˆ·åŸºç¡€ä½†ä¸é‚£ä¹ˆæµè¡Œçš„è¯­è¨€ï¼Œæ‰€ä»¥è‚¯å®šä¸ä¼šæœ‰äººæ°”çš„ä¸Šâ€‹â€‹å‡ã€‚ ä¸€å¼ å›¾ç‰‡è¯´åƒè¨€ä¸‡è¯­è¦äº†è§£é¡¶çº§ç¼–ç¨‹è¯­è¨€å¢é•¿çš„æ˜æ˜¾è¶‹åŠ¿å’Œå›¾æ™¯ï¼Œè¯·é€šè¿‡å„ç§å›¾è¡¨æ¥äº†è§£å®ƒã€‚ å›¾1å’Œå›¾2ç»™å‡ºäº†ä¸€ä¸ªéå¸¸æ¸…æ™°çš„å›¾æ™¯ï¼Œå³åœ¨æ—§çš„è¯­è¨€å †æ ˆä¸­ï¼Œ JavaScriptè¿œè¿œé¢†å…ˆäºå…¶ä»–äººï¼Œå¹¶ä¸”ä¿¡ç”¨åœ¨ç½‘ç»œå¼€å‘ä¸­å æ®äº†ä¸€å¸­ä¹‹åœ°ï¼Œç„¶åCå’ŒC ++ä¸€èµ·ç«äº‰éå¸¸æ¥è¿‘Java ã€‚ Pythonåœ¨å—æ¬¢è¿ç¨‹åº¦ä¸Šè¶Šæ¥è¶Šé«˜ï¼Œè€Œä¸”åœ¨è¿‡å»çš„5å¹´é‡Œï¼Œåªæœ‰äººæ°”ä¸æ–­å¢åŠ çš„è¯­è¨€ã€‚ æ–°è¯­è¨€è¶Šæ¥è¶Šæµè¡Œï¼Œå…¶ä¸­å¤§å¤šæ•°è¯­è¨€éƒ½å—åˆ°è·¨å›½å…¬å¸ä»¥åŠå¾®è½¯ ï¼Œ è°·æ­Œå’Œè‹¹æœç­‰ITå·¨å¤´çš„æ”¯æŒã€‚ å–œæ¬¢å’Œæƒ³è¦çš„è¯­è¨€ ä»ä¸Šé¢çš„è¡¨æ ¼å’Œå›¾ä¸­ï¼Œå¾ˆå°‘æœ‰è§‚å¯Ÿç»“æœéå¸¸æ˜æ˜¾ï¼ŒLove of Ruståœ¨è¿‡å»äº”å¹´ä¸­æ­£åœ¨å¢é•¿ï¼Œè€ŒSwiftæ­£åœ¨å¤±å»å¼€å‘äººå‘˜çš„çƒ­çˆ±ï¼Œè€ŒPythonæ­£å¤„äºè¿™ä¸¤è€…ä¹‹é—´ï¼Œè¿‡å»ä¸¤å¹´ä¸­Pythonå·²ç»è·ç›Šã€‚ å¦ä¸€ä¸ªç‹¬ç‰¹çš„è§‚å¯Ÿç»“æœæ˜¯ï¼Œ5ç§å–œçˆ±çš„è¯­è¨€ä¸­æœ‰4ç§æ¥è‡ª2000åçš„ç¾¤ä½“ï¼Œè€Œåªæœ‰Pythonæ˜¯è¾ƒæ—§çš„è¯­è¨€ï¼Œè€ŒKotlinçš„çˆ±åˆ™æ˜¯ä»2017å¹´å¼€å§‹ä¸ºAndroid å¼€å‘æ·»åŠ Kotlinå¼€å§‹çš„ã€‚ ä»ä¸Šè¡¨å¯ä»¥çœ‹å‡ºï¼Œ javascriptå’ŒPythonå¼€å‘çš„æ„¿æœ›åœ¨è¿‡å»å‡ å¹´ä¸­ä¸æ–­å¢é•¿ï¼Œè¿™åæ˜ äº†äººä»¬å¯¹è¯­è¨€çš„çƒ­çˆ±å’Œçƒ­çˆ±ã€‚ Javaçš„æ•°é‡æ€¥å‰§ä¸‹é™ï¼Œè¿™æ˜¯å› ä¸ºKotlinä½œä¸ºAndroidåº”ç”¨ç¨‹åºå¼€å‘çš„æ›¿ä»£å“ï¼Œä»¥åŠç°åœ¨æ‹¥æœ‰Javaçš„Oracleæ”¹å˜äº†æ”¿ç­–ã€‚ æŠ€æœ¯å’Œç¼–ç¨‹è¯­è¨€ åœ¨è¿™ä¸ªå›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æœ€å¤§çš„é›†ç¾¤ç”¨äºWebå¼€å‘å’ŒJavaScript ï¼Œå…¶å„ç§æ¡†æ¶ä¸»å¯¼ç€é›†ç¾¤ï¼Œè¿™æ˜¯JavaScriptå¢é•¿çš„USP ã€‚ ç¬¬äºŒå¤§é›†ç¾¤æ˜¯Microsoft æŠ€æœ¯å’ŒPython æŠ€æœ¯ ï¼Œå®ƒå†æ¬¡æ¸…é™¤äº†å¯¹è¯¥è¯­è¨€çš„æ¬¢è¿å’Œçƒ­çˆ±ã€‚ Pythoné›†ç¾¤ä¸æ•°æ®ç§‘å­¦æŠ€æœ¯ç›¸å…³è”ï¼Œè¿™äº›æŠ€æœ¯çªå‡ºäº†Pythonçš„å¢é•¿æ•…äº‹ã€‚ TIOBE æŒ‡æ•°TIOBEç´¢å¼•æ’åç¼–ç¨‹è¯­è¨€åŸºäºæœç´¢å¼•æ“æœç´¢ç»“æœ ã€‚ æœç´¢å¼•æ“å’Œç¼–ç¨‹è¯­è¨€çš„é€‰æ‹©åœ¨å…¶é¡µé¢ä¸­å®šä¹‰ã€‚ é€šè¿‡è®¡ç®—æœ€å—æ¬¢è¿çš„æœç´¢å¼•æ“çš„ç‚¹å‡»æ¥è®¡ç®—è¯„çº§ã€‚ ä½¿ç”¨çš„æœç´¢æŸ¥è¯¢æ˜¯+â€œ programmingâ€ã€‚ åœ¨TIOBEç´¢å¼•ä¸­ï¼Œ Javaåœ¨è¿‡å»äºŒåå¹´ä¸­å æ®ä¸»å¯¼åœ°ä½ï¼Œå…¶ä¸­Cåœ¨è¿‡å»30å¹´ä¸­ä¸€ç›´ä¿æŒç€ç¬¬ä¸€å’Œç¬¬äºŒçš„ä½ç½®ã€‚ åœ¨è¿‡å»çš„äºŒåå¹´é‡Œï¼Œ Pythonå·²ç»èµ°è¿‡äº†æ¼«é•¿çš„é“è·¯ï¼Œå³1999å¹´çš„ç¬¬24ä½ï¼Œåˆ°2019å¹´çš„ç¬¬3ä½ã€‚å¦‚æœæœ‰äººåˆå¹¶Cå’ŒC ++ï¼Œé‚£ä¹ˆå®ƒå°†æ°¸è¿œå æ®ç¬¬ä¸€çš„ä½ç½®ã€‚ åœ¨æ–°çš„è¯­è¨€ï¼ˆ2000å¹´åï¼‰ä¸­ï¼Œ Rustçš„æ’åä¸Šå‡ï¼Œå³ä»ç¬¬33ä½å‡è‡³ç¬¬28ä½ï¼Œ Juliaä»ç¬¬50ä½å‡è‡³ç¬¬39ä½ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ Kotlinä¼¼ä¹å¹¶æœªæ¥è¿‘å‰20åã€‚ ç¼–ç¨‹è¯­è¨€ï¼ˆPYPLï¼‰ç´¢å¼•çš„æµè¡Œç¨‹åº¦PYPLç´¢å¼•æ˜¯é€šè¿‡åˆ†æåœ¨Googleä¸Šæœç´¢è¯­è¨€æ•™ç¨‹çš„é¢‘ç‡åˆ›å»ºçš„ã€‚ æœç´¢è¯­è¨€æ•™ç¨‹è¶Šå¤šï¼Œè¯¥è¯­è¨€å°±è¶Šå—æ¬¢è¿ã€‚ è¿™æ˜¯ä¸€ä¸ªé¢†å…ˆçš„æŒ‡æ ‡ã€‚ åŸå§‹æ•°æ®æ¥è‡ªGoogleè¶‹åŠ¿ã€‚ ä¸‹å›¾éªŒè¯äº†å‰3ç§è¯­è¨€æ˜¯Python ï¼Œ Javaå’ŒJavaScript ã€‚ Cï¼ƒï¼ŒPHPï¼ŒC / C ++ä¹Ÿæ˜¯å®‰å…¨çš„é¡¶çº§ä½ç½®ï¼Œè¿™ç§è¶‹åŠ¿å†æ¬¡ç±»ä¼¼äºå †æ ˆæº¢å‡ºå’ŒTIOBEç´¢å¼• ã€‚ä¸Šå›¾æ˜¾ç¤ºï¼Œåœ¨æ–°çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå³2000å¹´åçš„Kotlin ï¼Œ Go ï¼Œ Rustå’ŒJuliaåœ¨æ’åä¸­ä¸Šå‡ã€‚ å°±ä¸šå¸‚åœºä¸è–ªé…¬è–ªé…¬å–å†³äºäº§å“çš„åœ°ç†åŒºåŸŸå’Œéœ€æ±‚ï¼ŒåŸºäºç¼–ç¨‹è¯­è¨€çš„è–ªèµ„æ¯”è¾ƒåªæ˜¯é¢„æµ‹æˆ–ä¼°è®¡è–ªèµ„è¶‹åŠ¿çš„å·¥å…·ã€‚ æˆ‘ä»¬æ ¹æ®æµè¡Œè°ƒæŸ¥çš„ç¼–ç¨‹è¯­è¨€æ±‡æ€»äº†å·¥èµ„ï¼Œå³2018å¹´çš„Diceè–ªèµ„è°ƒæŸ¥å’Œ2018å¹´å’Œ2019å¹´çš„Stack-overflowè°ƒæŸ¥ã€‚ ä»ä¸Šè¡¨å¯ä»¥çœ‹å‡ºï¼Œä»è¿™ä¸¤é¡¹è°ƒæŸ¥ä¸­å¯ä»¥çœ‹å‡ºï¼Œ Go/Golang åœ¨å¸‚åœºä¸Šæ˜¯ä¸€é¡¹è–ªé…¬éå¸¸é«˜çš„å·¥ä½œï¼Œåœ¨2019å¹´çš„Stack-overflowè°ƒæŸ¥å’Œ2018å¹´Salary Surveyè–ªèµ„è°ƒæŸ¥ä¸­ ï¼Œç”šè‡³åœ¨é«˜è–ªå·¥ä½œä¸­æ’åç¬¬ä¸€ã€‚ ç°åœ¨ï¼ŒåŸå› å¾ˆç®€å•ï¼Œ Goæ˜¯è°·æ­Œæ”¯æŒçš„è¯­è¨€ï¼Œä¸»è¦ç”¨äºè°·æ­Œå’Œè°·æ­Œæƒ³è¦æ¨å¹¿è¿™ç§è¯­è¨€ï¼Œæ‰€ä»¥é«˜è–ªå¯ä»¥è¿æ¥åˆ°è°·æ­Œå·¥èµ„å•ã€‚ æœ‰ä¸€ç‚¹å¾ˆæ¸…æ¥šï¼Œä»·æ ¼å¼¹æ€§æ˜¯ä¸€ä¸ªç»æµæœ¯è¯­ï¼Œå®ƒæä¾›äº†ä¸åŒçš„åœºæ™¯ï¼Œä¾‹å¦‚äº§å“æ•°é‡å¢åŠ ï¼Œä»·æ ¼ï¼Œå¥¢ä¾ˆå“å’Œå“ç‰Œäº§å“æˆæœ¬ï¼Œé«˜äº§å“å¯ç”¨æ€§é™ä½äº†ä»·æ ¼ã€‚ å¾ˆæ˜æ˜¾ï¼Œå…¨çƒå¹³å‡å·¥èµ„ä¸æ˜¯é€‰æ‹©è¯­è¨€çš„å¥½é€‰æ‹©ã€‚ ä¾‹å¦‚ï¼Œä¸€ç§æ¥è¿‘ç­ç»çš„ç¼–ç¨‹è¯­è¨€ï¼Œä½†é—ç•™ç³»ç»Ÿå¾ˆå°‘ï¼Œå› æ­¤ç»´æŠ¤è¿™äº›å…¬å¸å¾€å¾€æä¾›éå¸¸é«˜çš„è–ªé…¬ï¼Œä½†è¿™äº›è¯­è¨€ä¸­çš„èŒä½æ•°é‡æ€»æ˜¯å¾ˆå°‘ã€‚ åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œä¸»æµè¯­è¨€æä¾›äº†å¤§é‡çš„å·¥ä½œå²—ä½ï¼Œå› æ­¤å¹³å‡å·¥èµ„ä¸‹é™ã€‚ å› æ­¤ï¼Œä½œä¸ºç»“æŸè¯­ï¼Œå¾ˆå®¹æ˜“é¢„æµ‹è¯­è¨€è¶‹åŠ¿ï¼Œä½†åªé€‰æ‹©ä¸€ç§è¯­è¨€æ¥å­¦ä¹ æ˜¯ä¸€ä¸ªéå¸¸å›°éš¾çš„é€‰æ‹©ï¼Œå®Œå…¨å–å†³äºä¸ªäººé€‰æ‹©å’Œä»–ä»¬æœªæ¥çš„è®¡åˆ’ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³åœ¨Webå¼€å‘ä¸­å·¥ä½œä¸èƒ½å¿½è§†Javascript ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨Appleçš„äº§å“ä½ ç°åœ¨ä¸èƒ½å¿½è§†Swift ï¼Œå¦‚æœä½ çš„å“å‘³æ˜¯ç³»ç»Ÿçº§ç¼–ç¨‹ï¼Œé‚£ä¹ˆCå’ŒC ++æ˜¯ä½ çš„æœ‹å‹ï¼Œ Pythonè®©ä½ åœ¨å¾ˆå¤šé¢†åŸŸè·‘å¾—æ›´å¿«ï¼Œç›®å‰äº²çˆ±çš„æ•°æ®ç§‘å­¦ ã€‚ æ‚¨ä¼šçœ‹åˆ°æ¯ç§è¯­è¨€éƒ½ä¼šå¸¦æ‚¨è¸ä¸Šä¸åŒçš„æ—…ç¨‹ã€‚ é€‰æ‹©ç›®çš„åœ°ï¼Œç„¶åä½¿ç”¨è¯¥è·¯å¾„çš„è¯­è¨€è¿›è¡Œé©¾é©¶ã€‚ -END- è½¬è½½å£°æ˜ï¼šæœ¬æ–‡è½¬è½½è‡ªã€Œç¼–ç æ— é™ã€","link":"/news/2020/"},{"title":"WWDC 2018","text":"Being the richest man in the cemetery doesnâ€™t matter to me â€¦ Going to bed at night saying weâ€™ve done something wonderfulâ€¦ thatâ€™s what matters to meã€‚ æ˜¯å¦èƒ½æˆä¸ºå¢“åœ°é‡Œæœ€å¯Œæœ‰çš„äººï¼Œå¯¹æˆ‘è€Œè¨€æ— è¶³è½»é‡ã€‚é‡è¦çš„æ˜¯ï¼Œå½“æˆ‘æ™šä¸Šç¡è§‰æ—¶ï¼Œæˆ‘å¯ä»¥è¯´ï¼šæˆ‘ä»¬ä»Šå¤©å®Œæˆäº†ä¸€äº›ç¾å¦™çš„äº‹ã€‚","link":"/news/2018/"},{"title":"WWDC 2019","text":"Your time is limited, so donâ€™t waste it living someone elseâ€™s life.â€¦Donâ€™t let the noise of othersâ€™ opinions drown out your own inner voiceã€‚ ä½ çš„æ—¶é—´æœ‰é™ï¼Œä¸è¦æµªè´¹äºé‡å¤åˆ«äººçš„ç”Ÿæ´»ã€‚ä¸è¦è®©åˆ«äººçš„è§‚ç‚¹æ·¹æ²¡äº†ä½ å†…å¿ƒçš„å£°éŸ³ã€‚","link":"/news/2019/"},{"title":"BT ç§å­å’Œç£åŠ›é“¾æ¥æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ","text":"é“¾æ¥ï¼šå›å½¢é’ˆPaperClip","link":"/news/BitTorrent/"},{"title":"æœ¨å…°å®½æ¾è®¸å¯è¯","text":"æœ¨å…°å®½æ¾è®¸å¯è¯ï¼Œ ç¬¬1ç‰ˆ 2019å¹´8æœˆ http://license.coscl.org.cn/MulanPSL æ­£æ–‡æ‚¨å¯¹â€œè½¯ä»¶â€çš„å¤åˆ¶ã€ä½¿ç”¨ã€ä¿®æ”¹åŠåˆ†å‘å—æœ¨å…°å®½æ¾è®¸å¯è¯ï¼Œç¬¬1ç‰ˆï¼ˆâ€œæœ¬è®¸å¯è¯â€ï¼‰çš„å¦‚ä¸‹æ¡æ¬¾çš„çº¦æŸï¼š 0. å®šä¹‰ â€œè½¯ä»¶â€æ˜¯æŒ‡ç”±â€œè´¡çŒ®â€æ„æˆçš„è®¸å¯åœ¨â€œæœ¬è®¸å¯è¯â€ä¸‹çš„ç¨‹åºå’Œç›¸å…³æ–‡æ¡£çš„é›†åˆã€‚ â€œè´¡çŒ®è€…â€æ˜¯æŒ‡å°†å—ç‰ˆæƒæ³•ä¿æŠ¤çš„ä½œå“è®¸å¯åœ¨â€œæœ¬è®¸å¯è¯â€ä¸‹çš„è‡ªç„¶äººæˆ–â€œæ³•äººå®ä½“â€ã€‚ â€œæ³•äººå®ä½“â€æ˜¯æŒ‡æäº¤è´¡çŒ®çš„æœºæ„åŠå…¶â€œå…³è”å®ä½“â€ã€‚ â€œå…³è”å®ä½“â€æ˜¯æŒ‡ï¼Œå¯¹â€œæœ¬è®¸å¯è¯â€ä¸‹çš„ä¸€æ–¹è€Œè¨€ï¼Œæ§åˆ¶ã€å—æ§åˆ¶æˆ–ä¸å…¶å…±åŒå—æ§åˆ¶çš„æœºæ„ï¼Œæ­¤å¤„çš„æ§åˆ¶æ˜¯æŒ‡æœ‰å—æ§æ–¹æˆ–å…±åŒå—æ§æ–¹è‡³å°‘50%ç›´æ¥æˆ–é—´æ¥çš„æŠ•ç¥¨æƒã€èµ„é‡‘æˆ–å…¶ä»–æœ‰ä»·è¯åˆ¸ã€‚ â€œè´¡çŒ®â€æ˜¯æŒ‡ç”±ä»»ä¸€â€œè´¡çŒ®è€…â€è®¸å¯åœ¨â€œæœ¬è®¸å¯è¯â€ä¸‹çš„å—ç‰ˆæƒæ³•ä¿æŠ¤çš„ä½œå“ã€‚ 1. æˆäºˆç‰ˆæƒè®¸å¯ æ¯ä¸ªâ€œè´¡çŒ®è€…â€æ ¹æ®â€œæœ¬è®¸å¯è¯â€æˆäºˆæ‚¨æ°¸ä¹…æ€§çš„ã€å…¨çƒæ€§çš„ã€å…è´¹çš„ã€éç‹¬å çš„ã€ä¸å¯æ’¤é”€çš„ç‰ˆæƒè®¸å¯ï¼Œæ‚¨å¯ä»¥å¤åˆ¶ã€ä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘å…¶â€œè´¡çŒ®â€ï¼Œä¸è®ºä¿®æ”¹ä¸å¦ã€‚ 2. æˆäºˆä¸“åˆ©è®¸å¯ æ¯ä¸ªâ€œè´¡çŒ®è€…â€æ ¹æ®â€œæœ¬è®¸å¯è¯â€æˆäºˆæ‚¨æ°¸ä¹…æ€§çš„ã€å…¨çƒæ€§çš„ã€å…è´¹çš„ã€éç‹¬å çš„ã€ä¸å¯æ’¤é”€çš„ï¼ˆæ ¹æ®æœ¬æ¡è§„å®šæ’¤é”€é™¤å¤–ï¼‰ä¸“åˆ©è®¸å¯ï¼Œä¾›æ‚¨åˆ¶é€ ã€å§”æ‰˜åˆ¶é€ ã€ä½¿ç”¨ã€è®¸è¯ºé”€å”®ã€é”€å”®ã€è¿›å£å…¶â€œè´¡çŒ®â€æˆ–ä»¥å…¶ä»–æ–¹å¼è½¬ç§»å…¶â€œè´¡çŒ®â€ã€‚å‰è¿°ä¸“åˆ©è®¸å¯ä»…é™äºâ€œè´¡çŒ®è€…â€ç°åœ¨æˆ–å°†æ¥æ‹¥æœ‰æˆ–æ§åˆ¶çš„å…¶â€œè´¡çŒ®â€æœ¬èº«æˆ–å…¶â€œè´¡çŒ®â€ä¸è®¸å¯â€œè´¡çŒ®â€æ—¶çš„â€œè½¯ä»¶â€ç»“åˆè€Œå°†å¿…ç„¶ä¼šä¾µçŠ¯çš„ä¸“åˆ©æƒåˆ©è¦æ±‚ï¼Œä¸åŒ…æ‹¬ä»…å› æ‚¨æˆ–ä»–äººä¿®æ”¹â€œè´¡çŒ®â€æˆ–å…¶ä»–ç»“åˆè€Œå°†å¿…ç„¶ä¼šä¾µçŠ¯åˆ°çš„ä¸“åˆ©æƒåˆ©è¦æ±‚ã€‚å¦‚æ‚¨æˆ–æ‚¨çš„â€œå…³è”å®ä½“â€ç›´æ¥æˆ–é—´æ¥åœ°ï¼ˆåŒ…æ‹¬é€šè¿‡ä»£ç†ã€ä¸“åˆ©è¢«è®¸å¯äººæˆ–å—è®©äººï¼‰ï¼Œå°±â€œè½¯ä»¶â€æˆ–å…¶ä¸­çš„â€œè´¡çŒ®â€å¯¹ä»»ä½•äººå‘èµ·ä¸“åˆ©ä¾µæƒè¯‰è®¼ï¼ˆåŒ…æ‹¬åè¯‰æˆ–äº¤å‰è¯‰è®¼ï¼‰æˆ–å…¶ä»–ä¸“åˆ©ç»´æƒè¡ŒåŠ¨ï¼ŒæŒ‡æ§å…¶ä¾µçŠ¯ä¸“åˆ©æƒï¼Œåˆ™â€œæœ¬è®¸å¯è¯â€æˆäºˆæ‚¨å¯¹â€œè½¯ä»¶â€çš„ä¸“åˆ©è®¸å¯è‡ªæ‚¨æèµ·è¯‰è®¼æˆ–å‘èµ·ç»´æƒè¡ŒåŠ¨ä¹‹æ—¥ç»ˆæ­¢ã€‚ 3. æ— å•†æ ‡è®¸å¯ â€œæœ¬è®¸å¯è¯â€ä¸æä¾›å¯¹â€œè´¡çŒ®è€…â€çš„å•†å“åç§°ã€å•†æ ‡ã€æœåŠ¡æ ‡å¿—æˆ–äº§å“åç§°çš„å•†æ ‡è®¸å¯ï¼Œä½†æ‚¨ä¸ºæ»¡è¶³ç¬¬4æ¡è§„å®šçš„å£°æ˜ä¹‰åŠ¡è€Œå¿…é¡»ä½¿ç”¨é™¤å¤–ã€‚ 4. åˆ†å‘é™åˆ¶ æ‚¨å¯ä»¥åœ¨ä»»ä½•åª’ä»‹ä¸­å°†â€œè½¯ä»¶â€ä»¥æºç¨‹åºå½¢å¼æˆ–å¯æ‰§è¡Œå½¢å¼é‡æ–°åˆ†å‘ï¼Œä¸è®ºä¿®æ”¹ä¸å¦ï¼Œä½†æ‚¨å¿…é¡»å‘æ¥æ”¶è€…æä¾›â€œæœ¬è®¸å¯è¯â€çš„å‰¯æœ¬ï¼Œå¹¶ä¿ç•™â€œè½¯ä»¶â€ä¸­çš„ç‰ˆæƒã€å•†æ ‡ã€ä¸“åˆ©åŠå…è´£å£°æ˜ã€‚ 5. å…è´£å£°æ˜ä¸è´£ä»»é™åˆ¶ â€œè½¯ä»¶â€åŠå…¶ä¸­çš„â€œè´¡çŒ®â€åœ¨æä¾›æ—¶ä¸å¸¦ä»»ä½•æ˜ç¤ºæˆ–é»˜ç¤ºçš„æ‹…ä¿ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œâ€œè´¡çŒ®è€…â€æˆ–ç‰ˆæƒæ‰€æœ‰è€…ä¸å¯¹ä»»ä½•äººå› ä½¿ç”¨â€œè½¯ä»¶â€æˆ–å…¶ä¸­çš„â€œè´¡çŒ®â€è€Œå¼•å‘çš„ä»»ä½•ç›´æ¥æˆ–é—´æ¥æŸå¤±æ‰¿æ‹…è´£ä»»ï¼Œä¸è®ºå› ä½•ç§åŸå› å¯¼è‡´æˆ–è€…åŸºäºä½•ç§æ³•å¾‹ç†è®º,å³ä½¿å…¶æ›¾è¢«å»ºè®®æœ‰æ­¤ç§æŸå¤±çš„å¯èƒ½æ€§ã€‚ æ¡æ¬¾ç»“æŸ å¦‚ä½•å°†æœ¨å…°å®½æ¾è®¸å¯è¯ï¼Œç¬¬1ç‰ˆï¼Œåº”ç”¨åˆ°æ‚¨çš„è½¯ä»¶ å¦‚æœæ‚¨å¸Œæœ›å°†æœ¨å…°å®½æ¾è®¸å¯è¯ï¼Œç¬¬1ç‰ˆï¼Œåº”ç”¨åˆ°æ‚¨çš„æ–°è½¯ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿æ¥æ”¶è€…æŸ¥é˜…ï¼Œå»ºè®®æ‚¨å®Œæˆå¦‚ä¸‹ä¸‰æ­¥ï¼š 1ï¼Œ è¯·æ‚¨è¡¥å……å¦‚ä¸‹å£°æ˜ä¸­çš„ç©ºç™½ï¼ŒåŒ…æ‹¬è½¯ä»¶åã€è½¯ä»¶çš„é¦–æ¬¡å‘è¡¨å¹´ä»½ä»¥åŠæ‚¨ä½œä¸ºç‰ˆæƒäººçš„åå­—ï¼› 2ï¼Œ è¯·æ‚¨åœ¨è½¯ä»¶åŒ…çš„ä¸€çº§ç›®å½•ä¸‹åˆ›å»ºä»¥â€œLICENSEâ€ä¸ºåçš„æ–‡ä»¶ï¼Œå°†æ•´ä¸ªè®¸å¯è¯æ–‡æœ¬æ”¾å…¥è¯¥æ–‡ä»¶ä¸­ï¼› 3ï¼Œ è¯·å°†å¦‚ä¸‹å£°æ˜æ–‡æœ¬æ”¾å…¥æ¯ä¸ªæºæ–‡ä»¶çš„å¤´éƒ¨æ³¨é‡Šä¸­ã€‚ 123456789101112Copyright (c) [2019] [name of copyright holder][Software Name] is licensed under the Mulan PSL v1.You can use this software according to the terms and conditions of the Mulan PSL v1.You may obtain a copy of Mulan PSL v1 at: http://license.coscl.org.cn/MulanPSLTHIS SOFTWARE IS PROVIDED ON AN &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS ORIMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULARPURPOSE.See the Mulan PSL v1 for more details. Mulan Permissive Software Licenseï¼ŒVersion 1 (Mulan PSL v1) Your reproduction, use, modification and distribution of the Software shall be subject to Mulan PSL v1 (this License) with following terms and conditions: 0. Definition 1. Grant of Copyright License 2. Grant of Patent License 3. No Trademark License 4. Distribution Restriction 5. Disclaimer of Warranty and Limitation of Liability End of the Terms and Conditions How to apply the Mulan Permissive Software Licenseï¼ŒVersion 1 (Mulan PSL v1) to your software To apply the Mulan PSL v1 to your work, for easy identification by recipients, you are suggested to complete following three steps: 123456789101112Copyright (c) [2019] [name of copyright holder][Software Name] is licensed under the Mulan PSL v1.You can use this software according to the terms and conditions of the Mulan PSL v1.You may obtain a copy of Mulan PSL v1 at: http://license.coscl.org.cn/MulanPSLTHIS SOFTWARE IS PROVIDED ON AN &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS ORIMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULARPURPOSE.See the Mulan PSL v1 for more details. Mulan PSL v1ä¸BSD 3-clause Licenseä¸Apache License V2.0åœ¨å£°æ˜ä¹‰åŠ¡ã€ä¸“åˆ©è®¸å¯ã€å¯¹ç”¨æˆ·ä¸“åˆ©ç»´æƒé™åˆ¶åŠç‰ˆæƒè®¸å¯ä¸Šå‡æœ‰å·®å¼‚ï¼Œåœ¨å•†æ ‡è®¸å¯ä¸Šæ— å·®å¼‚ï¼Œè§ä¸‹è¡¨ï¼š","link":"/news/MulanPSL/"},{"title":"DDoSï¼ˆåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼‰æ”»å‡»æ˜¯æ— è§£çš„å—ï¼Ÿ","text":"â€œ DDOSï¼Ÿ ä¸€è¨€éš¾å°½å•Šï¼ â€ å…ˆè¯´ç»“è®ºï¼ŒDDoSæ˜¯è¿‘å¹´æ¥ç½‘ç»œæ”»å‡»ä¸­çš„ä¸€æ£µâ€œå¸¸é’æ ‘â€ï¼Œçš„ç¡®å¾ˆéš¾ç¼ ï¼Œä½†è¯´å®ƒæ˜¯æ— è§£çš„ï¼Œé‚£ä¹Ÿæœ‰ç‚¹å¤ªçœ‹å¾—èµ·å®ƒäº†ã€‚è™½ç„¶DDoSåœ¨å¯¹å¾ˆå¤šå¤§å¹³å°çš„æ”»å‡»ä¸­å‡ºå°½äº†é£å¤´ï¼Œä½†åœ¨ç°åœ¨äº’è”ç½‘çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œå¹¶ä¸ç¼ºä¹åº”å¯¹DDoSçš„è§£å†³æ–¹æ¡ˆã€‚ è¯´èµ·DDoSæ”»å‡»ï¼Œæˆ‘è„‘æµ·é‡Œèƒ½å¤Ÿæƒ³åˆ°çš„å…¨éƒ½æ˜¯ä¸­å›½æ°‘é—´ä¿—è¯­ï¼Œä»€ä¹ˆâ€œåŒæ‹³éš¾æ•Œå››æ‰‹ï¼Œå¥½æ±‰æ¶ä¸ä½äººå¤šâ€ï¼Œä»€ä¹ˆâ€œåƒæ–¤æ‹¨å››ä¸¤â€ï¼Œä»€ä¹ˆâ€œä¹±æ‹³æ‰“æ­»è€å¸ˆå‚…â€ç­‰ç­‰ç­‰ç­‰ã€‚ ä¹‹å‰æœ‰æœ‹å‹è·‘æ¥é—®æˆ‘DDoSæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šäº’è”ç½‘å·¨å¤´éƒ½è¢«æå¾—æ²¡æœ‰è„¾æ°”ï¼Œæˆ‘è®°å¾—æˆ‘å½“æ—¶æˆ‘æ˜¯è¿™ä¹ˆä¸¾çš„ä¾‹å­ï¼š æˆ‘ä»¬è¿™ä¸€ä»£äººå°çš„æ—¶å€™ï¼Œè‡ªåŠ©é¤å¼€å§‹åœ¨ä¸­å›½å†…åœ°é£è¡Œï¼Œé‚£ä¼šå„¿è¿™ä¸ªè¡Œä¸šé‡Œä¸ºäº†æ‰“å‡»ç«äº‰å¯¹æ‰‹ï¼Œå¯¹æ‰‹æœ€æƒ¯å¸¸ä½¿ç”¨çš„é˜´æ‹›æ˜¯é›‡ä½£å¾ˆå¤šäº”å¤§ä¸‰ç²—çš„äººï¼Œç»™ä»–ä»¬é’±å»å¯¹æ–¹çš„åº—é‡Œä¸€é€šçŒ›åƒï¼Œæ¯ç›˜ç‹¼è—‰ä¹‹ä¸‹ï¼Œç”¨ä¸äº†å‡ å¤©è¿™å®¶è‡ªåŠ©é¤å°±èƒ½ç»™åƒé»„äº†ã€‚ è€ŒDDoSæ”»å‡»æ¯”è¿™ç§è¿˜é˜´æŸï¼Œå¦‚æœä½ å¼€äº†ä¸€å®¶é¤é¦†ï¼Œä½ çš„å¯¹æ‰‹å¦‚æœæƒ³æä½ ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯æ‰¾ä¸€å †åœ°ç—æµæ°“åˆ°ä½ çš„åº—é‡Œåçš„æ»¡æ»¡ä¸€å±‹å­ï¼Œä½ å¦‚æœä¸Šå‰é—®ï¼Œä»–ä»¬å°±ä¸€ç›´è·Ÿä½ æ‰¯æ·¡æ‰¾éº»çƒ¦ï¼Œå¯¼è‡´çœŸæ­£æƒ³åƒé¥­çš„é¡¾å®¢ä¸€çœ‹è¿™ä¸ªæƒ…å½¢ï¼Œæ‰å¤´å°±èµ°äº†ã€‚ ç”¨ä¸äº†å¤šä¹…ï¼Œä½ çš„é¤é¦†å°±ä¼šå¼€ä¸ä¸‹å»ï¼Œè€Œä½ çš„ç«äº‰å¯¹æ‰‹å°±ä¼šè¶æœºèš•é£Ÿæ‰ä½ çš„å¸‚åœºä»½é¢ï¼Œè€Œæ”¾åœ¨ç½‘ç»œè¯­å¢ƒé‡Œï¼Œè¿™å°±æ˜¯DDoSæ”»å‡»çš„æœ€åŸºæœ¬åŸç†ã€‚ è€Œè¿™ä»¶äº‹ä¹‹æ‰€ä»¥éš¾ç¼ åœ¨äºï¼Œä¸€ä¸¤ä¸ªæ— èµ–æ ¹æœ¬æˆä¸äº†æ°”å€™ï¼Œæƒ³è¦è€æµæ°“å¿…é¡»è¦æœ‰å¾ˆå¤šä¸ªæ— èµ–é›†ç»“åœ¨ä¸€èµ·ã€‚æ‰€ä»¥å’Œç°å®ä¸–ç•Œä¸­çš„æ— èµ–ä¸€æ ·ï¼ŒDDoSçœŸæ­£çš„æ€æ‰‹é”åœ¨äºåˆ©ç”¨èƒ½å¤Ÿå‘åŠ¨çš„æ±¹æ¶Œçš„æµé‡ï¼Œå¯ä»¥ç¬é—´å†²å®è¢«æ”»å‡»ç½‘ç«™çš„æœåŠ¡å™¨ã€‚ å¦‚æœæˆ‘ä»¬å›æº¯ä¸€ä¸‹å†å²çš„è¯ï¼Œä¼šå‘ç°é»‘å®¢ç»„ç»‡ä¹‹æ‰€ä»¥ä¼šæœ‰ç»„ç»‡æœ‰é¢„è°‹çš„å‘èµ·DDoSæ”»å‡»ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š æœ‰äº›è¡Œä¸šå¦‚æœç½‘ç«™è¢«æ¶æ„æ”»å‡»ï¼Œä¼šé€ æˆå¾ˆéš¾ä¼°é‡çš„æŸå¤±ï¼Œè¿™ä¸ªæ—¶å€™é»‘å®¢å‘åŠ¨DDoSæ”»å‡»çš„åˆè¡·ä¸€èˆ¬æ˜¯å‡ºäºæ•²è¯ˆå‹’ç´¢ï¼Œä¸ºäº†ä¿è¯ä¼ä¸šçš„æ­£å¸¸è¿è½¬ï¼Œä»–ä»¬é€šå¸¸æ„¿æ„å‘é»‘å®¢ä»˜é«˜é¢çš„èµé‡‘ï¼› è¡Œä¸šå†…è¡€æµ·ä¸€ç‰‡ï¼ŒDDoSæ˜¯æ¶æ„ç«äº‰çš„å± åˆ€ã€‚è¿™ä¸ªç°è±¡ä»é€»è¾‘ä¸Šï¼Œå…¶å®é›‡ä½£æ— èµ–å»å é¢†å¯¹æ‰‹é¤é¦†çš„åŸç†æ˜¯ä¸€æ¯›ä¸€æ ·çš„ï¼Œè€Œä¸”DDOSæ”»å‡»æ—©å·²äº§ä¸šåŒ–ï¼Œç°åœ¨ä¸­å›½çš„DDOSé»‘å¸‚ï¼Œå‡ºé’±è¯·é»‘å®¢æ‰“1Gçš„æµé‡åˆ°ä¸€ä¸ªç½‘å§æˆ–ç½‘ç«™ï¼Œå¸‚åœºä»·åªè¦ä¸åˆ°50å—é’±ï¼Œä½†å¯¹äºä¸€ä¸ªåˆ›ä¸šå…¬å¸æˆ–è€…å¹²è„†å°±æ˜¯ä¸€ä¸ªå°ç½‘å§æ¥è¯´ï¼Œè¿™å·²ç»ç®—æ˜¯å¯ä»¥ç­é¡¶çš„æ— å¦„ä¹‹ç¾äº†ã€‚ DDoSæ”»å‡»å¾€å¾€æˆä¸ºæ©ç›–çœŸå®ç½‘ç»œæ”»å‡»çš„çƒŸé›¾å¼¹ï¼Œåœ¨é­å—DDoSæ”»å‡»çš„ä¼ä¸šä¸­ï¼Œéƒ¨åˆ†ä¼ä¸šè¿˜ä¼´éšæ•°æ®ä¸¢å¤±çš„ç°è±¡ï¼Œé»‘å®¢åˆ©ç”¨DDoSæ”»å‡»æ©ç›–å…¶çªƒå–ç”¨æˆ·éšç§çš„çœŸå®ç›®çš„ï¼Œè¿™ç§æ”»å‡»è¡Œä¸ºåœ¨ç¤¾äº¤ç½‘ç«™ã€é‡‘èé¢†åŸŸç­‰ç”¨æˆ·éšç§é«˜ä»·å€¼çš„è¡Œä¸šå°¤ä¸ºé«˜å‘ã€‚ æ¯”å¦‚è¯´ï¼Œå»å¹´å¹´åˆçš„æ—¶å€™ï¼Œè·å…°ç¬¬ä¸€å¤§é“¶è¡Œè·å…°å•†ä¸šé“¶è¡Œäº2018å¹´1æœˆ28æ—¥æ™šé—´é­åˆ°DDoSæ”»å‡»ï¼›ç¬¬äºŒå¤§é“¶è¡Œè·å…°åˆä½œé“¶è¡Œçš„ç½‘é“¶æœåŠ¡29æ—¥æ—©æ™¨é­åˆ°æ”»å‡»ï¼›ç¬¬ä¸‰å¤§é“¶è¡Œè·å…°é“¶è¡Œåœ¨é‚£ä¸€å‘¨å†…å…±é­åˆ°7æ¬¡ç½‘ç»œæ”»å‡»ï¼Œä»…å‘¨æœ«å°±æœ‰3æ¬¡ã€‚ ä¸è¿‡è¿™ä¸€æ¬¡å‘ç”Ÿåœ¨è·å…°çš„é’ˆå¯¹é“¶è¡Œç³»ç»Ÿçš„æ”»å‡»å¹¶æ²¡æœ‰é€ æˆç”¨æˆ·éšç§çš„æ³„éœ²ï¼ŒåŸå› åœ¨äºè¿™ä»…ä»…æ˜¯ä¸€æ¬¡æ¥è‡ªä¿„ç½—æ–¯ä¸€ä¸ªç½‘ç»œé—´è°ç»„ç»‡Cozy Bearå¯¹è·å…°æƒ…æŠ¥ç»„ç»‡AIVDä¾µçŠ¯å…¶è®¡ç®—æœºçš„â€œå•çº¯â€çš„æŠ¥å¤è¡Œä¸ºã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰é»‘å®¢ç»„ç»‡å‘èµ·çš„DDoSæ”»å‡»éƒ½å¦‚æ­¤å•çº¯ã€‚ 2018å¹´å¹´åº•æ—¶ä¸‡è±ªé…’åº—å‘å¸ƒäº†ä¸€åˆ™å…¬å‘Šï¼Œç§°å…¶æ——ä¸‹å–œè¾¾å±‹é…’åº—çš„5äº¿äººæ¬¡çš„ä¿¡æ¯è¢«æ³„éœ²ï¼Œå…±è®¡3.27äº¿äººï¼Œæ³„éœ²ä¿¡æ¯åŒ…æ‹¬å§“åã€é‚®å¯„åœ°å€ã€ç”µè¯å·ç ã€ç”µå­é‚®ä»¶æ˜‚é¢åœ°å€ã€æŠ¤ç…§å·ç ã€å‡ºç”Ÿæ—¥æœŸã€æ€§åˆ«ç­‰ç­‰å…¥ä½ä¿¡æ¯ï¼Œæ›´ç³Ÿç³•çš„æ˜¯ä¸‡è±ªæ— æ³•ç¡®å®šï¼Œä¾µå…¥é…’åº—ç³»ç»Ÿçš„ç¬¬ä¸‰æ–¹é»‘å®¢ï¼Œåœ¨çªƒå–çš„ä¿¡æ¯ä¸­æ˜¯å¦åŒ…å«å®¢äººçš„é“¶è¡Œå¡å·å’Œå¯†ç ã€‚ï¼ˆæ­¤æ¡ˆä¾‹å’ŒDDOSæ”»å‡»æ— å…³ï¼Œå»ºè®®é‡‡ç”¨å…¶ä»–æ¡ˆä¾‹ï¼Œæ¯”å¦‚2011å¹´4æœˆ20æ—¥è‡³26æ—¥ï¼Œç´¢å°¼é­å—DDoSæ”»å‡»ï¼Œç›®çš„æ˜¯ä¸ºäº†æ©ç›–ç›—å–ç´¢å°¼PSçš„ç”¨æˆ·æ•°æ®ã€‚ï¼‰ è€Œæ¸¸æˆé¢†åŸŸï¼Œåˆ™æ˜¯DDoSæ”»å‡»çš„å¦ä¸€ä¸ªé‡ç¾åŒºï¼Œä¸å…‰æ˜¯åˆšæ‰å‰æ–‡ä¸­æåˆ°çš„æš´é›ªï¼ŒåŒ…æ‹¬ç´¢å°¼ã€é‡‘å±±ã€ç½‘æ˜“åœ¨å†…çš„ä¼—å¤šçŸ¥åæ¸¸æˆå…¬å¸éƒ½æ›¾æ•°æ¬¡é­å—æ”»å‡»ï¼Œå¯ä»¥è¯´DDoSæ”»å‡»æ˜¯æ¸¸æˆä¼ä¸šçš„å™©æ¢¦ã€‚ è®¸å¤šåˆšåˆ›ä¸šçš„æ¸¸æˆå…¬å¸ï¼Œå¯èƒ½åˆšä¸Šçº¿å°±è¢«æ‰“æ­»ï¼Œè€Œä¸€äº›å¤„åœ¨èèµ„é˜¶æ®µçš„æ¸¸æˆå…¬å¸ï¼Œç”±äºé­é‡æ”»å‡»è€Œè¢«è¿«åœæœï¼Œåˆ™å¾ˆå¤§ç¨‹åº¦ä¸Šä¼šè°ƒä½æŠ•èµ„äººçš„é¢„æœŸï¼Œç”šè‡³å¯¼è‡´èèµ„å¤±è´¥ã€‚ è€Œè¿™äº›å› ç´ ï¼Œéƒ½æ˜¯ç«å¯¹æ‰“å‹æˆ–è€…æ•²è¯ˆå‹’ç´¢çš„ç»å¯¹è½¯è‚‹ã€‚ ä»ä»¥ä¸Šçš„å‡ ä¸ªæ¡ˆä¾‹æˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼Œå’Œç°å®ä¸­çš„è€æµæ°“å’Œæ•²è¯ˆå‹’ç´¢ç›¸æ¯”ï¼Œé€šè¿‡ç½‘ç»œæ‰‹æ®µè¿›è¡Œæ”»å‡»çš„é£é™©å’Œæˆæœ¬æ›´ä½ï¼Œåè›‹çš„å˜´è„¸ä¹Ÿæ›´ç©·å‡¶ææ¶ä¸€ç‚¹ï¼Œæ— è®ºæ˜¯æ”¿åºœæœºæ„è¿˜æ˜¯ä¼ä¸šå¹³å°ï¼Œæ— è®ºä½ æ˜¯å·¨å¤´è¿˜æ˜¯å°èš‚èšï¼Œåªè¦ä½ èº«ä¸Šæœ‰ç¾Šæ¯›å¯ä»¥è–…ï¼Œä½ éƒ½æ—¶åˆ»é¢ä¸´ç€è¢«æ´—åŠ«çš„é£é™© ä¸è¿‡åˆšåœ¨å¼€å¤´æˆ‘ä¹Ÿè®²äº†ï¼Œè™½ç„¶DDoSå¾ˆéš¾ç¼ å¾ˆè®©äººå¤´ç—›ï¼Œä½†æœ¬è´¨ä¸Šå›¾å¹¶ä¸æ˜¯æ— è§£çš„ã€‚ å›åˆ°æˆ‘æœ€å¼€å§‹è®²çš„é‚£ä¸ªä¾‹å­ã€‚ ä½ æ˜¯ä¸€ä¸ªé¤é¦†è€æ¿ï¼Œè¿‡å»ä¸‰åå¹´ä¸€ç›´æ˜¯ä¸ªè€è€å®å®çš„å¨å­ï¼Œçªç„¶é¢å¯¹äº”åä¸ªè‡­æµæ°“åˆ°ä½ åº—é‡Œè€æ— èµ–çš„æ—¶å€™ï¼Œä½ æœ€å¥½çš„åº”å¯¹æ–¹æ³•ï¼Œåº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ è‡ªå·±ç»„å»ºä¸€æ”¯äººé©¬ï¼Œå’Œè¿™äº›è‡­æµæ°“æ­£é¢åˆšï¼Ÿè¿™ææ€•ä¸è¡Œï¼Œå› ä¸ºä½ ä¸æ˜¯è‡­æµæ°“ï¼Œä½ æ²¡æœ‰ç›¸åº”çš„ä½œæˆ˜ç»éªŒã€‚ æŠ¥è­¦è¯·äººæ°‘è­¦å¯Ÿæ¥å¸®å¿™å¤„ç†ï¼Ÿè¿™ææ€•ä¹Ÿä¸è¡Œï¼Œäººå®¶åœ¨ä½ åº—é‡Œæ²¡æœ‰æ‰“ç ¸æŠ¢ï¼Œåªæ˜¯â€œæ¸©å’Œçš„â€éæš´åŠ›ä¸åˆä½œï¼Œè­¦å¯Ÿæ¥äº†ä¹Ÿåªèƒ½å½“æ°‘äº‹è°ƒè§£ï¼Œå¹¶ä¸”äººå®¶é©¬ä»”ä¼—å¤šï¼Œæ˜å¤©å†æ¢ä¸€æ‹¨æ–°é¢å­”æ¥ï¼Œç©çš„ä½ ä¸€ç‚¹è„¾æ°”éƒ½æ²¡æœ‰ã€‚ è¿™å°±æ˜¯é¢å¯¹DDoSæ—¶ï¼Œæ— è®ºæ˜¯å·¨å¤´è¿˜æ˜¯å°èš‚èšï¼Œä»–ä»¬çš„å®å®åœ¨åœ¨çš„å›°å¢ƒã€‚ ä½†æ­£æ‰€è°“â€œé“é«˜ä¸€å°ºé­”é«˜ä¸€ä¸ˆâ€ï¼Œä½ åœ¨äº‘ä¸Šå’Œæˆ‘è€æµæ°“ï¼Œé‚£æˆ‘å°±åœ¨äº‘ä¸Šå›å‡»ã€‚ â€œäº‘â€çš„äº‹å„¿ï¼Œä¸å¦‚è¿˜äº¤è¿˜ç»™äº‘æ¥å¤„ç†ã€‚æˆ‘è®¤ä¸ºå°±ç›®å‰DDoSçš„åœ¨æ”»å‡»é‡çº§ä¸Šçš„ç–¯ç‹‚è¿›å‡»çš„å‰æä¸‹ï¼Œäº‘è®¡ç®—æœåŠ¡å‚å•†æˆ–è®¸æ˜¯ç‹™å‡»å®ƒä»¬çš„æœ€æœ‰æ•ˆæ‰‹æ®µã€‚ 2018å¹´å¹´åˆï¼Œå³°å€¼1.35TB/ç§’çš„æµé‡å†²å‡»äº†å¼€å‘è€…å¹³å° GitHubã€‚è¿™æ˜¯ç¬¬ä¸€æ¬¡TBé‡çº§çš„DDoSæ”»å‡»ã€‚GitHub å—åˆ°æ”»å‡»åï¼ŒæœåŠ¡å™¨æ–­æ–­ç»­ç»­ï¼Œæ— æ³•è®¿é—®ã€‚æ”»å‡»å‘ç”Ÿ 10 åˆ†é’Ÿåï¼ŒGitHub å‘CDN æœåŠ¡å•† Akamai è¯·æ±‚ååŠ©ï¼Œè®¿é—® GitHub çš„æµé‡å·²ç»ç”±åè€…æ¥ç®¡å¹¶åœ¨15åˆ†é’Ÿä¹‹å†…å®Œæˆäº†é˜²å¾¡ã€‚ Akamaiçš„ç›¸å…³è´Ÿè´£äººåœ¨æ¥å—é‡‡è®¿æ—¶è¯´ï¼Œæˆ‘ä»¬æ˜¯åŸºäºè¿„ä»Šä¸ºæ­¢æœ€å¤§è§„æ¨¡ DDoS æ”»å‡»äº”å€çš„å³°å€¼è€Œåšçš„ç›¸åº”å‡†å¤‡ï¼Œæ‰€ä»¥ 1.3T å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯å°æ„æ€ã€‚ åœ¨å…³äºæµé‡å³°å€¼è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘è®¤ä¸ºé¥±å—åŒ11ã€åŒ12ã€618ç­‰å…¨æ°‘è´­ç‰©ç‹‚æ¬¢çš„ç”µå•†å·¨å¤´ä»¬æ›´æœ‰å‘è¨€æƒï¼Œå°±æ‹¿äº¬ä¸œä¸¾ä¾‹å­å¥½äº†ã€‚ äº¬ä¸œäº‘åœ¨ä¹‹å‰å‘å¸ƒçš„é«˜é˜²ç‰ˆçš„DDoSæœåŠ¡ä¸­ï¼Œå±•ç¤ºå‡ºäº†éå¸¸æ˜ç¡®çš„ä¿¡å¿ƒæ˜¯ï¼Œåœ¨å¤šå¹´çš„ç”µå•†ç‹‚æ¬¢æµé‡å¯¹æŠ—ä¸­ï¼Œäº¬ä¸œäº‘å·²ç»åœ¨å®æˆ˜ä¸­å»ºç«‹äº†ä¸€å¥—å®Œå¤‡çš„é˜²å¾¡æœºåˆ¶ï¼Œæ— è®ºæ˜¯åœ¨æµé‡å³°å€¼çš„å»ºæ¨¡ä¸Šï¼Œè¿˜æ˜¯åœ¨DDoSçš„é˜²å¾¡ç®—æ³•ä¸Šï¼Œå®ƒçš„éƒ¨ç½²éƒ½è¿œè¿œä¸æ˜¯çº¸ä¸Šè°ˆå…µï¼Œè€Œæ˜¯æ‹³æ‹³åˆ°è‚‰çš„ç»å—ä½äº†å®æˆ˜çš„æ´—ç¤¼ã€‚è¦çŸ¥é“ï¼Œå…¨ä¸–ç•Œæ¯å¹´æœ‰è¶…è¿‡5æˆçš„DDoSæ”»å‡»éƒ½æ¥è‡ªä¸­å›½ï¼Œè€Œæˆ‘ä»¬çš„å›½å®¶ä¹Ÿæ˜¯å…¨ä¸–ç•Œè¶…è¿‡ç¾å›½çš„ç¬¬ä¸€å¤§â€œè‚‰é¸¡â€å¸‚åœºï¼Œç”±ç”µå•†å¤§æ•°æ®åŠ æŒæ¼”åŒ–è€Œæ¥çš„äº¬ä¸œäº‘ï¼Œå®ƒåœ¨äº‘å®‰å…¨çš„ç†è§£ä¸Šå¯ä»¥è¯´æ˜¯éå¸¸æ·±åˆ»äº†ã€‚ æ‰€ä»¥è¯´ï¼Œå¦‚æœè¯´ä¸€å®šè¦æœ‰ä¸€ä¸ªç»“è®ºï¼Œæˆ‘æƒ³è¯´â€œä¸Šå¸çš„å½’ä¸Šå¸ï¼Œè€Œäº‘ä¸Šçš„å½’äº‘ä¸Šâ€ï¼Œåƒäº¬ä¸œäº‘è¿™æ ·çš„åŸºäºç”µå•†å¤§æ•°æ®è€ƒéªŒçš„äº‘è®¡ç®—å¹³å°ï¼Œæˆ–è®¸æ‰æ˜¯å¯¹æŠ—DDoSçš„æœ€ç»ˆç­”æ¡ˆã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/news/ddos/"},{"title":"appleCard","text":"å…å¹´è´¹çš„é’›é‡‘å¡ï¼ŒåŠä¸€å¼ æ¥æ”¶è—ä¹Ÿä¸é”™ã€‚","link":"/news/appleCard/"},{"title":"HarmonyOS é¸¿è’™","text":"é¸¿è’™ï¼Œä¸­å›½ç¥è¯ä¼ è¯´çš„è¿œå¤æ—¶ä»£ï¼Œä¼ è¯´åœ¨ç›˜å¤æ˜†ä»‘å±±å¼€å¤©è¾Ÿåœ°ä¹‹å‰ï¼Œä¸–ç•Œæ˜¯ä¸€å›¢æ··æ²Œçš„å…ƒæ°”ï¼Œè¿™ç§è‡ªç„¶çš„å…ƒæ°”å«åšé¸¿è’™ï¼Œå› æ­¤æŠŠé‚£ä¸ªæ—¶ä»£ç§°ä½œé¸¿è’™æ—¶ä»£ï¼Œåæ¥æ­¤ä¸€è¯ä¹Ÿå¸¸è¢«ç”¨æ¥æ³›æŒ‡ç§°è¿œå¤æ—¶ä»£ã€‚ åä¸ºå¼€å‘è€…å¤§ä¼šäº8æœˆ9æ—¥-8æœˆ11æ—¥ä¸¾è¡Œï¼Œåä¸ºæ¶ˆè´¹è€…ä¸šåŠ¡ CEOã€åä¸ºæŠ€æœ¯æœ‰é™å…¬å¸å¸¸åŠ¡è‘£äº‹ä½™æ‰¿ä¸œä»¥ã€Šå…¨åœºæ™¯æ—¶ä»£æ–°ä½“éªŒä¸æ–°ç”Ÿæ€ã€‹ä¸ºé¢˜å‘è¡¨æ¼”è®²ï¼Œæ­£å¼å®£å¸ƒè‡ªæœ‰æ“ä½œç³»ç»Ÿï¼šé¸¿è’™ã€‚æ®ä½™æ‰¿ä¸œä»‹ç»ï¼Œé¸¿è’™OSæ˜¯åŸºäºå¾®å†…æ ¸çš„å…¨åœºæ™¯åˆ†å¸ƒå¼OSï¼Œè¿™æ˜¯åˆ†å¸ƒå¼æ¶æ„é¦–æ¬¡ç”¨äºç»ˆç«¯OSï¼Œå¯ä»¥å®ç°è·¨ç»ˆç«¯æ— ç¼ååŒä½“éªŒã€‚ æ ¹æ®ä½™æ‰¿ä¸œçš„è¯´æ³•ï¼Œå®‰å“æœ‰è¶…è¿‡1äº¿è¡Œä»£ç ï¼Œå†…æ ¸å°±è¶…è¿‡2000ä¸‡è¡Œï¼Œä½†ä¸€èˆ¬ç”¨æˆ·ç”¨åˆ°çš„ä»£ç ä¸åˆ°8%ï¼Œæ•´ä½“æ¯”è¾ƒå†—ä½™ï¼Œåœ¨IoTæ—¶ä»£è¿™æ—¢æ²¡å¿…è¦ä¹Ÿä¸éœ€è¦ã€‚ç”±æ­¤ä»–æå‡ºäº†â€å¾®å†…æ ¸â€çš„æ¦‚å¿µï¼Œä¹Ÿæ˜¯é¸¿è’™OSçš„ç‰¹ç‚¹ä¹‹ä¸€ã€‚åŒºåˆ«äºâ€å®å†…æ ¸â€ï¼Œå¾®å†…æ ¸é‡‡ç”¨åŒä¸€å¥—æ“ä½œå¹³å°ï¼Œé’ˆå¯¹ä¸åŒç¡¬ä»¶èƒ½åŠ›çš„äº§å“è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶é‡‡ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œæå‡æ•ˆç‡ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰‹æœºå’Œè½¦è½½è®¾å¤‡çš„ç”¨é€”ä¸åŒï¼ŒçŒå…¥åŒæ ·ç³»ç»Ÿæ— å¿…è¦ï¼Œä½†å®ƒä»¬å¯ä»¥é‡‡ç”¨åŒæ ·çš„å†…æ ¸ï¼Œéƒ¨ç½²ä¸åŒçš„ç•Œé¢æˆ–åŠŸèƒ½ã€‚ä½™æ‰¿ä¸œè¡¨ç¤ºï¼Œå¸Œæœ›æœªæ¥çš„æ“ä½œç³»ç»Ÿï¼Œéƒ½ä½¿ç”¨å¾®å†…æ ¸ã€‚æ®ä»‹ç»ï¼Œé¸¿è’™OSæ˜¯åŸºäºå¾®å†…æ ¸çš„å…¨åœºæ™¯åˆ†å¸ƒå¼OSï¼Œè¿™æ˜¯åˆ†å¸ƒå¼æ¶æ„é¦–æ¬¡ç”¨äºç»ˆç«¯OSï¼Œå¯ä»¥å®ç°è·¨ç»ˆç«¯æ— ç¼ååŒä½“éªŒã€‚ ä½™æ‰¿ä¸œä»‹ç»äº†é¸¿è’™OSçš„å››å¤§æŠ€æœ¯ç‰¹æ€§ã€‚ é¦–å…ˆï¼Œåˆ†å¸ƒå¼æ¶æ„é¦–æ¬¡ç”¨äºç»ˆç«¯OSï¼Œå®ç°è·¨ç»ˆç«¯æ— ç¼ååŒä½“éªŒã€‚ é¸¿è’™OSçš„â€åˆ†å¸ƒå¼OSæ¶æ„â€å’Œâ€åˆ†å¸ƒå¼è½¯æ€»çº¿æŠ€æœ¯â€é€šè¿‡å…¬å…±é€šä¿¡å¹³å°ï¼Œåˆ†å¸ƒå¼æ•°æ®ç®¡ç†ï¼Œåˆ†å¸ƒå¼èƒ½åŠ›è°ƒåº¦å’Œè™šæ‹Ÿå¤–è®¾å››å¤§èƒ½åŠ›ï¼Œå°†ç›¸åº”åˆ†å¸ƒå¼åº”ç”¨çš„åº•å±‚æŠ€æœ¯å®ç°éš¾åº¦å¯¹åº”ç”¨å¼€å‘è€…å±è”½ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿèšç„¦è‡ªèº«ä¸šåŠ¡é€»è¾‘ï¼Œåƒå¼€å‘åŒä¸€ç»ˆç«¯ä¸€æ ·å¼€å‘è·¨ç»ˆç«¯åˆ†å¸ƒå¼åº”ç”¨ï¼Œä¹Ÿä½¿æœ€ç»ˆæ¶ˆè´¹è€…äº«å—åˆ°å¼ºå¤§çš„è·¨ç»ˆç«¯ä¸šåŠ¡ååŒèƒ½åŠ›ä¸ºå„ä½¿ç”¨åœºæ™¯å¸¦æ¥çš„æ— ç¼ä½“éªŒã€‚ ç¬¬äºŒï¼Œ ç¡®å®šæ—¶å»¶å¼•æ“å’Œé«˜æ€§èƒ½IPCæŠ€æœ¯å®ç°ç³»ç»Ÿæµç•…ã€‚ é¸¿è’™OSé€šè¿‡ä½¿ç”¨ç¡®å®šæ—¶å»¶å¼•æ“å’Œé«˜æ€§èƒ½IPCä¸¤å¤§æŠ€æœ¯è§£å†³ç°æœ‰ç³»ç»Ÿæ€§èƒ½ä¸è¶³çš„é—®é¢˜ã€‚ç¡®å®šæ—¶å»¶å¼•æ“å¯åœ¨ä»»åŠ¡æ‰§è¡Œå‰åˆ†é…ç³»ç»Ÿä¸­ä»»åŠ¡æ‰§è¡Œä¼˜å…ˆçº§åŠæ—¶é™è¿›è¡Œè°ƒåº¦å¤„ç†ï¼Œä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡èµ„æºå°†ä¼˜å…ˆä¿éšœè°ƒåº¦ï¼Œåº”ç”¨å“åº”æ—¶å»¶é™ä½25.7%ã€‚é¸¿è’™å¾®å†…æ ¸ç»“æ„å°å·§çš„ç‰¹æ€§ä½¿IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰æ€§èƒ½å¤§å¤§æé«˜ï¼Œè¿›ç¨‹é€šä¿¡æ•ˆç‡è¾ƒç°æœ‰ç³»ç»Ÿæå‡5å€ã€‚ ç¬¬ä¸‰ï¼ŒåŸºäºå¾®å†…æ ¸æ¶æ„é‡å¡‘ç»ˆç«¯è®¾å¤‡å¯ä¿¡å®‰å…¨ã€‚ é¸¿è’™OSé‡‡ç”¨å…¨æ–°çš„å¾®å†…æ ¸è®¾è®¡ï¼Œæ‹¥æœ‰æ›´å¼ºçš„å®‰å…¨ç‰¹æ€§å’Œä½æ—¶å»¶ç­‰ç‰¹ç‚¹ã€‚å¾®å†…æ ¸è®¾è®¡çš„åŸºæœ¬æ€æƒ³æ˜¯ç®€åŒ–å†…æ ¸åŠŸèƒ½ï¼Œåœ¨å†…æ ¸ä¹‹å¤–çš„ç”¨æˆ·æ€å°½å¯èƒ½å¤šåœ°å®ç°ç³»ç»ŸæœåŠ¡ï¼ŒåŒæ—¶åŠ å…¥ç›¸äº’ä¹‹é—´çš„å®‰å…¨ä¿æŠ¤ã€‚å¾®å†…æ ¸åªæä¾›æœ€åŸºç¡€çš„æœåŠ¡ï¼Œæ¯”å¦‚å¤šè¿›ç¨‹è°ƒåº¦å’Œå¤šè¿›ç¨‹é€šä¿¡ç­‰ã€‚å¦å¤–ï¼Œé¸¿è’™OSå°†å¾®å†…æ ¸æŠ€æœ¯åº”ç”¨äºå¯ä¿¡æ‰§è¡Œç¯å¢ƒï¼ˆTEEï¼‰ï¼Œé€šè¿‡å½¢å¼åŒ–æ–¹æ³•ï¼Œé‡å¡‘å¯ä¿¡å®‰å…¨ã€‚ ç¬¬å››ï¼Œé€šè¿‡ç»Ÿä¸€IDEæ”¯æ’‘ä¸€æ¬¡å¼€å‘ï¼Œå¤šç«¯éƒ¨ç½²ï¼Œå®ç°è·¨ç»ˆç«¯ç”Ÿæ€å…±äº«ã€‚ é¸¿è’™OSå‡­å€Ÿå¤šç»ˆç«¯å¼€å‘IDEï¼Œå¤šè¯­è¨€ç»Ÿä¸€ç¼–è¯‘ï¼Œåˆ†å¸ƒå¼æ¶æ„Kitæä¾›å±å¹•å¸ƒå±€æ§ä»¶ä»¥åŠäº¤äº’çš„è‡ªåŠ¨é€‚é…ï¼Œæ”¯æŒæ§ä»¶æ‹–æ‹½ï¼Œé¢å‘é¢„è§ˆçš„å¯è§†åŒ–ç¼–ç¨‹ï¼Œä»è€Œä½¿å¼€å‘è€…å¯ä»¥åŸºäºåŒä¸€å·¥ç¨‹é«˜æ•ˆæ„å»ºå¤šç«¯è‡ªåŠ¨è¿è¡ŒAppï¼Œå®ç°çœŸæ­£çš„ä¸€æ¬¡å¼€å‘ï¼Œå¤šç«¯éƒ¨ç½²ï¼Œåœ¨è·¨è®¾å¤‡ä¹‹é—´å®ç°å…±äº«ç”Ÿæ€ã€‚ æ®ä»‹ç»ï¼Œåä¸ºå°†åœ¨ä»Šå¹´é¦–å‘çš„æ™ºæ…§å±äº§å“ä¸­ç‡å…ˆä½¿ç”¨é¸¿è’™ OS 1.0ã€‚æœªæ¥ä¸‰å¹´ï¼Œé™¤å®Œå–„ç›¸å…³æŠ€æœ¯å¤–ï¼Œé¸¿è’™OSä¼šé€æ­¥åº”ç”¨åœ¨å¯ç©¿æˆ´ã€æ™ºæ…§å±ã€è½¦æœºç­‰æ›´å¤šæ™ºèƒ½è®¾å¤‡ä¸­ã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/news/HarmonyOS/"},{"title":"æœªæ¥äº”å¹´ï¼ŒiOS å¼€å‘å¦‚ä½•å‰è¡Œï¼Ÿ","text":"ã€CSDN ç¼–è€…æŒ‰ã€‘æŠ€æœ¯åœˆé‡Œä¸€ç›´å€¡å¯¼ä¸€å¥è¯ï¼Œé‚£ä¾¿æ˜¯â€œæ‹¥æŠ±å˜åŒ–â€ï¼Œå› ä¸ºæŠ€æœ¯å§‹ç»ˆåœ¨é£é€Ÿåœ°æ›´æ–°è¿­ä»£ï¼Œè¿‡å»æŒæ¡çš„æŠ€èƒ½å¯èƒ½çªç„¶ä¹‹é—´å°±è¿‡æ—¶äº†ã€‚åœ¨è¿‘å‡ å¹´ï¼Œç§»åŠ¨å¼€å‘é€æ¸è¶‹äºç¨³å®šï¼Œè€Œäººå·¥æ™ºèƒ½ã€åŒºå—é“¾ç­‰æŠ€æœ¯å¼€å§‹ç”šåš£å°˜ä¸Šï¼Œå®¢æˆ·ç«¯å¼€å‘è€…ä»¬ä¸ç”±å¾—å¼€å§‹è¿·èŒ«ï¼Œæ›¾ç»å¦‚æ­¤åƒé¦™ï¼Œæœªæ¥åˆè¯¥æ€ä¹ˆèµ°ï¼Ÿä¹Ÿè®¸æœ¬æ–‡ä¼šæœ‰ä¸€ç‚¹æ€è·¯ä¸Šçš„å¸®åŠ©ã€‚ ä½œè€… | David O. è¯‘è€… | ç½—æ˜­æˆ è´£ç¼– | æ²­ä¸ƒ å‡ºå“ | CSDNï¼ˆIDï¼šCSDNnewsï¼‰ ä»¥ä¸‹ä¸ºè¯‘æ–‡ï¼š è¿‘åå¹´ï¼Œ10~15 å¹´å‰ä¸å­˜åœ¨çš„æŠ€æœ¯ï¼Œè®©è¿™ä¸ªä¸–ç•Œå˜å¾—é»¯ç„¶å¤±è‰²ã€‚æœ‰è¶£çš„æ˜¯ï¼Œè¿™äº›æ¦‚å¿µæ­£åœ¨æ„å»ºæœªæ¥çš„ç”Ÿæ´»æ–¹å¼ã€‚å¦‚æœä½ è®¤ä¸ºä½ åœ¨ç°åœ¨å·²ç»ä¸Šçº¿çš„ App ä¸­çœ‹åˆ°äº†è¿™äº›å˜åŒ–ï¼Œå¹¶ä¸”ä¹Ÿåœ¨ç€æ‰‹å¼€å‘è‡ªå·±çš„ Appï¼Œåœ¨æœªæ¥äº”å¹´ï¼Œä½ ä¾ç„¶ä¼šå¯¹ iOS ç¨‹åºå¼€å‘çš„å‘å±•æ–¹å¼æ„Ÿåˆ°å¼‚å¸¸éœ‡æƒŠã€‚ ä»¥ä¸‹å››ç‚¹ï¼Œä½ å¯ä»¥é‡ç‚¹å…³æ³¨ï¼š äººå·¥æ™ºèƒ½ äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰æ˜¯ä¸€ä¸ªç‹¬ç‰¹çš„èŒƒå¼è½¬æ¢å™¨ï¼ˆParadigm Shifterï¼‰[1]ã€‚iOS åº”ç”¨ç¨‹åºå¼€å‘é¢†åŸŸä¸­ï¼Œç¿æ™ºçš„å¼€å‘è€…æ— æ—¶æ— åˆ»éƒ½åœ¨åˆ›å»ºåŸºäº AI çš„åº”ç”¨ç¨‹åºã€‚ä¾‹å¦‚æ˜Ÿå·´å…‹ï¼Œå‘å¸ƒäº†ä¸€ä¸ªåå« My Starbucks Barista çš„ iOS åº”ç”¨ï¼Œå®ƒä¼šæ ¹æ®ä½ å½“å¤©çš„éœ€è¦ï¼Œä¸ºä½ è®¢è´­å’–å•¡å’Œé›¶é£Ÿã€‚åœ¨é‡‘èé¢†åŸŸï¼Œä¹Ÿæœ‰å¾ˆå¤š iOS çš„äººå·¥æ™ºèƒ½åº”ç”¨ç¨‹åºï¼Œæ ¹æ®ä½ çš„æŒ‡ç¤ºï¼Œè‡ªåŠ¨è¿›è¡Œäº¤æ˜“ã€‚ åœ¨ä¸ä¹…çš„å°†æ¥ï¼Œåœ¨ iOS å¹³å°ï¼Œä½ å°†ä¼šçœ‹åˆ°è¶Šæ¥è¶Šå¤šçš„ AI åº”ç”¨ç¨‹åºï¼Œå®ƒä»¬å°†ä»¥å…¨æ–°çš„æ–¹å¼ï¼Œé€æ¸æ›¿æ¢ä¼ ç»Ÿæ–¹å¼ä¸ºæˆ‘ä»¬æä¾›æœåŠ¡ã€‚è¿™äº› AI åº”ç”¨ç¨‹åºå°†ä»£æ›¿ä½ åšé€‰æ‹©ã€‚è¿™ä¸ªé¢†åŸŸï¼Œæœ‰æ— é™å¯èƒ½ã€‚ å¢å¼ºç°å®å¢å¼ºç°å®ï¼ˆARï¼‰ä¸ AI ä¸€æ ·ç¥å¥‡ã€‚å‡ å¹´å‰ï¼Œ PokÃ©mon GO å°†è™šæ‹Ÿæ€ªå…½å¸¦åˆ°æˆ‘ä»¬çš„ä¸–ç•Œï¼Œè®©å…¨ä¸–ç•Œçš„äººå¯¹ AR è¶‹ä¹‹è‹¥é¹œã€‚è¿™ä¸ªæ¸¸æˆï¼Œåœ¨ 2016 å¹´æ”¶å…¥çº¦ 9.5 äº¿ç¾å…ƒï¼Œåˆ° 2017 å¹´ï¼Œå°±æ¥è¿‘äº† 9 äº¿ç¾å…ƒã€‚ åœ¨æœªæ¥å‡ å¹´ï¼ŒAR å°†åœ¨æ¸¸æˆå’Œå…¶å®ƒåº”ç”¨ä¸­äº§ç”Ÿæ›´åŠ æƒŠäººçš„å½±å“ã€‚è¿™äº›å˜åŒ–ï¼Œä½ å°†åœ¨æœªæ¥å‡ å¹´çš„ iOS åº”ç”¨ç¨‹åºä¸­çœ‹åˆ°ã€‚ ç‰©è”ç½‘ï¼ˆIoTï¼‰ éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç‰©è”ç½‘ï¼ˆIoTï¼‰æ­£åœ¨é€æ¸å£®å¤§ã€‚ç°å¦‚ä»Šï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œç¯ã€é—¨é“ƒã€æ™ºèƒ½é—¨é”ã€å®¶åº­å®‰é˜²ç³»ç»Ÿã€éŸ³ç®±ã€ç”µè§†ã€ç”µè§†ç›’å­ã€æ‰‹è¡¨ã€å¹³æ¿ã€å†°ç®±éƒ½è¿æ¥åˆ°äº’è”ç½‘ä¸Šï¼Œä½ å¯ä»¥éšæ—¶éšåœ°æ§åˆ¶å®ƒä»¬ã€‚è™½ç„¶ iOS åº”ç”¨ç¨‹åºä¸èƒ½è®©ä½ çœ‹åˆ°å†°ç®±ä¸­è¿˜å‰©å¤šå°‘é£Ÿç‰©ï¼Œè¿˜ä¸èƒ½æ”¹å–„ç‰©è”ç½‘çš„ä½“éªŒï¼Œä½†æ˜¯ IoT è®¾å¤‡è·å–åˆ°è¶Šå¤šçš„æ•°æ®ï¼Œè¶Šèƒ½å¸®åŠ©ä½ ä½œå‡ºæ­£ç¡®çš„é€‰æ‹©ã€‚ IoT æ­£åœ¨ä¼˜åŒ–é…’åº—ã€æ±½è½¦ã€é›¶å”®ç­‰å¤šç§è¡Œä¸šï¼Œè¿™å‡ å¹´çš„å˜åŒ–ï¼Œç”šæ˜¯æœ‰è¶£ã€‚æ­¤å¤–ï¼Œå½“äººå·¥æ™ºèƒ½ä¸ IoT ç›¸ç»“åˆï¼ŒIoT å°†æœ‰å¯èƒ½å½»åº•æ”¹å˜å…¨çƒäººçš„ç”Ÿæ´»æ–¹å¼ã€‚ åŸºäºäº‘çš„åº”ç”¨ç¨‹åº å¾ˆå¤š iOS åº”ç”¨ç¨‹åºå¼€å‘ä¸“å®¶é¢„æµ‹ï¼ŒåŸºäºäº‘çš„ iOS åº”ç”¨ç¨‹åºå°†æ˜¯ä¸‹ä¸€ä¸ªè¡Œä¸šé‡ç‚¹ã€‚åœ¨æœªæ¥å‡ å¹´å†…ï¼Œå°†æœ‰è¶…è¿‡ä¸€åŠçš„ä¼ä¸šä¸ç»„ç»‡æ‹¥æœ‰è‡³å°‘ä¸€ä¸ªåŸºäºäº‘çš„åŸç”Ÿåº”ç”¨ç¨‹åº[2]ã€‚ ä¸Šé¢çš„é¢„æµ‹é‡Œï¼Œæœ‰ä¸€ä¸ªå¥‡æ€ªçš„äº‹æƒ…ï¼Œè¿™ä¸ªå¸‚åœºï¼Œ80% çš„ä»½é¢å°†ç”± Googleã€å¾®è½¯ã€äºšé©¬é€Šå æ®ï¼Œè€Œè‹¹æœåˆ™åªå‰©ä¸‹ 20% å·¦å³ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ çš„ iOS åº”ç”¨ç¨‹åºè¦åœ¨è¿™ 1780 äº¿ç¾å…ƒçš„å¸‚åœºä¸­å æ®ä¸€å¸­ä¹‹åœ°ï¼Œä½ éœ€è¦å¥½å¥½ç£¨ç»ƒä½ çš„ iOS å¼€å‘æŠ€èƒ½ã€‚ æ­¤å¤–ï¼Œè‹¹æœå¯èƒ½ä¼šåœ¨æœªæ¥å‡ å¹´ï¼Œåƒå…¶å®ƒé¢†åŸŸä¸€æ ·ï¼Œé€šè¿‡åˆ›æ–°æ¥æŠ¢å›å¸‚åœºã€‚è‹¹æœä»Šå¤©çš„æˆç»©ï¼Œæˆ‘ä»¬ç›¸ä¿¡å®ƒæœ‰é‚£ä¸ªèƒ½åŠ›ã€‚ ç»“è®º æ€»ä¹‹ï¼Œä¸Šé¢æåˆ°çš„é¢†åŸŸï¼Œå¹¶éåªæœ‰è¿™äº›é¢†åŸŸã€‚åœ¨ iOS å¼€å‘ä¸­ï¼Œå¯ç©¿æˆ´è®¾å¤‡ï¼Œè·¨å¹³å°åº”ç”¨ã€ç§»åŠ¨æ”¯ä»˜å’ŒåŒºå—é“¾æŠ€æœ¯ç­‰é¢†åŸŸï¼Œéƒ½èƒ½å¼€å‘å‡ºä»¤äººæƒŠå¹ç¨‹åºã€‚ è¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯é¢„æµ‹æœªæ¥ï¼Œè€Œæ˜¯å‘Šè¯‰ä½ ä¸€äº›æ½œåœ¨çš„é¢†åŸŸï¼Œåœ¨å‰æœŸå‘å±•çš„æ—¶å€™æŠ“ä½æœºä¼šã€‚ è°¨ä»¥æŠ›ç –å¼•ç‰ï¼ŒæœŸå¾…æ›´å¤šæ¢è®¨ã€‚ ç›¸å…³èµ„æ–™ï¼š [1] https://wiki.mbalib.com/wiki/èŒƒå¼è½¬æ¢ [2] https://go.forrester.com/blogs/predictions-2018-cloud-computing-accelerates-enterprise-transformation-everywhere/ åŸæ–‡é“¾æ¥ï¼šhackernoon æœ¬æ–‡ä¸º CSDN ç¿»è¯‘ï¼Œå¦‚éœ€è½¬è½½ï¼Œè¯·æ³¨æ˜æ¥æºå‡ºå¤„ã€‚","link":"/news/iOSYear/"},{"title":"Homebrew","text":"macOSï¼ˆæˆ– Linuxï¼‰ç¼ºå¤±çš„è½¯ä»¶åŒ…çš„ç®¡ç†å™¨ â€” Homebrew å®‰è£… Homebrew1/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; å°†ä»¥ä¸Šå‘½ä»¤ç²˜è´´è‡³ç»ˆç«¯ã€‚ è„šæœ¬ä¼šåœ¨æ‰§è¡Œå‰æš‚åœï¼Œå¹¶è¯´æ˜å®ƒå°†åšä»€ä¹ˆã€‚é«˜çº§å®‰è£…é€‰é¡¹åœ¨ è¿™é‡Œ (required for Linux and Windows Subsystem for Linux)ã€‚ Homebrew èƒ½å¹²ä»€ä¹ˆ?ä½¿ç”¨ Homebrew å®‰è£… Appleï¼ˆæˆ–æ‚¨çš„ Linux ç³»ç»Ÿï¼‰æ²¡æœ‰é¢„è£…ä½† ä½ éœ€è¦çš„ä¸œè¥¿ã€‚ 1$ brew install wget Homebrew ä¼šå°†è½¯ä»¶åŒ…å®‰è£…åˆ°ç‹¬ç«‹ç›®å½•ï¼Œå¹¶å°†å…¶æ–‡ä»¶è½¯é“¾æ¥è‡³ /usr/local ã€‚ 12345678$ cd /usr/local$ find CellarCellar/wget/1.16.1Cellar/wget/1.16.1/bin/wgetCellar/wget/1.16.1/share/man/man1/wget.1$ ls -l binbin/wget -&gt; ../Cellar/wget/1.16.1/bin/wget Homebrew ä¸ä¼šå°†æ–‡ä»¶å®‰è£…åˆ°å®ƒæœ¬èº«ç›®å½•ä¹‹å¤–ï¼Œæ‰€ä»¥æ‚¨å¯å°† Homebrew å®‰è£…åˆ°ä»»æ„ä½ç½®ã€‚ è½»æ¾åˆ›å»ºä½ è‡ªå·±çš„ Homebrew åŒ…ã€‚ 12$ brew create https://foo.com/bar-1.0.tgzCreated /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/bar.rb å®Œå…¨åŸºäº Git å’Œ Rubyï¼Œæ‰€ä»¥è‡ªç”±ä¿®æ”¹çš„åŒæ—¶ä½ ä»å¯ä»¥è½»æ¾æ’¤é”€ä½ çš„å˜æ›´æˆ–ä¸ä¸Šæ¸¸æ›´æ–°åˆå¹¶ã€‚ 1$ brew edit wget # ä½¿ç”¨ $EDITOR ç¼–è¾‘! Homebrew çš„é…æ–¹éƒ½æ˜¯ç®€å•çš„ Ruby è„šæœ¬ï¼š 12345678910class Wget &lt; Formula homepage &quot;https://www.gnu.org/software/wget/&quot; url &quot;https://ftp.gnu.org/gnu/wget/wget-1.15.tar.gz&quot; sha256 &quot;52126be8cf1bddd7536886e74c053ad7d0ed2aa89b4b630f76785bac21695fcd&quot; def install system &quot;./configure&quot;, &quot;--prefix=#{prefix}&quot; system &quot;make&quot;, &quot;install&quot; endend Homebrew ä½¿ macOSï¼ˆæˆ–æ‚¨çš„ Linux ç³»ç»Ÿï¼‰æ›´å®Œæ•´ã€‚ä½¿ç”¨ gem æ¥å®‰è£… RubyGemsã€ç”¨ brew æ¥å®‰è£…é‚£äº›ä¾èµ–åŒ…ã€‚ â€œè¦å®‰è£…ï¼Œè¯·æ‹–åŠ¨æ­¤å›¾æ ‡â€¦â€¦â€ä¸ä¼šå†å‡ºç°äº†ã€‚ä½¿ç”¨ brew cask å®‰è£… macOS åº”ç”¨ç¨‹åºã€å­—ä½“å’Œæ’ä»¶ä»¥åŠå…¶ä»–éå¼€æºè½¯ä»¶ã€‚ 1$ brew cask install firefox åˆ¶ä½œä¸€ä¸ª cask å°±åƒåˆ›å»ºä¸€ä¸ªé…æ–¹ä¸€æ ·ç®€å•ã€‚ 12$ brew cask create fooEditing /usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask/Casks/foo.rb æ€ä¹ˆåˆ æ‰ brew cask list é‡Œé¢çš„å·²å®‰è£…è®°å½•ï¼Ÿ1rm -rf /usr/local/Caskroom/åç§° æ›´å¤šæ–‡æ¡£docs.brew.sh Homebrew Packagesformulae.brew.sh GitHubhttps://github.com/Homebrew/brew","link":"/news/brew/"},{"title":"ä½ çš„ç¡¬ç›˜æ˜¯å¦‚ä½•å­˜å‚¨æ•°æ®çš„ï¼Ÿ","text":"é“¾æ¥ï¼šå›å½¢é’ˆPaperClip","link":"/news/harddisk/"},{"title":"Dice ç§°è¿™  5 ç§ç¼–ç¨‹è¯­è¨€æœªæ¥å¯èƒ½å„è‡ªæˆç‹","text":"ä¸Šä¸ªæœˆï¼Œæˆ‘ä»¬æ›¾æŠ¥é“è¿‡ä¸€ç¯‡â€Dice ç§°è¿™ 5 ç§ç¼–ç¨‹è¯­è¨€å¯èƒ½è¡°è½â€œçš„æ–‡ç« ï¼Œå®ƒåŸºäº RedMonk å’Œ TIOBE ç­‰å…¬å¸çš„æ•°æ®æ¨æµ‹çš„ï¼Œç»“æœå¼•èµ·äº†å¹¿æ³›è®¨è®ºã€‚Dice Insights æ˜¯ä¸ºåŒ—ç¾çš„ç§‘æŠ€ä¸“ä¸šäººå£«æä¾›è§è§£å’Œåˆ†æçš„ç½‘ç«™ï¼Œç›®çš„æ˜¯å¸®åŠ©ä»–ä»¬æ‰¾åˆ°å·¥ä½œå’Œå‘å±•äº‹ä¸šï¼Œå¹¶ä¸”æŠ¥é“å°±ä¸šè¶‹åŠ¿ã€æ–°æŠ€æœ¯ç­‰å†…å®¹ã€‚ç»è¿‡äº†åŠä¸ªæœˆï¼ŒDice ä¾é æ›´å¤§çš„æ•°æ®è¶‹åŠ¿æ¥åšå‡ºé¢„æµ‹ï¼Œåˆå‘å¸ƒä¸€ä¸ªæ›´å¤§èƒ†çš„é¢„æµ‹ç»­é›†ï¼Œå…³äº 5 ç§åœ¨æœªæ¥å¯èƒ½ä¼šæœ‰æ›´å¤šä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€‚ Swiftè‹¹æœæƒ³è¦æ”¾å¼ƒ Objective-Cï¼Œå®ƒæ˜¯ä¸€ç§æœ‰ç€ 35 å¹´å†å²çš„ç¼–ç¨‹è¯­è¨€ï¼Œç”¨äºä¸ºè‹¹æœç”Ÿæ€ç³»ç»Ÿæ„å»ºåº”ç”¨ç¨‹åºã€‚è‹¹æœæƒ³è®© Swift æ¥å–ä»£å®ƒï¼ŒSwift å‘å¸ƒä¸äº”å¹´å‰ã€‚æ ¹æ®åˆ†æå…¬å¸ RedMonk çš„é•¿æœŸè¯­è¨€æ’åï¼ŒSwift è‡ªåˆ›å»ºä»¥æ¥çš„ä½¿ç”¨é‡è¿…é€Ÿä¸Šå‡ã€‚ è™½ç„¶å¦‚æ­¤ï¼Œä½† Objective-C ä»ç„¶æœ‰åœ¨ä½¿ç”¨ï¼Œè¿™ä¸»è¦å½’åŠŸäºè¿‡å»ä¸‰åå¹´ä¸­äº§ç”Ÿçš„å¤§é‡é—ç•™ä»£ç ï¼ˆlegacy codeï¼‰ã€‚ä¸è¿‡ï¼Œè‹¹æœå·²ç»ä¸ä¼šå¯¹å®ƒæŠ±æœ‰ä»»ä½•æœŸå¾…ï¼ŒSwift æ‰æ˜¯ä¸ºè‹¹æœçš„åº”ç”¨ç¨‹åºæä¾›åŠ¨åŠ›çš„ä¸»æ‰“è¯­è¨€ï¼Œè‹¹æœåœ¨è·¨å¹³å°åº”ç”¨ä¸Šåªå¯èƒ½ä¼šåŠ é€Ÿè¿™é—¨ç¼–ç¨‹è¯­è¨€çš„å‘å±•ã€‚ KotlinKotlin æ­£åœ¨ä¸Šå‡ã€‚Kotlin æ¥æºäºä¸€ä¸ªå²›å±¿çš„åå­—ï¼Œå…¨ç§°æ˜¯ Kotlin Islandï¼Œæ˜¯è‹±è¯­ã€Œç§‘ç‰¹æ—å²›ã€ä¹‹æ„ï¼Œåå¹´å‰ï¼ŒKotlin è¿˜æ˜¯ä¿„ç½—æ–¯å²›å±¿ï¼Œç°åœ¨å®ƒå˜æˆç¼–ç¨‹è¯­è¨€ï¼ŒJetBrains å…¬å¸å¼€å‘äº†å®ƒï¼Œä¸è¿‡å®ƒå—å…³æ³¨çš„åŸå› ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå½’åŠŸäº Googleï¼ŒGoogle å°†å®ƒä½œä¸º Android çš„ä¸€æµå¼€å‘è¯­è¨€ã€‚ å¯ä»¥è¯´ï¼Œé€šè¿‡é€‰æ‹© Kotlinï¼ŒGoogle å‡å°‘äº†å¯¹ Java çš„ä¾èµ–ã€‚è€Œä¸” Java ä¸ Oracle å‘ç”Ÿäº†å·¨å¤§æ³•å¾‹çº çº·ï¼Œä½†æ˜¯ä¸ç®¡è°·æ­Œçš„å¾‹å¸ˆæ˜¯å¦åœ¨æ¨åŠ¨è¯¥å…¬å¸å¯¹ Kotlin çš„æ”¯æŒï¼Œæ¯‹åº¸ç½®ç–‘çš„ä¸€ç‚¹ï¼Œå› ä¸ºå®ƒçš„åŠŸèƒ½å’Œçµæ´»æ€§ï¼Œè®¸å¤šå¼€å‘äººå‘˜ä¹Ÿå¼€å§‹å–œæ¬¢è¿™ç§è¯­è¨€ã€‚ æ—©åœ¨ 2018 å¹´ï¼ŒPusher å°±å‘èµ·äº†ä¸€é¡¹å¼€å‘äººå‘˜è°ƒæŸ¥ï¼Œå‘ç° Kotlin çš„ä½¿ç”¨é‡æ­£åœ¨å¤©æ–‡æ•°å­—èˆ¬çš„å¢é•¿ï¼Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸º Androidã€‚Pusher è¡¥å……è¯´æ˜ï¼š å¾ˆå¤§ä¸€éƒ¨åˆ†å¼€å‘äººå‘˜ï¼Œä»–ä»¬çš„å·¥ä½œå’Œå…¶ä»–é¡¹ç›®çš„ç¨‹åºï¼Œä½¿ç”¨çš„æ˜¯ Kotlinã€‚å¤§å¤šæ•°äººéƒ½å–œæ¬¢ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒçš„ç‰¹æ€§ï¼Œ80% ä»¥ä¸Šçš„å¼€å‘äººå‘˜éƒ½å–œæ¬¢å®ƒçš„ç©ºå®‰å…¨æ€§ï¼Œå…¶æ¬¡æ˜¯æ‰©å±•å‡½æ•°ã€ä¸ Java çš„ç®€åŒ–äº’æ“ä½œæ€§å’Œæ•°æ®ç±»ã€‚ å¯¹ Kotlin æ¥è¯´ï¼Œé™¤äº†å®‰å“å¼€å‘ä¹‹å¤–ä¼¼ä¹æ— è·¯å¯èµ°äº†ã€‚æ‰€ä»¥å®ƒçš„æœ€å¤§çš„é—®é¢˜æ˜¯ï¼Œæ˜¯å¦èƒ½è¶…è¶Š Android ç”Ÿæ€ç³»ç»Ÿè€Œå¼€æ‹“æ–°çš„é¢†åŸŸã€‚ PythonPython æ˜¯ä¸€ç§å¼ºå¤§çš„è¯­è¨€ï¼Œä¸ºä¸–ç•Œå„åœ°çš„å¼€å‘äººå‘˜æä¾›äº†å¤šç§ç”¨é€”ã€‚ä½†æ˜¯æ ¹æ® TIOBE æŒ‡æ•°(æ¯æœˆæ›´æ–°ä¸€æ¬¡)ï¼ŒPython çš„æ’åè¿˜åœ¨ç»§ç»­æ”€å‡ã€‚å¹¶ä¸”å¼€å‘äººå‘˜å’ŒæŠ€æœ¯ä¸“ä¸šäººå‘˜ä¹Ÿä¸æ–­å‘ç° Python çš„æ–°ç”¨é€”ï¼ŒåŒ…æ‹¬æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ ã€‚ Python ç°åœ¨ä¹Ÿå·²ç»æœ‰äº†åºå¤§çš„ç”¨æˆ·åŸºç¡€ï¼Œå¹¶ä¸”å®ƒæ·±æ·±åœ°åµŒå…¥åˆ°äº†ä¼—å¤šçš„ä¸šåŠ¡ä¸­ï¼Œæ‰€ä»¥ Python ä¸å¤ªå¯èƒ½åœ¨çŸ­æœŸå†…æ¶ˆå¤±ã€‚å”¯ä¸€çš„é—®é¢˜æ˜¯è¿™ç§ç¼–ç¨‹è¯­è¨€è¿˜èƒ½å¤ŸæŒç»­å¢é•¿å¤šå°‘ï¼Œä»¥åŠå®ƒæ¥ä¸‹æ¥å°†è¿˜èƒ½æŠ“ä½å“ªäº›è¡Œä¸šã€‚ GroovyGroovy æœ‰å¹¿æ³›çš„ IDE æ”¯æŒã€ä¸ Java çš„ç›¸ä¼¼æ€§ä»¥åŠä¸æµè¡Œçš„å¼€æºè‡ªåŠ¨åŒ–æœåŠ¡å™¨ Jenkins çš„é›†æˆæ”¯æŒä¸‹ï¼Œåœ¨ TIOBE çš„æ’åæ˜¯ä¸Šå‡çš„ã€‚å®ƒå·²ç»æˆä¸ºç›¸å½“å¤šçš„ç³»ç»Ÿä¸­çš„â€ç¼–ç¨‹è¯­è¨€ç²˜åˆå‰‚â€ï¼Œå®ƒçš„æœªæ¥ä¼¼ä¹æ˜¯å…‰æ˜çš„ã€‚ TypeScriptTypeScript æ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œä¸€äº›å¼€å‘äººå‘˜è®¤ä¸ºå®ƒä¸æ˜¯ä¸€ç§â€å®Œæ•´â€çš„è¯­è¨€ï¼Œå› ä¸ºå®ƒå¯ä»¥è½¬æ¢åˆ° JavaScriptã€‚ä½†ä¸ç®¡å¦‚ä½•è¯´å®ƒï¼ŒRedMonkå’Œ GitHub ï¼ˆå¦‚ä¸‹å›¾ï¼Œä¸Šå‡è‡³ç¬¬ä¸ƒåï¼‰çš„åæœˆæŠ¥å‘Š TypeScript æ’åéƒ½æ˜¯ä¸¥é‡ä¸Šå‡çš„ã€‚å»å¹´å¤å¤©ï¼ŒTIOBE å°±è¡¨ç¤ºï¼ŒTypeScript å·²ç»å¼€å§‹ä¾µå JavaScript çš„å¸‚åœºä»½é¢ã€‚ ä¸ç®¡ä½ æ˜¯å¦ç›¸ä¿¡ï¼ŒTypeScript æ˜¯ä¸€ç§æ–°çš„ã€æ”¹è¿›çš„ JavaScriptï¼Œå®ƒå°†å–ä»£è¿™ä¸ªæ›´è€çš„è¯­è¨€ï¼Œè€Œä¸”è®¸å¤šæŠ€æœ¯ä¸“ä¸šäººå£«è®¤ä¸º TypeScript åœ¨æœªæ¥å‡ å¹´é‡Œè¿˜æœ‰å‘å±•çš„ç©ºé—´ã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/news/DiceInsightsB/"},{"title":"Dice ç§°è¿™ 5 ç§ç¼–ç¨‹è¯­è¨€å¯èƒ½è¡°è½","text":"Dice Insights æ˜¯ä¸ºåŒ—ç¾çš„ç§‘æŠ€ä¸“ä¸šäººå£«æä¾›è§è§£å’Œåˆ†æçš„ç½‘ç«™ï¼Œç›®çš„æ˜¯å¸®åŠ©ä»–ä»¬æ‰¾åˆ°å·¥ä½œå’Œå‘å±•äº‹ä¸šï¼Œå¹¶ä¸”æŠ¥é“å°±ä¸šè¶‹åŠ¿ã€æ–°æŠ€æœ¯ç­‰å†…å®¹ã€‚ æ ¹æ® Dice æŠ¥é“ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½æ°¸è¿œå­˜åœ¨ï¼Œå› ä¸ºæ–°ä¸€ä»£çš„å¼€å‘äººå‘˜ä¼šæ¥å—ä»–ä»¬è§‰å¾—æ›´å®¹æ˜“ä½¿ç”¨çš„å…¶ä»–è¯­è¨€å’Œæ¡†æ¶ã€‚ä¸ºäº†ç¡®å®šå“ªç§ç¼–ç¨‹è¯­è¨€å¯èƒ½åœ¨ä¸­é•¿æœŸå†…æ³¨å®šå¤±è´¥ï¼Œä»–ä»¬æŸ¥çœ‹äº† TIOBE å’Œ RedMonk çš„å—æ¬¢è¿ç¨‹åº¦æ’åï¼Œä»¥åŠ Dice è‡ªå·±çš„èŒåŠ¡å…¬å‘Šæ•°æ®åº“ã€‚åˆ—å‡ºä»¥ä¸‹è¯­è¨€ï¼š Rubyå¾ˆä¹…ä»¥å‰ï¼ŒRuby å¾ˆå—æ¬¢è¿ã€‚è¿™æ˜¯ Tiobe æœˆåˆŠä¸Šçš„å‰ååè¯­è¨€ï¼Œå¼€å‘äººå‘˜ç§°èµå®ƒå­¦ä¹ èµ·æ¥æœ‰å¤šä¹ˆå®¹æ˜“ã€‚ä½†æ˜¯åœ¨è¿‡å»çš„ 18 ä¸ªæœˆé‡Œï¼ŒTiobe çš„æ’åä»ç¬¬ 9 ä½ä¸‹é™åˆ°äº†ç¬¬ 12 ä½ã€‚ å¦å¤–å‘ç°ï¼Œå¯¹ Dice è¿‡å»ä¸€å¹´å‘å¸ƒçš„æ‹›è˜æ•°æ®çš„åˆ†ææ˜¾ç¤ºï¼Œå¯»æ‰¾ç²¾é€š Ruby çš„æŠ€æœ¯ä¸“ä¸šäººå‘˜çš„å…¬å¸æ•°é‡å¤§å¹…ä¸‹é™ã€‚2018 å¹´ï¼ŒRuby çš„å°±ä¸šæ•°é‡ä¸‹é™äº† 56%ã€‚è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„è­¦å‘Šä¿¡å·ï¼Œè¡¨æ˜å¾ˆå¤šå…¬å¸æ­£åœ¨æ”¾å¼ƒ Rubyï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œè¯¥è¯­è¨€çš„ç”¨æˆ·åŸºç¡€å¯èƒ½ä¼šè¿…é€Ÿå‡å°‘åˆ°å‡ ä¹ä¸€æ— æ‰€æœ‰ã€‚ Haskellæ®è¯´ï¼ŒHaskell å³å°†åœ¨ 2020 å¹´è¿›è¡Œé‡å¤§æ›´æ–°ã€‚æœ‰å¾ˆå¤šå·¨å¤´å…¬å¸å’Œé¡¹ç›®ï¼ˆFacebookã€GitHub ç­‰ï¼‰æ›¾ç»ä½¿ç”¨ Haskell å¼€å‘è¿‡ä¸€äº›é‡è¦é¡¹ç›®ã€‚ä¸è¿‡ï¼ŒHaskell åœ¨ RedMonk è¯­è¨€æ’è¡Œæ¦œä¸Šçš„è¡¨ç°ä¸€ç›´å¾ˆå¹³æ·¡ï¼Œè¿™è¡¨æ˜æ²¡æœ‰æ›´å¤šçš„å¼€å‘è€…åœ¨å…³æ³¨è¿™é—¨è¯­è¨€ã€‚è¿™æ„å‘³ç€å®ƒæ­£åœ¨æ­»äº¡è¿˜æ˜¯å®Œå…¨æ­»äº†ï¼Ÿ Objective-Cè‹¹æœçš„ Object-C å·²æ˜¯ 35 å²ï¼Œå¾ˆæ˜æ˜¾ï¼Œè‹¹æœå…¬å¸æƒ³è®©å®ƒè‡ªç”Ÿè‡ªç­äº†ã€‚äº”å¹´å‰ï¼Œè‹¹æœå…¬å¸çš„é«˜ç®¡ä»¬ç™»ä¸Šèˆå°ï¼Œä¸ºå…¶è½¯ä»¶ç”Ÿæ€ç³»ç»Ÿæ¨å‡º Swiftï¼Œè¿™æ˜¯ä¸€ç§æ–°çš„ã€ç»è¿‡æ”¹è¿›çš„ç¼–ç¨‹è¯­è¨€ã€‚æ¯«æ— ç–‘é—®ï¼Œå¼€å‘è€…ä¼šå¾ˆå¿«æ¥å— Swiftã€‚ å…¬å¹³åœ°è¯´ï¼Œæ›´å¤šçš„å¼€å‘äººå‘˜å·²ç»å¼€å§‹ä½¿ç”¨ Swift (ç‰¹åˆ«æ˜¯åœ¨åŠŸèƒ½å˜å¾—æ›´åŠ ä¸°å¯Œçš„æƒ…å†µä¸‹)ï¼Œä½†æ˜¯ Object-C å¹¶æ²¡æœ‰åƒä¸€äº›äººæ‰€æœŸæœ›çš„é‚£æ ·åœ¨æµè¡Œè¯­è¨€æ’åä¸­å´©æºƒï¼Œå¯èƒ½åªæ˜¯è®¸å¤šå¼€å‘äººå‘˜æ›´å–œæ¬¢ä½¿ç”¨ä»–ä»¬ä¸€ç›´ä½¿ç”¨çš„è¯­è¨€ã€‚ ä¸è¿‡ï¼Œåˆ°æŸä¸€æ—¶åˆ»ï¼ŒObject-C å¾ˆå¯èƒ½ä¼šå®Œå…¨æ¶ˆå¤±ã€‚Swift æ­£åœ¨æˆä¸ºä¸€ç§éå¸¸æœ‰æ•ˆçš„è¯­è¨€ï¼Œç”¨äºæ„å»º iOSã€MacOS å’Œä¸ä¹…çš„è·¨å¹³å°åº”ç”¨ç¨‹åºã€‚ Ræ—©åœ¨å½“æ—¶ï¼ŒR æ˜¯ä¸€ç§è¶Šæ¥è¶Šæµè¡Œçš„æ•°æ®åˆ†æè¯­è¨€ã€‚ç„¶è€Œï¼ŒPython ä¼¼ä¹æ­£åœ¨è¿…é€Ÿåå™¬ R çš„å¸‚åœºä»½é¢ã€‚å°½ç®¡ R ä»ç„¶è¢«å­¦è€…å’Œæ•°æ®ç§‘å­¦å®¶æ‰€ä½¿ç”¨ï¼Œä½†å¯¹æ•°æ®åˆ†ææ„Ÿå…´è¶£çš„å…¬å¸æ­£è½¬å‘ Pythonï¼Œå› ä¸ºå®ƒçš„å¯ä¼¸ç¼©æ€§å’Œæ˜“ç”¨æ€§ã€‚å› æ­¤ï¼ŒR é™ä½äº† TIOBE çš„ç¼–ç¨‹è¯­è¨€æµè¡ŒæŒ‡æ•°ï¼Œè€Œå…¶ä»–ç ”ç©¶æ˜¾ç¤ºï¼ŒR çš„ä½¿ç”¨ç‡ä¸‹é™ç¼“æ…¢ï¼Œæœ‰åˆ©äº Pythonã€‚ å¦‚æœ R è¦ä»¥ä»»ä½•å½¢å¼å­˜åœ¨ï¼Œé‚£æ˜¯å› ä¸ºæ•°æ®åˆ†æäººå‘˜å¯èƒ½æœ€ç»ˆä¼šå°†å…¶ä¸ Python ç»“åˆä½¿ç”¨ã€‚é¦–å¸­æŠ€æœ¯å®˜ Enriko Aryanto ä»Šå¹´æ—©äº›æ—¶å€™å¯¹ Dice è¡¨ç¤ºï¼ˆä»–æ˜¯åŠ å·çº¢æœ¨åŸ(Redwood City)çš„è”åˆåˆ›å§‹äººä¹‹ä¸€ï¼Œæ€»éƒ¨ä½äºåŠ å·çš„åŒ¡è’‚æ˜å¾·æ˜¯ä¸€å®¶æ™ºèƒ½è¥é”€æ•°æ®å¹³å°ï¼‰ï¼š æŠŠ R å’Œ Python ç»“åˆèµ·æ¥æ—¢åˆç†åˆå¯è¡Œï¼Œæˆ‘ä»¬åœ¨å†…éƒ¨æ•°æ®ç§‘å­¦å¹³å°ä¸Šè¿è¡Œå®ƒä»¬ï¼Œä½†å¦‚æœæˆ‘ä»Šå¤©è¦é‡æ–°å¼€å§‹æˆ‘çš„èŒä¸šç”Ÿæ¶¯ï¼Œæˆ‘å¯èƒ½ä¼šè€ƒè™‘ä¸“æ³¨äº Python è€Œä¸æ˜¯ Rã€‚å®ƒæ˜¯ä¸€ç§æ›´é€šç”¨çš„è¯­è¨€ï¼Œæœ‰æ›´å¹¿æ³›çš„åº”ç”¨ç¨‹åºã€‚ Perlå³ä½¿ RedMonk çš„ Perl å—æ¬¢è¿ç¨‹åº¦ä¸‹é™ï¼Œè€ƒè™‘åˆ°ä»ç„¶æœ‰å¤§é‡çš„é—ç•™ç½‘ç«™ä½¿ç”¨å®ƒçš„ä»£ç ï¼Œè¯¥è¯­è¨€è¿˜éœ€è¦å¾ˆé•¿ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œå…¨å˜å¹³ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå¼€å‘äººå‘˜æ™®éæ”¯æŒå…¶ä»–è¯­è¨€ï¼Œæ¯”å¦‚æ„å»ºç½‘ç«™ï¼Œè¿™æ„å‘³ç€ Perl å°†é™·å…¥è¶Šæ¥è¶Šå¤šçš„åºŸå¼ƒçŠ¶æ€ã€‚ åœ¨æœ¬æ–‡çš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¯´è¿‡ Perl å‡ ä¹æ²¡æœ‰æ´»è·ƒçš„å¼€å‘ã€‚æ­£å¦‚ä¸€äº›æœ‰å¸®åŠ©çš„è¯„è®ºè€…æŒ‡å‡ºçš„é‚£æ ·ï¼Œäº‹å®å¹¶éå¦‚æ­¤ï¼šå®ƒæ¯å¹´æ›´æ–°ä¸€æ¬¡ã€‚ç„¶è€Œï¼Œé‰´äºå®ƒåœ¨ RedMonk å’Œ TIOBE ä¸Šçš„è¡°è½ï¼Œä»–ä»¬ä»ç„¶è®¤ä¸ºè¿™æ˜¯ä¸€ç§è¡°è½çš„è¯­è¨€ã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/news/DiceInsightsA/"},{"title":"å…³äºçŸ¥è¯†äº§æƒã€çŸ¥è¯†å…±äº«ä¸æ–‡ç« ç¿»è¯‘","text":"ä½œè€…ç®€ä»‹ï¼š è±Œè±†èŠ±ä¸‹çŒ«ï¼Œç”Ÿäºå¹¿ä¸œæ¯•ä¸šäºæ­¦å¤§ï¼Œç°ä¸ºè‹æ¼‚ç¨‹åºå‘˜ï¼Œæœ‰ä¸€äº›æå®¢æ€ç»´ï¼Œä¹Ÿæœ‰ä¸€äº›äººæ–‡æƒ…æ€€ï¼Œæœ‰ä¸€äº›æ¸©åº¦ï¼Œè¿˜æœ‰ä¸€äº›æ€åº¦ã€‚å…¬ä¼—å·ï¼šPythonçŒ« ä¸€ã€ç¼˜èµ·å‰ä¸ä¹…ï¼Œæˆ‘åœ¨ç¿»è¯‘ Guido van Rossumï¼ˆPythonä¹‹çˆ¶ï¼‰çš„æ–‡ç« æ—¶ï¼Œç»™ä»–ç•™è¨€ï¼Œç”³è¯·éå•†ä¸šç”¨é€”çš„ç¿»è¯‘æˆæƒã€‚ è¿‡ç¨‹ä¸­èµ·äº†ç‚¹å°è¯¯ä¼šï¼Œç•¥å»ä¸è¡¨ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ï¼šä»–çš„æ–‡ç« ä»¥ CC BY-NC-SA 4.0 è®¸å¯åè®®è¿›è¡Œæˆæƒã€‚éƒ¨åˆ†å¯¹è¯å¦‚ä¸‹ï¼š CC åè®®æ˜¯ä¸€ç§æˆæƒè®¸å¯åè®®ï¼Œæˆ‘æ›¾çœ‹åˆ°è¿‡å‡ æ¬¡ï¼Œä½†äº†è§£ä¸å¤šï¼Œæ‰€ä»¥ä¾¿æŸ¥é˜…äº†ç›¸å…³çš„å†…å®¹ã€‚ æœ¬æ–‡ä¸»è¦æ˜¯ä½œä¸ªè®°å½•ï¼Œæ—¢æ˜¯åŠ æ·±è‡ªå·±çš„ç†è§£ï¼Œä¹Ÿç»™æœ‰éœ€è¦çš„åŒå­¦ä¸€ä¸ªå‚è€ƒã€‚ äºŒã€è‘—ä½œæƒã€è‘—ä½æƒä¸è‡ªç”±ç‰ˆæƒå¯¹äºçŸ¥è¯†äº§æƒï¼Œé€šå¸¸æœ‰å¦‚ä¸‹å‡ ç§è¯´æ³•ï¼š All Rights Reservedï¼ˆä¿ç•™æ‰€æœ‰æƒåˆ©ï¼‰ Some Rights Reservedï¼ˆä¿ç•™éƒ¨åˆ†æƒåˆ©ï¼‰ All Rights Reversedï¼ˆæ’¤é”€æ‰€æœ‰æƒåˆ©ï¼‰ æ³¨æ„æœ€åä¸€æ¡çš„â€Reversedâ€ï¼Œå®ƒé•¿å¾—å¾ˆåƒâ€Reservedâ€ï¼Œä½†æ„æ€æˆªç„¶ç›¸åã€‚ å®ƒä»¬å¯¹æƒåˆ©çš„è¯‰æ±‚ç”±å¼ºè½¬å¼±ï¼Œä»ä¸€ä¸ªæç«¯èµ°å‘å¦ä¸€ä¸ªæç«¯ã€‚ æœ‰å‡ ä¸ªä¸æ­¤ç›¸å…³çš„æ¦‚å¿µï¼š copyrightï¼Œå³ç‰ˆæƒã€è‘—ä½œæƒ copyleftï¼Œå³è‘—ä½œä¼ ã€è‘—ä½æƒ copywrongï¼Œå³åç‰ˆæƒã€è‡ªç”±ç‰ˆæƒ ç‰ˆæƒåˆ¶åº¦èµ·æºäºåäº”ä¸–çºªä¸­æœŸï¼Œé‚£æ—¶è¥¿æ–¹å‘æ˜äº†é“…æ´»å­—å°åˆ·æœ¯ï¼ˆå¤ç™»å ¡ï¼Œç°ä»£å°åˆ·æœ¯ä¹‹çˆ¶ï¼‰ï¼Œå‡ºç°äº†å¤§é‡ç›—ç‰ˆï¼Œä¸ºäº†ä¿æŠ¤å‡ºç‰ˆå•†çš„åˆ©ç›Šï¼Œæ”¿åºœå‡ºå°äº†ç‰ˆæƒæ³•ã€‚ æ­¤åç‰ˆæƒæ³•åœ¨ä¸–ç•Œå„åœ°æ™®åŠï¼Œæ¼”åŒ–å‡ºäº†å¾ˆå¤šé—¨ç±»ï¼Œå®ƒä»¬æ™®éé™å®šäº†ä¸€ä¸ªæœ‰æ•ˆæœŸé™ï¼Œåœ¨æ­¤æœŸé™å†…ï¼Œç‰ˆæƒæ–¹å—åˆ°å„æ–­ä¿æŠ¤ï¼ˆå³ All Rights Reserved ï¼‰ã€‚è¶…å‡ºæœŸé™åï¼ŒçŸ¥è¯†ä½œå“æ‰ä¼šè¿›å…¥å…¬å…±é¢†åŸŸï¼ˆpublic domainï¼‰ï¼Œæ‰å˜æˆè‡ªç”±ç‰ˆæƒã€‚ copyright æ˜¯ä¸€ç§é™åˆ¶æ€§åè®®ï¼Œæœ‰åˆ©äºä¿æŠ¤ç‰ˆæƒæ–¹çš„ä¸ªä½“æƒç›Šï¼Œä½†æ˜¯ä¹Ÿé˜»ç¢äº†çŸ¥è¯†ä½œå“çš„ä¼ æ’­ï¼Œä¸åˆ©äºç¤¾ä¼šçš„å…¬å…±åˆ©ç›Šã€‚ æˆ‘ä»¬ç»å¸¸ä¼šå¬åˆ°ä¸€ä¸ªè¯â€ä¸“åˆ©æµæ°“â€ï¼Œè¯´çš„å°±æ˜¯ç‰ˆæƒè¢«è¿‡åº¦ä½¿ç”¨è€Œé€ æˆçš„ç¤¾ä¼šé—®é¢˜ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒæŸå®¶å•†ä¸šå…¬å¸ç«Ÿç„¶æ›¾â€æ‹¥æœ‰â€å›½æ——å›½å¾½çš„ç‰ˆæƒã€‚ copyleft åˆ™æ˜¯ä¸€ç§è¾ƒä¸ºå®½æ¾çš„åè®®ï¼Œå¯¹åº”çš„æ€æƒ³æ˜¯ Some Rights Reservedï¼ˆä¿ç•™éƒ¨åˆ†æƒåˆ©ï¼‰ï¼Œä½¿ç”¨è€…åªè¦éµå®ˆå°‘æ•°çš„åˆ—æ˜æ¡æ¬¾å³å¯ã€‚ copyleft ä¹‹æ‰€ä»¥ä¼šè¯‘ä½œâ€è‘—ä½œ ä¼  â€œï¼Œå› ä¸ºæœ‰â€ å‡å°‘å±è”½ï¼Œè‡ªç”±æµä¼  â€œä¹‹ä¹‰ã€‚ å¦å¤–è¿˜ç¿»è¯‘ä¸ºâ€è‘— ä½æƒâ€ï¼Œä¹Ÿæ˜¯ä¸€å­—ä¹‹å·®ï¼Œè·Ÿè‹±æ–‡åŸè¯ç¥ä¼¼ï¼Œéå¸¸æœ‰è¶£ã€‚ æœ€åè¿˜æœ‰ä¸€ä¸ª copywrongï¼ˆè¿˜æœ‰ç±»ä¼¼çš„â€copyfreeâ€ã€â€copycenterâ€å«æ³•ï¼‰ï¼Œå®ƒå±äºå¦ä¸€ä¸ªæç«¯ï¼Œæ— è§†ç‰ˆæƒï¼Œæ— æ‹˜æ— æŸã€‚ copyleft ä¸ copywrong éƒ½æ˜¯å¯¹ copyright çš„æŸç§çŸ«æ­£ï¼Œåªæ˜¯çŸ«æ­£çš„åŠ›åº¦ä¸åŒï¼Œæ€»ä½“è€Œè¨€ï¼Œå®ƒä»¬çš„ç›®çš„éƒ½æ˜¯ä¿ƒè¿›çŸ¥è¯†ä½œå“çš„ä¼ æ’­ï¼Œå¢è¿›æ•´ä½“çš„ç¤¾ä¼šåˆ©ç›Šã€‚ åœ¨äº’è”ç½‘æ—¶ä»£ï¼Œå®ƒä»¬éšå¤„å¯è§ï¼ˆå¯èƒ½ä¸ç›´æ¥ç”¨è¿™äº›å«æ³•ï¼‰ï¼Œæå¤§åœ°ä¿ƒè¿›äº†è‡ªç”±è½¯ä»¶ä¸å¼€æºç¤¾åŒºçš„å‘å±•ã€‚ ä¸Šå›¾ä¸­çš„ 6 ç§ä¸»æµçš„å¼€æºè®¸å¯è¯ï¼Œä½ åº”è¯¥æœ‰æ‰€è€³é—»å§ï¼Œåœ¨æˆ‘ä»¬å…è´¹ä½¿ç”¨çš„å„ç§è½¯ä»¶æˆ–ä»£ç åº“ä¸­ï¼Œå¾ˆå¯èƒ½å°±è—ç€å®ƒä»¬çš„èº«å½±ã€‚ å³ä¾§çš„ 3 ç§ï¼ˆBSDã€MITã€Apacheï¼‰å±äºå®½æ¾å¼è®¸å¯è¯ï¼ˆpermissive licenseï¼‰ï¼Œå¯¹ä½¿ç”¨è€…å‡ ä¹æ²¡æœ‰é™åˆ¶ï¼Œæ¥è¿‘äºæç«¯çš„ All Rights Reversedï¼ˆæ’¤é”€æ‰€æœ‰æƒåˆ©ï¼‰ã€‚ å·¦ä¾§çš„ 3 ç§ï¼ˆLGPLã€Mozillaã€GPLï¼‰åˆ™å±äº copyleft è®¸å¯è¯ï¼Œä»…ä¿ç•™äº†å°‘æ•°å…³é”®çš„æƒåˆ©ï¼Œæ­¤å¤–ä¸äºˆé™åˆ¶ã€‚ ä¸‰ã€çŸ¥è¯†å…±äº«è®¸å¯åè®®ç»è¿‡ä¸€æ®µç®€è¦çš„é“ºå«ï¼Œå‡ ä¸ªæ¦‚å¿µç®—æ˜¯è®²æ¸…æ¥šäº†ï¼Œæ¥ç€çœ‹ Python ä¹‹çˆ¶åœ¨æœ¬æ–‡å¼€å¤´æ‰€æåˆ°çš„é‚£ç§è®¸å¯åè®®å§ã€‚ CC ä¹Ÿæ˜¯ copyleft çš„ä¸€ç§ï¼Œå…¨ç§°ä¸º Creative Commons license ï¼Œè¯‘ä½œ çŸ¥è¯†å…±äº«è®¸å¯åè®® ï¼Œå‘å¸ƒäº 2002.12.16ï¼Œç›®å‰å·²å‘å±•åˆ° 4.0 ç‰ˆæœ¬ã€‚ å®˜ç½‘åœ°å€ï¼šhttps://creativecommons.org/licenses CC åè®®æ˜¯ä¸€ä¸ªç»Ÿç§°ï¼Œå®ƒæœ‰ä¸åŒçš„å®æŒ‡ï¼ŒåŒºåˆ«åœ¨äºæ‰€ä¿ç•™çš„æƒåˆ©ä¸åŒã€‚ å®ƒå£°æ˜çš„åŸºæœ¬æƒåˆ©æœ‰ 4 ç§ï¼š ç½²åï¼ˆAttributionï¼Œç®€å†™ BYï¼‰ï¼šæ³¨æ˜åŸä½œè€… ç›¸åŒæ–¹å¼å…±äº«ï¼ˆShareAlikeï¼Œç®€å†™ SAï¼‰ï¼šå…è®¸æ¼”ç»ï¼Œä½†éœ€ä»¥ç›¸åŒè®¸å¯åè®®å‘å¸ƒ éå•†ä¸šæ€§ä½¿ç”¨ï¼ˆNoncommercialï¼Œç®€å†™ NCï¼‰ï¼šä¸å¾—ç”¨äºå•†ä¸šç›®çš„ ç¦æ­¢æ¼”ç»ï¼ˆNo Derivative Worksï¼Œç®€å†™ NDï¼‰ï¼šä¸å¾—æ¼”ç»ï¼Œä¹Ÿä½œâ€éè¡ç”Ÿâ€ ï¼ˆæ³¨ï¼šè¿˜æœ‰ä¸€äº›åŸºæœ¬è¦æ±‚ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨è€…ä¸å¯æ·»åŠ æ³•å¾‹æ¡æ¬¾æˆ–æŠ€æœ¯æ‰‹æ®µæ¥é™åˆ¶åˆ«äººçš„åˆç†ä½¿ç”¨ã€‚é™äºç¯‡å¹…ï¼Œè¿™äº›å†…å®¹å°±ä¸å¤šä»‹ç»äº†ï¼Œè¯¦è§å®˜ç½‘ã€‚ï¼‰ æŒ‰ç…§æ˜¯å¦ä¿ç•™æŸé¡¹æƒåˆ©ï¼Œå®ƒä»¬å¯ä»¥æ’å‡º 16 ç§ç»„åˆï¼Œå…¶ä¸­ 4 ç§å› ä¸ºåŒæ—¶åŒ…å«â€SAâ€ä¸â€NDâ€ï¼Œäº’æ–¥è€Œæ— æ•ˆï¼Œè¿˜æœ‰ 5 ç§ä¸è¦æ±‚ç½²åï¼ŒåŸºæœ¬æ²¡äººä½¿ç”¨ã€‚ æ‰€ä»¥ï¼Œåªæœ‰ 7 ç§å¸¸ç”¨çš„ CC åè®®ï¼š ä¸Šå›¾åªåˆ—å‡ºäº† 6 ç§ï¼Œè¿˜æœ‰ 1 ç§ç‰¹æ®Šçš„æ˜¯ CC0 åè®®ï¼Œå®ƒä¸è¦æ±‚ä»»ä½•æƒåˆ©ï¼Œæ˜¯â€No Rights Reservedâ€ï¼Œæ— ç‰ˆæƒè¦æ±‚ï¼Œå±äºè‡ªç”±ç‰ˆæƒã€‚ è¿™äº›åè®®è¢«å¹¿æ³›ç”¨äºå„ç±»äº’è”ç½‘äº§å“ä¸­ï¼ˆä¸»è¦æ˜¯ç½‘ç«™ã€è§†é¢‘ã€å›¾ç‰‡æˆ–æ–‡ç« ï¼‰ï¼Œä¾‹å¦‚ï¼š CC0ï¼šPexelså›¾ç‰‡ã€Unsplashå›¾ç‰‡ã€SoundCloudéŸ³ä¹ CC BY-SAï¼šç»´åŸºç™¾ç§‘å†…å®¹ã€Stack Overflowå†…å®¹ CC BY-NC-NDï¼šTED æ¼”è®²è§†é¢‘ CC BY-NC-SAï¼šå¯æ±—å­¦é™¢è§†é¢‘ã€æ–¯å¦ç¦å…¬å¼€è¯¾è§†é¢‘ å¾ˆå¤šä¸ªäººç½‘ç«™æˆ–æ–‡ç« ï¼ŒåŸºæœ¬é‡‡ç”¨äº†â€CC BY-NC-NDâ€æˆ–è€…â€CC BY-NC-SAâ€ä¹‹ä¸€ã€‚Guido æœ€åˆç»™æˆ‘å›å¤çš„æ˜¯ ND è¿™ç§ï¼Œåæ¥æ‰æ¾„æ¸…ä¸º SAã€‚ è¿™å‡ ç§æƒåˆ©ä¸­ï¼ŒBYï¼ˆç½²åï¼‰æ˜¯ä¸è¨€è€Œå–»çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„â€è½¬è½½æ—¶è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„â€ï¼Œä½“ç°äº†å¯¹äºåŸä½œè€…çš„æœ€èµ·ç çš„å°Šé‡ã€‚ å¦å¤–çš„ 3 ç§æƒåˆ©ï¼Œå€¼å¾—å†ç»†ç»†åœ°è¾¨æä¸€ä¸‹ï¼š SA/NDï¼Œæ˜¯å¦å…è®¸æ¼”ç»ã€‚æ¼”ç»åŒ…æ‹¬â€å†æ··åˆã€è½¬æ¢æˆ–åŸºäºè¯¥ä½œå“åˆ›ä½œâ€ï¼ŒåŸºæœ¬å¯æ¦‚æ‹¬ä¸ºä¸å…è®¸æ”¹åŠ¨åŸä½œå“ï¼Œè€Œä¸”ä¸å…è®¸ç¿»è¯‘ï¼ˆè¿™ç‚¹å¾ˆå…³é”®ï¼‰ NCï¼Œéå•†ä¸šç”¨é€”ã€‚ä»€ä¹ˆç®—æ˜¯å•†ä¸šç”¨é€”å‘¢ï¼Ÿå®˜æ–¹ç¬¼ç»Ÿåœ°æ¦‚æ‹¬ä¸ºâ€å‡ºäºå•†ä¸šåˆ©ç›Šæˆ–é‡‘èè¡¥å¿â€çš„ç”¨é€”ï¼Œè¿˜è¯´è¿™å–å†³äºå…·ä½“æƒ…å†µå’Œä½¿ç”¨è€…çš„æ„å›¾ å››ã€å…³äºç¿»è¯‘çš„å‡ ä¸ªé—®é¢˜æœ¬æ–‡ç¼˜èµ·äºç¿»è¯‘ï¼Œå¿«ç»“æŸäº†ï¼Œæˆ‘å†è¡¥å……å‡ ä¸ªè·Ÿç¿»è¯‘ç›¸å…³çš„é—®é¢˜å§ï¼Œå¹¶é™„ä¸Šæˆ‘çš„ç†è§£ã€‚ 1ã€ç¿»è¯‘åˆ«äººçš„æ–‡ç« ä¼šå¯¼è‡´ä¾µæƒä¹ˆï¼Ÿç¿»è¯‘æƒæ˜¯è‘—ä½œè´¢äº§æƒçš„ä¸€ç§ï¼Œå±äºè‘—ä½œäººæ‰€æœ‰ï¼Œå®ƒçš„åŸºæœ¬å«ä¹‰æ˜¯ï¼šè‘—ä½œæƒäººäº«æœ‰è‡ªè¡Œç¿»è¯‘å…¶ä½œå“å’Œå…è®¸ä»–äººç¿»è¯‘å…¶ä½œå“çš„æƒåˆ©ã€‚æ‰€ä»¥ï¼Œæœªç»ä½œè€…æˆæƒæˆ–è€…è®¸å¯çš„ä½œå“ï¼Œå°±ä¸è¦ç¿»è¯‘äº†ï¼Œç¿»è¯‘äº†ä¹Ÿä¸åº”å‘å¸ƒï¼Œå¦åˆ™å°±ä¾µæƒäº†ã€‚ 2ã€CC åè®®ä¸‹çš„ä½œå“å¯è‡ªç”±ç¿»è¯‘ä¹ˆï¼Ÿå¦‚æœä½œè€…è®¸å¯çš„æ˜¯ NDï¼Œå³ç¦æ­¢æ¼”ç»ï¼Œé‚£ä¹ˆï¼Œè¯¥ä½œå“æ˜¯ä¸å…è®¸è¢«ç¿»è¯‘çš„ï¼›å¦‚æœè®¸å¯çš„æ˜¯ SAï¼Œå³æ˜¯å…è®¸ç¿»è¯‘ï¼Œä½†æ³¨æ„éœ€â€ä»¥ç›¸åŒæ–¹å¼å…±äº«â€ï¼Œå³ç¿»è¯‘åçš„ä½œå“éœ€æ”¯æŒä»–äººç»§ç»­ä½œå‡ºæ¼”ç»ï¼›å…¶å®ƒæƒ…å†µï¼Œå¯¹ç¿»è¯‘è¡Œä¸ºä¸ä½œçº¦æŸã€‚ 3ã€è¯‘è€…å¯¹ç¿»è¯‘çš„ä½œå“æ‹¥æœ‰ç‰ˆæƒä¹ˆï¼Ÿæ ¹æ®æˆ‘å›½ã€Šè‘—ä½œæƒæ³•ã€‹ç¬¬åäºŒæ¡æ‰€è¿°ï¼š æ”¹ç¼–ã€ç¿»è¯‘ã€æ³¨é‡Šã€æ•´ç†å·²æœ‰ä½œå“è€Œäº§ç”Ÿçš„ä½œå“ï¼Œå…¶è‘—ä½œæƒç”±æ”¹ç¼–ã€ç¿»è¯‘ã€æ³¨é‡Šã€æ•´ç†äººäº«æœ‰ï¼Œä½†è¡Œä½¿è‘—ä½œæƒæ—¶ä¸å¾—ä¾µçŠ¯åŸä½œå“çš„è‘—ä½œæƒã€‚ å³åœ¨ä¸ä¾µçŠ¯åŸä½œç‰ˆæƒçš„å‰æä¸‹ï¼Œç¿»è¯‘ä½œå“çš„ç‰ˆæƒå½’è¯‘è€…æ‰€æœ‰ã€‚ 4ã€ç¿»è¯‘çš„ä½œå“ç®—æ˜¯åŸåˆ›ä¹ˆï¼Ÿä»ç‹­ä¹‰çš„æ¦‚å¿µä¸Šçœ‹ï¼Œç¿»è¯‘å±äºäºŒæ¬¡åˆ›ä½œã€å±äºè¡ç”Ÿã€å…¶â€çµé­‚â€æ˜¯ç”±åŸä½œå“æ‰€èµ‹äºˆçš„ï¼Œæ‰€ä»¥ä¸èƒ½ç®—æ˜¯åŸåˆ›ã€‚åŸåˆ›åº”æŒ‡ç‹¬ç«‹åˆ›ä½œã€å…¨æ–°å‘æ˜ï¼Œæ‰€ä»¥åœ¨æ­¤å«ä¹‰ä¸Šçœ‹ï¼Œç¿»è¯‘ä¸ç®—æ˜¯åŸåˆ›ã€‚ ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€ç§å…·ä½“çš„æƒ…å¢ƒï¼Œä¾‹å¦‚åœ¨å…¬ä¼—å·å‘æ–‡æ—¶æ ‡æ³¨çš„â€åŸåˆ›â€ï¼Œæ­¤åŸåˆ›å¹¶éæ˜¯è¦ä½œæ¦‚å¿µä¸Šçš„åŒºåˆ†ï¼Œè€Œæ˜¯è¦ä¿æŠ¤ä½œè€…çš„ç‰ˆæƒï¼Œé˜²æ­¢æ–‡ç« è¢«äººä¾µæƒè½¬è½½ï¼ˆç”šè‡³æ˜¯è¢«æŠ¢å»æ ‡æ³¨åŸåˆ›ï¼‰ï¼Œåœ¨æ­¤æƒ…å¢ƒä¸‹ï¼Œæˆ‘è®¤ä¸ºå¯ä»¥æ ‡â€åŸåˆ›â€ï¼ˆæœ‰â€ç¿»è¯‘â€æ ‡è®°å°±æ›´å¥½äº†ï¼‰ã€‚ æ‰€ä»¥ï¼Œç»¼åˆæ¥çœ‹ï¼Œç¿»è¯‘ä½œå“ä¸æ˜¯åŸåˆ›ï¼Œä½†åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œåˆå¯ä»¥æ˜¯â€åŸåˆ›â€ã€‚ 5ã€å¦‚ä½•ç†è§£éå•†ä¸šç”¨é€”å‘¢ï¼Ÿç»´åŸºç™¾ç§‘å¯¹äºå•†ä¸šè¡Œä¸ºæ¦‚æ‹¬æœ‰ 4 ä¸ªè¦ç‚¹ï¼šï¼ˆ1ï¼‰ä»¥è¥åˆ©ä¸ºç›®çš„ï¼ˆ2ï¼‰å‘ç”Ÿäº¤æ˜“è¡Œä¸ºï¼ˆ3ï¼‰å‡ºäºåŒæ–¹è‡ªæ„¿ï¼ˆ4ï¼‰ç¬¦åˆæ³•å¾‹è§„èŒƒ CC åè®®æ‰€çº¦å®šçš„ NC æ¡æ¬¾ï¼Œåº”å‚ç…§å¦‚ä¸Šè§£é‡Šã€‚æ‰€ä»¥ï¼ŒåŸºäº NC æ¡æ¬¾è®¸å¯çš„ç¿»è¯‘ä½œå“ï¼Œä¸åº”ç”¨äºçŸ¥è¯†ä»˜è´¹ï¼Œä¹Ÿä¸åº”ç”¨äºå…¶å®ƒä¹°å–äº¤æ˜“ï¼Œæ­¤å¤–ï¼Œ ä¸€èˆ¬è€Œè¨€ï¼Œ æåŠ©æˆ–è€…èµèµç­‰è¡Œä¸ºéƒ½ä¸ç®—æ˜¯å•†ä¸šç”¨é€”ï¼Œåˆ™ä¸å—æ­¤é™åˆ¶ã€‚ åŸæ–‡é“¾æ¥ ğŸ‘‡","link":"/news/copyright/"},{"title":"16å¹´ä¼š","text":"æ–°çš„ä¸€å¹´ï¼Œæ–°çš„å¼€å§‹ã€‚","link":"/notes/16/"},{"title":"17å¹´ä¼š","text":"ä¸€è·¯åŒè¡Œå…±ç²¾å½©ï¼","link":"/notes/17/"},{"title":"å¯ç¨‹","text":"æ•…äº‹çš„å¼€å§‹ æ­Œæ›²ï¼šå¯ç¨‹ä½œè¯\\ä½œæ›²ï¼šå¢åºšæˆŒæ¼”å”±ï¼šæ°´æœ¨å¹´åç¼–æ›²ï¼šå¢æ¢åšå½•éŸ³å¸ˆï¼šéƒå®‡æ··éŸ³å¸ˆï¼šé¢œä»²å¤å’Œå£°ç¼–é…ï¼šç¼ªæ°å’Œå£°ï¼šç¼ªæ° å“ˆè¾¾å‰ä»–ï¼šæå»¶äº®ç­å“ç´ï¼šæå»¶äº®è´æ–¯ï¼šéŸ©é˜³é¼“ï¼šåˆç£Š å‘è¿‡å»çš„æ‚²ä¼¤è¯´å†è§å§è¿˜æ˜¯å¥½å¥½çæƒœç°åœ¨å§ä½ å¯»æ±‚çš„å¹¸ç¦ å…¶å®ä¸åœ¨è¿œå¤„å®ƒå°±æ˜¯ä½ ç°åœ¨ ä¸€ç›´èµ°çš„è·¯å°±åœ¨å¯ç¨‹çš„æ—¶åˆ»è®©æˆ‘ä¸ºä½ å”±é¦–æ­Œå­¤ç‹¬æ—¶å€™è¦è®°å¾—æƒ³èµ·æˆ‘ç­‰åˆ°ç›¸é‡çš„æ—¶åˆ»æˆ‘ä»¬å†å”±è¿™é¦–æ­Œå°±åƒæˆ‘ä»¬ä»æœªæ›¾ç¦»åˆ«è¿‡ä¸ç®¡æ€æ ·çš„æ—¶åˆ»è¯·ä½ è®°ä½è¿™é¦–æ­Œè®°ä½æˆ‘ä»¬çš„åšæŒä»æœªå˜è¿‡æœªæ¥æ€æ ·çš„æ—¶åˆ»è¯·ä½ è®°ä½è¿™é¦–æ­Œè®°ä½æˆ‘ä»¬çš„æ¢¦æƒ³ä»æœªå˜è¿‡è®°ä½æˆ‘ä»¬çš„æ¢¦æƒ³ä»æœªå˜è¿‡è®°ä½æˆ‘ä»¬çš„æ¢¦æƒ³ä»æœªå˜è¿‡","link":"/notes/2011å¯ç¨‹/"},{"title":"2012","text":"2012 ä¸€åˆ‡éƒ½è¿˜å¥½ã€‚ ä¸–ç•Œæœªæœ«æ—¥ä½œè¯ï¼šæ–¹æ–‡å±± ä½œæ›²ï¼šå‘¨æ°ä¼¦æ¼”å”±ï¼šå‘¨æ°ä¼¦ è¿™è¡—é“åœ¨ä¸‹é™· æˆ‘ä»¬å°±å¿«å¤±å»äº†å®¶å›­ä½ æˆ‘å´éƒ½æ²¡æœ‰åŸ‹æ€¨ å°†çœ¼æ³ªåœæ ¼ç¬é—´è¡—æ™¯æ‘§æ¯ æˆ‘å†…å¿ƒå´ä¸è½»æ˜“æ’¤é€€æ»¡å¤©é£é›ª æˆ‘ä»¬ä¼šå¾®ç¬‘å»é¢å¯¹æˆ‘ç‰µç€ä½ çš„æ‰‹ ä¸€è·¯ç©¿æ¢­åœ¨åŸå¸‚è·¯å£å°±ç®—æ•…äº‹åˆ°äº†å°½å¤´ æˆ‘ä»¬ä¹Ÿç»ä¸é€€ç¼©å¿«è½¬é£æ™¯ è¢«ä¸€å†æé†’å¤±å»æ£®æ—è½å¶å£°éŸ³ åœä¸ä½æˆ‘ä»¬çš„å…³å¿ƒå°±ç®—æ˜¯ä¸–ç•Œè¦å´©æºƒ äº²çˆ±çš„æˆ‘ä¹Ÿç»ä¸ä¼šè½æ³ªä¸æ”¾å¼ƒçˆ±è¿‡çš„é‚£ç§æ„Ÿè§‰çæƒœç€æœ‰ä½ è®°å¿†çš„ä¸€åˆ‡å°±ç®—æ˜¯ä¸–ç•Œè¦å€¾æ–œäº²çˆ±çš„æˆ‘ä¹Ÿç»ä¸è¯´ç¦»åˆ«å°½ç®¡æœ«æ—¥å¨èƒå†å¼ºçƒˆ æœ‰çˆ±å°±ä¸ç´¯æˆ‘ç‰µç€ä½ çš„æ‰‹ ä¸€è·¯ç©¿æ¢­åœ¨åŸå¸‚è·¯å£å°±ç®—æ•…äº‹åˆ°äº†å°½å¤´ æˆ‘ä»¬ä¹Ÿç»ä¸é€€ç¼©å¿«è½¬é£æ™¯ è¢«ä¸€å†æé†’å¤±å»æ£®æ—è½å¶å£°éŸ³ åœä¸ä½æˆ‘ä»¬çš„å…³å¿ƒå°±ç®—æ˜¯ä¸–ç•Œè¦å´©æºƒäº²çˆ±çš„æˆ‘ä¹Ÿç»ä¸ä¼šè½æ³ªä¸æ”¾å¼ƒçˆ±è¿‡çš„é‚£ç§æ„Ÿè§‰çæƒœç€æœ‰ä½ è®°å¿†çš„ä¸€åˆ‡å°±ç®—æ˜¯ä¸–ç•Œè¦å€¾æ–œäº²çˆ±çš„æˆ‘ä¹Ÿç»ä¸è¯´ç¦»åˆ«å°½ç®¡æœ«æ—¥å¨èƒå†å¼ºçƒˆ æœ‰çˆ±å°±ä¸ç´¯","link":"/notes/2012/"},{"title":"èè´äºŒå‘¨å¹´","text":"èè´äºŒå‘¨å¹´","link":"/notes/2year/"},{"title":"èè´ä¸‰å‘¨å¹´","text":"ä¸‰å‘¨å¹´åº†å…¸ğŸ‰","link":"/notes/3year/"},{"title":"Website","text":"æ”¶è— https://www.gotapi.com/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šHTML,CSS,XPATH,XSL,JAVASCRIPTç­‰APIçš„æŸ¥è¯¢ç½‘ç«™ã€‚ https://www.w3schools.com/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šW3Cåˆ¶å®šçš„æ ‡å‡†è¯¸å¦‚XML,HTML,XSLç­‰ç­‰çš„åœ¨çº¿å­¦ä¹ æ•™ç¨‹ã€‚ https://www.xml.org.cn/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šå¯ä»¥è¯´æ˜¯XMLçš„ä¸­å›½å®˜æ–¹ç½‘å§ã€‚W3Cæ ‡å‡†çš„ç¿»è¯‘ç»„ç»‡ä¸XMLç³»åˆ—æŠ€æœ¯äº¤æµç¤¾åŒº. https://www.connectionstrings.com/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šè¿™é‡Œå‡ ä¹æ”¶é›†äº†æ‰€æœ‰çš„æ•°æ®åº“è¿æ¥å­—ç¬¦(connectionstring)äº†ã€‚ https://www.itpub.net/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šæˆ‘ä¸ªäººè®¤ä¸ºæ˜¯å›½å†…æœ€ä¸“ä¸šçš„ç»¼åˆæ€§è¡Œä¸šæ€§æŠ€æœ¯ç±»ç¤¾åŒº. https://www.netvtm.com/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šå†…å®¹å¤šç¿»è¯‘äºw3schools.comï¼Œå°‘æœ‰åŸåˆ›ã€‚ä¸è¿‡è¿˜æ˜¯åº”è¯¥é¼“åŠ±ç²¾å“ç¿»è¯‘ã€‚ https://www.regexlib.com è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šæ­£åˆ™è¡¨è¾¾å¼åº“ã€‚æœç´¢æ­£åˆ™è¡¨è¾¾å¼ç”¨ã€‚ https://www.rexv.org/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šç”¨Ajaxå¼€å‘çš„åœ¨çº¿æ­£åˆ™è¡¨è¾¾å¼éªŒè¯å™¨. https://www.koders.com/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šä»£ç æœç´¢å¼•æ“ï¼Œå¯ä»¥æœç´¢å‡ åç§è¯­è¨€çš„ä»£ç ã€‚ https://www.123aspx.com/Rotor/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼š.Net Frameworksçš„æºä»£ç ã€‚ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šå­Ÿå®ªä¼šçš„èµ„æ–™ç«™ï¼Œè™½èµ„æ–™å¤§å¤šæ¯”è¾ƒç®€å•ï¼Œå´è§£å†³äº†å¼€å‘ä¸­çš„å¤§éƒ¨åˆ†é—®é¢˜ï¼Ÿï¼ https://www.dofactory.com/Patterns/Patterns.aspx è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼š23ç§è®¾è®¡æ¨¡å¼çš„å®ç°å‚è€ƒã€‚ç‰¹ç‚¹æ˜¯UML+ç²¾ç»ƒçš„ç¤ºä¾‹ä»£ç +ç®€æ´çš„è§£è¯´é£æ ¼ã€‚ https://www.open-open.com/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šJavaå¼€æºå¤§å…¨,å¦‚æœä½ ç”¨.NETï¼Œç…§ç€å®ƒçš„åå­—å‰åŠ Næ‰¾æ‰¾åº”è¯¥éƒ½æœ‰å§ ï¼Ÿï¼ï¼šï¼‰ https://www.riacn.com/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šæˆ‘è®¤ä¸ºæ˜¯å›½å†…å°‘æœ‰çš„RIAä¸“ä¸šæŠ€æœ¯ç«™äºäº¤æµç¤¾åŒº. https://www.cnpaf.net/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šä¸­å›½åè®®åˆ†æç½‘ï¼Œå¾ˆå…¨é¢çš„åè®®èµ„æ–™ç½‘ã€‚ https://www.pinvoke.net/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šé€šè¿‡.netè°ƒç”¨win32ç­‰éå—æ§APIçš„èµ„æ–™å¤§å…¨ã€‚ https://bbs.51js.com/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šæ— å¿§è„šæœ¬,ä¸“ä¸šçš„è„šæœ¬æŠ€æœ¯ç¤¾åŒºã€‚ https://www.c-sharpcorner.com/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šC# Corner,å­¦ä¹ c#çš„å¥½åœ°æ–¹. https://blog.csdn.net/group/experts/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šCSDNä¸“å®¶ç¾¤,æ±‡é›†CSDNä¸“å®¶çš„ç”µå­æŠ¥. https://www.codeproject.com/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šæœ‰å¾ˆå¤šå¯å­¦ä¹ çš„ç¤ºä¾‹ä»£ç ï¼Œç‰¹ç‚¹æ˜¯ä¸°å¯Œï¼Œæ·±å…¥æµ…å‡ºï¼ https://www.gotdotnet.com/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šå¾®è½¯å¼€å‘ç»´æŠ¤çš„å…³äº.net frameworkäº¤æµç¤¾åŒº. https://www.sourceforge.net/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šå…¨çƒæœ€å¤§çš„å¼€æºè½¯ä½“ç«™ç‚¹ https://www.asp.net/QuickStart/ è¯­è¨€ï¼šè‹±è¯­ ç®€ä»‹ï¼šMicrosoft .NET Framework SDK QuickStart Tutorials https://www.matrix.org.cn/ è¯­è¨€ï¼šä¸­æ–‡ ç®€ä»‹ï¼šä¸ Java å…±èˆ,Javaä¼˜ç§€çš„ä¸“ä¸šç¤¾åŒº,æ–‡ç« è´¨é‡å¾ˆé«˜.åš.Netçš„æœ‹å‹ä¹Ÿå¯ä»¥ä»å…¶å€Ÿé‰´å¾ˆå¤šçŸ¥è¯†. JAVAå­¦ä¹ æ¨¡æ¿â€”â€”å­¦ä¹ æµç¨‹ https://www.7zcn.com/javastep/StudyJavaInfo.html SUNä¸­å›½æŠ€æœ¯ç¤¾åŒº https://developers.sun.com.cn/ ç»¼åˆç½‘ç«™ Â­ æ•°åŠ¨åœ¨çº¿https://www.shudoo.com/ï¼ˆç”µè„‘æŠ¥ï¼‰ Â­https://www.csdn.net/ Â­ æ¯”ç‰¹ç½‘ITçŸ¥è¯†åº“https://know.chinabyte.com/index.php/%E9%A6%96%E9%A1%B5 Â­ è‡³é¡¶ç½‘https://www.zdnet.com.cn/ Â­ è®¡ä¸–ç½‘https://www.ccw.com.cn/ Â­ ä¸­å›½ITå®éªŒå®¤https://www.chinaitlab.com/ Â­ å¤©æç½‘https://www.yesky.com/ Â­ èµ›è¿ªç½‘https://www.ccidnet.com/ Â­ å…¨çƒæµé‡æŸ¥è¯¢https://www.alexa.com/ Â­ Javaç½‘ç«™ Â­ Javaè½¯ä»¶ç¤¾åŒºhttps://www.javaeye.com/ Â­ javaä¸–çºªç½‘https://www.java2000.net/ Â­ JAVABUGShttps://bugs.sun.com/JAVAæ¼æ´ Â­ https://www.mldnjava.cn/java.htm Â­ HEY JAVAæŠ€æœ¯ç¤¾åŒºhttps://www.heyjava.com/ Â­ ACCPæ•™ç¨‹ç½‘https://www.accptech.com/index.html è®ºå›ç½‘ç«™ Â­ ç¾æ²³è®ºå›https://www.eimhe.com/bbs/ Â­ é­”https://bbs.mldn.cn/ Â­ https://bbs.chinajavaworld.com/index.jspa æŠ€æœ¯ç½‘ç«™ Â­ apacheçš„ANThttps://ant.apache.org/bindownload.cgi Â­ IBM https://www.ibm.com/developerworks/Â­ IDEÂ­ Eclipseå®˜ç½‘https://www.eclipse.org/downloadsÂ­ MyEclipseå®˜ç½‘https://www.myeclipseide.com/ è½¯ä»¶æµ‹è¯• è½¯ä»¶æµ‹è¯•ç½‘https://www.51testing.com/ 1 ç¨‹åºå‘˜è®ºå›ï¼šhttps://www.gxcxy.com 2 J2meç¤¾åŒº https://www.j2meforums.com/forum/ 3 csdn https://www.csdn.net/ 4 VcçŸ¥è¯†åº“ https://www.vckbase.com/ 5 codeproject https://www.codeproject.com/ 6 ç¨‹åºå‘˜è”åˆå¼€å‘ç½‘ https://www.pudn.com/ 7 çœ‹é›ªå­¦é™¢ https://www.pediy.com 8 è“è‰²ç†æƒ³ https://www.blueidea.com/ 9 åšå®¢å›­ https://www.cnblogs.com/ 10 Nuixåº”ç”¨å¼€å‘ç¤¾åŒº https://chinaunix.net/ 11 javaeye https://www.javaeye.com 12 Itäººç½‘ https://www.iteer.net/ 13 ä¸­å›½äººæ‰çƒ­çº¿ https://www.cjol.com/ 14 å¤©æ¶¯è®ºå› https://www.tianya.cn/ 15 é£äº‘çš„blog https://blog.codingnow.com/ 16 æ–°æµªç§‘æŠ€é¢‘é“ https://tech.sina.com.cn/ 17 phpchina https://www.phpchina.com/html/index.html 18 æ¸¸æˆå¼€å‘èµ„æºç½‘ https://www.gameres.com/ 19 ç½‘ç»œæ¸¸æˆç¬¬ä¸€é—¨æˆ· https://www.17173.com/ 20 æˆ‘çˆ±ç ”å‘ç½‘ https://www.52rd.com/ 21 Msdnä¸­æ–‡ç½‘ https://www.microsoft.com/china/MSDN/DeveloperCenter/default.mspx 22 å¤§å¯Œç¿ç¼–ç¨‹ç½‘ç«™ https://www.delphibbs.com/ 23 Delphiç›’å­ https://www.2ccc.com/ 24 C++buillderç ”ç©¶ https://www.ccrun.com/ 25 Itè®ºå› https://bbs.itren.cn/ 26 Javaå¼€æºå¤§å…¨ https://www.open-open.com/ 27 codegurn https://www.codeguru.com/ 28 ç¼–ç¨‹çˆ±å¥½è€… https://www.programfan.com/ 29 Javaä¸­æ–‡ç«™ https://www.java-cn.com/ 30 reactos https://www.reactos.org/zh/index.htm 31 å¼€æºåŠ›é‡ https://www.opensourceforce.org/ 32 ç”µè„‘ç¼–ç¨‹æŠ€å·§ä¸ç»´æŠ¤ https://www.comprg.com.cn/ 33 ä¸­å›½ç”µå­ç½‘ https://21ic.com/ 34 ç¼–ç¨‹ä¸­å›½ https://www.bc-cn.net/ 35 åµŒå…¥å¼å¼€å‘è®ºå› https://www.cevx.com/bbs/ 36 ç”µè„‘çˆ±å¥½è€… https://www.cfan.com.cn/ 37 sybaseä¸­å›½ https://www.sybase.com.cn/gvswse/site/china/index.jsp 38 pbdr https://www.pbdr.com/ 39 apache https://www.apache.org 40 rootkit https://www.rootkit.com/index.php 41 é©±åŠ¨å¼€å‘ç½‘ https://www.driverdevelop.com/first.html 42 å®‰å…¨ç„¦ç‚¹ https://www.xfocus.net/ 43 cnbetaç½‘å‹åª’ä½“ä¸è¨€è®ºå¹³å° https://www.cnbeta.com/ 44 fyterçš„åšå®¢ https://www.fyter.cn/Default.aspx 45 asp.netæ§ä»¶ https://www.devexpress.com/ 46 operamask https://www.operamasks.org/ 47 ä¸­å›½æºç ç½‘ https://www.yuanma.org/ 48 sawinè½¯ä»¶ç ”å‘ä¹‹çª— https://www.sawin.cn/ 49 ç”µè„‘æ•™è‚²ä¸WEBæ•™è‚²åœ¨çº¿ https://210.40.7.188/ 50 ä¸­å›½dosè”ç›Ÿ https://www.cn-dos.net/ 51 ä¸­å›½biosè”ç›Ÿ https://www.biosren.com/index.php 52 bioscentral https://bioscentral.com/ 53 edaä¸“ä¸šè®ºå› https://www.edacn.net/bbs/ 54 è¯ºåŸºäºšè®ºå› https://forum.nokia.com.cn/sch/index.html 55 è®¡ç®—æœºç§‘å­¦è®ºå› https://www.ieee.org.cn/index.asp 56 ibm developerworks ä¸­å›½ https://www.ibm.com/developerworks/cn/ 57 w3 https://www.w3.org/ 58 ç½‘é¡µè®¾è®¡å¸ˆ https://www.w3cn.org/ 59 ä¸­å›½ä¸‡ç»´ç½‘è”ç›Ÿ https://www.w3china.org/index.htm 60 è±†ç“£ https://www.douban.com/ 61 ç¨‹åºå‘˜é—¨æˆ·ç«™ï¼šhttps://www.gxcxy.com 62 è½¯ä»¶å•†åŠ¡ç½‘ https://www.bizsofts.com/ 63 sun https://www.sun.com/ 64 google code https://code.google.com/ 65 google å¼€å‘äººå‘˜ä¸»é¡µ https://code.google.com/intl/zh-CN/ 66 the official microsoft asp.net https://www.asp.net/ 67 microsoft IIS https://www.iis.net/default.aspx?tabid=1 68 è£è€€ https://www.royaloo.com/index.html 69 ä¾¯æ·ç½‘ç«™ https://jjhou.csdn.net/ 70 javaå¤§æœ¬è¥ https://www.javadby.com/ 71 æ¯”ç‰¹ç½‘ https://www.chinabyte.com/ 72 51cto https://www.51cto.com/ 73 infoq https://www.infoq.com/ 74 åšå®¢å ‚ https://blog.joycode.com/ 75 åµŒå…¥å¼å¼€å‘ç½‘ https://www.embed.com.cn/ 76 åµŒå…¥å¼å¼€çº¿ https://www.mcuol.com/ 77 ä¸­åµŒç½‘ https://www.chinaeda.cn/ 78 é…·å‹¤ç½‘ https://www.kuqin.com/ 79 çº¢è”linuxé—¨æˆ· https://www.linuxdiyf.com/ 80 itpubæŠ€æœ¯é—¨æˆ· https://www.itpub.net/ 81 ç¨‹å¼è®¾è®¡ä¿±ä¹éƒ¨ https://www.programmer-club.com/index.asp 82 umlè½¯ä»¶å·¥ç¨‹ç»„ç»‡ https://www.uml.org.cn/index.asp 83 delphiå›­åœ° https://www.delphifans.com/ 84 theserverside https://www.theserverside.com/ 85 ä¸­å›½donetä¿±ä¹éƒ¨ https://www.chinaaspx.com/ 86 ç¼–ç¨‹ç‹ https://www.kingofcoders.com/ 87 it168 https://www.it168.com/ 88 open source software in c# https://csharp-source.net/ 89 ä¸­å›½ITå®éªŒå®¤ https://www.chinaitlab.com/ 90 è½ä¼è€…ç«™é•¿è®ºå› https://www.im286.com/ 91 ä¸­å›½ç«™é•¿ç«™ https://www.chinaz.com/ 92 asp.netæºç ä¸‹è½½ä¸“ä¸šç«™ https://www.51aspx.com/ 93 itèŒä¸šå·¥ç¨‹å¸ˆ https://www.51myit.com/ 94 å¤ªå¹³æ´‹ç”µè„‘ç½‘ https://www.pconline.com.cn/ 95 ä¹˜é£åŸåˆ›ç¨‹åº https://study.qqcf.com/ 96 ç½‘æ˜“å­¦é™¢ https://tech.163.com/school/ 97 ç¨‹åºè®¾è®¡ï¼ç¨‹åºå¼€å‘ç±»æ•™ç¨‹ https://www.pcvz.com/Program/Programs/Index.html 98 ç®—æ³•æºç å§ https://www.sfcode.cn/ 99 codegurn https://www.codeguru.cn/ 100 å¾—ç›Šç½‘ https://www.netyi.net/ 101 ä¸­å›½eclipseç¤¾åŒº https://www.eclipseworld.org/bbs/ 102 é¡¹ç›®ç®¡ç†è€…è”ç›Ÿ https://www.mypm.net/ 103 æ –æ¯è°· https://www.21manager.com/ 104 J2meå¼€å‘ç½‘ https://www.j2medev.com/bbs/index.asp 105 å“è¶Šäºšé©¬é€Š https://www.amazon.cn/ WEBæŠ€æœ¯ï¼š WEBå‰ç«¯å¼€å‘ https://www.css88.com/ Ext JSå®˜æ–¹ç½‘ https://www.extjs.com/ Ext JSä¸­æ–‡èµ„æ–™ https://www.extjs.org.cn/ 1 J2meå¼€å‘ç½‘ https://www.j2medev.com/bbs/index.asp2 J2meç¤¾åŒº https://www.j2meforums.com/forum/3 csdn https://www.csdn.net/4 VcçŸ¥è¯†åº“ https://www.vckbase.com/5 codeproject https://www.codeproject.com/6 ç¨‹åºå‘˜è”åˆå¼€å‘ç½‘ https://www.pudn.com/7 çœ‹é›ªå­¦é™¢ https://www.pediy.com/8 è“è‰²ç†æƒ³ https://www.blueidea.com/9 åšå®¢å›­ https://www.cnblogs.com/10 Nuixåº”ç”¨å¼€å‘ç¤¾åŒº https://chinaunix.net/11 javaeye https://www.javaeye.com/12 Itäººç½‘ https://www.iteer.net/13 ä¸­å›½äººæ‰çƒ­çº¿ https://www.cjol.com/14 å¤©æ¶¯è®ºå› https://www.tianya.cn/15 é£äº‘çš„blog https://blog.codingnow.com/16 æ–°æµªç§‘æŠ€é¢‘é“ https://tech.sina.com.cn/17 phpchina https://www.phpchina.com/html/index.html18 æ¸¸æˆå¼€å‘èµ„æºç½‘ https://www.gameres.com/19 ç½‘ç»œæ¸¸æˆç¬¬ä¸€é—¨æˆ· https://www.17173.com/20 æˆ‘çˆ±ç ”å‘ç½‘ https://www.52rd.com/21 Msdnä¸­æ–‡ç½‘ https://www.microsoft.com/china/MSDN/DeveloperCenter/default.mspx22 å¤§å¯Œç¿ç¼–ç¨‹ç½‘ç«™ https://www.delphibbs.com/23 Delphiç›’å­ https://www.2ccc.com/24 C++buillderç ”ç©¶ https://www.ccrun.com/25 Itè®ºå› https://bbs.itren.cn/26 Javaå¼€æºå¤§å…¨ https://www.open-open.com/27 codegurn https://www.codeguru.com/28 ç¼–ç¨‹çˆ±å¥½è€… https://www.programfan.com/29 Javaä¸­æ–‡ç«™ https://www.java-cn.com/30 reactos https://www.reactos.org/zh/index.html31 å¼€æºåŠ›é‡ https://www.opensourceforce.org/32 ç”µè„‘ç¼–ç¨‹æŠ€å·§ä¸ç»´æŠ¤ https://www.comprg.com.cn/33 ä¸­å›½ç”µå­ç½‘ https://21ic.com/34 ç¼–ç¨‹ä¸­å›½ https://www.bc-cn.net/35 åµŒå…¥å¼å¼€å‘è®ºå› https://www.cevx.com/bbs/36 ç”µè„‘çˆ±å¥½è€… https://www.cfan.com.cn/37 sybaseä¸­å›½ https://www.sybase.com.cn/gvswse/site/china/index.jsp38 pbdr https://www.pbdr.com/39 apache https://www.apache.org/40 rootkit https://www.rootkit.com/index.php41 é©±åŠ¨å¼€å‘ç½‘ https://www.driverdevelop.com/first.html42 å®‰å…¨ç„¦ç‚¹ https://www.xfocus.net/43 cnbetaç½‘å‹åª’ä½“ä¸è¨€è®ºå¹³å° https://www.cnbeta.com/44 fyterçš„åšå®¢ https://www.fyter.cn/Default.aspx45 asp.netæ§ä»¶ https://www.devexpress.com/46 operamask https://www.operamasks.org/47 ä¸­å›½æºç ç½‘ https://www.yuanma.org/48 sawinè½¯ä»¶ç ”å‘ä¹‹çª— https://www.sawin.cn/49 ç”µè„‘æ•™è‚²ä¸WEBæ•™è‚²åœ¨çº¿ https://210.40.7.188/50 ä¸­å›½dosè”ç›Ÿ https://www.cn-dos.net/51 ä¸­å›½biosè”ç›Ÿ https://www.biosren.com/index.php52 bioscentral https://bioscentral.com/53 edaä¸“ä¸šè®ºå› https://www.edacn.net/bbs/54 è¯ºåŸºäºšè®ºå› https://forum.nokia.com.cn/sch/index.html55 è®¡ç®—æœºç§‘å­¦è®ºå› https://www.ieee.org.cn/index.asp56 ibm developerworks ä¸­å›½ https://www.ibm.com/developerworks/cn/57 w3 https://www.w3.org/58 ç½‘é¡µè®¾è®¡å¸ˆ https://www.w3cn.org/59 ä¸­å›½ä¸‡ç»´ç½‘è”ç›Ÿ https://www.w3china.org/index.htm60 è±†ç“£ https://www.douban.com/61 å“è¶Šäºšé©¬é€Š https://www.amazon.cn/62 è½¯ä»¶å•†åŠ¡ç½‘ https://www.bizsofts.com/63 sun https://www.sun.com/64 google code https://code.google.com/65 google å¼€å‘äººå‘˜ä¸»é¡µ https://code.google.com/intl/zh-CN/66 the official microsoft asp.net https://www.asp.net/67 microsoft IIS https://www.iis.net/default.aspx?tabid=168 è£è€€ https://www.royaloo.com/index.html69 ä¾¯æ·ç½‘ç«™ https://jjhou.csdn.net/70 javaå¤§æœ¬è¥ https://www.javadby.com/71 æ¯”ç‰¹ç½‘ https://www.chinabyte.com/72 51cto https://www.51cto.com/73 infoq https://www.infoq.com/74 åšå®¢å ‚ https://blog.joycode.com/75 åµŒå…¥å¼å¼€å‘ç½‘ https://www.embed.com.cn/76 åµŒå…¥å¼å¼€çº¿ https://www.mcuol.com/77 ä¸­åµŒç½‘ https://www.chinaeda.cn/78 é…·å‹¤ç½‘ https://www.kuqin.com/79 çº¢è”linuxé—¨æˆ· https://www.linuxdiyf.com/80 itpubæŠ€æœ¯é—¨æˆ· https://www.itpub.net/81 ç¨‹å¼è®¾è®¡ä¿±ä¹éƒ¨ https://www.programmer-club.com/index.asp82 umlè½¯ä»¶å·¥ç¨‹ç»„ç»‡ https://www.uml.org.cn/index.asp83 delphiå›­åœ° https://www.delphifans.com/84 theserverside https://www.theserverside.com/85 ä¸­å›½donetä¿±ä¹éƒ¨ https://www.chinaaspx.com/86 ç¼–ç¨‹ç‹ https://www.kingofcoders.com/87 it168 https://www.it168.com/88 open source software in c# https://csharp-source.net/89 ä¸­å›½ITå®éªŒå®¤ https://www.chinaitlab.com/90 è½ä¼è€…ç«™é•¿è®ºå› https://www.im286.com/91 ä¸­å›½ç«™é•¿ç«™ https://www.chinaz.com/92 asp.netæºç ä¸‹è½½ä¸“ä¸šç«™ https://www.51aspx.com/93 itèŒä¸šå·¥ç¨‹å¸ˆ https://www.51myit.com/94 å¤ªå¹³æ´‹ç”µè„‘ç½‘ https://www.pconline.com.cn/95 ä¹˜é£åŸåˆ›ç¨‹åº https://study.qqcf.com/96 ç½‘æ˜“å­¦é™¢ https://tech.163.com/school/97 ç¨‹åºè®¾è®¡ï¼ç¨‹åºå¼€å‘ç±»æ•™ç¨‹ https://www.pcvz.com/Program/Programs/Index.html98 ç®—æ³•æºç å§ https://www.sfcode.cn/99 codegurn https://www.codeguru.cn/100 å¾—ç›Šç½‘ https://www.netyi.net/101 ä¸­å›½eclipseç¤¾åŒº https://www.eclipseworld.org/bbs/102 é¡¹ç›®ç®¡ç†è€…è”ç›Ÿ https://www.mypm.net/103 æ –æ¯è°· https://www.21manager.com/","link":"/notes/Website/"},{"title":"æ¬å®¶","text":"ä¸‰å¹´ï¼Œå†è§ã€‚","link":"/notes/banjia/"},{"title":"ç‹è€…è£è€€","text":"ğŸ¤”","link":"/notes/AppleSupport/"},{"title":"iPhone","text":"æ•…äº‹çš„å¼€å§‹","link":"/notes/iPhone/"},{"title":"æœˆè–ªå¤šå°‘èƒ½æ’‘èµ·ä¸€ä¸ªå®¶ï¼Ÿ","text":"","link":"/notes/beijing/"},{"title":"å‘Šåˆ«","text":"å‘Šåˆ«å·¥ä½œå¤šå¹´çš„å…¬å¸ï¼Œæˆ‘è¦å»æ–°çš„åœ°æ–¹äº†ã€‚","link":"/notes/juanshi/"},{"title":"2018åˆ›ä¸šè®°ï¼šå¦‚ä½•é€‰æ‹©åˆä¼™äººï¼Ÿ","text":"åˆ›ä¸šè·¯ä¸Šå±æœºå››ä¼ï¼Œå¦‚ä½•ç ´å±€ï¼Ÿ å¾ˆå¤šæœ‹å‹åœ¨2018å¹´åšå‡ºäº†æ”¹å˜ï¼Œè¿ˆå‡ºäº†æ–°çš„ä¸€æ­¥ã€‚æ¯”å¦‚èº«è¾¹å‡ ä½æœ‹å‹æ­£æ‘©æ‹³æ“¦æŒå‡†å¤‡åˆ›ä¸šã€‚ç„¶è€Œï¼Œçœ‹åˆ«äººåˆ›ä¸šå’Œè‡ªå·±åˆ›ä¸šå®Œå…¨æ˜¯ä¸¤å›äº‹å„¿ï¼Œè§å¾—å†å¤šï¼Œè‡ªå·±è¶Ÿæ°´æ—¶ä¹Ÿéš¾å…æœ‰æ‰€é¡¾è™‘ã€‚ åœ¨è·Ÿä»–ä»¬èŠè¿‡ä¹‹åï¼Œæˆ‘ä»¬å‘ç°äº†ä»–ä»¬æ™®éé¢ä¸´çš„ä¸€ä¸ªè¯¾é¢˜ï¼šå¦‚ä½•é€‰æ‹©åˆä¼™äºº?è¿™æ˜¯èº«ç»ç™¾æˆ˜çš„è¿ç»­åˆ›ä¸šè€…ä¹Ÿå¾ˆéš¾é©¾è½»å°±ç†Ÿçš„ä¸€ä¸ªè¯¾é¢˜ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥ä¸€èµ·èŠèŠã€‚æœ¬æ–‡å°†ä»èƒ½ä¸èƒ½å’Œæœ‹å‹ä¸€èµ·åˆ›ä¸šã€åˆä¼™äººåº”è¯¥ä¸æˆ‘äº’è¡¥è¿˜æ˜¯ç›¸ä¼¼ã€å¦‚ä½•åˆ¤æ–­åŒæ–¹æ˜¯å¦å¿—åŒé“åˆã€å¦‚ä½•åº”å¯¹å¸¸è§çš„åˆ†æ­§å‡ ä¸ªéƒ¨åˆ†å±•å¼€æ¥è¯´ã€‚ é£ç‰©é•¿å®œæ”¾çœ¼é‡ï¼ŒæŠ±æŒå¼€é˜”çš„èƒ¸è¥Ÿã€æ•é”çš„åˆ¤æ–­ã€åšéŸ§çš„æ„å¿—ï¼Œç›¸ä¿¡å¤§å®¶èƒ½å¤Ÿä¸å¿—åŒé“åˆçš„ä¼™ä¼´ä¸€èµ·ï¼Œè¶Šè¿‡å±±ä¸˜ï¼Œæºæ‰‹ç«™ä¸Šæ¢¦æƒ³ä¹‹å·…ã€‚ èƒ½ä¸èƒ½å’Œæœ‹å‹ä¸€èµ·åˆ›ä¸šï¼Ÿåœ¨åˆ›ä¸šåˆæœŸï¼Œåˆ›ä¸šè€…é€‰æ‹©åˆä¼™äººå¾€å¾€ä¼šä»èº«è¾¹çš„æœ‹å‹â€œä¸‹æ‰‹â€ã€‚ ä¸€èµ·åˆ›ä¸šå¯ä»¥è¯´æ˜¯è®¤æ¸…ä¸€ä¸ªæœ‹å‹çš„æœ€å¥½æ–¹å¼ã€‚ä¸€ç¯‡åä¸ºã€Šå‹è°Šçš„ä»£ä»·ã€‹çš„è®ºæ–‡ï¼Œè€ƒå¯Ÿäº†3510ä¸ªé£é™©æŠ•èµ„è€…ï¼Œä»¥åŠä»–ä»¬åœ¨1975-2003å¹´é—´11895ä¸ªæŠ•èµ„é¡¹ç›®ã€‚ è®ºæ–‡å†™é“ï¼Œæœ‰çš„äººé€‰æ‹©ä¸è‡ªå·±èƒ½åŠ›ç›¸å½“çš„äººåˆä½œï¼Œæ¯”å¦‚åŒæ˜¯åæ ¡æ¯•ä¸šï¼›ä½†æ›´å¤šçš„äººé€‰æ‹©ä¸è‡ªå·±çš„ç†Ÿäººåˆä½œï¼Œæ¯”å¦‚æ›¾ç»çš„åŒå­¦æˆ–åŒäº‹ã€‚ç»“æœè¡¨æ˜ï¼ŒæŒ‰èƒ½åŠ›æ­æ¡£å¯ä»¥å¢åŠ æŠ•èµ„çš„æˆåŠŸæ¦‚ç‡ï¼Œè€Œæ‰¾ç†Ÿäººæ­æ¡£ï¼Œåˆ™ä¼šæ˜æ˜¾é™ä½æˆåŠŸçš„å¯èƒ½æ€§ã€‚ æ‰€æœ‰äººéƒ½å–œæ¬¢å¼ºè”ç³»ï¼Œä½†å…³ç³»æ˜¯å…³ç³»ï¼Œå·¥ä½œå½’å·¥ä½œã€‚ç°åœ¨ç¤¾ä¼šå­¦å·²ç»æœ‰äº†è¶³å¤Ÿå¤šçš„è¯æ®è¯´æ˜ï¼šå¯¹å·¥ä½œæ¥è¯´ï¼ŒåŒä¹¡ä¼šå’Œæ ¡å‹å½•å¹¶ä¸æ˜¯æ‰©å±•äººè„‰çš„å¥½åœ°æ–¹ã€‚ã€Šä¸­å›½åˆä¼™äººã€‹è¿™éƒ¨ç”µå½±ä¸Šæ˜ åï¼Œâ€œåƒä¸‡åˆ«è·Ÿå¥½æœ‹å‹åˆä¼™å¼€å…¬å¸â€ä¹Ÿæˆäº†çƒ­è®®è¯é¢˜ã€‚ç”µå½±çš„æœ€åï¼Œä¸‰ä½åˆä¼™äººåˆ†é“æ‰¬é•³ï¼Œè€Œå‰§æœ¬çš„åŸå‹â€”â€”æ–°ä¸œæ–¹çš„ä¸‰ä½åˆ›å§‹äººä¹Ÿä»¥â€œåˆ†å®¶â€æ”¶åœºã€‚ å½“ç„¶ï¼Œæœ‹å‹åˆä¼™åˆ›ä¸šæˆåŠŸçš„æ¡ˆä¾‹ä¹Ÿä¸åœ¨å°‘æ•°ï¼Œå†µä¸”ï¼Œé•¿æœŸçš„ä¼™ä¼´å…³ç³»æ›´æœ‰åŠ©äºå…±åŒé¢å¯¹åˆ›ä¸šè¿‡ç¨‹ä¸­çš„è‰°éš¾é™©é˜»ï¼Œå›¢é˜Ÿä¹Ÿæ›´å®¹æ˜“åœ¨åˆ›ä¸šåˆæœŸè·å¾—æŠ•èµ„äººçš„é’çã€‚å¦‚æœåœ¨å¯»æ‰¾åˆä¼™äººçš„è¿‡ç¨‹ä¸­ï¼Œä½ è§‰å¾—è¿˜æ˜¯æŸä¸ªæœ‹å‹æ›´é€‚åˆï¼Œé‚£ä¹ˆä¸€å®šè¦åœ¨åˆä½œä¹‹å‰çº¦æ³•ä¸‰ç« ï¼Œè€ƒè™‘åˆ°æœ€åçš„æƒ…å†µï¼Œæå‰ç”¨ä¹¦é¢åˆåŒçš„æ–¹å¼ç¡®å®šåŒæ–¹çš„è´£æƒåˆ©ï¼Œç”¨è§„ç« åˆ¶åº¦æ¥çº¦æŸæŒ‡å¯¼åŒæ–¹çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯é äººæƒ…å…³ç³»ã€‚ ä¸­é—´ä¸€æ—¦è§‰å¾—å‘ç”Ÿäº†é—®é¢˜ï¼Œä½ å°±å¿…é¡»è€ƒè™‘ä¸€ä¸‹èƒ½å¦ç»§ç»­åˆä½œä¸‹å»ã€‚å…¶å®ï¼Œå¾ˆå¤šåˆä½œè€…èµ°ä¸åˆ°æœ€åå°±æ˜¯å› ä¸ºä¸­é—´çš„å°é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œä¸€ç‚¹ä¸€ç‚¹ç§¯ç´¯æœ€åçˆ†å‘å‡ºæ¥ã€‚ å› æ­¤ï¼Œèƒ½å¦å’Œæœ‹å‹ä¸€èµ·åˆ›ä¸šè¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦è¾©è¯æ€è€ƒã€‚å¦‚æœæœ‹å‹é—´ç›¸äº’äº†è§£å¯¹æ–¹çš„ä¸ªæ€§å’Œèƒ½åŠ›ï¼Œå·¥ä½œä¸­èƒ½åšåˆ°åˆ†å·¥æ˜ç¡®ï¼Œç”¨è§„ç« åˆ¶åº¦æ¥è§„èŒƒåŒæ–¹çš„è¡Œä¸ºï¼ŒåŠæ—¶è§£å†³å°çŸ›ç›¾ï¼Œç›¸äº’ç…§é¡¾ï¼Œä¸€èµ·åˆ†æ‹…ï¼Œå…±åŒå¥‹æ–—ï¼Œé‚£ä¹ˆåˆ›ä¸šæˆåŠŸå°±ä¼šæˆä¸ºå¤§æ¦‚ç‡äº‹ä»¶ã€‚ åˆä¼™äººåº”è¯¥ä¸æˆ‘äº’è¡¥è¿˜æ˜¯ç›¸ä¼¼ï¼Ÿä¸€ä¸ªè¾ƒä¸ºåˆç†çš„ç­”æ¡ˆæ˜¯ï¼šç†å¿µå’Œä»·å€¼è§‚ä¸Šè¦ç›¸ä¼¼ï¼Œèƒ½åŠ›å’Œç»éªŒä¸Šè¦äº’è¡¥ã€‚ ç†å¿µå’Œä»·å€¼è§‚ä¸Šçš„ç›¸è¿‘ï¼Œå¯ä»¥ä¿è¯ä½ ä»¬åœ¨é‡å¤§åŸåˆ™é—®é¢˜ä¸Šçš„åˆ¤æ–­æ˜¯æ¯”è¾ƒä¸€è‡´çš„ï¼Œä¸è‡³äºå‡ºç°æ ¹æœ¬æ€§çš„å†²çªã€‚è¿™äº›é‡å¤§çš„åŸåˆ™é—®é¢˜åŒ…æ‹¬ä¼ä¸šçš„æˆ˜ç•¥æ–¹å‘ã€åˆ©ç›Šåˆ†é…æœºåˆ¶ã€åšäº‹çš„åŸºæœ¬åº•çº¿ç­‰ç­‰ã€‚ åœ¨è¿™äº›é—®é¢˜ä¸Šå‡ºç°ä¸åŒæ„è§ï¼Œé€šå¸¸å¾ˆéš¾å–å¾—å…±è¯†ã€‚å› ä¸ºä¸ªæ€§å’Œä»·å€¼è§‚çš„å½¢æˆï¼Œé€šå¸¸éƒ½ä¸æ˜¯ä¸€æœä¸€å¤•çš„äº‹æƒ…ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œæ±Ÿå±±æ˜“æ”¹ï¼Œæœ¬æ€§éš¾ç§»â€ã€‚å¦‚æœåœ¨åˆ›ä¸šçš„è‰°éš¾ç¯å¢ƒä¸‹ï¼ŒåŒæ–¹è¿˜è¦æ¥ç£¨åˆè¿™ä¸ªå±‚é¢çš„ä¸œè¥¿ï¼Œå°±ä¼šéå¸¸ç—›è‹¦ã€‚ èƒ½åŠ›å’Œç»éªŒä¸Šçš„äº’è¡¥ç›¸å¯¹æ›´å¥½ç†è§£ã€‚ä½ æ“…é•¿äº§å“ï¼Œä»–ä¸“äºç ”å‘ï¼›ä½ æœ‰ä¸°å¯Œçš„è¿è¥ç»éªŒï¼Œä»–åˆ™å¯¹äºå•†ä¸šæ¨¡å¼çš„å»ºç«‹æ›´æœ‰å¿ƒå¾—ï¼›ä½ å¯¹æ•°å­—ä¸æ•æ„Ÿï¼Œä»–åˆ™æ˜¯æŠ•èµ„å’Œè´¢åŠ¡é¢†åŸŸçš„èµ„æ·±äººå£«ã€‚è¿™äº›éƒ½æ˜¯å¾ˆå¥½çš„äº’è¡¥ã€‚ äº’è¡¥å¯ä»¥è®©ä½ ä»¬åœ¨å…·ä½“äº‹æƒ…çš„æ¨è¿›ä¸­äº‹åŠåŠŸå€ï¼Œå¹¶å»ºç«‹èµ·å¯¹äºå¯¹æ–¹åœ¨ä¸“ä¸šé¢†åŸŸçš„ä¾é å’Œä¿¡ä»»ã€‚äººä¸å¯èƒ½æ˜¯å…¨èƒ½çš„ï¼Œå¦‚æœä¸€åˆ‡æœªçŸ¥çš„é¢†åŸŸéƒ½éœ€è¦ä½ è‡ªå·±æ¥æ‘¸ç´¢ï¼Œè´¹æ—¶è´¹åŠ›ä¸è¯´ï¼Œé£é™©è¿˜å¾ˆå¤§ã€‚ å¯¹äºç›¸ä¼¼è¿˜æ˜¯äº’è¡¥è¿™ä¸ªé—®é¢˜çš„è§£è¯»ï¼Œè¿˜å¯ä»¥åå‘è¿›è¡Œã€‚æ¯”å¦‚ä½ ä»¬æ˜¯èƒ½åŠ›ç»éªŒä¸Šçš„ç›¸è¿‘ï¼Œè€Œåœ¨ç†å¿µä¸Šäº’è¡¥ï¼Œä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹æ˜¯ä¸ªä»€ä¹ˆå±€é¢ï¼Œä¸€å®šæ˜¯ä½ ä¸ä¼šçš„ä»–ä¹Ÿä¸ä¼šï¼Œä½ è§‰å¾—å¯¹çš„ä»–è§‰å¾—ä¸å¯¹ï¼Œé‚£å°±çœŸçš„å¾ˆéš¾åˆä½œä¸‹å»äº†ã€‚ å¦‚ä½•åˆ¤æ–­åŒæ–¹æ˜¯å¦å¿—åŒé“åˆï¼Ÿå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä¸åŒçš„äººå¯èƒ½ä¼šç»™å‡ºéå¸¸ä¸åŒçš„ç­”æ¡ˆã€‚é›·å†›å°±æ›¾è¯´è¿‡ï¼Œä»–æ‰¾äººæœ‰ä¸¤ä¸ªè¦ç´ ï¼šâ€œä¸€è¦æœ€ä¸“ä¸šï¼Œå°ç±³çš„åˆä¼™äººéƒ½æ˜¯å„ç®¡ä¸€å—ï¼Œè¿™æ ·èƒ½ä¿è¯æ•´ä¸ªå†³ç­–éå¸¸å¿«ï¼ŒæŠŠä¸šåŠ¡äº¤ç»™ä»–ï¼Œè¦èƒ½å®æ‰“å®åšå‡ºæˆç»©æ¥ï¼›äºŒè¦æœ€åˆé€‚ï¼Œä¸»è¦æ˜¯æŒ‡è¦æœ‰åˆ›ä¸šå¿ƒæ€ï¼Œå¯¹æ‰€åšçš„äº‹è¦æåº¦å–œæ¬¢ï¼Œæœ‰å…±åŒçš„æ„¿æ™¯ï¼Œè¿™æ ·å°±ä¼šæœ‰å¾ˆå¼ºçš„é©±åŠ¨åŠ›ã€‚â€ é›·å†›è¯´ï¼Œä»–åœ¨ä¸‰ä¸ªæœˆçš„æ—¶é—´é‡Œè§äº†è¶…è¿‡100ä½åšç¡¬ä»¶çš„äººé€‰ï¼Œç»ˆäºæ‰¾åˆ°äº†è´Ÿè´£ç¡¬ä»¶çš„è”åˆåˆ›å§‹äººå‘¨å…‰å¹³åšå£«ï¼Œä¸¤äººç¬¬ä¸€æ¬¡è§é¢å°±è°ˆäº†12ä¸ªå°æ—¶ã€‚ è€Œå‘¨é¸¿ç¥è¡¨ç¤ºï¼Œä»–ä¼šé€‰æ‹©å…·å¤‡è¿™å››ç§ç´ è´¨çš„åˆä¼™äººï¼šé¦–å…ˆåº”è¯¥æœ‰åˆ›ä¸šç²¾ç¥ï¼›å…¶æ¬¡è¦æœ‰å¾ˆå¼ºçš„å­¦ä¹ èƒ½åŠ›ï¼›ç¬¬ä¸‰ï¼Œè¦æœ‰å¾ˆå¥½çš„å¼€æ”¾åˆä½œå¿ƒæ€ï¼›æ­¤å¤–ï¼Œè¿˜è¦èƒ½è‡ªæˆ‘æ¿€åŠ±ï¼Œè‡ªæˆ‘é©±åŠ¨ï¼ŒåŒæ ·ä¸€ä»¶äº‹ï¼Œç”¨æ‰“å·¥çš„å¿ƒæ€å’Œç”¨åˆ›ä¸šçš„å¿ƒæ€åšï¼Œæ•ˆæœå®Œå…¨ä¸ä¸€æ ·ã€‚ è™½ç„¶ç­”æ¡ˆå› äººè€Œå¼‚ï¼Œä½†ä»ç„¶å¯ä»¥æ€»ç»“å‡ºä¸€äº›åˆ¤æ–­æ ‡å‡†ï¼Œä»¥ä¸‹å‡ æ¡å¯ä¸ºä½ é€‰æ‹©åˆä¼™äººæ—¶æä¾›å‚è€ƒã€‚ 1ã€å…³ç³»æœ‰ä¸€å®šçš„æ·±åº¦å’Œå¹¿åº¦ï¼Œå½¼æ­¤ä¿¡ä»»å…±äº‹ä¸”ç»´æŒæœ‹å‹å…³ç³»å¤šå¹´çš„åˆ›ä¸šå›¢é˜Ÿå…³ç³»æ›´æ·±ï¼Œæœ‰å¯èƒ½ç»å—ä½ç´§å¼ å’Œå†²çªçš„è€ƒéªŒã€‚åˆä¼™äººæœªå¿…éœ€è¦æˆä¸ºæœ€è¦å¥½çš„æœ‹å‹ï¼Œä½†å¦‚æœä»–ä»¬ç›¸äº’å–œæ¬¢çš„è¯äº‹æƒ…å¯èƒ½ä¼šæ›´å¥½åŠäº›ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œåˆ›å§‹äººä¹‹é—´åº”è¯¥å°Šé‡å½¼æ­¤ä»¥åŠä»–ä»¬ç»™å›¢é˜Ÿå¸¦æ¥çš„ä¸åŒèƒ½åŠ›ã€‚ä¸ä¿¡ä»»åˆä¼™äººçš„èƒ½åŠ›ä¼šå¯¼è‡´æ‰‹ä¼¸è¿‡å¤´ï¼Œè¿˜å¯èƒ½ä¼šå¯¼è‡´æ§åˆ¶æƒä¹‹äº‰ã€‚åœ¨è¿™ç§çªé‡Œæ–—çš„æƒ…å†µä¸‹å¤§éƒ¨åˆ†çš„åˆä½œå…³ç³»éƒ½æ— æ³•ç»´ç³»ã€‚ 2ã€äº†è§£å½¼æ­¤çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿ï¼Œåˆ†å·¥æ˜ç¡®å°Šé‡å½¼æ­¤çš„æŠ€èƒ½å’Œä¼˜åŠ¿å¹¶ä¸æ„å‘³ç€åˆ›å§‹äººå°±ä¸éœ€è¦å®¡è§†åˆä¼™äººçš„å¼±ç‚¹äº†ã€‚å‹è°Šæ›´ä¹…è‡ªç„¶ä¹Ÿä¼šæ›´äº†è§£æŸäººçš„ç‰¹é•¿å’ŒæŠ€èƒ½ã€‚è¿™äº›ä¸åŒçš„æŠ€èƒ½æœ‰åŠ©äºåˆ›å§‹äººå›¢é˜Ÿè‡ªç„¶åœ°åˆ†æ¸…è´£ä»»ã€è§’è‰²ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è¿˜å¯ä»¥åˆ†æ¸…å¤´è¡”ã€‚æ ¹æ®æ¯ä¸€ä½åˆä¼™äººçš„æŠ€èƒ½æ˜ç¡®åˆ’åˆ†èŒè´£ï¼Œå¯¹åˆ›ä¸šçš„å¸®åŠ©å¾ˆå¤§ã€‚åšäº‹çš„æ—¶å€™æ¯ä¸ªäººè¦æœ‰ç‹¬ç«‹çš„è§’è‰²ï¼Œä½†åŒæ—¶æ°¸è¿œè¦å¯¹å…¶ä»–åˆä¼™äººçš„åé¦ˆæŒå¼€æ”¾æ€åº¦ã€‚ 3ã€ç¡®ä¿æ‰€æœ‰åˆä¼™äººå¯¹æˆåŠŸå’Œå¤±è´¥çš„å®šä¹‰ä¸€è‡´éŸ§æ€§æœ€å¼ºçš„åˆ›å§‹äººä¸ä¼šä»è´¢åŠ¡çš„è§’åº¦å»è¡¡é‡è‡ªå·±çš„åˆåˆ›ä¼ä¸šæ˜¯å¦æˆåŠŸï¼Œç›¸åï¼Œä»–ä»¬ä¼šä»ä½¿å‘½çš„è§’åº¦å»è¡¡é‡ã€‚ä»–ä»¬çš„åˆåˆ›ä¼ä¸šåªæ˜¯è¿½æ±‚å®ç°ä½¿å‘½çš„æ‰‹æ®µã€‚ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„åˆ›å§‹äººéƒ½è¿™ä¹ˆçœ‹ï¼Œç”šè‡³ä¸€å¼€å§‹å…³æ³¨ä½¿å‘½çš„åˆ›å§‹äººæœ‰æ—¶å€™åˆ°åé¢ä¹Ÿä¼šè½¬å‘è€ƒè™‘è´¢åŠ¡æ–¹é¢çš„äº‹æƒ…ã€‚ æœ‰çš„åˆ›å§‹äººå¯èƒ½å¿—å­˜é«˜è¿œï¼Œä¸ºäº†å°½å¿«åšå¤§æ„¿æ„çƒ§å¾ˆå¤šé’±ï¼Œè€Œæœ‰çš„äººå¸Œæœ›é€æ­¥æ‰“ç£¨äº§å“ï¼Œé™åˆ¶äººæ•°è§„æ¨¡å’Œä¿ç•™ç°é‡‘å°ºåº¦ã€‚ä¸ä»…å¯¹æˆåŠŸçš„è®¤çŸ¥ä¼šå½±å“è¿è¥å†³ç­–ï¼Œå¯¹å¤±è´¥çš„è®¤çŸ¥åŒæ ·ä¼šèµ·ä½œç”¨ã€‚ åœ¨åˆ›ä¸šè¿‡ç¨‹ä¸­ï¼Œå…¶ä¸­ä¸€ä½åˆä¼™äººæ€¥ç€é€€å‡ºçš„æ•…äº‹å±¡è§ä¸é²œï¼Œå› æ­¤è¿™ä¸ªæ•™è®­å€¼å¾—ä¸€æå†æã€‚å¯¹äºæ‹¥æœ‰æˆåŠŸä¼ä¸šçš„åˆ›å§‹äººæ¥è¯´ï¼Œé¿å…åœ¨è¿™ä¸ªé—®é¢˜ä¸Šå‘ç”Ÿå†²çªçš„å…³é”®æ˜¯å®šæœŸè®¨è®ºè¿™ä»¶äº‹ã€‚åº”è¯¥åœ¨å…¬å¸æ—©æœŸå°±è®¾å®šå¥½ç›®æ ‡ï¼Œå¹¶ä¸”å¯¹è¿™ä¸ªè¯é¢˜è¿›è¡Œå®šæœŸå¤è®®ã€‚ 4ã€æ‰€æœ‰åˆä¼™äººå‡åº”å¯¹è‚¡æƒåˆ†é…æ»¡æ„å“ˆä½›æ•™æˆWassermanå‘ç°ï¼Œ73%çš„è”åˆåˆ›ä¸šå›¢é˜Ÿä¸€èˆ¬åœ¨å…¬å¸æˆç«‹30å¤©å†…å°±ç¡®å®šäº†å¦‚ä½•è¿›è¡Œè‚¡æƒåˆ†é…ã€‚è‚¡æƒåˆ†é…å½“ç„¶æ˜¯ä»»ä½•å…±åŒåˆ›ä¸šçš„äººéƒ½è¦é¦–å…ˆè€ƒè™‘çš„äº‹æƒ…ä¹‹ä¸€ï¼Œä½†äº‹å®ä¸Šåœ¨é‚£ä¸ªæ—¶å€™ï¼Œæ²¡äººçŸ¥é“è°å¹²æ´»æœ€å–åŠ›ï¼Œè°å¯¹åˆåˆ›ä¼ä¸šçš„è´¡çŒ®æœ€æœ‰ä»·å€¼ã€‚è¿‡æ—©ç¡®å®šè‚¡æƒåˆ†é…ä¼šå¯¼è‡´åé¢å‘ç”Ÿé—®é¢˜ã€‚å¦‚æœå¯ä»¥çš„è¯ï¼Œæœ€å¥½ç­‰åˆ°ä½ æœ‰æœºä¼šäº†è§£å¤§å®¶ä¸€èµ·å·¥ä½œä¼šæ˜¯ä»€ä¹ˆä¸ªæƒ…å†µåå†æ­£å¼åˆ†è›‹ç³•ã€‚è¯è™½å¦‚æ­¤ï¼Œè¿™ä»¶äº‹æƒ…è¿˜æ˜¯ä¸è¦æ‹–å¤ªä¹…ï¼Œå›´ç»•è‚¡æƒçš„åˆ†æ­§æœ€å¥½åœ¨å…¬å¸æ—©æœŸå°±è§£å†³æ‰ã€‚ 5ã€æ°¸è¿œè¦ç›¸äº’æ”¯æŒè¿™è¯å¬ä¸Šå»ä¼¼ä¹å¤ªç©ºæ³›ï¼Œä½†æ˜¯åˆä¼™äººçš„å…³ç³»ä¹Ÿå¯èƒ½ä¼šåå¤æ— å¸¸ï¼Œå°¤å…¶æ˜¯åœ¨å—åˆ°ä¸åŒè§‚ç‚¹ã€è‘£äº‹ä¼šæˆå‘˜ç­‰çš„å½±å“ä¸‹ã€‚åˆä¼™äººä¹‹é—´çš„ç›¸äº’æ”¯æŒå¯å¸¦æ¥ä¿¡å¿ƒï¼Œç¡®ä¿åˆä¼™äººå’Œå‘˜å·¥éƒ½æœ‰å…±åŒçš„ä½¿å‘½æ„Ÿã€‚ å›¢é˜Ÿåº”è¯¥æ—©ç‚¹ç†è§£ä¸€ä»¶äº‹ï¼Œä»»ä½•æƒ…å†µä¸‹åˆä¼™äººä¹‹é—´éƒ½åº”è¯¥èƒŒé èƒŒç›¸äº’æ”¯æŒï¼Œæ‰€ä»¥åˆä¼™äººè¦å°½é‡é¿å…å½“ç€å‘˜å·¥ã€è‘£äº‹ä¼šç­‰äººçš„é¢äº’ç›¸æ‹†å°ï¼Œè¿™æ ·èƒ½å¤Ÿè®©å…¬å¸å…¶ä»–äººæ„Ÿè§‰åˆ°ä»–ä»¬å‹æƒ…ä¹‹ç‰¢å›ºï¼Œè®©æ¯ä¸€ä½åˆä¼™äººéƒ½èƒ½ä¿æŒé•‡å®šï¼Œå› ä¸ºä»–ä»¬çŸ¥é“å¯¹æ–¹ä¸€å®šä¼šæ”¯æŒè‡ªå·±çš„ã€‚ å¦‚ä½•åº”å¯¹å¸¸è§çš„åˆ†æ­§ï¼Ÿ1ã€å…¬å¸èµ°å‘çš„æ­§è§åœ¨0åˆ°1çš„æ¢ç´¢æœŸï¼Œå…¬å¸çš„èµ°å‘å¾€å¾€æ˜¯ç”±åˆä¼™äººä¸€èµ·å†³å®šçš„ã€‚ä½†è¿›å…¥1åˆ°100çš„æ‰©å¼ æœŸï¼Œä¸€ä¸ªå¹´è½»ä¼ä¸šé€šå¸¸ä¼šå¼€å§‹æœ‰è‘£äº‹ä¼šä»¥åŠé‡è¦çš„ä¾›åº”ã€é€šè·¯ä¼™ä¼´ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œåˆä¼™äººå¯¹äºå…¬å¸æœªæ¥èµ°å‘çš„çœ‹æ³•ï¼Œå¸¸å¸¸ä¼šè¶Šæ¥è¶Šå˜å¾—åˆ†æ­§ã€‚ é˜²èŒƒè¿™ä¸ªé™·é˜±è¦ä»æ ¹æºå¼€å§‹ï¼šæ¯å½“CEOæœ‰äº†æ–°çš„èµ„è®¯ã€æˆé•¿ã€å­¦ä¹ ã€é¢†æ‚Ÿï¼Œåº”è¯¥ç§¯æåœ°ä¸åˆä¼™äººåˆ†äº«ï¼ŒååŠ©ä»–ä»¬è·å¾—ä¸ä½ ç±»ä¼¼çš„æˆé•¿ã€‚åŒæ—¶ï¼Œä½ åº”è¯¥æŠŠå°èŒƒå›´çš„å†³ç­–æˆæƒå‡ºå»ï¼Œè®©ä»–ä»¬ä¹Ÿèƒ½ç»§ç»­ä¸»å¯¼å…¬å¸æŸä¸€éƒ¨åˆ†çš„èµ°å‘ã€‚æœ€åï¼Œä½ åº”è¯¥ç§¯æç®¡ç†å¤§å®¶å¯¹å†³ç­–çš„æœŸæœ›å€¼ï¼Œæ–°åˆ›å…¬å¸å¿…é¡»åœ¨â€œå¿«â€ä¸â€œå¥½â€ä¹‹é—´åšå‡ºå¹³è¡¡ï¼Œå› æ­¤å†³ç­–æ±‚çš„æ˜¯å¤šæ•°å¯¹ï¼Œè€Œä¸æ˜¯æ ·æ ·å¯¹ã€‚ 2ã€æ— æ³•é€‚åº”åˆ¶åº¦0åˆ°1çš„æ–°åˆ›å›¢é˜Ÿæ±‚å¿«ï¼Œå› æ­¤ä¸ä¼šæœ‰å¤ªå¤šåˆ¶åº¦ã€‚è¿›å…¥1åˆ°100é˜¶æ®µï¼Œå…¬å¸åŠ¿å¿…è¦å¼€å§‹å»ºç«‹ä¸€äº›ç®¡ç†ç³»ç»Ÿï¼Œä»¥åœ¨é£é™©ä¸å‘å±•ä¸­é—´å–å¾—å¹³è¡¡ã€‚ æœ‰äº›ä¹ æƒ¯äº†è¯´å¹²å°±å¹²çš„åˆä¼™äººï¼Œåœ¨æ­¤æ—¶ä¼šäº§ç”Ÿä¸¥é‡çš„ä¸é€‚åº”ï¼Œæ—¶é—´ä¸€é•¿ç”šè‡³ä¼šè§‰å¾—å…¬å¸èƒŒç¦»äº†åˆ›åŠçš„åˆè¡·ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé™¤äº†åŠæ—©å‘ç°åŠæ—©è¾…å¯¼å¤–ï¼Œè¯·ä»–ä»¬å‚ä¸ã€ä¸»å¯¼åˆ¶åº¦çš„è®¾è®¡ï¼Œä¹Ÿæ˜¯ååŠ©åˆä¼™äººé€‚åº”æ–°åˆ¶åº¦çš„æ–¹æ³•ã€‚ 3ã€è¶Šæƒç®¡ç†å½“å…¬å¸å¼€å§‹æœ‰éƒ¨é—¨ã€éƒ¨é—¨ä¸»ç®¡ï¼Œåˆä¼™äººè¿˜æ˜¯ä¹ æƒ¯çœ‹ä¸é¡ºçœ¼å°±ç®¡ï¼Œå®¹æ˜“é€ æˆç»ç†äººçš„å›°æ‰°ã€‚æ›´æœ‰ç”šè€…ï¼Œé€ æˆåˆä¼™äººå¯¹ç»ç†äººä¸ä¿¡ä»»ï¼Œåè€Œè®©ç»ç†äººæ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´ã€ç©ºé—´å»é€‚åº”ã€å­¦ä¹ ã€‚è¿™ä¸ªé—®é¢˜é€šå¸¸æ˜¯æƒ¯æ€§ä½¿ç„¶ï¼Œé‡ç‚¹å°±æ˜¯è¦æ‰“ç ´å®ƒã€‚æ‰€ä»¥ï¼Œçœ‹åˆ°è¿™æ ·çš„è¡Œä¸ºè¦èµ¶å¿«æé†’ä¼™ä¼´ä»¬æ³¨æ„ã€‚ 4ã€æ— æ³•è·Ÿä¸Šå…¬å¸æˆé•¿çš„éœ€è¦åœ¨å…¬å¸å¿«é€Ÿæ‰©å¼ æœŸï¼Œä¸€ä¸ª3äººäº§å“å›¢é˜Ÿå¯èƒ½åœ¨ä¸€å¹´å†…æˆé•¿ä¸º30äººï¼Œè€Œä¸¤è€…ä¹‹é—´ç®¡ç†ä¸Šçš„ä¸åŒï¼Œå¸¸å¸¸ä¼šè®©æœ¬æ¥æ“…é•¿æŠ€æœ¯ã€äº§å“ï¼Œä½†ä»æ¥æ²¡æœ‰ç®¡ç†ä¸­å¤§å‹å›¢é˜Ÿç»éªŒçš„åˆä¼™äººä¸€æ—¶é—´è·Ÿä¸ä¸Šå…¬å¸å‘å±•çš„æ­¥ä¼ã€‚ å›åˆ°æ‰©å¼ å‰ï¼Œä½ åº”è¯¥æ—©æ—©æ‰¾åˆ°å¥½çš„CTO Mentorï¼Œåœ¨æ‰©å¼ ä¸­ï¼Œç»å¸¸é¼“åŠ±ä»–åœ¨ç®¡ç†çŸ¥è¯†ä¸èƒ½åŠ›ä¸Šç²¾è¿›ã€‚æ‰©å¼ åï¼Œå¦‚æœä»–çœŸçš„æ— æ³•é€‚åº”ï¼Œä¹Ÿæ¯”è¾ƒèƒ½å¤Ÿæ¥å—å»å¯»æ‰¾æ›´æœ‰ç»éªŒçš„CTOï¼Œè€Œè‡ªå·±é€€å±…éƒ¨é—¨äºŒæŠŠæ‰‹ã€ä¸‰æŠŠæ‰‹ã€‚ 5ã€åˆ©ç›Šåˆ†é…å½“å…¬å¸è¶Šæ¥è¶ŠæˆåŠŸã€è¶Šèµšé’±ã€ç¦»IPOè¶Šè¿‘ï¼Œè‚¡æƒä¸åˆ©ç›Šçš„é—®é¢˜å°±ä¼šè¶Šå®¹æ˜“äº§ç”Ÿã€‚å°¤å…¶å½“åˆçš„è‚¡æƒåˆ†é…å¦‚æœæ²¡æœ‰å½°æ˜¾æ¯ä¸ªåˆä¼™äººçš„ç›¸å¯¹ä»·å€¼ï¼Œé‚£å›¢é˜Ÿä¸­å¯èƒ½é…é…¿å‡ºä¸è‰¯æƒ…ç»ªã€‚ æ¯”è¾ƒå¥½çš„æ–¹æ³•å½“ç„¶æ˜¯æ—©æœŸå°±æŠŠè¿™ä¸ªé—®é¢˜è§£å†³æ‰ï¼Œå› ä¸ºåˆ°äº†åæœŸï¼Œä½ çš„å·¥å…·ä¼šè¶Šæ¥è¶Šæœ‰é™ã€‚ä½†ä¹Ÿä¸æ˜¯æ²¡æœ‰æœºä¼šä¿®æ­£ï¼Œå¦‚æœæœ‰åˆä¼™äººç¦»å¼€ï¼Œä½ å¯ä»¥æ”¶å›ä»–çš„è‚¡æƒæ¥é‡æ–°åˆ†é…ã€‚å¦‚æœæœ‰Bã€Cã€Dè½®å¢èµ„ï¼Œä½ å¯ä»¥è·ŸæŠ•èµ„äººè¦æ±‚â€œæœŸæƒæ± â€(ESOP)ï¼Œé€šè¿‡å‘æ”¾æ–°çš„é€‰æ‹©æƒæ¥å¹³è¡¡ã€‚æœ€åï¼Œå¦‚æœçœŸçš„è¿‡äºé›†ä¸­ï¼Œè´Ÿè´£ä»»çš„CEOï¼Œç”šè‡³ä¼šæ‹¿å‡ºè‡ªå·±çš„è‚¡æƒåˆ†é…ç»™ä¼™ä¼´ä»¬ã€‚ é€‰æ‹©åˆä¼™äººæœªå¿…æœ‰ä¸€å®šä¹‹è§„ï¼Œåˆ›ä¸šè·¯ä¸Šå¯èƒ½é‡åˆ°çš„å±æœºä¹Ÿè¿œè¿œä¸æ­¢ä¸Šè¿°è¿™äº›ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¯¹ä½ æœ‰æ‰€è£¨ç›Šï¼ŒåŠ©ä½ åœ¨åˆ›ä¸šè·¯ä¸Šå°‘èµ°å¼¯è·¯ï¼Œä¹Ÿç¥æ„¿åˆ›ä¸šè€…ä»¬åœ¨2018å¹´åšå¾—å¥½å½©å¤´ï¼Œå¤§é¹ä¸€æ—¥åŒé£èµ·ï¼Œæ‰¶æ‘‡ç›´ä¸Šä¹ä¸‡é‡Œã€‚ æœ¬æ–‡æ¥æºï¼šè”æƒ³ä¹‹æ˜Ÿ","link":"/notes/chuangye/"},{"title":"æœºæ¢°é”®ç›˜","text":"å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨! åºŸè¯ä¸å¤šè¯´, æ€»ç»“ä¸‹XCodeå¿«æ·é”®: å…³äºä»¥ä¸ŠæŠ€æœ¯ç¬¦å·æ˜¯å¦‚ä½•æ‰“å‡ºæ¥çš„, ä¹Ÿæœ‰ä¸€ä¸ªå¿«æ·é”®:âŒƒâŒ˜spacing å³å¯å”¤å‡º ç‰¹æ®Šç¬¦å·ç•Œé¢ ä¹Ÿå¯ä»¥å‚è€ƒä¸‹é¢é“¾æ¥ä¸­çš„æ–¹æ³•:é“¾æ¥ åå¥½è®¾ç½®: âŒ˜, éšè—Xcode: âŒ˜H éšè—å…¶ä»–åº”ç”¨: âŒ¥âŒ˜H é€€å‡ºXcode:âŒ˜Q æ–°çš„è¡¨å•: âŒ˜T æ–°çš„è¡¨å• æ–°çš„çª—å£: â‡§âŒ˜T æ–°çš„æ–‡ä»¶: âŒ˜N æ–°çš„å·¥ç¨‹: â‡§âŒ˜N æ–°çš„ç»„æ–‡ä»¶å¤¹: âŒ¥âŒ˜N æ–°çš„ç»„æ–‡ä»¶å¤¹ æ·»åŠ æ–‡ä»¶: âŒ¥âŒ˜A æ‰“å¼€: âŒ˜O å¿«é€Ÿæ‰“å¼€: â‡§âŒ˜O å…³é—­çª—å£: âŒ˜W å…³é—­æ‰€æœ‰çª—å£: âŒ¥âŒ˜W å…³é—­è¡¨å•: âŒƒâŒ˜W ä¿å­˜: âŒ˜S ä¿å­˜æ‰€æœ‰: âŒ¥âŒ˜S å¦å­˜ä¸º: â‡§âŒ˜S æäº¤: âŒ¥âŒ˜C æ›´æ–°: âŒ¥âŒ˜X æ›´æ–°å…¨éƒ¨: âŒƒâŒ¥âŒ˜X æ’¤é”€: âŒ˜Z æ¢å¤: â‡§âŒ˜Z å‰ªåˆ‡: âŒ˜X èµ‹å€¼: âŒ˜C ç²˜è´´: âŒ˜V å…¨é€‰: âŒ˜A åœ¨å·¥ä½œç©ºé—´æŸ¥æ‰¾: â‡§âŒ˜F åœ¨å·¥ä½œç©ºé—´æŸ¥æ‰¾å¹¶æ›¿æ¢: âŒ¥â‡§âŒ˜F æŸ¥æ‰¾: âŒ˜F æŸ¥æ‰¾å¹¶æ›¿æ¢: âŒ¥âŒ˜F æŸ¥æ‰¾ä¸‹ä¸€ä¸ª: âŒ˜G æŸ¥æ‰¾ä¸Šä¸€ä¸ª: â‡§âŒ˜G è§†å›¾ å·¥ç¨‹: âŒ˜1 ç»“æ„: âŒ˜2 æŸ¥æ‰¾: âŒ˜3 äº‹åŠ¡: âŒ˜4 æµ‹è¯•: âŒ˜5 çŠ¶æ€: âŒ˜6 æ–­ç‚¹: âŒ˜7 æ—¥å¿—: âŒ˜8 æ˜¾ç¤ºæˆ–è€…éšè—å¯¼èˆªæ¡: âŒ˜0 æ˜¾ç¤ºæˆ–è€…éšè—å¯¼èˆªæ¡ æ ‡å‡†è§†å›¾: âŒ˜â†©ï¸ è¾…åŠ©è§†å›¾: âŒ¥âŒ˜â†©ï¸ ç‰ˆæœ¬è§†å›¾: âŒ¥â‡§âŒ˜â†©ï¸ æ˜¾ç¤ºç›¸å…³é¡¹ç›®: âŒƒ1 æ˜¾ç¤ºç›¸å…³é¡¹ç›® æ˜¾ç¤ºæµè§ˆå†å²: âŒƒ2 æ˜¾ç¤ºæµè§ˆå†å² æ˜¾ç¤ºé¡¶å±‚é¡¹ç›®: âŒƒ4 æ˜¾ç¤ºé¡¶å±‚é¡¹ç›® æ˜¾ç¤ºç»„å†…æ–‡ä»¶: âŒƒ5 æ˜¾ç¤ºç»„å†…æ–‡ä»¶ æ˜¾ç¤ºæ–‡ä»¶é¡¹ç›®(æŸ¥çœ‹å±æ€§, æ–¹æ³•, å‡½æ•°ç­‰): âŒƒ6 14.gif æ˜¾ç¤ºæˆ–éšè—æ§åˆ¶å°: â‡§âŒ˜Y åœ¨å¯¼èˆªæ ä¸­æ˜¾ç¤º: â‡§âŒ˜Jå¸¸å¸¸é…åˆâ‡§âŒ˜Oä½¿ç”¨, å…ˆç”¨â‡§âŒ˜OæŸ¥æ‰¾ç›¸å…³æ–‡ä»¶, ç„¶åä½¿ç”¨â‡§âŒ˜Jå®šä½åˆ°æ–‡ä»¶ç›¸åº”çš„ä½ç½® åœ¨å¯¼èˆªæ ä¸­æ˜¾ç¤º åœ¨è¾…åŠ©çª—å£æ‰“å¼€å½“å‰æ–‡ä»¶: âŒ¥âŒ˜, å…‰æ ‡ç„¦ç‚¹ç§»åŠ¨: âŒ˜J ç¿»åˆ°ä¸‹ä¸€é¡µ: âŒƒâŒ˜â†’ è¾…åŠ©çª—å£ç¿»åˆ°ä¸‹ä¸€é¡µ: âŒƒâŒ¥âŒ˜â†’ å¤æ‚çš„ç¿»åˆ°ä¸‹ä¸€é¡µ: âŒƒâŒ¥â‡§âŒ˜â†’ å¤æ‚çš„ç¿»åˆ°ä¸‹ä¸€é¡µ ç¿»åˆ°ä¸Šä¸€é¡µ: âŒƒâŒ˜â† è¾…åŠ©çª—å£ç¿»åˆ°ä¸Šä¸€é¡µ: âŒƒâŒ¥âŒ˜â† å¤æ‚çš„ç¿»åˆ°ä¸Šä¸€é¡µ: âŒƒâŒ¥â‡§âŒ˜â† è·³è½¬åˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®: â‡§âŒ˜L è·³è½¬åˆ°å®šä¹‰: âŒƒâŒ˜Då…ˆå°†å…‰æ ‡æ”¾åœ¨éœ€è¦è·³è½¬çš„ç±», æ–¹æ³•, å‡½æ•°ç­‰ä¸Šé¢, ç„¶åæŒ‰âŒƒâŒ˜D, è·³è¿›å»çœ‹, ç›¸å½“äºæŒ‰ä½âŒ˜é”®ç‚¹å‡»é¼ æ ‡å·¦é”® è·³è½¬åˆ°.hæˆ–è€….mæ–‡ä»¶: âŒƒâŒ˜â†‘, âŒƒâŒ˜â†“ è·³è½¬åˆ°å…·ä½“å“ªä¸€è¡Œ: âŒ˜L è·³è½¬åˆ°ä¸‹ä¸€ä¸ªå ä½: âŒƒ/ è·³è½¬åˆ°ä¸Šä¸€ä¸ªå ä½: âŒƒ? è·³è½¬åˆ°ä¸Šä¸€ä¸ªå ä½ Xcodeå…¨å±: âŒƒâŒ˜F ä»£ç å³ç§»: âŒ˜] ä»£ç å·¦ç§»: âŒ˜[ ä»£ç ä¸Šç§»:âŒ¥âŒ˜[ ä»£ç ä¸‹ç§»:âŒ¥âŒ˜] æ³¨é‡Šå…‰æ ‡æ‰€åœ¨è¡Œ: âŒ˜/ æŠ˜å å½“å‰ä»£ç å—: âŒ¥âŒ˜â† æ‰“å¼€å½“å‰ä»£ç å—: âŒ¥âŒ˜â†’ æŠ˜å æ‰€æœ‰ä»£ç å—:âŒ¥â‡§âŒ˜â† æ‰“å¼€æ‰€æœ‰ä»£ç å—: âŒ¥â‡§âŒ˜â†’ æŠ˜å æ‰€æœ‰æ³¨é‡Š: âŒƒâ‡§âŒ˜â† æ‰“å¼€æ‰€æœ‰çŸ¥è¯†: âŒƒâ‡§âŒ˜â†’ è¿è¡Œ: âŒ˜R æ¡ä»¶è¿è¡Œ: âŒ¥âŒ˜R æ¡ä»¶è¿è¡Œ æµ‹è¯•: âŒ˜U æ¡ä»¶æµ‹è¯•: âŒ¥âŒ˜U æ¡ä»¶æµ‹è¯• é…ç½®æµ‹è¯•: âŒ˜I æ¡ä»¶é…ç½®æµ‹è¯• æ¡ä»¶é…ç½®æµ‹è¯• åˆ†æ: â‡§âŒ˜B æ¡ä»¶åˆ†æ: âŒ¥â‡§âŒ˜B è¿è¡Œç¼–è¯‘: â‡§âŒ˜R æµ‹è¯•ç¼–è¯‘: â‡§âŒ˜U é…ç½®ç¼–è¯‘: â‡§âŒ˜I ç¼–è¯‘: âŒ˜B æ¸…é™¤ç¼“å­˜: â‡§âŒ˜K æ¸…é™¤ç¼–è¯‘æ–‡ä»¶å¤¹ä¸­å†…å®¹: âŒ¥â‡§âŒ˜K åœæ­¢: âŒ˜. æš‚åœ: âŒƒâŒ˜Y åœ¨å½“å‰è¡Œæ·»åŠ æ–­ç‚¹: âŒ˜\\ æ¿€æ´»æ‰€æœ‰æ–­ç‚¹: âŒ˜Y æ¸…é™¤æ§åˆ¶å°æ‰€æœ‰æ‰“å°: âŒ˜K æ¡ä»¶ç¼–è¾‘: âŒ˜&lt; æœ€å°åŒ–: âŒ˜M é€‰æ‹©ä¸‹ä¸€ä¸ªè¡¨å•: âŒ˜} é€‰æ‹©ä¸Šä¸€ä¸ªè¡¨å•:âŒ˜{ æ¬¢è¿æ¥åˆ°XCodeç•Œé¢: â‡§âŒ˜1 æ¥åˆ°è®¾å¤‡ç•Œé¢: â‡§âŒ˜2 APIæ–‡æ¡£: â‡§âŒ˜0 å¸®åŠ©æŸ¥è¯¢: âŒ˜â‡§? æŸ¥è¯¢é€‰ä¸­: âŒƒâŒ¥âŒ˜/ å¿«é€ŸæŸ¥çœ‹é€‰ä¸­: â‡§âŒƒâŒ˜? ä»£ç è¡¥å…¨åˆ—è¡¨: â‹ ç§»åŠ¨åˆ°æ–‡æœ¬æœ€é¡¶ç«¯: âŒ˜â†‘ ç§»åŠ¨åˆ°æ–‡æœ¬æœ€æœ«ç«¯: âŒ˜â†“ å·¦ç§»: â† å‘å³é€å­—ç§»åŠ¨å¹¶é€‰ä¸­: â‡§â†’ å‘å·¦é€å­—ç§»åŠ¨å¹¶é€‰ä¸­: âŒƒâ‡§B, â‡§â† å‘ä¸Š: âŒƒP, â†‘ å‘ä¸‹: âŒƒN, â†“ ç§»åŠ¨åˆ°æ®µé¦–å¹¶é€‰ä¸­: âŒƒâ‡§A å‘å³é€è¯ç§»åŠ¨å¹¶é€‰ä¸­: âŒƒâ‡§â†’ å‘å·¦é€è¯ç§»åŠ¨å¹¶é€‰ä¸­: âŒƒâ‡§â† å‘å³èŠ‚ç‚¹é€‰ä¸­: âŒ¥â‡§â†’ å‘å·¦èŠ‚ç‚¹é€‰ä¸­: âŒ¥â‡§â† ç§»åŠ¨åˆ°æ–‡æ¡£æœ€é¡¶ç«¯å¹¶é€‰ä¸­: â‡§âŒ˜â†‘, â‡§â†–ï¸ å‘ä¸‹ç§»åŠ¨å¹¶é€‰ä¸­: âŒƒâ‡§N, â‡§â†“ å‘å‰é€è¯é€‰ä¸­: âŒƒâŒ¥â‡§F å‘åé€è¯é€‰ä¸­: âŒƒâŒ¥â‡§B å‘å‰é€è¯ç§»åŠ¨: âŒ¥â†’, âŒƒâŒ¥F å‘åé€è¯ç§»åŠ¨: âŒ¥â†, âŒƒâŒ¥B ç§»åŠ¨åˆ°è¡Œé¦–: âŒƒA ç§»åŠ¨åˆ°è¡Œå°¾: âŒƒE ç§»åŠ¨åˆ°æ–‡æ¡£æœ€æœ«ç«¯å¹¶é€‰ä¸­: â‡§âŒ˜â†“, â‡§â†˜ï¸ å‘ä¸Šåˆ†é¡µé€‰ä¸­: â‡§â‡ å‘ä¸‹ç¿»é¡µé€‰ä¸­: â‡§â‡Ÿ, âŒƒâ‡§V å‘åé€è¯ç§»åŠ¨: âŒ¥â† å³ç§»: â†’ ç§»åŠ¨åˆ°è¡Œçš„æœ€å³ç«¯å¹¶é€‰ä¸­: â‡§âŒ˜â†’ å‘ä¸Šé€è¡Œç§»åŠ¨å¹¶é€‰ä¸­: â‡§â†‘, âŒƒâ‡§P å‘å³é€è¯ç§»åŠ¨å¹¶é€‰ä¸­: âŒ¥â‡§â†’ å‘å·¦é€è¯ç§»åŠ¨å¹¶é€‰ä¸­: âŒ¥â‡§â† å‘åé€è¯ç§»åŠ¨: âŒƒâŒ¥B ç§»åŠ¨åˆ°è¡Œçš„æœ€å³ç«¯: âŒ˜â†’ å‘åç§»åŠ¨: âŒƒB å‘å‰ç§»åŠ¨: âŒƒF ç§»åŠ¨åˆ°è¡Œçš„æœ€å·¦ç«¯: âŒ˜â† å‘ä¸‹ç¿»é¡µ(å…‰æ ‡ç§»åŠ¨): âŒ¥â‡Ÿ, âŒƒV å‘ä¸Šç¿»é¡µ(å…‰æ ‡ç§»åŠ¨): âŒ¥â‡ å‘ä¸‹ç¿»é¡µ(å…‰æ ‡ä¸ç§»åŠ¨): â‡Ÿ å‘ä¸‹ç¿»é¡µåˆ°æœ€åº•ç«¯: â†˜ï¸ å‘ä¸Šç¿»é¡µ(å…‰æ ‡ä¸ç§»åŠ¨): â‡ å‘ä¸Šç¿»é¡µåˆ°æœ€é¡¶ç«¯: â†–ï¸ é€è¡Œå‘ä¸Š: âŒ¥â†‘ é€è¡Œå‘ä¸‹: âŒ¥â†“ åˆ é™¤æ•´è¡Œ: âŒƒK å‘å‰é€è¯åˆ é™¤: âŒ¥âŒ¦ å‘åé€è¯åˆ é™¤: âŒ¥âŒ« å‘å‰é€èŠ‚ç‚¹åˆ é™¤: âŒƒâŒ¦ å‘åé€èŠ‚ç‚¹åˆ é™¤: âŒƒâŒ« å‘å‰åˆ é™¤: âŒ¦, âŒƒD å‘ååˆ é™¤: âŒ«, âŒƒH é¢ å€’ä½ç½®: âŒƒT é¢ å€’ä½ç½® æ’å…¥æ–°çš„ä¸€è¡Œ: â†©ï¸ æ’å…¥æ–°çš„ä¸€è¡Œå¹¶é¡¶åˆ°æœ€å‰ç«¯: âŒƒâ†©ï¸","link":"/notes/jianpan/"},{"title":"è¯»ä¹¦","text":"é…’ä»™æ¡¥åˆ°ç«‹æ°´æ¡¥çš„è·ç¦»ï¼Œä¸€è¾†å…¬äº¤è½¦ã€‚è‡³æ­¤æ—¶æ­¤åˆ»ï¼Œæˆ‘å·²ç»åœ¨ä¸Šä¸‹ç­çš„è·¯ä¸Šçœ‹è¿‡ä¸‰æœ¬ä¹¦äº†ï¼Œå®ƒä»¬æ˜¯ã€Šå¹¸ç¦äº†å—ã€‹ã€Šçœ‹è§ã€‹ã€Šæ‹–å»¶å¿ƒç†å­¦ã€‹å’Œã€Šç¾å›½è®°å¿†å† å†›ã€‹ã€‚æˆ‘å¾ˆåº†å¹¸æ²¡æœ‰æµªè´¹è¿™æ®µå®è´µçš„æ—¶å…‰ï¼ŒåŒæ—¶æˆ‘ä¹Ÿåœ¨æ€è€ƒï¼Œä»–ä»¬ç»™äº†æˆ‘ä¸€äº›ä»€ä¹ˆï¼Ÿæˆ‘åˆæ˜¯å¦ä½“ç°äº†å®ƒä»¬çš„ä»·å€¼ï¼Ÿçœ‹ä¹¦ä¸è®°ä¹¦çš„æˆ‘ï¼Œè¿˜å¾—è¦æ–¥è´£è‡ªå·±å‘ï¼Œæˆ‘äº«å—è¿™è½¦ä¸Šçš„æ—¶å…‰ï¼Œä¸è§‰å¾—æ—¶é—´æµæ·Œã€‚è¿˜æ˜¯è¦å»è®°ä¸€ç‚¹å§ï¼Œç™½å²©æ¾çš„ã€Šå¹¸ç¦äº†å—ã€‹æˆ‘è®°å¿†æ·±åˆ»çš„æ˜¯ä¹ä¸€ä¸€åä¸€æ®µæ•…äº‹ï¼Œä½œè€…å½“æ—¶ä½œä¸ºåª’ä½“äººä¸€ç§æ•æ„Ÿã€‚","link":"/notes/kindle/"},{"title":"Mac æŠ€å·§","text":"2015å¹´1æœˆ14æ—¥ å¾®è½¯é›·å¾·è’™å¾·å…¬å¸æ€»éƒ¨ï¼Œè¿™é‡Œå³å°†å¬å¼€ä¸€åœºå…³äº WIN10 ç³»ç»Ÿçš„å‘å¸ƒä¼šã€‚ç„¶è€Œå¾®è½¯æ–°ä»»CEO è¨è’‚äºšÂ·çº³å¾·æ‹‰ å´é“é’ç€è„¸æœ›å‘å°ä¸‹ã€‚æ¯•ç«Ÿï¼Œå‡ ä¹è¢«æ·¹æ²¡åœ¨åª’ä½“è®°è€…èº«å‰å„ç§å„æ ·å‘å…‰è‹¹æœ Logo ä¹‹ä¸­çš„å¾®è½¯å‘å¸ƒä¼šï¼Œä¿¨ç„¶æˆä¸ºäº†ä¸€ä¸ªå…è´¹çš„è‹¹æœå¹¿å‘Šã€‚ MacBook ç³»åˆ—ç¬”è®°æœ¬ä¹‹æ‰€ä»¥æˆä¸ºåŠå…¬äººå£«çš„å¿ƒå¤´å® ï¼Œé™¤äº†æå…·ç§‘æŠ€å’Œç¾æ„Ÿçš„è®¾è®¡ï¼Œä¸»æµçš„ç¡¬ä»¶é…ç½®ä¹‹å¤–ï¼Œé«˜æ•ˆçš„ Mac OS X ç³»ç»Ÿæ‰æ˜¯æé«˜ç”Ÿäº§åŠ›çš„å…³é”®æ‰€åœ¨ã€‚ Option + Shift +è°ƒèŠ‚éŸ³é‡äº®åº¦macé€šè¿‡éŸ³é‡é”®æˆ–è€…äº®åº¦é”®å°±å¯ä»¥ç®€å•å¿«é€Ÿçš„è°ƒèŠ‚ï¼Œä½†æ˜¯æ¯æ¬¡ä¸€å¤§æ ¼ä¸€è·³ï¼Œä¸¤è€…ä¹‹é—´è·¨åº¦å¯¹æŸäº›åœºæ™¯æ¥è¯´è¿˜æ˜¯é—´éš”æœ‰äº›å¤§ï¼Œæ¯”å¦‚åœ¨é™éŸ³ç¯å¢ƒçš„æ—¶å€™æƒ³è¦ç¨å¾®å¼€ä¸€äº›éŸ³é‡å´ä¸æƒ³å½±å“ä»–äººï¼Œæ­¤æ—¶ä½ å¯ä»¥è¯•è¯•æŒ‰ä½Option + Shiftç„¶åé…åˆéŸ³é‡é”®ï¼Œä½ ä¼šæƒŠå¥‡çš„å‘ç°ï¼ŒéŸ³é‡äº®åº¦ä¼šä»¥1/4æ ¼çš„å·®è·è¿›è¡Œè°ƒèŠ‚ è°ƒæ•´çª—å£å¤§å°è°ƒæ•´çª—å£å¤§å°çš„åŒæ—¶æŒ‰ä½Option + Shifté”®å°†ä¼šä½¿æ•´ä¸ªäº‹ç‰©ä¸€æ¬¡æˆæ¯”ä¾‹åœ°å¢é•¿å’Œç¼©å°ã€‚çš„åŒæ—¶æŒ‰ä½Option + Shifté”®å°†ä¼šä½¿æ•´ä¸ªäº‹ç‰©ä¸€æ¬¡æˆæ¯”ä¾‹åœ°å¢é•¿å’Œç¼©å°ã€‚ ç”µæºæç¤ºéŸ³ æ¿€æ´»çš„æ–¹æ³•å¾ˆç®€å•: æ‰“å¼€åº”ç”¨ç¨‹åº - å®ç”¨å·¥å…· - ç»ˆç«¯. è¾“å…¥å¦‚ä¸‹çš„å‘½ä»¤: 1defaults write com.apple.PowerChime ChimeOnAllHardware -bool true; open /System/Library/CoreServices/PowerChime.app &amp; ç„¶åå›è½¦, å†è¯•è¯•å……ç”µæ˜¯ä¸æ˜¯å°±æœ‰æç¤ºéŸ³äº†? å¦‚æœä½ ä¸å–œæ¬¢æ—¥åä¹Ÿå¯ä»¥å–æ¶ˆå‘½ä»¤è¡Œå¦‚ä¸‹ 1defaults write com.apple.PowerChime ChimeOnAllHardware -bool false;killall PowerChime å…³é—­ä»»åŠ¡ Command + Option + Escape ä½¿ç”¨è¿™ä¸ªæŠ€å·§ä¼šæ¯”è‡ªå·±åœ¨æ¯ä¸ªéº»çƒ¦çš„åº”ç”¨ç¨‹åºä¸Šå³å‡»æ›´å¿«ã€‚ Launchpadä¸­ä¸æ˜¾ç¤ºAppå›¾æ ‡ åœ¨ç»ˆç«¯é‡å¯Launchpad ç¬¬ä¸€æ­¥ rm ~/Library/Application\\ Support/Dock/*.dbç¬¬äºŒæ­¥ killall Dock OKã€‚ mac Zip åŠ å¯† æœ€é€šä¿—çš„ç”¨æ³• 1zip -q -r -e -m -o [yourName].zip someThing -q è¡¨ç¤ºä¸æ˜¾ç¤ºå‹ç¼©è¿›åº¦çŠ¶æ€ -r è¡¨ç¤ºå­ç›®å½•å­æ–‡ä»¶å…¨éƒ¨å‹ç¼©ä¸ºzip //è¿™éƒ¨æ¯”è¾ƒé‡è¦ï¼Œä¸ç„¶çš„è¯åªæœ‰somethingè¿™ä¸ªæ–‡ä»¶å¤¹è¢«å‹ç¼©ï¼Œé‡Œé¢çš„æ²¡æœ‰è¢«å‹ç¼©è¿›å» -e è¡¨ç¤ºä½ çš„å‹ç¼©æ–‡ä»¶éœ€è¦åŠ å¯†ï¼Œç»ˆç«¯ä¼šæç¤ºä½ è¾“å…¥å¯†ç çš„ // è¿˜æœ‰ç§åŠ å¯†æ–¹æ³•ï¼Œè¿™ç§æ˜¯ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œåšçš„ï¼Œæ¯”å¦‚zip -r -P Password01! modudu.zip SomeDir, å°±ç›´æ¥ç”¨Password01!æ¥åŠ å¯†modudu.zipäº†ã€‚ -m è¡¨ç¤ºå‹ç¼©å®Œåˆ é™¤åŸæ–‡ä»¶ -o è¡¨ç¤ºè®¾ç½®æ‰€æœ‰è¢«å‹ç¼©æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ä¸ºå½“å‰å‹ç¼©æ—¶é—´ å½“è·¨ç›®å½•çš„æ—¶å€™æ˜¯è¿™ä¹ˆæ“ä½œçš„ 1zip -q -r -e -m -o &apos;\\user\\someone\\someDir\\someFile.zip&apos; &apos;\\users\\someDir&apos; æˆªå›¾Command + Shift + 3 æ•æ‰æ•´ä¸ªå±å¹•ã€‚Command + Shift + 4 å°†æ•è·æ˜¾ç¤ºçš„è‡ªå®šä¹‰éƒ¨åˆ†ã€‚ åˆ†å‰²è§†å›¾å¸ƒå±€ Split Screenåˆ†å±åŠŸèƒ½è¿™ä¾æ—§æ˜¯ä¸€æ¡æå‡ç”Ÿäº§åŠ›çš„åŠŸèƒ½ï¼Œä¹ æƒ¯ä¸€ä¸ªå±æ‰“å¼€IDEAï¼Œå¦å¤–ä¸€ä¸ªå¼€ç€Googleï¼Œå¯¹äºæ²¡æœ‰å¤–æ¥æ˜¾ç¤ºå™¨æ¥è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Macè‡ªå¸¦çš„åˆ†å±æ¥å®ç°ï¼ˆæœ‰çš„è½¯ä»¶å¯èƒ½ä¸æ”¯æŒï¼‰ ä½¿ç”¨æ–¹æ³•: å·¦é”®æŒ‰ä½ä¸€ä¸ªç¨‹åºå·¦ä¸Šæ–¹ç»¿è‰²æœ€å¤§åŒ–æŒ‰é’®ä¸åŠ¨ï¼Œè¿™æ—¶ä¼šè®©ä½ é€‰æ‹©å½“å‰é€‰ä¸­Appä¼šå‡ºç°åœ¨å“ªä¸€è¾¹ï¼Œå¯ä»¥æ˜¯å·¦è¾¹ä¹Ÿå¯ä»¥æ˜¯å³è¾¹ï¼Œæ’å¥½ä¹‹åå†ç‚¹å‡»å¦ä¸€ä¸ªAppå°±ä¼šå‡ºç°åœ¨å¦ä¸€ä¾§ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒåŒä¸€å±å¹•ä¸­å°±åŒæ—¶æœ‰äº†ä¸¤ä¸ªAppçš„ç•Œé¢ã€‚ä¸­é—´æœ‰ä¸€æ¡åˆ†éš”çº¿ï¼Œæ‹–åŠ¨åˆ†å‰²çº¿å¯ä»¥é‡æ–°åˆ’åˆ†å·¦å³çš„åŒºåŸŸå¤§å°ï¼Œå¯ä»¥è®©ä½ çš„æ³¨æ„åŠ›æ›´é›†ä¸­åœ¨æŸä¸€æ–¹é¢ Xcode å’Œæ¨¡æ‹Ÿå™¨åˆ†å±éœ€è¦åœ¨ç»ˆç«¯å®ç°ä»¥ä¸‹å‘½ä»¤ 1defaults write com.apple.iphonesimulator AllowFullscreenMode -bool YES é€‰é¡¹å¡æˆ–çª—å£ä¹‹é—´åˆ‡æ¢ä¸ä½¿ç”¨é¼ æ ‡çš„æƒ…å†µä¸‹åœ¨é€‰é¡¹å¡æˆ–çª—å£ä¹‹é—´åˆ‡æ¢ã€‚åœ¨ä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´åˆ‡æ¢ï¼šCommand + Tabåœ¨ç›¸åŒåº”ç”¨ç¨‹åºçš„å¤šä¸ªçª—å£ä¹‹é—´åˆ‡æ¢ï¼šCommand + ~ è¦åœ¨åŒä¸€ä¸ªæµè§ˆå™¨çª—å£ä¸­åˆ‡æ¢æ ‡ç­¾ï¼Œå®é™…ä¸Šæœ‰ä¸¤ç§æ–¹æ³•ï¼š Command + Option +å‰è¿›/åé€€ç®­å¤´ Control + Tabé€šè¿‡æ ‡ç­¾å‘å‰ç§»åŠ¨ï¼ŒControl + Tab + Shiftå‘åç§»åŠ¨æ ‡ç­¾ã€‚ å»æ ¼å¼ç²˜è´´å¤åˆ¶æ–‡æœ¬å†…å®¹çš„æ—¶å€™ç»å¸¸ä¼šå¸¦æ ¼å¼ï¼ˆå­—å·ã€é¢œè‰²ã€å­—ä½“ï¼Œæœ‰æ—¶å€™è¿˜æœ‰çœ‹ä¸è§çš„ä»£ç ï¼‰ï¼Œæ‰‹åŠ¨è°ƒæ•´ä¼šå¾ˆéº»çƒ¦ï¼Œ ä½¿ç”¨æ–¹æ³•ï¼š Command+CCommand+V â€“&gt; Command + Shift + option + V é€šè¿‡ä»¥ä¸Šæ–¹æ³•å°±èƒ½å¿«é€Ÿçš„ä¸¢å¼ƒåŸæœ‰çš„æ ¼å¼å±æ€§ï¼Œä½¿å…¶ä¸å½“å‰æ–‡æœ¬æ ¼å¼ä¿æŒä¸€è‡´ 3ã€åº”ç”¨ç¨‹åºâ€œæ¥åŠ›â€ä¾‹ï¼šâ€œç”µè„‘ä¸Šå¤åˆ¶ï¼Œæ‰‹æœºä¸Šç²˜è´´â€çš„é€šç”¨å‰ªè´´æ¿ï¼Œæ˜¯ä¸æ˜¯å¾ˆNB æ¡ä»¶ï¼š1ã€æ‰€æœ‰è®¾å¤‡å‡ä½¿ç”¨åŒä¸€ Apple ID ç™»å½• iCloud2ã€æ‰€æœ‰è®¾å¤‡å‡å·²å¼€å¯è“ç‰™3ã€æ‰€æœ‰è®¾å¤‡å‡å·²å¼€å¯ Wi-Fi æ‰“å¼€æ¥åŠ›æ‰‹æœºï¼šè®¾ç½®â€“&gt;é€šç”¨â€“&gt;æ¥åŠ› MACï¼šç³»ç»Ÿåå¥½è®¾ç½®â€“&gt; é€šç”¨ â€“&gt; å…è®¸åœ¨è¿™å°Macå’ŒiClouldè®¾å¤‡ä¹‹é—´ä½¿ç”¨â€œæ¥åŠ›â€ æ‰“å¼€iCloudæ‰‹æœºæ‰“å¼€iCloudï¼šè®¾ç½®â€“&gt;å¤´åƒâ€“&gt;iCloudç”µè„‘æ‰“å¼€iCloudï¼šç³»ç»Ÿåå¥½è®¾ç½®â€“&gt; iCloud","link":"/notes/macbook/"},{"title":"é¢†ä¿¡ APP","text":"","link":"/notes/linktrust/"},{"title":"ä¸ºä»€ä¹ˆæˆä¸ºä¸€åç¨‹åºå‘˜è¿™ä¹ˆéš¾ï¼Ÿ","text":"æœ‰äººè¯´ï¼Œæ¯ä¸ªçœ‹èµ·æ¥ä¸æ­£å¸¸äººæ— å¼‚çš„å·¥ç¨‹å¸ˆï¼Œå…¶å®éƒ½æ˜¯åœ¨å­¦ä¹ ç¨‹åºå¼€å‘çš„é€”ä¸­ç†¬è¿‡ã€å‹æŠ‘è¿‡ã€è€Œä¸”åˆ›ä¼¤è¿‡çš„åç¤¾ä¼šäººå£«(sociopaths)ã€‚ åœ¨å­¦ä¹ ç¨‹åºå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸çœ‹åˆ°ç½‘ç»œä¸Šçš„ã€Œç”˜è‹¦è°ˆã€ï¼Œä¹Ÿå¬è¿‡èº«è¾¹å‰é€”ä¸€ç‰‡å…‰æ˜çš„å·¥ç¨‹å¸ˆæœ‹å‹ä»¬åˆ†äº«è¿‡å­¦ä¹ å†ç¨‹ï¼Œæ€»è§‰å¾—ä¸åŒçš„äººã€åŒæ ·çš„æ•…äº‹å´ä¸æ–­çš„é‡å¤ï¼Œåƒæ˜¯ç‹¼å«å£°èˆ¬ï¼Œä»è¿œå¤„ä¼ æ¥ä¸€å£°åˆä¸€å£°çš„å›å“ã€‚ æœ€è¿‘è¯»åˆ°Erik Trautmanåœ¨Viking Code Schooléƒ¨è½æ ¼ä¸­çš„æ–‡ç« ã€ŠWhy Learning to Code is So Damn Hardã€‹ï¼Œæ–‡ç« é‡Œå°†å­¦ä¹ å†™ç¨‹åº(Learn to Code)çš„è¿‡ç¨‹åˆ†æˆäº†å››ä¸ªé˜¶æ®µï¼Œå¹¶è§£é‡Šäº†ä¸¤ä¸ªå½±å“å„é˜¶æ®µå½¢æˆçš„å…³é”®å› ç´ ã€Œèµ„æ–™å¯†åº¦ã€ä»¥åŠã€ŒçŸ¥è¯†å¹¿åº¦ã€ï¼Œæœ€åé›†åˆæˆè¿™å¼ å›¾ï¼š è¿™ç¯‡æ–‡ç« å¾ˆæœ‰è¶£ä¹Ÿååˆ†ç¬¦åˆæˆ‘æ‰€å¬é—»çš„é‚£äº›ã€Œå·¥ç¨‹å¸ˆè¾›é…¸å²ã€ï¼Œå› æ­¤å†³å®šå°†è¿™å››ä¸ªé˜¶æ®µä»‹ç»ç»™å¤§å®¶ï¼Œå¸Œæœ›ç¨‹åºåˆå­¦è€…ä»¬åœ¨è¿›å…¥è¿™æ¡ä¸å½’è·¯ä¹‹å‰ï¼Œçœ¼ç›è¦æ”¾äº®ã€è®¡åˆ’è¦å‘¨è¯¦ï¼Œæ¸…æ¥šæ˜ç™½åœ¨å‰æ–¹ç­‰ä½ ä»¬çš„æ˜¯ä»€ä¹ˆï¼Œåšå¥½å®Œå…¨å¿ƒç†å‡†å¤‡å§! æ¥ä¸‹æ¥æˆ‘å°†ä»‹ç»ä»åˆšå¼€å§‹å†™ç¨‹åºåˆ°æˆä¸ºä¸€åå·¥ç¨‹å¸ˆï¼ŒErik Trautmanæ‰€å½’ç±»å¿…ç»çš„å››ä¸ªé˜¶æ®µï¼š æƒ³æˆä¸ºå·¥ç¨‹å¸ˆï¼Œè¯·åšå¥½å‡†å¤‡è¿æ¥è¿™æ®µå¿…ç»ä¹‹è·¯ å…ˆå‡è®¾ä½ å­¦å†™ç¨‹åºçš„ç»ˆæç›®æ ‡æ˜¯è¦é è¿™è¡Œåƒé¥­â€“â€“è¿›å…¥ç›¸å…³é¢†åŸŸå·¥ä½œæˆ–æ˜¯è‡ªè¡Œåˆ›ä¸šï¼Œä½ æ˜¯å¦åšå¥½ä¸‡å…¨å‡†å¤‡å¯ä»¥ä»ä½ çš„ä¿¡å¿ƒ(Confidence)è·Ÿèƒ½åŠ›(Capability)æ•£ä½ˆå›¾ä¸­çœ‹å‡ºï¼š éšç€ä½ å…·å¤‡çš„çŸ¥è¯†è·ŸæŠ€èƒ½è¶Šæ¥è¶Šå¤šï¼Œä½ çš„è‡ªä¿¡å¿ƒä¹Ÿä¼šéšä¹‹è€Œå¢å‡ï¼Œæœ€åè¾¾åˆ°èƒ½åŠ›å¤Ÿä¿¡å¿ƒè¶³çš„ã€ŒJob Readyã€ç‚¹ã€‚åœ¨Job Readyå‰åˆ™å¯ä»¥åˆ†æˆå››ä¸ªé˜¶æ®µï¼š ç¬¬ä¸€é˜¶æ®µï¼šæ‰‹ç‰µæ‰‹å¿ƒè¿å¿ƒèœœæœˆæœŸåˆšå¼€å§‹è¿›å…¥ç¨‹åºå¼€å‘ç•Œçš„æœ‹å‹ä»¬æ€»æ˜¯æ€€æŠ±ç€è¿œå¤§çš„æ¢¦æƒ³è·ŸæŠ±è´Ÿï¼Œè¿™ä¸èƒ½æ€ªä»–ä»¬ï¼Œæ¯•ç«Ÿä¸€æ–¹é¢ï¼Œå¤§å®¶å°æ—¶å€™å¬å¤šäº†ã€Œå†™ç¨‹åºå¾ˆéš¾ã€ã€ã€Œç”µè„‘ç§‘å­¦å¾ˆç¡¬ã€è¿™ç§ä¼ é—»ï¼Œä»ä¸€å¼€å§‹å°±æŠŠä¸å°‘äººå“å»å¿µç¤¾ä¼šç§‘å­¦(â€¦æ²¡æœ‰å†’çŠ¯ç¤¾ä¼šç§‘å­¦ä¸“ä¸šäººå£«çš„æ„æ€);å¦ä¸€æ–¹é¢ï¼Œã€Œå…¨æ°‘å†™ç¨‹åºã€è¿™é¡¹è¿åŠ¨å®åœ¨å¤ªæˆåŠŸï¼ŒåŠé—´è®¸å¤šå·¥å…·è·Ÿå­¦ä¹ å¹³å°è®©ç¨‹åºå¼€å‘å˜å¾—è¶…å¥½ç†è§£ã€ä¸Šæ‰‹å®¹æ˜“ï¼Œåƒæ˜¯Codecademyã€Treehouseã€è·ŸCode Schoolç­‰çº¿ä¸Šå¹³å°ï¼Œæˆ–æ˜¯éº»çœç†å·¥çš„Scratchè¯­è¨€ã€Googleçš„Blocklyç­‰ç¨‹åºè¯­è¨€å·¥å…·ï¼ŒæˆåŠŸåœ°è¥é€ äº†äººäººéƒ½èƒ½å†™ç¨‹åºè€Œä¸”é è¿™è¡Œåƒé¥­çš„å‡è±¡å½¢è±¡ã€‚ çªç„¶é—´æˆ‘ä»¬çš„é—®é¢˜ä¸å†æ˜¯ã€Œå›°éš¾åº¦ã€ï¼Œè€Œæ˜¯ã€Œæ¯”å¤©é«˜çš„æœŸæœ›ã€è·Ÿã€Œæ¯”åœ°å¤§çš„æ¢¦æƒ³ã€ã€‚ æœ€é‡è¦çš„æ˜¯ï¼Œä»¥ä¸Šæåˆ°çš„è¿™äº›å·¥å…·è·Ÿå¹³å°å®åœ¨å¤ªæœ‰ç”¨ï¼Œå¸¦é¢†æ¯«æ— ç¨‹åºå¼€å‘ç»éªŒçš„åˆå­¦è€…ä»¬ä¸€æ­¥æ­¥è®¤è¯†å˜æ•°ã€æ¡ä»¶è¯­å¥ã€ç¨‹åºè¯­æ³•ã€‚å½“ä½ ä¸€è·¯è¿‡å…³æ–©å°†æŠŠç¨‹åºè¯­è¨€åŸºæœ¬é€»è¾‘è·Ÿè¯­æ³•å­¦ä¼šçš„åŒæ—¶ï¼Œä½ å°±ä¼šè¶…æœ‰æˆå°±æ„Ÿã€è‡ªä¿¡å¿ƒå¤§å¢ï¼Œå¼€å§‹æœ‰ã€ŒåŸæ¥æˆ‘ä¹Ÿè¡Œå˜›ã€ã€ã€Œå†™ç¨‹åºä¹Ÿä¸è¿‡å°±è¿™æ ·ã€çš„æ„Ÿè§‰ï¼ŒåŸºæœ¬ä¸Šè§‰å¾—è‡ªå·±å·²ç»è·Ÿã€Œå·¥ç¨‹å¸ˆã€ç›¸å·®ä¸è¿œäº†ã€‚ è¿™ä¸ªé˜¶æ®µå°†å……æ»¡å–œæ‚¦ä¸æˆå°±æ„Ÿï¼Œåœ¨å„ç§çº¿ä¸Šå·¥å…·ã€ç½‘ç»œæ•™å­¦çš„å¸®åŠ©ä¸‹ï¼Œä½ äº«å—ç€ç”¨æŒ‡å°–ä¸‹æŒ‡ä»¤ã€ç”µè„‘å°±èƒ½å‡†ç¡®æ‰§è¡Œçš„ä¸»å¯¼æ„Ÿï¼Œä½ èµå¹ç€ç¨‹åºè¯­è¨€çš„ç¥å¥‡ä¸å¼ºå¤§ä¹‹å¤„ï¼Œä»Hello Worldåˆ°ç®€å•å›åœˆï¼Œæ¯å®Œæˆä¸€é“ç»ƒä¹ é¢˜ä½ çš„æˆå°±æ„Ÿåˆå¢åŠ å‡ åˆ†ï¼Œå¾ˆå¤šäººä¼šåœ¨è¿™ä¸ªæ—¶å€™è®¤ä¸ºè‡ªå·±å·²ç»çˆ±ä¸Šäº†ç”µè„‘ç§‘å­¦(è€Œä¸”è§‰å¾—ç”µè„‘ç§‘å­¦ä¹Ÿçˆ±ä»–ä»¬)ï¼Œæ­£å¤„äºèƒ½åŠ›æå‡ï¼Œè‡ªä¿¡å¿ƒä¹Ÿå¤§å¢çš„ã€ŒèœœæœˆæœŸã€ï¼Œè¿™æ—¶ä½ å¯èƒ½ä¼šè§‰å¾—ä¸–ç•ŒçœŸç¾å¥½ã€äººç”Ÿå¤§æ¦‚å°±ä¼šä»æ­¤é£é»„è…¾è¾¾ï¼Œä½†æˆ‘å¾—æ®‹é…·çš„å‘Šè¯‰ä½ ï¼š è¿™æ®µæ—…ç¨‹æ‰åˆšå¼€å§‹è€Œå·²ã€‚ ç¬¬äºŒé˜¶æ®µï¼šå›°æƒ‘ä¹‹å´–å°±è·Ÿå¤§éƒ¨ä»½çš„æƒ…ä¾£/æ–°å©šå¤«å¦»ä¸€æ ·ï¼ŒèœœæœˆæœŸä¼šç»“æŸï¼Œä½ ä¼šæ…¢æ…¢å‘ç°ã€Œç›¸çˆ±æ²¡è¿™ä¹ˆç®€å•ã€ã€‚ ä½œä¸šéš¾åº¦ä¸€å¢åŠ (é‡ç‚¹æ˜¯ç¨‹åºç é•¿åº¦ä¹Ÿä¼šè·Ÿç€å¢åŠ )ï¼Œç¨‹åºé”™è¯¯è­¦å‘Šå°±é¢‘é¢‘å‡ºç°ï¼Œå¼€å§‹ä¸åœçš„é™¤é”™(Debug)ã€‚è€Œä¸”é€šå¸¸æœ€å¤§çš„æŒ‘æˆ˜æ˜¯â€“â€“å½“é”™è¯¯å‡ºç°æ—¶ï¼Œä½ æ ¹æœ¬ä¸çŸ¥é“é”™åœ¨å“ªé‡Œã€è¯¥é—®ä»€ä¹ˆé—®é¢˜ã€‚ä½ çš„å­¦ä¹ è¿›åº¦åœ¨è¿™ä¸ªé˜¶æ®µå¼€å§‹åœæ»ä¸å‰ï¼Œåƒè·¯èµ°åˆ°ä¸€åŠçªç„¶é‡åˆ°æ‚¬å´–è€Œæ— è·¯å¯èµ°èˆ¬ï¼Œå¼€å§‹å¯¹ä¹‹å‰çš„è®¤çŸ¥æ„Ÿåˆ°å›°æƒ‘ï¼Œè·Ÿç€ä¿¡å¿ƒå¤§å¤±ã€‚ é€šå¸¸è¿™ä¸ªé˜¶æ®µä¼šåœ¨ä½ å®Œæˆçº¿ä¸Šçš„åŸºç¡€æ•™å­¦åå‘ç”Ÿã€‚ä»¥åˆ¶ä½œä¸ªäººç½‘ç«™(Portfolio Website)ä¸ºä¾‹å¥½äº†ï¼ŒW3 Schoolå¹³å°æä¾›äº†ä¸€ç³»åˆ—HTMLã€CSSã€JavaScriptç­‰ç½‘é¡µåˆ¶ä½œç›¸å…³çš„ç¨‹åºæ•™å­¦ï¼Œè®©åˆå­¦è€…ä¸€å•å…ƒä¸€å•å…ƒçš„å­¦ä¹ è¯­æ³•è·ŸåŠŸèƒ½ï¼Œæ¯å•å…ƒè¿˜æœ‰ä¾‹å­ç¤ºèŒƒç”¨æ³•ï¼Œçœ‹ä¼¼å¥½ç®€å•!å…¨éƒ¨è·Ÿç€å­¦ä¸€éä¹‹åï¼Œä½ å‡†å¤‡å¥½åŠ¨æ‰‹æ‰“é€ è‡ªå·±çš„ç½‘ç«™ï¼Œæ‰“å¼€æ–‡å­—ç¼–è¾‘å™¨ï¼Œâ€¦â€¦ï¼Œç„¶åå†™æ²¡ä¸¤è¡Œå°±å¡å…³äº†ã€‚ ä¹Ÿè®¸é Googleæœå¯»å¯ä»¥è®©ä½ æ’‘åˆ°å®Œæˆç½‘ç«™åŸºæœ¬æ¶æ„ï¼Œä½†å½“ä½ æƒ³å®ç°è‡ªå·±çš„åˆ›æ„ã€åŠ ä¸Šä¸ªäººåŒ–çš„è®¾è®¡æ—¶ï¼Œç½‘ç»œä¸Šçš„å›ç­”è·Ÿç¤ºèŒƒæ€»æ˜¯å’Œä½ å¿ƒé‡Œæ‰€æƒ³çš„ä¸å¤ªä¸€æ ·ï¼Œæ‰€ä»¥ç¨‹åºç ä¸èƒ½å…¨æŠ„ï¼Œç„¶è€Œå·¦æ‹¼å³å‡‘å‡ºçš„ç¨‹åºç çœ‹ä¼¼å¯è¡Œä½†å®é™…ä¸Šå·®å¾—å¯è¿œäº†!ååè¿˜ä¸çŸ¥ä»ä½•debugèµ·ï¼Œå¯èƒ½æŠ•èµ„äº†å¤§åŠçš„æ—¶é—´ç¨‹åºç è¿˜ã€Œæœ‰å‡æ— å¢ã€ï¼Œæ¯«æ— è¿›å±•å¯è¨€ã€‚ è¿™æ˜¯ä¸€ä¸ªå°¤å…¶æŒ«æŠ˜çš„å¿…ç»é˜¶æ®µï¼Œæƒ³æˆä¸ºProgrammerå°±å¿…é¡»ç»å†è¿™ä¸ªå…³å¡ï¼Œå‹‡æ•¢è·³ä¸‹æ‚¬å´–ã€é€¼è‡ªå·±å±•ç¿…é«˜é£(å½“ç„¶åœ¨è¿™ä¸ªé˜¶æ®µæ‘”æ­»çš„å°é›é¸Ÿæ•°é‡ååˆ†å¯è§‚)ã€‚ ä½†å³ä½¿ä½ æ¶ˆç­äº†æ— æ•°çš„bugï¼Œç»ˆäºå®Œæˆäº†å‡ ä¸ªå°ä¸“æ¡‰åï¼Œä½ ä¹Ÿåˆ«é«˜å…´å¾—å¤ªæ—©ï¼Œæœªæ¥çš„è·¯è¿˜æ˜¯éå¸¸é•¿è¿œè€Œä¸”æŒ‘æˆ˜æ€§æ›´é«˜!å¯¹äºæƒ³è¿›å…¥è¿™è¡Œåƒé¥­çš„äººæ¥è¯´ï¼Œã€Œå›°æƒ‘ä¹‹å´–ã€é€šå¸¸æ˜¯ä½ å†³å®šæ˜¯å¦å…¨å¿ƒå…¨æ„è¿›å…¥è¿™ä¸€è¡Œçš„è½¬æ©ç‚¹ï¼Œè€Œå½“ä½ æŠ•èµ„æ‰€æœ‰çš„æ—¶é—´å¿ƒåŠ›åœ¨å†™ç¨‹åºä¸Šæ—¶ï¼Œä½ å°†è¿›å…¥æœ€è®©äººå¿ƒç°æ„å†·çš„ç¬¬ä¸‰é˜¶æ®µã€‚ ä½ å¯èƒ½ä¼šå¾ˆå¥½å¥‡ï¼Œåˆ°åº•ä¸ºä»€ä¹ˆç´§ç´§ç›¸è¿çš„ç¬¬ä¸€é˜¶æ®µ(èœœæœˆæœŸ)è·Ÿç¬¬äºŒé˜¶æ®µ(å›°æƒ‘ä¹‹å´–)ä¼šå·®è¿™ä¹ˆå¤š?å¦‚æœä½ ä¹Ÿæ­£åœ¨ç»å†ä»¥ä¸Šä¸¤ä¸ªé˜¶æ®µï¼Œä½ è¦çŸ¥é“ï¼Œé€ æˆé˜¶æ®µè½¬æ¢çš„åŸå› è·Ÿä½ ä¸€ç‚¹å…³ä¿‚éƒ½æ²¡æœ‰ï¼Œå¹¶ä¸å®Œå…¨æ˜¯å› ä¸ºä½ æ¯”åˆ«äººç¬¨æˆ–æ¯”åˆ«äººä¸åŠªåŠ›ï¼Œè€Œæ˜¯å› ä¸ºã€Œèµ„æºå¯†åº¦ã€æ”¹å˜çš„ç¼˜æ•…ã€‚ å› ç´ 1ï¼šèµ„æºå¯†åº¦Resource Density åœ¨ç¬¬ä¸€é˜¶æ®µä¸­æœ‰æåˆ°ï¼Œå½“é›¶ç»éªŒé›¶åŸºç¡€çš„ä½ å¼€å§‹å­¦ä¹ å†™ç¨‹åºæ—¶ï¼Œèº«è¾¹æœ‰ç€æ— æ•°çš„èµ„æºè·Ÿå·¥å…·ç­‰ç€ä½ æ¥è¿ç”¨ã€‚åˆ°Googleæœå¯»æ‰“ã€ŒLearn to Codeã€ä½ ä¼šæŸ¥åˆ°è¶…å¤šç¨‹åºå­¦ä¹ å¹³å°ã€æ•™å­¦æ–‡ã€æ•™å­¦å½±ç‰‡ã€ç”šè‡³ç»éªŒè°ˆï¼Œè®©ä½ æ„Ÿåˆ°ä¸‡åˆ†çš„äº²åˆ‡åŠæ¸©æš–ï¼Œå…¶ã€Œæ‰‹ç‰µæ‰‹å¿ƒè¿å¿ƒèœœæœˆæœŸã€çš„ç§°è°“å½“ä¹‹æ— æ„§ã€‚ ç„¶è€Œåˆ°äº†ç¬¬äºŒé˜¶æ®µæ—¶ï¼Œè¿™äº›æ•™å­¦èµ„æºçš„æ•°é‡å°†å¤§ä¸ºéª¤å‡ï¼Œä»»ä½•ä¸€ä¸ªåˆšè„±ç¦»åˆå­¦è€…çš„ç¨‹åºå­¦ä¹ è€…éƒ½èƒ½å¤Ÿè¯å®æˆ‘æ­¤è¨€ä¸å‡ã€‚åˆå­¦è€…ä¸€å¼€å§‹é‡åˆ°çš„éšœç¢éƒ½æ˜¯ã€Œä¸€èˆ¬å¸¸è§é—®é¢˜ã€ï¼Œæ•™å­¦æ–‡ã€æ•™ç§‘ä¹¦é‡Œå°±ä¼šæ³¨æ˜äº†;åæœŸç”±äºä½œä¸šéš¾åº¦ä»¥åŠä¸ªäººéœ€æ±‚ï¼Œé—®é¢˜æ‰æ¸æ¸å¤æ‚èµ·æ¥ï¼Œè¦ä»Stack Overflowæˆ–æ˜¯ä¸€äº›ç¨‹åºäººçš„éƒ¨è½æ ¼ä¸­å»æ‰¾å¯»è§£é¢˜çº¿ç´¢ã€‚ä¸€ç›´åˆ°åœ¨ä½ é‡åˆ°çš„é—®é¢˜å·²ç»æ£˜æ‰‹åˆ°ç½‘ç»œä¸Šæ ¹æœ¬æ‰¾ä¸å¤ªåˆ°çº¿ç´¢çš„æ—¶å€™ï¼Œä½ ä¾¿è¿›å…¥äº†ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚ ç¬¬ä¸‰é˜¶æ®µï¼šç»æœ›æ²™æ´²è¦äº†è§£è¿›å…¥ç¬¬ä¸‰é˜¶æ®µçš„å…³é”®ï¼Œå°±è¦äº†è§£å¦ä¸€é¡¹å½±å“ç€å„é˜¶æ®µå˜åŒ–çš„é‡è¦å› ç´ ï¼šçŸ¥è¯†å¹¿åº¦ã€‚ å› ç´ 2ï¼šçŸ¥è¯†å¹¿åº¦Scope of Knowledge ã€ŒçŸ¥è¯†å¹¿åº¦ã€ä¹Ÿå°±æ˜¯åº¦è¿‡æ¯ä¸ªé˜¶æ®µä½ æ‰€å¿…å¤‡çš„çŸ¥è¯†é¢†åŸŸèŒƒå›´ã€‚åˆšå¼€å§‹æ—¶ä½ éœ€è¦å¸æ”¶çš„çŸ¥è¯†å¾ˆé›†ä¸­ï¼Œä¸ç®¡ç”¨å“ªç§ç¨‹åºè¯­è¨€ã€ä¸ç®¡åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Œé¦–å…ˆéƒ½è¦å­¦ä¼šå˜æ•°å‹æ€ã€å®£å‘Šè¯­æ³•ã€å›åœˆåŠæ¡ä»¶åˆ¤æ–­å¼ç­‰ç­‰ï¼Œè¿™æ—¶éšä¾¿è¯·ä¸€ä¸ªå·¥ç¨‹å¸ˆæ•™ä½ éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºã€Œé‡è¦é¡»çŸ¥ã€å°±æ˜¯è¿™å‡ ç‚¹è€Œå·²ã€‚ ç„¶è€Œå­¦å®ŒåŸºæœ¬åŠŸåï¼Œä½ æ‰€éœ€çš„çŸ¥è¯†é¢†åŸŸä¼šä¸€ä¸‹å­æ‰©å±•å¾ˆå¤šï¼Œåƒæ˜¯å¼€å§‹å­¦ä¹ ç‰©ä»¶å¯¼å‘æˆ–æ˜¯ç€é‡æ¼”ç®—æ³•çš„æ•ˆç‡ï¼Œä½ ä¼šéœ€è¦æ‰å®çš„ç”µè„‘ç§‘å­¦èƒŒæ™¯æ¥åº”ä»˜ï¼Œè€Œä¸”æ¯ä¸€ä¸ªåº”ç”¨éƒ½å¯ä»¥ç‰µæ‰¯å‡ºæ›´å¤šçš„å˜åŒ–â€¦ç›¸ä¿¡æˆ‘ï¼Œè¿™ä¸æ˜¯å‡ å ‚MOOCè¯¾ç¨‹å°±èƒ½æ•‘å¾—äº†ä½ çš„ã€‚ åœ¨è¿™ä¸ªæ—¶æœŸï¼Œä¸‡èƒ½çš„Googleä¹Ÿåªä¼šä¸¢ç»™ä½ æ›´å¤šä½ ä¸æ‡‚çš„ä¸œè¥¿ï¼Œæ ¹æœ¬æŸ¥ä¸åˆ°ç›¸å…³çš„çº¿ç´¢!æœ€ç³Ÿçš„æ˜¯ä½ æ ¹æœ¬ä¸çŸ¥é“ä½ ä»€ä¹ˆä¸çŸ¥é“ã€‚(You donâ€™t know what you donâ€™t know.)ã€‚äºæ˜¯ã€Œå­¦ä¹Ÿå­¦ä¸å®Œã€è¶Šå­¦è¶Šä¸æ‡‚ã€çš„æ— åŠ›æ„Ÿæ’å±±å€’æµ·è€Œæ¥ï¼Œè¿›å…¥æœ€æœ€éš¾ç†¬çš„ç¬¬ä¸‰é˜¶æ®µâ€“â€“ã€Œç»æœ›æ²™æ´²ã€ã€‚ è¿™ä¸ªé˜¶æ®µé¡¾åæ€ä¹‰åƒæ˜¯åœ¨æ¨ªè¶Šæ²™æ¼ èˆ¬ï¼Œæ˜¯ä¸€æ®µéå¸¸é•¿ä¸”å¯‚å¯çš„æ—…ç¨‹ï¼Œè®©ä½ æœ‰ä¸çŸ¥ä½•å¹´ä½•æœˆæ‰èƒ½èµ°å‡ºæ¥çš„ç»æœ›æ„Ÿã€‚åœ¨ä¸€æœ›æ— é™…çš„æ²™æ¼ é‡Œï¼Œæ ¹æœ¬æä¸æ¸…æ¥šä¸œè¥¿å—åŒ—ï¼Œèµ„æ–™æŸ¥äº†åŠå¤©æ¯«æ— æ–©è·ï¼Œè¿˜ä¸æ—¶è¢«æµ·å¸‚èœƒæ¥¼(é”™è¯¯èµ„è®¯æˆ–çœ‹ä¼¼å¯è¡Œçš„è§£å†³æ–¹æ¡‰)ç»™è¯¯å¯¼ï¼Œæå¾—ç°å¤´åœŸè„¸ã€å¤´æ˜çœ¼èŠ±ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µæ™’æ­»ã€æ¸´æ­»ã€ç»æœ›æ­»çš„æœ‰ä¸ºé’å¹´æ›´æ˜¯ä¸è®¡å…¶æ•°ã€‚ ä½†åªè¦åœ¨ç»æœ›æ²™æ´²é‡Œç†¬ä¸‹å»ï¼Œæ¥ä¸‹æ¥å°±ä¼šè‡ªåœ¨è®¸å¤šäº†!ç´¯ç§¯è¶³å¤Ÿçš„ç»éªŒï¼Œç¨‹åºçš„é”™è¯¯å°±ä¼šå¤§é‡å‡å°‘ã€è¾¾åˆ°ä¸€å®šçŸ¥è¯†æ°´å‡†ï¼Œå°±èƒ½å‡†ç¡®åˆ¤æ–­é—®é¢˜çš„æ–¹å‘åˆ‡å…¥æ ¸å¿ƒï¼Œå·¥ä½œæ•ˆç‡å› è€Œæœ‰æ‰€å¢è¿›ï¼ŒçŸ¥è¯†å¹¿åº¦ä¹Ÿä¼šæ…¢æ…¢èšç„¦ã€‚ç­‰ä½ æ‹–ç€ä¸€èº«çš„ç–²æƒ«ç»ˆäºèµ°å‡ºè¿™è’æ¼ æ—¶ï¼Œå°±è¿›å…¥äº†æœ€åçš„é˜¶æ®µã€‚ ç¬¬å››é˜¶æ®µï¼šåˆ›ä¼¤åçš„æ¢å¤æœŸè¸©ç€åƒä¸‡äººçš„å°¸ä½“æˆåŠŸæ¨ªè¶Šäº†æ²™æ¼ ï¼Œä½ çš„è‡ªä¿¡å¿ƒå¼€å§‹å›å‡ï¼ŒGoogleåŠŸåŠ›ä¹Ÿå¯ä»¥è¯´æ˜¯ç¥äººçš„ç­‰çº§ã€‚åˆ°äº†è¿™ä¸ªæ—¶å€™ï¼ŒHacker Newsçš„æ–°é—»ä»¥åŠè¶…ç¡¬çš„MOOCè¯¾ç¨‹éƒ½ä¸æˆé—®é¢˜ï¼Œä½ ä¹Ÿé€‰å®šäº†æŸä¸ªç¨‹åºè¯­è¨€è·Ÿæ¡†æ¶æ¥ä¸“ç ”ï¼Œè€Œä¸”æœ‰èƒ½åŠ›åˆ¶ä½œå‡ºå¯ä»¥æ­£å¸¸è¿ä½œçš„åº”ç”¨ç¨‹åºäº†ã€‚ ä½†ä½ å¿ƒé‡Œæ·±å¤„æ€»æœ‰ç€éšéšçš„ä¸å®‰ï¼Œè§‰å¾—ç¨‹åºèƒ½ã€Œç”¨ã€ä½†å…¶å®ä»£ç å‡Œä¹±æ— ç« ï¼Œå·¥ç¨‹å¸ˆçš„å¤´è¡”ä¸‹å…¶å®æ˜¯è¯¯æ‰“è¯¯æ’è¿›è¿™è¡Œçš„åŠè°ƒå­ï¼Œè™½ç„¶ä½ ä¼¼ä¹å…·å¤‡äº†ä¸€åˆ‡å°±èŒæ¡ä»¶ï¼Œå´æ€»å®³æ€•é¢è¯•å®˜å‘ç°ä½ æ ¹åŸºè–„å¼±çš„ç”µè„‘çŸ¥è¯†â€¦ä½ æ­£åœ¨ç»å†ã€Œåˆ›ä¼¤åçš„æ¢å¤æœŸã€ã€‚ åœ¨é£è¶Šå›°æƒ‘ä¹‹å´–ã€æ¨ªè¶Šç»æœ›æ²™æ´²ä¹‹åï¼Œä½ åº”è¯¥å·²ç»å­¦ä¼šè¯¥å­¦çš„ã€åšäº†è¯¥åšçš„ï¼Œæˆä¸ºä¸€ä¸ªåç¬¦å…¶å®çš„å·¥ç¨‹å¸ˆï¼Œå´æ€»è§‰å¾—è‡ªå·²èµ„è´¨å¹³åº¸æ ¹åŸºä¸ç¨³ï¼Œè™½ç„¶æœ‰æˆåŠŸæ‰“é€ å‡ºä¸€ä¸ªä¸ªä¸“æ¡ˆè€Œä¿¡å¿ƒå›å‡ï¼Œä½†è€æ˜¯æ„Ÿå¹è‡ªå·±ä¸å¿ƒç›®ä¸­ã€Œä¸“ä¸šå·¥ç¨‹å¸ˆã€ä»æœ‰ä¸€å¤§æ®µå·®è·â€¦ï¼Œè¿™äº›éƒ½æ˜¯ã€Œå†’ç‰Œè€…ç—‡å€™ç¾¤ã€(Impostor Syndrome)åœ¨ä½œç¥Ÿ! åœ¨è¿™åˆ›ä¼¤åçš„æ¢å¤æœŸä¸­ï¼Œä½ å¯èƒ½ä¼šç»å¸¸è‡ªæˆ‘æ€€ç–‘ï¼Œä½†åªè¦é¡ºç€è¿™æ³¢æ•ˆç‡æå‡ä¿¡å¿ƒä¹Ÿå›å‡çš„æ½®æµç»§ç»­åŠªåŠ›ï¼Œåœ¨èƒ½åŠ›ä¸è‡ªä¿¡è¾¾åˆ°ä¸€ä¸ªç¨‹åº¦æ—¶â€¦æ­å–œä½ ï¼šYou Are Job Ready! æ¥æºï¼šinside ä½œè€…ï¼šJewel","link":"/notes/programmer/"},{"title":"ä¸­å›½åˆä¼™äºº","text":"è¯·è¾“å…¥è¦é˜…è¯»çš„å¯†ç ã€‚ Incorrect Password! No content to display! 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","link":"/notes/partner/"},{"title":"programming","text":"çº¢ç‰›é™ªä¼´ï¼","link":"/notes/programming/"},{"title":"åŸ¹è®­","text":"å…¥èŒåŸ¹è®­","link":"/notes/training/"},{"title":"è¯ºåŸºäºš","text":"â¬‡ï¸","link":"/news/nokia/"},{"title":"å°ç±³","text":"æ˜¨å¤©ï¼Œæ¥åˆ°äº†å°ç±³çš„ç”µè¯ï¼Œè¿™ä¸ªåˆšåˆšæ»¡äºŒåå²å°ä¼™å­è¯´è‡ªå·±æœ‰äº›æ„Ÿåˆ°å­¤å•ï¼Œæˆ‘åŠå¼€ç©ç¬‘çš„è¯´ï¼šå»è°ˆæ‹çˆ±å§ã€‚äºŒåå²ï¼Œä¸€ä¸ªå¤šå°‘äººç¾¡æ…•çš„å¹´é¾„ï¼Œæˆ‘åœ¨äºŒåå²çš„æ—¶å€™ï¼Œè¿˜åœ¨è±¡ç‰™å¡”ä¸­è¯»ä¹¦ï¼Œå°ç±³å·²ç„¶å·¥ä½œäº†ä¸€å¹´ã€‚è¯è¯­ä¸­ä»–æµéœ²å‡ºä¸ç¤¾ä¼šé—´çš„ä¸å®Œå…¨èå…¥ï¼Œè‹¦äº†ä»–äº†ã€‚æƒ­æ„§çš„æ˜¯æˆ‘å†™ä¸‹è¿™æ®µæ–‡å­—çš„æ—¶å€™ï¼Œæˆ‘å¹¶æ²¡æœ‰èƒ½å¤Ÿç»™ä»–è¶³å¤Ÿçš„å¯è¡Œæ€§å»ºè®®ï¼Œæ›´å¤šçš„æ˜¯ä¸€ä¸ªå€¾å¬è€…ã€‚æˆ‘æ„Ÿè°¢ä»–èƒ½åœ¨ä¸å¦‚æ„çš„æ—¶å€™æƒ³åˆ°æˆ‘ï¼Œ","link":"/notes/xiaomi/"},{"title":"çŸ³å®¶åº„","text":"å†æ¬¡æ¥åˆ°è¿™åº§åŸï¼Œå½“ç«è½¦åˆ°è¾¾è½¦ç«™çš„æ—¶å€™ï¼Œæˆ‘æ‰æ„è¯†åˆ°æˆ‘å¾ˆä¹…æ²¡æœ‰æ¥è¿‡äº†ã€‚ç«è½¦ç«™å…·ä½“çš„ä½ç½®æ²¡æœ‰å¼„æ¸…æ¥šï¼Œä½†æ˜¯çœŸçš„å¾ˆæ°”æ´¾çš„å»ºç­‘ï¼Œææƒšé—´ä»¥ä¸ºæ˜¯åŒ—äº¬å—ç«™ã€‚å¸‚å†…å…¬äº¤ï¼ˆè‡³å°‘æˆ‘åçš„é‚£è·¯ï¼‰æ¯”åŒ—äº¬çš„è¦å¥½ï¼Œæˆ–è®¸æ˜¯æ–°è½¦çš„åŸå› ã€‚æ™šé¥­å’Œé¢å¯¹ä¸€æ¡Œçš„åˆæ¬¡è§é¢çš„äººï¼Œæˆ‘æŠ¿äº†ååˆ†ä¹‹ä¸€æ¯ç™½é…’ï¼Œå´æ„Ÿè§‰æ™•ä¹ä¹çš„ã€‚æ­¤åˆ»èººåœ¨å®¾é¦†çš„åºŠä¸Šï¼Œå¾®å›°ã€‚","link":"/notes/sjz/"},{"title":"å‘Šåˆ«","text":"å‘Šåˆ«å·¥ä½œå¤šå¹´çš„å…¬å¸ï¼Œæˆ‘è¦æœ‰è‡ªå·±å…¬å¸äº†ã€‚","link":"/notes/cym/"},{"title":"ä¸‹é›ªäº†","text":"é›ªä¸‹çš„é‚£ä¹ˆæ·±ï¼Œä¸‹çš„é‚£ä¹ˆè®¤çœŸã€‚","link":"/notes/xue/"},{"title":"1803çš„æœ›äº¬è¥¿","text":"1803çš„æœ›äº¬è¥¿ï¼Œé›¨åçš„æ®‹äº‘è£¹ç€æ–œé˜³ï¼Œæˆ‘çœ¯ç€ç–²æƒ«çš„åŒçœ¼ï¼ŒæŠ¿å˜´å¾®ç¬‘ï¼Œç•¥å¸¦å‡‰æ„çš„é£å¹è¿‡ï¼Œæ­¤åˆ»ï¼Œå°±æƒ³è¿™ä¹ˆèµ°ï¼Œä¸€ç›´èµ°ï¼Œèµ°å¾ˆä¹…å¾ˆä¹…ï¼","link":"/notes/wjx/"},{"title":"gitå¦‚ä½•åˆ é™¤å·²ç»æäº¤çš„æ–‡ä»¶å¤¹","text":"åœ¨ä¸Šä¼ é¡¹ç›®åˆ°githubæ—¶,å¿˜è®°å¿½ç•¥äº†æŸä¸ªæ–‡ä»¶å¤¹.idea,å°±ç›´æ¥pushä¸Šå»äº†, æœ€åæ„è¯†åˆ°äº†æ­¤é—®é¢˜,å†³å®šåˆ é™¤æ‰è¿œç¨‹ä»“åº“ä¸­çš„.ideaæ–‡ä»¶å¤¹ åœ¨githubä¸Šåªèƒ½åˆ é™¤ä»“åº“,å´æ— æ³•åˆ é™¤æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶, æ‰€ä»¥åªèƒ½é€šè¿‡å‘½ä»¤æ¥è§£å†³ é¦–å…ˆè¿›å…¥ä½ çš„masteræ–‡ä»¶å¤¹ä¸‹, Git Bash Here ,æ‰“å¼€å‘½ä»¤çª—å£ $ git --help # å¸®åŠ©å‘½ä»¤ $ git pull origin master # å°†è¿œç¨‹ä»“åº“é‡Œé¢çš„é¡¹ç›®æ‹‰ä¸‹æ¥ $ ls # æŸ¥çœ‹æœ‰å“ªäº›æ–‡ä»¶å¤¹ $ git rm -r --cached .idea # åˆ é™¤.ideaæ–‡ä»¶å¤¹ $ git commit -m 'åˆ é™¤.idea' # æäº¤,æ·»åŠ æ“ä½œè¯´æ˜ $ git push -u origin master # å°†æœ¬æ¬¡æ›´æ”¹æ›´æ–°åˆ°githubé¡¹ç›®ä¸Šå» ä½œè€…ï¼š çš®çš®ä»Š","link":"/program/Git/git-del/"},{"title":"GIT","text":"åŒç”Ÿæ´»ä¸­çš„è®¸å¤šä¼Ÿå¤§äº‹ä»¶ä¸€æ ·ï¼ŒGit è¯ç”Ÿäºä¸€ä¸ªæå¯Œçº·äº‰å¤§ä¸¾åˆ›æ–°çš„å¹´ä»£ã€‚Linux å†…æ ¸å¼€æºé¡¹ç›®æœ‰ç€ä¸ºæ•°ä¼—å¹¿çš„å‚ä¸è€…ã€‚ç»å¤§å¤šæ•°çš„ Linux å†…æ ¸ç»´æŠ¤å·¥ä½œéƒ½èŠ±åœ¨äº†æäº¤è¡¥ä¸å’Œä¿å­˜å½’æ¡£çš„ç¹çäº‹åŠ¡ä¸Šï¼ˆ1991ï¼2002å¹´é—´ï¼‰ã€‚ å¾ˆå¤šäººéƒ½çŸ¥é“ï¼ŒLinusåœ¨1991å¹´åˆ›å»ºäº†å¼€æºçš„Linuxï¼Œä»æ­¤ï¼ŒLinuxç³»ç»Ÿä¸æ–­å‘å±•ï¼Œå·²ç»æˆä¸ºæœ€å¤§çš„æœåŠ¡å™¨ç³»ç»Ÿè½¯ä»¶äº†ã€‚ Linus Torvalds è™½ç„¶åˆ›å»ºäº†Linuxï¼Œä½†Linuxçš„å£®å¤§æ˜¯é å…¨ä¸–ç•Œçƒ­å¿ƒçš„å¿—æ„¿è€…å‚ä¸çš„ï¼Œè¿™ä¹ˆå¤šäººåœ¨ä¸–ç•Œå„åœ°ä¸ºLinuxç¼–å†™ä»£ç ï¼Œé‚£Linuxçš„ä»£ç æ˜¯å¦‚ä½•ç®¡ç†çš„å‘¢ï¼Ÿ äº‹å®æ˜¯ï¼Œåœ¨2002å¹´ä»¥å‰ï¼Œä¸–ç•Œå„åœ°çš„å¿—æ„¿è€…æŠŠæºä»£ç æ–‡ä»¶é€šè¿‡diffçš„æ–¹å¼å‘ç»™Linusï¼Œç„¶åç”±Linusæœ¬äººé€šè¿‡æ‰‹å·¥æ–¹å¼åˆå¹¶ä»£ç ï¼ ä½ ä¹Ÿè®¸ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆLinusä¸æŠŠLinuxä»£ç æ”¾åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé‡Œå‘¢ï¼Ÿä¸æ˜¯æœ‰CVSã€SVNè¿™äº›å…è´¹çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå—ï¼Ÿå› ä¸ºLinusåšå®šåœ°åå¯¹CVSå’ŒSVNï¼Œè¿™äº›é›†ä¸­å¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸ä½†é€Ÿåº¦æ…¢ï¼Œè€Œä¸”å¿…é¡»è”ç½‘æ‰èƒ½ä½¿ç”¨ã€‚æœ‰ä¸€äº›å•†ç”¨çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè™½ç„¶æ¯”CVSã€SVNå¥½ç”¨ï¼Œä½†é‚£æ˜¯ä»˜è´¹çš„ï¼Œå’ŒLinuxçš„å¼€æºç²¾ç¥ä¸ç¬¦ã€‚ ä¸è¿‡ï¼Œåˆ°äº†2002å¹´ï¼ŒLinuxç³»ç»Ÿå·²ç»å‘å±•äº†åå¹´äº†ï¼Œä»£ç åº“ä¹‹å¤§è®©Linuså¾ˆéš¾ç»§ç»­é€šè¿‡æ‰‹å·¥æ–¹å¼ç®¡ç†äº†ï¼Œç¤¾åŒºçš„å¼Ÿå…„ä»¬ä¹Ÿå¯¹è¿™ç§æ–¹å¼è¡¨è¾¾äº†å¼ºçƒˆä¸æ»¡ï¼Œäºæ˜¯Linusé€‰æ‹©äº†ä¸€ä¸ªå•†ä¸šçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»ŸBitKeeperï¼ŒBitKeeperçš„ä¸œå®¶BitMoverå…¬å¸å‡ºäºäººé“ä¸»ä¹‰ç²¾ç¥ï¼ŒæˆæƒLinuxç¤¾åŒºå…è´¹ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚ å®‰å®šå›¢ç»“çš„å¤§å¥½å±€é¢åœ¨2005å¹´å°±è¢«æ‰“ç ´äº†ï¼ŒåŸå› æ˜¯Linuxç¤¾åŒºç‰›äººèšé›†ï¼Œä¸å…æ²¾æŸ“äº†ä¸€äº›æ¢å±±å¥½æ±‰çš„æ±Ÿæ¹–ä¹ æ°”ã€‚å¼€å‘Sambaçš„Andrewè¯•å›¾ç ´è§£BitKeeperçš„åè®®ï¼ˆè¿™ä¹ˆå¹²çš„å…¶å®ä¹Ÿä¸åªä»–ä¸€ä¸ªï¼‰ï¼Œè¢«BitMoverå…¬å¸å‘ç°äº†ï¼ˆç›‘æ§å·¥ä½œåšå¾—ä¸é”™ï¼ï¼‰ï¼Œäºæ˜¯BitMoverå…¬å¸æ€’äº†ï¼Œè¦æ”¶å›Linuxç¤¾åŒºçš„å…è´¹ä½¿ç”¨æƒã€‚ Linuså¯ä»¥å‘BitMoverå…¬å¸é“ä¸ªæ­‰ï¼Œä¿è¯ä»¥åä¸¥æ ¼ç®¡æ•™å¼Ÿå…„ä»¬ï¼Œå—¯ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚ å¼€å‘ BitKeeper çš„å•†ä¸šå…¬å¸åŒ Linux å†…æ ¸å¼€æºç¤¾åŒºçš„åˆä½œå…³ç³»ç»“æŸï¼Œä»–ä»¬æ”¶å›äº†å…è´¹ä½¿ç”¨ BitKeeper çš„æƒåŠ›ã€‚è¿™å°±è¿«ä½¿ Linux å¼€æºç¤¾åŒºï¼ˆç‰¹åˆ«æ˜¯ Linux çš„ç¼”é€ è€… Linus Torvalds ï¼‰ä¸å¾—ä¸å¸å–æ•™è®­ï¼Œåªæœ‰å¼€å‘ä¸€å¥—å±äºè‡ªå·±çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ‰ä¸è‡³äºé‡è¹ˆè¦†è¾™ã€‚ä»–ä»¬å¯¹æ–°çš„ç³»ç»Ÿåˆ¶è®¢äº†è‹¥å¹²ç›®æ ‡ï¼š é€Ÿåº¦ ç®€å•çš„è®¾è®¡ å¯¹éçº¿æ€§å¼€å‘æ¨¡å¼çš„å¼ºåŠ›æ”¯æŒï¼ˆå…è®¸ä¸Šåƒä¸ªå¹¶è¡Œå¼€å‘çš„åˆ†æ”¯ï¼‰ å®Œå…¨åˆ†å¸ƒå¼ æœ‰èƒ½åŠ›é«˜æ•ˆç®¡ç†ç±»ä¼¼ Linux å†…æ ¸ä¸€æ ·çš„è¶…å¤§è§„æ¨¡é¡¹ç›®ï¼ˆé€Ÿåº¦å’Œæ•°æ®é‡ï¼‰ æœ€åå®é™…æƒ…å†µæ˜¯è¿™æ ·çš„ï¼šLinusèŠ±äº†ä¸¤å‘¨æ—¶é—´è‡ªå·±ç”¨Cå†™äº†ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè¿™å°±æ˜¯Gitï¼ä¸€ä¸ªæœˆä¹‹å†…ï¼ŒLinuxç³»ç»Ÿçš„æºç å·²ç»ç”±Gitç®¡ç†äº†ï¼ç‰›æ˜¯æ€ä¹ˆå®šä¹‰çš„å‘¢ï¼Ÿå¤§å®¶å¯ä»¥æ„Ÿå—ä¸€ä¸‹ã€‚ Gitè¿…é€Ÿæˆä¸ºæœ€æµè¡Œçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå°¤å…¶æ˜¯2008å¹´ï¼ŒGitHubç½‘ç«™ä¸Šçº¿äº†ï¼Œå®ƒä¸ºå¼€æºé¡¹ç›®å…è´¹æä¾›Gitå­˜å‚¨ï¼Œæ— æ•°å¼€æºé¡¹ç›®å¼€å§‹è¿ç§»è‡³GitHubï¼ŒåŒ…æ‹¬jQueryï¼ŒPHPï¼ŒRubyç­‰ç­‰ã€‚ å†å²å°±æ˜¯è¿™ä¹ˆå¶ç„¶ï¼Œå¦‚æœä¸æ˜¯å½“å¹´BitMoverå…¬å¸å¨èƒLinuxç¤¾åŒºï¼Œå¯èƒ½ç°åœ¨æˆ‘ä»¬å°±æ²¡æœ‰å…è´¹è€Œè¶…çº§å¥½ç”¨çš„Gitäº†ã€‚","link":"/program/Git/git/"},{"title":"Nginx","text":"ä»€ä¹ˆæ˜¯Nginx?Nginx (engine x) æ˜¯ä¸€æ¬¾è½»é‡çº§çš„Web æœåŠ¡å™¨ ã€åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ã€‚ ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿåå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚ å®‰è£…ä¸ä½¿ç”¨å®‰è£…nginxå®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttps://nginx.orgï¼Œå‘å¸ƒç‰ˆæœ¬åˆ†ä¸º Linux å’Œ windows ç‰ˆæœ¬ã€‚ ä¹Ÿå¯ä»¥ä¸‹è½½æºç ï¼Œç¼–è¯‘åè¿è¡Œã€‚ ä»æºä»£ç ç¼–è¯‘ Nginx æŠŠæºç è§£å‹ç¼©ä¹‹åï¼Œåœ¨ç»ˆç«¯é‡Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginx ä¼šè¢«å®‰è£…åœ¨ /usr/local/nginxã€‚é€šè¿‡è®¾å®šç¼–è¯‘é€‰é¡¹ï¼Œä½ å¯ä»¥æ”¹å˜è¿™ä¸ªè®¾å®šã€‚ Windows å®‰è£… ä¸ºäº†å®‰è£… Nginx / Win32ï¼Œéœ€å…ˆä¸‹è½½å®ƒã€‚ç„¶åè§£å‹ä¹‹ï¼Œç„¶åè¿è¡Œå³å¯ã€‚ä¸‹é¢ä»¥ C ç›˜æ ¹ç›®å½•ä¸ºä¾‹è¯´æ˜ä¸‹ï¼š Nginx / Win32 æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªæ§åˆ¶å°ç¨‹åºï¼Œè€Œé windows æœåŠ¡æ–¹å¼çš„ã€‚æœåŠ¡å™¨æ–¹å¼ç›®å‰è¿˜æ˜¯å¼€å‘å°è¯•ä¸­ã€‚ ä½¿ç”¨nginx çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å‡ æ¡å‘½ä»¤ã€‚ å¸¸ç”¨åˆ°çš„å‘½ä»¤å¦‚ä¸‹ï¼š 123456789101112131415nginx -s stop ï¼šå¿«é€Ÿå…³é—­Nginxï¼Œå¯èƒ½ä¸ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œå¹¶è¿…é€Ÿç»ˆæ­¢webæœåŠ¡ã€‚nginx -s quit ï¼šå¹³ç¨³å…³é—­Nginxï¼Œä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œæœ‰å®‰æ’çš„ç»“æŸwebæœåŠ¡ã€‚nginx -s reload ï¼šå› æ”¹å˜äº†Nginxç›¸å…³é…ç½®ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®è€Œé‡è½½ã€‚nginx -s reopen ï¼šé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ã€‚nginx -c filename ï¼šä¸º Nginx æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¥ä»£æ›¿ç¼ºçœçš„ã€‚nginx -t ï¼šä¸è¿è¡Œï¼Œè€Œä»…ä»…æµ‹è¯•é…ç½®æ–‡ä»¶ã€‚nginx å°†æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œå¹¶å°è¯•æ‰“å¼€é…ç½®æ–‡ä»¶ä¸­æ‰€å¼•ç”¨åˆ°çš„æ–‡ä»¶ã€‚nginx -vï¼šæ˜¾ç¤º nginx çš„ç‰ˆæœ¬ã€‚nginx -Vï¼šæ˜¾ç¤º nginx çš„ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å’Œé…ç½®å‚æ•°ã€‚ å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½æ•²å‘½ä»¤ï¼Œå¯ä»¥åœ¨nginxå®‰è£…ç›®å½•ä¸‹æ–°æ·»ä¸€ä¸ªå¯åŠ¨æ‰¹å¤„ç†æ–‡ä»¶startup.batï¼ŒåŒå‡»å³å¯è¿è¡Œã€‚å†…å®¹å¦‚ä¸‹ï¼š å¦‚æœæ˜¯è¿è¡Œåœ¨ Linux ä¸‹ï¼Œå†™ä¸€ä¸ª shell è„šæœ¬ï¼Œå¤§åŒå°å¼‚ã€‚ nginx é…ç½®å®æˆ˜æˆ‘å§‹ç»ˆè®¤ä¸ºï¼Œå„ç§å¼€å‘å·¥å…·çš„é…ç½®è¿˜æ˜¯ç»“åˆå®æˆ˜æ¥è®²è¿°ï¼Œä¼šè®©äººæ›´æ˜“ç†è§£ã€‚ httpåå‘ä»£ç†é…ç½® æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªå°ç›®æ ‡ï¼šä¸è€ƒè™‘å¤æ‚çš„é…ç½®ï¼Œä»…ä»…æ˜¯å®Œæˆä¸€ä¸ª http åå‘ä»£ç†ã€‚ nginx.conf é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š æ³¨ï¼šconf / nginx.conf æ˜¯ nginx çš„é»˜è®¤é…ç½®æ–‡ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ nginx -c æŒ‡å®šä½ çš„é…ç½®æ–‡ä»¶ å¥½äº†ï¼Œè®©æˆ‘ä»¬æ¥è¯•è¯•å§ï¼š å¯åŠ¨ webappï¼Œæ³¨æ„å¯åŠ¨ç»‘å®šçš„ç«¯å£è¦å’Œnginxä¸­çš„ upstream è®¾ç½®çš„ç«¯å£ä¿æŒä¸€è‡´ã€‚ æ›´æ”¹ hostï¼š åœ¨ C:Windows\\System32\\drivers\\etc ç›®å½•ä¸‹çš„hostæ–‡ä»¶ä¸­æ·»åŠ ä¸€æ¡DNS è®°å½•127.0.0.1 www.javastack.cn å¯åŠ¨å‰æ–‡ä¸­ startup.bat çš„å‘½ä»¤ åœ¨æµè§ˆå™¨ä¸­è®¿é—® www.javastack.cnï¼Œä¸å‡ºæ„å¤–ï¼Œå·²ç»å¯ä»¥è®¿é—®äº†ã€‚ è´Ÿè½½å‡è¡¡é…ç½® ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼Œä»£ç†ä»…ä»…æŒ‡å‘ä¸€ä¸ªæœåŠ¡å™¨ã€‚ ä½†æ˜¯ï¼Œç½‘ç«™åœ¨å®é™…è¿è¥è¿‡ç¨‹ä¸­ï¼Œå¤šåŠéƒ½æ˜¯æœ‰å¤šå°æœåŠ¡å™¨è¿è¡Œç€åŒæ ·çš„appï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡æ¥åˆ†æµã€‚ nginxä¹Ÿå¯ä»¥å®ç°ç®€å•çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚ å‡è®¾è¿™æ ·ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼šå°†åº”ç”¨éƒ¨ç½²åœ¨ 192.168.1.11:80ã€192.168.1.12:80ã€192.168.1.13:80 ä¸‰å°linuxç¯å¢ƒçš„æœåŠ¡å™¨ä¸Šã€‚ç½‘ç«™åŸŸåå« www.javastack.cnï¼Œå…¬ç½‘IPä¸º 192.168.1.11ã€‚åœ¨å…¬ç½‘IPæ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½² nginxï¼Œå¯¹æ‰€æœ‰è¯·æ±‚åšè´Ÿè½½å‡è¡¡å¤„ç†ã€‚ nginx.conf é…ç½®å¦‚ä¸‹ï¼š ç½‘ç«™æœ‰å¤šä¸ªwebappçš„é…ç½® å½“ä¸€ä¸ªç½‘ç«™åŠŸèƒ½è¶Šæ¥è¶Šä¸°å¯Œæ—¶ï¼Œå¾€å¾€éœ€è¦å°†ä¸€äº›åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹çš„æ¨¡å—å‰¥ç¦»å‡ºæ¥ï¼Œç‹¬ç«‹ç»´æŠ¤ã€‚è¿™æ ·çš„è¯ï¼Œé€šå¸¸ï¼Œä¼šæœ‰å¤šä¸ª webappã€‚ ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚ www.javastack.cn ç«™ç‚¹æœ‰å¥½å‡ ä¸ªwebappï¼Œfinanceï¼ˆé‡‘èï¼‰ã€productï¼ˆäº§å“ï¼‰ã€adminï¼ˆç”¨æˆ·ä¸­å¿ƒï¼‰ã€‚è®¿é—®è¿™äº›åº”ç”¨çš„æ–¹å¼é€šè¿‡ä¸Šä¸‹æ–‡(context)æ¥è¿›è¡ŒåŒºåˆ†: www.javastack.cn/finance/ www.javastack.cnproduct/ www.javastack.cn/admin/ æˆ‘ä»¬çŸ¥é“ï¼Œhttpçš„é»˜è®¤ç«¯å£å·æ˜¯80ï¼Œå¦‚æœåœ¨ä¸€å°æœåŠ¡å™¨ä¸ŠåŒæ—¶å¯åŠ¨è¿™3ä¸ª webapp åº”ç”¨ï¼Œéƒ½ç”¨80ç«¯å£ï¼Œè‚¯å®šæ˜¯ä¸æˆçš„ã€‚æ‰€ä»¥ï¼Œè¿™ä¸‰ä¸ªåº”ç”¨éœ€è¦åˆ†åˆ«ç»‘å®šä¸åŒçš„ç«¯å£å·ã€‚ é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œç”¨æˆ·åœ¨å®é™…è®¿é—® www.javastack.cn ç«™ç‚¹æ—¶ï¼Œè®¿é—®ä¸åŒ webappï¼Œæ€»ä¸ä¼šè¿˜å¸¦ç€å¯¹åº”çš„ç«¯å£å·å»è®¿é—®å§ã€‚æ‰€ä»¥ï¼Œä½ å†æ¬¡éœ€è¦ç”¨åˆ°åå‘ä»£ç†æ¥åšå¤„ç†ã€‚ é…ç½®ä¹Ÿä¸éš¾ï¼Œæ¥çœ‹çœ‹æ€ä¹ˆåšå§ï¼šhttpsåå‘ä»£ç†é…ç½® ä¸€äº›å¯¹å®‰å…¨æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„ç«™ç‚¹ï¼Œå¯èƒ½ä¼šä½¿ç”¨ HTTPSï¼ˆä¸€ç§ä½¿ç”¨sslé€šä¿¡æ ‡å‡†çš„å®‰å…¨HTTPåè®®ï¼‰ã€‚ è¿™é‡Œä¸ç§‘æ™® HTTP åè®®å’Œ SSL æ ‡å‡†ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ nginx é…ç½® https éœ€è¦çŸ¥é“å‡ ç‚¹ï¼š HTTPS çš„å›ºå®šç«¯å£å·æ˜¯ 443ï¼Œä¸åŒäº HTTP çš„ 80 ç«¯å£ SSL æ ‡å‡†éœ€è¦å¼•å…¥å®‰å…¨è¯ä¹¦ï¼Œæ‰€ä»¥åœ¨ nginx.conf ä¸­ä½ éœ€è¦æŒ‡å®šè¯ä¹¦å’Œå®ƒå¯¹åº”çš„ key å…¶ä»–å’Œ http åå‘ä»£ç†åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯åœ¨ Server éƒ¨åˆ†é…ç½®æœ‰äº›ä¸åŒã€‚ é™æ€ç«™ç‚¹é…ç½® æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®é™æ€ç«™ç‚¹(å³ html æ–‡ä»¶å’Œä¸€å †é™æ€èµ„æº)ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼šå¦‚æœæ‰€æœ‰çš„é™æ€èµ„æºéƒ½æ”¾åœ¨äº† /app/dist ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ nginx.conf ä¸­æŒ‡å®šé¦–é¡µä»¥åŠè¿™ä¸ªç«™ç‚¹çš„ host å³å¯ã€‚ é…ç½®å¦‚ä¸‹ï¼šç„¶åï¼Œæ·»åŠ  HOSTï¼š 127.0.0.1 static.zp.cnï¼Œæ­¤æ—¶ï¼Œåœ¨æœ¬åœ°æµè§ˆå™¨è®¿é—® static.zp.cn ï¼Œå°±å¯ä»¥è®¿é—®é™æ€ç«™ç‚¹äº†ã€‚ è·¨åŸŸè§£å†³æ–¹æ¡ˆ web é¢†åŸŸå¼€å‘ä¸­ï¼Œç»å¸¸é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œå‰ç«¯å’Œåç«¯åˆ†åˆ«æ˜¯ç‹¬ç«‹çš„ web åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ï¼šåç«¯æ˜¯ Java ç¨‹åºï¼Œå‰ç«¯æ˜¯ React æˆ– Vue åº”ç”¨ å„è‡ªç‹¬ç«‹çš„ web app åœ¨äº’ç›¸è®¿é—®æ—¶ï¼ŒåŠ¿å¿…å­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚è§£å†³è·¨åŸŸé—®é¢˜ä¸€èˆ¬æœ‰ä¸¤ç§æ€è·¯ï¼š CORS åœ¨åç«¯æœåŠ¡å™¨è®¾ç½® HTTP å“åº”å¤´ï¼ŒæŠŠä½ éœ€è¦è¿è¡Œè®¿é—®çš„åŸŸååŠ å…¥åŠ å…¥ Access-Control-Allow-Origin ä¸­ã€‚ jsonp æŠŠåç«¯æ ¹æ®è¯·æ±‚ï¼Œæ„é€ jsonæ•°æ®ï¼Œå¹¶è¿”å›ï¼Œå‰ç«¯ç”¨ jsonp è·¨åŸŸã€‚ è¿™ä¸¤ç§æ€è·¯ï¼Œæœ¬æ–‡ä¸å±•å¼€è®¨è®ºã€‚ éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œnginx æ ¹æ®ç¬¬ä¸€ç§æ€è·¯ï¼Œä¹Ÿæä¾›äº†ä¸€ç§è§£å†³è·¨åŸŸçš„è§£å†³æ–¹æ¡ˆã€‚ ä¸¾ä¾‹ï¼šwww.javastack.cn ç½‘ç«™æ˜¯ç”±ä¸€ä¸ªå‰ç«¯ app ï¼Œä¸€ä¸ªåç«¯ app ç»„æˆçš„ã€‚å‰ç«¯ç«¯å£å·ä¸º 9000ï¼Œ åç«¯ç«¯å£å·ä¸º 8080ã€‚ å‰ç«¯å’Œåç«¯å¦‚æœä½¿ç”¨ http è¿›è¡Œäº¤äº’æ—¶ï¼Œè¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œå› ä¸ºå­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚æ¥çœ‹çœ‹ï¼Œnginx æ˜¯æ€ä¹ˆè§£å†³çš„å§ï¼š é¦–å…ˆï¼Œåœ¨ enable-cors.conf æ–‡ä»¶ä¸­è®¾ç½® cors ï¼šæ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„æœåŠ¡å™¨ä¸­ include enable-cors.conf æ¥å¼•å…¥è·¨åŸŸé…ç½®ï¼šåˆ°æ­¤ï¼Œå°±å®Œæˆäº†ã€‚","link":"/program/Linux/nginx/"},{"title":"Node.js","text":"ä¸€ã€ç®€ä»‹Node.js æ˜¯ä¸€ä¸ªåŸºäºGoogle Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚ èƒ½æ–¹ä¾¿åœ°æ­å»ºå“åº”é€Ÿåº¦å¿«ã€æ˜“äºæ‰©å±•çš„ç½‘ç»œåº”ç”¨ï¼ŒNode.js ä½¿ç”¨äº‹ä»¶é©±åŠ¨ï¼Œ éé˜»å¡I/O æ¨¡å‹è€Œå¾—ä»¥è½»é‡å’Œé«˜æ•ˆï¼Œéå¸¸é€‚åˆåœ¨åˆ†å¸ƒå¼è®¾å¤‡ä¸Šè¿è¡Œçš„æ•°æ®å¯†é›†å‹çš„å®æ—¶åº”ç”¨ã€‚ å®˜ç½‘ï¼šhttps://nodejs.org/en/ä¸­æ–‡ï¼šhttps://cnodejs.orgã€https://nodejs.cn ç®€å•è¯´Node.jså°±æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„JavaScriptï¼Œæ˜¯ç°åœ¨æµè¡Œçš„è¯­è¨€ä¸­èƒ½åŒæ—¶è¿è¡Œåœ¨å‰ç«¯ä¸åå°çš„ç¨‹åºè¯­è¨€ï¼Œä½ å¯ä»¥æŠŠJavaScriptæƒ³åƒæˆJavaä¸C#ã€‚ç›¸å…³æŠ€æœ¯ï¼š æ•°æ®åº“ï¼šMongoDBï¼Œéå…³ç³»å‹æ•°æ®åº“ï¼ŒNoSQLï¼ˆNot only SQLï¼‰ MVCæ¡†æ¶ï¼šAngularJS WebæœåŠ¡å™¨ï¼šExpress æ¨¡æ¿å¼•æ“ï¼šjadeã€ejsã€htmljsã€swigã€hogan.js äºŒã€æ­å»ºNode.jså¼€å‘ç¯å¢ƒ2.1ã€å®‰è£…Node.jså»å®˜ç½‘ä¸‹ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„Node.jsä¸€æ­¥ä¸€æ­¥æŒ‰æç¤ºå®‰è£…å³å¯ï¼Œå¦‚æœå®‰è£…å¤±è´¥å°±æ‰‹åŠ¨å®‰è£…ï¼Œå°†Node.jsçš„å®‰è£…ä½ç½®é…ç½®åˆ°ç¯å¢ƒå˜é‡çš„pathä¸­ã€‚ 1brew install node å®‰è£…å®Œæˆåå¯åŠ¨å‘½ä»¤è¡Œï¼Œæµ‹è¯•ï¼š 1node -v ä¸‰ã€ç¬¬ä¸€ä¸ªNode.jsç¨‹åºåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡IDEå®Œæˆç¼–è¯‘ä¸è¿è¡Œçš„ï¼Œå…¶å®æ‰‹åŠ¨è¿è¡Œä¹Ÿå¯ä»¥ï¼Œæ¯”å¦‚ç¼–å†™ä¸€æ®µä»£ç å¦‚ä¸‹ï¼š server.js 12345678910111213//ä¾èµ–ä¸€ä¸ªhttpæ¨¡å—ï¼Œç›¸å½“äºjavaä¸­çš„importï¼Œä¸C#ä¸­çš„usingvar http = require(&apos;http&apos;);//åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å¯¹è±¡server = http.createServer(function (req, res) {//è®¾ç½®è¯·æ±‚æˆåŠŸæ—¶å“åº”å¤´éƒ¨çš„MIMEä¸ºçº¯æ–‡æœ¬res.writeHeader(200, {&quot;Content-Type&quot;: &quot;text/plain&quot;});//å‘å®¢æˆ·ç«¯è¾“å‡ºå­—ç¬¦res.end(&quot;Hello World\\n&quot;);});//è®©æœåŠ¡å™¨ç›‘å¬æœ¬åœ°8000ç«¯å£å¼€å§‹è¿è¡Œserver.listen(8000,&apos;127.0.0.1&apos;);console.log(&quot;server is runing at 127.0.0.1:8000&quot;); åœ¨nodeç¯å¢ƒä¸‹è§£é‡Šè¿è¡Œï¼š è¿è¡Œç»“æœï¼š å¼•å…¥ required æ¨¡å—ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ require æŒ‡ä»¤æ¥è½½å…¥ Node.js æ¨¡å—ã€‚åˆ›å»ºæœåŠ¡å™¨ï¼šæœåŠ¡å™¨å¯ä»¥ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç±»ä¼¼äºTomCatã€IISã€Apache ã€Nginx ç­‰ HTTP æœåŠ¡å™¨ã€‚æ¥æ”¶è¯·æ±‚ä¸å“åº”è¯·æ±‚ æœåŠ¡å™¨å¾ˆå®¹æ˜“åˆ›å»ºï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–ç»ˆç«¯å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åè¿”å›å“åº”æ•°æ®ã€‚ ç¬¬ä¸€è¡Œè¯·æ±‚ï¼ˆrequireï¼‰Node.js è‡ªå¸¦çš„ http æ¨¡å—ï¼Œå¹¶ä¸”æŠŠå®ƒèµ‹å€¼ç»™ http å˜é‡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è°ƒç”¨ http æ¨¡å—æä¾›çš„å‡½æ•°ï¼š createServer ã€‚è¿™ä¸ªå‡½æ•°ä¼šè¿”å› ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªå«åš listen çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªæ•°å€¼å‚æ•°ï¼Œ æŒ‡å®šè¿™ä¸ª HTTP æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£å·ã€‚ å››ã€NPMï¼ˆNode.jsåŒ…ç®¡ç†å™¨ï¼‰NPMæ˜¯éšåŒNodeJSä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½è§£å†³NodeJSä»£ç éƒ¨ç½²ä¸Šçš„å¾ˆå¤šé—®é¢˜ï¼Œå¸¸è§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š a)ã€å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚ b)ã€å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚ c)ã€å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°NPMæœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚ å®˜ç½‘ï¼šhttps://www.npmjs.com/ 4.1ã€æŸ¥çœ‹npmç‰ˆæœ¬ç”±äºæ–°ç‰ˆçš„nodejså·²ç»é›†æˆäº†npmï¼Œæ‰€ä»¥ä¹‹å‰npmä¹Ÿä¸€å¹¶å®‰è£…å¥½äº†ã€‚åŒæ ·å¯ä»¥é€šè¿‡è¾“å…¥ â€œnpm -vâ€ æ¥æµ‹è¯•æ˜¯å¦æˆåŠŸå®‰è£…ã€‚å‘½ä»¤å¦‚ä¸‹ï¼Œå‡ºç°ç‰ˆæœ¬æç¤ºè¡¨ç¤ºå®‰è£…æˆåŠŸ 4.2ã€å‡çº§npmå¦‚æœä½ å®‰è£…çš„æ˜¯æ—§ç‰ˆæœ¬çš„ npmï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¾—é€šè¿‡ npm å‘½ä»¤æ¥å‡çº§ 1npm install npm -g 4.3ã€å®‰è£…æ¨¡å— npm install -å‚æ•° å¦‚æœå¸¦å‚æ•°-gè¡¨ç¤ºå…¨å±€å®‰è£…ï¼Œå¦åˆ™åªæ˜¯å®‰è£…åˆ°æŸä¸ªç›®å½•ä¸‹ã€‚ ä»¥ä¸‹å®ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ npm å‘½ä»¤å®‰è£…å¸¸ç”¨çš„ Node.js webæ¡†æ¶æ¨¡å— express 1sudo npm install express -g 4.4ã€å¸è½½æ¨¡å—æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¸è½½ Node.js æ¨¡å—ã€‚ sudo npm uninstall å¦‚å…ˆä½¿ç”¨å®‰è£…æŒ‡ä»¤å®‰è£…bootstrap: 1npm install bootstrap å†ä½¿ç”¨å¸è½½æŒ‡ä»¤åˆ é™¤æ¨¡å—ï¼š 1npm uninstall bootstrap å¯ä»¥åˆ° /node_modules/ ç›®å½•ä¸‹æŸ¥çœ‹åŒ…æ˜¯å¦è¿˜å­˜åœ¨ 4.5ã€æ¨¡å—åˆ—è¡¨ä½¿ç”¨æ¨¡å—åˆ—è¡¨å‘½ä»¤å¯ä»¥æ–¹ä¾¿çš„çœ‹åˆ°å½“å‰é¡¹ç›®ä¸­ä¾èµ–çš„åŒ…ï¼š 1npm ls 4.6ã€æ›´æ–°æ¨¡å—æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°æ¨¡å—ï¼šnpm updateæ¨¡å—åç§°npm up -g æ¨¡å—åç§° 4.7ã€æœç´¢æ¨¡å—npm searchæ¨¡å—åç§° 4.8ã€NPM å¸¸ç”¨å‘½ä»¤é™¤äº†æœ¬ç« ä»‹ç»çš„éƒ¨åˆ†å¤–ï¼ŒNPMè¿˜æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œpackage.jsoné‡Œä¹Ÿæœ‰å¾ˆå¤šå…¶å®ƒæœ‰ç”¨çš„å­—æ®µã€‚é™¤äº†å¯ä»¥åœ¨npmjs.org/doc/æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å¤–ï¼Œè¿™é‡Œå†ä»‹ç»ä¸€äº›NPMå¸¸ç”¨å‘½ä»¤ã€‚NPMæä¾›äº†å¾ˆå¤šå‘½ä»¤ï¼Œä¾‹å¦‚installå’Œpublishï¼Œä½¿ç”¨npm helpå¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ã€‚NPMæä¾›äº†å¾ˆå¤šå‘½ä»¤ï¼Œä¾‹å¦‚installå’Œpublishï¼Œä½¿ç”¨npm helpå¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ã€‚ä½¿ç”¨npm help å¯æŸ¥çœ‹æŸæ¡å‘½ä»¤çš„è¯¦ç»†å¸®åŠ©ï¼Œä¾‹å¦‚npm help installã€‚åœ¨package.jsonæ‰€åœ¨ç›®å½•ä¸‹ä½¿ç”¨npm install . -gå¯å…ˆåœ¨æœ¬åœ°å®‰è£…å½“å‰å‘½ä»¤è¡Œç¨‹åºï¼Œå¯ç”¨äºå‘å¸ƒå‰çš„æœ¬åœ°æµ‹è¯•ã€‚ä½¿ç”¨npm update å¯ä»¥æŠŠå½“å‰ç›®å½•ä¸‹node_moduleså­ç›®å½•é‡Œè¾¹çš„å¯¹åº”æ¨¡å—æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ã€‚ä½¿ç”¨npm update -gå¯ä»¥æŠŠå…¨å±€å®‰è£…çš„å¯¹åº”å‘½ä»¤è¡Œç¨‹åºæ›´æ–°è‡³æœ€æ–°ç‰ˆã€‚ä½¿ç”¨npm cache clearå¯ä»¥æ¸…ç©ºNPMæœ¬åœ°ç¼“å­˜ï¼Œç”¨äºå¯¹ä»˜ä½¿ç”¨ç›¸åŒç‰ˆæœ¬å·å‘å¸ƒæ–°ç‰ˆæœ¬ä»£ç çš„äººã€‚ä½¿ç”¨npm unpublish @å¯ä»¥æ’¤é”€å‘å¸ƒè‡ªå·±å‘å¸ƒè¿‡çš„æŸä¸ªç‰ˆæœ¬ä»£ç ã€‚ 4.9ã€æ›´æ¢NPM é•œåƒå› ä¸ºnpmçš„æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œåœ¨ç½‘ç»œçŠ¶æ€ä¸å¥½çš„æƒ…å†µä¸‹å¼•å…¥ä¸€ä¸ªæ¨¡å—ä¼šå› ä¸ºç½‘ç»œå»¶è¿Ÿè€Œå¤±è´¥ï¼Œå¯ä»¥æ›´æ¢æˆå›½å†…é€Ÿåº¦æ›´å¿«çš„é•œåƒæœåŠ¡å™¨ï¼Œè¿™é‡Œä»¥ä½¿ç”¨æ·˜å® NPM é•œåƒï¼ˆhttps://npm.taobao.org/ï¼‰ä¸ºä¾‹ï¼š 1npm install -g cnpm --registry=https://registry.npm.taobao.org è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ cnpm å‘½ä»¤æ¥å®‰è£…æ¨¡å—äº†ï¼š 1ï¼„ cnpm install [name] è¿™æ˜¯ä¸€ä¸ªå®Œæ•´ npmjs.org é•œåƒï¼Œä½ å¯ä»¥ç”¨æ­¤ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬(åªè¯»)ï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º 10åˆ†é’Ÿ ä¸€æ¬¡ä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚ å¦‚æ˜¯å®‰è£…å¤±è´¥ï¼Œå¯ä»¥è¯•è¯•ï¼š 12345678910alias cnpm=\"npm --registry=https://registry.npm.taobao.org \\--cache=$HOME/.npm/.cache/cnpm \\--disturl=https://npm.taobao.org/dist \\--userconfig=$HOME/.cnpmrc\"# Or alias it in .bashrc or .zshrc$ echo '\\n#alias for cnpm\\nalias cnpm=\"npm --registry=https://registry.npm.taobao.org \\ --cache=$HOME/.npm/.cache/cnpm \\ --disturl=https://npm.taobao.org/dist \\ --userconfig=$HOME/.cnpmrc\"' &gt;&gt; ~/.zshrc &amp;&amp; source ~/.zshrc äº”ã€ExpressExpress æ˜¯ä¸€ä¸ªç®€æ´è€Œçµæ´»çš„ node.js Webåº”ç”¨æ¡†æ¶, æä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§ç‰¹æ€§å¸®åŠ©ä½ åˆ›å»ºå„ç§ Web åº”ç”¨ï¼Œå’Œä¸°å¯Œçš„ HTTP å·¥å…·ã€‚ä½¿ç”¨ Express å¯ä»¥å¿«é€Ÿåœ°æ­å»ºä¸€ä¸ªå®Œæ•´åŠŸèƒ½çš„ç½‘ç«™ã€‚ä½¿ç”¨Node.jsä½œä¸ºAngularJSå¼€å‘WebæœåŠ¡å™¨çš„æœ€ä½³æ–¹å¼æ˜¯ä½¿ç”¨Expressæ¨¡å—ã€‚ Expresså®˜ç½‘ï¼š https://expressjs.com/ Express4.x APIï¼šhttps://expressjs.com/zh-cn/4x/api.html 5.2ã€Expressæ¡†æ¶æ ¸å¿ƒç‰¹æ€§å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚ å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚ å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚ ä¸°å¯Œçš„ HTTP å¿«æ·æ–¹æ³•å’Œä»»æ„æ’åˆ—ç»„åˆçš„ Connect ä¸­é—´ä»¶ï¼Œè®©ä½ åˆ›å»ºå¥å£®ã€å‹å¥½çš„ API å˜å¾—æ—¢å¿«é€Ÿåˆç®€å•ã€‚ Express ä¸å¯¹ Node.js å·²æœ‰çš„ç‰¹æ€§è¿›è¡ŒäºŒæ¬¡æŠ½è±¡ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨å®ƒä¹‹ä¸Šæ‰©å±•äº† Web åº”ç”¨æ‰€éœ€çš„åŸºæœ¬åŠŸèƒ½ã€‚ 5.3ã€å®‰è£… Expresså®‰è£… Express å¹¶å°†å…¶ä¿å­˜åˆ°ä¾èµ–åˆ—è¡¨ä¸­ï¼š 1npm install express --save ä»¥ä¸Šå‘½ä»¤å…¨å±€å®‰è£…expressã€‚ä¹Ÿå¯å®‰è£…æ—¶æŒ‡å®šå®‰è£…ä¸­é—´ä»¶ã€‚ body-parser - node.js ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç† JSON, Raw, Text å’Œ URL ç¼–ç çš„æ•°æ®ã€‚ cookie-parser - è¿™å°±æ˜¯ä¸€ä¸ªè§£æCookieçš„å·¥å…·ã€‚é€šè¿‡req.cookieså¯ä»¥å–åˆ°ä¼ è¿‡æ¥çš„cookieï¼Œå¹¶æŠŠå®ƒä»¬è½¬æˆå¯¹è±¡ã€‚ multer - node.js ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç† enctype=â€multipart/form-dataâ€ï¼ˆè®¾ç½®è¡¨å•çš„MIMEç¼–ç ï¼‰çš„è¡¨å•æ•°æ®ã€‚ 123ï¼„ npm install body-parser --save ï¼„ npm install cookie-parser --save ï¼„ npm install multer --save é»˜è®¤è¿™äº›æ¨¡å—éƒ½å·²ç»æ·»åŠ ã€‚ 5.4ã€ç¬¬ä¸€ä¸ªExpressæ¡†æ¶å®ä¾‹æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ Express æ¡†æ¶æ¥è¾“å‡º â€œHello Worldâ€ã€‚ä»¥ä¸‹å®ä¾‹ä¸­æˆ‘ä»¬å¼•å…¥äº† express æ¨¡å—ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åï¼Œå“åº” â€œHello Worldâ€ å­—ç¬¦ä¸²ã€‚ åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå¦‚Projectï¼Œè¿›å…¥å‘½ä»¤è¡Œï¼š ä½¿ç”¨npm install express å¯¼å…¥expressæ¨¡å—ã€‚ åœ¨ç›®å½•ä¸‹åˆ›å»ºhello.jsæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516//å¼•å…¥expressæ¨¡å—var express = require(&apos;express&apos;);//åˆ›å»ºä¸€ä¸ªappå¯¹è±¡ï¼Œç±»ä¼¼ä¸€ä¸ªweb åº”ç”¨ï¼ˆç½‘ç«™ï¼‰var app = express();//æ¥å—æŒ‡å®šè·¯å¾„çš„è¯·æ±‚ï¼ŒæŒ‡å®šå›è°ƒå‡½æ•°app.get(&apos;/&apos;, function (req, res){res.send(&apos;Hello World&apos;);});//åˆ›å»ºä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œå¯ä»¥è®¤ä¸ºå°±æ˜¯webæœåŠ¡å™¨å¯¹è±¡//ç›‘å¬8081ç«¯å£ï¼Œå½“ç›‘å¬æˆåŠŸæ—¶å›è°ƒvar server = app.listen(8081, function () { var host = server.address().address; //åœ°å€ var port = server.address().port; //ç«¯å£ console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port);});}) 5.5ã€å¼€å‘Expressé¡¹ç›® åˆ›å»ºå¥½çš„é¡¹ç›®å¦‚ä¸‹ï¼š app.jsæ˜¯ç½‘ç«™ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546var express = require(&apos;express&apos;);var path = require(&apos;path&apos;);var favicon = require(&apos;serve-favicon&apos;);var logger = require(&apos;morgan&apos;);var cookieParser = require(&apos;cookie-parser&apos;);var bodyParser = require(&apos;body-parser&apos;);var index = require(&apos;./routes/index&apos;);var users = require(&apos;./routes/users&apos;);var app = express();//æŒ‡å®šè§†å›¾å¼•æ“ä¸ºejsapp.set(&apos;views&apos;, path.join(__dirname, &apos;views&apos;));app.set(&apos;view engine&apos;, &apos;ejs&apos;);// uncomment after placing your favicon in /public//app.use(favicon(path.join(__dirname, &apos;public&apos;, &apos;favicon.ico&apos;)));app.use(logger(&apos;dev&apos;));app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: false }));app.use(cookieParser());app.use(express.static(path.join(__dirname, &apos;public&apos;)));app.use(&apos;/&apos;, index);app.use(&apos;/users&apos;, users);// catch 404 and forward to error handlerapp.use(function(req, res, next) { var err = new Error(&apos;Not Found&apos;); err.status = 404; next(err);});// error handlerapp.use(function(err, req, res, next) { // set locals, only providing error in development res.locals.message = err.message; res.locals.error = req.app.get(&apos;env&apos;) === &apos;development&apos; ? err : {}; // render the error page res.status(err.status || 500); res.render(&apos;error&apos;);});module.exports = app; bin\\wwwæ˜¯webæœåŠ¡å™¨ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889#!/usr/bin/env node/** * ä¾èµ–æ¨¡å—ï¼Œå¯¼å…¥ */var app = require(&apos;../app&apos;);var debug = require(&apos;debug&apos;)(&apos;nodejsexpress:server&apos;);var http = require(&apos;http&apos;);/** * ä»ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­è·å¾—ç›‘å¬ç«¯å£ï¼Œå¦‚æœç©ºåˆ™3000 */var port = normalizePort(process.env.PORT || &apos;3000&apos;);app.set(&apos;port&apos;, port);/** * åˆ›å»ºWebæœåŠ¡å™¨ */var server = http.createServer(app);/** * å¼€å§‹ç›‘å¬ */server.listen(port);server.on(&apos;error&apos;, onError); //æŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„äº‹ä»¶server.on(&apos;listening&apos;, onListening); //å½“ç›‘å¬æˆåŠŸæ—¶çš„å›è°ƒ/** * è§„èŒƒåŒ–ç«¯å£ */function normalizePort(val) { var port = parseInt(val, 10); if (isNaN(port)) { // named pipe return val; } if (port &gt;= 0) { // port number return port; } return false;}/** *é”™è¯¯äº‹ä»¶ç›‘å¬ */function onError(error) { if (error.syscall !== &apos;listen&apos;) { throw error; } var bind = typeof port === &apos;string&apos; ? &apos;Pipe &apos; + port : &apos;Port &apos; + port; //é”™è¯¯å¤„ç† switch (error.code) { case &apos;EACCES&apos;: console.error(bind + &apos; requires elevated privileges&apos;); process.exit(1); //ç»“æŸç¨‹åº break; case &apos;EADDRINUSE&apos;: console.error(bind + &apos; is already in use&apos;); process.exit(1); break; default: throw error; }}/** * å½“ç”¨æˆ·è®¿é—®æœåŠ¡å™¨æˆåŠŸæ—¶çš„å›è°ƒ */function onListening() { var addr = server.address(); var bind = typeof addr === &apos;string&apos; ? &apos;pipe &apos; + addr : &apos;port &apos; + addr.port; debug(&apos;Listening on &apos; + bind);} routers/index.jsè·¯ç”±ï¼Œæœ‰ç‚¹ç±»ä¼¼æ§åˆ¶å™¨æˆ–Servletï¼š 123456789var express = require(&apos;express&apos;);var router = express.Router();/* è·å¾—é¦–é¡µ */router.get(&apos;/&apos;, function(req, res, next) { res.render(&apos;index&apos;, { title: &apos;Express&apos; });});module.exports = router; views/index.ejsé¦–é¡µè§†å›¾ï¼š 1234567891011&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt; &lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt; &lt;p&gt;Welcome to &lt;%= title %&gt;&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; åœ¨wwwä¸Šå³é”®é€‰æ‹©â€œè¿è¡Œæ–¹å¼â€-&gt;Run â€˜/bin/wwwâ€™ è¿è¡Œç»“æœï¼š 5.5.1ã€requestå¯¹è±¡Request å¯¹è±¡ - request å¯¹è±¡è¡¨ç¤º HTTP è¯·æ±‚ï¼ŒåŒ…å«äº†è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå‚æ•°ï¼Œå†…å®¹ï¼ŒHTTP å¤´éƒ¨ç­‰å±æ€§ã€‚å¸¸è§å±æ€§æœ‰ï¼š req.appï¼šå½“callbackä¸ºå¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œç”¨req.appè®¿é—®expressçš„å®ä¾‹ req.baseUrlï¼šè·å–è·¯ç”±å½“å‰å®‰è£…çš„URLè·¯å¾„ req.body / req.cookiesï¼šè·å¾—ã€Œè¯·æ±‚ä¸»ä½“ã€/ Cookies req.fresh / req.staleï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦è¿˜ã€Œæ–°é²œã€ req.hostname / req.ipï¼šè·å–ä¸»æœºåå’ŒIPåœ°å€ req.originalUrlï¼šè·å–åŸå§‹è¯·æ±‚URL req.paramsï¼šè·å–è·¯ç”±çš„parameters req.pathï¼šè·å–è¯·æ±‚è·¯å¾„ req.protocolï¼šè·å–åè®®ç±»å‹ req.queryï¼šè·å–URLçš„æŸ¥è¯¢å‚æ•°ä¸² req.routeï¼šè·å–å½“å‰åŒ¹é…çš„è·¯ç”± req.subdomainsï¼šè·å–å­åŸŸå req.accepts()ï¼šæ£€æŸ¥å¯æ¥å—çš„è¯·æ±‚çš„æ–‡æ¡£ç±»å‹ req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguagesï¼šè¿”å›æŒ‡å®šå­—ç¬¦é›†çš„ç¬¬ä¸€ä¸ªå¯æ¥å—å­—ç¬¦ç¼–ç  req.get()ï¼šè·å–æŒ‡å®šçš„HTTPè¯·æ±‚å¤´ req.is()ï¼šåˆ¤æ–­è¯·æ±‚å¤´Content-Typeçš„MIMEç±»å‹ 5.5.2ã€responseå¯¹è±¡Response å¯¹è±¡ - response å¯¹è±¡è¡¨ç¤º HTTP å“åº”ï¼Œå³åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶å‘å®¢æˆ·ç«¯å‘é€çš„ HTTP å“åº”æ•°æ®ã€‚å¸¸è§å±æ€§æœ‰ï¼š 123456789101112131415161718res.appï¼šåŒreq.appä¸€æ ·res.append()ï¼šè¿½åŠ æŒ‡å®šHTTPå¤´res.set()åœ¨res.append()åå°†é‡ç½®ä¹‹å‰è®¾ç½®çš„å¤´res.cookie(nameï¼Œvalue [ï¼Œoption])ï¼šè®¾ç½®Cookieopition: domain / expires / httpOnly / maxAge / path / secure / signedres.clearCookie()ï¼šæ¸…é™¤Cookieres.download()ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶res.get()ï¼šè¿”å›æŒ‡å®šçš„HTTPå¤´res.json()ï¼šä¼ é€JSONå“åº”res.jsonp()ï¼šä¼ é€JSONPå“åº”res.location()ï¼šåªè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œä¸è®¾ç½®çŠ¶æ€ç æˆ–è€…close responseres.redirect()ï¼šè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œå¹¶ä¸”è®¾ç½®çŠ¶æ€ç 302res.render(view,[locals],callback)ï¼šæ¸²æŸ“ä¸€ä¸ªviewï¼ŒåŒæ—¶å‘callbackä¼ é€’æ¸²æŸ“åçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿnext(err)å°†ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚callbackå°†ä¼šè¢«ä¼ å…¥ä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ä»¥åŠæ¸²æŸ“åçš„é¡µé¢ï¼Œè¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨è¾“å‡ºäº†ã€‚res.send()ï¼šä¼ é€HTTPå“åº”res.sendFile(path [ï¼Œoptions] [ï¼Œfn])ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ -ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶extensionè®¾å®šContent-Typeres.set()ï¼šè®¾ç½®HTTPå¤´ï¼Œä¼ å…¥objectå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå¤´res.status()ï¼šè®¾ç½®HTTPçŠ¶æ€ç res.type()ï¼šè®¾ç½®Content-Typeçš„MIMEç±»å‹ 5.5.3ã€expressè·å–å‚æ•°æœ‰ä¸‰ç§æ–¹æ³•req.query é€‚åˆ https://localhost:3000/form?num=8888req.body é€‚åˆhttps://localhost:3000/formï¼ŒPostè¯·æ±‚ä¸­çš„å‚æ•°req.params é€‚åˆè·å–formåçš„numï¼šhttps://localhost:3000/form/num ï¼ˆä¸€ï¼‰ã€GET 12var num = req.query.num;res.send(&quot;ä½ è·å–çš„getæ•°æ®ä¸º:&quot; + num); ï¼ˆäºŒï¼‰ã€POST è§£æpostæ•°æ®éœ€è¦ç”¨åˆ°body-parser 1npm install body-parser --save app.js 1234567891011121314151617181920var express = require(&apos;express&apos;);var app = express();//å¼•å…¥body-parservar bodyParser = require(&apos;body-parser&apos;);app.use(express.static(&apos;public&apos;));//éœ€è¦useçš„app.use(bodyParser.json()); // for parsing application/jsonapp.use(bodyParser.urlencoded({extended: true})); // for parsing application/x-www-form-urlencoded//è·å–æ•°æ®app.post(&apos;/form&apos;, function(req, res) {var num = req.body.num;res.send(&quot;ä½ è·å–çš„postæ•°æ®ä¸º:&quot; + num);});//è®¾ç½®ç›‘å¬ç«¯å£app.listen(3000); public/test.html 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt;&lt;meta charset=\"UTF-8\"&gt;&lt;title&gt;Document&lt;/title&gt;&lt;script src=\"http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=\"box\"&gt;&lt;/div&gt;&lt;form action=\"/form\" method=\"post\"&gt;&lt;input type=\"text\" name=\"num\" value=\"tinyphp\"&gt;&lt;input type=\"submit\" value=\"æäº¤\"&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; ï¼ˆä¸‰ï¼‰ã€è·å–è·¯å¾„å‚æ•° app.js 1234567891011var express = require(&apos;express&apos;);var app = express();//è·å–æ•°æ®app.get(&apos;/form/:num&apos;, function(req, res) {var num = req.params.num;res.send(&quot;ä½ è·å–åˆ°form/åçš„å‚æ•°:&quot; + num);});//è®¾ç½®ç›‘å¬ç«¯å£app.listen(3000); 5.6 ejsåŸºç¡€ejsæ˜¯ä¸€ä¸ªExpress Webåº”ç”¨çš„æ¨¡æ¿å¼•æ“ï¼Œåœ¨NodeJSå¼€å‘ä¸­å¯ä»¥é€‰æ‹©çš„æ¨¡æ¿å¼•æ“å¯èƒ½æ˜¯æ‰€æœ‰Webåº”ç”¨å¼€å‘ä¸­èŒƒå›´æœ€å¹¿çš„ï¼Œå¦‚jadeã€ejsã€htmljsã€swigã€hogan.jsï¼Œä½†ejsæ˜¯æœ€å®¹æ˜“ä¸Šæ‰‹çš„ï¼Œä¸jsp,asp,phpçš„åŸå§‹æ¨¡æ¿å¼•æ“é£æ ¼å¾ˆåƒã€‚ å®˜ç½‘ï¼šhttps://www.embeddedjs.com/ æ·»åŠ ä¸€ä¸ªproduct.jsè·¯ç”±ï¼š 12345678910111213141516var express = require(&apos;express&apos;);var router = express.Router();/* äº§å“ */router.get(&apos;/&apos;, function(req, res, next) { var products=[]; products.push({name:&quot;ZTE U880&quot;,price:899.8}); products.push({name:&quot;HuWei è£è€€8&quot;,price:1899.8}); products.push({name:&quot;iPhone 7 Plus 128G&quot;,price:5899.8}); //å°†productè§†å›¾ä¸æŒ‡å®šçš„å¯¹è±¡æ¸²æŸ“åè¾“å‡ºåˆ°å®¢æˆ·ç«¯ res.render(&apos;product&apos;, { title: &apos;å¤©ç‹—å•†åŸ&apos;, pdts:products});});module.exports = router; åœ¨viewsç›®å½•ä¸‹æ·»åŠ product.ejsè§†å›¾ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„MVCï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt; &lt;%= title %&gt; &lt;/title&gt; &lt;link rel='stylesheet' href='/stylesheets/style.css' /&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;%= title %&gt; - äº§å“åˆ—è¡¨&lt;/h1&gt; &lt;table border=\"1\" width=\"80%\"&gt; &lt;tr&gt; &lt;th&gt;åºå·&lt;/th&gt; &lt;th&gt;åç§°&lt;/th&gt; &lt;th&gt;ä»·æ ¼&lt;/th&gt; &lt;/tr&gt; &lt;%pdts.forEach(function(pdt,index){%&gt; &lt;tr&gt; &lt;td&gt; &lt;%=index+1%&gt; &lt;/td&gt; &lt;td&gt; &lt;%=pdt.name%&gt; &lt;/td&gt; &lt;td&gt; &lt;%=pdt.price%&gt; &lt;/td&gt; &lt;/tr&gt; &lt;%});%&gt; &lt;/table&gt; &lt;ul&gt; &lt;% for(var i=0; i&lt;pdts.length; i++) {%&gt; &lt;li&gt; &lt;%=pdts[i].name%&gt; &lt;/li&gt; &lt;% } %&gt; &lt;/body&gt;&lt;/html&gt; ä¿®æ”¹appï¼Œæ³¨å†Œå®šä¹‰å¥½çš„æ¨¡å—productï¼š 123456789101112131415161718192021var index = require('./routes/index');var users = require('./routes/users');var pdts = require('./routes/product');var app = express();//æŒ‡å®šè§†å›¾å¼•æ“ä¸ºejsapp.set('views', path.join(__dirname, 'views'));app.set('view engine', 'ejs');// uncomment after placing your favicon in /public//app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));app.use(logger('dev'));app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: false }));app.use(cookieParser());app.use(express.static(path.join(__dirname, 'public')));app.use('/', index);app.use('/users', users);app.use('/pdt', pdts); è¿è¡Œç»“æœï¼š åŸå› ï¼šæ²¡æœ‰å®‰è£…ejsæ¨¡å—è§£å†³åŠæ³•ï¼šè¿›å…¥åˆ°é¡¹ç›®ç›®å½•ï¼Œå®‰è£…ejs 12&gt; npm install --save ejs&gt; é‡æ–°è¿è¡Œï¼š 5.7ã€lodashè¿™æ˜¯ä¸€ä¸ªå…·æœ‰ä¸€è‡´æ¥å£ã€æ¨¡å—åŒ–ã€é«˜æ€§èƒ½ç­‰ç‰¹æ€§çš„ JavaScript å·¥å…·åº“ã€‚å¯ä»¥éå¸¸æ–¹ä¾¿çš„æ“ä½œjsonã€‚ å®˜ç½‘ï¼šhttps://lodashjs.com/ å®‰è£…ï¼š 1npm i -g npm 1npm i --save lodash å®‰è£…æ—¶å…ˆç”¨cdåˆ‡æ¢åˆ°å½“å‰é¡¹ç›®ä¸‹ã€‚ å¦‚æœæµè§ˆå™¨ä½¿ç”¨å¯ä»¥ç›´æ¥å¼•å…¥ï¼š æ·»åŠ lodashä¾èµ–ï¼š ä¾èµ–æˆåŠŸåä¼šåœ¨package.jsonä¸­æ·»åŠ å¼•ç”¨ï¼š åå°Node.jsä½¿ç”¨ï¼Œå¯ä»¥å¼•å…¥æ¨¡å—ï¼š 123456789101112131415161718192021222324252627282930313233343536373839//å¯¼å…¥lodashæ¨¡å—var _= require(&apos;lodash&apos;);var products=[];products.push({name:&quot;ZTE U880&quot;,price:899.8});products.push({name:&quot;HuWei è£è€€8&quot;,price:1899.8});products.push({name:&quot;iPhone 7 Plus 128G&quot;,price:5899.8});//1ã€å–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ var obj1=_.first(products);console.log(obj1.name); //ZTE U880//2ã€å–å‡ºæœ€åä¸€ä¸ªå…ƒç´ var obj2=_.last(products);console.log(obj2.name); //iPhone 7 Plus 128G//3ã€æŒ‡å®šæŸ¥æ‰¾æ¡ä»¶è¿”å›ç¬¦åˆæ¡ä»¶çš„ç´¢å¼•var obj3=_.findIndex(products,function(obj){ return obj.price&gt;=1000&amp;&amp;obj.name.indexOf(&quot;7&quot;)&gt;0;});console.log(obj3); //2//4ã€æŒ‡å®šæŸ¥æ‰¾æ¡ä»¶è¿”å›æŸ¥æ‰¾åˆ°çš„å¯¹è±¡var obj4=_.find(products,function(obj){ return obj.price&gt;=1000&amp;&amp;obj.name.indexOf(&quot;7&quot;)&gt;0;});console.log(obj4); //{ name: &apos;iPhone 7 Plus 128G&apos;, price: 5899.8 }//5ã€æ’åºvar obj5=_.orderBy(products,[&quot;price&quot;,&quot;name&quot;],[&quot;desc&quot;,&quot;asc&quot;]);console.log(obj5);//[ { name: &apos;iPhone 7 Plus 128G&apos;, price: 5899.8 },//{ name: &apos;HuWei è£è€€8&apos;, price: 1899.8 },//{ name: &apos;ZTE U880&apos;, price: 899.8 } ]//6ã€æŸ¥æ‰¾ä»·æ ¼ä¸º1899.8çš„äº§å“çš„keyvar obj6=_.findKey(products,{price:1899.8});console.log(obj6); //1 APIçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œä½†éœ€è¦æ³¨æ„ç‰ˆæœ¬ï¼Œå¯ä»¥ç°æŸ¥ç°ç”¨ï¼ŒAPIåœ°å€ï¼šhttps://lodash.com/docs/4.17.2 5.8ã€å‚æ•°5.8.1ã€URLä¸­çš„å‚æ•°å ä½Checks route params (req.params), ex: /user/:id 127.0.0.1:3000/indexï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ºäº†å¾—åˆ°indexï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨req.paramså¾—åˆ°ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•æˆ‘ä»¬å°±å¯ä»¥å¾ˆå¥½çš„å¤„ç†Nodeä¸­çš„è·¯ç”±å¤„ç†é—®é¢˜ï¼ŒåŒæ—¶åˆ©ç”¨è¿™ç‚¹å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°MVCæ¨¡å¼ï¼› http://127.0.0.1:3000/pdt/9527/phone 1234//è·å¾—äº§å“æ ¹æ®Idrouter.get(&apos;/:id/:category&apos;,function(request,res,next){ res.send(request.params.id+&quot;,&quot;+request.params.category);}); è¿è¡Œç»“æœï¼š 5.8.2ã€URLä¸­çš„QueryStringChecks query string params (req.query), ex: ?id=12 127.0.0.1:3000/index?id=12ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ç§æ–¹å¼æ˜¯è·å–å®¢æˆ·ç«¯getæ–¹å¼ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œé€šè¿‡ä½¿ç”¨req.query.idå°±å¯ä»¥è·å¾—ï¼Œç±»ä¼¼äºPHPçš„getæ–¹æ³•ï¼› http://127.0.0.1:3000/pdt/9527?name=jobs 123router.get(&apos;/:id&apos;,function(request,res,next){ res.send(&quot;name:&quot;+request.query.name);}); è¿è¡Œç»“æœï¼š 5.8.3ã€HTTPæ­£æ–‡ä¸­çš„å‚æ•°åœ¨postè¯·æ±‚ä¸­è·å¾—è¡¨å•ä¸­çš„æ•°æ®ã€‚ Checks urlencoded body params (req.body), ex: id= 127.0.0.1ï¼š300/indexï¼Œç„¶åpostäº†ä¸€ä¸ªid=2çš„å€¼ï¼Œè¿™ç§æ–¹å¼æ˜¯è·å–å®¢æˆ·ç«¯postè¿‡æ¥çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡req.body.idè·å–ï¼Œç±»ä¼¼äºPHPçš„postæ–¹æ³•ï¼› é¡µé¢ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt; &lt;%= title %&gt; &lt;/title&gt; &lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;%= title %&gt; - äº§å“åˆ—è¡¨&lt;/h1&gt; &lt;table border=&quot;1&quot; width=&quot;80%&quot;&gt; &lt;tr&gt; &lt;th&gt;åºå·&lt;/th&gt; &lt;th&gt;åç§°&lt;/th&gt; &lt;th&gt;ä»·æ ¼&lt;/th&gt; &lt;/tr&gt; &lt;%pdts.forEach(function(pdt,index){%&gt; &lt;tr&gt; &lt;td&gt; &lt;%=index+1%&gt; &lt;/td&gt; &lt;td&gt; &lt;%=pdt.name%&gt; &lt;/td&gt; &lt;td&gt; &lt;%=pdt.price%&gt; &lt;/td&gt; &lt;/tr&gt; &lt;%});%&gt; &lt;/table&gt; &lt;ul&gt; &lt;% for(var i=0; i&lt;pdts.length; i++) {%&gt; &lt;li&gt; &lt;%=pdts[i].name%&gt; &lt;/li&gt; &lt;% } %&gt; &lt;/ul&gt;&lt;p&gt; &lt;%if(typeof msg!=&quot;undefined&quot;){%&gt; &lt;%=msg%&gt; &lt;%}%&gt;&lt;/p&gt; &lt;form action=&quot;pdt/add&quot; method=&quot;post&quot;&gt; &lt;p&gt; åç§°ï¼š&lt;input name=&quot;name&quot; /&gt; &lt;/p&gt; &lt;p&gt; ä»·æ ¼ï¼š&lt;input name=&quot;price&quot; /&gt; &lt;/p&gt; &lt;button&gt;æ·»åŠ &lt;/button&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; ä»£ç ï¼š 123456router.post(&apos;/add&apos;,function(request,res,next){ var entity={name:request.body.name,price:request.body.price}; products.push(entity); //å°†productè§†å›¾ä¸æŒ‡å®šçš„å¯¹è±¡æ¸²æŸ“åè¾“å‡ºåˆ°å®¢æˆ·ç«¯ res.render(&apos;product&apos;, { title: &apos;å¤©ç‹—å•†åŸ&apos;, pdts:products,msg:&quot;æ·»åŠ æˆåŠŸ&quot;});}); ç»“æœï¼š 5.9ã€JSONå¦‚æœéœ€è¦Node.jså‘å¤–æä¾›è¿”å›JSONçš„æ¥å£ï¼ŒExpressä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œå¯ä»¥ä½¿ç”¨åŸæ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨åˆ°çš„JSONå¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨å†…ç½®å¯¹è±¡åœ¨æœåŠ¡å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š å°†å¯¹è±¡åºåˆ—åŒ–æˆå­—ç¬¦ï¼š 12345//å¯¹è±¡var rose={&quot;name&quot;:&quot;Rose&quot;,&quot;weight&quot;:&quot;65&quot;}; //åºåˆ—åŒ–æˆå­—ç¬¦ä¸² var str=JSON.stringify(rose); alert(str); ç»“æœï¼š ååºåˆ—åŒ–ï¼Œå°†å­—ç¬¦è½¬æ¢æˆå¯¹è±¡ï¼š 1234//å°†å­—ç¬¦ä¸²è½¬æ¢æˆJavaScriptå¯¹è±¡var markStr=&apos;{&quot;name&quot;:&quot;mark&quot;,&quot;weight&quot;:&quot;188&quot;}&apos;; var mark=JSON.parse(markStr); alert(mark.name+&quot;ï¼Œ&quot;+mark.weight); ç»“æœï¼š Expresså·²ç»å°è£…äº†ä¸€ä¸ªjsonæ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•å°±å¯ä»¥åºåˆ—åŒ–å¯¹è±¡ï¼š 1234/* äº§å“ */router.get(&apos;/rest&apos;, function(req, res, next) { res.json(products);}); å…­ã€RESTfulï¼ˆè¡¨è¿°æ€§çŠ¶æ€è½¬ç§»ï¼‰RESTæ˜¯è‹±æ–‡Representational State Transferçš„ç¼©å†™ï¼Œä¸­æ–‡ç§°ä¹‹ä¸ºâ€œè¡¨è¿°æ€§çŠ¶æ€è½¬ç§»â€ åŸºäºHTTPåè®®ï¼Œæ˜¯å¦ä¸€ç§æœåŠ¡æ¶æ„ï¼Œä¼ é€’æ˜¯JSONã€POXï¼ˆPlain Old XMLï¼‰è€Œä¸æ˜¯SOAPæ ¼å¼çš„æ•°æ®ï¼Œå……åˆ†åˆ©ç”¨HTTPè°“è¯ï¼ˆVerbï¼‰ï¼Œä¾§é‡æ•°æ®çš„ä¼ è¾“ï¼Œä¸šåŠ¡é€»è¾‘äº¤ç»™å®¢æˆ·ç«¯è‡ªè¡Œå¤„ç† RESTæ˜¯ä¸€ç§åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„é£æ ¼çº¦æŸï¼ŒåƒJavaã€.Netï¼ˆWCFã€WebAPIï¼‰éƒ½æœ‰å¯¹è¯¥çº¦æŸçš„å®ç°ï¼Œä½¿URLå˜å¾—æ›´åŠ æœ‰æ„ä¹‰ï¼Œæ›´åŠ ç®€æ´æ˜äº†ï¼Œå¦‚ï¼š https://www.zhangguo.com/products/1getè¯·æ±‚ è¡¨ç¤ºè·å¾—æ‰€æœ‰äº§å“çš„ç¬¬1ä¸ª https://www.zhangguo.com/products/productpostè¯·æ±‚ è¡¨ç¤ºæ·»åŠ ä¸€ä¸ªäº§å“ https://www.zhangguo.com/products/1/pricegetè¯·æ±‚ è¡¨ç¤ºè·å¾—ç¬¬1ä¸ªäº§å“çš„ä»·æ ¼ https://www.zhangguo.com/products/1deleteè¯·æ±‚ åˆ é™¤ç¼–å·ä¸º1çš„äº§å“ RESTè®¾è®¡éœ€è¦éµå¾ªçš„åŸåˆ™ç½‘ç»œä¸Šçš„æ‰€æœ‰äº‹ç‰©éƒ½è¢«æŠ½è±¡ä¸ºèµ„æºï¼ˆresourceï¼‰ï¼›æ¯ä¸ªèµ„æºå¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„èµ„æºæ ‡è¯†ç¬¦ï¼ˆresource identifierï¼‰ï¼›é€šè¿‡é€šç”¨çš„è¿æ¥å™¨æ¥å£ï¼ˆgeneric connector interfaceï¼‰å¯¹èµ„æºè¿›è¡Œæ“ä½œï¼›å¯¹èµ„æºçš„å„ç§æ“ä½œä¸ä¼šæ”¹å˜èµ„æºæ ‡è¯†ç¬¦ï¼›æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— çŠ¶æ€çš„ï¼ˆstatelessï¼‰ è°“è¯GETè¡¨ç¤ºæŸ¥è¯¢æ“ä½œï¼Œç›¸å½“äºRetrieveã€Selectæ“ä½œPOSTè¡¨ç¤ºæ’å…¥æ“ä½œï¼Œç›¸å½“äºCreateï¼ŒInsertæ“ä½œPUTè¡¨ç¤ºä¿®æ”¹æ“ä½œï¼Œç›¸å½“äºUpdateæ“ä½œDELETEè¡¨ç¤ºåˆ é™¤æ“ä½œï¼Œç›¸å½“äºDeleteæ“ä½œ å…¶å®ƒè¿˜æœ‰ï¼š NodeJS+Expresså¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°REST application/x-www-form-urlencoded multipart/form-data application/json res.setHeader(â€˜Content-Typeâ€™, â€˜application/json;charset=utf-8â€™); ç¤ºä¾‹ä»£ç cars.jsï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263var express = require(&apos;express&apos;);var router = express.Router();var _= require(&apos;lodash&apos;);var cars=[];cars.push({id:201701,name:&quot;BMW&quot;,price:190,speed:&quot;210km/h&quot;,color:&quot;ç™½è‰²&quot;});cars.push({id:201702,name:&quot;BYD&quot;,price:25,speed:&quot;160km/h&quot;,color:&quot;çº¢è‰²&quot;});cars.push({id:201703,name:&quot;Benz&quot;,price:300,speed:&quot;215km/h&quot;,color:&quot;è“è‰²&quot;});cars.push({id:201704,name:&quot;Honda&quot;,price:190,speed:&quot;170km/h&quot;,color:&quot;é»‘è‰²&quot;});cars.push({id:201705,name:&quot;QQ&quot;,price:130,speed:&quot;210km/h&quot;,color:&quot;ç™½è‰²&quot;});/* Get *//*è·å¾—æ‰€æœ‰æ±½è½¦*//*url /cars/*/router.get(&apos;/&apos;, function(req, res, next) { res.json(cars);});/*Get*//*è·å¾—æ±½è½¦é€šè¿‡id*//*urlï¼š/cars/:id */router.get(&apos;/:id&apos;, function(req, res, next) { //ä»è·¯å¾„ä¸­æ˜ å°„å‚æ•°ï¼Œè½¬æ¢æˆæ•°å­— var id=parseInt(req.params.id); var car=_.find(cars,{id:id}); res.json(car);});/*Post*//*æ·»åŠ æ±½è½¦*//*urlï¼š/cars/car */router.post(&apos;/car&apos;, function(req, res, next) { var car=req.body; //ä»è¯·æ±‚æ­£æ–‡ä¸­è·å¾—jsonå¯¹è±¡ car.id=_.last(cars).id+1; //å°†ç¼–å·ä¿®æ”¹ä¸ºæœ€åä¸€è¾†è½¦çš„ç¼–å·+1 cars.push(car); //å°†æ±½è½¦å¯¹è±¡æ·»åŠ åˆ°é›†åˆä¸­ res.json(car); //å°†æ·»åŠ æˆåŠŸçš„è½¦ä»¥jsonçš„å½¢å¼è¿”å›});/*Put*//*ä¿®æ”¹æ±½è½¦*//*urlï¼š/cars/car */router.put(&apos;/car&apos;, function(req, res, next) { var car=req.body; //ä»è¯·æ±‚æ­£æ–‡ä¸­è·å¾—jsonå¯¹è±¡ console.log(req.body); var index=_.findIndex(cars,{id:parseInt(car.id)}); //æ ¹æ®idè·å¾—è½¦åœ¨é›†åˆä¸­çš„ä¸‹æ ‡ cars[index]=car; //æ›¿æ¢åŸå¯¹è±¡ //res.json(car); //å°†ä¿®æ”¹åçš„è½¦ä»¥jsonçš„å½¢å¼è¿”å› res.send({status:&quot;success&quot;, message:&quot;æ›´æ–°æˆåŠŸ!&quot;}); });/*Delete*//*åˆ é™¤æ±½è½¦*//*urlï¼š/cars/:id */router.delete(&apos;/id/:id&apos;, function(req, res, next) { //è·å¾—urlä¸­çš„ç¼–å·å‚æ•° var id=parseInt(req.params.id); var index=_.findIndex(cars,{id:id}); //æ ¹æ®idè·å¾—è½¦åœ¨é›†åˆä¸­çš„ä¸‹æ ‡ cars.splice(index,1); //åœ¨carsæ•°ç»„ä¸­åˆ é™¤ä¸‹æ ‡ä»indexå¼€å§‹çš„1æ¡æ•°æ® res.send({status:&quot;success&quot;, message:&quot;åˆ é™¤æˆåŠŸ!&quot;}); });module.exports = router; ç¤ºä¾‹ä»£ç app.jsï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152var express = require(&apos;express&apos;);var path = require(&apos;path&apos;);var favicon = require(&apos;serve-favicon&apos;);var logger = require(&apos;morgan&apos;);var cookieParser = require(&apos;cookie-parser&apos;);var bodyParser = require(&apos;body-parser&apos;);var index = require(&apos;./routes/index&apos;);var users = require(&apos;./routes/users&apos;);var pdts = require(&apos;./routes/product&apos;);var task = require(&apos;./routes/task&apos;);var cars = require(&apos;./routes/cars&apos;);var app = express();//æŒ‡å®šè§†å›¾å¼•æ“ä¸ºejsapp.set(&apos;views&apos;, path.join(__dirname, &apos;views&apos;));app.set(&apos;view engine&apos;, &apos;ejs&apos;);// uncomment after placing your favicon in /public//app.use(favicon(path.join(__dirname, &apos;public&apos;, &apos;favicon.ico&apos;)));app.use(logger(&apos;dev&apos;));app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: false }));app.use(cookieParser());app.use(express.static(path.join(__dirname, &apos;public&apos;)));app.use(&apos;/&apos;, index);app.use(&apos;/users&apos;, users);app.use(&apos;/pdt&apos;, pdts);app.use(&quot;/task&quot;,task);app.use(&quot;/cars&quot;,cars);// catch 404 and forward to error handlerapp.use(function(req, res, next) { var err = new Error(&apos;Not Found&apos;); err.status = 404; next(err);});// error handlerapp.use(function(err, req, res, next) { // set locals, only providing error in development res.locals.message = err.message; res.locals.error = req.app.get(&apos;env&apos;) === &apos;development&apos; ? err : {}; // render the error page res.status(err.status || 500); res.render(&apos;error&apos;);});module.exports = app; Get è·å¾—æ‰€æœ‰æ±½è½¦ url /cars/ Get è·å¾—æ±½è½¦é€šè¿‡id urlï¼š/cars/:id Post æ·»åŠ æ±½è½¦ urlï¼š/cars/car å‚æ•°ä¸­çš„jsonæ ¼å¼ä¸€å®šè¦ä½¿ç”¨æ ‡å‡†æ ¼å¼ï¼Œæ³¨æ„å¼•å·ï¼Œæ³¨æ„Content-Typeï¼Œé»˜è®¤çš„Content-Typeç±»å‹æ˜¯ï¼šapplication/x-www-form-urlencoded Put ä¿®æ”¹æ±½è½¦ urlï¼š/cars/car Delete åˆ é™¤æ±½è½¦ urlï¼š/cars/:id node.jsè·¨åŸŸ ä¿®æ”¹app.jsæ–‡ä»¶æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œä¿®æ”¹å¤´éƒ¨ 1234567891011121314151617app.use(logger(&apos;dev&apos;));app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: false }));app.use(cookieParser());app.use(express.static(path.join(__dirname, &apos;public&apos;)));app.all(&apos;*&apos;, function(req, res, next) { res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;); res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;content-type&quot;); res.header(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,DELETE,OPTIONS&quot;); res.header(&quot;X-Powered-By&quot;, &apos; 3.2.1&apos;); res.header(&quot;Content-Type&quot;, &quot;application/json;charset=utf-8&quot;); if(req.method == &quot;OPTIONS&quot;) { res.send(&quot;200&quot;); } else { next(); }}); ç»“æœï¼š ä¹ã€è§†é¢‘From: https://www.cnblogs.com/best/p/6204116.html","link":"/program/JavaScript/node/"},{"title":"Linux","text":"","link":"/program/Linux/linux/"},{"title":"centos 6.5 ç½‘ç«™å»ºè®¾","text":"Step 1ã€ä¸ºcentosé…ç½®rpmforgeåŠepelæºã€‚centoså®˜æ–¹çš„æºå…¶å®ä¹Ÿå¤Ÿç”¨ï¼Œä¸è¿‡åƒphpçš„ä¸€äº›æ‰©å±•å¦‚ php-mcryptåœ¨å®˜æ–¹æºä¸­å¹¶æ²¡æœ‰ã€‚12rpm -ivh https://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el7.rf.x86_64.rpm 12rpm -ivh https://mirrors.ustc.edu.cn/centos/6.5/extras/x86_64/Packages/epel-release-6-8.noarch.rpm 12rpm -ivh https://mirrors.163.com/centos/7/extras/x86_64/Packages/epel-release-7-2.noarch.rpm Step 2. å®‰è£…php/mysql/httpdå®‰è£…apacheyum -y install httpd httpd-devel å®‰è£…mysqlyum -y install mysql mysql-devel mysql-server mysql-libs å®‰è£…phpyum -y install php å®‰è£…phpæ‰©å±•123yum -y install php-mysql php-gd php-imap php-ldap php-odbc php-mbstring php-devel php-soap php-cli php-pdoyum -y install php-mcrypt php-tidy php-xml php-xmlrpc php-pear å…¶å®ƒä¸å¸¸ç”¨phpæ‰©å±•, www.linuxidc.com å¯ä¸ç”¨å®‰è£…yum -y install php-pecl-memcache php-eaccelerator å®‰è£…phpmyadminyum -y install phpmyadmin å®‰è£…å®Œæˆä¹‹åï¼Œå¯åŠ¨12service httpd startservice mysqld start Step 3.é…ç½®httpdã€mysqldå¼€æœºè‡ªå¯åŠ¨12chkconfig mysqld onchkconfig httpd on Step 4.é…ç½®phpmyadminä¿®æ”¹/usr/share/phpmyadmin/config.inc.phpå°†è¿™é‡Œabcdeæ–‡å­—ä¿®æ”¹ä¸ºè‡ªå·±çš„å­—ç¬¦ï¼Œå¯ä»»æ„$cfg['blowfish_secret'] = 'abcde'; å¸¸è§é—®é¢˜1. phpmyadminæç¤ºæœªå¼€å¯php-mcrypt,è¿™æ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…php-mrcrptæ‰©å±•ã€‚åœ¨å®˜æ–¹æºæ²¡æœ‰php-mrcrptæ‰©å±•ï¼Œè¯·å®‰è£…epelæºåå†yum install php-mcrypt 2. phpmyadminæ— æ³•è®¿é—®phpmyadminé»˜è®¤åªèƒ½ä½¿ç”¨ https://localhost/phpmyadmin æ¥è®¿é—®ï¼Œå¯ä»¥ä¿®æ”¹/etc/httpd/conf.d/phpmyadmin.confä¸­å¯¹åº”éƒ¨åˆ†ä¸º 12345&lt;Directory &quot;/usr/share/phpmyadmin&quot;&gt;Order Deny,AllowDeny from allAllow from All&lt;/Directory&gt; ä¸è¿‡å¼ºçƒˆä¸æ”¯æŒè¿™ä¹ˆåšçš„ï¼ŒæŠŠphpmyadminæš´éœ²äº†ä¸å®‰å…¨æ³¨æ„ï¼šapacheè§£æphpï¼Œä¿®æ”¹httpd.confæ–‡ä»¶ï¼Œæ·»åŠ  12Addtype application/x-httpd-php .php .phtmlAddtype application/x-httpd-php-source .phps myqlå¯ä»¥è¿œç¨‹ç™»å½•è®¾ç½®mysqlå¯†ç  123mysql&gt;; USE mysql;mysql&gt;; UPDATE user SET Password=PASSWORD(&apos;newpassword&apos;) WHERE user=&apos;root&apos;;mysql&gt;; FLUSH PRIVILEGES; 1.2.3 å…è®¸è¿œç¨‹ç™»å½• 1234mysql -u root -pEnter Password: &lt;your new password&gt;mysql&gt;GRANT ALL PRIVILEGES ON *.* TO &apos;ç”¨æˆ·å&apos;@&apos;%&apos; IDENTIFIED BY &apos;å¯†ç &apos; WITHGRANT OPTION; å®Œæˆåå°±èƒ½ç”¨mysql-frontè¿œç¨‹ç®¡ç†mysqläº†ã€‚è®¾ä¸ºå¼€æœºå¯åŠ¨chkconfig mysqld on","link":"/program/Linux/centos/"},{"title":"Markdown çš„è®¾è®¡å“²å­¦","text":"Markdownæ˜¯ä¸€ç§å¯ä»¥ä½¿ç”¨æ™®é€šæ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™çš„æ ‡è®°è¯­è¨€ï¼Œé€šè¿‡ç®€å•çš„æ ‡è®°è¯­æ³•ï¼Œå®ƒå¯ä»¥ä½¿æ™®é€šæ–‡æœ¬å†…å®¹å…·æœ‰ä¸€å®šçš„æ ¼å¼ã€‚ ä¸»è¦å†…å®¹ Markdownæ˜¯ä»€ä¹ˆï¼Ÿè°åˆ›é€ äº†å®ƒï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿæ€ä¹ˆä½¿ç”¨ï¼Ÿè°åœ¨ç”¨ï¼Ÿå°è¯•ä¸€ä¸‹ æ­£æ–‡1. Markdownæ˜¯ä»€ä¹ˆï¼ŸMarkdownæ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒä»¥çº¯æ–‡æœ¬å½¢å¼(æ˜“è¯»ã€æ˜“å†™ã€æ˜“æ›´æ”¹)ç¼–å†™æ–‡æ¡£ï¼Œå¹¶æœ€ç»ˆä»¥HTMLæ ¼å¼å‘å¸ƒã€‚Markdownä¹Ÿå¯ä»¥ç†è§£ä¸ºå°†ä»¥MARKDOWNè¯­æ³•ç¼–å†™çš„è¯­è¨€è½¬æ¢æˆHTMLå†…å®¹çš„å·¥å…·ã€‚ 2. è°åˆ›é€ äº†å®ƒï¼Ÿå®ƒç”±Aaron Swartzå’ŒJohn Gruberå…±åŒè®¾è®¡ï¼ŒAaron Swartzå°±æ˜¯é‚£ä½äºï¼ˆ2013å¹´1æœˆ11æ—¥ï¼‰è‡ªæ€,æœ‰ç€å¼€æŒ‚ä¸€èˆ¬äººç”Ÿç»å†çš„ç¨‹åºå‘˜ã€‚ç»´åŸºç™¾ç§‘å¯¹ä»–çš„ä»‹ç»æ˜¯ï¼šè½¯ä»¶å·¥ç¨‹å¸ˆã€ä½œå®¶ã€æ”¿æ²»ç»„ç»‡è€…ã€äº’è”ç½‘æ´»åŠ¨å®¶ã€ç»´åŸºç™¾ç§‘äººã€‚ ä»–æœ‰ç€è¶³ä»¥è®©ä½ è·ªæ‹œçš„äººç”Ÿç»å†ï¼š 14å²å‚ä¸RSS 1.0è§„æ ¼æ ‡å‡†çš„åˆ¶è®¢ã€‚ 2004å¹´å…¥è¯»æ–¯å¦ç¦ï¼Œä¹‹åé€€å­¦ã€‚ 2005å¹´åˆ›å»ºInfogamiï¼Œä¹‹åä¸Redditåˆå¹¶æˆä¸ºå…¶åˆä¼™äººã€‚ 2010å¹´åˆ›ç«‹æ±‚è¿›ä¼šï¼ˆDemand Progressï¼‰ï¼Œç§¯æå‚ä¸ç¦æ­¢ç½‘ç»œç›—ç‰ˆæ³•æ¡ˆï¼ˆSOPAï¼‰æ´»åŠ¨ï¼Œæœ€ç»ˆè¯¥ææ¡ˆè¢«æ’¤å›ã€‚ 2011å¹´7æœˆ19æ—¥ï¼Œå› è¢«æ§ä»MITå’ŒJSTORä¸‹è½½480ä¸‡ç¯‡å­¦æœ¯è®ºæ–‡å¹¶ä»¥å…è´¹å½¢å¼ä¸Šä¼ äºç½‘ç»œè¢«æ•ã€‚ 2013å¹´1æœˆè‡ªæ€èº«äº¡ã€‚ å¤©æ‰éƒ½æœ‰æ—©é€çš„å½’é€”ã€‚ 3. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ å®ƒæ˜¯æ˜“è¯»ï¼ˆçœ‹èµ·æ¥èˆ’æœï¼‰ã€æ˜“å†™ï¼ˆè¯­æ³•ç®€å•ï¼‰ã€æ˜“æ›´æ”¹çº¯æ–‡æœ¬ã€‚å¤„å¤„ä½“ç°ç€æç®€ä¸»ä¹‰çš„å½±å­ã€‚ å…¼å®¹HTMLï¼Œå¯ä»¥è½¬æ¢ä¸ºHTMLæ ¼å¼å‘å¸ƒã€‚ è·¨å¹³å°ä½¿ç”¨ã€‚ è¶Šæ¥è¶Šå¤šçš„ç½‘ç«™æ”¯æŒMarkdownã€‚ æ›´æ–¹ä¾¿æ¸…æ™°åœ°ç»„ç»‡ä½ çš„ç”µå­é‚®ä»¶ã€‚ï¼ˆMarkdown-here, Airmailï¼‰ æ‘†è„±Wordï¼ˆæˆ‘ä¸æ˜¯è®¤çœŸçš„ï¼‰ã€‚ 4. æ€ä¹ˆä½¿ç”¨ï¼Ÿå¦‚æœä¸ç®—æ‰©å±•ï¼ŒMarkdownçš„è¯­æ³•ç»å¯¹ç®€å•åˆ°è®©ä½ çˆ±ä¸é‡Šæ‰‹ã€‚ Markdownè¯­æ³•ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ å¤§éƒ¨åˆ†ï¼šæ ‡é¢˜ï¼Œæ®µè½ï¼ŒåŒºå—å¼•ç”¨ï¼Œä»£ç åŒºå—ï¼Œå¼ºè°ƒï¼Œåˆ—è¡¨ï¼Œåˆ†å‰²çº¿ï¼Œé“¾æ¥ï¼Œå›¾ç‰‡ï¼Œåæ–œæ  \\ï¼Œç¬¦å·â€™`â€™ã€‚ 4.1 æ ‡é¢˜ä¸¤ç§å½¢å¼ï¼š1ï¼‰ä½¿ç”¨=å’Œ-æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜ã€‚ ä¸€çº§æ ‡é¢˜=========äºŒçº§æ ‡é¢˜--------- æ•ˆæœï¼š ä¸€çº§æ ‡é¢˜ äºŒçº§æ ‡é¢˜ 2ï¼‰ä½¿ç”¨#ï¼Œå¯è¡¨ç¤º1-6çº§æ ‡é¢˜ã€‚ # ä¸€çº§æ ‡é¢˜## äºŒçº§æ ‡é¢˜### ä¸‰çº§æ ‡é¢˜#### å››çº§æ ‡é¢˜##### äº”çº§æ ‡é¢˜###### å…­çº§æ ‡é¢˜ æ•ˆæœï¼š ä¸€çº§æ ‡é¢˜äºŒçº§æ ‡é¢˜ä¸‰çº§æ ‡é¢˜å››çº§æ ‡é¢˜äº”çº§æ ‡é¢˜å…­çº§æ ‡é¢˜ 4.2 æ®µè½æ®µè½çš„å‰åè¦æœ‰ç©ºè¡Œï¼Œæ‰€è°“çš„ç©ºè¡Œæ˜¯æŒ‡æ²¡æœ‰æ–‡å­—å†…å®¹ã€‚è‹¥æƒ³åœ¨æ®µå†…å¼ºåˆ¶æ¢è¡Œçš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šç©ºæ ¼åŠ ä¸Šå›è½¦ï¼ˆå¼•ç”¨ä¸­æ¢è¡Œçœç•¥å›è½¦ï¼‰ã€‚ 4.3 åŒºå—å¼•ç”¨åœ¨æ®µè½çš„æ¯è¡Œæˆ–è€…åªåœ¨ç¬¬ä¸€è¡Œä½¿ç”¨ç¬¦å·&gt;,è¿˜å¯ä½¿ç”¨å¤šä¸ªåµŒå¥—å¼•ç”¨ï¼Œå¦‚ï¼š &gt; åŒºå—å¼•ç”¨&gt;&gt; åµŒå¥—å¼•ç”¨ æ•ˆæœï¼š åŒºå—å¼•ç”¨ åµŒå¥—å¼•ç”¨ 4.4 ä»£ç åŒºå—ä»£ç åŒºå—çš„å»ºç«‹æ˜¯åœ¨æ¯è¡ŒåŠ ä¸Š4ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼ˆå¦‚åŒå†™ä»£ç ä¸€æ ·ï¼‰ã€‚å¦‚æ™®é€šæ®µè½ï¼š void main(){ printf(â€œHello, Markdown.â€);} ä»£ç åŒºå—ï¼š void main() { printf(&quot;Hello, Markdown.&quot;); }æ³¨æ„:éœ€è¦å’Œæ™®é€šæ®µè½ä¹‹é—´å­˜åœ¨ç©ºè¡Œã€‚ 4.5 å¼ºè°ƒåœ¨å¼ºè°ƒå†…å®¹ä¸¤ä¾§åˆ†åˆ«åŠ ä¸Š*æˆ–è€…_ï¼Œå¦‚ï¼š *æ–œä½“*ï¼Œ_æ–œä½“_**ç²—ä½“**ï¼Œ__ç²—ä½“__ æ•ˆæœï¼š æ–œä½“ï¼Œæ–œä½“ç²—ä½“ï¼Œç²—ä½“ 4.6 åˆ—è¡¨ä½¿ç”¨Â·ã€+ã€æˆ–-æ ‡è®°æ— åºåˆ—è¡¨ï¼Œå¦‚ï¼š -ï¼ˆ+*ï¼‰ ç¬¬ä¸€é¡¹-ï¼ˆ+*ï¼‰ ç¬¬äºŒé¡¹- ï¼ˆ+*ï¼‰ç¬¬ä¸‰é¡¹ æ³¨æ„ï¼šæ ‡è®°åé¢æœ€å°‘æœ‰ä¸€ä¸ª_ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦_ã€‚è‹¥ä¸åœ¨å¼•ç”¨åŒºå—ä¸­ï¼Œå¿…é¡»å’Œå‰æ–¹æ®µè½ä¹‹é—´å­˜åœ¨ç©ºè¡Œã€‚ æ•ˆæœï¼š ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ æœ‰åºåˆ—è¡¨çš„æ ‡è®°æ–¹å¼æ˜¯å°†ä¸Šè¿°çš„ç¬¦å·æ¢æˆæ•°å­—,å¹¶è¾…ä»¥.ï¼Œå¦‚ï¼š 1 . ç¬¬ä¸€é¡¹2 . ç¬¬äºŒé¡¹3 . ç¬¬ä¸‰é¡¹ æ•ˆæœï¼š ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ 4.7 åˆ†å‰²çº¿åˆ†å‰²çº¿æœ€å¸¸ä½¿ç”¨å°±æ˜¯ä¸‰ä¸ªæˆ–ä»¥ä¸Š*ï¼Œè¿˜å¯ä»¥ä½¿ç”¨-å’Œ_ã€‚ 4.8 é“¾æ¥é“¾æ¥å¯ä»¥ç”±ä¸¤ç§å½¢å¼ç”Ÿæˆï¼šè¡Œå†…å¼å’Œå‚è€ƒå¼ã€‚è¡Œå†…å¼ï¼š [younghzçš„Markdownåº“](https:://github.com/younghz/Markdown â€œMarkdownâ€)ã€‚ æ•ˆæœï¼š younghzçš„Markdownåº“ã€‚ å‚è€ƒå¼ï¼š [younghzçš„Markdownåº“1][1][younghzçš„Markdownåº“2][2][1]:https:://github.com/younghz/Markdown â€œMarkdownâ€[2]:https:://github.com/younghz/Markdown â€œMarkdownâ€ æ•ˆæœï¼š younghzçš„Markdownåº“1younghzçš„Markdownåº“2 æ³¨æ„ï¼šä¸Šè¿°çš„[1]:https:://github.com/younghz/Markdown &quot;Markdown&quot;ä¸å‡ºç°åœ¨åŒºå—ä¸­ã€‚ 4.9 å›¾ç‰‡æ·»åŠ å›¾ç‰‡çš„å½¢å¼å’Œé“¾æ¥ç›¸ä¼¼ï¼Œåªéœ€åœ¨é“¾æ¥çš„åŸºç¡€ä¸Šå‰æ–¹åŠ ä¸€ä¸ªï¼ã€‚ 4.10 åæ–œæ \\ç›¸å½“äºåè½¬ä¹‰ä½œç”¨ã€‚ä½¿ç¬¦å·æˆä¸ºæ™®é€šç¬¦å·ã€‚ 4.11 ç¬¦å·â€™`â€™èµ·åˆ°æ ‡è®°ä½œç”¨ã€‚å¦‚ï¼š `ctrl+a` æ•ˆæœï¼š ctrl+a 5. è°åœ¨ç”¨ï¼ŸMarkdownçš„ä½¿ç”¨è€…ï¼š GitHub ç®€ä¹¦ Stack Overflow Apollo Moodle Reddit ç­‰ç­‰ 6. å°è¯•ä¸€ä¸‹ Chromeä¸‹çš„æ’ä»¶è¯¸å¦‚stackeditä¸markdown-hereç­‰éå¸¸æ–¹ä¾¿ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå¹³å°å—é™ã€‚ åœ¨çº¿çš„dillinger.ioè¯„ä»·ä¹Ÿä¸é”™ Windownsä¸‹çš„MarkdownPadä¹Ÿç”¨è¿‡ï¼Œä¸è¿‡å…è´¹ç‰ˆçš„ä½“éªŒä¸æ˜¯å¾ˆå¥½ã€‚ Macä¸‹çš„Mouæ˜¯å›½äººè´¡çŒ®çš„ï¼Œå£ç¢‘å¾ˆå¥½ã€‚ Linuxä¸‹çš„ReTextä¸é”™ã€‚ å½“ç„¶ï¼Œæœ€ç»ˆå¢ƒç•Œæ°¸è¿œéƒ½æ˜¯ç¬”ä¸‹æ˜¯è¯­æ³•ï¼Œå¿ƒä¸­æ ¼å¼åŒ– :)ã€‚ æ³¨æ„ï¼šä¸åŒçš„Markdownè§£é‡Šå™¨æˆ–å·¥å…·å¯¹ç›¸åº”è¯­æ³•ï¼ˆæ‰©å±•è¯­æ³•ï¼‰çš„è§£é‡Šæ•ˆæœä¸å°½ç›¸åŒï¼Œå…·ä½“å¯å‚è§å·¥å…·çš„ä½¿ç”¨è¯´æ˜ã€‚è™½ç„¶æœ‰äººæƒ³å‡ºé¢æä¸€ä¸ªæ‰€è°“çš„æ ‡å‡†åŒ–çš„Markdownï¼Œ[åˆ›å§‹äººJohn Gruber](https://blog.codinghorror.com/standard-markdown-is-now-common-markdown/ )ã€‚ ä»¥ä¸ŠåŸºæœ¬æ˜¯æ‰€æœ‰traditonal markdownçš„è¯­æ³•ã€‚ å…¶å®ƒï¼šåˆ—è¡¨çš„ä½¿ç”¨(étraditonal markdown)ï¼š ç”¨|è¡¨ç¤ºè¡¨æ ¼çºµå‘è¾¹ç•Œï¼Œè¡¨å¤´å’Œè¡¨å†…å®¹ç”¨-éš”å¼€ï¼Œå¹¶å¯ç”¨:è¿›è¡Œå¯¹é½è®¾ç½®ï¼Œä¸¤è¾¹éƒ½æœ‰:åˆ™è¡¨ç¤ºå±…ä¸­ï¼Œè‹¥ä¸åŠ :åˆ™é»˜è®¤å·¦å¯¹é½ã€‚ ä»£ç åº“ é“¾æ¥ MarkDown https://github.com/younghz/Markdown MarkDownCopy https://github.com/younghz/Markdown è§†é¢‘ å…³äºå…¶å®ƒæ‰©å±•è¯­æ³•å¯å‚è§å…·ä½“å·¥å…·çš„ä½¿ç”¨è¯´æ˜ã€‚","link":"/program/Markdown/markdown/"},{"title":"Pythonå¯¼å›¾","text":"æ¨èï¼šXMind ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ€ç»´å¯¼å›¾å’Œå¤´è„‘é£æš´è½¯ä»¶ã€‚ Python ç³»åˆ— (ä¸€) æ ¸å¿ƒçŸ¥è¯† Pythonç³»åˆ— (ä¸€) åŸºç¡€ç¼–ç¨‹ Pythonç³»åˆ—(äºŒ)å¸¸ç”¨æ ‡å‡†åº“åŠæ‹“å±•çŸ¥è¯† Pythonåº”ç”¨é¢†åŸŸå’Œæ•°æ®ç»“æ„","link":"/program/Python/mind/"},{"title":"Djangoç¬”è®°","text":"Djangoæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„Webåº”ç”¨æ¡†æ¶ï¼Œç”±Pythonå†™æˆã€‚é‡‡ç”¨äº†MTVçš„æ¡†æ¶æ¨¡å¼ï¼Œå³æ¨¡å‹Mï¼Œè§†å›¾Vå’Œæ¨¡ç‰ˆTã€‚å®ƒæœ€åˆæ˜¯è¢«å¼€å‘æ¥ç”¨äºç®¡ç†åŠ³ä¼¦æ–¯å‡ºç‰ˆé›†å›¢æ——ä¸‹çš„ä¸€äº›ä»¥æ–°é—»å†…å®¹ä¸ºä¸»çš„ç½‘ç«™çš„ï¼Œå³æ˜¯CMSï¼ˆå†…å®¹ç®¡ç†ç³»ç»Ÿï¼‰è½¯ä»¶ã€‚å¹¶äº2005å¹´7æœˆåœ¨BSDè®¸å¯è¯ä¸‹å‘å¸ƒã€‚è¿™å¥—æ¡†æ¶æ˜¯ä»¥æ¯”åˆ©æ—¶çš„å‰æ™®èµ›çˆµå£«å‰ä»–æ‰‹Django Reinhardtæ¥å‘½åçš„ã€‚ ä¸€. ç‰ˆæœ¬é€‰æ‹©Django 2.0.x æ”¯æŒ Python 3.4, 3.5 å’Œ 3.6 ï¼ˆæ³¨æ„ï¼Œä¸å†æ”¯æŒ Python 2ï¼‰ äºŒ. å®‰è£… Django2.1. ç”¨ pip æ¥å®‰è£… 2.1.1 éœ€è¦å…ˆå®‰è£…pip (1). Linux, Mac OSX, Windows ä¸‹éƒ½å¯ç”¨ get-pip.py æ¥å®‰è£…pipï¼šhttps://pip.pypa.io/en/latest/installing.html æˆ–è€…ç›´æ¥ä¸‹è½½ï¼šget-pip.py ç„¶åè¿è¡Œåœ¨ç»ˆç«¯è¿è¡Œ python get-pip.py å°±å¯ä»¥å®‰è£… pipã€‚ Note: ä¹Ÿå¯ä»¥ä¸‹è½½ pip æºç åŒ…ï¼Œè¿è¡Œ python setup.py install è¿›è¡Œå®‰è£… 2.1.2 åˆ©ç”¨ pip å®‰è£… Django ï¼ˆsudo) pip install Django æˆ–è€… (sudo) pip install Django==1.8.16 æˆ–è€… pip install Django==1.11.8 å¦‚æœæƒ³å‡çº§ pip å¯ä»¥ç”¨ï¼š (sudo) pip install --upgrade pip2.2. ä¸‹è½½æºç å®‰è£… https://www.djangoproject.com/download/ å¦‚æœæ˜¯æºç åŒ…, æ¯”å¦‚ django-1.11.8.tar.gz 2.2.1 Linux æˆ– Mac ä¸‹ tar -xvf django-1.11.8.tar.gz cd django-1.11.8 (sudo) python setup.py installä¸‰. æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸç»ˆç«¯ä¸Šè¾“å…¥ python ,ç‚¹å‡» Enterï¼Œè¿›è¡Œ python ç¯å¢ƒ &gt;&gt;&gt; import django &gt;&gt;&gt; django.VERSION (1, 11, 8, &apos;final&apos;, 0) &gt;&gt;&gt; &gt;&gt;&gt; django.get_version() &apos;1.11.8&apos;å¦‚æœè¿è¡Œåçœ‹åˆ°ç‰ˆæœ¬å·ï¼Œå°±è¯æ˜å®‰è£…æˆåŠŸäº†ï¼ å››. æ­å»ºå¤šä¸ªäº’ä¸å¹²æ‰°çš„å¼€å‘ç¯å¢ƒï¼ˆå¯é€‰ï¼‰æˆ‘ä»¬æœ‰çš„æ—¶å€™ä¼šå‘ç°ï¼Œä¸€ä¸ªç”µè„‘ä¸Šæœ‰å¤šä¸ªé¡¹ç›®ï¼Œä¸€ä¸ªä¾èµ– Django 1.8ï¼Œå¦ä¸€ä¸ªæ¯”è¾ƒæ—§çš„é¡¹ç›®åˆè¦ç”¨ Django 1.5ï¼Œè¿™æ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿ æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¾èµ–åŒ…ç®¡ç†çš„å·¥å…·æ¥å¤„ç†ä¸åŒçš„ç¯å¢ƒã€‚ 4.1 è™šæ‹Ÿç¯å¢ƒä¾èµ–å®‰è£…å¼€å‘ä¼šç”¨ virtualenv æ¥ç®¡ç†å¤šä¸ªå¼€å‘ç¯å¢ƒ Linux/MacOS ä¸‹ virtualenvwrapper ä½¿å¾—virtualenvå˜å¾—æ›´å¥½ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èµ·å®‰è£…äº† # å®‰è£…: (sudo) pip install virtualenv virtualenvwrapperä¿®æ”¹~/.bash_profileæˆ–å…¶å®ƒç¯å¢ƒå˜é‡ç›¸å…³æ–‡ä»¶(å¦‚ .bashrc æˆ–ç”¨ ZSH ä¹‹åçš„ .zshrc)ï¼Œæ·»åŠ ä»¥ä¸‹è¯­å¥ export WORKON_HOME=$HOME/.virtualenvs export PROJECT_HOME=$HOME/workspace source /usr/local/bin/virtualenvwrapper.shä¿®æ”¹åä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆ(ä¹Ÿå¯ä»¥é‡å¯ç»ˆç«¯ä½¿ä¹‹ç”Ÿæ•ˆ)ï¼š source ~/.bash_profile4.2 è™šæ‹Ÿç¯å¢ƒä½¿ç”¨æ–¹æ³•ï¼šmkvirtualenv zqxtï¼šåˆ›å»ºè¿è¡Œç¯å¢ƒzqxt workon zqxt: å·¥ä½œåœ¨ zqxt ç¯å¢ƒ æˆ– ä»å…¶å®ƒç¯å¢ƒåˆ‡æ¢åˆ° zqxt ç¯å¢ƒ deactivate: é€€å‡ºç»ˆç«¯ç¯å¢ƒ å…¶å®ƒçš„ï¼š rmvirtualenv ENVï¼šåˆ é™¤è¿è¡Œç¯å¢ƒENV mkproject micï¼šåˆ›å»ºmicé¡¹ç›®å’Œè¿è¡Œç¯å¢ƒmic mktmpenvï¼šåˆ›å»ºä¸´æ—¶è¿è¡Œç¯å¢ƒ lsvirtualenv: åˆ—å‡ºå¯ç”¨çš„è¿è¡Œç¯å¢ƒ lssitepackages: åˆ—å‡ºå½“å‰ç¯å¢ƒå®‰è£…äº†çš„åŒ… åˆ›å»ºçš„ç¯å¢ƒæ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å¹²æ‰°ï¼Œæ— éœ€sudoæƒé™å³å¯ä½¿ç”¨ pip æ¥è¿›è¡ŒåŒ…çš„ç®¡ç†ã€‚","link":"/program/Python/django-bi-ji/"},{"title":"Djangoéƒ¨ç½²â€”â€”uwsgi+Nginx","text":"ç”¨Djangoå†™äº†ä¸ªå°ç½‘ç«™ï¼Œåªèƒ½åœ¨è‡ªå·±æœ¬åœ°è·‘ä¸€è·‘ï¼è¿™æ€ä¹ˆè¡Œï¼Ÿå¬è¯´å¯ä»¥éƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·åˆ«äººå°±å¯ä»¥è®¿é—®äº†! ç¯å¢ƒï¼š 123python3.6centos 7Django1.11 1ã€æœ¬åœ°è·‘èµ·æ¥Djangoè¿™é‡Œä¸è®²Djangoé¡¹ç›®å®æ–½è¿‡ç¨‹ï¼Œå‡è®¾ä½ å·²ç»å†™äº†ä¸€ä¸ªDjangoé¡¹ç›®ï¼Œå¹¶ä¸”åœ¨æœ¬åœ°127.0.0.1:8000èƒ½å¤Ÿè·‘èµ·æ¥ã€‚å–ï¼Œç»™ä½ ä¸ªå‚è€ƒï¼Œé¡¹ç›®å¤§æ¦‚é•¿è¿™æ ·ï¼š kindleç›®å½•ä¸ºæˆ‘åˆ›å»ºçš„Django App 2ã€ä¿®æ”¹é¡¹ç›®é…ç½®ä¹Ÿå°±æ˜¯é¡¹ç›®ç›®å½•ä¸‹çš„settings.pyæ–‡ä»¶ï¼Œä¸»è¦å¼ºè°ƒå‡ ä¸ªåœ°æ–¹ï¼š â‘ å…³é—­DEBUGæ¨¡å¼ï¼šâ‘¡ä¿®æ”¹ALLOWED_HOSTSï¼šâ‘¢é…ç½®é™æ€æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼š ä¿®æ”¹å¥½é…ç½®ä¹‹åæ‰§è¡Œ:python manage.py collectstaticå°†é¡¹ç›®ç”¨åˆ°çš„é™æ€æ–‡ä»¶å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„staticæ–‡ä»¶ä¸­ 3ã€å®‰è£…uwsgiå’ŒNginxè¿™ä¸ªæ²¡ä»€ä¹ˆè¯´çš„ã€‚ã€‚ã€‚åœ¨è‡ªå·±çš„äº‘æœåŠ¡å™¨ä¸Šè£…å¥½è¿™ä¸¤ä¸ªå·¥å…·å®‰è£…å¥½uwsgiåæœ€å¥½éªŒè¯ä¸€ä¸‹ï¼ŒéªŒè¯æ–¹æ³•ï¼šåˆ›å»ºä¸€ä¸ªtest.pyæ–‡ä»¶ï¼š 1234def application(env, start_response): start_response(&apos;200 OK&apos;, [(&apos;Content-Type&apos;, &apos;text/html&apos;)]) return [b&apos;Hello world!&apos;] #python3 # return [&apos;Hello world!&apos;] #python2 å¯åŠ¨uwsgiæœåŠ¡å™¨ï¼š 1uwsgi --http :8000 --wsgi-file test.py å¦‚æœå¯ä»¥æ­£å¸¸å¯åŠ¨è€Œä¸æŠ¥é”™é‚£å°±åº”è¯¥æ²¡é—®é¢˜ï¼Œä¸æ”¾å¿ƒçš„è¯å†åœ¨ç»ˆç«¯éªŒè¯ä¸€ä¸‹ï¼šwget https://127.0.0.1:8000çœ‹ä¸€ä¸‹èƒ½å¦æ­£ç¡®è·å–å†…å®¹ 4ã€é…ç½®é¡¹ç›®çš„uwsgiåœ¨é¡¹ç›®æ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºuwsgi.inié…ç½®æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œ:åœ¨uwsgi.inié‡Œè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š 123456789101112131415161718192021222324252627282930[uwsgi]# Django-related settings # è¿™é‡Œçš„ç«¯å£å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦è®¾å®šsocket = 127.0.0.1:8001 # the base directory (full path)# è¿™ä¸ªæ˜¯Djangoé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯åŒ…å«Appçš„é‚£ä¸ªç›®å½•ï¼Œä»”ç»†å¯¹ç…§ä¸Šå›¾chdir = /home/python/book2kindle # Django s wsgi file# è¿™é‡Œæ˜¯é¡¹ç›®å(ä¸æ˜¯Appå).wsgimodule = book2kindle.wsgi # process-related settings# mastermaster = true # maximum number of worker processesprocesses = 32 # ... with appropriate permissions - may be needed# chmod-socket = 664# clear environment on exitvacuum = true plugin python = true # è¿™ä¸ªæ˜¯é¡¹ç›®çš„è™šæ‹Ÿpythonç¯å¢ƒï¼Œå¦‚æœæ²¡ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥ä¸è®¾å®šhome = /home/python/book2kindle_env 5ã€é…ç½®é¡¹ç›®çš„nginxæ‰¾åˆ°nginxçš„é…ç½®æ–‡ä»¶å¤¹ï¼Œcentos7çš„nginxé…ç½®æ–‡ä»¶åœ¨/etc/nginxä¸‹ï¼Œè¯¥è·¯å¾„ä¸‹æœ‰ä¸€ä¸ªnginx.confæ€»é…ç½®æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹./conf.dã€./default.dï¼Œæˆ‘ä»¬å°†nginx.confå¤åˆ¶ä¸€ä»½åˆ°conf.dæ–‡ä»¶å¤¹ä¸‹ï¼Œå‘½åä¸ºnginx.confï¼ˆæˆ–è€…é¡¹ç›®å.confï¼‰è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼ˆæ ¹æ®ä¸­æ–‡æ³¨é‡Šè¿›è¡Œç›¸åº”é…ç½®å³å¯ï¼‰ï¼š 12345678910111213141516171819202122http { upstream django { # æ³¨æ„è¿™é‡Œçš„serverè¦å’Œuwsgi.inié…ç½®æ–‡ä»¶ä¸­çš„socketä¿æŒä¸€è‡´ server 127.0.0.1:8002; # for a web port socket } server { listen 80; server_name xxx.com; # è¿™é‡Œå¡«è‡ªå·±çš„åŸŸåæˆ–è€…æœåŠ¡å™¨çš„ipï¼ˆå†³å®šä½ ä»Šåè®¿é—®ç½‘ç«™çš„æ–¹å¼ï¼‰ charset utf-8; root /usr/share/nginx/html; location / { root /home/python/book2kindle/kindle; # è¿™æ˜¯Django Appçš„è·¯å¾„ uwsgi_pass django; include uwsgi_params; # the uwsgi_params file you installed } location /static { # Djangoé¡¹ç›®é™æ€æ–‡ä»¶çš„è·¯å¾„ alias /home/python/book2kindle/static; } } } 6ã€å¯åŠ¨uwsgiå’Œnginxè¿›å…¥uwsgi.iniæ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œï¼šuwsgi --ini uwsgi.iniåœ¨ç»ˆç«¯æ‰§è¡Œï¼šservice nginx restartç„¶åå°±å¯ä»¥æ ¹æ®åŸŸåï¼ˆå‰ææ˜¯è¦å°†åŸŸåè§£æåˆ°æœåŠ¡å™¨ipåœ°å€ï¼‰æˆ–è€…æœåŠ¡å™¨ipæ¥è®¿é—®ç½‘ç«™äº†ï¼ OKï¼Œå®Œäº‹ï¼å°±æ˜¯è¿™ä¹ˆç®€å•ï¼","link":"/program/Python/django/"},{"title":"MongoDB","text":"MongoDBæ˜¯ä¸€ä¸ªè·¨å¹³å°ï¼Œé¢å‘æ–‡æ¡£çš„æ•°æ®åº“ï¼Œæä¾›é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§å’Œæ˜“äºæ‰©å±•ã€‚MongoDBæ˜¯å·¥ä½œåœ¨é›†åˆå’Œæ–‡æ¡£ä¸Šä¸€ç§æ¦‚å¿µã€‚ æ•°æ®åº“ æ•°æ®åº“æ˜¯ä¸€ä¸ªé›†åˆçš„ç‰©ç†å®¹å™¨ã€‚æ¯ä¸ªæ•°æ®åº“è·å–å…¶è‡ªå·±è®¾å®šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚ä¸€ä¸ªå•ä¸€çš„MongoDBæœåŠ¡å™¨é€šå¸¸æœ‰å¤šä¸ªæ•°æ®åº“ã€‚ é›†åˆ é›†åˆæ˜¯ä¸€ç»„MongoDBçš„æ–‡ä»¶ã€‚å®ƒä¸ä¸€ä¸ªRDBMSè¡¨æ˜¯ç­‰æ•ˆçš„ã€‚ä¸€ä¸ªé›†åˆå­˜åœ¨äºæ•°æ®åº“ä¸­ã€‚é›†åˆä¸å¼ºåˆ¶æ‰§è¡Œæ¨¡å¼ã€‚é›†åˆä¸­çš„æ–‡æ¡£å¯ä»¥æœ‰ä¸åŒçš„å­—æ®µã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ˜¯ç±»ä¼¼æˆ–ç›¸å…³ç›®çš„ã€‚ æ–‡æ¡£ æ–‡æ¡£æ˜¯ä¸€ç»„é”®å€¼å¯¹ã€‚æ–‡æ¡£å…·æœ‰åŠ¨æ€æ¨¡å¼ã€‚åŠ¨æ€æ¨¡å¼æ˜¯æŒ‡ï¼Œåœ¨åŒä¸€ä¸ªé›†åˆçš„æ–‡ä»¶ä¸å¿…å…·æœ‰ç›¸åŒä¸€ç»„é›†åˆçš„æ–‡æ¡£å­—æ®µæˆ–ç»“æ„ï¼Œå¹¶ä¸”ç›¸åŒçš„å­—æ®µå¯ä»¥ä¿æŒä¸åŒç±»å‹çš„æ•°æ®ã€‚ä¸‹é¢ç»™å‡ºçš„ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªåšå®¢ç½‘ç«™ï¼Œä»…ä»…æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„é”®å€¼å¯¹çš„æ–‡æ¡£ç»“æ„ã€‚ 1234567891011121314151617181920212223{ _id: ObjectId(7df78ad8902c) title: &apos;MongoDB Overview&apos;, description: &apos;MongoDB is no sql database&apos;, by: &apos;yiibai tutorial&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 100, comments: [ { user:&apos;user1&apos;, message: &apos;My first comment&apos;, dateCreated: new Date(2011,1,20,2,15), like: 0 }, { user:&apos;user2&apos;, message: &apos;My second comments&apos;, dateCreated: new Date(2011,1,25,7,45), like: 5 } ]} åˆ›å»ºæ•°æ®åº“ MongoDB use DATABASE_NAME ç”¨äºåˆ›å»ºæ•°æ®åº“ã€‚è¯¥å‘½ä»¤å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ï¼Œ å¦åˆ™å°†è¿”å›ç°æœ‰çš„æ•°æ®åº“ã€‚ è¯­æ³•use DATABASEè¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼šuse DATABASE_NAME ä¾‹å­ï¼š12345678910111213141516171819å¦‚æœæƒ³åˆ›å»ºä¸€ä¸ªæ•°æ®åº“åç§°ä¸º &lt;mydb&gt;, é‚£ä¹ˆ use DATABASE è¯­å¥åº”è¯¥å¦‚ä¸‹ï¼š&gt;use mydbswitched to db mydbè¦æ£€æŸ¥å½“å‰é€‰æ‹©çš„æ•°æ®åº“ä½¿ç”¨å‘½ä»¤ db&gt;dbmydbå¦‚æœæƒ³æŸ¥è¯¢æ•°æ®åº“åˆ—è¡¨ï¼Œé‚£ä¹ˆä½¿ç”¨å‘½ä»¤ show dbs.&gt;show dbslocal 0.78125GBtest 0.23012GBæ‰€åˆ›å»ºçš„æ•°æ®åº“ï¼ˆmydbï¼‰ä¸å­˜åœ¨äºåˆ—è¡¨ä¸­ã€‚è¦æ˜¾ç¤ºçš„æ•°æ®åº“ï¼Œéœ€è¦è‡³å°‘æ’å…¥ä¸€ä¸ªæ–‡æ¡£è¿›å»ã€‚&gt;db.movie.insert({&quot;name&quot;:&quot;yiibai tutorials&quot;})&gt;show dbslocal 0.78125GBmydb 0.23012GBtest 0.23012GB MongoDBçš„é»˜è®¤æ•°æ®åº“æ˜¯testã€‚ å¦‚æœæ²¡æœ‰åˆ›å»ºä»»ä½•æ•°æ®åº“ï¼Œé‚£ä¹ˆé›†åˆå°†è¢«ä¿å­˜åœ¨æµ‹è¯•æ•°æ®åº“ã€‚ åˆ é™¤æ•°æ®åº“MongoDB db.dropDatabase() å‘½ä»¤ç”¨äºåˆ é™¤ç°æœ‰çš„æ•°æ®åº“ã€‚ è¯­æ³•dropDatabase()æŒ‡ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼šdb.dropDatabase() è¿™å°†åˆ é™¤é€‰å®šçš„æ•°æ®åº“ã€‚å¦‚æœæ²¡æœ‰é€‰æ‹©ä»»ä½•æ•°æ®åº“ï¼Œé‚£ä¹ˆå®ƒä¼šåˆ é™¤é»˜è®¤çš„â€œtestâ€æ•°æ®åº“ ä¾‹å­ï¼šå¦‚æœæƒ³åˆ é™¤æ–°çš„æ•°æ®åº“ , é‚£ä¹ˆ dropDatabase() å‘½ä»¤å°†å¦‚ä¸‹æ‰€ç¤ºï¼š 12345&gt;use mydbswitched to db mydb&gt;db.dropDatabase()&gt;{ &quot;dropped&quot; : &quot;mydb&quot;, &quot;ok&quot; : 1 }&gt; åˆ›å»ºé›†åˆMongoDB çš„ db.createCollection(name, options) ç”¨äºåˆ›å»ºé›†åˆã€‚ åœ¨å‘½ä»¤ä¸­, name æ˜¯è¦åˆ›å»ºé›†åˆçš„åç§°ã€‚ Options æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼Œç”¨äºæŒ‡å®šé›†åˆçš„é…ç½® å‚æ•° ç±»å‹ æè¿° Name String è¦åˆ›å»ºçš„é›†åˆçš„åç§° Options Document ï¼ˆå¯é€‰ï¼‰æŒ‡å®šæœ‰å…³å†…å­˜å¤§å°å’Œç´¢å¼•é€‰é¡¹ é€‰é¡¹å‚æ•°æ˜¯å¯é€‰çš„ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šé›†åˆçš„å”¯ä¸€åå­—ã€‚ è¯­æ³•createCollection()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ 12345&gt;use testswitched to db test&gt;db.createCollection(&quot;mycollection&quot;){ &quot;ok&quot; : 1 }&gt; å¯ä»¥é€šè¿‡ä½¿ç”¨ show collections å‘½ä»¤æ¥æ£€æŸ¥åˆ›å»ºçš„é›†åˆ 123&gt;show collectionsmycollectionsystem.indexes é€‰é¡¹åˆ—è¡¨ å­—æ®µ ç±»å‹ æè¿° capped Boolean ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸ºtrueï¼Œå®ƒå¯ç”¨ä¸Šé™é›†åˆã€‚ä¸Šé™é›†åˆæ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„é›†åˆï¼Œå½“å®ƒè¾¾åˆ°å…¶æœ€å¤§å°ºå¯¸ä¼šè‡ªåŠ¨è¦†ç›–æœ€è€çš„æ¡ç›®ã€‚ å¦‚æœæŒ‡å®štrueï¼Œåˆ™è¿˜éœ€è¦æŒ‡å®šå‚æ•°çš„å¤§å°ã€‚ autoIndexID Boolean ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸ºtrueï¼Œè‡ªåŠ¨åˆ›å»ºç´¢å¼•_idå­—æ®µã€‚é»˜è®¤çš„å€¼æ˜¯ false. size number ï¼ˆå¯é€‰ï¼‰æŒ‡å®šçš„ä¸Šé™é›†åˆå­—èŠ‚çš„æœ€å¤§å°ºå¯¸ã€‚å¦‚æœcapped æ˜¯trueï¼Œé‚£ä¹ˆè¿˜éœ€è¦æŒ‡å®šè¿™ä¸ªå­—æ®µã€‚ max number ï¼ˆå¯é€‰ï¼‰æŒ‡å®šä¸Šé™é›†åˆå…è®¸çš„æœ€å¤§æ–‡ä»¶æ•°ã€‚ å°½ç®¡æ’å…¥æ–‡æ¡£ï¼ŒMongoDBé¦–å…ˆæ£€æŸ¥å­—æ®µé›†åˆçš„ä¸Šé™å¤§å°ï¼Œé‚£ä¹ˆå®ƒä¼šæ£€æŸ¥æœ€å¤§å­—æ®µã€‚ è¯­æ³• :123&gt;db.createCollection(&quot;mycol&quot;, { capped : true, autoIndexID : true, size : 6142800, max : 10000 } ){ &quot;ok&quot; : 1 }&gt; åœ¨MongoDBä¸­å¹¶ä¸éœ€è¦åˆ›å»ºé›†åˆã€‚ å½“æ’å…¥ä¸€äº›æ–‡æ¡£ MongoDB ä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆã€‚ 1234567&gt;db.yiibai.insert({&quot;name&quot; : &quot;yiibai&quot;})&gt;show collectionsmycolmycollectionsystem.indexesyiibai&gt; åˆ é™¤é›†åˆMongoDB çš„ db.collection.drop() ç”¨äºä»æ•°æ®åº“ä¸­åˆ é™¤é›†åˆã€‚ è¯­æ³•drop() å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹db.COLLECTION_NAME.drop() ä¾‹å­ï¼šä¸‹é¢ç»™å‡ºçš„ä¾‹å­å°†åˆ é™¤ç»™å®šåç§°çš„é›†åˆï¼šmycollection 12345&gt;use mydbswitched to db mydb&gt;db.mycollection.drop()true&gt; æ’å…¥æ–‡æ¡£å°†æ•°æ®æ’å…¥åˆ°MongoDBé›†åˆï¼Œéœ€è¦ä½¿ç”¨MongoDB çš„ insert() æ–¹æ³•ã€‚ è¯­æ³•insert()å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&gt;db.COLLECTION_NAME.insert(document) ä¾‹å­123456789&gt;db.mycol.insert({ _id: ObjectId(7df78ad8902c), title: &apos;MongoDB Overview&apos;, description: &apos;MongoDB is no sql database&apos;, by: &apos;yiibai tutorials&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 100}) è¿™é‡Œ mycol æ˜¯æˆ‘ä»¬çš„é›†åˆåç§°ï¼Œå®ƒæ˜¯åœ¨ä¹‹å‰çš„æ•™ç¨‹ä¸­åˆ›å»ºã€‚å¦‚æœé›†åˆä¸å­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œé‚£ä¹ˆMongoDBåˆ›å»ºæ­¤é›†åˆï¼Œç„¶åæ’å…¥æ–‡æ¡£è¿›å»ã€‚ åœ¨å¦‚æœæˆ‘ä»¬ä¸æŒ‡å®š_idå‚æ•°æ’å…¥çš„æ–‡æ¡£ï¼Œé‚£ä¹ˆ MongoDB å°†ä¸ºæ–‡æ¡£åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ObjectIdã€‚ _id æ˜¯12ä¸ªå­—èŠ‚åå…­è¿›åˆ¶æ•°åœ¨ä¸€ä¸ªé›†åˆçš„æ¯ä¸ªæ–‡æ¡£æ˜¯å”¯ä¸€çš„ã€‚ 12ä¸ªå­—èŠ‚è¢«åˆ’åˆ†å¦‚ä¸‹ï¼š_id: ObjectId(4 bytes timestamp, 3 bytes machine id, 2 bytes process id, 3 bytes incrementer) è¦ä»¥å•ä¸ªæŸ¥è¯¢æ’å…¥å¤šä¸ªæ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡æ–‡æ¡£ insert() å‘½ä»¤çš„æ•°ç»„æ–¹å¼ã€‚ ä¾‹å­1234567891011121314151617181920212223242526&gt;db.post.insert([{ title: &apos;MongoDB Overview&apos;, description: &apos;MongoDB is no sql database&apos;, by: &apos;yiibai tutorials&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 100},{ title: &apos;NoSQL Database&apos;, description: &apos;NoSQL database doesn&apos;t have tables&apos;, by: &apos;yiibai tutorials&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 20, comments: [ { user:&apos;user1&apos;, message: &apos;My first comment&apos;, dateCreated: new Date(2013,11,10,2,35), like: 0 } ]}]) æŸ¥è¯¢æ–‡æ¡£è¦ä»é›†åˆæŸ¥è¯¢MongoDBæ•°æ®ï¼Œéœ€è¦ä½¿ç”¨MongoDBçš„ find()æ–¹æ³•ã€‚ è¯­æ³•find()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹&gt;db.COLLECTION_NAME.find()find() æ–¹æ³•å°†åœ¨éç»“æ„åŒ–çš„æ–¹å¼æ˜¾ç¤ºæ‰€æœ‰çš„æ–‡ä»¶ã€‚ å¦‚æœæ˜¾ç¤ºç»“æœæ˜¯æ ¼å¼åŒ–çš„ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨pretty() æ–¹æ³•ã€‚ è¯­æ³•&gt;db.mycol.find().pretty() ä¾‹å­1234567891011&gt;db.mycol.find().pretty(){ &quot;_id&quot;: ObjectId(7df78ad8902c), &quot;title&quot;: &quot;MongoDB Overview&quot;, &quot;description&quot;: &quot;MongoDB is no sql database&quot;, &quot;by&quot;: &quot;yiibai tutorials&quot;, &quot;url&quot;: &quot;https://www.yiibai.com&quot;, &quot;tags&quot;: [&quot;mongodb&quot;, &quot;database&quot;, &quot;NoSQL&quot;], &quot;likes&quot;: &quot;100&quot;}&gt; é™¤äº†find()æ–¹æ³•è¿˜æœ‰findOne()æ–¹æ³•ï¼Œä»…è¿”å›ä¸€ä¸ªæ–‡æ¡£ã€‚ RDBMS Whereå­å¥ç­‰æ•ˆäºMongoDBæŸ¥è¯¢æ–‡æ¡£åœ¨ä¸€äº›æ¡ä»¶çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ“ä½œ æ“ä½œ è¯­æ³• ç¤ºä¾‹ RDBMSç­‰æ•ˆè¯­å¥ Equality {&lt;key&gt;:&lt;value&gt;} db.mycol.find({â€œbyâ€:â€yiibai tutorialsâ€}).pretty() where by = â€˜yiibai tutorialsâ€™ Less Than {&lt;key&gt;:{$lt:&lt;value&gt;}} db.mycol.find({â€œlikesâ€:{$lt:50}}).pretty() where likes &lt; 50 Less Than Equals {&lt;key&gt;:{$lte:&lt;value&gt;}} db.mycol.find({â€œlikesâ€:{$lte:50}}).pretty() where likes &lt;= 50 Greater Than {&lt;key&gt;:{$gt:&lt;value&gt;}} db.mycol.find({â€œlikesâ€:{$gt:50}}).pretty() where likes &gt; 50 Greater Than Equals {&lt;key&gt;:{$gte:&lt;value&gt;}} db.mycol.find({â€œlikesâ€:{$gte:50}}).pretty() where likes &gt;= 50 Not Equals {&lt;key&gt;:{$ne:&lt;value&gt;}} db.mycol.find({â€œlikesâ€:{$ne:50}}).pretty() where likes != 50 AND åœ¨ MongoDBè¯­æ³•åœ¨ find()æ–¹æ³•ï¼Œå¦‚æœæ‚¨ä¼ é€’å¤šä¸ªé”®é€šè¿‡â€,â€å°†å®ƒä»¬åˆ†å¼€ï¼Œé‚£ä¹ˆMongoDBå¯¹å¾…å®ƒå°±å¦‚ANDæ¡ä»¶ä¸€æ ·ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š&gt;db.mycol.find({key1:value1, key2:value2}).pretty() ä¾‹å­ä¸‹é¢ç»™å‡ºçš„ä¾‹å­å°†æ˜¾ç¤ºæ‰€æœ‰æ•™ç¨‹å«â€œyiibai tutorialsâ€å’Œå…¶æ ‡é¢˜æ˜¯â€œMongoDB Overviewâ€ 1234567891011&gt;db.mycol.find({&quot;by&quot;:&quot;yiibai tutorials&quot;,&quot;title&quot;: &quot;MongoDB Overview&quot;}).pretty(){ &quot;_id&quot;: ObjectId(7df78ad8902c), &quot;title&quot;: &quot;MongoDB Overview&quot;, &quot;description&quot;: &quot;MongoDB is no sql database&quot;, &quot;by&quot;: &quot;yiibai tutorials&quot;, &quot;url&quot;: &quot;https://www.yiibai.com&quot;, &quot;tags&quot;: [&quot;mongodb&quot;, &quot;database&quot;, &quot;NoSQL&quot;], &quot;likes&quot;: &quot;100&quot;}&gt; å¯¹äºä¸Šé¢ç»™å‡ºçš„ä¾‹å­ç›¸å½“äºwhereå­å¥ï¼šâ€™ where by=â€™yiibai tutorialsâ€™ AND title=â€™MongoDB Overviewâ€™ â€˜ã€‚å¯ä»¥ä¼ é€’ä»»ä½•æ•°ç›®çš„é”®-å€¼å¯¹åœ¨findå­å¥ã€‚ OR åœ¨ MongoDBè¯­æ³•è¦æŸ¥è¯¢åŸºäºORæ¡ä»¶çš„æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨$orå…³é”®å­—ã€‚ORçš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567&gt;db.mycol.find( { $or: [ {key1: value1}, {key2:value2} ] }).pretty() ä¾‹å­ä¸‹é¢ç»™å‡ºçš„ä¾‹å­å°†æ˜¾ç¤ºæ‰€æœ‰æ’°å†™å«æœ‰ â€˜yiibai tutorialsâ€™ æˆ–æ˜¯æ ‡é¢˜ä¸º â€˜MongoDB Overviewâ€™ çš„æ•™ç¨‹ 1234567891011&gt;db.mycol.find({$or:[{&quot;by&quot;:&quot;tutorials point&quot;},{&quot;title&quot;: &quot;MongoDB Overview&quot;}]}).pretty(){ &quot;_id&quot;: ObjectId(7df78ad8902c), &quot;title&quot;: &quot;MongoDB Overview&quot;, &quot;description&quot;: &quot;MongoDB is no sql database&quot;, &quot;by&quot;: &quot;yiibai tutorials&quot;, &quot;url&quot;: &quot;https://www.yiibai.com&quot;, &quot;tags&quot;: [&quot;mongodb&quot;, &quot;database&quot;, &quot;NoSQL&quot;], &quot;likes&quot;: &quot;100&quot;}&gt; ä½¿ç”¨ AND å’Œ OR åœ¨ä¸€èµ·ä¾‹å­ä¸‹é¢ç»™å‡ºçš„ä¾‹å­æ˜¾ç¤ºæœ‰å–œæ¬¢æ•°å¤§äº100 çš„æ–‡æ¡£ï¼Œå…¶æ ‡é¢˜è¦ä¹ˆæ˜¯ â€˜MongoDB Overviewâ€™ æˆ– â€˜yiibai tutorialsâ€™. ç­‰æ•ˆäºSQLçš„whereå­å¥ï¼šâ€™where likes&gt;10 AND (by = â€˜yiibai tutorialsâ€™ OR title = â€˜MongoDB Overviewâ€™)â€™ 1234567891011&gt;db.mycol.find(&quot;likes&quot;: {$gt:10}, $or: [{&quot;by&quot;: &quot;yiibai tutorials&quot;}, {&quot;title&quot;: &quot;MongoDB Overview&quot;}] }).pretty(){ &quot;_id&quot;: ObjectId(7df78ad8902c), &quot;title&quot;: &quot;MongoDB Overview&quot;, &quot;description&quot;: &quot;MongoDB is no sql database&quot;, &quot;by&quot;: &quot;yiibai tutorials&quot;, &quot;url&quot;: &quot;https://www.yiibai.com&quot;, &quot;tags&quot;: [&quot;mongodb&quot;, &quot;database&quot;, &quot;NoSQL&quot;], &quot;likes&quot;: &quot;100&quot;}&gt; æ›´æ–°æ–‡æ¡£MongoDBçš„update()å’Œsave()æ–¹æ³•ç”¨äºæ›´æ–°æ–‡æ¡£åˆ°ä¸€ä¸ªé›†åˆã€‚ update()æ–¹æ³•å°†ç°æœ‰çš„æ–‡æ¡£ä¸­çš„å€¼æ›´æ–°ï¼Œè€Œsave()æ–¹æ³•ä½¿ç”¨ä¼ é€’åˆ°save()æ–¹æ³•çš„æ–‡æ¡£æ›¿æ¢ç°æœ‰çš„æ–‡æ¡£ã€‚ MongoDB Update() æ–¹æ³•è¯­æ³•update()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ 1&gt;db.COLLECTION_NAME.update(SELECTIOIN_CRITERIA, UPDATED_DATA) ä¾‹å­è€ƒè™‘mycolé›†åˆæœ‰å¦‚ä¸‹æ•°æ®ã€‚ 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ä¸‹é¢çš„ä¾‹å­å°†è®¾ç½®å…¶æ ‡é¢˜â€œMongoDB Overviewâ€çš„æ–‡ä»¶ä¸ºæ–°æ ‡é¢˜ä¸ºâ€œNew MongoDB Tutorialâ€ 123456&gt;db.mycol.update({&apos;title&apos;:&apos;MongoDB Overview&apos;},{$set:{&apos;title&apos;:&apos;New MongoDB Tutorial&apos;}})&gt;db.mycol.find(){ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;New MongoDB Tutorial&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Tutorial Overview&quot;}&gt; é»˜è®¤æƒ…å†µä¸‹ï¼ŒMongoDBå°†åªæ›´æ–°å•ä¸€æ–‡ä»¶ï¼Œæ›´æ–°å¤šï¼Œéœ€è¦ä¸€ä¸ªå‚æ•° â€˜multiâ€™ è®¾ç½®ä¸º trueã€‚ 1&gt;db.mycol.update({&apos;title&apos;:&apos;MongoDB Overview&apos;},{$set:{&apos;title&apos;:&apos;New MongoDB Tutorial&apos;}},{multi:true}) MongoDB Save() æ–¹æ³•save() æ–¹æ³•å–ä»£ï¼Œé€šè¿‡æ–°æ–‡æ¡£åˆ° save()æ–¹æ³• è¯­æ³•mongodb çš„ save()æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºçš„åŸºæœ¬è¯­æ³•ï¼š&gt;db.COLLECTION_NAME.save({_id:ObjectId(),NEW_DATA}) ä¾‹å­ä¸‹é¢çš„ä¾‹å­å°†æ›¿æ¢è¯¥æ–‡ä»¶_id â€˜5983548781331adf45ec7â€™ 12345678910&gt;db.mycol.save( { &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai New Topic&quot;, &quot;by&quot;:&quot;Yiibai Yiibai&quot; })&gt;db.mycol.find(){ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;Yiibai Yiibai New Topic&quot;, &quot;by&quot;:&quot;Yiibai Yiibai&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;}&gt; åˆ é™¤æ–‡æ¡£MongoDB çš„ remove()æ–¹æ³•ç”¨äºä»é›†åˆä¸­åˆ é™¤æ–‡æ¡£ã€‚remove()æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ä¸€ä¸ªæ˜¯æ ‡å‡†ç¼ºå¤±ï¼Œç¬¬äºŒæ˜¯justOneæ ‡å¿—deletion criteria : æ ¹æ®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰åˆ é™¤æ¡ä»¶å°†è¢«åˆ é™¤ã€‚justOne : ï¼ˆå¯é€‰ï¼‰å¦‚æœè®¾ç½®ä¸ºtrueæˆ–1ï¼Œç„¶åå–å‡ºåªæœ‰ä¸€ä¸ªæ–‡æ¡£ã€‚ è¯­æ³•remove()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹&gt;db.COLLECTION_NAME.remove(DELLETION_CRITTERIA) ä¾‹å­è€ƒè™‘mycolé›†åˆæœ‰å¦‚ä¸‹æ•°æ®ã€‚ 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ä¸‹é¢çš„ä¾‹å­å°†åˆ é™¤æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå…¶æ ‡é¢˜ä¸º â€˜MongoDB Overviewâ€™ 12345&gt;db.mycol.remove({&apos;title&apos;:&apos;MongoDB Overview&apos;})&gt;db.mycol.find(){ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Toturials Overview&quot;}&gt; åªåˆ é™¤ä¸€ä¸ªå¦‚æœæœ‰å¤šä¸ªè®°å½•ï¼Œå¹¶è¦åˆ é™¤ä»…ç¬¬ä¸€æ¡è®°å½•ï¼Œç„¶ååœ¨ remove()æ–¹æ³•è®¾ç½®å‚æ•° justOne ã€‚&gt;db.COLLECTION_NAME.remove(DELETION_CRITERIA,1) åˆ é™¤æ‰€æœ‰æ–‡ä»¶å¦‚æœæ²¡æœ‰æŒ‡å®šåˆ é™¤æ¡ä»¶ï¼Œåˆ™MongoDBå°†ä»é›†åˆä¸­åˆ é™¤æ•´ä¸ªæ–‡ä»¶ã€‚è¿™ç›¸å½“äºSQLçš„ truncate å‘½ä»¤ã€‚ 123&gt;db.mycol.remove()&gt;db.mycol.find()&gt; MongoDBæŠ•å½±mongodbæŠ•å½±æ„ä¹‰æ˜¯åªé€‰æ‹©éœ€è¦çš„æ•°æ®ï¼Œè€Œä¸æ˜¯é€‰æ‹©æ•´ä¸ªä¸€ä¸ªæ–‡æ¡£çš„æ•°æ®ã€‚å¦‚æœä¸€ä¸ªæ–‡æ¡£æœ‰5ä¸ªå­—æ®µï¼Œåªéœ€è¦æ˜¾ç¤º3ä¸ªï¼Œåªä»ä¸­é€‰æ‹©3ä¸ªå­—æ®µã€‚ MongoDBçš„find()æ–¹æ³•ï¼Œè§£é‡Šäº†MongoDBä¸­æŸ¥è¯¢æ–‡æ¡£æ¥æ”¶çš„ç¬¬äºŒä¸ªå¯é€‰çš„å‚æ•°æ˜¯è¦æ£€ç´¢çš„å­—æ®µåˆ—è¡¨ã€‚åœ¨MongoDBä¸­ï¼Œå½“æ‰§è¡Œfind()æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡æ¡£çš„æ‰€æœ‰å­—æ®µã€‚è¦é™åˆ¶è¿™ä¸€ç‚¹ï¼Œéœ€è¦è®¾ç½®å­—æ®µåˆ—è¡¨å€¼ä¸º1æˆ–0ã€‚1æ˜¯ç”¨æ¥æ˜¾ç¤ºå­—æ®µï¼Œè€Œ0è¢«ç”¨æ¥éšè—å­—æ®µã€‚ è¯­æ³• find()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹&gt;db.COLLECTION_NAME.find({},{KEY:1}) ä¾‹å­ è€ƒè™‘é›†åˆ myycol æœ‰ä¸‹åˆ—æ•°æ® 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ä¸‹é¢çš„ä¾‹å­å°†æ˜¾ç¤ºæ–‡æ¡£çš„æ ‡é¢˜ï¼Œåœ¨æŸ¥è¯¢æ–‡æ¡£æ—¶ã€‚ 12345&gt;db.mycol.find({},{&quot;title&quot;:1,_id:0}){&quot;title&quot;:&quot;MongoDB Overview&quot;}{&quot;title&quot;:&quot;NoSQL Overview&quot;}{&quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;}&gt; è¯·æ³¨æ„åœ¨æ‰§è¡Œfind()æ–¹æ³•æ—¶_idå­—æ®µå§‹ç»ˆæ˜¾ç¤ºï¼Œå¦‚æœä¸æƒ³è¦æ˜¾ç¤ºè¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆéœ€è¦å°†å…¶è®¾ç½®ä¸º0 é™åˆ¶æ–‡æ¡£MongoDB Limit() æ–¹æ³• è¦åœ¨MongoDBä¸­é™åˆ¶è®°å½•ï¼Œéœ€è¦ä½¿ç”¨limit()æ–¹æ³•ã€‚ limit() æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°å­—ç±»å‹çš„å‚æ•°ï¼Œè¿™æ˜¯è¦æ˜¾ç¤ºçš„æ–‡æ¡£æ•°é‡ã€‚ è¯­æ³•limit()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹&gt;db.COLLECTION_NAME.find().limit(NUMBER) ä¾‹å­ è€ƒè™‘é›†åˆ myycol æœ‰ä¸‹åˆ—æ•°æ® 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ä¸‹é¢çš„ä¾‹å­å°†åªæ˜¾ç¤º2ä¸ªæ–‡æ¡£ï¼Œåœ¨æŸ¥è¯¢æ–‡æ¡£æ—¶ã€‚ 1234&gt;db.mycol.find({},{&quot;title&quot;:1,_id:0}).limit(2){&quot;title&quot;:&quot;MongoDB Overview&quot;}{&quot;title&quot;:&quot;NoSQL Overview&quot;}&gt; å¦‚æœä¸æŒ‡å®š limit()æ–¹æ³•çš„å‚æ•°æ•°é‡ï¼Œç„¶åå®ƒä¼šæ˜¾ç¤ºé›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£ã€‚ MongoDB Skip() æ–¹æ³• é™¤äº† limit()æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªæ–¹æ³• skip()ä¹Ÿæ¥å—æ•°å­—ç±»å‹å‚æ•°å¹¶ç”¨äºè·³è¿‡æ–‡ä»¶æ•°ã€‚ è¯­æ³• skip() æ–¹æ³•çš„åŸºç¡€è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š&gt;db.COLLECTION_NAME.find().limit(NUMBER).skip(NUMBER) ä¾‹å­ï¼š ä¸‹é¢çš„ä¾‹å­å°†ä»…æ˜¾ç¤ºç¬¬äºŒä¸ªæ–‡æ¡£ã€‚ 123&gt;db.mycol.find({},{&quot;title&quot;:1,_id:0}).limit(1).skip(1){&quot;title&quot;:&quot;NoSQL Overview&quot;}&gt; è¯·æ³¨æ„ï¼Œskip() æ–¹æ³•çš„é»˜è®¤å€¼æ˜¯ 0 æ–‡æ¡£æ’åºè¦æ’åºMongoDBä¸­çš„æ–‡æ¡£ï¼Œéœ€è¦ä½¿ç”¨ sort()æ–¹æ³•ã€‚ sort() æ–¹æ³•æ¥å—ä¸€ä¸ªåŒ…å«å­—æ®µåˆ—è¡¨ä»¥åŠæ’åºé¡ºåºçš„æ–‡æ¡£ã€‚ è¦ä½¿ç”¨1å’Œ-1æŒ‡å®šæ’åºé¡ºåºã€‚1ç”¨äºå‡åºï¼Œè€Œ-1æ˜¯ç”¨äºé™åºã€‚ è¯­æ³• sort()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹&gt;db.COLLECTION_NAME.find().sort({KEY:1}) ä¾‹å­ è€ƒè™‘é›†åˆ myycol æœ‰å¦‚ä¸‹æ•°æ® 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ä¸‹é¢çš„ä¾‹å­å°†æ˜¾ç¤ºçš„æ–‡ä»¶æ’åºæŒ‰æ ‡é¢˜é™åºæ’åºã€‚ 12345&gt;db.mycol.find({},{&quot;title&quot;:1,_id:0}).sort({&quot;title&quot;:-1}){&quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;}{&quot;title&quot;:&quot;NoSQL Overview&quot;}{&quot;title&quot;:&quot;MongoDB Overview&quot;}&gt; è¯·æ³¨æ„ï¼Œå¦‚æœä¸æŒ‡å®šæ’åºç±»å‹ï¼Œé‚£ä¹ˆ sort() æ–¹æ³•å°†ä»¥å‡åºæ’åˆ—æ–‡æ¡£ã€‚ MongoDBç´¢å¼•ç´¢å¼•æ”¯æŒæŸ¥è¯¢é«˜æ•ˆç‡æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼ŒMongoDBå¿…é¡»æ‰«æé›†åˆä¸­çš„æ¯ä¸€ä¸ªæ–‡æ¡£ï¼Œç„¶åé€‰æ‹©é‚£äº›ç¬¦åˆæŸ¥è¯¢è¯­å¥çš„æ–‡æ¡£ã€‚è‹¥éœ€è¦ mongod æ¥å¤„ç†å¤§é‡æ•°æ®ï¼Œæ‰«ææ˜¯éå¸¸ä½æ•ˆçš„ã€‚ ç´¢å¼•æ˜¯ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªæ˜“äºè®¾ç½®éå†å½¢å¼çš„æ•°æ®çš„ä¸€å°éƒ¨åˆ†ã€‚ç´¢å¼•å­˜å‚¨åœ¨ç´¢å¼•ä¸­æŒ‡å®šç‰¹å®šå­—æ®µçš„å€¼æˆ–ä¸€ç»„å­—æ®µï¼Œå¹¶æ’åºå­—æ®µçš„å€¼ã€‚ è¦åˆ›å»ºç´¢å¼•ï¼Œéœ€è¦ä½¿ç”¨MongoDBçš„ensureIndex()æ–¹æ³•ã€‚ è¯­æ³• ensureIndex()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹&gt;db.COLLECTION_NAME.ensureIndex({KEY:1}) è¿™é‡Œé”®æ˜¯è¦åˆ›å»ºç´¢å¼•å­—æ®µï¼Œ1æ˜¯æŒ‰åç§°å‡åºæ’åºã€‚è‹¥ä»¥æŒ‰é™åºåˆ›å»ºç´¢å¼•ï¼Œéœ€è¦ä½¿ç”¨ -1. ä¾‹å­ 123456&gt;db.mycol.ensureIndex({&quot;title&quot;:1})&gt;åœ¨ ensureIndex()æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å¤šä¸ªå­—æ®µï¼Œæ¥åˆ›å»ºå¤šä¸ªå­—æ®µç´¢å¼•ã€‚&gt;db.mycol.ensureIndex({&quot;title&quot;:1,&quot;description&quot;:-1})&gt; ensureIndex() æ–¹æ³•è¿˜æ¥å—é€‰é¡¹åˆ—è¡¨ï¼ˆè¿™æ˜¯å¯é€‰ï¼‰ï¼Œå…¶åˆ—è¡¨å¦‚ä¸‹ï¼š MongoDB èšåˆèšåˆæ“ä½œå¤„ç†æ•°æ®è®°å½•å¹¶è¿”å›è®¡ç®—ç»“æœã€‚ä»å¤šä¸ªæ–‡æ¡£èšåˆåˆ†ç»„æ“ä½œæ•°å€¼ï¼Œå¹¶å¯ä»¥æ‰§è¡Œå¤šç§å¯¹åˆ†ç»„æ•°æ®ä¸šåŠ¡è¿”å›ä¸€ä¸ªç»“æœã€‚ åœ¨SQLä¸­çš„count(*)ï¼Œä½¿ç”¨group by ä¸mongodbçš„èšåˆæ˜¯ç­‰æ•ˆçš„ã€‚ å¯¹äºMongoDBçš„èšåˆï¼Œä½¿ç”¨çš„æ˜¯aggregate()æ–¹æ³•ã€‚ è¯­æ³• aggregate()æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹&gt;db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION) ä¾‹å­ï¼š åœ¨é›†åˆä¸­æœ‰ä»¥ä¸‹æ•°æ®ï¼š 123456789101112131415161718192021222324252627{ _id: ObjectId(7df78ad8902c) title: &apos;MongoDB Overview&apos;, description: &apos;MongoDB is no sql database&apos;, by_user: &apos;Yiibai Yiibai &apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 100},{ _id: ObjectId(7df78ad8902d) title: &apos;NoSQL Overview&apos;, description: &apos;No sql database is very fast&apos;, by_user: &apos;Yiibai Yiibai&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 10},{ _id: ObjectId(7df78ad8902e) title: &apos;Neo4j Overview&apos;, description: &apos;Neo4j is no sql database&apos;, by_user: &apos;Neo4j&apos;, url: &apos;https://www.neo4j.com&apos;, tags: [&apos;neo4j&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 750}, ç°åœ¨ä»ä¸Šé¢çš„é›†åˆï¼Œå¦‚æœæƒ³çŸ¥é“æ¯ä¸€ä¸ªç”¨æˆ·ç¼–å†™çš„æ•™ç¨‹æ˜¯å¤šå°‘ï¼Œé‚£ä¹ˆä½¿ç”¨aggregate()æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºçš„åˆ—è¡¨ï¼š 123456789101112131415&gt; db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$sum : 1}}}]){ &quot;result&quot; : [ { &quot;_id&quot; : &quot;Yiibai Yiibai&quot;, &quot;num_tutorial&quot; : 2 }, { &quot;_id&quot; : &quot;Neo4j&quot;, &quot;num_tutorial&quot; : 1 } ], &quot;ok&quot; : 1}&gt; ç”¨äºä¸Šè¿°ç”¨é€”å°†ç­‰æ•ˆäºsqlæŸ¥è¯¢ï¼š select by_user, count(*) from mycol group by by_userå¦å¤–ï¼Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨å­—æ®µby_userè¿›è¡Œåˆ†ç»„å¹¶è®¡ç®—æ€»å’Œï¼Œä¹Ÿå°±æ˜¯by_user å‡ºç°å„ä¸ªæ¬¡æ•°ã€‚ä¸€ä¸ªåˆ—è¡¨ä¸­å¯ç”¨çš„èšé›†è¡¨è¾¾å¼ã€‚ MongoDB å¤åˆ¶å¤åˆ¶æ˜¯åŒæ­¥åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šçš„æ•°æ®è¿‡ç¨‹ã€‚å¤åˆ¶æä¾›äº†å†—ä½™å’Œæ•°æ®åœ¨ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šçš„å¤šä¸ªå‰¯æœ¬æé«˜æ•°æ®çš„å¯ç”¨æ€§ï¼Œå¤åˆ¶é˜²æ­¢åœ¨å•ä¸ªæœåŠ¡å™¨ä¸Šä¸¢å¤±æ•°æ®åº“ã€‚ å¤åˆ¶ä¹Ÿå¯ä»¥ä»ç¡¬ä»¶æ•…éšœå’ŒæœåŠ¡ä¸­æ–­ä¸­æ¢å¤ã€‚å¸¦æœ‰æ•°æ®çš„å…¶ä»–å‰¯æœ¬ï¼Œå¯ä»¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ªç¾éš¾æ¢å¤ï¼ŒæŠ¥å‘Šæˆ–å¤‡ä»½ã€‚ ä¸ºä»€ä¹ˆè¦å¤åˆ¶ï¼Ÿ ä¸ºäº†è®©æ•°æ®å®‰å…¨ æ•°æ®çš„é«˜ï¼ˆ24*7ï¼‰å¯ç”¨æ€§ ç¾éš¾æ¢å¤ æ— åœæœºç»´æŠ¤ï¼ˆå¦‚å¤‡ä»½ï¼Œç´¢å¼•é‡å»ºï¼Œå‹ç¼©ï¼‰ è¯»å–ç¼©æ”¾ï¼ˆé¢å¤–çš„å‰¯æœ¬æ¥è¯»å–ï¼‰ å‰¯æœ¬é›†æ˜¯é€æ˜çš„åº”ç”¨ MongoDBå¤åˆ¶çš„å·¥ä½œåŸç†MongoDBé€šè¿‡ä½¿ç”¨å‰¯æœ¬é›†çš„å¤åˆ¶æ¥å®ç°ã€‚å‰¯æœ¬é›†æ˜¯ä¸€ç»„æ‰¿è½½åŒä¸€ä¸ªæ•°æ®é›†çš„mongodå®ä¾‹ã€‚åœ¨å‰¯æœ¬çš„ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æ¥æ”¶æ‰€æœ‰çš„å†™æ“ä½œä¸»èŠ‚ç‚¹ã€‚æ‰€æœ‰çš„å®ä¾‹ï¼Œæ¬¡çº§ï¼Œåº”ç”¨æ“ä½œä»ä¸»ä»¥ä¾¿å®ƒä»¬å…·æœ‰ç›¸åŒçš„æ•°æ®é›†ã€‚å‰¯æœ¬é›†åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚ å‰¯æœ¬é›†æ˜¯ä¸€ç»„ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªèŠ‚ç‚¹ï¼ˆé€šå¸¸è‡³å°‘3èŠ‚ç‚¹æ˜¯å¿…éœ€çš„ï¼‰ã€‚ åœ¨å‰¯æœ¬é›†ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸»èŠ‚ç‚¹å’Œå…¶ä½™çš„èŠ‚ç‚¹éƒ½æ˜¯æ¬¡è¦çš„ã€‚ æ‰€æœ‰çš„æ•°æ®å¤åˆ¶æ˜¯ä»ä¸»åˆ°æ¬¡èŠ‚ç‚¹ã€‚ åœ¨è‡ªåŠ¨æ•…éšœè½¬ç§»æˆ–ç»´æŠ¤æ—¶ï¼Œé€‰å»ºç«‹äº†ä¸»è¦å’Œä¸€ä¸ªæ–°çš„ä¸»èŠ‚ç‚¹è¢«é€‰æ‹©ã€‚ æ•…éšœèŠ‚ç‚¹çš„æ¢å¤åï¼Œå†æ¬¡åŠ å…¥å‰¯æœ¬é›†ï¼Œå¹¶å¯ä»¥ä½œä¸ºä¸€ä¸ªè¾…åŠ©èŠ‚ç‚¹ã€‚ mongodbå¤åˆ¶çš„å…¸å‹å›¾å¦‚ä¸‹å›¾ï¼Œå…¶ä¸­å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæ€»æ˜¯ä¸ä¸»èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹äº¤äº’ï¼Œç„¶åå°†æ•°æ®å¤åˆ¶åˆ°è¾…åŠ©èŠ‚ç‚¹ã€‚å‰¯æœ¬é›†ç‰¹å¾ Nä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ ä»»ä½•èŠ‚ç‚¹å¯ä¸ºåŸå‘/ä¸»èŠ‚ç‚¹ æ‰€æœ‰çš„å†™æ“ä½œè¿›å…¥åˆ°ä¸»èŠ‚ç‚¹ è‡ªåŠ¨æ•…éšœè½¬ç§» è‡ªåŠ¨æ¢å¤","link":"/program/Python/mongodb/"},{"title":"python3 ä¸ MongoDB ä¹‹é—´çš„äº¤äº’","text":"MongoDBæ˜¯ç”±C++è¯­è¨€ç¼–å†™çš„éå…³ç³»å‹æ•°æ®åº“ï¼Œæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿï¼Œå…¶å†…å®¹å­˜å‚¨å½¢å¼ç±»ä¼¼JSONå¯¹è±¡ï¼Œå®ƒçš„å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ã€æ•°ç»„åŠæ–‡æ¡£æ•°ç»„ï¼Œéå¸¸çµæ´»ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹Python 3ä¸‹MongoDBçš„å­˜å‚¨æ“ä½œã€‚ 1. å‡†å¤‡å·¥ä½œåœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²ç»å®‰è£…å¥½äº†MongoDBå¹¶å¯åŠ¨äº†å…¶æœåŠ¡ï¼Œå¹¶ä¸”å®‰è£…å¥½äº†Pythonçš„PyMongoåº“ã€‚ 2. è¿æ¥MongoDBè¿æ¥MongoDBæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨PyMongoåº“é‡Œé¢çš„MongoClientã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¼ å…¥MongoDBçš„IPåŠç«¯å£å³å¯ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåœ°å€hostï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç«¯å£portï¼ˆå¦‚æœä¸ç»™å®ƒä¼ é€’å‚æ•°ï¼Œé»˜è®¤æ˜¯27017ï¼‰ï¼š 12import pymongoclient = pymongo.MongoClient(host=&apos;localhost&apos;, port=27017) è¿™æ ·å°±å¯ä»¥åˆ›å»ºMongoDBçš„è¿æ¥å¯¹è±¡äº†ã€‚ å¦å¤–ï¼ŒMongoClientçš„ç¬¬ä¸€ä¸ªå‚æ•°hostè¿˜å¯ä»¥ç›´æ¥ä¼ å…¥MongoDBçš„è¿æ¥å­—ç¬¦ä¸²ï¼Œå®ƒä»¥mongodbå¼€å¤´ï¼Œä¾‹å¦‚ï¼š 1client = MongoClient(&apos;mongodb://localhost:27017/&apos;) è¿™ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„è¿æ¥æ•ˆæœã€‚ 3. æŒ‡å®šæ•°æ®åº“MongoDBä¸­å¯ä»¥å»ºç«‹å¤šä¸ªæ•°æ®åº“ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æŒ‡å®šæ“ä½œå“ªä¸ªæ•°æ®åº“ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥testæ•°æ®åº“ä¸ºä¾‹æ¥è¯´æ˜ï¼Œä¸‹ä¸€æ­¥éœ€è¦åœ¨ç¨‹åºä¸­æŒ‡å®šè¦ä½¿ç”¨çš„æ•°æ®åº“ï¼š 1db = client.test è¿™é‡Œè°ƒç”¨clientçš„testå±æ€§å³å¯è¿”å›testæ•°æ®åº“ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·æŒ‡å®šï¼š 1db = client[&apos;test&apos;] è¿™ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ã€‚ 4. æŒ‡å®šé›†åˆMongoDBçš„æ¯ä¸ªæ•°æ®åº“åˆåŒ…å«è®¸å¤šé›†åˆï¼ˆcollectionï¼‰ï¼Œå®ƒä»¬ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ã€‚ ä¸‹ä¸€æ­¥éœ€è¦æŒ‡å®šè¦æ“ä½œçš„é›†åˆï¼Œè¿™é‡ŒæŒ‡å®šä¸€ä¸ªé›†åˆåç§°ä¸ºstudentsã€‚ä¸æŒ‡å®šæ•°æ®åº“ç±»ä¼¼ï¼ŒæŒ‡å®šé›†åˆä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼šcollection = db.students collection = db['students']è¿™æ ·æˆ‘ä»¬ä¾¿å£°æ˜äº†ä¸€ä¸ªCollectionå¯¹è±¡ã€‚ 5. æ’å…¥æ•°æ®æ¥ä¸‹æ¥ï¼Œä¾¿å¯ä»¥æ’å…¥æ•°æ®äº†ã€‚å¯¹äºstudentsè¿™ä¸ªé›†åˆï¼Œæ–°å»ºä¸€æ¡å­¦ç”Ÿæ•°æ®ï¼Œè¿™æ¡æ•°æ®ä»¥å­—å…¸å½¢å¼è¡¨ç¤ºï¼š 123456student = { &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;} è¿™é‡ŒæŒ‡å®šäº†å­¦ç”Ÿçš„å­¦å·ã€å§“åã€å¹´é¾„å’Œæ€§åˆ«ã€‚æ¥ä¸‹æ¥ï¼Œç›´æ¥è°ƒç”¨collectionçš„insert()æ–¹æ³•å³å¯æ’å…¥æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š 12result = collection.insert(student)print(result) åœ¨MongoDBä¸­ï¼Œæ¯æ¡æ•°æ®å…¶å®éƒ½æœ‰ä¸€ä¸ª_idå±æ€§æ¥å”¯ä¸€æ ‡è¯†ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡æ˜è¯¥å±æ€§ï¼ŒMongoDBä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªObjectIdç±»å‹çš„_idå±æ€§ã€‚insert()æ–¹æ³•ä¼šåœ¨æ‰§è¡Œåè¿”å›_idå€¼ã€‚ è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 15932a68615c2606814c91f3d å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®ï¼Œåªéœ€è¦ä»¥åˆ—è¡¨å½¢å¼ä¼ é€’å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910111213student1 = { &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}student2 = { &apos;id&apos;: &apos;20170202&apos;, &apos;name&apos;: &apos;Mike&apos;, &apos;age&apos;: 21, &apos;gender&apos;: &apos;male&apos;} 12result = collection.insert([student1, student2])print(result) è¿”å›ç»“æœæ˜¯å¯¹åº”çš„_idçš„é›†åˆï¼š [ObjectId('5932a80115c2606a59e8a048'), ObjectId('5932a80115c2606a59e8a049')]å®é™…ä¸Šï¼Œåœ¨PyMongo 3.xç‰ˆæœ¬ä¸­ï¼Œå®˜æ–¹å·²ç»ä¸æ¨èä½¿ç”¨insert()æ–¹æ³•äº†ã€‚å½“ç„¶ï¼Œç»§ç»­ä½¿ç”¨ä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚å®˜æ–¹æ¨èä½¿ç”¨insert_one()å’Œinsert_many()æ–¹æ³•æ¥åˆ†åˆ«æ’å…¥å•æ¡è®°å½•å’Œå¤šæ¡è®°å½•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678910student = { &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}result = collection.insert_one(student)print(result)print(result.inserted_id) è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 12&lt;pymongo.results.InsertOneResult object at 0x10d68b558&gt;5932ab0f15c2606f0c1cf6c5 ä¸insert()æ–¹æ³•ä¸åŒï¼Œè¿™æ¬¡è¿”å›çš„æ˜¯InsertOneResultå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨å…¶inserted_idå±æ€§è·å–_idã€‚ å¯¹äºinsert_many()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®ä»¥åˆ—è¡¨å½¢å¼ä¼ é€’ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314student1 = { &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}student2 = { &apos;id&apos;: &apos;20170202&apos;, &apos;name&apos;: &apos;Mike&apos;, &apos;age&apos;: 21, &apos;gender&apos;: &apos;male&apos;} 123result = collection.insert_many([student1, student2])print(result)print(result.inserted_ids) è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 12&lt;pymongo.results.InsertManyResult object at 0x101dea558&gt;[ObjectId(&apos;5932abf415c2607083d3b2ac&apos;), ObjectId(&apos;5932abf415c2607083d3b2ad&apos;)] è¯¥æ–¹æ³•è¿”å›çš„ç±»å‹æ˜¯InsertManyResultï¼Œè°ƒç”¨inserted_idså±æ€§å¯ä»¥è·å–æ’å…¥æ•°æ®çš„_idåˆ—è¡¨ã€‚ 6. æŸ¥è¯¢æ’å…¥æ•°æ®åï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨find_one()æˆ–find()æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢ï¼Œå…¶ä¸­find_one()æŸ¥è¯¢å¾—åˆ°çš„æ˜¯å•ä¸ªç»“æœï¼Œfind()åˆ™è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 123result = collection.find_one({&apos;name&apos;: &apos;Mike&apos;})print(type(result))print(result) è¿™é‡Œæˆ‘ä»¬æŸ¥è¯¢nameä¸ºMikeçš„æ•°æ®ï¼Œå®ƒçš„è¿”å›ç»“æœæ˜¯å­—å…¸ç±»å‹ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š 12&lt;class &apos;dict&apos;&gt;{&apos;_id&apos;: ObjectId(&apos;5932a80115c2606a59e8a049&apos;), &apos;id&apos;: &apos;20170202&apos;, &apos;name&apos;: &apos;Mike&apos;, &apos;age&apos;: 21, &apos;gender&apos;: &apos;male&apos;} å¯ä»¥å‘ç°ï¼Œå®ƒå¤šäº†_idå±æ€§ï¼Œè¿™å°±æ˜¯MongoDBåœ¨æ’å…¥è¿‡ç¨‹ä¸­è‡ªåŠ¨æ·»åŠ çš„ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®ObjectIdæ¥æŸ¥è¯¢ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨bsonåº“é‡Œé¢çš„objectidï¼š 1234from bson.objectid import ObjectIdresult = collection.find_one({&apos;_id&apos;: ObjectId(&apos;593278c115c2602667ec6bae&apos;)})print(result) å…¶æŸ¥è¯¢ç»“æœä¾ç„¶æ˜¯å­—å…¸ç±»å‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š {'_id': ObjectId('593278c115c2602667ec6bae'), 'id': '20170101', 'name': 'Jordan', 'age': 20, 'gender': 'male'}å½“ç„¶ï¼Œå¦‚æœæŸ¥è¯¢ç»“æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¿”å›Noneã€‚ å¯¹äºå¤šæ¡æ•°æ®çš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨find()æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œè¿™é‡ŒæŸ¥æ‰¾å¹´é¾„ä¸º20çš„æ•°æ®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234results = collection.find({&apos;age&apos;: 20})print(results)for result in results: print(result) è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 1234&lt;pymongo.cursor.Cursor object at 0x1032d5128&gt;{&apos;_id&apos;: ObjectId(&apos;593278c115c2602667ec6bae&apos;), &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}{&apos;_id&apos;: ObjectId(&apos;593278c815c2602678bb2b8d&apos;), &apos;id&apos;: &apos;20170102&apos;, &apos;name&apos;: &apos;Kevin&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}{&apos;_id&apos;: ObjectId(&apos;593278d815c260269d7645a8&apos;), &apos;id&apos;: &apos;20170103&apos;, &apos;name&apos;: &apos;Harden&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;} è¿”å›ç»“æœæ˜¯Cursorç±»å‹ï¼Œå®ƒç›¸å½“äºä¸€ä¸ªç”Ÿæˆå™¨ï¼Œæˆ‘ä»¬éœ€è¦éå†å–åˆ°æ‰€æœ‰çš„ç»“æœï¼Œå…¶ä¸­æ¯ä¸ªç»“æœéƒ½æ˜¯å­—å…¸ç±»å‹ã€‚ å¦‚æœè¦æŸ¥è¯¢å¹´é¾„å¤§äº20çš„æ•°æ®ï¼Œåˆ™å†™æ³•å¦‚ä¸‹ï¼š results = collection.find({'age': {'$gt': 20}})è¿™é‡ŒæŸ¥è¯¢çš„æ¡ä»¶é”®å€¼å·²ç»ä¸æ˜¯å•çº¯çš„æ•°å­—äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå…¶é”®åä¸ºæ¯”è¾ƒç¬¦å·$gtï¼Œæ„æ€æ˜¯å¤§äºï¼Œé”®å€¼ä¸º20ã€‚ è¿™é‡Œå°†æ¯”è¾ƒç¬¦å·å½’çº³ä¸ºä¸‹è¡¨ã€‚è…¾è®¯äº‘è‡ªåª’ä½“åˆ†äº«è®¡åˆ’","link":"/program/Python/pymongo/"},{"title":"python3 ä¸ MySQL ä¹‹é—´çš„äº¤äº’","text":"ä»€ä¹ˆæ˜¯ PyMySQLï¼ŸPyMySQL æ˜¯åœ¨ Python3.x ç‰ˆæœ¬ä¸­ç”¨äºè¿æ¥ MySQL æœåŠ¡å™¨çš„ä¸€ä¸ªåº“ï¼ŒPython2ä¸­åˆ™ä½¿ç”¨mysqldbã€‚ PyMySQL éµå¾ª Python æ•°æ®åº“ API v2.0 è§„èŒƒï¼Œå¹¶åŒ…å«äº† pure-Python MySQL å®¢æˆ·ç«¯åº“ã€‚ å®‰è£…mysqlæ¨¡å—åœ¨æ–‡ä»¶ä¸­å¼•å…¥æ¨¡å— import pymysql 1.Connectionå¯¹è±¡â€¢ ç”¨äºå»ºç«‹ä¸æ•°æ®åº“çš„è¿æ¥â€¢ åˆ›å»ºå¯¹è±¡ï¼šè°ƒç”¨connect()æ–¹æ³•conn=connect(å‚æ•°åˆ—è¡¨)â€¢ å‚æ•°hostï¼šè¿æ¥çš„mysqlä¸»æœºï¼Œå¦‚æœæœ¬æœºæ˜¯â€™localhostâ€™â€¢ å‚æ•°portï¼šè¿æ¥çš„mysqlä¸»æœºçš„ç«¯å£ï¼Œé»˜è®¤æ˜¯3306â€¢ å‚æ•°dbï¼šæ•°æ®åº“çš„åç§°â€¢ å‚æ•°userï¼šè¿æ¥çš„ç”¨æˆ·åâ€¢ å‚æ•°passwordï¼šè¿æ¥çš„å¯†ç â€¢ å‚æ•°charsetï¼šé€šä¿¡é‡‡ç”¨çš„ç¼–ç æ–¹å¼ï¼Œé»˜è®¤æ˜¯â€™gb2312â€™ï¼Œè¦æ±‚ä¸æ•°æ®åº“åˆ›å»ºæ—¶æŒ‡å®šçš„ç¼–ç ä¸€è‡´ï¼Œå¦åˆ™ä¸­æ–‡ä¼šä¹±ç  2.å¯¹è±¡çš„æ–¹æ³•â€¢ close()å…³é—­è¿æ¥â€¢ commit()äº‹åŠ¡ï¼Œæ‰€ä»¥éœ€è¦æäº¤æ‰ä¼šç”Ÿæ•ˆâ€¢ rollback()äº‹åŠ¡ï¼Œæ”¾å¼ƒä¹‹å‰çš„æ“ä½œâ€¢ cursor()è¿”å›Cursorå¯¹è±¡ï¼Œç”¨äºæ‰§è¡Œsqlè¯­å¥å¹¶è·å¾—ç»“æœ Cursorå¯¹è±¡â€¢ æ‰§è¡Œsqlè¯­å¥â€¢ åˆ›å»ºå¯¹è±¡ï¼šè°ƒç”¨Connectionå¯¹è±¡çš„cursor()æ–¹æ³•cursor1=conn.cursor() å¯¹è±¡çš„æ–¹æ³•â€¢ close()å…³é—­â€¢ execute(operation [, parameters ])æ‰§è¡Œè¯­å¥ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°â€¢ fetchone()æ‰§è¡ŒæŸ¥è¯¢è¯­å¥æ—¶ï¼Œè·å–æŸ¥è¯¢ç»“æœé›†çš„ç¬¬ä¸€ä¸ªè¡Œæ•°æ®ï¼Œè¿”å›ä¸€ä¸ªå…ƒç»„â€¢ next()æ‰§è¡ŒæŸ¥è¯¢è¯­å¥æ—¶ï¼Œè·å–å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œâ€¢ fetchall()æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œè·å–ç»“æœé›†çš„æ‰€æœ‰è¡Œï¼Œä¸€è¡Œæ„æˆä¸€ä¸ªå…ƒç»„ï¼Œå†å°†è¿™äº›å…ƒç»„è£…å…¥ä¸€ä¸ªå…ƒç»„è¿”å›â€¢ scroll(value[,mode])å°†è¡ŒæŒ‡é’ˆç§»åŠ¨åˆ°æŸä¸ªä½ç½®â€¢ modeè¡¨ç¤ºç§»åŠ¨çš„æ–¹å¼â€¢ modeçš„é»˜è®¤å€¼ä¸ºrelativeï¼Œè¡¨ç¤ºåŸºäºå½“å‰è¡Œç§»åŠ¨åˆ°valueï¼Œvalueä¸ºæ­£åˆ™å‘ä¸‹ç§»åŠ¨ï¼Œvalueä¸ºè´Ÿåˆ™å‘ä¸Šç§»åŠ¨ã€‚ç›¸å¯¹çš„â€¢ modeçš„å€¼ä¸ºabsoluteï¼Œè¡¨ç¤ºåŸºäºç¬¬ä¸€æ¡æ•°æ®çš„ä½ç½®ï¼Œç¬¬ä¸€æ¡æ•°æ®çš„ä½ç½®ä¸º0ï¼Œç»å¯¹çš„ã€‚ ä¸¾ä¸ªä¾‹å­ä¾¿äºç†è§£12345678910111213141516171819202122232425262728293031323334353637383940414243444546# å¯¼å…¥pythonæ“ä½œmysqlçš„æ¨¡å—import pymysql# è·å–è¿æ¥å¯¹è±¡conn = pymysql.connect(host='127.0.0.1', user='root', password='123456', database='python01', port=3306, charset='utf8')# è·å–æ‰§è¡Œå·¥å…·cur = conn.cursor()# sqlè¯­å¥,å¢åˆ æ”¹#sql = 'select birthday from t_user'sql = 'select id,name,pwd,birthday from t_user'# æ‰§è¡Œ,è¿”å›å€¼ã€‚å¦‚æœæ˜¯å¢åˆ æ”¹ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°ï¼Œå¦‚æœæ˜¯æŸ¥è¯¢ï¼Œè¿”å›æŸ¥è¯¢çš„è¡Œæ•°count = cur.execute(sql)print('æŸ¥è¯¢çš„ç»“æœæœ‰%sæ¡æ•°æ®'%count)#è·å–ç¬¬ä¸€è¡ŒdateOne = cur.fetchone()print(dateOne)#å‘ä¸Šç§»åŠ¨ä¸€è¡Œcur.scroll(-1)#å‘ä¸‹ç§»åŠ¨ä¸€è¡Œcur.scroll(1)cur.scroll(1,mode='absolute') ç»å¯¹çš„ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯ç¬¬ä¸€è¡Œcur.scroll(1,mode='relative') ç›¸å¯¹çš„#è·å–æ‰€æœ‰è¡Œçš„æ•°æ®dataAll = cur.fetchall()print(dataAll)for temp in dataAll: print(temp) print(dataAll[-1][2]) #dataAll[-1]å¾—åˆ°çš„æ˜¯ä¸€ä¸ªç”¨æˆ·æ‰€æœ‰çš„ä¿¡æ¯ï¼ŒdataAll[-1][2]è·å–æœ€åä¸€ä¸ªäººçš„å¯†ç for temp in cur: print(temp)s = 'id:%s,name:%s,pwd:%s,birthday:%s'for temp in dataAll: print(s%(temp[0],temp[1],temp[2],temp[3]))# å…³é—­cur.close()conn.close() 3.å¯¹è±¡çš„å±æ€§â€¢ rowcountåªè¯»å±æ€§ï¼Œè¡¨ç¤ºæœ€è¿‘ä¸€æ¬¡execute()æ‰§è¡Œåå—å½±å“çš„è¡Œæ•°â€¢ connectionè·å¾—å½“å‰è¿æ¥å¯¹è±¡ 2.å¢åˆ æ”¹æŸ¥(CRUD)1.å¢â€¢ åˆ›å»ºtestInsert.pyæ–‡ä»¶ï¼Œå‘å­¦ç”Ÿè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ® 123456789101112#encoding=utf-8import pymysqltry: conn=pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;) cs1=conn.cursor() count=cs1.execute(&quot;insert into students(sname) values(&apos;å¼ è‰¯&apos;)&quot;) print(count) conn.commit() cs1.close() conn.close()except Exception,e: print(e) 2.ä¿®æ”¹â€¢ åˆ›å»ºtestUpdate.pyæ–‡ä»¶ï¼Œä¿®æ”¹å­¦ç”Ÿè¡¨çš„ä¸€æ¡æ•°æ® 123456789101112#encoding=utf-8import pymysqltry: conn=pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;) cs1=conn.cursor() count=cs1.execute(&quot;update students set sname=&apos;åˆ˜é‚¦&apos; where id=6&quot;) print(count) conn.commit() cs1.close() conn.close()except Exception,e: print(e) 3.åˆ é™¤â€¢ åˆ›å»ºtestDelete.pyæ–‡ä»¶ï¼Œåˆ é™¤å­¦ç”Ÿè¡¨çš„ä¸€æ¡æ•°æ® 1234567891011#encoding=utf-8 import pymysqltry: conn=pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;) cs1=conn.cursor() count=cs1.execute(&quot;delete from students where id=6&quot;) print(count) conn.commit() cs1.close() conn.close()except Exception as e: print(e) 4.æŸ¥â€¢ åˆ›å»ºtestSelectOne.pyæ–‡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡å­¦ç”Ÿä¿¡æ¯ 12345678910import Pymysql try:conn=Pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;)cur=conn.cursor()cur.execute(&apos;select * from students where id=7&apos;)result=cur.fetchone()print resultcur.close()conn.close()except Exception as e:print(e) â€¢ åˆ›å»ºtestSelectMany.pyæ–‡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯ 1234567891011#encoding=utf8 import Pymysqltry:conn=Pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;)cur=conn.cursor()cur.execute(&apos;select * from students&apos;)result=cur.fetchall()print resultcur.close()conn.close()except Exception as e:print(e) å®ä¾‹ä¸€ï¼šå‚æ•°1234567891011121314151617181920212223242526# å¯¼å…¥pythonæ“ä½œmysqlçš„æ¨¡å—import pymysqlimport time# è·å–è¿æ¥å¯¹è±¡conn = pymysql.connect(host=&apos;127.0.0.1&apos;, user=&apos;root&apos;, password=&apos;123456&apos;, database=&apos;python01&apos;, port=3306, charset=&apos;utf8&apos;)# è·å–æ‰§è¡Œå·¥å…·cur = conn.cursor()# sqlè¯­å¥,å¢åˆ æ”¹ï¼Œsqlæ³¨å…¥sql = &apos;insert into t_user(name,pwd,birthday) values(%s,%s,%s)&apos;# å‚æ•°åˆ—è¡¨name = input(&apos;è¾“å…¥å§“å:&apos;)pwd = input(&apos;è¾“å…¥å¯†ç :&apos;)birthday = input(&apos;è¾“å…¥ç”Ÿæ—¥:&apos;) # 2017å¹´10æœˆ01æ—¥--&gt;æ—¥æœŸstruct_time(---&gt;2017-10-01)birthday = time.strptime(birthday,&apos;%Yå¹´%mæœˆ%dæ—¥&apos;) #è¿™é‡Œæˆ‘ä»¬å°±ç”¨åˆ°äº†æ—¶é—´ä¸å­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢(è¯¦æƒ…è§MySQLé«˜çº§)params = [name,pwd,birthday]# æ‰§è¡Œ,è¿”å›å€¼ã€‚å¦‚æœæ˜¯å¢åˆ æ”¹ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°ï¼Œå¦‚æœæ˜¯æŸ¥è¯¢ï¼Œè¿”å›æŸ¥è¯¢çš„è¡Œæ•°count = cur.execute(sql,params)#æäº¤conn.commit()print(&apos;å—å½±å“çš„è¡Œæ•°:%s&apos;%count)# å…³é—­cur.close()conn.close() å®ä¾‹äºŒï¼šæŠ›å‡ºå¼‚å¸¸12345678910111213141516171819202122232425262728293031323334# å¯¼å…¥pythonæ“ä½œmysqlçš„æ¨¡å—import pymysqltry: conn = None cur = None # è·å–è¿æ¥å¯¹è±¡ conn = pymysql.connect(host=&apos;127.0.0.1&apos;, user=&apos;root&apos;, password=&apos;123456&apos;, database=&apos;python01&apos;, port=3306, charset=&apos;utf8&apos;) # æ¨¡æ‹Ÿå¼‚å¸¸ # a = 1 / 0 # è·å–æ‰§è¡Œå·¥å…· cur = conn.cursor() # sqlè¯­å¥,å¢åˆ æ”¹ sql = &apos;insert into t_user(name,pwd,birthday) values(&quot;å°ä¼Š&quot;,&quot;123456&quot;,str_to_date(&quot;2017å¹´10æœˆ20æ—¥&quot;,&quot;%Yå¹´%mæœˆ%dæ—¥&quot;))&apos; # æ‰§è¡Œ,è¿”å›å€¼ã€‚å¦‚æœæ˜¯å¢åˆ æ”¹ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°ï¼Œå¦‚æœæ˜¯æŸ¥è¯¢ï¼Œè¿”å›æŸ¥è¯¢çš„è¡Œæ•° count = cur.execute(sql) # æäº¤ conn.commit() print(&apos;å—å½±å“çš„è¡Œæ•°:%s&apos; % count)except Exception as ex: # æ‰“å°å¼‚å¸¸ä¿¡æ¯ï¼Œæµ‹è¯•æ—¶å€™ä½¿ç”¨ï¼Œé¡¹ç›®ä¸Šçº¿ï¼Œå»æ‰ print(str(ex)) # å°†å¼‚å¸¸ç»§ç»­æŠ›å‡º # raisefinally: if cur != None: cur.close() if conn != None: conn.close() å®ä¾‹ä¸‰ï¼š12345678910111213141516171819202122232425262728293031# å¯¼å…¥pythonæ“ä½œmysqlçš„æ¨¡å—import pymysql# è·å–è¿æ¥å¯¹è±¡conn = pymysql.connect(host=&apos;127.0.0.1&apos;, user=&apos;root&apos;, password=&apos;123456&apos;, database=&apos;python01&apos;, port=3306, charset=&apos;utf8&apos;)# è·å–æ‰§è¡Œå·¥å…·cur = conn.cursor()# sqlè¯­å¥,å¢åˆ æ”¹#sql = &apos;select birthday from t_user&apos;sql = &apos;select id,name,pwd,birthday from t_user&apos;# æ‰§è¡Œ,è¿”å›å€¼ã€‚å¦‚æœæ˜¯å¢åˆ æ”¹ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°ï¼Œå¦‚æœæ˜¯æŸ¥è¯¢ï¼Œè¿”å›æŸ¥è¯¢çš„è¡Œæ•°count = cur.execute(sql)print(&apos;æŸ¥è¯¢çš„ç»“æœæœ‰%sæ¡æ•°æ®&apos;%count)#è·å–ç¬¬ä¸€è¡Œ# dateOne = cur.fetchone()# print(dateOne)# for temp in cur:# print(temp)s = &apos;id:%s,name:%s,pwd:%s,birthday:%s&apos;for temp in dataAll: print(s%(temp[0],temp[1],temp[2],temp[3]))# å…³é—­cur.close()conn.close() 3.å°è£…è¿™ä¸ªåº“çš„åå­—ï¼šmySqlHelper pythonæ“ä½œmysqlè¿›è¡Œå¢åˆ æ”¹æŸ¥çš„å°è£… 1ã€å¢åˆ æ”¹ï¼Œä»£ç ç±»ä¼¼ 2ã€æŸ¥è¯¢ ä»£ç åˆ†æ 1ã€è·å–è¿æ¥å¯¹è±¡ 2ã€sqlè¯­å¥ä¸åŒï¼Œå‚æ•°ä¸åŒ 3ã€è·å–æ‰§è¡Œå¯¹è±¡ å¢åˆ æ”¹ æŸ¥è¯¢ 1ã€fetchone 2ã€fetchall 4ã€å¤„ç†ç»“æœ 5ã€å…³é—­é¢å‘å¯¹è±¡ å»ºç«‹ç±»ï¼Œå°è£…å±æ€§å’Œå‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123import pymysqlclass MysqlHelper: &apos;&apos;&apos;pythonæ“ä½œmysqlçš„å¢åˆ æ”¹æŸ¥çš„å°è£…&apos;&apos;&apos; def __init__(self, host, user, password, database, port=3306, charset=&apos;utf8&apos;): &apos;&apos;&apos; åˆå§‹åŒ–å‚æ•° :param host: ä¸»æœº :param user: ç”¨æˆ·å :param password: å¯†ç  :param database: æ•°æ®åº“ :param port: ç«¯å£å·ï¼Œé»˜è®¤æ˜¯3306 :param charset: ç¼–ç ï¼Œé»˜è®¤æ˜¯utf8 &apos;&apos;&apos; self.host = host self.port = port self.database = database self.user = user self.password = password self.charset = charset def connect(self): &apos;&apos;&apos; è·å–è¿æ¥å¯¹è±¡å’Œæ‰§è¡Œå¯¹è±¡ :return: &apos;&apos;&apos; self.conn = pymysql.connect(host=self.host, user=self.user, password=self.password, database=self.database, port=self.port, charset=self.charset) self.cur = self.conn.cursor() def fetchone(self, sql, params=None): &apos;&apos;&apos; æ ¹æ®sqlå’Œå‚æ•°è·å–ä¸€è¡Œæ•°æ® :param sql: sqlè¯­å¥ :param params: sqlè¯­å¥å¯¹è±¡çš„å‚æ•°å…ƒç»„ï¼Œé»˜è®¤å€¼ä¸ºNone :return: æŸ¥è¯¢çš„ä¸€è¡Œæ•°æ® &apos;&apos;&apos; dataOne = None try: count = self.cur.execute(sql, params) if count != 0: dataOne = self.cur.fetchone() except Exception as ex: print(ex) finally: self.close() return dataOne def fetchall(self, sql, params=None): &apos;&apos;&apos; æ ¹æ®sqlå’Œå‚æ•°è·å–ä¸€è¡Œæ•°æ® :param sql: sqlè¯­å¥ :param params: sqlè¯­å¥å¯¹è±¡çš„å‚æ•°åˆ—è¡¨ï¼Œé»˜è®¤å€¼ä¸ºNone :return: æŸ¥è¯¢çš„ä¸€è¡Œæ•°æ® &apos;&apos;&apos; dataall = None try: count = self.cur.execute(sql, params) if count != 0: dataall = self.cur.fetchall() except Exception as ex: print(ex) finally: self.close() return dataall def __item(self, sql, params=None): &apos;&apos;&apos; æ‰§è¡Œå¢åˆ æ”¹ :param sql: sqlè¯­å¥ :param params: sqlè¯­å¥å¯¹è±¡çš„å‚æ•°åˆ—è¡¨ï¼Œé»˜è®¤å€¼ä¸ºNone :return: å—å½±å“çš„è¡Œæ•° &apos;&apos;&apos; count = 0 try: count = self.cur.execute(sql, params) self.conn.commit() except Exception as ex: print(ex) finally: self.close() return count def update(self, sql, params=None): &apos;&apos;&apos; æ‰§è¡Œä¿®æ”¹ :param sql: sqlè¯­å¥ :param params: sqlè¯­å¥å¯¹è±¡çš„å‚æ•°åˆ—è¡¨ï¼Œé»˜è®¤å€¼ä¸ºNone :return: å—å½±å“çš„è¡Œæ•° &apos;&apos;&apos; return self.__item(sql, params) def insert(self, sql, params=None): &apos;&apos;&apos; æ‰§è¡Œæ–°å¢ :param sql: sqlè¯­å¥ :param params: sqlè¯­å¥å¯¹è±¡çš„å‚æ•°åˆ—è¡¨ï¼Œé»˜è®¤å€¼ä¸ºNone :return: å—å½±å“çš„è¡Œæ•° &apos;&apos;&apos; return self.__item(sql, params) def delete(self, sql, params=None): &apos;&apos;&apos; æ‰§è¡Œåˆ é™¤ :param sql: sqlè¯­å¥ :param params: sqlè¯­å¥å¯¹è±¡çš„å‚æ•°åˆ—è¡¨ï¼Œé»˜è®¤å€¼ä¸ºNone :return: å—å½±å“çš„è¡Œæ•° &apos;&apos;&apos; return self.__item(sql, params) def close(self): &apos;&apos;&apos; å…³é—­æ‰§è¡Œå·¥å…·å’Œè¿æ¥å¯¹è±¡ &apos;&apos;&apos; if self.cur != None: self.cur.close() if self.conn != None: self.conn.close() 1.æµ‹è¯•æŸ¥è¯¢å¤šæ¡æ•°æ®1234567891011121314151617181920import mysqlHelper# åˆå§‹åŒ–å¯¹è±¡helper = mysqlHelper.MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;)# è¿æ¥helper.connect()# sqlsql = &apos;select * from t_user where name = %s and id &gt; %s&apos;# paramsparams = [&apos;å°èŒ—&apos;,1]# æ‰§è¡Œdata = helper.fetchall(sql, params)# åˆ¤æ–­if data: for temp in data: print(temp)else: # None,False,0 print(&apos;æ²¡æœ‰æ•°æ®.&apos;)helper.close() 2.æµ‹è¯•æŸ¥è¯¢ä¸€æ¡æ•°æ®12345678910111213141516171819import mysqlHelper# åˆå§‹åŒ–å¯¹è±¡helper = mysqlHelper.MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;)# è¿æ¥helper.connect()# sqlsql = &apos;select * from t_user where id = %s&apos;#sql = &apos;select * from t_user where id = 1&apos;# paramsparams = [2]# æ‰§è¡Œdata = helper.fetchone(sql, params)#data = helper.fetchone(sql)# åˆ¤æ–­if data: print(data)else: # None,False,0 print(&apos;æ²¡æœ‰æ•°æ®.&apos;) 3.æµ‹è¯•å¢åˆ æ”¹12345678910111213141516171819202122import mysqlHelperimport time# åˆå§‹åŒ–å¯¹è±¡helper = mysqlHelper.MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;)# è¿æ¥helper.connect()# sqlsql = &apos;update t_user set name =%s,pwd=%s,birthday=%s where id=%s&apos;# paramsid = input(&apos;è¾“å…¥ç¼–å·:&apos;)name = input(&apos;è¾“å…¥å§“å:&apos;)pwd = input(&apos;è¾“å…¥å¯†ç :&apos;)birthday = time.strptime(input(&apos;è¾“å…¥ç”Ÿæ—¥:&apos;), &apos;%Yå¹´%mæœˆ%dæ—¥&apos;)params = [name, pwd, birthday,id]# æ‰§è¡Œcount = helper.update(sql, params)# åˆ¤æ–­if count: print(&apos;æ“ä½œæˆåŠŸ.&apos;)else: # None,False,0 print(&apos;æ“ä½œå¤±è´¥.&apos;) 4.ç™»å½•å’Œæ³¨å†Œç™»å½•å’Œæ³¨å†Œçš„æ—¶å€™éœ€è¦å¯¹å¯†ç è¿›è¡ŒåŠ å¯† æ³¨æ„ï¼š â€¢ éœ€è¦å¯¹å¯†ç è¿›è¡ŒåŠ å¯†â€¢ å¦‚æœä½¿ç”¨md5åŠ å¯†ï¼Œåˆ™å¯†ç åŒ…å«32ä¸ªå­—ç¬¦â€¢ å¦‚æœä½¿ç”¨sha1åŠ å¯†ï¼Œåˆ™å¯†ç åŒ…å«40ä¸ªå­—ç¬¦ï¼Œè¿™é‡Œä½¿ç”¨è¿™ç§æ–¹å¼ 123456789101112131415161718create table userinfos( id int primary key auto_increment, uname varchar(20), upwd char(40), isdelete bit default 0);/*ret = doPwd(&apos;123&apos;)print(ret)ç»“æœï¼š40bd001563085fc35165329ea1ff5c5ecbdbbeef */-- æ’å…¥å¦‚ä¸‹æ•°æ®ï¼Œç”¨æˆ·åä¸º123,å¯†ç ä¸º123,è¿™æ˜¯sha1åŠ å¯†åçš„å€¼insert into userinfos values(1,&apos;123&apos;,&apos;40bd001563085fc35165329ea1ff5c5ecbdbbeef&apos;,0); ç™»å½•ä¸æ³¨å†Œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253from mysqlHelper import MysqlHelperimport hashlibdef login(): &apos;&apos;&apos;ç™»å½•&apos;&apos;&apos; name = input(&apos;è¾“å…¥ç”¨æˆ·å:&apos;) pwd = input(&apos;è¾“å…¥å¯†ç :&apos;) #åŠ å¯† pwd = doPwd(pwd) helper = MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;) helper.connect() sql = &apos;select * from t_user where name=%s and pwd=%s&apos; params = [name, pwd] data = helper.fetchone(sql, params) if data: print(&apos;ç™»å½•æˆåŠŸ.&apos;) else: # None,False,0 print(&apos;ç™»å½•å¤±è´¥.&apos;)def doPwd(pwd): &apos;&apos;&apos;sha1ç¼–ç &apos;&apos;&apos; mysha1 = hashlib.sha1() mysha1.update(pwd.encode(&apos;utf-8&apos;)) pwd = mysha1.hexdigest() return pwddef register(): &apos;&apos;&apos;æ³¨å†Œ&apos;&apos;&apos; name = input(&apos;è¾“å…¥ç”¨æˆ·å:&apos;) pwd = input(&apos;è¾“å…¥å¯†ç :&apos;) # åŠ å¯† pwd = doPwd(pwd) helper = MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;) helper.connect() sql = &apos;insert into t_user(name,pwd) values(%s,%s)&apos; params = [name, pwd] count = helper.insert(sql, params) if count: print(&apos;æ“ä½œæˆåŠŸ.&apos;) else: # None,False,0 print(&apos;æ“ä½œå¤±è´¥.&apos;)if __name__ == &apos;__main__&apos;: #register() login()","link":"/program/Python/pymysql/"},{"title":"Pythonåˆ©ç”¨openpyxlæ¥æ“ä½œExcel","text":"è‡ªåŠ¨åŒ–çš„å·¥ä½œæ˜¯ä¸ºäº†ä»ç¹çé‡å¤çš„åŠ³åŠ¨ä¸­æŒ£è„±å‡ºæ¥ï¼ŒæŠŠç²¾åŠ›ç”¨åœ¨æ•°æ®åˆ†æä¸Šã€‚è‡ªåŠ¨åŒ–æ–¹é¢pythonæ˜¯åœ¨å¥½ä¸è¿‡äº†ï¼Œä¸è¿‡æ—¢ç„¶è¦æäº¤æŠ¥è¡¨ï¼Œ å°±ä¸å…è¦ç¾è§‚ä»€ä¹ˆçš„ã€‚pandasè™½ç„¶å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯æ— æ³•å¯¹Excelå®Œå…¨æ“ä½œï¼Œç°å­¦vbaæœ‰ç‚¹æ¥ä¸åŠã€‚äºæ˜¯å°±æ‰¾åˆ°è¿™ä¸ªopenpyxlåŒ…ï¼Œç”¨pythonæ¥ä¿®æ”¹Excelã€‚ å¦‚ä¸‹æ‰€ç¤ºï¼š 123456from openpyxl import load_workbookfrom openpyxl.styles import colors, Font, Fill, NamedStylefrom openpyxl.styles import PatternFill, Border, Side, Alignment # åŠ è½½æ–‡ä»¶wb = load_workbook(&apos;./5a.xlsx&apos;) workbookï¼š å·¥ä½œç°¿ï¼Œä¸€ä¸ªexcelæ–‡ä»¶åŒ…å«å¤šä¸ªsheetã€‚ worksheetï¼šå·¥ä½œè¡¨ï¼Œä¸€ä¸ªworkbookæœ‰å¤šä¸ªï¼Œè¡¨åè¯†åˆ«ï¼Œå¦‚â€œsheet1â€,â€œsheet2â€ç­‰ã€‚ cellï¼š å•å…ƒæ ¼ï¼Œå­˜å‚¨æ•°æ®å¯¹è±¡æ–‡ç« æ‰€ç”¨è¡¨æ ¼ä¸ºï¼š æ“ä½œsheet12345678# è¯»å–sheetnameprint(&apos;è¾“å‡ºæ–‡ä»¶æ‰€æœ‰å·¥ä½œè¡¨åï¼š\\n&apos;, wb.sheetnames)ws = wb[&apos;5a&apos;] # æˆ–è€…ä¸çŸ¥é“åå­—æ—¶sheet_names = wb.sheetnames # è¿”å›ä¸€ä¸ªåˆ—è¡¨ws2 = wb[sheet_names[0]] # indexä¸º0ä¸ºç¬¬ä¸€å¼ è¡¨print(ws is ws2) # ä¸¤è€…æ˜¯ä¸€æ ·çš„ è¾“å‡ºæ–‡ä»¶æ‰€æœ‰å·¥ä½œè¡¨åï¼š[â€˜5aâ€™]True 1234# ä¿®æ”¹sheetname ws.title = &apos;5a_&apos;print(&apos;ä¿®æ”¹sheetnameï¼š\\n&apos;, wb.sheetnames) ä¿®æ”¹sheetnameï¼š[â€˜5a_â€™] 12345678# åˆ›å»ºæ–°çš„sheet# åˆ›å»ºçš„æ–°è¡¨å¿…é¡»è¦èµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡ï¼Œä¸ç„¶åªæœ‰åå­—ä½†æ˜¯æ²¡æœ‰å®é™…çš„æ–°è¡¨ ws4 = wb.create_sheet(index=0, title=&apos;newsheet&apos;)# ä»€ä¹ˆå‚æ•°éƒ½ä¸å†™çš„è¯ï¼Œé»˜è®¤æ’å…¥åˆ°æœ€åä¸€ä¸ªä½ç½®ä¸”åå­—ä¸ºsheet,sheet1...æŒ‰ç…§é¡ºåºæ’åˆ— ws5 = wb.create_sheet()print(&apos;åˆ›å»ºæ–°çš„sheet:\\n&apos;, wb.sheetnames) åˆ›å»ºæ–°çš„sheet:[â€˜newsheetâ€™, â€˜5a_â€™, â€˜Sheetâ€™] 123# åˆ é™¤sheetwb.remove(ws4) # è¿™é‡Œåªèƒ½å†™worksheetå¯¹è±¡ï¼Œä¸èƒ½å†™sheetnameprint(&apos;åˆ é™¤sheetï¼š\\n&apos;, wb.sheetnames) åˆ é™¤sheetï¼š[â€˜5a_â€™, â€˜Sheetâ€™] 1234567# ä¿®æ”¹sheeté€‰é¡¹å¡èƒŒæ™¯è‰²ï¼Œé»˜è®¤ä¸ºç™½è‰²ï¼Œè®¾ç½®ä¸ºRRGGBBæ¨¡å¼ws.sheet_properties.tabColor = &quot;FFA500&quot; # è¯»å–æœ‰æ•ˆåŒºåŸŸ print(&apos;æœ€å¤§åˆ—æ•°ä¸ºï¼š&apos;, ws.max_column)print(&apos;æœ€å¤§è¡Œæ•°ä¸ºï¼š&apos;, ws.max_row) æœ€å¤§åˆ—æ•°ä¸ºï¼š 5æœ€å¤§è¡Œæ•°ä¸ºï¼š 17 1234567# æ’å…¥è¡Œå’Œåˆ—ws.insert_rows(1) # åœ¨ç¬¬ä¸€è¡Œæ’å…¥ä¸€è¡Œws.insert_cols(2, 4) # ä»ç¬¬äºŒåˆ—å¼€å§‹æ’å…¥å››åˆ— # åˆ é™¤è¡Œå’Œåˆ—ws.delete_cols(6, 3) # ä»ç¬¬å…­åˆ—ï¼ˆFåˆ—ï¼‰å¼€å§‹ï¼Œåˆ é™¤3åˆ—å³ï¼ˆF:Hï¼‰ws.delete_rows(3) # åˆ é™¤ç¬¬ä¸‰è¡Œ å•å…ƒæ ¼æ“ä½œ12345# è¯»å–c = ws[&apos;A1&apos;]c1 = ws.cell(row=1, column=2)print(c, c1)print(c.value, c1.value) &lt;Cell â€˜5a_â€™.A1&gt; &lt;Cell â€˜5a_â€™.B1&gt;dth_title Province 1234# ä¿®æ”¹ws[&apos;A1&apos;] = &apos;æ™¯åŒºåç§°&apos;ws.cell(1, 2).value = &apos;çœä»½&apos;print(c.value, c1.value) æ™¯åŒºåç§° çœä»½ 1234567891011# è¯»å–å¤šä¸ªå•å…ƒæ ¼ cell_range = ws[&apos;A1&apos;:&apos;D5&apos;]colC = ws[&apos;C&apos;]col_range = ws[&apos;C:D&apos;]row10 = ws[10]row_range = ws[5:10]# å…¶è¿”å›çš„ç»“æœéƒ½æ˜¯ä¸€ä¸ªåŒ…å«å•å…ƒæ ¼çš„å…ƒç»„print(type(cell_range))for i in row10: print(i) # row10åªæœ‰æœ‰æ•ˆå•å…ƒæ ¼ &lt;class â€˜tupleâ€™&gt;&lt;Cell â€˜5a_â€™.A10&gt;&lt;Cell â€˜5a_â€™.B10&gt;&lt;Cell â€˜5a_â€™.C10&gt;&lt;Cell â€˜5a_â€™.D10&gt;&lt;Cell â€˜5a_â€™.E10&gt; 123456# æŒ‰ç…§è¡Œåˆ—æ“ä½œfor row in ws.iter_rows(min_row=1, max_row=3, min_col=1, max_col=2): for cell in row: print(cell)# ä¹Ÿå¯ä»¥ç”¨worksheet.iter_col(),ç”¨æ³•éƒ½ä¸€æ · &lt;Cell â€˜5a_â€™.A1&gt;&lt;Cell â€˜5a_â€™.B1&gt;&lt;Cell â€˜5a_â€™.A2&gt;&lt;Cell â€˜5a_â€™.B2&gt;&lt;Cell â€˜5a_â€™.A3&gt;&lt;Cell â€˜5a_â€™.B3&gt; 1234567891011121314# åˆå¹¶å•å…ƒæ ¼ws.merge_cells(&apos;F1:G1&apos;)ws[&apos;F1&apos;] = &apos;åˆå¹¶ä¸¤ä¸ªå•å…ƒæ ¼&apos;# æˆ–è€…ws.merge_cells(start_row=2, start_column=6, end_row=3, end_column=8)ws.cell(2, 6).value = &apos;åˆå¹¶ä¸‰ä¸ªå•å…ƒæ ¼&apos; # å–æ¶ˆåˆå¹¶å•å…ƒæ ¼ws.unmerge_cells(&apos;F1:G1&apos;)# æˆ–è€…ws.unmerge_cells(start_row=2, start_column=6, end_row=3, end_column=8) wb.save(&apos;./5a.xlsx&apos;)# ä¿å­˜ä¹‹å‰çš„æ“ä½œ,ä¿å­˜æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å¿…é¡»æ˜¯å…³é—­çš„ï¼ï¼ï¼ æ³¨æ„ï¼ï¼ï¼ï¼Œopenpyxlå¯¹Excelçš„ä¿®æ”¹å¹¶ä¸åƒæ˜¯xlwingsåŒ…ä¸€æ ·æ˜¯å®æ—¶çš„ï¼Œä»–çš„ä¿®æ”¹æ˜¯æš‚æ—¶ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥å½“ åé¢çš„ä¿®æ”¹ä¾‹å¦‚æˆ‘æ¥ä¸‹æ¥è¦åœ¨ç¬¬ä¸€è¡Œæ’å…¥æ–°çš„ä¸€è¡Œåšæ ‡é¢˜ï¼Œé‚£ä¹ˆå½“æˆ‘å¯¹æ–°çš„A1å•å…ƒæ ¼æ“ä½œçš„æ—¶å€™ï¼Œè¿˜åœ¨å†…å­˜ä¸­çš„åŸA1(ç°åœ¨æ˜¯A2)çš„å•å…ƒæ ¼ åŸæœ‰çš„ä¿®æ”¹å°±ä¼šè¢«è¦†ç›–ã€‚æ‰€ä»¥è¦å…ˆä¿å­˜ï¼Œæˆ–è€…ä»ä¸€å¼€å§‹å°±è®¡åˆ’å¥½æ›´æ”¹æ“ä½œé¿å…è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿã€‚ æ ·å¼ä¿®æ”¹å•ä¸ªå•å…ƒæ ¼æ ·å¼123456789101112131415161718192021222324252627282930313233343536373839wb = load_workbook(&apos;./5a.xlsx&apos;) # è¯»å–ä¿®æ”¹åçš„æ–‡ä»¶ws = wb[&apos;5a_&apos;]# æˆ‘ä»¬æ¥è®¾ç½®ä¸€ä¸ªè¡¨å¤´ws.insert_rows(1) # åœ¨ç¬¬ä¸€è¡Œæ’å…¥æ–°çš„ä¸€è¡Œws.merge_cells(&apos;A1:E1&apos;) # åˆå¹¶å•å…ƒæ ¼a1 = ws[&apos;A1&apos;]ws[&apos;A1&apos;] = &apos;5Açº§é£æ™¯åŒºåå•&apos; # è®¾ç½®å­—ä½“ft = Font(name=&apos;å¾®è½¯é›…é»‘&apos;, color=&apos;000000&apos;, size=15, b=True)&quot;&quot;&quot;name:å­—ä½“åç§°color:é¢œè‰²é€šå¸¸æ˜¯RGBæˆ–aRGBåå…­è¿›åˆ¶å€¼b(bold):åŠ ç²—ï¼ˆboolï¼‰i(italic):å€¾æ–œ(bool)shadowï¼šé˜´å½±ï¼ˆboolï¼‰underlineï¼šä¸‹åˆ’çº¿ï¼ˆâ€˜doubleAccountingâ€™, â€˜singleâ€™, â€˜doubleâ€™, â€˜singleAccountingâ€™ï¼‰charset:å­—ç¬¦é›†(int)strike:åˆ é™¤çº¿(bool)&quot;&quot;&quot;a1.font = ft # è®¾ç½®æ–‡æœ¬å¯¹é½ ali = Alignment(horizontal=&apos;center&apos;, vertical=&apos;center&apos;)&quot;&quot;&quot;horizontal:æ°´å¹³å¯¹é½(&apos;centerContinuous&apos;, &apos;general&apos;, &apos;distributed&apos;, &apos;left&apos;, &apos;fill&apos;, &apos;center&apos;, &apos;justify&apos;, &apos;right&apos;)vertical:å‚ç›´å¯¹é½ï¼ˆ&apos;distributed&apos;, &apos;top&apos;, &apos;center&apos;, &apos;justify&apos;, &apos;bottom&apos;ï¼‰&quot;&quot;&quot;a1.alignment = ali # è®¾ç½®å›¾æ¡ˆå¡«å…… fill = PatternFill(&apos;solid&apos;, fgColor=&apos;FFA500&apos;)# é¢œè‰²ä¸€èˆ¬ä½¿ç”¨åå…­è¿›åˆ¶RGB# &apos;solid&apos;æ˜¯å›¾æ¡ˆå¡«å……ç±»å‹ï¼Œè¯¦ç»†å¯æŸ¥é˜…æ–‡æ¡£ a1.fill = fill openpyxl.styles.fillsæ¨¡å—å‚æ•°æ–‡æ¡£ 123456789101112131415161718192021# è®¾ç½®è¾¹æ¡†bian = Side(style=&apos;medium&apos;, color=&apos;000000&apos;) # è®¾ç½®è¾¹æ¡†æ ·å¼&quot;&quot;&quot;style:è¾¹æ¡†çº¿çš„é£æ ¼{&apos;dotted&apos;,&apos;slantDashDot&apos;,&apos;dashDot&apos;,&apos;hair&apos;,&apos;mediumDashDot&apos;, &apos;dashed&apos;,&apos;mediumDashed&apos;,&apos;thick&apos;,&apos;dashDotDot&apos;,&apos;medium&apos;, &apos;double&apos;,&apos;thin&apos;,&apos;mediumDashDotDot&apos;}&quot;&quot;&quot; border = Border(top=bian, bottom=bian, left=bian, right=bian)&quot;&quot;&quot;topï¼ˆä¸Šï¼‰,bottomï¼ˆä¸‹ï¼‰,leftï¼ˆå·¦ï¼‰,rightï¼ˆå³ï¼‰:å¿…é¡»æ˜¯ Sideç±»å‹diagonal: æ–œçº¿ sideç±»å‹ diagonalDownd: å³æ–œçº¿ booldiagonalDown: å·¦æ–œçº¿ bool&quot;&quot;&quot; # a1.border = borderfor item in ws[&apos;A1:E1&apos;][0]: # å»å…ƒç»„ä¸­çš„æ¯ä¸€ä¸ªcellæ›´æ”¹æ ·å¼ item.border = border wb.save(&apos;./5a.xlsx&apos;) # ä¿å­˜æ›´æ”¹ å†æ¬¡æ³¨æ„ï¼ï¼ï¼ï¼š ä¸èƒ½ä½¿ç”¨ a1.border = borderï¼Œå¦åˆ™åªä¼šå¦‚ä¸‹å›¾æƒ…å†µï¼ŒB1ï¼šE1å•å…ƒæ ¼æ²¡æœ‰çº¿ã€‚æˆ‘ä¸ªäººè®¤ä¸ºæ˜¯å› ä¸ºçº¿æ¡†æ¶‰åŠåˆ°ç›¸é‚»å•å…ƒæ ¼è¾¹æ¡†çš„æ”¹åŠ¨æ‰€ä»¥éœ€è¦å•ç‹¬å¯¹æ¯ä¸ªå•å…ƒæ ¼ä¿®æ”¹æ‰è¡Œã€‚ä¸èƒ½ä½¿ç”¨ws[â€˜A1:E1â€™].border = border,ç”±å‰é¢çš„å†…å®¹å¯çŸ¥ï¼Œopenpyxlçš„å¤šä¸ªå•å…ƒæ ¼å…¶å®æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œè€Œå…ƒç»„æ˜¯æ²¡æœ‰styleçš„æ–¹æ³•çš„,æ‰€ä»¥å¿…é¡»ä¸€ä¸ªä¸€ä¸ªæ”¹ï¼ï¼å…¶å®å®˜æ–¹æœ‰å…¶ä»–åŠæ³•ï¼Œåé¢è®²ã€‚ æŒ‰åˆ—æˆ–è¡Œè®¾ç½®æ ·å¼12345678910111213141516171819202122232425262728293031323334353637383940# ç°åœ¨æˆ‘ä»¬å¯¹æ•´ä¸ªè¡¨è¿›è¡Œè®¾ç½® # è¯»å–wb = load_workbook(&apos;./5a.xlsx&apos;)ws = wb[&apos;5a_&apos;] # è¯»å–æ•°æ®è¡¨æ ¼èŒƒå›´rows = ws.max_rowcols = ws.max_column # å­—ä½“font1 = Font(name=&apos;å¾®è½¯é›…é»‘&apos;, size=11, b=True)font2 = Font(name=&apos;å¾®è½¯é›…é»‘&apos;, size=11) # è¾¹æ¡†line_t = Side(style=&apos;thin&apos;, color=&apos;000000&apos;) # ç»†è¾¹æ¡†line_m = Side(style=&apos;medium&apos;, color=&apos;000000&apos;) # ç²—è¾¹æ¡†border1 = Border(top=line_m, bottom=line_t, left=line_t, right=line_t)# ä¸æ ‡é¢˜ç›¸é‚»çš„è¾¹è®¾ç½®ä¸æ ‡é¢˜ä¸€æ ·border2 = Border(top=line_t, bottom=line_t, left=line_t, right=line_t) # å¡«å……fill = PatternFill(&apos;solid&apos;, fgColor=&apos;CFCFCF&apos;) # å¯¹é½alignment = Alignment(horizontal=&apos;center&apos;, vertical=&apos;center&apos;) # å°†æ ·å¼æ‰“åŒ…å‘½åsty1 = NamedStyle(name=&apos;sty1&apos;, font=font1, fill=fill, border=border1, alignment=alignment)sty2 = NamedStyle(name=&apos;sty2&apos;, font=font2, border=border2, alignment=alignment) for r in range(2, rows+1): for c in range(1, cols): if r == 2: ws.cell(r, c).style = sty1 else: ws.cell(r, c).style = sty2 wb.save(&apos;./5a.xlsx&apos;) æœ€åï¼š","link":"/program/Python/python-excel/"},{"title":"æ•°æ®ç±»å‹å’Œå˜é‡","text":"Python æ•°æ®ç±»å‹å’Œå˜é‡ æ•°æ®ç±»å‹è®¡ç®—æœºé¡¾åæ€ä¹‰å°±æ˜¯å¯ä»¥åšæ•°å­¦è®¡ç®—çš„æœºå™¨ï¼Œå› æ­¤ï¼Œè®¡ç®—æœºç¨‹åºç†æ‰€å½“ç„¶åœ°å¯ä»¥å¤„ç†å„ç§æ•°å€¼ã€‚ä½†æ˜¯ï¼Œè®¡ç®—æœºèƒ½å¤„ç†çš„è¿œä¸æ­¢æ•°å€¼ï¼Œè¿˜å¯ä»¥å¤„ç†æ–‡æœ¬ã€å›¾å½¢ã€éŸ³é¢‘ã€è§†é¢‘ã€ç½‘é¡µç­‰å„ç§å„æ ·çš„æ•°æ®ï¼Œä¸åŒçš„æ•°æ®ï¼Œéœ€è¦å®šä¹‰ä¸åŒçš„æ•°æ®ç±»å‹ã€‚åœ¨Pythonä¸­ï¼Œèƒ½å¤Ÿç›´æ¥å¤„ç†çš„æ•°æ®ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š æ•´æ•°Pythonå¯ä»¥å¤„ç†ä»»æ„å¤§å°çš„æ•´æ•°ï¼Œå½“ç„¶åŒ…æ‹¬è´Ÿæ•´æ•°ï¼Œåœ¨ç¨‹åºä¸­çš„è¡¨ç¤ºæ–¹æ³•å’Œæ•°å­¦ä¸Šçš„å†™æ³•ä¸€æ¨¡ä¸€æ ·ï¼Œä¾‹å¦‚ï¼š1ï¼Œ100ï¼Œ-8080ï¼Œ0ï¼Œç­‰ç­‰ã€‚ è®¡ç®—æœºç”±äºä½¿ç”¨äºŒè¿›åˆ¶ï¼Œæ‰€ä»¥ï¼Œæœ‰æ—¶å€™ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºæ•´æ•°æ¯”è¾ƒæ–¹ä¾¿ï¼Œåå…­è¿›åˆ¶ç”¨0xå‰ç¼€å’Œ0-9ï¼Œa-fè¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š0xff00ï¼Œ0xa5b4c3d2ï¼Œç­‰ç­‰ã€‚ æµ®ç‚¹æ•°æµ®ç‚¹æ•°ä¹Ÿå°±æ˜¯å°æ•°ï¼Œä¹‹æ‰€ä»¥ç§°ä¸ºæµ®ç‚¹æ•°ï¼Œæ˜¯å› ä¸ºæŒ‰ç…§ç§‘å­¦è®°æ•°æ³•è¡¨ç¤ºæ—¶ï¼Œä¸€ä¸ªæµ®ç‚¹æ•°çš„å°æ•°ç‚¹ä½ç½®æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚ï¼Œ1.23x109å’Œ12.3x108æ˜¯å®Œå…¨ç›¸ç­‰çš„ã€‚æµ®ç‚¹æ•°å¯ä»¥ç”¨æ•°å­¦å†™æ³•ï¼Œå¦‚1.23ï¼Œ3.14ï¼Œ-9.01ï¼Œç­‰ç­‰ã€‚ä½†æ˜¯å¯¹äºå¾ˆå¤§æˆ–å¾ˆå°çš„æµ®ç‚¹æ•°ï¼Œå°±å¿…é¡»ç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºï¼ŒæŠŠ10ç”¨eæ›¿ä»£ï¼Œ1.23x109å°±æ˜¯1.23e9ï¼Œæˆ–è€…12.3e8ï¼Œ0.000012å¯ä»¥å†™æˆ1.2e-5ï¼Œç­‰ç­‰ã€‚ æ•´æ•°å’Œæµ®ç‚¹æ•°åœ¨è®¡ç®—æœºå†…éƒ¨å­˜å‚¨çš„æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œæ•´æ•°è¿ç®—æ°¸è¿œæ˜¯ç²¾ç¡®çš„ï¼ˆé™¤æ³•éš¾é“ä¹Ÿæ˜¯ç²¾ç¡®çš„ï¼Ÿæ˜¯çš„ï¼ï¼‰ï¼Œè€Œæµ®ç‚¹æ•°è¿ç®—åˆ™å¯èƒ½ä¼šæœ‰å››èˆäº”å…¥çš„è¯¯å·®ã€‚ å­—ç¬¦ä¸²å­—ç¬¦ä¸²æ˜¯ä»¥å•å¼•å·â€™æˆ–åŒå¼•å·â€æ‹¬èµ·æ¥çš„ä»»æ„æ–‡æœ¬ï¼Œæ¯”å¦‚â€™abcâ€™ï¼Œâ€xyzâ€ç­‰ç­‰ã€‚è¯·æ³¨æ„ï¼Œâ€™â€™æˆ–â€â€æœ¬èº«åªæ˜¯ä¸€ç§è¡¨ç¤ºæ–¹å¼ï¼Œä¸æ˜¯å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ï¼Œå­—ç¬¦ä¸²â€™abcâ€™åªæœ‰aï¼Œbï¼Œcè¿™3ä¸ªå­—ç¬¦ã€‚å¦‚æœâ€™æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œé‚£å°±å¯ä»¥ç”¨â€â€æ‹¬èµ·æ¥ï¼Œæ¯”å¦‚â€Iâ€™m OKâ€åŒ…å«çš„å­—ç¬¦æ˜¯Iï¼Œâ€™ï¼Œmï¼Œç©ºæ ¼ï¼ŒOï¼ŒKè¿™6ä¸ªå­—ç¬¦ã€‚ å¦‚æœå­—ç¬¦ä¸²å†…éƒ¨æ—¢åŒ…å«â€™åˆåŒ…å«â€æ€ä¹ˆåŠï¼Ÿå¯ä»¥ç”¨è½¬ä¹‰å­—ç¬¦\\æ¥æ ‡è¯†ï¼Œæ¯”å¦‚ï¼š 'I\\'m \\&quot;OK\\&quot;!'è¡¨ç¤ºçš„å­—ç¬¦ä¸²å†…å®¹æ˜¯ï¼š I'm &quot;OK&quot;!è½¬ä¹‰å­—ç¬¦\\å¯ä»¥è½¬ä¹‰å¾ˆå¤šå­—ç¬¦ï¼Œæ¯”å¦‚\\nè¡¨ç¤ºæ¢è¡Œï¼Œ\\tè¡¨ç¤ºåˆ¶è¡¨ç¬¦ï¼Œå­—ç¬¦\\æœ¬èº«ä¹Ÿè¦è½¬ä¹‰ï¼Œæ‰€ä»¥\\è¡¨ç¤ºçš„å­—ç¬¦å°±æ˜¯\\ï¼Œå¯ä»¥åœ¨Pythonçš„äº¤äº’å¼å‘½ä»¤è¡Œç”¨print()æ‰“å°å­—ç¬¦ä¸²çœ‹çœ‹ï¼š 12345678910&gt;&gt;&gt; print(&apos;I\\&apos;m ok.&apos;)I&apos;m ok.&gt;&gt;&gt; print(&apos;I\\&apos;m learning\\nPython.&apos;)I&apos;m learningPython.&gt;&gt;&gt; print(&apos;\\\\\\n\\\\&apos;)\\\\ å¦‚æœå­—ç¬¦ä¸²é‡Œé¢æœ‰å¾ˆå¤šå­—ç¬¦éƒ½éœ€è¦è½¬ä¹‰ï¼Œå°±éœ€è¦åŠ å¾ˆå¤š\\ï¼Œä¸ºäº†ç®€åŒ–ï¼ŒPythonè¿˜å…è®¸ç”¨râ€™â€™è¡¨ç¤ºâ€™â€™å†…éƒ¨çš„å­—ç¬¦ä¸²é»˜è®¤ä¸è½¬ä¹‰ï¼Œå¯ä»¥è‡ªå·±è¯•è¯•ï¼š 1234&gt;&gt;&gt; print(&apos;\\\\\\t\\\\&apos;)\\ \\&gt;&gt;&gt; print(r&apos;\\\\\\t\\\\&apos;)\\\\\\t\\\\ å¦‚æœå­—ç¬¦ä¸²å†…éƒ¨æœ‰å¾ˆå¤šæ¢è¡Œï¼Œç”¨\\nå†™åœ¨ä¸€è¡Œé‡Œä¸å¥½é˜…è¯»ï¼Œä¸ºäº†ç®€åŒ–ï¼ŒPythonå…è®¸ç”¨â€™â€™â€™â€¦â€™â€™â€™çš„æ ¼å¼è¡¨ç¤ºå¤šè¡Œå†…å®¹ï¼Œå¯ä»¥è‡ªå·±è¯•è¯•ï¼š 1234567&gt;&gt;&gt; print(&apos;&apos;&apos;line1... line2... line3&apos;&apos;&apos;)line1line2line3 ä¸Šé¢æ˜¯åœ¨äº¤äº’å¼å‘½ä»¤è¡Œå†…è¾“å…¥ï¼Œæ³¨æ„åœ¨è¾“å…¥å¤šè¡Œå†…å®¹æ—¶ï¼Œæç¤ºç¬¦ç”±&gt;&gt;&gt;å˜ä¸ºâ€¦ï¼Œæç¤ºä½ å¯ä»¥æ¥ç€ä¸Šä¸€è¡Œè¾“å…¥ï¼Œæ³¨æ„â€¦æ˜¯æç¤ºç¬¦ï¼Œä¸æ˜¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼š 12345678910111213141516â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚Command Prompt - python _ â–¡ x â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚&gt;&gt;&gt; print(&apos;&apos;&apos;line1 â”‚â”‚... line2 â”‚â”‚... line3&apos;&apos;&apos;) â”‚â”‚line1 â”‚â”‚line2 â”‚â”‚line3 â”‚â”‚ â”‚â”‚&gt;&gt;&gt; _ â”‚â”‚ â”‚â”‚ â”‚â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å½“è¾“å…¥å®Œç»“æŸç¬¦12å¦‚æœå†™æˆç¨‹åºå¹¶å­˜ä¸º.pyæ–‡ä»¶ï¼Œå°±æ˜¯ï¼š print(â€˜â€™â€™line1line2line3â€™â€™â€™) 1å¤šè¡Œå­—ç¬¦ä¸²&apos;&apos;&apos;...&apos;&apos;&apos;è¿˜å¯ä»¥åœ¨å‰é¢åŠ ä¸Šrä½¿ç”¨ï¼Œè¯·è‡ªè¡Œæµ‹è¯•ï¼š -- coding: utf-8 --print(râ€™â€™â€™hello,\\nworldâ€™â€™â€™) 1234 Run### å¸ƒå°”å€¼å¸ƒå°”å€¼å’Œå¸ƒå°”ä»£æ•°çš„è¡¨ç¤ºå®Œå…¨ä¸€è‡´ï¼Œä¸€ä¸ªå¸ƒå°”å€¼åªæœ‰Trueã€Falseä¸¤ç§å€¼ï¼Œè¦ä¹ˆæ˜¯Trueï¼Œè¦ä¹ˆæ˜¯Falseï¼Œåœ¨Pythonä¸­ï¼Œå¯ä»¥ç›´æ¥ç”¨Trueã€Falseè¡¨ç¤ºå¸ƒå°”å€¼ï¼ˆè¯·æ³¨æ„å¤§å°å†™ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¸ƒå°”è¿ç®—è®¡ç®—å‡ºæ¥ï¼š TrueTrueFalseFalse3 &gt; 2True3 &gt; 5False 123å¸ƒå°”å€¼å¯ä»¥ç”¨andã€orå’Œnotè¿ç®—ã€‚#### andè¿ç®—æ˜¯ä¸è¿ç®—ï¼Œåªæœ‰æ‰€æœ‰éƒ½ä¸ºTrueï¼Œandè¿ç®—ç»“æœæ‰æ˜¯Trueï¼š True and TrueTrueTrue and FalseFalseFalse and FalseFalse5 &gt; 3 and 3 &gt; 1True 12#### orè¿ç®—æ˜¯æˆ–è¿ç®—ï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªä¸ºTrueï¼Œorè¿ç®—ç»“æœå°±æ˜¯Trueï¼š True or TrueTrueTrue or FalseTrueFalse or FalseFalse5 &gt; 3 or 1 &gt; 3True 12#### notè¿ç®—æ˜¯éè¿ç®—ï¼Œå®ƒæ˜¯ä¸€ä¸ªå•ç›®è¿ç®—ç¬¦ï¼ŒæŠŠTrueå˜æˆFalseï¼ŒFalseå˜æˆTrueï¼š not TrueFalsenot FalseTruenot 1 &gt; 2True 1å¸ƒå°”å€¼ç»å¸¸ç”¨åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œæ¯”å¦‚ï¼š if age &gt;= 18: print(â€˜adultâ€™)else: print(â€˜teenagerâ€™) 1234567891011121314151617181920### ç©ºå€¼ç©ºå€¼æ˜¯Pythoné‡Œä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œç”¨Noneè¡¨ç¤ºã€‚Noneä¸èƒ½ç†è§£ä¸º0ï¼Œå› ä¸º0æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè€ŒNoneæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç©ºå€¼ã€‚æ­¤å¤–ï¼ŒPythonè¿˜æä¾›äº†åˆ—è¡¨ã€å­—å…¸ç­‰å¤šç§æ•°æ®ç±»å‹ï¼Œè¿˜å…è®¸åˆ›å»ºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬åé¢ä¼šç»§ç»­è®²åˆ°ã€‚### å˜é‡å˜é‡çš„æ¦‚å¿µåŸºæœ¬ä¸Šå’Œåˆä¸­ä»£æ•°çš„æ–¹ç¨‹å˜é‡æ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯åœ¨è®¡ç®—æœºç¨‹åºä¸­ï¼Œå˜é‡ä¸ä»…å¯ä»¥æ˜¯æ•°å­—ï¼Œè¿˜å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ã€‚å˜é‡åœ¨ç¨‹åºä¸­å°±æ˜¯ç”¨ä¸€ä¸ªå˜é‡åè¡¨ç¤ºäº†ï¼Œå˜é‡åå¿…é¡»æ˜¯å¤§å°å†™è‹±æ–‡ã€æ•°å­—å’Œ_çš„ç»„åˆï¼Œä¸”ä¸èƒ½ç”¨æ•°å­—å¼€å¤´ï¼Œæ¯”å¦‚ï¼š`a = 1`å˜é‡aæ˜¯ä¸€ä¸ªæ•´æ•°ã€‚`t_007 = &apos;T007&apos;`å˜é‡t_007æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚`Answer = True`å˜é‡Answeræ˜¯ä¸€ä¸ªå¸ƒå°”å€¼Trueã€‚åœ¨Pythonä¸­ï¼Œç­‰å·=æ˜¯èµ‹å€¼è¯­å¥ï¼Œå¯ä»¥æŠŠä»»æ„æ•°æ®ç±»å‹èµ‹å€¼ç»™å˜é‡ï¼ŒåŒä¸€ä¸ªå˜é‡å¯ä»¥åå¤èµ‹å€¼ï¼Œè€Œä¸”å¯ä»¥æ˜¯ä¸åŒç±»å‹çš„å˜é‡ï¼Œä¾‹å¦‚ï¼š -- coding: utf-8 --a = 123 # aæ˜¯æ•´æ•°print(a)a = â€˜ABCâ€™ # aå˜ä¸ºå­—ç¬¦ä¸²print(a) 123 Runè¿™ç§å˜é‡æœ¬èº«ç±»å‹ä¸å›ºå®šçš„è¯­è¨€ç§°ä¹‹ä¸ºåŠ¨æ€è¯­è¨€ï¼Œä¸ä¹‹å¯¹åº”çš„æ˜¯é™æ€è¯­è¨€ã€‚é™æ€è¯­è¨€åœ¨å®šä¹‰å˜é‡æ—¶å¿…é¡»æŒ‡å®šå˜é‡ç±»å‹ï¼Œå¦‚æœèµ‹å€¼çš„æ—¶å€™ç±»å‹ä¸åŒ¹é…ï¼Œå°±ä¼šæŠ¥é”™ã€‚ä¾‹å¦‚Javaæ˜¯é™æ€è¯­è¨€ï¼Œèµ‹å€¼è¯­å¥å¦‚ä¸‹ï¼ˆ// è¡¨ç¤ºæ³¨é‡Šï¼‰ï¼š int a = 123; // aæ˜¯æ•´æ•°ç±»å‹å˜é‡a = â€œABCâ€; // é”™è¯¯ï¼šä¸èƒ½æŠŠå­—ç¬¦ä¸²èµ‹ç»™æ•´å‹å˜é‡ 123å’Œé™æ€è¯­è¨€ç›¸æ¯”ï¼ŒåŠ¨æ€è¯­è¨€æ›´çµæ´»ï¼Œå°±æ˜¯è¿™ä¸ªåŸå› ã€‚è¯·ä¸è¦æŠŠèµ‹å€¼è¯­å¥çš„ç­‰å·ç­‰åŒäºæ•°å­¦çš„ç­‰å·ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š x = 10x = x + 2 123456789101112å¦‚æœä»æ•°å­¦ä¸Šç†è§£x = x + 2é‚£æ— è®ºå¦‚ä½•æ˜¯ä¸æˆç«‹çš„ï¼Œåœ¨ç¨‹åºä¸­ï¼Œèµ‹å€¼è¯­å¥å…ˆè®¡ç®—å³ä¾§çš„è¡¨è¾¾å¼x + 2ï¼Œå¾—åˆ°ç»“æœ12ï¼Œå†èµ‹ç»™å˜é‡xã€‚ç”±äºxä¹‹å‰çš„å€¼æ˜¯10ï¼Œé‡æ–°èµ‹å€¼åï¼Œxçš„å€¼å˜æˆ12ã€‚æœ€åï¼Œç†è§£å˜é‡åœ¨è®¡ç®—æœºå†…å­˜ä¸­çš„è¡¨ç¤ºä¹Ÿéå¸¸é‡è¦ã€‚å½“æˆ‘ä»¬å†™ï¼š`a = &apos;ABC&apos;`æ—¶ï¼ŒPythonè§£é‡Šå™¨å¹²äº†ä¸¤ä»¶äº‹æƒ…ï¼šåœ¨å†…å­˜ä¸­åˆ›å»ºäº†ä¸€ä¸ª&apos;ABC&apos;çš„å­—ç¬¦ä¸²ï¼›åœ¨å†…å­˜ä¸­åˆ›å»ºäº†ä¸€ä¸ªåä¸ºaçš„å˜é‡ï¼Œå¹¶æŠŠå®ƒæŒ‡å‘&apos;ABC&apos;ã€‚ä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªå˜é‡aèµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡bï¼Œè¿™ä¸ªæ“ä½œå®é™…ä¸Šæ˜¯æŠŠå˜é‡bæŒ‡å‘å˜é‡aæ‰€æŒ‡å‘çš„æ•°æ®ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š -- coding: utf-8 --a = â€˜ABCâ€™b = aa = â€˜XYZâ€™print(b) 12345678910111213141516171819202122232425 Runæœ€åä¸€è¡Œæ‰“å°å‡ºå˜é‡bçš„å†…å®¹åˆ°åº•æ˜¯&apos;ABC&apos;å‘¢è¿˜æ˜¯&apos;XYZ&apos;ï¼Ÿå¦‚æœä»æ•°å­¦æ„ä¹‰ä¸Šç†è§£ï¼Œå°±ä¼šé”™è¯¯åœ°å¾—å‡ºbå’Œaç›¸åŒï¼Œä¹Ÿåº”è¯¥æ˜¯&apos;XYZ&apos;ï¼Œä½†å®é™…ä¸Šbçš„å€¼æ˜¯&apos;ABC&apos;ï¼Œè®©æˆ‘ä»¬ä¸€è¡Œä¸€è¡Œåœ°æ‰§è¡Œä»£ç ï¼Œå°±å¯ä»¥çœ‹åˆ°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼šæ‰§è¡Œa = &apos;ABC&apos;ï¼Œè§£é‡Šå™¨åˆ›å»ºäº†å­—ç¬¦ä¸²&apos;ABC&apos;å’Œå˜é‡aï¼Œå¹¶æŠŠaæŒ‡å‘&apos;ABC&apos;ï¼š![](https://www.liaoxuefeng.com/files/attachments/923791878255456/0)æ‰§è¡Œb = aï¼Œè§£é‡Šå™¨åˆ›å»ºäº†å˜é‡bï¼Œå¹¶æŠŠbæŒ‡å‘aæŒ‡å‘çš„å­—ç¬¦ä¸²&apos;ABC&apos;ï¼š![](https://www.liaoxuefeng.com/files/attachments/923792058613440/0)æ‰§è¡Œa = &apos;XYZ&apos;ï¼Œè§£é‡Šå™¨åˆ›å»ºäº†å­—ç¬¦ä¸²&apos;XYZ&apos;ï¼Œå¹¶æŠŠaçš„æŒ‡å‘æ”¹ä¸º&apos;XYZ&apos;ï¼Œä½†bå¹¶æ²¡æœ‰æ›´æ”¹ï¼š![](https://www.liaoxuefeng.com/files/attachments/923792191637760/0)æ‰€ä»¥ï¼Œæœ€åæ‰“å°å˜é‡bçš„ç»“æœè‡ªç„¶æ˜¯&apos;ABC&apos;äº†ã€‚### å¸¸é‡æ‰€è°“å¸¸é‡å°±æ˜¯ä¸èƒ½å˜çš„å˜é‡ï¼Œæ¯”å¦‚å¸¸ç”¨çš„æ•°å­¦å¸¸æ•°Ï€å°±æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚åœ¨Pythonä¸­ï¼Œé€šå¸¸ç”¨å…¨éƒ¨å¤§å†™çš„å˜é‡åè¡¨ç¤ºå¸¸é‡ï¼š`PI = 3.14159265359`ä½†äº‹å®ä¸ŠPIä»ç„¶æ˜¯ä¸€ä¸ªå˜é‡ï¼ŒPythonæ ¹æœ¬æ²¡æœ‰ä»»ä½•æœºåˆ¶ä¿è¯PIä¸ä¼šè¢«æ”¹å˜ï¼Œæ‰€ä»¥ï¼Œç”¨å…¨éƒ¨å¤§å†™çš„å˜é‡åè¡¨ç¤ºå¸¸é‡åªæ˜¯ä¸€ä¸ªä¹ æƒ¯ä¸Šçš„ç”¨æ³•ï¼Œå¦‚æœä½ ä¸€å®šè¦æ”¹å˜å˜é‡PIçš„å€¼ï¼Œä¹Ÿæ²¡äººèƒ½æ‹¦ä½ä½ ã€‚æœ€åè§£é‡Šä¸€ä¸‹æ•´æ•°çš„é™¤æ³•ä¸ºä»€ä¹ˆä¹Ÿæ˜¯ç²¾ç¡®çš„ã€‚åœ¨Pythonä¸­ï¼Œæœ‰ä¸¤ç§é™¤æ³•ï¼Œä¸€ç§é™¤æ³•æ˜¯/ï¼š 10 / 33.3333333333333335 1/é™¤æ³•è®¡ç®—ç»“æœæ˜¯æµ®ç‚¹æ•°ï¼Œå³ä½¿æ˜¯ä¸¤ä¸ªæ•´æ•°æ°å¥½æ•´é™¤ï¼Œç»“æœä¹Ÿæ˜¯æµ®ç‚¹æ•°ï¼š 9 / 33.0 1è¿˜æœ‰ä¸€ç§é™¤æ³•æ˜¯//ï¼Œç§°ä¸ºåœ°æ¿é™¤ï¼Œä¸¤ä¸ªæ•´æ•°çš„é™¤æ³•ä»ç„¶æ˜¯æ•´æ•°ï¼š 10 // 33 123ä½ æ²¡æœ‰çœ‹é”™ï¼Œæ•´æ•°çš„åœ°æ¿é™¤//æ°¸è¿œæ˜¯æ•´æ•°ï¼Œå³ä½¿é™¤ä¸å°½ã€‚è¦åšç²¾ç¡®çš„é™¤æ³•ï¼Œä½¿ç”¨/å°±å¯ä»¥ã€‚å› ä¸º//é™¤æ³•åªå–ç»“æœçš„æ•´æ•°éƒ¨åˆ†ï¼Œæ‰€ä»¥Pythonè¿˜æä¾›ä¸€ä¸ªä½™æ•°è¿ç®—ï¼Œå¯ä»¥å¾—åˆ°ä¸¤ä¸ªæ•´æ•°ç›¸é™¤çš„ä½™æ•°ï¼š 10 % 31 æ— è®ºæ•´æ•°åš//é™¤æ³•è¿˜æ˜¯å–ä½™æ•°ï¼Œç»“æœæ°¸è¿œæ˜¯æ•´æ•°ï¼Œæ‰€ä»¥ï¼Œæ•´æ•°è¿ç®—ç»“æœæ°¸è¿œæ˜¯ç²¾ç¡®çš„ã€‚ å°ç»“Pythonæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œåœ¨è®¡ç®—æœºå†…éƒ¨ï¼Œå¯ä»¥æŠŠä»»ä½•æ•°æ®éƒ½çœ‹æˆä¸€ä¸ªâ€œå¯¹è±¡â€ï¼Œè€Œå˜é‡å°±æ˜¯åœ¨ç¨‹åºä¸­ç”¨æ¥æŒ‡å‘è¿™äº›æ•°æ®å¯¹è±¡çš„ï¼Œå¯¹å˜é‡èµ‹å€¼å°±æ˜¯æŠŠæ•°æ®å’Œå˜é‡ç»™å…³è”èµ·æ¥ã€‚ å¯¹å˜é‡èµ‹å€¼x = yæ˜¯æŠŠå˜é‡xæŒ‡å‘çœŸæ­£çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯å˜é‡yæ‰€æŒ‡å‘çš„ã€‚éšåå¯¹å˜é‡yçš„èµ‹å€¼ä¸å½±å“å˜é‡xçš„æŒ‡å‘ã€‚ æ³¨æ„ï¼šPythonçš„æ•´æ•°æ²¡æœ‰å¤§å°é™åˆ¶ï¼Œè€ŒæŸäº›è¯­è¨€çš„æ•´æ•°æ ¹æ®å…¶å­˜å‚¨é•¿åº¦æ˜¯æœ‰å¤§å°é™åˆ¶çš„ï¼Œä¾‹å¦‚Javaå¯¹32ä½æ•´æ•°çš„èŒƒå›´é™åˆ¶åœ¨-2147483648-2147483647ã€‚Pythonçš„æµ®ç‚¹æ•°ä¹Ÿæ²¡æœ‰å¤§å°é™åˆ¶ï¼Œä½†æ˜¯è¶…å‡ºä¸€å®šèŒƒå›´å°±ç›´æ¥è¡¨ç¤ºä¸ºinfï¼ˆæ— é™å¤§ï¼‰ã€‚","link":"/program/Python/python-type/"},{"title":"pythonæ“ä½œexcelçš„åŒ…(openpyxlã€xlsxwriter)","text":"ç°åœ¨æ”¯æŒpythonæ“ä½œexcelçš„åŒ…æœ‰ä¸‹åˆ—è¿™äº› å®˜ç½‘ä¸Šæœ€æ¨èçš„æ˜¯openpyxlï¼Œå…¶ä»–åŒ…æ”¯æŒè¾ƒè€çš„excelç‰ˆæœ¬ã€‚ xlsxwriteræ— æ³•å¯¹æ‰“å¼€çš„excelè¿›è¡Œå†™æ“ä½œï¼Œexcelå¿…é¡»å¤„äºå…³é—­çŠ¶æ€æ‰èƒ½å†™æˆåŠŸã€‚ xlswriter åŸºæœ¬ä»£ç ï¼š12345678import xlsxwriterworkbook = xlsxwriter.Workbook(&apos;hello.xlsx&apos;)worksheet = workbook.add_worksheet()worksheet.write(&apos;A1&apos;, &apos;Hello world&apos;)workbook.close() openpyxlåŸºæœ¬ä»£ç ï¼š1234567891011121314from openpyxl import Workbookwb = Workbook()ws = wb.active#è®¾ç½®å•å…ƒæ ¼å€¼ws[&apos;A1&apos;] = 42#åŠ å…¥ä¸€è¡Œæ•°æ®ws.append([1, 2, 3])import datetime#python ç±»å‹æ•°æ®ä¼šè¢«è‡ªåŠ¨è½¬æ¢ws[&apos;A2&apos;] = datetime.datetime.now()#ä¿å­˜ä¿®æ”¹wb.save(&quot;sample.xlsx&quot;) æ¥æº:è„šæœ¬ä¹‹å®¶","link":"/program/Python/python-writer/"},{"title":"å­—å…¸ã€åˆ—è¡¨ã€æ•°ç»„å’Œå­—ç¬¦ä¸²","text":"Python å­—å…¸ã€åˆ—è¡¨ã€æ•°ç»„å’Œå­—ç¬¦ä¸² å­—å…¸ 1234567# -*- coding: UTF-8 -*-dict_1 = {'1': 'a', '2': 'b', '3': 'c'}print(dict_1) # æ‰“å°å­—å…¸print(type(dict_1)) # æ‰“å°æ–°èµ‹å€¼çš„å­—å…¸çš„ç±»å‹print(str(dict_1), end='å­—ç¬¦ä¸²\\n') # æŠŠå­—å…¸è½¬åŒ–æˆå­—ç¬¦ä¸²åæ‰“å°print(tuple(dict_1), end='å…ƒç»„\\n') # æŠŠå­—å…¸è½¬åŒ–ä¸ºå…ƒç»„åæ‰“å°print(list(dict_1), end='åˆ—è¡¨\\n') # æŠŠå­—å…¸è½¬åŒ–ä¸ºåˆ—è¡¨åæ‰“å° å…ƒç»„ 123456# -*- coding: UTF-8 -*-tuple_1 = (1, 2, 3, 4, 5)print(tuple_1) # æ‰“å°å…ƒç»„print(type(tuple_1)) # æ‰“å°æ–°èµ‹å€¼çš„å…ƒç¥–çš„ç±»å‹print(str(tuple_1), end='å­—ç¬¦ä¸²\\n') # æŠŠå…ƒç»„è½¬åŒ–æˆå­—ç¬¦ä¸²åæ‰“å°print(list(tuple_1), end='åˆ—è¡¨\\n') # æŠŠå…ƒç»„è½¬åŒ–ä¸ºåˆ—è¡¨åæ‰“å° å…ƒç»„ä¸å¯è½¬åŒ–ä¸ºå­—å…¸åˆ—è¡¨ 123456# -*- coding: UTF-8 -*-list_1 = [1, 2, 3, 4, 5]print(list_1) # æ‰“å°åˆ—è¡¨print(type(list_1)) # æ‰“å°æ–°èµ‹å€¼çš„åˆ—è¡¨çš„ç±»å‹print(str(list_1), end='å­—ç¬¦ä¸²\\n') # æŠŠåˆ—è¡¨è½¬åŒ–æˆå­—ç¬¦ä¸²åæ‰“å°print(tuple(list_1), end='å…ƒç»„\\n') # æŠŠåˆ—è¡¨è½¬åŒ–ä¸ºå…ƒç»„åæ‰“å° å…ƒç»„ä¸å¯è½¬åŒ–ä¸ºå­—å…¸å­—ç¬¦ä¸² 123456# -*- coding: UTF-8 -*-string_1 = '(1, 2, 3, 4, 5)'print(string_1) # æ‰“å°å­—ç¬¦ä¸²print(type(string_1)) # æ‰“å°æ–°èµ‹å€¼çš„å­—ç¬¦ä¸²print(tuple(eval(string_1)), end='å…ƒç»„\\n') # æŠŠå­—ç¬¦ä¸²è½¬åŒ–æˆå…ƒç»„åè¾“å‡ºprint(list(eval(string_1)), end='åˆ—è¡¨\\n') # æŠŠå­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨åè¾“å‡º åªæœ‰ç‰¹æ®Šå­—ç¬¦ä¸²æ‰èƒ½è½¬åŒ–ä¸ºå­—å…¸1234string_2 = '{\"name\":\"tom\",\"age\":6}'print(string_2) # æ‰“å°æ–°èµ‹å€¼çš„å­—ç¬¦ä¸²print(type(string_2)) # æ‰“å°æ–°èµ‹å€¼çš„å­—ç¬¦ä¸²çš„ç±»å‹print(dict(eval(string_2)), end='å­—å…¸\\n') # æŠŠå­—ç¬¦ä¸²è½¬åŒ–ä¸ºå­—å…¸åæ‰“å°","link":"/program/Python/python/"},{"title":"Pythonçˆ¬è™«","text":"ç°åœ¨Pythonè¯­è¨€å¤§ç«ï¼Œåœ¨ç½‘ç»œçˆ¬è™«ã€äººå·¥æ™ºèƒ½ã€å¤§æ•°æ®ç­‰é¢†åŸŸéƒ½æœ‰å¾ˆå¥½çš„åº”ç”¨ã€‚ä»Šå¤©æˆ‘å‘å¤§å®¶ä»‹ç»ä¸€ä¸‹Pythonçˆ¬è™«çš„ä¸€äº›çŸ¥è¯†å’Œå¸¸ç”¨ç±»åº“çš„ç”¨æ³•ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚ å…¶å®çˆ¬è™«è¿™ä¸ªæ¦‚å¿µå¾ˆç®€å•ï¼ŒåŸºæœ¬å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š å‘èµ·ç½‘ç»œè¯·æ±‚ è·å–ç½‘é¡µ è§£æç½‘é¡µè·å–æ•°æ® å‘èµ·ç½‘ç»œè¯·æ±‚è¿™ä¸ªæ­¥éª¤å¸¸ç”¨çš„ç±»åº“æœ‰æ ‡å‡†åº“urllibä»¥åŠPythonä¸Šå¸¸ç”¨çš„requestsåº“ã€‚è§£æç½‘é¡µå¸¸ç”¨çš„ç±»åº“æœ‰çš„BeautifulSoupã€‚å¦å¤–requestsçš„ä½œè€…è¿˜å¼€å‘äº†å¦ä¸€ä¸ªå¾ˆå¥½ç”¨çš„åº“requests-htmlï¼Œæä¾›äº†å‘èµ·è¯·æ±‚å’Œè§£æç½‘é¡µçš„äºŒåˆä¸€åŠŸèƒ½ï¼Œå¼€å‘å°å‹çˆ¬è™«éå¸¸æ–¹ä¾¿ã€‚å¦å¤–è¿˜æœ‰ä¸€äº›ä¸“ä¸šçš„çˆ¬è™«ç±»åº“ï¼Œå…¶ä¸­æ¯”è¾ƒå‡ºåçš„å°±æ˜¯scrapyã€‚æœ¬æ–‡å°†ä¼šç®€å•ä»‹ç»ä¸€ä¸‹è¿™äº›ç±»åº“ï¼Œä¹‹åè¿˜ä¼šä¸“é—¨å†™ä¸€ç¯‡æ–‡ç« ä»‹ç»scrapyçš„ç”¨æ³•ã€‚ æ ‡å‡†åº“urllibé¦–å…ˆå…ˆæ¥çœ‹æ ‡å‡†åº“urllibã€‚æ ‡å‡†åº“çš„ä¼˜ç‚¹æ˜¯Pythonè‡ªå¸¦çš„ï¼Œä¸éœ€è¦å®‰è£…ä»»ä½•ç¬¬ä¸‰æ–¹åº“ï¼Œç¼ºç‚¹å°±æ˜¯urllibå±äºååº•å±‚çš„åº“ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚ä¸‹é¢æ˜¯urllibå‘èµ·è¯·æ±‚çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œå¤§å®¶çœ‹çœ‹å°±å¥½ã€‚å¯ä»¥çœ‹åˆ°ä¸ºäº†å‘èµ·ä¸€ä¸ªç®€å•çš„è¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºopenerã€requestã€ProxyHandlerç­‰å¥½å‡ ä¸ªå¯¹è±¡ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ 1234567891011121314151617181920import urllib.request as requestimport requestsproxies = { 'https': 'https://127.0.0.1:1080', 'http': 'http://127.0.0.1:1080'}headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0'}print('--------------ä½¿ç”¨urllib--------------')url = 'http://www.google.com'opener = request.build_opener(request.ProxyHandler(proxies))request.install_opener(opener)req = request.Request(url, headers=headers)response = request.urlopen(req)print(response.read().decode()) requestsrequestsæ˜¯Kenneth Reitzå¤§ç¥çš„è‘—åä½œå“ä¹‹ä¸€ï¼Œä¼˜ç‚¹å°±æ˜¯æåº¦ç®€å•å’Œå¥½ç”¨ã€‚é¦–å…ˆæ¥å®‰è£…requestsã€‚ 1pip install requests ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå’Œä¸Šé¢urllibç¤ºä¾‹ä»£ç å®ç°çš„åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ä»£ç é‡å°‘å¤šäº†ï¼Œä¹Ÿæ›´æ˜“è¯»ã€‚ 1234print('--------------ä½¿ç”¨requests--------------')response = requests.get('https://www.google.com', headers=headers, proxies=proxies)response.encoding = 'utf8'print(response.text) requestsè¿˜å¯ä»¥æ–¹ä¾¿çš„å‘é€è¡¨å•æ•°æ®ï¼Œæ¨¡æ‹Ÿç”¨æˆ·ç™»å½•ã€‚è¿”å›çš„Responseå¯¹è±¡è¿˜åŒ…å«äº†çŠ¶æ€ç ã€headerã€rawã€cookiesç­‰å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚ 12345678data = { 'name': 'yitian', 'age': 22, 'friends': ['zhang3', 'li4']}response = requests.post('http://httpbin.org/post', data=data)pprint(response.__dict__)print(response.text) å…³äºrequestsæˆ‘å°±ä¸å¤šåšä»‹ç»äº†ï¼Œå› ä¸ºå®ƒæœ‰ä¸­æ–‡æ–‡æ¡£ï¼Œè™½ç„¶æ¯”å®˜æ–¹è½åå‡ ä¸ªå°ç‰ˆæœ¬å·ï¼Œä¸è¿‡æ— ä¼¤å¤§é›…ï¼Œå¤§å®¶å¯ä»¥æ”¾å¿ƒå‚é˜…ã€‚ 1http://cn.python-requests.org/zh_CN/latest/ beautifulsoupåˆ©ç”¨å‰é¢ä»‹ç»çš„requestsç±»åº“ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“åœ°è·å–HTMLä»£ç ï¼Œä½†æ˜¯ä¸ºäº†ä»HTMLä¸­æ‰¾åˆ°æ‰€éœ€çš„æ•°æ®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦HTML/XMLè§£æåº“ï¼ŒBeautifulSoupå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå¸¸ç”¨çš„åº“ã€‚é¦–å…ˆå…ˆæ¥å®‰è£…å®ƒï¼š 1pip install beautifulsoup4 è¿™æ¬¡å°±ç”¨æˆ‘ç®€ä¹¦ä¸»é¡µä½œä¸ºä¾‹å­ï¼Œçˆ¬å–ä¸€ä¸‹æˆ‘ç®€ä¹¦çš„æ–‡ç« åˆ—è¡¨ã€‚é¦–å…ˆå…ˆç”¨requestsè·å–åˆ°ç½‘é¡µå†…å®¹ã€‚ 1234567891011from pprint import pprintimport bs4import requestsheaders = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0'}url = 'https://www.jianshu.com/u/7753478e1554'response = requests.get(url, headers=headers) ç„¶åå°±æ˜¯BeautifulSoupçš„ä»£ç äº†ã€‚åœ¨ä½¿ç”¨BeautifulSoupçš„æ—¶å€™é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªHTMLæ ‘ï¼Œç„¶åä»æ ‘ä¸­æŸ¥æ‰¾èŠ‚ç‚¹ã€‚BeautifulSoupä¸»è¦æœ‰ä¸¤ç§æŸ¥æ‰¾èŠ‚ç‚¹çš„åŠæ³•ï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨findå’Œfind_allæ–¹æ³•ï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨selectæ–¹æ³•ç”¨cssé€‰æ‹©å™¨ã€‚æ‹¿åˆ°èŠ‚ç‚¹ä¹‹åï¼Œç”¨contentså»è·å–å®ƒçš„å­èŠ‚ç‚¹ï¼Œå¦‚æœå­èŠ‚ç‚¹æ˜¯æ–‡æœ¬ï¼Œå°±ä¼šæ‹¿åˆ°æ–‡æœ¬å€¼ï¼Œæ³¨æ„è¿™ä¸ªå±æ€§è¿”å›çš„æ˜¯åˆ—è¡¨ï¼Œæ‰€ä»¥è¦åŠ [0]ã€‚ 123456html = bs4.BeautifulSoup(response.text, features='lxml')note_list = html.find_all('ul', class_='note-list', limit=1)[0]for a in note_list.select('li&gt;div.content&gt;a.title'): title = a.contents[0] link = f'https://www.jianshu.com{a[\"href\"]}' print(f'ã€Š{title}ã€‹,{link}') BeautifulSoupä¹Ÿæœ‰ä¸­æ–‡æ–‡æ¡£ï¼ŒåŒæ ·ä¹Ÿæ˜¯ç¨å¾®è½åä¸¤ä¸ªå°ç‰ˆæœ¬ï¼Œå½±å“ä¸å¤§ã€‚ 1https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/ requests-htmlè¿™ä¸ªç±»åº“æ˜¯requestsçš„å…„å¼Ÿï¼ŒåŒæ ·ä¹Ÿæ˜¯Kenneth Reitzå¤§ç¥çš„ä½œå“ã€‚å®ƒå°†è¯·æ±‚ç½‘é¡µå’Œè§£æç½‘é¡µç»“åˆåˆ°äº†ä¸€èµ·ã€‚æœ¬æ¥å¦‚æœä½ ç”¨requestsçš„è¯åªèƒ½è¯·æ±‚ç½‘é¡µï¼Œä¸ºäº†è§£æç½‘é¡µè¿˜å¾—ä½¿ç”¨BeautifulSoupè¿™æ ·çš„è§£æåº“ã€‚ç°åœ¨åªéœ€è¦requests-htmlä¸€ä¸ªåº“å°±å¯ä»¥åŠåˆ°ã€‚é¦–å…ˆå…ˆæ¥å®‰è£…ã€‚ 1pip install requests-html ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹ç”¨requests-htmlå¦‚ä½•é‡å†™ä¸Šé¢è¿™ä¸ªä¾‹å­ã€‚ 123456789101112131415from requests_html import HTMLSessionfrom pprint import pprinturl = 'https://www.jianshu.com/u/7753478e1554'headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0'}session = HTMLSession()r = session.get(url, headers=headers)note_list = r.html.find('ul.note-list', first=True)for a in note_list.find('li&gt;div.content&gt;a.title'): title = a.text link = f'https://www.jianshu.com{a.attrs[\"href\"]}' print(f'ã€Š{title}ã€‹,{link}') requests-htmlé™¤äº†å¯ä»¥ä½¿ç”¨cssé€‰æ‹©å™¨æ¥æœç´¢ä»¥å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨xpathæ¥æŸ¥æ‰¾ã€‚ 1234for a in r.html.xpath('//ul[@class=\"note-list\"]/li/div[@class=\"content\"]/a[@class=\"title\"]'): title = a.text link = f'https://www.jianshu.com{a.attrs[\"href\"]}' print(f'ã€Š{title}ã€‹,{link}') requests-htmlè¿˜æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç‰¹æ€§å°±æ˜¯æµè§ˆå™¨æ¸²æŸ“ã€‚æœ‰äº›ç½‘é¡µæ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œç›´æ¥ç”¨çˆ¬è™«å»çˆ¬åªèƒ½å¾—åˆ°ä¸€ä¸ªç©ºé¡µé¢ï¼Œå› ä¸ºæ•°æ®æ˜¯é æµè§ˆå™¨è¿è¡ŒJSè„šæœ¬å¼‚æ­¥åŠ è½½çš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦æµè§ˆå™¨æ¸²æŸ“äº†ã€‚è€Œæµè§ˆå™¨æ¸²æŸ“ç”¨requests-htmlåšéå¸¸ç®€å•ï¼Œåªè¦å¤šè°ƒç”¨ä¸€ä¸ªrenderå‡½æ•°å³å¯ã€‚renderå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æŒ‡å®šé¡µé¢ä¸‹æ»‘æ¬¡æ•°å’Œæš‚åœæ—¶é—´ã€‚renderå‡½æ•°ç¬¬ä¸€æ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œrequests-htmlä¼šä¸‹è½½ä¸€ä¸ªchromiumæµè§ˆå™¨ï¼Œç„¶åç”¨å®ƒæ¸²æŸ“é¡µé¢ã€‚ç®€ä¹¦çš„ä¸ªäººæ–‡ç« é¡µé¢ä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥åŠ è½½çš„ä¾‹å­ï¼Œé»˜è®¤åªä¼šæ˜¾ç¤ºæœ€è¿‘å‡ ç¯‡æ–‡ç« ï¼Œé€šè¿‡æµè§ˆå™¨æ¸²æŸ“æ¨¡æ‹Ÿé¡µé¢ä¸‹æ»‘ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ‰€æœ‰æ–‡ç« åˆ—è¡¨ã€‚ 12345678session = HTMLSession()r = session.get(url, headers=headers)# renderå‡½æ•°æŒ‡ç¤ºrequests-htmlç”¨chromiumæµè§ˆå™¨æ¸²æŸ“é¡µé¢r.html.render(scrolldown=50, sleep=0.2)for a in r.html.xpath('//ul[@class=\"note-list\"]/li/div[@class=\"content\"]/a[@class=\"title\"]'): title = a.text link = f'https://www.jianshu.com{a.attrs[\"href\"]}' print(f'ã€Š{title}ã€‹,{link}') ç±»ä¼¼çš„ï¼Œä»Šæ—¥å¤´æ¡çš„ä¸ªäººé¡µé¢ä¹Ÿæ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ‰€ä»¥ä¹Ÿå¾—è°ƒç”¨renderå‡½æ•°ã€‚ 1234567891011121314from requests_html import HTMLSessionheaders = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0'}session = HTMLSession()r = session.get('https://www.toutiao.com/c/user/6662330738/#mid=1620400303194116', headers=headers)r.html.render()for i in r.html.find('div.rbox-inner a'): title = i.text link = f'https://www.toutiao.com{i.attrs[\"href\"]}' print(f'ã€Š{title}ã€‹ {link}') æœ€åæ˜¯requests-htmlçš„å®˜ç½‘åœ°å€ä»¥åŠä¸­æ–‡æ–‡æ¡£ã€‚ 12https://html.python-requests.org/https://cncert.github.io/requests-html-doc-cn/ scrapyä»¥ä¸Šä»‹ç»çš„å‡ ä¸ªæ¡†æ¶éƒ½æ˜¯å„è‡ªæœ‰å„è‡ªçš„ä½œç”¨ï¼ŒæŠŠå®ƒä»¬ç»“åˆèµ·æ¥å¯ä»¥è¾¾åˆ°ç¼–å†™çˆ¬è™«çš„ç›®çš„ï¼Œä½†æ˜¯è¦è¯´ä¸“ä¸šçš„çˆ¬è™«æ¡†æ¶ï¼Œè¿˜æ˜¯å¾—è°ˆè°ˆscrapyã€‚ä½œä¸ºä¸€ä¸ªè‘—åçš„çˆ¬è™«æ¡†æ¶ï¼Œscrapyå°†çˆ¬è™«æ¨¡å‹æ¡†æ¶åŒ–å’Œæ¨¡å—åŒ–ï¼Œåˆ©ç”¨scrapyï¼Œæˆ‘ä»¬å¯ä»¥è¿…é€Ÿç”ŸæˆåŠŸèƒ½å¼ºå¤§çš„çˆ¬è™«ã€‚ä¸è¿‡scrapyæ¦‚å¿µä¼—å¤šï¼Œè¦ä»”ç»†è¯´è¿˜å¾—ä¸“é—¨å¼€ç¯‡æ–‡ç« ï¼Œè¿™é‡Œå°±åªç®€å•æ¼”ç¤ºä¸€ä¸‹ã€‚é¦–å…ˆå®‰è£…scrapyï¼Œå¦‚æœæ˜¯Windowsç³»ç»Ÿï¼Œè¿˜éœ€è¦å®‰è£…pypiwin32ã€‚ 12pip install scrapy pip install pypiwin32 ç„¶ååˆ›å»ºscrapyé¡¹ç›®å¹¶æ·»åŠ ä¸€ä¸ªæ–°çˆ¬è™«ã€‚ 123scrapy startproject myprojectcd myprojectscrapy genspider my jianshu.com æ‰“å¼€é…ç½®æ–‡ä»¶settings.pyï¼Œè®¾ç½®ç”¨æˆ·ä»£ç†ï¼Œå¦åˆ™ä¼šé‡åˆ°403é”™è¯¯ã€‚ 1USER_AGENT = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0' ç„¶åä¿®æ”¹ä¸€ä¸‹çˆ¬è™«ã€‚ 1234567891011121314# -*- coding: utf-8 -*-import scrapyclass JianshuSpider(scrapy.Spider): name = 'jianshu' allowed_domains = ['jianshu.com'] start_urls = ['https://www.jianshu.com/u/7753478e1554'] def parse(self, response): for article in response.css('div.content'): yield { 'title': article.css('a.title::text').get(), 'link': 'https://www.jianshu.com' + article.xpath('a[@class=\"title\"]/@href').get() } æœ€åè¿è¡Œä¸€ä¸‹çˆ¬è™«ã€‚ 1scrapy crawl my ğŸ‘‡","link":"/program/Python/spider/"},{"title":"ã€ŠPythonæœ­è®°ã€‹1_åˆ—è¡¨list","text":"å†™äºå¼€å§‹ä¹‹å‰ç¬”è€…å³å°†å¼€å§‹å†™ä¸€ä¸ªç³»åˆ—çš„ã€ŠPythonæœ­è®°ã€‹ã€‚æœ¬ç³»åˆ—çš„æœ­è®°ä¸»è¦æ˜¯è‡ªå­¦é½ä¼Ÿè€å¸ˆã€Šè·Ÿè€é½å­¦Pythonè½»æ¾å…¥é—¨ã€‹ä¸€ä¹¦æ•´ç†è€Œæ¥ã€‚ä¹¦ç¬¬ä¸€éæ–­æ–­ç»­ç»­èŠ±äº†5ä¸ªæœˆï¼Œç¬¬äºŒéè¾¹çœ‹è¾¹æ•´ç†ï¼Œä¿å®ˆ3ä¸ªæœˆã€‚ åœ¨æ­¤æ·±æ·±æ„Ÿè°¢é½ä¼Ÿè€å¸ˆå¸¦æˆ‘å…¥é—¨Pythonã€‚å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼Œæœ¬æœ­è®°çš„å­¦ä¹ ç¯å¢ƒä¸ºï¼šPython3.7.2 + pycharm + jupyter notebookï¼š Python3å–ä»£äº†Python2ï¼Œæˆä¸ºä¸»æµ é’ˆå¯¹Pythonè¯­è¨€ï¼ŒPycharmæ˜¯æœ€å¥½çš„IDE Jupyter notebookæ˜¯åˆ©ç”¨Pythonè¿›è¡Œæœºå™¨å­¦ä¹ çš„å¼ºå¤§åˆ©å™¨ æœ¬æœ­è®°ä¸€å®šä¼šåœ¨2ä¸ªæœˆä¹‹å†…å®Œæˆï¼Œä¸»è¦å†…å®¹åŒ…å«ï¼š å­¦ä¹ ç¬”è®°æ•´ç† ä»£ç å®æˆ˜ç»ƒä¹  å„ç§ç»ƒä¹ é¢˜ åˆ©ç”¨Pythonå®ç°å¸¸ç”¨ç®—æ³• æœºå™¨å­¦ä¹ _Pythonç®—æ³• å¸Œæœ›å¯¹Pythonæ„Ÿå…´è¶£çš„æœ‹å‹æœ‰æ‰€å¸®åŠ©ï¼Œè‡ªå·±ä¹Ÿåœ¨åŠªåŠ›å­¦ä¹ ä¸­ï¼Œå°†æ¥ä¸»è¦æ–¹å‘æ˜¯ï¼šæœºå™¨å­¦ä¹ +æ•°æ®æŒ–æ˜+é‡åŒ–æŠ•èµ„ è‰¯å¥½çš„å¼€å§‹æ˜¯æˆåŠŸçš„ä¸€åŠï¼Let`s go go go!!! åˆ—è¡¨æ˜¯Pythonä¸­ä½¿ç”¨éå¸¸å¹¿æ³›çš„ä¸€ç§å¯¹è±¡ï¼Œç”¨æ–¹æ‹¬å·[ ]æ¥è¡¨ç¤ºã€‚æ‹¬å·é‡Œé¢å¯ä»¥æ˜¯æ•°å­—ï¼Œå­—ç¬¦ä¸²æˆ–è€…Trueï¼ŒFalseçš„å¸ƒå°”å€¼ï¼Œæˆ–è€…æ˜¯å¤šç§ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œé‡Œé¢ä¹Ÿå¯ä»¥åµŒå¥—åˆ—è¡¨ã€‚å¦‚æœåˆ—è¡¨æ˜¯ç©ºçš„ï¼Œç”¨bool()æ¥è¿›è¡Œåˆ¤æ–­ï¼Œä¼šè¿”å› Falseã€‚ ä¸€ã€ç´¢å¼•ã€åˆ‡ç‰‡ã€åè½¬åˆ—è¡¨å’Œå­—ç¬¦ä¸²ä¸€æ ·ï¼Œéƒ½æ˜¯åºåˆ—ï¼Œé‡Œé¢çš„å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œä¹Ÿæœ‰ç´¢å¼•å’Œåˆ‡ç‰‡ã€‚ç´¢å¼•indexå·¦è¾¹ä»0å¼€å§‹ï¼Œå³è¾¹ä»-1å¼€å§‹ï¼Œindex()å‡½æ•°å¯ä»¥æŸ¥çœ‹æŸä¸ªå…ƒç´ çš„ç´¢å¼•ç¼–å·ã€‚ ç´¢å¼• å·¦è¾¹0å¼€å§‹ï¼Œå³è¾¹-1å¼€å§‹ é€šè¿‡index()å‡½æ•°æŸ¥çœ‹ç´¢å¼•ç¼–å· 12345# lang = ['python', 'java', 'html']# lang.index('python')0 # ç´¢å¼•ä»0å¼€å§‹# lang.index('html')2 åˆ‡ç‰‡ ç´¢å¼•å·¦è¾¹ä»0å¼€å§‹ï¼Œå³è¾¹-1å¼€å§‹ å«å¤´ä¸å«å°¾ æ­¥é•¿å¯æ­£å¯è´Ÿ 12345678910111213lst = [1, 2, 3, 4, 5, 6]print(lst[:]) # ç›¸å½“äºæ˜¯å¤åˆ¶ lst[1, 2, 3, 4, 5, 6]print(lst[::2]) # æ­¥é•¿æ˜¯2 [å¼€å§‹:ç»“æŸ:æ­¥é•¿][1, 3, 5]print(lst[-3:-1])lst = [1,2,3,4,5,6]print(lst[1:5:2]) # å¸¸è§„ç”¨æ³•print(lst[-5:-2:2]) # æ ‡å·-5ä»£è¡¨çš„æ˜¯å…ƒç´ 2ï¼Œæ ‡å·-2ä»£è¡¨çš„æ˜¯5ï¼Œæ­¥é•¿ä¸º2print(lst[-5:4:2])print(lst[1:-2:2])[2,4] åè½¬ é€šè¿‡æ­¥é•¿-1è¿›è¡Œåè½¬ï¼Œ[::-1] é€šè¿‡reversed()è¿›è¡Œåè½¬ï¼Œå¾—åˆ°çš„æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå¹¶ä¸”å°†è¿­ä»£å¯¹è±¡è½¬ä¸ºä¸ºåˆ—è¡¨æ˜¾ç¤º 123456789101112# åè½¬1print(lst[::-1]) # é€šè¿‡æ­¥é•¿ä¸º-1è¿›è¡Œåè½¬print(lst) # ä¸å½±å“åŸæ¥å¯¹è±¡[6, 5, 4, 3, 2, 1][1, 2, 3, 4, 5, 6]# åè½¬2print(list(reversed(lst))) # é€šè¿‡reversedå‡½æ•°è¿›è¡Œåè½¬[6,5,4,3,2,1]print(list(reversed('abcde'))) # å¯¹å­—ç¬¦ä¸²è¿›è¡Œåè½¬ï¼Œåˆ—è¡¨æ˜¾ç¤º['e', 'd', 'c', 'b', 'a'] äºŒã€æ“ä½œåˆ—è¡¨åŸºæœ¬æ“ä½œ len()ï¼šæ±‚é•¿åº¦ +ï¼šè¿æ¥ä¸¤ä¸ªåºåˆ— *ï¼šå¤åˆ¶åºåˆ— inï¼šåˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ max()ã€min()ï¼šæŒ‰ç…§å…ƒç´ çš„å­—å…¸é¡ºåºè¿›è¡Œæ’åº 1ã€ä¿®æ”¹å…ƒç´  åˆ—è¡¨ä¸­çš„å…ƒç´ å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯å­—ç¬¦ä¸²ä¸­çš„ä¸èƒ½è¿›è¡Œä¿®æ”¹ã€‚åˆ—è¡¨ä¸­ä¿®æ”¹çš„æ—¶å€™ï¼Œç›´æ¥é€šè¿‡ç´¢å¼•å·è¿›è¡ŒæŒ‡å®šï¼š 1234lst[2] = 7 # æŒ‡å®šç¬¬ä¸‰ä¸ªå…ƒç´ ä¸º7print(lst)[1, 2, 7, 4, 5, 6] 2ã€å¢åŠ å…ƒç´ è¿½åŠ å…ƒç´ çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œéƒ½æ˜¯è¿½åŠ åœ¨æœ«å°¾ append()å‡½æ•°è¿›è¡Œè¿½åŠ  åˆ‡ç‰‡çš„æ–¹å¼è¿›è¡Œè¿½åŠ ï¼ša[len(a):] = [ x ] 1234lst.append(8) lst[len(lst):] = [8]print(lst)[1, 2, 7, 4, 5, 6, 8] # ä¾‹å­æ‰¿æ¥ä¸Šé¢ï¼Œç¬¬ä¸‰ä¸ªå…ƒç´ ä¸º7ï¼Œä¸æ˜¯3 3ã€åˆ—è¡¨å‡½æ•° å‡½æ•° ä½œç”¨ append å°†å•ä¸ªå…ƒç´ è¿½åŠ åˆ°åˆ—è¡¨çš„æœ€å³è¾¹ï¼Œå³æœ«å°¾éƒ¨åˆ†ï¼›list[len(list):] = [x]ï¼Œxæ˜¯å¾…è¿½åŠ çš„å…ƒç´ ï¼› æ²¡æœ‰è¿”å›å€¼None extend å°†ä¸¤ä¸ªåˆ—è¡¨è¿›è¡Œåˆå¹¶ï¼Œæ‰©å……åˆ—è¡¨çš„ä½œç”¨ï¼› å‚æ•°å¿…é¡»æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼› list[len(list):] = Lï¼ŒLæ˜¯å¾…å¹¶å…¥çš„åˆ—è¡¨ï¼› å®Œæˆè¿½åŠ è¿‡ç¨‹ï¼Œåˆ—è¡¨Lä¸å˜ï¼Œlistå‘ç”Ÿå˜åŒ–ï¼› æ²¡æœ‰è¿”å›å€¼None insert æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´  æ ¼å¼ï¼šlist.insert(i,x)ï¼Œiæ˜¯æ’å…¥çš„ä½ç½®ï¼Œxæ˜¯å¾…è¿½åŠ å…ƒç´  ï¼› iå¦‚æœæ˜¯0ï¼Œç›¸å½“äºæ˜¯æ’åœ¨é¦–ä½ï¼›iå¦‚æœæ˜¯len(list)ï¼Œç›¸å½“äºæ˜¯æ’åœ¨æœ€åé¢ï¼Œåˆ™ç­‰ä»·äºappend()å‡½æ•° 1234567891011121314151617181920212223242526# extend()å‡½æ•°lst = [1, 2, 7, 4, 5, 6, 8]print(id(lst)) # æŸ¥çœ‹lstçš„å†…å­˜åœ°å€lst1 = ['python', 'java', 'html']lst.extend(lst1)print(id(lst)) # æŸ¥çœ‹è¿½åŠ åˆ—è¡¨ä¹‹åçš„å†…å­˜åœ°å€ï¼Œä¸åŸæ¥ç³»ç›¸åŒçš„print(\"lst:\", lst)print(\"lst1:\", lst1)24353342649682435334264968lst: [1, 2, 7, 4, 5, 6, 8, 'python', 'java', 'html']lst1: ['python', 'java', 'html']# appendä¸extendåŒºåˆ«lst1 = [1, 2, 3]lst2 = ['python', 'html', 'java']lst1.append(lst2)print(lst1)[1, 2, 3, ['python', 'html', 'java']] # æ•´å»ºåˆ¶ï¼Œå°†lst2å½“åšä¸€ä¸ªæ•´ä½“lst1 = [1, 2, 3]lst2 = ['python', 'html', 'java']lst1.extend(lst2)print(lst1)[1, 2, 3, 'python', 'html', 'java'] # ä¸ªä½“åŒ–ï¼Œå°†lst2çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè¿½åŠ  ç»“è®ºï¼š åˆ—è¡¨æ˜¯å¯ä»¥è¿›è¡Œä¿®æ”¹çš„ï¼ŒåŸåœ°ä¿®æ”¹ appendæ˜¯å°†ä¸€ä¸ªå…ƒç´ åŠ åˆ°åˆ—è¡¨çš„æœ«å°¾ï¼Œæ•´å»ºåˆ¶è¿½åŠ  extendå°†ä¸¤ä¸ªåˆ—è¡¨è¿›è¡Œåˆå¹¶ï¼Œä¸ªä½“åŒ–æ‰©ç¼– extendæ–¹æ³•æ‰§è¡Œä¹‹åï¼Œå†…å­˜ä¸­idä¸å˜ï¼Œåªæ˜¯åœ¨è¯¥idä¸Šçš„å†…å®¹å‘ç”Ÿäº†å˜åŒ– insert()å‡½æ•°ä¸­çš„iå¦‚æœè¶…è¿‡æœ€å¤§ç´¢å¼•å€¼ï¼Œåˆ™è‡ªåŠ¨è¿½åŠ åˆ°æœ«å°¾ï¼Œç›¸å½“äºæ˜¯append()å‡½æ•°çš„ä½œç”¨ ä¸‰ç§æ–¹æ³•å‡æ˜¯åŸåœ°ä¿®æ”¹ï¼Œæ— è¿”å›å€¼ å‡½æ•° ä½œç”¨ count æŸ¥çœ‹å…ƒç´ é‡å¤å‡ºç°çš„æ¬¡æ•° å¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›0ï¼Œè€Œä¸æ˜¯æŠ¥é”™ index æŸ¥çœ‹ç´¢å¼•ç¼–å·ï¼Œä¸å­˜åœ¨åˆ™æŠ¥é”™ æ£€ç´¢çš„æ˜¯å…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½® remove åˆ é™¤å…ƒç´ ï¼ŒåŸåœ°ä¿®æ”¹ï¼Œæ— è¿”å›å€¼ï¼› list.remove(x)ï¼šå¦‚æœxä¸å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥é”™ï¼› å¦‚æœxå‡ºç°å¤šæ¬¡ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªxï¼Œå‰©ä¸‹ä¸å˜ pop pop([i]):å‚æ•°æ˜¯å¯é€‰çš„ï¼› ä¸ºç©ºï¼Œé»˜è®¤åˆ é™¤æœ€åä¸€ä¸ªï¼Œå¹¶ä¸”å°†è¯¥å…ƒç´ ä½œä¸ºè¿”å›å€¼ï¼› å¦‚æœä¸ä¸ºç©ºï¼Œå¯åˆ é™¤ç´¢å¼•ä¸ºiçš„å…ƒç´ ï¼Œå¹¶ä¸”å°†è¯¥å…ƒç´ ä½œä¸ºè¿”å›å€¼ reverse åŸåœ°åè½¬ï¼Œæ²¡æœ‰ç”Ÿæˆæ–°çš„åˆ—è¡¨ï¼Œæ²¡æœ‰è¿”å›å€¼ reversed ç±»ä¼¼reverseï¼ŒåŒºåˆ«ï¼šç”Ÿæˆçš„åˆ—è¡¨èƒ½å¤Ÿç”¨äºè¿­ä»£ removeå’Œpopçš„åŒºåˆ« remove æ²¡æœ‰è¿”å›å€¼ï¼Œpopæœ‰è¿”å›å€¼ removeçš„å‚æ•°æ˜¯å…ƒç´ ï¼Œpopçš„å‚æ•°æ˜¯ç´¢å¼• 1234567891011121314151617181920lst1 = [1, 2, 3, 4, 5, 6]lst1.remove(2)print(lst1)# lst1.remove(7)# print(lst1) ValueError: list.remove(x): x not in listlst1.pop(2)print(lst1)[1, 3, 4, 5, 6] # å°†å…ƒç´ 2åˆ é™¤æ‰[1, 3, 5, 6] # å°†ç´¢å¼•ä¸º2çš„å…ƒç´ 3åˆ é™¤æ‰ï¼Œæœ¬æ­¥éª¤æ˜¯æ¥åœ¨ä¸Šé¢çš„æ‰§è¡Œï¼Œå³åœ¨åˆ—è¡¨[1, 3, 4, 5, 6] ä¸­åˆ é™¤4# å…³äºåè½¬lst = [1, 2, 3, 4, 5]print(lst[::-1]) # åè½¬å®ç°1print(lst) # åŸæ¥çš„åˆ—è¡¨å¯¹è±¡ä¸æ”¹å˜lst.reverse() # åè½¬å®ç°2print(lst) # åŸæ¥çš„åˆ—è¡¨å˜æˆåè½¬ä¹‹åçš„æ–°åˆ—è¡¨lst1= reversed(lst)print(lst1) # lst1æ˜¯ä¸€ä¸ªåˆ—è¡¨åè½¬è¿­ä»£å™¨å¯¹è±¡ï¼š&lt;list_reverseiterator object at 0x00000233C677F320&gt;print(list(lst1)) # ç”¨listå‡½æ•°æ˜¾ç¤ºlst1çš„å†…å®¹ å‡½æ•° ä½œç”¨ sort æ’åºå‡½æ•°ï¼Œç”¨äºåˆ—è¡¨listä¸­ï¼ŒåŸåœ°ä¿®æ”¹æ²¡æœ‰è¿”å›å€¼ï¼› é»˜è®¤ä»å°åˆ°å¤§ï¼›å°†reverse=Trueåˆ™å˜æˆä»å¤§åˆ°å°æ’åºsort(self, /, *, key=None, reverse=False) sorted å¯¹æ‰€æœ‰å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ listï¼Œä¸æ˜¯åœ¨åŸæ¥çš„listä¸Šè¿›è¡Œæ“ä½œ sorted(iterable[, cmp[, key[, reverse]]]) 12345678910111213141516171819202122232425# sort()lst = [1, 4, 5, 8, 2, 6, 3]lst.sort()print(lst)lst1 = ['python', â€˜Javaâ€™, 'html', 'c', 'php']lst1.sort(key=len) # åˆ—è¡¨ä¸­çš„å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼›å¦‚æœé•¿åº¦ç›¸åŒï¼Œåˆ™æŒ‰ç…§å‡ºç°çš„å…ˆåé¡ºåºprint(lst1)[1, 2, 3, 4, 5, 6, 8]['c', 'php', 'Java', 'html', 'python']# sorted()lst = [1, 4, 5, 8, 2, 6, 3]lst1 = sorted(lst)print(lst) # åŸå¯¹è±¡ä¸å˜print(lst1) # æ–°åˆ—è¡¨ä¸ºæ’åºåçš„å¯¹è±¡lst2 =[('python', 'A'),('java', 'C'),('c', 'D'),('php', 'B')]lst3 = sorted(lst2, key=lambda x: x[1]) # ç”±å…ƒç»„æ„æˆçš„å¤åˆåˆ—è¡¨ï¼ŒæŒ‰ç…§å…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ è¿›è¡Œæ’åºï¼Œé€šè¿‡åŒ¿åå‡½æ•°lamba()print(lst3)[('python', 'A'), ('php', 'B'), ('java', 'C'), ('c', 'D')]lst4 = sorted(lst2, key=lambda x: len(x[0])) # é€šè¿‡å…ƒç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„é•¿åº¦è¿›è¡Œæ’åºprint(lst4)[('c', 'D'), ('php', 'B'), ('java', 'C'), ('python', 'A')] è‡ªå®šä¹‰ç±»ä¸­çš„å…ƒç´ è¿›è¡Œæ’åº1234567891011121314151617181920212223class Student: def __init__(self, name, age, grade): self.name = name self.age = age self.grade = grade def __repr__(self): return repr((self.name, self.grade, self.age)) students_objects = [ Student('Tom', 'B', 12), Student('xiaoming','A',17), Student('xiaohong', 'C', 12), Student('Peter', 'D', 8),]lst5 = sorted(students_objects, key=lambda t:t.age) # è‡ªå®šä¹‰ç±»ä¸­ï¼ŒæŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åºprint(lst5)lst6 = sorted(students_objects, key=lambda t:(t.age, t.grade)) # ä½¿ç”¨å…ƒç»„ï¼Œå…ˆæ ¹æ®å¹´é¾„æ’åºï¼Œè‹¥å¹´é¾„ç›¸åŒæŒ‰ç…§gradeæ’åºprint(lst6)[('xiaoming', 17, 'A'), ('Tom', 12, 'B'), ('xiaohong', 12, 'C'), ('Peter', 8, 'D')][('xiaoming', 17, 'A'), ('Tom', 12, 'B'), ('xiaohong', 12, 'C'), ('Peter', 8, 'D')] åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/program/Python/python3-notes01/"},{"title":"3D touch","text":"","link":"/program/ï£¿/3Dtouch/"},{"title":"é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹","text":"æœ¬æ–‡å¯¹åº” Demo ä»¥åŠ Markdown æ–‡ä»¶åœ¨ä»“åº“ä¸­ï¼Œæ–‡ä¸­çš„é”™è¯¯å¯ä»¥æ PR åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ”¹ã€‚ ç›®å½• é¿å…ä½¿ç”¨ GCD Globalé˜Ÿåˆ—åˆ›å»ºRunloopå¸¸é©»çº¿ç¨‹ GCD Globalé˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œçš„é£é™© é¿å…ä½¿ç”¨ GCD Global é˜Ÿåˆ—åˆ›å»º Runloop å¸¸é©»çº¿ç¨‹ å•ä¸€ Runloop å¸¸é©»çº¿ç¨‹ å¤šä¸ª Runloop å¸¸é©»çº¿ç¨‹ GCD Globalé˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œçš„é£é™©å…ˆæ€è€ƒä¸‹å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š æ–°å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿå„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ dispatch_async å‡½æ•°åˆ†å‘åˆ°å…¨å±€é˜Ÿåˆ—ä¸€å®šä¼šæ–°å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ä¹ˆï¼Ÿ å¦‚æœå…¨å±€é˜Ÿåˆ—å¯¹åº”çš„çº¿ç¨‹æ± å¦‚æœæ»¡äº†ï¼Œåç»­çš„æ´¾å‘çš„ä»»åŠ¡ä¼šæ€ä¹ˆå¤„ç½®ï¼Ÿæœ‰ä»€ä¹ˆé£é™©ï¼Ÿ ç­”æ¡ˆå¤§è‡´æ˜¯è¿™æ ·çš„ï¼šdispatch_async å‡½æ•°åˆ†å‘åˆ°å…¨å±€é˜Ÿåˆ—ä¸ä¸€å®šä¼šæ–°å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå…¨å±€é˜Ÿåˆ—åº•å±‚æœ‰ä¸€ä¸ªçš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± æ»¡äº†ï¼Œé‚£ä¹ˆåç»­çš„ä»»åŠ¡ä¼šè¢« block ä½ï¼Œç­‰å¾…å‰é¢çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹é•¿æ—¶é—´ä¸ç»“æŸï¼Œåç»­å †ç§¯çš„ä»»åŠ¡ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ­¤æ—¶å°±ä¼šå­˜åœ¨ APP crashçš„é£é™©ã€‚ æ¯”å¦‚ï¼š 12345678910111213- (void)dispatchTest1 { for (NSInteger i = 0; i&lt; 10000 ; i++) {dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ [self dispatchTask:i]; }); }}- (void)dispatchTask:(NSInteger)index { //æ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼Œæ¯”å¦‚DB,ç½‘ç»œï¼Œæ–‡ä»¶è¯»å†™ç­‰ç­‰ sleep(30); NSLog(@&quot;----:%ld&quot;,index);} ä»¥ä¸Šé€»è¾‘ç”¨çœŸæœºæµ‹è¯•ä¼šæœ‰å¡æ­»çš„å‡ ç‡ï¼Œå¹¶éæ¯æ¬¡éƒ½ä¼šå‘ç”Ÿï¼Œä½†å¤šå°è¯•å‡ æ¬¡å°±ä¼šå¤ç°ï¼Œä¼´éšå‰åå°åˆ‡æ¢ï¼Œcrashå‡ ç‡å¢å¤§ã€‚ ä¸‹é¢åšä¸€ä¸‹åˆ†æï¼š å‚çœ‹ GCD æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¨å±€é˜Ÿåˆ—çš„ç›¸å…³æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586 DISPATCH_NOINLINEstatic void_dispatch_queue_wakeup_global_slow(dispatch_queue_t dq, unsigned int n){ dispatch_root_queue_context_t qc = dq-&gt;do_ctxt; uint32_t i = n; int r; _dispatch_debug_root_queue(dq, __func__); dispatch_once_f(&amp;_dispatch_root_queues_pred, NULL, _dispatch_root_queues_init);#if HAVE_PTHREAD_WORKQUEUES#if DISPATCH_USE_PTHREAD_POOL if (qc-&gt;dgq_kworkqueue != (void*)(~0ul))#endif { _dispatch_root_queue_debug(\"requesting new worker thread for global \" \"queue: %p\", dq);#if DISPATCH_USE_LEGACY_WORKQUEUE_FALLBACK if (qc-&gt;dgq_kworkqueue) { pthread_workitem_handle_t wh; unsigned int gen_cnt; do { r = pthread_workqueue_additem_np(qc-&gt;dgq_kworkqueue, _dispatch_worker_thread4, dq, &amp;wh, &amp;gen_cnt); (void)dispatch_assume_zero(r); } while (--i); return; }#endif // DISPATCH_USE_LEGACY_WORKQUEUE_FALLBACK#if HAVE_PTHREAD_WORKQUEUE_SETDISPATCH_NP if (!dq-&gt;dq_priority) { r = pthread_workqueue_addthreads_np(qc-&gt;dgq_wq_priority, qc-&gt;dgq_wq_options, (int)i); (void)dispatch_assume_zero(r); return; }#endif#if HAVE_PTHREAD_WORKQUEUE_QOS r = _pthread_workqueue_addthreads((int)i, dq-&gt;dq_priority); (void)dispatch_assume_zero(r);#endif return; }#endif // HAVE_PTHREAD_WORKQUEUES#if DISPATCH_USE_PTHREAD_POOL dispatch_pthread_root_queue_context_t pqc = qc-&gt;dgq_ctxt; if (fastpath(pqc-&gt;dpq_thread_mediator.do_vtable)) { while (dispatch_semaphore_signal(&amp;pqc-&gt;dpq_thread_mediator)) { if (!--i) { return; } } } uint32_t j, t_count; // seq_cst with atomic store to tail &lt;rdar://problem/16932833&gt; t_count = dispatch_atomic_load2o(qc, dgq_thread_pool_size, seq_cst); do { if (!t_count) { _dispatch_root_queue_debug(\"pthread pool is full for root queue: \" \"%p\", dq); return; } j = i &gt; t_count ? t_count : i; } while (!dispatch_atomic_cmpxchgvw2o(qc, dgq_thread_pool_size, t_count, t_count - j, &amp;t_count, acquire)); pthread_attr_t *attr = &amp;pqc-&gt;dpq_thread_attr; pthread_t tid, *pthr = &amp;tid;#if DISPATCH_ENABLE_PTHREAD_ROOT_QUEUES if (slowpath(dq == &amp;_dispatch_mgr_root_queue)) { pthr = _dispatch_mgr_root_queue_init(); }#endif do { _dispatch_retain(dq); while ((r = pthread_create(pthr, attr, _dispatch_worker_thread, dq))) { if (r != EAGAIN) { (void)dispatch_assume_zero(r); } _dispatch_temporary_resource_shortage(); } } while (--j);#endif // DISPATCH_USE_PTHREAD_POOL} å¯¹äºæ‰§è¡Œçš„ä»»åŠ¡æ¥è¯´ï¼Œæ‰€æ‰§è¡Œçš„çº¿ç¨‹å…·ä½“æ˜¯å“ªä¸ªçº¿ç¨‹ï¼Œåˆ™æ˜¯é€šè¿‡ GCD çš„çº¿ç¨‹æ± ï¼ˆThread Poolï¼‰æ¥è¿›è¡Œè°ƒåº¦ï¼Œæ­£å¦‚Concurrent Programming: APIs and Challengesæ–‡ç« é‡Œç»™çš„ç¤ºæ„å›¾æ‰€ç¤ºï¼š ä¸Šé¢è´´çš„æºç ï¼Œæˆ‘ä»¬å…³æ³¨å¦‚ä¸‹çš„éƒ¨åˆ†ï¼š å…¶ä¸­æœ‰ä¸€ä¸ªç”¨æ¥è®°å½•çº¿ç¨‹æ± å¤§å°çš„å­—æ®µ dgq_thread_pool_sizeã€‚è¿™ä¸ªå­—æ®µæ ‡è®°ç€GCDçº¿ç¨‹æ± çš„å¤§å°ã€‚æ‘˜å½•ä¸Šé¢æºç çš„ä¸€éƒ¨åˆ†ï¼š 123456789101112 uint32_t j, t_count;// seq_cst with atomic store to tail &lt;rdar://problem/16932833&gt;t_count = dispatch_atomic_load2o(qc, dgq_thread_pool_size, seq_cst);do { if (!t_count) { _dispatch_root_queue_debug(\"pthread pool is full for root queue: \" \"%p\", dq); return; } j = i &gt; t_count ? t_count : i;} while (!dispatch_atomic_cmpxchgvw2o(qc, dgq_thread_pool_size, t_count, t_count - j, &amp;t_count, acquire)); ä»æºç ä¸­æˆ‘ä»¬å¯ä»¥å¯¹åº”åˆ°å®˜æ–¹æ–‡æ¡£ ï¼šGetting the Global Concurrent Dispatch Queuesé‡Œçš„è¯´æ³•ï¼š A concurrent dispatch queue is useful when you have multiple tasks that can run in parallel. A concurrent queue is still a queue in that it dequeues tasks in a first-in, first-out order; however, a concurrent queue may dequeue additional tasks before any previous tasks finish. The actual number of tasks executed by a concurrent queue at any given moment is variable and can change dynamically as conditions in your application change. Many factors affect the number of tasks executed by the concurrent queues, including the number of available cores, the amount of work being done by other processes, and the number and priority of tasks in other serial dispatch queues. ä¹Ÿå°±æ˜¯è¯´ï¼š å…¨å±€é˜Ÿåˆ—çš„åº•å±‚æ˜¯ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå‘å…¨å±€é˜Ÿåˆ—ä¸­æäº¤çš„ blockï¼Œéƒ½ä¼šè¢«æ”¾åˆ°è¿™ä¸ªçº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œå¦‚æœçº¿ç¨‹æ± å·²æ»¡ï¼Œåç»­å†æäº¤ block å°±ä¸ä¼šå†é‡æ–°åˆ›å»ºçº¿ç¨‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Demo ä¼šé€ æˆå¡é¡¿ç”šè‡³å†»å±çš„åŸå› ã€‚ é¿å…ä½¿ç”¨ GCD Global é˜Ÿåˆ—åˆ›å»º Runloop å¸¸é©»çº¿ç¨‹åœ¨åšç½‘è·¯è¯·æ±‚æ—¶æˆ‘ä»¬å¸¸å¸¸åˆ›å»ºä¸€ä¸ª Runloop å¸¸é©»çº¿ç¨‹ç”¨æ¥æ¥æ”¶ã€å“åº”åç»­çš„æœåŠ¡ç«¯å›æ‰§ï¼Œæ¯”å¦‚NSURLConnectionã€AFNetworkingç­‰ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ç§°è¿™ç§çº¿ç¨‹ä¸º Runloop å¸¸é©»çº¿ç¨‹ã€‚ æ­£å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œç”¨ GCD Global é˜Ÿåˆ—åˆ›å»ºçº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œæ˜¯å­˜åœ¨é£é™©çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸‹ï¼Œå¦‚æœè¿™ä¸ªè€—æ—¶æ“ä½œå˜æˆäº† runloop å¸¸é©»çº¿ç¨‹ï¼Œä¼šæ˜¯ä»€ä¹ˆç»“æœï¼Ÿä¸‹é¢åšä¸€ä¸‹åˆ†æï¼š å…ˆä»‹ç»ä¸‹ Runloop å¸¸é©»çº¿ç¨‹çš„åŸç†ï¼Œåœ¨å¼€å‘ä¸­ä¸€èˆ¬æœ‰ä¸¤ç§ç”¨æ³•ï¼š å•ä¸€ Runloop å¸¸é©»çº¿ç¨‹ï¼šåœ¨ APP çš„ç”Ÿå‘½å‘¨æœŸä¸­å¼€å¯äº†å”¯ä¸€çš„å¸¸é©»çº¿ç¨‹æ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œå¸¸ç”¨äºç½‘ç»œåº“ï¼Œæˆ–è€…æœ‰ç»´æŒé•¿è¿æ¥éœ€æ±‚çš„åº“ï¼Œæ¯”å¦‚ï¼š AFNetworking ã€ SocketRocketã€‚ å¤šä¸ª Runloop å¸¸é©»çº¿ç¨‹ï¼šæ¯è¿›è¡Œä¸€æ¬¡ç½‘ç»œè¯·æ±‚å°±å¼€å¯ä¸€æ¡ Runloop å¸¸é©»çº¿ç¨‹ï¼Œè¿™æ¡çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸçš„èµ·ç‚¹æ˜¯ç½‘ç»œè¯·æ±‚å¼€å§‹ï¼Œç»ˆç‚¹æ˜¯ç½‘ç»œè¯·æ±‚ç»“æŸï¼Œæˆ–è€…ç½‘ç»œè¯·æ±‚è¶…æ—¶ã€‚ å•ä¸€ Runloop å¸¸é©»çº¿ç¨‹å…ˆè¯´ç¬¬ä¸€ç§ç”¨æ³•ï¼š ä»¥ AFNetworking ä¸ºä¾‹ï¼ŒAFURLConnectionOperation è¿™ä¸ªç±»æ˜¯åŸºäº NSURLConnection æ„å»ºçš„ï¼Œå…¶å¸Œæœ›èƒ½åœ¨åå°çº¿ç¨‹æ¥æ”¶ Delegate å›è°ƒã€‚ä¸ºæ­¤ AFNetworking å•ç‹¬åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­å¯åŠ¨äº†ä¸€ä¸ª RunLoopï¼š 123456789101112131415161718+ (void)networkRequestThreadEntryPoint:(id)__unused object { @autoreleasepool { [[NSThread currentThread] setName:@&quot;AFNetworking&quot;]; NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; [runLoop run]; }} + (NSThread *)networkRequestThread { static NSThread *_networkRequestThread = nil; static dispatch_once_t oncePredicate; dispatch_once(&amp;oncePredicate, ^{ _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil]; [_networkRequestThread start]; }); return _networkRequestThread;} å¤šä¸ª Runloop å¸¸é©»çº¿ç¨‹ç¬¬äºŒç§ç”¨æ³•ï¼Œæˆ‘å†™äº†ä¸€ä¸ªå° Demo æ¥æ¨¡æ‹Ÿè¿™ç§åœºæ™¯ï¼Œ æˆ‘ä»¬æ¨¡æ‹Ÿäº†ä¸€ä¸ªåœºæ™¯ï¼šå‡è®¾æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚å…¨éƒ¨è¶…æ—¶ï¼Œæˆ–è€…æœåŠ¡ç«¯æ ¹æœ¬ä¸å“åº”ï¼Œç„¶åç½‘ç»œåº“è¶…æ—¶æ£€æµ‹æœºåˆ¶çš„åšæ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#import &quot;Foo.h&quot;@interface Foo() { NSRunLoop *_runloop; NSTimer *_timeoutTimer; NSTimeInterval _timeoutInterval; dispatch_semaphore_t _sem;}@end@implementation Foo- (instancetype)init { if (!(self = [super init])) { return nil; } _timeoutInterval = 1 ; _sem = dispatch_semaphore_create(0); // Do any additional setup after loading the view, typically from a nib. return self;}- (id)test { // ç¬¬ä¸€ç§æ–¹å¼ï¼š // NSThread *networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint0:) object:nil]; // [networkRequestThread start]; //ç¬¬äºŒç§æ–¹å¼: dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) { [self networkRequestThreadEntryPoint0:nil]; }); dispatch_semaphore_wait(_sem, DISPATCH_TIME_FOREVER); return @(YES);}- (void)networkRequestThreadEntryPoint0:(id)__unused object { @autoreleasepool { [[NSThread currentThread] setName:@&quot;CYLTest&quot;]; _runloop = [NSRunLoop currentRunLoop]; [_runloop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; _timeoutTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(stopLoop) userInfo:nil repeats:NO]; [_runloop addTimer:_timeoutTimer forMode:NSRunLoopCommonModes]; [_runloop run];//åœ¨å®é™…å¼€å‘ä¸­æœ€å¥½ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç¡®ä¿èƒ½runloopé€€å‡ºï¼ŒåšåŒé‡çš„ä¿éšœ[runloop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:(timeoutInterval+5)]]; }}- (void)stopLoop { CFRunLoopStop([_runloop getCFRunLoop]); dispatch_semaphore_signal(_sem);}@end å¦‚æœ 123456for (int i = 0; i &lt; 300 ; i++) { dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) { [[Foo new] test]; NSLog(@&quot;ğŸ”´ç±»åä¸æ–¹æ³•åï¼š%@ï¼ˆåœ¨ç¬¬%@è¡Œï¼‰ï¼Œæè¿°ï¼š%@&quot;, @(__PRETTY_FUNCTION__), @(__LINE__), @&quot;&quot;); }); } ä»¥ä¸Šé€»è¾‘ç”¨çœŸæœºæµ‹è¯•ä¼šæœ‰å¡æ­»çš„å‡ ç‡ï¼Œå¹¶éæ¯æ¬¡éƒ½ä¼šå‘ç”Ÿï¼Œä½†å¤šå°è¯•å‡ æ¬¡å°±ä¼šå¤ç°ï¼Œä¼´éšå‰åå°åˆ‡æ¢ï¼Œcrashå‡ ç‡å¢å¤§ã€‚ å…¶ä¸­æˆ‘ä»¬é‡‡ç”¨äº† GCD å…¨å±€é˜Ÿåˆ—çš„æ–¹å¼æ¥åˆ›å»ºå¸¸é©»çº¿ç¨‹ï¼Œå› ä¸ºåœ¨åˆ›å»ºæ—¶å¯èƒ½å·²ç»å‡ºç°äº†å…¨å±€é˜Ÿåˆ—çš„çº¿ç¨‹æ± æ»¡äº†çš„æƒ…å†µï¼Œæ‰€ä»¥ GCD æ´¾å‘çš„ä»»åŠ¡ï¼Œæ— æ³•æ‰§è¡Œï¼Œè€Œä¸”æˆ‘ä»¬æŠŠè¶…æ—¶æ£€æµ‹çš„é€»è¾‘æ”¾è¿›äº†è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œæ‰€ä»¥å¯¼è‡´çš„æƒ…å†µå°±æ˜¯ï¼Œæœ‰å¾ˆå¤šä»»åŠ¡çš„è¶…æ—¶æ£€æµ‹åŠŸèƒ½å¤±æ•ˆäº†ã€‚æ­¤æ—¶å°±åªèƒ½ä¾èµ–äºæœåŠ¡ç«¯å“åº”æ¥ç»“æŸè¯¥ä»»åŠ¡ï¼ˆæœåŠ¡ç«¯å“åº”èƒ½ç»“æŸè¯¥ä»»åŠ¡çš„é€»è¾‘åœ¨ Demo ä¸­æœªç»™å‡ºï¼‰ï¼Œä½†æ˜¯å¦‚æœå†åŠ ä¹‹æœåŠ¡ç«¯ä¸å“åº”ï¼Œé‚£ä¹ˆä»»åŠ¡å°±æ°¸è¿œä¸ä¼šç»“æŸã€‚åç»­çš„ç½‘ç»œè¯·æ±‚ä¹Ÿä¼šå°±æ­¤ block ä½ï¼Œé€ æˆ crashã€‚ å¦‚æœæˆ‘ä»¬æŠŠ GCD å…¨å±€é˜Ÿåˆ—æ¢æˆ NSThread çš„æ–¹å¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯æ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚ æ³¨æ„ï¼šæ–‡ç« ä¸­åªæ¼”ç¤ºçš„æ˜¯è¶…æ—¶ cancel runloop çš„æ“ä½œï¼Œå®é™…é¡¹ç›®ä¸­ä¸€å®šæœ‰å…¶ä»–ä¸»åŠ¨ cancel runloop çš„æ“ä½œï¼Œå°±æ¯”å¦‚ç½‘ç»œè¯·æ±‚æˆåŠŸæˆ–å¤±è´¥åéœ€è¦è¿›è¡Œcancelæ“ä½œã€‚ä»£ç ä¸­æ²¡æœ‰å±•ç¤ºç½‘ç»œè¯·æ±‚æˆåŠŸæˆ–å¤±è´¥åçš„ cancel æ“ä½œã€‚ Demo çš„è¿™ç§æ¨¡æ‹Ÿå¯èƒ½æ¯”è¾ƒæç«¯ï¼Œä½†æ˜¯å¦‚æœä½ ç»´æŠ¤çš„æ˜¯ä¸€ä¸ªåƒ AFNetworking è¿™æ ·çš„ä¸€ä¸ªç½‘ç»œåº“ï¼Œä½ ä¼šæ”¾å¿ƒæŠŠåˆ›å»ºå¸¸é©»çº¿ç¨‹è¿™æ ·çš„æ“ä½œäº¤ç»™ GCD å…¨å±€é˜Ÿåˆ—å—ï¼Ÿå› ä¸ºæ•´ä¸ª APP æ˜¯åœ¨å…±äº«ä¸€ä¸ªå…¨å±€é˜Ÿåˆ—çš„çº¿ç¨‹æ± ï¼Œé‚£ä¹ˆå¦‚æœ APP æŠŠçº¿ç¨‹æ± æ²¾æ»¡äº†ï¼Œç”šè‡³çº¿ç¨‹æ± é•¿æ—¶é—´å æ»¡ä¸”ä¸ç»“æŸï¼Œé‚£ä¹ˆ AFNetworking å°±è‡ªç„¶ä¸èƒ½å†æ‰§è¡Œä»»åŠ¡äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°ï¼Œå³ä½¿æ˜¯åªä¼šåˆ›å»ºä¸€æ¡å¸¸é©»çº¿ç¨‹ï¼Œ AFNetworking ä¾ç„¶é‡‡ç”¨äº† NSThread çš„æ–¹å¼è€Œé GCD å…¨å±€é˜Ÿåˆ—è¿™ç§æ–¹å¼ã€‚ æ³¨é‡Šï¼šä»¥ä¸‹æ–¹æ³•å­˜åœ¨äºè€ç‰ˆæœ¬AFN 2.x ä¸­ã€‚ 123456789101112131415161718+ (void)networkRequestThreadEntryPoint:(id)__unused object { @autoreleasepool { [[NSThread currentThread] setName:@&quot;AFNetworking&quot;]; NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; [runLoop run]; }} + (NSThread *)networkRequestThread { static NSThread *_networkRequestThread = nil; static dispatch_once_t oncePredicate; dispatch_once(&amp;oncePredicate, ^{ _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil]; [_networkRequestThread start]; }); return _networkRequestThread;} æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªåº“ä¼šç”¨ GCD å…¨å±€é˜Ÿåˆ—æ¥åˆ›å»ºå¸¸é©»çº¿ç¨‹ï¼Œè€Œä½ ä¹Ÿåº”è¯¥ é¿å…ä½¿ç”¨ GCD Global é˜Ÿåˆ—æ¥åˆ›å»º Runloop å¸¸é©»çº¿ç¨‹ã€‚ Posted by å¾®åš@iOSç¨‹åºçŠ­è¢åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | Creative Commons BY-NC-ND 3.0","link":"/program/ï£¿/GCD-Global/"},{"title":"KVO crash è‡ªä¿®å¤æŠ€æœ¯å®ç°ä¸åŸç†è§£æ","text":"å‰è¨€ ã€å‰è¨€ã€‘KVO APIè®¾è®¡éå¸¸ä¸åˆç†ï¼Œäºæ˜¯æœ‰å¾ˆå¤šçš„KVOä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ KVOController ç”¨æ›´ä¼˜çš„APIæ¥è§„é¿è¿™äº›crashï¼Œä½†æ˜¯ä¾µå…¥æ€§æ¯”è¾ƒå¤§ï¼Œå¿…é¡»ç¼–ç è§„èŒƒæ¥çº¦æŸæ‰€æœ‰äººéƒ½è¦ä½¿ç”¨è¯¥æ–¹å¼ã€‚æœ‰æ²¡æœ‰ä»€ä¹ˆæ›´ä¼˜é›…ï¼Œæ— æ„ŸçŸ¥çš„æ¥å…¥æ–¹å¼ï¼Ÿ ç®€ä»‹ KVO crash ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ Crash ç±»å‹ï¼Œåœ¨æ¢è®¨ KVO crash åŸå› å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¼ ç»Ÿçš„KVOå†™å‘ï¼š 12345678910111213141516171819202122232425262728#warning move this to top of .m file//#define MyKVOContext(A) static void * const A = (void*)&amp;A;static void * const MyContext = (void*)&amp;MyContext;#warning move this to viewdidload or init method // KVOæ³¨å†Œç›‘å¬: // _A ç›‘å¬ _B çš„ @&quot;keyPath&quot; å±æ€§ //[self.B addObserver: self.A forKeyPath:@&quot;keyPath&quot; options:NSKeyValueObservingOptionNew context:MyContext];- (void)dealloc { // KVOåæ³¨å†Œ [_B removeObserver:_A forKeyPath:@&quot;keyPath&quot;];}// KVOç›‘å¬æ‰§è¡Œ #warning â€” please move this method to the class of _A - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context { if(context != MyContext) { [super observeValueForKeyPath:keyPath ofObject:object change:change context:context]; return; } if(context == MyContext) { //if ([keyPath isEqualToString:@&quot;keyPath&quot;]) { id newKey = change[NSKeyValueChangeNewKey]; BOOL boolValue = [newKey boolValue]; }} çœ‹åˆ°å¦‚ä¸Šçš„å†™å‘ï¼Œå¤§æ¦‚æˆ‘ä»¬å°±æ˜ç™½äº† API è®¾è®¡ä¸åˆç†çš„åœ°æ–¹ï¼š B éœ€è¦åšçš„å·¥ä½œå¤ªå¤šï¼ŒBå¯èƒ½å¼•èµ·Crashçš„ç‚¹ä¹Ÿå¤ªå¤šï¼š B éœ€è¦ä¸»åŠ¨ç§»é™¤ç›‘å¬è€…çš„æ—¶æœºï¼Œå¦åˆ™å°±crashï¼š B åœ¨é‡Šæ”¾å˜ä¸ºnilåï¼Œhook deallocæ—¶æœº A åœ¨é‡Šæ”¾å˜ä¸ºnilå å¦åˆ™æŠ¥é”™ Objective-C Thread 1: EXC_BAD_ACCESS (code=EXC_I386_GPFLT) KVOçš„è¢«è§‚å¯Ÿè€…deallocæ—¶ä»ç„¶æ³¨å†Œç€KVOå¯¼è‡´çš„crash B ä¸èƒ½ç§»é™¤ç›‘å¬è€…Açš„æ—¶æœºï¼Œå¦åˆ™å°±crashï¼š Bæ²¡æœ‰è¢«Aç›‘å¬ Bå·²ç»ç§»é™¤Açš„ç›‘å¬ã€‚ æ·»åŠ KVOé‡å¤æ·»åŠ è§‚å¯Ÿè€…æˆ–é‡å¤ç§»é™¤è§‚å¯Ÿè€…ï¼ˆKVO æ³¨å†Œè§‚å¯Ÿè€…ä¸ç§»é™¤è§‚å¯Ÿè€…ä¸åŒ¹é…ï¼‰å¯¼è‡´çš„crashã€‚ é‡‡å–çš„æªæ–½ï¼š Bæ·»åŠ Aç›‘å¬çš„æ—¶å€™ï¼Œé¿å…é‡å¤æ·»åŠ ï¼Œç§»é™¤çš„æ—¶å€™é¿å…é‡å¤ç§»é™¤ã€‚ B deallocæ—¶åŠæ—¶ç§»é™¤ A A deallocæ—¶ï¼Œè®© B ç§»é™¤Aã€‚ é¿å…é‡å¤æ·»åŠ ï¼Œé¿å…é‡å¤ç§»é™¤ã€‚ æŠ¥é”™ä¿¡æ¯ä¸€è§ˆï¼š 12018-01-24 16:08:54.100667+0800 BootingProtection[63487:29487624] *** Terminating app due to uncaught exception &apos;NSInternalInconsistencyException&apos;, reason: &apos;&lt;CYLObserverView: 0x7fb287002fb0; frame = (0 0; 207 368); layer = &lt;CALayer: 0x604000039360&gt;&gt;: An -observeValueForKeyPath:ofObject:change:context: message was received but not handled. å…¶ä»–æƒ…å†µçš„crash 1234567891011121314151617181920212223242526272829*** Terminating app due to uncaught exception &apos;NSInternalInconsistencyException&apos;, reason: &apos;An instance 0x7f8827d21d20 of class XXXX was deallocated while key value observers were still registered with it. Current observation info: &lt;NSKeyValueObservationInfo 0x61000003db00&gt; (&lt;NSKeyValueObservance 0x61000025ae80: Observer: 0x7f882890b4c0, Key path: dataSource, Options: &lt;New: YES, Old: NO, Prior: NO&gt; Context: 0x10dfe7730, Property: 0x61000025b810&gt;)&apos;*** First throw call stack:( 0 CoreFoundation 0x00000001102b0b0b __exceptionPreprocess + 171 1 libobjc.A.dylib 0x00000001167eb141 objc_exception_throw + 48 2 CoreFoundation 0x0000000110319625 +[NSException raise:format:] + 197 3 Foundation 0x0000000111322b53 NSKVODeallocate + 294 4 UIKit 0x00000001138ec544 __destroy_helper_block_.125 + 80 5 libsystem_blocks.dylib 0x00000001185a999d _Block_release + 111 6 UIKit 0x00000001139bd187 -[UIViewAnimationBlockDelegate .cxx_destruct] + 43 7 libobjc.A.dylib 0x00000001167e99bc _ZL27object_cxxDestructFromClassP11objc_objectP10objc_class + 127 8 libobjc.A.dylib 0x00000001167f5d34 objc_destructInstance + 129 9 libobjc.A.dylib 0x00000001167f5d66 object_dispose + 22 10 libobjc.A.dylib 0x00000001167ffb8e _ZN11objc_object17sidetable_releaseEb + 202 11 CoreFoundation 0x000000011021952d -[__NSDictionaryI dealloc] + 125 12 libobjc.A.dylib 0x00000001167ffb8e _ZN11objc_object17sidetable_releaseEb + 202 13 libobjc.A.dylib 0x00000001168002fa _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv + 866 14 CoreFoundation 0x00000001101ffe96 _CFAutoreleasePoolPop + 22 15 CoreFoundation 0x000000011023baec __CFRunLoopRun + 2172 16 CoreFoundation 0x000000011023b016 CFRunLoopRunSpecific + 406 17 GraphicsServices 0x0000000118f1ea24 GSEventRunModal + 62 18 UIKit 0x0000000113904134 UIApplicationMain + 159 19 HaiDiLao 0x000000010d50b5ef main + 111 20 libdyld.dylib 0x000000011856265d start + 1 21 ??? 0x0000000000000001 0x0 + 1)libc++abi.dylib: terminating with uncaught exception of type NSException é˜²crashæªæ–½äºæ˜¯æœ‰å¾ˆå¤šçš„KVOä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ KVOController ç”¨æ›´ä¼˜çš„APIæ¥è§„é¿è¿™äº›crashï¼Œä½†æ˜¯ä¾µå…¥æ€§æ¯”è¾ƒå¤§ï¼Œå¿…é¡»ç¼–ç è§„èŒƒæ¥çº¦æŸæ‰€æœ‰äººéƒ½è¦ä½¿ç”¨è¯¥æ–¹å¼ã€‚æœ‰æ²¡æœ‰ä»€ä¹ˆæ›´ä¼˜é›…ï¼Œæ— æ„ŸçŸ¥çš„æ¥å…¥æ–¹å¼ï¼Ÿ é‚£ä¾¿æ˜¯æˆ‘ä»¬ä¸‹é¢è¦è®²çš„ KVO crash é˜²æŠ¤æœºåˆ¶ã€‚ æˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸‹å…¶ä»–çš„ä¸€äº›KVOé˜²æŠ¤æ–¹æ¡ˆï¼š ç½‘ç»œä¸Šæœ‰ä¸€äº›ç±»ä¼¼çš„æ–¹æ¡ˆï¼Œâ€œå¤§ç™½å¥åº·ç³»ç»Ÿâ€æ–¹æ¡ˆå¤§è‡´å¦‚ä¸‹ï¼š KVOçš„è¢«è§‚å¯Ÿè€…deallocæ—¶ä»ç„¶æ³¨å†Œç€KVOå¯¼è‡´çš„crash çš„æƒ…å†µï¼Œå¯ä»¥å°†NSObjectçš„dealloc swizzleï¼Œ åœ¨object deallocçš„æ—¶å€™è‡ªåŠ¨å°†å…¶å¯¹åº”çš„kvodelegateæ‰€æœ‰å’Œkvoç›¸å…³çš„æ•°æ®æ¸…ç©ºï¼Œç„¶åå°†kvodelegateä¹Ÿç½®ç©ºã€‚é¿å…å‡ºç°KVOçš„è¢«è§‚å¯Ÿè€…deallocæ—¶ä»ç„¶æ³¨å†Œç€KVOè€Œäº§ç”Ÿçš„crash è¿™æ ·æœªå…å¤ªè¿‡éº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ CYLDeallocBlockExecutor hook ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„ dealloc æ—¶æœºï¼Œç„¶ååœ¨ dealloc å‰è¿›è¡Œæˆ‘ä»¬éœ€è¦è¿›è¡Œçš„æ“ä½œï¼Œå› æ­¤ä¹Ÿå°±ä¸éœ€è¦ä¸º NSObject åŠ  flag æ¥è¿›è¡Œå…¨å±€çš„ç­›é€‰ã€‚flag æ•ˆç‡éå¸¸åº•ï¼Œå½±å“ app æ€§èƒ½ã€‚ â€œå¤§ç™½å¥åº·ç³»ç»Ÿâ€æ€è·¯æ˜¯å»ºç«‹ä¸€ä¸ªdelegateï¼Œè§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…é€šè¿‡delegateé—´æ¥å»ºç«‹è”ç³»ï¼Œç”±äºæ²¡æœ‰demoæºç ï¼Œè¿™ç§æ–¹æ¡ˆæ¯”è¾ƒç¹çã€‚å¯ä»¥è€ƒè™‘å»ºç«‹ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œç”¨æ¥ä¿å­˜è§‚å¯Ÿè€…ã€keyPathçš„ä¿¡æ¯ï¼Œå¦‚æœå“ˆå¸Œè¡¨é‡Œå·²ç»æœ‰äº†ç›¸å…³çš„è§‚å¯Ÿè€…ï¼ŒkeyPathä¿¡æ¯ï¼Œé‚£ä¹ˆç»§ç»­æ·»åŠ è§‚å¯Ÿè€…çš„è¯ï¼Œå°±ä¸è½½è¿›è¡Œæ·»åŠ ï¼ŒåŒæ ·ç§»é™¤è§‚å¯Ÿçš„æ—¶å€™ï¼Œä¹Ÿç°åœ¨å“ˆå¸Œè¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœå­˜åœ¨è§‚å¯Ÿè€…ï¼Œkeypathä¿¡æ¯ï¼Œé‚£ä¹ˆç§»é™¤ï¼Œå¦‚æœæ²¡æœ‰çš„è¯å°±ä¸æ‰§è¡Œç›¸å…³çš„ç§»é™¤æ“ä½œã€‚è¦å®ç°è¿™æ ·çš„æ€è·¯å°±éœ€è¦ç”¨åˆ°methodSwizzleæ¥è¿›è¡Œæ–¹æ³•äº¤æ¢ã€‚æˆ‘è¿™é€šè¿‡å†™äº†ä¸€ä¸ªNSObjectçš„cagegoryæ¥è¿›è¡Œæ–¹æ³•äº¤æ¢ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼šä¸‹é¢æ˜¯æ ¸å¿ƒçš„swizzleæ–¹æ³•ï¼š åŸå‡½æ•° swizzleåçš„å‡½æ•° addObserver:forKeyPath:options:context: cyl_crashProtectaddObserver:forKeyPath:options:context: removeObserver:forKeyPath: cyl_crashProtectremoveObserver:forKeyPath: removeObserver:forKeyPath:context: cyl_crashProtectremoveObserver:forKeyPath:context 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354- (void)cyl_crashProtectaddObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath options:(NSKeyValueObservingOptions)options context:(nullable void *)context{ if (!observer || !keyPath || keyPath.length == 0) { return; } @synchronized (self) { NSInteger kvoHash = [self _cyl_crashProtectHash:observer :keyPath]; if (!self.KVOHashTable) { self.KVOHashTable = [NSHashTable hashTableWithOptions:NSPointerFunctionsStrongMemory]; } if (![self.KVOHashTable containsObject:@(kvoHash)]) { [self.KVOHashTable addObject:@(kvoHash)]; [self cyl_crashProtectaddObserver:observer forKeyPath:keyPath options:options context:context]; [self cyl_willDeallocWithSelfCallback:^(__unsafe_unretained id observedOwner, NSUInteger identifier) { [observedOwner cyl_crashProtectremoveObserver:observer forKeyPath:keyPath context:context]; }]; __unsafe_unretained typeof(self) unsafeUnretainedSelf = self; [observer cyl_willDeallocWithSelfCallback:^(__unsafe_unretained id observerOwner, NSUInteger identifier) { [unsafeUnretainedSelf cyl_crashProtectremoveObserver:observerOwner forKeyPath:keyPath context:context]; }]; } }}- (void)cyl_crashProtectremoveObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath context:(void *)context { //TODO: åŠ ä¸Š context é™åˆ¶ï¼Œé˜²æ­¢çˆ¶ç±»ã€å­ç±»ä½¿ç”¨åŒä¸€ä¸ªkeyPathã€‚ [self cyl_crashProtectremoveObserver:observer forKeyPath:keyPath];}- (void)cyl_crashProtectremoveObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath{ //TODO: white list if (!observer || !keyPath || keyPath.length == 0) { return; } @synchronized (self) { if (!observer) { return; } NSInteger kvoHash = [self _cyl_crashProtectHash:observer :keyPath]; NSHashTable *hashTable = [self KVOHashTable]; if (!hashTable) { return; } if ([hashTable containsObject:@(kvoHash)]) { [self cyl_crashProtectremoveObserver:observer forKeyPath:keyPath]; [hashTable removeObject:@(kvoHash)]; } }} ä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ¨¡æ‹Ÿdeallocä¸­ä¸å†™removeObserverï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å†™ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¤šæ¬¡ addObserverã€removeObserver è¿™æ ·å°±å®Œå…¨ä¸å¹²æ‰°æˆ‘ä»¬å¹³æ—¶çš„ä»£ç ä¹¦å†™é€»è¾‘äº†ã€‚ Posted by å¾®åš@iOSç¨‹åºçŠ­è¢åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | Creative Commons BY-NC-ND 3.0","link":"/program/ï£¿/KVOcrash/"},{"title":"ä»€ä¹ˆæ˜¯RxSwift","text":"ç›¸ä¿¡å¤§å®¶å¾ˆæ—©å°±å¬è¯´è¿‡å‡½æ•°å¼å“åº”ç¼–ç¨‹æ¦‚å¿µï¼Œæˆ‘æ˜¯å»å¹´é¢è¯•çš„æ—¶å€™æ¥è§¦åˆ°å‡½æ•°å¼å“åº”ç¼–ç¨‹çš„ï¼Œå½“æ—¶ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°MVVMè¿™ä¸ªæ¦‚å¿µï¼Œè½¬çœ¼éƒ½ä¸€å¹´è¿‡å»äº†ï¼Œæˆ‘å´æ²¡æœ‰åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸Šåšæ·±å…¥çš„ç ”ç©¶ï¼Œè¯´æ¥è¿˜çœŸæ˜¯æƒ­æ„§ã€‚ä¸è¿‡æœ€è¿‘ç”±äºæƒ³è¦ä½¿ç”¨RxSwiftï¼Œæ‰€ä»¥è¶è¿™ä¸ªæ—¶å€™å¥½å¥½æ¥è§¦å’Œç ”ç©¶ä¸€ä¸‹ä¼ è¯´ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œç”±äºç½‘ä¸Šå…³äºRxSwiftçš„æ•™ç¨‹èµ„æ–™å¾ˆå°‘ï¼Œè¿™ç¯‡æ–‡ç« å…¶å®å°±æ˜¯æœ€RxSwiftå®˜æ–¹æ–‡æ¡£å’Œä¸€äº›æ¦‚å¿µåšä¸€äº›è§£è¯»ã€‚ç®—æ˜¯å¤§å®¶å­¦ä¹ çš„å‚è€ƒæ–‡ç« å§ï¼ å…ˆæŒ–ä¸ªå‘ï¼Œè¿™å¯èƒ½ä¼šæ˜¯ä¸€ä¸ªRxSwiftç³»åˆ—ï¼Œå¸Œæœ›å¤§å®¶åœ¨å­¦ä¹ çš„æ—¶å€™æœ‰æ‰€å‚è€ƒã€‚ RxSwiftæ˜¯ä»€ä¹ˆRxSwifæ˜¯ReactiveXçš„Swiftç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼å“åº”ç¼–ç¨‹çš„æ¡†æ¶ã€‚å¯¹ï¼Œå°±è¿™ä¸€å¥è¯ã€‚æƒ³è¦çŸ¥é“ä»–åšä»€ä¹ˆçš„ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹è§‚å¯Ÿè€…æ¨¡å¼ã€‚ è§‚å¯Ÿè€…æ¨¡å¼å…³äºè§‚å¯Ÿè€…æ¨¡å¼æˆ‘æƒ³å¤§ä¼™åº”è¯¥éƒ½å¾ˆäº†è§£äº†å§ï¼Œä»€ä¹ˆKVOï¼Œé€šçŸ¥ç­‰éƒ½æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œåœ¨è®¾è®¡æ¨¡å¼ä¸­ä»–å¯æ˜¯ä¸€ä¸ªé‡ä¸­ä¹‹é‡çš„è®¾è®¡æ¨¡å¼å•Šï¼æ¯”å¦‚ä¸€ä¸ªå®å®åœ¨ç¡è§‰ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆï¼Œçˆ·çˆ·å¥¶å¥¶æ€»ä¸èƒ½åœ¨é‚£è¾¹ä¸€åªçœ‹ç€å§ï¼Ÿé‚£æ ·å­å¤ªç´¯äº†ã€‚ä»–ä»¬è¯¥åšå•¥äº‹å°±åšå•¥äº‹å‘—ï¼Œåªè¦å¬åˆ°å®å®çš„å“­å£°ï¼Œä»–ä»¬å°±ç»™å®å®å–‚å¥¶å°±è¡Œäº†ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚å®å®æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆç­‰æ˜¯è§‚å¯Ÿè€…ä¹Ÿç§°ä½œè®¢é˜…è€…ï¼Œåªè¦è¢«è§‚å¯Ÿè€…å‘å‡ºäº†æŸäº›äº‹ä»¶æ¯”å¦‚å®å®å“­å£°ã€å«å£°éƒ½æ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œé€šçŸ¥åˆ°è®¢é˜…è€…ï¼Œè®¢é˜…è€…ä»¬å°±å¯ä»¥åšç›¸åº”çš„å¤„ç†å·¥ä½œã€‚å“ˆå“ˆï¼Œè§‚å¯Ÿè€…æ¨¡å¼å¾ˆç®€å•å§ï¼Ÿ RxSwiftåšäº†ä»€ä¹ˆRxSwiftæŠŠæˆ‘ä»¬ç¨‹åºä¸­æ¯ä¸€ä¸ªæ“ä½œéƒ½çœ‹æˆä¸€ä¸ªäº‹ä»¶ï¼Œæ¯”å¦‚ä¸€ä¸ªTextFieldä¸­çš„æ–‡æœ¬æ”¹å˜ï¼Œä¸€ä¸ªæŒ‰é’®è¢«ç‚¹å‡»ï¼Œæˆ–è€…ä¸€ä¸ªç½‘ç»œè¯·æ±‚ç»“æŸç­‰ï¼Œæ¯ä¸€ä¸ªäº‹ä»¶æºå°±å¯ä»¥çœ‹æˆä¸€ä¸ªç®¡é“ï¼Œä¹Ÿå°±æ˜¯sequenceï¼Œæ¯”å¦‚TextFieldï¼Œå½“æˆ‘ä»¬æ”¹å˜é‡Œé¢çš„æ–‡æœ¬çš„æ—¶å€™ï¼Œè¿™ä¸ªTextFieldå°±ä¼šä¸æ–­çš„å‘å‡ºäº‹ä»¶ï¼Œä»ä»–çš„è¿™ä¸ªsequenceä¸­ä¸æ–­çš„æµå‡ºï¼Œæˆ‘ä»¬åªéœ€è¦ç›‘å¬è¿™ä¸ªsequenceï¼Œæ¯æµå‡ºä¸€ä¸ªäº‹ä»¶å°±åšç›¸åº”çš„å¤„ç†ã€‚åŒç†ï¼ŒButtonä¹Ÿæ˜¯ä¸€ä¸ªsequenceï¼Œæ¯ç‚¹å‡»ä¸€æ¬¡å°±æµå‡ºä¸€ä¸ªäº‹ä»¶ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬æŠŠæ¯ä¸€æ­¥éƒ½æƒ³æˆæ˜¯ä¸€ä¸ªäº‹ä»¶å°±å¥½å»ç†è§£RxSwiftäº†ã€‚çœ‹ä¸‹å›¾æ˜¯ä¸æ˜¯å¾ˆå¥½ç†è§£äº†ï¼Ÿ Observableå’ŒObserverç†è§£äº†è§‚å¯Ÿè€…æ¨¡å¼è¿™ä¸¤ä¸ªæ¦‚å¿µå°±å¾ˆå¥½ç†è§£äº†ï¼ŒObservableå°±æ˜¯å¯è¢«è§‚å¯Ÿçš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„å®å®ï¼Œä»–ä¹Ÿæ˜¯äº‹ä»¶æºã€‚è€ŒObserverå°±æ˜¯æˆ‘ä»¬çš„è§‚å¯Ÿè€…ï¼Œä¹Ÿå°±æ˜¯å½“æ”¶åˆ°äº‹ä»¶çš„æ—¶å€™å»åšæŸäº›å¤„ç†çš„çˆ¸çˆ¸å¦ˆå¦ˆã€‚è§‚å¯Ÿè€…éœ€è¦å»è®¢é˜…(subscribe)è¢«è§‚å¯Ÿè€…ï¼Œæ‰èƒ½æ”¶åˆ°Observableçš„äº‹ä»¶é€šçŸ¥æ¶ˆæ¯ã€‚ä¸‹é¢å¼€å§‹ä¸€äº›åŸºæœ¬æ¦‚å¿µè§£è¯»ï¼Œé€šè¯»ä¸€éä½ ä¼šå¯¹RxSwiftæœ‰éå¸¸æ·±åˆ»çš„è®¤è¯†äº†ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å¯¹æ•´ç†äº†ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£å’ŒåŠ ä¸Šè‡ªå·±çš„ä¸€äº›ç†è§£ åˆ›å»ºå’Œè®¢é˜…è¢«è§‚å¯Ÿè€…ä¸‹é¢åˆ›å»ºè¢«è§‚å¯Ÿè€…å…¶å®å°±æ˜¯åˆ›å»ºä¸€ä¸ªObserableçš„sequenceï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªæµï¼Œç„¶åå°±å¯ä»¥è¢«è®¢é˜…subscribeï¼Œè¿™æ ·è¢«è§‚å¯Ÿè€…å‘å‡ºæ—¶é—´æ¶ˆå¤±ï¼Œæˆ‘ä»¬å°±èƒ½åšç›¸åº”çš„å¤„ç† DisposeBagDisposeBagå…¶å®å°±ç›¸å½“äºiOSä¸­çš„ARCä¼¼å¾—ï¼Œä¼šåœ¨é€‚å½“çš„æ—¶å€™é”€æ¯è§‚å¯Ÿè€…ï¼Œç›¸å½“äºå†…å­˜ç®¡ç†è€…å§ã€‚ subscribesubscribeæ˜¯è®¢é˜…sequenceå‘å‡ºçš„äº‹ä»¶ï¼Œæ¯”å¦‚nextäº‹ä»¶ï¼Œerroräº‹ä»¶ç­‰ã€‚è€Œsubscribe(onNext:)æ˜¯ç›‘å¬sequenceå‘å‡ºçš„nextäº‹ä»¶ä¸­çš„elementè¿›è¡Œå¤„ç†ï¼Œä»–ä¼šå¿½ç•¥errorå’Œcompletedäº‹ä»¶ã€‚ç›¸å¯¹åº”çš„è¿˜æœ‰subscribe(onError:) å’Œ subscribe(onCompleted:) neverneverå°±æ˜¯åˆ›å»ºä¸€ä¸ªsequenceï¼Œä½†æ˜¯ä¸å‘å‡ºä»»ä½•äº‹ä»¶ä¿¡å·ã€‚ 1234567let disposeBag = DisposeBag()let neverSequence = Observable.never() let neverSequenceSubscription = neverSequence .subscribe { _ in print(&quot;This will never be printed&quot;)}.addDisposableTo(disposeBag) ç»“æœæ˜¯ä»€ä¹ˆéƒ½ä¸æ‰“å° emptyemptyå°±æ˜¯åˆ›å»ºä¸€ä¸ªç©ºçš„sequence,åªèƒ½å‘å‡ºä¸€ä¸ªcompletedäº‹ä»¶ 12345678let disposeBag = DisposeBag() Observable.empty() .subscribe { event in print(event) } .addDisposableTo(disposeBag) completed justjustæ˜¯åˆ›å»ºä¸€ä¸ªsequenceåªèƒ½å‘å‡ºä¸€ç§ç‰¹å®šçš„äº‹ä»¶ï¼Œèƒ½æ­£å¸¸ç»“æŸ 1234567let disposeBag = DisposeBag() Observable.just(&quot;&quot;) .subscribe { event in print(event) } .addDisposableTo(disposeBag) 12next()completed ofofæ˜¯åˆ›å»ºä¸€ä¸ªsequenceèƒ½å‘å‡ºå¾ˆå¤šç§äº‹ä»¶ä¿¡å· 12345678let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .subscribe(onNext: { element in print(element) }) .addDisposableTo(disposeBag) å¦‚æœæŠŠä¸Šé¢çš„onNext:å»æ‰çš„è¯ï¼Œç»“æœä¼šæ˜¯è¿™æ ·å­ï¼Œä¹Ÿæ­£å¥½å¯¹åº”äº†æˆ‘ä»¬subscribeä¸­ï¼Œsubscribeåªç›‘å¬äº‹ä»¶ã€‚ 12345next()next()next()next()completed fromfromå°±æ˜¯ä»é›†åˆä¸­åˆ›å»ºsequenceï¼Œä¾‹å¦‚æ•°ç»„ï¼Œå­—å…¸æˆ–è€…Set 12345let disposeBag = DisposeBag() Observable.from([&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) createæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å¯è§‚å¯Ÿçš„sequenceï¼Œé‚£å°±æ˜¯ä½¿ç”¨createcreateæ“ä½œç¬¦ä¼ å…¥ä¸€ä¸ªè§‚å¯Ÿè€…observerï¼Œç„¶åè°ƒç”¨observerçš„onNextï¼ŒonCompletedå’ŒonErroræ–¹æ³•ã€‚è¿”å›ä¸€ä¸ªå¯è§‚å¯Ÿçš„obserableåºåˆ—ã€‚ 1234567891011121314let disposeBag = DisposeBag() let myJust = { (element: String) -&gt; Observable in return Observable.create { observer in observer.on(.next(element)) observer.on(.completed) return Disposables.create() }} myJust(&quot;&quot;) .subscribe { print($0) } .addDisposableTo(disposeBag) 123next()completed rangerangeå°±æ˜¯åˆ›å»ºä¸€ä¸ªsequenceï¼Œä»–ä¼šå‘å‡ºè¿™ä¸ªèŒƒå›´ä¸­çš„ä»å¼€å§‹åˆ°ç»“æŸçš„æ‰€æœ‰äº‹ä»¶ 12345let disposeBag = DisposeBag() Observable.range(start: 1, count: 10) .subscribe { print($0) } .addDisposableTo(disposeBag) 123456789101112next(1)next(2)next(3)next(4)next(5)next(6)next(7)next(8)next(9)next(10)completed repeatElementåˆ›å»ºä¸€ä¸ªsequenceï¼Œå‘å‡ºç‰¹å®šçš„äº‹ä»¶næ¬¡ 123456let disposeBag = DisposeBag() Observable.repeatElement(&quot;&quot;) .take(3) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) generategenerateæ˜¯åˆ›å»ºä¸€ä¸ªå¯è§‚å¯Ÿsequenceï¼Œå½“åˆå§‹åŒ–çš„æ¡ä»¶ä¸ºtrueçš„æ—¶å€™ï¼Œä»–å°±ä¼šå‘å‡ºæ‰€å¯¹åº”çš„äº‹ä»¶ 12345let disposeBag = DisposeBag() Observable.generate( initialState: 0, condition: { $0 123012 deferreddeferredä¼šä¸ºæ¯ä¸€ä¸ºè®¢é˜…è€…observeråˆ›å»ºä¸€ä¸ªæ–°çš„å¯è§‚å¯Ÿåºåˆ—ä¸‹é¢ä¾‹å­ä¸­æ¯æ¬¡è¿›è¡Œsubscribeçš„æ—¶å€™éƒ½ä¼šå»åˆ›å»ºä¸€ä¸ªæ–°çš„deferredSequenceï¼Œæ‰€ä»¥Emittingä¼šæ‰“å°ä¸¤éã€‚ 1234567891011121314151617181920212223let disposeBag = DisposeBag()var count = 1 let deferredSequence = Observable.deferred { print(&quot;Creating \\(count)&quot;) count += 1 return Observable.create { observer in print(&quot;Emitting...&quot;) observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) return Disposables.create() }} deferredSequence .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) deferredSequence .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 12345678Creating 1Emitting... Creating 2Emitting... erroråˆ›å»ºä¸€ä¸ªå¯è§‚å¯Ÿåºåˆ—ï¼Œä½†ä¸å‘å‡ºä»»ä½•æ­£å¸¸çš„äº‹ä»¶ï¼Œåªå‘å‡ºerroräº‹ä»¶å¹¶ç»“æŸ 12345let disposeBag = DisposeBag() Observable.error(TestError.test) .subscribe { print($0) } .addDisposableTo(disposeBag) error(test) doOndoOnæˆ‘æ„Ÿè§‰å°±æ˜¯åœ¨ç›´æ¥onNextå¤„ç†æ—¶å€™ï¼Œå…ˆæ‰§è¡ŒæŸä¸ªæ–¹æ³•ï¼ŒdoOnNext( :)æ–¹æ³•å°±æ˜¯åœ¨subscribe(onNext:)å‰è°ƒç”¨ï¼ŒdoOnCompleted(:)å°±æ˜¯åœ¨subscribe(onCompleted:)å‰é¢è°ƒç”¨çš„ã€‚ 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .do(onNext: { print(&quot;Intercepted:&quot;, $0) }, onError: { print(&quot;Intercepted error:&quot;, $0) }, onCompleted: { print(&quot;Completed&quot;) }) .subscribe(onNext: { print($0) },onCompleted: { print(&quot;ç»“æŸ&quot;) }) .addDisposableTo(disposeBag) 1234567891011Intercepted: Intercepted: Intercepted: Intercepted: Completedç»“æŸ å­¦ä¼šä½¿ç”¨SubjectsSubjetæ˜¯observableå’ŒObserverä¹‹é—´çš„æ¡¥æ¢ï¼Œä¸€ä¸ªSubjectæ—¢æ˜¯ä¸€ä¸ªObserableä¹Ÿæ˜¯ä¸€ä¸ªObserverï¼Œä»–æ—¢å¯ä»¥å‘å‡ºäº‹ä»¶ï¼Œä¹Ÿå¯ä»¥ç›‘å¬äº‹ä»¶ã€‚ PublishSubjectå½“ä½ è®¢é˜…PublishSubjectçš„æ—¶å€™ï¼Œä½ åªèƒ½æ¥æ”¶åˆ°è®¢é˜…ä»–ä¹‹åå‘ç”Ÿçš„äº‹ä»¶ã€‚subject.onNext()å‘å‡ºonNextäº‹ä»¶ï¼Œå¯¹åº”çš„è¿˜æœ‰onError()å’ŒonCompleted()äº‹ä»¶ 12345678910let disposeBag = DisposeBag()let subject = PublishSubject() subject.addObserver(&quot;1&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;&quot;)subject.onNext(&quot;&quot;) subject.addObserver(&quot;2&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;ï¸&quot;)subject.onNext(&quot;ï¸&quot;) 1234567Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 1 Event: next(ï¸)Subscription: 2 Event: next(ï¸)Subscription: 1 Event: next(ï¸)Subscription: 2 Event: next(ï¸) ReplaySubjectå½“ä½ è®¢é˜…ReplaySubjectçš„æ—¶å€™ï¼Œä½ å¯ä»¥æ¥æ”¶åˆ°è®¢é˜…ä»–ä¹‹åçš„äº‹ä»¶ï¼Œä½†ä¹Ÿå¯ä»¥æ¥å—è®¢é˜…ä»–ä¹‹å‰å‘å‡ºçš„äº‹ä»¶ï¼Œæ¥å—å‡ ä¸ªäº‹ä»¶å–å†³ä¸bufferSizeçš„å¤§å° 12345678910let disposeBag = DisposeBag()let subject = ReplaySubject.create(bufferSize: 1) subject.addObserver(&quot;1&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;&quot;)subject.onNext(&quot;&quot;) subject.addObserver(&quot;2&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;ï¸&quot;)subject.onNext(&quot;ï¸&quot;) 12345678Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 2 Event: next() //è®¢é˜…ä¹‹åè¿˜å¯ä»¥æ¥å—ä¸€æ¬¡å‰é¢å‘å‡ºçš„äº‹ä»¶Subscription: 1 Event: next(ï¸)Subscription: 2 Event: next(ï¸)Subscription: 1 Event: next(ï¸)Subscription: 2 Event: next(ï¸) BehaviorSubjectå½“ä½ è®¢é˜…äº†BehaviorSubjectï¼Œä½ ä¼šæ¥å—åˆ°è®¢é˜…ä¹‹å‰çš„æœ€åä¸€ä¸ªäº‹ä»¶ã€‚ 1234567891011121314let disposeBag = DisposeBag()let subject = BehaviorSubject(value: &quot;&quot;) subject.addObserver(&quot;1&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;&quot;)subject.onNext(&quot;&quot;) subject.addObserver(&quot;2&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;ï¸&quot;)subject.onNext(&quot;ï¸&quot;) subject.addObserver(&quot;3&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;&quot;)subject.onNext(&quot;&quot;) 12345678910111213141516Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 2 Event: next() //è®¢é˜…ä¹‹å‰çš„æœ€åä¸€ä¸ªäº‹ä»¶Subscription: 1 Event: next(ï¸)Subscription: 2 Event: next(ï¸)Subscription: 1 Event: next(ï¸)Subscription: 2 Event: next(ï¸)Subscription: 3 Event: next(ï¸) //è®¢é˜…ä¹‹å‰çš„æœ€åä¸€ä¸ªäº‹ä»¶Subscription: 1 Event: next()Subscription: 3 Event: next()Subscription: 2 Event: next()Subscription: 1 Event: next()Subscription: 3 Event: next()Subscription: 2 Event: next() PublishSubject, ReplaySubjectå’ŒBehaviorSubjectæ˜¯ä¸ä¼šè‡ªåŠ¨å‘å‡ºcompletedäº‹ä»¶çš„ã€‚ VariableVariableæ˜¯BehaviorSubjectä¸€ä¸ªåŒ…è£…ç®±ï¼Œå°±åƒæ˜¯ä¸€ä¸ªç®±å­ä¸€æ ·ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦è°ƒç”¨asObservable()æ‹†ç®±ï¼Œé‡Œé¢çš„valueæ˜¯ä¸€ä¸ªBehaviorSubjectï¼Œä»–ä¸ä¼šå‘å‡ºerroräº‹ä»¶ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨å‘å‡ºcompletedäº‹ä»¶ã€‚ 1234567891011let disposeBag = DisposeBag()let variable = Variable(&quot;&quot;) variable.asObservable().addObserver(&quot;1&quot;).addDisposableTo(disposeBag)variable.value = &quot;&quot;variable.value = &quot;&quot; variable.asObservable().addObserver(&quot;2&quot;).addDisposableTo(disposeBag)variable.value = &quot;ï¸&quot;variable.value = &quot;ï¸&quot; 1234567891011Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 2 Event: next()Subscription: 1 Event: next(ï¸)Subscription: 2 Event: next(ï¸)Subscription: 1 Event: next(ï¸)Subscription: 2 Event: next(ï¸)Subscription: 1 Event: completedSubscription: 2 Event: completed è”åˆæ“ä½œè”åˆæ“ä½œå°±æ˜¯æŠŠå¤šä¸ªObservableæµåˆæˆå•ä¸ªObservableæµ startWithåœ¨å‘å‡ºäº‹ä»¶æ¶ˆæ¯ä¹‹å‰ï¼Œå…ˆå‘å‡ºæŸä¸ªç‰¹å®šçš„äº‹ä»¶æ¶ˆæ¯ã€‚æ¯”å¦‚å‘å‡ºäº‹ä»¶2 ï¼Œ3ç„¶åæˆ‘startWith(1)ï¼Œé‚£ä¹ˆå°±ä¼šå…ˆå‘å‡º1ï¼Œç„¶å2 ï¼Œ3. 123456let disposeBag = DisposeBag() Observable.of(&quot;2&quot;, &quot;3&quot;) .startWith(&quot;1&quot;) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) mergeåˆå¹¶ä¸¤ä¸ªObservableæµåˆæˆå•ä¸ªObservableæµï¼Œæ ¹æ®æ—¶é—´è½´å‘å‡ºå¯¹åº”çš„äº‹ä»¶ 123456789101112131415161718192021let disposeBag = DisposeBag() let subject1 = PublishSubject()let subject2 = PublishSubject() Observable.of(subject1, subject2) .merge() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) subject1.onNext(&quot;ï¸&quot;) subject1.onNext(&quot;ï¸&quot;) subject2.onNext(&quot;â‘ &quot;) subject2.onNext(&quot;â‘¡&quot;) subject1.onNext(&quot;&quot;) subject2.onNext(&quot;â‘¢&quot;) 12345â‘ â‘¡ â‘¢ zipç»‘å®šè¶…è¿‡æœ€å¤šä¸è¶…è¿‡8ä¸ªçš„Observableæµï¼Œç»“åˆåœ¨ä¸€èµ·å¤„ç†ã€‚æ³¨æ„Zipæ˜¯ä¸€ä¸ªäº‹ä»¶å¯¹åº”å¦ä¸€ä¸ªæµä¸€ä¸ªäº‹ä»¶ã€‚ 1234567891011121314151617181920let disposeBag = DisposeBag() let stringSubject = PublishSubject()let intSubject = PublishSubject() Observable.zip(stringSubject, intSubject) { stringElement, intElement in &quot;\\(stringElement) \\(intElement)&quot; } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) stringSubject.onNext(&quot;ï¸&quot;)stringSubject.onNext(&quot;ï¸&quot;) intSubject.onNext(1) intSubject.onNext(2) stringSubject.onNext(&quot;&quot;)intSubject.onNext(3) 1234ï¸ 1 å°†stringSubjectå’ŒintSubjectå‹ç¼©åˆ°ä¸€èµ·å…±åŒå¤„ç†ï¸ 23 combineLatestç»‘å®šè¶…è¿‡æœ€å¤šä¸è¶…è¿‡8ä¸ªçš„Observableæµï¼Œç»“åˆåœ¨ä¸€èµ·å¤„ç†ã€‚å’ŒZipä¸åŒçš„æ˜¯combineLatestæ˜¯ä¸€ä¸ªæµçš„äº‹ä»¶å¯¹åº”å¦ä¸€ä¸ªæµçš„æœ€æ–°çš„äº‹ä»¶ï¼Œä¸¤ä¸ªäº‹ä»¶éƒ½ä¼šæ˜¯æœ€æ–°çš„äº‹ä»¶ï¼Œå¯å°†ä¸‹å›¾ä¸Zipçš„å›¾è¿›è¡Œå¯¹æ¯”ã€‚ 12345678910111213141516171819let disposeBag = DisposeBag() let stringSubject = PublishSubject()let intSubject = PublishSubject() Observable.combineLatest(stringSubject, intSubject) { stringElement, intElement in &quot;\\(stringElement) \\(intElement)&quot; } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) stringSubject.onNext(&quot;ï¸&quot;) stringSubject.onNext(&quot;ï¸&quot;)intSubject.onNext(1) intSubject.onNext(2) stringSubject.onNext(&quot;&quot;) 1234ï¸ 1ï¸ 22 switchLatestswitchLatestå¯ä»¥å¯¹äº‹ä»¶æµè¿›è¡Œè½¬æ¢ï¼Œæœ¬æ¥ç›‘å¬çš„subject1ï¼Œæˆ‘å¯ä»¥é€šè¿‡æ›´æ”¹variableé‡Œé¢çš„valueæ›´æ¢äº‹ä»¶æºã€‚å˜æˆç›‘å¬subject2äº† 1234567891011121314151617181920212223let disposeBag = DisposeBag() let subject1 = BehaviorSubject(value: &quot;âš½ï¸&quot;)let subject2 = BehaviorSubject(value: &quot;&quot;) let variable = Variable(subject1) variable.asObservable() .switchLatest() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) subject1.onNext(&quot;&quot;)subject1.onNext(&quot;&quot;) variable.value = subject2 subject1.onNext(&quot;âš¾ï¸&quot;) subject2.onNext(&quot;&quot;)variable.value = subject1subject2.onNext(â€œXX&quot;)subject1.onNext(â€œXX&quot;) 12345678âš½ï¸ âš¾ï¸XX å˜æ¢æ“ä½œmapé€šè¿‡ä¼ å…¥ä¸€ä¸ªå‡½æ•°é—­åŒ…æŠŠåŸæ¥çš„sequenceè½¬å˜ä¸ºä¸€ä¸ªæ–°çš„sequenceçš„æ“ä½œ 12345let disposeBag = DisposeBag()Observable.of(1, 2, 3) .map { $0 * $0 } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 12341 æ¯ä¸€ä¸ªå…ƒç´ è‡ªå·±ç›¸ä¹˜49 flatMapå°†ä¸€ä¸ªsequenceè½¬æ¢ä¸ºä¸€ä¸ªsequencesï¼Œå½“ä½ æ¥æ”¶ä¸€ä¸ªsequenceçš„äº‹ä»¶ï¼Œä½ è¿˜æƒ³æ¥æ”¶å…¶ä»–sequenceå‘å‡ºçš„äº‹ä»¶çš„è¯å¯ä»¥ä½¿ç”¨flatMapï¼Œå¥¹ä¼šå°†æ¯ä¸€ä¸ªsequenceäº‹ä»¶è¿›è¡Œå¤„ç†ä»¥åï¼Œç„¶åå†ä»¥ä¸€ä¸ªsequenceå½¢å¼å‘å‡ºäº‹ä»¶ã€‚è€Œä¸”flatMapæœ‰ä¸€æ¬¡æ‹†åŒ…åŠ¨ä½œï¼Œè¯·çœ‹ä»£ç è§£æã€‚ 1234567891011121314151617181920212223242526let disposeBag = DisposeBag() struct Player { var score: Variable //é‡Œé¢æ˜¯ä¸€ä¸ªVariable} let = Player(score: Variable(80)) let = Player(score: Variable(90))let = Player(score: Variable(550)) let player = Variable() //å°†playerè½¬ä¸ºVariable player.asObservable() //æ‹†ç®±è½¬æˆå¯è¢«ç›‘å¬çš„sequence .flatMap { $0.score.asObservable() } // flatMapæœ‰ä¸€æ¬¡æ‹†åŒ…åŠ¨ä½œï¼Œ$0æœ¬æ¥åº”è¯¥æ˜¯ä¸€ä¸ªBehaviorSubjectç±»å‹ï¼Œä½†æ˜¯ç›´æ¥è®¿é—®äº†scoreã€‚æ‰€ä»¥çŒœæƒ³flatMapå¯¹behaviorSubjectè¿›è¡Œäº†onNextæ‹†åŒ…å–æ•°æ® .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) .score.value = 85 player.value = //æ›´æ¢äº†valueï¼Œç›¸å½“äºåˆæ·»åŠ äº†ä¸€ä¸ªsequenceï¼Œä¸¤ä¸ªsequenceéƒ½å¯ä»¥æ¥æ”¶ .score.value = 95.score.value = 222player.value = .score.value = 100 1234567880859095222550100 flatMapLatestflatMapLateståªä¼šæ¥æ”¶æœ€æ–°çš„valueäº‹ä»¶ï¼Œå°†ä¸Šä¾‹æ”¹ä¸ºflatMapLatestã€‚ç»“æœä¸º 12345808590550 scanscanå°±æ˜¯ç»™ä¸€ä¸ªåˆå§‹åŒ–çš„æ•°ï¼Œç„¶åä¸æ–­çš„æ‹¿å‰ä¸€ä¸ªç»“æœå’Œæœ€æ–°çš„å€¼è¿›è¡Œå¤„ç†æ“ä½œã€‚ 123456789let disposeBag = DisposeBag() Observable.of(10, 100, 1000) .scan(1) { aggregateValue, newValue in aggregateValue + newValue } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 1234111111111 è¿‡æ»¤å’Œçº¦æŸfilterfilterå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯è¿‡æ»¤æ‰æŸäº›ä¸ç¬¦åˆè¦æ±‚çš„äº‹ä»¶ 123456789101112let disposeBag = DisposeBag() Observable.of( &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .filter { $0 == &quot;&quot; } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) distinctUntilChangeddistinctUntilChangedå°±æ˜¯å½“ä¸‹ä¸€ä¸ªäº‹ä»¶ä¸å‰ä¸€ä¸ªäº‹ä»¶æ˜¯ä¸åŒäº‹ä»¶çš„äº‹ä»¶æ‰è¿›è¡Œå¤„ç†æ“ä½œ 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .distinctUntilChanged() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) elementAtåªå¤„ç†åœ¨æŒ‡å®šä½ç½®çš„äº‹ä»¶ 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .elementAt(3) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) singleæ‰¾å‡ºåœ¨sequenceåªå‘å‡ºä¸€æ¬¡çš„äº‹ä»¶ï¼Œå¦‚æœè¶…è¿‡ä¸€ä¸ªå°±ä¼šå‘å‡ºerroré”™è¯¯ 12345Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .single() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 123 //å•ä¸€ä¿¡å·è¶…è¿‡äº†ä¸€ä¸ªReceived unhandled error: /var/folders/hz/v15ld5mj0nqf83d21j13y0tw0000gn/T/./lldb/7229/playground107.swift:69:__lldb_expr_107 -&gt; Sequence contains more than one element. 12345Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .single { $0 == &quot;&quot; } //é’è›™åªæœ‰ä¸€ä¸ªï¼Œcompleted .subscribe { print($0) } .addDisposableTo(disposeBag) 12345Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .single { $0 == &quot;&quot; } //å…”å­æœ‰ä¸¤ä¸ªï¼Œä¼šå‘å‡ºerror .subscribe { print($0) } .addDisposableTo(disposeBag) 12345Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .single { $0 == &quot;&quot; } //æ²¡æœ‰è“è‰²çƒï¼Œä¼šå‘å‡ºerror .subscribe { print($0) } .addDisposableTo(disposeBag) takeåªå¤„ç†å‰å‡ ä¸ªäº‹ä»¶ä¿¡å·, 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .take(3) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) takeLaståªå¤„ç†åå‡ ä¸ªäº‹ä»¶ä¿¡å· 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .takeLast(3) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) takeWhileå½“æ¡ä»¶æ»¡è¶³çš„æ—¶å€™è¿›è¡Œå¤„ç† 1234let disposeBag = DisposeBag() Observable.of(1, 2, 3, 4, 5, 6) .takeWhile { $0 takeUntilæ¥æ”¶äº‹ä»¶æ¶ˆæ¯ï¼Œç›´åˆ°å¦ä¸€ä¸ªsequenceå‘å‡ºäº‹ä»¶æ¶ˆæ¯çš„æ—¶å€™ã€‚ 1234567891011121314151617181920let disposeBag = DisposeBag() let sourceSequence = PublishSubject()let referenceSequence = PublishSubject() sourceSequence .takeUntil(referenceSequence) .subscribe { print($0) } .addDisposableTo(disposeBag) sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;) referenceSequence.onNext(&quot;&quot;) //åœæ­¢æ¥æ”¶æ¶ˆæ¯ sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;) 12345next()next()next()completed skipå–æ¶ˆå‰å‡ ä¸ªäº‹ä»¶ 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .skip(2) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) skipWhileæ»¡è¶³æ¡ä»¶çš„äº‹ä»¶æ¶ˆæ¯éƒ½å–æ¶ˆ 12345let disposeBag = DisposeBag() Observable.of(1, 2, 3, 4, 5, 6) .skipWhile { $0 skipWhileWithIndexæ»¡è¶³æ¡ä»¶çš„éƒ½è¢«å–æ¶ˆï¼Œä¼ å…¥çš„é—­åŒ…åŒskipWhileæœ‰ç‚¹åŒºåˆ«è€Œå·² 12345let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .skipWhileWithIndex { element, index in index skipUntilç›´åˆ°æŸä¸ªsequenceå‘å‡ºäº†äº‹ä»¶æ¶ˆæ¯ï¼Œæ‰å¼€å§‹æ¥æ”¶å½“å‰sequenceå‘å‡ºçš„äº‹ä»¶æ¶ˆæ¯ 123456789101112131415161718192021let disposeBag = DisposeBag() let sourceSequence = PublishSubject()let referenceSequence = PublishSubject() sourceSequence .skipUntil(referenceSequence) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;) referenceSequence.onNext(&quot;&quot;) sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)} æ•°å­¦æ“ä½œtoArrayå°†sequenceè½¬æ¢æˆä¸€ä¸ªarrayï¼Œå¹¶è½¬æ¢æˆå•ä¸€äº‹ä»¶ä¿¡å·ï¼Œç„¶åç»“æŸ 1234567let disposeBag = DisposeBag() Observable.range(start: 1, count: 10) .toArray() .subscribe { print($0) } .addDisposableTo(disposeBag) 123next([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])completed reduceç”¨ä¸€ä¸ªåˆå§‹å€¼ï¼Œå¯¹äº‹ä»¶æ•°æ®è¿›è¡Œç´¯è®¡æ“ä½œã€‚reduceæ¥å—ä¸€ä¸ªåˆå§‹å€¼ï¼Œå’Œä¸€ä¸ªæ“ä½œç¬¦å· 1234567let disposeBag = DisposeBag() Observable.of(10, 100, 1000) .reduce(1, accumulator: +) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 1231111concat concatä¼šæŠŠå¤šä¸ªsequenceå’Œå¹¶ä¸ºä¸€ä¸ªsequenceï¼Œå¹¶ä¸”å½“å‰é¢ä¸€ä¸ªsequenceå‘å‡ºäº†completedäº‹ä»¶ï¼Œæ‰ä¼šå¼€å§‹ä¸‹ä¸€ä¸ªsequenceçš„äº‹ä»¶ã€‚åœ¨ç¬¬ä¸€sequenceå®Œæˆä¹‹å‰ï¼Œç¬¬äºŒä¸ªsequenceå‘å‡ºçš„äº‹ä»¶éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä½†ä¼šæ¥æ”¶ä¸€å®Œæˆä¹‹å‰çš„äºŒå‘å‡ºçš„æœ€åä¸€ä¸ªäº‹ä»¶ã€‚ä¸å¥½è§£é‡Šï¼Œçœ‹ä¾‹å­è¯´æ˜ 1234567891011121314151617181920212223242526let disposeBag = DisposeBag() let subject1 = BehaviorSubject(value: &quot;&quot;)let subject2 = BehaviorSubject(value: &quot;&quot;) let variable = Variable(subject1) variable.asObservable() .concat() .subscribe { print($0) } .addDisposableTo(disposeBag) subject1.onNext(&quot;&quot;)subject1.onNext(&quot;&quot;) variable.value = subject2 subject2.onNext(&quot;&quot;) //1å®Œæˆå‰ï¼Œä¼šè¢«å¿½ç•¥subject2.onNext(&quot;teng&quot;) //1å®Œæˆå‰ï¼Œä¼šè¢«å¿½ç•¥subject2.onNext(&quot;fei&quot;) //1å®Œæˆå‰çš„æœ€åä¸€ä¸ªï¼Œä¼šè¢«æ¥æ”¶ subject1.onCompleted() subject2.onNext(&quot;&quot;) 123456next()next()next()next(fei)next() è¿æ¥æ€§æ“ä½œConnectable Observableæœ‰è®¢é˜…æ—¶ä¸å¼€å§‹å‘å°„äº‹ä»¶æ¶ˆæ¯ï¼Œè€Œæ˜¯ä»…å½“è°ƒç”¨å®ƒä»¬çš„connectï¼ˆï¼‰æ–¹æ³•æ—¶ã€‚è¿™æ ·å°±å¯ä»¥ç­‰å¾…æ‰€æœ‰æˆ‘ä»¬æƒ³è¦çš„è®¢é˜…è€…éƒ½å·²ç»è®¢é˜…äº†ä»¥åï¼Œå†å¼€å§‹å‘å‡ºäº‹ä»¶æ¶ˆæ¯ï¼Œè¿™æ ·èƒ½ä¿è¯æˆ‘ä»¬æƒ³è¦çš„æ‰€æœ‰è®¢é˜…è€…éƒ½èƒ½æ¥æ”¶åˆ°äº‹ä»¶æ¶ˆæ¯ã€‚å…¶å®ä¹Ÿå°±æ˜¯ç­‰å¤§å®¶éƒ½å°±ä½ä»¥åï¼Œå¼€å§‹å‘å‡ºæ¶ˆæ¯ã€‚ publishå°†ä¸€ä¸ªæ­£å¸¸çš„sequenceè½¬æ¢æˆä¸€ä¸ªconnectable sequence 123456789101112131415161718let intSequence = Observable.interval(1, scheduler: MainScheduler.instance) .publish() _ = intSequence .subscribe(onNext: { print(&quot;Subscription 1:, Event: \\($0)&quot;) }) delay(2) { _ = intSequence.connect() } //ç›¸å½“äºæŠŠäº‹ä»¶æ¶ˆæ¯æ¨è¿Ÿäº†ä¸¤ç§’ delay(4) { _ = intSequence .subscribe(onNext: { print(&quot;Subscription 2:, Event: \\($0)&quot;) })} delay(6) { _ = intSequence .subscribe(onNext: { print(&quot;Subscription 3:, Event: \\($0)&quot;) })} 1234567891011Subscription 1:, Event: 0Subscription 1:, Event: 1Subscription 2:, Event: 1Subscription 1:, Event: 2Subscription 2:, Event: 2Subscription 1:, Event: 3Subscription 3:, Event: 3Subscription 2:, Event: 3Subscription 1:, Event: 4Subscription 3:, Event: 4 replayå°†ä¸€ä¸ªæ­£å¸¸çš„sequenceè½¬æ¢æˆä¸€ä¸ªconnectable sequenceï¼Œç„¶åå’ŒreplaySubjectç›¸ä¼¼ï¼Œèƒ½æ¥æ”¶åˆ°è®¢é˜…ä¹‹å‰çš„äº‹ä»¶æ¶ˆæ¯ã€‚ 123456789101112131415161718let intSequence = Observable.interval(1, scheduler: MainScheduler.instance) .replay(5) //æ¥æ”¶åˆ°è®¢é˜…ä¹‹å‰çš„5æ¡äº‹ä»¶æ¶ˆæ¯ _ = intSequence .subscribe(onNext: { print(&quot;Subscription 1:, Event: \\($0)&quot;) }) delay(2) { _ = intSequence.connect() } delay(4) { _ = intSequence .subscribe(onNext: { print(&quot;Subscription 2:, Event: \\($0)&quot;) })} delay(8) { _ = intSequence .subscribe(onNext: { print(&quot;Subscription 3:, Event: \\($0)&quot;) })} multicastå°†ä¸€ä¸ªæ­£å¸¸çš„sequenceè½¬æ¢æˆä¸€ä¸ªconnectable sequenceï¼Œå¹¶ä¸”é€šè¿‡ç‰¹æ€§çš„subjectå‘é€å‡ºå»ï¼Œæ¯”å¦‚PublishSubjectï¼Œæˆ–è€…replaySubjectï¼ŒbehaviorSubjectç­‰ã€‚ä¸åŒçš„Subjectä¼šæœ‰ä¸åŒçš„ç»“æœã€‚ 123456789101112131415161718let subject = PublishSubject() _ = subject .subscribe(onNext: { print(&quot;Subject: \\($0)&quot;) }) let intSequence = Observable.interval(1, scheduler: MainScheduler.instance) .multicast(subject) _ = intSequence .subscribe(onNext: { print(&quot;\\tSubscription 1:, Event: \\($0)&quot;) }) delay(2) { _ = intSequence.connect() } delay(4) { _ = intSequence .subscribe(onNext: { print(&quot;\\tSubscription 2:, Event: \\($0)&quot;) })} é”™è¯¯å¤„ç†catchErrorJustReturné‡åˆ°erroräº‹ä»¶çš„æ—¶å€™ï¼Œå°±returnä¸€ä¸ªå€¼ï¼Œç„¶åç»“æŸ 123456789101112131415let disposeBag = DisposeBag() let sequenceThatFails = PublishSubject() sequenceThatFails .catchErrorJustReturn(&quot;&quot;) .subscribe { print($0) } .addDisposableTo(disposeBag) sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onError(TestError.test) 1234567next()next()next()next()next()completed catchErroræ•è·errorè¿›è¡Œå¤„ç†ï¼Œå¯ä»¥è¿”å›å¦ä¸€ä¸ªsequenceè¿›è¡Œè®¢é˜… 123456789101112131415161718192021let disposeBag = DisposeBag() let sequenceThatFails = PublishSubject()let recoverySequence = PublishSubject() sequenceThatFails .catchError { print(&quot;Error:&quot;, $0) return recoverySequence } .subscribe { print($0) } .addDisposableTo(disposeBag) sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onError(TestError.test) recoverySequence.onNext(&quot;&quot;) 1234567next()next()next()next()Error: testnext() retryé‡è§erroräº‹ä»¶å¯ä»¥è¿›è¡Œé‡è¯•ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œå¯ä»¥è¿›è¡Œé‡æ–°è¿æ¥ 123456789101112131415161718192021222324252627let disposeBag = DisposeBag()var count = 1 let sequenceThatErrors = Observable.create { observer in observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) if count == 1 { observer.onError(TestError.test) print(&quot;Error encountered&quot;) count += 1 } observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) observer.onCompleted() return Disposables.create()} sequenceThatErrors .retry(3) //ä¸ä¼ å…¥æ•°å­—çš„è¯ï¼Œåªä¼šé‡è¯•ä¸€æ¬¡ .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) debugdebugæ‰“å°æ‰€æœ‰çš„è®¢é˜…, äº‹ä»¶å’Œdisposals 123456sequenceThatErrors .retry(3) .debug() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) RxSwift.Resources.totalæŸ¥çœ‹RxSwiftæ‰€æœ‰èµ„æºçš„å ç”¨ 12print(RxSwift.Resources.total) å•Šï¼Œæ–‡ç« ç»ˆäºç»“æŸï¼Œè¿™ç¯‡æ–‡ç« æ¯”è¾ƒé•¿ï¼ŒåŸºæœ¬ä¸Šæ¶µç›–äº†å®˜æ–¹æ–‡æ¡£æ‰€æœ‰çš„æ¦‚å¿µï¼Œå¸Œæœ›èƒ½åœ¨ä½ å­¦ä¹ RxSwiftçš„æ—¶å€™èƒ½æœ‰ä¸€äº›å‚è€ƒä»·å€¼å§ï¼ï¼ï¼ ç¬”è®°æ•´ç†ï¼šEdisonè”ç³»æ–¹å¼ï¼šQQï¼š277593 ï¼ˆç¬”è®°æ„è§å»ºè®®å¯åŠ æ­¤Qï¼Œä¸“äººæ›´æ–°æ­¤ç¬”è®°ï¼‰ï¼›","link":"/program/ï£¿/RxSwift/"},{"title":"ç»†è¯´GCDï¼ˆGrand Central Dispatchï¼‰å¦‚ä½•ç”¨","text":"æ–‡ä¸­è¾ƒè¯¦ç»†ä»‹ç»GCDé˜Ÿåˆ—ï¼Œå„ç§GCDä½¿ç”¨æ–¹æ³•ï¼Œå®ä¾‹å¦‚ä½•ä½¿ç”¨Dispatch Sourceç›‘å¬ç³»ç»Ÿåº•å±‚å¯¹è±¡ï¼Œåˆ†æä¸åŒé”çš„æ€§èƒ½å¯¹æ¯”ï¼Œå®ä¾‹GCDæ­»é”æƒ…å†µã€‚æ–‡ä¸­çš„Demoåœ¨è¿™é‡Œ https://github.com/ming1016/GCDDemo å¯¹ç€æ–‡ç« è¯•ç€æ¥è°ƒdemoä½“ä¼šæ›´æ·±å“¦ï¼Œç»†ç»†åš¼æ¶ˆåŒ–å¥½:) GCDï¼ˆGrand Central Dispatchï¼‰ ä»‹ç»GCDå±äºç³»ç»Ÿçº§çš„çº¿ç¨‹ç®¡ç†ï¼Œåœ¨Dispatch queueä¸­æ‰§è¡Œéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡æ€§èƒ½éå¸¸çš„é«˜ã€‚GCDè¿™å—å·²ç»å¼€æºï¼Œåœ°å€https://libdispatch.macosforge.orgã€‚GCDä¸­çš„FIFOé˜Ÿåˆ—ç§°ä¸ºdispatch queueï¼Œç”¨æ¥ä¿è¯å…ˆè¿›æ¥çš„ä»»åŠ¡å…ˆå¾—åˆ°æ‰§è¡Œã€‚ GCDæ¦‚è¦ å’Œoperation queueä¸€æ ·éƒ½æ˜¯åŸºäºé˜Ÿåˆ—çš„å¹¶å‘ç¼–ç¨‹APIï¼Œä»–ä»¬é€šè¿‡é›†ä¸­ç®¡ç†å¤§å®¶ååŒä½¿ç”¨çš„çº¿ç¨‹æ± ã€‚ å…¬å¼€çš„5ä¸ªä¸åŒé˜Ÿåˆ—ï¼šè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­çš„main queueï¼Œ3ä¸ªä¸åŒä¼˜å…ˆçº§çš„åå°é˜Ÿåˆ—ï¼ˆHigh Priority Queueï¼ŒDefault Priority Queueï¼ŒLow Priority Queueï¼‰ï¼Œä»¥åŠä¸€ä¸ªä¼˜å…ˆçº§æ›´ä½çš„åå°é˜Ÿåˆ—Background Priority Queueï¼ˆç”¨äºI/Oï¼‰ å¯åˆ›å»ºè‡ªå®šä¹‰é˜Ÿåˆ—ï¼šä¸²è¡Œæˆ–å¹¶åˆ—é˜Ÿåˆ—ã€‚è‡ªå®šä¹‰ä¸€èˆ¬æ”¾åœ¨Default Priority Queueå’ŒMain Queueé‡Œã€‚ æ“ä½œæ˜¯åœ¨å¤šçº¿ç¨‹ä¸Šè¿˜æ˜¯å•çº¿ç¨‹ä¸»è¦æ˜¯çœ‹é˜Ÿåˆ—çš„ç±»å‹å’Œæ‰§è¡Œæ–¹æ³•ï¼Œå¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œæ‰èƒ½åœ¨å¤šçº¿ç¨‹ï¼Œå¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œå°±åªä¼šåœ¨è¿™ä¸ªå¹¶è¡Œé˜Ÿåˆ—åœ¨é˜Ÿåˆ—ä¸­è¢«åˆ†é…çš„é‚£ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ï¼ˆTorchLennon æŒ‡å‡ºå…ˆå‰æ–‡ä¸­æ­¤å¥ä¸€å¤„é”™è¯¯ï¼‰ åŸºæœ¬æ¦‚å¿µ ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ— 1234//å…¨å±€é˜Ÿåˆ—ï¼Œä¸€ä¸ªå¹¶è¡Œçš„é˜Ÿåˆ—dispatch_get_global_queue//ä¸»é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹ä¸­çš„å”¯ä¸€é˜Ÿåˆ—ï¼Œä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—dispatch_get_main_queue è‡ªå®šä¹‰é˜Ÿåˆ— 1234//ä¸²è¡Œé˜Ÿåˆ—dispatch_queue_create(&quot;com.starming.serialqueue&quot;, DISPATCH_QUEUE_SERIAL)//å¹¶è¡Œé˜Ÿåˆ—dispatch_queue_create(&quot;com.starming.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT) åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º 1234//åŒæ­¥çº¿ç¨‹dispatch_sync(..., ^(block))//å¼‚æ­¥çº¿ç¨‹dispatch_async(..., ^(block)) é˜Ÿåˆ—ï¼ˆdispatch queueï¼‰ Serialï¼šåˆå«private dispatch queuesï¼ŒåŒæ—¶åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚Serial queueå¸¸ç”¨äºåŒæ­¥è®¿é—®ç‰¹å®šçš„èµ„æºæˆ–æ•°æ®ã€‚å½“ä½ åˆ›å»ºå¤šä¸ªSerial queueæ—¶ï¼Œè™½ç„¶å„è‡ªæ˜¯åŒæ­¥ï¼Œä½†serial queueä¹‹é—´æ˜¯å¹¶å‘æ‰§è¡Œã€‚ Main dispatch queueï¼šå…¨å±€å¯ç”¨çš„serial queueï¼Œåœ¨åº”ç”¨ç¨‹åºä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œä»»åŠ¡ã€‚ Concurrentï¼šåˆå«global dispatch queueï¼Œå¯ä»¥å¹¶å‘çš„æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä½†æ‰§è¡Œå®Œæˆé¡ºåºæ˜¯éšæœºçš„ã€‚ç³»ç»Ÿæä¾›å››ä¸ªå…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼Œè¿™å››ä¸ªé˜Ÿåˆ—æœ‰è¿™å¯¹åº”çš„ä¼˜å…ˆçº§ï¼Œç”¨æˆ·æ˜¯ä¸èƒ½å¤Ÿåˆ›å»ºå…¨å±€é˜Ÿåˆ—çš„ï¼Œåªèƒ½è·å–ã€‚ 12dipatch_queue_t queue;queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0); user create queueï¼šåˆ›å»ºè‡ªå·±å®šä¹‰çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ç”¨dispatch_queue_createå‡½æ•°ï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„é˜Ÿåˆ—åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é˜Ÿåˆ—ç±»å‹ï¼Œé»˜è®¤NULLæˆ–è€…DISPATCH_QUEUE_SERIALçš„æ˜¯ä¸²è¡Œï¼Œå‚æ•°ä¸ºDISPATCH_QUEUE_CONCURRENTä¸ºå¹¶è¡Œé˜Ÿåˆ—ã€‚ 12dispatch_queue_t queuequeue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT); è‡ªå®šä¹‰é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼šå¯ä»¥é€šè¿‡dipatch_queue_attr_make_with_qos_classæˆ–dispatch_set_target_queueæ–¹æ³•è®¾ç½®é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ 12345678//dipatch_queue_attr_make_with_qos_classdispatch_queue_attr_t attr = dispatch_queue_attr_make_with_qos_class(DISPATCH_QUEUE_SERIAL, QOS_CLASS_UTILITY, -1);dispatch_queue_t queue = dispatch_queue_create(&quot;com.starming.gcddemo.qosqueue&quot;, attr);//dispatch_set_target_queuedispatch_queue_t queue = dispatch_queue_create(&quot;com.starming.gcddemo.settargetqueue&quot;,NULL); //éœ€è¦è®¾ç½®ä¼˜å…ˆçº§çš„queuedispatch_queue_t referQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0); //å‚è€ƒä¼˜å…ˆçº§dispatch_set_target_queue(queue, referQueue); //è®¾ç½®queueå’ŒreferQueueçš„ä¼˜å…ˆçº§ä¸€æ · dispatch_set_target_queueï¼šå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ï¼Œä¹Ÿå¯ä»¥è®¾ç½®é˜Ÿåˆ—å±‚çº§ä½“ç³»ï¼Œæ¯”å¦‚è®©å¤šä¸ªä¸²è¡Œå’Œå¹¶è¡Œé˜Ÿåˆ—åœ¨ç»Ÿä¸€ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—é‡Œä¸²è¡Œæ‰§è¡Œï¼Œå¦‚ä¸‹ 12345678910111213141516171819dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL);dispatch_queue_t firstQueue = dispatch_queue_create(&quot;com.starming.gcddemo.firstqueue&quot;, DISPATCH_QUEUE_SERIAL);dispatch_queue_t secondQueue = dispatch_queue_create(&quot;com.starming.gcddemo.secondqueue&quot;, DISPATCH_QUEUE_CONCURRENT);dispatch_set_target_queue(firstQueue, serialQueue);dispatch_set_target_queue(secondQueue, serialQueue);dispatch_async(firstQueue, ^{ NSLog(@&quot;1&quot;); [NSThread sleepForTimeInterval:3.f];});dispatch_async(secondQueue, ^{ NSLog(@&quot;2&quot;); [NSThread sleepForTimeInterval:2.f];});dispatch_async(secondQueue, ^{ NSLog(@&quot;3&quot;); [NSThread sleepForTimeInterval:1.f];}); é˜Ÿåˆ—ç±»å‹é˜Ÿåˆ—é»˜è®¤æ˜¯ä¸²è¡Œçš„ï¼Œå¦‚æœè®¾ç½®æ”¹å‚æ•°ä¸ºNULLä¼šæŒ‰ä¸²è¡Œå¤„ç†ï¼Œåªèƒ½æ‰§è¡Œä¸€ä¸ªå•ç‹¬çš„blockï¼Œé˜Ÿåˆ—ä¹Ÿå¯ä»¥æ˜¯å¹¶è¡Œçš„ï¼ŒåŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªblock 123456789101112- (id)init;{ self = [super init]; if (self != nil) { NSString *label = [NSString stringWithFormat:@&quot;%@.isolation.%p&quot;, [self class], self]; self.isolationQueue = dispatch_queue_create([label UTF8String], 0); label = [NSString stringWithFormat:@&quot;%@.work.%p&quot;, [self class], self]; self.workQueue = dispatch_queue_create([label UTF8String], 0); } return self;} 5ç§é˜Ÿåˆ—ï¼Œä¸»é˜Ÿåˆ—ï¼ˆmain queueï¼‰,å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ï¼Œè‡ªå·±å®šåˆ¶çš„é˜Ÿåˆ—ã€‚å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ä¸º QOS_CLASS_USER_INTERACTIVEï¼šuser interactiveç­‰çº§è¡¨ç¤ºä»»åŠ¡éœ€è¦è¢«ç«‹å³æ‰§è¡Œæä¾›å¥½çš„ä½“éªŒï¼Œç”¨æ¥æ›´æ–°UIï¼Œå“åº”äº‹ä»¶ç­‰ã€‚è¿™ä¸ªç­‰çº§æœ€å¥½ä¿æŒå°è§„æ¨¡ã€‚ QOS_CLASS_USER_INITIATEDï¼šuser initiatedç­‰çº§è¡¨ç¤ºä»»åŠ¡ç”±UIå‘èµ·å¼‚æ­¥æ‰§è¡Œã€‚é€‚ç”¨åœºæ™¯æ˜¯éœ€è¦åŠæ—¶ç»“æœåŒæ—¶åˆå¯ä»¥ç»§ç»­äº¤äº’çš„æ—¶å€™ã€‚ QOS_CLASS_UTILITYï¼šutilityç­‰çº§è¡¨ç¤ºéœ€è¦é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œä¼´æœ‰ç”¨æˆ·å¯è§è¿›åº¦æŒ‡ç¤ºå™¨ã€‚ç»å¸¸ä¼šç”¨æ¥åšè®¡ç®—ï¼ŒI/Oï¼Œç½‘ç»œï¼ŒæŒç»­çš„æ•°æ®å¡«å……ç­‰ä»»åŠ¡ã€‚è¿™ä¸ªä»»åŠ¡èŠ‚èƒ½ã€‚ QOS_CLASS_BACKGROUNDï¼šbackgroundç­‰çº§è¡¨ç¤ºç”¨æˆ·ä¸ä¼šå¯Ÿè§‰çš„ä»»åŠ¡ï¼Œä½¿ç”¨å®ƒæ¥å¤„ç†é¢„åŠ è½½ï¼Œæˆ–è€…ä¸éœ€è¦ç”¨æˆ·äº¤äº’å’Œå¯¹æ—¶é—´ä¸æ•æ„Ÿçš„ä»»åŠ¡ã€‚ ç¤ºä¾‹ï¼šåå°åŠ è½½æ˜¾ç¤ºå›¾ç‰‡ 12345678910override func viewDidLoad() { super.viewDidLoad() dispatch_async(dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)) { // å°†å·¥ä½œä»ä¸»çº¿ç¨‹è½¬ç§»åˆ°å…¨å±€é˜Ÿåˆ—ä¸­ï¼Œè¿™æ˜¯dispatch_asyncè°ƒç”¨ï¼Œå¼‚æ­¥æäº¤ä¿è¯è°ƒç”¨çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œè¿™æ ·viewDidLoadåœ¨ä¸»çº¿ç¨‹ä¸Šèƒ½å¤Ÿæ›´æ—©å®Œæˆï¼Œ let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(dispatch_get_main_queue()) { // æ–°å›¾å®Œæˆï¼ŒæŠŠä¸€ä¸ªé—­åŒ…åŠ å…¥ä¸»çº¿ç¨‹ç”¨æ¥æ›´æ–°UIImageViewï¼Œåªæœ‰åœ¨ä¸»çº¿ç¨‹èƒ½æ“ä½œUIKitã€‚ self.fadeInNewImage(overlayImage) // æ›´æ–°UI } }} ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹ ä¸»é˜Ÿåˆ—ï¼ˆé¡ºåºï¼‰ï¼šé˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡å®Œæˆéœ€è¦æ›´æ–°UIæ—¶ï¼Œdispatch_afteråœ¨è¿™ç§ç±»å‹ä¸­ä½¿ç”¨ã€‚ å¹¶å‘é˜Ÿåˆ—ï¼šç”¨æ¥æ‰§è¡Œä¸UIæ— å…³çš„åå°ä»»åŠ¡ï¼Œdispatch_syncæ”¾åœ¨è¿™é‡Œï¼Œæ–¹ä¾¿ç­‰å¾…ä»»åŠ¡å®Œæˆè¿›è¡Œåç»­å¤„ç†æˆ–å’Œdispatch barrieråŒæ­¥ã€‚dispatch groupsæ”¾åœ¨è¿™é‡Œä¹Ÿä¸é”™ã€‚ è‡ªå®šä¹‰é¡ºåºé˜Ÿåˆ—ï¼šé¡ºåºæ‰§è¡Œåå°ä»»åŠ¡å¹¶è¿½è¸ªå®ƒæ—¶ã€‚è¿™æ ·åšåŒæ—¶åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œå¯ä»¥é˜²æ­¢èµ„æºç«äº‰ã€‚dipatch barriersè§£å†³è¯»å†™é”é—®é¢˜çš„æ”¾åœ¨è¿™é‡Œå¤„ç†ã€‚dispatch groupsä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œã€‚ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ç®€åŒ–QoSç­‰çº§å‚æ•°çš„å†™æ³• 1234567891011121314151617181920212223var GlobalMainQueue: dispatch_queue_t { return dispatch_get_main_queue()}var GlobalUserInteractiveQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_USER_INTERACTIVE.value), 0)}var GlobalUserInitiatedQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)}var GlobalUtilityQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_UTILITY.value), 0)}var GlobalBackgroundQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_BACKGROUND.value), 0)}//ä½¿ç”¨èµ·æ¥å°±æ˜¯è¿™æ ·ï¼Œæ˜“è¯»è€Œä¸”å®¹æ˜“çœ‹å‡ºåœ¨ä½¿ç”¨å“ªä¸ªé˜Ÿåˆ—dispatch_async(GlobalUserInitiatedQueue) { let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(GlobalMainQueue) { self.fadeInNewImage(overlayImage) }} dispatch_onceç”¨æ³•dispatch_once_tè¦æ˜¯å…¨å±€æˆ–staticå˜é‡ï¼Œä¿è¯dispatch_once_tåªæœ‰ä¸€ä»½å®ä¾‹ 12345678910+ (UIColor *)boringColor;{ static UIColor *color; //åªè¿è¡Œä¸€æ¬¡ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ color = [UIColor colorWithRed:0.380f green:0.376f blue:0.376f alpha:1.000f]; }); return color;} dispatch_asyncè®¾è®¡ä¸€ä¸ªå¼‚æ­¥çš„APIè°ƒç”¨dispatch_async()ï¼Œè¿™ä¸ªè°ƒç”¨æ”¾åœ¨APIçš„æ–¹æ³•æˆ–å‡½æ•°ä¸­åšã€‚è®©APIçš„ä½¿ç”¨è€…è®¾ç½®ä¸€ä¸ªå›è°ƒå¤„ç†é˜Ÿåˆ— 123456789- (void)processImage:(UIImage *)image completionHandler:(void(^)(BOOL success))handler;{ dispatch_async(self.isolationQueue, ^(void){ // do actual processing here dispatch_async(self.resultQueue, ^(void){ handler(YES); }); });} å¯ä»¥é¿å…ç•Œé¢ä¼šè¢«ä¸€äº›è€—æ—¶çš„æ“ä½œå¡æ­»ï¼Œæ¯”å¦‚è¯»å–ç½‘ç»œæ•°æ®ï¼Œå¤§æ•°æ®IOï¼Œè¿˜æœ‰å¤§é‡æ•°æ®çš„æ•°æ®åº“è¯»å†™ï¼Œè¿™æ—¶éœ€è¦åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­å¤„ç†ï¼Œç„¶åé€šçŸ¥ä¸»çº¿ç¨‹æ›´æ–°ç•Œé¢ï¼ŒGCDä½¿ç”¨èµ·æ¥æ¯”NSThreadå’ŒNSOperationæ–¹æ³•è¦ç®€å•æ–¹ä¾¿ã€‚ 12345678910111213141516171819//ä»£ç æ¡†æ¶dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ // è€—æ—¶çš„æ“ä½œ dispatch_async(dispatch_get_main_queue(), ^{ // æ›´æ–°ç•Œé¢ });});//ä¸‹è½½å›¾ç‰‡çš„ç¤ºä¾‹dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ NSURL * url = [NSURL URLWithString:@&quot;https://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;]; NSData * data = [[NSData alloc]initWithContentsOfURL:url]; UIImage *image = [[UIImage alloc]initWithData:data]; if (data != nil) { dispatch_async(dispatch_get_main_queue(), ^{ self.imageView.image = image; }); }}); dispatch_afterå»¶åæ‰§è¡Œdispatch_afteråªæ˜¯å»¶æ—¶æäº¤blockï¼Œä¸æ˜¯å»¶æ—¶ç«‹åˆ»æ‰§è¡Œã€‚ 12345678- (void)foo{ double delayInSeconds = 2.0; dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t) (delayInSeconds * NSEC_PER_SEC)); dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ [self bar]; });} èŒƒä¾‹ï¼Œå®ç°ä¸€ä¸ªæ¨è¿Ÿå‡ºç°å¼¹å‡ºæ¡†æç¤ºï¼Œæ¯”å¦‚è¯´æç¤ºç”¨æˆ·è¯„ä»·ç­‰åŠŸèƒ½ã€‚ 12345678910111213func showOrHideNavPrompt() { let delayInSeconds = 1.0 let popTime = dispatch_time(DISPATCH_TIME_NOW, Int64(delayInSeconds * Double(NSEC_PER_SEC))) // åœ¨è¿™é‡Œå£°æ˜æ¨è¿Ÿçš„æ—¶é—´ dispatch_after(popTime, GlobalMainQueue) { // ç­‰å¾…delayInSecondså°†é—­åŒ…å¼‚æ­¥åˆ°ä¸»é˜Ÿåˆ— let count = PhotoManager.sharedManager.photos.count if count &gt; 0 { self.navigationItem.prompt = nil } else { self.navigationItem.prompt = &quot;Add photos with faces to Googlyify them!&quot; } }} ä¾‹å­ä¸­çš„dispatch timeçš„å‚æ•°ï¼Œå¯ä»¥å…ˆçœ‹çœ‹å‡½æ•°åŸå‹ 1dispatch_time_t dispatch_time ( dispatch_time_t when, int64_t delta ); ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºDISPATCH_TIME_NOWè¡¨ç¤ºå½“å‰ã€‚ç¬¬äºŒä¸ªå‚æ•°çš„deltaè¡¨ç¤ºçº³ç§’ï¼Œä¸€ç§’å¯¹åº”çš„çº³ç§’ä¸º1000000000ï¼Œç³»ç»Ÿæä¾›äº†ä¸€äº›å®æ¥ç®€åŒ– 123#define NSEC_PER_SEC 1000000000ull //æ¯ç§’æœ‰å¤šå°‘çº³ç§’#define USEC_PER_SEC 1000000ull //æ¯ç§’æœ‰å¤šå°‘æ¯«ç§’#define NSEC_PER_USEC 1000ull //æ¯æ¯«ç§’æœ‰å¤šå°‘çº³ç§’ è¿™æ ·å¦‚æœè¦è¡¨ç¤ºä¸€ç§’å°±å¯ä»¥è¿™æ ·å†™ 123dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);dispatch_time(DISPATCH_TIME_NOW, 1000 * USEC_PER_SEC);dispatch_time(DISPATCH_TIME_NOW, USEC_PER_SEC * NSEC_PER_USEC); dispatch_barrier_asyncä½¿ç”¨Barrier Taskæ–¹æ³•Dispatch Barrierè§£å†³å¤šçº¿ç¨‹å¹¶å‘è¯»å†™åŒä¸€ä¸ªèµ„æºå‘ç”Ÿæ­»é”Dispatch Barrierç¡®ä¿æäº¤çš„é—­åŒ…æ˜¯æŒ‡å®šé˜Ÿåˆ—ä¸­åœ¨ç‰¹å®šæ—¶æ®µå”¯ä¸€åœ¨æ‰§è¡Œçš„ä¸€ä¸ªã€‚åœ¨æ‰€æœ‰å…ˆäºDispatch Barrierçš„ä»»åŠ¡éƒ½å®Œæˆçš„æƒ…å†µä¸‹è¿™ä¸ªé—­åŒ…æ‰å¼€å§‹æ‰§è¡Œã€‚è½®åˆ°è¿™ä¸ªé—­åŒ…æ—¶barrierä¼šæ‰§è¡Œè¿™ä¸ªé—­åŒ…å¹¶ä¸”ç¡®ä¿é˜Ÿåˆ—åœ¨æ­¤è¿‡ç¨‹ä¸ä¼šæ‰§è¡Œå…¶å®ƒä»»åŠ¡ã€‚é—­åŒ…å®Œæˆåé˜Ÿåˆ—æ¢å¤ã€‚éœ€è¦æ³¨æ„dispatch_barrier_asyncåªåœ¨è‡ªå·±åˆ›å»ºçš„é˜Ÿåˆ—ä¸Šæœ‰è¿™ç§ä½œç”¨ï¼Œåœ¨å…¨å±€å¹¶å‘é˜Ÿåˆ—å’Œä¸²è¡Œé˜Ÿåˆ—ä¸Šï¼Œæ•ˆæœå’Œdispatch_syncä¸€æ · 1234567891011121314151617181920212223242526272829303132333435363738//åˆ›å»ºé˜Ÿåˆ—self.isolationQueue = dispatch_queue_create([label UTF8String], DISPATCH_QUEUE_CONCURRENT);//æ”¹å˜setter- (void)setCount:(NSUInteger)count forKey:(NSString *)key{ key = [key copy]; //ç¡®ä¿æ‰€æœ‰barrieréƒ½æ˜¯asyncå¼‚æ­¥çš„ dispatch_barrier_async(self.isolationQueue, ^(){ if (count == 0) { [self.counts removeObjectForKey:key]; } else { self.counts[key] = @(count); } });}- (void)dispatchBarrierAsyncDemo { //é˜²æ­¢æ–‡ä»¶è¯»å†™å†²çªï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œæ“ä½œéƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­è¿›è¡Œï¼Œæ²¡æœ‰æ›´æ–°æ•°æ®è¯»ç”¨å¹¶è¡Œï¼Œå†™ç”¨ä¸²è¡Œã€‚ dispatch_queue_t dataQueue = dispatch_queue_create(&quot;com.starming.gcddemo.dataqueue&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_async(dataQueue, ^{ [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;read data 1&quot;); }); dispatch_async(dataQueue, ^{ NSLog(@&quot;read data 2&quot;); }); //ç­‰å¾…å‰é¢çš„éƒ½å®Œæˆï¼Œåœ¨æ‰§è¡Œbarrieråé¢çš„ dispatch_barrier_async(dataQueue, ^{ NSLog(@&quot;write data 1&quot;); [NSThread sleepForTimeInterval:1]; }); dispatch_async(dataQueue, ^{ [NSThread sleepForTimeInterval:1.f]; NSLog(@&quot;read data 3&quot;); }); dispatch_async(dataQueue, ^{ NSLog(@&quot;read data 4&quot;); });} swiftç¤ºä¾‹ 12345678910111213141516171819202122//ä½¿ç”¨dispatch_queue_createåˆå§‹åŒ–ä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—ã€‚ç¬¬ä¸€ä¸ªå‚æ•°éµå¾ªåå‘DNSå‘½åä¹ æƒ¯ï¼Œæ–¹ä¾¿æè¿°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å‡ºæ˜¯å¹¶å‘è¿˜æ˜¯é¡ºåºã€‚private let concurrentPhotoQueue = dispatch_queue_create(&quot;com.raywenderlich.GooglyPuff.photoQueue&quot;, DISPATCH_QUEUE_CONCURRENT)func addPhoto(photo: Photo) { dispatch_barrier_async(concurrentPhotoQueue) { // å°†å†™æ“ä½œåŠ å…¥åˆ°è‡ªå®šä¹‰çš„é˜Ÿåˆ—ã€‚å¼€å§‹æ‰§è¡Œæ—¶è¿™ä¸ªå°±æ˜¯é˜Ÿåˆ—ä¸­å”¯ä¸€çš„ä¸€ä¸ªåœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚ self._photos.append(photo) // barrierèƒ½å¤Ÿä¿éšœä¸ä¼šå’Œå…¶ä»–ä»»åŠ¡åŒæ—¶è¿›è¡Œã€‚ dispatch_async(GlobalMainQueue) { // æ¶‰åŠåˆ°UIæ‰€ä»¥è¿™ä¸ªé€šçŸ¥åº”è¯¥åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥åˆ†æ´¾å¦ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡åˆ°ä¸»é˜Ÿåˆ—ä¸­ã€‚ self.postContentAddedNotification() } }}//ä¸Šé¢æ˜¯è§£å†³äº†å†™å¯èƒ½å‘ç”Ÿæ­»é”ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨dispatch_syncè§£å†³è¯»æ—¶å¯èƒ½ä¼šå‘ç”Ÿçš„æ­»é”ã€‚var photos: [Photo] { var photosCopy: [Photo]! dispatch_sync(concurrentPhotoQueue) { // åŒæ­¥è°ƒåº¦åˆ°concurrentPhotoQueueé˜Ÿåˆ—æ‰§è¡Œè¯»æ“ä½œ photosCopy = self._photos // ä¿å­˜ } return photosCopy}//è¿™æ ·è¯»å†™é—®é¢˜éƒ½è§£å†³äº†ã€‚ éƒ½ç”¨å¼‚æ­¥å¤„ç†é¿å…æ­»é”ï¼Œå¼‚æ­¥çš„ç¼ºç‚¹åœ¨äºè°ƒè¯•ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯æ¯”èµ·åŒæ­¥å®¹æ˜“äº§ç”Ÿæ­»é”è¿™ä¸ªå‰¯ä½œç”¨è¿˜ç®—å°çš„ã€‚ dispatch_applyè¿›è¡Œå¿«é€Ÿè¿­ä»£ç±»ä¼¼forå¾ªç¯ï¼Œä½†æ˜¯åœ¨å¹¶å‘é˜Ÿåˆ—çš„æƒ…å†µä¸‹dispatch_applyä¼šå¹¶å‘æ‰§è¡Œblockä»»åŠ¡ã€‚ 12345678910111213for (size_t y = 0; y &lt; height; ++y) { for (size_t x = 0; x &lt; width; ++x) { // Do something with x and y here }}//å› ä¸ºå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨dispatch_applyå¯ä»¥è¿è¡Œçš„æ›´å¿«- (void)dispatchApplyDemo { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_apply(10, concurrentQueue, ^(size_t i) { NSLog(@&quot;%zu&quot;,i); }); NSLog(@&quot;The end&quot;); //è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdispatch_applyè¿™ä¸ªæ˜¯ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„ã€‚è¿™ä¸ªlogæ‰“å°ä¼šåœ¨dispatch_applyéƒ½ç»“æŸåæ‰å¼€å§‹æ‰§è¡Œ} dispatch_applyèƒ½é¿å…çº¿ç¨‹çˆ†ç‚¸ï¼Œå› ä¸ºGCDä¼šç®¡ç†å¹¶å‘ 123456789101112131415161718- (void)dealWiththreadWithMaybeExplode:(BOOL)explode { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); if (explode) { //æœ‰é—®é¢˜çš„æƒ…å†µï¼Œå¯èƒ½ä¼šæ­»é” for (int i = 0; i &lt; 999 ; i++) { dispatch_async(concurrentQueue, ^{ NSLog(@&quot;wrong %d&quot;,i); //do something hard }); } } else { //ä¼šä¼˜åŒ–å¾ˆå¤šï¼Œèƒ½å¤Ÿåˆ©ç”¨GCDç®¡ç† dispatch_apply(999, concurrentQueue, ^(size_t i){ NSLog(@&quot;correct %zu&quot;,i); //do something hard }); }} ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { var storedError: NSError! var downloadGroup = dispatch_group_create() let addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] dispatch_apply(UInt(addresses.count), GlobalUserInitiatedQueue) { i in let index = Int(i) let address = addresses[index] let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_notify(downloadGroup, GlobalMainQueue) { if let completion = completion { completion(error: storedError) } }} Blockç»„åˆDispatch_groupsdispatch groupsæ˜¯ä¸“é—¨ç”¨æ¥ç›‘è§†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚dispatch_group_tå®ä¾‹ç”¨æ¥è¿½è¸ªä¸åŒé˜Ÿåˆ—ä¸­çš„ä¸åŒä»»åŠ¡ã€‚ å½“groupé‡Œæ‰€æœ‰äº‹ä»¶éƒ½å®ŒæˆGCD APIæœ‰ä¸¤ç§æ–¹å¼å‘é€é€šçŸ¥ï¼Œç¬¬ä¸€ç§æ˜¯dispatch_group_waitï¼Œä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œç­‰æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæˆ–ç­‰å¾…è¶…æ—¶ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨dispatch_group_notifyï¼Œå¼‚æ­¥æ‰§è¡Œé—­åŒ…ï¼Œä¸ä¼šé˜»å¡ã€‚ ç¬¬ä¸€ç§ä½¿ç”¨dispatch_group_waitçš„swiftçš„ä¾‹å­ï¼š 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { dispatch_async(GlobalUserInitiatedQueue) { // å› ä¸ºdispatch_group_waitä¼šç§Ÿå¡å½“å‰è¿›ç¨‹ï¼Œæ‰€ä»¥è¦ä½¿ç”¨dispatch_asyncå°†æ•´ä¸ªæ–¹æ³•è¦æ”¾åˆ°åå°é˜Ÿåˆ—æ‰èƒ½å¤Ÿä¿è¯ä¸»çº¿ç¨‹ä¸è¢«é˜»å¡ var storedError: NSError! var downloadGroup = dispatch_group_create() // åˆ›å»ºä¸€ä¸ªdispatch group for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] { let url = NSURL(string: address) dispatch_group_enter(downloadGroup) // dispatch_group_enteræ˜¯é€šçŸ¥dispatch groupä»»åŠ¡å¼€å§‹äº†ï¼Œdispatch_group_enterå’Œdispatch_group_leaveæ˜¯æˆå¯¹è°ƒç”¨ï¼Œä¸ç„¶ç¨‹åºå°±å´©æºƒäº†ã€‚ let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) // ä¿æŒå’Œdispatch_group_enteré…å¯¹ã€‚é€šçŸ¥ä»»åŠ¡å·²ç»å®Œæˆ } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER) // dispatch_group_waitç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆç›´åˆ°è¶…æ—¶ã€‚å¦‚æœä»»åŠ¡å®Œæˆå‰å°±è¶…æ—¶äº†ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼åˆ¤æ–­æ˜¯å¦è¶…æ—¶ã€‚ä¹Ÿå¯ä»¥ç”¨DISPATCH_TIME_FOREVERè¡¨ç¤ºä¸€ç›´ç­‰ã€‚ dispatch_async(GlobalMainQueue) { // è¿™é‡Œå¯ä»¥ä¿è¯æ‰€æœ‰å›¾ç‰‡ä»»åŠ¡éƒ½å®Œæˆï¼Œç„¶ååœ¨main queueé‡ŒåŠ å…¥å®Œæˆåè¦å¤„ç†çš„é—­åŒ…ï¼Œä¼šåœ¨main queueé‡Œæ‰§è¡Œã€‚ if let completion = completion { // æ‰§è¡Œé—­åŒ…å†…å®¹ completion(error: storedError) } } }} ocä¾‹å­ 1234567891011121314- (void)dispatchGroupWaitDemo { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); //åœ¨groupä¸­æ·»åŠ é˜Ÿåˆ—çš„block dispatch_group_async(group, concurrentQueue, ^{ [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;1&quot;); }); dispatch_group_async(group, concurrentQueue, ^{ NSLog(@&quot;2&quot;); }); dispatch_group_wait(group, DISPATCH_TIME_FOREVER); NSLog(@&quot;go on&quot;);} ç¬¬äºŒç§ä½¿ç”¨dispatch_group_notifyçš„swiftçš„ä¾‹å­ï¼š 123456789101112131415161718192021222324252627func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { // ä¸ç”¨åŠ dispatch_asyncï¼Œå› ä¸ºæ²¡æœ‰é˜»å¡ä¸»è¿›ç¨‹ var storedError: NSError! var downloadGroup = dispatch_group_create() for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] { let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_notify(downloadGroup, GlobalMainQueue) { // dispatch_group_notifyå’Œdispatch_group_waitçš„åŒºåˆ«å°±æ˜¯æ˜¯å¼‚æ­¥æ‰§è¡Œé—­åŒ…çš„ï¼Œå½“dispatch groupsä¸­æ²¡æœ‰å‰©ä½™çš„ä»»åŠ¡æ—¶é—­åŒ…æ‰æ‰§è¡Œã€‚è¿™é‡Œæ˜¯æŒ‡æ˜åœ¨ä¸»é˜Ÿåˆ—ä¸­æ‰§è¡Œã€‚ if let completion = completion { completion(error: storedError) } }} ocä¾‹å­ 1234567891011121314151617181920212223242526272829303132//dispatch_group_notify- (void)dispatchGroupNotifyDemo { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); dispatch_group_async(group, concurrentQueue, ^{ NSLog(@&quot;1&quot;); }); dispatch_group_async(group, concurrentQueue, ^{ NSLog(@&quot;2&quot;); }); dispatch_group_notify(group, dispatch_get_main_queue(), ^{ NSLog(@&quot;end&quot;); }); NSLog(@&quot;can continue&quot;);}//dispatch_group_wait- (void)dispatchGroupWaitDemo { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); //åœ¨groupä¸­æ·»åŠ é˜Ÿåˆ—çš„block dispatch_group_async(group, concurrentQueue, ^{ [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;1&quot;); }); dispatch_group_async(group, concurrentQueue, ^{ NSLog(@&quot;2&quot;); }); dispatch_group_wait(group, DISPATCH_TIME_FOREVER); NSLog(@&quot;can continue&quot;);} å¦‚ä½•å¯¹ç°æœ‰APIä½¿ç”¨dispatch_group_t 12345678910111213141516171819202122232425262728293031323334//ç»™Core Dataçš„-performBlock:æ·»åŠ groupsã€‚ç»„åˆå®Œæˆä»»åŠ¡åä½¿ç”¨dispatch_group_notifyæ¥è¿è¡Œä¸€ä¸ªblockå³å¯ã€‚- (void)withGroup:(dispatch_group_t)group performBlock:(dispatch_block_t)block{ if (group == NULL) { [self performBlock:block]; } else { dispatch_group_enter(group); [self performBlock:^(){ block(); dispatch_group_leave(group); }]; }}//NSURLConnectionä¹Ÿå¯ä»¥è¿™æ ·åš+ (void)withGroup:(dispatch_group_t)group sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler{ if (group == NULL) { [self sendAsynchronousRequest:request queue:queue completionHandler:handler]; } else { dispatch_group_enter(group); [self sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){ handler(response, data, error); dispatch_group_leave(group); }]; }} æ³¨æ„äº‹é¡¹ dispatch_group_asyncç­‰ä»·äºdispatch_group_enter() å’Œ dispatch_group_leave()çš„ç»„åˆã€‚ dispatch_group_enter() å¿…é¡»è¿è¡Œåœ¨ dispatch_group_leave() ä¹‹å‰ã€‚ dispatch_group_enter() å’Œ dispatch_group_leave() éœ€è¦æˆå¯¹å‡ºç°çš„ Dispatch Blocké˜Ÿåˆ—æ‰§è¡Œä»»åŠ¡éƒ½æ˜¯blockçš„æ–¹å¼ï¼Œ åˆ›å»ºblock 1234567891011121314- (void)createDispatchBlock { //normal way dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_block_t block = dispatch_block_create(0, ^{ NSLog(@&quot;run block&quot;); }); dispatch_async(concurrentQueue, block); //QOS way dispatch_block_t qosBlock = dispatch_block_create_with_qos_class(0, QOS_CLASS_USER_INITIATED, -1, ^{ NSLog(@&quot;run qos block&quot;); }); dispatch_async(concurrentQueue, qosBlock);} dispatch_block_waitï¼šå¯ä»¥æ ¹æ®dispatch blockæ¥è®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œå‚æ•°DISPATCH_TIME_FOREVERä¼šä¸€ç›´ç­‰å¾…blockç»“æŸ 123456789101112- (void)dispatchBlockWaitDemo { dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t block = dispatch_block_create(0, ^{ NSLog(@&quot;star&quot;); [NSThread sleepForTimeInterval:5.f]; NSLog(@&quot;end&quot;); }); dispatch_async(serialQueue, block); //è®¾ç½®DISPATCH_TIME_FOREVERä¼šä¸€ç›´ç­‰åˆ°å‰é¢ä»»åŠ¡éƒ½å®Œæˆ dispatch_block_wait(block, DISPATCH_TIME_FOREVER); NSLog(@&quot;ok, now can go on&quot;);} dispatch_block_notifyï¼šå¯ä»¥ç›‘è§†æŒ‡å®šdispatch blockç»“æŸï¼Œç„¶åå†åŠ å…¥ä¸€ä¸ªblockåˆ°é˜Ÿåˆ—ä¸­ã€‚ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼Œç¬¬ä¸€ä¸ªæ˜¯éœ€è¦ç›‘è§†çš„blockï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦æäº¤æ‰§è¡Œçš„é˜Ÿåˆ—ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å¾…åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­çš„block 1234567891011121314- (void)dispatchBlockNotifyDemo { dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t firstBlock = dispatch_block_create(0, ^{ NSLog(@&quot;first block start&quot;); [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;first block end&quot;); }); dispatch_async(serialQueue, firstBlock); dispatch_block_t secondBlock = dispatch_block_create(0, ^{ NSLog(@&quot;second block run&quot;); }); //first blockæ‰§è¡Œå®Œæ‰åœ¨serial queueä¸­æ‰§è¡Œsecond block dispatch_block_notify(firstBlock, serialQueue, secondBlock);} dispatch_block_cancelï¼šiOS8åGCDæ”¯æŒå¯¹dispatch blockçš„å–æ¶ˆ 123456789101112131415- (void)dispatchBlockCancelDemo { dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t firstBlock = dispatch_block_create(0, ^{ NSLog(@&quot;first block start&quot;); [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;first block end&quot;); }); dispatch_block_t secondBlock = dispatch_block_create(0, ^{ NSLog(@&quot;second block run&quot;); }); dispatch_async(serialQueue, firstBlock); dispatch_async(serialQueue, secondBlock); //å–æ¶ˆsecondBlock dispatch_block_cancel(secondBlock);} ä½¿ç”¨dispatch block objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆdispatch block objectå¯ä»¥ä¸ºé˜Ÿåˆ—ä¸­çš„å¯¹è±¡è®¾ç½®ç¤ºä¾‹ï¼Œä¸‹è½½å›¾ç‰‡ä¸­é€”è¿›è¡Œå–æ¶ˆ 123456789101112131415161718192021222324252627282930313233343536373839404142func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { var storedError: NSError! let downloadGroup = dispatch_group_create() var addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] addresses += addresses + addresses // æ‰©å±•addressæ•°ç»„ï¼Œå¤åˆ¶3ä»½ var blocks: [dispatch_block_t] = [] // ä¸€ä¸ªä¿å­˜blockçš„æ•°ç»„ for i in 0 ..&lt; addresses.count { dispatch_group_enter(downloadGroup) let block = dispatch_block_create(DISPATCH_BLOCK_INHERIT_QOS_CLASS) { // åˆ›å»ºä¸€ä¸ªblockï¼Œblockçš„æ ‡å¿—æ˜¯DISPATCH_BLOCK_INHERIT_QOS_CLASS let index = Int(i) let address = addresses[index] let url = NSURL(string: address) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } blocks.append(block) dispatch_async(GlobalMainQueue, block) // æŠŠè¿™ä¸ªblockæ”¾åˆ°GlobalMainQueueä¸Šå¼‚æ­¥è°ƒç”¨ã€‚å› ä¸ºå…¨å±€é˜Ÿåˆ—æ˜¯ä¸€ä¸ªé¡ºåºé˜Ÿåˆ—æ‰€ä»¥æ–¹ä¾¿å–æ¶ˆå¯¹è±¡blockï¼ŒåŒæ—¶å¯ä»¥ä¿è¯ä¸‹è½½ä»»åŠ¡åœ¨downloadPhotosWithCompletionè¿”å›åæ‰å¼€å§‹æ‰§è¡Œã€‚ } for block in blocks[3 ..&lt; blocks.count] { let cancel = arc4random_uniform(2) // éšæœºè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä¼šè¿”å›0æˆ–1 if cancel == 1 { dispatch_block_cancel(block) // å¦‚æœæ˜¯1å°±å–æ¶ˆblockï¼Œè¿™ä¸ªåªèƒ½å‘ç”Ÿåœ¨blockè¿˜åœ¨é˜Ÿåˆ—ä¸­å¹¶æ²¡æœ‰å¼€å§‹çš„æƒ…å†µä¸‹ã€‚å› ä¸ºæŠŠblockå·²ç»æ”¾åˆ°äº†GlobalMainQueueä¸­ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°æ–¹ä¼šå…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œäº†æ‰ä¼šæ‰§è¡Œblockã€‚ dispatch_group_leave(downloadGroup) // å› ä¸ºå·²ç»dispatch_group_enteräº†ï¼Œæ‰€ä»¥å–æ¶ˆæ—¶ä¹Ÿè¦å°†å…¶éƒ½leaveæ‰ã€‚ } } dispatch_group_notify(downloadGroup, GlobalMainQueue) { if let completion = completion { completion(error: storedError) } }} Dispatch IO æ–‡ä»¶æ“ä½œdispatch ioè¯»å–æ–‡ä»¶çš„æ–¹å¼ç±»ä¼¼äºä¸‹é¢çš„æ–¹å¼ï¼Œå¤šä¸ªçº¿ç¨‹å»è¯»å–æ–‡ä»¶çš„åˆ‡ç‰‡æ•°æ®ï¼Œå¯¹äºå¤§çš„æ•°æ®æ–‡ä»¶è¿™æ ·ä¼šæ¯”å•çº¿ç¨‹è¦å¿«å¾ˆå¤šã€‚ 123dispatch_async(queue,^{/*read 0-99 bytes*/});dispatch_async(queue,^{/*read 100-199 bytes*/});dispatch_async(queue,^{/*read 200-299 bytes*/}); dispatch_io_createï¼šåˆ›å»ºdispatch io dispatch_io_set_low_waterï¼šæŒ‡å®šåˆ‡å‰²æ–‡ä»¶å¤§å° dispatch_io_readï¼šè¯»å–åˆ‡å‰²çš„æ–‡ä»¶ç„¶ååˆå¹¶ã€‚ è‹¹æœç³»ç»Ÿæ—¥å¿—APIé‡Œç”¨åˆ°äº†è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ï¼šhttps://github.com/Apple-FOSS-Mirror/Libc/blob/2ca2ae74647714acfc18674c3114b1a5d3325d7d/gen/asl.c 12345678910111213141516171819202122232425262728293031323334353637383940pipe_q = dispatch_queue_create(&quot;PipeQ&quot;, NULL);//åˆ›å»ºpipe_channel = dispatch_io_create(DISPATCH_IO_STREAM, fd, pipe_q, ^(int err){ close(fd);});*out_fd = fdpair[1];//è®¾ç½®åˆ‡å‰²å¤§å°dispatch_io_set_low_water(pipe_channel, SIZE_MAX);dispatch_io_read(pipe_channel, 0, SIZE_MAX, pipe_q, ^(bool done, dispatch_data_t pipedata, int err){ if (err == 0) { size_t len = dispatch_data_get_size(pipedata); if (len &gt; 0) { //å¯¹æ¯æ¬¡åˆ‡å—æ•°æ®çš„å¤„ç† const char *bytes = NULL; char *encoded; uint32_t eval; dispatch_data_t md = dispatch_data_create_map(pipedata, (const void **)&amp;bytes, &amp;len); encoded = asl_core_encode_buffer(bytes, len); asl_msg_set_key_val(aux, ASL_KEY_AUX_DATA, encoded); free(encoded); eval = _asl_evaluate_send(NULL, (aslmsg)aux, -1); _asl_send_message(NULL, eval, aux, NULL); asl_msg_release(aux); dispatch_release(md); } } if (done) { //semaphore +1ä½¿å¾—ä¸éœ€è¦å†ç­‰å¾…ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚ dispatch_semaphore_signal(sem); dispatch_release(pipe_channel); dispatch_release(pipe_q); }}); Dispatch Source ç”¨GCDç›‘è§†è¿›ç¨‹Dispatch Sourceç”¨äºç›‘å¬ç³»ç»Ÿçš„åº•å±‚å¯¹è±¡ï¼Œæ¯”å¦‚æ–‡ä»¶æè¿°ç¬¦ï¼ŒMachç«¯å£ï¼Œä¿¡å·é‡ç­‰ã€‚ä¸»è¦å¤„ç†çš„äº‹ä»¶å¦‚ä¸‹è¡¨ æ–¹æ³• è¯´æ˜ DISPATCH_SOURCE_TYPE_DATA_ADD æ•°æ®å¢åŠ  DISPATCH_SOURCE_TYPE_DATA_OR æ•°æ®OR DISPATCH_SOURCE_TYPE_MACH_SEND Machç«¯å£å‘é€ DISPATCH_SOURCE_TYPE_MACH_RECV Machç«¯å£æ¥æ”¶ DISPATCH_SOURCE_TYPE_MEMORYPRESSURE å†…å­˜æƒ…å†µ DISPATCH_SOURCE_TYPE_PROC è¿›ç¨‹äº‹ä»¶ DISPATCH_SOURCE_TYPE_READ è¯»æ•°æ® DISPATCH_SOURCE_TYPE_SIGNAL ä¿¡å· DISPATCH_SOURCE_TYPE_TIMER å®šæ—¶å™¨ DISPATCH_SOURCE_TYPE_VNODE æ–‡ä»¶ç³»ç»Ÿå˜åŒ– DISPATCH_SOURCE_TYPE_WRITE æ–‡ä»¶å†™å…¥ æ–¹æ³• dispatch_source_createï¼šåˆ›å»ºdispatch sourceï¼Œåˆ›å»ºåä¼šå¤„äºæŒ‚èµ·çŠ¶æ€è¿›è¡Œäº‹ä»¶æ¥æ”¶ï¼Œéœ€è¦è®¾ç½®äº‹ä»¶å¤„ç†handlerè¿›è¡Œäº‹ä»¶å¤„ç†ã€‚ dispatch_source_set_event_handlerï¼šè®¾ç½®äº‹ä»¶å¤„ç†handler dispatch_source_set_cancel_handlerï¼šäº‹ä»¶å–æ¶ˆhandlerï¼Œå°±æ˜¯åœ¨dispatch sourceé‡Šæ”¾å‰åšäº›æ¸…ç†çš„äº‹ã€‚ dispatch_source_cancelï¼šå…³é—­dispatch sourceï¼Œè®¾ç½®çš„äº‹ä»¶å¤„ç†handlerä¸ä¼šè¢«æ‰§è¡Œï¼Œå·²ç»æ‰§è¡Œçš„äº‹ä»¶handlerä¸ä¼šå–æ¶ˆã€‚ 1234567891011NSRunningApplication *mail = [NSRunningApplication runningApplicationsWithBundleIdentifier:@&quot;com.apple.mail&quot;];if (mail == nil) { return;}pid_t const pid = mail.processIdentifier;self.source = dispatch_source_create(DISPATCH_SOURCE_TYPE_PROC, pid, DISPATCH_PROC_EXIT, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(self.source, ^(){ NSLog(@&quot;Mail quit.&quot;);});//åœ¨äº‹ä»¶æºä¼ åˆ°ä½ çš„äº‹ä»¶å¤„ç†å‰éœ€è¦è°ƒç”¨dispatch_resume()è¿™ä¸ªæ–¹æ³•dispatch_resume(self.source); ç›‘è§†æ–‡ä»¶å¤¹å†…æ–‡ä»¶å˜åŒ– 12345678910111213141516171819202122232425NSURL *directoryURL; // assume this is set to a directoryint const fd = open([[directoryURL path] fileSystemRepresentation], O_EVTONLY);if (fd &lt; 0) { char buffer[80]; strerror_r(errno, buffer, sizeof(buffer)); NSLog(@&quot;Unable to open \\&quot;%@\\&quot;: %s (%d)&quot;, [directoryURL path], buffer, errno); return;}dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, fd,DISPATCH_VNODE_WRITE | DISPATCH_VNODE_DELETE, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^(){ unsigned long const data = dispatch_source_get_data(source); if (data &amp; DISPATCH_VNODE_WRITE) { NSLog(@&quot;The directory changed.&quot;); } if (data &amp; DISPATCH_VNODE_DELETE) { NSLog(@&quot;The directory has been deleted.&quot;); }});dispatch_source_set_cancel_handler(source, ^(){ close(fd);});self.source = source;dispatch_resume(self.source);//è¿˜è¦æ³¨æ„éœ€è¦ç”¨DISPATCH_VNODE_DELETE å»æ£€æŸ¥ç›‘è§†çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦è¢«åˆ é™¤ï¼Œå¦‚æœåˆ é™¤äº†å°±åœæ­¢ç›‘å¬ NSTimeråœ¨ä¸»çº¿ç¨‹çš„runloopé‡Œä¼šåœ¨runloopåˆ‡æ¢å…¶å®ƒæ¨¡å¼æ—¶åœæ­¢ï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨åœ¨å­çº¿ç¨‹å¼€å¯ä¸€ä¸ªæ¨¡å¼ä¸ºNSRunLoopCommonModesçš„runloopï¼Œå¦‚æœä¸æƒ³å¼€å¯ä¸€ä¸ªæ–°çš„runloopå¯ä»¥ç”¨ä¸è·Ÿrunloopå…³è”çš„dispatch source timerï¼Œå¦‚ä¸‹ã€‚ 12345678dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,0, 0, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^(){ NSLog(@&quot;Time flies.&quot;);});dispatch_time_t startdispatch_source_set_timer(source, DISPATCH_TIME_NOW, 5ull * NSEC_PER_SEC,100ull * NSEC_PER_MSEC);self.source = source;dispatch_resume(self.source); Dispatch Semaphoreå’Œçš„ä»‹ç»å¦å¤–ä¸€ç§ä¿è¯åŒæ­¥çš„æ–¹æ³•ã€‚ä½¿ç”¨dispatch_semaphore_signalåŠ 1dispatch_semaphore_waitå‡1ï¼Œä¸º0æ—¶ç­‰å¾…çš„è®¾ç½®æ–¹å¼æ¥è¾¾åˆ°çº¿ç¨‹åŒæ­¥çš„ç›®çš„å’ŒåŒæ­¥é”ä¸€æ ·èƒ½å¤Ÿè§£å†³èµ„æºæŠ¢å çš„é—®é¢˜ã€‚ 12345678910111213//dispatch semaphore- (void)dispatchSemaphoreDemo { //åˆ›å»ºsemaphore dispatch_semaphore_t semaphore = dispatch_semaphore_create(0); dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ NSLog(@&quot;start&quot;); [NSThread sleepForTimeInterval:1.f]; NSLog(@&quot;semaphore +1&quot;); dispatch_semaphore_signal(semaphore); //+1 semaphore }); dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); NSLog(@&quot;continue&quot;);} é”è¿™é‡Œç®€å•ä»‹ç»ä¸‹iOSä¸­å¸¸ç”¨çš„å„ç§é”å’Œä»–ä»¬çš„æ€§èƒ½ã€‚ NSRecursiveLockï¼šé€’å½’é”ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­åå¤è·å–é”ä¸ä¼šé€ æˆæ­»é”ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè®°å½•è·å–é”å’Œé‡Šæ”¾é”çš„æ¬¡æ•°æ¥è¾¾åˆ°ä½•æ—¶é‡Šæ”¾çš„ä½œç”¨ã€‚ NSDistributedLockï¼šåˆ†å¸ƒé”ï¼ŒåŸºäºæ–‡ä»¶æ–¹å¼çš„é”æœºåˆ¶ï¼Œå¯ä»¥è·¨è¿›ç¨‹è®¿é—®ã€‚ NSConditionLockï¼šæ¡ä»¶é”ï¼Œç”¨æˆ·å®šä¹‰æ¡ä»¶ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–æ»¡è¶³ä¸€å®šæ¡ä»¶çš„é”ã€‚å› ä¸ºçº¿ç¨‹é—´ç«äº‰ä¼šæ¶‰åŠåˆ°æ¡ä»¶é”æ£€æµ‹ï¼Œç³»ç»Ÿè°ƒç”¨ä¸Šä¸‹åˆ‡æ¢é¢‘ç¹å¯¼è‡´è€—æ—¶æ˜¯å‡ ä¸ªé”é‡Œæœ€é•¿çš„ã€‚ OSSpinLockï¼šè‡ªæ—‹é”ï¼Œä¸è¿›å…¥å†…æ ¸ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ€§èƒ½æœ€é«˜ï¼Œä½†æŠ¢å å¤šæ—¶ä¼šå ç”¨è¾ƒå¤šcpuï¼Œå¥½ç‚¹å¤šï¼Œè¿™æ—¶ä½¿ç”¨pthread_mutexè¾ƒå¥½ã€‚ pthread_mutex_tï¼šåŒæ­¥é”åŸºäºCè¯­è¨€ï¼Œåº•å±‚apiæ€§èƒ½é«˜ï¼Œä½¿ç”¨æ–¹æ³•å’Œå…¶å®ƒçš„ç±»ä¼¼ã€‚ @synchronizedï¼šæ›´åŠ ç®€å•ã€‚ dispatch_suspendå’Œdispatch_resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—dispatch_suspendè¿™é‡ŒæŒ‚èµ·ä¸ä¼šæš‚åœæ­£åœ¨æ‰§è¡Œçš„blockï¼Œåªæ˜¯èƒ½å¤Ÿæš‚åœè¿˜æ²¡æ‰§è¡Œçš„blockã€‚ dispatch_set_contextå’Œdispatch_get_contextGCDæ·±å…¥æ“ä½œ ç¼“å†²åŒºï¼šdispatch_data_tåŸºäºé›¶ç¢çš„å†…å­˜åŒºåŸŸï¼Œä½¿ç”¨dispatch_data_applyæ¥éå†ï¼Œè¿˜å¯ä»¥ç”¨dispatch_data_create_subrangeæ¥åˆ›å»ºä¸€ä¸ªä¸åšä»»ä½•æ‹·è´çš„å­åŒºåŸŸ I/Oè°ƒåº¦ï¼šä½¿ç”¨GCDæä¾›çš„dispatch_io_readï¼Œdispatch_io_writeå’Œdispatch_io_close æµ‹è¯•ï¼šä½¿ç”¨dispatch_benchmarkå°å·¥å…· åŸå­æ“ä½œï¼š libkern/OSAtomic.hé‡Œå¯ä»¥æŸ¥çœ‹é‚£äº›å‡½æ•°ï¼Œç”¨äºåº•å±‚å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ GCDæ­»é”å½“å‰ä¸²è¡Œé˜Ÿåˆ—é‡Œé¢åŒæ­¥æ‰§è¡Œå½“å‰ä¸²è¡Œé˜Ÿåˆ—å°±ä¼šæ­»é”ï¼Œè§£å†³çš„æ–¹æ³•å°±æ˜¯å°†åŒæ­¥çš„ä¸²è¡Œé˜Ÿåˆ—æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556- (void)deadLockCase1 { NSLog(@&quot;1&quot;); //ä¸»é˜Ÿåˆ—çš„åŒæ­¥çº¿ç¨‹ï¼ŒæŒ‰ç…§FIFOçš„åŸåˆ™ï¼ˆå…ˆå…¥å…ˆå‡ºï¼‰ï¼Œ2æ’åœ¨3åé¢ä¼šç­‰3æ‰§è¡Œå®Œï¼Œä½†å› ä¸ºåŒæ­¥çº¿ç¨‹ï¼Œ3åˆè¦ç­‰2æ‰§è¡Œå®Œï¼Œç›¸äº’ç­‰å¾…æˆä¸ºæ­»é”ã€‚ dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;);}- (void)deadLockCase2 { NSLog(@&quot;1&quot;); //3ä¼šç­‰2ï¼Œå› ä¸º2åœ¨å…¨å±€å¹¶è¡Œé˜Ÿåˆ—é‡Œï¼Œä¸éœ€è¦ç­‰å¾…3ï¼Œè¿™æ ·2æ‰§è¡Œå®Œå›åˆ°ä¸»é˜Ÿåˆ—ï¼Œ3å°±å¼€å§‹æ‰§è¡Œ dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;);}- (void)deadLockCase3 { dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); NSLog(@&quot;1&quot;); dispatch_async(serialQueue, ^{ NSLog(@&quot;2&quot;); //ä¸²è¡Œé˜Ÿåˆ—é‡Œé¢åŒæ­¥ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—å°±ä¼šæ­»é” dispatch_sync(serialQueue, ^{ NSLog(@&quot;3&quot;); }); NSLog(@&quot;4&quot;); }); NSLog(@&quot;5&quot;);}- (void)deadLockCase4 { NSLog(@&quot;1&quot;); dispatch_async(dispatch_get_global_queue(0, 0), ^{ NSLog(@&quot;2&quot;); //å°†åŒæ­¥çš„ä¸²è¡Œé˜Ÿåˆ—æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³ dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;3&quot;); }); NSLog(@&quot;4&quot;); }); NSLog(@&quot;5&quot;);}- (void)deadLockCase5 { dispatch_async(dispatch_get_global_queue(0, 0), ^{ NSLog(@&quot;1&quot;); //å›åˆ°ä¸»çº¿ç¨‹å‘ç°æ­»å¾ªç¯åé¢å°±æ²¡æ³•æ‰§è¡Œäº† dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;); }); NSLog(@&quot;4&quot;); //æ­»å¾ªç¯ while (1) { // }} GCDå®é™…ä½¿ç”¨FMDBå¦‚ä½•ä½¿ç”¨dispatch_queue_set_specificå’Œdispatch_get_specificæ¥é˜²æ­¢æ­»é”ä½œç”¨ç±»ä¼¼objc_setAssociatedObjectè·Ÿobjc_getAssociatedObject 1234567891011static const void * const kDispatchQueueSpecificKey = &amp;kDispatchQueueSpecificKey;//åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—ï¼Œæ‰€æœ‰æ•°æ®åº“çš„æ“ä½œéƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—é‡Œ_queue = dispatch_queue_create([[NSString stringWithFormat:@&quot;fmdb.%@&quot;, self] UTF8String], NULL);//æ ‡è®°é˜Ÿåˆ—dispatch_queue_set_specific(_queue, kDispatchQueueSpecificKey, (__bridge void *)self, NULL);//æ£€æŸ¥æ˜¯å¦æ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—æ¥é¿å…æ­»é”çš„æ–¹æ³•- (void)inDatabase:(void (^)(FMDatabase *db))block { FMDatabaseQueue *currentSyncQueue = (__bridge id)dispatch_get_specific(kDispatchQueueSpecificKey); assert(currentSyncQueue != self &amp;&amp; &quot;inDatabase: was called reentrantly on the same queue, which would lead to a deadlock&quot;);} DTCoreTextä½¿ç”¨GCDåŠ å¿«è§£æé€Ÿåº¦DTCoreTexté‡‡ç”¨çš„æ˜¯SAXè§£æï¼ŒiOSè‡ªå¸¦äº†XML/HTMLçš„è§£æå¼•æ“libxmlï¼Œæä¾›äº†ä¸¤ä¸ªè§£ææ¥å£ï¼ŒDOMè§£æå’ŒSAXè§£æï¼Œå‰è€…ä½¿ç”¨ç®€å•ä½†æ˜¯å ç”¨å†…å­˜å¤šï¼ŒSAXè§£æç”±äºä¸ä¼šè¿”å›ä¸€ä¸ªdomæ ‘ï¼Œé‡‡ç”¨çš„æ˜¯æŸ¥åˆ°ä¸€ä¸ªæ ‡ç­¾æ¯”å¦‚å›è°ƒstartElementæ–¹æ³•ç¢°åˆ°å†…å®¹å°±å›è°ƒ_charactersç¢°åˆ°ç±»ä¼¼å°±å›è°ƒendElementè¿™æ ·çš„æ–¹å¼ã€‚ æ ¹æ®è¿™ç§è§£ææ–¹å¼DTCoreTextä½¿ç”¨å¤šçº¿ç¨‹è§£æèƒ½å¤Ÿæ›´å¿«çš„è§£æï¼ŒDTHTMLAttributedStringBuilderä½¿ç”¨ä¸‰ä¸ªdispatch_queue _dataParsingQueueï¼šè§£æhtmlçš„ _treeBuildingQueueï¼šç”Ÿæˆdomæ ‘çš„ _stringAssemblyQueueï¼šç»„è£…NSAttributeStringçš„è·å–ä¸‰ä¸ªé˜Ÿåˆ—å…¨éƒ¨å®Œæˆé‡‡ç”¨äº†dispatch_groupçš„dispatch_group_waitè¿™ç§é˜»å¡åŒæ­¥æ–¹å¼æ¥è¿”å›ç»“æœã€‚ iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§iOS8iOS8æ–°åŠ äº†ä¸€ä¸ªåŠŸèƒ½å«Quality of Service(QoS)ï¼Œé‡Œé¢æä¾›äº†ä¸€ä¸‹å‡ ä¸ªæ›´å®¹æ˜“ç†è§£çš„æšä¸¾åæ¥ä½¿ç”¨user interactiveï¼Œuser initiatedï¼Œutilityå’Œbackgroundã€‚ä¸‹é¢çš„è¡¨åšäº†å¯¹æ¯” Global queue Corresponding QoS class è¯´æ˜ Main thread NSQualityOfServiceUserInteractive UIç›¸å…³ï¼Œäº¤äº’ç­‰ DISPATCH_QUEUE_PRIORITY_HIGH NSQualityOfServiceUserInitiated ç”¨æˆ·å‘èµ·éœ€è¦é©¬ä¸Šå¾—åˆ°ç»“æœè¿›è¡Œåç»­ä»»åŠ¡ DISPATCH_QUEUE_PRIORITY_DEFAULT NSQualityOfServiceDefault é»˜è®¤çš„ä¸åº”è¯¥ä½¿ç”¨è¿™ä¸ªè®¾ç½®ä»»åŠ¡ DISPATCH_QUEUE_PRIORITY_LOW NSQualityOfServiceUtility èŠ±è´¹æ—¶é—´ç¨å¤šæ¯”å¦‚ä¸‹è½½ï¼Œéœ€è¦å‡ ç§’æˆ–å‡ åˆ†é’Ÿçš„ DISPATCH_QUEUE_PRIORITY_BACKGROUND NSQualityOfServiceBackground ä¸å¯è§åœ¨åå°çš„æ“ä½œå¯èƒ½éœ€è¦å¥½å‡ åˆ†é’Ÿç”šè‡³å‡ å°æ—¶çš„ å‚è€ƒèµ„æ–™WWDC Building Responsive and Efficient Apps with GCDï¼šhttps://developer.apple.com/videos/play/wwdc2015-718/ æ–‡æ¡£ å®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/library/prerelease/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/","link":"/program/ï£¿/GCD/"},{"title":"UIMenuController","text":"","link":"/program/ï£¿/UIMenuController/"},{"title":"æœ‰ä¸€ç§ Block å« Callbackï¼Œæœ‰ä¸€ç§ Callback å« CompletionHandler","text":"iOS10æ¨é€éƒ¨åˆ†çš„APIï¼Œå¤§é‡ä½¿ç”¨äº† CompletionHandler è¿™ç§å‘½åæ–¹å¼ï¼Œé‚£ä¹ˆæœ¬æ–‡æˆ‘ä»¬å°†å¯¹æ¯”ä¸‹è¿™ç§ Block çš„ç‰¹æ®Šæ€§ï¼Œä»¥ä¾¿æ›´å¥½çš„ç†è§£å’Œåœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å®è·µ CompletionHandler æ ·å¼çš„ Blcokã€‚ æˆ‘ä»¬ä½œä¸ºå¼€å‘è€…å»é›†æˆä¸€ä¸ª Lib ï¼ˆä¹Ÿå¯ä»¥å«è½®å­ã€SDKã€ä¸‹æ–‡ç»Ÿä¸€å« Libï¼‰æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°æˆ‘ä»¬é‡åˆ°çš„ Blockï¼Œ æŒ‰ç…§åŠŸèƒ½çš„è§’åº¦åˆ’åˆ†ï¼Œå…¶å®å¯ä»¥åˆ†ä¸ºè¿™å‡ ç§ï¼š Lib é€šçŸ¥å¼€å‘è€…ï¼ŒLibæ“ä½œå·²ç»å®Œæˆã€‚ä¸€èˆ¬å‘½åä¸º Callback å¼€å‘è€…é€šçŸ¥ Libï¼Œå¼€å‘è€…çš„æ“ä½œå·²ç»å®Œæˆã€‚ä¸€èˆ¬å¯ä»¥å‘½åä¸º CompletionHandlerã€‚ è¿™ä¸¤å¤„çš„åŒºåˆ«ï¼š å‰è€…æ˜¯ â€œBlock çš„æ‰§è¡Œâ€ï¼Œåè€…æ˜¯ â€œBlock çš„å¡«å……â€ã€‚ Callback vs CompletionHandler å‘½åä¸åŠŸèƒ½çš„å·®åˆ«ï¼ŒApple ä¹Ÿæ²¡æœ‰æ˜ç¡®çš„ç¼–ç è§„èŒƒæŒ‡å‡ºè¿‡ï¼Œåªä¸è¿‡å¦‚æœæŒ‰ç…§â€œæ‰§è¡Œä¸å¡«å……â€çš„åŠŸèƒ½åˆ’åˆ†çš„è¯ï¼Œcallbackä¸ completionHandler çš„å‘½åå¯ä»¥åŒºåˆ†å¼€æ¥å¯¹å¾…ã€‚åŒæ—¶ä¹Ÿæ–¹ä¾¿è°ƒç”¨è€…ç†è§£ block çš„åŠŸèƒ½ã€‚ä½†æ€»ä½“æ¥è¯´ï¼ŒApple å®˜æ–¹çš„å‘½åä¸­ï¼Œâ€œBlock å¡«å……â€œè¿™ä¸ªåŠŸèƒ½ä¸€èˆ¬éƒ½ä¼šå‘½åä¸º â€œcompletionHandlerâ€ï¼Œâ€œBlock æ‰§è¡Œâ€è¿™ä¸ªåŠŸèƒ½å¤§å¤šå‘½åä¸ºäº†â€œcallbackâ€ ï¼Œä¹Ÿæœ‰å°‘éƒ¨åˆ†å‘½åä¸ºäº† â€œcompletionHandlerâ€ã€‚ æ¯”å¦‚ï¼š NSURLSession ä¸­ï¼Œä¸‹é¢çš„å‡½æ•°å°† â€œcallbackâ€ å‘½åä¸ºäº† â€œcompletionHandlerâ€ï¼š 1- (NSURLSessionDataTask *)dataTaskWithURL:(NSURL *)url completionHandler:(void (^)(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error))completionHandler; æˆ‘ä»¬å¸¸å¸¸è§åˆ° CompletionHandler è¢«ç”¨åˆ°äº†ç¬¬ä¸€ç§åœºæ™¯ï¼Œè€Œç¬¬ä¸€ç§åœºæ™¯â€œBlock æ‰§è¡Œâ€å‘½åä¸º Callback åˆ™æ›´åˆé€‚ã€‚ ä¸æ˜¯æ‰€æœ‰ Block éƒ½é€‚åˆå«åš CompletionHandler ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒCompletionHandler çš„è®¾è®¡å¾€å¾€è€ƒè™‘åˆ°å¤šçº¿ç¨‹æ“ä½œï¼Œäºæ˜¯ï¼Œä½ å°±å®Œå…¨å¯ä»¥å¼‚æ­¥æ“ä½œï¼Œç„¶ååœ¨çº¿ç¨‹ç»“æŸæ—¶æ‰§è¡Œè¯¥ CompletionHandlerï¼Œä¸‹æ–‡çš„ä¾‹å­ä¸­ä¼šè®²è¿°ä¸‹ CompletionHandler æ–¹å¼åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹çš„ä¸€äº›ä¼˜åŠ¿ã€‚ CompletionHandler + Delegate ç»„åˆåœ¨ iOS10 ä¸­æ–°å¢åŠ çš„ UserNotificaitons ä¸­å¤§é‡ä½¿ç”¨äº†è¿™ç§ Blockï¼Œæ¯”å¦‚ï¼š 123- (void)userNotificationCenter:(UNUserNotificationCenter *)center didReceiveNotificationResponse:(UNNotificationResponse *)response withCompletionHandler:(void (^)(void))completionHandler; æ–‡æ¡£ å¯¹ completionHandler çš„æ³¨é‡Šæ˜¯è¿™æ ·çš„ï¼š 1The block to execute when you have finished processing the userâ€™s response. You must execute this block from your method and should call it as quickly as possible. The block has no return value or parameters. åŒæ ·åœ¨è¿™é‡Œä¹Ÿæœ‰åº”ç”¨ï¼š 123- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)taskdidReceiveChallenge:(NSURLAuthenticationChallenge *)challengecompletionHandler:(void (^)(NSURLSessionAuthChallengeDisposition disposition, NSURLCredential * __nullable credential))completionHandler; è¿˜æœ‰å¦å¤–ä¸€ä¸ªä¹Ÿéå¸¸æ™®éçš„ä¾‹å­ï¼ˆDelegate æ–¹å¼ä½¿ç”¨URLSession æ—¶å€™å¿…ä¸å¯å°‘çš„ 4ä¸ªä»£ç†å‡½æ•°ä¹‹ä¸€ ï¼‰ 123- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition disposition))completionHandler; åœ¨ä»£ç†æ–¹æ³•å®ç°ä»£ç é‡Œé¢ï¼Œè‹¥æ˜¯ä¸æ‰§è¡Œ completionHandler(NSURLSessionResponseAllow) è¯ï¼Œhttpè¯·æ±‚å°±ç»ˆæ­¢äº†ã€‚ CompletionHandler + Block ç»„åˆå‡½æ•°ä¸­å°†å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è€…è¿”å›å€¼ï¼Œå°±å«åšé«˜é˜¶å‡½æ•°ã€‚ æŒ‰ç…§è¿™ç§å®šä¹‰ï¼ŒBlock ä¸­å°† Block ä½œä¸ºå‚æ•°ï¼Œè¿™ä¹Ÿå°±æ˜¯é«˜é˜¶å‡½æ•°ã€‚ ç»“åˆå®é™…çš„åº”ç”¨åœºæ™¯æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š å¦‚æœæœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼š æ‹¿æˆ‘ä¹‹å‰çš„ä¸€ä¸ª IM é¡¹ç›® ChatKit-OC ï¼ˆå¼€æºçš„ï¼Œä¸‹é¢ç®€ç§° ChatKitï¼‰ä¸ºä¾‹ï¼Œå½“ä½ çš„åº”ç”¨æƒ³è¦é›†æˆä¸€ä¸ª IM æœåŠ¡æ—¶ï¼Œå¯èƒ½è¿™æ—¶å€™ï¼Œä½ çš„ APP å·²ç»ä¸Šæ¶äº†ï¼Œå·²ç»æœ‰è‡ªå·±çš„æ³¨å†Œã€ç™»å½•ç­‰æµç¨‹äº†ã€‚ç”¨ ChatKit è¿›è¡ŒèŠå¤©å¾ˆç®€å•ï¼Œåªéœ€è¦ç»™ ChatKit ä¸€ä¸ª id å°±å¤Ÿäº†ã€‚èŠå¤©æ˜¯æ­£å¸¸äº†ï¼Œä½†æ˜¯åŒæ–¹åªèƒ½çœ‹åˆ°ä¸€ä¸ªidï¼Œè¿™æ ·ä½“éªŒå¾ˆä¸å¥½ã€‚ä½†æ˜¯å¦‚ä½•å±•ç¤ºå¤´åƒã€æ˜µç§°å‘¢ï¼Ÿäºæ˜¯å°±è®¾è®¡äº†è¿™æ ·ä¸€ä¸ªæ¥å£ï¼Œ-setFetchProfilesBlock: ã€‚ è¿™æ˜¯ä¸Šå±‚ï¼ˆAPPï¼‰æä¾›ç”¨æˆ·ä¿¡æ¯çš„ Blockï¼Œç”±äº ChatKit å¹¶ä¸å…³å¿ƒä¸šåŠ¡é€»è¾‘ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·æ˜µç§°ï¼Œç”¨æˆ·å¤´åƒç­‰ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ ChatKit å•ä¾‹å‘ ChatKit æ³¨å…¥ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯å†…å®¹æä¾› Blockï¼Œé€šè¿‡è¿™ä¸ªç”¨æˆ·ä¿¡æ¯æä¾› Blockï¼ŒChatKit æ‰èƒ½å¤Ÿæ­£ç¡®çš„è¿›è¡Œä¸šåŠ¡é€»è¾‘æ•°æ®çš„ç»˜åˆ¶ã€‚ ç¤ºæ„å›¾å¦‚ä¸‹ï¼š å…·ä½“å®ç°å¦‚ä¸‹ï¼š æ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021/*!* @brief The block to execute with the users&apos; information for the userIds. Always execute this block at some point when fetching profiles completes on main thread. Specify users&apos; information how you want ChatKit to show.* @attention If you fetch users fails, you should reture nil, meanwhile, give the error reason.*/typedef void(^LCCKFetchProfilesCompletionHandler)(NSArray&lt;id&lt;LCCKUserDelegate&gt;&gt; *users, NSError *error);/*!* @brief When LeanCloudChatKit wants to fetch profiles, this block will be invoked.* @param userIds User ids* @param completionHandler The block to execute with the users&apos; information for the userIds. Always execute this block at some point during your implementation of this method on main thread. Specify users&apos; information how you want ChatKit to show.*/typedef void(^LCCKFetchProfilesBlock)(NSArray&lt;NSString *&gt; *userIds, LCCKFetchProfilesCompletionHandler completionHandler);@property (nonatomic, copy) LCCKFetchProfilesBlock fetchProfilesBlock;/*!* @brief Add the ablitity to fetch profiles.* @attention You must get peer information by peer id with a synchronous implementation.* If implemeted, this block will be invoked automatically by LeanCloudChatKit for fetching peer profile.*/- (void)setFetchProfilesBlock:(LCCKFetchProfilesBlock)fetchProfilesBlock; ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#warning æ³¨æ„ï¼šsetFetchProfilesBlock æ–¹æ³•å¿…é¡»å®ç°ï¼Œå¦‚æœä¸å®ç°ï¼ŒChatKitå°†æ— æ³•æ˜¾ç¤ºç”¨æˆ·å¤´åƒã€ç”¨æˆ·æ˜µç§°ã€‚ä»¥ä¸‹æ–¹æ³•å¾ªç¯æ¨¡æ‹Ÿäº†é€šè¿‡ userIds åŒæ­¥æŸ¥è¯¢ users ä¿¡æ¯çš„è¿‡ç¨‹ï¼Œè¿™é‡Œéœ€è¦æ›¿æ¢ä¸º App çš„ API åŒæ­¥æŸ¥è¯¢ [[LCChatKit sharedInstance] setFetchProfilesBlock:^(NSArray&lt;NSString *&gt; *userIds, LCCKFetchProfilesCompletionHandler completionHandler) { if (userIds.count == 0) { NSInteger code = 0; NSString *errorReasonText = @&quot;User ids is nil&quot;; NSDictionary *errorInfo = @{ @&quot;code&quot;:@(code), NSLocalizedDescriptionKey : errorReasonText, }; NSError *error = [NSError errorWithDomain:NSStringFromClass([self class]) code:code userInfo:errorInfo]; !completionHandler ?: completionHandler(nil, error); return; } NSMutableArray *users = [NSMutableArray arrayWithCapacity:userIds.count];#warning æ³¨æ„ï¼šä»¥ä¸‹æ–¹æ³•å¾ªç¯æ¨¡æ‹Ÿäº†é€šè¿‡ userIds åŒæ­¥æŸ¥è¯¢ users ä¿¡æ¯çš„è¿‡ç¨‹ï¼Œè¿™é‡Œéœ€è¦æ›¿æ¢ä¸º App çš„ API åŒæ­¥æŸ¥è¯¢ [userIds enumerateObjectsUsingBlock:^(NSString *_Nonnull clientId, NSUInteger idx, BOOL *_Nonnull stop) { NSPredicate *predicate = [NSPredicate predicateWithFormat:@&quot;peerId like %@&quot;, clientId]; //è¿™é‡Œçš„LCCKContactProfilesï¼ŒLCCKProfileKeyPeerIdéƒ½ä¸ºäº‹å…ˆçš„å®å®šä¹‰ï¼Œ NSArray *searchedUsers = [LCCKContactProfiles filteredArrayUsingPredicate:predicate]; if (searchedUsers.count &gt; 0) { NSDictionary *user = searchedUsers[0]; NSURL *avatarURL = [NSURL URLWithString:user[LCCKProfileKeyAvatarURL]]; LCCKUser *user_ = [LCCKUser userWithUserId:user[LCCKProfileKeyPeerId] name:user[LCCKProfileKeyName] avatarURL:avatarURL clientId:clientId]; [users addObject:user_]; } else { //æ³¨æ„ï¼šå¦‚æœç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¯·è‡³å°‘æä¾› ClientIdï¼ LCCKUser *user_ = [LCCKUser userWithClientId:clientId]; [users addObject:user_]; } }]; // æ¨¡æ‹Ÿç½‘ç»œå»¶æ—¶ï¼Œ3ç§’ // sleep(3); #warning é‡è¦ï¼šcompletionHandler è¿™ä¸ª Bock å¿…é¡»æ‰§è¡Œï¼Œéœ€è¦åœ¨ä½ **è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ç»“æŸ**åï¼Œå°†ä¿¡æ¯ä¼ ç»™è¯¥Blockï¼ !completionHandler ?: completionHandler([users copy], nil); }]; å¯¹äºä»¥ä¸Š Fetch æ–¹æ³•çš„è¿™ç§åº”ç”¨åœºæ™¯ï¼Œå…¶å®ç”¨æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿå¯ä»¥å®ç°ï¼Œä½†æ˜¯ä¸ CompletionHandler ç›¸æ¯”ï¼Œæ— æ³•è‡ªç”±åˆ‡æ¢çº¿ç¨‹æ˜¯ä¸ªå¼Šç«¯ã€‚ Posted by å¾®åš@iOSç¨‹åºçŠ­è¢åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | Creative Commons BY-NC-ND 3.0","link":"/program/ï£¿/block-callback/"},{"title":"Block","text":"ç®€ä»‹blockå¯ä»¥å½“åšåŒ¿åå‡½æ•°ï¼Œå¯ä»¥åœ¨ä¸¤ä¸ªå¯¹è±¡é—´å°†è¯­å¥å½“åšæ•°æ®æ¥è¿›è¡Œä¼ é€’ã€‚å…·æœ‰å°é—­æ€§closureï¼Œæ–¹ä¾¿å–å¾—ä¸Šä¸‹æ–‡ç›¸å…³çŠ¶æ€ä¿¡æ¯ã€‚ Blockçš„åˆ›å»º å¯ä»¥å¦‚å£°æ˜å‡½æ•°é‚£æ ·å£°æ˜ä¸€ä¸ªblockå˜é‡ å®šä¹‰å‡½æ•°çš„æ–¹æ³•å®šä¹‰block æŠŠblockå½“åšä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨1234567891011121314151617int main(int argc, const char * argv[]) { @autoreleasepool { // Declare the block variable double (^distanceFromRateAndTime)(double rate, double time); // Create and assign the block distanceFromRateAndTime = ^double(double rate, double time) { return rate * time; }; // Call the block double dx = distanceFromRateAndTime(35, 1.5); NSLog(@&quot;A car driving 35 mph will travel &quot; @&quot;%.2f miles in 1.5 hours.&quot;, dx); } return 0;} ä¸å¸¦å‚æ•°çš„Blockblockå¯ä»¥ç®€å†™ä¸º^ { â€¦ } 1234double (^randomPercent)(void) = ^ { return (double)arc4random() / 4294967295;};NSLog(@&quot;Gas tank is %.1f%% fullâ€, randomPercent() * 100); Blockçš„é—­åŒ…ï¼ˆclosureï¼‰blockå†…éƒ¨å¯ä»¥è®¿é—®å®šä¹‰åœ¨blockå¤–éƒ¨çš„éå±€éƒ¨å˜é‡ã€‚éå±€éƒ¨å˜é‡ä¼šä»¥æ‹·è´å½¢å¼å­˜å‚¨åˆ°blockä¸­ã€‚ 123456789NSString *make = @&quot;Honda&quot;;NSString *(^getFullCarName)(NSString *) = ^(NSString *model) { return [make stringByAppendingFormat:@&quot; %@&quot;, model];};NSLog(@&quot;%@&quot;, getFullCarName(@&quot;Accord&quot;)); // Honda Accord// Try changing the non-local variable (it won&apos;t change the block)make = @&quot;Porsche&quot;;NSLog(@&quot;%@&quot;, getFullCarName(@&quot;911 Turbo&quot;)); // Honda 911 Turbo ä¿®æ”¹éå±€éƒ¨å˜é‡ç”¨__blockå­˜å‚¨ä¿®é¥°ç¬¦å·ï¼ˆstorage modifierï¼‰å£°æ˜éå±€éƒ¨å˜é‡ 12345678__block int i = 0;int (^count)(void) = ^ { i += 1; return i;};NSLog(@&quot;%d&quot;, count()); // 1NSLog(@&quot;%d&quot;, count()); // 2NSLog(@&quot;%d&quot;, count()); // 3 Blockä½œä¸ºå‡½æ•°çš„å‚æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// Car.h#import@interface Car : NSObject@property double odometer;- (void)driveForDuration:(double)duration withVariableSpeed:(double (^)(double time))speedFunction steps:(int)numSteps;@end//è°ƒç”¨block// Car.m#import &quot;Car.h&quot;@implementation Car@synthesize odometer = _odometer;- (void)driveForDuration:(double)duration withVariableSpeed:(double (^)(double time))speedFunction steps:(int)numSteps { double dt = duration / numSteps; for (int i=1; i&amp;lt;=numSteps; i++) { _odometer += speedFunction(i*dt) * dt; }}@end//åœ¨mainå‡½æ•°ä¸­blockå®šä¹‰åœ¨å¦ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹ä¸­ã€‚// main.m#import#import &quot;Car.h&quot;int main(int argc, const char * argv[]) { @autoreleasepool { Car *theCar = [[Car alloc] init]; // Drive for awhile with constant speed of 5.0 m/s [theCar driveForDuration:10.0 withVariableSpeed:^(double time) { return 5.0; } steps:100]; NSLog(@&quot;The car has now driven %.2f meters&quot;, theCar.odometer); // Start accelerating at a rate of 1.0 m/s^2 [theCar driveForDuration:10.0 withVariableSpeed:^(double time) { return time + 5.0; } steps:100]; NSLog(@&quot;The car has now driven %.2f meters&quot;, theCar.odometer); } return 0;} å®šä¹‰Blockç±»å‹123456789101112131415// Car.h#import// Define a new type for the blocktypedef double (^SpeedFunction)(double);@interface Car : NSObject@property double odometer;- (void)driveForDuration:(double)duration withVariableSpeed:(SpeedFunction)speedFunction steps:(int)numSteps;@end é£é™©blockä¼šå­˜åœ¨å¯¼è‡´retain cyclesçš„é£é™©ï¼Œå¦‚æœå‘é€è€…éœ€è¦ retain block ä½†åˆä¸èƒ½ç¡®ä¿å¼•ç”¨åœ¨ä»€ä¹ˆæ—¶å€™è¢«èµ‹å€¼ä¸º nilï¼Œ é‚£ä¹ˆæ‰€æœ‰åœ¨ block å†…å¯¹ self çš„å¼•ç”¨å°±ä¼šå‘ç”Ÿæ½œåœ¨çš„ retain ç¯ã€‚NSOperation æ˜¯ä½¿ç”¨ block çš„ä¸€ä¸ªå¥½èŒƒä¾‹ã€‚å› ä¸ºå®ƒåœ¨ä¸€å®šçš„åœ°æ–¹æ‰“ç ´äº† retain ç¯ï¼Œè§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ã€‚ 123456self.queue = [[NSOperationQueue alloc] init];MyOperation *operation = [[MyOperation alloc] init];operation.completionBlock = ^{ [self finishedOperation];};[self.queue addOperation:operation]; å¦ä¸€ä¸ªè§£å†³æ–¹æ³• 1234567891011121314151617181920@interface Encoder ()@property (nonatomic, copy) void (^completionHandler)();@end@implementation Encoder- (void)encodeWithCompletionHandler:(void (^)())handler{ self.completionHandler = handler; // è¿›è¡Œå¼‚æ­¥å¤„ç†...}// è¿™ä¸ªæ–¹æ³•ä¼šåœ¨å®Œæˆåè¢«è°ƒç”¨ä¸€æ¬¡- (void)finishedEncoding{ self.completionHandler(); self.completionHandler = nil; //ä¸€æ—¦ä»»åŠ¡å®Œæˆå°±è®¾ç½®ä¸ºnil}@end","link":"/program/ï£¿/block/"},{"title":"Camera","text":"ç›¸æœºåŸç†æ„Ÿå…‰åº¦(ISO)ISOä¹Ÿå«èƒ¶å·é€Ÿåº¦ï¼Œè¡¡é‡å›¾åƒä¼ æ„Ÿå™¨å¯¹å…‰çš„æ•æ„Ÿç¨‹åº¦ã€‚äº®çš„æ—¶å€™éœ€è¦çš„ISOå°±è¶Šå°ï¼Œæš—çš„æ—¶å€™ç›¸åISOå°±é«˜å™ªç‚¹ä¼šå¤šã€‚ å…‰åœˆå…‰åœˆç”¨æ¥è¡¡é‡åˆ°è¾¾å›¾åƒæ„Ÿåº”å™¨çš„å…‰æ‰€é€šè¿‡çš„é€šå­”å¤§å°ã€‚iPhone6çš„å…‰åœˆå€¼æ˜¯f/2.2ï¼Œ2.2å°±æ˜¯è¡¨ç¤ºé•œå¤´ç„¦è·å’Œå…‰åœˆçš„æœ‰æ•ˆç›´å¾„æ¯”ä¾‹ã€‚ å¯¹ç„¦å°†ç¦»ç›¸æœºä¸€å®šèŒƒå›´å†…ç‰©ä½“æ¸²æŸ“æ¸…æ™°ï¼Œå¤ªè¿‘å¤ªè¿œä¼šæ¨¡ç³Šè¿™ç§æƒ…å†µå«åšå¤±ç„¦ã€‚ ä¿å­˜è·å–æ–‡ä»¶å…³äºCore Imageå¤„ç†RAWæ ¼å¼å¯ä»¥å‚è€ƒCoreImage/CIRAWFilter.hï¼Œä»¥åŠWWDCä¸Šçš„è®²åº§WWDC 2014 session 514 https://developer.apple.com/videos/wwdc/2014/#514 å¦‚ä½•å¤„ç†å›¾åƒæ•°æ®å¤„ç†ä½å›¾çš„ç±»æ˜¯UIImageï¼ŒCGImage(Core Graphics)å’ŒCIImage(Core Image)ã€‚ä»NSDataå¾—åˆ°UIImageä½¿ç”¨imageWithContentsOfFiles:æ–¹æ³•ã€‚ ä»ç›¸æœºæ•æ‰å›¾åƒ ç›¸æ¯”è¾ƒUIImagePickerControllerä½¿ç”¨AVFoundationèƒ½å¤Ÿç›´æ¥è®¿é—®ç›¸æœºï¼Œæä¾›å®Œå…¨çš„æ“ä½œæƒï¼Œæ¯”å¦‚ç”¨ç¼–ç¨‹æ–¹å¼æ›´æ”¹ç¡¬ä»¶å‚æ•°ï¼Œæˆ–è€…æ“çºµå®æ—¶é¢„è§ˆå›¾ã€‚ å…ˆåˆ›å»ºAVCaptureStillImageOutputå¯¹è±¡ï¼Œä½¿ç”¨captureStillImageAsynchronouslyFromConnection: completionHandler: æ–¹æ³•ã€‚ ä½¿ç”¨AVCaptureStillImageOutputä¸­çš„ç±»æ–¹æ³•jpegStillImageNSDataRepresentation:å°†å…¶è½¬æ¢æˆNSDataå¯¹è±¡ï¼Œæ¥ç€ç”¨imageWithData:å¾—åˆ°ä¸€ä¸ªUIImage è¿‡ç¨‹ä¸­å¯ä»¥è°ƒèŠ‚å¾ˆå¤šå‚æ•°ä¾‹å¦‚æ›å…‰ï¼Œèšç„¦ï¼Œå…‰è¡¥å¿ï¼Œé—ªå…‰ç¯ï¼ŒISOç­‰ã€‚æ‰€æœ‰è¿™äº›è®¾ç½®éƒ½ä¼šè¢«åº”ç”¨åˆ°ä¸€ä¸ªAVCaptureDeviceé‡Œã€‚ AVFoundationç›¸å…³ç±»å¯ä»¥é€šè¿‡ä»¥ä¸‹ç±»è®¿é—®æ¥è‡ªç›¸æœºè®¾å¤‡åŸå§‹æ•°æ®å¹¶æ§åˆ¶ä»–ä»¬çš„ç»„ä»¶ã€‚ AVCaptureDeviceï¼šæ§åˆ¶ç¡¬ä»¶ç‰¹æ€§ï¼Œæ¯”å¦‚é•œå¤´ä½ç½®ï¼Œæ›å…‰ï¼Œé—ªå…‰ç¯ AVCaptureDeviceInputï¼šè®¾å¤‡æ•°æ® AVCaptureOutputï¼šæŠ½è±¡ç±»åŒ…æ‹¬äº†ä¸‰ç§é™æ€å›¾ç‰‡æ•æ‰ç±» AVCaptureStillImageOutputï¼šç”¨äºæ•æ‰é™æ€å›¾ç‰‡ AVCaptureMetadataOutputï¼šå¯ç”¨æ£€æµ‹äººè„¸å’ŒäºŒç»´ç  AVCaptureVideoOutputï¼šå®æ—¶é¢„è§ˆå›¾æä¾›åŸå§‹å¸§ AVCaptureSessionï¼šç®¡ç†è¾“å…¥è¾“å‡ºä¹‹é—´æ•°æ®æµï¼Œä»¥åŠåœ¨å‡ºç°é—®é¢˜æ—¶ç”Ÿæˆè¿è¡Œæ—¶é”™è¯¯ã€‚ AVCaptureVideoPreviewLayerï¼šCALayerçš„å­ç±»ï¼Œç”¨äºè‡ªåŠ¨æ˜¾ç¤ºç›¸æœºäº§ç”Ÿçš„å®æ—¶å›¾åƒï¼Œ æ•æ‰è®¾ç½®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081//å…ˆéœ€è¦ä¸€ä¸ªAVCaptureSessionå¯¹è±¡let session = AVCaptureSession()//æ¥ç€éå†æ‰€èƒ½æä¾›è§†é¢‘æ•°æ®è®¾å¤‡å¹¶æ£€æŸ¥positionå±æ€§ã€‚let availableCameraDevices = AVCaptureDevice.devicesWithMediaType(AVMediaTypeVideo)for device in availableCameraDevices as [AVCaptureDevice] { if device.position == .Back { backCameraDevice = device } else if device.position == .Front { frontCameraDevice = device }}//å‘ç°åˆé€‚çš„ç›¸æœºè®¾å¤‡ï¼Œå°±å¯ä»¥è·å¾—ç›¸å…³çš„AVCaptureDeviceInputå¯¹è±¡ã€‚å°†å®ƒè®¾ç½®ä¸ºsessionè¾“å…¥ï¼švar error:NSError?let possibleCameraInput: AnyObject? = AVCaptureDeviceInput.deviceInputWithDevice(backCameraDevice, error: &amp;error)if let backCameraInput = possibleCameraInput as? AVCaptureDeviceInput { if self.session.canAddInput(backCameraInput) { self.session.addInput(backCameraInput) }}//ç¬¬ä¸€æ¬¡è°ƒç”¨AVCaptureDeviceInput.deviceInputWithDevice()ä¼šå‡ºå‘ç³»ç»Ÿæç¤ºï¼Œå‘ç”¨æˆ·è¯·æ±‚è®¿é—®ç›¸æœºã€‚let authorizationStatus = AVCaptureDevice.authorizationStatusForMediaType(AVMediaTypeVideo)switch authorizationStatus {case .NotDetermined: // è®¸å¯å¯¹è¯æ²¡æœ‰å‡ºç°ï¼Œå‘èµ·æˆæƒè®¸å¯ AVCaptureDevice.requestAccessForMediaType(AVMediaTypeVideo, completionHandler: { (granted:Bool) -&gt; Void in if granted { // ç»§ç»­ } else { // ç”¨æˆ·æ‹’ç»ï¼Œæ— æ³•ç»§ç»­ } })case .Authorized: // ç»§ç»­case .Denied, .Restricted: // ç”¨æˆ·æ˜ç¡®åœ°æ‹’ç»æˆæƒï¼Œæˆ–è€…ç›¸æœºè®¾å¤‡æ— æ³•è®¿é—®}//å…è®¸è®¿é—®åçš„å¤„ç†ï¼Œæœ‰ä¸¤ç§æ–¹æ³•æ˜¾ç¤ºæ¥è‡ªç›¸æœºçš„å›¾åƒæµã€‚//ç¬¬ä¸€ç§ï¼Œç”Ÿæˆä¸€ä¸ªå¸¦æœ‰AVCaptureVideoPreviewLayerçš„viewã€‚ç”¨capture sessionåšåˆå§‹å‚æ•°ã€‚AVCaptureVideoPreviewLayerä¼šè‡ªåŠ¨çš„æ˜¾ç¤ºæ¥è‡ªç›¸æœºè¾“å‡ºpreviewLayer = AVCaptureVideoPreviewLayer.layerWithSession(session) as AVCaptureVideoPreviewLayerpreviewLayer.frame = view.boundsview.layer.addSublayer(previewLayer)//ç¬¬äºŒç§ï¼Œä»è¾“å‡ºæ•°æ®æµæ•æ‰å•ä¸€å›¾åƒå¸§ï¼Œä½¿ç”¨OpenGLæ‰‹åŠ¨æ˜¾ç¤ºåœ¨viewä¸Šã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæƒ³å®æ—¶é¢„è§ˆæ»¤é•œæ•ˆæœçš„æƒ…å†µã€‚glContext = EAGLContext(API: .OpenGLES2) //glView = GLKView(frame: viewFrame, context: glContext)ciContext = CIContext(EAGLContext: glContext)//AVCaptureVideoOutputvideoOutput = AVCaptureVideoDataOutput()videoOutput.setSampleBufferDelegate(self, queue: dispatch_queue_create(&quot;sample buffer delegate&quot;, DISPATCH_QUEUE_SERIAL))if session.canAddOutput(self.videoOutput) {session.addOutput(self.videoOutput)}//åˆ›å»ºå®ŒAVCaptureVideoDataOutputåéœ€è¦é€šè¿‡ä»£ç†captureOutput(_:didOutputSampleBuffer:fromConnection:)è·å¾—æ‰€æœ‰å›¾åƒå¸§ï¼Œå°†ä»–ä»¬ç»˜åˆ¶åœ¨GLKViewä¸­ã€‚func captureOutput(captureOutput: AVCaptureOutput!, didOutputSampleBuffer sampleBuffer: CMSampleBuffer!, fromConnection connection: AVCaptureConnection!) { let pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer) let image = CIImage(CVPixelBuffer: pixelBuffer) if glContext != EAGLContext.currentContext() { EAGLContext.setCurrentContext(glContext) } glView.bindDrawable() ciContext.drawImage(image, inRect:image.extent(), fromRect: image.extent()) glView.display()}//æ³¨æ„çš„é—®é¢˜ï¼Œ AVCaptureVideoPreviewLayerä¼šè‡ªåŠ¨å¤„ç†æ ·æœ¬æ—‹è½¬90åº¦çš„æƒ…å†µã€‚//ä½¿ç”¨AVCaptureStillImageOutputæ•æ‰é™æ€å›¾ç‰‡ã€‚stillCameraOutput = AVCaptureStillImageOutput()if self.session.canAddOutput(self.stillCameraOutput) { self.session.addOutput(self.stillCameraOutput)}//é…ç½®ï¼Œä¸ºå¯¹è±¡æ‰¾æœ€åˆé€‚çš„é…ç½®ã€‚æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨session presetsession.sessionPreset = AVCaptureSessionPresetPhoto //AVCaptureSessionPresetPhotoä¼šä¸ºç…§ç‰‡æ•æ‰é€‰æ‹©æœ€åˆé€‚çš„é…ç½®ï¼Œå…è®¸ä½¿ç”¨æœ€é«˜çš„æ„Ÿå…‰åº¦ï¼ˆISOï¼‰å’Œæ›å…‰æ—¶é—´ã€‚åŸºäºç›¸ä½æ£€æµ‹ï¼ˆphase detectionï¼‰çš„è‡ªåŠ¨å¯¹ç„¦ï¼Œä»¥åŠè¾“å‡ºå…¨åˆ†è¾¨ç‡çš„JPEGæ ¼å¼å‹ç¼©çš„é™æ€å›¾ç‰‡ã€‚ä½¿ç”¨AVCaptureDeviceFormatè¿™ä¸ªç±»å¯ä»¥æœ‰æ›´å¤šçš„æ“æ§ï¼Œæ¯”å¦‚é™æ€åˆ†è¾¨ç‡ï¼Œè§†é¢‘é¢„è§ˆåˆ†è¾¨ç‡ï¼Œè‡ªåŠ¨å¯¹ç„¦ç±»å‹ï¼Œæ„Ÿå…‰åº¦å’Œæ›å…‰æ—¶é—´é™åˆ¶ï¼Œæ”¯æŒæ ¼å¼éƒ½åœ¨AVCaptureDevice.formatsä¸­ï¼Œå¯ä»¥èµ‹å€¼ç»™AVCaptureDeviceçš„activeFormatã€‚ æ“ä½œç›¸æœºåˆ°äº†iOS8åå¯ä»¥å¯¹æ‰€æœ‰å‚æ•°è¿›è¡Œæ‰‹åŠ¨è°ƒæ•´äº†ã€‚åŒ…æ‹¬é•œå¤´å…‰åœˆã€‚ 123456789101112131415//å…ˆå¯åŠ¨ç›¸æœºsessionQueue = dispatch_queue_create(&quot;com.example.camera.capture_session&quot;, DISPATCH_QUEUE_SERIAL)dispatch_async(sessionQueue) { () -&gt; Void in self.session.startRunning()}//å»ºè®®å°†æ‰€æœ‰blockè°ƒç”¨æ“ä½œå’Œé…ç½®åˆ†é…åˆ°åå°ä¸²è¡Œé˜Ÿåˆ—ä¸­ã€‚åœ¨ç›¸æœºè®¾å¤‡æ”¹å˜ä¸€äº›å‚æ•°å‰å…ˆé”å®šï¼Œæ”¹å®Œå†è§£é”var error:NSError?if currentDevice.lockForConfiguration(&amp;error) { // é”å®šæˆåŠŸï¼Œç»§ç»­é…ç½® // currentDevice.unlockForConfiguration()}else { // å‡ºé”™ï¼Œç›¸æœºå¯èƒ½å·²ç»è¢«é”} å¯¹ç„¦AVCaptureFocusModeæšä¸¾æè¿°å¯ç”¨å¯¹ç„¦æ¨¡å¼ lockedï¼šé•œç‰‡å›ºå®šä½ç½® AutoFocusï¼šå…ˆè‡ªåŠ¨å¯¹ç„¦ä¸€æ¬¡å°±å¤„äºLockedæ¨¡å¼ ContinuousAutoFocusï¼šåœºæ™¯æ”¹å˜è‡ªåŠ¨é‡æ–°å¯¹ç„¦åˆ°ç”»é¢ä¸­å¿ƒç‚¹ å¯¹ç„¦å¯ä»¥ä½¿ç”¨UISliderè®¾ç½®ï¼Œç±»ä¼¼å•åå¯¹ç„¦ç¯ã€‚æ‰‹åŠ¨å¯¹ç„¦æœ‰ä¸ªè¾…åŠ©æ ‡è¯†æŒ‡å‘æ¸…æ™°åŒºåŸŸï¼Œå¯ä»¥é€šè¿‡å¯¹ç„¦å³°å€¼ï¼ˆfocus peakingï¼‰å°†å¯¹ç„¦åŒºåŸŸé«˜äº®æ˜¾ç¤ºçš„æ–¹å¼ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨é˜ˆå€¼è¾¹ç¼˜ï¼ˆthreshold edgeï¼‰æ»¤é•œï¼Œè‡ªå®šä¹‰CIFilteræˆ–GPUImageThresholdEdgeDetectionFilterï¼Œå¹¶è°ƒç”¨AVCaptureAudioDataOutputSampleBufferDelegateä¸‹çš„captureOutput(_:didOutputSampleBuffer:fromConnection:)æ–¹æ³•å°†å®ƒè¦†ç›–åˆ°å®æ—¶é¢„è§ˆå›¾ä¸Šã€‚ 1234567891011121314151617181920212223242526//è®¾ç½®å¯¹ç„¦æ¨¡å¼éœ€è¦åœ¨é”å®šålet focusMode:AVCaptureFocusMode = ...if currentCameraDevice.isFocusModeSupported(focusMode) { ... // é”å®šä»¥è¿›è¡Œé…ç½® currentCameraDevice.focusMode = focusMode ... // è§£é”}//AutoFocusä¼šè®©å±å¹•ä¸­å¿ƒä¸ºæ¸…æ™°åŒºï¼Œä¹Ÿå¯ä»¥é€šè¿‡é¢„è§ˆå›¾ä¸Šç‚¹å‡»æ‰‹åŠ¿æ”¹å˜è¿™ä¸ªåŒºåŸŸã€‚var pointInPreview = focusTapGR.locationInView(focusTapGR.view)var pointInCamera = previewLayer.captureDevicePointOfInterestForPoint(pointInPreview)...// é”å®šï¼Œé…ç½®// è®¾ç½®æ„Ÿå…´è¶£çš„ç‚¹currentCameraDevice.focusPointOfInterest = pointInCamera// åœ¨è®¾ç½®çš„ç‚¹ä¸Šåˆ‡æ¢æˆè‡ªåŠ¨å¯¹ç„¦currentCameraDevice.focusMode = .AutoFocus...// è§£é”//iOS8ä¸­å¯ä»¥é€šè¿‡é€‰é¡¹ç§»åŠ¨é•œç‰‡çš„ä½ç½®... // é”å®šï¼Œé…ç½®var lensPosition:Float = ... // 0.0 åˆ° 1.0çš„floatcurrentCameraDevice.setFocusModeLockedWithLensPosition(lensPosition) { (timestamp:CMTime) -&gt; Void in // timestamp å¯¹åº”äºåº”ç”¨äº†é•œç‰‡ä½ç½®çš„ç¬¬ä¸€å¼ å›¾åƒç¼“å­˜åŒº}... // è§£é” æ›å…‰æ›å…‰æ¡£æ•°èŒƒå›´åœ¨minExposureTargetBiaså’ŒmaxExposureTargetBiasä¹‹é—´ã€‚0ä¸ºé»˜è®¤æ²¡æœ‰è¡¥å¿ 12345678910111213141516var exposureBias:Float = ... // åœ¨ minExposureTargetBias å’Œ maxExposureTargetBias ä¹‹é—´çš„å€¼... // é”å®šï¼Œé…ç½®currentDevice.setExposureTargetBias(exposureBias) { (time:CMTime) -&gt; Void in}... // è§£é”//è®¾ç½®ISOå’Œæ›å…‰æ—¶é—´var activeFormat = currentDevice.activeFormatvar duration:CTime = ... //åœ¨activeFormat.minExposureDuration å’Œ activeFormat.maxExposureDuration ä¹‹é—´çš„å€¼ï¼Œæˆ–ç”¨ AVCaptureExposureDurationCurrent è¡¨ç¤ºä¸å˜var iso:Float = ... // åœ¨ activeFormat.minISO å’Œ activeFormat.maxISO ä¹‹é—´çš„å€¼ï¼Œæˆ–ç”¨ AVCaptureISOCurrent è¡¨ç¤ºä¸å˜... // é”å®šï¼Œé…ç½®currentDevice.setExposureModeCustomWithDuration(duration, ISO: iso) { (time:CMTime) -&gt; Void in}... // è§£é”//æ£€éªŒæ›å…‰æ˜¯å¦å‡†ç¡®å¯ä»¥é€šè¿‡KVOè§‚å¯ŸAVCaptureDeviceçš„exposureTargetOffsetå±æ€§ã€‚ ç™½å¹³è¡¡iOS8å¯ä»¥æ‰‹åŠ¨æ§åˆ¶ç™½å¹³è¡¡ã€‚å¯ä»¥é€šè¿‡å¼€å°”æ–‡æ‰€è¡¨ç¤ºçš„æ¸©åº¦æ¥è°ƒèŠ‚è‰²æ¸©å’Œè‰²å½©ã€‚å…¸å‹è‰²æ¸©å€¼åœ¨2000-3000Kï¼ˆç±»ä¼¼èœ¡çƒ›æˆ–ç¯æ³¡çš„æš–å…‰æºï¼‰åˆ°8000Kï¼ˆçº¯å‡€çš„è“è‰²å¤©ç©ºï¼‰ä¹‹é—´ã€‚è‰²å½©èŒƒå›´ä»æœ€å°çš„-150ï¼ˆåç»¿ï¼‰åˆ°150ï¼ˆåå“çº¢ï¼‰ã€‚ 12345678910var incandescentLightCompensation = 3_000var tint = 0 // ä¸è°ƒèŠ‚let temperatureAndTintValues = AVCaptureWhiteBalanceTemperatureAndTintValues(temperature: incandescentLightCompensation, tint: tint)var deviceGains = currentCameraDevice.deviceWhiteBalanceGainsForTemperatureAndTintValues(temperatureAndTintValues)... // é”å®šï¼Œé…ç½®currentCameraDevice.setWhiteBalanceModeLockedWithDeviceWhiteBalanceGains(deviceGains) { (timestamp:CMTime) -&gt; Void in }}... // è§£é” å®æ—¶äººè„¸æ£€æµ‹ä½¿ç”¨AVCaptureMetadataOutputå¯ä»¥æ£€æµ‹äººè„¸å’ŒäºŒç»´ç ã€‚ 1234567891011121314var metadataOutput = AVCaptureMetadataOutput()metadataOutput.setMetadataObjectsDelegate(self, queue: self.sessionQueue)if session.canAddOutput(metadataOutput) { session.addOutput(metadataOutput)}metadataOutput.metadataObjectTypes = [AVMetadataObjectTypeFace]func captureOutput(captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [AnyObject]!, fromConnection connection: AVCaptureConnection!) { for metadataObject in metadataObjects as [AVMetadataObject] { if metadataObject.type == AVMetadataObjectTypeFace { var transformedMetadataObject = previewLayer.transformedMetadataObjectForMetadataObject(metadataObject) } }} æ•æ‰é™æ€å›¾ç‰‡æ•æ‰é«˜åˆ†è¾¨ç‡å›¾åƒè°ƒç”¨captureStillImageAsynchronouslyFromConnection(connection, completionHandler)ã€‚åœ¨è§†è§‰ä¸Šååº”å›¾ç‰‡æ•æ‰ä½•æ—¶å¼€å§‹ä»¥åŠä½•æ—¶ç»“æŸå¯ä»¥ä½¿ç”¨KVOæ¥è§‚å¯ŸAVCaptureStillImageOutputçš„isCapturingStillImageå±æ€§ã€‚ 12345678910111213141516171819202122232425262728293031dispatch_async(sessionQueue) { () -&gt; Void in let connection = self.stillCameraOutput.connectionWithMediaType(AVMediaTypeVideo) // å°†è§†é¢‘çš„æ—‹è½¬ä¸è®¾å¤‡åŒæ­¥ connection.videoOrientation = AVCaptureVideoOrientation(rawValue: UIDevice.currentDevice().orientation.rawValue)! self.stillCameraOutput.captureStillImageAsynchronouslyFromConnection(connection) { (imageDataSampleBuffer, error) -&gt; Void in if error == nil { // å¦‚æœä½¿ç”¨ session .Photo é¢„è®¾ï¼Œæˆ–è€…åœ¨è®¾å¤‡è¾“å‡ºè®¾ç½®ä¸­æ˜ç¡®è¿›è¡Œäº†è®¾ç½® // æˆ‘ä»¬å°±èƒ½è·å¾—å·²ç»å‹ç¼©ä¸ºJPEGçš„æ•°æ® let imageData = AVCaptureStillImageOutput.jpegStillImageNSDataRepresentation(imageDataSampleBuffer) // æ ·æœ¬ç¼“å†²åŒºä¹ŸåŒ…å«å…ƒæ•°æ®ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æŒ‰éœ€ä¿®æ”¹å®ƒ let metadata:NSDictionary = CMCopyDictionaryOfAttachments(nil, imageDataSampleBuffer, CMAttachmentMode(kCMAttachmentMode_ShouldPropagate)).takeUnretainedValue() if let image = UIImage(data: imageData) { // ä¿å­˜å›¾ç‰‡ï¼Œæˆ–è€…åšäº›å…¶ä»–æƒ³åšçš„äº‹æƒ… ... } } else { NSLog(&quot;error while capturing still image: \\(error)&quot;) } }} åˆ†çº§æ•æ‰é€šè¿‡è®¾å®š-1ï¼Œ0ï¼Œ-1ä¸‰ä¸ªä¸åŒæ›å…‰æ¡£æ•°ç”¨HDRç®—æ³•åˆå¹¶æˆä¸€å¼ ã€‚ 12345678910111213141516171819202122dispatch_async(sessionQueue) { () -&gt; Void in let connection = self.stillCameraOutput.connectionWithMediaType(AVMediaTypeVideo) connection.videoOrientation = AVCaptureVideoOrientation(rawValue: UIDevice.currentDevice().orientation.rawValue)! var settings = [-1.0, 0.0, 1.0].map {(bias:Float) -&gt; AVCaptureAutoExposureBracketedStillImageSettings in AVCaptureAutoExposureBracketedStillImageSettings.autoExposureSettingsWithExposureTargetBias(bias) } var counter = settings.count self.stillCameraOutput.captureStillImageBracketAsynchronouslyFromConnection(connection, withSettingsArray: settings) {(sampleBuffer, settings, error) -&gt; Void in ... // ä¿å­˜ sampleBuffer(s) // å½“è®¡æ•°ä¸º0ï¼Œæ•æ‰å®Œæˆ counter-- }} æ“ä½œå›¾åƒ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556//å°†ä¸¤ä¸ªå›¾ç‰‡æ‹¼æ¥ï¼Œå¹¶åœ¨å›¾ç‰‡ä¸ŠåŠ ä¸ªåŒºåŸŸå¼ºè°ƒ-(UIImage*)composeStereogramLeft:(UIImage *)leftImage right:(UIImage *)rightImage{ float w = leftImage.size.width; float h = leftImage.size.height; UIGraphicsBeginImageContext(CGSizeMake(w * 2.0, h + 32.0)); [leftImage drawAtPoint:CGPointMake(0.0, 32.0)]; [rightImage drawAtPoint:CGPointMake(w, 32.0)]; float leftCircleX = (w / 2.0) - 8.0; float rightCircleX = leftCircleX + w; float circleY = 8.0; [[UIColor blackColor] setFill]; UIRectFill(CGRectMake(0.0, 0.0, w * 2.0, 32.0)); [[UIColor whiteColor] setFill]; CGRect leftRect = CGRectMake(leftCircleX, circleY, 16.0, 16.0); CGRect rightRect = CGRectMake(rightCircleX, circleY, 16.0, 16.0); UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:leftRect]; [path appendPath:[UIBezierPath bezierPathWithOvalInRect:rightRect]]; [path fill]; UIImage *savedImg = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return savedImg;}//ä½¿ç”¨CGBitmapContextCreateåˆ›å»ºä½å›¾ç»˜åˆ¶ç¯å¢ƒï¼Œç„¶åå¯ä»¥éå†ä½å›¾è·å¾—å„ä¸ªé¢œè‰²é€šé“å€¼ï¼Œç»´æŒä¸€å¼ å›¾ç‰‡ä¸­çš„ç»¿è‰²å’Œè“è‰²çš„åŸå€¼ï¼Œç„¶åå°†è“è‰²å’Œç»¿è‰²çš„å€¼æŒ‰ä¸€å®šæ–¹å¼è®¡ç®—åèµ‹å€¼ç»™å¦ä¸€å¼ å›¾ç‰‡çš„çº¢è‰²å€¼ã€‚//å¯ä»¥è®¿é—®å®é™…åƒç´ çš„æ‰€æœ‰ä¿¡æ¯ï¼Œåšä»»ä½•å¤„ç†ï¼Œä¸è¿‡Core Imageä¹Ÿä¼šæä¾›ä¸€äº›æ»¤é•œæ–¹ä¾¿ä½¿ç”¨ã€‚UInt8 *rightPtr = rightBitmap;UInt8 *leftPtr = leftBitmap;UInt8 r1, g1, b1;UInt8 r2, g2, b2;UInt8 ra, ga, ba;for (NSUInteger idx = 0; idx &lt; bitmapByteCount; idx += 4) { r1 = rightPtr[0]; g1 = rightPtr[1]; b1 = rightPtr[2]; r2 = leftPtr[0]; g2 = leftPtr[1]; b2 = leftPtr[2]; // r1/g1/b1 å³ä¾§å›¾åƒï¼Œç”¨äºè®¡ç®—åˆå¹¶å€¼ // r2/g2/b2 å·¦ä¾§å›¾åƒï¼Œç”¨äºè¢«åˆå¹¶å€¼èµ‹å€¼ // ra/ga/ba åˆå¹¶åçš„åƒç´  ra = 0.7 * g1 + 0.3 * b1; ga = b2; ba = b2; leftPtr[0] = ra; leftPtr[1] = ga; leftPtr[2] = ba; rightPtr += 4; // æŒ‡å‘ä¸‹ä¸€ä¸ªåƒç´  (4å­—èŠ‚, åŒ…æ‹¬é€æ˜åº¦ alpha å€¼) leftPtr += 4;}CGImageRef composedImage = CGBitmapContextCreateImage(_leftContext);UIImage *retval = [UIImage imageWithCGImage:composedImage];CGImageRelease(composedImage);return retval; å…ƒæ•°æ®å­˜å‚¨å›¾åƒä¿¡æ¯çš„æ ‡å‡†æ ¼å¼æ˜¯Exifï¼ˆå¯äº¤æ¢å›¾åƒæ–‡ä»¶æ ¼å¼ï¼‰ã€‚é€šå¸¸ä¼šä¿å­˜ç…§ç›¸æ—¶é—´æ—¥æœŸï¼Œå¿«é—¨é€Ÿåº¦å’Œå…‰åœˆï¼Œè®¾å¤‡æ”¯æŒè¿˜ä¼šåŒ…æ‹¬GPSåæ ‡ã€‚å¯ä»¥ä½¿ç”¨CGImageSourceCopyPropertiesAtIndexæ–¹æ³•è®¿é—®Exifä¿¡æ¯ã€‚","link":"/program/ï£¿/camera/"},{"title":"CFRunLoop ","text":"ç®€ä»‹ç®€å•çš„è¯´run loopæ˜¯äº‹ä»¶é©±åŠ¨çš„ä¸€ä¸ªå¤§å¾ªç¯ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤º123456789101112int main(int argc, char * argv[]) { //ç¨‹åºä¸€ç›´è¿è¡ŒçŠ¶æ€ while (AppIsRunning) { //ç¡çœ çŠ¶æ€ï¼Œç­‰å¾…å”¤é†’äº‹ä»¶ id whoWakesMe = SleepForWakingUp(); //å¾—åˆ°å”¤é†’äº‹ä»¶ id event = GetEvent(whoWakesMe); //å¼€å§‹å¤„ç†äº‹ä»¶ HandleEvent(event); } return 0;} Cocoaä¼šæ¶‰åŠåˆ°Run Loopsçš„ ç³»ç»Ÿçº§ï¼šGCDï¼Œmach kernelï¼Œblockï¼Œpthread åº”ç”¨å±‚ï¼šNSTimerï¼ŒUIEventï¼ŒAutoreleaseï¼ŒNSObject(NSDelayedPerforming)ï¼ŒNSObject(NSThreadPerformAddition)ï¼ŒCADisplayLinkï¼ŒCATransitionï¼ŒCAAnimationï¼Œdispatch_get_main_queue()ï¼ˆGCDä¸­dispatchåˆ°main queueçš„blockä¼šè¢«dispatchåˆ°main RunLoopæ‰§è¡Œï¼‰ï¼ŒNSPortï¼ŒNSURLConnectionï¼ŒAFNetworking(è¿™ä¸ªç¬¬ä¸‰æ–¹ç½‘ç»œè¯·æ±‚æ¡†æ¶ä½¿ç”¨åœ¨å¼€å¯æ–°çº¿ç¨‹ä¸­æ·»åŠ è‡ªå·±çš„run loopç›‘å¬äº‹ä»¶) åœ¨Main threadå †æ ˆä¸­æ‰€å¤„ä½ç½®å †æ ˆæœ€åº•å±‚æ˜¯start(dyld)ï¼Œå¾€ä¸Šä¾æ¬¡æ˜¯mainï¼ŒUIApplication(main.m) -&gt; GSEventRunModal(Graphic Services) -&gt; RunLoop(åŒ…å«CFRunLoopRunSpecificï¼ŒCFRunLoopRunï¼ŒCFRunLoopDoSouces0ï¼ŒCFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION) -&gt; Handle Touch Event RunLoopåŸç†CFRunLoopå¼€æºä»£ç ï¼šhttps://opensource.apple.com/source/CF/CF-855.17/ æ‰§è¡Œé¡ºåºçš„ä¼ªä»£ç 123456789101112131415161718192021222324252627SetupThisRunLoopRunTimeoutTimer(); // by GCD timerdo { __CFRunLoopDoObservers(kCFRunLoopBeforeTimers); __CFRunLoopDoObservers(kCFRunLoopBeforeSources); __CFRunLoopDoBlocks(); __CFRunLoopDoSource0(); CheckIfExistMessagesInMainDispatchQueue(); // GCD __CFRunLoopDoObservers(kCFRunLoopBeforeWaiting); var wakeUpPort = SleepAndWaitForWakingUpPorts(); // mach_msg_trap // Zzz... // Received mach_msg, wake up __CFRunLoopDoObservers(kCFRunLoopAfterWaiting); // Handle msgs if (wakeUpPort == timerPort) { __CFRunLoopDoTimers(); } else if (wakeUpPort == mainDispatchQueuePort) { // GCD __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__() } else { __CFRunLoopDoSource1(); } __CFRunLoopDoBlocks();} while (!stop &amp;&amp; !timeout); æ„æˆThreadåŒ…å«ä¸€ä¸ªCFRunLoopï¼Œä¸€ä¸ªCFRunLoopåŒ…å«ä¸€ç§CFRunLoopModeï¼ŒmodeåŒ…å«CFRunLoopSourceï¼ŒCFRunLoopTimerå’ŒCFRunLoopObserverã€‚ CFRunLoopModeRunLoopåªèƒ½è¿è¡Œåœ¨ä¸€ç§modeä¸‹ï¼Œå¦‚æœè¦æ¢modeå½“å‰çš„loopä¹Ÿéœ€è¦åœä¸‹é‡å¯æˆæ–°çš„ã€‚åˆ©ç”¨è¿™ä¸ªæœºåˆ¶ï¼ŒScrollViewè¿‡ç¨‹ä¸­NSDefaultRunLoopModeçš„modeä¼šåˆ‡æ¢UITrackingRunLoopModeæ¥ä¿è¯ScrollViewçš„æµç•…æ»‘åŠ¨ä¸å—åªèƒ½åœ¨NSDefaultRunLoopModeæ—¶å¤„ç†çš„äº‹ä»¶å½±å“æ»‘åŠ¨ã€‚åŒæ—¶modeè¿˜æ˜¯å¯å®šåˆ¶çš„ã€‚ NSDefaultRunLoopModeï¼šé»˜è®¤ï¼Œç©ºé—²çŠ¶æ€ UITrackingRunLoopModeï¼šScrollViewæ»‘åŠ¨æ—¶ UIInitializationRunLoopModeï¼šå¯åŠ¨æ—¶ NSRunLoopCommonModesï¼šModeé›†åˆTimerè®¡æ—¶ä¼šè¢«scrollViewçš„æ»‘åŠ¨å½±å“çš„é—®é¢˜å¯ä»¥é€šè¿‡å°†timeræ·»åŠ åˆ°NSRunLoopCommonModesæ¥è§£å†³12345678910111213//å°†timeræ·»åŠ åˆ°NSDefaultRunLoopModeä¸­[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];//ç„¶åå†æ·»åŠ åˆ°NSRunLoopCommonModesé‡ŒNSTimer *timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; CFRunLoopTimerNSTimeræ˜¯å¯¹RunLoopTimerçš„å°è£… 1234567+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti invocation:(NSInvocation *)invocation repeats:(BOOL)yesOrNo;+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti invocation:(NSInvocation *)invocation repeats:(BOOL)yesOrNo;- (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay inModes:(NSArray *)modes;+ (CADisplayLink *)displayLinkWithTarget:(id)target selector:(SEL)sel;- (void)addToRunLoop:(NSRunLoop *)runloop forMode:(NSString *)mode; CFRunLoopSource source0ï¼šå¤„ç†å¦‚UIEventï¼ŒCFSocketè¿™æ ·çš„äº‹ä»¶ source1ï¼šMach porté©±åŠ¨ï¼ŒCFMachportï¼ŒCFMessagePort CFRunLoopObserverCocoaæ¡†æ¶ä¸­å¾ˆå¤šæœºåˆ¶æ¯”å¦‚CAAnimationç­‰éƒ½æ˜¯ç”±RunLoopObserverè§¦å‘çš„ã€‚observeråˆ°å½“å‰çŠ¶æ€çš„å˜åŒ–è¿›è¡Œé€šçŸ¥ã€‚ 123456789typedef CF_OPTIONS(CFOptionFlags, CFRunLoopActivity) { kCFRunLoopEntry = (1UL &lt;&lt; 0), kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1), kCFRunLoopBeforeSources = (1UL &lt;&lt; 2), kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5), kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6), kCFRunLoopExit = (1UL &lt;&lt; 7), kCFRunLoopAllActivities = 0x0FFFFFFFU}; ä½¿ç”¨RunLoopçš„æ¡ˆä¾‹AFNetworkingä½¿ç”¨NSOperation+NSURLConnectionå¹¶å‘æ¨¡å‹éƒ½ä¼šé¢ä¸´NSURLConnectionä¸‹è½½å®Œæˆå‰çº¿ç¨‹é€€å‡ºå¯¼è‡´NSOperationå¯¹è±¡æ¥æ”¶ä¸åˆ°å›è°ƒçš„é—®é¢˜ã€‚AFNetWorkingè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯æŒ‰ç…§å®˜æ–¹çš„guidhttps://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLConnection/initWithRequest:delegate:startImmediately:ä¸Šå†™çš„NSURLConnectionçš„delegateæ–¹æ³•éœ€è¦åœ¨connectionå‘èµ·çš„çº¿ç¨‹runloopä¸­è°ƒç”¨ï¼Œäºæ˜¯AFNetWorkingç›´æ¥å€Ÿé‰´äº†Appleè‡ªå·±çš„ä¸€ä¸ªDemohttps://developer.apple.com/LIBRARY/IOS/samplecode/MVCNetworking/Introduction/Intro.htmlçš„å®ç°æ–¹æ³•å•ç‹¬èµ·ä¸€ä¸ªglobal threadï¼Œå†…ç½®ä¸€ä¸ªrunloopï¼Œæ‰€æœ‰çš„connectionéƒ½ç”±è¿™ä¸ªrunloopå‘èµ·ï¼Œå›è°ƒä¹Ÿæ˜¯å®ƒæ¥æ”¶ï¼Œä¸å ç”¨ä¸»çº¿ç¨‹ï¼Œä¹Ÿä¸è€—CPUèµ„æºã€‚ 1234567891011121314151617181920212223+ (void)networkRequestThreadEntryPoint:(id)__unused object { @autoreleasepool { [[NSThread currentThread] setName:@&quot;AFNetworking&quot;]; NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; [runLoop run]; }}+ (NSThread *)networkRequestThread { static NSThread *_networkRequestThread = nil; static dispatch_once_t oncePredicate; dispatch_once(&amp;oncePredicate, ^{ _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil]; [_networkRequestThread start]; }); return _networkRequestThread;} ç±»ä¼¼çš„å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªå¸¸é©»æœåŠ¡çš„çº¿ç¨‹ã€‚ TableViewä¸­å®ç°å¹³æ»‘æ»šåŠ¨å»¶è¿ŸåŠ è½½å›¾ç‰‡åˆ©ç”¨CFRunLoopModeçš„ç‰¹æ€§ï¼Œå¯ä»¥å°†å›¾ç‰‡çš„åŠ è½½æ”¾åˆ°NSDefaultRunLoopModeçš„modeé‡Œï¼Œè¿™æ ·åœ¨æ»šåŠ¨UITrackingRunLoopModeè¿™ä¸ªmodeæ—¶ä¸ä¼šè¢«åŠ è½½è€Œå½±å“åˆ°ã€‚ 12345UIImage *downloadedImage = ...;[self.avatarImageView performSelector:@selector(setImage:) withObject:downloadedImage afterDelay:0 inModes:@[NSDefaultRunLoopMode]]; æ¥åˆ°ç¨‹åºå´©æºƒæ—¶çš„ä¿¡å·è¿›è¡Œè‡ªä¸»å¤„ç†ä¾‹å¦‚å¼¹å‡ºæç¤ºç­‰1234567CFRunLoopRef runLoop = CFRunLoopGetCurrent();NSArray *allModes = CFBridgingRelease(CFRunLoopCopyAllModes(runLoop));while (1) { for (NSString *mode in allModes) { CFRunLoopRunInMode((CFStringRef)mode, 0.001, false); }} å¼‚æ­¥æµ‹è¯•12345678910111213141516171819202122- (BOOL)runUntilBlock:(BOOL(^)())block timeout:(NSTimeInterval)timeout{ __block Boolean fulfilled = NO; void (^beforeWaiting) (CFRunLoopObserverRef observer, CFRunLoopActivity activity) = ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) { fulfilled = block(); if (fulfilled) { CFRunLoopStop(CFRunLoopGetCurrent()); } }; CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(NULL, kCFRunLoopBeforeWaiting, true, 0, beforeWaiting); CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopDefaultMode); // Run! CFRunLoopRunInMode(kCFRunLoopDefaultMode, timeout, false); CFRunLoopRemoveObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopDefaultMode); CFRelease(observer); return fulfilled;} ming1016","link":"/program/ï£¿/cfrunloop/"},{"title":"Flutterçš„ç¯å¢ƒé…ç½® for Mac","text":"å‰è¨€æœ€è¿‘Flutterå·²ç»ç–¯ç‹‚çš„åˆ·å±äº†å„ä¸ªæŠ€æœ¯åšå®¢ã€æŠ€æœ¯ç½‘ç«™ï¼Œå®Œå…¨æœ‰ä¸€ç»Ÿå¤©ä¸‹çš„æ°”åŠ¿ã€‚æ‰€ä»¥æœ€è¿‘ä¹Ÿå†³å®šå¼€å§‹å°å°é²œï¼Œä»é›¶å¼€å§‹ä¸€æ­¥æ­¥çš„æ¥æ¢ç´¢Flutterçš„ä¸–ç•Œã€‚å°±ä»ç¯å¢ƒæ­å»ºå¼€å§‹ï¼Œè®°å½•ä¸€ä¸‹è‡ªå·±æ¢ç´¢Flutterçš„è¿‡ç¨‹ã€‚ å®‰è£…Flutteré¦–å…ˆæˆ‘ä»¬å¯ä»¥åœ¨Flutterå®˜ç½‘ä¸Šé¢çœ‹åˆ°ä¸€äº›é…ç½®ç¯å¢ƒçš„æ­¥éª¤ã€‚è¿™é‡Œå°±ç›´æ¥å¼€å¹²äº†ï¼Œèµ°èµ·ã€‚ 1ã€é…ç½®HomeBrewæˆ‘ä»¬åœ¨å»é…ç½®Flutterçš„ç¯å¢ƒä¹‹å‰ï¼Œéœ€è¦å…ˆæ£€æŸ¥ä¸€ä¸‹HomeBrewæ˜¯ä¸æ˜¯æœ€æ–°çš„ã€‚ 1$ brew update å¦‚æœæ²¡æœ‰brewçš„è¯ï¼Œå¯ä»¥å»HomeBrewå®˜ç½‘è‡ªè¡Œä¸‹è½½ã€‚è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œè¿™é‡Œå¦‚æœé‡æ–°ä¸‹è½½çš„è¯ï¼Œçœ‹åˆ°ä¸‹é¢çš„æ‰“å°ä¿¡æ¯å°±è¯´æ˜ä¸‹è½½å®Œæ¯•äº†ã€‚ 2ã€ä¸‹è½½SDKæ¥ä¸‹æ¥å°±æ˜¯å»å®˜ç½‘ä¸‹è½½SDKäº†ã€‚æ³¨æ„ï¼Œè¿™é‡Œä¸‹è½½SDKæœ‰ä¸¤ç§æ–¹æ³•ï¼š ä¸€æ˜¯ç›´æ¥git clone -b beta https://github.com/flutter/flutter.gitä¸‹è½½ äºŒæ˜¯è‡ªå·±åœ¨å®˜ç½‘ä¸‹è½½ä¸‹æ¥ï¼Œå¦‚ä¸‹å›¾ è¿™é‡Œæˆ‘ä¸¤ç§æ–¹æ³•éƒ½è¯•è¿‡äº†ä¸€éï¼Œç¬¬ä¸€ç§æ–¹æ³•å®åœ¨æ˜¯å¤ªæ…¢äº†ï¼Œåœ¨ç»å†äº†è€—è´¹ä¸€ä¸ªåŠå°æ—¶ä¸‹è½½åˆ°94%ï¼Œæœ€åæç¤ºå¤±è´¥äº†çš„è¿‡ç¨‹ä¹‹åï¼Œæˆ‘å†³å®šè¿˜æ˜¯ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œæ•´ä¸ªè¿‡ç¨‹åªç”¨äº†3åˆ†é’Ÿçš„æ ·å­ï¼Œç›¸å½“æ»¡æ„ã€‚ä¸‹è½½å®Œä¹‹åï¼Œæ˜¯ä¸€ä¸ªåå­—å«flutter_macos_v1.5.4-hotfix.2-stable.zipçš„å‹ç¼©åŒ…ã€‚ ç„¶åæˆ‘ä»¬è§£å‹è¿™ä¸ªzipåŒ…ï¼ŒæŠŠè§£å‹å‡ºæ¥çš„flutteræ–‡ä»¶æ”¾åˆ°æ ¹ç›®å½•ä¸‹å³å¯ã€‚ 3ã€é…ç½®ç¯å¢ƒå˜é‡å› ä¸ºFlutterçš„SDKä¸­åŒ…å«äº†å¾ˆå¤šçš„å‘½ä»¤è¡Œå·¥å…·ã€‚æˆ‘ä»¬å°±éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥å°±å®‰è£…åˆ°äº†æ ¹ç›®å½•ä¸‹äº†ã€‚ é…ç½®é•œåƒ å› ä¸ºFlutteråœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå°±éœ€è¦å»å®˜ç½‘ä¸‹è½½ä¸€äº›éœ€è¦çš„èµ„æºï¼Œä½†æ˜¯å› ä¸ºå¤©å›½ç‰¹è‰²çš„wallçš„åŸå› ï¼Œæˆ‘ä»¬å°±éœ€è¦é•œåƒæœåŠ¡å™¨ï¼Œè¿™ä¸ªåœ¨å®˜ç½‘ä¸Šé¢æœ‰å†™çš„å¾ˆæ˜ç™½ï¼Œè€Œä¸”è¿™æ˜¯ä¸€ä¸ªä¸´æ—¶çš„é•œåƒï¼Œåé¢è¿˜è¦ä»¥å®˜ç½‘çš„é•œåƒåœ°å€ä¸ºå‡†ã€‚ æˆ‘ä»¬è·³è½¬åˆ°æ ¹ç›®å½• 1cd ~ å°±èƒ½æ‰¾åˆ°è¿™ä¸ª.bash_profileéšè—æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨vimæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ 1vim ~/.bash_profile ç„¶åéœ€è¦è¾“å…¥å°±æŠŠAé”®æŒ‰ä¸€ä¸‹è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ŒæŠŠä¸‹é¢ä¸‰ä¸ªç¯å¢ƒå˜é‡é…ç½®è¿›å» 123export PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cnexport PATH=/Users/xueliheng/flutter/bin:$PATH æ³¨æ„ä¸‹ï¼Œç¬¬ä¸‰ä¸ªç¯å¢ƒå˜é‡è¿™é‡Œ/Users/xueliheng/æ˜¯æˆ‘çš„æ ¹ç›®å½•ï¼Œç„¶å/flutter/æ˜¯æˆ‘ä»¬åˆšåˆšè§£å‹çš„çš„zipåŒ…é‡Œé¢çš„flutteræ–‡ä»¶å¤¹ã€‚ä¸Šé¢ä¸¤ä¸ªç¯å¢ƒå˜é‡æ˜¯ä¸¤ä¸ªé•œåƒåœ°å€ï¼Œä¸Šæ–‡ä¸­ä¹Ÿæœ‰è¯´è¿‡ã€‚ æ¥ç€shift+ï¼šç„¶åè¾“å…¥wqä¿å­˜å¹¶é€€å‡ºvimã€‚è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š 1source ~/.bash_profile æœ€åæˆ‘ä»¬å°±å¯ä»¥éªŒè¯ä¸€ä¸‹flutterç¯å¢ƒæœ‰æ²¡æœ‰é…ç½®æˆåŠŸäº†ã€‚è¾“å…¥ï¼š 1flutter -h çœ‹åˆ°å¦‚ä¸‹å¦‚çš„æ‰“å°ä¿¡æ¯å°±æ˜¯é…ç½®æˆåŠŸäº† 4ã€é…ç½®Android Studioå¦‚æœæ²¡æœ‰ä¸‹è½½Android Studioçš„è¯ï¼Œå°±å»å®˜ç½‘å»ä¸‹è½½ä¸€ä¸‹ã€‚ æˆ‘ä»¬ç”¨flutter doctorå‘½ä»¤å»æ£€æŸ¥ä¸€ä¸‹flutterçš„ç¯å¢ƒé…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ‰“å° è¿™é‡Œçš„æ¯ä¸ªâœ—éƒ½æ˜¯æˆ‘ä»¬è¦å»è§£å†³çš„é—®é¢˜ã€‚ä¸è¿‡ä»–æœ‰å‘Šè¯‰ä½ åº”è¯¥æ€ä¹ˆåšã€‚æ¯”å¦‚ç¬¬ä¸€ä¸ªæç¤ºï¼š 12[âœ—] Android toolchain - develop for Android devices âœ— Unable to locate Android SDK. è¿™å°±æ˜¯è®©ä½ å»ä¸‹è½½Android Studioã€‚æˆ‘ä»¬åœ¨ä¸‹è½½å®Œæˆä¹‹åï¼Œæ‰“å¼€ASè®©ä»–å»ä¸‹è½½ä¸€äº›åº”è¯¥ä¸‹è½½çš„ä¸œè¥¿ã€‚ å¦‚æœè¿™é‡Œæœ‰æç¤ºä½  12[âœ—] Android toolchain - develop for Android devices (Android SDK version 24.0.2) âœ— Flutter requires Android SDK 28 and the Android BuildTools 28.0.3 è¿™å°±æ˜¯åœ¨æç¤ºè®©ä½ å»å‡çº§ä¸€ä¸‹SDKï¼Œç„¶åå‘½ä»¤å¦‚ä¸‹ 1&quot;/Users/xueliheng/Library/Android/sdk/tools/bin/sdkmanager&quot; &quot;platforms;android-28&quot; &quot;build-tools;28.0.3&quot; æ³¨æ„ä¸€ä¸‹ï¼Œè¿™ä¸ªåœ°æ–¹çš„å‡çº§æ˜¯éœ€è¦â€ç§‘å­¦ä¸Šç½‘â€œçš„ï¼Œå¦‚æœæœ‰çš„å°ä¼™ä¼´æ²¡æœ‰è¿™ä¸ªæ¡ä»¶çš„è¯ï¼Œæˆ‘è¿™è¾¹ç™¾åº¦äº‘ä¸Šé¢ç»™å¤§å®¶å‡†å¤‡äº†ä¸€ä¸ªé“¾æ¥ï¼Œæå–ç : e48cï¼Œå¤§å®¶å¯ä»¥ä¸‹è½½ä¸‹æ¥ã€‚ä¸‹è½½ä¸‹æ¥ä¹‹åè§£å‹åˆ°/Users/Library/Android/è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚æŠŠåŸå…ˆçš„SDKç›´æ¥è¦†ç›–å°±è¡Œäº†ï¼Œå°±å·²ç»æ˜¯æœ€æ–°çš„SDKäº†ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬é…ç½®ä¸€ä¸‹å®‰å“çš„ç¯å¢ƒå˜é‡ï¼Œè¿˜æ˜¯åœ¨æ ¹ç›®å½•ä¸‹æ‰¾åˆ°.bash_profileæ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ å››ä¸ªç¯å¢ƒå˜é‡ 1234export ANDROID_HOME=~/Library/Android/sdkexport PATH=${PATH}:${ANDROID_HOME}/emulatorexport PATH=${PATH}:${ANDROID_HOME}/toolsexport PATH=${PATH}:${ANDROID_HOME}/platform-tools åˆ†åˆ«æ˜¯ï¼š å®‰å“sdkçš„è·¯å¾„ å®‰å“çš„æ¨¡æ‹Ÿå™¨è·¯å¾„ å®‰å“toolsè·¯å¾„ å®‰å“å¹³å°å·¥å…· æ¥ä¸‹æ¥æˆ‘ä»¬å†ç”¨flutter doctoræ£€æŸ¥çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„ä¿¡æ¯å¦‚ä¸‹å›¾ æ„æ€å°±æ˜¯è®©æˆ‘ä»¬å»ä¸‹è½½iOSçš„ç›¸å…³ç¯å¢ƒï¼Œæˆ‘ä»¬å…ˆæš‚æ—¶æ”¾æ”¾ï¼Œä¸‹é¢è¿˜æœ‰ä¸€ä¸ªå…³äºAndroid Studioçš„æ²¡æœ‰è§£å†³å®Œ 12âœ— Flutter plugin not installed; this adds Flutter specific functionality.âœ— Dart plugin not installed; this adds Dart specific functionality. è¿™ä¸ªå°±æ˜¯ç¼ºå°‘Flutteræ’ä»¶çš„æ„æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å»ASé‡Œé¢å»é…ç½®ä¸€ä¸‹å¥½äº†ã€‚æ‰“å¼€ASçš„Preferencesï¼Œç‚¹å‡»Pluginsï¼Œåœ¨æœç´¢æ ä¸­è¾“å…¥flutterï¼Œæ‰¾åˆ°ç›¸åº”çš„æ’ä»¶ï¼Œç„¶åInstallã€‚å½“è·³å‡ºå®‰è£…Dartæ’ä»¶çš„æç¤ºç•Œé¢æ—¶ï¼Œè®°å¾—ç‚¹å‡»Yesè¿›è¡Œå®‰è£…ã€‚å®‰è£…å®Œæ¯•ä¹‹årestart IDEé‡å¯ASã€‚ é‡å¯ä¹‹åå°±èƒ½çœ‹åˆ°å¤šäº†ä¸€ä¸ªè¿™ä¸ªä¸œè¥¿ æˆ‘ä»¬å†ç”¨flutter doctoræ£€æµ‹ä¸€ä¸‹ ç°åœ¨ç»ˆäºokäº†ã€‚æˆ‘ä»¬çœ‹åˆ°[âœ“]Android Studioè¯´æ˜ï¼Œå®‰å“çš„ç¯å¢ƒåŸºæœ¬ä¸Šé…ç½®æˆåŠŸï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é…ç½®ä¸€ä¸‹å®‰å“çš„æ¨¡æ‹Ÿå™¨å°±å¥½äº†ã€‚ 5ã€å®‰å“æ¨¡æ‹Ÿå™¨é…ç½®åœ¨ASä¸­æ‰¾åˆ°æ¨¡æ‹Ÿå™¨é…ç½®å¦‚ä¸‹å›¾å¹¶é€‰æ‹© æ¥ç€å°±åˆ›å»ºè®¾å¤‡ï¼Œé€‰æ‹©è®¾å¤‡ é€‰æ‹©ç³»ç»Ÿ æœ€åç‚¹å‡»ä¸‹è½½å°±å®Œæˆäº†ã€‚ 6ã€é…ç½®iOSç¯å¢ƒæˆ‘ä»¬é…ç½®å®Œäº†å®‰å“çš„ç¯å¢ƒï¼Œå†æ¥flutter doctoræ£€æµ‹ä¸€ä¸‹ã€‚ æƒ…å†µæ˜¯è¿™æ ·çš„ã€‚ç›®å‰1.5.4ç‰ˆæœ¬çš„Flutteréœ€è¦åŒ¹é…æ–°ç‰ˆæœ¬çš„Xcode10.2.1ã€‚æŒ‰ç…§ä»–æç¤ºçš„æ¥è¯•è¯•ï¼Œæç¤ºæˆ‘Xcodeç‰ˆæœ¬å¤ªä½äº†ï¼Œéœ€è¦å‡çº§Xcode æ›´æ–°åˆ°æœ€æ–°çš„ä¹‹åï¼Œç»§ç»­èµ°ä¸‹é¢çš„æ­¥éª¤ä¾æ—§ä¼šæŠ¥é”™ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯•è¯•ä¸‹é¢çš„è¿™ä¸ªåŠæ³•ï¼š 123456$ brew link pkg-config$ brew install --HEAD usbmuxd$ brew unlink usbmuxd$ brew link usbmuxd$ brew install --HEAD libimobiledevice$ brew install ideviceinstaller è¿™äº›æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œä¸€ä¸‹flutter doctor æœ€åè¿˜çœŸæ˜¯æ²¡é”™ï¼Œå…¨éƒ¨é…ç½®å®Œæˆäº†ï¼é‚£ä¹ˆæˆ‘ä»¬å°±æŠŠiOSçš„ä¹Ÿé…ç½®å®Œæ¯•äº†ã€‚ 7ã€VSCodeçš„ä½¿ç”¨VSCodeä¸Šé¢ä½¿ç”¨çš„è¯ï¼Œå°±ç®€å•å¤šäº†ï¼Œè¿™é‡Œæˆ‘å°±ç®€ç­”çš„èµ˜è¿°ä¸€ä¸‹ã€‚ åªéœ€è¦å°†Dartå’ŒFlutteræ’ä»¶éƒ½ä¸‹è½½ä¸‹æ¥ ç„¶åcommand+shift+pè¾“å…¥flutterï¼Œé€‰æ‹©Flutterï¼šNew Project è¾“å…¥è¦åˆ›å»ºçš„é¡¹ç›®çš„åç§°å’Œå­˜æ”¾é¡¹ç›®çš„åœ°å€ã€‚å¦‚æœæç¤ºéœ€è¦æŒ‡æ˜flutterçš„SDKçš„è·¯å¾„ï¼Œé‚£å°±é€‰æ‹©æ ¹ç›®å½•é‚£ä¸ªç»è¿‡è§£å‹å¾—æ¥çš„flutterçš„æ–‡ä»¶å¤¹å°±å¥½äº†ã€‚ æ¥ä¸‹æ¥æ˜¯è¿™æ ·ä¸€ä¸ªç•Œé¢ æ¥ä¸‹æ¥æˆ‘ä»¬é€‰æ‹©View-&gt;Start Debuggingæ¥è¿è¡Œé¡¹ç›®ã€‚ å½“ç„¶è¿™ä¸ªè¿‡ç¨‹éœ€è¦ä½ æŠŠXcodeçš„æ¨¡æ‹Ÿå™¨æ‰“å¼€ã€‚è¿è¡Œå®Œä¹‹åå°±èƒ½çœ‹åˆ°è¿™ä¸ªç•Œé¢ï¼Œä¹Ÿå°±æ˜¯ä½ çš„ç¬¬ä¸€ä¸ªFlutterå·¥ç¨‹å•¦ï¼ 8ã€Hot reloadçš„ä½¿ç”¨æˆ‘ä»¬æ‰“å¼€lib/main.dartæ–‡ä»¶ï¼Œç„¶ååœ¨å…¶ä¸­æ‰¾åˆ° 1You have pushed the button this many times: å¹¶æŠŠè¿™ä¸ªæ”¹ä¸º 1You have clicked the button this many times: é‚£ä¹ˆæˆ‘ä»¬å°±èƒ½çœ‹åˆ°ç•Œé¢ä¸Šå¤šäº†ä¸€ä¸ªå°é—ªç”µ æˆ‘ä»¬ç°åœ¨å¦‚æœcommand+sä¿å­˜ä¸€ä¸‹æ›´æ”¹çš„è¯ï¼Œå°±èƒ½å¾ˆå¿«çš„åœ¨æ¨¡æ‹Ÿå™¨ä¸Šé¢çœ‹åˆ°ç›¸åº”çš„æ›´æ”¹ï¼Œä¸éœ€è¦å†é‡æ–°å»ç¼–è¯‘ä¸€è¾¹ã€‚è¿™ä¸€ç‚¹ç®€ç›´æ˜¯å¤ªæ£’äº†ï¼è§£å†³äº†iOSå¼€å‘è€…ä¸€ä¸ªå¤§ç—›ç‚¹å•Šï¼ï¼ï¼ ç»“è¯­è‡³æ­¤ï¼Œflutterçš„ç¯å¢ƒæ­å»ºå·¥ä½œåŸºæœ¬ä¸Šå°±è¿›è¡Œå®Œæ¯•äº†ï¼Œæ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚è€—æ—¶æ¥è¿‘2ä¸ªå°æ—¶ï¼Œè¿™æœŸé—´åŒ…æ‹¬é‡‡å‘ã€æŸ¥èµ„æ–™ã€ä¸‹è½½ã€ç§‘å­¦ä¸Šç½‘â€¦ç­‰ç­‰å¾ˆè›‹ç–¼çš„äº‹æƒ…ã€‚å½“ç„¶ç½‘é€ŸåŸºæœ¬ä¸Šæ˜¯æœ€å¤§çš„éšœç¢ï¼Œæµªè´¹äº†å¾ˆå¤šçš„æ—¶é—´ã€‚æ‰€ä»¥ä¹Ÿæ˜¯éœ€è¦ä¸€å®šçš„è€å¿ƒæ¥å®Œæˆçš„ã€‚ åé¢çš„æ–‡ç« ä¹Ÿä¼šæŒç»­çš„æ›´æ–°ï¼Œæœ€è¿‘æœ‰ç‚¹æ‡ˆæ€ ï¼ŒOpenGLç³»åˆ—çš„æ–‡ç« æœ‰ç‚¹æ‹–æ›´çš„èŠ‚å¥ï¼Œè¿™ä¸ªåé¢ä¼šè¡¥èµ·æ¥ã€‚Flutteræˆ‘ä¹Ÿæ‰åˆšåˆšæ¥æ‰‹ï¼Œä¹Ÿæ˜¯æ…¢æ…¢çš„æ¥é‡‡å‘ï¼Œä¹Ÿä¼šä»¥æ­¤æ¥è®°å½•è‡ªå·±çš„å­¦ä¹ ç»å†ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤šå¤šè·Ÿå¤§å®¶äº¤æµã€‚ å†æ¬¡æˆ‘é™„ä¸Šè‡ªå·±çš„é‚®ç®±coderspr1nghall@gmail.comæ¬¢è¿è®¨è®ºäº¤æµã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/program/flutter/"},{"title":"è¿ç»­å¯åŠ¨ crash è‡ªä¿®å¤æŠ€æœ¯å®ç°ä¸åŸç†è§£æ","text":"å‰è¨€ å®ç°åŸç† ä¼˜åŒ–ï¼šé™ä½50%ä»¥ä¸Šè¯¯æŠ¥æœºç‡ å¯¹åŸæœ‰APIè®¾è®¡çš„å‡ ç‚¹ä¼˜åŒ–æ„è§ æœºåˆ¶çŠ¶æ€åº”å½“ç”¨æšä¸¾æ¥åšä¸ºAPIé€å‡º å…³é”®æ•°å€¼åº”å½“åšä¸ºåˆå§‹åŒ–å‚æ•°ä¾›ç”¨æˆ·è®¾ç½® ä¿®å¤ã€ä¸ŠæŠ¥é€»è¾‘åº”å½“æ”¯æŒç”¨æˆ·å¼‚æ­¥æ“ä½œ ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°è¯¥å¼‚å¸¸ï¼Ÿ è¿ç»­å¯åŠ¨ crash è‡ªä¿®å¤æŠ€æœ¯å®ç°ä¸åŸç†è§£æ å‰è¨€ å¦‚æœ app è¿ç»­ crash ä¸¤æ¬¡æ— æ³•å¯åŠ¨ï¼Œç”¨æˆ·å¾€å¾€ä¼šé€‰æ‹©å¸è½½ã€‚ è¿ç»­å¯åŠ¨ crash åº”è¯¥æ˜¯ crash ç±»å‹ä¸­æœ€ä¸¥é‡çš„ä¸€ç±»ï¼Œè¯¥é—®é¢˜å¸¸å¸¸ä¸æ•°æ®åº“æ“ä½œæœ‰å…³ï¼Œæ¯”å¦‚ï¼šæ•°æ®åº“æŸåã€æœåŠ¡ç«¯è¿”å›æ•°æ®é”™è¯¯ï¼Œå­˜å…¥æ•°æ®åº“ï¼Œapp è¯»å–æ—¶äº§ç”Ÿæ•°ç»„è¶Šç•Œã€æ‰¾ä¸åˆ°æ–¹æ³•ã€‚ é‚£ä¹ˆé™¤äº†çƒ­ä¿®å¤ï¼Œèƒ½å¦â€œè‡ªä¿®å¤â€è¯¥é—®é¢˜å‘¢ï¼Ÿ åœ¨å¾®ä¿¡è¯»ä¹¦å›¢é˜Ÿå‘å¸ƒçš„ã€ŠiOS å¯åŠ¨è¿ç»­é—ªé€€ä¿æŠ¤æ–¹æ¡ˆã€‹ ä¸€æ–‡ä¸­ï¼Œç»™å‡ºäº†è¿ç»­å¯åŠ¨crashçš„è‡ªä¿®å¤æŠ€æœ¯çš„æ€è·¯è®²è§£ï¼Œå¹¶åœ¨GitHubä¸Šç»™å‡ºäº†æŠ€æœ¯å®ç°ï¼Œå¹¶å¼€æºäº† GYBootingProtectionã€‚æ–¹æ¡ˆæ€è·¯å¾ˆå¥½ï¼Œå¾ˆè½»é‡çº§ã€‚ å®ç°åŸç† åœ¨å¾®ä¿¡è¯»ä¹¦å›¢é˜Ÿç»™å‡ºçš„æ–‡ç« ä¸­å·²ç»æœ‰æ¯”è¾ƒè¯¦ç»†çš„é˜è¿°ï¼Œåœ¨æ­¤ä¸åšèµ˜è¿°ï¼Œå®ç°çš„æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼šä½†æœ‰ä¸ªå®ç°ä¸Šå¯ä»¥ä¼˜åŒ–ä¸‹ï¼Œå¯ä»¥é™ä½50%ä»¥ä¸Šè¯¯æŠ¥æœºç‡ï¼Œç›‘å¬ç”¨æˆ·æ‰‹åŠ¨åˆ’æ‰ APP è¿™ä¸ªäº‹ä»¶ï¼Œå…¶ä¸­ä¸€äº›ç‰¹å®šåœºæ™¯ï¼Œæ˜¯å¯ä»¥è·å–çš„ã€‚å¦å¤–åœ¨è¿™é‡Œä¹Ÿç»™å‡ºå¯¹å…¶ API è®¾è®¡çš„å»ºè®®ã€‚æœ€åç»™å‡ºä¼˜åŒ–åçš„å®ç°ã€‚ ä¼˜åŒ–ï¼šé™ä½50%ä»¥ä¸Šè¯¯æŠ¥æœºç‡ ç”¨æˆ·ä¸»åŠ¨ kill æ‰ APP åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š Appåœ¨å‰å°æ—¶ç”¨æˆ·æ‰‹åŠ¨åˆ’æ‰APPçš„æ—¶å€™ APPåœ¨åå°æ—¶åˆ’æ‰APP ç¬¬ä¸€ç§åœºæ™¯æ›´ä¸ºå¸¸è§ï¼Œå¯ä»¥é€šè¿‡ç›‘å¬ UIApplicationWillTerminateNotification æ¥æ•è·è¯¥åŠ¨ä½œï¼Œæ•è·åæ¢å¤è®¡æ•°ã€‚ç¬¬äºŒç§æƒ…å†µï¼Œæ— æ³•ç›‘å¬åˆ°ã€‚ä½†ä¹Ÿè¶³ä»¥é™ä½ 50% ä»¥ä¸Šçš„è¯¯æŠ¥æœºç‡ã€‚ å¯¹åŸæœ‰APIè®¾è®¡çš„å‡ ç‚¹ä¼˜åŒ–æ„è§1. æœºåˆ¶çŠ¶æ€åº”å½“ç”¨æšä¸¾æ¥åšä¸ºAPIé€å‡ºè¯¥æœºåˆ¶å½“å‰æ‰€å¤„çš„çŠ¶æ€ï¼Œæ¯”å¦‚ï¼šNeedFix ã€isFixingï¼Œå»ºè®®ç”¨æšä¸¾æ¥åšä¸ºAPIé€å‡ºã€‚æ¯”å¦‚ï¼š APP å¯åŠ¨æ­£å¸¸ æ­£åœ¨æ£€æµ‹æ˜¯å¦ä¼šåœ¨ç‰¹å®šæ—¶é—´å†…æ˜¯å¦ä¼š Crashï¼Œæ³¨æ„ï¼šæ£€æµ‹çŠ¶æ€ä¸‹â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°å°äºæˆ–ç­‰äºä¸Šé™å€¼ APP å‡ºç°è¿ç»­å¯åŠ¨ Crashï¼Œéœ€è¦é‡‡å–ä¿®å¤æªæ–½ APP å‡ºç°è¿ç»­å¯åŠ¨ Crashï¼Œæ­£åœ¨ä¿®å¤ä¸­ 2. å…³é”®æ•°å€¼åº”å½“åšä¸ºåˆå§‹åŒ–å‚æ•°ä¾›ç”¨æˆ·è®¾ç½® å½“å‰å¯åŠ¨Crashçš„çŠ¶æ€ è¾¾åˆ°éœ€è¦æ‰§è¡Œä¸ŠæŠ¥æ“ä½œçš„â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°ã€‚ è¾¾åˆ°éœ€è¦æ‰§è¡Œä¿®å¤æ“ä½œçš„â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°ã€‚ APP å¯åŠ¨åç»è¿‡å¤šå°‘ç§’ï¼Œå¯ä»¥å°†â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€æ¸…é›¶ 3. ä¿®å¤ã€ä¸ŠæŠ¥é€»è¾‘åº”å½“æ”¯æŒç”¨æˆ·å¼‚æ­¥æ“ä½œreportBlock ä¸ŠæŠ¥é€»è¾‘ï¼ŒrepairtBlock ä¿®å¤é€»è¾‘ æ¯”å¦‚ï¼š 12typedef void (^BoolCompletionHandler)(BOOL succeeded, NSError *error);typedef void (^RepairBlock)(ABSBoolCompletionHandler completionHandler); ç”¨æˆ·æ‰§è¡Œ BoolCompletionHandler åå³å¯çŸ¥é“æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œå¹¶ä¸”æ”¯æŒå¼‚æ­¥æ“ä½œã€‚ å¼‚æ­¥æ“ä½œå¸¦æ¥çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å‰é¢æåˆ°çš„æšä¸¾APIæ¥å®æ—¶ç›‘æµ‹çŠ¶æ€ï¼Œæ¥å†³å®šå„ç§å…¶ä»–æ“ä½œã€‚ ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°è¯¥å¼‚å¸¸ï¼Ÿè¿ç»­å¯åŠ¨ crash è‡ªä¿®å¤æŠ€æœ¯å®ç°ä¸åŸç†è§£æä¸‹é¢ç»™å‡ºä¼˜åŒ–åçš„ä»£ç å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788//// CYLBootingProtection.h// //// Created by ChenYilong on 18/01/10.// Copyright Â© 2018å¹´ ChenYilong. All rights reserved.//#import &lt;Foundation/Foundation.h&gt;typedef void (^ABSBoolCompletionHandler)(BOOL succeeded, NSError *error);typedef void (^ABSRepairBlock)(ABSBoolCompletionHandler completionHandler);typedef void (^ABSReportBlock)(NSUInteger crashCounts);typedef NS_ENUM(NSInteger, BootingProtectionStatus) { BootingProtectionStatusNormal, /**&lt; APP å¯åŠ¨æ­£å¸¸ */ BootingProtectionStatusNormalChecking, /**&lt; æ­£åœ¨æ£€æµ‹æ˜¯å¦ä¼šåœ¨ç‰¹å®šæ—¶é—´å†…æ˜¯å¦ä¼š Crashï¼Œæ³¨æ„ï¼šæ£€æµ‹çŠ¶æ€ä¸‹â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°å°äºæˆ–ç­‰äºä¸Šé™å€¼ */ BootingProtectionStatusNeedFix, /**&lt; APP å‡ºç°è¿ç»­å¯åŠ¨ Crashï¼Œéœ€è¦é‡‡å–ä¿®å¤æªæ–½ */ BootingProtectionStatusFixing, /**&lt; APP å‡ºç°è¿ç»­å¯åŠ¨ Crashï¼Œæ­£åœ¨ä¿®å¤ä¸­... */};/*** å¯åŠ¨è¿ç»­ crash ä¿æŠ¤ã€‚* å¯åŠ¨å `_crashOnLaunchTimeIntervalThreshold` ç§’å†… crashï¼Œåå¤è¶…è¿‡ `_continuousCrashOnLaunchNeedToReport` æ¬¡åˆ™ä¸ŠæŠ¥æ—¥å¿—ï¼Œè¶…è¿‡ `_continuousCrashOnLaunchNeedToFix` åˆ™å¯åŠ¨ä¿®å¤æ“ä½œã€‚*/@interface CYLBootingProtection : NSObject/*** å¯åŠ¨è¿ç»­ crash ä¿æŠ¤æ–¹æ³•ã€‚* å‰ç½®æ¡ä»¶ï¼šåœ¨ App å¯åŠ¨æ—¶æ³¨å†Œ crash å¤„ç†å‡½æ•°ï¼Œåœ¨ crash æ—¶è°ƒç”¨[CYLBootingProtection addCrashCountIfNeeded]ã€‚* å¯åŠ¨åä¸€å®šæ—¶é—´å†…ï¼ˆ`crashOnLaunchTimeIntervalThreshold`ç§’å†…ï¼‰crashï¼Œåå¤è¶…è¿‡ä¸€å®šæ¬¡æ•°ï¼ˆ`continuousCrashOnLaunchNeedToReport`æ¬¡ï¼‰åˆ™ä¸ŠæŠ¥æ—¥å¿—ï¼Œè¶…è¿‡ä¸€å®šæ¬¡æ•°ï¼ˆ`continuousCrashOnLaunchNeedToFix`æ¬¡ï¼‰åˆ™å¯åŠ¨ä¿®å¤ç¨‹åºï¼›åœ¨ä¸€å®šæ—¶é—´å†…ï¼ˆ`crashOnLaunchTimeIntervalThreshold`ç§’ï¼‰ ç§’åè‹¥æ²¡æœ‰ crash å°†â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€è®¡æ•°ç½®é›¶ã€‚ `reportBlock` ä¸ŠæŠ¥é€»è¾‘ï¼Œ `repairtBlock` ä¿®å¤é€»è¾‘ï¼Œå®Œæˆåæ‰§è¡Œ `[self setCrashCount:0]`*/- (void)launchContinuousCrashProtect;/*!* å½“å‰å¯åŠ¨Crashçš„çŠ¶æ€*/@property (nonatomic, assign, readonly) BootingProtectionStatus bootingProtectionStatus;/*!* è¾¾åˆ°éœ€è¦æ‰§è¡Œä¸ŠæŠ¥æ“ä½œçš„â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°ã€‚*/@property (nonatomic, assign, readonly) NSUInteger continuousCrashOnLaunchNeedToReport;/*!* è¾¾åˆ°éœ€è¦æ‰§è¡Œä¿®å¤æ“ä½œçš„â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°ã€‚*/@property (nonatomic, assign, readonly) NSUInteger continuousCrashOnLaunchNeedToFix;/*!* APP å¯åŠ¨åç»è¿‡å¤šå°‘ç§’ï¼Œå¯ä»¥å°†â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€æ¸…é›¶*/@property (nonatomic, assign, readonly) NSTimeInterval crashOnLaunchTimeIntervalThreshold;/*!* å€ŸåŠ© context å¯ä»¥è®©å¤šä¸ªæ¨¡å—æ³¨å†Œäº‹ä»¶ï¼Œå¹¶ä¸”äº‹ä»¶ block èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œäº’ä¸å¹²æ‰°ã€‚*/@property (nonatomic, copy, readonly) NSString *context;/*!* @details å¯åŠ¨åkCrashOnLaunchTimeIntervalThresholdç§’å†…crashï¼Œåå¤è¶…è¿‡continuousCrashOnLaunchNeedToReportæ¬¡åˆ™ä¸ŠæŠ¥æ—¥å¿—ï¼Œè¶…è¿‡continuousCrashOnLaunchNeedToFixåˆ™å¯åŠ¨ä¿®å¤ç¨‹åºï¼›å½“æ‰€æœ‰æ“ä½œå®Œæˆåï¼Œæ‰§è¡Œ completionã€‚åœ¨ crashOnLaunchTimeIntervalThreshold ç§’åè‹¥æ²¡æœ‰ crash å°† kContinuousCrashOnLaunchCounterKey è®¡æ•°ç½®é›¶ã€‚* @param context å€ŸåŠ© context å¯ä»¥è®©å¤šä¸ªæ¨¡å—æ³¨å†Œäº‹ä»¶ï¼Œå¹¶ä¸”äº‹ä»¶ block èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œäº’ä¸å¹²æ‰°ã€‚*/- (instancetype)initWithContinuousCrashOnLaunchNeedToReport:(NSUInteger)continuousCrashOnLaunchNeedToReport continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix crashOnLaunchTimeIntervalThreshold:(NSTimeInterval)crashOnLaunchTimeIntervalThreshold context:(NSString *)context;/*!* å½“å‰â€œè¿ç»­å¯åŠ¨å´©æºƒâ€œçš„çŠ¶æ€*/+ (BootingProtectionStatus)bootingProtectionStatusWithContext:(NSString *)context continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix;/*!* è®¾ç½®ä¸ŠæŠ¥é€»è¾‘ï¼Œå‚æ•° crashCounts ä¸ºå¯åŠ¨è¿ç»­ crash æ¬¡æ•°*/- (void)setReportBlock:(ABSReportBlock)reportBlock;/*!* è®¾ç½®ä¿®å¤é€»è¾‘*/- (void)setRepairBlock:(ABSRepairBlock)repairtBlock;+ (void)setLogger:(void (^)(NSString *))logger;@end 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376//// CYLBootingProtection.m////// Created by ChenYilong on 18/01/10.// Copyright Â© 2018å¹´ ChenYilong. All rights reserved.//#import &quot;CYLBootingProtection.h&quot;#import &lt;UIKit/UIKit.h&gt;static dispatch_queue_t _exceptionOperationQueue = 0;void (^Logger)(NSString *log);@interface CYLBootingProtection ()@property (nonatomic, assign) NSUInteger continuousCrashOnLaunchNeedToReport;@property (nonatomic, assign) NSUInteger continuousCrashOnLaunchNeedToFix;@property (nonatomic, assign) NSTimeInterval crashOnLaunchTimeIntervalThreshold;@property (nonatomic, copy) NSString *context;@property (nonatomic, copy) ABSReportBlock reportBlock;@property (nonatomic, copy) ABSRepairBlock repairBlock;/*!* è®¾ç½®â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°*/- (void)setCrashCount:(NSInteger)count;/*!* è®¾ç½®â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°*/+ (void)setCrashCount:(NSUInteger)count context:(NSString *)context;/*!* â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°*/- (NSUInteger)crashCount;/*!* â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°*/+ (NSUInteger)crashCountWithContext:(NSString *)context;@end@implementation CYLBootingProtection+ (void)initialize { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _exceptionOperationQueue = dispatch_queue_create(&quot;com.ChenYilong.CYLBootingProtection.fileCacheQueue&quot;, DISPATCH_QUEUE_SERIAL); });}- (instancetype)initWithContinuousCrashOnLaunchNeedToReport:(NSUInteger)continuousCrashOnLaunchNeedToReport continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix crashOnLaunchTimeIntervalThreshold:(NSTimeInterval)crashOnLaunchTimeIntervalThreshold context:(NSString *)context { if (!(self = [super init])) { return nil; } _continuousCrashOnLaunchNeedToReport = continuousCrashOnLaunchNeedToReport; _continuousCrashOnLaunchNeedToFix = continuousCrashOnLaunchNeedToFix; _crashOnLaunchTimeIntervalThreshold = crashOnLaunchTimeIntervalThreshold; _context = [context copy]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillTerminate:) name:UIApplicationWillTerminateNotification object:[UIApplication sharedApplication]]; return self;}/*!* Appåœ¨å‰å°æ—¶ç”¨æˆ·æ‰‹åŠ¨åˆ’æ‰APPçš„æ—¶å€™ï¼Œä¸è®¡å…¥æ£€æµ‹ã€‚* ä½†æ˜¯APPåœ¨åå°æ—¶åˆ’æ‰APPï¼Œæ— æ³•æ£€æµ‹å‡ºæ¥ã€‚* è§ï¼šhttps://stackoverflow.com/a/35041565/3395008*/- (void)applicationWillTerminate:(NSNotification *)note { BOOL isNormalChecking = [self isNormalChecking]; if (isNormalChecking) { [self decreaseCrashCount]; }}- (void)dealloc { [[NSNotificationCenter defaultCenter] removeObserver:self];}/*æ”¯æŒåŒæ­¥ä¿®å¤ã€å¼‚æ­¥ä¿®å¤ï¼Œä¸¤ç§ä¿®å¤æ–¹å¼- å¼‚æ­¥ä¿®å¤ï¼Œä¸å¡é¡¿ä¸»UIï¼Œä½†æœ‰ä¿®å¤æœªå®Œæˆå°±è¢«å†æ¬¡è§¦å‘crashã€æˆ–è€…ç”¨æˆ·killæ‰çš„å¯èƒ½ã€‚éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ ¹æ®ä¿®å¤çŠ¶æ€ï¼Œæ¥é€‰æ‹©æ€§åœ°è¿›è¡Œæ“ä½œï¼Œåº”è¯¥æœ‰å›æ‰ã€‚- åŒæ­¥ä¿®å¤ï¼Œæœ€ç®€å•ç›´è§‚ï¼Œåœ¨ä¸»çº¿ç¨‹åˆ é™¤æˆ–è€…ä¸‹è½½ä¿®å¤åŒ…ã€‚*/- (void)launchContinuousCrashProtect { NSAssert(_repairBlock, @&quot;_repairBlock is nil!&quot;); [[self class] Logger:@&quot;CYLBootingProtection: Launch continuous crash report&quot;]; [self resetBootingProtectionStatus]; NSUInteger launchCrashes = [self crashCount]; // ä¸ŠæŠ¥ if (launchCrashes &gt;= self.continuousCrashOnLaunchNeedToReport) { NSString *logString = [NSString stringWithFormat:@&quot;CYLBootingProtection: App has continuously crashed for %@ times. Now synchronize uploading crash report and begin fixing procedure.&quot;, @(launchCrashes)]; [[self class] Logger:logString]; if (_reportBlock) { dispatch_async(dispatch_get_main_queue(),^{ _reportBlock(launchCrashes); }); } } // ä¿®å¤ if ([self isUpToBootingProtectionCount]) { [[self class] Logger:@&quot;need to repair&quot;]; [self setIsFixing:YES]; if (_repairBlock) { ABSBoolCompletionHandler completionHandler = ^(BOOL succeeded, NSError *__nullable error){ if (succeeded) { [self resetCrashCount]; } else { [[self class] Logger:error.description]; } }; dispatch_async(dispatch_get_main_queue(),^{ _repairBlock(completionHandler); }); } } else { [self increaseCrashCount:launchCrashes]; // æ­£å¸¸æµç¨‹ï¼Œæ— éœ€ä¿®å¤ [[self class] Logger:@&quot;need no repair&quot;]; // è®°å½•å¯åŠ¨æ—¶åˆ»ï¼Œç”¨äºè®¡ç®—å¯åŠ¨è¿ç»­ crash // é‡ç½®å¯åŠ¨ crash è®¡æ•° dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(self.crashOnLaunchTimeIntervalThreshold * NSEC_PER_SEC)), dispatch_get_main_queue(), ^(void){ // APPæ´»è¿‡äº†é˜ˆå€¼æ—¶é—´ï¼Œé‡ç½®å´©æºƒè®¡æ•° NSString *logString = [NSString stringWithFormat:@&quot;CYLBootingProtection: long live the app ( more than %@ seconds ), now reset crash counts&quot;, @(self.crashOnLaunchTimeIntervalThreshold)]; [[self class] Logger:logString]; [self resetCrashCount]; }); }}//å‡å°‘è®¡æ•°çš„æ—¶æœºï¼šç”¨æˆ·æ‰‹åŠ¨åˆ’æ‰APP- (void)decreaseCrashCount { NSUInteger oldCrashCount = [self crashCount]; [self decreaseCrashCountWithOldCrashCount:oldCrashCount];}- (void)decreaseCrashCountWithOldCrashCount:(NSUInteger)oldCrashCount { dispatch_sync(_exceptionOperationQueue, ^{ if (oldCrashCount &gt; 0) { [self setCrashCount:oldCrashCount-1]; } [self resetBootingProtectionStatus]; });}//é‡åˆ¶è®¡æ•°çš„æ—¶æœºï¼šä¿®å¤å®Œæˆã€æˆ–è€…ç”¨æˆ·æ‰‹åŠ¨åˆ’æ‰APP- (void)resetCrashCount { [self setCrashCount:0]; [self resetBootingProtectionStatus];}//åªåœ¨æœªè¾¾åˆ°è®¡æ•°ä¸Šé™æ—¶æ‰ä¼šå¢åŠ è®¡æ•°- (void)increaseCrashCount:(NSUInteger)oldCrashCount { dispatch_sync(_exceptionOperationQueue, ^{ [self setIsNormalChecking:YES]; [self setCrashCount:oldCrashCount+1]; });}- (void)resetBootingProtectionStatus { [self setIsNormalChecking:NO]; [self setIsFixing:NO];}- (BootingProtectionStatus)bootingProtectionStatus { return [[self class] bootingProtectionStatusWithContext:_context continuousCrashOnLaunchNeedToFix:_continuousCrashOnLaunchNeedToFix];}/*!*@attention æ³¨æ„ä¹‹æ‰€ä»¥è¦æ£€æŸ¥ `BootingProtectionStatusNormalChecking` åŸå› å¦‚ä¸‹ï¼š`-launchContinuousCrashProtect` æ–¹æ³•ä¸ `-bootingProtectionStatus` æ–¹æ³•ï¼Œå¦‚æœ `-launchContinuousCrashProtect` å…ˆæ‰§è¡Œï¼Œé‚£ä¹ˆä¼šé€ æˆå¦‚ä¸‹é—®é¢˜ï¼šå‡è®¾nä¸ºä¸Šé™ï¼Œä½†crashï¼ˆn-1ï¼‰æ¬¡ï¼Œä½†æ˜¯ç”¨ `-bootingProtectionStatus` åˆ¤æ–­å‡ºæ¥ï¼Œå½“å‰å·²ç»å¤„äºnæ¬¡äº†ã€‚åŸå› å¦‚ä¸‹ï¼šcrashï¼ˆn-1ï¼‰æ¬¡ï¼Œæ­£å¸¸æµç¨‹ï¼Œè®¡æ•°+1ï¼Œå˜æˆnæ¬¡ï¼Œéšååœ¨æ£€æŸ¥ `-bootingProtectionStatus` æ—¶ï¼Œå‘ç°å·²ç»å¤„äºå¼‚å¸¸çŠ¶æ€äº†ï¼Œå®é™…æ˜¯æ­£å¸¸çŠ¶æ€ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨`BootingProtectionStatusNormalChecking` æ¥è¿›è¡ŒåŒºåˆ†ã€‚*/+ (BootingProtectionStatus)bootingProtectionStatusWithContext:(NSString *)context continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix { BOOL isNormalChecking = [self isNormalCheckingWithContext:context]; if (isNormalChecking) { return BootingProtectionStatusNormalChecking; } BOOL isUpToBootingProtectionCount = [self isUpToBootingProtectionCountWithContext:context continuousCrashOnLaunchNeedToFix:continuousCrashOnLaunchNeedToFix]; if (!isUpToBootingProtectionCount) { return BootingProtectionStatusNormal; } BootingProtectionStatus type; BOOL isFixingCrash = [self isFixingCrashWithContext:context]; if (isFixingCrash) { type = BootingProtectionStatusFixing; } else { type = BootingProtectionStatusNeedFix; } return type;}- (NSUInteger)crashCount { return [[self class] crashCountWithContext:_context];}- (void)setCrashCount:(NSInteger)count { if (count &gt;=0) { [[self class] setCrashCount:count context:_context]; }}- (void)setIsFixing:(BOOL)isFixingCrash { [[self class] setIsFixing:isFixingCrash context:_context];}/*!* æ˜¯å¦æ­£åœ¨ä¿®å¤*/- (BOOL)isFixingCrash { return [[self class] isFixingCrashWithContext:_context];}- (void)setIsNormalChecking:(BOOL)isNormalChecking { [[self class] setIsNormalChecking:isNormalChecking context:_context];}/*!* æ˜¯å¦æ­£åœ¨æ£€æŸ¥*/- (BOOL)isNormalChecking { return [[self class] isNormalCheckingWithContext:_context];}+ (NSUInteger)crashCountWithContext:(NSString *)context { NSString *continuousCrashOnLaunchCounterKey = [self continuousCrashOnLaunchCounterKeyWithContext:context]; NSUInteger crashCount = [[NSUserDefaults standardUserDefaults] integerForKey:continuousCrashOnLaunchCounterKey]; NSString *logString = [NSString stringWithFormat:@&quot;crashCount:%@&quot;, @(crashCount)]; [[self class] Logger:logString]; return crashCount;}+ (void)setCrashCount:(NSUInteger)count context:(NSString *)context { NSString *continuousCrashOnLaunchCounterKey = [self continuousCrashOnLaunchCounterKeyWithContext:context]; NSString *logString = [NSString stringWithFormat:@&quot;setCrashCount:%@&quot;, @(count)]; [[self class] Logger:logString]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setInteger:count forKey:continuousCrashOnLaunchCounterKey]; [defaults synchronize];}+ (void)setIsFixing:(BOOL)isFixingCrash context:(NSString *)context { NSString *continuousCrashFixingKey = [[self class] continuousCrashFixingKeyWithContext:context]; NSString *logString = [NSString stringWithFormat:@&quot;setisFixingCrash:{%@}&quot;, @(isFixingCrash)]; [[self class] Logger:logString]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setBool:isFixingCrash forKey:continuousCrashFixingKey]; [defaults synchronize];}+ (BOOL)isFixingCrashWithContext:(NSString *)context { NSString *continuousCrashFixingKey = [[self class] continuousCrashFixingKeyWithContext:context]; BOOL isFixingCrash = [[NSUserDefaults standardUserDefaults] boolForKey:continuousCrashFixingKey]; NSString *logString = [NSString stringWithFormat:@&quot;isFixingCrash:%@&quot;, @(isFixingCrash)]; [[self class] Logger:logString]; return isFixingCrash;}+ (void)setIsNormalChecking:(BOOL)isNormalChecking context:(NSString *)context { NSString *continuousCrashNormalCheckingKey = [[self class] continuousCrashNormalCheckingKeyWithContext:context]; NSString *logString = [NSString stringWithFormat:@&quot;setIsNormalChecking:{%@}&quot;, @(isNormalChecking)]; [[self class] Logger:logString]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setBool:isNormalChecking forKey:continuousCrashNormalCheckingKey]; [defaults synchronize];}+ (BOOL)isNormalCheckingWithContext:(NSString *)context { NSString *continuousCrashFixingKey = [[self class] continuousCrashNormalCheckingKeyWithContext:context]; BOOL isFixingCrash = [[NSUserDefaults standardUserDefaults] boolForKey:continuousCrashFixingKey]; NSString *logString = [NSString stringWithFormat:@&quot;isIsNormalChecking:%@&quot;, @(isFixingCrash)]; [[self class] Logger:logString]; return isFixingCrash;}- (BOOL)isUpToBootingProtectionCount { return [[self class] isUpToBootingProtectionCountWithContext:_context continuousCrashOnLaunchNeedToFix:_continuousCrashOnLaunchNeedToFix];}+ (BOOL)isUpToBootingProtectionCountWithContext:(NSString *)context continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix { BOOL isUpToCount = [self crashCountWithContext:context] &gt;= continuousCrashOnLaunchNeedToFix; if (isUpToCount) { return YES; } return NO;}- (void)setReportBlock:(ABSReportBlock)block { _reportBlock = block;}- (void)setRepairBlock:(ABSRepairBlock)block { _repairBlock = block;}/*!* â€œè¿ç»­å¯åŠ¨å´©æºƒè®¡æ•°â€ä¸ªæ•°ï¼Œå¯¹åº”çš„Key* é»˜è®¤ä¸º &quot;_CONTINUOUS_CRASH_COUNTER_KEY&quot;*/+ (NSString *)continuousCrashOnLaunchCounterKeyWithContext:(NSString *)context { BOOL isValid = [[self class] isValidString:context]; NSString *validContext = isValid ? context : @&quot;&quot;; NSString *continuousCrashOnLaunchCounterKey = [NSString stringWithFormat:@&quot;%@_CONTINUOUS_CRASH_COUNTER_KEY&quot;, validContext]; return continuousCrashOnLaunchCounterKey;}/*!* æ˜¯å¦æ­£åœ¨ä¿®å¤è®°å½•ï¼Œå¯¹åº”çš„Key* é»˜è®¤ä¸º &quot;_CONTINUOUS_CRASH_FIXING_KEY&quot;*/+ (NSString *)continuousCrashFixingKeyWithContext:(NSString *)context { BOOL isValid = [[self class] isValidString:context]; NSString *validContext = isValid ? context : @&quot;&quot;; NSString *continuousCrashFixingKey = [NSString stringWithFormat:@&quot;%@_CONTINUOUS_CRASH_FIXING_KEY&quot;, validContext]; return continuousCrashFixingKey;}/*!* æ˜¯å¦æ­£åœ¨æ£€æŸ¥æ˜¯å¦åœ¨ç‰¹å®šæ—¶é—´å†…ä¼šCrashï¼Œå¯¹åº”çš„Key* é»˜è®¤ä¸º &quot;_CONTINUOUS_CRASH_CHECKING_KEY&quot;*/+ (NSString *)continuousCrashNormalCheckingKeyWithContext:(NSString *)context { BOOL isValid = [[self class] isValidString:context]; NSString *validContext = isValid ? context : @&quot;&quot;; NSString *continuousCrashFixingKey = [NSString stringWithFormat:@&quot;%@_CONTINUOUS_CRASH_CHECKING_KEY&quot;, validContext]; return continuousCrashFixingKey;}#pragma mark -#pragma mark - log and util Methods+ (void)setLogger:(void (^)(NSString *))logger { Logger = [logger copy];}+ (void)Logger:(NSString *)log { if (Logger) Logger(log);}+ (BOOL)isValidString:(id)notValidString { if (!notValidString) { return NO; } if (![notValidString isKindOfClass:[NSString class]]) { return NO; } NSInteger stringLength = 0; @try { stringLength = [notValidString length]; } @catch (NSException *exception) {} if (stringLength == 0) { return NO; } return YES;}@end ä¸‹é¢æ˜¯ç›¸åº”çš„éªŒè¯æ­¥éª¤ï¼š ç­‰å¾…15ç§’ä¼šæœ‰å¯¹åº”è®¡æ•°æ¸…é›¶çš„æ“ä½œæ—¥å¿—è¾“å‡ºï¼š 1234567891011121314152018-01-18 16:25:37.162980+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šCYLBootingProtection: Launch continuous crash report2018-01-18 16:25:37.163140+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šsetIsNormalChecking:{0}2018-01-18 16:25:37.165738+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šsetisFixingCrash:{0}2018-01-18 16:25:37.166883+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šcrashCount:02018-01-18 16:25:37.167102+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šcrashCount:02018-01-18 16:25:37.167253+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šsetIsNormalChecking:{1}2018-01-18 16:25:37.167938+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šsetCrashCount:12018-01-18 16:25:37.168806+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šneed no repair2018-01-18 16:25:52.225197+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šCYLBootingProtection: long live the app ( more than 15 seconds ), now reset crash counts2018-01-18 16:25:52.225378+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šsetCrashCount:02018-01-18 16:25:52.226234+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šsetIsNormalChecking:{0}2018-01-18 16:25:52.226595+0800 BootingProtection[89773:15553277] ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[AppDelegate onBeforeBootingProtection]_block_invokeï¼ˆåœ¨ç¬¬45è¡Œï¼‰ï¼Œæè¿°ï¼šsetisFixingCrash:{0} Posted by å¾®åš@iOSç¨‹åºçŠ­è¢åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | Creative Commons BY-NC-ND 3.0","link":"/program/ï£¿/crash/"},{"title":"iOS-åˆ¶ä½œFramework","text":"å‰è¨€ä¹‹å‰æœ‰å¾ˆå¤šçš„å¤§ç¥ä»¬å·²ç»å†™è¿‡frameworkçš„åˆ¶ä½œï¼Œä½†æœ€è¿‘ç”±äºXcode7çš„å‡ºç°ï¼Œå¾ˆå¤šä¹‹å‰çš„æ•™ç¨‹å†…å®¹å·²ç»ä¸ç¬¦ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œæ‰¾åˆ°ä¸€ç¯‡èƒ½å¤Ÿç›´æ¥æ˜äº†ï¼Œç®€å•æ˜“å­¦çš„åˆ¶ä½œframeworkçš„æ–‡ç« æ¯”è¾ƒå›°éš¾ã€‚æœ¬æ–‡å°†åŸºäºXcode7åˆ›å»ºä¸€ä¸ªç®€å•çš„å·¥ç¨‹ï¼Œé€šè¿‡ä¸¤ç§æ–¹æ³•æ¥æ•™å¤§å®¶å¦‚ä½•åˆ¶ä½œä¸€ä¸ªè‡ªå·±çš„frameworkã€‚ ç®€ä»‹Mac OS Xæ‰©å±•äº†frameworkçš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåˆ©ç”¨å®ƒæ¥å…±äº«ä»£ç å’Œèµ„æºã€‚é€šè¿‡frameworkæˆ‘ä»¬å¯ä»¥å…±äº«æ‰€æœ‰å½¢å¼çš„èµ„æºï¼Œå¦‚åŠ¨æ€å…±äº«åº“ï¼Œnibæ–‡ä»¶ï¼Œå›¾åƒå­—ç¬¦èµ„æºä»¥åŠæ–‡æ¡£ç­‰ã€‚ç³»ç»Ÿä¼šåœ¨éœ€è¦çš„æ—¶å€™å°†frameworkè½½å…¥å†…å­˜ä¸­ï¼Œå¤šä¸ªåº”ç”¨ç¨‹åºå¯ä»¥åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªframeworkã€‚è¿™ç§æ–¹æ³•å¯ä»¥ä½¿å¾—ä½ çš„ä»£ç æ˜“åˆ†äº«ï¼Œåœ¨å¤šä¸ªå·¥ç¨‹ä¸­å¤ç”¨ï¼Œå¹¶ä¸”å¯ä»¥éšè—å®ç°ç»†èŠ‚ï¼Œæ§åˆ¶å…¬å¼€çš„å¤´æ–‡ä»¶ã€‚ åˆ¶ä½œæ­¥éª¤ æ‰“å¼€Xcodeï¼Œåˆ›å»ºæ–°å·¥ç¨‹ã€‚æ‰‹ä¸‹ç•™æƒ…ï¼Œè¯·å…ˆçœ‹å›¾ï¼ åˆ›å»ºåŠŸèƒ½ç±»ã€‚è¿™é‡Œæˆ‘åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªNSObjectçš„SayHelloç±»åœ¨æ–°åˆ›å»ºçš„ç±»é‡Œé¢å£°æ˜æ–¹æ³•å¹¶å®ç°ã€‚è¿™é‡Œæˆ‘å†™ä¸€ä¸ªsayHelloçš„æ–¹æ³•ï¼Œä»¥ä¾¿åé¢æµ‹è¯•ä½¿ç”¨ã€‚ SayHello.h 1234#import &lt;Foundation/Foundation.h&gt;@interface SayHello : NSObject-(void)sayHello;@end SayHello.m 1234567 #import &quot;SayHello.h&quot;@implementation SayHello-(void)sayHello { NSLog(@&quot;ä½ å¥½ï¼Œç¬¬ä¸€æ¬¡è§é¢ï¼Œè¯·å¤šå…³ç…§&quot;); } @end åœ¨TARGETSä¸‹é€‰ä¸­å·¥ç¨‹ï¼Œåœ¨Build Settingsä¸‹æ›´æ”¹å‡ ä¸ªå‚æ•°ã€‚ åœ¨Architecturesä¸‹å¢åŠ armv7sï¼Œå¹¶é€‰ä¸­ã€‚å°†Build Active Architecture Only è®¾ç½®ä¸ºNOã€‚ è®¾ç½®Headerså°†ä½ è¦å…¬å¼€çš„å¤´æ–‡ä»¶ç§»åŠ¨åˆ°Publicä¸‹ï¼Œè¦éšè—çš„æ”¾åœ¨Privateæˆ–è€…Projectä¸‹ï¼Œå½“ç„¶ï¼Œéšè—çš„å¤´æ–‡ä»¶å°±æ— æ³•å†è¢«å¼•ç”¨ã€‚ ç„¶åéœ€è¦åœ¨Test.hï¼ˆå¿…é¡»æ˜¯å…¬å¼€çš„ï¼Œå¦åˆ™æ— æ³•å¼•ç”¨ï¼‰ä¸­å°†ä½ æ‰€æœ‰è¦å…¬å¼€çš„.hå¼•å…¥ã€‚æ‰“åŒ…framework æ–¹æ³•ä¸€ é€‰ä¸­æ¨¡æ‹Ÿå™¨ï¼Œç¼–è¯‘ç¨‹åº é€‰ä¸­æµ‹è¯•æœºï¼Œç¼–è¯‘ç¨‹åº åœ¨finderä¸­æ‰¾åˆ°frameworkæ–‡ä»¶ é€‰ä¸­å›¾ä¸­æ‰€æ ‡ç¤ºçš„frameworkï¼Œç„¶åå³é”®show in finderã€‚æ‰¾åˆ°ä¸‹å›¾ä¸­æ‰€ç¤ºçš„Testæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯Debug-iphoneosï¼ˆçœŸæœºï¼‰ä¸‹çš„ï¼Œä¸€ä¸ªæ˜¯Debug-iphonesimulator(æ¨¡æ‹Ÿå™¨)ä¸‹çš„ã€‚ 4.é€šè¿‡ç»ˆç«¯å‘½ä»¤å°†ä¸¤ä¸ªframeworkåˆä¸ºä¸€ä¸ªæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºéƒ½å¯ä½¿ç”¨çš„frameworkã€‚ æ‰“å¼€æ§åˆ¶å°è¾“å…¥ lipo -create iphoneosä¸‹frameworkTestçš„è·¯å¾„ simulatorä¸‹frameworkTestçš„è·¯å¾„ -output æ–°çš„è·¯å¾„ï¼Œè¿™æ ·å°±å®Œæˆäº†æ¨¡æ‹Ÿå™¨å’ŒçœŸæœºç‰ˆæœ¬çš„åˆå¹¶ï¼Œæ–°è·¯å¾„ä¸‹çš„frameworkTestå°±æ˜¯ä½ åˆå¹¶åçš„æ–‡ä»¶ï¼Œå°†è¿™ä¸ªæ–‡ä»¶åå­—æ”¹æˆå’Œä½ æœªåˆå¹¶ä¹‹å‰çš„Testä¸€æ ·çš„åå­—ï¼Œæ”¾åˆ°frameworkæ–‡ä»¶å¤¹ä¸‹ï¼Œæ›¿æ¢æ‰åŸæ¥çš„frameworkTestæ–‡ä»¶ã€‚ ä¸Šé¢è¿™æ®µå‘½ä»¤å°±æ˜¯æŠŠçœŸæœºå’Œæ¨¡æ‹Ÿå™¨çš„frameworkTeståˆå¹¶æˆä¸€ä¸ªMyNewFrameworktestæ–‡ä»¶å¹¶å­˜æ”¾åœ¨æ¡Œé¢ä¸Šçš„Newæ–‡ä»¶å¤¹ä¸‹ã€‚ 5.å°†ä¿®æ”¹åçš„frameworkæ‹·è´å‡ºæ¥ä¿å­˜ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆåˆ¶ä½œçš„frameworkã€‚ æ–¹æ³•äºŒ 1.é€‰ä¸­TARGETSä¸‹çš„å·¥ç¨‹ï¼Œç‚¹å‡»ä¸Šæ–¹çš„Editor,é€‰æ‹©Add Targetåˆ›å»ºä¸€ä¸ªAggregate. é€‰æ‹©Otherä¸‹çš„Aggregateï¼Œç‚¹å‡»Nextåˆ›å»ºã€‚ 2.åµŒå…¥è„šæœ¬ã€‚é€‰ä¸­åˆšåˆšåˆ›å»ºçš„Aggregate,ç„¶åé€‰ä¸­å³ä¾§çš„Build Phases,ç‚¹å‡»å·¦ä¸‹æ–¹åŠ å·ï¼Œé€‰æ‹©New Run Script Phase å°†è¿™æ®µè„šæœ¬å¤åˆ¶è¿›å»ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041# Sets the target folders and the final framework product.# å¦‚æœå·¥ç¨‹åç§°å’ŒFrameworkçš„Targetåç§°ä¸ä¸€æ ·çš„ è¯ï¼Œè¦è‡ªå®šä¹‰FMKNAME# ä¾‹å¦‚: FMK_NAME = &quot;MyFramework&quot;FMK_NAME=${PROJECT_NAME}# Install dir will be the final output to the framework.# The following line create it in the root folder of the current project.INSTALL_DIR=${SRCROOT}/Products/$ {FMK_NAME}.framework# Working dir will be deleted after the framework creation.WRK_DIR=buildDEVICE_DIR=${WRK_DIR}/Release-iphoneos/$ {FMK_NAME}.frameworkSIMULATOR_DIR=${WRK_DIR}/Release-iphonesimulator/${FMK_NAME}.framework# -configuration ${CONFIGURATION}# Clean and Building both architectures.xcodebuild -configuration &quot;Release&quot; -target &quot;${FMK_NAME}&quot; -sdk iphoneos clean buildxcodebuild -configuration &quot;Release&quot; -target &quot;${FMK_NAME}&quot; -sdk iphonesimulator clean build# Cleaning the oldest.if [ -d &quot;${INSTALL_DIR}&quot; ]thenrm -rf &quot;${INSTALL_DIR}&quot; fi mkdir -p &quot;${INSTALL_DIR}&quot;cp -R &quot;${DEVICE_DIR}/&quot; &quot;${INSTALL_DIR}/&quot;# Uses the Lipo Tool to merge both binary files (i386 + armv6/armv7) into one Universal final product.lipo -create &quot;${DEVICE_DIR}/${FMK_NAME}&quot; &quot;${SIMULATOR_DIR}/${FMK_NAME}&quot; -output &quot;$ {INSTALL_DIR}/${FMK_NAME}&quot;rm -r &quot;${WRK_DIR}&quot;open &quot;${INSTALL_DIR}&quot; 3.ç¼–è¯‘ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œcommand+Bç¼–è¯‘ã€‚ 4.åœ¨finderä¸­æ‰¾åˆ°frameworkï¼Œæ‹·è´å‡ºæ¥ã€‚ ä½¿ç”¨åˆ¶ä½œå®Œæˆçš„frameworkç›´æ¥å°†ä½ åˆ¶ä½œå‡ºæ¥çš„frameworkæ·»åŠ åˆ°è¦ä½¿ç”¨çš„å·¥ç¨‹é‡Œï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„æ–‡ä»¶é‡Œå¼•å…¥å¤´æ–‡ä»¶ï¼Œä½¿ç”¨frameworkä¸­çš„åŠŸèƒ½ç±»ã€‚å¦‚ä¸‹å›¾ æé†’ åœ¨åˆ¶ä½œframeworkæˆ–è€…libçš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨äº†categoryï¼Œåˆ™ä½¿ç”¨æ”¹FMWKçš„ç¨‹åºè¿è¡Œæ—¶ä¼šcrashï¼Œæ­¤æ—¶éœ€è¦åœ¨è¯¥å·¥ç¨‹ä¸­ other linker flagsæ·»åŠ ä¸¤ä¸ªå‚æ•° -ObjC -all_load. å¸¦æœ‰å›¾ç‰‡èµ„æºçš„éœ€è¦æŠŠå›¾ç‰‡æ‰“åŒ…æˆBundleæ–‡ä»¶ï¼Œå’Œframeworkä¸€èµ·æ‹·è´åˆ°ç›¸åº”çš„é¡¹ç›®ä¸­ã€‚ å…¬å¼€çš„ç±»ä¸­å¦‚æœå¼•ç”¨çš„privateçš„ç±»ï¼Œæ‰“åŒ…ä»¥åå¯¹å¤–ä¼šæŠ¥é”™ï¼Œæ‰¾ä¸åˆ°é‚£ä¸ªprivateçš„ç±»ï¼Œå¯ä»¥æŠŠé‚£ä¸ªprivateçš„.hæ”¾åˆ° ç»“è¨€ç°åœ¨ï¼Œç›¸ä¿¡ä½ å·²ç»å¯ä»¥æŒ‰ç…§æ–‡æ¡£æ­¥éª¤åˆ¶ä½œå‡ºä¸€ä¸ªframeworkï¼Œç›¸ä¿¡è¿‡ç¨‹ä¸­å¯èƒ½è¿˜ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤ŸæŠŠè¿™äº›é—®é¢˜è®°å½•å¹¶æ•´ç†ï¼Œå°†è¿™äº›ç»éªŒåˆ†äº«å‡ºæ¥ã€‚ä¹Ÿæ¬¢è¿å¤§å®¶è”ç³»ã€è®¨è®ºã€‚æœ€åï¼Œå¸Œæœ›å¤§å®¶èƒ½å®Œæˆå¸¦æœ‰å›¾ç‰‡èµ„æºçš„Bundleçš„åˆ¶ä½œã€‚ Try your best!","link":"/program/ï£¿/framework/"},{"title":"æ„å»ºiOSç¨³å®šåº”ç”¨æ¶æ„æ—¶æ–¹æ¡ˆé€‰æ‹©çš„æ€è€ƒ","text":"å·¥ç¨‹ç»“æ„æ¶æ„ï¼Œå‡å°‘è€¦åˆæ··ä¹±ä»¥åŠé˜²æ²»éœ€æ±‚å¤§æ”¹é€ æˆç»“æ„é‡æ„ï¼Œå¦‚ä½•æ„å»ºç¨³å®šå¯æ‰©å±•å¯å˜æ¢çš„å·¥ç¨‹ç»“æ„çš„æ€è€ƒ æˆ‘æ‰“ç®—é‡‡ç”¨Information flowçš„æ–¹å¼è‡ªä¸Šè€Œä¸‹ï¼Œä¸¤å¤§å±‚åˆ†ä¸ºåŸºç¡€å±‚å’Œå±•ç°å±‚çš„ç»“æ„ã€‚åŸºç¡€å±‚åˆ†ä¸ºå¤šå±‚ï¼Œå±•ç°å±‚ä¹Ÿå¯åˆ†ä¸ºå¤šå±‚ã€‚ä¸»è¦æ€æƒ³æ˜¯å°†åŸºç¡€å±‚çš„æœ€ä¸‹ä¸€å±‚å½“åšé›¶éƒ¨ä»¶ï¼Œå°†ä¸šåŠ¡å±‚æœ€ä¸‹å±‚å½“åšç»„è£…å¤§éƒ¨ä»¶ï¼Œé€šè¿‡æµç¨‹ä¸²èµ·æ¥å½¢æˆä¸€ä¸ªå®Œæ•´çš„äº§å“ï¼Œåšé›¶ä»¶æ—¶æŒ‰ç…§åšå‡ºä¸€ä¸ªå°±æ‰”è¿›å¯¹åº”åŸºç¡€å±‚çš„ç¯®å­é‡Œæ€è·¯æ¥ï¼Œç›®å½•ç»“æ„ä¹Ÿå¯ä»¥æŒ‰ç…§è¿™ç§æ¥è¿›è¡Œã€‚è¿™ä¸¤å¤§å±‚çš„æœ€ä¸‹å±‚æŒ‰ç…§é›¶ä»¶æ‹†å¾—è¶Šå°è¶Šå®¹æ˜“åº”å¯¹éœ€æ±‚å˜åŒ–è¶Šå®¹æ˜“ä¿æŠ¤å·©å›ºä¸Šå±‚çš„æ€è·¯æ¥å°±å¥½ã€‚æ‹¿å¾®ä¿¡è¿™ä¸ªå¤§å®¶éƒ½ç†Ÿæ‚‰çš„äº§å“çš„å‡ ä¸ªåŠŸèƒ½æ¥ç®€å•ç¤ºä¾‹è¯´æ˜ä¸‹è¿™ä¸ªæ€è·¯æ„å»ºåçš„ç»“æ„ï¼Œæ¨¡å—æ¯”è¾ƒå¤šï¼Œä¸€äº›æ¨¡å—å°±ä¸æ·±å…¥åˆ°æœ€åº•å±‚åˆ†æäº†ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556åŸºç¡€å±‚ï¼ ç½‘ç»œï¼ï¼ æ”¶å‘æ•°æ®ï¼ï¼ï¼å•ä¾‹ï¼ˆæŒç»­ä½¿ç”¨æ•°æ®ï¼‰ï¼ï¼ï¼æœ¬åœ°ï¼ˆç¼“å­˜å’ŒæŒç»­åŒ–å­˜å‚¨æ•°æ®å¯¹ä¸šåŠ¡çš„å°è£…è¾“å‡ºï¼‰ï¼ï¼ï¼å•æ¬¡ä½¿ç”¨ï¼ˆAPIæ¥å£Modelå°è£…è¾“å‡ºå’Œä¸šåŠ¡é€»è¾‘å°è£…çš„ViewModelï¼Œå°†è¿™äº›åšä¸ºä¸šåŠ¡é›¶ä»¶ï¼‰ï¼ å­˜å‚¨ï¼ï¼ï¼ NSUserDefaultï¼ˆå¯¹è½»é‡éœ€è¦å­˜å‚¨çš„æ·»åŠ ä¸‹ä¸€å±‚ä¸šåŠ¡é›¶ä»¶å°è£…ï¼‰ï¼ï¼ï¼ keychainï¼ˆå¯¹å®‰å…¨çº§åˆ«è¾ƒé«˜éœ€è¦å­˜å‚¨çš„æ·»åŠ ä¸‹ä¸€å±‚ä¸šåŠ¡é›¶ä»¶å°è£…ï¼‰ï¼ï¼ï¼ æ–‡ä»¶å­˜å‚¨ï¼ˆå¯¹æ—¶æ•ˆéœ€æ±‚çŸ­çš„éœ€è¦å­˜å‚¨çš„æ·»åŠ ä¸‹ä¸€å±‚ä¸šåŠ¡é›¶ä»¶å°è£…ï¼‰ï¼ï¼ï¼ æ•°æ®åº“å­˜å‚¨ï¼ˆå¯¹æ•°æ®é‡å¤§çš„éœ€è¦å­˜å‚¨çš„æ·»åŠ ä¸‹ä¸€å±‚ä¸šåŠ¡é›¶ä»¶å°è£…ï¼Œä¸šåŠ¡å±‚ä¸Šä¸€å±‚åŠ ä¸€å±‚å°è£…CoreDataæˆ–SQLiteæ–¹ä¾¿æ—¥ååˆ‡æ¢æ•°æ®åº“ç”¨ï¼‰ï¼ åŠ¨ç”»ï¼ˆä¸‹å±‚å°†åŠ¨ç”»æ¡†æ¶è¾“å‡ºæˆå„ä¸ªå¯ä»¥å¤ç”¨çš„åŠ¨ç”»åŠŸèƒ½å°é›¶ä»¶ï¼‰ï¼ è§†å›¾é£æ ¼ï¼ åˆ—è¡¨æ§ä»¶ï¼ï¼ ä¸Šæ‹‰åŠ è½½æ›´å¤šï¼ï¼ ä¸‹æ‹‰åˆ·æ–°ï¼ï¼ GuideViewï¼ WebViewæ§ä»¶ï¼ AlertViewï¼ iOSç³»ç»Ÿç©ºé—´å°è£…ï¼ï¼ æ‹ç…§æ§ä»¶ï¼ï¼ é€šè®¯å½•ï¼ äºŒç»´ç ï¼ è¯­éŸ³ï¼ å®‰å…¨ï¼ æ”¯ä»˜ï¼ ç»Ÿè®¡ï¼ æ—¥å¿—å±•ç°å±‚ï¼ é¦–é¡µï¼ï¼ è®¢é˜…ï¼ï¼ æ‰«æäºŒç»´ç ï¼ï¼ å‘å¸ƒè§†é¢‘ï¼ åˆ—è¡¨ï¼ï¼ æ—¶é—´è½´åˆ—è¡¨ï¼ï¼ï¼ Listviewå¤´éƒ¨å°é¢ï¼ï¼ï¼ å¤–é“¾æƒ…å†µCellï¼ï¼ï¼ å›¾ç‰‡Cellï¼ï¼ï¼ å¹¿å‘Šæ’å…¥Cellï¼ï¼ï¼ ç•™è¨€è¯„è®ºï¼ï¼ï¼ èµåŒºåŸŸï¼ï¼ æˆ‘çš„åˆ—è¡¨ï¼ï¼ è®¢é˜…åˆ—è¡¨ï¼ï¼ æ–‡ç« åˆ—è¡¨ï¼ è¯¦ç»†é¡µï¼ï¼ åˆ†äº«ï¼ï¼ å†…å®¹åŒºï¼ï¼ è¯„è®ºï¼ ç™»å½•ï¼ï¼ æ³¨å†Œï¼ï¼ ç™»å½•ï¼ï¼ å¿˜è®°å¯†ç ï¼ï¼ æ¡æ¬¾ï¼ï¼ ä¸Šä¼ å¤´åƒï¼ï¼ ä¸ªäººä¿¡æ¯ä¿®æ”¹ åŸºç¡€å±‚ä¸­å„ä¸ªæ¨¡å—ä¸Šå±‚å¯ä»¥ä½¿ç”¨ç±»ä¼¼CocoaPodæˆ–Cathageæ–¹å¼ï¼Œä¸‹ä¸€å±‚å†å¯¹å…¶å¼•ç”¨è¿›è¡Œä¸šåŠ¡å°è£…ã€‚ è¿™é‡Œæ³¨æ„æœ€ä¸‹å±‚éœ€è¦æ‹†çš„ç²’åº¦è¶Šç»†è¶Šå¥½ã€‚å‡å°‘æ¨ªå‘ä¾èµ–ã€‚ç±»ä¼¼Commonè¿™æ ·çš„ä¸œè¥¿å¯ä»¥æ‹†åˆ°åŸºç¡€å±‚çš„å¯¹åº”æ¨¡å—é‡Œï¼Œæ¯”å¦‚è¯´é…ç½®æ–‡ä»¶é‡Œå’Œç»Ÿè®¡ç›¸å…³çš„æ”¾åˆ°åŸºç¡€å±‚çš„ç»Ÿè®¡é‡Œï¼Œç½‘ç»œç›¸å…³çš„æ”¾åˆ°ç½‘ç»œé‡Œï¼Œé¢œè‰²å­—ä½“æ”¾åˆ°è§†å›¾é£æ ¼é‡Œï¼Œä¸è¦éƒ½å †åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚å†æˆ–è€…æ˜¯å„ç§ç¬¬ä¸‰æ–¹çš„Categoryä¹Ÿæ”¾åˆ°å¯¹åº”çš„ç»„é‡Œï¼Œæ¯”å¦‚è¯´UIView+Additionså’ŒUIColor+Expandedå°±æ”¾åˆ°è§†å›¾é£æ ¼è¿™ä¸ªæ¨¡å—ä¸­ï¼Œä¸è¦ä¸“é—¨æä¸ªCategoryæ”¾æ‰€æœ‰çš„Categoryã€‚ æ•°æ®æµæ§åˆ¶æ¨¡å¼MVCå’ŒMVCS/MVVM/VIPERçš„é€‰æ‹©å…¶å®è¿™äº›éƒ½æ˜¯å¯¹MVCçš„æ‰©å±•ï¼Œåªæ˜¯æ‰©å±•çš„æ–¹å‘ä¸åŒè€Œå·²ã€‚VIPERæŠŠè§†å›¾å’Œæ•°æ®æ‹†å¾—è¿‡ç»†å˜ç›¸å¢åŠ äº†å¤æ‚åº¦å¾ˆå¤šäººä¹Ÿéƒ½ä¸ç†Ÿä¹Ÿæ²¡æœ‰æ„æ„¿å»äº†è§£å®ƒçš„å®ç°ï¼Œä½†æ˜¯æ¨¡å—å¤ç”¨å´è¾¾åˆ°äº†æœ€ä¼˜ï¼ŒMVCSæ˜¯è¿™å‡ ä¸ªé‡Œå¯¹MVCä¼˜åŒ–æœ€ç®€å•çš„åªæ˜¯æŠŠæ•°æ®çš„å­˜å‚¨æ‹†å¼€äº†ã€‚MVVMæ­£å¥½ä»‹äºVIPERå’ŒMVCSä¹‹é—´ï¼Œä»ViewControlleré‡Œæ‹†å‡ºæ¥çš„ViewModelèƒ½å¤Ÿå°†æ•°æ®ç»è¿‡é€»è¾‘å¤„ç†ç”¨äºViewçš„æ˜¾ç¤ºï¼ŒViewæœ‰æ“ä½œç”¨è¿‡ReactiveCocoaå°†ä¿¡å·ä¼ ç»™ViewModelæ¥å¤„ç†ã€‚ å¦‚æœæ˜¯æˆ‘ä¸ªäººé€‰æ‹©æˆ‘ä¼šé€‰æ‹©VIPERï¼Œå› ä¸ºå®ƒæ›´ç¬¦åˆç»†ç²’åº¦æ¨¡å—åˆ’åˆ†çš„æ€æƒ³ã€‚ä½†æ˜¯ç”¨åœ¨å›¢é˜Ÿå¤šäººå¼€å‘ä¸Šï¼Œè¿˜æ˜¯åå‘MVVMè¿™ç§æŠ˜ä¸­æ–¹æ¡ˆã€‚MVVMæŒ‰ç…§å…ˆå‰å¯¹åº”ç”¨çš„ç»“æ„åˆ†å±‚ï¼Œä¼šå°†Viewå’ŒViewControlleræ”¾åˆ°å±•ç°å±‚çš„æœ€ä¸‹é¢çš„ä¸¤å±‚é‡Œï¼Œå°†ViewModelå’ŒModelæ”¾åˆ°åŸºç¡€å±‚å¯¹åº”æ¨¡å—çš„æœ€ä¸‹é¢ä¸€å±‚ä¸­ã€‚æœ€åè¦è¯´çš„æ˜¯æ— è®ºé€‰æ‹©å“ªç§ï¼Œåªè¦æ˜¯æŒ‰ç…§å‡å°‘ViewControllerå¤§å°ï¼Œå°†æ”¹èƒ–çš„åœ°æ–¹æ”¾åˆ°Modelæˆ–Viewéƒ½æ˜¯å¯ä»¥çš„ï¼Œæ‹›å¼å­¦å¤šåæœ€é«˜å¢ƒç•Œå°±æ˜¯æ— æ‹›èƒœæœ‰æ‹›å˜›ï¼Œæœ‰æ—¶ä¹Ÿä¸éœ€è¦åˆ»æ¿çš„åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å°†æ‰€æœ‰çš„æ¨¡å—éƒ½æŒ‰ç…§ç»Ÿä¸€çš„æ€è·¯ç»™æ¡†æ­»ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªæ¨¡å—å¾ˆç®€å•å°±ç”¨MVCï¼Œä¸€èˆ¬å¤æ‚å°±ç”¨MVVMï¼Œè¦æ˜¯é¡¹ç›®æœ¬èº«ä¸šåŠ¡éå¸¸åºå¤§å¯ä»¥æ•´ä½“é‡‡ç”¨VIPERæ¥è¿›è¡ŒViewControllerçš„å®Œå…¨æ‹†åˆ†ã€‚ å¯ä»¥é€šè¿‡ä¸‹åˆ—å›¾è¡¨çœ‹å…¶ä¸­çš„ä¸åŒï¼š åç§° é€»è¾‘å’Œè§†å›¾ æ•°æ® MVC View + ViewController + Model MVCS View + ViewController + Store + Model MVVM View + ViewController + ViewModel + Model VIPER View + ViewController + Wireframe + Presenter + Interactor + Data Manager + Entity(Model) ä»£ç è§„èŒƒè¿™å—æœ€æœ‰æƒå¨çš„åº”è¯¥æ˜¯è‹¹æœè‡ªå·±æå‡ºçš„https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.htmlï¼ŒæŒ‰ç…§è¿™å¥—æ¥è‚¯å®šæ˜¯æ²¡é—®é¢˜çš„ï¼Œè€Œä¸”é¦–å…ˆåº”è¯¥éµå®ˆã€‚ä»£ç ç»“æ„ä¸»è¦æ ¹æ®ä¸åŒå›¢é˜Ÿçš„ç»éªŒæ¥åšã€‚ä¸‹é¢ä¸¾ä¸ªæˆ‘å¸¸ç”¨çš„ä»£ç ç»“æ„ 123456789101112131415161718@property...#pragma mark - Life cycleç”Ÿå‘½å‘¨æœŸï¼Œç±»ä¼¼addSubviewå’ŒNotificationçš„ç›‘å¬å’Œé”€æ¯éƒ½æ”¾åœ¨è¿™é‡Œ#pragma mark - Interfaceæ¥å£#pragma mark - Event response#pragma mark - Private methodå¦‚æœæ˜¯ViewControllerï¼Œè¿™ä¸ªåœ°æ–¹å°±æ˜¯ç˜¦èº«çš„å…³é”®ï¼Œä¸šåŠ¡å’Œé€»è¾‘åŠŸèƒ½ç›¸å…³çš„å°±æ”¾åˆ°ViewModelé‡Œã€‚#pragma mark - Delegateä»£ç†#pragma mark - Getters and Setterså»ºè®®æ‰€æœ‰çš„Propertyéƒ½è®¾ç½®ï¼Œè¿™æ ·ä¿®æ”¹é…ç½®ä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼Œçœ‹èµ·æ¥ä¸ä¼šå¾ˆæ··ä¹± ming1016","link":"/program/ï£¿/gou-jian/"},{"title":"HTTPçŠ¶æ€ç æ±‡æ€»","text":"HTTPçŠ¶æ€ç  HTTPçŠ¶æ€ç ï¼ˆè‹±è¯­ï¼šHTTP Status Codeï¼‰æ˜¯ç”¨ä»¥è¡¨ç¤ºç½‘é¡µæœåŠ¡å™¨è¶…æ–‡æœ¬ä¼ è¾“åè®®å“åº”çŠ¶æ€çš„3ä½æ•°å­—ä»£ç ã€‚å®ƒç”± RFC 2616 è§„èŒƒå®šä¹‰çš„ï¼Œå¹¶å¾—åˆ° RFC 2518ã€RFC 2817ã€RFC 2295ã€RFC 2774 ä¸ RFC 4918 ç­‰è§„èŒƒæ‰©å±•ã€‚æ‰€æœ‰çŠ¶æ€ç çš„ç¬¬ä¸€ä¸ªæ•°å­—ä»£è¡¨äº†å“åº”çš„äº”ç§çŠ¶æ€ä¹‹ä¸€ã€‚æ‰€ç¤ºçš„æ¶ˆæ¯çŸ­è¯­æ˜¯å…¸å‹çš„ï¼Œä½†æ˜¯å¯ä»¥æä¾›ä»»ä½•å¯è¯»å–çš„æ›¿ä»£æ–¹æ¡ˆã€‚ é™¤éå¦æœ‰è¯´æ˜ï¼ŒçŠ¶æ€ç æ˜¯HTTP / 1.1æ ‡å‡†ï¼ˆRFC 7231ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚ HTTPçŠ¶æ€ç çš„å®˜æ–¹æ³¨å†Œè¡¨ç”±äº’è”ç½‘å·ç åˆ†é…å±€ï¼ˆInternet Assigned Numbers Authorityï¼‰ç»´æŠ¤ã€‚ å¾®è½¯äº’è”ç½‘ä¿¡æ¯æœåŠ¡ ï¼ˆMicrosoft Internet Information Servicesï¼‰æœ‰æ—¶ä¼šä½¿ç”¨é¢å¤–çš„åè¿›åˆ¶å­ä»£ç æ¥è·å–æ›´å¤šå…·ä½“ä¿¡æ¯ï¼Œä½†æ˜¯è¿™äº›å­ä»£ç ä»…å‡ºç°åœ¨å“åº”æœ‰æ•ˆå†…å®¹å’Œæ–‡æ¡£ä¸­ï¼Œè€Œä¸æ˜¯ä»£æ›¿å®é™…çš„HTTPçŠ¶æ€ä»£ç ã€‚ ç¼–å· åç§° è§£é‡Š 1ï¸âƒ£âŒâŒ ğŸ”´ğŸ”´ğŸ”´ 1xxæ¶ˆæ¯ è¿™ä¸€ç±»å‹çš„çŠ¶æ€ç ï¼Œä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†ã€‚è¿™ç±»å“åº”æ˜¯ä¸´æ—¶å“åº”ï¼ŒåªåŒ…å«çŠ¶æ€è¡Œå’ŒæŸäº›å¯é€‰çš„å“åº”å¤´ä¿¡æ¯ï¼Œå¹¶ä»¥ç©ºè¡Œç»“æŸã€‚ç”±äºHTTP/1.0åè®®ä¸­æ²¡æœ‰å®šä¹‰ä»»ä½•1xxçŠ¶æ€ç ï¼Œæ‰€ä»¥é™¤éåœ¨æŸäº›è¯•éªŒæ¡ä»¶ä¸‹ï¼ŒæœåŠ¡å™¨ç¦æ­¢å‘æ­¤ç±»å®¢æˆ·ç«¯å‘é€1xxå“åº”ã€‚ è¿™äº›çŠ¶æ€ç ä»£è¡¨çš„å“åº”éƒ½æ˜¯ä¿¡æ¯æ€§çš„ï¼Œæ ‡ç¤ºå®¢æˆ·åº”è¯¥é‡‡å–çš„å…¶ä»–è¡ŒåŠ¨ã€‚ 100 Continue å®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘é€è¯·æ±‚ã€‚è¿™ä¸ªä¸´æ—¶å“åº”æ˜¯ç”¨æ¥é€šçŸ¥å®¢æˆ·ç«¯å®ƒçš„éƒ¨åˆ†è¯·æ±‚å·²ç»è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œä¸”ä»æœªè¢«æ‹’ç»ã€‚å®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘é€è¯·æ±‚çš„å‰©ä½™éƒ¨åˆ†ï¼Œæˆ–è€…å¦‚æœè¯·æ±‚å·²ç»å®Œæˆï¼Œå¿½ç•¥è¿™ä¸ªå“åº”ã€‚æœåŠ¡å™¨å¿…é¡»åœ¨è¯·æ±‚å®Œæˆåå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæœ€ç»ˆå“åº”ã€‚ 101 Switching Protocols æœåŠ¡å™¨å·²ç»ç†è§£äº†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†é€šè¿‡Upgradeæ¶ˆæ¯å¤´é€šçŸ¥å®¢æˆ·ç«¯é‡‡ç”¨ä¸åŒçš„åè®®æ¥å®Œæˆè¿™ä¸ªè¯·æ±‚ã€‚åœ¨å‘é€å®Œè¿™ä¸ªå“åº”æœ€åçš„ç©ºè¡Œåï¼ŒæœåŠ¡å™¨å°†ä¼šåˆ‡æ¢åˆ°åœ¨Upgradeæ¶ˆæ¯å¤´ä¸­å®šä¹‰çš„é‚£äº›åè®®ã€‚: åªæœ‰åœ¨åˆ‡æ¢æ–°çš„åè®®æ›´æœ‰å¥½å¤„çš„æ—¶å€™æ‰åº”è¯¥é‡‡å–ç±»ä¼¼æªæ–½ã€‚ä¾‹å¦‚ï¼Œåˆ‡æ¢åˆ°æ–°çš„HTTPç‰ˆæœ¬æ¯”æ—§ç‰ˆæœ¬æ›´æœ‰ä¼˜åŠ¿ï¼Œæˆ–è€…åˆ‡æ¢åˆ°ä¸€ä¸ªå®æ—¶ä¸”åŒæ­¥çš„åè®®ä»¥ä¼ é€åˆ©ç”¨æ­¤ç±»ç‰¹æ€§çš„èµ„æºã€‚ 102 Processing ç”±WebDAVï¼ˆRFC 2518ï¼‰æ‰©å±•çš„çŠ¶æ€ç ï¼Œä»£è¡¨å¤„ç†å°†è¢«ç»§ç»­æ‰§è¡Œã€‚ 2ï¸âƒ£âŒâŒ ğŸ”´ğŸ”´ğŸ”´ 2xxæˆåŠŸ è¿™ä¸€ç±»å‹çš„çŠ¶æ€ç ï¼Œä»£è¡¨è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—ã€‚ 200 OK è¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å›ã€‚ 201 Created è¯·æ±‚å·²ç»è¢«å®ç°ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªæ–°çš„èµ„æºå·²ç»ä¾æ®è¯·æ±‚çš„éœ€è¦è€Œåˆ›å»ºï¼Œä¸”å…¶URIå·²ç»éšLocationå¤´ä¿¡æ¯è¿”å›ã€‚å‡å¦‚éœ€è¦çš„èµ„æºæ— æ³•åŠæ—¶åˆ›å»ºçš„è¯ï¼Œåº”å½“è¿”å›â€™202 Acceptedâ€™ã€‚ 202 Accepted æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ã€‚æ­£å¦‚å®ƒå¯èƒ½è¢«æ‹’ç»ä¸€æ ·ï¼Œæœ€ç»ˆè¯¥è¯·æ±‚å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚åœ¨å¼‚æ­¥æ“ä½œçš„åœºåˆä¸‹ï¼Œæ²¡æœ‰æ¯”å‘é€è¿™ä¸ªçŠ¶æ€ç æ›´æ–¹ä¾¿çš„åšæ³•äº†ã€‚:è¿”å›202çŠ¶æ€ç çš„å“åº”çš„ç›®çš„æ˜¯å…è®¸æœåŠ¡å™¨æ¥å—å…¶ä»–è¿‡ç¨‹çš„è¯·æ±‚ï¼ˆä¾‹å¦‚æŸä¸ªæ¯å¤©åªæ‰§è¡Œä¸€æ¬¡çš„åŸºäºæ‰¹å¤„ç†çš„æ“ä½œï¼‰ï¼Œè€Œä¸å¿…è®©å®¢æˆ·ç«¯ä¸€ç›´ä¿æŒä¸æœåŠ¡å™¨çš„è¿æ¥ç›´åˆ°æ‰¹å¤„ç†æ“ä½œå…¨éƒ¨å®Œæˆã€‚åœ¨æ¥å—è¯·æ±‚å¤„ç†å¹¶è¿”å›202çŠ¶æ€ç çš„å“åº”åº”å½“åœ¨è¿”å›çš„å®ä½“ä¸­åŒ…å«ä¸€äº›æŒ‡ç¤ºå¤„ç†å½“å‰çŠ¶æ€çš„ä¿¡æ¯ï¼Œä»¥åŠæŒ‡å‘å¤„ç†çŠ¶æ€ç›‘è§†å™¨æˆ–çŠ¶æ€é¢„æµ‹çš„æŒ‡é’ˆï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿä¼°è®¡æ“ä½œæ˜¯å¦å·²ç»å®Œæˆã€‚ 203 Non-Authoritative Information æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†è¿”å›çš„å®ä½“å¤´éƒ¨å…ƒä¿¡æ¯ä¸æ˜¯åœ¨åŸå§‹æœåŠ¡å™¨ä¸Šæœ‰æ•ˆçš„ç¡®å®šé›†åˆï¼Œè€Œæ˜¯æ¥è‡ªæœ¬åœ°æˆ–è€…ç¬¬ä¸‰æ–¹çš„æ‹·è´ã€‚å½“å‰çš„ä¿¡æ¯å¯èƒ½æ˜¯åŸå§‹ç‰ˆæœ¬çš„å­é›†æˆ–è€…è¶…é›†ã€‚ä¾‹å¦‚ï¼ŒåŒ…å«èµ„æºçš„å…ƒæ•°æ®å¯èƒ½å¯¼è‡´åŸå§‹æœåŠ¡å™¨çŸ¥é“å…ƒä¿¡æ¯çš„è¶…é›†ã€‚ä½¿ç”¨æ­¤çŠ¶æ€ç ä¸æ˜¯å¿…é¡»çš„ï¼Œè€Œä¸”åªæœ‰åœ¨å“åº”ä¸ä½¿ç”¨æ­¤çŠ¶æ€ç ä¾¿ä¼šè¿”å›200 OKçš„æƒ…å†µä¸‹æ‰æ˜¯åˆé€‚çš„ã€‚ 204 No Content æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†ä¸éœ€è¦è¿”å›ä»»ä½•å®ä½“å†…å®¹ï¼Œå¹¶ä¸”å¸Œæœ›è¿”å›æ›´æ–°äº†çš„å…ƒä¿¡æ¯ã€‚å“åº”å¯èƒ½é€šè¿‡å®ä½“å¤´éƒ¨çš„å½¢å¼ï¼Œè¿”å›æ–°çš„æˆ–æ›´æ–°åçš„å…ƒä¿¡æ¯ã€‚å¦‚æœå­˜åœ¨è¿™äº›å¤´éƒ¨ä¿¡æ¯ï¼Œåˆ™åº”å½“ä¸æ‰€è¯·æ±‚çš„å˜é‡ç›¸å‘¼åº”ã€‚ å¦‚æœå®¢æˆ·ç«¯æ˜¯æµè§ˆå™¨çš„è¯ï¼Œé‚£ä¹ˆç”¨æˆ·æµè§ˆå™¨åº”ä¿ç•™å‘é€äº†è¯¥è¯·æ±‚çš„é¡µé¢ï¼Œè€Œä¸äº§ç”Ÿä»»ä½•æ–‡æ¡£è§†å›¾ä¸Šçš„å˜åŒ–ï¼Œå³ä½¿æŒ‰ç…§è§„èŒƒæ–°çš„æˆ–æ›´æ–°åçš„å…ƒä¿¡æ¯åº”å½“è¢«åº”ç”¨åˆ°ç”¨æˆ·æµè§ˆå™¨æ´»åŠ¨è§†å›¾ä¸­çš„æ–‡æ¡£ã€‚ ç”±äº204å“åº”è¢«ç¦æ­¢åŒ…å«ä»»ä½•æ¶ˆæ¯ä½“ï¼Œå› æ­¤å®ƒå§‹ç»ˆä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚ 205 Reset Content æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä¸”æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚ä½†æ˜¯ä¸204å“åº”ä¸åŒï¼Œè¿”å›æ­¤çŠ¶æ€ç çš„å“åº”è¦æ±‚è¯·æ±‚è€…é‡ç½®æ–‡æ¡£è§†å›¾ã€‚è¯¥å“åº”ä¸»è¦æ˜¯è¢«ç”¨äºæ¥å—ç”¨æˆ·è¾“å…¥åï¼Œç«‹å³é‡ç½®è¡¨å•ï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åœ°å¼€å§‹å¦ä¸€æ¬¡è¾“å…¥ã€‚ ä¸204å“åº”ä¸€æ ·ï¼Œè¯¥å“åº”ä¹Ÿè¢«ç¦æ­¢åŒ…å«ä»»ä½•æ¶ˆæ¯ä½“ï¼Œä¸”ä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“æŸã€‚ 206 Partial Content æœåŠ¡å™¨å·²ç»æˆåŠŸå¤„ç†äº†éƒ¨åˆ†GETè¯·æ±‚ã€‚ç±»ä¼¼äºFlashGetæˆ–è€…è¿…é›·è¿™ç±»çš„HTTP ä¸‹è½½å·¥å…·éƒ½æ˜¯ä½¿ç”¨æ­¤ç±»å“åº”å®ç°æ–­ç‚¹ç»­ä¼ æˆ–è€…å°†ä¸€ä¸ªå¤§æ–‡æ¡£åˆ†è§£ä¸ºå¤šä¸ªä¸‹è½½æ®µåŒæ—¶ä¸‹è½½ã€‚ è¯¥è¯·æ±‚å¿…é¡»åŒ…å«Rangeå¤´ä¿¡æ¯æ¥æŒ‡ç¤ºå®¢æˆ·ç«¯å¸Œæœ›å¾—åˆ°çš„å†…å®¹èŒƒå›´ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å«If-Rangeæ¥ä½œä¸ºè¯·æ±‚æ¡ä»¶ã€‚ å“åº”å¿…é¡»åŒ…å«å¦‚ä¸‹çš„å¤´éƒ¨åŸŸï¼š Content-Rangeç”¨ä»¥æŒ‡ç¤ºæœ¬æ¬¡å“åº”ä¸­è¿”å›çš„å†…å®¹çš„èŒƒå›´ï¼›å¦‚æœæ˜¯Content-Typeä¸ºmultipart/byterangesçš„å¤šæ®µä¸‹è½½ï¼Œåˆ™æ¯ä¸€multipartæ®µä¸­éƒ½åº”åŒ…å«Content-RangeåŸŸç”¨ä»¥æŒ‡ç¤ºæœ¬æ®µçš„å†…å®¹èŒƒå›´ã€‚å‡å¦‚å“åº”ä¸­åŒ…å«Content-Lengthï¼Œé‚£ä¹ˆå®ƒçš„æ•°å€¼å¿…é¡»åŒ¹é…å®ƒè¿”å›çš„å†…å®¹èŒƒå›´çš„çœŸå®å­—èŠ‚æ•°ã€‚ Date ETagå’Œï¼æˆ–Content-Locationï¼Œå‡å¦‚åŒæ ·çš„è¯·æ±‚æœ¬åº”è¯¥è¿”å›200å“åº”ã€‚ Expires, Cache-Controlï¼Œå’Œï¼æˆ–Varyï¼Œå‡å¦‚å…¶å€¼å¯èƒ½ä¸ä¹‹å‰ç›¸åŒå˜é‡çš„å…¶ä»–å“åº”å¯¹åº”çš„å€¼ä¸åŒçš„è¯ã€‚ å‡å¦‚æœ¬å“åº”è¯·æ±‚ä½¿ç”¨äº†If-Rangeå¼ºç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ä¸åº”è¯¥åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›å‡å¦‚æœ¬å“åº”çš„è¯·æ±‚ä½¿ç”¨äº†If-Rangeå¼±ç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ç¦æ­¢åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›è¿™é¿å…äº†ç¼“å­˜çš„å®ä½“å†…å®¹å’Œæ›´æ–°äº†çš„å®ä½“å¤´ä¿¡æ¯ä¹‹é—´çš„ä¸ä¸€è‡´ã€‚å¦åˆ™ï¼Œæœ¬å“åº”å°±åº”å½“åŒ…å«æ‰€æœ‰æœ¬åº”è¯¥è¿”å›200å“åº”ä¸­åº”å½“è¿”å›çš„æ‰€æœ‰å®ä½“å¤´éƒ¨åŸŸã€‚ å‡å¦‚ETagæˆ–Last-Modifiedå¤´éƒ¨ä¸èƒ½ç²¾ç¡®åŒ¹é…çš„è¯ï¼Œåˆ™å®¢æˆ·ç«¯ç¼“å­˜åº”ç¦æ­¢å°†206å“åº”è¿”å›çš„å†…å®¹ä¸ä¹‹å‰ä»»ä½•ç¼“å­˜è¿‡çš„å†…å®¹ç»„åˆåœ¨ä¸€èµ·ã€‚ ä»»ä½•ä¸æ”¯æŒRangeä»¥åŠContent-Rangeå¤´çš„ç¼“å­˜éƒ½ç¦æ­¢ç¼“å­˜206å“åº”è¿”å›çš„å†…å®¹ã€‚ 207 Multi-Status ç”±WebDAV(RFC 2518)æ‰©å±•çš„çŠ¶æ€ç ï¼Œä»£è¡¨ä¹‹åçš„æ¶ˆæ¯ä½“å°†æ˜¯ä¸€ä¸ªXMLæ¶ˆæ¯ï¼Œå¹¶ä¸”å¯èƒ½ä¾ç…§ä¹‹å‰å­è¯·æ±‚æ•°é‡çš„ä¸åŒï¼ŒåŒ…å«ä¸€ç³»åˆ—ç‹¬ç«‹çš„å“åº”ä»£ç ã€‚ 3ï¸âƒ£âŒâŒ ğŸ”´ğŸ”´ğŸ”´ 3xxé‡å®šå‘ è¿™ç±»çŠ¶æ€ç ä»£è¡¨éœ€è¦å®¢æˆ·ç«¯é‡‡å–è¿›ä¸€æ­¥çš„æ“ä½œæ‰èƒ½å®Œæˆè¯·æ±‚ã€‚é€šå¸¸ï¼Œè¿™äº›çŠ¶æ€ç ç”¨æ¥é‡å®šå‘ï¼Œåç»­çš„è¯·æ±‚åœ°å€ï¼ˆé‡å®šå‘ç›®æ ‡ï¼‰åœ¨æœ¬æ¬¡å“åº”çš„LocationåŸŸä¸­æŒ‡æ˜ã€‚å½“ä¸”ä»…å½“åç»­çš„è¯·æ±‚æ‰€ä½¿ç”¨çš„æ–¹æ³•æ˜¯GETæˆ–è€…HEADæ—¶ï¼Œç”¨æˆ·æµè§ˆå™¨æ‰å¯ä»¥åœ¨æ²¡æœ‰ç”¨æˆ·ä»‹å…¥çš„æƒ…å†µä¸‹è‡ªåŠ¨æäº¤æ‰€éœ€è¦çš„åç»­è¯·æ±‚ã€‚å®¢æˆ·ç«¯åº”å½“è‡ªåŠ¨ç›‘æµ‹æ— é™å¾ªç¯é‡å®šå‘ï¼ˆä¾‹å¦‚ï¼šAâ†’Bâ†’Câ†’â€¦â€¦â†’Aæˆ–Aâ†’Aï¼‰ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¤§é‡ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚æŒ‰ç…§HTTP/1.0ç‰ˆè§„èŒƒçš„å»ºè®®ï¼Œæµè§ˆå™¨ä¸åº”è‡ªåŠ¨è®¿é—®è¶…è¿‡5æ¬¡çš„é‡å®šå‘ã€‚ 300 Multiple Choices è¢«è¯·æ±‚çš„èµ„æºæœ‰ä¸€ç³»åˆ—å¯ä¾›é€‰æ‹©çš„å›é¦ˆä¿¡æ¯ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±ç‰¹å®šçš„åœ°å€å’Œæµè§ˆå™¨é©±åŠ¨çš„å•†è®®ä¿¡æ¯ã€‚ç”¨æˆ·æˆ–æµè§ˆå™¨èƒ½å¤Ÿè‡ªè¡Œé€‰æ‹©ä¸€ä¸ªé¦–é€‰çš„åœ°å€è¿›è¡Œé‡å®šå‘ã€‚ é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™è¯¥å“åº”åº”å½“åŒ…æ‹¬ä¸€ä¸ªèµ„æºç‰¹æ€§åŠåœ°å€çš„åˆ—è¡¨çš„å®ä½“ï¼Œä»¥ä¾¿ç”¨æˆ·æˆ–æµè§ˆå™¨ä»ä¸­é€‰æ‹©æœ€åˆé€‚çš„é‡å®šå‘åœ°å€ã€‚è¿™ä¸ªå®ä½“çš„æ ¼å¼ç”±Content-Typeå®šä¹‰çš„æ ¼å¼æ‰€å†³å®šã€‚æµè§ˆå™¨å¯èƒ½æ ¹æ®å“åº”çš„æ ¼å¼ä»¥åŠæµè§ˆå™¨è‡ªèº«èƒ½åŠ›ï¼Œè‡ªåŠ¨ä½œå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚å½“ç„¶ï¼ŒRFC 2616è§„èŒƒå¹¶æ²¡æœ‰è§„å®šè¿™æ ·çš„è‡ªåŠ¨é€‰æ‹©è¯¥å¦‚ä½•è¿›è¡Œã€‚ å¦‚æœæœåŠ¡å™¨æœ¬èº«å·²ç»æœ‰äº†é¦–é€‰çš„å›é¦ˆé€‰æ‹©ï¼Œé‚£ä¹ˆåœ¨Locationä¸­åº”å½“æŒ‡æ˜è¿™ä¸ªå›é¦ˆçš„URIï¼›æµè§ˆå™¨å¯èƒ½ä¼šå°†è¿™ä¸ªLocationå€¼ä½œä¸ºè‡ªåŠ¨é‡å®šå‘çš„åœ°å€ã€‚æ­¤å¤–ï¼Œé™¤éé¢å¤–æŒ‡å®šï¼Œå¦åˆ™è¿™ä¸ªå“åº”ä¹Ÿæ˜¯å¯ç¼“å­˜çš„ã€‚ 301 Moved Permanently è¢«è¯·æ±‚çš„èµ„æºå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼Œå¹¶ä¸”å°†æ¥ä»»ä½•å¯¹æ­¤èµ„æºçš„å¼•ç”¨éƒ½åº”è¯¥ä½¿ç”¨æœ¬å“åº”è¿”å›çš„è‹¥å¹²ä¸ªURIä¹‹ä¸€ã€‚å¦‚æœå¯èƒ½ï¼Œæ‹¥æœ‰é“¾æ¥ç¼–è¾‘åŠŸèƒ½çš„å®¢æˆ·ç«¯åº”å½“è‡ªåŠ¨æŠŠè¯·æ±‚çš„åœ°å€ä¿®æ”¹ä¸ºä»æœåŠ¡å™¨åé¦ˆå›æ¥çš„åœ°å€ã€‚é™¤éé¢å¤–æŒ‡å®šï¼Œå¦åˆ™è¿™ä¸ªå“åº”ä¹Ÿæ˜¯å¯ç¼“å­˜çš„ã€‚ æ–°çš„æ°¸ä¹…æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚ å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œå› æ­¤æµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚ æ³¨æ„ï¼šå¯¹äºæŸäº›ä½¿ç”¨HTTP/1.0åè®®çš„æµè§ˆå™¨ï¼Œå½“å®ƒä»¬å‘é€çš„POSTè¯·æ±‚å¾—åˆ°äº†ä¸€ä¸ª301å“åº”çš„è¯ï¼Œæ¥ä¸‹æ¥çš„é‡å®šå‘è¯·æ±‚å°†ä¼šå˜æˆGETæ–¹å¼ã€‚ 302 Found è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„URIå“åº”è¯·æ±‚ã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚åªæœ‰åœ¨Cache-Controlæˆ–Expiresä¸­è¿›è¡Œäº†æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”æ‰æ˜¯å¯ç¼“å­˜çš„ã€‚ æ–°çš„ä¸´æ—¶æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚ å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚ æ³¨æ„ï¼šè™½ç„¶RFC 1945å’ŒRFC 2068è§„èŒƒä¸å…è®¸å®¢æˆ·ç«¯åœ¨é‡å®šå‘æ—¶æ”¹å˜è¯·æ±‚çš„æ–¹æ³•ï¼Œä½†æ˜¯å¾ˆå¤šç°å­˜çš„æµè§ˆå™¨å°†302å“åº”è§†ä½œä¸º303å“åº”ï¼Œå¹¶ä¸”ä½¿ç”¨GETæ–¹å¼è®¿é—®åœ¨Locationä¸­è§„å®šçš„URIï¼Œè€Œæ— è§†åŸå…ˆè¯·æ±‚çš„æ–¹æ³•ã€‚çŠ¶æ€ç 303å’Œ307è¢«æ·»åŠ äº†è¿›æ¥ï¼Œç”¨ä»¥æ˜ç¡®æœåŠ¡å™¨æœŸå¾…å®¢æˆ·ç«¯è¿›è¡Œä½•ç§ååº”ã€‚ 303 See Other å¯¹åº”å½“å‰è¯·æ±‚çš„å“åº”å¯ä»¥åœ¨å¦ä¸€ä¸ªURIä¸Šè¢«æ‰¾åˆ°ï¼Œè€Œä¸”å®¢æˆ·ç«¯åº”å½“é‡‡ç”¨GETçš„æ–¹å¼è®¿é—®é‚£ä¸ªèµ„æºã€‚è¿™ä¸ªæ–¹æ³•çš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†å…è®¸ç”±è„šæœ¬æ¿€æ´»çš„POSTè¯·æ±‚è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–°çš„èµ„æºã€‚è¿™ä¸ªæ–°çš„URIä¸æ˜¯åŸå§‹èµ„æºçš„æ›¿ä»£å¼•ç”¨ã€‚åŒæ—¶ï¼Œ303å“åº”ç¦æ­¢è¢«ç¼“å­˜ã€‚å½“ç„¶ï¼Œç¬¬äºŒä¸ªè¯·æ±‚ï¼ˆé‡å®šå‘ï¼‰å¯èƒ½è¢«ç¼“å­˜ã€‚ æ–°çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚ æ³¨æ„ï¼šè®¸å¤šHTTP/1.1ç‰ˆä»¥å‰çš„æµè§ˆå™¨ä¸èƒ½æ­£ç¡®ç†è§£303çŠ¶æ€ã€‚å¦‚æœéœ€è¦è€ƒè™‘ä¸è¿™äº›æµè§ˆå™¨ä¹‹é—´çš„äº’åŠ¨ï¼Œ302çŠ¶æ€ç åº”è¯¥å¯ä»¥èƒœä»»ï¼Œå› ä¸ºå¤§å¤šæ•°çš„æµè§ˆå™¨å¤„ç†302å“åº”æ—¶çš„æ–¹å¼æ°æ°å°±æ˜¯ä¸Šè¿°è§„èŒƒè¦æ±‚å®¢æˆ·ç«¯å¤„ç†303å“åº”æ—¶åº”å½“åšçš„ã€‚ 304 Not Modified å¦‚æœå®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªå¸¦æ¡ä»¶çš„GETè¯·æ±‚ä¸”è¯¥è¯·æ±‚å·²è¢«å…è®¸ï¼Œè€Œæ–‡æ¡£çš„å†…å®¹ï¼ˆè‡ªä¸Šæ¬¡è®¿é—®ä»¥æ¥æˆ–è€…æ ¹æ®è¯·æ±‚çš„æ¡ä»¶ï¼‰å¹¶æ²¡æœ‰æ”¹å˜ï¼Œåˆ™æœåŠ¡å™¨åº”å½“è¿”å›è¿™ä¸ªçŠ¶æ€ç ã€‚304å“åº”ç¦æ­¢åŒ…å«æ¶ˆæ¯ä½“ï¼Œå› æ­¤å§‹ç»ˆä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚ è¯¥å“åº”å¿…é¡»åŒ…å«ä»¥ä¸‹çš„å¤´ä¿¡æ¯ï¼š Dateï¼Œé™¤éè¿™ä¸ªæœåŠ¡å™¨æ²¡æœ‰æ—¶é’Ÿã€‚å‡å¦‚æ²¡æœ‰æ—¶é’Ÿçš„æœåŠ¡å™¨ä¹Ÿéµå®ˆè¿™äº›è§„åˆ™ï¼Œé‚£ä¹ˆä»£ç†æœåŠ¡å™¨ä»¥åŠå®¢æˆ·ç«¯å¯ä»¥è‡ªè¡Œå°†Dateå­—æ®µæ·»åŠ åˆ°æ¥æ”¶åˆ°çš„å“åº”å¤´ä¸­å»ï¼ˆæ­£å¦‚RFC 2068ä¸­è§„å®šçš„ä¸€æ ·ï¼‰ï¼Œç¼“å­˜æœºåˆ¶å°†ä¼šæ­£å¸¸å·¥ä½œã€‚ ETagå’Œï¼æˆ–Content-Locationï¼Œå‡å¦‚åŒæ ·çš„è¯·æ±‚æœ¬åº”è¿”å›200å“åº”ã€‚ Expires, Cache-Controlï¼Œå’Œï¼æˆ–Varyï¼Œå‡å¦‚å…¶å€¼å¯èƒ½ä¸ä¹‹å‰ç›¸åŒå˜é‡çš„å…¶ä»–å“åº”å¯¹åº”çš„å€¼ä¸åŒçš„è¯ã€‚ å‡å¦‚æœ¬å“åº”è¯·æ±‚ä½¿ç”¨äº†å¼ºç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ä¸åº”è¯¥åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›å¦åˆ™ï¼ˆä¾‹å¦‚ï¼ŒæŸä¸ªå¸¦æ¡ä»¶çš„GETè¯·æ±‚ä½¿ç”¨äº†å¼±ç¼“å­˜éªŒè¯ï¼‰ï¼Œæœ¬æ¬¡å“åº”ç¦æ­¢åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›è¿™é¿å…äº†ç¼“å­˜äº†çš„å®ä½“å†…å®¹å’Œæ›´æ–°äº†çš„å®ä½“å¤´ä¿¡æ¯ä¹‹é—´çš„ä¸ä¸€è‡´ã€‚ å‡å¦‚æŸä¸ª304å“åº”æŒ‡æ˜äº†å½“å‰æŸä¸ªå®ä½“æ²¡æœ‰ç¼“å­˜ï¼Œé‚£ä¹ˆç¼“å­˜ç³»ç»Ÿå¿…é¡»å¿½è§†è¿™ä¸ªå“åº”ï¼Œå¹¶ä¸”é‡å¤å‘é€ä¸åŒ…å«é™åˆ¶æ¡ä»¶çš„è¯·æ±‚ã€‚ å‡å¦‚æ¥æ”¶åˆ°ä¸€ä¸ªè¦æ±‚æ›´æ–°æŸä¸ªç¼“å­˜æ¡ç›®çš„304å“åº”ï¼Œé‚£ä¹ˆç¼“å­˜ç³»ç»Ÿå¿…é¡»æ›´æ–°æ•´ä¸ªæ¡ç›®ä»¥åæ˜ æ‰€æœ‰åœ¨å“åº”ä¸­è¢«æ›´æ–°çš„å­—æ®µçš„å€¼ã€‚ 305 Use Proxy è¢«è¯·æ±‚çš„èµ„æºå¿…é¡»é€šè¿‡æŒ‡å®šçš„ä»£ç†æ‰èƒ½è¢«è®¿é—®ã€‚LocationåŸŸä¸­å°†ç»™å‡ºæŒ‡å®šçš„ä»£ç†æ‰€åœ¨çš„URIä¿¡æ¯ï¼Œæ¥æ”¶è€…éœ€è¦é‡å¤å‘é€ä¸€ä¸ªå•ç‹¬çš„è¯·æ±‚ï¼Œé€šè¿‡è¿™ä¸ªä»£ç†æ‰èƒ½è®¿é—®ç›¸åº”èµ„æºã€‚åªæœ‰åŸå§‹æœåŠ¡å™¨æ‰èƒ½åˆ›å»º305å“åº”ã€‚ æ³¨æ„ï¼šRFC 2068ä¸­æ²¡æœ‰æ˜ç¡®305å“åº”æ˜¯ä¸ºäº†é‡å®šå‘ä¸€ä¸ªå•ç‹¬çš„è¯·æ±‚ï¼Œè€Œä¸”åªèƒ½è¢«åŸå§‹æœåŠ¡å™¨åˆ›å»ºã€‚å¿½è§†è¿™äº›é™åˆ¶å¯èƒ½å¯¼è‡´ä¸¥é‡çš„å®‰å…¨åæœã€‚ 306 Switch Proxy åœ¨æœ€æ–°ç‰ˆçš„è§„èŒƒä¸­ï¼Œ306çŠ¶æ€ç å·²ç»ä¸å†è¢«ä½¿ç”¨ã€‚ 307 Temporary Redirect è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„URIå“åº”è¯·æ±‚ã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚åªæœ‰åœ¨Cache-Controlæˆ–Expiresä¸­è¿›è¡Œäº†æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”æ‰æ˜¯å¯ç¼“å­˜çš„ã€‚ æ–°çš„ä¸´æ—¶æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚å› ä¸ºéƒ¨åˆ†æµè§ˆå™¨ä¸èƒ½è¯†åˆ«307å“åº”ï¼Œå› æ­¤éœ€è¦æ·»åŠ ä¸Šè¿°å¿…è¦ä¿¡æ¯ä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿç†è§£å¹¶å‘æ–°çš„URIå‘å‡ºè®¿é—®è¯·æ±‚ã€‚ å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚ 4ï¸âƒ£âŒâŒ ğŸ”´ğŸ”´ğŸ”´ 4xxå®¢æˆ·ç«¯é”™è¯¯è¿™ç±»çš„çŠ¶æ€ç ä»£è¡¨äº†å®¢æˆ·ç«¯çœ‹èµ·æ¥å¯èƒ½å‘ç”Ÿäº†é”™è¯¯ï¼Œå¦¨ç¢äº†æœåŠ¡å™¨çš„å¤„ç†ã€‚é™¤éå“åº”çš„æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™æœåŠ¡å™¨å°±åº”è¯¥è¿”å›ä¸€ä¸ªè§£é‡Šå½“å‰é”™è¯¯çŠ¶å†µçš„å®ä½“ï¼Œä»¥åŠè¿™æ˜¯ä¸´æ—¶çš„è¿˜æ˜¯æ°¸ä¹…æ€§çš„çŠ¶å†µã€‚è¿™äº›çŠ¶æ€ç é€‚ç”¨äºä»»ä½•è¯·æ±‚æ–¹æ³•ã€‚æµè§ˆå™¨åº”å½“å‘ç”¨æˆ·æ˜¾ç¤ºä»»ä½•åŒ…å«åœ¨æ­¤ç±»é”™è¯¯å“åº”ä¸­çš„å®ä½“å†…å®¹ã€‚å¦‚æœé”™è¯¯å‘ç”Ÿæ—¶å®¢æˆ·ç«¯æ­£åœ¨ä¼ é€æ•°æ®ï¼Œé‚£ä¹ˆä½¿ç”¨TCPçš„æœåŠ¡å™¨å®ç°åº”å½“ä»”ç»†ç¡®ä¿åœ¨å…³é—­å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä¹‹å‰ï¼Œå®¢æˆ·ç«¯å·²ç»æ”¶åˆ°äº†åŒ…å«é”™è¯¯ä¿¡æ¯çš„æ•°æ®åŒ…ã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨æ”¶åˆ°é”™è¯¯ä¿¡æ¯åç»§ç»­å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ŒæœåŠ¡å™¨çš„TCPæ ˆå°†å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªé‡ç½®æ•°æ®åŒ…ï¼Œä»¥æ¸…é™¤è¯¥å®¢æˆ·ç«¯æ‰€æœ‰è¿˜æœªè¯†åˆ«çš„è¾“å…¥ç¼“å†²ï¼Œä»¥å…è¿™äº›æ•°æ®è¢«æœåŠ¡å™¨ä¸Šçš„åº”ç”¨ç¨‹åºè¯»å–å¹¶å¹²æ‰°åè€…ã€‚ 400 Bad Request ç”±äºåŒ…å«è¯­æ³•é”™è¯¯ï¼Œå½“å‰è¯·æ±‚æ— æ³•è¢«æœåŠ¡å™¨ç†è§£ã€‚é™¤éè¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¸åº”è¯¥é‡å¤æäº¤è¿™ä¸ªè¯·æ±‚ã€‚ 401 Unauthorized å½“å‰è¯·æ±‚éœ€è¦ç”¨æˆ·éªŒè¯ã€‚è¯¥å“åº”å¿…é¡»åŒ…å«ä¸€ä¸ªé€‚ç”¨äºè¢«è¯·æ±‚èµ„æºçš„WWW-Authenticateä¿¡æ¯å¤´ç”¨ä»¥è¯¢é—®ç”¨æˆ·ä¿¡æ¯ã€‚å®¢æˆ·ç«¯å¯ä»¥é‡å¤æäº¤ä¸€ä¸ªåŒ…å«æ°å½“çš„Authorizationå¤´ä¿¡æ¯çš„è¯·æ±‚ã€‚å¦‚æœå½“å‰è¯·æ±‚å·²ç»åŒ…å«äº†Authorizationè¯ä¹¦ï¼Œé‚£ä¹ˆ401å“åº”ä»£è¡¨ç€æœåŠ¡å™¨éªŒè¯å·²ç»æ‹’ç»äº†é‚£äº›è¯ä¹¦ã€‚å¦‚æœ401å“åº”åŒ…å«äº†ä¸å‰ä¸€ä¸ªå“åº”ç›¸åŒçš„èº«ä»½éªŒè¯è¯¢é—®ï¼Œä¸”æµè§ˆå™¨å·²ç»è‡³å°‘å°è¯•äº†ä¸€æ¬¡éªŒè¯ï¼Œé‚£ä¹ˆæµè§ˆå™¨åº”å½“å‘ç”¨æˆ·å±•ç¤ºå“åº”ä¸­åŒ…å«çš„å®ä½“ä¿¡æ¯ï¼Œå› ä¸ºè¿™ä¸ªå®ä½“ä¿¡æ¯ä¸­å¯èƒ½åŒ…å«äº†ç›¸å…³è¯Šæ–­ä¿¡æ¯ã€‚å‚è§RFC 2617ã€‚ 402 Payment Required è¯¥çŠ¶æ€ç æ˜¯ä¸ºäº†å°†æ¥å¯èƒ½çš„éœ€æ±‚è€Œé¢„ç•™çš„ã€‚ 403 Forbidden æœåŠ¡å™¨å·²ç»ç†è§£è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œå®ƒã€‚ä¸401å“åº”ä¸åŒçš„æ˜¯ï¼Œèº«ä»½éªŒè¯å¹¶ä¸èƒ½æä¾›ä»»ä½•å¸®åŠ©ï¼Œè€Œä¸”è¿™ä¸ªè¯·æ±‚ä¹Ÿä¸åº”è¯¥è¢«é‡å¤æäº¤ã€‚å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œè€Œä¸”æœåŠ¡å™¨å¸Œæœ›èƒ½å¤Ÿè®²æ¸…æ¥šä¸ºä½•è¯·æ±‚ä¸èƒ½è¢«æ‰§è¡Œï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨å®ä½“å†…æè¿°æ‹’ç»çš„åŸå› ã€‚å½“ç„¶æœåŠ¡å™¨ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª404å“åº”ï¼Œå‡å¦‚å®ƒä¸å¸Œæœ›è®©å®¢æˆ·ç«¯è·å¾—ä»»ä½•ä¿¡æ¯ã€‚ 404 Not Found è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚æ‰€å¸Œæœ›å¾—åˆ°çš„èµ„æºæœªè¢«åœ¨æœåŠ¡å™¨ä¸Šå‘ç°ã€‚æ²¡æœ‰ä¿¡æ¯èƒ½å¤Ÿå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªçŠ¶å†µåˆ°åº•æ˜¯æš‚æ—¶çš„è¿˜æ˜¯æ°¸ä¹…çš„ã€‚å‡å¦‚æœåŠ¡å™¨çŸ¥é“æƒ…å†µçš„è¯ï¼Œåº”å½“ä½¿ç”¨410çŠ¶æ€ç æ¥å‘ŠçŸ¥æ—§èµ„æºå› ä¸ºæŸäº›å†…éƒ¨çš„é…ç½®æœºåˆ¶é—®é¢˜ï¼Œå·²ç»æ°¸ä¹…çš„ä¸å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯ä»¥è·³è½¬çš„åœ°å€ã€‚404è¿™ä¸ªçŠ¶æ€ç è¢«å¹¿æ³›åº”ç”¨äºå½“æœåŠ¡å™¨ä¸æƒ³æ­ç¤ºåˆ°åº•ä¸ºä½•è¯·æ±‚è¢«æ‹’ç»æˆ–è€…æ²¡æœ‰å…¶ä»–é€‚åˆçš„å“åº”å¯ç”¨çš„æƒ…å†µä¸‹ã€‚ 405 Method Not Allowed è¯·æ±‚è¡Œä¸­æŒ‡å®šçš„è¯·æ±‚æ–¹æ³•ä¸èƒ½è¢«ç”¨äºè¯·æ±‚ç›¸åº”çš„èµ„æºã€‚è¯¥å“åº”å¿…é¡»è¿”å›ä¸€ä¸ªAllowå¤´ä¿¡æ¯ç”¨ä»¥è¡¨ç¤ºå‡ºå½“å‰èµ„æºèƒ½å¤Ÿæ¥å—çš„è¯·æ±‚æ–¹æ³•çš„åˆ—è¡¨ã€‚ é‰´äºPUTï¼ŒDELETEæ–¹æ³•ä¼šå¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºè¿›è¡Œå†™æ“ä½œï¼Œå› è€Œç»å¤§éƒ¨åˆ†çš„ç½‘é¡µæœåŠ¡å™¨éƒ½ä¸æ”¯æŒæˆ–è€…åœ¨é»˜è®¤é…ç½®ä¸‹ä¸å…è®¸ä¸Šè¿°è¯·æ±‚æ–¹æ³•ï¼Œå¯¹äºæ­¤ç±»è¯·æ±‚å‡ä¼šè¿”å›405é”™è¯¯ã€‚ 406 Not Acceptable è¯·æ±‚çš„èµ„æºçš„å†…å®¹ç‰¹æ€§æ— æ³•æ»¡è¶³è¯·æ±‚å¤´ä¸­çš„æ¡ä»¶ï¼Œå› è€Œæ— æ³•ç”Ÿæˆå“åº”å®ä½“ã€‚ é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™è¯¥å“åº”å°±åº”å½“è¿”å›ä¸€ä¸ªåŒ…å«å¯ä»¥è®©ç”¨æˆ·æˆ–è€…æµè§ˆå™¨ä»ä¸­é€‰æ‹©æœ€åˆé€‚çš„å®ä½“ç‰¹æ€§ä»¥åŠåœ°å€åˆ—è¡¨çš„å®ä½“ã€‚å®ä½“çš„æ ¼å¼ç”±Content-Typeå¤´ä¸­å®šä¹‰çš„åª’ä½“ç±»å‹å†³å®šã€‚æµè§ˆå™¨å¯ä»¥æ ¹æ®æ ¼å¼åŠè‡ªèº«èƒ½åŠ›è‡ªè¡Œä½œå‡ºæœ€ä½³é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œè§„èŒƒä¸­å¹¶æ²¡æœ‰å®šä¹‰ä»»ä½•ä½œå‡ºæ­¤ç±»è‡ªåŠ¨é€‰æ‹©çš„æ ‡å‡†ã€‚ 407 Proxy Authentication Required ä¸401å“åº”ç±»ä¼¼ï¼Œåªä¸è¿‡å®¢æˆ·ç«¯å¿…é¡»åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šè¿›è¡Œèº«ä»½éªŒè¯ã€‚ä»£ç†æœåŠ¡å™¨å¿…é¡»è¿”å›ä¸€ä¸ªProxy-Authenticateç”¨ä»¥è¿›è¡Œèº«ä»½è¯¢é—®ã€‚å®¢æˆ·ç«¯å¯ä»¥è¿”å›ä¸€ä¸ªProxy-Authorizationä¿¡æ¯å¤´ç”¨ä»¥éªŒè¯ã€‚å‚è§RFC 2617ã€‚ 408 Request Timeout è¯·æ±‚è¶…æ—¶ã€‚å®¢æˆ·ç«¯æ²¡æœ‰åœ¨æœåŠ¡å™¨é¢„å¤‡ç­‰å¾…çš„æ—¶é—´å†…å®Œæˆä¸€ä¸ªè¯·æ±‚çš„å‘é€ã€‚å®¢æˆ·ç«¯å¯ä»¥éšæ—¶å†æ¬¡æäº¤è¿™ä¸€è¯·æ±‚è€Œæ— éœ€è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ 409 Conflict ç”±äºå’Œè¢«è¯·æ±‚çš„èµ„æºçš„å½“å‰çŠ¶æ€ä¹‹é—´å­˜åœ¨å†²çªï¼Œè¯·æ±‚æ— æ³•å®Œæˆã€‚è¿™ä¸ªä»£ç åªå…è®¸ç”¨åœ¨è¿™æ ·çš„æƒ…å†µä¸‹æ‰èƒ½è¢«ä½¿ç”¨ï¼šç”¨æˆ·è¢«è®¤ä¸ºèƒ½å¤Ÿè§£å†³å†²çªï¼Œå¹¶ä¸”ä¼šé‡æ–°æäº¤æ–°çš„è¯·æ±‚ã€‚è¯¥å“åº”åº”å½“åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯ä»¥ä¾¿ç”¨æˆ·å‘ç°å†²çªçš„æºå¤´ã€‚ å†²çªé€šå¸¸å‘ç”Ÿäºå¯¹PUTè¯·æ±‚çš„å¤„ç†ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨é‡‡ç”¨ç‰ˆæœ¬æ£€æŸ¥çš„ç¯å¢ƒä¸‹ï¼ŒæŸæ¬¡PUTæäº¤çš„å¯¹ç‰¹å®šèµ„æºçš„ä¿®æ”¹è¯·æ±‚æ‰€é™„å¸¦çš„ç‰ˆæœ¬ä¿¡æ¯ä¸ä¹‹å‰çš„æŸä¸ªï¼ˆç¬¬ä¸‰æ–¹ï¼‰è¯·æ±‚å‘å†²çªï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡å™¨å°±åº”è¯¥è¿”å›ä¸€ä¸ª409é”™è¯¯ï¼Œå‘ŠçŸ¥ç”¨æˆ·è¯·æ±‚æ— æ³•å®Œæˆã€‚æ­¤æ—¶ï¼Œå“åº”å®ä½“ä¸­å¾ˆå¯èƒ½ä¼šåŒ…å«ä¸¤ä¸ªå†²çªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚æ¯”è¾ƒï¼Œä»¥ä¾¿ç”¨æˆ·é‡æ–°æäº¤å½’å¹¶ä»¥åçš„æ–°ç‰ˆæœ¬ã€‚ 410 Gone è¢«è¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸Šå·²ç»ä¸å†å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å·²çŸ¥çš„è½¬å‘åœ°å€ã€‚è¿™æ ·çš„çŠ¶å†µåº”å½“è¢«è®¤ä¸ºæ˜¯æ°¸ä¹…æ€§çš„ã€‚å¦‚æœå¯èƒ½ï¼Œæ‹¥æœ‰é“¾æ¥ç¼–è¾‘åŠŸèƒ½çš„å®¢æˆ·ç«¯åº”å½“åœ¨è·å¾—ç”¨æˆ·è®¸å¯ååˆ é™¤æ‰€æœ‰æŒ‡å‘è¿™ä¸ªåœ°å€çš„å¼•ç”¨ã€‚å¦‚æœæœåŠ¡å™¨ä¸çŸ¥é“æˆ–è€…æ— æ³•ç¡®å®šè¿™ä¸ªçŠ¶å†µæ˜¯å¦æ˜¯æ°¸ä¹…çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨404çŠ¶æ€ç ã€‚é™¤éé¢å¤–è¯´æ˜ï¼Œå¦åˆ™è¿™ä¸ªå“åº”æ˜¯å¯ç¼“å­˜çš„ã€‚ 410å“åº”çš„ç›®çš„ä¸»è¦æ˜¯å¸®åŠ©ç½‘ç«™ç®¡ç†å‘˜ç»´æŠ¤ç½‘ç«™ï¼Œé€šçŸ¥ç”¨æˆ·è¯¥èµ„æºå·²ç»ä¸å†å¯ç”¨ï¼Œå¹¶ä¸”æœåŠ¡å™¨æ‹¥æœ‰è€…å¸Œæœ›æ‰€æœ‰æŒ‡å‘è¿™ä¸ªèµ„æºçš„è¿œç«¯è¿æ¥ä¹Ÿè¢«åˆ é™¤ã€‚è¿™ç±»äº‹ä»¶åœ¨é™æ—¶ã€å¢å€¼æœåŠ¡ä¸­å¾ˆæ™®éã€‚åŒæ ·ï¼Œ410å“åº”ä¹Ÿè¢«ç”¨äºé€šçŸ¥å®¢æˆ·ç«¯åœ¨å½“å‰æœåŠ¡å™¨ç«™ç‚¹ä¸Šï¼ŒåŸæœ¬å±äºæŸä¸ªä¸ªäººçš„èµ„æºå·²ç»ä¸å†å¯ç”¨ã€‚å½“ç„¶ï¼Œæ˜¯å¦éœ€è¦æŠŠæ‰€æœ‰æ°¸ä¹…ä¸å¯ç”¨çš„èµ„æºæ ‡è®°ä¸ºâ€™410 Goneâ€™ï¼Œä»¥åŠæ˜¯å¦éœ€è¦ä¿æŒæ­¤æ ‡è®°å¤šé•¿æ—¶é—´ï¼Œå®Œå…¨å–å†³äºæœåŠ¡å™¨æ‹¥æœ‰è€…ã€‚ 411 Length Required æœåŠ¡å™¨æ‹’ç»åœ¨æ²¡æœ‰å®šä¹‰Content-Lengthå¤´çš„æƒ…å†µä¸‹æ¥å—è¯·æ±‚ã€‚åœ¨æ·»åŠ äº†è¡¨æ˜è¯·æ±‚æ¶ˆæ¯ä½“é•¿åº¦çš„æœ‰æ•ˆContent-Lengthå¤´ä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥å†æ¬¡æäº¤è¯¥è¯·æ±‚ã€‚ 412 Precondition Failed æœåŠ¡å™¨åœ¨éªŒè¯åœ¨è¯·æ±‚çš„å¤´å­—æ®µä¸­ç»™å‡ºå…ˆå†³æ¡ä»¶æ—¶ï¼Œæ²¡èƒ½æ»¡è¶³å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªã€‚è¿™ä¸ªçŠ¶æ€ç å…è®¸å®¢æˆ·ç«¯åœ¨è·å–èµ„æºæ—¶åœ¨è¯·æ±‚çš„å…ƒä¿¡æ¯ï¼ˆè¯·æ±‚å¤´å­—æ®µæ•°æ®ï¼‰ä¸­è®¾ç½®å…ˆå†³æ¡ä»¶ï¼Œä»¥æ­¤é¿å…è¯¥è¯·æ±‚æ–¹æ³•è¢«åº”ç”¨åˆ°å…¶å¸Œæœ›çš„å†…å®¹ä»¥å¤–çš„èµ„æºä¸Šã€‚ 413 Request Entity Too Large æœåŠ¡å™¨æ‹’ç»å¤„ç†å½“å‰è¯·æ±‚ï¼Œå› ä¸ºè¯¥è¯·æ±‚æäº¤çš„å®ä½“æ•°æ®å¤§å°è¶…è¿‡äº†æœåŠ¡å™¨æ„¿æ„æˆ–è€…èƒ½å¤Ÿå¤„ç†çš„èŒƒå›´ã€‚æ­¤ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯ä»¥å…³é—­è¿æ¥ä»¥å…å®¢æˆ·ç«¯ç»§ç»­å‘é€æ­¤è¯·æ±‚ã€‚ å¦‚æœè¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼ŒæœåŠ¡å™¨åº”å½“è¿”å›ä¸€ä¸ªRetry-Afterçš„å“åº”å¤´ï¼Œä»¥å‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥åœ¨å¤šå°‘æ—¶é—´ä»¥åé‡æ–°å°è¯•ã€‚ 414 Request-URI Too Long è¯·æ±‚çš„URIé•¿åº¦è¶…è¿‡äº†æœåŠ¡å™¨èƒ½å¤Ÿè§£é‡Šçš„é•¿åº¦ï¼Œå› æ­¤æœåŠ¡å™¨æ‹’ç»å¯¹è¯¥è¯·æ±‚æä¾›æœåŠ¡ã€‚è¿™æ¯”è¾ƒå°‘è§ï¼Œé€šå¸¸çš„æƒ…å†µåŒ…æ‹¬ï¼š æœ¬åº”ä½¿ç”¨POSTæ–¹æ³•çš„è¡¨å•æäº¤å˜æˆäº†GETæ–¹æ³•ï¼Œå¯¼è‡´æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆQuery Stringï¼‰è¿‡é•¿ã€‚ é‡å®šå‘URIâ€œé»‘æ´â€ï¼Œä¾‹å¦‚æ¯æ¬¡é‡å®šå‘æŠŠæ—§çš„URIä½œä¸ºæ–°çš„URIçš„ä¸€éƒ¨åˆ†ï¼Œå¯¼è‡´åœ¨è‹¥å¹²æ¬¡é‡å®šå‘åURIè¶…é•¿ã€‚ å®¢æˆ·ç«¯æ­£åœ¨å°è¯•åˆ©ç”¨æŸäº›æœåŠ¡å™¨ä¸­å­˜åœ¨çš„å®‰å…¨æ¼æ´æ”»å‡»æœåŠ¡å™¨ã€‚è¿™ç±»æœåŠ¡å™¨ä½¿ç”¨å›ºå®šé•¿åº¦çš„ç¼“å†²è¯»å–æˆ–æ“ä½œè¯·æ±‚çš„URIï¼Œå½“GETåçš„å‚æ•°è¶…è¿‡æŸä¸ªæ•°å€¼åï¼Œå¯èƒ½ä¼šäº§ç”Ÿç¼“å†²åŒºæº¢å‡ºï¼Œå¯¼è‡´ä»»æ„ä»£ç è¢«æ‰§è¡Œ[1]ã€‚æ²¡æœ‰æ­¤ç±»æ¼æ´çš„æœåŠ¡å™¨ï¼Œåº”å½“è¿”å›414çŠ¶æ€ç ã€‚ 415 Unsupported Media Type å¯¹äºå½“å‰è¯·æ±‚çš„æ–¹æ³•å’Œæ‰€è¯·æ±‚çš„èµ„æºï¼Œè¯·æ±‚ä¸­æäº¤çš„å®ä½“å¹¶ä¸æ˜¯æœåŠ¡å™¨ä¸­æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œå› æ­¤è¯·æ±‚è¢«æ‹’ç»ã€‚ 416 Requested Range Not Satisfiable å¦‚æœè¯·æ±‚ä¸­åŒ…å«äº†Rangeè¯·æ±‚å¤´ï¼Œå¹¶ä¸”Rangeä¸­æŒ‡å®šçš„ä»»ä½•æ•°æ®èŒƒå›´éƒ½ä¸å½“å‰èµ„æºçš„å¯ç”¨èŒƒå›´ä¸é‡åˆï¼ŒåŒæ—¶è¯·æ±‚ä¸­åˆæ²¡æœ‰å®šä¹‰If-Rangeè¯·æ±‚å¤´ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±åº”å½“è¿”å›416çŠ¶æ€ç ã€‚ å‡å¦‚Rangeä½¿ç”¨çš„æ˜¯å­—èŠ‚èŒƒå›´ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µå°±æ˜¯æŒ‡è¯·æ±‚æŒ‡å®šçš„æ‰€æœ‰æ•°æ®èŒƒå›´çš„é¦–å­—èŠ‚ä½ç½®éƒ½è¶…è¿‡äº†å½“å‰èµ„æºçš„é•¿åº¦ã€‚æœåŠ¡å™¨ä¹Ÿåº”å½“åœ¨è¿”å›416çŠ¶æ€ç çš„åŒæ—¶ï¼ŒåŒ…å«ä¸€ä¸ªContent-Rangeå®ä½“å¤´ï¼Œç”¨ä»¥æŒ‡æ˜å½“å‰èµ„æºçš„é•¿åº¦ã€‚è¿™ä¸ªå“åº”ä¹Ÿè¢«ç¦æ­¢ä½¿ç”¨multipart/byterangesä½œä¸ºå…¶Content-Typeã€‚ 417 Expectation Failed åœ¨è¯·æ±‚å¤´Expectä¸­æŒ‡å®šçš„é¢„æœŸå†…å®¹æ— æ³•è¢«æœåŠ¡å™¨æ»¡è¶³ï¼Œæˆ–è€…è¿™ä¸ªæœåŠ¡å™¨æ˜¯ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œå®ƒæœ‰æ˜æ˜¾çš„è¯æ®è¯æ˜åœ¨å½“å‰è·¯ç”±çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒExpectçš„å†…å®¹æ— æ³•è¢«æ»¡è¶³ã€‚ 418 Iâ€™m a teapot æœ¬æ“ä½œç æ˜¯åœ¨1998å¹´ä½œä¸ºIETFçš„ä¼ ç»Ÿæ„šäººèŠ‚ç¬‘è¯, åœ¨RFC 2324 è¶…æ–‡æœ¬å’–å•¡å£¶æ§åˆ¶åè®®ä¸­å®šä¹‰çš„ï¼Œå¹¶ä¸éœ€è¦åœ¨çœŸå®çš„HTTPæœåŠ¡å™¨ä¸­å®šä¹‰ã€‚ 421 There are too many connections from your internet address ä»å½“å‰å®¢æˆ·ç«¯æ‰€åœ¨çš„IPåœ°å€åˆ°æœåŠ¡å™¨çš„è¿æ¥æ•°è¶…è¿‡äº†æœåŠ¡å™¨è®¸å¯çš„æœ€å¤§èŒƒå›´ã€‚é€šå¸¸ï¼Œè¿™é‡Œçš„IPåœ°å€æŒ‡çš„æ˜¯ä»æœåŠ¡å™¨ä¸Šçœ‹åˆ°çš„å®¢æˆ·ç«¯åœ°å€ï¼ˆæ¯”å¦‚ç”¨æˆ·çš„ç½‘å…³æˆ–è€…ä»£ç†æœåŠ¡å™¨åœ°å€ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿æ¥æ•°çš„è®¡ç®—å¯èƒ½æ¶‰åŠåˆ°ä¸æ­¢ä¸€ä¸ªç»ˆç«¯ç”¨æˆ·ã€‚ 422 Unprocessable Entity è¯·æ±‚æ ¼å¼æ­£ç¡®ï¼Œä½†æ˜¯ç”±äºå«æœ‰è¯­ä¹‰é”™è¯¯ï¼Œæ— æ³•å“åº”ã€‚ï¼ˆRFC 4918 WebDAVï¼‰ 423 Locked å½“å‰èµ„æºè¢«é”å®šã€‚ï¼ˆRFC 4918 WebDAVï¼‰ 424 Failed Dependency ç”±äºä¹‹å‰çš„æŸä¸ªè¯·æ±‚å‘ç”Ÿçš„é”™è¯¯ï¼Œå¯¼è‡´å½“å‰è¯·æ±‚å¤±è´¥ï¼Œä¾‹å¦‚PROPPATCHã€‚ï¼ˆRFC 4918 WebDAVï¼‰ 425 Unordered Collection åœ¨WebDav Advanced Collectionsè‰æ¡ˆä¸­å®šä¹‰ï¼Œä½†æ˜¯æœªå‡ºç°åœ¨ã€ŠWebDAVé¡ºåºé›†åè®®ã€‹ï¼ˆRFC 3658ï¼‰ä¸­ã€‚ 426 Upgrade Required å®¢æˆ·ç«¯åº”å½“åˆ‡æ¢åˆ°TLS/1.0ã€‚ï¼ˆRFC 2817ï¼‰ 449 Retry With ç”±å¾®è½¯æ‰©å±•ï¼Œä»£è¡¨è¯·æ±‚åº”å½“åœ¨æ‰§è¡Œå®Œé€‚å½“çš„æ“ä½œåè¿›è¡Œé‡è¯•ã€‚ 5ï¸âƒ£âŒâŒ ğŸ”´ğŸ”´ğŸ”´ 5xxæœåŠ¡å™¨é”™è¯¯ è¿™ç±»çŠ¶æ€ç ä»£è¡¨äº†æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­æœ‰é”™è¯¯æˆ–è€…å¼‚å¸¸çŠ¶æ€å‘ç”Ÿï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æœåŠ¡å™¨æ„è¯†åˆ°ä»¥å½“å‰çš„è½¯ç¡¬ä»¶èµ„æºæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™æœåŠ¡å™¨åº”å½“åŒ…å«ä¸€ä¸ªè§£é‡Šå½“å‰é”™è¯¯çŠ¶æ€ä»¥åŠè¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„è¿˜æ˜¯æ°¸ä¹…çš„è§£é‡Šä¿¡æ¯å®ä½“ã€‚æµè§ˆå™¨åº”å½“å‘ç”¨æˆ·å±•ç¤ºä»»ä½•åœ¨å½“å‰å“åº”ä¸­è¢«åŒ…å«çš„å®ä½“ã€‚è¿™äº›çŠ¶æ€ç é€‚ç”¨äºä»»ä½•å“åº”æ–¹æ³•ã€‚ 500 Internal Server Error æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæœªæ›¾é¢„æ–™çš„çŠ¶å†µï¼Œå¯¼è‡´äº†å®ƒæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜éƒ½ä¼šåœ¨æœåŠ¡å™¨çš„ç¨‹åºç å‡ºé”™æ—¶å‡ºç°ã€‚ 501 Not Implemented æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„æŸä¸ªåŠŸèƒ½ã€‚å½“æœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ— æ³•æ”¯æŒå…¶å¯¹ä»»ä½•èµ„æºçš„è¯·æ±‚ã€‚ 502 Bad Gateway ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚ 503 Service Unavailable ç”±äºä¸´æ—¶çš„æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½ï¼ŒæœåŠ¡å™¨å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ã€‚è¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼Œå¹¶ä¸”å°†åœ¨ä¸€æ®µæ—¶é—´ä»¥åæ¢å¤ã€‚å¦‚æœèƒ½å¤Ÿé¢„è®¡å»¶è¿Ÿæ—¶é—´ï¼Œé‚£ä¹ˆå“åº”ä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªRetry-Afterå¤´ç”¨ä»¥æ ‡æ˜è¿™ä¸ªå»¶è¿Ÿæ—¶é—´ã€‚å¦‚æœæ²¡æœ‰ç»™å‡ºè¿™ä¸ªRetry-Afterä¿¡æ¯ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯åº”å½“ä»¥å¤„ç†500å“åº”çš„æ–¹å¼å¤„ç†å®ƒã€‚ 504 Gateway Timeout ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œæœªèƒ½åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆURIæ ‡è¯†å‡ºçš„æœåŠ¡å™¨ï¼Œä¾‹å¦‚HTTPã€FTPã€LDAPï¼‰æˆ–è€…è¾…åŠ©æœåŠ¡å™¨ï¼ˆä¾‹å¦‚DNSï¼‰æ”¶åˆ°å“åº”ã€‚ æ³¨æ„ï¼šæŸäº›ä»£ç†æœåŠ¡å™¨åœ¨DNSæŸ¥è¯¢è¶…æ—¶æ—¶ä¼šè¿”å›400æˆ–è€…500é”™è¯¯ 505 HTTP Version Not Supported æœåŠ¡å™¨ä¸æ”¯æŒï¼Œæˆ–è€…æ‹’ç»æ”¯æŒåœ¨è¯·æ±‚ä¸­ä½¿ç”¨çš„HTTPç‰ˆæœ¬ã€‚è¿™æš—ç¤ºç€æœåŠ¡å™¨ä¸èƒ½æˆ–ä¸æ„¿ä½¿ç”¨ä¸å®¢æˆ·ç«¯ç›¸åŒçš„ç‰ˆæœ¬ã€‚å“åº”ä¸­åº”å½“åŒ…å«ä¸€ä¸ªæè¿°äº†ä¸ºä½•ç‰ˆæœ¬ä¸è¢«æ”¯æŒä»¥åŠæœåŠ¡å™¨æ”¯æŒå“ªäº›åè®®çš„å®ä½“ã€‚ 506 Variant Also Negotiates ç”±ã€Šé€æ˜å†…å®¹åå•†åè®®ã€‹ï¼ˆRFC 2295ï¼‰æ‰©å±•ï¼Œä»£è¡¨æœåŠ¡å™¨å­˜åœ¨å†…éƒ¨é…ç½®é”™è¯¯ï¼šè¢«è¯·æ±‚çš„åå•†å˜å…ƒèµ„æºè¢«é…ç½®ä¸ºåœ¨é€æ˜å†…å®¹åå•†ä¸­ä½¿ç”¨è‡ªå·±ï¼Œå› æ­¤åœ¨ä¸€ä¸ªåå•†å¤„ç†ä¸­ä¸æ˜¯ä¸€ä¸ªåˆé€‚çš„é‡ç‚¹ã€‚ 507 Insufficient Storage æœåŠ¡å™¨æ— æ³•å­˜å‚¨å®Œæˆè¯·æ±‚æ‰€å¿…é¡»çš„å†…å®¹ã€‚è¿™ä¸ªçŠ¶å†µè¢«è®¤ä¸ºæ˜¯ä¸´æ—¶çš„ã€‚WebDAVï¼ˆRFC 4918ï¼‰ 509 Bandwidth Limit Exceeded æœåŠ¡å™¨è¾¾åˆ°å¸¦å®½é™åˆ¶ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå®˜æ–¹çš„çŠ¶æ€ç ï¼Œä½†æ˜¯ä»è¢«å¹¿æ³›ä½¿ç”¨ã€‚ 510 Not Extended è·å–èµ„æºæ‰€éœ€è¦çš„ç­–ç•¥å¹¶æ²¡æœ‰æ²¡æ»¡è¶³ã€‚ Posted by å¾®åš@iOSç¨‹åºçŠ­è¢åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | Creative Commons BY-NC-ND 3.0","link":"/program/ï£¿/http/"},{"title":"iOSé™æ€åº“","text":"å›é¡¾ä¸‹iOSé™æ€åº“ ã€.a å’Œframeworkã€‘ ä¸€ã€ä»€ä¹ˆæ˜¯åº“ï¼Ÿåº“æ˜¯å…±äº«ç¨‹åºä»£ç çš„æ–¹å¼ã€‚ åº“ä»æœ¬è´¨ä¸Šæ¥è¯´æ˜¯ä¸€ç§å¯æ‰§è¡Œä»£ç çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯ä»¥è¢«è½½å…¥å†…å­˜ä¸­æ‰§è¡Œã€‚åº“åˆ†é™æ€åº“å’ŒåŠ¨æ€åº“ä¸¤ç§ã€‚iOSä¸­çš„é™æ€åº“æœ‰ .a å’Œ .frameworkä¸¤ç§å½¢å¼ï¼›åŠ¨æ€åº“æœ‰.dylib å’Œ .framework å½¢å¼ï¼Œåæ¥.dylibåŠ¨æ€åº“åˆè¢«è‹¹æœæ›¿æ¢æˆ.tbdçš„å½¢å¼ã€‚ äºŒã€é™æ€åº“ä¸åŠ¨æ€åº“çš„åŒºåˆ«ï¼Ÿé™æ€åº“ï¼š é“¾æ¥æ—¶å®Œæ•´åœ°æ‹·è´è‡³å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œè¢«å¤šæ¬¡ä½¿ç”¨å°±æœ‰å¤šä»½å†—ä½™æ‹·è´ã€‚ åŠ¨æ€åº“ï¼š é“¾æ¥æ—¶ä¸å¤åˆ¶ï¼Œç¨‹åºè¿è¡Œæ—¶ç”±ç³»ç»ŸåŠ¨æ€åŠ è½½åˆ°å†…å­˜ï¼Œä¾›ç¨‹åºè°ƒç”¨ï¼Œç³»ç»ŸåªåŠ è½½ä¸€æ¬¡ï¼Œå¤šä¸ªç¨‹åºå…±ç”¨ï¼ŒèŠ‚çœå†…å­˜ã€‚[iosæš‚æ—¶åªå…è®¸ä½¿ç”¨ç³»ç»ŸåŠ¨æ€åº“]ï¼› é™æ€åº“å’ŒåŠ¨æ€åº“æ˜¯ç›¸å¯¹ç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸçš„ï¼šé™æ€åº“åœ¨ç¨‹åºç¼–è¯‘æ—¶ä¼šè¢«é“¾æ¥åˆ°ç›®æ ‡ä»£ç ä¸­ï¼Œç¨‹åºè¿è¡Œæ—¶å°†ä¸å†éœ€è¦æ”¹é™æ€åº“ï¼›è€ŒåŠ¨æ€åº“åœ¨ç¨‹åºç¼–è¯‘æ—¶å¹¶ä¸ä¼šè¢«é“¾æ¥åˆ°ç›®æ ‡ä»£ç ä¸­ï¼Œåªæ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ‰è¢«è½½å…¥ï¼Œå› ä¸ºåœ¨ç¨‹åºè¿è¡ŒæœŸé—´è¿˜éœ€è¦åŠ¨æ€åº“çš„å­˜åœ¨ã€‚æ€»ç»“ï¼šåŒä¸€ä¸ªé™æ€åº“åœ¨ä¸åŒç¨‹åºä¸­ä½¿ç”¨æ—¶ï¼Œæ¯ä¸€ä¸ªç¨‹åºä¸­éƒ½å¾—å¯¼å…¥ä¸€æ¬¡ï¼Œæ‰“åŒ…æ—¶ä¹Ÿè¢«æ‰“åŒ…è¿›å»ï¼Œå½¢æˆä¸€ä¸ªç¨‹åºã€‚è€ŒåŠ¨æ€åº“åœ¨ä¸åŒç¨‹åºä¸­ï¼Œæ‰“åŒ…æ—¶å¹¶æ²¡æœ‰è¢«æ‰“åŒ…è¿›å»ï¼Œåªåœ¨ç¨‹åºè¿è¡Œä½¿ç”¨æ—¶ï¼Œæ‰é“¾æ¥è½½å…¥ï¼ˆå¦‚ç³»ç»Ÿçš„æ¡†æ¶å¦‚UIKitã€Foundationç­‰ï¼‰ï¼Œæ‰€ä»¥ç¨‹åºä½“ç§¯ä¼šå°å¾ˆå¤šï¼Œä½†æ˜¯è‹¹æœä¸è®©ä½¿ç”¨è‡ªå·±çš„åŠ¨æ€åº“ï¼Œå¦åˆ™å®¡æ ¸å°±æ— æ³•é€šè¿‡ã€‚ ä¸‰ã€iOSé‡Œé™æ€åº“å½¢å¼ï¼Ÿ.aå’Œ.framework å››ã€iOSé‡ŒåŠ¨æ€åº“å½¢å¼ï¼Ÿ.dylibå’Œ.framework äº”ã€frameworkä¸ºä»€ä¹ˆæ—¢æ˜¯é™æ€åº“åˆæ˜¯åŠ¨æ€åº“ï¼Ÿç³»ç»Ÿçš„.frameworkæ˜¯åŠ¨æ€åº“ï¼Œæˆ‘ä»¬è‡ªå·±å»ºç«‹çš„.frameworkæ˜¯é™æ€åº“ã€‚ å…­ã€aä¸.frameworkæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ.aæ˜¯ä¸€ä¸ªçº¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ.frameworkä¸­é™¤äº†æœ‰äºŒè¿›åˆ¶æ–‡ä»¶ä¹‹å¤–è¿˜æœ‰èµ„æºæ–‡ä»¶ã€‚ .aæ–‡ä»¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œè‡³å°‘è¦æœ‰.hæ–‡ä»¶é…åˆï¼Œ.frameworkæ–‡ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ .a + .h + sourceFile = .frameworkã€‚ å»ºè®®ç”¨.framework. ä¸ƒã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨é™æ€åº“ï¼Ÿæ–¹ä¾¿å…±äº«ä»£ç ï¼Œä¾¿äºåˆç†ä½¿ç”¨ã€‚ å®ç°iOSç¨‹åºçš„æ¨¡å—åŒ–ã€‚å¯ä»¥æŠŠå›ºå®šçš„ä¸šåŠ¡æ¨¡å—åŒ–æˆé™æ€åº“ã€‚ å’Œåˆ«äººåˆ†äº«ä½ çš„ä»£ç åº“ï¼Œä½†ä¸æƒ³è®©åˆ«äººçœ‹åˆ°ä½ ä»£ç çš„å®ç°ã€‚ å¼€å‘ç¬¬ä¸‰æ–¹sdkçš„éœ€è¦ã€‚ å…«ã€åˆ¶ä½œé™æ€åº“æ—¶çš„å‡ ç‚¹æ³¨æ„ï¼š1æ³¨æ„ç†è§£ï¼šæ— è®ºæ˜¯.aé™æ€åº“è¿˜.frameworké™æ€åº“ï¼Œæˆ‘ä»¬éœ€è¦çš„éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶+.h+å…¶å®ƒèµ„æºæ–‡ä»¶çš„å½¢å¼ï¼Œä¸åŒçš„æ˜¯ï¼Œ.aæœ¬èº«å°±æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±é…ä¸Š.hå’Œå…¶å®ƒæ–‡ä»¶æ‰èƒ½ä½¿ç”¨ï¼Œè€Œ.frameworkæœ¬èº«å·²ç»åŒ…å«äº†.hå’Œå…¶å®ƒæ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ 2å›¾ç‰‡èµ„æºçš„å¤„ç†ï¼šä¸¤ç§é™æ€åº“ï¼Œä¸€èˆ¬éƒ½æ˜¯æŠŠå›¾ç‰‡æ–‡ä»¶å•ç‹¬çš„æ”¾åœ¨ä¸€ä¸ª.bundleæ–‡ä»¶ä¸­ï¼Œä¸€èˆ¬.bundleçš„åå­—å’Œ.aæˆ–.frameworkçš„åå­—ç›¸åŒã€‚.bundleæ–‡ä»¶å¾ˆå¥½å¼„ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒæŠŠå®ƒæ”¹åä¸º.bundleå°±å¯ä»¥äº†ï¼Œå³é”®ï¼Œæ˜¾ç¤ºåŒ…å†…å®¹å¯ä»¥å‘å…¶ä¸­æ·»åŠ å›¾ç‰‡èµ„æºã€‚ 3categoryæ˜¯æˆ‘ä»¬å®é™…å¼€å‘é¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°çš„ï¼ŒæŠŠcategoryæ‰“æˆé™æ€åº“æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨ç”¨è¿™ä¸ªé™æ€åº“çš„å·¥ç¨‹ä¸­ï¼Œè°ƒç”¨categoryä¸­çš„æ–¹æ³•æ—¶ä¼šæœ‰æ‰¾ä¸åˆ°è¯¥æ–¹æ³•çš„è¿è¡Œæ—¶é”™è¯¯ï¼ˆselector not recognizedï¼‰ï¼Œè§£å†³åŠæ³•æ˜¯ï¼šåœ¨ä½¿ç”¨é™æ€åº“çš„å·¥ç¨‹ä¸­é…ç½®other linker flagsçš„å€¼ä¸º-ObjCã€‚ 4å¦‚æœä¸€ä¸ªé™æ€åº“å¾ˆå¤æ‚ï¼Œéœ€è¦æš´éœ²çš„.hæ¯”è¾ƒå¤šçš„è¯ï¼Œå°±å¯ä»¥åœ¨é™æ€åº“çš„å†…éƒ¨åˆ›å»ºä¸€ä¸ª.hæ–‡ä»¶ï¼ˆä¸€èˆ¬è¿™ä¸ª.hæ–‡ä»¶çš„åå­—å’Œé™æ€åº“çš„åå­—ç›¸åŒï¼‰ï¼Œç„¶åæŠŠæ‰€æœ‰éœ€è¦æš´éœ²å‡ºæ¥çš„.hæ–‡ä»¶éƒ½é›†ä¸­æ”¾åœ¨è¿™ä¸ª.hæ–‡ä»¶ä¸­ï¼Œè€Œé‚£äº›åŸæœ¬éœ€è¦æš´éœ²çš„.héƒ½ä¸éœ€è¦å†æš´éœ²äº†ï¼Œåªéœ€è¦æŠŠ.hæš´éœ²å‡ºæ¥å°±å¯ä»¥äº†ã€‚ ä¹ã€åˆ›å»º.aé™æ€åº“ç¬¬ä¸€æ­¥ï¼Œæ–°å»ºå·¥ç¨‹ã€‚ä¸€èˆ¬ä½¿ç”¨å·¥ç¨‹åå°±ä½¿ç”¨åº“çš„åç§°ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œç”¨LIBæ¥åˆ›å»ºé™æ€åº“ï¼Œæˆ‘çš„å·¥ç¨‹åå°±å–åä¸ºLIBï¼Œåˆ›å»ºçš„.aé™æ€åº“å°±æ˜¯LIB.aã€‚ ç¬¬äºŒæ­¥ï¼Œåˆ é™¤.mæ–‡ä»¶ï¼Œä¿ç•™.hæ–‡ä»¶ï¼Œ ä¸€èˆ¬é™æ€åº“éƒ½æœ‰ä¸€ä¸ªæ€»çš„.hæ–‡ä»¶ï¼Œæ–¹ä¾¿å¤–éƒ¨å¯¼å…¥å¤´æ–‡ä»¶ã€‚ç„¶åå¯¼å…¥éœ€è¦æ‰“åŒ…çš„æºæ–‡ä»¶ã€‚ ç¬¬ä¸‰æ­¥ï¼Œå…ˆç”¨çœŸæœºï¼Œç¼–è¯‘ä¸€æ¬¡ï¼Œå†ç”¨æ¨¡æ‹Ÿå™¨ç¼–è¯‘ä¸€æ¬¡ã€‚å°±å¯ä»¥ç”Ÿæˆ.aæ–‡ä»¶ï¼ˆå¿…é¡»å…ˆç”¨çœŸæœºè¦ä¸ç„¶ï¼Œä¸èƒ½ç”Ÿæˆï¼‰ã€‚ ç¬¬å››æ­¥ï¼ŒXcodeç”Ÿæˆçš„.aæ–‡ä»¶é»˜è®¤æ²¡æœ‰å¯¼å‡º.hæ–‡ä»¶ã€‚éœ€è¦è‡ªå·±æ·»åŠ ã€‚ ç¬¬äº”æ­¥ï¼Œå¯¼å‡ºProductsé™æ€åº“çš„é…ç½®ï¼ˆå…¶å®ä¸ç”¨è®¾ç½®æ­¤æ­¥éª¤ï¼Œå¦‚æœçœŸæœºç¼–è¯‘çš„è¯ï¼Œç”Ÿæˆå¯¼å‡ºçš„æ—¶å€™ç³»ç»Ÿé»˜è®¤ä¼šå˜æˆReleasse[ä½†æ˜¯æ¨¡æ‹Ÿå™¨ä¸ä¼šï¼ˆå¦‚æœä¸æ”¹è¿™é‡Œ å¾—éœ€è¦æŠŠDebugè®¾ç½®ä¸ºNOï¼‰]ï¼‰ æ³¨æ„ï¼šå¦‚æœç¬¬äº”æ­¥ä¸­ï¼Œä¸å°†Build Configurationæ”¹ä¸ºRelease,åˆ™æ‰“åŒ…å‡ºæ¥çš„é™æ€åº“ä¼šå­˜äºã€Debug-iphoneosã€‘å’Œã€Debug-iphonesimulatorã€‘ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹ã€‚æˆ‘ä»¬ä¸€èˆ¬éƒ½ä½¿ç”¨Releaseæ¨¡å¼ï¼Œå› ä¸ºç¨‹åºæœ€ç»ˆå‘å¸ƒä¹‹åæ˜¯Releaseç‰ˆçš„ï¼Œæ‰€ä»¥é™æ€åº“ä¹Ÿæ˜¯åœ¨Releaseæ¨¡å¼ä¸‹ä½¿ç”¨ã€‚ ç¬¬å…­æ­¥ï¼Œåˆæˆæ¨¡æ‹Ÿå™¨çš„æ¶æ„ã€é»˜è®¤ï¼šæ¨¡æ‹Ÿå™¨ç¼–è¯‘åªä¼šç”Ÿæˆå¯¹åº”çš„1ç§æ¶æ„ï¼ŒçœŸæœºç¼–è¯‘ä¼šåˆæˆä¸¤ç§æ¶æ„ã€‘ å¦‚æœç¬¬å…­æ­¥è¿™é‡Œï¼Œè®¾ç½®ä¸ºYESï¼Œé‚£ä¹ˆç¼–è¯‘å‡ºæ¥çš„.aé™æ€åº“å°±åªåŒ…å«å½“å‰è®¾å¤‡çš„æ¶æ„ã€‚ ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœæˆ‘ä»¬é€‰æ‹©iPhone 5æ¨¡æ‹Ÿå™¨ã€Command+Bã€‘ç¼–è¯‘ï¼Œåˆ™ç¼–è¯‘å‡ºæ¥çš„.aé™æ€åº“åªèƒ½ç”¨iPhone4s5æ¨¡æ‹Ÿå™¨è·‘ç¨‹åºï¼Œ ç”¨iPhone5s6plusï¼Œåˆ™ä¼šæŠ¥æ‰¾ä¸åˆ°x86_64çš„libFMDBåº“ã€‚ è®¾ç½®ä¸º NO ä¹‹åï¼Œã€Command+Bã€‘ä¸ç®¡é€‰æ‹©å“ªä¸ªã€æ¨¡æ‹Ÿå™¨ã€‘ï¼Œåˆ™éƒ½ä¼šæŠŠã€386 : 32ä½æ¶æ„ 4S ~ 5ã€‘ã€x86_64 : 64ä½æ¶æ„ 5S ~ ç°åœ¨çš„æœºå‹ã€‘çš„æ¶æ„éƒ½æ‰“åŒ…åˆå¹¶ã€‚ ã€æ³¨ã€‘ã€çœŸæœºã€‘ä¸è®¾ç½® [Build Active Architecture Only] ä¹Ÿé»˜è®¤ä¼šè‡ªåŠ¨åˆå¹¶çš„armv7 å’Œamr64æ¶æ„ ã€‚ä½†æ˜¯ armv7sæ¶æ„è¢«è‹¹æœæ”¾å¼ƒäº†ï¼ŒçœŸæœºè¦æƒ³åˆå¹¶armv7sçš„è¯éœ€è¦è¿›è¡Œå¦‚ä¸‹æ“ä½œå†ç¼–è¯‘ã€‚ï¼ˆå…¶å®æ²¡å¿…è¦è®¾ç½®è¿™ä¸ªï¼‰ ç¬¬ä¸ƒæ­¥ï¼Œåˆå¹¶æ¶æ„ã€çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ã€‘ çœŸæœºå’Œæ¨¡æ‹Ÿå™¨åˆå¹¶: lipo -create é™æ€åº“1.aï¼ˆè·¯å¾„ï¼‰ é™æ€åº“2.aï¼ˆè·¯å¾„ï¼‰ -output æ–°é™æ€åº“.a ç¬¬å…«æ­¥ï¼Œèµ„æºåŒ…çš„é—®é¢˜ é™æ€åº“çš„èµ„æº, éƒ½åº”è¯¥æ”¾åˆ°åç¼€ä¸º.bundleçš„æ–‡ä»¶å¤¹ä¸­ â€“&gt; é¿å…æ–‡ä»¶ä¸æœ¬åœ°æ–‡ä»¶é‡åè¢«è¦†ç›–, å¯¼è‡´åŠ è½½èµ„æºæ–‡ä»¶å‡ºé”™ã€æ³¨ï¼šè¦åŠ è½½bundelè·¯å¾„ã€‘ é™æ€åº“æ‰“åŒ…æ—¶, å¹¶ä¸ä¼šæ‰“åŒ…èµ„æºæ–‡ä»¶ â€“&gt; éœ€è¦æ‰‹åŠ¨æ‹–å‡ºå» ä¸€. ç»å…¸æŠ¥é”™: æ‰¾ä¸åˆ°ç¬¦å·åœ¨XXæ¶æ„ä¸Š Undefined symbols for architecture x86_64(armv7/armv7s/amr64/i386) äºŒ. æ¶æ„çš„åˆ†ç±» 1ã€æ¨¡æ‹Ÿå™¨æ¶æ„: 2ç§ i386 : 32ä½æ¶æ„ 4S ~ 5 x86_64 : 64ä½æ¶æ„ 5S ~ ç°åœ¨çš„æœºå‹ 2ã€çœŸæœºæ¶æ„: 3ç§ armv7 : 32ä½æ¶æ„ 3GS ~ 4S armv7s: ç‰¹æ®Šçš„æ¶æ„ 5 ~ 5C (æ­¤æ¶æ„æœ‰é—®é¢˜, æœ‰çš„ç¨‹åºå˜å¾—æ›´å¿«, æœ‰çš„ç¨‹åºå˜å¾—æ›´æ…¢) amr64 : 64ä½æ¶æ„ 5S ~ ç°åœ¨çš„æœºå‹ 64ä½/32ä½: å†…å­˜å¯»å€ä¸åŒ ä¸‰. å¦‚ä½•æŸ¥çœ‹é™æ€åº“æ¶æ„ æ‰¾åˆ°Productsæ–‡ä»¶å¤¹, å¦‚æœ.aæ–‡ä»¶æ˜¯é»‘è‰², å³é”®æ‰“å¼€ åˆ° Productsæ–‡ä»¶å¤¹ ç»ˆç«¯ä¸­ lipo -info Generic iOS Deviceç¼–è¯‘å‡ºæ¥çš„OSå¯ç”¨, æœ‰2ç§æ¶æ„:armv7/ arm64 ï¼ˆä¸åŒ…å«armv7s: ç‰¹æ®Šçš„æ¶æ„ï¼‰ iPhone6Sæ¨¡æ‹Ÿå™¨ç¼–è¯‘å‡ºæ¥çš„: x86_64 iPhone4Sæ¨¡æ‹Ÿå™¨ç¼–è¯‘å‡ºæ¥çš„: i386 (ä¸è®¾ç½®Build Active Architecture Onlyçš„æƒ…å†µä¸‹çœŸæœºç¼–è¯‘2ç§æ¶æ„, æ¨¡æ‹Ÿå™¨ç¼–è¯‘:å¯¹åº”çš„1ç§æ¶æ„) å››. åˆæˆæ¶æ„ ä¸€èˆ¬æ¥è¯´, åªéœ€è¦å‰ä¸¤æ­¥å³å¯ æ¨¡æ‹Ÿå™¨æ¶æ„çš„åˆæˆ: Target â€“&gt; Build Settings â€“&gt; Build Active Architecture Only(æ˜¯å¦åªç¼–è¯‘å½“å‰æ¶æ„) â€“&gt; Debug æ”¹ä¸ºNO(æ”¹ä¸ºNO, æ¨¡æ‹Ÿå™¨å°±å¯ä»¥ç›´æ¥åˆæˆ2ç§æ¶æ„) çœŸæœºå’Œæ¨¡æ‹Ÿå™¨åˆå¹¶: lipo -create é™æ€åº“1.a é™æ€åº“2.a -output æ–°é™æ€åº“.a armv7sè¿™ä¸ªæ¶æ„, åœ¨2014å¹´10æœˆä»½çš„xcodeç‰ˆæœ¬æ›´æ–°ä¸­, å–æ¶ˆäº†é»˜è®¤å¯¼å‡ºæ­¤æ¶æ„. å¯ä»¥ä¸ç”¨æ”¯æŒæ­¤æ¶æ„. å¦‚æœè¦æ”¯æŒ, éœ€è¦æ‰‹åŠ¨æ·»åŠ 3ä¸ªæ¶æ„. äº”. Debugå’ŒReleaseç‰ˆæœ¬ ä¸€èˆ¬æ¥è¯´, æˆ‘ä»¬åº”è¯¥å‘å¸ƒçš„æ˜¯releaseç‰ˆæœ¬. debug:è°ƒè¯•ç‰ˆæœ¬, ç³»ç»Ÿæœ¬èº«ä¹Ÿä¼šæœ‰ä¸€äº›è°ƒè¯•ä»£ç . æ­¤ç‰ˆæœ¬ä½“ç§¯ä¼šç¨å¤§, è¿è¡Œä¼šç¨æ…¢ release: å‘å¸ƒç‰ˆæœ¬, ç³»ç»Ÿä¼šå»é™¤è°ƒè¯•ä»£ç , ä½“ç§¯å˜å°, è¿è¡Œé€Ÿåº¦å˜å¿«. å¯¹ç”¨æˆ·æ¥è¯´æ²¡æœ‰æ˜æ˜¾çš„æ„Ÿè§‰ å…­. åˆ°åº•è¦ä¸è¦åˆæˆå¤šä¸ªæ¶æ„ çœŸæœºå’Œæ¨¡æ‹Ÿå™¨åˆæˆçš„å¥½å¤„: è°ƒè¯•ä¼šéå¸¸æ–¹ä¾¿, ç¼ºç‚¹æ˜¯ä½“ç§¯ä¼šå˜å¤§(ä¸€ç§æ¶æ„å°±å ç”¨ä¸€éƒ¨åˆ†ä½“ç§¯). çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ä¸åˆæˆçš„å¥½å¤„:ä½“ç§¯å°, ç¼ºç‚¹æ˜¯è°ƒè¯•ç¨æ˜¾éº»çƒ¦. ä¸ƒ. èµ„æºåŒ…çš„é—®é¢˜ é™æ€åº“çš„èµ„æº, éƒ½åº”è¯¥æ”¾åˆ°åç¼€ä¸º.bundleçš„æ–‡ä»¶å¤¹ä¸­ â€“&gt; é¿å…æ–‡ä»¶é‡åè¢«è¦†ç›–, å¯¼è‡´åŠ è½½èµ„æºæ–‡ä»¶å‡ºé”™ é™æ€åº“æ‰“åŒ…æ—¶, å¹¶ä¸ä¼šæ‰“åŒ…èµ„æºæ–‡ä»¶ â€“&gt; éœ€è¦æ‰‹åŠ¨æ‹–å‡ºå» åã€åˆ›å»ºframeworké™æ€åº“ç¬¬ä¸€æ­¥ã€æ–°å»ºå·¥ç¨‹ã€‚ä¸€èˆ¬ä½¿ç”¨å·¥ç¨‹åå°±ä½¿ç”¨åº“çš„åç§° ç¬¬äºŒæ­¥ã€å¯¼å…¥éœ€è¦æ‰“åŒ…çš„èµ„æºæ–‡ä»¶ï¼ŒåŒæ—¶æŠŠèµ„æºæ–‡ä»¶éœ€è¦å¤–ç•Œè®¿é—®çš„.hæ–‡ä»¶å¯¼å…¥åˆ°ç³»ç»Ÿæ¨èçš„.hä¸­ ç¬¬ä¸‰æ­¥ã€çœŸæœºï¼Œæ¨¡æ‹Ÿå™¨ç¼–è¯‘ä¸€ä¸‹ã€‚å¯èƒ½ä¼šéœ€è¦è¾“å…¥AppleID ã€‚å¯¼å‡ºçš„æ–‡ä»¶æ²¡æœ‰åŒ…å«.h ç¬¬å››æ­¥ã€å¯¼å‡º.h ç¬¬äº”æ­¥ã€å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ æ²¡åˆå¹¶æ¨¡æ‹Ÿå™¨æ¶æ„ä¹‹å‰åŒ…å«å‡ ä¸ªåŒ.aï¼ˆå¯è·³è¿‡æ­¤æ­¥ï¼‰(çœŸæœºåŒ…å«ä¸¤ä¸ªï¼Œæ¨¡æ‹Ÿå™¨åŒ…å«ä¸€ä¸ª) ç¬¬å…­æ­¥ã€åˆæˆæ¶æ„ã€åŒ.aäº”å…­æ­¥è¯¦ç»†çœ‹ä¸Šè¾¹ã€‘ ç¬¬ä¸ƒæ­¥ï¼Œåˆå¹¶æ¶æ„ã€çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ã€‘ã€æ³¨æ„ åˆå¹¶ä¹‹åçš„åŠ¨æ€/é™æ€åº“è¦ä¸åŸæ¥çš„åç§°ä¸€è‡´ã€‚ä¸ç„¶ç”¨çš„æ—¶å€™ç¼–è¯‘æŠ¥é”™ã€‘ ç¬¬å…«æ­¥ã€åŠ¨æ€åº“å˜é™æ€åº“ã€é»˜è®¤æ˜¯åŠ¨æ€ã€‘å¥½å¤„æ˜¯å°†æ¥ä½¿ç”¨æ—¶ä¸éœ€è¦è®¾ç½®æ·»åŠ åŠ¨æ€åº“ï¼ˆä¹Ÿå°±æ˜¯ä¸‹è¾¹çš„æ–¹æ³•ï¼‰ æœ€åæ­¥ã€ Frameworkåˆ¶ä½œå, é»˜è®¤æ˜¯åŠ¨æ€åº“. ä½¿ç”¨æ—¶, éœ€è¦è®¾ç½®ä¸€ä¸‹: Tarteg â€“&gt; General â€“&gt; Embedded Binaries â€“&gt; éœ€è¦æ·»åŠ å¯¹åº”çš„åŠ¨æ€åº“ ã€æ³¨æ„ è¦æ˜¯åˆ¶ä½œçš„æ—¶å€™æ›´æ”¹ä¸ºé™æ€åº“çš„è¯ï¼Œå°±ä¸ç”¨æ‰§è¡Œæ­¤æ–¹æ³•ã€‘ è°¢è°¢ã€‚ åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/program/apple/framework1/"},{"title":"iOS Background Tasks","text":"ä¸‰ç§æ–¹å¼ä½¿å¾—iOSç¨‹åºå³ä½¿åœ¨å…³é—­æˆ–å´©æºƒçš„æƒ…å†µä¸‹ä¹Ÿèƒ½å¤Ÿåœ¨åå°æŒç»­è¿›è¡Œä¸€äº›ä»»åŠ¡ï¼Œæ¯”å¦‚æ›´æ–°ç¨‹åºç•Œé¢å¿«ç…§ï¼Œä¸‹è½½æ–‡ä»¶ç­‰ã€‚è¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯Background Fetchï¼ŒRemote Notificationå’ŒNSURLSessionçš„backgroundSessionConfiguration Background Fetchå¼€å¯é¦–å…ˆåœ¨info plistæ–‡ä»¶ä¸­å¼€å¯UIBackgroundModesçš„Background fetchã€‚æˆ–è€…æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸ªå€¼1234&lt;key&gt;UIBackgroundModes&lt;/key&gt;&lt;array&gt; &lt;string&gt;fetch&lt;/string&gt;&lt;/array&gt; iOSé»˜è®¤ä¸è¿›è¡Œbackground fetchï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ªæ—¶é—´çš„é—´éš” 123456- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ //UIApplicationBackgroundFetchIntervalMinimumè¡¨ç¤ºå°½å¯èƒ½é¢‘ç¹å»è·å–ï¼Œå¦‚æœéœ€è¦æŒ‡å®šè‡³å°‘å¤šå°‘æ—¶é—´æ›´æ–°ä¸€æ¬¡å°±éœ€è¦ç»™å®šä¸€ä¸ªæ—¶é—´å€¼ [application setMinimumBackgroundFetchInterval:UIApplicationBackgroundFetchIntervalMinimum]; return YES;} æœ€ååœ¨App Delegateé‡Œå®ç°ä¸‹é¢çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åªèƒ½åœ¨30ç§’å†…å®Œæˆã€‚ 123456789101112131415161718192021222324252627- (void) application:(UIApplication *)applicationperformFetchWithCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler{ NSURLSessionConfiguration *sessionConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration]; NSURLSession *session = [NSURLSession sessionWithConfiguration:sessionConfiguration]; NSURL *url = [[NSURL alloc] initWithString:@&quot;https://yourserver.com/data.json&quot;]; NSURLSessionDataTask *task = [session dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) { if (error) { completionHandler(UIBackgroundFetchResultFailed); return; } // è§£æå“åº”/æ•°æ®ä»¥å†³å®šæ–°å†…å®¹æ˜¯å¦å¯ç”¨ BOOL hasNewData = ... if (hasNewData) { completionHandler(UIBackgroundFetchResultNewData); } else { completionHandler(UIBackgroundFetchResultNoData); } }]; // å¼€å§‹ä»»åŠ¡ [task resume];} æµ‹è¯• é€šè¿‡æŸ¥çœ‹UIApplicationçš„applicationState123456- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ NSLog(@&quot;Launched in background %d&quot;, UIApplicationStateBackground == application.applicationState); return YES;} Remote Notificationåœ¨æ™®é€šçš„è¿œç¨‹é€šçŸ¥é‡Œå¸¦ä¸Šcontent-availableæ ‡å¿—å°±å¯ä»¥åœ¨é€šçŸ¥ç”¨æˆ·åŒæ—¶åœ¨åå°è¿›è¡Œæ›´æ–°ã€‚é€šçŸ¥ç»“æ„å¦‚ä¸‹ 123456{ &quot;aps&quot; : { &quot;content-available&quot; : 1 }, &quot;content-id&quot; : 42} æ¥æ”¶ä¸€æ¡å¸¦æœ‰content-availableçš„é€šçŸ¥ä¼šè°ƒç”¨ä¸‹é¢çš„æ–¹æ³• 12345678910- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler{ NSLog(@&quot;Remote Notification userInfo is %@&quot;, userInfo); NSNumber *contentID = userInfo[@&quot;content-id&quot;]; // æ ¹æ® content ID è¿›è¡Œæ“ä½œ completionHandler(UIBackgroundFetchResultNewData);} åˆ©ç”¨NSURLSessionè¿›è¡Œbackground transfer taskä½¿ç”¨[NSURLSessionConfiguration backgroundSessionConfiguration]åˆ›å»ºä¸€ä¸ªåå°ä»»åŠ¡ï¼Œå½“åº”ç”¨é€€å‡ºåï¼Œå´©æºƒæˆ–è¿›ç¨‹è¢«å…³æ‰éƒ½è¿˜æ˜¯ä¼šè¿è¡Œã€‚ èŒƒä¾‹ï¼Œå…ˆå¤„ç†ä¸€æ¡è¿œç¨‹é€šçŸ¥ï¼Œå¹¶å°†NSURLSessionDownloadTaskæ·»åŠ åˆ°åå°ä¼ è¾“æœåŠ¡é˜Ÿåˆ—ã€‚ 123456789101112131415161718192021222324252627282930313233- (NSURLSession *)backgroundURLSession{ static NSURLSession *session = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ NSString *identifier = @&quot;io.objc.backgroundTransferExample&quot;; NSURLSessionConfiguration* sessionConfig = [NSURLSessionConfiguration backgroundSessionConfiguration:identifier]; session = [NSURLSession sessionWithConfiguration:sessionConfig delegate:self delegateQueue:[NSOperationQueue mainQueue]]; }); return session;}- (void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler{ NSLog(@&quot;Received remote notification with userInfo %@&quot;, userInfo); NSNumber *contentID = userInfo[@&quot;content-id&quot;]; NSString *downloadURLString = [NSString stringWithFormat:@&quot;https://yourserver.com/downloads/%d.mp3&quot;, [contentID intValue]]; NSURL* downloadURL = [NSURL URLWithString:downloadURLString]; NSURLRequest *request = [NSURLRequest requestWithURL:downloadURL]; NSURLSessionDownloadTask *task = [[self backgroundURLSession] downloadTaskWithRequest:request]; task.taskDescription = [NSString stringWithFormat:@&quot;Podcast Episode %d&quot;, [contentID intValue]]; //æ‰§è¡Œresumeä¿è¯å¼€å§‹äº†ä»»åŠ¡ [task resume]; completionHandler(UIBackgroundFetchResultNewData);} ä¸‹è½½å®Œæˆåè°ƒç”¨NSURLSessionDownloadDelegateçš„å§”æ‰˜æ–¹æ³•ï¼Œè¿™äº›å§”æ‰˜æ–¹æ³•å…¨éƒ¨æ˜¯å¿…é¡»å®ç°çš„ã€‚äº†è§£æ‰€æœ‰ç±»å‹session taskçš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/library/ios/documentation/cocoa/Conceptual/URLLoadingSystem/NSURLSessionConcepts/NSURLSessionConcepts.html#//apple_ref/doc/uid/10000165i-CH2-SW42 123456789101112131415161718192021222324252627#Pragma Mark - NSURLSessionDownloadDelegate- (void) URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didFinishDownloadingToURL:(NSURL *)location{ NSLog(@&quot;downloadTask:%@ didFinishDownloadingToURL:%@&quot;, downloadTask.taskDescription, location); // å¿…é¡»ç”¨ NSFileManager å°†æ–‡ä»¶å¤åˆ¶åˆ°åº”ç”¨çš„å­˜å‚¨ä¸­ï¼Œå› ä¸ºä¸´æ—¶æ–‡ä»¶åœ¨æ–¹æ³•è¿”å›åä¼šè¢«åˆ é™¤ // ... // é€šçŸ¥ UI åˆ·æ–°}- (void) URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTaskdidResumeAtOffset:(int64_t)fileOffset expectedTotalBytes:(int64_t)expectedTotalBytes{}- (void) URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite{} åå°çš„ä»»åŠ¡å®Œæˆåå¦‚æœåº”ç”¨æ²¡æœ‰åœ¨å‰å°è¿è¡Œï¼Œéœ€è¦å®ç°UIApplicationçš„ä¸¤ä¸ªdelegateè®©ç³»ç»Ÿå”¤é†’åº”ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void) application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier completionHandler:(void (^)())completionHandler{ // ä½ å¿…é¡»é‡æ–°å»ºç«‹ä¸€ä¸ªåå° seesiong çš„å‚ç…§ // å¦åˆ™ NSURLSessionDownloadDelegate å’Œ NSURLSessionDelegate æ–¹æ³•ä¼šå› ä¸º // æ²¡æœ‰ å¯¹ session çš„ delegate è®¾å®šè€Œä¸ä¼šè¢«è°ƒç”¨ã€‚å‚è§ä¸Šé¢çš„ backgroundURLSession NSURLSession *backgroundSession = [self backgroundURLSession]; NSLog(@&quot;Rejoining session with identifier %@ %@&quot;, identifier, backgroundSession); // ä¿å­˜ completion handler ä»¥åœ¨å¤„ç† session äº‹ä»¶åæ›´æ–° UI [self addCompletionHandler:completionHandler forSession:identifier];}- (void)URLSessionDidFinishEventsForBackgroundURLSession:(NSURLSession *)session{ NSLog(@&quot;Background URL session %@ finished events.\\n&quot;, session); if (session.configuration.identifier) { // è°ƒç”¨åœ¨ -application:handleEventsForBackgroundURLSession: ä¸­ä¿å­˜çš„ handler [self callCompletionHandlerForSession:session.configuration.identifier]; }}- (void)addCompletionHandler:(CompletionHandlerType)handler forSession:(NSString *)identifier{ if ([self.completionHandlerDictionary objectForKey:identifier]) { NSLog(@&quot;Error: Got multiple handlers for a single session identifier. This should not happen.\\n&quot;); } [self.completionHandlerDictionary setObject:handler forKey:identifier];}- (void)callCompletionHandlerForSession: (NSString *)identifier{ CompletionHandlerType handler = [self.completionHandlerDictionary objectForKey: identifier]; if (handler) { [self.completionHandlerDictionary removeObjectForKey: identifier]; NSLog(@&quot;Calling completion handler for session %@&quot;, identifier); handler(); }} ming1016","link":"/program/ï£¿/ios-background-tasks/"},{"title":"GPUå¤„ç†å›¾åƒ","text":"Shaderç€è‰²å™¨Shaderå‡ºç°åœ¨OpenGL ES 2.0ä¸­ï¼Œå…è®¸åˆ›å»ºè‡ªå·±çš„Shaderã€‚å¿…é¡»åŒæ—¶åˆ›å»ºä¸¤ä¸ªShaderï¼Œåˆ†åˆ«æ˜¯Vertex shaderå’ŒFragment shader. Shaderå·¥å…·Shaderä¼šæœ‰å¾ˆå¤šå‘ï¼Œä¸è¿‡ä¸€äº›å·¥å…·èƒ½å¤Ÿå¸®åŠ©ä½ è·³è¿‡è¿™äº›å‘ GPUImageï¼šhttps://github.com/BradLarson/GPUImage ShaderToyï¼šhttps://www.shadertoy.com/ Shaderificï¼šhttps://www.shaderific.com/ Quartz Composerï¼šå®˜æ–¹å·¥å…· Shaderä½¿ç”¨èŒƒä¾‹Vertex shader12345678attribute vec4 position;attribute vec4 inputTextureCoordinateï¼›varying vec2 textureCoordinate;void main(){ gl_position = position; textureCoordinate = inputTextureCoordinate.xy;} Fragment shaderç›´é€šæ»¤é•œ 123456varying highp vec2 textureCoordinate; //highpå±æ€§è´Ÿè´£å˜é‡ç²¾åº¦ï¼Œè¿™ä¸ªè¢«åŠ å…¥å¯ä»¥æé«˜æ•ˆç‡uniform sampler2D inputImageTexture; //æ¥æ”¶ä¸€ä¸ªå›¾ç‰‡çš„å¼•ç”¨ï¼Œå½“åš2Dçš„çº¹ç†ï¼Œè¿™ä¸ªæ•°æ®ç±»å‹å°±æ˜¯smpler2Dã€‚void main(){ gl_FragColor = texture2D(inputImageTexture, textureCoordinate); //textureæ˜¯GLSLï¼ˆç€è‰²è¯­è¨€ï¼‰ç‰¹æœ‰çš„æ–¹æ³•} GLSLç€è‰²è¯­è¨€GLSLçš„å®˜æ–¹å¿«é€Ÿå…¥é—¨æŒ‡å¯¼ OpenGL ESï¼šhttps://www.khronos.org/opengles/sdk/docs/reference_cards/OpenGL-ES-2_0-Reference-card.pdf OpenGLï¼šhttps://www.khronos.org/files/opengl-quick-reference-card.pdf å˜é‡èµ‹å€¼ä¸‰ä¸ªå¯ä»¥èµ‹å€¼ç»™æˆ‘ä»¬çš„å˜é‡çš„æ ‡ç­¾ Uniformsï¼šåœ¨æ¸²æŸ“å¾ªç¯é‡Œä½œä¸ºä¸å˜çš„è¾“å…¥å€¼ Attributesï¼šéšé¡¶ç‚¹ä½ç½®ä¸åŒä¼šå˜çš„è¾“å…¥å€¼ Varyingsï¼šç”¨æ¥åœ¨Vertex shaderå’ŒFragment shaderä¹‹é—´ä¼ é€’ä¿¡æ¯çš„ï¼Œæ¯”å¦‚åœ¨Vertex shaderä¸­å†™å…¥varyingå€¼ï¼Œç„¶åå°±å¯ä»¥åœ¨Fragment shaderä¸­è¯»å–å’Œå¤„ç† å‘é‡æœ‰å¾ˆå¤šç§å‘é‡ï¼Œä½†æ˜¯æœ‰ä¸‰ç§ä¼šç»å¸¸çœ‹åˆ° vec2ï¼šä¸¤ä¸ªæµ®ç‚¹æ•°ï¼Œé€‚åˆåœ¨Fragment shaderä¸­ä¿å­˜Xå’ŒYåæ ‡çš„æƒ…å†µ vec3ï¼šä¸‰ä¸ªæµ®ç‚¹æ•° vec4ï¼šå››ä¸ªæµ®ç‚¹æ•°ï¼Œåœ¨å›¾åƒå¤„ç†ä¸­æŒç»­è¿½è¸ªæ¯ä¸ªåƒç´ çš„R,G,V,Aè¿™å››ä¸ªå€¼ã€‚ çŸ©é˜µæ˜¯æµ®ç‚¹æ•°ç»„çš„æ•°ç»„ã€‚ä¸‰ä¸ªç»å¸¸å¤„ç†çš„çŸ©é˜µå¯¹è±¡ mat2ï¼šç›¸å½“äºä¿å­˜äº†ä¸¤ä¸ªvec2å¯¹è±¡çš„å€¼æˆ–å››ä¸ªæµ®ç‚¹æ•°ã€‚ mat3 mat4 å‘é‡å’ŒçŸ©é˜µè¿ç®—çº¿æ€§ä»£æ•°å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚æƒ³çŸ¥é“çº¿æ€§ä»£æ•°å¦‚ä½•å·¥ä½œå¯ä»¥çœ‹è¿™ä¸ªèµ„æºç«™ï¼šhttps://betterexplained.com/articles/linear-algebra-guide/ çº¿æ€§ä»£æ•°å¯ä»¥ä¸€æ¬¡åœ¨å¾ˆå¤šå€¼ä¸Šè¿›è¡Œå¹¶è¡Œæ“ä½œï¼Œsoï¼Œæ­£å¥½é€‚åˆéœ€æ±‚ï¼ŒGLSLå†…å»ºäº†å¾ˆå¤šå‡½æ•°å¯ä»¥å¤„ç†åºå¤§çš„è®¡ç®—è½¬æ¢ GLSLç‰¹æœ‰å‡½æ•°GLSLå†…å»ºçš„å‡½æ•°å¯ä»¥åœ¨Shaderificç½‘ç«™ä¸Šæ‰¾åˆ°ï¼šhttps://www.shaderific.com/glsl-functionsã€‚å¾ˆå¤šCè¯­è¨€æ•°å­¦åº“åŸºæœ¬æ•°å­¦è¿ç®—éƒ½æœ‰å¯¹åº”çš„å‡½æ•°ã€‚ step()ï¼šGPUå¤„ç†æ¡ä»¶é€»è¾‘ä¸æ˜¯å¾ˆå¥½ã€‚step()å…è®¸åœ¨ä¸äº§ç”Ÿåˆ†æ”¯çš„å‰æä¸‹å®ç°æ¡ä»¶é€»è¾‘ã€‚ä¼ å…¥step()å‡½æ•°çš„å€¼å°äºé˜ˆå€¼å°±è¿”å›0.0ï¼Œå¤§äºç­‰äºé˜ˆå€¼å°±è¿”å›1.0ã€‚ mix()ï¼šå°†ä¸¤ä¸ªé¢œè‰²å€¼æ··åˆä¸ºä¸€ä¸ªã€‚ clamp()ï¼šå¯ä»¥ç¡®ä¿å€¼åœ¨ä¸€ä¸ªåŒºé—´å†…ã€‚ å¤æ‚çš„Shaderçš„ä¾‹å­ä¸€ä¸ªé¥±å’Œåº¦è°ƒèŠ‚çš„Fragment shaderçš„ä¾‹å­ï¼Œå‡ºè‡ªã€Šå›¾å½¢ç€è‰²å™¨ï¼šç†è®ºå’Œå®è·µã€‹è¿™æœ¬ä¹¦ã€‚ 1234567891011121314varying highp vec2 textureCoordinate; //uniform sampler2D inputImageTexture;uniform lowp float saturation;const mediump vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721); //å…‰äº®åº¦é‡Œä¸‰ä¸ªå€¼ç›¸åŠ è¦ä¸º1ï¼Œå„ä¸ªå€¼ä»£è¡¨ç€é¢œè‰²çš„ç™¾åˆ†æ¯”ï¼Œä¸­é—´æ˜¯ç»¿è‰²çš„å€¼ï¼Œ70%çš„æ¯”é‡ä¼šè®©æ•ˆæœæ›´å¥½ç‚¹ã€‚void main(){ lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate); //æ ¹æ®åæ ‡å–æ ·å›¾ç‰‡é¢œè‰²ä¿¡æ¯ lowp float luminance = dot(textureColor.rgb, luminanceWeighting); //GLSLä¸­çš„ç‚¹ä¹˜è¿ç®—ï¼Œçº¿æ€§ä»£æ•°çš„ç‚¹è¿ç®—ç¬¦ç›¸ä¹˜ä¸¤ä¸ªæ•°å­—ã€‚ç‚¹ä¹˜è®¡ç®—éœ€è¦å°†çº¹ç†é¢œè‰²ä¿¡æ¯å’Œç›¸å¯¹åº”çš„äº®åº¦æƒé‡ç›¸ä¹˜ã€‚ç„¶åå–å‡ºæ‰€æœ‰çš„ä¸‰ä¸ªå€¼ç›¸åŠ åˆ°ä¸€èµ·è®¡ç®—å¾—åˆ°è¿™ä¸ªåƒç´ çš„ä¸­å’Œäº®åº¦å€¼ã€‚ lowp vec3 greyScaleColor = vec3(luminance); //åˆ›å»ºä¸€ä¸ªä¸‰ä¸ªå€¼éƒ½æ˜¯äº®åº¦ä¿¡æ¯çš„vec3ï¼Œå¦‚æœåªæŒ‡å®šä¸€ä¸ªå€¼ï¼Œç¼–è¯‘å™¨ä¼šå°†å…¶å®ƒçš„éƒ½è®¾ç½®æˆè¿™ä¸ªå€¼ gl_FragColor = vec4(mix(greyScaleColor, textureColor.rgb, saturation), textureColor.w); //ç”¨mixå‡½æ•°æŠŠè®¡ç®—çš„ç°åº¦å€¼ï¼Œåˆè¯†çš„çº¹ç†é¢œè‰²å’Œå¾—åˆ°çš„é¥±å’Œåº¦ä¿¡æ¯ç»“åˆèµ·æ¥ã€‚} çƒå½¢æ»¤é•œç¤ºä¾‹123456789101112131415161718192021222324varying highp vec2 textureCoordinate;uniform sampler2D inputImageTexture;uniform highp vec2 center;uniform highp float radius;uniform highp float aspectRatio;uniform highp float refractiveIndex;void main(){ highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y * aspectRatio + 0.5 - 0.5 * aspectRatio)); //å½’ä¸€åŒ–åæ ‡ç©ºé—´éœ€è¦è€ƒè™‘å±å¹•æ˜¯ä¸€ä¸ªå•ä½å®½å’Œä¸€ä¸ªå•ä½é•¿ã€‚ highp float distanceFromCenter = distance(center, textureCoordinateToUse); //è®¡ç®—ç‰¹å®šåƒç´ ç‚¹è·ç¦»çƒå½¢çš„ä¸­å¿ƒæœ‰å¤šè¿œã€‚ä½¿ç”¨GLSLå†…å»ºçš„distance()å‡½æ•°ï¼Œç”¨å‹¾è‚¡å®šå¾‹è®¡ç®—å‡ºä¸­å¿ƒåæ ‡å’Œé•¿å®½æ¯”çŸ«æ­£è¿‡çš„çº¹ç†åæ ‡çš„è·ç¦» lowp float checkForPresenceWithinSphere = step(distanceFromCenter, radius); //è®¡ç®—ç‰‡æ®µæ˜¯å¦åœ¨çƒä½“å†…ã€‚ distanceFromCenter = distanceFromCenter / radius; //æ ‡å‡†åŒ–åˆ°çƒå¿ƒçš„è·ç¦»ï¼Œé‡æ–°è®¾ç½®distanceFromCenter highp float normalizedDepth = radius * sqrt(1.0 - distanceFromCenter * distanceFromCenter); //æ¨¡æ‹Ÿä¸€ä¸ªç»ç’ƒçƒï¼Œéœ€è¦è®¡ç®—çƒçš„â€œæ·±åº¦â€æ˜¯å¤šå°‘ã€‚ highp vec3 sphereNormal = normalize(vec3(textureCoordinateToUse - center, normalizedDepth)); //å½’ä¸€åŒ– highp vec3 refractedVector = refract(vec3(0.0, 0.0, -1.0), sphereNormal, refractiveIndex); //GLSLçš„refract()å‡½æ•°ä»¥åˆšæ‰åˆ›å»ºçš„çƒæ³•çº¿å’ŒæŠ˜å°„ç‡æ¥è®¡ç®—å½“å…‰çº¿é€šè¿‡çƒæ—¶ä»ä»»æ„ä¸€ä¸ªç‚¹çœ‹èµ·æ¥å¦‚ä½•ã€‚ gl_FragColor = texture2D(inputImageTexture, (refractedVector.xy + 1.0) * 0.5) * checkForPresenceWithinSphere; //æœ€åå‡‘é½æ‰€æœ‰è®¡ç®—éœ€è¦çš„é¢œè‰²ä¿¡æ¯ã€‚} è°ƒè¯•Shaderä½¿ç”¨gl_FragColorè°ƒè¯•ä»£ç ã€‚GPUImageæ˜¯ä¸ªå¼€æºçš„èµ„æºæœ‰äº›å¾ˆé…·çš„shaderï¼Œéå¸¸å¥½çš„å­¦ä¹ shaderçš„æ–¹å¼ï¼Œå¯ä»¥æ‹¿ä¸€ä¸ªä½ è§‰å¾—å¾ˆæœ‰æ„æ€çš„shaderå¯¹ç€æºç ä¸€ç‚¹ç‚¹çœ‹ä¸‹å»ã€‚GPUImageè¿˜æœ‰ä¸€ä¸ªshaderè®¾è®¡å™¨https://github.com/BradLarson/GPUImage/tree/master/examples/Mac/ShaderDesigner çš„Macåº”ç”¨ï¼Œå¯ä»¥æµ‹è¯•shaderè€Œä¸ç”¨å‡†å¤‡OpenGLä»£ç ã€‚ æ€§èƒ½è°ƒä¼˜ç®€å•çš„æ–¹æ³•è¾¾åˆ°è°ƒä¼˜ç›®çš„ï¼Œå¯ä»¥ç”¨ä¸‹è½½Imagination Technologies PowerVR SDKhttps://community.imgtec.com/developers/powervr/è¿™ä¸ªå·¥å…·å¸®åŠ©åˆ†æshader æ¶ˆé™¤æ¡ä»¶é€»è¾‘ï¼šä½¿ç”¨step()è¿™æ ·çš„å‡½æ•° å‡å°‘ä¾èµ–çº¹ç†çš„è¯»å–ï¼šå¦‚æœå¸Œæœ›ä»é™„è¿‘åƒç´ å–æ ·è€Œä¸æ˜¯è®¡ç®—Fragment shaderç›¸é‚»åƒç´ çš„åå·®ï¼Œæœ€å¥½åœ¨Vertex shaderä¸­è®¡ç®—ç„¶åæŠŠç»“æœä»¥varyingçš„æ–¹å¼ä¼ å…¥Fragment shaderé‡Œã€‚ è®¡ç®—å°½é‡ç®€å•ï¼šèƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªè¿‘ä¼¼å€¼å°±å°½é‡ç”¨ï¼Œä¸è¦ç”¨ç±»ä¼¼sin()ï¼Œcos()ï¼Œtan()çš„æ¯”è¾ƒæ¶ˆè€—çš„æ“ä½œã€‚ å°½å¯èƒ½çš„å°†è®¡ç®—æ”¾åˆ°Vertexä¸Šï¼šå¦‚æœè®¡ç®—åœ¨å›¾ç‰‡ä¸Šä¼šæœ‰ç›¸åŒçš„ç»“æœæˆ–çº¿æ€§å˜åŒ–æœ€å¥½è¿™æ ·åšã€‚å› ä¸ºVertex shaderå¯¹æ¯ä¸ªé¡¶ç‚¹è¿è¡Œä¸€æ¬¡ï¼Œè€ŒFragment shaderä¼šåœ¨æ¯ä¸ªåƒç´ ä¸Šè¿è¡Œä¸€æ¬¡ã€‚ ç§»åŠ¨è®¾å¤‡ä½¿ç”¨åˆé€‚çš„ç²¾åº¦ï¼šåœ¨å‘é‡ä¸Šä½¿ç”¨ä½ç²¾åº¦çš„å€¼ä¼šå˜å¾—æ›´å¿«ã€‚ä¸¤ä¸ªlowp vec4ç›¸åŠ å¯ä»¥åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆï¼Œä¸¤ä¸ªhighp vec4ç›¸åŠ åˆ™éœ€è¦å››ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚ è¾¹ç•Œæ¢æµ‹åŸºäºOpenCVåº“ï¼Œä¸è¿‡è¿™äº›æ­¥éª¤åœ¨GPUImageä¸­éƒ½æœ‰å®Œæ•´çš„å®ç° Sobelè¾¹ç•Œæ¢æµ‹è¿™ç§æ“ä½œåœ¨æ»¤é•œæ–¹é¢æ¯”æœºå™¨è§†è§‰æ–¹é¢å¤šã€‚Sobelè¾¹ç•Œæ¢æµ‹ç”¨äºæ¢æµ‹è¾¹ç•Œçš„å‡ºç°ä½ç½®ï¼Œè¾¹ç•Œæ˜¯ç”±æ˜å˜æš—æˆ–è€…ç”±æš—å˜æ˜çš„åŒºåŸŸã€‚åœ¨è¢«å¤„ç†çš„å›¾ç‰‡ä¸­ä¸€ä¸ªåƒç´ çš„äº®åº¦åæ˜ äº†è¿™ä¸ªåƒç´ å‘¨å›´è¾¹ç•Œçš„å¼ºåº¦ã€‚ ç¬¬ä¸€æ­¥ï¼Œå°†å½©è‰²å›¾ç‰‡å¼„æˆç°é˜¶å›¾ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å°†æ¯ä¸ªåƒç´ çš„çº¢ç»¿è“éƒ¨åˆ†åˆä¸€ä»£è¡¨äº®åº¦çš„å€¼ã€‚å¦‚æ˜¯æœYUVè€Œä¸æ˜¯RGBæ ¼å¼çš„å¯ä»¥çœç•¥è¿™æ­¥ï¼Œå› ä¸ºYUVæ˜¯å°†äº®åº¦ä¿¡æ¯å’Œè‰²åº¦ä¿¡æ¯åˆ†å¼€çš„ã€‚å¦‚æœç®€åŒ–åˆ°åªå‰©äº®åº¦çš„è¯ä¸€ä¸ªåƒç´ å‘¨å›´çš„è¾¹ç•Œå¼ºåº¦å°±å¯ä»¥ç”±å‘¨å›´3*3ä¸ªä¸´è¿‘åƒç´ è®¡ç®—å¾—åˆ°ã€‚è¿™ä¸ªè®¡ç®—æ¶‰åŠConvolution Matrixï¼ˆå·ç§¯çŸ©é˜µï¼‰ï¼Œæ¯ä¸ªåƒç´ éƒ½è¦ä¸è¿™ä¸ªçŸ©é˜µè®¡ç®—å‡ºä¸€ä¸ªæ•°å€¼ï¼Œå› ä¸ºæ²¡æœ‰é¡ºåºè¦æ±‚æ‰€ä»¥å¯ä»¥é‡‡å–å¹¶è¡Œè¿ç®—ã€‚ Sobelçš„æ°´å¹³å¤„ç†çŸ©é˜µ -1 0 +1-2 0 +2-1 0 +1 Sobelçš„å‚ç›´çŸ©é˜µ -1 -2 -10 0 0+1 +2 +1 å’ŒSobelç±»ä¼¼çš„å˜ä½“ï¼ŒPrewittè¾¹ç•Œæ¢æµ‹ã€‚è¿™ä¸ªå˜ä½“ä¼šåœ¨æ¨ªå‘ç«–å‘çŸ©é˜µä¸­ç”¨ä¸åŒçš„çŸ©é˜µï¼Œä½†æ˜¯è¿ä½œè¿‡ç¨‹å·®ä¸å¤šã€‚ OpenGL ESä»£ç 1234567891011121314151617181920212223242526272829303132333435precision mediump float;//varyingçš„éƒ½æ˜¯åœ¨Vertex shaderä¸Šå®šä¹‰äº†varying vec2 textureCoordinate;varying vec2 leftTextureCoordinate;varying vec2 rightTextureCoordinate;varying vec2 topTextureCoordinate;varying vec2 topLeftTextureCoordinate;varying vec2 topRightTextureCoordinate;varying vec2 bottomTextureCoordinate;varying vec2 bottomLeftTextureCoordinate;varying vec2 bottomRightTextureCoordinate;uniform sampler2D inputImageTexture;void main(){ float bottomLeftIntensity = texture2D(inputImageTexture, bottomLeftTextureCoordinate).r; float topRightIntensity = texture2D(inputImageTexture, topRightTextureCoordinate).r; float topLeftIntensity = texture2D(inputImageTexture, topLeftTextureCoordinate).r; float bottomRightIntensity = texture2D(inputImageTexture, bottomRightTextureCoordinate).r; float leftIntensity = texture2D(inputImageTexture, leftTextureCoordinate).r; float rightIntensity = texture2D(inputImageTexture, rightTextureCoordinate).r; float bottomIntensity = texture2D(inputImageTexture, bottomTextureCoordinate).r; float topIntensity = texture2D(inputImageTexture, topTextureCoordinate).r; float h = -bottomLeftIntensity - 2.0 * leftIntensity - topLeftIntensity + bottomRightIntensity + 2.0 * rightIntensity + topRightIntensity; float v = -topLeftIntensity - 2.0 * topIntensity - topRightIntensity + bottomLeftIntensity + 2.0 * bottomIntensity + bottomRightIntensity; float mag = length(vec2(h, v)); //length()å‡½æ•°è®¡ç®—å‡ºæ°´å¹³å’Œå‚ç›´çŸ©é˜µè½¬åŒ–åå€¼çš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹çš„å€¼ï¼Œè¿™ä¸ªå€¼ä¼šè¢«æ‹·è´è¿›è¾“å‡ºåƒç´ çš„çº¢ç»¿è“é€šé“ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥æ¥ä»£è¡¨è¾¹ç•Œçš„æ˜æ˜¾ç¨‹åº¦äº†ã€‚ gl_FragColor = vec4(vec3(mag), 1.0);} Cannyè¾¹ç•Œæ¢æµ‹Cannyæ¢æµ‹ä¼šæ¯”Sobelå¤æ‚äº›ï¼Œè¿™æ ·åšä¼šå¾—åˆ°ä¸€æ¡ç‰©ä½“è¾¹ç•Œçš„å¹²å‡€çº¿æ¡ã€‚ æ¢æµ‹è¿‡ç¨‹ï¼š å…ˆç”¨SobelçŸ©é˜µå¾—åˆ°è¾¹ç•Œæ¢¯åº¦çš„å¼ºåº¦ã€‚è¿™ä¸ªå’ŒSobelæ¯”å°±æ˜¯æœ€åä¸€ä¸ªè®¡ç®—æœ‰äº›ä¸åŒ 12345678910vec2 gradientDirection;gradientDirection.x = -bottomLeftIntensity - 2.0 * leftIntensity - topLeftIntensity + bottomRightIntensity + 2.0 * rightIntensity + topRightIntensity;gradientDirection.y = -topLeftIntensity - 2.0 * topIntensity - topRightIntensity + bottomLeftIntensity + 2.0 * bottomIntensity + bottomRightIntensity;float gradientMagnitude = length(gradientDirection);vec2 normalizedDirection = normalize(gradientDirection);normalizedDirection = sign(normalizedDirection) * floor(abs(normalizedDirection) + 0.617316); // Offset by 1-sin(pi/8) to set to 0 if near axis, 1 if awaynormalizedDirection = (normalizedDirection + 1.0) * 0.5; // Place -1.0 - 1.0 within 0 - 1.0gl_FragColor = vec4(gradientMagnitude, normalizedDirection.x, normalizedDirection.y, 1.0); ç€è‰²å™¨æ­¥éª¤ 1234567891011121314151617181920212223242526precision mediump float;varying highp vec2 textureCoordinate;uniform sampler2D inputImageTexture;uniform highp float texelWidth; //è¦å¤„ç†çš„å›¾ç‰‡ä¸­ä¸´è¿‘åƒç´ ä¹‹é—´çš„è·ç¦»ã€‚uniform highp float texelHeight; //åŒä¸Šuniform mediump float upperThreshold; //é¢„æœŸè¾¹ç•Œå¼ºåº¦ä¸Šä¸‹é™uniform mediump float lowerThreshold; void main(){ vec3 currentGradientAndDirection = texture2D(inputImageTexture, textureCoordinate).rgb; vec2 gradientDirection = ((currentGradientAndDirection.gb * 2.0) - 1.0) * vec2(texelWidth, texelHeight); float firstSampledGradientMagnitude = texture2D(inputImageTexture, textureCoordinate + gradientDirection).r; float secondSampledGradientMagnitude = texture2D(inputImageTexture, textureCoordinate - gradientDirection).r; float multiplier = step(firstSampledGradientMagnitude, currentGradientAndDirection.r); multiplier = multiplier * step(secondSampledGradientMagnitude, currentGradientAndDirection.r); float thresholdCompliance = smoothstep(lowerThreshold, upperThreshold, currentGradientAndDirection.r); multiplier = multiplier * thresholdCompliance; gl_FragColor = vec4(multiplier, multiplier, multiplier, 1.0);} Harrisè¾¹è§’æ¢æµ‹å¤šæ­¥éª¤çš„æ–¹æ³•æ¥æ¢æµ‹åœºæ™¯ä¸­çš„è¾¹è§’ã€‚ å…ˆå¼„å¾—åªæœ‰äº®åº¦ä¿¡æ¯ï¼Œå†é€šè¿‡SobelçŸ©é˜µï¼Œæ™®é‡Œç»´ç‰¹çŸ©é˜µæˆ–è€…å…¶å®ƒç›¸å…³çš„çŸ©é˜µè®¡ç®—å‡ºä¸€ä¸ªåƒç´ Xå’ŒYæ–¹å‘çš„æ¢¯åº¦å€¼ï¼Œè®¡ç®—çš„ç»“æœä¼šå°†Xæ¢¯åº¦ä¼ å…¥çº¢è‰²éƒ¨åˆ†ï¼ŒYæ¢¯åº¦ä¼ å…¥ç»¿è‰²éƒ¨åˆ†ï¼ŒXä¸Yæ¢¯åº¦çš„ä¹˜ç§¯ä¼ å…¥è“è‰²éƒ¨åˆ†ã€‚ å¯¹è®¡ç®—çš„ç»“æœè¿›è¡Œé«˜æ–¯æ¨¡ç³Šã€‚å°†æ¨¡ç³Šåå›¾ä¸­å–å‡ºçº¢ç»¿è“ç¼–ç çš„å€¼å¸¦åˆ°è®¡ç®—è¾¹è§’ç‚¹å¯èƒ½æ€§å…¬å¼ï¼š R = Ix2 Ã— Iy2 âˆ’ Ixy Ã— Ixy âˆ’ k Ã— (Ix2 + Iy2)2 #èµ„æ–™ ç›¸å…³æ•°å­¦ 3D Math Primer for Graphics and Game Development https://www.amazon.com/Math-Primer-Graphics-Game-Development/dp/1568817231/ref=sr_1_1?ie=UTF8&amp;qid=1422837187&amp;sr=8-1&amp;keywords=3d+math+primer+for+graphics+and+game+development The Nature of Code https://natureofcode.com/ The Computational Beauty of Nature https://www.amazon.com/Computational-Beauty-Nature-Explorations-Adaptation/dp/0262561271/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1422837256&amp;sr=1-1&amp;keywords=computational+beauty+of+nature ç›¸å…³GLSL Graphic Shaders: Theory and Practice https://www.amazon.com/Graphics-Shaders-Theory-Practice-Second/dp/1568814348/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1422837351&amp;sr=1-1&amp;keywords=graphics+shaders+theory+and+practice The OpenGL Shading Language https://www.amazon.com/OpenGL-Shading-Language-Randi-Rost/dp/0321637631/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1422896457&amp;sr=1-1&amp;keywords=opengl+shading+language OpenGL 4 Shading Language Cookbook https://www.amazon.com/OpenGL-Shading-Language-Cookbook-Second/dp/1782167021/ref=sr_1_2?s=books&amp;ie=UTF8&amp;qid=1422896457&amp;sr=1-2&amp;keywords=opengl+shading+language GPU Gems https://http.developer.nvidia.com/GPUGems/gpugems_part01.html GPU Pro: Advanced Rendering Techniques https://www.amazon.com/GPU-Pro-Advanced-Rendering-Techniques/dp/1568814720/ref=sr_1_4?s=books&amp;ie=UTF8&amp;qid=1422837427&amp;sr=1-4&amp;keywords=gpu+pro ming1016","link":"/program/ï£¿/gpu/"},{"title":"iOSå¹¶å‘ç¼–ç¨‹","text":"çº¿ç¨‹ä½¿ç”¨Instrumentsçš„CPU strategy viewæŸ¥çœ‹ä»£ç å¦‚ä½•åœ¨å¤šæ ¸CPUä¸­æ‰§è¡Œã€‚åˆ›å»ºçº¿ç¨‹å¯ä»¥ä½¿ç”¨POSIX çº¿ç¨‹APIï¼Œæˆ–è€…NSThreadï¼ˆå°è£…POSIX çº¿ç¨‹APIï¼‰ã€‚ä¸‹é¢æ˜¯å¹¶å‘4ä¸ªçº¿ç¨‹åœ¨ä¸€ç™¾ä¸‡ä¸ªæ•°å­—ä¸­æ‰¾æœ€å°å€¼å’Œæœ€å¤§å€¼çš„pthreadä¾‹å­ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970#import &lt;pthread.h&gt;struct threadInfo { uint32_t * inputValues; size_t count;};struct threadResult { uint32_t min; uint32_t max;};void * findMinAndMax(void *arg){ struct threadInfo const * const info = (struct threadInfo *) arg; uint32_t min = UINT32_MAX; uint32_t max = 0; for (size_t i = 0; i &lt; info-&gt;count; ++i) { uint32_t v = info-&gt;inputValues[i]; min = MIN(min, v); max = MAX(max, v); } free(arg); struct threadResult * const result = (struct threadResult *) malloc(sizeof(*result)); result-&gt;min = min; result-&gt;max = max; return result;}int main(int argc, const char * argv[]){ size_t const count = 1000000; uint32_t inputValues[count]; // ä½¿ç”¨éšæœºæ•°å­—å¡«å…… inputValues for (size_t i = 0; i &lt; count; ++i) { inputValues[i] = arc4random(); } // å¼€å§‹4ä¸ªå¯»æ‰¾æœ€å°å€¼å’Œæœ€å¤§å€¼çš„çº¿ç¨‹ size_t const threadCount = 4; pthread_t tid[threadCount]; for (size_t i = 0; i &lt; threadCount; ++i) { struct threadInfo * const info = (struct threadInfo *) malloc(sizeof(*info)); size_t offset = (count / threadCount) * i; info-&gt;inputValues = inputValues + offset; info-&gt;count = MIN(count - offset, count / threadCount); int err = pthread_create(tid + i, NULL, &amp;findMinAndMax, info); NSCAssert(err == 0, @&quot;pthread_create() failed: %d&quot;, err); } // ç­‰å¾…çº¿ç¨‹é€€å‡º struct threadResult * results[threadCount]; for (size_t i = 0; i &lt; threadCount; ++i) { int err = pthread_join(tid[i], (void **) &amp;(results[i])); NSCAssert(err == 0, @&quot;pthread_join() failed: %d&quot;, err); } // å¯»æ‰¾ min å’Œ max uint32_t min = UINT32_MAX; uint32_t max = 0; for (size_t i = 0; i &lt; threadCount; ++i) { min = MIN(min, results[i]-&gt;min); max = MAX(max, results[i]-&gt;max); free(results[i]); results[i] = NULL; } NSLog(@&quot;min = %u&quot;, min); NSLog(@&quot;max = %u&quot;, max); return 0;} ä½¿ç”¨NSThreadæ¥å†™ 123456789101112131415161718192021222324252627282930313233343536373839404142@interface FindMinMaxThread : NSThread@property (nonatomic) NSUInteger min;@property (nonatomic) NSUInteger max;- (instancetype)initWithNumbers:(NSArray *)numbers;@end@implementation FindMinMaxThread { NSArray *_numbers;}- (instancetype)initWithNumbers:(NSArray *)numbers{ self = [super init]; if (self) { _numbers = numbers; } return self;}- (void)main{ NSUInteger min; NSUInteger max; // è¿›è¡Œç›¸å…³æ•°æ®çš„å¤„ç† self.min = min; self.max = max;}@end//å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡NSMutableSet *threads = [NSMutableSet set];NSUInteger numberCount = self.numbers.count;NSUInteger threadCount = 4;for (NSUInteger i = 0; i &lt; threadCount; i++) { NSUInteger offset = (count / threadCount) * i; NSUInteger count = MIN(numberCount - offset, numberCount / threadCount); NSRange range = NSMakeRange(offset, count); NSArray *subset = [self.numbers subarrayWithRange:range]; FindMinMaxThread *thread = [[FindMinMaxThread alloc] initWithNumbers:subset]; [threads addObject:thread]; [thread start];} Grand Central DispatchGCDä¸­çš„FIFOé˜Ÿåˆ—ç§°ä¸ºdispatch queueï¼Œç”¨æ¥ä¿è¯å…ˆè¿›æ¥çš„ä»»åŠ¡å…ˆå¾—åˆ°æ‰§è¡Œã€‚ dispatch queueåˆ†ä¸‰ç§ Serialï¼šåˆå«private dispatch queuesï¼ŒåŒæ—¶åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚Serial queueå¸¸ç”¨äºåŒæ­¥è®¿é—®ç‰¹å®šçš„èµ„æºæˆ–æ•°æ®ã€‚å½“ä½ åˆ›å»ºå¤šä¸ªSerial queueæ—¶ï¼Œè™½ç„¶å„è‡ªæ˜¯åŒæ­¥ï¼Œä½†serial queueä¹‹é—´æ˜¯å¹¶å‘æ‰§è¡Œã€‚ Concurrentï¼šåˆå«global dispatch queueï¼Œå¯ä»¥å¹¶å‘çš„æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä½†æ‰§è¡Œå®Œæˆé¡ºåºæ˜¯éšæœºçš„ã€‚ Main dispatch queueï¼šå…¨å±€å¯ç”¨çš„serial queueï¼Œåœ¨åº”ç”¨ç¨‹åºä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œä»»åŠ¡ã€‚ GCDæ¦‚è¦ å’Œoperation queueä¸€æ ·éƒ½æ˜¯åŸºäºé˜Ÿåˆ—çš„å¹¶å‘ç¼–ç¨‹APIï¼Œä»–ä»¬é€šè¿‡é›†ä¸­ç®¡ç†å¤§å®¶ååŒä½¿ç”¨çš„çº¿ç¨‹æ± ã€‚ å…¬å¼€çš„5ä¸ªä¸åŒé˜Ÿåˆ—ï¼šè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­çš„main queueï¼Œ3ä¸ªä¸åŒä¼˜å…ˆçº§çš„åå°é˜Ÿåˆ—ï¼ˆHigh Priority Queueï¼ŒDefault Priority Queueï¼ŒLow Priority Queueï¼‰ï¼Œä»¥åŠä¸€ä¸ªä¼˜å…ˆçº§æ›´ä½çš„åå°é˜Ÿåˆ—Background Priority Queueï¼ˆç”¨äºI/Oï¼‰ å¯åˆ›å»ºè‡ªå®šä¹‰é˜Ÿåˆ—ï¼šä¸²è¡Œæˆ–å¹¶åˆ—é˜Ÿåˆ—ã€‚è‡ªå®šä¹‰ä¸€èˆ¬æ”¾åœ¨Default Priority Queueå’ŒMain Queueé‡Œã€‚ dispatch_onceç”¨æ³•12345678910+ (UIColor *)boringColor;{ static UIColor *color; //åªè¿è¡Œä¸€æ¬¡ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ color = [UIColor colorWithRed:0.380f green:0.376f blue:0.376f alpha:1.000f]; }); return color;} dispatch_asyncï¼ˆè¾ƒå¸¸ç”¨ï¼‰å¯ä»¥é¿å…ç•Œé¢ä¼šè¢«ä¸€äº›è€—æ—¶çš„æ“ä½œå¡æ­»ï¼Œæ¯”å¦‚è¯»å–ç½‘ç»œæ•°æ®ï¼Œå¤§æ•°æ®IOï¼Œè¿˜æœ‰å¤§é‡æ•°æ®çš„æ•°æ®åº“è¯»å†™ï¼Œè¿™æ—¶éœ€è¦åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­å¤„ç†ï¼Œç„¶åé€šçŸ¥ä¸»çº¿ç¨‹æ›´æ–°ç•Œé¢ï¼ŒGCDä½¿ç”¨èµ·æ¥æ¯”NSThreadå’ŒNSOperationæ–¹æ³•è¦ç®€å•æ–¹ä¾¿ã€‚ 12345678910111213141516171819//ä»£ç æ¡†æ¶dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ // è€—æ—¶çš„æ“ä½œ dispatch_async(dispatch_get_main_queue(), ^{ // æ›´æ–°ç•Œé¢ });});//ä¸‹è½½å›¾ç‰‡çš„ç¤ºä¾‹dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ NSURL * url = [NSURL URLWithString:@&quot;https://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;]; NSData * data = [[NSData alloc]initWithContentsOfURL:url]; UIImage *image = [[UIImage alloc]initWithData:data]; if (data != nil) { dispatch_async(dispatch_get_main_queue(), ^{ self.imageView.image = image; }); }}); dispatch_afterå»¶åæ‰§è¡Œ12345678- (void)foo{ double delayInSeconds = 2.0; dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t) (delayInSeconds * NSEC_PER_SEC)); dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ [self bar]; });} èŒƒä¾‹ï¼Œå®ç°ä¸€ä¸ªæ¨è¿Ÿå‡ºç°å¼¹å‡ºæ¡†æç¤ºï¼Œæ¯”å¦‚è¯´æç¤ºç”¨æˆ·è¯„ä»·ç­‰åŠŸèƒ½ã€‚ 12345678910111213func showOrHideNavPrompt() { let delayInSeconds = 1.0 let popTime = dispatch_time(DISPATCH_TIME_NOW, Int64(delayInSeconds * Double(NSEC_PER_SEC))) // åœ¨è¿™é‡Œå£°æ˜æ¨è¿Ÿçš„æ—¶é—´ dispatch_after(popTime, GlobalMainQueue) { // ç­‰å¾…delayInSecondså°†é—­åŒ…å¼‚æ­¥åˆ°ä¸»é˜Ÿåˆ— let count = PhotoManager.sharedManager.photos.count if count &gt; 0 { self.navigationItem.prompt = nil } else { self.navigationItem.prompt = &quot;Add photos with faces to Googlyify them!&quot; } }} GCDé˜Ÿåˆ—é˜Ÿåˆ—é»˜è®¤æ˜¯ä¸²è¡Œçš„ï¼Œåªèƒ½æ‰§è¡Œä¸€ä¸ªå•ç‹¬çš„blockï¼Œé˜Ÿåˆ—ä¹Ÿå¯ä»¥æ˜¯å¹¶è¡Œçš„ï¼ŒåŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªblock 123456789101112- (id)init;{ self = [super init]; if (self != nil) { NSString *label = [NSString stringWithFormat:@&quot;%@.isolation.%p&quot;, [self class], self]; self.isolationQueue = dispatch_queue_create([label UTF8String], 0); label = [NSString stringWithFormat:@&quot;%@.work.%p&quot;, [self class], self]; self.workQueue = dispatch_queue_create([label UTF8String], 0); } return self;} 5ç§é˜Ÿåˆ—ï¼Œä¸»é˜Ÿåˆ—ï¼ˆmain queueï¼‰,å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ï¼Œè‡ªå·±å®šåˆ¶çš„é˜Ÿåˆ—ã€‚å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ä¸º QOS_CLASS_USER_INTERACTIVEï¼šuser interactiveç­‰çº§è¡¨ç¤ºä»»åŠ¡éœ€è¦è¢«ç«‹å³æ‰§è¡Œæä¾›å¥½çš„ä½“éªŒï¼Œç”¨æ¥æ›´æ–°UIï¼Œå“åº”äº‹ä»¶ç­‰ã€‚è¿™ä¸ªç­‰çº§æœ€å¥½ä¿æŒå°è§„æ¨¡ã€‚ QOS_CLASS_USER_INITIATEDï¼šuser initiatedç­‰çº§è¡¨ç¤ºä»»åŠ¡ç”±UIå‘èµ·å¼‚æ­¥æ‰§è¡Œã€‚é€‚ç”¨åœºæ™¯æ˜¯éœ€è¦åŠæ—¶ç»“æœåŒæ—¶åˆå¯ä»¥ç»§ç»­äº¤äº’çš„æ—¶å€™ã€‚ QOS_CLASS_UTILITYï¼šutilityç­‰çº§è¡¨ç¤ºéœ€è¦é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œä¼´æœ‰ç”¨æˆ·å¯è§è¿›åº¦æŒ‡ç¤ºå™¨ã€‚ç»å¸¸ä¼šç”¨æ¥åšè®¡ç®—ï¼ŒI/Oï¼Œç½‘ç»œï¼ŒæŒç»­çš„æ•°æ®å¡«å……ç­‰ä»»åŠ¡ã€‚è¿™ä¸ªä»»åŠ¡èŠ‚èƒ½ã€‚ QOS_CLASS_BACKGROUNDï¼šbackgroundç­‰çº§è¡¨ç¤ºç”¨æˆ·ä¸ä¼šå¯Ÿè§‰çš„ä»»åŠ¡ï¼Œä½¿ç”¨å®ƒæ¥å¤„ç†é¢„åŠ è½½ï¼Œæˆ–è€…ä¸éœ€è¦ç”¨æˆ·äº¤äº’å’Œå¯¹æ—¶é—´ä¸æ•æ„Ÿçš„ä»»åŠ¡ã€‚ ç¤ºä¾‹ï¼šåå°åŠ è½½æ˜¾ç¤ºå›¾ç‰‡ 12345678910override func viewDidLoad() { super.viewDidLoad() dispatch_async(dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)) { // å°†å·¥ä½œä»ä¸»çº¿ç¨‹è½¬ç§»åˆ°å…¨å±€é˜Ÿåˆ—ä¸­ï¼Œè¿™æ˜¯dispatch_asyncè°ƒç”¨ï¼Œå¼‚æ­¥æäº¤ä¿è¯è°ƒç”¨çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œè¿™æ ·viewDidLoadåœ¨ä¸»çº¿ç¨‹ä¸Šèƒ½å¤Ÿæ›´æ—©å®Œæˆï¼Œ let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(dispatch_get_main_queue()) { // æ–°å›¾å®Œæˆï¼ŒæŠŠä¸€ä¸ªé—­åŒ…åŠ å…¥ä¸»çº¿ç¨‹ç”¨æ¥æ›´æ–°UIImageViewï¼Œåªæœ‰åœ¨ä¸»çº¿ç¨‹èƒ½æ“ä½œUIKitã€‚ self.fadeInNewImage(overlayImage) // æ›´æ–°UI } }} ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹ ä¸»é˜Ÿåˆ—ï¼ˆé¡ºåºï¼‰ï¼šé˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡å®Œæˆéœ€è¦æ›´æ–°UIæ—¶ï¼Œdispatch_afteråœ¨è¿™ç§ç±»å‹ä¸­ä½¿ç”¨ã€‚ å¹¶å‘é˜Ÿåˆ—ï¼šç”¨æ¥æ‰§è¡Œä¸UIæ— å…³çš„åå°ä»»åŠ¡ï¼Œdispatch_syncæ”¾åœ¨è¿™é‡Œï¼Œæ–¹ä¾¿ç­‰å¾…ä»»åŠ¡å®Œæˆè¿›è¡Œåç»­å¤„ç†æˆ–å’Œdispatch barrieråŒæ­¥ã€‚dispatch groupsæ”¾åœ¨è¿™é‡Œä¹Ÿä¸é”™ã€‚ è‡ªå®šä¹‰é¡ºåºé˜Ÿåˆ—ï¼šé¡ºåºæ‰§è¡Œåå°ä»»åŠ¡å¹¶è¿½è¸ªå®ƒæ—¶ã€‚è¿™æ ·åšåŒæ—¶åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œå¯ä»¥é˜²æ­¢èµ„æºç«äº‰ã€‚dipatch barriersè§£å†³è¯»å†™é”é—®é¢˜çš„æ”¾åœ¨è¿™é‡Œå¤„ç†ã€‚dispatch groupsä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œã€‚ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ç®€åŒ–QoSç­‰çº§å‚æ•°çš„å†™æ³• 1234567891011121314151617181920212223var GlobalMainQueue: dispatch_queue_t { return dispatch_get_main_queue()}var GlobalUserInteractiveQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_USER_INTERACTIVE.value), 0)}var GlobalUserInitiatedQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)}var GlobalUtilityQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_UTILITY.value), 0)}var GlobalBackgroundQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_BACKGROUND.value), 0)}//ä½¿ç”¨èµ·æ¥å°±æ˜¯è¿™æ ·ï¼Œæ˜“è¯»è€Œä¸”å®¹æ˜“çœ‹å‡ºåœ¨ä½¿ç”¨å“ªä¸ªé˜Ÿåˆ—dispatch_async(GlobalUserInitiatedQueue) { let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(GlobalMainQueue) { self.fadeInNewImage(overlayImage) }} ä½¿ç”¨Barrier Taskæ–¹æ³•Dispatch Barrierè§£å†³å¤šçº¿ç¨‹å¹¶å‘è¯»å†™åŒä¸€ä¸ªèµ„æºå‘ç”Ÿæ­»é”Dispatch Barrierç¡®ä¿æäº¤çš„é—­åŒ…æ˜¯æŒ‡å®šé˜Ÿåˆ—ä¸­åœ¨ç‰¹å®šæ—¶æ®µå”¯ä¸€åœ¨æ‰§è¡Œçš„ä¸€ä¸ªã€‚åœ¨æ‰€æœ‰å…ˆäºDispatch Barrierçš„ä»»åŠ¡éƒ½å®Œæˆçš„æƒ…å†µä¸‹è¿™ä¸ªé—­åŒ…æ‰å¼€å§‹æ‰§è¡Œã€‚è½®åˆ°è¿™ä¸ªé—­åŒ…æ—¶barrierä¼šæ‰§è¡Œè¿™ä¸ªé—­åŒ…å¹¶ä¸”ç¡®ä¿é˜Ÿåˆ—åœ¨æ­¤è¿‡ç¨‹ä¸ä¼šæ‰§è¡Œå…¶å®ƒä»»åŠ¡ã€‚é—­åŒ…å®Œæˆåé˜Ÿåˆ—æ¢å¤ã€‚ 123456789101112131415//åˆ›å»ºé˜Ÿåˆ—self.isolationQueue = dispatch_queue_create([label UTF8String], DISPATCH_QUEUE_CONCURRENT);//æ”¹å˜setter- (void)setCount:(NSUInteger)count forKey:(NSString *)key{ key = [key copy]; //ç¡®ä¿æ‰€æœ‰barrieréƒ½æ˜¯asyncå¼‚æ­¥çš„ dispatch_barrier_async(self.isolationQueue, ^(){ if (count == 0) { [self.counts removeObjectForKey:key]; } else { self.counts[key] = @(count); } });} swiftç¤ºä¾‹ 12345678910111213141516171819202122//ä½¿ç”¨dispatch_queue_createåˆå§‹åŒ–ä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—ã€‚ç¬¬ä¸€ä¸ªå‚æ•°éµå¾ªåå‘DNSå‘½åä¹ æƒ¯ï¼Œæ–¹ä¾¿æè¿°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å‡ºæ˜¯å¹¶å‘è¿˜æ˜¯é¡ºåºã€‚private let concurrentPhotoQueue = dispatch_queue_create(&quot;com.raywenderlich.GooglyPuff.photoQueue&quot;, DISPATCH_QUEUE_CONCURRENT)func addPhoto(photo: Photo) { dispatch_barrier_async(concurrentPhotoQueue) { // å°†å†™æ“ä½œåŠ å…¥åˆ°è‡ªå®šä¹‰çš„é˜Ÿåˆ—ã€‚å¼€å§‹æ‰§è¡Œæ—¶è¿™ä¸ªå°±æ˜¯é˜Ÿåˆ—ä¸­å”¯ä¸€çš„ä¸€ä¸ªåœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚ self._photos.append(photo) // barrierèƒ½å¤Ÿä¿éšœä¸ä¼šå’Œå…¶ä»–ä»»åŠ¡åŒæ—¶è¿›è¡Œã€‚ dispatch_async(GlobalMainQueue) { // æ¶‰åŠåˆ°UIæ‰€ä»¥è¿™ä¸ªé€šçŸ¥åº”è¯¥åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥åˆ†æ´¾å¦ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡åˆ°ä¸»é˜Ÿåˆ—ä¸­ã€‚ self.postContentAddedNotification() } }}//ä¸Šé¢æ˜¯è§£å†³äº†å†™å¯èƒ½å‘ç”Ÿæ­»é”ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨dispatch_syncè§£å†³è¯»æ—¶å¯èƒ½ä¼šå‘ç”Ÿçš„æ­»é”ã€‚var photos: [Photo] { var photosCopy: [Photo]! dispatch_sync(concurrentPhotoQueue) { // åŒæ­¥è°ƒåº¦åˆ°concurrentPhotoQueueé˜Ÿåˆ—æ‰§è¡Œè¯»æ“ä½œ photosCopy = self._photos // ä¿å­˜ } return photosCopy}//è¿™æ ·è¯»å†™é—®é¢˜éƒ½è§£å†³äº†ã€‚ éƒ½ç”¨å¼‚æ­¥å¤„ç†é¿å…æ­»é”ï¼Œå¼‚æ­¥çš„ç¼ºç‚¹åœ¨äºè°ƒè¯•ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯æ¯”èµ·åŒæ­¥å®¹æ˜“äº§ç”Ÿæ­»é”è¿™ä¸ªå‰¯ä½œç”¨è¿˜ç®—å°çš„ã€‚ å¼‚æ­¥APIå†™æ³•è®¾è®¡ä¸€ä¸ªå¼‚æ­¥çš„APIè°ƒç”¨dispatch_async()ï¼Œè¿™ä¸ªè°ƒç”¨æ”¾åœ¨APIçš„æ–¹æ³•æˆ–å‡½æ•°ä¸­åšã€‚è®©APIçš„ä½¿ç”¨è€…è®¾ç½®ä¸€ä¸ªå›è°ƒå¤„ç†é˜Ÿåˆ— 123456789- (void)processImage:(UIImage *)image completionHandler:(void(^)(BOOL success))handler;{ dispatch_async(self.isolationQueue, ^(void){ // do actual processing here dispatch_async(self.resultQueue, ^(void){ handler(YES); }); });} dispatch_applyè¿›è¡Œå¿«é€Ÿè¿­ä»£1234567891011for (size_t y = 0; y &lt; height; ++y) { for (size_t x = 0; x &lt; width; ++x) { // Do something with x and y here }}//ä½¿ç”¨dispatch_applyå¯ä»¥è¿è¡Œçš„æ›´å¿«dispatch_apply(height, dispatch_get_global_queue(0, 0), ^(size_t y) { for (size_t x = 0; x &lt; width; x += 2) { // Do something with x and y here }}); ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { var storedError: NSError! var downloadGroup = dispatch_group_create() let addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] dispatch_apply(UInt(addresses.count), GlobalUserInitiatedQueue) { i in let index = Int(i) let address = addresses[index] let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_notify(downloadGroup, GlobalMainQueue) { if let completion = completion { completion(error: storedError) } }} Blockç»„åˆDispatch_groupsdispatch groupsæ˜¯ä¸“é—¨ç”¨æ¥ç›‘è§†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚dispatch_group_tå®ä¾‹ç”¨æ¥è¿½è¸ªä¸åŒé˜Ÿåˆ—ä¸­çš„ä¸åŒä»»åŠ¡ã€‚ å½“groupé‡Œæ‰€æœ‰äº‹ä»¶éƒ½å®ŒæˆGCD APIæœ‰ä¸¤ç§æ–¹å¼å‘é€é€šçŸ¥ï¼Œç¬¬ä¸€ç§æ˜¯dispatch_group_waitï¼Œä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œç­‰æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæˆ–ç­‰å¾…è¶…æ—¶ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨dispatch_group_notifyï¼Œå¼‚æ­¥æ‰§è¡Œé—­åŒ…ï¼Œä¸ä¼šé˜»å¡ã€‚ ç¬¬ä¸€ç§ä½¿ç”¨dispatch_group_waitçš„swiftçš„ä¾‹å­ï¼š 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { dispatch_async(GlobalUserInitiatedQueue) { // å› ä¸ºdispatch_group_waitä¼šç§Ÿå¡å½“å‰è¿›ç¨‹ï¼Œæ‰€ä»¥è¦ä½¿ç”¨dispatch_asyncå°†æ•´ä¸ªæ–¹æ³•è¦æ”¾åˆ°åå°é˜Ÿåˆ—æ‰èƒ½å¤Ÿä¿è¯ä¸»çº¿ç¨‹ä¸è¢«é˜»å¡ var storedError: NSError! var downloadGroup = dispatch_group_create() // åˆ›å»ºä¸€ä¸ªdispatch group for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] { let url = NSURL(string: address) dispatch_group_enter(downloadGroup) // dispatch_group_enteræ˜¯é€šçŸ¥dispatch groupä»»åŠ¡å¼€å§‹äº†ï¼Œdispatch_group_enterå’Œdispatch_group_leaveæ˜¯æˆå¯¹è°ƒç”¨ï¼Œä¸ç„¶ç¨‹åºå°±å´©æºƒäº†ã€‚ let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) // ä¿æŒå’Œdispatch_group_enteré…å¯¹ã€‚é€šçŸ¥ä»»åŠ¡å·²ç»å®Œæˆ } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER) // dispatch_group_waitç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆç›´åˆ°è¶…æ—¶ã€‚å¦‚æœä»»åŠ¡å®Œæˆå‰å°±è¶…æ—¶äº†ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼åˆ¤æ–­æ˜¯å¦è¶…æ—¶ã€‚ä¹Ÿå¯ä»¥ç”¨DISPATCH_TIME_FOREVERè¡¨ç¤ºä¸€ç›´ç­‰ã€‚ dispatch_async(GlobalMainQueue) { // è¿™é‡Œå¯ä»¥ä¿è¯æ‰€æœ‰å›¾ç‰‡ä»»åŠ¡éƒ½å®Œæˆï¼Œç„¶ååœ¨main queueé‡ŒåŠ å…¥å®Œæˆåè¦å¤„ç†çš„é—­åŒ…ï¼Œä¼šåœ¨main queueé‡Œæ‰§è¡Œã€‚ if let completion = completion { // æ‰§è¡Œé—­åŒ…å†…å®¹ completion(error: storedError) } } }} ç¬¬äºŒç§ä½¿ç”¨dispatch_group_notifyçš„swiftçš„ä¾‹å­ï¼š 123456789101112131415161718192021222324252627func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { // ä¸ç”¨åŠ dispatch_asyncï¼Œå› ä¸ºæ²¡æœ‰é˜»å¡ä¸»è¿›ç¨‹ var storedError: NSError! var downloadGroup = dispatch_group_create() for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] { let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_notify(downloadGroup, GlobalMainQueue) { // dispatch_group_notifyå’Œdispatch_group_waitçš„åŒºåˆ«å°±æ˜¯æ˜¯å¼‚æ­¥æ‰§è¡Œé—­åŒ…çš„ï¼Œå½“dispatch groupsä¸­æ²¡æœ‰å‰©ä½™çš„ä»»åŠ¡æ—¶é—­åŒ…æ‰æ‰§è¡Œã€‚è¿™é‡Œæ˜¯æŒ‡æ˜åœ¨ä¸»é˜Ÿåˆ—ä¸­æ‰§è¡Œã€‚ if let completion = completion { completion(error: storedError) } }} 1234567891011121314151617181920212223dispatch_group_t group = dispatch_group_create();dispatch_queue_t queue = dispatch_get_global_queue(0, 0);dispatch_group_async(group, queue, ^(){ // ä¼šå¤„ç†ä¸€ä¼š [self doSomeFoo]; dispatch_group_async(group, dispatch_get_main_queue(), ^(){ self.foo = 42; });});dispatch_group_async(group, queue, ^(){ // å¤„ç†ä¸€ä¼šå„¿ [self doSomeBar]; dispatch_group_async(group, dispatch_get_main_queue(), ^(){ self.bar = 1; });});// ä¸Šé¢çš„éƒ½æå®šåè¿™é‡Œä¼šæ‰§è¡Œä¸€æ¬¡dispatch_group_notify(group, dispatch_get_main_queue(), ^(){ NSLog(@&quot;foo: %d&quot;, self.foo); NSLog(@&quot;bar: %d&quot;, self.bar);}); å¦‚ä½•å¯¹ç°æœ‰APIä½¿ç”¨dispatch_group_t 12345678910111213141516171819202122232425262728293031323334//ç»™Core Dataçš„-performBlock:æ·»åŠ groupsã€‚ç»„åˆå®Œæˆä»»åŠ¡åä½¿ç”¨dispatch_group_notifyæ¥è¿è¡Œä¸€ä¸ªblockå³å¯ã€‚- (void)withGroup:(dispatch_group_t)group performBlock:(dispatch_block_t)block{ if (group == NULL) { [self performBlock:block]; } else { dispatch_group_enter(group); [self performBlock:^(){ block(); dispatch_group_leave(group); }]; }}//NSURLConnectionä¹Ÿå¯ä»¥è¿™æ ·åš+ (void)withGroup:(dispatch_group_t)group sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler{ if (group == NULL) { [self sendAsynchronousRequest:request queue:queue completionHandler:handler]; } else { dispatch_group_enter(group); [self sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){ handler(response, data, error); dispatch_group_leave(group); }]; }} æ³¨æ„äº‹é¡¹ dispatch_group_enter() å¿…é¡»è¿è¡Œåœ¨ dispatch_group_leave() ä¹‹å‰ã€‚ dispatch_group_enter() å’Œ dispatch_group_leave() éœ€è¦æˆå¯¹å‡ºç°çš„ ä½¿ç”¨dispatch block objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆdispatch block objectå¯ä»¥ä¸ºé˜Ÿåˆ—ä¸­çš„å¯¹è±¡è®¾ç½®ç¤ºä¾‹ï¼Œä¸‹è½½å›¾ç‰‡ä¸­é€”è¿›è¡Œå–æ¶ˆ 123456789101112131415161718192021222324252627282930313233343536373839404142func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { var storedError: NSError! let downloadGroup = dispatch_group_create() var addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] addresses += addresses + addresses // æ‰©å±•addressæ•°ç»„ï¼Œå¤åˆ¶3ä»½ var blocks: [dispatch_block_t] = [] // ä¸€ä¸ªä¿å­˜blockçš„æ•°ç»„ for i in 0 ..&lt; addresses.count { dispatch_group_enter(downloadGroup) let block = dispatch_block_create(DISPATCH_BLOCK_INHERIT_QOS_CLASS) { // åˆ›å»ºä¸€ä¸ªblockï¼Œblockçš„æ ‡å¿—æ˜¯DISPATCH_BLOCK_INHERIT_QOS_CLASS let index = Int(i) let address = addresses[index] let url = NSURL(string: address) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } blocks.append(block) dispatch_async(GlobalMainQueue, block) // æŠŠè¿™ä¸ªblockæ”¾åˆ°GlobalMainQueueä¸Šå¼‚æ­¥è°ƒç”¨ã€‚å› ä¸ºå…¨å±€é˜Ÿåˆ—æ˜¯ä¸€ä¸ªé¡ºåºé˜Ÿåˆ—æ‰€ä»¥æ–¹ä¾¿å–æ¶ˆå¯¹è±¡blockï¼ŒåŒæ—¶å¯ä»¥ä¿è¯ä¸‹è½½ä»»åŠ¡åœ¨downloadPhotosWithCompletionè¿”å›åæ‰å¼€å§‹æ‰§è¡Œã€‚ } for block in blocks[3 ..&lt; blocks.count] { let cancel = arc4random_uniform(2) // éšæœºè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä¼šè¿”å›0æˆ–1 if cancel == 1 { dispatch_block_cancel(block) // å¦‚æœæ˜¯1å°±å–æ¶ˆblockï¼Œè¿™ä¸ªåªèƒ½å‘ç”Ÿåœ¨blockè¿˜åœ¨é˜Ÿåˆ—ä¸­å¹¶æ²¡æœ‰å¼€å§‹çš„æƒ…å†µä¸‹ã€‚å› ä¸ºæŠŠblockå·²ç»æ”¾åˆ°äº†GlobalMainQueueä¸­ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°æ–¹ä¼šå…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œäº†æ‰ä¼šæ‰§è¡Œblockã€‚ dispatch_group_leave(downloadGroup) // å› ä¸ºå·²ç»dispatch_group_enteräº†ï¼Œæ‰€ä»¥å–æ¶ˆæ—¶ä¹Ÿè¦å°†å…¶éƒ½leaveæ‰ã€‚ } } dispatch_group_notify(downloadGroup, GlobalMainQueue) { if let completion = completion { completion(error: storedError) } }} ç”¨GCDç›‘è§†è¿›ç¨‹1234567891011NSRunningApplication *mail = [NSRunningApplication runningApplicationsWithBundleIdentifier:@&quot;com.apple.mail&quot;];if (mail == nil) { return;}pid_t const pid = mail.processIdentifier;self.source = dispatch_source_create(DISPATCH_SOURCE_TYPE_PROC, pid, DISPATCH_PROC_EXIT, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(self.source, ^(){ NSLog(@&quot;Mail quit.&quot;);});//åœ¨äº‹ä»¶æºä¼ åˆ°ä½ çš„äº‹ä»¶å¤„ç†å‰éœ€è¦è°ƒç”¨dispatch_resume()è¿™ä¸ªæ–¹æ³•dispatch_resume(self.source); ç›‘è§†æ–‡ä»¶å¤¹å†…æ–‡ä»¶å˜åŒ–12345678910111213141516171819202122232425NSURL *directoryURL; // assume this is set to a directoryint const fd = open([[directoryURL path] fileSystemRepresentation], O_EVTONLY);if (fd &lt; 0) { char buffer[80]; strerror_r(errno, buffer, sizeof(buffer)); NSLog(@&quot;Unable to open \\&quot;%@\\&quot;: %s (%d)&quot;, [directoryURL path], buffer, errno); return;}dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, fd,DISPATCH_VNODE_WRITE | DISPATCH_VNODE_DELETE, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^(){ unsigned long const data = dispatch_source_get_data(source); if (data &amp; DISPATCH_VNODE_WRITE) { NSLog(@&quot;The directory changed.&quot;); } if (data &amp; DISPATCH_VNODE_DELETE) { NSLog(@&quot;The directory has been deleted.&quot;); }});dispatch_source_set_cancel_handler(source, ^(){ close(fd);});self.source = source;dispatch_resume(self.source);//è¿˜è¦æ³¨æ„éœ€è¦ç”¨DISPATCH_VNODE_DELETE å»æ£€æŸ¥ç›‘è§†çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦è¢«åˆ é™¤ï¼Œå¦‚æœåˆ é™¤äº†å°±åœæ­¢ç›‘å¬ GCDç‰ˆå®šæ—¶å™¨12345678dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,0, 0, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^(){ NSLog(@&quot;Time flies.&quot;);});dispatch_time_t startdispatch_source_set_timer(source, DISPATCH_TIME_NOW, 5ull * NSEC_PER_SEC,100ull * NSEC_PER_MSEC);self.source = source;dispatch_resume(self.source); GCDæ·±å…¥æ“ä½œ ç¼“å†²åŒºï¼šdispatch_data_tåŸºäºé›¶ç¢çš„å†…å­˜åŒºåŸŸï¼Œä½¿ç”¨dispatch_data_applyæ¥éå†ï¼Œè¿˜å¯ä»¥ç”¨dispatch_data_create_subrangeæ¥åˆ›å»ºä¸€ä¸ªä¸åšä»»ä½•æ‹·è´çš„å­åŒºåŸŸ I/Oè°ƒåº¦ï¼šä½¿ç”¨GCDæä¾›çš„dispatch_io_readï¼Œdispatch_io_writeå’Œdispatch_io_close æµ‹è¯•ï¼šä½¿ç”¨dispatch_benchmarkå°å·¥å…· åŸå­æ“ä½œï¼š libkern/OSAtomic.hé‡Œå¯ä»¥æŸ¥çœ‹é‚£äº›å‡½æ•°ï¼Œç”¨äºåº•å±‚å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ Cocoa NSOperationä½¿ç”¨NSOperationçš„ä¸¤ç§æ–¹å¼ã€‚ä¸€ç§ç”¨å®šä¹‰å¥½çš„ä¸¤ä¸ªå­ç±»NSInvocationOperationå’ŒNSBlockOperationï¼Œå¦ä¸€ä¸ªæ˜¯ç»§æ‰¿NSOperationã€‚ NSOperationæ˜¯è®¾è®¡ç”¨æ¥æ‰©å±•çš„ï¼Œåªéœ€ç»§æ‰¿é‡å†™NSOperationçš„ä¸€ä¸ªæ–¹æ³•mainï¼Œç„¶åæŠŠNSOperationå­ç±»çš„å¯¹è±¡æ”¾å…¥NSOperationQueueé˜Ÿåˆ—ä¸­ï¼Œè¯¥é˜Ÿåˆ—å°±ä¼šå¯åŠ¨å¹¶å¼€å§‹å¤„ç†å®ƒã€‚ NSInvocationOperationä¾‹å­ 1234567891011121314151617181920212223242526272829#import &quot;ViewController.h&quot;#define kURL @&quot;https://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad{ [super viewDidLoad]; NSInvocationOperation *operation = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(downloadImage:) object:kURL]; NSOperationQueue *queue = [[NSOperationQueue alloc]init]; [queue addOperation:operation]; //æ”¾è¿›å»å°±å¼€å§‹äº† // Do any additional setup after loading the view, typically from a nib.}-(void)downloadImage:(NSString *)url{ NSLog(@&quot;url:%@&quot;, url); NSURL *nsUrl = [NSURL URLWithString:url]; NSData *data = [[NSData alloc]initWithContentsOfURL:nsUrl]; UIImage * image = [[UIImage alloc]initWithData:data]; [self performSelectorOnMainThread:@selector(updateUI:) withObject:image waitUntilDone:YES];}-(void)updateUI:(UIImage*) image{ self.imageView.image = image;} Operation Queueæ˜¯åœ¨GCDä¸Šå®ç°äº†ä¸€äº›æ–¹ä¾¿çš„åŠŸèƒ½ã€‚ä¼˜ç‚¹æ˜¯ä¸éœ€è¦å…³å¿ƒçº¿ç¨‹ç®¡ç†ï¼Œæ•°æ®åŒæ­¥ã€‚Cocoa operationç›¸å…³çš„ç±»æ˜¯NSOperationï¼ŒNSOperationQueueã€‚ NSOperationQueueæœ‰ä¸»é˜Ÿåˆ—å’Œè‡ªå®šä¹‰é˜Ÿåˆ—ä¸¤ç§ç±»å‹é˜Ÿåˆ—ã€‚ä¸»é˜Ÿåˆ—åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œè‡ªå®šä¹‰é˜Ÿåˆ—åœ¨åå°ã€‚ é‡å†™mainæ–¹æ³•è‡ªå®šä¹‰è‡ªå·±çš„operationsã€‚è¾ƒç®€å•ï¼Œä¸éœ€è¦ç®¡ç†isExecutingå’ŒisFinishedï¼Œmainè¿”å›æ—¶operationå°±ç»“æŸäº†ã€‚ 123456@implementation YourOperation - (void)main { // è¿›è¡Œå¤„ç† ... }@end é‡å†™startæ–¹æ³•èƒ½å¤Ÿè·å¾—æ›´å¤šçš„æ§åˆ¶æƒï¼Œè¿˜å¯ä»¥åœ¨ä¸€ä¸ªæ“ä½œä¸­æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ 123456789101112131415161718192021@implementation YourOperation - (void)start { self.isExecuting = YES; self.isFinished = NO; // å¼€å§‹å¤„ç†ï¼Œåœ¨ç»“æŸæ—¶åº”è¯¥è°ƒç”¨ finished ... } - (void)finished { self.isExecuting = NO; self.isFinished = YES; }@end//ä½¿æ“ä½œé˜Ÿåˆ—æœ‰å–æ¶ˆåŠŸèƒ½ï¼Œéœ€è¦ä¸æ–­æ£€æŸ¥isCancelledå±æ€§- (void)main{ while (notDone &amp;&amp; !self.isCancelled) { // è¿›è¡Œå¤„ç† }} å®šä¹‰å¥½operationç±»ä»¥åï¼Œå°†ä¸€ä¸ªoperationåŠ åˆ°é˜Ÿåˆ—é‡Œï¼š 123NSOperationQueue *queue = [[NSOperationQueue alloc] init];YourOperation *operation = [[YourOperation alloc] init];[queue addOperation:operation]; å¦‚æœæ˜¯åœ¨ä¸»é˜Ÿåˆ—ä¸­è¿›è¡Œä¸€ä¸ªä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œå¯ä»¥å°†blockåŠ åˆ°æ“ä½œé˜Ÿåˆ— 123[[NSOperationQueue mainQueue] addOperationWithBlock:^{ // ä»£ç ...}]; é€šè¿‡maxConcurrentOperationCountå±æ€§æ§åˆ¶ä¸€ä¸ªç‰¹å®šé˜Ÿåˆ—ä¸­å¹¶å‘æ‰§è¡Œæ“ä½œçš„æ•°é‡ã€‚è®¾ç½®ä¸º1å°±æ˜¯ä¸²è¡Œé˜Ÿåˆ—ã€‚ å¯¹operationä¼˜å…ˆçº§æ’åºï¼ŒæŒ‡å®šoperationä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ 1234//ç¡®ä¿operation1å’Œoperation2æ˜¯åœ¨intermediateOperationå’ŒfinishOperationä¹‹å‰æ‰§è¡Œ[intermediateOperation addDependency:operation1];[intermediateOperation addDependency:operation2];[finishedOperation addDependency:intermediateOperation]; NSThreadNSThreadæŠ½è±¡åº¦æœ€é«˜ï¼Œä¹Ÿæ˜¯Appleæ‰€æ¨èçš„ã€‚ç¼ºç‚¹æ˜¯éœ€è¦è‡ªå·±ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œçº¿ç¨‹åŒæ­¥ã€‚çº¿ç¨‹åŒæ­¥å¯¹æ•°æ®åŠ é”ä¼šæœ‰ä¸€å®šç³»ç»Ÿå¼€é”€ã€‚NSThreadå®ç°çš„æŠ€æœ¯æœ‰ä¸‰ç§ Cocoa threads POSIX threads Multiprocessing Services åˆ›å»ºæ–¹å¼123456789101112- (id)initWithTarget:(id)target selector:(SEL)selector object:(id)argument //å®ä¾‹æ–¹æ³•+ (void)detachNewThreadSelector:(SEL)aSelector toTarget:(id)aTarget withObject:(id)anArgument //ç±»æ–¹æ³•//ç›´æ¥åˆ›å»ºçº¿ç¨‹å¹¶ä¸”è¿è¡Œ1ã€[NSThread detachNewThreadSelector:@selector(doSomething:) toTarget:self withObject:nil];//å…ˆåˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œå†è¿è¡Œçº¿ç¨‹æ“ä½œï¼Œè¿è¡Œå‰å¯ä»¥è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ç­‰çº¿ç¨‹ä¿¡æ¯ã€‚2ã€NSThread* myThread = [[NSThread alloc] initWithTarget:selfselector:@selector(doSomething:)object:nil];[myThread start];//ä¸æ˜¾å¼åˆ›å»ºçº¿ç¨‹çš„æ–¹æ³•ï¼Œä½¿ç”¨NSObjectçš„ç±»æ–¹æ³•åˆ›å»ºä¸€ä¸ªçº¿ç¨‹3ã€[Obj performSelectorInBackground:@selector(doSomething) withObject:nil]; ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031#import &quot;ViewController.h&quot;#define kURL @&quot;https://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;@interface ViewController ()@end@implementation ViewController-(void)downloadImage:(NSString *) url{ NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]]; UIImage *image = [[UIImage alloc]initWithData:data]; if(image == nil){ }else{ //æ›´æ–°ä¸»çº¿ç¨‹å¤–çš„æ•°æ®ä½¿ç”¨performSelector:onThread:withObject:waitUntilDone: [self performSelectorOnMainThread:@selector(updateUI:) withObject:image waitUntilDone:YES]; }}-(void)updateUI:(UIImage*) image{ self.imageView.image = image;}- (void)viewDidLoad{ [super viewDidLoad];// [NSThread detachNewThreadSelector:@selector(downloadImage:) toTarget:self withObject:kURL]; NSThread *thread = [[NSThread alloc]initWithTarget:self selector:@selector(downloadImage:) object:kURL]; [thread start];}@end NSThreadçš„çº¿ç¨‹åŒæ­¥ï¼Œä½¿ç”¨NSLockå–ç¥¨çš„ä¾‹å­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#import &lt;UIKit/UIKit.h&gt;@class ViewController;@interface AppDelegate : UIResponder &lt;UIApplicationDelegate&gt;{ int tickets; int count; NSThread* ticketsThreadone; NSThread* ticketsThreadtwo; NSCondition* ticketsCondition; NSLock *theLock;}@property (strong, nonatomic) UIWindow *window;@property (strong, nonatomic) ViewController *viewController;@end- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ tickets = 100; count = 0; theLock = [[NSLock alloc] init]; // é”å¯¹è±¡ ticketsCondition = [[NSCondition alloc] init]; ticketsThreadone = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [ticketsThreadone setName:@&quot;Thread-1&quot;]; [ticketsThreadone start]; ticketsThreadtwo = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [ticketsThreadtwo setName:@&quot;Thread-2&quot;]; [ticketsThreadtwo start]; self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; // Override point for customization after application launch. self.viewController = [[ViewController alloc] initWithNibName:@&quot;ViewController&quot; bundle:nil]; self.window.rootViewController = self.viewController; [self.window makeKeyAndVisible]; return YES;}- (void)run{ while (TRUE) { // ä¸Šé” // [ticketsCondition lock]; [theLock lock]; if(tickets &gt;= 0){ [NSThread sleepForTimeInterval:0.09]; count = 100 - tickets; NSLog(@&quot;å½“å‰ç¥¨æ•°æ˜¯:%d,å”®å‡º:%d,çº¿ç¨‹å:%@&quot;,tickets,count,[[NSThread currentThread] name]); tickets--; }else{ break; } [theLock unlock]; // [ticketsCondition unlock]; }} æ²¡æœ‰çº¿ç¨‹åŒæ­¥lock,å–ç¥¨æ•°å¯èƒ½ä¼šæ˜¯-1.åŠ ä¸Šèƒ½å¤Ÿä¿è¯æ•°æ®çš„æ­£ç¡®ã€‚ NSThreadçº¿ç¨‹çš„é¡ºåºæ‰§è¡ŒåŒæ­¥å¯ä»¥é€šè¿‡[NSCondition signal]çš„æ–¹å¼å‘é€ä¿¡å·ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹å”¤é†’å¦ä¸€ä¸ªçº¿ç¨‹ç­‰å¾… 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#import &quot;AppDelegate.h&quot;#import &quot;ViewController.h&quot;@implementation AppDelegate- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ tickets = 100; count = 0; theLock = [[NSLock alloc] init]; // é”å¯¹è±¡ ticketsCondition = [[NSCondition alloc] init]; ticketsThreadone = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [ticketsThreadone setName:@&quot;Thread-1&quot;]; [ticketsThreadone start]; ticketsThreadtwo = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [ticketsThreadtwo setName:@&quot;Thread-2&quot;]; [ticketsThreadtwo start]; NSThread *ticketsThreadthree = [[NSThread alloc] initWithTarget:self selector:@selector(run3) object:nil]; [ticketsThreadthree setName:@&quot;Thread-3&quot;]; [ticketsThreadthree start]; self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; // Override point for customization after application launch. self.viewController = [[ViewController alloc] initWithNibName:@&quot;ViewController&quot; bundle:nil]; self.window.rootViewController = self.viewController; [self.window makeKeyAndVisible]; return YES;}-(void)run3{ while (YES) { [ticketsCondition lock]; [NSThread sleepForTimeInterval:3]; [ticketsCondition signal]; [ticketsCondition unlock]; }}- (void)run{ while (TRUE) { // ä¸Šé” [ticketsCondition lock]; [ticketsCondition wait]; [theLock lock]; if(tickets &gt;= 0){ [NSThread sleepForTimeInterval:0.09]; count = 100 - tickets; NSLog(@&quot;å½“å‰ç¥¨æ•°æ˜¯:%d,å”®å‡º:%d,çº¿ç¨‹å:%@&quot;,tickets,count,[[NSThread currentThread] name]); tickets--; }else{ break; } [theLock unlock]; [ticketsCondition unlock]; }} waitæ˜¯ç­‰å¾…ï¼Œå‡å•Šä¸€ä¸ªçº¿ç¨‹3å»å”¤é†’å…¶å®ƒä¸¤ä¸ªçº¿ç¨‹é”ä¸­çš„wait å…¶å®ƒåŒæ­¥å¯ä»¥ä½¿ç”¨@synchronizedæ¥ç®€åŒ–NSLockä½¿ç”¨ï¼Œè¿™æ ·å°±ä¸å¿…æ˜¾ç¤ºç¼–å†™åˆ›å»ºNSLockåŠ é”å¹¶è§£é”ç›¸å…³ä»£ç ã€‚ 1234567- (void)doSomeThing:(id)anObj{ @synchronized(anObj) { // Everything between the braces is protected by the @synchronized directive. }} è¿˜æœ‰äº›å…¶å®ƒçš„é”å¯¹è±¡ï¼Œæ¯”å¦‚å¾ªç¯é”NSRecursiveLockï¼Œæ¡ä»¶é”NSConditionLockï¼Œåˆ†å¸ƒå¼é”NSDistributedLockç­‰ï¼Œå¯æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚ Run Loops Run loopæ¯”GCDå’Œæ“ä½œé˜Ÿåˆ—è¦å®¹æ˜“ï¼Œä¸å¿…å¤„ç†å¹¶å‘ä¸­å¤æ‚æƒ…å†µå°±èƒ½å¼‚æ­¥æ‰§è¡Œã€‚ ä¸»çº¿ç¨‹é…ç½®main run loopï¼Œå…¶å®ƒçº¿ç¨‹é»˜è®¤éƒ½æ²¡æœ‰é…ç½®run loopã€‚ä¸€èˆ¬éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ååˆ†é…ç»™å…¶å®ƒé˜Ÿåˆ—ã€‚å¦‚æœè¦åœ¨å…¶å®ƒçº¿ç¨‹æ·»åŠ run loopè‡³å°‘æ·»åŠ ä¸€ä¸ªinput sourceï¼Œä¸ç„¶ä¸€è¿è¡Œå°±ä¼šé€€å‡ºã€‚ åœ¨åå°æ“ä½œUIä½¿ç”¨æ“ä½œé˜Ÿåˆ—å¤„ç†123456789//weakå¼•ç”¨å‚ç…§selfé¿å…å¾ªç¯å¼•ç”¨ï¼ŒåŠblockæŒæœ‰selfï¼ŒoperationQueue retainäº†blockï¼Œè€Œselfæœ‰retainäº†operationQueueã€‚__weak id weakSelf = self;[self.operationQueue addOperationWithBlock:^{ NSNumber* result = findLargestMersennePrime(); [[NSOperationQueue mainQueue] addOperationWithBlock:^{ MyClass* strongSelf = weakSelf; strongSelf.textLabel.text = [result stringValue]; }];}]; drawRectåœ¨åå°ç»˜åˆ¶drawRect:æ–¹æ³•ä¼šå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥å¯ä»¥æ”¾åˆ°åå°æ‰§è¡Œã€‚ 123456//ä½¿ç”¨UIGraphicsBeginImageContextWithOptionså–ä»£UIGraphicsGetCurrentContext:æ–¹æ³•UIGraphicsBeginImageContextWithOptions(size, NO, 0);// drawing code hereUIImage *i = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return i; å¯ä»¥æŠŠè¿™ä¸ªæ–¹æ³•è¿ç”¨åˆ°table viewä¸­ï¼Œä½¿table viewçš„cellåœ¨æ»šå‡ºè¾¹ç•Œæ—¶èƒ½åœ¨didEndDisplayingCellå§”æ‰˜æ–¹æ³•ä¸­å–æ¶ˆã€‚WWDCä¸­æœ‰è®²è§£ï¼šSession 211 â€“ Building Concurrent User Interfaces on iOS https://developer.apple.com/videos/wwdc/2012/ è¿˜æœ‰ä¸ªä½¿ç”¨CALayeré‡ŒdrawsAsynchronouslyå±æ€§çš„æ–¹æ³•ã€‚ä¸è¿‡æœ‰æ—¶workï¼Œæœ‰æ—¶ä¸ä¸€å®šã€‚ ç½‘ç»œå¼‚æ­¥è¯·æ±‚ç½‘ç»œéƒ½è¦ä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼Œä½†æ˜¯ä¸è¦ç›´æ¥ä½¿ç”¨dispatch_asyncï¼Œè¿™æ ·æ²¡æ³•å–æ¶ˆè¿™ä¸ªç½‘ç»œè¯·æ±‚ã€‚dataWithContentsOfURL:çš„è¶…æ—¶æ˜¯30ç§’ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹éœ€è¦å¹²ç­‰åˆ°è¶…æ—¶å®Œã€‚è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨NSURLConnectionçš„å¼‚æ­¥æ–¹æ³•ï¼ŒæŠŠæ‰€æœ‰æ“ä½œè½¬åŒ–æˆoperationæ¥æ‰§è¡Œã€‚NSURLConnectionæ˜¯é€šè¿‡run loopæ¥å‘é€äº‹ä»¶çš„ã€‚AFNetworkingæ˜¯å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è®¾ç½®ä¸€ä¸ªémain run loopã€‚ä¸‹é¢æ˜¯å¤„ç†URLè¿æ¥é‡å†™è‡ªå®šä¹‰operationå­ç±»é‡Œçš„startæ–¹æ³• 1234567891011- (void)start{ NSURLRequest* request = [NSURLRequest requestWithURL:self.url]; self.isExecuting = YES; self.isFinished = NO; [[NSOperationQueue mainQueue] addOperationWithBlock:^ { self.connection = [NSURLConnectionconnectionWithRequest:request delegate:self]; }];} é‡å†™startæ–¹æ³•éœ€è¦ç®¡ç†isExecutingå’ŒisFinishedçŠ¶æ€ã€‚ä¸‹é¢æ˜¯å–æ¶ˆæ“ä½œçš„æ–¹æ³• 123456789101112131415- (void)cancel{ [super cancel]; [self.connection cancel]; self.isFinished = YES; self.isExecuting = NO;}//è¿æ¥å®Œæˆå‘é€å›è°ƒ- (void)connectionDidFinishLoading:(NSURLConnection *)connection{ self.data = self.buffer; self.buffer = nil; self.isExecuting = NO; self.isFinished = YES;} åå°å¤„ç†I/Oå¼‚æ­¥å¤„ç†æ–‡ä»¶å¯ä»¥ä½¿ç”¨NSInputStreamã€‚å®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/TechniquesforReadingandWritingCustomFiles/TechniquesforReadingandWritingCustomFiles.html å®ä¾‹ï¼šhttps://github.com/objcio/issue-2-background-file-io 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364@interface Reader : NSObject- (void)enumerateLines:(void (^)(NSString*))block completion:(void (^)())completion;- (id)initWithFileAtPath:(NSString*)path;//é‡‡ç”¨main run loopçš„äº‹ä»¶å°†æ•°æ®å‘åˆ°åå°æ“ä½œçº¿ç¨‹å»å¤„ç†- (void)enumerateLines:(void (^)(NSString*))blockcompletion:(void (^)())completion{ if (self.queue == nil) { self.queue = [[NSOperationQueue alloc] init]; self.queue.maxConcurrentOperationCount = 1; } self.callback = block; self.completion = completion; self.inputStream = [NSInputStream inputStreamWithURL:self.fileURL]; self.inputStream.delegate = self; [self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; [self.inputStream open]; }@end//input streamåœ¨ä¸»çº¿ç¨‹ä¸­å‘é€ä»£ç†æ¶ˆæ¯ï¼Œæ¥ç€å°±å¯ä»¥åœ¨æ“ä½œé˜Ÿåˆ—åŠ å…¥blockæ“ä½œ- (void)stream:(NSStream*)stream handleEvent:(NSStreamEvent)eventCode{ switch (eventCode) { ... case NSStreamEventHasBytesAvailable: { NSMutableData *buffer = [NSMutableData dataWithLength:4 * 1024]; NSUInteger length = [self.inputStream read:[buffer mutableBytes] maxLength:[buffer length]]; if (0 &lt; length) { [buffer setLength:length]; __weak id weakSelf = self; [self.queue addOperationWithBlock:^{ [weakSelf processDataChunk:buffer]; }]; } break; } ... }}//å¤„ç†æ•°æ®chunkï¼ŒåŸç†å°±æ˜¯æŠŠæ•°æ®åˆ‡æˆå¾ˆå¤šå°å—ï¼Œç„¶åä¸æ–­æ›´æ–°å’Œå¤„ç†bufferç¼“å†²åŒºï¼Œé€å—è¯»å–å’Œå­˜å…¥æ–¹å¼æ¥å¤„ç†å¤§æ–‡ä»¶å“åº”å¿«è€Œä¸”å†…å­˜å¼€é”€ä¹Ÿå°ã€‚- (void)processDataChunk:(NSMutableData *)buffer;{ if (self.remainder != nil) { [self.remainder appendData:buffer]; } else { self.remainder = buffer; } [self.remainder obj_enumerateComponentsSeparatedBy:self.delimiter usingBlock:^(NSData* component, BOOL last) { if (!last) { [self emitLineWithData:component]; } else if (0 &lt; [component length]) { self.remainder = [component mutableCopy]; } else { self.remainder = nil; } }];} å¹¶å‘å¼€å‘ä¼šé‡åˆ°çš„å›°éš¾é—®é¢˜å¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºæ¯”å¦‚ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šæŠŠè®¡ç®—ç»“æœå†™åˆ°ä¸€ä¸ªæ•´å‹æ•°ä¸­ã€‚ä¸ºäº†é˜²æ­¢ï¼Œéœ€è¦ä¸€ç§äº’æ–¥æœºåˆ¶æ¥è®¿é—®å…±äº«èµ„æº äº’æ–¥é”åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªèµ„æºã€‚æŸçº¿ç¨‹è¦è®¿é—®æŸä¸ªå…±äº«èµ„æºå…ˆè·å¾—å…±äº«èµ„æºçš„äº’æ–¥é”ï¼Œå®Œæˆæ“ä½œå†é‡Šæ”¾è¿™ä¸ªäº’æ–¥é”ï¼Œç„¶åå…¶å®ƒçº¿ç¨‹å°±èƒ½è®¿é—®è¿™ä¸ªå…±äº«èµ„æºã€‚ è¿˜æœ‰éœ€è¦è§£å†³æ— åºæ‰§è¡Œé—®é¢˜ï¼Œè¿™æ—¶å°±éœ€è¦å¼•å…¥å†…å­˜å±éšœã€‚ åœ¨Objective-Cä¸­å¦‚æœå±æ€§å£°æ˜ä¸ºatomicå°±èƒ½å¤Ÿæ”¯æŒäº’æ–¥é”ï¼Œä½†æ˜¯å› ä¸ºåŠ è§£é”ä¼šæœ‰æ€§èƒ½ä»£ä»·ï¼Œæ‰€ä»¥ä¸€èˆ¬æ˜¯å£°æ˜noatomicçš„ã€‚ æ­»é”å½“å¤šä¸ªçº¿ç¨‹åœ¨ç›¸äº’ç­‰å¾…å¯¹æ–¹é”ç»“æŸæ—¶å°±ä¼šå‘ç”Ÿæ­»é”ï¼Œç¨‹åºå¯èƒ½ä¼šå¡ä½ã€‚ 1234567891011121314void swap(A, B){ lock(lockA); lock(lockB); int a = A; int b = B; A = b; B = a; unlock(lockB); unlock(lockA);}//ä¸€èˆ¬æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨ç›¸åçš„å€¼åŒæ—¶è°ƒç”¨ä¸Šé¢è¿™ä¸ªæ–¹æ³•å°±å¯èƒ½ä¼šæ­»é”ã€‚çº¿ç¨‹1è·å¾—Xçš„ä¸€ä¸ªé”ï¼Œçº¿ç¨‹2è·å¾—Yçš„ä¸€ä¸ªé”ï¼Œå®ƒä»¬ä¼šåŒæ—¶ç­‰å¾…å¦ä¸€ä¸ªé”çš„é‡Šæ”¾ï¼Œä½†æ˜¯å´æ˜¯æ²¡æ³•ç­‰åˆ°çš„ã€‚swap(X, Y); // çº¿ç¨‹ 1swap(Y, X); // çº¿ç¨‹ 2 ä¸ºäº†é˜²æ­¢æ­»é”ï¼Œéœ€è¦ä½¿ç”¨æ¯”ç®€å•è¯»å†™é”æ›´å¥½çš„åŠæ³•ï¼Œæ¯”å¦‚write preferencehttps://en.wikipedia.org/wiki/Readers%E2%80%93writer_lockï¼Œæˆ–read-copy-updateç®—æ³•https://en.wikipedia.org/wiki/Read-copy-update ä¼˜å…ˆçº§åè½¬è¿è¡Œæ—¶ä½ä¼˜å…ˆçº§ä»»åŠ¡ç”±äºå…ˆå–å¾—äº†é‡Šæ”¾äº†é”çš„å…±äº«èµ„æºè€Œé˜»å¡äº†é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œè¿™ç§æƒ…å†µå«åšä¼˜å…ˆçº§åè½¬ æœ€ä½³å®‰å…¨å®è·µé¿å…é—®é¢˜çš„æ–¹æ³•ä»ä¸»çº¿ç¨‹ä¸­å–åˆ°æ•°æ®ï¼Œåˆ©ç”¨ä¸€ä¸ªæ“ä½œé˜Ÿåˆ—åœ¨åå°å¤„ç†æ•°æ®ï¼Œå®Œåè¿”å›åå°é˜Ÿåˆ—ä¸­å¾—åˆ°çš„æ•°æ®åˆ°ä¸»é˜Ÿåˆ—ä¸­ã€‚è¿™æ ·çš„æ“ä½œä¸ä¼šæœ‰ä»»ä½•é”æ“ä½œã€‚ å¹¶å‘æµ‹è¯• ä½¿ç”¨SenTestingKitæ¡†æ¶æµ‹è¯•ï¼šhttps://github.com/nxtbgthng/SenTestingKitAsync kiwiï¼šhttps://github.com/allending/Kiwi GHunitï¼šhttps://github.com/gabriel/gh-unit/ming1016","link":"/program/ï£¿/ios-bing-fa/"},{"title":"iOSè®¾è®¡æ¨¡å¼","text":"iOS è®¾è®¡æ¨¡å¼ MVC Modelï¼šæ¨¡å‹ Viewï¼šè§†å›¾ Controllerï¼šæ§åˆ¶å™¨ å•ä¾‹å•ä¾‹ä½¿ç”¨æ‡’åŠ è½½æ–¹å¼åœ¨ç¬¬ä¸€æ¬¡å®ä¾‹æ—¶åˆ›å»ºï¼Œå¦‚[NSUserDefaults standardUserDefaults]ï¼Œ[UIApplication sharedApplication]ï¼Œ[UIScreen mainScreen]ï¼Œ[NSFileManager defaultManager] ç³»ç»Ÿçš„å•ä¾‹ç±» UIApplication NSNotificationCenter NSFileManager NSUserDefaults NSURLCache NSHTTPCookieStorage123456789101112131415161718@interfaceLibraryAPI : NSObject + (LibraryAPI*)sharedInstance; @end+ (LibraryAPI*)sharedInstance { // å£°æ˜ä¸€ä¸ªé™æ€å˜é‡å»ä¿å­˜ç±»çš„å®ä¾‹ï¼Œç¡®ä¿å®ƒåœ¨ç±»ä¸­çš„å…¨å±€å¯ç”¨ static LibraryAPI *_sharedInstance = nil; // dispatch_once_tç¡®ä¿åˆå§‹åŒ–å™¨åªæ‰§è¡Œä¸€æ¬¡ static dispatch_once_t oncePredicate; // å•ä¾‹çš„å…³é”®ï¼Œä¸€æ—¦ç±»è¢«åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–å™¨ä¸ä¼šå†è¢«è°ƒç”¨ dispatch_once(&amp;oncePredicate, ^{ _sharedInstance = [[LibraryAPI alloc] init]; }); return _sharedInstance; } 12345678910111213141516171819202122232425262728293031323334353637@implementation XNShareTool /** æ­¥éª¤: 1.ä¸€ä¸ªé™æ€å˜é‡_inastance 2.é‡å†™allocWithZone, åœ¨é‡Œé¢ç”¨dispatch_once, å¹¶è°ƒç”¨super allocWithZone 3.è‡ªå®šä¹‰ä¸€ä¸ªsharedXX, ç”¨æ¥è·å–å•ä¾‹. åœ¨é‡Œé¢ä¹Ÿè°ƒç”¨dispatch_once, å®ä¾‹åŒ–_instance -----------å¯é€‰------------ 4.å¦‚æœè¦æ”¯æŒcopy. åˆ™(å…ˆéµå®ˆNSCopyingåè®®)é‡å†™copyWithZone, ç›´æ¥è¿”å›_instanceå³å¯. */ /**ç¬¬1æ­¥: å­˜å‚¨å”¯ä¸€å®ä¾‹*/ static XNShareTool *_instance; /**ç¬¬2æ­¥: åˆ†é…å†…å­˜å­”å®¶æ—¶éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•. ä¿è¯åˆ†é…å†…å­˜allocæ—¶éƒ½ç›¸åŒ*/ +(id)allocWithZone:(struct _NSZone *)zone{ //è°ƒç”¨dispatch_onceä¿è¯åœ¨å¤šçº¿ç¨‹ä¸­ä¹Ÿåªè¢«å®ä¾‹åŒ–ä¸€æ¬¡ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _instance = [super allocWithZone:zone]; }); return _instance; } /**ç¬¬3æ­¥: ä¿è¯initåˆå§‹åŒ–æ—¶éƒ½ç›¸åŒ*/ +(instancetype)sharedTool{ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _instance = [[XNShareTool alloc] init]; }); return _instance; } /**ç¬¬4æ­¥: ä¿è¯copyæ—¶éƒ½ç›¸åŒ*/ -(id)copyWithZone:(NSZone *)zone{ return _instance; } @end é—¨é¢æ¨¡å¼Facadeæš´éœ²æ¥å£ è£…é¥°å™¨æ¨¡å¼Decoratorå¸¸è§çš„å®ç°æ˜¯Categoryå’ŒDelegationï¼Œ é€‚é…å™¨æ¨¡å¼AdapteråŒ…è£…ä¸€ä¸ªå¯¹è±¡æš´éœ²ä¸€ä¸ªæ ‡å‡†çš„æ¥å£ã€‚å¯ä»¥ä½¿ç”¨åè®®çš„æ–¹å¼å®ç°ï¼Œæ¯”å¦‚UITableViewDelegateï¼ŒUIScrollViewDelegateï¼ŒNSCodingå’ŒNSCopyingåè®®ã€‚ è§‚å¯Ÿè€…æ¨¡å¼ObserverNotificationså’ŒKey-Value Observing(KVO)éƒ½æ˜¯è¿™ä¸ªè®¾è®¡æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼Mementoæ¯”å¦‚NSUserDefaultsï¼Œæˆ–è€…ç”¨ç±»ä¼¼çš„æ–¹å¼è¿›è¡ŒçŠ¶æ€ä¿å­˜ä½¿å¾—å†æ¬¡è¿›å…¥æ—¶èƒ½å¤Ÿå’Œç¦»å¼€æ—¶ä¸€æ ·ã€‚å¯ä»¥ä½¿ç”¨UIApplicationDidEnterBackgroundNotification è¿™ä¸ªé€šçŸ¥å»ä¿å­˜çŠ¶æ€ã€‚ å‘½ä»¤æ¨¡å¼é€šè¿‡Target-Actionæœºåˆ¶å’ŒInvocationå®ç°å‘½ä»¤æ¨¡å¼ ming1016","link":"/program/ï£¿/ios-design-pattern/"},{"title":"iOSå‡½æ•°å“åº”å¼ç¼–ç¨‹ä»¥åŠReactiveCocoaçš„ä½¿ç”¨","text":"æ‰“ç®—åœ¨é¡¹ç›®ä¸­å¤§é¢ç§¯ä½¿ç”¨RACæ¥å¼€å‘ï¼Œæ‰€ä»¥æ•´ç†ä¸€äº›å¸¸ç”¨çš„å®è·µèŒƒä¾‹å’Œæ¯”è¾ƒå®Œæ•´çš„apiè¯´æ˜æ–¹ä¾¿å¼€å‘æ—¶éšæ—¶æŸ¥é˜… å£°æ˜å¼ç¼–ç¨‹æ³›å‹Declarative programmingå‡½æ•°ååº”å¼ç¼–ç¨‹æ˜¯å£°æ˜å¼ç¼–ç¨‹çš„å­ç¼–ç¨‹èŒƒå¼ä¹‹ä¸€ é«˜é˜¶å‡½æ•°éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‡½æ•°ä½œä¸ºè¾“å…¥ã€‚ æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå‡½æ•°è¾“å‡ºã€‚ Objective-cé‡Œä½¿ç”¨blockä½œä¸ºå‡½æ•° 1234[array enumerateObjectsUsingBlock:^(NSNumber *number, NSUInteger idx, BOOL *stop){ NSLog(@&quot;%@&quot;,number);}]; æ˜ å°„map123NSArray * mappedArray = [array rx_mapWithBlock:^id(id each){ return @(pow([each integerValue],2));}]; è¿‡æ»¤filter123NSArray *filteredArray = [array rx_filterWithBlock:^BOOL(id each){ return ([each integerValue] % 2 == 0);}] æŠ˜å fold12345[[array rx_mapWithBlock:^id (id each){ return [each stringValue]; }] rx_foldInitialValue:@&quot;&quot; block:^id (id memo , id each){ return [memo stringByAppendingString:each];}]; Curryingç”¨å‡½æ•°ç”Ÿæˆå¦ä¸€ä¸ªå‡½æ•° 12345678910func filterGenerator(lastnameCondition: String) -&gt; (Staff) -&gt; (Bool) { return {staff in return staff.lastname == lastnameCondition }}let filterWang = filterGenerator(&quot;Wang&quot;) let filterHu = filterGenerator(&quot;Hu&quot;)staffs.filter(filterHu) RACä¸­ä½¿ç”¨é«˜é˜¶å‡½æ•°æ˜ å°„12345678910111213NSArray *array = @[ @1, @2, @3 ];RACSequence * stream = [array rac_sequence];//RACSequenceæ˜¯ä¸€ä¸ªRACStreamçš„å­ç±»ã€‚[stream map:^id (id value){ return @(pow([value integerValue], 2));}];//RACSequenceæœ‰ä¸€ä¸ªæ–¹æ³•è¿”å›æ•°ç»„:arrayNSLog(@&quot;%@&quot;,[stream array]);//é¿å…æ±¡æŸ“å˜é‡çš„ä½œç”¨åŸŸNSLog(@&quot;%@&quot;,[[[array rac_sequence] map:^id (id value){ return @(pow([value integerValue], 2)); }] array]); è¿‡æ»¤123NSLog(@&quot;%@&quot;, [[[array rac_sequence] filter:^BOOL (id value){ return [value integerValue] % 2 == 0; }] array]); æŠ˜å 12345NSLog(@&quot;%@&quot;,[[[array rac_sequence] map:^id (id value){ return [value stringValue]; }] foldLeftWithStart:@&quot;&quot; reduce:^id (id accumulator, id value){ return [accumulator stringByAppendingString:value]; }]); ç»‘å®šé”®å€¼12345678910111213RACSignal * validEmailSignal = [self.textField.rac_textSignal map:^id (NSString *value){ return @([value rangeOfString:@&quot;@&quot;].location != NSNotFound);}];RAC(self.button, enabled) = validEmailSignal;RAC(self.textField, textColor) = [validEmailSignal map: ^id (id value){ if([value boolValue]){ return [UIColor greenColor]; }else{ return [UIColor redColor]; }}]; å®è·µæ¯”è¾ƒå¥½çš„ä¸€ä¸ªå®Œæ•´çš„RACå®è·µçš„ä¾‹å­ï¼šhttps://github.com/ashfurrow/FunctionalReactivePixels ç½‘ç»œè¯·æ±‚ç”Ÿæˆå¯¹åº”model12345678910111213141516171819202122232425262728+ (RACSignal *)importPhotos{ RACReplaySubject * subject = [RACReplaySubject subject]; NSURLRequest * request = [self popularURLRequest]; [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError){ if (data) { id results = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil]; [subject sendNext:[[[results[@&quot;photos&quot;] rac_sequence] map:^id(NSDictionary *photoDictionary){ FRPPhotoModel * model = [FRPPhotoModel new]; [self configurePhotoModel:model withDictionary:photoDictionary]; [self downloadThumbnailForPhotoModel:model]; return model; }] array]]; [subject sendCompleted]; } else{ [subject sendError:connectionError]; } }]; return subject;} è¿‡æ»¤ç›¸åŒå¤§å°çš„å›¾ç‰‡ï¼Œå–å‡ºä»–ä»¬çš„urlï¼Œè¿”å›ç¬¬ä¸€ä¸ª1234567+ (NSString *)urlForImageSize:(NSInteger)size inDictionary:(NSArray *)array{ return [[[[[array rac_sequence] filter:^ BOOL (NSDictionary * value){ return [value[@&quot;size&quot;] integerValue] == size; }] map:^id (id value){ return value[@&quot;url&quot;]; }] array] firstObject];} è§‚å¯Ÿmodelé‡Œçš„å›¾ç‰‡æ•°æ®ï¼Œè¿›è¡Œä¸ºç©ºè¿‡æ»¤åˆ¤æ–­ï¼Œå°†dataè½¬ä¸ºUIImageï¼Œå†æŠŠç»‘å®šæ–°ä¿¡å·çš„å€¼ç»™å¯¹è±¡çš„å…³é”®è·¯å¾„12345678- (void)setPhotoModel:(FRPPhotoModel *)photoModel{ self.subscription = [[[RACObserver(photoModel, thumbnailData) filter:^ BOOL (id value){ return value != nil; }] map:^id (id value){ return [UIImage imageWithData:value]; }] setKeyPath:@keypath(self.imageView, image) onObject:self.imageView];} UITableViewCellå¤ç”¨æ—¶éœ€è¦å–æ¶ˆcellä¸Šå„ä¸ªç»„ä»¶çš„è®¢é˜…1234- (void)perpareForReuse { [super prepareForReuse]; [self.subscription dispose], self.subscription = nil;} Delegateçš„ä½¿ç”¨123456789101112131415161718192021222324252627//æ³¨æ„ï¼šä½ å¿…é¡»retainè¿™ä¸ªdelegateå¯¹è±¡ï¼Œå¦åˆ™ä»–ä»¬å°†ä¼šè¢«é‡Šæ”¾ï¼Œä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªEXC_BAD_ACCESSå¼‚å¸¸ã€‚æ·»åŠ ä¸‹åˆ—ç§æœ‰å±æ€§åˆ°ç”»å»Šè§†å›¾æ§åˆ¶å™¨ï¼š@property (nonatomic, strong) id collectionViewDelegate;//åŒæ—¶ä½ ä¹Ÿéœ€è¦å¯¼å…¥RACDelegateProxy.hï¼Œå› ä¸ºä»–ä¸æ˜¯ReactiveCocoaçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¸åŒ…å«åœ¨ReactiveCocoa.hä¸­ã€‚RACDelegateProxy *viewControllerDelegate = [[RACDelegateProxy alloc] initWithProtocol:@protocol(FRPFullSizePhotoViewControllerDelegate)];[[viewControllerDelegate rac_signalForSelector:@selector(userDidScroll:toPhotoAtIndex:) fromProtocol:@protocol(FRPFullSizePhotoViewControllerDelegate)] subscribeNext:^(RACTuple *value){ @strongify(self); [self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:[value.second integerValue] inSection:0] atScrollPosition:UICollectionViewScrollPositionCenteredVertically animated:NO]; }];self.collectionViewDelegate = [[RACDelegateProxy alloc] initWithProtocol:@protocol(UICollectionViewDelegate)];[[self.collectionViewDelegate rac_signalForSelector:@selector(collectionView:didSelectItemAtIndexPath:)] subscribeNext:^(RACTuple *arguments) { @strongify(self); FRPFullSizePhotoViewController *viewController = [[FRPFullSizePhotoViewController alloc] initWithPhotoModels:self.photosArray currentPhotoIndex:[(NSIndexPath *)arguments.second item]]; viewController.delegate = (id&lt;FRPFullSizePhotoViewControllerDelegate&gt;)viewControllerDelegate; [self.navigationController pushViewController:viewController animated:YES]; }]; å¤„ç†å¼‚å¸¸ï¼Œå®Œæˆæ‰§è¡Œåˆ·æ–°æ“ä½œï¼Œå¼‚å¸¸æ‰“å°æ—¥å¿—ï¼Œæ‰§è¡Œå¯¹åº”æ–¹æ³•12345RAC(self, photosArray) = [[[[FRPPhotoImporter importPhotos] doCompleted:^{ @strongify(self); [self.collectionView reloadData]; }] logError] catchTo:[RACSignal empty]]; ç½‘ç»œè¯·æ±‚å¤„ç†æ•°æ®ï¼Œè·å–æ•°æ®è¿”å›ä¸»çº¿ç¨‹123456789101112131415161718192021+ (RACSignal *)importPhotos { NSURLRequest *request = [self popularURLRequest]; return [[[[[[NSURLConnection rac_sendAsynchronousRequest:request] reduceEach:^id(NSURLResponse *response , NSData *data){ //æ³¨æ„ï¼šæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„reduceEach:æ›¿ä»£ä½¿ç”¨RACTupleçš„ç¬¬ä¸€ä¸ªmap:ï¼Œä»¥ä¾¿æä¾›ç¼–è¯‘æ—¶æ£€æŸ¥ã€‚ return data; }] deliverOn:[RACScheduler mainThreadScheduler]] map:^id (NSData *data) { id results = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil]; return [[[results[@&quot;photo&quot;] rac_sequence] map:^id (NSDictionary *photoDictionary) { FRPPhotoModel *model = [FRPPhotoModel new]; [self configurePhotoModel:model withDictionary:photoDictionary]; [self downloadThumbnailForPhotoModel:model]; return model; }] array]; }] publish] autoconnect]; //ä¿¡å·é“¾æ¡æœ€æœ«ç«¯çš„ä¿¡å·æ“ä½œpublish. publishè¿”å›ä¸€ä¸ªRACMulitcastConnection,å½“ä¿¡å·è¿æ¥ä¸Šæ—¶ï¼Œä»–å°†è®¢é˜…è¯¥æ¥æ”¶ä¿¡å·ã€‚autoconnectä¸ºæˆ‘ä»¬åšçš„æ˜¯ï¼šå½“å®ƒè¿”å›çš„ä¿¡å·è¢«è®¢é˜…ï¼Œè¿æ¥åˆ° è¯¥(è®¢é˜…èƒŒåçš„)ä¿¡å·ï¼ˆunderly signalï¼‰ã€‚} ä¿¡å·çš„ä¿¡å·Signal of signalsï¼Œä¸€ä¸ªå¤–éƒ¨ä¿¡å·åŒ…å«ä¸€ä¸ªå†…éƒ¨ä¿¡å·ï¼Œåœ¨è¾“å‡ºä¿¡å·çš„subscribeNext:å—ä¸­è®¢é˜…å†…éƒ¨ä¿¡å·ï¼Œä¼šå¼•èµ·åµŒå¥—éº»çƒ¦ã€‚ä½¿ç”¨flattenMapåä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ä¿¡å·ï¼Œå’Œå…ˆå‰ä¿¡å·å¹³çº§ï¼Œè®¢é˜…ä¼šè®¢é˜…åˆ°è¿”å›çš„æ–°ä¿¡å·é‡Œçš„å€¼ã€‚mapæ–¹æ³•ä¹Ÿæ˜¯åˆ›å»ºä¸€ä¸ªæ–°ä¿¡å·ï¼Œä½†æ˜¯ä¼šå°†è¿”å›çš„ä¿¡å·ä¹Ÿå½“åšå€¼ï¼Œè¿™æ ·å°±å¾—ä¸åˆ°çœŸæ­£éœ€è¦çš„å€¼äº†ã€‚123456[[[self.signInButton rac_signalForControlEvents:UIControlEventTouchUpInside] flattenMap:^RACStream *(id value) { return [self signInSignal];}] subscribeNext:^(id x) { //x NSLog(@&quot;Sign in result: %@&quot;, x);}]; ä¸åŒä¿¡å·é¡ºåºé“¾æ¥ï¼Œç¨‹åºéœ€è¦ç­‰å¾…å‰ä¸€ä¸ªä¿¡å·å‘å‡ºå®Œæˆäº‹ä»¶ï¼ˆsendCompletedï¼‰ï¼Œç„¶åå†è®¢é˜…ä¸‹ä¸€ä¸ªä¿¡å·ï¼ˆthenï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687- (RACSignal *)requestAccessToTwitterSignal{ // å®šä¹‰ä¸€ä¸ªé”™è¯¯ï¼Œå¦‚æœç”¨æˆ·æ‹’ç»è®¿é—®åˆ™å‘é€ NSError *accessError = [NSError errorWithDomain:RWTwitterInstantDomain code:RWTwitterInstantErrorAccessDenied userInfo:nil]; // åˆ›å»ºå¹¶è¿”å›ä¿¡å· @weakify(self) return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { // è¯·æ±‚è®¿é—®twitter @strongify(self) [self.accountStore requestAccessToAccountsWithType:self.twitterAccountType options:nil completion:^(BOOL granted, NSError *error) { // å¤„ç†å“åº” if (!granted) { [subscriber sendError:accessError]; } else { [subscriber sendNext:nil]; [subscriber sendCompleted]; } }]; return nil; }];}//throttleå¯ä»¥é¿å…è¿ç»­è¾“å…¥é€ æˆçš„ä¸å¿…è¦çš„è¯·æ±‚ï¼Œthenä¼šå¿½ç•¥å‰ä¸€ä¸ªä¿¡å·çš„å€¼ï¼Œåº•å±‚çš„å®ç°æ˜¯å…ˆè¿‡æ»¤ä¹‹å‰ä¿¡å·å‘çš„å€¼ï¼Œå†ä½¿ç”¨concatè¿æ¥thenè¿”å›çš„ä¿¡å·ã€‚[[[[[[[self requestAccessToTwitterSignal] then:^RACSignal *{ @strongify(self) return self.searchText.rac_textSignal; }] filter:^BOOL(NSString *text) { @strongify(self) return [self isValidSearchText:text]; }] throttle:0.5] flattenMap:^RACStream *(NSString *text) { @strongify(self) //flattenMapæ¥å°†æ¯ä¸ªnextäº‹ä»¶æ˜ å°„åˆ°ä¸€ä¸ªæ–°çš„è¢«è®¢é˜…çš„ä¿¡å· return [self signalForSearchWithText:text]; }] deliverOn:[RACScheduler mainThreadScheduler]] subscribeNext:^(NSDictionary *jsonSearchResult) { NSArray *statuses = jsonSearchResult[@&quot;statuses&quot;]; NSArray *tweets = [statuses linq_select:^id(id tweet) { return [RWTweet tweetWithStatus:tweet]; }]; [self.resultsViewController displayTweets:tweets]; } error:^(NSError *error) { NSLog(@&quot;An error occurred: %@&quot;, error); }]; - (RACSignal *)signalForSearchWithText:(NSString *)text { // 1 - define the errors NSError *noAccountsError = [NSError errorWithDomain:RWTwitterInstantDomain code:RWTwitterInstantErrorNoTwitterAccounts userInfo:nil]; NSError *invalidResponseError = [NSError errorWithDomain:RWTwitterInstantDomain code:RWTwitterInstantErrorInvalidResponse userInfo:nil]; @weakify(self) return [RACSignal createSignal:^RACDisposable *(id subscriber) { @strongify(self); SLRequest *request = [self requestforTwitterSearchWithText:text]; NSArray *twitterAccounts = [self.accountStore accountsWithAccountType:self.twitterAccountType]; if (twitterAccounts.count == 0) { [subscriber sendError:noAccountsError]; } else { [request setAccount:[twitterAccounts lastObject]]; [request performRequestWithHandler: ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) { if (urlResponse.statusCode == 200) { NSDictionary *timelineData = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingAllowFragments error:nil]; [subscriber sendNext:timelineData]; [subscriber sendCompleted]; } else { [subscriber sendError:invalidResponseError]; } }]; } return nil; }];} å¼‚æ­¥åŠ è½½å›¾ç‰‡1234567891011121314151617181920-(RACSignal *)signalForLoadingImage:(NSString *)imageUrl { RACScheduler *scheduler = [RACScheduler schedulerWithPriority:RACSchedulerPriorityBackground]; return [[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrl]]; UIImage *image = [UIImage imageWithData:data]; [subscriber sendNext:image]; [subscriber sendCompleted]; return nil; }] subscribeOn:scheduler];}cell.twitterAvatarView.image = nil;[[[self signalForLoadingImage:tweet.profileImageUrl] deliverOn:[RACScheduler mainThreadScheduler]] subscribeNext:^(UIImage *image) { cell.twitterAvatarView.image = image; }]; è§‚å¯ŸviewModelé‡Œçš„tableViewçš„æ•°æ®é”®å€¼å’Œå…¨éƒ¨è¯»å–é”®å€¼ï¼Œåªè¦æœ‰ä¸€ä¸ªæœ‰æ–°å€¼å°±ä¼šè°ƒç”¨123456789@weakify(self);[[[RACSignal merge: @[RACObserve(self.viewModel, tweets), RACObserve(self.viewModel, allTweetsLoaded)]] bufferWithTime: 0 onScheduler: [RACScheduler mainThreadScheduler]] subscribeNext: ^(id value) { @strongify(self); [self.tableView reloadData]; }];//bufferWithTimeè®¾ç½®ä¸º0æ˜¯ä¸ºäº†é¿å…åŒä¸€æ—¶åˆ»ä¸¤ä¸ªå€¼è¢«åŒæ—¶è®¾ç½®æ–°å€¼äº§ç”Ÿäº†tableè¿›è¡Œäº†ä¸¤æ¬¡reloadData å°è£…hookæ–¹æ³•ï¼ŒæŸä¸ªselectorè¢«è°ƒç”¨æ—¶ï¼Œå†æ‰§è¡Œä¸€æ®µæŒ‡å®šä»£ç å’Œhookä¸€æ ·ã€‚12345@weakify(self);[[tableView rac_signalForSelector:@selector(layoutSubviews)]subscribeNext:^(id x) { @strongify(self); [self doSomethingBeforeTableViewLayoutSubviews];}]; ä½¿ç”¨RACCommandæ¥å®ç°æŒ‰é’®çš„çŠ¶æ€æ ¹æ®è¾“å…¥é‚®ç®±åˆ¤æ–­é‚®ç®±æ˜¯å¦éæ³•è¿˜æœ‰æäº¤åˆ°æœåŠ¡å™¨åå‡ºé”™å¤„ç†ç­‰Demoçš„githubåœ°å€ï¼šhttps://github.com/olegam/RACCommandExample 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980- (void)bindWithViewModel { RAC(self.viewModel, email) =self.emailTextField.rac_textSignal; self.subscribeButton.rac_command = self.viewModel.subscribeCommand; RAC(self.statusLabel, text) =RACObserve(self.viewModel, statusMessage); }@interface SubscribeViewModel :NSObject @property(nonatomic, strong)RACCommand *subscribeCommand; // writeto this property @property(nonatomic, strong) NSString *email; // read from this property @property(nonatomic, strong) NSString *statusMessage; @end #import &quot;SubscribeViewModel.h&quot; #import &quot;AFHTTPRequestOperationManager+RACSupport.h&quot; #import&quot;NSString+EmailAdditions.h&quot; static NSString *const kSubscribeURL =@&quot;https://reactivetest.apiary.io/subscribers&quot;; @interface SubscribeViewModel () @property(nonatomic, strong) RACSignal*emailValidSignal; @end @implementation SubscribeViewModel - (id)init { self= [super init]; if(self) { [self mapSubscribeCommandStateToStatusMessage]; } returnself; } -(void)mapSubscribeCommandStateToStatusMessage { RACSignal *startedMessageSource = [self.subscribeCommand.executionSignals map:^id(RACSignal *subscribeSignal) { return NSLocalizedString(@&quot;Sending request...&quot;, nil); }]; RACSignal *completedMessageSource = [self.subscribeCommand.executionSignals flattenMap:^RACStream *(RACSignal *subscribeSignal) { return[[[subscribeSignal materialize] filter:^BOOL(RACEvent *event) { return event.eventType == RACEventTypeCompleted; }] map:^id(id value) { return NSLocalizedString(@&quot;Thanks&quot;, nil); }]; }]; RACSignal*failedMessageSource = [[self.subscribeCommand.errors subscribeOn:[RACSchedulermainThreadScheduler]] map:^id(NSError *error) { return NSLocalizedString(@&quot;Error :(&quot;, nil); }]; RAC(self,statusMessage) = [RACSignal merge:@[startedMessageSource, completedMessageSource, failedMessageSource]]; } - (RACCommand *)subscribeCommand { if(!_subscribeCommand) { @weakify(self); _subscribeCommand = [[RACCommand alloc] initWithEnabled:self.emailValidSignal signalBlock:^RACSignal *(id input) { @strongify(self); return [SubscribeViewModel postEmail:self.email]; }]; } return _subscribeCommand; } + (RACSignal *)postEmail:(NSString *)email{ AFHTTPRequestOperationManager*manager = [AFHTTPRequestOperationManager manager]; manager.requestSerializer= [AFJSONRequestSerializer new]; NSDictionary*body = @{@&quot;email&quot;: email ?: @&quot;&quot;}; return [[[manager rac_POST:kSubscribeURL parameters:body] logError] replayLazily]; } - (RACSignal *)emailValidSignal { if(!_emailValidSignal) { _emailValidSignal= [RACObserve(self, email) map:^id(NSString *email) { return@([email isValidEmail]); }]; } return _emailValidSignal; } @end æ›¿æ¢Delegateï¼Œç›´æ¥ä½¿ç”¨RACSubjectRACå†…å­˜ç®¡ç†RACä¼šç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„ä¿¡å·é›†åˆï¼Œä¸€ä¸ªæˆ–å¤šäºä¸€ä¸ªè®¢é˜…è€…å°±å¯ç”¨ï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½è¢«ç§»é™¤äº†ï¼Œä¿¡å·å°±è¢«é‡Šæ”¾äº†ã€‚ RACéœ€è¦æ³¨æ„çš„å†…å­˜é—®é¢˜å®å®šä¹‰12345678910111213141516- (void)viewDidLoad{ [super viewDidLoad]; RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { //1 MTModel *model = [[MTModel alloc] init]; // MTModelæœ‰ä¸€ä¸ªåä¸ºçš„titleçš„å±æ€§ [subscriber sendNext:model]; [subscriber sendCompleted]; return nil; }]; self.flattenMapSignal = [signal flattenMap:^RACStream *(MTModel *model) { //2 return RACObserve(model, title); }]; [self.flattenMapSignal subscribeNext:^(id x) { //3 NSLog(@&quot;subscribeNext - %@&quot;, x); }];} ä¸Šé¢çš„RACObserveä¼šå¼•èµ·å¼•ç”¨ä¸é‡Šæ”¾çš„é—®é¢˜ï¼Œé€šè¿‡RACObserveçš„å®šä¹‰æ¥çœ‹çœ‹ï¼Œé‡Œé¢ä¼šå¯¹selfè¿›è¡ŒæŒæœ‰ã€‚ 12345678#define RACObserve(TARGET, KEYPATH) \\ ({ \\ _Pragma(&quot;clang diagnostic push&quot;) \\ _Pragma(&quot;clang diagnostic ignored \\&quot;-Wreceiver-is-weak\\&quot;&quot;) \\ __weak id target_ = (TARGET); \\ [target_ rac_valuesForKeyPath:@keypath(TARGET, KEYPATH) observer:self]; \\ _Pragma(&quot;clang diagnostic pop&quot;) \\ }) Subjectå¯¹subjectè¿›è¡Œmapè¿™æ ·çš„æ“ä½œï¼Œè¿™æ—¶å°±éœ€è¦sendCompleted 1234567891011121314- (void)viewDidLoad { [super viewDidLoad]; RACSubject *subject = [RACSubject subject]; [subject.rac_willDeallocSignal subscribeCompleted:^{ NSLog(@&quot;subject dealloc&quot;); }]; [[subject map:^id(NSNumber *value) { return @([value integerValue] * 3); }] subscribeNext:^(id x) { NSLog(@&quot;next = %@&quot;, x); }]; [subject sendNext:@1]; } ä½†æ˜¯ä¸ºä»€ä¹ˆsignalè¿›è¡Œmapæ“ä½œï¼Œä¸sendCompletedè€Œä¸ä¼šå†…å­˜æ³„æ¼å‘¢ã€‚å› ä¸ºè°ƒåˆ°bindçš„æ¯”å¦‚mapã€filterã€mergeã€combineLatestã€flattenMapç­‰æ“ä½œå¦‚æœæ˜¯RACSubjectè¿™æ ·ä¼šæŒæœ‰è®¢é˜…è€…çš„ä¿¡å·ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼éœ€è¦sendCompletedã€‚å¯ä»¥å…ˆçœ‹çœ‹bindçš„å®ç° 1234567891011121314151617181920- (RACSignal *)bind:(RACStreamBindBlock (^)(void))block { NSCParameterAssert(block != NULL); /* * -bind: should: * * 1. Subscribe to the original signal of values. * 2. Any time the original signal sends a value, transform it using the binding block. * 3. If the binding block returns a signal, subscribe to it, and pass all of its values through to the subscriber as they&apos;re received. * 4. If the binding block asks the bind to terminate, complete the _original_ signal. * 5. When _all_ signals complete, send completed to the subscriber. * * If any signal sends an error at any point, send that to the subscriber. */ return [[RACSignal createSignal:^(id&lt;RACSubscriber&gt; subscriber) { RACStreamBindBlock bindingBlock = block(); NSMutableArray *signals = [NSMutableArray arrayWithObject:self]; // æ­¤å¤„çœç•¥äº†80è¡Œä»£ç  // ... }] setNameWithFormat:@&quot;[%@] -bind:&quot;, self.name];} didSubscribeçš„å¼€å¤´ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„signalsï¼Œå¹¶ä¸”æŒæœ‰äº†selfï¼Œä¹Ÿå°±æ˜¯æºä¿¡å·ï¼Œä¹Ÿå°±æ˜¯è®¢é˜…è€…æŒæœ‰äº†ä¿¡å·ï¼Œå¦‚æœæ˜¯Subjecté‚£ä¹ˆè¿™ç§ä¿¡å·åˆä¼šæŒæœ‰è®¢é˜…è€…ï¼Œè¿™æ ·å°±å½¢æˆäº†å¾ªç¯å¼•ç”¨ã€‚ ä¸‹é¢çœ‹çœ‹sendCompletedå¦‚ä½•ä¿®å¤çš„å†…å­˜æ³„æ¼ 12345678910111213void (^completeSignal)(RACSignal *, RACDisposable *) = ^(RACSignal *signal, RACDisposable *finishedDisposable) { BOOL removeDisposable = NO; @synchronized (signals) { [signals removeObject:signal]; //1 if (signals.count == 0) { [subscriber sendCompleted]; //2 [compoundDisposable dispose]; //3 } else { removeDisposable = YES; } } if (removeDisposable) [compoundDisposable removeDisposable:finishedDisposable]; //4}; ä»signalsè¿™ä¸ªæ•°ç»„ä¸­ç§»é™¤ä¼ å…¥çš„signalï¼Œä¹Ÿå°±æ˜¯è®©è®¢é˜…çš„signalä¸ä¼šæŒæœ‰subjectè¿™ç§ä¿¡å·ã€‚ è¿˜æœ‰replayè¿™æ ·çš„æ“ä½œï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªRACReplaySubject 12345678910111213RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { [subscriber sendNext:@1]; [subscriber sendCompleted]; // ä¿è¯æºä¿¡å·å‘é€å®Œæˆ return nil;}];RACSignal *replaySignal = [signal replay]; // è¿™é‡Œè¿”å›çš„å…¶å®æ˜¯ä¸€ä¸ªRACReplaySubject[[replaySignal map:^id(NSNumber *value) { return @([value integerValue] * 3);}] subscribeNext:^(id x) { NSLog(@&quot;subscribeNext - %@&quot;, x);}]; çƒ­ä¿¡å·å†·ä¿¡å· çƒ­ä¿¡å·æ˜¯ä¸»åŠ¨çš„ï¼Œä¸è®¢é˜…ä¹Ÿèƒ½å¤ŸæŒ‰æ—¶å‘é€ã€‚å†·ä¿¡å·æ˜¯è¢«åŠ¨çš„ï¼Œåªæœ‰è®¢é˜…æ‰ä¼šå‘é€ã€‚ çƒ­ä¿¡å·å¯ä»¥æœ‰å¤šä¸ªè®¢é˜…è€…ã€‚å†·ä¿¡å·åªèƒ½å¤Ÿä¸€å¯¹ä¸€ï¼Œæœ‰ä¸åŒè®¢é˜…è€…ï¼Œæ¶ˆæ¯ä¼šä»æ–°å®Œæ•´å‘é€ã€‚ RACçš„APIæ‰‹å†Œå¸¸è§ç±»RACSiganl ä¿¡å·ç±»ã€‚ RACEmptySignal ï¼šç©ºä¿¡å·ï¼Œç”¨æ¥å®ç° RACSignal çš„ +empty æ–¹æ³•ï¼› RACReturnSignal ï¼šä¸€å…ƒä¿¡å·ï¼Œç”¨æ¥å®ç° RACSignal çš„ +return: æ–¹æ³•ï¼› RACDynamicSignal ï¼šåŠ¨æ€ä¿¡å·ï¼Œä½¿ç”¨ä¸€ä¸ª block - æ¥å®ç°è®¢é˜…è¡Œä¸ºï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ RACSignal çš„ +createSignal: æ–¹æ³•æ—¶åˆ›å»ºçš„å°±æ˜¯è¯¥ç±»çš„å®ä¾‹ï¼› RACErrorSignal ï¼šé”™è¯¯ä¿¡å·ï¼Œç”¨æ¥å®ç° RACSignal çš„ +error: æ–¹æ³•ï¼› RACChannelTerminal ï¼šé€šé“ç»ˆç«¯ï¼Œä»£è¡¨ RACChannel çš„ä¸€ä¸ªç»ˆç«¯ï¼Œç”¨æ¥å®ç°åŒå‘ç»‘å®šã€‚ RACSubscriber è®¢é˜…è€…RACDisposable ç”¨äºå–æ¶ˆè®¢é˜…æˆ–è€…æ¸…ç†èµ„æºï¼Œå½“ä¿¡å·å‘é€å®Œæˆæˆ–è€…å‘é€é”™è¯¯çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘å®ƒã€‚ RACSerialDisposable ï¼šä½œä¸º disposable çš„å®¹å™¨ä½¿ç”¨ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ª disposable å¯¹è±¡ï¼Œå¹¶ä¸”å…è®¸å°†è¿™ä¸ª disposable å¯¹è±¡é€šè¿‡åŸå­æ“ä½œäº¤æ¢å‡ºæ¥ï¼› RACKVOTrampoline ï¼šä»£è¡¨ä¸€æ¬¡ KVO è§‚å¯Ÿï¼Œå¹¶ä¸”å¯ä»¥ç”¨æ¥åœæ­¢è§‚å¯Ÿï¼› RACCompoundDisposable ï¼šå®ƒå¯ä»¥åŒ…å«å¤šä¸ª disposable å¯¹è±¡ï¼Œå¹¶ä¸”æ”¯æŒæ‰‹åŠ¨æ·»åŠ å’Œç§»é™¤ disposable å¯¹è±¡ RACScopedDisposable ï¼šå½“å®ƒè¢« dealloc çš„æ—¶å€™è°ƒç”¨æœ¬èº«çš„ -dispose æ–¹æ³•ã€‚ RACSubject ä¿¡å·æä¾›è€…ï¼Œè‡ªå·±å¯ä»¥å……å½“ä¿¡å·ï¼Œåˆèƒ½å‘é€ä¿¡å·ã€‚è®¢é˜…åå‘é€ RACGroupedSignal ï¼šåˆ†ç»„ä¿¡å·ï¼Œç”¨æ¥å®ç° RACSignal çš„åˆ†ç»„åŠŸèƒ½ï¼› RACBehaviorSubject ï¼šé‡æ¼”æœ€åå€¼çš„ä¿¡å·ï¼Œå½“è¢«è®¢é˜…æ—¶ï¼Œä¼šå‘è®¢é˜…è€…å‘é€å®ƒæœ€åæ¥æ”¶åˆ°çš„å€¼ï¼› RACReplaySubject ï¼šé‡æ¼”ä¿¡å·ï¼Œä¿å­˜å‘é€è¿‡çš„å€¼ï¼Œå½“è¢«è®¢é˜…æ—¶ï¼Œä¼šå‘è®¢é˜…è€…é‡æ–°å‘é€è¿™äº›å€¼ã€‚å¯ä»¥å…ˆå‘é€åè®¢é˜… RACTuple å…ƒç»„ç±»,ç±»ä¼¼NSArray,ç”¨æ¥åŒ…è£…å€¼.RACSequence RACä¸­çš„é›†åˆç±»RACCommand RACä¸­ç”¨äºå¤„ç†äº‹ä»¶çš„ç±»ï¼Œå¯ä»¥æŠŠäº‹ä»¶å¦‚ä½•å¤„ç†,äº‹ä»¶ä¸­çš„æ•°æ®å¦‚ä½•ä¼ é€’ï¼ŒåŒ…è£…åˆ°è¿™ä¸ªç±»ä¸­ï¼Œä»–å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›‘æ§äº‹ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ã€‚RACMulticastConnection ç”¨äºå½“ä¸€ä¸ªä¿¡å·ï¼Œè¢«å¤šæ¬¡è®¢é˜…æ—¶ï¼Œä¸ºäº†ä¿è¯åˆ›å»ºä¿¡å·æ—¶ï¼Œé¿å…å¤šæ¬¡è°ƒç”¨åˆ›å»ºä¿¡å·ä¸­çš„blockï¼Œé€ æˆå‰¯ä½œç”¨ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å¤„ç†ã€‚RACScheduler RACä¸­çš„é˜Ÿåˆ—ï¼Œç”¨GCDå°è£…çš„ã€‚ RACImmediateScheduler ï¼šç«‹å³æ‰§è¡Œè°ƒåº¦çš„ä»»åŠ¡ï¼Œè¿™æ˜¯å”¯ä¸€ä¸€ä¸ªæ”¯æŒåŒæ­¥æ‰§è¡Œçš„è°ƒåº¦å™¨ï¼› RACQueueScheduler ï¼šä¸€ä¸ªæŠ½è±¡çš„é˜Ÿåˆ—è°ƒåº¦å™¨ï¼Œåœ¨ä¸€ä¸ª GCD ä¸²è¡Œåˆ—é˜Ÿä¸­å¼‚æ­¥è°ƒåº¦æ‰€æœ‰ä»»åŠ¡ï¼› RACTargetQueueScheduler ï¼šç»§æ‰¿è‡ª RACQueueScheduler ï¼Œåœ¨ä¸€ä¸ªä»¥ä¸€ä¸ªä»»æ„çš„ GCD é˜Ÿåˆ—ä¸º target çš„ä¸²è¡Œé˜Ÿåˆ—ä¸­å¼‚æ­¥è°ƒåº¦æ‰€æœ‰ä»»åŠ¡ï¼› RACSubscriptionScheduler ï¼šä¸€ä¸ªåªç”¨æ¥è°ƒåº¦è®¢é˜…çš„è°ƒåº¦å™¨ã€‚ å¸¸è§ç”¨æ³• rac_signalForSelector : ä»£æ›¿ä»£ç† rac_valuesAndChangesForKeyPath: KVO rac_signalForControlEvents:ç›‘å¬äº‹ä»¶ rac_addObserverForName ä»£æ›¿é€šçŸ¥ rac_textSignalï¼šç›‘å¬æ–‡æœ¬æ¡†æ–‡å­—æ”¹å˜ rac_liftSelector:withSignalsFromArray:Signals:å½“ä¼ å…¥çš„Signals(ä¿¡å·æ•°ç»„)ï¼Œæ¯ä¸€ä¸ªsignaléƒ½è‡³å°‘sendNextè¿‡ä¸€æ¬¡ï¼Œå°±ä¼šå»è§¦å‘ç¬¬ä¸€ä¸ªselectorå‚æ•°çš„æ–¹æ³•ã€‚ å¸¸è§å® RAC(TARGET, [KEYPATH, [NIL_VALUE]])ï¼šç”¨äºç»™æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ç»‘å®š RACObserve(self, name) ï¼šç›‘å¬æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§,è¿”å›çš„æ˜¯ä¿¡å·ã€‚ @weakify(Obj)å’Œ@strongify(Obj) RACTuplePack ï¼šæŠŠæ•°æ®åŒ…è£…æˆRACTupleï¼ˆå…ƒç»„ç±»ï¼‰ RACTupleUnpackï¼šæŠŠRACTupleï¼ˆå…ƒç»„ç±»ï¼‰è§£åŒ…æˆå¯¹åº”çš„æ•°æ® RACChannelTo ç”¨äºåŒå‘ç»‘å®šçš„ä¸€ä¸ªç»ˆç«¯ å¸¸ç”¨æ“ä½œæ–¹æ³• flattenMap map ç”¨äºæŠŠæºä¿¡å·å†…å®¹æ˜ å°„æˆæ–°çš„å†…å®¹ã€‚ concat ç»„åˆ æŒ‰ä¸€å®šé¡ºåºæ‹¼æ¥ä¿¡å·ï¼Œå½“å¤šä¸ªä¿¡å·å‘å‡ºçš„æ—¶å€™ï¼Œæœ‰é¡ºåºçš„æ¥æ”¶ä¿¡å· then ç”¨äºè¿æ¥ä¸¤ä¸ªä¿¡å·ï¼Œå½“ç¬¬ä¸€ä¸ªä¿¡å·å®Œæˆï¼Œæ‰ä¼šè¿æ¥thenè¿”å›çš„ä¿¡å·ã€‚ merge æŠŠå¤šä¸ªä¿¡å·åˆå¹¶ä¸ºä¸€ä¸ªä¿¡å·ï¼Œä»»ä½•ä¸€ä¸ªä¿¡å·æœ‰æ–°å€¼çš„æ—¶å€™å°±ä¼šè°ƒç”¨ zipWith æŠŠä¸¤ä¸ªä¿¡å·å‹ç¼©æˆä¸€ä¸ªä¿¡å·ï¼Œåªæœ‰å½“ä¸¤ä¸ªä¿¡å·åŒæ—¶å‘å‡ºä¿¡å·å†…å®¹æ—¶ï¼Œå¹¶ä¸”æŠŠä¸¤ä¸ªä¿¡å·çš„å†…å®¹åˆå¹¶æˆä¸€ä¸ªå…ƒç»„ï¼Œæ‰ä¼šè§¦å‘å‹ç¼©æµçš„nextäº‹ä»¶ã€‚ combineLatest:å°†å¤šä¸ªä¿¡å·åˆå¹¶èµ·æ¥ï¼Œå¹¶ä¸”æ‹¿åˆ°å„ä¸ªä¿¡å·çš„æœ€æ–°çš„å€¼,å¿…é¡»æ¯ä¸ªåˆå¹¶çš„signalè‡³å°‘éƒ½æœ‰è¿‡ä¸€æ¬¡sendNextï¼Œæ‰ä¼šè§¦å‘åˆå¹¶çš„ä¿¡å·ã€‚ reduceèšåˆ:ç”¨äºä¿¡å·å‘å‡ºçš„å†…å®¹æ˜¯å…ƒç»„ï¼ŒæŠŠä¿¡å·å‘å‡ºå…ƒç»„çš„å€¼èšåˆæˆä¸€ä¸ªå€¼ filter:è¿‡æ»¤ä¿¡å·ï¼Œä½¿ç”¨å®ƒå¯ä»¥è·å–æ»¡è¶³æ¡ä»¶çš„ä¿¡å·. ignore:å¿½ç•¥å®ŒæŸäº›å€¼çš„ä¿¡å·. distinctUntilChanged:å½“ä¸Šä¸€æ¬¡çš„å€¼å’Œå½“å‰çš„å€¼æœ‰æ˜æ˜¾çš„å˜åŒ–å°±ä¼šå‘å‡ºä¿¡å·ï¼Œå¦åˆ™ä¼šè¢«å¿½ç•¥æ‰ã€‚ take:ä»å¼€å§‹ä¸€å…±å–Næ¬¡çš„ä¿¡å· takeLast:å–æœ€åNæ¬¡çš„ä¿¡å·,å‰ææ¡ä»¶ï¼Œè®¢é˜…è€…å¿…é¡»è°ƒç”¨å®Œæˆï¼Œå› ä¸ºåªæœ‰å®Œæˆï¼Œå°±çŸ¥é“æ€»å…±æœ‰å¤šå°‘ä¿¡å·. takeUntil:(RACSignal *):è·å–ä¿¡å·ç›´åˆ°æŸä¸ªä¿¡å·æ‰§è¡Œå®Œæˆ skip:(NSUInteger):è·³è¿‡å‡ ä¸ªä¿¡å·,ä¸æ¥å—ã€‚ switchToLatest:ç”¨äºsignalOfSignalsï¼ˆä¿¡å·çš„ä¿¡å·ï¼‰ï¼Œæœ‰æ—¶å€™ä¿¡å·ä¹Ÿä¼šå‘å‡ºä¿¡å·ï¼Œä¼šåœ¨signalOfSignalsä¸­ï¼Œè·å–signalOfSignalså‘é€çš„æœ€æ–°ä¿¡å·ã€‚ doNext: æ‰§è¡ŒNextä¹‹å‰ï¼Œä¼šå…ˆæ‰§è¡Œè¿™ä¸ªBlock doCompleted: æ‰§è¡ŒsendCompletedä¹‹å‰ï¼Œä¼šå…ˆæ‰§è¡Œè¿™ä¸ªBlock timeoutï¼šè¶…æ—¶ï¼Œå¯ä»¥è®©ä¸€ä¸ªä¿¡å·åœ¨ä¸€å®šçš„æ—¶é—´åï¼Œè‡ªåŠ¨æŠ¥é”™ã€‚ interval å®šæ—¶ï¼šæ¯éš”ä¸€æ®µæ—¶é—´å‘å‡ºä¿¡å· delay å»¶è¿Ÿå‘é€nextã€‚ retryé‡è¯• ï¼šåªè¦å¤±è´¥ï¼Œå°±ä¼šé‡æ–°æ‰§è¡Œåˆ›å»ºä¿¡å·ä¸­çš„block,ç›´åˆ°æˆåŠŸ. replayé‡æ”¾ï¼šå½“ä¸€ä¸ªä¿¡å·è¢«å¤šæ¬¡è®¢é˜…,åå¤æ’­æ”¾å†…å®¹ throttleèŠ‚æµ:å½“æŸä¸ªä¿¡å·å‘é€æ¯”è¾ƒé¢‘ç¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨èŠ‚æµï¼Œåœ¨æŸä¸€æ®µæ—¶é—´ä¸å‘é€ä¿¡å·å†…å®¹ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´è·å–ä¿¡å·çš„æœ€æ–°å†…å®¹å‘å‡ºã€‚ UI - Categoryï¼ˆå¸¸ç”¨æ±‡æ€»ï¼‰rac_prepareForReuseSignalï¼š éœ€è¦å¤ç”¨æ—¶ç”¨ ç›¸å…³UI: MKAnnotationViewã€UICollectionReusableViewã€UITableViewCellã€UITableViewHeaderFooterView rac_buttonClickedSignalï¼šç‚¹å‡»äº‹ä»¶è§¦å‘ä¿¡å· ç›¸å…³UIï¼šUIActionSheetã€UIAlertView rac_commandï¼šbuttonç±»ã€åˆ·æ–°ç±»ç›¸å…³å‘½ä»¤æ›¿æ¢ ç›¸å…³UIï¼šUIBarButtonItemã€UIButtonã€UIRefreshControl rac_signalForControlEvents: control event è§¦å‘ ç›¸å…³UIï¼šUIControl rac_gestureSignal UIGestureRecognizer äº‹ä»¶å¤„ç†ä¿¡å· ç›¸å…³UIï¼šUIGestureRecognizer rac_imageSelectedSignal é€‰æ‹©å›¾ç‰‡çš„ä¿¡å· ç›¸å…³UIï¼šUIImagePickerController rac_textSignal ç›¸å…³UIï¼šUITextFieldã€UITextView å¯å®ç°åŒå‘ç»‘å®šçš„ç›¸å…³API rac_channelForControlEvents: key: nilValue: ç›¸å…³UIï¼šUIControlç±» rac_newDateChannelWithNilValue: ç›¸å…³UIï¼šUIDatePicker rac_newSelectedSegmentIndexChannelWithNilValue: ç›¸å…³UIï¼šUISegmentedControl rac_newValueChannelWithNilValue: ç›¸å…³UIï¼šUISliderã€UIStepper rac_newOnChannel ç›¸å…³UIï¼šUISwitch rac_newTextChannel ç›¸å…³UIï¼šUITextField Foundation - Category ï¼ˆå¸¸ç”¨æ±‡æ€»ï¼‰NSData rac_readContentsOfURL: options: scheduler: æ¯”ocå¤šå‡ºçº¿ç¨‹è®¾ç½® NSDictionary rac_sequence rac_keySequence key é›†åˆ rac_valueSequence value é›†åˆ NSArray rac_sequence ä¿¡å·é›†åˆ NSFileHandle rac_readInBackground åå°çº¿ç¨‹è¯»å– NSInvocation rac_setArgument: atIndex: è®¾ç½®å‚æ•° rac_argumentAtIndex å–æŸä¸ªå‚æ•° rac_returnValue æ‰€å…³è”æ–¹æ³•çš„è¿”å›å€¼ NSNotificationCenter rac_addObserverForName: object:æ³¨å†Œé€šçŸ¥ NSObject rac_willDeallocSignal å¯¹è±¡é”€æ¯æ—¶å‘åŠ¨çš„ä¿¡å· rac_description debugç”¨ rac_observeKeyPath: options: observer: block:ç›‘å¬æŸä¸ªäº‹ä»¶ rac_liftSelector: withSignals: å…¨éƒ¨ä¿¡å·éƒ½nextåœ¨æ‰§è¡Œ rac_signalForSelector: ä»£æ›¿æŸä¸ªæ–¹æ³• rac_signalForSelector:(SEL)selector fromProtocol:ä»£æ›¿ä»£ç† NSString rac_keyPathComponents è·å–ä¸€ä¸ªè·¯å¾„æ‰€æœ‰çš„éƒ¨åˆ† rac_keyPathByDeletingLastKeyPathComponent åˆ é™¤è·¯å¾„æœ€åä¸€éƒ¨åˆ† rac_keyPathByDeletingFirstKeyPathComponent åˆ é™¤è·¯å¾„ç¬¬ä¸€éƒ¨åˆ† rac_readContentsOfURL: usedEncoding: scheduler: æ¯”ä¹‹OCå¤šçº¿ç¨‹è°ƒç”¨ rac_sequence NSURLConnection rac_sendAsynchronousRequest å‘èµ·å¼‚æ­¥è¯·æ±‚ NSUserDefaults rac_channelTerminalForKey ç”¨äºåŒå‘ç»‘å®šï¼Œæ­¤ä¹ƒä¸€ NSEnumerator rac_sequence NSIndexSet rac_sequence NSOrderedSet rac_sequence NSSet rac_sequence RACå›¾ç‰‡ç‰ˆçš„APIæ‰‹å†ŒReactiveCocoa Objective-C ReactiveCocoa Swift RXSwift æœ¬æ–‡å‚è€ƒæ•´ç†è‡ª ReactiveCocoa Tutorial â€“ The Definitive Introduction: Part 1/2 https://www.raywenderlich.com/62699/reactivecocoa-tutorial-pt1 ReactiveCocoa Tutorial â€“ The Definitive Introduction: Part 2/2 https://www.raywenderlich.com/62796/reactivecocoa-tutorial-pt2 iOSçš„å‡½æ•°å“åº”å‹ç¼–ç¨‹ https://www.gitbook.com/book/kevinhm/functionalreactiveprogrammingonios/details ReactiveCocoa Essentials: Understanding and Using RACCommand https://codeblog.shape.dk/blog/2013/12/05/reactivecocoa-essentials-understanding-and-using-raccommand/ iOS ReactiveCocoa æœ€å…¨å¸¸ç”¨APIæ•´ç†ï¼ˆå¯åšä¸ºæ‰‹å†ŒæŸ¥è¯¢ï¼‰https://www.cocoachina.com/ios/20160729/17236.html ReactiveCocoaå’ŒRXSwifté€ŸæŸ¥è¡¨ https://valiantcat.com/2016/07/22/ReactiveCocoaå’ŒRXSwifté€ŸæŸ¥è¡¨/ ReactiveCocoaä¸­æ½œåœ¨çš„å†…å­˜æ³„æ¼åŠè§£å†³æ–¹æ¡ˆhttps://tech.meituan.com/potential-memory-leak-in-reactivecocoa.html?from=timeline&amp;isappinstalled=0 ming1016","link":"/program/ï£¿/ios-han/"},{"title":"iOSå¼€å‘å†…å­˜æ³„éœ²ä¿®å¤","text":"ä¸€ï¼šå†™åœ¨å‰é¢è¯·ä½¿ç”¨ARCï¼ï¼ï¼ å¦‚æœä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ä¸æ”¯æŒARCæœºåˆ¶ï¼Œå¯ä»¥åœ¨target-&gt;build phase-&gt;compile sourcesä¸­é€‰æ‹©å¯¹åº”çš„æºç æ–‡ä»¶å¹¶åœ¨æ°”å€™åŠ å…¥-fno-objc-arcæ ‡ç¤ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå¦‚æœä½ çš„åº”ç”¨å¯¹å†…å­˜æ³„éœ²æ¯”è¾ƒæ•æ„Ÿ(é•¿æ—¶é—´è¿è¡Œæˆ–è€…è€—è´¹è¾ƒå¤šå†…å­˜),æˆ–è€…ä½ å¯¹ä»£ç æœ‰æ´ç™–æ— æ³•å¿å—åŠç‚¹å†…å­˜æ³„éœ²ï¼Œè€Œä½ åˆæ²¡æœ‰å¤§æŠŠçš„æ—¶é—´å’Œç²¾åŠ›å–ä¿®å¤é‚£äº›è™šæ— ç¼¥ç¼ˆçš„æ³„æ¼ç‚¹ï¼Œé‚£ä¹ˆARCå°†æ˜¯ä½ æœ€å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºä¿®å¤æ³„éœ²bugå®åœ¨æ˜¯å¤ªå‘çˆ¹äº†â€¦å¦‚æœä½ ä¸ä¹ æƒ¯ARCï¼Œåˆæˆ–è€…ä½ ä½¿ç”¨çš„SDKç‰ˆæœ¬æ ¹æœ¬ä¸æ”¯æŒARCï¼Œé‚£ä¹ˆï¼Œè¯·çœ‹ä¸‹æ–‡ã€‚ äºŒï¼šä¿®å¤æ–¹æ³•å¥½ï¼Œè¨€å½’æ­£ä¼ ã€‚ æŒ‰æˆ‘ä¸ªäººç†è§£ï¼Œä¿®å¤å†…å­˜æ³„éœ²å¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š ç¬¬ä¸€é˜¶æ®µï¼šç¼–ç å¥½çš„ç¼–ç ä¹ æƒ¯å¯ä»¥æœç»å¤§éƒ¨åˆ†çš„å†…å­˜æ³„éœ²ï¼Œå…·ä½“æ“ä½œè§„èŒƒå¯å‚è§æˆ‘çš„å¦ä¸€ç¯‡åšå®¢iOSç¼–ç¨‹å†…å­˜ç®¡ç†å°ç»“ï¼Œè¿™ä¹Ÿæ˜¯æœç»å†…å­˜æ³„éœ²çš„æœ€å…³é”®é˜¶æ®µã€‚åœ¨æœ¬é˜¶æ®µå¤šèŠ±ä¸€äº›åŠ›æ°”æ”¾åœ¨ç²¾ç¡®çš„å†…å­˜ç®¡ç†ä¸Šï¼Œä½ å°†ä¼šåœ¨è°ƒè¯•é˜¶æ®µèŠ‚çœä¸‹å¤§æŠŠçš„ç”¨äºä¿®å¤æ³„éœ²çš„æ—¶é—´ä¸ç²¾åŠ›ã€‚æ‰€è°“ï¼šç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼ ç¬¬äºŒé˜¶æ®µï¼šé™æ€åˆ†æè¯´ç™½äº†ï¼Œé™æ€åˆ†æå°±æ˜¯ä½¿ç”¨Xcodeè‡ªå¸¦çš„AnalyzeåŠŸèƒ½ï¼ˆProduct-&gt; Analyzeï¼‰ï¼Œå¯¹ä»£ç è¿›è¡Œé™æ€åˆ†æï¼Œå¯¹äºå†…å­˜æ³„éœ²ï¼ˆPotential Memory Leakï¼‰, æœªä½¿ç”¨å±€éƒ¨å˜é‡(dead store)ï¼Œé€»è¾‘é”™è¯¯(Logic Flaws)ä»¥åŠAPIä½¿ç”¨é—®é¢˜(API-usage)ç­‰æ˜ç¡®çš„å±•ç¤ºå‡ºæ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šdead storeæ¯”è¾ƒå¥½å¤„ç†ï¼Œå°†ä»æœªä½¿ç”¨çš„å˜é‡åˆ æ‰å³å¯ã€‚ Memory Leakçš„æç¤ºå…¶å®ä¹Ÿæ¯”è¾ƒå¥½åŠï¼Œå› ä¸ºå…¶æç¤ºå·²ç»è¶³å¤Ÿè¯¦ç»†ï¼Œå…·ä½“åˆ°äº†å…·ä½“æ³„éœ²çš„ä»£ç è¡Œã€‚æ‰¾åˆ°é—®é¢˜å¯¹ç—‡ä¸‹è¯å³å¯, å¿˜è®°release çš„åŠ ä¸Šreleaseï¼Œè¯¥æ”¾autoreleaseçš„åœ°æ–¹åŠ ä¸Šauto releaseã€‚æœ‰ä¸€ä¸ªæƒ…å†µéœ€è¦ç‰¹åˆ«è¯´æ˜ä¸€ä¸‹ï¼Œè§ä¸‹é¢æ‰€ç¤ºä»£ç ï¼š 1234567891011[cpp] view plaincopy&lt;span style=&quot;font-size:12px;&quot;&gt;if ï¼ˆself.dataMember == nil) { self.dataMember = [[NSArray alloc] init]; }&lt;/span&gt; ``` è¿™æ®µä»£ç åœ¨Analyzeçš„æ—¶å€™ä¹Ÿæç¤ºæœ‰å†…å­˜æ³„éœ²ï¼Œå¼€å§‹æˆ‘æ²¡çœ‹å‡ºæ¥ï¼Œåæ¥æ‰å‘ç°ï¼Œç­‰å·å³è¾¹çš„ä¸´æ—¶å˜é‡å´æ˜¯æ˜¯æ³„éœ²äº†çš„ã€‚æ­£ç¡®çš„å†™æ³•åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š [cpp] view plaincopy if (self.dataMember == nil) { self.dataMember = [[[NSArray alloc] init] autorelease]; 12//æˆ–è€… NSArray* temp = [[NSArray alloc] init]; self.dataMember = temp; [temp release]; } æˆ‘æ¯”è¾ƒå€¾å‘äºç¬¬äºŒç§å†™æ³•ï¼Œåˆ°å¤„autoreleaseå¯¹å†…å­˜å ç”¨å’Œæ€§èƒ½è‚¯å®šä¼šæœ‰å¤šå¤šå°‘å°‘çš„å½±å“çš„ã€‚ ä½¿ç”¨Analyzeæ‰¾åˆ°çš„å†…å­˜æ³„éœ²ç‚¹åŸºæœ¬è¿˜æ˜¯å‡†ç¡®çš„ï¼Œä½†æ¯”è¾ƒå‘äººçš„æ˜¯Anayzeå¹¶ä¸èƒ½æ‰¾å‡ºæ‰€ç”¨çš„æ³„éœ²ç‚¹ï¼Œå³ä½¿æŸäº›æä¸ºæ˜æ˜¾çš„æ³„éœ²ç‚¹ä½¿ç”¨Analyzeä¹Ÿæ— æ³•åˆ†æå‡ºæ¥ã€‚è¿™æ—¶å°±éœ€è¦ç»ˆæå¤§æ€å™¨ï¼šInstrumentsç™»åœºäº†ã€‚ ### ç¬¬ä¸‰é˜¶æ®µï¼šåŠ¨æ€åˆ†æ Instrumentsæ˜¯Xcodeè‡ªå¸¦çš„ä¸€ä¸ªå¼ºå¤§çš„åº”ç”¨åˆ†æå·¥å…·ï¼Œå…¶åŠŸèƒ½å¹¶ä¸å±€é™äºå†…å­˜æ³„éœ²çš„åˆ†æä¸Šï¼Œå†…å­˜å ç”¨ã€CPUä½¿ç”¨ç‡ç­‰éƒ½æ˜¯å…¶åˆ†æçš„å¯¹è±¡ï¼Œæœ‰å…´è¶£çš„ç­’å­å¯ä»¥ä»”ç»†ç ”ç©¶ç ”ç©¶ï¼Œå¯¹æé«˜åº”ç”¨çš„è´¨é‡å¤§æœ‰ç›Šå¤„ã€‚ ä½¿ç”¨Instrumentsåˆ†æå†…å­˜æ³„éœ²æ—¶ï¼Œæœ€å¥½ä½¿ç”¨çœŸæœºè¿›è¡Œè°ƒè¯•ï¼Œç¬”è€…å°±ç¢°åˆ°è¿‡åŒä¸€ä»½ä»£ç åœ¨æ¨¡æ‹Ÿå™¨ä¸Šåˆ†ææœ‰æ³„éœ²è€Œå®ä½“æœºä¸Šå°±æ²¡æœ‰çš„æƒ…å†µï¼Œçœ‹æ¥ä¸åŒçš„CPUæ¶æ„(x86 vs ARM)å¯¹å†…å­˜çš„ç®¡ç†è¿˜æ˜¯æœ‰ä¸€å®šå½±å“çš„ã€‚ è¿æ¥å®ä½“æœºåˆ°å¼€å‘æœºï¼Œé€‰æ‹©é€‰æ‹©è¿è¡Œè®¾å¤‡ä¸ºè®¾å¤‡ï¼Œç‚¹å‡»Products-&gt; Profileï¼Œç»è¿‡ç¼–è¯‘åï¼Œä¼šå¼¹å‡ºå¦‚ä¸‹å¯¹è¯æ¡†ï¼š ![](/post-images/1560760181109.png) åŒå‡»Leak, è¿›å…¥å¦‚ä¸‹ç•Œé¢ï¼š ![](/post-images/1560760207240.png) ä¸Šé¢çš„è“è‰²æ¡çŠ¶éƒ¨åˆ†æ˜¯å†…å­˜å ç”¨æƒ…å†µï¼Œè€Œä¸‹é¢çš„ä¾¿æ˜¯å†…å­˜æ³„éœ²æƒ…å†µï¼Œå½“ä¸‹é¢çš„çŠ¶æ€æ å‡ºç°ç²‰è‰²æ¡çŠ¶ç‰©ä½“æ—¶ï¼Œæ­å–œä½ ï¼Œæ³„éœ²å‡ºç°äº†... ![](/post-images/1560760246640.png) å¦‚æœè¿æ°”æ¯”è¾ƒå¥½çš„è¯ï¼Œä¸‹é¢çš„æç¤ºåŒºåŸŸä¼šæ˜ç¡®çš„å‘Šè¯‰ä½ é‚£ä¸ªæ–‡ä»¶å“ªä¸ªå‡½æ•°æœ‰æ³„éœ²å‡ºç°ï¼Œä½†...å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå‡ºç°çš„åªæ˜¯ä¸‹é¢è¿™ç§æ— å˜å¤´çš„æç¤ºï¼š ![](/post-images/1560760276890.png) è¿™æ˜¯è¦é—¹é‚£æ ·... å½“ç„¶ï¼Œä¸Šé¢å›¾ä¸­æ‰€ç¤ºçš„ä¸º5.1.1ç³»ç»Ÿä¸­çš„ä¸€ä¸ªbugï¼Œåœ¨tableviewæ»šåŠ¨çš„è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸€äº›è«åå…¶å¦™çš„æ³„éœ²ç‚¹ï¼ŒåŒæ ·çš„ä»£ç åœ¨5.0.1ä¸­å¹¶ä¸ä¼šå‡ºç°ä¸Šé¢çš„æ³„éœ²é—®é¢˜ã€‚ ä½†è¿™ç§å¾ˆéš¾æ‰¾åˆ°æ³„éœ²æ ¹æºçš„é—®é¢˜ä¼šå¾ˆå¤šï¼Œå¯»æ‰¾è¿™äº›é—®é¢˜éœ€è¦è€—è´¹å¤§é‡çš„æ—¶é—´ä¸ç²¾åŠ›ã€‚ ä¿®å¤æ³„éœ²æœ‰ä¸‹é¢ä¸¤ç§å¤„ç†æ–¹æ³•ï¼š A: å¯¹äºé‚£äº›éå¸¸æ˜æ˜¾çš„æç¤ºï¼Œå¾ˆç®€å•ï¼ŒæŒ‰å›¾ç´¢éª¥ï¼Œæ ¹æ®æç¤ºçš„ä»£ç æ–‡ä»¶å‡½æ•°å’Œæ³„éœ²çš„å¯¹è±¡ç±»å‹åˆ¤æ–­æ³„éœ²ç±»å‹è¿›è¡Œä¿®å¤ã€‚ B: å¯¹äºé‚£äº›ä¸æ˜¯å¾ˆæ˜æ˜¾çš„æç¤ºï¼Œä¾‹å¦‚æç¤ºçš„æ³„æ¼ç‚¹æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åº“æˆ–è€…æŸä¸ªlibï¼Œé‚£ä¹ˆè¿™æ—¶å°±éœ€è¦å›å¿†ä¸€ä¸‹åˆšæ‰ä»€ä¹ˆæ“ä½œä¹‹åå¯¼è‡´äº†æ³„éœ²ï¼Œç„¶åæ‰¾åˆ°ä¸åˆšåˆšçš„æ“ä½œç›¸å…³çš„ä»£ç ï¼Œåœ¨åˆ†ææ³„éœ²çš„ç±»å‹ï¼Œä¾‹å¦‚æ˜¯NSStringæˆ–è€…NSArrayï¼Œæ ¹æ®æ³„éœ²çš„æ•°æ®ç±»å‹æ¥æ¨æµ‹å…·ä½“æ³„éœ²çš„ä»£ç æ®µã€‚è¿™éœ€è¦é‚£ä¹ˆä¸€ç‚¹ç‚¹çš„çµæ„Ÿå’Œè¿æ°”... ## ä¸‰ï¼šæ€»ç»“ ä»¥æˆ‘äº²èº«ç²¾åŠ›æ¥è¯´ï¼Œè°ƒæ³„éœ²æ˜¯å¾ˆçƒ¦çš„ä¸€ä»¶äº‹ï¼ŒèŠ±åœ¨ä¸Šé¢çš„æ—¶é—´å¯èƒ½è¦æ¯”ä½ é¢„æƒ³çš„å¤šå¾—å¤šã€‚ æ‰€ä»¥ï¼Œæ­£å¦‚å‰é¢æåˆ°çš„ï¼Œè¦ä¹ˆåœ¨ç¼–ç è¿‡ç¨‹ä¸­æé«˜å†…å­˜æ§åˆ¶çš„ç²¾ç¡®æ€§ï¼Œè¦ä¹ˆå°±ä¸€åŠ³æ°¸é€¸ï¼Œç›´æ¥ä½¿ç”¨ARCï¼Œè¦æ³„éœ²å»å±å§ï¼","link":"/program/ï£¿/ios-neicun/"},{"title":"iOSå­—ç¬¦ä¸² ","text":"æœç´¢åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœç´¢å­å­—ç¬¦ä¸² æœ€çµæ´»çš„æ–¹æ³• 1- (NSRange)rangeOfString:(NSString *)aString options:(NSStringCompareOptions)mask range:(NSRange)searchRange locale:(NSLocale *)locale æ ¼å¼åŒ–å­—ç¬¦ä¸² 3ä¸ªæ–¹æ³• 123-initWithFormat:-initWithFormat:arguments:+stringWithFormat: æ•´æ•° å¯ä»¥åŒæ—¶å·¥ä½œåœ¨32ä½å’Œ64ä½çš„ 123uint64_t p = 2305843009213693951;NSString *s = [NSString stringWithFormat:@&quot;The ninth Mersenne prime is %llu&quot;, (unsigned long long) p];// &quot;The ninth Mersenne prime is 2305843009213693951&quot; Modifier d, i o, u, x, X hh signed char unsigned char h short unsigned short (none) int unsigned int l(ell) long unsigned long j intmax_t uintmax_t t ptrdiff_t z size_t * è½¬æ¢è§„åˆ™ 12345int m = -150004021;uint n = 150004021U;NSString *s = [NSString stringWithFormat:@&quot;d:%d i:%i o:%o u:%u x:%x X:%X&quot;, m, m, n, n, n, n];// &quot;d:-150004021 i:-150004021 o:1074160465 u:150004021 x:8f0e135 X:8F0E135&quot;//oæ˜¯å…«è¿›åˆ¶ è®¾ç½®æœ€å°å­—æ®µå®½åº¦å’Œæœ€å°æ•°å­—ä½æ•° 123456int m = 42;NSString *s = [NSString stringWithFormat:@&quot;&apos;%4d&apos; &apos;%-4d&apos; &apos;%+4d&apos; &apos;%4.3d&apos; &apos;%04d&apos;&quot;, m, m, m, m, m];// &quot;[ 42] [42 ] [ +42] [ 042] [0042]&quot;m = -42;NSString *s = [NSString stringWithFormat:@&quot;&apos;%4d&apos; &apos;%-4d&apos; &apos;%+4d&apos; &apos;%4.3d&apos; &apos;%04d&apos;&quot;, m, m, m, m, m];// &quot;[ -42] [-42 ] [ -42] [-042] [-042]&quot; %på¯æ‰“å°æŒ‡é’ˆï¼Œå’Œ%#xä¸åŒçš„æ˜¯å®ƒå¯ä»¥åŒæ—¶åœ¨32ä½å’Œ64ä½æ‰§è¡Œ æµ®ç‚¹æ•° ä½¿ç”¨%få’Œ%g 12345double v[5] = {12345, 12, 0.12, 0.12345678901234, 0.0000012345678901234};NSString *s = [NSString stringWithFormat:@&quot;%g %g %g %g %g&quot;, v[0], v[1], v[2], v[3], v[4]];// &quot;12345 12 0.12 0.123457 1.23457e-06&quot;NSString *s = [NSString stringWithFormat:@&quot;%f %f %f %f %f&quot;, v[0], v[1], v[2], v[3], v[4]];// &quot;12345.000000 12.000000 0.120000 0.123457 0.000001&quot; å¤šè¡Œæ–‡å­— ä½¿ç”¨\\næ¥ 12345NSString *limerick = @&quot;A lively young damsel named Menzies\\n&quot;@&quot;Inquired: Â«Do you know what this thenzies?Â»\\n&quot;@&quot;Her aunt, with a gasp,\\n&quot;@&quot;Replied: &quot;It&apos;s a wasp,\\n&quot;@&quot;And you&apos;re holding the end where the stenzies.\\n&quot;; ç­‰ä»·å†™æ³• 1NSString *limerick = @&quot;A lively young damsel named Menzies\\nInquired: Â«Do you know what this thenzies?Â»\\nHer aunt, with a gasp,\\nReplied: &quot;It&apos;s a wasp,\\nAnd you&apos;re holding the end where the stenzies.\\n&quot;; æ›´ç®€æ´çš„æ–¹æ³• 1NSString * string = @&quot;The man &quot; @&quot;who knows everything &quot; @&quot;learns nothing&quot; @&quot;.&quot;; æ›¿æ¢å­—ç¬¦ä¸² NSMutableStringçš„å››ä¸ªæ–¹æ³• 1234-deleteCharactersInRange:-insertString:atIndex:-replaceCharactersInRange:withString:-replaceOccurrencesOfString:withString:options:range: NSStringçš„æ–¹æ³• 123-stringByReplacingOccurrencesOfString:withString:-stringByReplacingOccurrencesOfString:withString:options:range:-stringByReplacingCharactersInRange:withString: NSMutableStringä¸ä¼šåˆ›å»ºæ–°å­—ç¬¦ä¸²ï¼Œæ€§èƒ½ä¼šå¥½ç‚¹ 1234567NSMutableString *string; // å‡è®¾æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªåä¸º string çš„å­—ç¬¦ä¸²// ç°åœ¨è¦å»æ‰å®ƒçš„ä¸€ä¸ªå‰ç¼€ï¼Œåšæ³•å¦‚ä¸‹:NSString *prefix = @&quot;WeDonâ€™tWantThisPrefix&quot;NSRange r = [string rangeOfString:prefix options:NSAnchoredSearch range:NSMakeRange(0, string.length) locale:nil];if (r.location != NSNotFound) { [string deleteCharactersInRange:r];} è¿æ¥å­—ç¬¦ä¸²12NSArray *names = @[&quot;Hildr&quot;, @&quot;Heidrun&quot;, @&quot;Gerd&quot;, @&quot;GuÃ°rÃºn&quot;, @&quot;Freya&quot;, @&quot;Nanna&quot;, @&quot;Siv&quot;, @&quot;SkaÃ°i&quot;, @&quot;GrÃ³a&quot;];NSString *result = [names componentsJoinedByString:@&quot;, &quot;]; å­—ç¬¦ä¸²è§£ææ­£åˆ™è¡¨è¾¾å¼12345678910NSError *error = nil;NSString *pattern = @&quot;(\\\\w+) = #(\\\\p{Hex_Digit}{6})&quot;;NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:patternoptions:0error:&amp;error];NSTextCheckingResult *result = [expression firstMatchInString:stringoptions:0range:NSMakeRange(0, string.length)];NSString *key = [string substringWithRange:[result rangeAtIndex:1]];NSString *value = [string substringWithRange:[result rangeAtIndex:2]]; å°†å­—ç¬¦ä¸²åˆ†è§£æˆæ•°ç»„ï¼Œä½¿ç”¨componentsSeparatedByString:è¿™ä¸ªæ–¹æ³•ï¼Œæˆ–è€…enumerateSubstringsInRange:options:usingBlock:ã€‚å¦‚æœæ˜¯æŒ‰ç…§è¡Œæ¥è¿›è¡Œåˆ†è§£å¯ä»¥ä½¿ç”¨optionè¿™ä¸ªå‚æ•°ä¼ NSStringEnumerationByLines 12345678910111213141516171819NSString *input = @â€œbackgroundColor = #ff0000textColor = #0000ff&quot;NSString *pattern = @&quot;(\\\\w+) = #([\\\\da-f]{6})&quot;;NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:patternoptions:0error:NULL];NSArray *lines = [input componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];NSMutableDictionary *result = [NSMutableDictionary dictionary];for (NSString *line in lines) { NSTextCheckingResult *textCheckingResult = [expression firstMatchInString:line options:0 range:NSMakeRange(0, line.length)]; NSString* key = [line substringWithRange:[textCheckingResult rangeAtIndex:1]]; NSString* value = [line substringWithRange:[textCheckingResult rangeAtIndex:2]]; result[key] = value;}return result; æ‰«æ NSScanner 12345678910111213141516171819202122NSScanner *scanner = [NSScanner scannerWithString:string];//é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰«æå™¨ä¼šè·³è¿‡æ‰€æœ‰ç©ºæ ¼ç¬¦å’Œæ¢è¡Œç¬¦ã€‚ä½†è¿™é‡Œæˆ‘ä»¬åªå¸Œæœ›è·³è¿‡ç©ºæ ¼ç¬¦scanner.charactersToBeSkipped = [NSCharacterSet whitespaceCharacterSet];//å®šä¹‰ä¸€ä¸ªåå…­è¿›åˆ¶å­—ç¬¦é›†NSCharacterSet *hexadecimalCharacterSet =[NSCharacterSet characterSetWithCharactersInString:@&quot;0123456789abcdefABCDEF&quot;];NSMutableDictionary *result = [NSMutableDictionary dictionary];while (!scanner.isAtEnd) { NSString *key = nil; NSString *value = nil; NSCharacterSet *letters = [NSCharacterSet letterCharacterSet]; BOOL didScan = [scanner scanCharactersFromSet:letters intoString:&amp;key] &amp;&amp; [scanner scanString:@&quot;=&quot; intoString:NULL] &amp;&amp; [scanner scanString:@&quot;#&quot; intoString:NULL] &amp;&amp; [scanner scanCharactersFromSet:hexadecimalCharacterSet intoString:&amp;value] &amp;&amp; value.length == 6; result[key] = value; [scanner scanCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:NULL]; // ç»§ç»­æ‰«æä¸‹ä¸€è¡Œ}return result; è§£æå™¨ è®¾è®¡ä¸€ä¸ªèƒ½å¤Ÿç”¨(100,0,255)æˆ–è€…#ff0000è¿™æ ·çš„å­—ç¬¦æ¥å®šä¹‰é¢œè‰²çš„æ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960- (NSDictionary *)parse:(NSString *)string error:(NSError **)error{ self.scanner = [NSScanner scannerWithString:string]; self.scanner.charactersToBeSkipped = [NSCharacterSet whitespaceCharacterSet]; NSMutableDictionary *result = [NSMutableDictionary dictionary]; NSCharacterSet *letters = [NSCharacterSet letterCharacterSet] while (!self.scanner.isAtEnd) { NSString *key = nil; UIColor *value = nil; BOOL didScan = [self.scanner scanCharactersFromSet:letters intoString:&amp;key] &amp;&amp; [self.scanner scanString:@&quot;=&quot; intoString:NULL] &amp;&amp; [self scanColor:&amp;value]; result[key] = value; [self.scanner scanCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:NULL]; // ç»§ç»­æ‰«æä¸‹ä¸€è¡Œ }}- (BOOL)scanColor:(UIColor **)out{ return [self scanHexColorIntoColor:out] || [self scanTupleColorIntoColor:out];}//æ‰«æè®¾ç½®#ff0000è¿™æ ·çš„- (BOOL)scanHexColorIntoColor:(UIColor **)out{ NSCharacterSet *hexadecimalCharacterSet = [NSCharacterSet characterSetWithCharactersInString:@&quot;0123456789abcdefABCDEF&quot;]; NSString *colorString = NULL; if ([self.scanner scanString:@&quot;#&quot; intoString:NULL] &amp;&amp; [self.scanner scanCharactersFromSet:hexadecimalCharacterSet intoString:&amp;colorString] &amp;&amp; colorString.length == 6) { *out = [UIColor colorWithHexString:colorString]; return YES; } return NO;}- (BOOL)scanTupleColorIntoColor:(UIColor **)out{ NSInteger red, green, blue = 0; BOOL didScan = [self.scanner scanString:@&quot;(&quot; intoString:NULL] &amp;&amp; [self.scanner scanInteger:&amp;red] &amp;&amp; [self.scanner scanString:@&quot;,&quot; intoString:NULL] &amp;&amp; [self.scanner scanInteger:&amp;green] &amp;&amp; [self.scanner scanString:@&quot;,&quot; intoString:NULL] &amp;&amp; [self.scanner scanInteger:&amp;blue] &amp;&amp; [self.scanner scanString:@&quot;)&quot; intoString:NULL]; if (didScan) { *out = [UIColor colorWithRed:(CGFloat)red/255. green:(CGFloat)green/255. blue:(CGFloat)blue/255. alpha:1]; return YES; } else { return NO; }} ç¬¦å·åŒ–å¤„ç†å…ˆè¿›æ˜Ÿæ‰«æï¼Œä½¿ç”¨NSScanneræ¥è§£æè¿™ä¸ªè¡¨è¾¾å¼ 12myView.left = otherView.right * 2 + 10viewController.view.centerX + myConstant &lt;= self.view.centerX 1234567891011121314151617181920212223242526272829303132NSScanner *scanner = [NSScanner scannerWithString:contents];NSMutableArray *tokens = [NSMutableArray array];while (![scanner isAtEnd]) { for (NSString *operator in @[@&quot;=&quot;, @&quot;+&quot;, @&quot;*&quot;, @&quot;&gt;=&quot;, @&quot;&lt;=&quot;, @&quot;.&quot;]) { if ([scanner scanString:operator intoString:NULL]) { [tokens addObject:operator]; } }}//æ¥ä¸‹æ¥è¯†åˆ«éç¬¦å·çš„åªåŒ…å«å­—æ¯çš„stringNSString *result = nil;if ([scanner scanCharactersFromSet:[NSCharacterSet letterCharacterSet] intoString:&amp;result]) { [tokens addObject:result];}//NSScanneræœ‰scanDouble:æ¥æ‰«ædoubledouble doubleResult = 0;if ([scanner scanDouble:&amp;doubleResult]) { [tokens addObject:@(doubleResult)];}//å®Œæˆåç”¨å°†éœ€è¦è§£æçš„è¡¨è¾¾å¼æ”¾å…¥è¯•è¯•NSString* example = @&quot;myConstant = 100\\n&quot; @&quot;\\nmyView.left = otherView.right * 2 + 10\\n&quot; @&quot;viewController.view.centerX + myConstant &lt;= self.view.centerX&quot;;NSArray *result = [self.scanner tokenize:example];NSArray *expected = @[@&quot;myConstant&quot;, @&quot;=&quot;, @100, @&quot;myView&quot;, @&quot;.&quot;, @&quot;left&quot;, @&quot;=&quot;, @&quot;otherView&quot;, @&quot;.&quot;, @&quot;right&quot;, @&quot;*&quot;, @2, @&quot;+&quot;, @10, @&quot;viewController&quot;, @&quot;.&quot;, @&quot;view&quot;, @&quot;.&quot;, @&quot;centerX&quot;, @&quot;+&quot;, @&quot;myConstant&quot;, @&quot;&lt;=&quot;, @&quot;self&quot;, @&quot;.&quot;, @&quot;view&quot;, @&quot;.&quot;, @&quot;centerX&quot;];XCTAssertEqualObjects(result, expected); è¿›è¡Œè¯­æ³•è§£æï¼Œéœ€è¦è¯­æ³•åˆ†æåº“æè¿°æˆ‘ä»¬çš„è¯­è¨€ã€‚ä¸‹é¢ä»£ç å°±æ˜¯ä¸ºé‚£ä¸ªå¸ƒå±€çº¦æŸè¯­è¨€å†™çš„è§£æè¯­æ³•ï¼Œç”¨çš„æ‰©å±•çš„å·´ç§‘æ–¯èŒƒå¼EBNFå†™æ³•ï¼š 12345678constraint = expression comparator expressioncomparator = &quot;=&quot; | &quot;&gt;=&quot; | &quot;&lt;=&quot;expression = keyPath &quot;.&quot; attribute addMultiplier addConstantkeyPath = identifier | identifier &quot;.&quot; keyPathattribute = &quot;left&quot; | &quot;right&quot; | &quot;top&quot; | &quot;bottom&quot; | &quot;leading&quot; | &quot;trailing&quot; | &quot;width&quot; | &quot;height&quot; | &quot;centerX&quot; | &quot;centerY&quot; | &quot;baseline&quot;addMultiplier = &quot;*&quot; atomaddConstant = &quot;+&quot; atomatom = number | identifier è¿˜æœ‰å¾ˆå¤šObjective-Cçš„è¯­æ³•è§£æï¼Œæ›´å¤šçš„å¯ä»¥åœ¨CocoaPodsä¸Šæ‰¾åˆ°ï¼šhttps://cocoapods.org/?q=parseã€‚æ¯”è¾ƒå¥½çš„å°±æ˜¯CoreParseï¼Œåœ°å€ï¼šhttps://github.com/beelsebob/CoreParseï¼Œä½†æ˜¯éœ€è¦ä½¿ç”¨å®ƒæ”¯æŒçš„è¯­æ³•ã€‚ä¸‹é¢å°±æ˜¯CoreParseæ”¯æŒçš„æ ¼å¼ï¼š 12345678910111213NSString* grammarString = [@[ @&quot;Atom ::= num@&apos;Number&apos; | ident@&apos;Identifier&apos;;&quot;, @&quot;Constant ::= name@&apos;Identifier&apos; &apos;=&apos; value@&lt;Atom&gt;;&quot;, @&quot;Relation ::= &apos;=&apos; | &apos;&gt;=&apos; | &apos;&lt;=&apos;;&quot;, @&quot;Attribute ::= &apos;left&apos; | &apos;right&apos; | &apos;top&apos; | &apos;bottom&apos; | &apos;leading&apos; | &apos;trailing&apos; | &apos;width&apos; | &apos;height&apos; | &apos;centerX&apos; | &apos;centerY&apos; | &apos;baseline&apos;;&quot;, @&quot;Multiplier ::= &apos;*&apos; num@&apos;Number&apos;;&quot;, @&quot;AddConstant ::= &apos;+&apos; num@&apos;Number&apos;;&quot;, @&quot;KeypathAndAttribute ::= &apos;Identifier&apos; &apos;.&apos; &lt;AttributeOrRest&gt;;&quot;, @&quot;AttributeOrRest ::= att@&lt;Attribute&gt; | &apos;Identifier&apos; &apos;.&apos; &lt;AttributeOrRest&gt;;&quot;, @&quot;Expression ::= &lt;KeypathAndAttribute&gt; &lt;Multiplier&gt;? &lt;AddConstant&gt;?;&quot;, @&quot;LayoutConstraint ::= lhs@&lt;Expression&gt; rel@&lt;Relation&gt; rhs@&lt;Expression&gt;;&quot;, @&quot;Rule ::= &lt;Atom&gt; | &lt;LayoutConstraint&gt;;&quot;,] componentsJoinedByString:@&quot;\\n&quot;]; ä¸€ä¸ªè§„åˆ™åŒ¹é…åè§£æå™¨å°±æ‰¾åˆ°åŒæ ·åç§°çš„ç±» 1234567- (id)parser:(CPParser *)parser didProduceSyntaxTree:(CPSyntaxTree *)syntaxTree NSString *ruleName = syntaxTree.rule.name; if ([ruleName isEqualToString:@&quot;Attribute&quot;]) { return self.layoutAttributes[[[syntaxTree childAtIndex:0] keyword]]; }...} å®Œæ•´çš„è§£æå™¨ä»£ç åœ¨ï¼šhttps://github.com/objcio/issue-9-string-parsingã€‚é‡Œé¢æœ‰ä¸ªè§£æç±»å¯ä»¥ç”¨æ¥è§£æå¤æ‚çš„å¸ƒå±€çº¦æŸï¼Œå¦‚ä¸‹ï¼š 1viewController.view.centerX + 20 &lt;= self.view.centerX * 0.5 å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼Œæ–¹ä¾¿è½¬æ¢æˆNSLayoutConstraintå¯¹è±¡ 123456789(&lt;Expression: self.keyPath=(viewController, view), self.attribute=9, self.multiplier=1, self.constant=20&gt;-1&lt;Expression: self.keyPath=(self, view), self.attribute=9, self.multiplier=0.5, self.constant=0&gt;) å­—ç¬¦ä¸²çš„æ¸²æŸ“UILabel labelé»˜è®¤æ˜¾ç¤ºä¸€è¡Œï¼Œå¦‚æœè®¾ç½®numberOfLinesä¸ºå¤§äº1çš„è¯å¯ä»¥æ˜¾ç¤ºæŒ‡å®šè¡Œæ•°ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™å¤šå°‘è¡Œéƒ½æ˜¾ç¤º attributedTextå±æ€§å¯ä»¥æ˜¾ç¤ºå¯Œæ–‡æœ¬ labelçš„font,textColor,textAlignment,shadowColorå’ŒshadowOffsetå±æ€§å¯ä»¥æ”¹å˜å¤–è§‚ã€‚ æ”¹å˜ç¨‹åºå†…æ‰€æœ‰Labelçš„é£æ ¼ï¼Œå¯ä»¥ä½¿ç”¨[UILabel appearance]æ–¹æ³• UITextField text fieldåªé™äºå•è¡Œ UITextfieldå®ç°äº†UITextInputTraitsåè®®ï¼Œè¿™ä¸ªåè®®éœ€è¦æŒ‡å®šé”®ç›˜å¤–è§‚å’Œæ“ä½œç­‰ç»†èŠ‚ã€‚æ¯”å¦‚æ˜¾ç¤ºä»€ä¹ˆé”®ç›˜å’Œè¿”å›æŒ‰é”®å“åº”ç­‰ å¯ä»¥é€šè¿‡è®¾ç½®å·¦å³è¾…åŠ©è§†å›¾ï¼Œæˆ–è€…è®¾ç½®èƒŒæ™¯æ¥è‡ªå®šä¹‰è¾“å…¥æ¡†é£æ ¼äº†ã€‚ UITextView ç›¸æ¯”è¾ƒUITextFieldï¼Œå®ƒèƒ½å¤Ÿå¤„ç†å¤šè¡Œæ–‡æœ¬ å¯ä»¥ä½¿ç”¨å®šåˆ¶Text Kitï¼Œå®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/Library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/CustomTextProcessing/CustomTextProcessing.html å¯ä»¥ä¸ºlayout managerï¼Œtext containeræˆ–text storageè‡ªå®šä¹‰è¡Œä¸ºæˆ–æ›¿æ¢è‡ªå®šä¹‰å­ç±»ã€‚ åœ¨iOS7ä¹‹å‰æ˜¯åŸºäºWebKitçš„åŠŸèƒ½å°‘ï¼Œä¹‹åä¼šæœ‰å¾ˆå¤šä¸åŒå…·ä½“å¯ä»¥å‚è€ƒè¿™ä¸¤ç¯‡æ–‡ç« ï¼šPeterçš„https://petersteinberger.com/blog/2014/fixing-uitextview-on-ios-7/ï¼ŒBrentçš„https://inessential.com/2014/01/07/uitextview_the_solution TableViewä¸­æ˜¾ç¤ºåŠ¨æ€æ–‡æœ¬Table viewçš„Delegateæœ‰ä¸ªæ–¹æ³•ç”¨æ¥è®¡ç®—é«˜åº¦ï¼štableView:heightForRowAtIndexPath:ã€‚è‡ªå®šä¹‰ä¸€ä¸ªUITableViewCellçš„å­ç±» 1234567- (void)layoutSubviews{ [super layoutSubviews]; self.textLabel.frame = CGRectInset(self.bounds, MyTableViewCellInset, MyTableViewCellInset);} è®¡ç®—çœŸå®é«˜åº¦éœ€è¦ä½¿ç”¨boundingRectWithSize:options:context: è¿™ä¸ªæ–¹æ³• 123456789101112- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{ CGFloat labelWidth = self.tableView.bounds.size.width - MyTableViewCellInset*2; NSAttributedString *text = [self attributedBodyTextAtIndexPath:indexPath]; NSStringDrawingOptions options = NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingUsesFontLeading; CGRect boundingRect = [text boundingRectWithSize:CGSizeMake(labelWidth, CGFLOAT_MAX) options:options context:nil]; return (CGFloat) (ceil(boundingRect.size.height) + MyTableViewCellInset*2);} ä½¿ç”¨Text Kitå’ŒNSAttributedStringè¿›è¡Œå¸ƒå±€å…ˆè®¾ç½®attributes 123456789101112CGFloat const fontSize = 15;NSMutableDictionary *body1stAttributes = [NSMutableDictionary dictionary];body1stAttributes[NSFontAttributeName] = [UIFont fontWithName:@&quot;BodoniSvtyTwoITCTT-Book&quot;size:fontSize];NSMutableParagraphStyle *body1stParagraph = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];body1stParagraph.alignment = NSTextAlignmentJustified;body1stParagraph.minimumLineHeight = fontSize + 3;body1stParagraph.maximumLineHeight = body1stParagraph.minimumLineHeight;body1stParagraph.hyphenationFactor = 0.97;body1stAttributes[NSParagraphStyleAttributeName] = body1stParagraph; è¿™é‡Œå­—ä½“ä¸ºBodoniSvtyTwoITCTTï¼Œå¦‚æœéœ€è¦æŸ¥çœ‹æ›´å¤šå­—ä½“å¯ä»¥ä½¿ç”¨ +[UIFont familyNames]è¿™ä¸ªæ–¹æ³•ã€‚ä¸ºäº†å¾—åˆ°å­—ä½“çš„åå­—ï¼Œå¯ä»¥ä½¿ç”¨ +[UIFont fontNamesForFamilyName:]ã€‚æ¥ä¸‹æ¥åˆ›å»ºæ®µè½çš„å±æ€§ 12345NSMutableDictionary *bodyAttributes = [body1stAttributes mutableCopy];NSMutableParagraphStyle *bodyParagraph = [bodyAttributes[NSParagraphStyleAttributeName] mutableCopy];bodyParagraph.firstLineHeadIndent = fontSize;bodyAttributes[NSParagraphStyleAttributeName] = bodyParagraph; è£…é¥°æ®µè½é£æ ¼ï¼Œä½¿ç”¨è£…é¥°å­—ä½“å°†æ–‡æœ¬å±…ä¸­å¯¹é½ï¼Œè£…é¥°å­—ç¬¦çš„å‰ååŠ ä¸Šç©ºç™½æ®µè½ 12345678NSMutableDictionary *ornamentAttributes = [NSMutableDictionary dictionary];ornamentAttributes[NSFontAttributeName] = [UIFont fontWithName:@&quot;BodoniOrnamentsITCTT&quot; size:36];NSMutableParagraphStyle *ornamentParagraph = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];ornamentParagraph.alignment = NSTextAlignmentCenter;ornamentParagraph.paragraphSpacingBefore = fontSize;ornamentParagraph.paragraphSpacing = fontSize;ornamentAttributes[NSParagraphStyleAttributeName] = ornamentParagraph; æ˜¾ç¤ºæ•°å­—è¡¨æ ¼tableï¼Œè¡¨æ ¼å¸ƒå±€ç¤ºä¾‹ 123456789101112NSCharacterSet *decimalTerminator = [NSCharacterSet characterSetWithCharactersInString:decimalFormatter.decimalSeparator];NSTextTab *decimalTab = [[NSTextTab alloc] initWithTextAlignment:NSTextAlignmentCenter location:100 options:@{NSTabColumnTerminatorsAttributeName:decimalTerminator}];NSTextTab *percentTab = [[NSTextTab alloc] initWithTextAlignment:NSTextAlignmentRight location:200 options:nil];NSMutableParagraphStyle *tableParagraphStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];tableParagraphStyle.tabStops = @[decimalTab, percentTab]; æ˜¾ç¤ºåˆ—è¡¨çš„å±æ€§è®¾ç½®å¦‚ä¸‹ 12345678910NSMutableDictionary *listAttributes = [bodyAttributes mutableCopy];NSMutableParagraphStyle *listParagraph = [listAttributes[NSParagraphStyleAttributeName] mutableCopy];listParagraph.headIndent = fontSize * 3;listParagraph.firstLineHeadIndent = fontSize;NSTextTab *listTab = [[NSTextTab alloc] initWithTextAlignment:NSTextAlignmentNatural location:fontSize * 3 options:nil];listParagraph.tabStops = @[listTab];listAttributes[NSParagraphStyleAttributeName] = listParagraph; å­—ç¬¦ä¸²æœ¬åœ°åŒ– ä½¿ç”¨NSLocalizedStringï¼Œå¯æŸ¥çœ‹æ–‡ç« ã€Šå­—ç¬¦ä¸²æœ¬åœ°åŒ–ã€‹ï¼šï¼ˆä¸­æ–‡ï¼‰ï¼ˆè‹±æ–‡ï¼‰ ming1016","link":"/program/ï£¿/ios-string/"},{"title":"iOSè®¡ç®—Appç¼“å­˜çš„å¤§å°ä»¥åŠæ¸…ç†","text":"ä¸€ã€è®¡ç®—ç¼“å­˜1234567891011121314151617181920212223// ç¼“å­˜å¤§å°- (CGFloat)folderSize{ CGFloat folderSize; //è·å–è·¯å¾„ NSString *cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask,YES)firstObject]; //è·å–æ‰€æœ‰æ–‡ä»¶çš„æ•°ç»„ NSArray *files = [[NSFileManager defaultManager] subpathsAtPath:cachePath]; NSLog(@&quot;æ–‡ä»¶æ•°ï¼š%ld&quot;,files.count); for(NSString *path in files) { NSString*filePath = [cachePath stringByAppendingString:[NSString stringWithFormat:@&quot;/%@&quot;,path]]; //ç´¯åŠ  folderSize += [[NSFileManager defaultManager]attributesOfItemAtPath:filePath error:nil].fileSize; } //è½¬æ¢ä¸ºMä¸ºå•ä½ CGFloat sizeM = folderSize /1024.0/1024.0; return sizeM;} äºŒã€æ¸…é™¤ç¼“å­˜12345678910111213141516171819202122232425262728- (void)removeCache{ //===============æ¸…é™¤ç¼“å­˜============== //è·å–è·¯å¾„ NSString*cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask,YES)objectAtIndex:0]; //è¿”å›è·¯å¾„ä¸­çš„æ–‡ä»¶æ•°ç»„ NSArray*files = [[NSFileManager defaultManager]subpathsAtPath:cachePath]; NSLog(@&quot;æ–‡ä»¶æ•°ï¼š%ld&quot;,[files count]); for(NSString *p in files){ NSError*error; NSString*path = [cachePath stringByAppendingString:[NSString stringWithFormat:@&quot;/%@&quot;,p]]; if([[NSFileManager defaultManager]fileExistsAtPath:path]) { BOOL isRemove = [[NSFileManager defaultManager]removeItemAtPath:path error:&amp;error]; if(isRemove) { NSLog(@&quot;æ¸…é™¤æˆåŠŸ&quot;); //è¿™é‡Œå‘é€ä¸€ä¸ªé€šçŸ¥ç»™å¤–ç•Œï¼Œå¤–ç•Œæ¥æ”¶é€šçŸ¥ï¼Œå¯ä»¥åšä¸€äº›æ“ä½œï¼ˆæ¯”å¦‚UIAlertViewControllerï¼‰ }else{ NSLog(@&quot;æ¸…é™¤å¤±è´¥&quot;); } } }}","link":"/program/ï£¿/ioshuancun/"},{"title":"iOSç•Œé¢å…ƒç´ æŒ‡å—","text":"","link":"/program/ï£¿/ios-zhinan/"},{"title":"iOS å‹ç›Ÿåˆ†äº«ç¬”è®°","text":"1.ä¸‹è½½å‹ç›Ÿåˆ†äº«SDK2.å°† UMSocial æ–‡ä»¶æ‹–å…¥å·¥ç¨‹ (æ³¨:æ ¹æ®ä½ éœ€è¦åˆ†äº«çš„å¹³å°æ¥æ·»åŠ ï¼ŒUMSocial -&gt; SocialLibraries åˆ é™¤ä½ ä¸éœ€è¦çš„å¹³å°ï¼Œå¦åˆ™å¾ˆå åŒ…ä½“ç§¯,æ¯”å¦‚æˆ‘åªéœ€è¦ QQï¼ŒSinaï¼ŒWeChat)3.æ·»åŠ é…ç½®é¡¹ç›® Build Setting -&gt; Lingking -&gt; Other Linker Flags -ObjC ï¼ï¼ï¼å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œæ‰€æœ‰ç¯å¢ƒé…ç½®å¥½ä¹‹åï¼Œç‚¹å‡»åˆ†äº«ï¼ŒUMShareUI å¼¹å‡ºçš„å°†æ²¡æœ‰å¹³å°å¤´åƒé…ç½®ä¾èµ–åº“ 1234561) SystemConfiguration.framework CoreTelephony.framework ImageIO.framework libsqlite3.tbd libz.tbd libc++.tbd 4.è®¾ç½®ATS æ‰¾åˆ°Info.plist å³é”®ï¼ŒOpenAs SourceCode æ·»åŠ ä¸€ä¸‹(åˆ†åˆ«æ˜¯ï¼ŒQQï¼Œå¾®ä¿¡ï¼Œå¾®åš)12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&lt;key&gt;NSAppTransportSecurity&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSExceptionDomains&lt;/key&gt; &lt;dict&gt; &lt;key&gt;renren.com&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;sina.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt; &lt;string&gt;TLSv1.0&lt;/string&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;sina.com.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;sinaimg.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;sinajs.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;weibo.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt; &lt;string&gt;TLSv1.0&lt;/string&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;weibo.com&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt; &lt;string&gt;TLSv1.0&lt;/string&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;/dict&gt; &lt;/dict&gt; 5.è®¾ç½®URLType æ‰¾åˆ°Info.plist å³é”®ï¼ŒOpenAs SourceCode æ·»åŠ ä¸€ä¸‹(åˆ†åˆ«æ˜¯ï¼ŒQQï¼Œå¾®ä¿¡ï¼Œå¾®åš) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;key&gt;CFBundleURLTypes&lt;/key&gt; &lt;array&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLName&lt;/key&gt; &lt;string&gt;&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;wb3921700954&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLName&lt;/key&gt; &lt;string&gt;weixin&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;wxdc1e388c3822c80b&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;tencent1105860513&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;QQ0x41EA17A1&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;wendu.dsbridgedemo&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;/array&gt; 6.è®¾ç½®URLType æ‰¾åˆ°Info.plist å³é”®ï¼ŒOpenAs SourceCode æ·»åŠ ä¸€ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;linkedin&lt;/string&gt; &lt;string&gt;linkedin-sdk2&lt;/string&gt; &lt;string&gt;linkedin-sdk&lt;/string&gt; &lt;string&gt;wechat&lt;/string&gt; &lt;string&gt;weixin&lt;/string&gt; &lt;string&gt;sinaweibohd&lt;/string&gt; &lt;string&gt;sinaweibo&lt;/string&gt; &lt;string&gt;sinaweibosso&lt;/string&gt; &lt;string&gt;weibosdk&lt;/string&gt; &lt;string&gt;weibosdk2.5&lt;/string&gt; &lt;string&gt;mqqapi&lt;/string&gt; &lt;string&gt;mqq&lt;/string&gt; &lt;string&gt;mqqOpensdkSSoLogin&lt;/string&gt; &lt;string&gt;mqqconnect&lt;/string&gt; &lt;string&gt;mqqopensdkdataline&lt;/string&gt; &lt;string&gt;mqqopensdkgrouptribeshare&lt;/string&gt; &lt;string&gt;mqqopensdkfriend&lt;/string&gt; &lt;string&gt;mqqopensdkapi&lt;/string&gt; &lt;string&gt;mqqopensdkapiV2&lt;/string&gt; &lt;string&gt;mqqopensdkapiV3&lt;/string&gt; &lt;string&gt;mqqopensdkapiV4&lt;/string&gt; &lt;string&gt;mqzoneopensdk&lt;/string&gt; &lt;string&gt;wtloginmqq&lt;/string&gt; &lt;string&gt;wtloginmqq2&lt;/string&gt; &lt;string&gt;mqqwpa&lt;/string&gt; &lt;string&gt;mqzone&lt;/string&gt; &lt;string&gt;mqzonev2&lt;/string&gt; &lt;string&gt;mqzoneshare&lt;/string&gt; &lt;string&gt;wtloginqzone&lt;/string&gt; &lt;string&gt;mqzonewx&lt;/string&gt; &lt;string&gt;mqzoneopensdkapiV2&lt;/string&gt; &lt;string&gt;mqzoneopensdkapi19&lt;/string&gt; &lt;string&gt;mqzoneopensdkapi&lt;/string&gt; &lt;string&gt;mqqbrowser&lt;/string&gt; &lt;string&gt;mttbrowser&lt;/string&gt; &lt;string&gt;TencentWeibo&lt;/string&gt; &lt;string&gt;tencentweiboSdkv2&lt;/string&gt; &lt;string&gt;alipay&lt;/string&gt; &lt;string&gt;alipayshare&lt;/string&gt; &lt;string&gt;renrenios&lt;/string&gt; &lt;string&gt;renrenapi&lt;/string&gt; &lt;string&gt;renren&lt;/string&gt; &lt;string&gt;renreniphone&lt;/string&gt; &lt;string&gt;laiwangsso&lt;/string&gt; &lt;string&gt;yixin&lt;/string&gt; &lt;string&gt;yixinopenapi&lt;/string&gt; &lt;string&gt;yixinoauth&lt;/string&gt; &lt;string&gt;yixinfav&lt;/string&gt; &lt;string&gt;laiwangsso&lt;/string&gt; &lt;string&gt;instagram&lt;/string&gt; &lt;string&gt;whatsapp&lt;/string&gt; &lt;string&gt;line&lt;/string&gt; &lt;string&gt;tumblr&lt;/string&gt; &lt;string&gt;fbapi&lt;/string&gt; &lt;string&gt;fb-messenger-api&lt;/string&gt; &lt;string&gt;fbauth2&lt;/string&gt; &lt;string&gt;fbshareextension&lt;/string&gt; &lt;string&gt;kakao6d5e4ca98ba3b944020c2c90953318e9&lt;/string&gt; &lt;string&gt;kakaokompassauth&lt;/string&gt; &lt;string&gt;storykompassauth&lt;/string&gt; &lt;string&gt;kakaolink&lt;/string&gt; &lt;string&gt;kakaotalk-4.5.0&lt;/string&gt; &lt;string&gt;kakaostory-2.9.0&lt;/string&gt; &lt;string&gt;pinterestsdk.v1&lt;/string&gt; &lt;string&gt;dingtalk&lt;/string&gt; &lt;string&gt;dingtalk-open&lt;/string&gt; &lt;string&gt;evernote&lt;/string&gt; &lt;string&gt;en&lt;/string&gt; &lt;string&gt;enx&lt;/string&gt; &lt;string&gt;evernotecid&lt;/string&gt; &lt;string&gt;evernotemsg&lt;/string&gt; &lt;string&gt;youdaonote&lt;/string&gt; &lt;string&gt;ynotedictfav&lt;/string&gt; &lt;string&gt;com.youdao.note.todayViewNote&lt;/string&gt; &lt;string&gt;ynotesharesdk&lt;/string&gt; &lt;string&gt;gplus&lt;/string&gt; &lt;string&gt;pocket&lt;/string&gt; &lt;string&gt;readitlater&lt;/string&gt; &lt;string&gt;pocket-oauth-v1&lt;/string&gt; &lt;string&gt;fb131450656879143&lt;/string&gt; &lt;string&gt;en-readitlater-5776&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterPro3&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterPro&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterProAlpha&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterProEnterprise&lt;/string&gt; &lt;string&gt;vk&lt;/string&gt; &lt;string&gt;vk-share&lt;/string&gt; &lt;string&gt;vkauthorize&lt;/string&gt; &lt;/array&gt; æ¥ä¸‹æ¥å¯ä»¥å¿«ä¹çš„commond + b äº†åˆå§‹åŒ– åœ¨Appdelegate.mä¸­ ï¼Œå¯¼å…¥å¤´æ–‡ä»¶#import &lt;UMSocialCore/UMSocialCore.h&gt; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556//å»ºè®®æŠ½æˆä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•ï¼Œåˆ«åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢æ‰§è¡Œå¤ªå¤šçš„ä¸œè¥¿- (void)initUMShareSdk{ //æ‰“å¼€æ—¥å¿— [[UMSocialManager defaultManager] openLog:YES]; // æ‰“å¼€å›¾ç‰‡æ°´å° //[UMSocialGlobal shareInstance].isUsingWaterMark = YES; // è·å–å‹ç›Ÿsocialç‰ˆæœ¬å· UMSocialLogInfo(@&quot;UMeng social version: %@&quot;, [UMSocialGlobal umSocialSDKVersion]); //è®¾ç½®å‹ç›Ÿappkey [[UMSocialManager defaultManager] setUmSocialAppkey:@â€œyour UMKeyâ€]; //è®¾ç½®å¾®ä¿¡çš„appKeyå’ŒappSecret [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_WechatSession appKey:@&quot;wxdc1e388c3822c80b&quot; appSecret:@&quot;3baf1193c85774b3fd9d18447d76cab0&quot; redirectURL:@&quot;https://zhonfan.com&quot;]; /* * æ·»åŠ æŸä¸€å¹³å°ä¼šåŠ å…¥å¹³å°ä¸‹æ‰€æœ‰åˆ†äº«æ¸ é“ï¼Œå¦‚å¾®ä¿¡ï¼šå¥½å‹ã€æœ‹å‹åœˆã€æ”¶è—ï¼ŒQQï¼šQQå’ŒQQç©ºé—´ * ä»¥ä¸‹æ¥å£å¯ç§»é™¤ç›¸åº”å¹³å°ç±»å‹çš„åˆ†äº«ï¼Œå¦‚å¾®ä¿¡æ”¶è—ï¼Œå¯¹åº”ç±»å‹å¯åœ¨æšä¸¾ä¸­æŸ¥æ‰¾ */ //[[UMSocialManager defaultManager] removePlatformProviderWithPlatformTypes:@[@(UMSocialPlatformType_WechatFavorite)]]; // è®¾ç½®åˆ†äº«åˆ°QQäº’è”çš„appID // U-Share SDKä¸ºäº†å…¼å®¹å¤§éƒ¨åˆ†å¹³å°å‘½åï¼Œç»Ÿä¸€ç”¨appKeyå’ŒappSecretè¿›è¡Œå‚æ•°è®¾ç½®ï¼Œè€ŒQQå¹³å°ä»…éœ€å°†appIDä½œä¸ºU-Shareçš„appKeyå‚æ•°ä¼ è¿›å³å¯ã€‚ [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_QQ appKey:@&quot;1105860513&quot;/*è®¾ç½®QQå¹³å°çš„appID*/ appSecret:nil redirectURL:@&quot;https://zhonfan.com&quot;]; //è®¾ç½®æ–°æµªçš„appKeyå’ŒappSecret [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_Sina appKey:@&quot;3921700954&quot; appSecret:@&quot;04b48b094faeb16683c32669824ebdad&quot; redirectURL:@&quot;https://zhonfan.com&quot;];}//#define __IPHONE_10_0 100000#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt; 100000- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;UIApplicationOpenURLOptionsKey, id&gt; *)options{ BOOL result = [[UMSocialManager defaultManager] handleOpenURL:url]; if (!result) { // å…¶ä»–å¦‚æ”¯ä»˜ç­‰SDKçš„å›è°ƒ } return result;}#endif- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation{ BOOL result = [[UMSocialManager defaultManager] handleOpenURL:url]; if (!result) { // å…¶ä»–å¦‚æ”¯ä»˜ç­‰SDKçš„å›è°ƒ } return result;}- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url{ BOOL result = [[UMSocialManager defaultManager] handleOpenURL:url]; if (!result) { // å…¶ä»–å¦‚æ”¯ä»˜ç­‰SDKçš„å›è°ƒ } return result;} OK AppDelegateè®¾ç½®å®Œæˆï¼Œæ¥ä¸‹æ¥æ˜¯å¦‚ä½•è°ƒç”¨12345/** åˆ†äº« @param obj obj å¯ä¸ºæœ¬åœ°å›¾ç‰‡(UIImageç±»å‹),ç½‘ç»œå›¾ç‰‡,(NSStringç±»å‹,å› ä¸ºåªèƒ½ä¸Šä¼ httpsçš„å›¾ç‰‡ï¼Œæ‰€ä»¥å†…éƒ¨ä½¿ç”¨SDWebImageManagerï¼ŒSDWebImageç¬¬ä¸‰æ–¹åº“çš„ä¸€ä¸ªç±»ï¼Œä½¿ç”¨è¿™ç±»è¿›è¡Œå›¾ç‰‡ä¸‹è½½å¤„ç†) */- (void)shareWithObj:(id)obj; ä½¿ç”¨è¿™ä¸ªåˆ†ç±»è¿›è¡Œå¤„ç†ï¼Œå»ºè®®ä»¥åé‡åˆ°ç±»ä¼¼çš„ï¼Œç»§æ‰¿æˆ–è€…åˆ†ç±»ï¼Œéš”ç¦»ä¸€ä¸‹","link":"/program/ï£¿/iosyoumeng/"},{"title":"ç§»åŠ¨ç«¯ç½‘ç»œè¯·æ±‚ä¼˜åŒ–ä¹‹ IP æµ‹é€Ÿæ’åºæ–¹æ¡ˆ","text":"IP æµ‹é€Ÿæ’åºæ–¹æ¡ˆ 1. IP æµ‹é€Ÿæ’åºæ–¹æ¡ˆçš„ç›®çš„æ— è®ºæ˜¯ä» Local DNS è§£æåŸŸåï¼Œè·å–åˆ° IP åˆ—è¡¨ï¼Œè¿˜æ˜¯ä»ç¬¬ä¸‰æ–¹çš„ DNS è§£ææœåŠ¡ä¸­ï¼Œè·å–åˆ°åŸŸåå¯¹åº”çš„ IP åˆ—è¡¨ã€‚æˆ‘ä»¬è·å¾—å¤šä¸ª IP åï¼Œæ€»æ˜¯æƒ³é€‰å–ä¸€ä¸ªæœ€ä¼˜çš„ IP ä½¿ç”¨ï¼Œæœ¬æ–‡ä¸»è¦æ¢è®¨å¦‚ä½•åœ¨å®¢æˆ·ç«¯æ¢æµ‹ IP çš„è¿æ¥æ€§ä»¥åŠè¿æ¥é€Ÿåº¦ï¼Œä¿è¯è¿”å›å¯ç”¨æ€§æœ€å¥½çš„IPï¼Œä»¥è¾¾åˆ°â€œIPä¼˜é€‰â€çš„ç›®çš„ã€‚ 2. æ–°æµªå¼€æºçš„ httpdns çš„ sdk é‡Œçš„æµ‹é€Ÿé€»è¾‘æ–°æµªå¼€æºä¸€ä¸ª HTTPDNSLib ï¼Œé‡Œé¢åŒ…å«äº†æµ‹é€Ÿé€»è¾‘ï¼ŒGitHubåœ°å€å¦‚ä¸‹ï¼š ã€ŠHTTPDNSLib-for-iOSã€‹ ã€ŠHTTPDNSLibã€‹ 3. IP æµ‹è¯•å®ç°åŸç†ä½¿ç”¨ linux socket connect å’Œ select å‡½æ•°å®ç°çš„ã€‚ åŸºäºä»¥ä¸‹åŸç†ï¼š å³ä½¿å¥—æ¥å£æ˜¯éé˜»å¡çš„ã€‚å¦‚æœè¿æ¥çš„æœåŠ¡å™¨åœ¨åŒä¸€å°ä¸»æœºä¸Šï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨connect å»ºç«‹è¿æ¥æ—¶ï¼Œè¿æ¥é€šå¸¸ä¼šç«‹å³å»ºç«‹æˆåŠŸï¼Œæˆ‘ä»¬å¿…é¡»å¤„ç†è¿™ç§æƒ…å†µã€‚ æºè‡ªBerkeleyçš„å®ç°(å’ŒPosix.1g)æœ‰ä¸¤æ¡ä¸select å’Œéé˜»å¡IOç›¸å…³çš„è§„åˆ™ï¼šA. å½“è¿æ¥å»ºç«‹æˆåŠŸæ—¶ï¼Œå¥—æ¥å£æè¿°ç¬¦å˜æˆå¯å†™ï¼›B. å½“è¿æ¥å‡ºé”™æ—¶ï¼Œå¥—æ¥å£æè¿°ç¬¦å˜æˆæ—¢å¯è¯»åˆå¯å†™ã€‚ è¯¦ç»†çš„æµ‹é€Ÿå®ç°å¦‚ä¸‹ï¼ŒåŸç†å‚è€ƒæ³¨é‡Šï¼š ä»¥ iOS å®ç°ä¸ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889//#define CYL_SOCKET_CONNECT_TIMEOUT 10 //å•ä½ç§’//#define CYL_SOCKET_CONNECT_TIMEOUT_RTT 600000//10åˆ†é’Ÿ å•ä½æ¯«ç§’- (int)testSpeedOf:(NSString *)ip port:(int16_t)port { NSString *oldIp = ip; //request time out float rtt = 0.0; //sockï¼šå°†è¦è¢«è®¾ç½®æˆ–è€…è·å–é€‰é¡¹çš„å¥—æ¥å­—ã€‚ int s = 0; struct sockaddr_in saddr; saddr.sin_family = AF_INET; // MARK: - è®¾ç½®ç«¯å£ï¼Œè¿™é‡Œéœ€è¦æ ¹æ®éœ€è¦è‡ªå®šä¹‰ï¼Œé»˜è®¤æ˜¯80ç«¯å£ã€‚ saddr.sin_port = htons(port); saddr.sin_addr.s_addr = inet_addr([ip UTF8String]); //saddr.sin_addr.s_addr = inet_addr(&quot;1.1.1.123&quot;); if( (s=socket(AF_INET, SOCK_STREAM, 0)) &lt; 0) { NSLog(@&quot;ERROR:%s:%d, create socket failed.&quot;,__FUNCTION__,__LINE__); return 0; } NSDate *startTime = [NSDate date]; NSDate *endTime; //ä¸ºäº†è®¾ç½®connectè¶…æ—¶ æŠŠsocketè®¾ç½®ç§°ä¸ºéé˜»å¡ int flags = fcntl(s, F_GETFL,0); fcntl(s,F_SETFL, flags | O_NONBLOCK); //å¯¹äºé˜»å¡å¼å¥—æ¥å­—ï¼Œè°ƒç”¨connectå‡½æ•°å°†æ¿€å‘TCPçš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼Œè€Œä¸”ä»…åœ¨è¿æ¥å»ºç«‹æˆåŠŸæˆ–è€…å‡ºé”™æ—¶æ‰è¿”å›ï¼› //å¯¹äºéé˜»å¡å¼å¥—æ¥å­—ï¼Œå¦‚æœè°ƒç”¨connectå‡½æ•°ä¼šä¹‹é—´è¿”å›-1ï¼ˆè¡¨ç¤ºå‡ºé”™ï¼‰ï¼Œä¸”é”™è¯¯ä¸ºEINPROGRESSï¼Œè¡¨ç¤ºè¿æ¥å»ºç«‹ï¼Œå»ºç«‹å¯åŠ¨ä½†æ˜¯å°šæœªå®Œæˆï¼› //å¦‚æœè¿”å›0ï¼Œåˆ™è¡¨ç¤ºè¿æ¥å·²ç»å»ºç«‹ï¼Œè¿™é€šå¸¸æ˜¯åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·åœ¨åŒä¸€å°ä¸»æœºä¸Šæ—¶å‘ç”Ÿã€‚ int i = connect(s,(struct sockaddr*)&amp;saddr, sizeof(saddr)); if(i == 0) { //å»ºç«‹è¿æ¥æˆåŠŸï¼Œè¿”å›rttæ—¶é—´ã€‚ å› ä¸ºconnectæ˜¯éé˜»å¡ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶é—´å°±æ˜¯ä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶é—´ï¼Œæ¯«ç§’çº§ï¼Œæ²¡å¿…è¦å†æµ‹é€Ÿäº†ã€‚ close(s); return 1; } struct timeval tv; int valopt; socklen_t lon; tv.tv_sec = CYL_SOCKET_CONNECT_TIMEOUT; tv.tv_usec = 0; fd_set myset; FD_ZERO(&amp;myset); FD_SET(s, &amp;myset); // MARK: - ä½¿ç”¨selectå‡½æ•°ï¼Œå¯¹å¥—æ¥å­—çš„IOæ“ä½œè®¾ç½®è¶…æ—¶ã€‚ /** selectå‡½æ•° selectæ˜¯ä¸€ç§IOå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œå®ƒå…è®¸è¿›ç¨‹æŒ‡ç¤ºå†…æ ¸ç­‰å¾…å¤šä¸ªäº‹ä»¶çš„ä»»ä½•ä¸€ä¸ªå‘ç”Ÿï¼Œå¹¶ä¸”åœ¨æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªäº‹ä»¶å‘ç”Ÿæˆ–è€…ç»å†ä¸€æ®µæŒ‡å®šçš„æ—¶é—´åæ‰å”¤é†’å®ƒã€‚ connectæœ¬èº«å¹¶ä¸å…·æœ‰è®¾ç½®è¶…æ—¶åŠŸèƒ½ï¼Œå¦‚æœæƒ³å¯¹å¥—æ¥å­—çš„IOæ“ä½œè®¾ç½®è¶…æ—¶ï¼Œå¯ä½¿ç”¨selectå‡½æ•°ã€‚ **/ int maxfdp = s+1; int j = select(maxfdp, NULL, &amp;myset, NULL, &amp;tv); if (j == 0) { NSLog(@&quot;INFO:%s:%d, test rtt of (%@) timeout.&quot;,__FUNCTION__,__LINE__, oldIp); rtt = CYL_SOCKET_CONNECT_TIMEOUT_RTT; close(s); return rtt; } if (j &lt; 0) { NSLog(@&quot;ERROR:%s:%d, select function error.&quot;,__FUNCTION__,__LINE__); rtt = 0; close(s); return rtt; } /** å¯¹äºselectå’Œéé˜»å¡connectï¼Œæ³¨æ„ä¸¤ç‚¹ï¼š [1] å½“è¿æ¥æˆåŠŸå»ºç«‹æ—¶ï¼Œæè¿°ç¬¦å˜æˆå¯å†™ï¼› [2] å½“è¿æ¥å»ºç«‹é‡åˆ°é”™è¯¯æ—¶ï¼Œæè¿°ç¬¦å˜ä¸ºå³å¯è¯»ï¼Œä¹Ÿå¯å†™ï¼Œé‡åˆ°è¿™ç§æƒ…å†µï¼Œå¯è°ƒç”¨getsockoptå‡½æ•°ã€‚ **/ lon = sizeof(int); //valopt è¡¨ç¤ºé”™è¯¯ä¿¡æ¯ã€‚ // MARK: - æµ‹è¯•æ ¸å¿ƒé€»è¾‘ï¼Œè¿æ¥åï¼Œè·å–é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯ä¿¡æ¯å°±æ˜¯è®¿é—®æˆåŠŸ /*! * //getsockoptå‡½æ•°å¯è·å–å½±å“å¥—æ¥å­—çš„é€‰é¡¹ï¼Œæ¯”å¦‚SOCKETçš„å‡ºé”™ä¿¡æ¯ * (get socket option) */ getsockopt(s, SOL_SOCKET, SO_ERROR, (void*)(&amp;valopt), &amp;lon); //å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯ï¼š if (valopt) { NSLog(@&quot;ERROR:%s:%d, select function error.&quot;,__FUNCTION__,__LINE__); rtt = 0; } else { endTime = [NSDate date]; rtt = [endTime timeIntervalSinceDate:startTime] * 1000; } close(s); return rtt;} æ³¨æ„ï¼šå½“å‡ºç°é”™è¯¯çš„æ—¶å€™æµ‹è¯•ç»“æœæ˜¯é€Ÿåº¦æ˜¯0ï¼Œæ‰€ä»¥æ’åºæ—¶ä¸èƒ½ç®€å•åœ°æŒ‰ç…§å€¼å¤§å°æ’åºï¼Œå¯ä»¥å…ˆåˆ é™¤é€Ÿåº¦ä¸º0çš„ç»“æœï¼Œæˆ–è€…å°†é€Ÿåº¦ä¸ºé›¶é‡ç½®ä¸ºè¶…æ—¶æ—¶é—´ï¼Œæ¯”å¦‚ä¸Šé¢çš„ CYL_SOCKET_CONNECT_TIMEOUT_RTT ã€‚é¿å…é”™è¯¯IPä¸º0ï¼Œç»“æœæ’åºåæ’åœ¨å‰é¢ã€‚ Posted by å¾®åš@iOSç¨‹åºçŠ­è¢åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | Creative Commons BY-NC-ND 3.0","link":"/program/ï£¿/ip/"},{"title":"iPhoneå¼€å‘è€…é€‰é¡¹","text":"iOSä¸Šçš„å¼€å‘è€…é€‰é¡¹ï¼Œè¿™ä¸ªåŠŸèƒ½ä»iOSç³»ç»Ÿåˆšå¼€å§‹æ—¶å°±å·²ç»å­˜åœ¨äº†ã€‚æƒ³è¦æ‰“å¼€è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œé¦–å…ˆä½ éœ€è¦å°†iPhoneå’Œä¸€å°Macç”µè„‘ç›¸è¿æ¥ï¼Œç„¶ååœ¨Macä¸Šæ‰“å¼€Xcodeå¼€å‘å·¥å…·ï¼Œæ­¤æ—¶ä½ iPhoneçš„è®¾ç½®é‡Œå°±ä¼šå‡ºç°â€œå¼€å‘è€…â€è¿™ä¸ªé€‰é¡¹äº†ã€‚ æ­¥éª¤ï¼š 1ã€ç”¨æ•°æ®çº¿è¿æ¥iPhoneå’Œmac2ã€æ‰“å¼€xcodeï¼Œé€‰æ‹©Xcode -&gt; Windows-&gt;Devices ,å¦‚å›¾ï¼š3ã€é€‰æ‹©è‡ªå·±çš„æ‰‹æœºï¼Œå³é”®å•å‡»é€‰æ‹©Show Provisioning Profilesâ€¦ï¼Œå¦‚å›¾ï¼š4ã€åœ¨å¼¹çª—ä¸­çš„åˆ—è¡¨ä¸­æŸ¥çœ‹ï¼Œæ˜¯å¦æœ‰å¼€å‘è€…è¯ä¹¦ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ç‚¹å‡»â€œ+â€ï¼Œæ·»åŠ å¼€å‘è€…è¯ä¹¦ï¼Œå®Œæˆåç‚¹å‡»â€œDoneâ€ã€‚å¦‚å›¾ï¼š 5ã€å…³é—­çª—å£ï¼ŒæŸ¥çœ‹æ‰‹æœºâ€œè®¾ç½®â€ä¸­ï¼Œâ€œå¼€å‘è€…â€å·²ç»é»˜é»˜çš„èººåœ¨é‚£é‡Œäº†ã€‚ã€‚ã€‚ iOSä¸Šçš„å¼€å‘è€…é€‰é¡¹å®Œå…¨æ˜¯ä¸ºè½¯ä»¶å¼€å‘è€…æœåŠ¡çš„ Instrumentså¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªæ—¥å¿—è®°å½•å·¥å…·ï¼Œå¯ä»¥è®°å½•ä¸‹ç”µé‡å’Œç½‘ç»œçš„ä½¿ç”¨æƒ…å†µï¼Œåˆ©ç”¨Xcodeå¯ä»¥å¯¼å‡ºè¿™äº›æ—¥å¿—ã€‚ Network Link Conditioneræ˜¯æ¨¡æ‹Ÿç½‘ç»œï¼Œå¯ä»¥è®©ç”¨æˆ·æ¨¡æ‹Ÿä¸åŒçš„ç½‘ç»œè¿æ¥å’Œå¸¦å®½ï¼Œå¯ä¾›Macå’ŒiOSå¼€å‘è€…æµ‹è¯•è‡ªå·±çš„ç¨‹åºåœ¨ä¸åŒç½‘ç»œç¯å¢ƒä¸‹çš„è¡¨ç°ã€‚ è¿˜æœ‰å…¶ä»–é€‰é¡¹åƒæ˜¯IDAå¹¿å‘Šæµ‹è¯•ã€å¹¿å‘Šåˆ·æ–°ç‡æµ‹è¯•ã€åª’ä½“æœåŠ¡æµ‹è¯•ã€æ¬§ç›ŸéŸ³é‡é™åˆ¶æµ‹è¯•ç­‰å†…å®¹ã€‚ æ´å¼• iPhone iOS9ç³»ç»Ÿä¸­ è®¾ç½®ï¼&gt;å¼€å‘è€… å¯¹åº”çš„ç¿»è¯‘ iPhoneä¸­å¦‚ä½•æ‰“å¼€â€œå¼€å‘è€…â€é€‰é¡¹","link":"/program/ï£¿/iphone/"},{"title":"iOSåŸºç¡€é›†åˆç±»","text":"NSArray##æ’åº é€†åºï¼Œarray.reverseObjectEnumerator.allObjects æ•°ç»„ä¸­æ˜¯å­—ç¬¦ä¸²å¯¹è±¡æ’åºé¦–é€‰sortedArrayUsingSelector: 12NSArray *array = @[@&quot;John Appleseed&quot;, @&quot;Tim Cook&quot;, @&quot;Hair Force One&quot;, @&quot;Michael Jurewitz&quot;];NSArray *sortedArray = [array sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; å­˜å‚¨å†…å®¹æ˜¯æ•°å­— 12NSArray *numbers = @[@9, @5, @11, @3, @1];NSArray *sortedNumbers = [numbers sortedArrayUsingSelector:@selector(compare:)]; ä½¿ç”¨å‡½æ•°æŒ‡é’ˆsortedArrayHintæ’åº 12345- (NSData *)sortedArrayHint;- (NSArray *)sortedArrayUsingFunction:(NSInteger (*)(id, id, void *))comparator context:(void *)context;- (NSArray *)sortedArrayUsingFunction:(NSInteger (*)(id, id, void *))comparator context:(void *)context hint:(NSData *)hint; åŸºäºblockçš„æ’åºæ–¹æ³• 123- (NSArray *)sortedArrayUsingComparator:(NSComparator)cmptr;- (NSArray *)sortedArrayWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr; æ€§èƒ½æ¯”è¾ƒselectoræœ€å¿« 1Sorting 1000000 elements. selector: 4947.90[ms] function: 5618.93[ms] block: 5082.98[ms]. æ›´å¿«çš„äºŒåˆ†æŸ¥æ‰¾ 123456789101112typedef NS_OPTIONS(NSUInteger, NSBinarySearchingOptions) { NSBinarySearchingFirstEqual = (1UL &lt;&lt; 8), NSBinarySearchingLastEqual = (1UL &lt;&lt; 9), NSBinarySearchingInsertionIndex = (1UL &lt;&lt; 10),};- (NSUInteger)indexOfObject:(id)obj inSortedRange:(NSRange)r options:(NSBinarySearchingOptions)opts usingComparator:(NSComparator)cmp;//Time to search for 1000 entries within 1000000 objects. Linear: 54130.38[ms]. Binary: 7.62[ms] æšä¸¾ ä½¿ç”¨indexesOfObjectsWithOptions:passingTest: 12345NSIndexSet *indexes = [randomArray indexesOfObjectsWithOptions:NSEnumerationConcurrent passingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) { return testObj(obj);}];NSArray *filteredArray = [randomArray objectsAtIndexes:indexes]; ä¼ ç»Ÿçš„æšä¸¾ 123456NSMutableArray *mutableArray = [NSMutableArray array];for (id obj in randomArray) { if (testObj(obj)) { [mutableArray addObject:obj]; }} blockæ–¹å¼æšä¸¾ 123456NSMutableArray *mutableArray = [NSMutableArray array];[randomArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) { if (testObj(obj)) { [mutableArray addObject:obj]; }}]; é€šè¿‡ä¸‹æ ‡objectAtIndex: 1234567NSMutableArray *mutableArray = [NSMutableArray array];for (NSUInteger idx = 0; idx &lt; randomArray.count; idx++) { id obj = randomArray[idx]; if (testObj(obj)) { [mutableArray addObject:obj]; }} ä½¿ç”¨æ¯”è¾ƒä¼ ç»Ÿçš„å­¦é™¢æ´¾NSEnumerator 12345678NSMutableArray *mutableArray = [NSMutableArray array];NSEnumerator *enumerator = [randomArray objectEnumerator];id obj = nil;while ((obj = [enumerator nextObject]) != nil) { if (testObj(obj)) { [mutableArray addObject:obj]; }} ä½¿ç”¨predicate 123NSArray *filteredArray2 = [randomArray filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id obj, NSDictionary *bindings) { return testObj(obj);}]]; å„ä¸ªæ–¹æ³•æšä¸¾æ—¶é—´å‚è€ƒï¼ŒindexesOfObjectsWithOptionsåœ¨å¼€å¯äº†å¹¶å‘æšä¸¾çš„æƒ…å†µä¸‹æ¯”NSFastEnumerationå¿«ä¸€å€ã€‚ æšä¸¾æ–¹æ³• / æ—¶é—´ [ms] 10.000.000 elements 10.000 elements indexesOfObjects:, concurrent 1844.73 2.25 NSFastEnumeration (for in) 3223.45 3.21 indexesOfObjects: 4221.23 3.36 enumerateObjectsUsingBlock: 5459.43 5.43 objectAtIndex: 5282.67 5.53 NSEnumerator 5566.92 5.75 filteredArrayUsingPredicate: 6466.95 6.31 NSDictionaryæ€§èƒ½åŒæ ·æ•°ç›®çš„å€¼ï¼ŒNSDictionaryæ¯”NSArrayè¦èŠ±è´¹å¤šå¾—å¤šçš„å†…å­˜ç©ºé—´ æ’åºä½¿ç”¨NSArrayçš„æ’åºæ–¹æ³•å°†é”®æ•°ç»„æ’åºä¸ºæ–°çš„å¯¹è±¡ 1234- (NSArray *)keysSortedByValueUsingSelector:(SEL)comparator;- (NSArray *)keysSortedByValueUsingComparator:(NSComparator)cmptr;- (NSArray *)keysSortedByValueWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr; æšä¸¾ keysOfEntriesWithOptions:passingTest:ï¼Œå¯å¹¶è¡Œ 123456789NSSet *matchingKeys = [randomDict keysOfEntriesWithOptions:NSEnumerationConcurrentpassingTest:^BOOL(id key, id obj, BOOL *stop){ return testObj(obj);}];NSArray *keys = matchingKeys.allObjects;NSArray *values = [randomDict objectsForKeys:keys notFoundMarker:NSNull.null];__unused NSDictionary *filteredDictionary = [NSDictionary dictionaryWithObjects:values forKeys:keys]; getObjects:andKeys: æšä¸¾ï¼ŒåŸºäºcæ•°ç»„ 1234567891011NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionary];id __unsafe_unretained objects[numberOfEntries];id __unsafe_unretained keys[numberOfEntries];[randomDict getObjects:objects andKeys:keys];for (int i = 0; i &lt; numberOfEntries; i++) { id obj = objects[i]; id key = keys[i]; if (testObj(obj)) { mutableDictionary[key] = obj; }} blockæšä¸¾ 123456NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionary];[randomDict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) { if (testObj(obj)) { mutableDictionary[key] = obj; }}]; NSFastEnumeration 1234567NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionary];for (id key in randomDict) { id obj = randomDict[key]; if (testObj(obj)) { mutableDictionary[key] = obj; }} NSEnumeration 123456789NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionary];NSEnumerator *enumerator = [randomDict keyEnumerator];id key = nil;while ((key = [enumerator nextObject]) != nil) { id obj = randomDict[key]; if (testObj(obj)) { mutableDictionary[key] = obj; }} å„ä¸ªæ–¹æ³•æšä¸¾æ—¶é—´å‚è€ƒ æšä¸¾æ–¹æ³• / æ—¶é—´ [ms] 50.000 elements 1.000.000 elements keysOfEntriesWithOptions:, concurrent 16.65 425.24 getObjects:andKeys: 30.33 798.49 keysOfEntriesWithOptions: 30.59 856.93 enumerateKeysAndObjectsUsingBlock: 36.33 882.93 NSFastEnumeration 41.20 1043.42 NSEnumeration 42.21 1113.08 ming1016","link":"/program/ï£¿/ji-chu-ji-he-lei/"},{"title":"æ·±å…¥å‰–æ-JavaScriptCore","text":"å‰è¨€æœ€è¿‘å¼€å§‹æ¶‰åŠ JS çš„è§£æå’Œå¤„ç†å·¥ä½œï¼Œæ‰€ä»¥ä¸“é—¨ç ”ç©¶äº†ä¸‹è¿™å—ã€‚ç‰¹åˆ«æ˜¯åŠ¨æ€ç±»å‹çš„å¤„ç†ä»¥åŠä¸åŒå¼•æ“å¯¹äºå¹³å°æ— å…³çš„å­—èŠ‚ç çš„è®¾è®¡å’Œå¤„ç†ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ JavaScriptCore ä»‹ç»JavaScriptCore æ˜¯ JavaScript å¼•æ“ï¼Œé€šå¸¸ä¼šè¢«å«åšè™šæ‹Ÿæœºï¼Œä¸“é—¨è®¾è®¡æ¥è§£é‡Šå’Œæ‰§è¡Œ JavaScript ä»£ç ã€‚æœ€å¼€å§‹çš„ JavaScriptCore æ˜¯ä» KJSï¼ˆKDE çš„ JavaScript å¼•æ“ï¼‰ä»¥åŠ PCRE æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€ä¸Šå¼€å‘çš„ï¼Œæ˜¯åŸºäºæŠ½è±¡è¯­æ³•æ ‘çš„è§£é‡Šå™¨ã€‚2008 å¹´é‡å†™äº†ï¼Œå«åš SquirrelFishï¼Œåæ¥æ˜¯ SquirrelFish Extremeï¼Œåˆå« Nitroã€‚ç›®å‰ JavaScript å¼•æ“è¿˜æœ‰ Google çš„ V8 ï¼ŒMozilla çš„ SpiderMonkeyã€‚ JavaScriptCore è¿˜èƒ½å¤Ÿåœ¨ Objective-C ç¨‹åºä¸­æ¥æ‰§è¡Œ JavaScript çš„ä»£ç ï¼Œä¹Ÿå¯ä»¥åœ¨ JavaScript ç¯å¢ƒä¸­æ’å…¥è‡ªå®šä¹‰å¯¹è±¡ã€‚ JavaScriptCore å…¨è²Œä¸‹é¢æ˜¯è§£æ JavaScript æºç è§£æç¼–è¯‘çš„è¯¦ç»†æµç¨‹å›¾ï¼š ä¸»è¦æ¨¡å— Lexerï¼šè¯æ³•åˆ†æå™¨ï¼Œç”Ÿæˆ tokensï¼Œå¤§éƒ¨åˆ†ä»£ç éƒ½åœ¨ parser/Lexer.cpp é‡Œã€‚ Parserï¼šè¯­æ³•åˆ†æï¼ŒåŸºäº Lexer çš„ tokens ç”Ÿæˆè¯­æ³•æ ‘ã€‚æ‰‹å†™äº†ä¸ª recusive descent parser é€’å½’ä¸‹é™è§£æå™¨ï¼Œä»£ç ä¸»è¦åœ¨ parser/Parser.cpp é‡Œã€‚ LLIntï¼šLow Level Interpreter æ‰§è¡Œ Parser ç”Ÿæˆçš„ Byte codeã€‚ä»£ç åœ¨ llint/ é‡Œï¼Œä½¿ç”¨æ±‡ç¼–ï¼Œåœ¨ offlineasm/ é‡Œï¼Œå¯ä»¥ç¼–è¯‘ä¸º x86 å’Œ ARMv7 çš„æ±‡ç¼–å’Œ C ä»£ç ã€‚LLInt å¸Œæœ›è¾¾æˆé™¤äº†è¯æ³•å’Œè¯­æ³•åˆ†æå¤–é›¶å¯åŠ¨æ¶ˆè€—ï¼ŒåŒæ—¶éµå®ˆç”¨ JIT åœ¨è°ƒç”¨ï¼Œå †æ ˆå’Œèµ·å­˜å™¨çš„çº¦å®šã€‚ Baseline JITï¼šå®æ—¶ç¼–è¯‘ï¼Œæ€§èƒ½ä¸å¥½ç”¨è¿™ä¸ªã€‚åœ¨å‡½æ•°è°ƒç”¨äº† 6 æ¬¡ï¼Œæˆ–è€…æŸæ®µä»£ç å¾ªç¯äº†å¤§äº100æ¬¡ä¼šè¢«è§¦å‘ã€‚BaseLine JIT çš„ä»£ç åœ¨ jit/ é‡Œã€‚BaseLine JIT è¿˜å¯¹å‡ ä¹æ‰€æœ‰å †çš„è®¿é—®æ‰§è¡Œäº†å¤æ‚çš„å¤šæ€å†…è”é«˜é€Ÿç¼“å­˜ï¼ˆPolymorphic inline cachesï¼‰ã€‚å¤šæ€å†…è”ç¼“å­˜æ˜¯ Smalltalk ç¤¾åŒºä¼˜åŒ–åŠ¨æ€åˆ†å‘çš„ä¸€ä¸ªç»å…¸æŠ€æœ¯ã€‚ DFG JITï¼šä½å»¶è¿Ÿä¼˜åŒ– JITï¼Œæ›´å·®æ€§èƒ½å°±ç”¨è¿™ä¸ªç”Ÿæˆæ›´ä¼˜åŒ–çš„æœºå™¨ç æ¥æ‰§è¡Œã€‚åœ¨å‡½æ•°è¢«è°ƒç”¨äº†60æ¬¡æˆ–è€…ä»£ç å¾ªç¯äº†1000æ¬¡ä¼šè§¦å‘ã€‚åœ¨ LLInt å’Œ Baseline JIT ä¸­ä¼šæ”¶é›†ä¸€äº›åŒ…æ‹¬æœ€è¿‘å‚æ•°ï¼Œå †ä»¥åŠè¿”å›å€¼ä¸­çš„æ•°æ®ç­‰è½»é‡çº§çš„æ€§èƒ½ä¿¡æ¯ï¼Œæ–¹ä¾¿ DFG è¿›è¡Œç±»å‹åˆ¤æ–­ã€‚å…ˆè·å–ç±»å‹ä¿¡æ¯å¯ä»¥å‡å°‘å¤§é‡çš„ç±»å‹æ£€æŸ¥ï¼Œæ¨æµ‹å¤±è´¥ DFG ä¼šå–æ¶ˆä¼˜åŒ–ï¼Œä¹Ÿå« OSR exitã€‚å–æ¶ˆå¯ä»¥æ˜¯åŒæ­¥çš„ä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥çš„ã€‚å–æ¶ˆåä¼šå›åˆ° Baseline JITï¼Œé€€å›ä¸€å®šæ¬¡æ•°ä¼šè¿›è¡Œé‡æ–°ä¼˜åŒ–ï¼Œæ”¶é›†æ›´å¤šç»Ÿè®¡ä¿¡æ¯ï¼Œçœ‹æƒ…å†µå†æ¬¡è°ƒç”¨ DFGã€‚é‡æ–°ä¼˜åŒ–ä½¿ç”¨çš„æ˜¯æŒ‡æ•°å¼å›é€€ç­–ç•¥åº”å¯¹ä¸€äº›æ€ªå¼‚çš„ä»£ç ã€‚DFG ä»£ç åœ¨ dfg/ é‡Œã€‚ FTLï¼šé«˜ååé‡ä¼˜åŒ– JITï¼Œå…¨ç§° Faster Than Lightï¼ŒDFG é«˜å±‚ä¼˜åŒ–é…åˆ B3 åº•å±‚ä¼˜åŒ–ã€‚ä»¥å‰å…¨ç§°æ˜¯ Fourth Tier LLVM åº•å±‚ä¼˜åŒ–ä½¿ç”¨çš„æ˜¯ LLVMã€‚B3 å¯¹ LLVM åšäº†è£å‰ªï¼Œå¯¹ JavaScriptCore åšäº†ç‰¹æ€§å¤„ç†ï¼ŒB3 IR çš„æ¥å£å’Œ LLVM IR å¾ˆç±»ä¼¼ã€‚B3 å¯¹ LLVM çš„æ›¿æ¢ä¸»è¦æ˜¯è€ƒè™‘å‡å°‘å†…å­˜å¼€é”€ï¼ŒLLVM ä¸»è¦æ˜¯é’ˆå¯¹ç¼–è¯‘å™¨ï¼Œç¼–è¯‘å™¨åœ¨è¿™æ–¹é¢ä¼˜åŒ–åŠ¨åŠ›å¿…ç„¶æ²¡æœ‰ JIT éœ€æ±‚é«˜ã€‚B3 IR å°†æŒ‡é’ˆæ”¹æˆäº†æ›´ç´§å‡‘çš„æ•´æ•°æ¥è¡¨ç¤ºå¼•ç”¨å…³ç³»ã€‚ä¸å¯å˜çš„å¸¸ç”¨çš„ä¿¡æ¯ä½¿ç”¨å›ºå®šå¤§å°çš„ç»“æ„æ¥è¡¨ç¤ºï¼Œå…¶å®ƒçš„éƒ½æ”¾åˆ°å¦å¤–çš„åœ°æ–¹ã€‚ç´§å‡‘çš„æ•°æ®æ”¾åˆ°æ•°ç»„ä¸­ï¼Œæ›´å¤šçš„æ•°ç»„æ›´å°‘çš„é“¾è¡¨ã€‚è¿™æ ·å½¢æˆçš„ IR æ›´çœå†…å­˜ã€‚Filip Pizlo ä¸»å¯¼çš„è¿™ä¸ªæ”¹åŠ¨ï¼ŒDFG JIT ä¹Ÿæ˜¯ä»–å¼„çš„ï¼Œä¸ºäº†èƒ½å¤Ÿæ›´å¤šçš„å‡å°‘å†…å­˜ä¸Šçš„å¼€é”€ï¼Œä»–åˆ©ç”¨åœ¨ DFG é‡Œå·²ç»åšçš„ InsertionSet å°† LLVM IR é‡Œçš„ def-use å¹²æ‰äº†ï¼Œå¤§æ¦‚æ€è·¯æ˜¯æŠŠå•å‘é“¾è¡¨é‡Œæ‰¹é‡æ’å…¥æ–° IR èŠ‚ç‚¹å…ˆæ”¾åˆ° InsertionSet é‡Œï¼Œåœ¨ä¸‹æ¬¡éå† IR æ—¶å†æ‰¹é‡æ’å…¥ã€‚Filip Pizlo è¿˜æŠŠ DFG é‡Œçš„ UpsilonValue æ›¿ä»£ LLVM SSA ç»„æˆéƒ¨åˆ†ã€‚B3 åé¢ä¼šæŠŠ LLVM çš„å¯„å­˜å™¨åˆ†é…ç®—æ³• Greedy ä¸€ç›´åˆ° B3 ä¸­ã€‚ æ‰§è¡Œé€Ÿåº¦çš„å¯¹æ¯”ï¼šç›¸å¯¹é€Ÿåº¦ï¼Œè¶Šé«˜è¡¨ç¤ºè¶Šå¥½ã€‚ æ›´å¤šçš„è¯´æ˜å¯ä»¥å‚çœ‹ WebKit å®˜ç½‘ JavaScriptCore çš„ Wiki é¦–é¡µéƒ¨åˆ†ï¼šhttps://trac.webkit.org/wiki/JavaScriptCore ä¸»è¦çš„æºç ç›®å½•ç»“æ„ APIï¼šJavaScriptCore å¯¹å¤–çš„æ¥å£ç±» assemblerï¼šä¸åŒ CPU çš„æ±‡ç¼–ç”Ÿæˆï¼Œæ¯”å¦‚ ARM å’Œ X86 b3ï¼šftl é‡Œçš„ Backend bytecodeï¼šå­—èŠ‚ç çš„å†…å®¹ï¼Œæ¯”å¦‚ç±»å‹å’Œè®¡ç®—è¿‡ç¨‹ bytecompilerï¼šç¼–è¯‘å­—èŠ‚ç  Configurationsï¼šXcode çš„ç›¸å…³é…ç½® Debuggerï¼šç”¨äºæµ‹è¯•è„šæœ¬çš„ç¨‹åº dfgï¼šDFG JIT ç¼–è¯‘å™¨ disassemblerï¼šåæ±‡ç¼– heapï¼šè¿è¡Œæ—¶çš„å †å’Œåƒåœ¾å›æ”¶æœºåˆ¶ ftlï¼šç¬¬å››å±‚ç¼–è¯‘ interpreterï¼šè§£é‡Šå™¨ï¼Œè´Ÿè´£è§£ææ‰§è¡Œ ByteCode jitï¼šåœ¨è¿è¡Œæ—¶å°† ByteCode è½¬æˆæœºå™¨ç ï¼ŒåŠ¨æ€åŠæ—¶ç¼–è¯‘ã€‚ llintï¼šLow Level Interpreterï¼Œç¼–è¯‘å››å±‚é‡Œçš„ç¬¬ä¸€å±‚ï¼Œè´Ÿè´£è§£é‡Šæ‰§è¡Œä½æ•ˆå­—èŠ‚ç  parserï¼šè¯æ³•è¯­æ³•åˆ†æï¼Œæ„å»ºè¯­æ³•æ ‘ profilerï¼šä¿¡æ¯æ”¶é›†ï¼Œèƒ½æ”¶é›†å‡½æ•°è°ƒç”¨é¢‘ç‡å’Œæ¶ˆè€—æ—¶é—´ã€‚ runtimeï¼šè¿è¡Œæ—¶å¯¹äº js çš„å…¨å¥—æ“ä½œã€‚ wasmï¼šå¯¹ WebAssembly çš„å®ç°ã€‚ yarrï¼šYet Another Regex Runtimeï¼Œè¿è¡Œæ—¶æ­£åˆ™è¡¨è¾¾å¼çš„è§£æ JavaScriptCore ä¸ WebCoreScriptController ä¼šè°ƒç”¨ JavaScriptCore çš„ evaluate å’Œ checkSyntax ä¸¤ä¸ªæ¥å£ã€‚DOM èŠ‚ç‚¹çš„ JSBindings é€šè¿‡å›æº¯åˆ° JSC::JSNonFinalObject å®ç°å’Œ JavaScriptCore çš„ç»‘å®šã€‚ VM æ˜¯ JavaScript çš„ Runtime ç¯å¢ƒã€‚GlobalObject æ˜¯å…¨å‰§å¯¹è±¡ï¼Œè´Ÿè´£ç®¡ç†æ‰§è¡Œç¯å¢ƒå’Œ Object çš„ã€‚ExecState æ˜¯æ‰§è¡Œè„šæœ¬çš„å¯¹è±¡ï¼Œç”± GlobalObject ç®¡ç†çš„ï¼Œè´Ÿè´£è®°å½•è„šæœ¬æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ æ¥å£æ‰§è¡Œè„šæœ¬ï¼Œåˆ›å»ºä¸€ä¸ª ProgramExecutable å¯¹è±¡æ¥è¡¨ç¤ºè¦æ‰§è¡Œçš„è„šæœ¬è´Ÿè´£ç¼–è¯‘æˆ ByteCodeï¼Œè°ƒç”¨ Interpreter æ‰§è¡Œè¿™ä¸ª ByteCodeã€‚ Binding æ˜¯ WebCore ä¸º JavaScriptCore æä¾›çš„å°è£…å±‚ã€‚è¿™ä¸€å±‚çš„å®šä¹‰å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼šhttps://trac.webkit.org/wiki/WebKitIDLã€‚WebKit å‚ç…§çš„æ˜¯ W3C Web IDL https://www.w3.org/TR/WebIDL-1/ã€‚ ä½¿ç”¨ IDL å®šä¹‰æ¥å£è§„èŒƒï¼ŒWebKit ä½¿ç”¨ä¸€ç»„ perl è„šæœ¬æ¥è½¬æ¢ IDLï¼Œåˆå§‹è„šæœ¬æ˜¯ generate-binding.plã€‚ç”Ÿæˆæ¥å£ä¸ DOM ç»„ä»¶å…³è”æ˜¯é€šè¿‡ JSNode æ¥çš„ã€‚æ‰§è¡Œè„šæœ¬å’Œ Frame çš„ setDocument ä¼šæ›´æ–° document å¯¹è±¡åˆ° JavaScriptCoreï¼Œé€šè¿‡ JSDomWindowBase::updateDocument æ›´æ–°åˆ° JSC::Heap é‡Œã€‚ è¯æ³•è¯­æ³•åˆ†æè¯æ³•å’Œè¯­æ³•åˆ†æç¨‹åº JavaScriptCore æ˜¯è‡ªå·±ç¼–å†™çš„ã€‚è¯æ³•åˆ†æä¼šæŠŠæ–‡æœ¬ç†è§£æˆå¾ˆå¤š tokenï¼Œæ¯”å¦‚ a = 5; å°±ä¼šè¢«è¯†åˆ«æˆä¸‹é¢è¿™äº› tokenï¼ŒVARIABLE EQUAL CONSTANT ENDã€‚ç„¶åé€šè¿‡è¯­æ³•åˆ†æï¼Œè¾“å‡ºè¯­æ³•æ ‘ã€‚ éœ€è¦å…ˆè®¾è®¡å¥½ Nodeï¼ŒNode çš„ç±»å…³ç³»å›¾å¦‚ä¸‹ï¼šä¸¾ä¸ªåŒ…å«åŠ å’Œä¹˜çš„ statement æ˜¯å¦‚ä½•ç»„æˆ AST çš„ 1o.x * o.x + o.y * o.y heap ä»£è¡¨çš„æ˜¯å¯è§æ•°æ®ï¼Œpure ä»£è¡¨çš„æ˜¯æŠ½è±¡è¯´æ˜ã€‚ ä¸‹é¢çœ‹çœ‹ Object çš„æ„é€  1234var o = new Object();o.f = 1;o.g = 2;o.h = 3; æ¥ä¸‹æ¥çœ‹çœ‹ function çš„ 123456function foo(o) { if (o.f &amp;&amp; o.f() == 42) print(&quot;hello&quot;); if (o.g &amp;&amp; o.g() == 63) print(&quot;bye&quot;);} è¿˜æœ‰äº›å…¶å®ƒçš„ parser æ¯”å¦‚ Esprima æä¾›äº†ä¸€ä¸ªåœ¨çº¿ demo å¯ä»¥åœ¨çº¿ Parserã€‚å®ç°çš„ä»£ç åœ¨è¿™é‡Œï¼šhttps://github.com/jquery/esprima/tree/master/src ä¸»è¦ä½¿ç”¨çš„æ˜¯é€’å½’ä¸‹é™å’Œè¿ç®—ç¬¦ä¼˜å…ˆçº§æ··åˆå¼æ¥åšçš„ parserã€‚ æˆ‘åœ¨ HTN ï¼ˆhttps://github.com/ming1016/HTNï¼‰é¡¹ç›®ä¸­åšäº†ä¸ª js çš„ AST çš„ builderï¼šhttps://github.com/ming1016/HTN/tree/master/Sources/Core/JavaScript åˆ†è¯å’Œè¯­æ³•æ ‘ç”Ÿæˆä½¿ç”¨çš„æ˜¯çŠ¶æ€æœºå¤„ç†é€’å½’ä¸‹é™ã€‚ WebKit çš„æ€§èƒ½ç›®å½•é‡Œæœ‰ç”¨ ES6 æ ‡å‡†å®ç°çš„ ECMA-55 BASIC è¿™ä¸ªè¯æ³•è¯­æ³•åˆ†æçš„æµ‹è¯•ã€‚ä»£ç åœ¨ï¼šhttps://trac.webkit.org/browser/trunk/PerformanceTests/ARES-6/Basic?rev=211697 ç¨‹åºä¼šè¢«è¡¨ç¤ºæˆæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸å…¶ç›¸å…³çš„ä»£ç ï¼Œè¿™äº›ä»£ç éƒ½å¯ä»¥é€’å½’çš„è°ƒç”¨æ ‘ä¸­çš„å­èŠ‚ç‚¹ã€‚Basic çš„èŠ‚ç‚¹çš„ç»“æ„æ˜¯è¿™æ ·å­çš„ï¼š 1{evaluate: Basic.NumberPow, left: primary, right: parsePrimary()} Basic æ˜¯ä»¥ä¸é‚£ä¹ˆå¸¸è§çš„æ–¹å¼ä½¿ç”¨ç”Ÿæˆå™¨çš„ï¼Œæ¯”å¦‚å¤šä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œå¾ˆå¤š yield points å’Œé€’å½’ç”Ÿæˆå™¨è°ƒç”¨ã€‚Basic ä¹Ÿæœ‰ for-ofï¼Œç±»ï¼ŒMap å’Œ WeakMapã€‚æ‰€ä»¥ä¸Šçš„æµ‹è¯• ES6 ç¨‹åºé€šè¿‡ js å†™çš„ç¨‹åºå¸®åŠ©ç†è§£ ES6 çš„è§£æè¿‡ç¨‹ã€‚ ä»£ç åˆ° JIT çš„è¿‡ç¨‹ProgramExecutable çš„åˆå§‹åŒ–ä¼šç”Ÿæˆ Lexerï¼ŒParser å’Œå­—èŠ‚ç ã€‚å…¥å£æ˜¯ä» JS Binding é‚£å±‚é‡Œè°ƒç”¨ ScriptController::evaluateInWorld è¿›æ¥ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œçš„å‚æ•° sourceCode å°±æ˜¯ js çš„ä»£ç çš„æ¥æºï¼Œæ–¹æ³•å†…é€šè¿‡è°ƒç”¨ runtime/Completion.cpp é‡Œçš„æ–¹æ³• evaluate æ¥è¿›å…¥ executeProgram æ–¹æ³•çš„ã€‚æ€»çš„æ¥è¯´ ProgramExecutable ä¸»è¦æ˜¯æŠŠä»£ç ç¼–æˆå­—èŠ‚ç ï¼ŒInterpreter æ˜¯æ¥æ‰§è¡Œå­—èŠ‚ç çš„ã€‚ 1JSValue result = vm.interpreter-&gt;executeProgram(source, exec, thisObj); executeProgram æ–¹æ³•å°†æºç ç”Ÿæˆ ProgramExecutable è¿™ä¸ªå¯¹è±¡ã€‚ 1ProgramExecutable* program = ProgramExecutable::create(callFrame, source); è¿™ä¸ªå¯¹è±¡é‡Œæœ‰ StringView å¯¹è±¡ï¼Œprogram-&gt;source().view() è¿™æ ·å°±å¯ä»¥å¯¹æºç è¿›è¡Œæ“ä½œäº†ã€‚åœ¨é‚£ä¹‹å‰ä¼šå…ˆåˆ¤æ–­ä¸‹æ˜¯å¦è¿™æ®µ js ä»£ç ä»…ä»…åªæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå¦‚æœæ˜¯å°±åœ°æŒ‰ç…§ JSON å¯¹è±¡å¤„ç†ï¼Œä¸ç„¶å°±æŒ‰ç…§æ™®é€šçš„ js ä»£ç æ¥å¤„ç†ã€‚ æ™®é€šå¤„ç†ä¼šå…ˆç¼–è¯‘æˆå­—èŠ‚ç ï¼Œè¿‡ç¨‹æ˜¯å…ˆåˆå§‹åŒ–å…¨å±€å±æ€§ï¼š 1JSObject* error = program-&gt;initializeGlobalProperties(vm, callFrame, scope); å¤„ç†çš„ç»“æœéƒ½ä¼šè®°å½•åœ¨ callFrame é‡Œã€‚ä¸»è¦æ˜¯é€šè¿‡ JSGlobalObject è¿™ä¸ªå¯¹è±¡çš„ addFunction å’Œ addVar æ–¹æ³•è®°å½• Parser å‡ºé‚£äº›åœ¨å…¨å±€ç©ºé—´çš„é‚£äº› letï¼Œconst å’Œ class çš„å…¨å±€å±æ€§ï¼Œæˆ–è€… varï¼Œlet å’Œ const çš„å…¨å±€å˜é‡ã€‚ æ¥ä¸‹æ¥ä¼šåˆ›å»ºä¸€ä¸ª codeBlockï¼š 123456789ProgramCodeBlock* codeBlock; { CodeBlock* tempCodeBlock; JSObject* error = program-&gt;prepareForExecution&lt;ProgramExecutable&gt;(vm, nullptr, scope, CodeForCall, tempCodeBlock); EXCEPTION_ASSERT(throwScope.exception() == reinterpret_cast&lt;Exception*&gt;(error)); if (UNLIKELY(error)) return checkedReturn(error); codeBlock = jsCast&lt;ProgramCodeBlock*&gt;(tempCodeBlock); } è¿™é‡Œ ProgramExecutable ä¼šé€šè¿‡ prepareForExecution æ–¹æ³•é‡Œè°ƒç”¨ prepareForExecutionImpl æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ CodeBlockã€‚ 123456789101112131415CodeBlock* codeBlock = newCodeBlockFor(kind, function, scope, exception);resultCodeBlock = codeBlock;EXCEPTION_ASSERT(!!throwScope.exception() == !codeBlock);if (UNLIKELY(!codeBlock)) return exception;if (Options::validateBytecode()) codeBlock-&gt;validate();if (Options::useLLInt()) setupLLInt(vm, codeBlock);else setupJIT(vm, codeBlock);installCode(vm, codeBlock, codeBlock-&gt;codeType(), codeBlock-&gt;specializationKind()); è¿™é‡Œçœ‹åˆ°ï¼Œå¦‚æœ Options æ˜¯æŒ‡å®š LLInt çš„è¯å°±ä¼šè°ƒ setupLLInt æ–¹æ³•å»è®¾ç½®è¿™ä¸ª codeBlockï¼Œä¸ç„¶å°±é€šè¿‡ JIT æ¥ã€‚LLInt åœ¨ LLIntSlowPaths.cpp é‡Œé€šè¿‡ C å‡½æ•°å°è£…äº† LowLevelInterpreter.asm é‡Œçš„æ‰§è¡ŒæŒ‡ä»¤çš„æ±‡ç¼–ã€‚è§¦å‘ JIT ä¼˜åŒ–æ˜¯é€šè¿‡çƒ­ç‚¹æ¢æµ‹æ–¹æ³•ï¼ŒLLInt ä¼šåœ¨å­—èŠ‚ç çš„ loop_hint å¾ªç¯è®¡æ•°å’Œ ret å‡½æ•°è¿”å›æŒ‡ä»¤çš„æ—¶å€™è¿›è¡Œç»Ÿè®¡ï¼Œç»“æœä¿å­˜åœ¨ ExcutionCounter é‡Œã€‚å½“å‡½æ•°æˆ–å¾ªç¯ä½“æ‰§è¡Œä¸€å®šæ¬¡æ•°æ—¶ï¼Œé€šè¿‡ checkIfThresholdCrossedAndSet æ–¹æ³•å¾—åˆ°å¸ƒå°”å€¼ç»“æœæ¥å†³å®šæ˜¯å¦ç”¨ JIT ç¼–è¯‘ã€‚ CodeBlock æœ‰ GlobalCodeï¼ŒEvalCodeï¼ŒFunctionCodeï¼ŒModuleCode è¿™äº›ç±»å‹ï¼Œç”¨äº LLInt å’Œ JITã€‚ç¼–è¯‘åçš„ ByteCode ä¼šå­˜åœ¨ UnlinkedCodeBlock é‡Œã€‚ åˆ†å±‚ç¼–è¯‘æ€»çš„æ¥è¯´ JavaScriptCore æ˜¯é‡‡ç”¨äº†ç±»å‹æ¨æµ‹å’Œåˆ†å±‚ç¼–è¯‘çš„æ€æƒ³ï¼Œè§£ææˆå­—èŠ‚ç å LLInt çš„ä½œç”¨å°±æ˜¯è®© js ä»£ç èƒ½å¤Ÿæ—©ç‚¹æ‰§è¡Œï¼Œç”±äºè§£é‡Šçš„æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥è¾¾åˆ°ä¸€å®šæ¡ä»¶å¯ä»¥å¹¶è¡Œçš„é€šè¿‡ Baseline JIT ç¼–è¯‘æˆæ›´é«˜æ•ˆçš„å­—èŠ‚ç æ¥è§£é‡Šï¼Œå¦‚æœåˆ°äº†æ›´åŠ å®¹æ˜“ä½¿å¾— LLInt è§£é‡Šæ•ˆç‡å·®çš„æƒ…å†µå°±ä¼šå¹¶è¡Œä½¿ç”¨ DFG JIT ï¼ŒDFG ç¼–è¯‘çš„ç»“æœä¹Ÿæœ‰ä»£è¡¨ On stack replacement çš„ osrExitSites æ•°ç»„ï¼Œè¿™æ ·çš„å­—èŠ‚ç çš„è§£é‡Šæ€§èƒ½ä¼šæ›´å¥½ï¼Œå¦‚æœå‡è®¾è§£é‡Šå¤±è´¥è¿˜å¯ä»¥å†å›åˆ° Baselineï¼Œä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚å¯ç”¨ FTL çš„æ¡ä»¶å°±æ›´é«˜äº†ï¼Œå¯èƒ½å‡½æ•°è°ƒç”¨äº†å¥½å‡ ä¸‡æ¬¡ä¹Ÿéƒ½ä¸ä¼šå¼€å¯ã€‚ åˆ†å±‚ç¼–è¯‘çš„ä¸»è¦æ€æƒ³æ˜¯å…ˆæŠŠæºç è§£é‡Šæˆä¸€ç§å†…éƒ¨çš„è¡¨ç¤ºä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼Œå°†å…¶ä¸­ä½¿ç”¨ç‡é«˜çš„å­—èŠ‚ç è½¬æˆæ±‡ç¼–ä»£ç ï¼Œæ±‡ç¼–ä»£ç å¯ä»¥ç”± CPU ç›´æ¥æ‰§è¡Œæ¥æœ€å¤§ç¨‹åº¦çš„æé«˜æ€§èƒ½ã€‚ LLIntï¼ŒBaseline JIT å’Œ DFG ä¸‰è€…ä¼šåŒæ—¶è¿è¡Œã€‚å¯ä»¥åœ¨ jsc.cpp é‡Œæ·»åŠ æ—¥å¿—è§‚å¯Ÿä»–ä»¬çš„å·¥ä½œçŠ¶æ€ ç®­å¤´æŒ‡ç¤ºçš„æ˜¯å †æ ˆæ›¿æ¢ on-stack replacementï¼Œç®€ç§° OSRã€‚è¿™ä¸ªæŠ€æœ¯å¯ä»¥å°†æ‰§è¡Œè½¬ç§»åˆ°ä»»ä½• statement çš„åœ°æ–¹ã€‚OSR å¯ä»¥ä¸ç®¡æ‰§è¡Œå¼•æ“æ˜¯ä»€ä¹ˆéƒ½åœ¨å»è§£æå­—èŠ‚ç çŠ¶æ€ï¼Œå¹¶ä¸”èƒ½å¤Ÿé‡æ„å®ƒå»è®©å…¶å®ƒå¼•æ“ç»§ç»­æ‰§è¡Œï¼ŒOSR entry æ˜¯è¿›å…¥æ›´é«˜å±‚ä¼˜åŒ–ï¼ŒOSR exit æ˜¯é™è‡³ä½å±‚ã€‚LLInt åˆ° Baseline JIT æ—¶ OSR åªéœ€è¦è·³è½¬åˆ°ç›¸åº”çš„æœºå™¨ä»£ç åœ°å€å°±è¡Œï¼Œå› ä¸º Baseline JIT æ¯ä¸ªæŒ‡ä»¤è¾¹ç•Œä¸Šçš„æ‰€æœ‰å˜é‡çš„è¡¨ç¤ºå’Œ LLInt æ˜¯ä¸€æ ·çš„ã€‚è¿›å…¥ DFG JIT å°±ä¼šå¤æ‚äº›ï¼ŒDFG é€šè¿‡å°†å‡½æ•°æ§åˆ¶æµå›¾å½“ä½œå¤šä¸ªè¿›å…¥ç‚¹ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°å‡½æ•°å¯åŠ¨å…¥å£ä¸€ä¸ªæ˜¯å¾ªç¯çš„å…¥å£ã€‚ å¦‚æœæ¯ä¸ªå‡½æ•°éƒ½ç”¨åƒ DFG JIT æ¥ä¼˜åŒ–é‚£ä¹ˆæ¶ˆè€—å¤ªå¤§ï¼Œè¿™å°±ç±»ä¼¼æ¯æ¬¡è¿è¡Œå°±æ¥ä¸ªå®Œæ•´çš„æºç ç¼–è¯‘æˆæœ¬åœ°åº”ç”¨é‚£æ ·ã€‚å¦‚æœæ¯ä¸ªè¯­å¥éƒ½åªæ‰§è¡Œä¸€æ¬¡ï¼Œé‚£ä¹ˆ JIT ç¼–è¯‘å°±ä¼šæ¯” LLInt æ˜¯æ—¶é—´è¦é•¿ï¼Œå¦‚æœæ‰§è¡Œçš„æ¬¡æ•°è¶Šå¤šï¼Œé‚£ä¹ˆ LLInt è¿™ç§è§£é‡Šæ–¹å¼å°±ä¼šæ¯”ç¼–è¯‘æ–¹å¼è¦å·®ï¼ŒLLInt çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ¶ˆè€—åœ¨åˆ†æ´¾ä¸‹ä¸ªå­—èŠ‚ç æŒ‡ä»¤çš„æ“ä½œä¸Šäº†ã€‚ DFG JITå…¨ç§° data flow graph JIT æ•°æ®æµå›¾ JITã€‚æ˜¯ä¸€ç§æ¨æµ‹ä¼˜åŒ–çš„æŠ€æœ¯ã€‚ä¼šå¼€å§‹å¯¹ä¸€ä¸ªç±»å‹åšå‡ºä¸€ä¸ªèƒ½å¤Ÿå¯¹æ€§èƒ½å¥½çš„å‡è®¾ï¼Œå…ˆç¼–è¯‘ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœåé¢å‘ç°å‡è®¾ä¸å¯¹å°±ä¼šè·³è½¬å›åŸå…ˆä»£ç ï¼Œç§°ä¸º Speculation failureã€‚DFG æ˜¯å¹¶å‘ç¼–è¯‘å™¨ï¼ŒDFG pipeline çš„æ¯ä¸ªéƒ¨åˆ†éƒ½æ˜¯åŒæ—¶è¿è¡Œçš„ï¼ŒåŒ…æ‹¬å­—èŠ‚ç è§£æå’Œåˆ†æã€‚ ä¸Šå›¾æ˜¯ DFG JIT çš„ä¼˜åŒ– pipelineã€‚å¼€å§‹ DFG ä¼šæŠŠå­—èŠ‚ç è½¬æˆ DFG CPS æ ¼å¼ï¼Œè¿™ä¸ªæ ¼å¼ä¼šæè¿°å˜é‡å’Œä¸´æ—¶æ•°æ®ä¹‹é—´çš„æ•°æ®æµå…³ç³»ã€‚å†ç”¨åˆ†æä¿¡æ¯æ¥æ¨æµ‹ç±»å‹ï¼Œé€šè¿‡æ¨æµ‹çš„ç±»å‹å‡å°‘ç±»å‹çš„æ£€æŸ¥ã€‚æ¥ç€è¿›è¡Œä¼ ç»Ÿçš„ç¼–è¯‘å™¨æ–¹é¢çš„ä¼˜åŒ–ï¼Œæœ€åç¼–è¯‘å™¨é€šè¿‡ DFG CPS æ ¼å¼ç›´æ¥ç”Ÿæˆæœºå™¨ç ã€‚ DFG JIT ä¼šå°†å­—èŠ‚ç è§£ææˆ SSA å½¢å¼ï¼ŒæŒ‰æ‰§è¡Œè·¯å¾„æ”¶é›†ç±»å‹ä¿¡æ¯ã€‚ä¼šä½¿ç”¨ inlining å’Œ value profiling ç­‰ä¸€äº›é™æ€åˆ†ææŠ€æœ¯ã€‚ç±»å‹æ¨å¯¼æŠŠ value profile é‡Œçš„å¸¸ç”¨çš„ç±»å‹ä½œä¸ºåé¢ç”¨çš„ç±»å‹æ¥é¢„æµ‹ï¼Œåœ¨ SpeculatedType.h é‡Œå®šä¹‰é‡Œä¸€äº›æ•°æ®ç±»å‹ï¼Œç¬¦åˆ Data-flow analysis è§„èŒƒï¼Œå…·ä½“å®ç°åœ¨ DFGPredictionPropagationPhase.cpp é‡Œã€‚Baseline JIT æ¬¡æ•°è¶…è¿‡ä¸€å®šæ•°é‡å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œå¯èƒ½ä¼šè§¦å‘ DFG ä¹Ÿå¯èƒ½ä¼šè®© Baseline JIT å†æ‰§è¡Œå‡ æ¬¡ã€‚ DFG çš„ register allocator ä¸­æ±‡ç¼–ç¨‹åºä½¿ç”¨çš„æ˜¯äºŒåœ°å€ï¼Œä¸ç”¨ op dest, src1, src2 è¿™æ ·ä¸‰åœ°å€å½¢å¼ï¼Œåªéœ€è¦ op src1, src2 è¿™æ ·çš„äºŒåœ°å€å½¢å¼ï¼Œç»“æœå­˜åœ¨ç¬¬ä¸€ä¸ªæ“ä½œæ•°é‡Œã€‚ DFG JIT å°†ä½æ•ˆå­—èŠ‚ç è½¬æˆæ›´ä¼˜åŒ–çš„é«˜æ•ˆå½¢å¼ã€‚DFG ç»“åˆä¼ ç»Ÿç¼–è¯‘å™¨çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚å¯„å­˜å™¨çš„åˆ†é…ï¼Œæ§åˆ¶æµå›¾çš„ç®€åŒ–ï¼Œå…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤ï¼Œæ­»ä»£ç æ¶ˆé™¤å’Œç¨€ç–æ¡ä»¶å¸¸é‡ä¼ æ’­ç­‰ã€‚ä½†æ˜¯æ­£å„¿å…«ç»çš„ç¼–è¯‘å™¨æ˜¯éœ€è¦çŸ¥é“å˜é‡ç±»å‹å’Œå †é‡Œé¢çš„å¯¹è±¡çš„ç»“æ„çš„ï¼Œè¿™æ ·æ‰èƒ½æ›´å¥½çš„ä¼˜åŒ–ã€‚DFG JIT ä½¿ç”¨çš„æ˜¯ LLInt å’Œ Baseline JIT é‡Œåˆ†æå‡ºçš„å˜é‡ç±»å‹æ¥æ¨æ–­çš„ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ 123function plusThe(x) { return x + 1; } è¿™é‡Œçš„ x ä»ä»£ç ä¸Šçœ‹æ˜¯çœ‹ä¸å‡ºç±»å‹çš„ï¼Œå®ƒå¯èƒ½æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯èƒ½æ˜¯ integer æˆ–è€… doubleã€‚LLInt å’Œ Baseline JIT ä¼šä»å‡½æ•°å‚æ•°æˆ–è€…æ¥è‡ªå †çš„è¯»å–æ¥æ”¶é›†æ¯ä¸ªå˜é‡çš„å€¼ä¿¡æ¯ã€‚DFG ä¸ä¼šä¸€å¼€å§‹å°±ç¼–è¯‘ plusThe è¿™ä¸ªå‡½æ•°ï¼Œå®ƒä¼šç­‰åˆ°è¿™ä¸ªå‡½æ•°è¢«æ‰§è¡Œäº†å¾ˆå¤šæ¬¡ï¼Œè®© LLInt å’Œ Baseline JIT å°½å¯èƒ½çš„æŠŠç±»å‹ä¿¡æ¯æ”¶é›†å…¨ã€‚æ ¹æ®è¿™äº›ä¿¡æ¯æ¥å‡è®¾ä¸€ä¸ªç±»å‹ï¼Œä¸€ä¸ªç¡®å®šçš„ç±»å‹ä¼šèŠ‚çœç©ºé—´å’Œæ‰§è¡Œæ—¶é—´ã€‚å¦‚æœå‡è®¾çš„æ£€æŸ¥å¤±è´¥ï¼Œå°±é€šè¿‡ OSR æŠŠæ‰§è¡Œè½¬ç§»åˆ° Baseline JIT ä¸Šã€‚ FTL JITDFG JIT å¯ä»¥ä¼˜åŒ– long-running è¿è¡Œçš„ä»£ç æ€§èƒ½ï¼Œä½†æ˜¯ä¼šå½±å“ short-running çš„ç¨‹åºï¼ŒDFG ç¼–è¯‘çš„æ—¶é—´å’Œ DFG ç”Ÿæˆä»£ç çš„è´¨é‡ç›¸æ¯”è¾ƒæ¥è¯´è¿˜æ˜¯è¿‡å¤§ã€‚æƒ³è®© DFG ç”Ÿæˆæ›´å¥½çš„ä»£ç éƒ½ä¼šé™ä½ä»£ç é€Ÿåº¦ï¼Œè¿˜ä¼šå¢åŠ  shorter-running ä»£ç çš„å»¶è¿Ÿã€‚DFG ä¸å¯èƒ½åŒæ—¶æˆä¸ºä½å»¶è¿Ÿä¼˜åŒ–å’Œ high-throughput ä»£ç ç¼–è¯‘å™¨ã€‚è¿™æ—¶å°±éœ€è¦å†å¤šä¸€å±‚æ¥åšè¾ƒé‡çš„ä¼˜åŒ–ï¼ŒåŒæ—¶è®© DFG ä¿æŒè‡ªå·±çš„è½»ä½“é‡ï¼Œä½¿å¾— longer-running å’Œ shorter-running ä»£ç èƒ½å¤Ÿä¿æŒå¹³è¡¡ã€‚æ–°çš„ä¸€å±‚ FTL å®é™…ä¸Šæ˜¯ DFG Backend çš„æ›¿æ¢ã€‚ä¼šå…ˆåœ¨ DFG çš„ JavaScript å‡½æ•°è¡¨ç¤ºè½¬æ¢ä¸ºé™æ€å•ä¸€æŒ‡æ´¾ï¼ˆSSAï¼‰ æ ¼å¼ä¸Šåšäº› JavaScript ç‰¹æ€§çš„ä¼˜åŒ–ã€‚æ¥ç€æŠŠ DFG IR è½¬æ¢æˆ FTL é‡Œç”¨åˆ°çš„ B3 çš„ IRã€‚æœ€åç”Ÿæˆæœºå™¨ç ã€‚ DFG çš„æœºå™¨ä»£ç ç”Ÿæˆå™¨å¾ˆå¿«ï¼Œä½†æ²¡æœ‰ä½çº§ä¼˜åŒ–ã€‚å¯¹è¿™å—çš„ä¼˜åŒ–é‡‡ç”¨å…ˆè½¬æˆ SSA å½¢å¼ï¼Œæ‰§è¡Œæ¯”å¦‚è‡ªåŠ¨æ‰§è¡Œå¾ªç¯ä¸å˜é‡ä»£ç æ¥æé«˜æ‰§è¡Œé€Ÿç‡çš„å¾ªç¯ä¸å˜é‡ä»£ç ç§»åŠ¨ï¼ˆloop-invariant code motionï¼‰çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œè¿™äº›ä¼˜åŒ–å®Œæˆåå°±å¯ä»¥ straight-forward linear å’Œ ä¸€å¯¹å¤šï¼ˆDFG SSA çš„æ¯ä¸ªæŒ‡ä»¤éƒ½å¯ä»¥äº§ç”Ÿï¼‰çš„è½¬æ¢ä¸ºä¹ŸåŸºäº SSA çš„æ²¡æœ‰ JavaScript è¯­è¨€ç‰¹æ€§çš„ B3 çš„ IRã€‚æ€»çš„æ¥è¯´è¿‡ç¨‹å°±æ˜¯æŠŠæºç ç”Ÿæˆå­—èŠ‚ç ï¼Œæ¥ç€å˜æˆ DFG CPS IRï¼Œå†å°±æ˜¯ DFG SSA IRï¼Œæœ€åæˆ B3 çš„ IRï¼ŒJavaScript çš„åŠ¨æ€æ€§å°±æ˜¯åœ¨è¿™äº›è¿‡ç¨‹ä¸­ä¸€æ­¥æ­¥è¢«æ¶ˆé™¤æ‰çš„ã€‚ ä»£ç åœ¨ LLIntï¼ŒBaseline JIT å’Œ DFG JIT è¿è¡Œä¸€æ®µæ—¶é—´æ‰ä¼šè°ƒç”¨ FTLã€‚FTL åœ¨å¹¶å‘çº¿ç¨‹ä¸­ä¼šä»å®ƒä»¬é‚£æ”¶é›†åˆ†æä¿¡æ¯ã€‚short-running ä»£ç æ˜¯ä¸ä¼šå¯¼è‡´ FTL ç¼–è¯‘çš„ï¼Œä¸€èˆ¬è¶…è¿‡10æ¯«ç§’çš„å‡½æ•°ä¼šè§¦å‘ FTL ç¼–è¯‘ã€‚ FTL é€šè¿‡å¹¶å‘ç¼–è¯‘å‡å°å¯¹å¯åŠ¨é€Ÿåº¦çš„å½±å“ã€‚ FTL Backend B3B3 çš„å…¨ç§° Bare Bones Backendï¼Œå®ç°äº†å¤§ååé‡åŒæ—¶ç¼©çŸ­æ€»ä½“ FTL ç¼–è¯‘æ—¶é—´ã€‚B3 çš„ IR æ˜¯ä¸€ä¸ªä½çº§åˆ«çš„ä¸­é—´è¡¨ç¤ºï¼Œä½çº§åˆ«æ„å‘³ç€éœ€è¦å¤§é‡å†…å­˜å»è¡¨ç¤ºæ¯ä¸ªå‡½æ•°ï¼Œå¤§é‡çš„å†…å­˜æ„å‘³ç€ç¼–è¯‘å™¨åœ¨åˆ†æå‡½æ•°æ—¶éœ€è¦æ‰«æå¤§é‡å†…å­˜ã€‚B3 æœ‰ä¸¤ä¸ª IRï¼Œä¸€ä¸ªå« B3 IR å¦ä¸€ä¸ªæœºå™¨çº§åˆ«çš„å« Assembly IRï¼Œç®€ç§° Airã€‚è¿™ä¸¤ä¸ª IR çš„ç›®æ ‡æ˜¯ä»£è¡¨ä½çº§æ“ä½œï¼ŒåŒæ—¶èƒ½æœ€å¤§é™åº¦çš„å‡å°‘åˆ†æä»£ç æ‰€éœ€è¦çš„å†…å­˜è®¿é—®ã€‚è¾¾åˆ°è¿™ä¸ªç›®æ ‡éœ€è¦å‡å°‘ IR å¯¹è±¡æ•´ä½“å¤§å°ï¼Œå‡å°‘è¡¨ç¤ºå…¸å‹æ“ä½œçš„ IR å¯¹è±¡æ•°é‡ï¼Œå‡å°‘ IR çš„ pointer chasingï¼Œæœ€åæ—¶å‡å°‘ IR çš„æ€»æ•°ã€‚ B3 è½¬æ¢æˆ Air ä¼šé€šè¿‡æ‰§è¡Œåå‘è´ªå©ªæ¨¡å¼åŒ¹é…æ¥å·§å¦™åœ°é’ˆå¯¹æ¯ä¸ª B3 æ“ä½œé€‰æ‹©æ­£ç¡®çš„ Air åºåˆ—ã€‚å…·ä½“çš„å®ç°å¯ä»¥å‚çœ‹ B3LowerToAir.cpp çš„ä»£ç ã€‚ ä¸‹é¢æ¥çœ‹çœ‹ B3 IR çš„æ‰€åšçš„ä¼˜åŒ–ã€‚ Strength reductionï¼šä¸»è¦åŒ…æ‹¬æ§åˆ¶æµç¨‹å›¾çš„ç®€åŒ–ï¼Œå¸¸é‡åˆå¹¶ï¼Œæ¶ˆé™¤æ­»ä»£ç ï¼Œå‰ªé™¤æ•´æ•°æº¢å‡ºçš„æ£€æŸ¥ï¼Œè¿˜æœ‰å…¶å®ƒç®€åŒ–è§„åˆ™ã€‚å®ç°æ–‡ä»¶æ˜¯ B3ReduceStrength.cppã€‚ Flow-sensitive å¸¸é‡åˆå¹¶ï¼šåœ¨ B3FoldPathConstants.cpp æ–‡ä»¶é‡Œã€‚ å…¨å±€å…±ç”¨å­è¡¨è¾¾å¼æ¶ˆé™¤ï¼šå®ç°æ–‡ä»¶ B3EliminateCommonSubexpressions.cppã€‚ Tail duplicationï¼šB3DuplicateTails.cpp SSA ä¿®æ­£ï¼šB3FixSSA.cpp ä¼˜åŒ–å¸¸é‡å®é™…çš„ä½ç½®ï¼šB3MoveConstants.cpp Air é‡Œåšçš„ä¼˜åŒ–åŒ…æ‹¬å»é™¤æ­»ä»£ç ï¼Œæ§åˆ¶æµå›¾çš„ç®€åŒ–ä»¥åŠä¿®æ­£éƒ¨åˆ†å¯„å­˜å™¨ stalls å’Œæº¢å‡ºä»£ç ç—‡çŠ¶ã€‚Air æœ€é‡è¦çš„ä¼˜åŒ–æ˜¯å¯„å­˜å™¨åˆ†é…ã€‚ B3 çš„åŠ¨æ€è¯­è¨€æ”¯æŒé çš„æ˜¯ Patchpointsï¼Œè¿˜æœ‰ä¸€åŠåŠŸåŠ³æ˜¯æ“ä½œç çš„ Check familyï¼Œç”¨æ¥å®ç°æ ˆä¸Šæ›¿æ¢ï¼Œå³ OSRã€‚JavaScript æ˜¯ç§åŠ¨æ€è¯­è¨€ï¼Œæ²¡æœ‰å¯ä»¥å¿«é€Ÿæ‰§è¡Œçš„ç±»å‹å’Œæ“ä½œï¼ŒFTL JIT å°±ä½¿ç”¨æ¨æµ‹è¡Œä¸ºæ–¹å¼æŠŠè¿™äº›æ“ä½œè½¬æ¢æˆå¿«é€Ÿä»£ç ã€‚ Air åœ¨å¯„å­˜å™¨åˆ†é…å™¨çš„é€‰æ‹©ä¸Šä½¿ç”¨äº†ç»å…¸çš„å›¾å½¢ç€è‰²å¯„å­˜å™¨åˆ†é…å™¨ï¼Œå«è¿­ä»£å¯„å­˜å™¨åˆå¹¶ï¼Œç®€ç§° IRCã€‚ ç±»å‹åˆ†æWeb Inspector å·¥å…·æ˜¯ WebKit é‡Œæä¾›çš„è°ƒè¯•å·¥å…·ï¼Œé€šè¿‡è¿™ä¸ªå·¥å…·å¯ä»¥å¾ˆå¥½çš„è§‚å¯Ÿå“ªäº›å‡½æ•°ç”šè‡³å“ªäº›æ¡ä»¶æ‰§è¡Œäº†æˆ–è€…æ²¡æœ‰æ‰§è¡Œã€‚æœ€é‡è¦çš„æ˜¯å¯ä»¥ç›´è§‚çš„è§‚å¯Ÿå˜é‡ç±»å‹ï¼Œè¿˜èƒ½å¤Ÿè·Ÿè¸ªå€¼çš„ç»§æ‰¿é“¾ã€‚JavaScript æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œä»»ä½•å˜é‡éƒ½å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œè¡¨è¾¾å¼å¯ä»¥æœ‰ä»»ä½•ç±»å‹ï¼Œå‡½æ•°å¯ä»¥è¿”å›ä»»ä½•ç±»å‹ç­‰ç­‰ã€‚ç”±äºä¸èƒ½ç«‹åˆ»å¾—åˆ°ç±»å‹å°±æ²¡æ³•ç¡®å®šåœ°å€å­—èŠ‚å¤§å°ï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶å»åå¤æ¨æ–­ã€‚é™æ€è¯­è¨€å°±ä¸ä¸€æ ·ï¼Œä¸€å¼€å§‹æ˜ç¡®äº†ç±»å‹ï¼Œæ¯”å¦‚ç›®æ ‡å¹³å° int ç±»å‹å ç”¨4ä¸ªå­—èŠ‚ï¼Œå®ƒå¯¹åº”çš„å¯¹è±¡æ˜¯ä¸ªåœ°å€ï¼Œåç§»é‡æ˜¯0ï¼Œè®¿é—® int æ—¶éœ€è¦å°†å¯¹è±¡åœ°å€åŠ ä¸Š4ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥è¯­è¨€è§£é‡Šç³»ç»Ÿåªè¦ç”¨æ•°ç»„å’Œä½ç§»æ¥å­˜å˜é‡å’Œæ–¹æ³•åœ°å€å°±è¡Œäº†ï¼Œè¿™æ ·å‡ ä¸ªæœºå™¨è¯­è¨€çš„æŒ‡ä»¤å°±å¯ä»¥å¯¹å…¶æ‰§è¡Œå„ç§æ“ä½œã€‚ ä¸‹é¢æ¥ä¸ªä¾‹å­ï¼š 123456789let x = 3;print(x);x = [&quot;These&quot;, &quot;is&quot;, &quot;array with string&quot;];print(x);const justReturn = (x) =&gt; { return x; };justReturn(10);justReturn([1, 2, 3]);justReturn(&quot;I am bad!&quot;); JavaScript æ²¡æœ‰ç±»å‹é™åˆ¶ï¼Œè¯­æ³•ä¸é”™å°±æ²¡é—®é¢˜ï¼Œå¦‚æœæ˜¯é™æ€ç±»å‹è¯­è¨€çš„è¯å°±æ²¡æ³•åƒä¸Šé¢çš„ä¾‹å­ä¸€æ ·æŠŠæ•°ç»„èµ‹ç»™æ•°å­—ç±»å‹çš„å˜é‡ã€‚åœ¨ Type Profiler ä¸­ä¼šæ˜¾ç¤ºç±»å‹åä¸º String? å’Œ Integer? è¿™æ ·åé¢è·Ÿç€é—®å·ç¬¦å·çš„è¡¨ç¤ºï¼Œè¿™æ˜¯åœ¨æœ‰å¤šä¸ªä¸åŒç±»å‹è¢«åˆ†é…ç»™ç›¸åŒå˜é‡ï¼Œå‡½æ•°å‚æ•°ä¼ é€’å’Œå‡½æ•°è¿”å›æ—¶å‘ç”Ÿçš„ã€‚æŸ¥çœ‹æ—¶å¯ä»¥çœ‹åˆ°æ‰€æœ‰è¿™äº›è¢«æ”¶é›†çš„ç±»å‹çš„ä¿¡æ¯ã€‚ é‚£ä¹ˆ JavaScriptCore æ˜¯å¦‚ä½•åˆ†æå˜é‡ç±»å‹çš„å‘¢ï¼Ÿå…ˆçœ‹æ®µ js ä»£ç ï¼š 123function add(x, y) { return x + y;} å¯¹åº”çš„å­—èŠ‚ç ï¼š 12345function add: 10 m_instructions; 3 parameter(s); 1 variable(s)[ 0] enter [ 1] get_scope loc0[ 3] add loc1, arg1, arg2[ 8] ret loc1 ä¸‹é¢çœ‹çœ‹å¼€å¯äº† Type Profiler åçš„å­—èŠ‚ç æ˜¯ä»€ä¹ˆæ ·çš„ï¼š 12345678910111213141516function add: 40 m_instructions; 3 parameter(s); 1 variable(s)[ 0] enter [ 1] get_scope loc0// åˆ†æå‡½æ•°å‚æ•°[ 3] op_profile_type arg1 [ 9] op_profile_type arg2// åˆ†æ add è¡¨è¾¾å¼çš„æ“ä½œæ•°[15] op_profile_type arg1[21] op_profile_type arg2[27] add loc1, arg1, arg2// åˆ†æè¿”å›è¯­å¥ï¼Œæ”¶é›†è¿™ä¸ªå‡½æ•°çš„è¿”å›ç±»å‹ä¿¡æ¯[32] op_profile_type loc1[38] ret loc1 ä¸‹é¢æ˜¯è¿›å…¥ DFG æ—¶è½¬æ¢æˆ DFG IR çš„ä»£ç ï¼š 1234567891011121314151617181920210: SetArgument(this)1: SetArgument(arg1)2: SetArgument(arg2)3: JSConstant(JS|PureInt, Undefined)4: MovHint(@3, loc0)5: SetLocal(@3, loc0)6: JSConstant(JS|PureInt, Weak:Cell: 0x10f458ca0 Function)7: JSConstant(JS|PureInt, Weak:Cell: 0x10f443800 GlobalScopeObject)8: MovHint(@7, loc0)9: SetLocal(@7, loc0)10: GetLocal(JS|MustGen|PureInt, arg1)11: ProfileType(@10)12: GetLocal(JS|MustGen|PureInt, arg2)13: ProfileType(@12)14: ProfileType(@10)15: ProfileType(@12)16: ValueAdd(@10, @12, JS|MustGen|PureInt)17: MovHint(@16, loc1)18: SetLocal(@16, loc1)19: ProfileType(@16)20: Return(@16) ç°åœ¨è¿˜æœ‰å¾ˆå¤š ProfileTypeï¼Œè¿™äº›æ“ä½œä¼šæœ‰å¾ˆå¤§çš„æ¶ˆè€—ï¼ŒDFG ä¼šæ¨æµ‹å‚æ•°ç±»å‹æ˜¯æ•´æ•°ï¼Œæ¥ä¸‹æ¥ä¼šåœ¨è¿™ä¸ªå‡è®¾ä¸‹å°† ProfileType çš„é‚£äº›æ“ä½œç§»é™¤æ‰ã€‚ 12345678910111: SetArgument(arg1)2: SetArgument(arg2)3: JSConstant(JS|PureInt, Undefined)4: MovHint(@3, loc0)7: JSConstant(JS|PureInt, Weak:Cell: 0x10f443800 GlobalScopeObject)8: MovHint(@7, loc0)10: GetLocal(@1, arg1)12: GetLocal(@2, arg2)16: ArithAdd(Int32:@10, Int32:@12)17: MovHint(@16, loc1)20: Return(@16) åœ¨å¯¹ç±»å‹çš„å¤„ç†ä¸Š V8 ä½¿ç”¨äº†ä¸€ä¸ªç»“åˆ C++ ä½¿ç”¨ç±»å’Œåç§»ä½ç½®æ€æƒ³çš„éšè—ç±»æ¥è§£å†³é€šè¿‡å­—ç¬¦ä¸²åŒ¹é…æ‰¾å±æ€§çš„ç®—æ³•ã€‚åšæ³•æ˜¯å°†æœ‰ç›¸åŒå±æ€§åå’Œå±æ€§å€¼çš„å¯¹è±¡ä¿å­˜åœ¨åŒä¸€ä¸ªç»„çš„éšè—ç±»é‡Œï¼Œè¿™äº›å±æ€§åœ¨éšè—ç±»é‡Œæœ‰ç€åŒæ ·çš„åç§»å€¼ï¼Œè¿™æ ·è¿™ä¸ªç»„é‡Œçš„å¯¹è±¡èƒ½å¤Ÿå…±ç”¨è¿™ä¸ªéšè—ç±»çš„ä¿¡æ¯ã€‚è®¿é—®å±æ€§çš„è¿‡ç¨‹æ˜¯å¾—åˆ°éšè—ç±»çš„åœ°å€ï¼Œæ ¹æ®å±æ€§åå¾—åˆ°åç§»å€¼ï¼Œé€šè¿‡åç§»å€¼å’Œéšè—ç±»åœ°å€å¾—åˆ°å±æ€§åœ°å€ã€‚é‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯å¦å¯ä»¥åŠ é€Ÿå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œé€šè¿‡ Inline Cache ç¼“å­˜ä¹‹å‰æŸ¥æ‰¾ç»“æœæ¥å‡å°‘æ–¹æ³•å’Œå±æ€§çš„å“ˆå¸Œè¡¨æŸ¥æ‰¾æ—¶é—´ã€‚å½“ä¸€ä¸ªå¯¹è±¡æˆ–å±æ€§ç±»å‹å‡ºç°å¤šç§æ—¶ç¼“å­˜å°±ä¼šä¸æ–­æ›´æ–°ï¼ŒV8 å°±ä¼šé€€åˆ°å…ˆå‰æŒ‰ç…§å“ˆå¸Œè¡¨æŸ¥æ‰¾çš„æ–¹å¼æ¥ã€‚ æŒ‡ä»¤é›†æ¶æ„JavaScriptCore æ˜¯åŸºäºå¯„å­˜å™¨çš„è™šæ‹Ÿæœº register-based VMã€‚è¿™ç§å®ç°æ–¹å¼ä¸ç”¨é¢‘ç¹å…¥æ ˆï¼Œå‡ºæ ˆå’Œä¸‰åœ°å€çš„æŒ‡ä»¤é›†ï¼Œæ‰€ä»¥æ•ˆç‡é«˜ï¼Œä½†ç§»æ¤æ€§å¼±ç‚¹ã€‚ åŸºäºå¯„å­˜å™¨æŒ‡ä»¤é›†æ¶æ„ä¸‰åœ°å€å’ŒäºŒåœ°å€çš„æŒ‡ä»¤é›†ï¼ŒåŸºæœ¬éƒ½æ˜¯ä½¿ç”¨åŸºäºå¯„å­˜å™¨çš„æ¶æ„æ¥å®ç°çš„ï¼Œè¦æ±‚é™¤äº† load å’Œ store å¤–çš„è¿ç®—æŒ‡ä»¤çš„æºéƒ½è¦æ˜¯å¯„å­˜å™¨ã€‚ ä¸‹é¢çš„ä»£ç  1i = a + b; ä¸Šé¢è¿™å¥è½¬æ¢æˆæœºå™¨æŒ‡ä»¤æ ·å­ 1add i, a, b è¿™æ ·çš„å½¢å¼å°±æ˜¯ä¸‰åœ°å€æŒ‡ä»¤ï¼Œå¾ˆå¤šçš„ä»£ç éƒ½æ˜¯è¿™æ ·çš„äºŒå…ƒè¿ç®—ç„¶åå†èµ‹å€¼ï¼Œä¸‰åœ°å€æ­£å¥½å¯ä»¥åˆ†é…ä¸¤åœ°å€ç»™äºŒå…ƒè¿ç®—çš„ä¸¤ä¸ªæºï¼Œå‰©ä¸‹ä¸€ä¸ªåœ°å€ç»™èµ‹å€¼ç›®æ ‡ã€‚ARM å¤„ç†å™¨çš„ä¸»è¦æŒ‡ä»¤é›†å°±æ˜¯ä¸‰åœ°å€çš„ã€‚é‚£ä¹ˆäºŒåœ°å€æ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿå°†ä¸Šé¢çš„ä»£ç æ¢æˆä¸‹é¢çš„æ ·å­ï¼š 12i += a;i += b; æœºå™¨æŒ‡ä»¤å½¢å¼å°±å˜æˆ 12add i, aadd i, b è¿™æ ·ä¸€ä¸ªæºåŒæ—¶ä¹Ÿä½œä¸ºèµ‹å€¼ç›®æ ‡ï¼ŒX86 ç³»åˆ—çš„å¤„ç†å™¨å°±æ˜¯é‡‡ç”¨çš„äºŒåœ°å€ã€‚ æœ‰äº†äºŒåœ°å€å’Œä¸‰åœ°å€ï¼Œé‚£ä¹ˆæœ‰ä¸€åœ°å€ä¹ˆã€‚ 12add aadd b è¿™å°±æ˜¯ä¸€åœ°å€ï¼Œåªæœ‰æ“ä½œæºï¼Œé‚£ä¹ˆç›®æ ‡å‘¢ï¼Ÿç›®æ ‡ i æ˜¯éšè—ç›®æ ‡ï¼Œè¿™ç§è¿ç®—çš„ç›®æ ‡ç§°ä¸ºç´¯åŠ å™¨çš„ä¸“ç”¨å¯„å­˜å™¨ï¼Œè¿ç®—éƒ½æ˜¯ä¾èµ–æ›´æ–°ç´¯åŠ å™¨çš„çŠ¶æ€æ¥å®Œæˆã€‚ åŸºäºæ ˆæŒ‡ä»¤é›†æ¶æ„é‚£ä¹ˆé›¶åœ°å€å‘¢ï¼ŸJVM å°±æ˜¯é‡‡ç”¨çš„è¿™ç§ã€‚é‚£ä¹ˆå°±å…ˆçœ‹ä¸‹ä¸€æ®µ JAVA ä»£ç ï¼š 12345678class QuickCalculate { byte onePlusOne() { byte x = 1; byte y = 1; byte z = (byte) (x + y); return z; } } è½¬æ¢æˆå­—èŠ‚ç ï¼š 1234567891011iconst_1 // Push æ•´æ•°å¸¸é‡1istore_1 // Pop åˆ°å±€éƒ¨å˜é‡1ï¼Œç›¸å½“äº byte x = 1; è¿™å¥iconst_1 // å† Push æ•´æ•°å¸¸é‡1 istore_2 // Pop åˆ°å±€éƒ¨å˜é‡2ï¼Œç›¸å½“äº byte y = 1; è¿™å¥iload_1 // Push xï¼Œè¿™æ—¶ x å·²ç»ä½œä¸ºæ•´æ•°å­˜åœ¨å±€éƒ¨å˜é‡1é‡Œã€‚iload_2 // Push yï¼Œè¿™æ—¶ y å·²ç»ä½œä¸ºæ•´æ•°å­˜åœ¨å±€éƒ¨å˜é‡1é‡Œã€‚iadd // æ‰§è¡ŒåŠ æ“ä½œï¼Œæ ˆé¡¶å°±å˜æˆäº† x + yï¼Œç»“æœä¸ºä¸€ä¸ªæ•´æ•°int2byte // å°†æ•´æ•°è½¬åŒ–æˆå­—èŠ‚ï¼Œç»“æœè¿˜æ˜¯å 32ä½istore_3 // Pop åˆ°å±€éƒ¨å˜é‡3é‡Œï¼Œbyte z = (byte)(x + y)iload_3 // Push z çš„å€¼ä½¿ä¹‹å¯ä»¥è¢«è¿”å›ireturn // è¿”å›ç»“æœï¼Œreturn z æ•´ä¸ªè¿‡ç¨‹æˆ‘æ”¾åˆ°äº†æ³¨é‡Šé‡Œã€‚å¯ä»¥çœ‹åˆ°é›¶åœ°å€å½¢å¼çš„æŒ‡ä»¤é›†å°±æ˜¯åŸºäºæ ˆæ¶æ„çš„ã€‚è¿™ç§æ¶æ„çš„ä¼˜åŠ¿æ˜¯å¯ä»¥ç”¨æ›´å°‘çš„ç©ºé—´å­˜æ›´å¤šçš„æŒ‡ä»¤ï¼Œæ‰€ä»¥ç©ºé—´ä¸æ˜¯å¾ˆå¯Œè¶³æ—¶è¿™ç§æ¶æ„æ˜¯å¯å–çš„ï¼Œä¸è¿‡é›¶åœ°å€è¦å®Œæˆä¸€ä»¶äº‹ä¼šæ¯”åŸºäºå¯„å­˜å™¨æŒ‡ä»¤æ¶æ„çš„äºŒåœ°å€ï¼Œä¸‰åœ°å€æŒ‡ä»¤è¦å¤šå¾ˆå¤šæŒ‡ä»¤ï¼Œæ‰§è¡Œæ•ˆç‡è¿˜ä¼šä½ã€‚ æŒ‡ä»¤é›†æ¶æ„æ¼”åŒ–å’Œæ¯”è¾ƒJavaScriptCore é‡‡ç”¨ SquirrleFish ä¹‹å‰çš„è§£é‡Šå™¨ä»–ä»¬éƒ½æ˜¯æ ‘éå†å¼çš„ï¼Œè§£é‡Šå™¨ä¼šé€’å½’éå†æ ‘ï¼Œåœ¨éå†æ ‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹çš„æ“ä½œéƒ½æ˜¯æ ¹æ®è§£é‡Šå…¶æ¯ä¸ªå­—èŠ‚ç‚¹è¿”å›çš„å€¼æ¥çš„ã€‚è¿™ç§æ“ä½œå³ä¸æ˜¯åŸºäºæ ˆä¹Ÿä¸æ˜¯åŸºäºå¯„å­˜å™¨ã€‚ä¸¾ä¸ªä¾‹å­ 1i = x + y * z æŒ‰ AST çš„ååºéå†ï¼Œæœ€ä¸Šé¢çš„ = ç¬¦å·ä¾èµ–å­èŠ‚ç‚¹ + ç¬¦å·èŠ‚ç‚¹è¿”å›çš„å€¼ï¼Œ+ ç¬¦å·ä¾èµ– x èŠ‚ç‚¹å’Œ * ç¬¦å·èŠ‚ç‚¹çš„å€¼ï¼Œä¾æ­¤é€’å½’ä¸‹å»ï¼Œè¿™æ ·æœ€å¼€å§‹è·å–åˆ°å€¼çš„å°±æ˜¯æœ€ä½ä¸€çº§çš„è¿ç®—ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œå°±æ˜¯ y å’Œ z çš„è¿ç®—çš„ç»“æœè¿”å›ç»™ * ç¬¦å·èŠ‚ç‚¹ã€‚è¿™ç§å°±æ˜¯å…¸å‹çš„ååºéå†ã€‚CRuby 1.9 ä¹‹å‰ä¹Ÿæ˜¯ç”¨çš„è¿™ç§æ–¹å¼è§£é‡Šæ‰§è¡Œçš„ã€‚ èµ‹å€¼ç¬¦å· = ç¬¦å·çš„å·¦ä¾§å«åšå·¦å€¼ï¼Œå³ä¾§çš„å€¼å«åšå³å€¼ã€‚å·¦å€¼ä¹Ÿå¯èƒ½æ˜¯å¤æ‚çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚æ•°ç»„æˆ–è€…ç»“æ„ä½“ã€‚æ ¹æ®æ±‚å€¼é¡ºåºï¼Œå¯¹äºäºŒå…ƒè¿ç®—çš„èŠ‚ç‚¹ï¼Œæ˜¯å…ˆéå†å·¦å­èŠ‚ç‚¹çš„ã€‚æ‰€ä»¥å½“å·¦å€¼æ˜¯å¤æ‚è¡¨è¾¾å¼éœ€è¦è®¡ç®—æ—¶æ˜¯ä¼šä¼˜å…ˆè¿›è¡Œè®¡ç®—çš„ã€‚å†çœ‹ä¸ªå·¦å€¼æ˜¯æ•°ç»„çš„ä¾‹å­ï¼š 12345678public class LeftFirstTest { public static void main(String[] args) { int[] arr = new int[1]; int x = 3; int y = 5; arr[0] = x + y; }} arr[0] = x + y; å¯¹åº”çš„å­—èŠ‚ç ï¼š 12345678910// å·¦å€¼ï¼Œæ•°ç»„ä¸‹æ ‡aload_1 iconst_0 // å³å€¼iload_2 // xiload_3 // yiadd iastore // èµ‹å€¼ç¬¦å·èŠ‚ç‚¹è¿›è¡Œèµ‹å€¼ å¯ä»¥çœ‹åˆ°å·¦å€¼æ˜¯å…ˆè®¡ç®—çš„ã€‚ ä»æ ‘éå†åˆ°åŸºäºæ ˆçš„è§£é‡Šï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªå°† AST æ ‘æ‰“å¹³çš„è¿‡ç¨‹ã€‚æ–¹æ³•æ˜¯ååºéå† AST æ—¶ä½¿ç”¨ Reverse Polish Notation è¿™ç§åç¼€è®°æ³•ç”Ÿæˆä¸€ä¸ªåºåˆ—ï¼Œæˆä¸ºä¸€ä¸ªçº¿æ€§ç»“æ„ï¼Œåé¢å†è§£é‡Šæ‰§è¡Œè¿™ä¸ªæ“ä½œåºåˆ—ã€‚ JVM æ˜¯ Java è¯­è¨€çš„è™šæœºã€‚Android ä¹Ÿæ˜¯ç”¨çš„ Java è¯­è¨€ï¼Œé‚£ä¹ˆå®ƒçš„è™šæœºä¹Ÿæ˜¯ JVM å—ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼ŒAndroid ä½¿ç”¨çš„è™šæœºå« Dalvik VMï¼Œè¿™æ¬¾è™šæœºåœ¨å¾ˆå¤šè®¾è®¡ä¸Šéƒ½ä¸ JVM å…¼å®¹ï¼Œå­—èŠ‚ç æ˜¯äºŒåœ°å€å’Œä¸‰åœ°å€å¹¶ç”¨çš„æ–¹å¼ï¼Œæ˜¯åŸºäºå¯„å­˜å™¨çš„æ¶æ„ã€‚Dalvik VM ç”¨åœ¨ç§»åŠ¨ç«¯ä¸ºäº†èƒ½å¤Ÿæ›´åŠ é«˜æ•ˆï¼Œå¼€å§‹å°±æ²¡æœ‰é¡¾åŠå¤ªå¤šå¯ç§»æ¤æ€§ï¼Œè¿™æ ·åŸºäºå¯„å­˜å™¨æ¶æ„çš„ä¼˜åŠ¿å°±èƒ½å¤Ÿæ›´å¥½çš„å‘æŒ¥å‡ºæ¥äº†ã€‚æƒ³æ›´å¤šäº†è§£ Dalvik VM å¯ä»¥é€šè¿‡ Dan Bornstein åšçš„ä¸€ä¸ª Dalvik çš„å®ç°åŸç†çš„æ¼”è®² Dalvik VM Internalsã€‚ JVM å’Œ Dalvik VM çš„ä¸»è¦åŒºåˆ«æ˜¯åè€…å­—èŠ‚ç æŒ‡ä»¤æ•°é‡å’Œå†…å­˜æ›´å°‘ã€‚JVM æ¯ä¸ªçº¿ç¨‹æœ‰ä¸€ä¸ª Java æ ˆç”¨æ¥è®°å½•æ–¹æ³•è°ƒç”¨çš„ activation recordï¼Œæ¯è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å°±ä¼šåˆ†é…ä¸€ä¸ªæ–°æ ˆå¸§ï¼Œæ–¹æ³•è¿”å›å°± Pop å‡ºæ ˆå¸§ã€‚æ¯ä¸ªæ ˆå¸§ä¼šæœ‰å±€éƒ¨å˜é‡åŒºï¼Œistore è¿™æ ·çš„æŒ‡ä»¤ç”¨æ¥ç§»åŠ¨å±€éƒ¨å˜é‡å’Œå‚æ•°åˆ°å±€éƒ¨å˜é‡åŒºã€‚æ¯ä¸ªæ ˆå¸§è¿˜ä¼šæœ‰æ±‚å€¼æ ˆï¼Œè¿™ä¸ªæ ˆç”¨æ¥å­˜å‚¨æ±‚å€¼çš„ä¸­é—´ç»“æœå’Œè°ƒç”¨å…¶ä»–æ–¹æ³•çš„å‚æ•°ç­‰ï¼Œä½¿ç”¨ iconst è¿™æ ·çš„æŒ‡ä»¤æ¥è¿›è¡Œæ•°æ®çš„ç§»åŠ¨ï¼Œè¿˜å¯ä»¥é€šè¿‡ iaddï¼Œimul è¿™æ ·çš„æŒ‡ä»¤åœ¨æ±‚å€¼æ ˆä¸­ Pop å‡ºå€¼è¿›è¡Œæ±‚å€¼ï¼Œç„¶åå†æŠŠç»“æœ Push åˆ°æ ˆé‡Œã€‚ Dalvik VM çš„æ¯ä¸ªçº¿ç¨‹æœ‰ç¨‹åºè®¡æ•°å™¨å’Œè°ƒç”¨æ ˆï¼Œæ–¹æ³•çš„è°ƒç”¨å’Œ JVM ä¸€æ ·æ˜¯ä¼šåˆ†é…ä¸€ä¸ªæ–°çš„å¸§ï¼Œä¸åŒçš„æ˜¯ Dalvik VM ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿå¯„å­˜å™¨æ¥æ›¿ä»£ JVM é‡Œçš„å±€éƒ¨å˜é‡åŒºå’Œæ±‚å€¼æ ˆã€‚æ–¹æ³•è°ƒç”¨ä¼šæœ‰ä¸€ç»„è‡ªå·±çš„è™šæ‹Ÿå¯„å­˜å™¨ï¼Œå¸¸ç”¨çš„æ˜¯ v0 - v15ï¼Œæœ‰äº›æŒ‡ä»¤å¯ä»¥ä½¿ç”¨ v0 - v255ã€‚åªåœ¨è™šæ‹Ÿå¯„å­˜å™¨ä¸­è¿›è¡ŒæŒ‡ä»¤æ“ä½œï¼Œæ•°æ®ç§»åŠ¨å°‘å¤šäº†ï¼Œä¿å­˜å±€éƒ¨å˜é‡çš„å­˜å‚¨å•å…ƒä¹Ÿä¼šå°‘å¾ˆå¤šã€‚Dalvik VM çš„å¯„å­˜å™¨æ¯æ¬¡æ–¹æ³•è°ƒç”¨ä¼šä¸€ç»„è‡ªå·±çš„ï¼Œä¸è¿‡åœ¨ X86 æ¶æ„ä¸­å¯„å­˜å™¨æ˜¯å…¨å±€çš„ï¼Œè¿™æ · X86 éœ€è¦è€ƒè™‘ calling converntionï¼Œå°±æ˜¯éœ€è¦ä¿æŠ¤ä¸€äº›å¯„å­˜å™¨çš„çŠ¶æ€ï¼Œåœ¨è°ƒç”¨æ—¶éœ€è¦å¤„ç†è¿™äº›ï¼Œè€Œ Dalvik VM è°ƒç”¨å®Œæ–¹æ³•åï¼Œé‚£äº›å¯„å­˜å™¨å€¼ä¼šæ¢å¤æˆè°ƒç”¨å‰çš„å¯ä»¥å¾ˆå¥½çš„é¿å…è¿™æ ·çš„é—®é¢˜ã€‚ V8 æ²¡æœ‰ä¸­é—´çš„å­—èŠ‚ç ï¼Œè€Œæ˜¯ç›´æ¥ç¼–è¯‘ JavaScript ç”Ÿæˆæœºå™¨ç ã€‚ä¸è¿‡åœ¨å†…éƒ¨ä¹Ÿç”¨äº†è¡¨è¾¾å¼æ ˆæ¥ç®€åŒ–ä»£ç ç”Ÿæˆï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä½¿ç”¨è™šæ‹Ÿæ ˆå¸§æ¥è®°å½•å±€éƒ¨å˜é‡å’Œæ ˆçš„çŠ¶æ€ã€‚ç”Ÿæˆä»£ç çš„è¿‡ç¨‹ä¸­ä¼šæœ‰çª¥å­”ä¼˜åŒ–ç”¨æ¥å»é™¤å¤šä½™çš„å…¥æ ˆå’Œå‡ºæ ˆï¼ŒæŠŠæ ˆæ“ä½œè½¬æˆå¯„å­˜å™¨æ“ä½œï¼Œç”Ÿæˆçš„ä»£ç çœ‹èµ·æ¥å°±å’ŒåŸºäºå¯„å­˜å™¨çš„ä»£ç ç±»ä¼¼äº†ã€‚ è¿™å°±æœ‰ä¸ªç–‘é—®äº†ï¼Œé›¶åœ°å€è¦åšå¤šæ¬¡å…¥æ ˆå’Œå‡ºæ ˆæ“ä½œï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰è™šæ‹Ÿæœºæ¯”å¦‚ JVM å­—èŠ‚ç è¿˜è¦ç”¨é›¶åœ°å€å½¢å¼å‘¢ï¼Ÿ åƒ X86 åˆšå¼€å§‹æ—¶çš„å¯„å­˜å™¨å¾ˆå¤šä¸æ˜¯é€šç”¨å¯„å­˜å™¨ï¼Œç”±äºè®©ç¼–è¯‘å™¨å»å†³å®šç¨‹åºé‡Œé‚£ä¹ˆå¤šçš„å˜é‡è¯¥æ€ä¹ˆè£…åˆ°å¯„å­˜å™¨é‡Œï¼Œé‚£äº›åº”è¯¥åº”è¯¥æ˜ å°„åˆ°ä¸€ä¸ªå¯„å­˜å™¨ï¼Œå“ªäº›åº”è¯¥æ¢å‡ºï¼Œè¿™å¹¶ä¸å®¹æ˜“ï¼ŒJVM é‡‡ç”¨é›¶æŒ‡ä»¤è¿™ç§å †æ ˆç»“æ„çš„åŸå› å°±æ˜¯ä¸ä¿¡ä»»ç¼–è¯‘å™¨çš„å¯„å­˜å™¨åˆ†é…ï¼Œæ‰€ä»¥ä½¿ç”¨å †æ ˆç»“æ„ï¼Œè¿™æ ·å°±å¯ä»¥é¿å¼€å¯„å­˜å™¨åˆ†é…è¿™æ ·çš„éš¾é¢˜ã€‚ä¸è¿‡åæ¥ IBM å…¬å¼€äº†ä»–ä»¬çš„å›¾æŸ“è‰²å¯„å­˜å™¨åˆ†é…ç®—æ³•ï¼Œè¿™æ ·ç¼–è¯‘å™¨çš„åˆ†é…èƒ½åŠ›å¾—åˆ°äº†å¾ˆå¤§çš„è¿›æ­¥ï¼Œæ‰€ä»¥ç°åœ¨éƒ½æ˜¯ç¼–è¯‘å™¨æ¥ä¸»å¯¼å¯„å­˜å™¨åˆ†é…ã€‚ å¾ˆå¤šä¸»æµé«˜çº§è¯­è¨€è™šæ‹Ÿæœºï¼ˆhigh-level language virtual machineï¼Œç®€ç§° HLL VMï¼‰æ¯”å¦‚ JVMï¼ŒCPython éƒ½é‡‡ç”¨çš„åŸºäºæ ˆçš„æ¶æ„ã€‚è¿™æ ·åšä¸»è¦æ˜¯å› ä¸ºä¸ç”¨è€ƒè™‘ä¸´æ—¶å˜é‡åˆ†é…ç©ºé—´ï¼Œåªéœ€è¦æ±‚å€¼æ ˆæ¥åšï¼Œè¿™æ ·çš„ç¼–è¯‘å™¨æ›´å®¹æ˜“å®ç°ã€‚è¿˜æœ‰å°±æ˜¯å¯ä»¥æ›´å®¹æ˜“åœ¨ç¡¬ä»¶è¾ƒå·®çš„æœºå™¨ä¸Šè¿è¡Œï¼Œå‰é¢ä¹Ÿè®²åˆ°åŸºäºæ ˆè¿™ç§æ¶æ„æŒ‡ä»¤å¯¹äºå­˜å‚¨ç©ºé—´çš„è¦æ±‚æ›´å°‘ã€‚æœ€åå°±æ˜¯è€ƒè™‘ç§»æ¤ï¼Œå¤æ‚æŒ‡ä»¤è®¡ç®—æœºï¼ˆComplex Instruction Set Computerï¼Œç®€ç§° CISCï¼‰çš„é€šç”¨å¯„å­˜å™¨æ¯”è¾ƒå°‘ï¼Œ32ä½åªæœ‰8ä¸ª32ä½é€šç”¨å¯„å­˜å™¨ã€‚ç²¾ç®€æŒ‡ä»¤é›†è®¡ç®—æœºï¼ˆReduced Instruction Set Computerï¼Œç®€ç§° RISCï¼‰é€šç”¨å¯„å­˜å™¨æ•°é‡ä¼šå¤šäº›ï¼Œ32ä½æœ‰16ä¸ªå¯„å­˜å™¨ã€‚æºæ¶æ„å¯„å­˜å™¨æ•°é‡é€šå¸¸å’Œå®é™…æœºå™¨é€šç”¨å¯„å­˜å™¨æ•°é‡ä¸ä¸€è‡´è€Œå®ç°æ˜ å°„éº»çƒ¦ï¼ŒåŸºäºæ ˆæ¶æ„é‡Œæ˜¯æ²¡æœ‰é€šç”¨å¯„å­˜å™¨çš„ï¼Œå®ç°è™šæœºæ—¶å¯ä»¥å°±å¯ä»¥å¾ˆå®¹æ˜“è‡ªç”±çš„åˆ†é…å®é™…æœºå™¨å¯„å­˜å™¨ï¼Œç§»æ¤èµ·æ¥è‡ªç„¶ä¹Ÿå°±å®¹æ˜“å¤šäº†ã€‚ å¤„ç†å™¨æ¥è¯´å¤šæ˜¯åŸºäºå¯„å­˜å™¨æ¶æ„çš„ï¼Œä½†æ˜¯å¯¹äºè™šæœºæ¥è¯´ï¼Œç”±äºåŸºäºæ ˆæ¶æ„éœ€è¦æ‰§è¡Œæ›´å¤šçš„ load æˆ– store è¿™æ ·çš„æŒ‡ä»¤ï¼Œè¿™æ · Instruction dispatch çš„æ¬¡æ•°å’Œå†…å­˜è®¿é—®çš„æ¬¡æ•°ä¼šæ›´å¤šï¼Œæ‰€ä»¥åŸºäºå¯„å­˜å™¨çš„æ¶æ„åœ¨è™šæœºé‡ŒåŒæ ·ä¹Ÿæ›´ä¼˜äº›ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¯¹äºé—­ç¯çš„è‹¹æœæ¥è¯´ä¼šåœ¨ JavaScriptCore çš„è™šæœºé‡Œé‡‡ç”¨æ€§èƒ½æ›´å¥½çš„åŸºäºå¯„å­˜å™¨çš„æ¶æ„ï¼Œè€Œä¸å»é¡¾åŠç§»æ¤æ€§ã€‚ JavaScriptå„å¤§å¼•æ“çš„ä»‹ç»å„ä¸ª JavaScript å¼•æ“ä»‹ç»ï¼š SpiderMonkeyï¼šç”¨äº Mozilla Firefoxï¼Œæ˜¯æœ€æ—©çš„ JavaScript å¼•æ“ï¼ŒåŸºäºæ ˆçš„å­—èŠ‚ç ã€‚Parser ä½¿ç”¨çš„æ‰‹å†™çº¯é€’å½’ä¸‹é™å¼ã€‚ KJSï¼šKDE çš„å¼•æ“ï¼Œç”¨äº Konqueror æµè§ˆå™¨ã€‚æ ‘éå†è§£é‡Šå™¨ã€‚Parser ä½¿ç”¨çš„æ˜¯ bisonã€‚ Rhinoï¼šä½¿ç”¨ Javaç¼–å†™ï¼Œå¼€å‘æºç ï¼Œä¹Ÿæ˜¯ Mozilla çš„ï¼Œç›¸å½“äº Java ç‰ˆçš„ SpiderMonkeyï¼Œå½“æ—¶çš„æƒ³æ³•æ˜¯æƒ³æŠŠ JavaScript åšæˆæœåŠ¡ç«¯çš„è„šæœ¬è¯­è¨€æ¥ç”¨ã€‚Parser æ˜¯æ‰‹å†™çš„çº¯é€’å½’ä¸‹é™å¼ rhino/src/org/mozilla/javascript/Parser.java ã€‚ Chakraï¼šä¹Ÿå« JScript å¾®è½¯çš„ Internet Explorer å’Œ Microsoft Edge åœ¨ä½¿ç”¨ã€‚ JavaScriptCoreï¼šè‹¹æœå¼€å‘çš„å¼€æº JavaScript å¼•æ“ï¼Œç”¨åœ¨ Safari ç­‰æµè§ˆå™¨ä¸­ã€‚Safari æ˜¯å¸¦æœ‰ JIT çš„ JavaScriptCore çš„ï¼Œè€Œ UIWebView æ˜¯æ²¡æœ‰çš„ã€‚ V8ï¼šGoogle å¼€å‘çš„å¼€æºå¼•æ“ï¼Œç”¨äº Chromeã€‚Parser ä½¿ç”¨çš„æ˜¯æ‰‹å†™çº¯é€’å½’ä¸‹é™åŠ è¿ç®—ç¬¦ä¼˜å…ˆçº§æ··åˆå¼ã€‚V8 ä½¿ç”¨äº† 2-passï¼Œä¼šå…ˆæ”¶é›†ä¸€äº›ä¸Šä¸‹æ–‡ä¿¡æ¯å¢åŠ é¢„æµ‹çš„å‡†ç¡®æ€§ã€‚V8 å¼€å§‹æ—¶æ˜¯ä¸ç”¨å­—èŠ‚ç ä¼šç›´æ¥ç¼–è¯‘æˆæœºå™¨ç ï¼ŒDart VM ä¹Ÿæ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œä»–ä»¬ä¸€ä¸ªé—®é¢˜çš„å›ç­” Why didnâ€™t Google build a bytecode VM targetable by multiple languages including Dart? åŒæ ·é€‚ç”¨äº V8ã€‚ä¸è¿‡ V8 5.9 å¯ç”¨äº† Ignition å­—èŠ‚ç è§£é‡Šå™¨ï¼Œè‡ªæ­¤å‡ å¤§ JS å¼•æ“éƒ½ç”¨äº†å­—èŠ‚ç ã€‚å¯ç”¨å­—èŠ‚ç çš„è€ƒè™‘ä¸»è¦æ˜¯å¸Œæœ›èƒ½å¤Ÿå‡å°‘æœºå™¨ç å¯¹å†…å­˜ç©ºé—´çš„å ç”¨ã€‚ç”±äºæœºå™¨ç å ç”¨çš„ç©ºé—´ä¹Ÿå¾ˆå¤§ï¼Œæ‰€ä»¥ä¸å¥½éƒ½ç¼“å­˜ä¸‹æ¥ï¼Œä¸ç„¶å†…å­˜å’Œç£ç›˜éƒ½åƒä¸æ¶ˆï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶é—´éƒ½å¤ªé•¿ï¼Œè¿™æ ·æ¯æ¬¡ç¼–è¯‘çš„æœºå™¨ç éƒ½ä¸æ˜¯å®Œæ•´çš„åªä¼šç¼“å­˜æœ€å¤–çš„ä¸€å±‚ï¼Œå¦‚æœä»£ç æœ€å¤–å±‚åŒ…äº†ä¸€å±‚ï¼Œå¯åŠ¨ä»£ç æ¯æ¬¡éƒ½æ˜¯ä¸åŒçš„è°ƒç”¨å°±ä¼šæ¯æ¬¡éƒ½ç¼–è¯‘ï¼Œä¼šå¯¼è‡´ç¼“å­˜æ²¡æœ‰ä½œç”¨ã€‚ç”±äºå­—èŠ‚ç é€šè¿‡æ¯”è¾ƒå¥½çš„è®¾è®¡åèƒ½å¤Ÿåšåˆ°æ¯”æœºå™¨ç ç´§å‡‘ï¼Œè¿™æ ·å¼•å…¥ Ignition åå†…å­˜æ˜æ˜¾çš„ä¸‹é™äº†ã€‚TurboFan å†å¯¹ Ignition å­—èŠ‚ç æ¥è¿›è¡Œè§£é‡Šã€‚ å„ä¸ªå¼•æ“ä¹‹é—´é€šç”¨æŠ€æœ¯æ ¹æ®ä¸‹é¢å…³é”®å­å»æŸ¥æ‰¾ï¼Œå¯ä»¥äº†è§£æ›´å¤šçš„ç›¸å…³çš„è™šæœºæŠ€æœ¯ã€‚ æºç åˆ°ä¸­é—´ä»£ç  Recusive-descent parserï¼šé€’å½’ä¸‹é™å¼ parser Operator precedence parserï¼šè¿ç®—ç¬¦ä¼˜å…ˆçº§ parser Deferred parserï¼šå»¶è¿Ÿ parser ä¸­é—´ä»£ç åˆ°ç›®æ ‡ä»£ç  Tiered compilationï¼šå¤šå±‚ç¼–è¯‘ Background compilationï¼šåå°ç¼–è¯‘ Type feedbackï¼šç±»å‹åé¦ˆ Type specializationï¼šç±»å‹ç‰¹åŒ– SSA-form IRï¼šé™æ€å•èµ‹å€¼å½¢å¼ ming1016","link":"/program/ï£¿/javascriptcore/"},{"title":"iOSå¼€å‘ä¹‹ç”¨æˆ·ç™»é™†ä¿¡æ¯å­˜å‚¨","text":"æˆ‘ä»¬å¼€å‘Appçš„æ—¶å€™,å¸¸å¸¸æ¶‰åŠåˆ°ç”¨æˆ·ç™»é™†,é‚£ä¹ˆå°±ä¼šæ¶‰åŠåˆ°ç”¨æˆ·ä¿¡æ¯çš„å­˜å‚¨å’Œç”¨æˆ·çš„ç™»é™†çŠ¶æ€ å¤§è‡´ä¿¡æ¯å­˜å‚¨åˆ†ä¸ºä¸‰ç§æ–¹å¼ ä¸€.å•ä¾‹æ¨¡å¼ï¼Œç™»é™†åæŠŠç”¨æˆ·æ•°æ®å­˜å‚¨åœ¨å•ä¾‹å¯¹è±¡æˆ‘é€šå¸¸æ˜¯å­˜åœ¨AppDelegate,å­˜åœ¨è¿™é‡Œçš„å¥½å¤„æ˜¯,ç”¨æˆ·æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸä¸appè¿è¡Œå‘¨æœŸç›¸åŒ,å¦‚æœappå…³é—­æˆ–è€…é—ªé€€,ä¸‹æ¬¡å¼€å¯appå°±æ˜¯æœªç™»é™†çŠ¶æ€,ä»¥ä¸‹æ˜¯éƒ¨åˆ†å…³é”®ä»£ç  12345678910111213//AppDelegate.hæ–‡ä»¶#import &quot;User.h&quot;@interface AppDelegate : UIResponder &lt;UIApplicationDelegate&gt;@property (strong, nonatomic) User *user;+(AppDelegate*)APP;@end//AppDelegate.mæ–‡ä»¶ è¿™é‡Œåªæ˜¯å¢åŠ äº†ä¸ªæ–¹ä¾¿çš„ç±»æ–¹æ³•è€Œ@implementation AppDelegate+(AppDelegate*)APP{ return (AppDelegate*)[[UIApplication sharedApplication] delegate];}- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions User å®ä½“123456789101112131415161718192021#import &quot;BaseModel.h&quot;@interface User : BaseModel@property (strong, nonatomic) NSString *userID;@property (strong, nonatomic) NSString *userName;@property (strong, nonatomic) NSString *passdword;@property (strong, nonatomic) NSString *cellPhone;+ (NSURLSessionDataTask *)login:(NSDictionary *)paramDic Success:(void (^)(NSDictionary *result))success Failure:(void (^)(NSError *error))failue;@end- (void)viewDidAppear:(BOOL)animated{ [super viewDidAppear:animated]; if (![AppDelegate APP].user) { LoginViewController *login = [[LoginViewController alloc]init]; [self presentViewController:login animated:YES completion:nil]; } } åœ¨RootViewController(ä¸€èˆ¬éƒ½æ˜¯appçš„ç¬¬ä¸€ä¸ªç•Œé¢å³å¯)ä¸­åˆ¤æ–­æ˜¯å¦å­˜åœ¨userå¯¹è±¡,å¦‚æœå­˜åœ¨å³ç™»é™†,å¯ä»¥è·å–userå®ä½“ä¸­çš„å„ç§ä¿¡æ¯,å¦‚æœä¸å­˜åœ¨å³æœªç™»é™†,å¼¹å‡ºç™»å½•æ¡†,ç™»é™†åèµ‹å€¼userå¯¹è±¡ 12345678910- (void)viewDidAppear:(BOOL)animated{ [super viewDidAppear:animated]; if (![AppDelegate APP].user) { LoginViewController *login = [[LoginViewController alloc]init]; [self presentViewController:login animated:YES completion:nil]; } } ç™»é™†ç•Œé¢,ç™»é™†æˆåŠŸèµ‹å€¼userå¯¹è±¡12345678910111213- (IBAction)loginTouched:(id)sender {//ç½‘ç»œè¯·æ±‚... [User login:@{@&quot;password&quot;:self.password.text, @&quot;cellphone&quot;:self.username.text} Success:^(NSDictionary *result) { [AppDelegate APP].user = [[User alloc]init]; [AppDelegate APP].user.cellphone = self.username.text; [AppDelegate APP].user.password = self.password.text;//å¦‚æœç™»é™†ååå›çš„resultæ˜¯éœ€è¦å­˜çš„æ•°æ®,ç¡®ä¿User modelä¸­æœ‰å¯¹åº”çš„ç»“æ„,ä¹‹ååˆ©ç”¨JsonModel(https://github.com/icanzilb/JSONModel)ç­‰æ¡†æ¶ç›´æ¥è¿›è¡Œè½¬æ¢æ¯”å¦‚ [AppDelegate APP].user = [[User alloc] initWithDictionary:result error:nil]; } Failure:^(NSError *error) { }];} è¿™æ ·å°±å¯ä»¥åœ¨ä»»æ„ç±»ä¸­[AppDelegate APP].user.cellphone å–ç±»ä¼¼æ•°æ®äº† äºŒ. NSUserDefaults .æ•°æ®å­˜å‚¨åå¯ä»¥å…³é—­appåä¾ç„¶å­˜åœ¨,åªæœ‰å¸è½½App æˆ–è€…æ‰‹åŠ¨åˆ é™¤, æ•°æ®æ‰ä¼šæ¶ˆå¤±(æ³¨:NSUserDefaultså­˜å‚¨çš„æ•°æ®å…¶å®å°±æ˜¯å­˜å‚¨åœ¨äº†ä¸€ä¸ª.plistæ–‡ä»¶ä¸­,ä»»ä½•äººæŠŠè®¾å¤‡è¿æ¥ç”µè„‘åéƒ½å¯ä»¥æ‰¾åˆ°å¯¹åº”æ–‡ä»¶çœ‹è§å­˜å‚¨çš„åŸæ–‡å†…å®¹,é™¤éä½ å­˜çš„æ—¶å€™åŠ äº†å¯†,æ‰€ä»¥NSUserDefaultsä¹‹ç”¨æ¥å­˜å‚¨ä¸æ˜¯å¾ˆé‡è¦çš„æ•°æ®,æ¯”å¦‚ç”¨æˆ·åç­‰) æ¥ç€ç¬¬ä¸€ç§æ–¹æ³•ç™»é™†çš„è¿‡ç¨‹,å¦‚æœæˆ‘æƒ³ç™»é™†ä¸€æ¬¡åè®°å½•ç”¨æˆ·çš„ç”¨æˆ·å,å¹¶ä¸”å…¶ä»–æ•°æ®è¿˜æ˜¯éšç€appç”Ÿå‘½å‘¨æœŸ,é‚£ä¹ˆåªéœ€å†™å…¥NSUserDefaultså³å¯,è®°å¾—ä¸è¦å¿˜äº†[userDefaults synchronize] 123456789101112131415161718- (IBAction)loginTouched:(id)sender {//ç½‘ç»œè¯·æ±‚... [User login:@{@&quot;password&quot;:self.password.text, @&quot;cellphone&quot;:self.username.text} Success:^(NSDictionary *result) { [AppDelegate APP].user = [[User alloc]init]; [AppDelegate APP].user.cellphone = self.username.text; [AppDelegate APP].user.password = self.password.text;//å¦‚æœç™»é™†ååå›çš„resultæ˜¯éœ€è¦å­˜çš„æ•°æ®,ç¡®ä¿User modelä¸­æœ‰å¯¹åº”çš„ç»“æ„,ä¹‹ååˆ©ç”¨JsonModel(https://github.com/icanzilb/JSONModel)ç­‰æ¡†æ¶ç›´æ¥è¿›è¡Œè½¬æ¢æ¯”å¦‚ [AppDelegate APP].user = [[User alloc] initWithDictionary:result error:nil]; NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; [userDefaults setObject:self.username.text forKey:@&quot;KEY_USER_NAME&quot;]; [userDefaults synchronize]; } Failure:^(NSError *error) { }];} å…³é—­appå,ä»æ–°è¿›å…¥app,æƒ³è¯»å–è¿™ä¸ªæ•°æ®åªéœ€è¦ä»»æ„ç±»ä¸­,å³å¯è·å¾—å­˜ä¸‹çš„æ•°æ® 12NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];NSString *username = [userDefaults objectForKey:@&quot;KEY_USER_NAME&quot;]; ä¸‰.é’¥åŒ™ä¸²ï¼Œæ•°æ®å¯ä»¥åˆ é™¤appåä¾ç„¶å­˜åœ¨,é’¥åŒ™ä¸²ç”±æ“ä½œç³»ç»Ÿä¿æŠ¤å¹¶ä¸”å­˜å‚¨åçš„æ•°æ®æ˜¯æ¯”è¾ƒå®‰å…¨çš„,é•¿ç”¨æ¥å­˜å‚¨ä¸€äº›å¯†ç ,ç§é’¥å¦‚æœæƒ³å­˜å‚¨ç”¨æˆ·çš„å¯†ç ,å½“ç„¶å¯ä»¥å­˜åœ¨NSUserDefaultsä¸­,ä½†æ˜¯ç›´æ¥å­˜åˆ° plist é‡Œæ˜¾ç„¶æ˜¯ä¸è´Ÿè´£ä»»çš„ ç”¨iosçš„ Security.framework å°±å¯ä»¥å®ç°é’¥åŒ™ä¸²çš„è®¿é—®ã€è¯»å†™ è¿™é‡Œæˆ‘å€ŸåŠ©ç¬¬ä¸‰æ–¹å¼€æºåº“SSKeychain(https://github.com/soffes/sskeychain)ä¸NSUserDefaultsé…åˆä½¿ç”¨è¿›è¡Œç¤ºä¾‹,å¦‚æœæƒ³ç”¨åŸç”Ÿæ–¹æ³•è‡ªè¡Œå­¦ä¹  ä»¥ä¸‹æ˜¯Userå®ä½“æ–°å¢çš„ä¸‰ä¸ªç±»æ–¹æ³• ç”¨äºæ“ä½œä¿¡æ¯ 12345678910111213141516171819202122//æ¸…é™¤æ•°æ®+ (void)logoutAccount{ NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; NSString *username = [userDefaults objectForKey:@&quot;KEY_USER_NAME&quot;]; [SSKeychain deletePasswordForService:@&quot;KEY_KEYCHAIN_SERVICE&quot; account:username]; [userDefaults removeObjectForKey:@&quot;KEY_USER_NAME&quot;]; [userDefaults synchronize];}//è·å– ä»»æ„ä½ç½®è°ƒç”¨+ (void)getAccount:(void (^)(NSString *username,NSString *password))block{ NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; NSString *username = [userDefaults objectForKey:@&quot;KEY_USER_NAME&quot;]; NSString *password = [SSKeychain passwordForService:@&quot;KEY_KEYCHAIN_SERVICE&quot; account:username]; block(username?:@&quot;&quot;,password?:@&quot;&quot;);}//ä¿å­˜æ–¹æ³• ç™»é™†æˆåŠŸåè°ƒç”¨+ (void)saveAccount:(NSString *)name andPassword:(NSString *)password { NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; [userDefaults setObject:name forKey:@&quot;KEY_USER_NAME&quot;]; [userDefaults synchronize]; [SSKeychain setPassword:password forService:@&quot;KEY_KEYCHAIN_SERVICE&quot; account:name];} è¿˜æ˜¯ç™»é™†çš„ä¾‹å­ 1234567891011- (IBAction)loginTouched:(id)sender {//ç½‘ç»œè¯·æ±‚... [User login:@{@&quot;password&quot;:self.password.text, @&quot;cellphone&quot;:self.username.text} Success:^(NSDictionary *result) { [User saveAccount:self.username.text andPassword:self.password.text]; } Failure:^(NSError *error) { }];} å››. Cookie ç»“åˆ NSUserDefaultså½“ä½ è®¿é—®ä¸€ä¸ªç½‘ç«™æ—¶ï¼ŒNSURLRequestéƒ½ä¼šå¸®ä½ ä¸»åŠ¨è®°å½•ä¸‹æ¥ä½ è®¿é—®çš„ç«™ç‚¹è®¾ç½®çš„Cookieï¼Œå¦‚æœ Cookie å­˜åœ¨çš„è¯ï¼Œä¼šæŠŠè¿™äº›ä¿¡æ¯æ”¾åœ¨ NSHTTPCookieStorage å®¹å™¨ä¸­å…±äº«ï¼Œå½“ä½ ä¸‹æ¬¡å†è®¿é—®è¿™ä¸ªç«™ç‚¹æ—¶ï¼ŒNSURLRequestä¼šæ‹¿ç€ä¸Šæ¬¡ä¿å­˜ä¸‹æ¥äº†çš„Cookieç»§ç»­å»è¯·æ±‚ 1.å¦‚æœæœåŠ¡å™¨è®¾ç½®äº†å¤±æ•ˆæ—¶é—´Cookie ä¼šè¢«æŒä¹…åŒ–åˆ°æ–‡ä»¶ä¸­ï¼Œkillæ‰åç³»ç»Ÿè‡ªåŠ¨ä¿å­˜ï¼Œä¸‹æ¬¡å¯åŠ¨appä¼šè‡ªåŠ¨åŠ è½½.binarycookiesä¸­çš„Cookiesï¼Œä»¥ä¸‹æ˜¯ä¸€æ¡Cookieè¾“å‡º1&lt;NSHTTPCookie version:0 name:&quot;TestCookie&quot; value:&quot;my+cookie+value&quot; expiresDate:2016-04-08 09:31:09 +0000 created:2016-04-08 09:30:49 +0000 sessionOnly:FALSE domain:&quot;api.skyfox.org&quot; path:&quot;/&quot; isSecure:FALSE&gt; 2.å¦‚æœæ²¡è®¾ç½®Cookieå¤±æ•ˆæ—¶é—´å¹¶ä¸”ï¼Œï¼Œkillæ‰åç³»ç»Ÿä¸ä¼šè‡ªåŠ¨ä¿å­˜Cookieï¼Œå¦‚æœæƒ³æŒä¹…åŒ–Cookie æ¨¡ä»¿æµè§ˆå™¨å­˜ä½Cookieï¼Œä½¿ç”¨NSUserDefaultså­˜ä¸‹å³å¯,ä»¥ä¸‹æ˜¯ä¸€æ¡Cookieè¾“å‡º1&lt;NSHTTPCookie version:0 name:&quot;TestCookie&quot; value:&quot;my+cookie+value&quot; expiresDate:(null) created:2016-04-08 09:33:34 +0000 sessionOnly:TRUE domain:&quot;api.skyfox.org&quot; path:&quot;/&quot; isSecure:FALSE&gt; ä»¥ä¸‹æ˜¯å…³é”®ä»£ç  123456789101112131415//åˆé€‚çš„æ—¶æœºä¿å­˜Cookie- (void)saveCookies{ NSData *cookiesData = [NSKeyedArchiver archivedDataWithRootObject: [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setObject: cookiesData forKey: @&quot;org.skyfox.cookie&quot;]; [defaults synchronize];}//åˆé€‚çš„æ—¶æœºåŠ è½½Cookie ä¸€èˆ¬éƒ½æ˜¯appåˆšåˆšå¯åŠ¨çš„æ—¶å€™- (void)loadCookies{ NSArray *cookies = [NSKeyedUnarchiver unarchiveObjectWithData: [[NSUserDefaults standardUserDefaults] objectForKey: @&quot;org.skyfox.cookie&quot;]]; NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (NSHTTPCookie *cookie in cookies){ [cookieStorage setCookie: cookie]; }} Cookieè¯¦è§£ï¼šios htttpç½‘ç»œè¯·æ±‚cookieçš„è¯»å–ä¸å†™å…¥(NSHTTPCookieStorage)å†™åœ¨æœ€åè‡³äºè¿˜æœ‰ä»€ä¹ˆå†™æ–‡ä»¶ï¼ŒNSCoderå½’æ¡£ç­‰æ–¹å¼å°±ä¸è¯´äº†ï¼Œä¸æ€ä¹ˆå¸¸ç”¨å’Œå®ç”¨ å¤©ç‹åšå®¢","link":"/program/ï£¿/login/"},{"title":"æ£€æµ‹iOSçš„APPæ€§èƒ½çš„ä¸€äº›æ–¹æ³•","text":"é¦–å…ˆå¦‚æœé‡åˆ°åº”ç”¨å¡é¡¿æˆ–è€…å› ä¸ºå†…å­˜å ç”¨è¿‡å¤šæ—¶ä¸€èˆ¬ä½¿ç”¨Instrumentsé‡Œçš„æ¥è¿›è¡Œæ£€æµ‹ã€‚ä½†å¯¹äºå¤æ‚æƒ…å†µå¯èƒ½å°±éœ€è¦ç”¨åˆ°å­çº¿ç¨‹ç›‘æ§ä¸»çº¿ç¨‹çš„æ–¹å¼æ¥äº†ï¼Œä¸‹é¢æˆ‘å¯¹è¿™äº›æ–¹æ³•åšäº›ä»‹ç»ï¼š Time Profilerå¯ä»¥æŸ¥çœ‹å¤šä¸ªçº¿ç¨‹é‡Œé‚£äº›æ–¹æ³•è´¹æ—¶è¿‡å¤šçš„æ–¹æ³•ã€‚å…ˆå°†å³ä¾§Hide System Librariesæ‰“ä¸Šå‹¾ï¼Œè¿™æ ·èƒ½å¤Ÿè¿‡æ»¤ä¿¡æ¯ã€‚ç„¶ååœ¨Call Treeä¸Šä¼šé»˜è®¤æŒ‰ç…§è´¹æ—¶çš„çº¿ç¨‹è¿›è¡Œæ’åºï¼Œå•ä¸ªçº¿ç¨‹ä¸­ä¼šä¹Ÿä¼šæŒ‰ç…§å¯¹åº”çš„è´¹æ—¶æ–¹æ³•æ’åºï¼Œé€‰æ‹©æ–¹æ³•åèƒ½å¤Ÿé€šè¿‡å³ä¾§Heaviest Stack Traceé‡ŒåŒå‡»æŸ¥çœ‹åˆ°å…·ä½“çš„è´¹æ—¶æ“ä½œä»£ç ï¼Œä»è€Œèƒ½å¤Ÿæœ‰é’ˆå¯¹æ€§çš„ä¼˜åŒ–ï¼Œè€Œä¸éœ€è¦åœ¨ä¸€äº›æœ¬æ¥å°±ä¸ä¼šæ€ä¹ˆå½±å“æ€§èƒ½çš„åœ°æ–¹è¿‡åº¦ä¼˜åŒ–ã€‚ Allocationsè¿™é‡Œå¯ä»¥å¯¹æ¯ä¸ªåŠ¨ä½œçš„å‰åè¿›è¡ŒGenerationsï¼Œå¯¹æ¯”å†…å­˜çš„å¢åŠ ï¼ŒæŸ¥çœ‹ä½¿å†…å­˜å¢åŠ çš„å…·ä½“çš„æ–¹æ³•å’Œä»£ç æ‰€åœ¨ä½ç½®ã€‚å…·ä½“æ“ä½œæ˜¯åœ¨å³ä¾§Generation Analysisé‡Œç‚¹å‡»Mark Generationï¼Œè¿™æ ·ä¼šäº§ç”Ÿä¸€ä¸ªGenerationï¼Œåˆ‡æ¢åˆ°å…¶ä»–é¡µé¢æˆ–ä¸€æ®µæ—¶é—´äº§ç”Ÿäº†å¦å¤–ä¸€ä¸ªäº‹ä»¶æ—¶å†ç‚¹Mark Generationæ¥äº§ç”Ÿä¸€ä¸ªæ–°çš„Generationï¼Œè¿™æ ·åå¤ï¼Œç”Ÿæˆå¤šä¸ªGenerationï¼ŒæŸ¥çœ‹è¿™å‡ ä¸ªGenerationä¼šçœ‹åˆ°Growthçš„å¤§å°ï¼Œå¦‚æœå¤ªå¤§å¯ä»¥ç‚¹è¿›å»æŸ¥çœ‹ç›¸åº”å ç”¨è¾ƒå¤§çš„çº¿ç¨‹é‡Œå³ä¾§Heaviest Stack Traceé‡ŒæŸ¥çœ‹å¯¹åº”çš„ä»£ç å—ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ Leakå¯ä»¥åœ¨ä¸Šé¢åŒºåŸŸçš„Leakséƒ¨åˆ†çœ‹åˆ°å¯¹åº”çš„æ—¶é—´ç‚¹äº§ç”Ÿçš„æº¢å‡ºï¼Œé€‰æ‹©ååœ¨ä¸‹é¢åŒºåŸŸçš„Statistics&gt;Allocation Summaryèƒ½å¤Ÿçœ‹åˆ°æ³„æ¼çš„å¯¹è±¡ï¼ŒåŒæ ·å¯ä»¥é€šè¿‡Stack TraceæŸ¥çœ‹åˆ°å…·ä½“å¯¹åº”çš„ä»£ç åŒºåŸŸã€‚ å¼€å‘æ—¶éœ€è¦æ³¨æ„å¦‚ä½•é¿å…ä¸€äº›æ€§èƒ½é—®é¢˜NSDateFormatteré€šè¿‡Instrumentsçš„æ£€æµ‹ä¼šå‘ç°åˆ›å»ºNSDateFormatteræˆ–è€…è®¾ç½®NSDateFormatterçš„å±æ€§çš„è€—æ—¶æ€»æ˜¯æ’åœ¨å‰é¢ï¼Œå¦‚ä½•å¤„ç†è¿™ä¸ªé—®é¢˜å‘¢ï¼Œæ¯”è¾ƒæ¨èçš„æ˜¯æ·»åŠ å±æ€§æˆ–è€…åˆ›å»ºé™æ€å˜é‡ï¼Œè¿™æ ·èƒ½å¤Ÿä½¿å¾—åˆ›å»ºåˆå§‹åŒ–è¿™ä¸ªæ¬¡æ•°é™åˆ°æœ€ä½ã€‚è¿˜æœ‰å°±æ˜¯å¯ä»¥ç›´æ¥ç”¨Cï¼Œæˆ–è€…è¿™ä¸ªNSDataçš„Categoryæ¥è§£å†³https://github.com/samsoffes/sstoolkit/blob/master/SSToolkit/NSData%2BSSToolkitAdditions.m UIImageè¿™é‡Œè¦ä¸»è¦æ˜¯ä¼šå½±å“å†…å­˜çš„å¼€é”€ï¼Œéœ€è¦æƒè¡¡ä¸‹imagedNamedå’ŒimageWithContentsOfFileï¼Œäº†è§£ä¸¤è€…ç‰¹æ€§åï¼Œåœ¨åªéœ€è¦æ˜¾ç¤ºä¸€æ¬¡çš„å›¾ç‰‡ç”¨åè€…ï¼Œè¿™æ ·ä¼šå‡å°‘å†…å­˜çš„æ¶ˆè€—ï¼Œä½†æ˜¯é¡µé¢æ˜¾ç¤ºä¼šå¢åŠ Image IOçš„æ¶ˆè€—ï¼Œè¿™ä¸ªéœ€è¦æ³¨æ„ä¸‹ã€‚ç”±äºimageWithContentsOfFileä¸ç¼“å­˜ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ¯æ¬¡é¡µé¢æ˜¾ç¤ºå‰åŠ è½½ä¸€æ¬¡ï¼Œè¿™ä¸ªIOçš„æ“ä½œä¹Ÿæ˜¯éœ€è¦è€ƒè™‘æƒè¡¡çš„ä¸€ä¸ªç‚¹ã€‚ é¡µé¢åŠ è½½å¦‚æœä¸€ä¸ªé¡µé¢å†…å®¹è¿‡å¤šï¼Œviewè¿‡å¤šï¼Œè¿™æ ·å°†é•¿é¡µé¢ä¸­çš„éœ€è¦æ»šåŠ¨æ‰èƒ½çœ‹åˆ°çš„é‚£ä¸ªéƒ¨åˆ†è§†å›¾å†…å®¹é€šè¿‡å¼€å¯æ–°çš„çº¿ç¨‹åŒæ­¥çš„åŠ è½½ã€‚ ä¼˜åŒ–é¦–æ¬¡åŠ è½½æ—¶é—´é€šè¿‡Time Profierå¯ä»¥æŸ¥çœ‹åˆ°å¯åŠ¨æ‰€å ç”¨çš„æ—¶é—´ï¼Œå¦‚æœå¤ªé•¿å¯ä»¥é€šè¿‡Heaviest Stack Traceæ‰¾åˆ°è´¹æ—¶çš„æ–¹æ³•è¿›è¡Œæ”¹é€ ã€‚ ç›‘æ§å¡é¡¿çš„æ–¹æ³•è¿˜æœ‰ç§æ–¹æ³•æ˜¯åœ¨ç¨‹åºé‡Œå»ç›‘æ§æ€§èƒ½é—®é¢˜ã€‚å¯ä»¥å…ˆçœ‹çœ‹è¿™ä¸ªDemoï¼Œåœ°å€https://github.com/ming1016/DecoupleDemoã€‚ è¿™æ ·åœ¨ä¸Šçº¿åå¯ä»¥é€šè¿‡è¿™ä¸ªç¨‹åºå°†ç”¨æˆ·çš„å¡é¡¿æ“ä½œè®°å½•ä¸‹æ¥ï¼Œå®šæ—¶å‘åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·èƒ½å¤Ÿæ›´å¤§èŒƒå›´çš„æ”¶é›†æ€§èƒ½é—®é¢˜ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œç”¨æˆ·å±‚é¢æ„ŸçŸ¥çš„å¡é¡¿éƒ½æ˜¯æ¥è‡ªå¤„ç†æ‰€æœ‰UIçš„ä¸»çº¿ç¨‹ä¸Šï¼ŒåŒ…æ‹¬åœ¨ä¸»çº¿ç¨‹ä¸Šè¿›è¡Œçš„å¤§è®¡ç®—ï¼Œå¤§é‡çš„IOæ“ä½œï¼Œæˆ–è€…æ¯”è¾ƒé‡çš„ç»˜åˆ¶å·¥ä½œã€‚å¦‚ä½•ç›‘æ§ä¸»çº¿ç¨‹å‘¢ï¼Œé¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯ä¸»çº¿ç¨‹å’Œå…¶å®ƒçº¿ç¨‹ä¸€æ ·éƒ½æ˜¯é NSRunLoopæ¥é©±åŠ¨çš„ã€‚å¯ä»¥å…ˆçœ‹çœ‹CFRunLoopRunçš„å¤§æ¦‚çš„é€»è¾‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445int32_t __CFRunLoopRun(){ __CFRunLoopDoObservers(KCFRunLoopEntry); do { __CFRunLoopDoObservers(kCFRunLoopBeforeTimers); __CFRunLoopDoObservers(kCFRunLoopBeforeSources); //è¿™é‡Œå¼€å§‹åˆ°kCFRunLoopBeforeWaitingä¹‹é—´å¤„ç†æ—¶é—´æ˜¯æ„ŸçŸ¥å¡é¡¿çš„å…³é”®åœ°æ–¹ __CFRunLoopDoBlocks(); __CFRunLoopDoSource0(); //å¤„ç†UIäº‹ä»¶ //GCD dispatch main queue CheckIfExistMessagesInMainDispatchQueue(); //ä¼‘çœ å‰ __CFRunLoopDoObservers(kCFRunLoopBeforeWaiting); //ç­‰å¾…msg mach_port_t wakeUpPort = SleepAndWaitForWakingUpPorts(); //ç­‰å¾…ä¸­ //ä¼‘çœ åï¼Œå”¤é†’ __CFRunLoopDoObservers(kCFRunLoopAfterWaiting); //å®šæ—¶å™¨å”¤é†’ if (wakeUpPort == timerPort) __CFRunLoopDoTimers(); //å¼‚æ­¥å¤„ç† else if (wakeUpPort == mainDispatchQueuePort) __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__() //UIï¼ŒåŠ¨ç”» else __CFRunLoopDoSource1(); //ç¡®ä¿åŒæ­¥ __CFRunLoopDoBlocks(); } while (!stop &amp;&amp; !timeout); //é€€å‡ºRunLoop __CFRunLoopDoObservers(CFRunLoopExit);} æ ¹æ®è¿™ä¸ªRunLoopæˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡CFRunLoopObserverRefæ¥åº¦é‡ã€‚ç”¨GCDé‡Œçš„dispatch_semaphore_tå¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œè®¾ç½®ä¸€ä¸ªæé™å€¼å’Œå‡ºç°æ¬¡æ•°çš„å€¼ï¼Œç„¶åè·å–ä¸»çº¿ç¨‹ä¸Šåœ¨kCFRunLoopBeforeSourcesåˆ°kCFRunLoopBeforeWaitingå†åˆ°kCFRunLoopAfterWaitingä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„è¶…è¿‡äº†æé™å€¼å’Œå‡ºç°æ¬¡æ•°çš„åœºæ™¯ï¼Œå°†å †æ ˆdumpä¸‹æ¥ï¼Œæœ€åå‘åˆ°æœåŠ¡å™¨åšæ”¶é›†ï¼Œé€šè¿‡å †æ ˆèƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”å‡ºé—®é¢˜çš„é‚£ä¸ªæ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667static void runLoopObserverCallBack(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info){ MyClass *object = (__bridge MyClass*)info; object-&gt;activity = activity;}static void runLoopObserverCallBack(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info){ SMLagMonitor *lagMonitor = (__bridge SMLagMonitor*)info; lagMonitor-&gt;runLoopActivity = activity; dispatch_semaphore_t semaphore = lagMonitor-&gt;dispatchSemaphore; dispatch_semaphore_signal(semaphore);}- (void)endMonitor { if (!runLoopObserver) { return; } CFRunLoopRemoveObserver(CFRunLoopGetMain(), runLoopObserver, kCFRunLoopCommonModes); CFRelease(runLoopObserver); runLoopObserver = NULL;}- (void)beginMonitor { if (runLoopObserver) { return; } dispatchSemaphore = dispatch_semaphore_create(0); //Dispatch Semaphoreä¿è¯åŒæ­¥ //åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€… CFRunLoopObserverContext context = {0,(__bridge void*)self,NULL,NULL}; runLoopObserver = CFRunLoopObserverCreate(kCFAllocatorDefault, kCFRunLoopAllActivities, YES, 0, &amp;runLoopObserverCallBack, &amp;context); //å°†è§‚å¯Ÿè€…æ·»åŠ åˆ°ä¸»çº¿ç¨‹runloopçš„commonæ¨¡å¼ä¸‹çš„è§‚å¯Ÿä¸­ CFRunLoopAddObserver(CFRunLoopGetMain(), runLoopObserver, kCFRunLoopCommonModes); //åˆ›å»ºå­çº¿ç¨‹ç›‘æ§ dispatch_async(dispatch_get_global_queue(0, 0), ^{ //å­çº¿ç¨‹å¼€å¯ä¸€ä¸ªæŒç»­çš„loopç”¨æ¥è¿›è¡Œç›‘æ§ while (YES) { long semaphoreWait = dispatch_semaphore_wait(dispatchSemaphore, dispatch_time(DISPATCH_TIME_NOW, 30*NSEC_PER_MSEC)); if (semaphoreWait != 0) { if (!runLoopObserver) { timeoutCount = 0; dispatchSemaphore = 0; runLoopActivity = 0; return; } //ä¸¤ä¸ªrunloopçš„çŠ¶æ€ï¼ŒBeforeSourceså’ŒAfterWaitingè¿™ä¸¤ä¸ªçŠ¶æ€åŒºé—´æ—¶é—´èƒ½å¤Ÿæ£€æµ‹åˆ°æ˜¯å¦å¡é¡¿ if (runLoopActivity == kCFRunLoopBeforeSources || runLoopActivity == kCFRunLoopAfterWaiting) { //å‡ºç°ä¸‰æ¬¡å‡ºç»“æœ if (++timeoutCount &lt; 3) { continue; } //å°†å †æ ˆä¿¡æ¯ä¸ŠæŠ¥æœåŠ¡å™¨çš„ä»£ç æ”¾åˆ°è¿™é‡Œ } //end activity }// end semaphore wait timeoutCount = 0; }// end while }); } æœ‰æ—¶å€™é€ æˆå¡é¡¿æ˜¯å› ä¸ºæ•°æ®å¼‚å¸¸ï¼Œè¿‡å¤šï¼Œæˆ–è€…è¿‡å¤§é€ æˆçš„ï¼Œäº¦æˆ–è€…æ˜¯æ“ä½œçš„å¼‚å¸¸å‡ºç°çš„ï¼Œè¿™æ ·çš„æƒ…å†µå¯èƒ½åœ¨å¹³æ—¶æ—¥å¸¸å¼€å‘æµ‹è¯•ä¸­éš¾ä»¥é‡åˆ°ï¼Œä½†æ˜¯åœ¨çœŸå®çš„ç‰¹åˆ«æ˜¯ç”¨æˆ·å—ä¼—å¹¿çš„æƒ…å†µä¸‹ä¼šæœ‰äººå‡ºç°ï¼Œè¿™æ ·è¿™ç§æ”¶é›†å¡é¡¿çš„æ–¹å¼è¿˜æ˜¯æœ‰ä»·å€¼çš„ã€‚ å †æ ˆdumpçš„æ–¹æ³•ç¬¬ä¸€ç§æ˜¯ç›´æ¥è°ƒç”¨ç³»ç»Ÿå‡½æ•°è·å–æ ˆä¿¡æ¯ï¼Œè¿™ç§æ–¹æ³•åªèƒ½å¤Ÿè·å¾—ç®€å•çš„ä¿¡æ¯ï¼Œæ²¡æ³•é…åˆdSYMè·å¾—å…·ä½“å“ªè¡Œä»£ç å‡ºäº†é—®é¢˜ï¼Œç±»å‹ä¹Ÿæœ‰é™ã€‚è¿™ç§æ–¹æ³•çš„ä¸»è¦æ€è·¯æ˜¯signalè¿›è¡Œé”™è¯¯ä¿¡å·çš„è·å–ã€‚ä»£ç å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940static int s_fatal_signals[] = { SIGABRT, SIGBUS, SIGFPE, SIGILL, SIGSEGV, SIGTRAP, SIGTERM, SIGKILL,};static int s_fatal_signal_num = sizeof(s_fatal_signals) / sizeof(s_fatal_signals[0]);void UncaughtExceptionHandler(NSException *exception) { NSArray *exceptionArray = [exception callStackSymbols]; //å¾—åˆ°å½“å‰è°ƒç”¨æ ˆä¿¡æ¯ NSString *exceptionReason = [exception reason]; //éå¸¸é‡è¦ï¼Œå°±æ˜¯å´©æºƒçš„åŸå›  NSString *exceptionName = [exception name]; //å¼‚å¸¸ç±»å‹}void SignalHandler(int code){ NSLog(@&quot;signal handler = %d&quot;,code);}void InitCrashReport(){ //ç³»ç»Ÿé”™è¯¯ä¿¡å·æ•è· for (int i = 0; i &lt; s_fatal_signal_num; ++i) { signal(s_fatal_signals[i], SignalHandler); } //ocæœªæ•è·å¼‚å¸¸çš„æ•è· NSSetUncaughtExceptionHandler(&amp;UncaughtExceptionHandler);}int main(int argc, char * argv[]) { @autoreleasepool { InitCrashReport(); return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); }} ä½¿ç”¨PLCrashReporterçš„è¯å‡ºçš„æŠ¥å‘Šçœ‹èµ·æ¥èƒ½å¤Ÿå®šä½åˆ°é—®é¢˜ä»£ç çš„å…·ä½“ä½ç½®äº†ã€‚ 123456NSData *lagData = [[[PLCrashReporter alloc] initWithConfiguration:[[PLCrashReporterConfig alloc] initWithSignalHandlerType:PLCrashReporterSignalHandlerTypeBSD symbolicationStrategy:PLCrashReporterSymbolicationStrategyAll]] generateLiveReport];PLCrashReport *lagReport = [[PLCrashReport alloc] initWithData:lagData error:NULL];NSString *lagReportString = [PLCrashReportTextFormatter stringValueForCrashReport:lagReport withTextFormat:PLCrashReportTextFormatiOS];//å°†å­—ç¬¦ä¸²ä¸Šä¼ æœåŠ¡å™¨NSLog(@&quot;lag happen, detail below: \\n %@&quot;,lagReportString); ä¸‹é¢æ˜¯æµ‹è¯•Demoé‡Œå †æ ˆé‡Œçš„å†…å®¹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722016-03-28 14:59:26.922 HomePageTest[4803:201212] INFO: Reveal Server started (Protocol Version 25).2016-03-28 14:59:27.134 HomePageTest[4803:201212] è´¹æ—¶æµ‹è¯•2016-03-28 14:59:29.262 HomePageTest[4803:201212] è´¹æ—¶æµ‹è¯•2016-03-28 14:59:30.865 HomePageTest[4803:201212] è´¹æ—¶æµ‹è¯•2016-03-28 14:59:32.115 HomePageTest[4803:201212] è´¹æ—¶æµ‹è¯•2016-03-28 14:59:33.369 HomePageTest[4803:201212] è´¹æ—¶æµ‹è¯•2016-03-28 14:59:34.832 HomePageTest[4803:201212] è´¹æ—¶æµ‹è¯•2016-03-28 14:59:34.836 HomePageTest[4803:201615] lag happen, detail below: Incident Identifier: 73BEF9D2-EBE3-49DF-B95B-7392635631A3CrashReporter Key: TODOHardware Model: x86_64Process: HomePageTest [4803]Path: /Users/daiming/Library/Developer/CoreSimulator/Devices/444AAB95-C393-45CC-B5DC-0FB8611068F9/data/Containers/Bundle/Application/9CEE3A3A-9469-44F5-8112-FF0550ED8009/HomePageTest.app/HomePageTestIdentifier: com.xiaojukeji.HomePageTestVersion: 1.0 (1)Code Type: X86-64Parent Process: debugserver [4805]Date/Time: 2016-03-28 06:59:34 +0000OS Version: Mac OS X 9.2 (15D21)Report Version: 104Exception Type: SIGTRAPException Codes: TRAP_TRACE at 0x10aee6f79Crashed Thread: 2Thread 0:0 libsystem_kernel.dylib 0x000000010ec6b206 __semwait_signal + 101 libsystem_c.dylib 0x000000010e9f2b9e usleep + 542 HomePageTest 0x000000010aedf934 -[TestTableView configCell] + 8203 HomePageTest 0x000000010aee5c89 -[testTableViewController observeValueForKeyPath:ofObject:change:context:] + 6014 Foundation 0x000000010b9c2564 NSKeyValueNotifyObserver + 3475 Foundation 0x000000010b9c178f NSKeyValueDidChange + 4666 Foundation 0x000000010b9bf003 -[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:key:key:usingBlock:] + 11767 Foundation 0x000000010ba1d35f _NSSetObjectValueAndNotify + 2618 HomePageTest 0x000000010aec9c26 -[DCTableView tableView:cellForRowAtIndexPath:] + 2629 UIKit 0x000000010c872e43 -[UITableView _createPreparedCellForGlobalRow:withIndexPath:willDisplay:] + 76610 UIKit 0x000000010c872f7b -[UITableView _createPreparedCellForGlobalRow:willDisplay:] + 7411 UIKit 0x000000010c847a39 -[UITableView _updateVisibleCellsNow:isRecursive:] + 299612 UIKit 0x000000010c87c01c -[UITableView _performWithCachedTraitCollection:] + 9213 UIKit 0x000000010c862edc -[UITableView layoutSubviews] + 22414 UIKit 0x000000010c7d04a3 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 70315 QuartzCore 0x000000010c49a59a -[CALayer layoutSublayers] + 14616 QuartzCore 0x000000010c48ee70 _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 36617 QuartzCore 0x000000010c48ecee _ZN2CA5Layer28layout_and_display_if_neededEPNS_11TransactionE + 2418 QuartzCore 0x000000010c483475 _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 27719 QuartzCore 0x000000010c4b0c0a _ZN2CA11Transaction6commitEv + 48620 QuartzCore 0x000000010c4bf9f4 _ZN2CA7Display11DisplayLink14dispatch_itemsEyyy + 57621 CoreFoundation 0x000000010e123c84 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 2022 CoreFoundation 0x000000010e123831 __CFRunLoopDoTimer + 108923 CoreFoundation 0x000000010e0e5241 __CFRunLoopRun + 193724 CoreFoundation 0x000000010e0e4828 CFRunLoopRunSpecific + 48825 GraphicsServices 0x0000000110479ad2 GSEventRunModal + 16126 UIKit 0x000000010c719610 UIApplicationMain + 17127 HomePageTest 0x000000010aee0fdf main + 11128 libdyld.dylib 0x000000010e92b92d start + 1Thread 1:0 libsystem_kernel.dylib 0x000000010ec6bfde kevent64 + 101 libdispatch.dylib 0x000000010e8e6262 _dispatch_mgr_init + 0Thread 2 Crashed:0 HomePageTest 0x000000010b04a445 -[PLCrashReporter generateLiveReportWithThread:error:] + 6321 HomePageTest 0x000000010aee6f79 __28-[SMLagMonitor beginMonitor]_block_invoke + 4252 libdispatch.dylib 0x000000010e8d6e5d _dispatch_call_block_and_release + 123 libdispatch.dylib 0x000000010e8f749b _dispatch_client_callout + 84 libdispatch.dylib 0x000000010e8dfbef _dispatch_root_queue_drain + 18295 libdispatch.dylib 0x000000010e8df4c5 _dispatch_worker_thread3 + 1116 libsystem_pthread.dylib 0x000000010ec2f68f _pthread_wqthread + 11297 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 3:0 libsystem_kernel.dylib 0x000000010ec6b6de __workq_kernreturn + 101 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 4:0 libsystem_kernel.dylib 0x000000010ec65386 mach_msg_trap + 101 CoreFoundation 0x000000010e0e5b64 __CFRunLoopServiceMachPort + 2122 CoreFoundation 0x000000010e0e4fbf __CFRunLoopRun + 12953 CoreFoundation 0x000000010e0e4828 CFRunLoopRunSpecific + 4884 WebCore 0x0000000113408f65 _ZL12RunWebThreadPv + 4695 libsystem_pthread.dylib 0x000000010ec2fc13 _pthread_body + 1316 libsystem_pthread.dylib 0x000000010ec2fb90 _pthread_body + 07 libsystem_pthread.dylib 0x000000010ec2d375 thread_start + 13Thread 5:0 libsystem_kernel.dylib 0x000000010ec6b6de __workq_kernreturn + 101 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 6:0 libsystem_kernel.dylib 0x000000010ec6b6de __workq_kernreturn + 101 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 7:0 libsystem_kernel.dylib 0x000000010ec6b6de __workq_kernreturn + 101 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 2 crashed with X86-64 Thread State: rip: 0x000000010b04a445 rbp: 0x0000700000093da0 rsp: 0x0000700000093b10 rax: 0x0000700000093b70 rbx: 0x0000700000093cb0 rcx: 0x0000000000001003 rdx: 0x0000000000000000 rdi: 0x000000010b04a5ca rsi: 0x0000700000093b40 r8: 0x0000000000000014 r9: 0x0000000000000000 r10: 0x000000010ec65362 r11: 0x0000000000000246 r12: 0x00007fdaf5800940 r13: 0x0000000000000000 r14: 0x0000000000000009 r15: 0x0000700000093b90 rflags: 0x0000000000000202 cs: 0x000000000000002b fs: 0x0000000000000000 gs: 0x0000000000000000 Binary Images: 0x10aebb000 - 0x10b0a5fff +HomePageTest x86_64 &lt;13a9b9abded0364fb42e65847b3acbbb&gt; /Users/daiming/Library/Developer/CoreSimulator/Devices/444AAB95-C393-45CC-B5DC-0FB8611068F9/data/Containers/Bundle/Application/9CEE3A3A-9469-44F5-8112-FF0550ED8009/HomePageTest.app/HomePageTest 0x10b2a1000 - 0x10b2c8fff dyld_sim x86_64 &lt;0bf161d7efa93cbeae2b84f9a70fc853&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/dyld_sim 0x10b30d000 - 0x10b314fff libBacktraceRecording.dylib x86_64 &lt;604a2e49cf2f39f7883b37336adb402e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libBacktraceRecording.dylib 0x10b31b000 - 0x10b31ffff libViewDebuggerSupport.dylib x86_64 &lt;3d54d318b67735e5874c72a20317b523&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator9.2.sdk/Developer/Library/PrivateFrameworks/DTDDISupport.framework/libViewDebuggerSupport.dylib 0x10b326000 - 0x10b337fff libz.1.dylib x86_64 &lt;a603371a88ff3f8e86de61d7443888a9&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libz.1.dylib 0x10b33d000 - 0x10b5b9fff CFNetwork x86_64 &lt;cda8332f7c2836df98f216a6802a990a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CFNetwork.framework/CFNetwork 0x10b791000 - 0x10b93dfff CoreGraphics x86_64 &lt;291e992b6a4e3362823863313d3850b4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics 0x10b9b9000 - 0x10bc35fff Foundation x86_64 &lt;0bbf69fb34a63fa3a540ec4ce375212c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Foundation.framework/Foundation 0x10be29000 - 0x10c173fff ImageIO x86_64 &lt;28325a1c347230ada3e8c4dc833ef05a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/ImageIO.framework/ImageIO 0x10c23c000 - 0x10c300fff MobileCoreServices x86_64 &lt;40a78b7dfb1e31fc85d0d98657f979c6&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices 0x10c382000 - 0x10c4fdfff QuartzCore x86_64 &lt;b9ff29d64f6e306ea01703ae4cd10f29&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/QuartzCore.framework/QuartzCore 0x10c5b9000 - 0x10c625fff Security x86_64 &lt;5c3df729a91c365ba314108c0b668df6&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Security.framework/Security 0x10c67b000 - 0x10c6c4fff SystemConfiguration x86_64 &lt;cfa2c5a5c2123d80a230892aedce7ece&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration 0x10c6f4000 - 0x10d3ccfff UIKit x86_64 &lt;b5c879e5e265364da6b695d7bb4ef462&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/UIKit 0x10dc38000 - 0x10df9afff libobjc.A.dylib x86_64 &lt;1643ada50eaa3d938654df70ddca4045&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libobjc.A.dylib 0x10e075000 - 0x10e076fff libSystem.dylib x86_64 &lt;3deb27f2e0b5314abf0a8880e3d52560&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libSystem.dylib 0x10e07c000 - 0x10e3e2fff CoreFoundation x86_64 &lt;f47aa9b1fe6e3472928e6622ec331f1f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 0x10e54b000 - 0x10e6e3fff MapKit x86_64 &lt;2acdf735086f3e5897a4520417957aab&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/MapKit.framework/MapKit 0x10e807000 - 0x10e80bfff libcache.dylib x86_64 &lt;8fe45f989f2e3ccaaf0b2a5fdb2d0177&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcache.dylib 0x10e810000 - 0x10e81bfff libcommonCrypto.dylib x86_64 &lt;45b23c8e43993a6b93f9ba749105bed3&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcommonCrypto.dylib 0x10e828000 - 0x10e82ffff libcompiler_rt.dylib x86_64 &lt;c4852a1cdd6736168b91a75b50f2b65e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcompiler_rt.dylib 0x10e837000 - 0x10e83efff libcopyfile.dylib x86_64 &lt;4be0e6ca0b3a313c97901d33d3ea75a8&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcopyfile.dylib 0x10e845000 - 0x10e8bcfff libcorecrypto.dylib x86_64 &lt;34495822e7913cdbbb141c083740b04e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcorecrypto.dylib 0x10e8d5000 - 0x10e902fff libdispatch.dylib x86_64 &lt;04d9590852903114af8e9de07daac6d4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/introspection/libdispatch.dylib 0x10e929000 - 0x10e92bfff libdyld.dylib x86_64 &lt;236c574a79e73e1abf19e1cbc04ac582&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libdyld.dylib 0x10e932000 - 0x10e932fff liblaunch.dylib x86_64 &lt;6fa06587ed1a3b5d99234a093f8d5b7e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/liblaunch.dylib 0x10e938000 - 0x10e93dfff libmacho.dylib x86_64 &lt;1e351755db163b5c82fdb47b354fcb51&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libmacho.dylib 0x10e943000 - 0x10e944fff libremovefile.dylib x86_64 &lt;a69be47eef3f35aebbd6eb19688a9dfa&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libremovefile.dylib 0x10e949000 - 0x10e960fff libsystem_asl.dylib x86_64 &lt;34369616ac8339a8b4ee9d1a7df0ba0f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_asl.dylib 0x10e96d000 - 0x10e96efff libsystem_blocks.dylib x86_64 &lt;61456881d96432178fff58643863c59e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_blocks.dylib 0x10e974000 - 0x10e9fcfff libsystem_c.dylib x86_64 &lt;fc0dde24a78d39ca848ac937d5903386&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_c.dylib 0x10ea24000 - 0x10ea26fff libsystem_configuration.dylib x86_64 &lt;c09c551d48d0371daaf79132e6c7ab73&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_configuration.dylib 0x10ea2d000 - 0x10ea2ffff libsystem_containermanager.dylib x86_64 &lt;e0dc470e6ba2349097410f280fe09ed4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_containermanager.dylib 0x10ea34000 - 0x10ea35fff libsystem_coreservices.dylib x86_64 &lt;40b277d390db3e7ea6b50de8a9279786&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_coreservices.dylib 0x10ea3b000 - 0x10ea51fff libsystem_coretls.dylib x86_64 &lt;55dc52c450e83eb5b4d26dbe24018539&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_coretls.dylib 0x10ea5d000 - 0x10ea65fff libsystem_dnssd.dylib x86_64 &lt;d5c0910695913a799ffffb6cf4653c00&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_dnssd.dylib 0x10ea6c000 - 0x10ea8ffff libsystem_info.dylib x86_64 &lt;f3ab2fc36ae332ab86398880e4325938&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_info.dylib 0x10eaa2000 - 0x10eaa3fff libsystem_sim_kernel.dylib x86_64 &lt;3402a54a835033c997e9fc27db24d85b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_sim_kernel.dylib 0x10eaa9000 - 0x10ead6fff libsystem_m.dylib x86_64 &lt;67570d2171683e96b77aeeda269b8bcb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_m.dylib 0x10eade000 - 0x10eafafff libsystem_malloc.dylib x86_64 &lt;bd202b02a72d329999d6307a1aa14482&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_malloc.dylib 0x10eb04000 - 0x10eb5efff libsystem_network.dylib x86_64 &lt;a850352b5da23be89939b2652af84160&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_network.dylib 0x10eb92000 - 0x10eb9cfff libsystem_notify.dylib x86_64 &lt;d55e395a67f9350f9058866e3c7665f0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_notify.dylib 0x10eba5000 - 0x10eba7fff libsystem_sim_platform.dylib x86_64 &lt;3fe0d2367d073f7088330d74f4e48829&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_sim_platform.dylib 0x10ebad000 - 0x10ebadfff libsystem_sim_pthread.dylib x86_64 &lt;1e18f800d5ed31dcb0746cabc31ab297&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_sim_pthread.dylib 0x10ebb2000 - 0x10ebb5fff libsystem_sandbox.dylib x86_64 &lt;6ccd8c991b093603b0c721dbc3536f5b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_sandbox.dylib 0x10ebbc000 - 0x10ebccfff libsystem_trace.dylib x86_64 &lt;75d0d4effb95381db5dd2d32a54da7fe&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_trace.dylib 0x10ebdb000 - 0x10ebe1fff libunwind.dylib x86_64 &lt;072cea349492300fb68c39c751845ede&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libunwind.dylib 0x10ebe8000 - 0x10ec0efff libxpc.dylib x86_64 &lt;3e9ae1639a9535d3ba2c2e7144498580&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libxpc.dylib 0x10ec2c000 - 0x10ec35fff libsystem_pthread.dylib x86_64 &lt;327cecd0b88131538fcc4fd4818b7f16&gt; /usr/lib/system/libsystem_pthread.dylib 0x10ec43000 - 0x10ec4bfff libsystem_platform.dylib x86_64 &lt;d3a27e107f083603acc87a92b2c04bab&gt; /usr/lib/system/libsystem_platform.dylib 0x10ec54000 - 0x10ec72fff libsystem_kernel.dylib x86_64 &lt;9ceb6c3b1caf3c32a9fd93bc72cbcea1&gt; /usr/lib/system/libsystem_kernel.dylib 0x10ec88000 - 0x10ecb1fff libc++abi.dylib x86_64 &lt;81525def7b933f8296838959fa4ce98d&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libc++abi.dylib 0x10ecc0000 - 0x10ed13fff libc++.1.dylib x86_64 &lt;889b6cbf910536c89fae86374f07e767&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libc++.1.dylib 0x10ed67000 - 0x10ed7cfff libMobileGestalt.dylib x86_64 &lt;05d34bd9e19d306c885605aecafe9893&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libMobileGestalt.dylib 0x10edb3000 - 0x10ee0efff IOKit x86_64 &lt;853021f275723ee4b9fc0684bbee030b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit 0x10ee40000 - 0x10ef3afff libsqlite3.dylib x86_64 &lt;22bfc8d7f5f632919b01fdc883e24d26&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libsqlite3.dylib 0x10ef52000 - 0x10f041fff libxml2.2.dylib x86_64 &lt;cbe1fcf1d9b63516b8fa96cb45841d40&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libxml2.2.dylib 0x10f077000 - 0x10f27efff libicucore.A.dylib x86_64 &lt;5c7ce20d3b0f3cd2b19e2c8d4cae9147&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libicucore.A.dylib 0x10f341000 - 0x10f351fff libbsm.0.dylib x86_64 &lt;7f09d0545ae037119f611768227b64b3&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libbsm.0.dylib 0x10f359000 - 0x10f359fff Accelerate x86_64 &lt;1b1483eeaea537a09ee40b3b8faf8acb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Accelerate 0x10f35c000 - 0x10f81afff vImage x86_64 &lt;00f092dc41ec3f8e852efd7ce1efb1e2&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage 0x10f875000 - 0x10f875fff vecLib x86_64 &lt;cdfef7cd1b45390e81e561db4c07b35f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib 0x10f878000 - 0x10f981fff libvDSP.dylib x86_64 &lt;ddafe8e5e10e33389a7a08c67895c980&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib 0x10f98e000 - 0x10fd90fff libLAPACK.dylib x86_64 &lt;39f724015fda3ef298579cd38168b4e0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib 0x10fdc0000 - 0x10ff80fff libBLAS.dylib x86_64 &lt;3d2d6842f59035d795247d6bf77503ca&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib 0x10ff9f000 - 0x11003afff libvMisc.dylib x86_64 &lt;6716692bfaaf33a29d95873d7c93e570&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib 0x110044000 - 0x11005afff libLinearAlgebra.dylib x86_64 &lt;6880200dcd1d3e53a92e388887919970&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLinearAlgebra.dylib 0x110063000 - 0x110073fff libSparseBLAS.dylib x86_64 &lt;e8069ab282f0344780f5286fc2b9e2c4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libSparseBLAS.dylib 0x11007b000 - 0x110099fff libextension.dylib x86_64 &lt;9f870091398d38fa8138b45d528cc7f2&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libextension.dylib 0x1100ba000 - 0x1100e5fff libarchive.2.dylib x86_64 &lt;6349fcc5aa9d3103b49c8813f0c14f4b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libarchive.2.dylib 0x1100f0000 - 0x11010bfff libCRFSuite.dylib x86_64 &lt;512e912e804033d980f0141de864a82a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libCRFSuite.dylib 0x110116000 - 0x110117fff liblangid.dylib x86_64 &lt;31a81762a91b36d2a3210ca0bf929fa4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/liblangid.dylib 0x11011c000 - 0x11012afff libbz2.1.0.dylib x86_64 &lt;dc78bdfa5cb0386e97b09dedeeb048f8&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libbz2.1.0.dylib 0x110130000 - 0x11014afff liblzma.5.dylib x86_64 &lt;7a19c9a4e7b930b7a32c9ab778b9bcd4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/liblzma.5.dylib 0x110152000 - 0x1101dffff AppleJPEG x86_64 &lt;e0884d4cdfd63a3b91f54a9c5b5e0b8d&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/AppleJPEG.framework/AppleJPEG 0x11023f000 - 0x110379fff CoreText x86_64 &lt;c28657f25ac837b4ab950f78e41e5d90&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreText.framework/CoreText 0x11041f000 - 0x110438fff CoreVideo x86_64 &lt;1869a884854b346bbd06dfafaf765470&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreVideo.framework/CoreVideo 0x11044f000 - 0x11045bfff OpenGLES x86_64 &lt;2e82c1d6cd293127b14be85f3f78c983&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/OpenGLES 0x110468000 - 0x110468fff FontServices x86_64 &lt;d57462a3c6c83a47850e8b5c208b54cc&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FontServices.framework/FontServices 0x11046d000 - 0x110481fff GraphicsServices x86_64 &lt;c351fe76be413e44a3b13d3160497f31&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices 0x110499000 - 0x11057bfff libFontParser.dylib x86_64 &lt;b506fe2b071c3a32bb95aa79ad96eb01&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FontServices.framework/libFontParser.dylib 0x110634000 - 0x11063efff libGFXShared.dylib x86_64 &lt;dad95c8768613142bf18ce4551145a6e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib 0x110646000 - 0x11068bfff libGLImage.dylib x86_64 &lt;cfe342e9fad03b839d345841c94f3b7b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib 0x110695000 - 0x110697fff libCVMSPluginSupport.dylib x86_64 &lt;3927944c0d263f9aaa026dcc0d5e38e0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib 0x11069d000 - 0x1106a5fff libCoreVMClient.dylib x86_64 &lt;ef6b47d7dda13f92945569e78548a759&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib 0x1106ae000 - 0x111371fff libLLVMContainer.dylib x86_64 &lt;15f2b50ec12c3b5eaf42159df72376df&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libLLVMContainer.dylib 0x1116b8000 - 0x11179cfff UIFoundation x86_64 &lt;b2d0e3aedc8c3c66a901b7dafeaa1e2f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation 0x111810000 - 0x11181afff UserNotificationServices x86_64 &lt;bdff2d68e1bc3f3ab83e6516f3b34c6c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/UserNotificationServices.framework/UserNotificationServices 0x11182c000 - 0x111862fff FrontBoardServices x86_64 &lt;236f3bdbd0eb3e48b084acea42cb321f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FrontBoardServices.framework/FrontBoardServices 0x1118af000 - 0x1118f7fff BaseBoard x86_64 &lt;1a7979a63f5f30678004145f1c1fed0a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/BaseBoard.framework/BaseBoard 0x111948000 - 0x111a05fff CoreUI x86_64 &lt;ae1a6a3eb7ef3da0803688d9d2bdafa8&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CoreUI.framework/CoreUI 0x111afd000 - 0x111decfff VideoToolbox x86_64 &lt;d818deb4d5b036f795eeeaf3bdf58617&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/VideoToolbox.framework/VideoToolbox 0x111e6a000 - 0x111e78fff MobileAsset x86_64 &lt;1c6c8a87693839d3918dd9e78d72e26e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset 0x111e88000 - 0x111ea7fff BackBoardServices x86_64 &lt;6db39b59eb313174836d9e7906fdb212&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices 0x111ed0000 - 0x1120a4fff CoreImage x86_64 &lt;7271d38b9e593543a956c13c5de5da6a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreImage.framework/CoreImage 0x1121f6000 - 0x11221bfff DictionaryServices x86_64 &lt;e317ebfeb1a734b3979053d75e497fad&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices 0x11223f000 - 0x112263fff SpringBoardServices x86_64 &lt;cc1a9a762b8b35faa95392b3e4622d4d&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices 0x112292000 - 0x1122d9fff AppSupport x86_64 &lt;b9622cb94ded38e08a59224510d859cb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/AppSupport.framework/AppSupport 0x112315000 - 0x112345fff TextInput x86_64 &lt;07de88f839b330af910590041812bb64&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/TextInput.framework/TextInput 0x112384000 - 0x112469fff WebKitLegacy x86_64 &lt;0c79980d94183ccb93144bc9eabcb6ae&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/WebKitLegacy.framework/WebKitLegacy 0x112529000 - 0x1135f4fff WebCore x86_64 &lt;67d6527a7ceb3c8fa85ce85c2bf38119&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/WebCore.framework/WebCore 0x113eec000 - 0x113fc6fff ProofReader x86_64 &lt;53554e5080083c5ea16438704ba83695&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ProofReader.framework/ProofReader 0x113ffc000 - 0x114006fff libAccessibility.dylib x86_64 &lt;17a037a4c93b3bb8ae12e830128e6d99&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libAccessibility.dylib 0x114019000 - 0x114070fff PhysicsKit x86_64 &lt;f93aa95b8d5133219d236f0a02b9b038&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/PhysicsKit.framework/PhysicsKit 0x11409c000 - 0x1140a6fff AssertionServices x86_64 &lt;3a58c83f614530a59403e96edba2b0e6&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/AssertionServices.framework/AssertionServices 0x1140b9000 - 0x1144f0fff FaceCore x86_64 &lt;7971b628d43231a08f14ea7c4e2138b0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FaceCore.framework/FaceCore 0x114708000 - 0x11478dfff CoreMedia x86_64 &lt;dd9a55e018b8319d92fe4b2b0c9bd52f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreMedia.framework/CoreMedia 0x1147f7000 - 0x114850fff ColorSync x86_64 &lt;0681057f0a74363fa8d20aa7862c1e7b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ColorSync.framework/ColorSync 0x114872000 - 0x114874fff SimulatorClient x86_64 &lt;c2f2a63c1b7e384982099a98992c7721&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/SimulatorClient.framework/SimulatorClient 0x11487b000 - 0x1148c8fff CoreAudio x86_64 &lt;794b0ba43f1a3790b617f3fb253debeb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreAudio.framework/CoreAudio 0x1148ec000 - 0x1148f0fff AggregateDictionary x86_64 &lt;b1bee24fe8e838d389075db856f7702b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary 0x1148f8000 - 0x114921fff libxslt.1.dylib x86_64 &lt;6c42a533a8703a36ad402b99fbf0f73c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libxslt.1.dylib 0x11492e000 - 0x114945fff libmarisa.dylib x86_64 &lt;e3ddc2ae594e3eb894dd994528a10deb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libmarisa.dylib 0x114952000 - 0x114f13fff JavaScriptCore x86_64 &lt;c5c9fbe108973d42ad1ea2015d805490&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/JavaScriptCore.framework/JavaScriptCore 0x115091000 - 0x11537cfff AudioToolbox x86_64 &lt;28b1b9057fdf37dcb669386be1820c5c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AudioToolbox.framework/AudioToolbox 0x1154b2000 - 0x1154b7fff TCC x86_64 &lt;7a73d618505938a6a1fadda3aaf0f88c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/TCC.framework/TCC 0x1154c0000 - 0x11554efff LanguageModeling x86_64 &lt;6fd4f9ff9e393b1a87ab68a9df224e8d&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/LanguageModeling.framework/LanguageModeling 0x115564000 - 0x115575fff libcmph.dylib x86_64 &lt;a056b047f15a3df085065ed5f0368f16&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libcmph.dylib 0x11557e000 - 0x115670fff libiconv.2.dylib x86_64 &lt;192bd7fdc2943f0ea17b88dbdbc3329b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libiconv.2.dylib 0x115680000 - 0x115685fff MediaAccessibility x86_64 &lt;6e41f0c55b703cb2825e200350469a58&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/MediaAccessibility.framework/MediaAccessibility 0x115691000 - 0x115769fff AddressBookUI x86_64 &lt;58a5a1b2d8b63e62bc4671df5cec5596&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AddressBookUI.framework/AddressBookUI 0x11583e000 - 0x115f69fff VectorKit x86_64 &lt;36ef06e69448347b973f84f4486ecac2&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/VectorKit.framework/VectorKit 0x1161f1000 - 0x116268fff AddressBook x86_64 &lt;d4d77496b2443bcc9b8476c7c6a9cc79&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AddressBook.framework/AddressBook 0x1162bf000 - 0x11631ffff CoreLocation x86_64 &lt;a099137b2feb30ad82864ccda12993f2&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreLocation.framework/CoreLocation 0x116342000 - 0x1167a0fff GeoServices x86_64 &lt;ef3a5a767f7c3c81b7653763382ae25b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/GeoServices.framework/GeoServices 0x116aeb000 - 0x116afbfff ProtocolBuffer x86_64 &lt;e840436419f43a6b8cc22daff981f66e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer 0x116b0d000 - 0x116b93fff Contacts x86_64 &lt;7e411c617cb53ad1b43f91e18de6fcb0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Contacts.framework/Contacts 0x116c4c000 - 0x116d4ffff ContactsUI x86_64 &lt;425fe9f6c9463295991786b39850b851&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/ContactsUI.framework/ContactsUI 0x116e35000 - 0x116e41fff IntlPreferences x86_64 &lt;b71be9b2f9e33eafab9a301e47a8e6fa&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/IntlPreferences.framework/IntlPreferences 0x116e4f000 - 0x116e6afff PlugInKit x86_64 &lt;c3066f229d413a048da42f603c2e9b43&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/PlugInKit.framework/PlugInKit 0x116e85000 - 0x116ebbfff Accounts x86_64 &lt;1f649ba6d7a33bc6b8b2eb93799ab4ee&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accounts.framework/Accounts 0x116eed000 - 0x117069fff AVFoundation x86_64 &lt;904190b56923390191dea51a838bd14f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AVFoundation.framework/AVFoundation 0x1171ef000 - 0x1171f3fff CommunicationsFilter x86_64 &lt;ff85c618e7e63fada07316f1b9c8d1fc&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CommunicationsFilter.framework/CommunicationsFilter 0x1171f9000 - 0x11721efff DataAccessExpress x86_64 &lt;e3eb7c5fb6b13a95810d4cfcdead074a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress 0x117242000 - 0x117300fff ManagedConfiguration x86_64 &lt;b66ed9c2ab553fd981e95750598ba938&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration 0x117399000 - 0x1173d3fff CoreSpotlight x86_64 &lt;98bf6cfb785735eebf190db4b1c3ae64&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreSpotlight.framework/CoreSpotlight 0x117416000 - 0x117434fff vCard x86_64 &lt;9055c75785e4395d8996060255c1631b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/vCard.framework/vCard 0x117463000 - 0x11748cfff ContactsFoundation x86_64 &lt;63f515588ea93a06a063e73787d7d15c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ContactsFoundation.framework/ContactsFoundation 0x1174cb000 - 0x117735fff CoreData x86_64 &lt;e358a02dacfd3e31a9992b6b7ea9e7c5&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreData.framework/CoreData 0x117854000 - 0x117856fff OAuth x86_64 &lt;732d326fd0983422aa6a09ea1938e7d7&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/OAuth.framework/OAuth 0x11785c000 - 0x117875fff libcompression.dylib x86_64 &lt;1823f7e097263ccd8b713df4f4788903&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libcompression.dylib 0x11787d000 - 0x1179c1fff MobileSpotlightIndex x86_64 &lt;6c81b940503b3f7e9a0bfd40658b5fdf&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/MobileSpotlightIndex.framework/MobileSpotlightIndex 0x117a0b000 - 0x117a0ffff ParsecSubscriptionServiceSupport x86_64 &lt;dcfd384db24a3ab5991d224a4824301f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ParsecSubscriptionServiceSupport.framework/ParsecSubscriptionServiceSupport 0x117a18000 - 0x117cabfff libmecabra.dylib x86_64 &lt;9f9feceeace7387aaa81ec59d0c3f9b1&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libmecabra.dylib 0x117d33000 - 0x117d38fff ConstantClasses x86_64 &lt;2f5266d656843f3c822dc0d2fd6aaa8e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ConstantClasses.framework/ConstantClasses 0x117d41000 - 0x117d4cfff libChineseTokenizer.dylib x86_64 &lt;8d393ad002733693a63608ded180c4c4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libChineseTokenizer.dylib 0x117d5b000 - 0x117dcdfff libAVFAudio.dylib x86_64 &lt;97ad418fb598389fb2c4115f634a61c7&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AVFoundation.framework/libAVFAudio.dylib 0x117e29000 - 0x1180e3fff MediaToolbox x86_64 &lt;5587701cabc23ff0b1fd6d81d0309789&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/MediaToolbox.framework/MediaToolbox 0x1181ef000 - 0x118223fff Celestial x86_64 &lt;4cd1941e81a43e3e9ef4bee37a0ee762&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/Celestial.framework/Celestial 0x118274000 - 0x118275fff BTLEAudioController x86_64 &lt;a629490c2a8d3f48ba051bc19ee1d3da&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/BTLEAudioController.framework/BTLEAudioController 0x11827b000 - 0x1182dffff IMFoundation x86_64 &lt;5243547afc7834479cb6434788543d2f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation 0x11832a000 - 0x118336fff CommonUtilities x86_64 &lt;13c0b53f0c9d37a2915f0793fe809a9f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities 0x118343000 - 0x118374fff libtidy.A.dylib x86_64 &lt;0e2291591e4b3f25881e6c4a98bb38e0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libtidy.A.dylib 0x118385000 - 0x118394fff CacheDelete x86_64 &lt;e35e427c786c35429fac8b60b27650a7&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CacheDelete.framework/CacheDelete 0x1183a2000 - 0x1183c4fff PersistentConnection x86_64 &lt;e9fd98bc5ac739bfb4f4979f159fc2cd&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection 0x1183ea000 - 0x1183f1fff DataMigration x86_64 &lt;e0a5b78e95763ff9874c17198d2ab6f7&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/DataMigration.framework/DataMigration 0x1183fd000 - 0x118471fff CoreTelephony x86_64 &lt;4cb6c821e0da3386848cdf10650ba48a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony 0x1184d9000 - 0x1184dffff libcupolicy.dylib x86_64 &lt;3b9f4709f1b139adb3630698596f4755&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libcupolicy.dylib 0x1184e9000 - 0x118520fff libTelephonyUtilDynamic.dylib x86_64 &lt;bdfdb334207d3deba45c9f2ceafd28fe&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libTelephonyUtilDynamic.dylib 0x11855e000 - 0x11857efff CoreBluetooth x86_64 &lt;5cb697ee9e803be689662c722d23792b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreBluetooth.framework/CoreBluetooth 0x11ac19000 - 0x11ac21fff libMobileGestaltExtensions.dylib x86_64 &lt;f9379481b6703400a6affe719472b1e1&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libMobileGestaltExtensions.dylib 0x11ac7e000 - 0x11ac80fff libCGXType.A.dylib x86_64 &lt;a9d3ce5c71e1342b8837a140f26d1dcc&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreGraphics.framework/Resources/libCGXType.A.dylib 0x11ac8c000 - 0x11acb3fff libRIP.A.dylib x86_64 &lt;4fa5309d6dea38f1af4b8d1b3f33654e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib 0x11ae05000 - 0x11ae10fff libGSFontCache.dylib x86_64 &lt;f24b9a1cdbe43bcfae632fc165171473&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FontServices.framework/libGSFontCache.dylib 0x11bf53000 - 0x11bf7afff CoreServicesInternal x86_64 &lt;3f769739c15c3968a37853f346b0a862&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal2016-03-28 14:59:35.586 HomePageTest[4803:201212] è´¹æ—¶æµ‹è¯• ming1016","link":"/program/ï£¿/jian-ce/"},{"title":"Objc Runtime ","text":"æ¦‚è¿°Objc Runtimeä½¿å¾—Cå…·æœ‰äº†é¢å‘å¯¹è±¡èƒ½åŠ›ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶åˆ›å»ºï¼Œæ£€æŸ¥ï¼Œä¿®æ”¹ç±»ã€å¯¹è±¡å’Œå®ƒä»¬çš„æ–¹æ³•ã€‚Runtimeæ˜¯Cå’Œæ±‡ç¼–ç¼–å†™çš„ï¼Œè¿™é‡Œhttps://www.opensource.apple.com/source/objc4/å¯ä»¥ä¸‹åˆ°è‹¹æœç»´æŠ¤çš„å¼€æºä»£ç ï¼ŒGNUä¹Ÿæœ‰ä¸€ä¸ªå¼€æºçš„runtimeç‰ˆæœ¬ï¼Œä»–ä»¬éƒ½åŠªåŠ›çš„ä¿æŒä¸€è‡´ã€‚è‹¹æœå®˜æ–¹çš„Runtimeç¼–ç¨‹æŒ‡å— Runtimeå‡½æ•°Runtimeç³»ç»Ÿæ˜¯ç”±ä¸€ç³»åˆ—çš„å‡½æ•°å’Œæ•°æ®ç»“æ„ç»„æˆçš„å…¬å…±æ¥å£åŠ¨æ€å…±äº«åº“ï¼Œåœ¨/usr/include/objcç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°å¤´æ–‡ä»¶ï¼Œå¯ä»¥ç”¨å…¶ä¸­ä¸€äº›å‡½æ•°é€šè¿‡Cè¯­è¨€å®ç°Objective-Cä¸­ä¸€æ ·çš„åŠŸèƒ½ã€‚è‹¹æœå®˜æ–¹æ–‡æ¡£https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/index.html é‡Œæœ‰è¯¦ç»†çš„Runtimeå‡½æ•°æ–‡æ¡£ã€‚ Classå’ŒObjectåŸºç¡€æ•°æ®ç»“æ„Classobjc/runtime.hä¸­objc_classç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516struct objc_class {Class isa OBJC_ISA_AVAILABILITY; //isaæŒ‡é’ˆæŒ‡å‘Meta Classï¼Œå› ä¸ºObjcçš„ç±»çš„æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªObjectï¼Œä¸ºäº†å¤„ç†è¿™ä¸ªå…³ç³»ï¼Œruntimeå°±åˆ›é€ äº†Meta Classï¼Œå½“ç»™ç±»å‘é€[NSObject alloc]è¿™æ ·æ¶ˆæ¯æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŠŠè¿™ä¸ªæ¶ˆæ¯å‘ç»™äº†Class Object#if !__OBJC2__Class super_class OBJC2_UNAVAILABLE; // çˆ¶ç±»const char *name OBJC2_UNAVAILABLE; // ç±»ålong version OBJC2_UNAVAILABLE; // ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé»˜è®¤ä¸º0long info OBJC2_UNAVAILABLE; // ç±»ä¿¡æ¯ï¼Œä¾›è¿è¡ŒæœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯†long instance_size OBJC2_UNAVAILABLE; // è¯¥ç±»çš„å®ä¾‹å˜é‡å¤§å°struct objc_ivar_list *ivars OBJC2_UNAVAILABLE; // è¯¥ç±»çš„æˆå‘˜å˜é‡é“¾è¡¨struct objc_method_list **methodLists OBJC2_UNAVAILABLE; // æ–¹æ³•å®šä¹‰çš„é“¾è¡¨struct objc_cache *cache OBJC2_UNAVAILABLE; // æ–¹æ³•ç¼“å­˜ï¼Œå¯¹è±¡æ¥åˆ°ä¸€ä¸ªæ¶ˆæ¯ä¼šæ ¹æ®isaæŒ‡é’ˆæŸ¥æ‰¾æ¶ˆæ¯å¯¹è±¡ï¼Œè¿™æ—¶ä¼šåœ¨methodListsä¸­éå†ï¼Œå¦‚æœcacheäº†ï¼Œå¸¸ç”¨çš„æ–¹æ³•è°ƒç”¨æ—¶å°±èƒ½å¤Ÿæé«˜è°ƒç”¨çš„æ•ˆç‡ã€‚struct objc_protocol_list *protocols OBJC2_UNAVAILABLE; // åè®®é“¾è¡¨#endif} OBJC2_UNAVAILABLE; objc_ivar_listå’Œobjc_method_listçš„å®šä¹‰ 1234567891011121314151617181920//objc_ivar_listç»“æ„ä½“å­˜å‚¨objc_ivaræ•°ç»„åˆ—è¡¨struct objc_ivar_list { int ivar_count OBJC2_UNAVAILABLE;#ifdef __LP64__ int space OBJC2_UNAVAILABLE;#endif /* variable length structure */ struct objc_ivar ivar_list[1] OBJC2_UNAVAILABLE;} OBJC2_UNAVAILABLE;//objc_method_listç»“æ„ä½“å­˜å‚¨ç€objc_methodçš„æ•°ç»„åˆ—è¡¨struct objc_method_list { struct objc_method_list *obsolete OBJC2_UNAVAILABLE; int method_count OBJC2_UNAVAILABLE;#ifdef __LP64__ int space OBJC2_UNAVAILABLE;#endif /* variable length structure */ struct objc_method method_list[1] OBJC2_UNAVAILABLE;} objc_objectä¸idobjc_objectæ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ç»“æ„ä½“ï¼Œobjc/objc.hä¸­objc_objectæ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š 12345struct objc_object {Class isa OBJC_ISA_AVAILABILITY;};typedef struct objc_object *id; å‘objectå‘é€æ¶ˆæ¯æ—¶ï¼ŒRuntimeåº“ä¼šæ ¹æ®objectçš„isaæŒ‡é’ˆæ‰¾åˆ°è¿™ä¸ªå®ä¾‹objectæ‰€å±äºçš„ç±»ï¼Œç„¶ååœ¨ç±»çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠçˆ¶ç±»æ–¹æ³•åˆ—è¡¨å¯»æ‰¾å¯¹åº”çš„æ–¹æ³•è¿è¡Œã€‚idæ˜¯ä¸€ä¸ªobjc_objectç»“æ„ç±»å‹çš„æŒ‡é’ˆï¼Œè¿™ä¸ªç±»å‹çš„å¯¹è±¡èƒ½å¤Ÿè½¬æ¢æˆä»»ä½•ä¸€ç§å¯¹è±¡ã€‚ objc_cacheobjc_classç»“æ„ä½“ä¸­çš„cacheå­—æ®µç”¨äºç¼“å­˜è°ƒç”¨è¿‡çš„methodã€‚cacheæŒ‡é’ˆæŒ‡å‘objc_cacheç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹ 12345struct objc_cache {unsigned int mask /* total = mask + 1 */ OBJC2_UNAVAILABLE; //æŒ‡å®šåˆ†é…ç¼“å­˜bucketçš„æ€»æ•°ã€‚runtimeä½¿ç”¨è¿™ä¸ªå­—æ®µç¡®å®šçº¿æ€§æŸ¥æ‰¾æ•°ç»„çš„ç´¢å¼•ä½ç½®unsigned int occupied OBJC2_UNAVAILABLE; //å®é™…å ç”¨ç¼“å­˜bucketæ€»æ•°Method buckets[1] OBJC2_UNAVAILABLE; //æŒ‡å‘Methodæ•°æ®ç»“æ„æŒ‡é’ˆçš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„æ€»æ•°ä¸èƒ½è¶…è¿‡mask+1ï¼Œä½†æ˜¯æŒ‡é’ˆæ˜¯å¯èƒ½ä¸ºç©ºçš„ï¼Œè¿™å°±è¡¨ç¤ºç¼“å­˜bucketæ²¡æœ‰è¢«å ç”¨ï¼Œæ•°ç»„ä¼šéšç€æ—¶é—´å¢é•¿ã€‚}; Meta Classmeta classæ˜¯ä¸€ä¸ªç±»å¯¹è±¡çš„ç±»ï¼Œå½“å‘å¯¹è±¡å‘æ¶ˆæ¯ï¼Œruntimeä¼šåœ¨è¿™ä¸ªå¯¹è±¡æ‰€å±ç±»æ–¹æ³•åˆ—è¡¨ä¸­æŸ¥æ‰¾å‘é€æ¶ˆæ¯å¯¹åº”çš„æ–¹æ³•ï¼Œä½†å½“å‘ç±»å‘é€æ¶ˆæ¯æ—¶ï¼Œruntimeå°±ä¼šåœ¨è¿™ä¸ªç±»çš„meta classæ–¹æ³•åˆ—è¡¨é‡ŒæŸ¥æ‰¾ã€‚æ‰€æœ‰çš„meta classï¼ŒåŒ…æ‹¬Root classï¼ŒSuperclassï¼ŒSubclassçš„isaéƒ½æŒ‡å‘Root classçš„meta classï¼Œè¿™æ ·èƒ½å¤Ÿå½¢æˆä¸€ä¸ªé—­ç¯ã€‚ 12345678910111213141516171819202122232425262728void TestMetaClass(id self, SEL _cmd) { NSLog(@&quot;This objcet is %p&quot;, self); NSLog(@&quot;Class is %@, super class is %@&quot;, [self class], [self superclass]); Class currentClass = [self class]; // for (int i = 0; i &lt; 4; i++) { NSLog(@&quot;Following the isa pointer %d times gives %p&quot;, i, currentClass); //é€šè¿‡objc_getClassè·å¾—å¯¹è±¡isaï¼Œè¿™æ ·å¯ä»¥å›æº¯åˆ°Root classåŠNSObjectçš„meta classï¼Œå¯ä»¥çœ‹åˆ°æœ€åæŒ‡é’ˆæŒ‡å‘çš„æ˜¯0x0å’ŒNSObjectçš„meta classç±»åœ°å€ä¸€æ ·ã€‚ currentClass = objc_getClass((__bridge void *)currentClass); } NSLog(@&quot;NSObject&apos;s class is %p&quot;, [NSObject class]); NSLog(@&quot;NSObject&apos;s meta class is %p&quot;, objc_getClass((__bridge void *)[NSObject class]));}@implementation Test- (void)ex_registerClassPair { Class newClass = objc_allocateClassPair([NSError class], &quot;TestClass&quot;, 0); class_addMethod(newClass, @selector(testMetaClass), (IMP)TestMetaClass, &quot;v@:&quot;); objc_registerClassPair(newClass); id instance = [[newClass alloc] initWithDomain:@&quot;some domain&quot; code:0 userInfo:nil]; [instance performSelector:@selector(testMetaClass)];}@end è¿è¡Œç»“æœ 123456782014-10-20 22:57:07.352 mountain[1303:41490] This objcet is 0x7a6e22b02014-10-20 22:57:07.353 mountain[1303:41490] Class is TestStringClass, super class is NSError2014-10-20 22:57:07.353 mountain[1303:41490] Following the isa pointer 0 times gives 0x7a6e21b02014-10-20 22:57:07.353 mountain[1303:41490] Following the isa pointer 1 times gives 0x02014-10-20 22:57:07.353 mountain[1303:41490] Following the isa pointer 2 times gives 0x02014-10-20 22:57:07.353 mountain[1303:41490] Following the isa pointer 3 times gives 0x02014-10-20 22:57:07.353 mountain[1303:41490] NSObject&apos;s class is 0xe100002014-10-20 22:57:07.354 mountain[1303:41490] NSObject&apos;s meta class is 0x0 ä¸¾ä¸ªä¾‹å­ 1234567891011121314151617@interface Sark : NSObject@end@implementation Sark@endint main(int argc, const char * argv[]) { @autoreleasepool { BOOL res1 = [(id)[NSObject class] isKindOfClass:[NSObject class]]; BOOL res2 = [(id)[NSObject class] isMemberOfClass:[NSObject class]]; BOOL res3 = [(id)[Sark class] isKindOfClass:[Sark class]]; BOOL res4 = [(id)[Sark class] isMemberOfClass:[Sark class]]; NSLog(@&quot;%d %d %d %d&quot;, res1, res2, res3, res4); } return 0;}//è¾“å‡º2014-11-05 14:45:08.474 Test[9412:721945] 1 0 0 0 å…ˆçœ‹çœ‹isKindOfClasså’ŒisMemberOfClassåœ¨Object.mmä¸­çš„å®ç° 12345678910111213- (BOOL)isKindOf:aClass{ Class cls; for (cls = isa; cls; cls = cls-&gt;superclass) if (cls == (Class)aClass) return YES; return NO;}- (BOOL)isMemberOf:aClass{ return isa == (Class)aClass;} res1ä¸­ï¼Œå¯ä»¥ä»isKindOfClassçœ‹å‡ºNSObject classçš„isaç¬¬ä¸€æ¬¡ä¼šæŒ‡å‘NSObjectçš„Meta Classï¼Œæ¥ç€Super classæ—¶ä¼šNSObjectçš„Meta Classæ ¹æ®å‰é¢è®²çš„é—­ç¯å¯ä»¥çŸ¥é“æ˜¯ä¼šæŒ‡åˆ°NSObject classï¼Œè¿™æ ·res1çš„boolå€¼å°±æ˜¯çœŸäº†ã€‚ res2çš„è¯å› ä¸ºæ˜¯isMemberOfå°±åªæœ‰ä¸€æ¬¡ï¼Œé‚£ä¹ˆæ˜¯NSObjectçš„Meta Classå’ŒNSObject classä¸åŒè¿”å›çš„boolå€¼å°±æ˜¯falseäº†ã€‚ res3ç¬¬ä¸€æ¬¡æ˜¯Sark Meta Classï¼Œç¬¬äºŒæ¬¡super class åå°±æ˜¯NSObject Meta Classäº†ï¼Œè¿”å›ä¹Ÿæ˜¯false res4æ˜¯Sark Meta Classï¼Œæ‰€ä»¥è¿”å›ä¹Ÿæ˜¯false ç±»ä¸å¯¹è±¡æ“ä½œå‡½æ•°runtimeæœ‰å¾ˆå¤šçš„å‡½æ•°å¯ä»¥æ“ä½œç±»å’Œå¯¹è±¡ã€‚ç±»ç›¸å…³çš„æ˜¯classä¸ºå‰ç¼€ï¼Œå¯¹è±¡ç›¸å…³æ“ä½œæ˜¯objcæˆ–object_ä¸ºå‰ç¼€ã€‚ ç±»ç›¸å…³æ“ä½œå‡½æ•°name12// è·å–ç±»çš„ç±»åconst char * class_getName ( Class cls ); super_classå’Œmeta-class12345// è·å–ç±»çš„çˆ¶ç±»Class class_getSuperclass ( Class cls );// åˆ¤æ–­ç»™å®šçš„Classæ˜¯å¦æ˜¯ä¸€ä¸ªmeta classBOOL class_isMetaClass ( Class cls ); instance_size12// è·å–å®ä¾‹å¤§å°size_t class_getInstanceSize ( Class cls ); æˆå‘˜å˜é‡(ivars)åŠå±æ€§12345678910111213141516171819202122232425//æˆå‘˜å˜é‡æ“ä½œå‡½æ•°// è·å–ç±»ä¸­æŒ‡å®šåç§°å®ä¾‹æˆå‘˜å˜é‡çš„ä¿¡æ¯Ivar class_getInstanceVariable ( Class cls, const char *name );// è·å–ç±»æˆå‘˜å˜é‡çš„ä¿¡æ¯Ivar class_getClassVariable ( Class cls, const char *name );// æ·»åŠ æˆå‘˜å˜é‡BOOL class_addIvar ( Class cls, const char *name, size_t size, uint8_t alignment, const char *types ); //è¿™ä¸ªåªèƒ½å¤Ÿå‘åœ¨runtimeæ—¶åˆ›å»ºçš„ç±»æ·»åŠ æˆå‘˜å˜é‡// è·å–æ•´ä¸ªæˆå‘˜å˜é‡åˆ—è¡¨Ivar * class_copyIvarList ( Class cls, unsigned int *outCount ); //å¿…é¡»ä½¿ç”¨free()æ¥é‡Šæ”¾è¿™ä¸ªæ•°ç»„//å±æ€§æ“ä½œå‡½æ•°// è·å–ç±»ä¸­æŒ‡å®šåç§°å®ä¾‹æˆå‘˜å˜é‡çš„ä¿¡æ¯Ivar class_getInstanceVariable ( Class cls, const char *name );// è·å–ç±»æˆå‘˜å˜é‡çš„ä¿¡æ¯Ivar class_getClassVariable ( Class cls, const char *name );// æ·»åŠ æˆå‘˜å˜é‡BOOL class_addIvar ( Class cls, const char *name, size_t size, uint8_t alignment, const char *types );// è·å–æ•´ä¸ªæˆå‘˜å˜é‡åˆ—è¡¨Ivar * class_copyIvarList ( Class cls, unsigned int *outCount ); methodLists123456789101112131415161718192021// æ·»åŠ æ–¹æ³•BOOL class_addMethod ( Class cls, SEL name, IMP imp, const char *types ); //å’Œæˆå‘˜å˜é‡ä¸åŒçš„æ˜¯å¯ä»¥ä¸ºç±»åŠ¨æ€æ·»åŠ æ–¹æ³•ã€‚å¦‚æœæœ‰åŒåä¼šè¿”å›NOï¼Œä¿®æ”¹çš„è¯éœ€è¦ä½¿ç”¨method_setImplementation// è·å–å®ä¾‹æ–¹æ³•Method class_getInstanceMethod ( Class cls, SEL name );// è·å–ç±»æ–¹æ³•Method class_getClassMethod ( Class cls, SEL name );// è·å–æ‰€æœ‰æ–¹æ³•çš„æ•°ç»„Method * class_copyMethodList ( Class cls, unsigned int *outCount );// æ›¿ä»£æ–¹æ³•çš„å®ç°IMP class_replaceMethod ( Class cls, SEL name, IMP imp, const char *types );// è¿”å›æ–¹æ³•çš„å…·ä½“å®ç°IMP class_getMethodImplementation ( Class cls, SEL name );IMP class_getMethodImplementation_stret ( Class cls, SEL name );// ç±»å®ä¾‹æ˜¯å¦å“åº”æŒ‡å®šçš„selectorBOOL class_respondsToSelector ( Class cls, SEL sel ); objc_protocol_list12345678// æ·»åŠ åè®®BOOL class_addProtocol ( Class cls, Protocol *protocol );// è¿”å›ç±»æ˜¯å¦å®ç°æŒ‡å®šçš„åè®®BOOL class_conformsToProtocol ( Class cls, Protocol *protocol );// è¿”å›ç±»å®ç°çš„åè®®åˆ—è¡¨Protocol * class_copyProtocolList ( Class cls, unsigned int *outCount ); version12345// è·å–ç‰ˆæœ¬å·int class_getVersion ( Class cls );// è®¾ç½®ç‰ˆæœ¬å·void class_setVersion ( Class cls, int version ); å®ä¾‹é€šè¿‡å®ä¾‹æ¥æ¶ˆåŒ–ä¸‹ä¸Šé¢çš„é‚£äº›å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142//-----------------------------------------------------------// MyClass.h@interface MyClass : NSObject &lt;NSCopying, NSCoding&gt;@property (nonatomic, strong) NSArray *array;@property (nonatomic, copy) NSString *string;- (void)method1;- (void)method2;+ (void)classMethod1;@end//-----------------------------------------------------------// MyClass.m#import &quot;MyClass.h&quot;@interface MyClass () {NSInteger _instance1;NSString * _instance2;}@property (nonatomic, assign) NSUInteger integer;- (void)method3WithArg1:(NSInteger)arg1 arg2:(NSString *)arg2;@end@implementation MyClass+ (void)classMethod1 {}- (void)method1 { NSLog(@&quot;call method method1&quot;);}- (void)method2 {}- (void)method3WithArg1:(NSInteger)arg1 arg2:(NSString *)arg2 { NSLog(@&quot;arg1 : %ld, arg2 : %@&quot;, arg1, arg2);}@end//-----------------------------------------------------------// main.h#import &quot;MyClass.h&quot;#import &quot;MySubClass.h&quot;#import &lt;objc/runtime.h&gt;int main(int argc, const char * argv[]) { @autoreleasepool { MyClass *myClass = [[MyClass alloc] init]; unsigned int outCount = 0; Class cls = myClass.class; // ç±»å NSLog(@&quot;class name: %s&quot;, class_getName(cls)); NSLog(@&quot;==========================================================&quot;); // çˆ¶ç±» NSLog(@&quot;super class name: %s&quot;, class_getName(class_getSuperclass(cls))); NSLog(@&quot;==========================================================&quot;); // æ˜¯å¦æ˜¯å…ƒç±» NSLog(@&quot;MyClass is %@ a meta-class&quot;, (class_isMetaClass(cls) ? @&quot;&quot; : @&quot;not&quot;)); NSLog(@&quot;==========================================================&quot;); Class meta_class = objc_getMetaClass(class_getName(cls)); NSLog(@&quot;%s&apos;s meta-class is %s&quot;, class_getName(cls), class_getName(meta_class)); NSLog(@&quot;==========================================================&quot;); // å˜é‡å®ä¾‹å¤§å° NSLog(@&quot;instance size: %zu&quot;, class_getInstanceSize(cls)); NSLog(@&quot;==========================================================&quot;); // æˆå‘˜å˜é‡ Ivar *ivars = class_copyIvarList(cls, &amp;outCount); for (int i = 0; i &lt; outCount; i++) { Ivar ivar = ivars[i]; NSLog(@&quot;instance variable&apos;s name: %s at index: %d&quot;, ivar_getName(ivar), i); } free(ivars); Ivar string = class_getInstanceVariable(cls, &quot;_string&quot;); if (string != NULL) { NSLog(@&quot;instace variable %s&quot;, ivar_getName(string)); } NSLog(@&quot;==========================================================&quot;); // å±æ€§æ“ä½œ objc_property_t * properties = class_copyPropertyList(cls, &amp;outCount); for (int i = 0; i &lt; outCount; i++) { objc_property_t property = properties[i]; NSLog(@&quot;property&apos;s name: %s&quot;, property_getName(property)); } free(properties); objc_property_t array = class_getProperty(cls, &quot;array&quot;); if (array != NULL) { NSLog(@&quot;property %s&quot;, property_getName(array)); } NSLog(@&quot;==========================================================&quot;); // æ–¹æ³•æ“ä½œ Method *methods = class_copyMethodList(cls, &amp;outCount); for (int i = 0; i &lt; outCount; i++) { Method method = methods[i]; NSLog(@&quot;method&apos;s signature: %s&quot;, method_getName(method)); } free(methods); Method method1 = class_getInstanceMethod(cls, @selector(method1)); if (method1 != NULL) { NSLog(@&quot;method %s&quot;, method_getName(method1)); } Method classMethod = class_getClassMethod(cls, @selector(classMethod1)); if (classMethod != NULL) { NSLog(@&quot;class method : %s&quot;, method_getName(classMethod)); } NSLog(@&quot;MyClass is%@ responsd to selector: method3WithArg1:arg2:&quot;, class_respondsToSelector(cls, @selector(method3WithArg1:arg2:)) ? @&quot;&quot; : @&quot; not&quot;); IMP imp = class_getMethodImplementation(cls, @selector(method1)); imp(); NSLog(@&quot;==========================================================&quot;); // åè®® Protocol * __unsafe_unretained * protocols = class_copyProtocolList(cls, &amp;outCount); Protocol * protocol; for (int i = 0; i &lt; outCount; i++) { protocol = protocols[i]; NSLog(@&quot;protocol name: %s&quot;, protocol_getName(protocol)); } NSLog(@&quot;MyClass is%@ responsed to protocol %s&quot;, class_conformsToProtocol(cls, protocol) ? @&quot;&quot; : @&quot; not&quot;, protocol_getName(protocol)); NSLog(@&quot;==========================================================&quot;); } return 0;} è¾“å‡ºç»“æœ 12345678910111213141516171819202122232425262728293031323334353637383940412014-10-22 19:41:37.452 RuntimeTest[3189:156810] class name: MyClass2014-10-22 19:41:37.453 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.454 RuntimeTest[3189:156810] super class name: NSObject2014-10-22 19:41:37.454 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.454 RuntimeTest[3189:156810] MyClass is not a meta-class2014-10-22 19:41:37.454 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.454 RuntimeTest[3189:156810] MyClass&apos;s meta-class is MyClass2014-10-22 19:41:37.455 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance size: 482014-10-22 19:41:37.455 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance variable&apos;s name: _instance1 at index: 02014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance variable&apos;s name: _instance2 at index: 12014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance variable&apos;s name: _array at index: 22014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance variable&apos;s name: _string at index: 32014-10-22 19:41:37.463 RuntimeTest[3189:156810] instance variable&apos;s name: _integer at index: 42014-10-22 19:41:37.463 RuntimeTest[3189:156810] instace variable _string2014-10-22 19:41:37.463 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.463 RuntimeTest[3189:156810] property&apos;s name: array2014-10-22 19:41:37.463 RuntimeTest[3189:156810] property&apos;s name: string2014-10-22 19:41:37.464 RuntimeTest[3189:156810] property&apos;s name: integer2014-10-22 19:41:37.464 RuntimeTest[3189:156810] property array2014-10-22 19:41:37.464 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.464 RuntimeTest[3189:156810] method&apos;s signature: method12014-10-22 19:41:37.464 RuntimeTest[3189:156810] method&apos;s signature: method22014-10-22 19:41:37.464 RuntimeTest[3189:156810] method&apos;s signature: method3WithArg1:arg2:2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: integer2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: setInteger:2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: array2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: string2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: setString:2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: setArray:2014-10-22 19:41:37.466 RuntimeTest[3189:156810] method&apos;s signature: .cxx_destruct2014-10-22 19:41:37.466 RuntimeTest[3189:156810] method method12014-10-22 19:41:37.466 RuntimeTest[3189:156810] class method : classMethod12014-10-22 19:41:37.466 RuntimeTest[3189:156810] MyClass is responsd to selector: method3WithArg1:arg2:2014-10-22 19:41:37.467 RuntimeTest[3189:156810] call method method12014-10-22 19:41:37.467 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.467 RuntimeTest[3189:156810] protocol name: NSCopying2014-10-22 19:41:37.467 RuntimeTest[3189:156810] protocol name: NSCoding2014-10-22 19:41:37.467 RuntimeTest[3189:156810] MyClass is responsed to protocol NSCoding2014-10-22 19:41:37.468 RuntimeTest[3189:156810] ====================================== åŠ¨æ€åˆ›å»ºç±»å’Œå¯¹è±¡åŠ¨æ€åˆ›å»ºç±»12345678// åˆ›å»ºä¸€ä¸ªæ–°ç±»å’Œå…ƒç±»Class objc_allocateClassPair ( Class superclass, const char *name, size_t extraBytes ); //å¦‚æœåˆ›å»ºçš„æ˜¯root classï¼Œåˆ™superclassä¸ºNilã€‚extraBytesé€šå¸¸ä¸º0// é”€æ¯ä¸€ä¸ªç±»åŠå…¶ç›¸å…³è”çš„ç±»void objc_disposeClassPair ( Class cls ); //åœ¨è¿è¡Œä¸­è¿˜å­˜åœ¨æˆ–å­˜åœ¨å­ç±»å®ä¾‹ï¼Œå°±ä¸èƒ½å¤Ÿè°ƒç”¨è¿™ä¸ªã€‚// åœ¨åº”ç”¨ä¸­æ³¨å†Œç”±objc_allocateClassPairåˆ›å»ºçš„ç±»void objc_registerClassPair ( Class cls ); //åˆ›å»ºäº†æ–°ç±»åï¼Œç„¶åä½¿ç”¨class_addMethodï¼Œclass_addIvarå‡½æ•°ä¸ºæ–°ç±»æ·»åŠ æ–¹æ³•ï¼Œå®ä¾‹å˜é‡å’Œå±æ€§åå†è°ƒç”¨è¿™ä¸ªæ¥æ³¨å†Œç±»ï¼Œå†ä¹‹åå°±èƒ½å¤Ÿç”¨äº†ã€‚ ä½¿ç”¨å®ä¾‹ 12345678910111213141516Class cls = objc_allocateClassPair(MyClass.class, &quot;MySubClass&quot;, 0);class_addMethod(cls, @selector(submethod1), (IMP)imp_submethod1, &quot;v@:&quot;);class_replaceMethod(cls, @selector(method1), (IMP)imp_submethod1, &quot;v@:&quot;);class_addIvar(cls, &quot;_ivar1&quot;, sizeof(NSString *), log(sizeof(NSString *)), &quot;i&quot;);objc_property_attribute_t type = {&quot;T&quot;, &quot;@\\&quot;NSString\\&quot;&quot;};objc_property_attribute_t ownership = { &quot;C&quot;, &quot;&quot; };objc_property_attribute_t backingivar = { &quot;V&quot;, &quot;_ivar1&quot;};objc_property_attribute_t attrs[] = {type, ownership, backingivar};class_addProperty(cls, &quot;property2&quot;, attrs, 3);objc_registerClassPair(cls);id instance = [[cls alloc] init];[instance performSelector:@selector(submethod1)];[instance performSelector:@selector(method1)]; è¾“å‡º 122014-10-23 11:35:31.006 RuntimeTest[3800:66152] run sub method 12014-10-23 11:35:31.006 RuntimeTest[3800:66152] run sub method 1 åŠ¨æ€åˆ›å»ºå¯¹è±¡12345678// åˆ›å»ºç±»å®ä¾‹id class_createInstance ( Class cls, size_t extraBytes ); //ä¼šåœ¨heapé‡Œç»™ç±»åˆ†é…å†…å­˜ã€‚è¿™ä¸ªæ–¹æ³•å’Œ+allocæ–¹æ³•ç±»ä¼¼ã€‚// åœ¨æŒ‡å®šä½ç½®åˆ›å»ºç±»å®ä¾‹id objc_constructInstance ( Class cls, void *bytes ); // é”€æ¯ç±»å®ä¾‹void * objc_destructInstance ( id obj ); //ä¸ä¼šé‡Šæ”¾ç§»é™¤ä»»ä½•ç›¸å…³å¼•ç”¨ æµ‹è¯•ä¸‹æ•ˆæœ 123456//å¯ä»¥çœ‹å‡ºclass_createInstanceå’Œallocçš„ä¸åŒid theObject = class_createInstance(NSString.class, sizeof(unsigned));id str1 = [theObject init];NSLog(@&quot;%@&quot;, [str1 class]);id str2 = [[NSString alloc] initWithString:@&quot;test&quot;];NSLog(@&quot;%@&quot;, [str2 class]); è¾“å‡ºç»“æœ 122014-10-23 12:46:50.781 RuntimeTest[4039:89088] NSString2014-10-23 12:46:50.781 RuntimeTest[4039:89088] __NSCFConstantString å®ä¾‹æ“ä½œå‡½æ•°è¿™äº›å‡½æ•°æ˜¯é’ˆå¯¹åˆ›å»ºçš„å®ä¾‹å¯¹è±¡çš„ä¸€ç³»åˆ—æ“ä½œå‡½æ•°ã€‚ æ•´ä¸ªå¯¹è±¡æ“ä½œçš„å‡½æ•°1234// è¿”å›æŒ‡å®šå¯¹è±¡çš„ä¸€ä»½æ‹·è´id object_copy ( id obj, size_t size );// é‡Šæ”¾æŒ‡å®šå¯¹è±¡å ç”¨çš„å†…å­˜id object_dispose ( id obj ); åº”ç”¨åœºæ™¯ 12345//æŠŠaè½¬æ¢æˆå ç”¨æ›´å¤šç©ºé—´çš„å­ç±»bNSObject *a = [[NSObject alloc] init];id newB = object_copy(a, class_getInstanceSize(MyClass.class));object_setClass(newB, MyClass.class);object_dispose(a); å¯¹è±¡å®ä¾‹å˜é‡è¿›è¡Œæ“ä½œçš„å‡½æ•°12345678910// ä¿®æ”¹ç±»å®ä¾‹çš„å®ä¾‹å˜é‡çš„å€¼Ivar object_setInstanceVariable ( id obj, const char *name, void *value );// è·å–å¯¹è±¡å®ä¾‹å˜é‡çš„å€¼Ivar object_getInstanceVariable ( id obj, const char *name, void **outValue );// è¿”å›æŒ‡å‘ç»™å®šå¯¹è±¡åˆ†é…çš„ä»»ä½•é¢å¤–å­—èŠ‚çš„æŒ‡é’ˆvoid * object_getIndexedIvars ( id obj );// è¿”å›å¯¹è±¡ä¸­å®ä¾‹å˜é‡çš„å€¼id object_getIvar ( id obj, Ivar ivar );// è®¾ç½®å¯¹è±¡ä¸­å®ä¾‹å˜é‡çš„å€¼void object_setIvar ( id obj, Ivar ivar, id value ); å¯¹å¯¹è±¡ç±»æ“ä½œ123456// è¿”å›ç»™å®šå¯¹è±¡çš„ç±»åconst char * object_getClassName ( id obj );// è¿”å›å¯¹è±¡çš„ç±»Class object_getClass ( id obj );// è®¾ç½®å¯¹è±¡çš„ç±»Class object_setClass ( id obj, Class cls ); è·å–ç±»å®šä¹‰12345678910111213// è·å–å·²æ³¨å†Œçš„ç±»å®šä¹‰çš„åˆ—è¡¨int objc_getClassList ( Class *buffer, int bufferCount );// åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘æ‰€æœ‰å·²æ³¨å†Œç±»çš„æŒ‡é’ˆåˆ—è¡¨Class * objc_copyClassList ( unsigned int *outCount );// è¿”å›æŒ‡å®šç±»çš„ç±»å®šä¹‰Class objc_lookUpClass ( const char *name );Class objc_getClass ( const char *name );Class objc_getRequiredClass ( const char *name );// è¿”å›æŒ‡å®šç±»çš„å…ƒç±»Class objc_getMetaClass ( const char *name ); æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ 123456789101112131415int numClasses;Class * classes = NULL;numClasses = objc_getClassList(NULL, 0);if (numClasses &gt; 0) { classes = malloc(sizeof(Class) * numClasses); numClasses = objc_getClassList(classes, numClasses); NSLog(@&quot;number of classes: %d&quot;, numClasses); for (int i = 0; i &lt; numClasses; i++) { Class cls = classes[i]; NSLog(@&quot;class name: %s&quot;, class_getName(cls)); } free(classes);} ç»“æœå¦‚ä¸‹ï¼š 1234567891011122014-10-23 16:20:52.589 RuntimeTest[8437:188589] number of classes: 12822014-10-23 16:20:52.589 RuntimeTest[8437:188589] class name: DDTokenRegexp2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: _NSMostCommonKoreanCharsKeySet2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: OS_xpc_dictionary2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: NSFileCoordinator2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: NSAssertionHandler2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: PFUbiquityTransactionLogMigrator2014-10-23 16:20:52.591 RuntimeTest[8437:188589] class name: NSNotification2014-10-23 16:20:52.591 RuntimeTest[8437:188589] class name: NSKeyValueNilSetEnumerator2014-10-23 16:20:52.591 RuntimeTest[8437:188589] class name: OS_tcp_connection_tls_session2014-10-23 16:20:52.591 RuntimeTest[8437:188589] class name: _PFRoutines......è¿˜æœ‰å¤§é‡è¾“å‡º æˆå‘˜å˜é‡ä¸å±æ€§åŸºç¡€æ•°æ®ç±»å‹Ivarå®ä¾‹å˜é‡ç±»å‹ï¼ŒæŒ‡å‘objc_ivarç»“æ„ä½“çš„æŒ‡é’ˆï¼ŒivaræŒ‡é’ˆåœ°å€æ˜¯æ ¹æ®classç»“æ„ä½“çš„åœ°å€åŠ ä¸ŠåŸºåœ°å€åç§»å­—èŠ‚å¾—åˆ°çš„ã€‚ 12345678910typedef struct objc_ivar *Ivar;struct objc_ivar {char *ivar_name OBJC2_UNAVAILABLE; // å˜é‡åchar *ivar_type OBJC2_UNAVAILABLE; // å˜é‡ç±»å‹int ivar_offset OBJC2_UNAVAILABLE; // åŸºåœ°å€åç§»å­—èŠ‚#ifdef __LP64__int space OBJC2_UNAVAILABLE;#endif} objc_property_tå±æ€§ç±»å‹ï¼ŒæŒ‡å‘objc_propertyç»“æ„ä½“ 1typedef struct objc_property *objc_property_t; é€šè¿‡class_copyPropertyListå’Œprotocol_copyPropertyListæ–¹æ³•è·å–ç±»å’Œåè®®çš„å±æ€§ 12objc_property_t *class_copyPropertyList(Class cls, unsigned int *outCount)objc_property_t *protocol_copyPropertyList(Protocol *proto, unsigned int *outCount) ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829@interface Lender : NSObject { float alone;}@property float alone;@end//è·å–å±æ€§åˆ—è¡¨id LenderClass = objc_getClass(&quot;Lender&quot;);unsigned int outCount;objc_property_t *properties = class_copyPropertyList(LenderClass, &amp;outCount);//æŸ¥æ‰¾å±æ€§åç§°const char *property_getName(objc_property_t property)//é€šè¿‡ç»™å‡ºçš„åç§°æ¥åœ¨ç±»å’Œåè®®ä¸­è·å–å±æ€§çš„å¼•ç”¨objc_property_t class_getProperty(Class cls, const char *name)objc_property_t protocol_getProperty(Protocol *proto, const char *name, BOOL isRequiredProperty, BOOL isInstanceProperty)//å‘æ˜å±æ€§åç§°å’Œ@encodeç±»å‹å­—ç¬¦ä¸²const char *property_getAttributes(objc_property_t property)//ä»ä¸€ä¸ªç±»ä¸­è·å–å®ƒçš„å±æ€§id LenderClass = objc_getClass(&quot;Lender&quot;);unsigned int outCount, i;objc_property_t *properties = class_copyPropertyList(LenderClass, &amp;outCount);for (i = 0; i &lt; outCount; i++) { objc_property_t property = properties[i]; fprintf(stdout, &quot;%s %s\\n&quot;, property_getName(property), property_getAttributes(property));} objc_property_attribute_tä¹Ÿæ˜¯ç»“æ„ä½“ï¼Œå®šä¹‰å±æ€§çš„attribute 1234typedef struct { const char *name; // ç‰¹æ€§å const char *value; // ç‰¹æ€§å€¼} objc_property_attribute_t; ç¤ºä¾‹ä¸‹é¢ä»£ç ä¼šç¼–è¯‘å‡ºé”™ï¼ŒRuntime Crashè¿˜æ˜¯æ­£å¸¸è¾“å‡º 1234567891011121314151617181920212223242526272829303132@interface Sark : NSObject@property (nonatomic, copy) NSString *name;@end@implementation Sark- (void)speak{ NSLog(@&quot;my name is %@&quot;, self.name);}@end@interface Test : NSObject@end@implementation Test- (instancetype)init{ self = [super init]; if (self) { id cls = [Sark class]; void *obj = &amp;cls; [(__bridge id)obj speak]; } return self;}@endint main(int argc, const char * argv[]) { @autoreleasepool { [[Test alloc] init]; } return 0;}//ç»“æœæ­£å¸¸è¾“å‡º2014-11-07 14:08:25.698 Test[1097:57255] my name is objä¸ºæŒ‡å‘Sark Classçš„æŒ‡é’ˆï¼Œç›¸å½“äºSarkçš„å®ä¾‹å¯¹è±¡ä½†æ˜¯è¿˜æ˜¯ä¸ä¸€æ ·ï¼Œæ ¹æ®objc_msgSendæµç¨‹ï¼ŒobjæŒ‡é’ˆèƒ½å¤Ÿåœ¨æ–¹æ³•åˆ—è¡¨ä¸­æ‰¾åˆ°speakæ–¹æ³•ï¼Œæ‰€ä»¥è¿è¡Œæ­£å¸¸ã€‚ ä¸ºäº†å¾—åˆ°self.nameèƒ½å¤Ÿè¾“å‡ºçš„åŸå› ï¼Œå¯ä»¥åŠ å…¥è°ƒè¯•ä»£ç  123456789101112131415161718192021222324252627282930313233343536- (void)speak{ unsigned int numberOfIvars = 0; Ivar *ivars = class_copyIvarList([self class], &amp;numberOfIvars); for(const Ivar *p = ivars; p &lt; ivars+numberOfIvars; p++) { Ivar const ivar = *p; ptrdiff_t offset = ivar_getOffset(ivar); const char *name = ivar_getName(ivar); NSLog(@&quot;Sark ivar name = %s, offset = %td&quot;, name, offset); } NSLog(@&quot;my name is %p&quot;, &amp;_name); NSLog(@&quot;my name is %@&quot;, *(&amp;_name));}@implementation Test- (instancetype)init{ self = [super init]; if (self) { NSLog(@&quot;Test instance = %@&quot;, self); void *self2 = (__bridge void *)self; NSLog(@&quot;Test instance pointer = %p&quot;, &amp;self2); id cls = [Sark class]; NSLog(@&quot;Class instance address = %p&quot;, cls); void *obj = &amp;cls; NSLog(@&quot;Void *obj = %@&quot;, obj); [(__bridge id)obj speak]; } return self;}@end//è¾“å‡º2014-11-11 00:56:02.464 Test[10475:1071029] Test instance = 2014-11-11 00:56:02.464 Test[10475:1071029] Test instance pointer = 0x7fff5fbff7c82014-11-11 00:56:02.465 Test[10475:1071029] Class instance address = 0x1000023c82014-11-11 00:56:02.465 Test[10475:1071029] Void *obj = 2014-11-11 00:56:02.465 Test[10475:1071029] Sark ivar name = _name, offset = 82014-11-11 00:56:02.465 Test[10475:1071029] my name is 0x7fff5fbff7c82014-11-11 00:56:02.465 Test[10475:1071029] my name is Sarkä¸­Propertynameä¼šè¢«è½¬æ¢æˆivaråˆ°ç±»çš„ç»“æ„é‡Œï¼Œruntimeä¼šè®¡ç®—ivarçš„åœ°å€åç§»æ¥æ‰¾ivarçš„æœ€ç»ˆåœ°å€ï¼Œæ ¹æ®è¾“å‡ºå¯ä»¥çœ‹å‡ºSark classçš„æŒ‡é’ˆåœ°å€åŠ ä¸Šivarçš„åç§»é‡æ­£å¥½è·ŸTestå¯¹è±¡æŒ‡é’ˆåœ°å€ã€‚ å…³è”å¯¹è±¡å…³è”å¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶æ·»åŠ çš„ç±»ä¼¼æˆå‘˜ã€‚ 123456//å°†ä¸€ä¸ªå¯¹è±¡è¿æ¥åˆ°å…¶å®ƒå¯¹è±¡static char myKey;objc_setAssociatedObject(self, &amp;myKey, anObject, OBJC_ASSOCIATION_RETAIN);//è·å–ä¸€ä¸ªæ–°çš„å…³è”çš„å¯¹è±¡id anObject = objc_getAssociatedObject(self, &amp;myKey);//ä½¿ç”¨objc_removeAssociatedObjectså‡½æ•°ç§»é™¤ä¸€ä¸ªå…³è”å¯¹è±¡ å®ä¾‹æ¼”ç¤ºå…³è”å¯¹è±¡ä½¿ç”¨ 1234567891011121314151617181920212223242526272829//åŠ¨æ€çš„å°†ä¸€ä¸ªTapæ‰‹åŠ¿æ“ä½œè¿æ¥åˆ°ä»»ä½•UIViewä¸­ã€‚- (void)setTapActionWithBlock:(void (^)(void))block{ UITapGestureRecognizer *gesture = objc_getAssociatedObject(self, &amp;kDTActionHandlerTapGestureKey); if (!gesture) { gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(__handleActionForTapGesture:)]; [self addGestureRecognizer:gesture]; //å°†åˆ›å»ºçš„æ‰‹åŠ¿å¯¹è±¡å’Œblockä½œä¸ºå…³è”å¯¹è±¡ objc_setAssociatedObject(self, &amp;kDTActionHandlerTapGestureKey, gesture, OBJC_ASSOCIATION_RETAIN); } objc_setAssociatedObject(self, &amp;kDTActionHandlerTapBlockKey, block, OBJC_ASSOCIATION_COPY);}//æ‰‹åŠ¿è¯†åˆ«å¯¹è±¡çš„targetå’Œaction- (void)__handleActionForTapGesture:(UITapGestureRecognizer *)gesture{ if (gesture.state == UIGestureRecognizerStateRecognized) { void(^action)(void) = objc_getAssociatedObject(self, &amp;kDTActionHandlerTapBlockKey); if (action) { action(); } }} æˆå‘˜å˜é‡å’Œå±æ€§çš„æ“ä½œæ–¹æ³•æˆå‘˜å˜é‡123456// è·å–æˆå‘˜å˜é‡åconst char * ivar_getName ( Ivar v );// è·å–æˆå‘˜å˜é‡ç±»å‹ç¼–ç const char * ivar_getTypeEncoding ( Ivar v );// è·å–æˆå‘˜å˜é‡çš„åç§»é‡ptrdiff_t ivar_getOffset ( Ivar v ); Associated Objects123456789101112131415// è®¾ç½®å…³è”å¯¹è±¡void objc_setAssociatedObject ( id object, const void *key, id value, objc_AssociationPolicy policy );// è·å–å…³è”å¯¹è±¡id objc_getAssociatedObject ( id object, const void *key );// ç§»é™¤å…³è”å¯¹è±¡void objc_removeAssociatedObjects ( id object );//ä¸Šé¢æ–¹æ³•ä»¥é”®å€¼å¯¹çš„å½¢å¼åŠ¨æ€çš„å‘å¯¹è±¡æ·»åŠ ï¼Œè·å–æˆ–è€…åˆ é™¤å…³è”å€¼ã€‚å…¶ä¸­å…³è”æ”¿ç­–æ˜¯ä¸€ç»„æšä¸¾å¸¸é‡ã€‚è¿™äº›å¸¸é‡å¯¹åº”ç€å¼•ç”¨å…³è”å€¼æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯Objcå†…å­˜ç®¡ç†çš„å¼•ç”¨è®¡æ•°æœºåˆ¶ã€‚enum { OBJC_ASSOCIATION_ASSIGN = 0, OBJC_ASSOCIATION_RETAIN_NONATOMIC = 1, OBJC_ASSOCIATION_COPY_NONATOMIC = 3, OBJC_ASSOCIATION_RETAIN = 01401, OBJC_ASSOCIATION_COPY = 01403}; å±æ€§12345678// è·å–å±æ€§åconst char * property_getName ( objc_property_t property );// è·å–å±æ€§ç‰¹æ€§æè¿°å­—ç¬¦ä¸²const char * property_getAttributes ( objc_property_t property );// è·å–å±æ€§ä¸­æŒ‡å®šçš„ç‰¹æ€§char * property_copyAttributeValue ( objc_property_t property, const char *attributeName );// è·å–å±æ€§çš„ç‰¹æ€§åˆ—è¡¨objc_property_attribute_t * property_copyAttributeList ( objc_property_t property, unsigned int *outCount ); å®ä¾‹ä¸¤ä¸ªæ¥å£åŒæ ·æ•°æ®ä¸åŒçš„å­—æ®µåå¤„ç† 1234567891011121314151617181920212223242526272829303132333435363738394041424344@interface MyObject: NSObject@property (nonatomic, copy) NSString * name;@property (nonatomic, copy) NSString * status;@end//è¿”å›å­—å…¸æ•°æ®æœ‰ä¸åŒçš„å­—æ®µåï¼Œä¸€èˆ¬æ˜¯å†™ä¸¤ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœçµæ´»ç”¨runtimeåªç”¨å†™ä¸€ä¸ªæ–¹æ³•@{@&quot;name1&quot;: &quot;å¼ ä¸‰&quot;, @&quot;status1&quot;: @&quot;start&quot;}@{@&quot;name2&quot;: &quot;å¼ ä¸‰&quot;, @&quot;status2&quot;: @&quot;end&quot;}//å®šä¹‰ä¸€ä¸ªæ˜ å°„å­—å…¸ï¼ˆå…¨å±€ï¼‰static NSMutableDictionary *map = nil;@implementation MyObject+ (void)load{map = [NSMutableDictionary dictionary];map[@&quot;name1&quot;] = @&quot;name&quot;;map[@&quot;status1&quot;] = @&quot;status&quot;;map[@&quot;name2&quot;] = @&quot;name&quot;;map[@&quot;status2&quot;] = @&quot;status&quot;;}@end//ä¸åŒå­—æ®µæ˜ å°„åˆ°MyObjectç›¸åŒå±æ€§ä¸Š- (void)setDataWithDic:(NSDictionary *)dic{ [dic enumerateKeysAndObjectsUsingBlock:^(NSString *key, id obj, BOOL *stop) { NSString *propertyKey = [self propertyForKey:key]; if (propertyKey) { objc_property_t property = class_getProperty([self class], [propertyKey UTF8String]); // TODO: é’ˆå¯¹ç‰¹æ®Šæ•°æ®ç±»å‹åšå¤„ç† NSString *attributeString = [NSString stringWithCString:property_getAttributes(property) encoding:NSUTF8StringEncoding]; ... [self setValue:obj forKey:propertyKey]; } }];} Methodå’Œæ¶ˆæ¯Methodå’Œæ¶ˆæ¯çš„åŸºç¡€æ•°æ®ç±»å‹SELé€‰æ‹©å™¨è¡¨ç¤ºä¸€ä¸ªæ–¹æ³•çš„selectorçš„æŒ‡é’ˆï¼Œå¯ä»¥ç†è§£ä¸ºMethodä¸­çš„IDç±»å‹ 123456typedef struct objc_selector *SEL;//objc_selectorç¼–è¯‘æ—¶ä¼šæ ¹æ®æ¯ä¸ªæ–¹æ³•åå­—å‚æ•°åºåˆ—ç”Ÿæˆå”¯ä¸€æ ‡è¯†SEL sel1 = @selector(method1);NSLog(@&quot;sel : %p&quot;, sel1);è¾“å‡º2014-10-30 18:40:07.518 RuntimeTest[52734:466626] sel : 0x100002d72 è·å–SELçš„ä¸‰ä¸ªæ–¹æ³•ï¼š sel_registerNameå‡½æ•° Objective-Cç¼–è¯‘å™¨æä¾›çš„@selector() NSSelectorFromString()æ–¹æ³• IMPæ˜¯å‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•çš„é¦–åœ°å€ï¼Œé€šè¿‡SELå¿«é€Ÿå¾—åˆ°å¯¹åº”IMPï¼Œè¿™æ—¶å¯ä»¥è·³è¿‡Runtimeæ¶ˆæ¯ä¼ é€’æœºåˆ¶ç›´æ¥æ‰§è¡Œå‡½æ•°ï¼Œæ¯”ç›´æ¥å‘å¯¹è±¡å‘æ¶ˆæ¯é«˜æ•ˆã€‚å®šä¹‰å¦‚ä¸‹ 1id (*IMP)(id, SEL, ...) Methodç”¨äºè¡¨ç¤ºç±»å®šä¹‰ä¸­çš„æ–¹æ³• 1234567typedef struct objc_method *Method;struct objc_method { SEL method_name OBJC2_UNAVAILABLE; // æ–¹æ³•å char *method_types OBJC2_UNAVAILABLE; //æ˜¯ä¸ªcharæŒ‡é’ˆï¼Œå­˜å‚¨ç€æ–¹æ³•çš„å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ IMP method_imp OBJC2_UNAVAILABLE; // æ–¹æ³•å®ç°ï¼Œå‡½æ•°æŒ‡é’ˆ} Methodç›¸å…³æ“ä½œå‡½æ•°Method1234567891011121314151617181920212223242526// è°ƒç”¨æŒ‡å®šæ–¹æ³•çš„å®ç°ï¼Œè¿”å›çš„æ˜¯æ–¹æ³•å®ç°æ—¶çš„è¿”å›ï¼Œå‚æ•°receiverä¸èƒ½ä¸ºç©ºï¼Œè¿™ä¸ªæ¯”method_getImplementationå’Œmethod_getNameå¿«id method_invoke ( id receiver, Method m, ... );// è°ƒç”¨è¿”å›ä¸€ä¸ªæ•°æ®ç»“æ„çš„æ–¹æ³•çš„å®ç°void method_invoke_stret ( id receiver, Method m, ... );// è·å–æ–¹æ³•åï¼Œå¸Œæœ›è·å¾—æ–¹æ³•æ˜çš„Cå­—ç¬¦ä¸²ï¼Œä½¿ç”¨sel_getName(method_getName(method))SEL method_getName ( Method m );// è¿”å›æ–¹æ³•çš„å®ç°IMP method_getImplementation ( Method m );// è·å–æè¿°æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼ç±»å‹çš„å­—ç¬¦ä¸²const char * method_getTypeEncoding ( Method m );// è·å–æ–¹æ³•çš„è¿”å›å€¼ç±»å‹çš„å­—ç¬¦ä¸²char * method_copyReturnType ( Method m );// è·å–æ–¹æ³•çš„æŒ‡å®šä½ç½®å‚æ•°çš„ç±»å‹å­—ç¬¦ä¸²char * method_copyArgumentType ( Method m, unsigned int index );// é€šè¿‡å¼•ç”¨è¿”å›æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å­—ç¬¦ä¸²void method_getReturnType ( Method m, char *dst, size_t dst_len );// è¿”å›æ–¹æ³•çš„å‚æ•°çš„ä¸ªæ•°unsigned int method_getNumberOfArguments ( Method m );// é€šè¿‡å¼•ç”¨è¿”å›æ–¹æ³•æŒ‡å®šä½ç½®å‚æ•°çš„ç±»å‹å­—ç¬¦ä¸²void method_getArgumentType ( Method m, unsigned int index, char *dst, size_t dst_len );// è¿”å›æŒ‡å®šæ–¹æ³•çš„æ–¹æ³•æè¿°ç»“æ„ä½“struct objc_method_description * method_getDescription ( Method m );// è®¾ç½®æ–¹æ³•çš„å®ç°IMP method_setImplementation ( Method m, IMP imp );// äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç°void method_exchangeImplementations ( Method m1, Method m2 ); Methodçš„SEL12345678// è¿”å›ç»™å®šé€‰æ‹©å™¨æŒ‡å®šçš„æ–¹æ³•çš„åç§°const char * sel_getName ( SEL sel );// åœ¨Objective-C Runtimeç³»ç»Ÿä¸­æ³¨å†Œä¸€ä¸ªæ–¹æ³•ï¼Œå°†æ–¹æ³•åæ˜ å°„åˆ°ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œå¹¶è¿”å›è¿™ä¸ªé€‰æ‹©å™¨SEL sel_registerName ( const char *str );// åœ¨Objective-C Runtimeç³»ç»Ÿä¸­æ³¨å†Œä¸€ä¸ªæ–¹æ³•SEL sel_getUid ( const char *str );// æ¯”è¾ƒä¸¤ä¸ªé€‰æ‹©å™¨BOOL sel_isEqual ( SEL lhs, SEL rhs ); Methodè°ƒç”¨æµç¨‹æ¶ˆæ¯å‡½æ•°ï¼ŒObjcä¸­å‘é€æ¶ˆæ¯æ˜¯ç”¨ä¸­æ‹¬å·æŠŠæ¥æ”¶è€…å’Œæ¶ˆæ¯æ‹¬èµ·æ¥ï¼Œåªåˆ°è¿è¡Œæ—¶æ‰ä¼šæŠŠæ¶ˆæ¯å’Œæ–¹æ³•å®ç°ç»‘å®šã€‚ 12//è¿™ä¸ªå‡½æ•°å°†æ¶ˆæ¯æ¥æ”¶è€…å’Œæ–¹æ³•åä½œä¸ºåŸºç¡€å‚æ•°ã€‚æ¶ˆæ¯å‘é€ç»™ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œobjc_msgSendé€šè¿‡å¯¹è±¡çš„isaæŒ‡é’ˆè·å¾—ç±»çš„ç»“æ„ä½“ï¼Œå…ˆåœ¨Cacheé‡Œæ‰¾ï¼Œæ‰¾åˆ°å°±æ‰§è¡Œï¼Œæ²¡æ‰¾åˆ°å°±åœ¨åˆ†å‘åˆ—è¡¨é‡ŒæŸ¥æ‰¾æ–¹æ³•çš„selectorï¼Œæ²¡æ‰¾åˆ°å°±é€šè¿‡objc_msgSendç»“æ„ä½“ä¸­æŒ‡å‘çˆ¶ç±»çš„æŒ‡é’ˆæ‰¾åˆ°çˆ¶ç±»ï¼Œç„¶ååœ¨çˆ¶ç±»åˆ†å‘åˆ—è¡¨æ‰¾ï¼Œç›´åˆ°root classï¼ˆNSObjectï¼‰ã€‚objc_msgSend(receiver, selector, arg1, arg2, ...) ç¼–è¯‘å™¨ä¼šæ ¹æ®æƒ…å†µåœ¨objc_msgSendï¼Œobjc_msgSend_stretï¼Œobjc_msgSendSuperï¼Œæˆ–objc_msgSendSuper_stretå››ä¸ªæ–¹æ³•ä¸­é€‰ä¸€ä¸ªè°ƒç”¨ã€‚å¦‚æœæ˜¯ä¼ é€’ç»™è¶…ç±»å°±ä¼šè°ƒç”¨å¸¦superçš„å‡½æ•°ï¼Œå¦‚æœè¿”å›æ˜¯æ•°æ®ç»“æ„è€Œä¸æ˜¯ä¸€ä¸ªå€¼å°±ä¼šè°ƒç”¨å¸¦stretçš„å‡½æ•°ã€‚åœ¨i386å¹³å°è¿”å›ç±»å‹ä¸ºæµ®ç‚¹æ¶ˆæ¯ä¼šè°ƒç”¨objc_msgSend_fpretå‡½æ•°ã€‚ ä¸¾ä¸ªä¾‹å­ï¼ŒNSStringFromClass([self class])å’ŒNSStringFromClass([super class])è¾“å‡ºéƒ½æ˜¯selfçš„ç±»åã€‚åŸå› å¦‚ä¸‹ è°ƒç”¨[self class]çš„æ—¶å€™å…ˆè°ƒç”¨objc_msgSendï¼Œå‘ç°selfæ²¡æœ‰classè¿™ä¸ªæ–¹æ³•ï¼Œç„¶åç”¨objc_msgSendSuperå°±å»çˆ¶ç±»æ‰¾ï¼Œè¿˜æ˜¯æ²¡æœ‰ï¼Œç»§ç»­ç”¨objc_msgSendSuperåˆ°NSObjecté‡Œæ‰¾ï¼Œç»“æœæ‰¾åˆ°äº†ï¼ŒæŸ¥æ‰¾NSObjectä¸­classæ–¹æ³•çš„runtimeæºç ä¼šå‘ç°å®ƒä¼šè¿”å›selfï¼Œæ‰€ä»¥[self class]ä¼šè¿”å›selfæœ¬èº«ã€‚åŒç†[super class]ç›¸å¯¹å‰è€…å°±æ˜¯å°‘äº†objc_msgSendè¿™ä¸€æ­¥ï¼Œæœ€åä¹Ÿä¼šæ‰¾åˆ°NSObjectæ ¹ç±»é‡Œçš„classæ–¹æ³•ï¼Œè‡ªç„¶ç»“æœä¹Ÿæ˜¯è¿”å›äº†selfã€‚ Methodä¸­çš„æ¥æ”¶æ¶ˆæ¯å¯¹è±¡å‚æ•°å’Œæ–¹æ³•é€‰æ‹©å™¨å‚æ•°åœ¨Methodä¸­ä½¿ç”¨selfå…³é”®å­—æ¥å¼•ç”¨å®ä¾‹æœ¬èº«ï¼Œselfçš„å†…å®¹å³æ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡æ˜¯åœ¨Methodè¿è¡Œæ—¶è¢«ä¼ å…¥çš„åŒæ—¶è¿˜æœ‰æ–¹æ³•é€‰æ‹©å™¨ã€‚ è·å–Methodåœ°å€ä½¿ç”¨NSObjectæä¾›çš„methodForSelector:æ–¹æ³•å¯ä»¥è·å¾—Methodçš„æŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆè°ƒç”¨å®ç°ä»£ç ã€‚ 123456void (*setter)(id, SEL, BOOL);int i;setter = (void (*)(id, SEL, BOOL))[target methodForSelector:@selector(setFilled:)];for ( i = 0 ; i &lt; 1000 ; i++ ) setter(targetList[i], @selector(setFilled:), YES); Methodè½¬å‘å¦‚æœä½¿ç”¨[object message]è°ƒç”¨æ–¹æ³•ï¼Œobjectæ— æ³•å“åº”messageæ—¶å°±ä¼šæŠ¥é”™ã€‚ç”¨performSelectorâ€¦è°ƒç”¨å°±è¦ç­‰åˆ°è¿è¡Œæ—¶æ‰ç¡®å®šæ˜¯å¦èƒ½æ¥å—ï¼Œä¸èƒ½æ‰å´©æºƒã€‚ 1234//å…ˆè°ƒç”¨respondsToSelector:æ¥åˆ¤æ–­ä¸€ä¸‹if ([self respondsToSelector:@selector(method)]) { [self performSelector:@selector(method)];} Methodè½¬å‘æœºåˆ¶åˆ†ä¸ºä¸‰æ­¥ï¼š åŠ¨æ€æ–¹æ³•è§£æ1234567891011void functionForMethod1(id self, SEL _cmd) { NSLog(@&quot;%@, %p&quot;, self, _cmd);}+ (BOOL)resolveInstanceMethod:(SEL)sel { NSString *selectorString = NSStringFromSelector(sel); if ([selectorString isEqualToString:@&quot;method1&quot;]) { class_addMethod(self.class, @selector(method1), (IMP)functionForMethod1, &quot;@:&quot;); } return [super resolveInstanceMethod:sel];} å¯ä»¥åŠ¨æ€çš„æä¾›ä¸€ä¸ªæ–¹æ³•çš„å®ç°ã€‚ä¾‹å¦‚å¯ä»¥ç”¨@dynamicå…³é”®å­—åœ¨ç±»çš„å®ç°æ–‡ä»¶ä¸­å†™ä¸ªå±æ€§ 123456789101112131415161718//è¿™ä¸ªè¡¨æ˜ä¼šä¸ºè¿™ä¸ªå±æ€§åŠ¨æ€æä¾›set getæ–¹æ³•ï¼Œå°±æ˜¯ç¼–è¯‘å™¨æ˜¯ä¸ä¼šé»˜è®¤ç”ŸæˆsetPropertyName:å’ŒpropertyNameæ–¹æ³•ï¼Œéœ€è¦åŠ¨æ€æä¾›ã€‚å¯ä»¥é€šè¿‡é‡è½½resolveInstanceMethod:å’ŒresolveClassMethod:æ–¹æ³•åˆ†åˆ«æ·»åŠ å®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•å®ç°ã€‚æœ€åç”¨class_addMethodå®Œæˆæ·»åŠ ç‰¹å®šæ–¹æ³•å®ç°çš„æ“ä½œ@dynamic propertyName;//void dynamicMethodIMP(id self, SEL _cmd) { // implementation ....}@implementation MyClass+ (BOOL)resolveInstanceMethod:(SEL)aSEL{ if (aSEL == @selector(resolveThisMethodDynamically)) { //v@:è¡¨ç¤ºè¿”å›å€¼å’Œå‚æ•°ï¼Œå¯ä»¥åœ¨è‹¹æœå®˜ç½‘æŸ¥çœ‹Type Encodingç›¸å…³æ–‡æ¡£ https://developer.apple.com/library/mac/DOCUMENTATION/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html class_addMethod([self class], aSEL, (IMP) dynamicMethodIMP, &quot;v@:&quot;); return YES; } return [super resolveInstanceMethod:aSEL];}@end é‡å®šå‘æ¥æ”¶è€…å¦‚æœæ— æ³•å¤„ç†æ¶ˆæ¯ä¼šç»§ç»­è°ƒç”¨ä¸‹é¢çš„æ–¹æ³•ï¼ŒåŒæ—¶åœ¨è¿™é‡ŒRuntimeç³»ç»Ÿå®é™…ä¸Šæ˜¯ç»™äº†ä¸€ä¸ªæ›¿æ¢æ¶ˆæ¯æ¥æ”¶è€…çš„æœºä¼šï¼Œä½†æ˜¯æ›¿æ¢çš„å¯¹è±¡åƒä¸‡ä¸è¦æ˜¯selfï¼Œé‚£æ ·ä¼šè¿›å…¥æ­»å¾ªç¯ã€‚ 1234567- (id)forwardingTargetForSelector:(SEL)aSelector{ if(aSelector == @selector(mysteriousMethod:)){ return alternateObject; } return [super forwardingTargetForSelector:aSelector];} ä½¿ç”¨è¿™ä¸ªæ–¹æ³•é€šå¸¸åœ¨å¯¹è±¡å†…éƒ¨ï¼Œå¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344@interface SUTRuntimeMethodHelper : NSObject- (void)method2;@end@implementation SUTRuntimeMethodHelper- (void)method2 { NSLog(@&quot;%@, %p&quot;, self, _cmd);}@end#pragma mark -@interface SUTRuntimeMethod () { SUTRuntimeMethodHelper *_helper;}@end@implementation SUTRuntimeMethod+ (instancetype)object { return [[self alloc] init];}- (instancetype)init { self = [super init]; if (self != nil) { _helper = [[SUTRuntimeMethodHelper alloc] init]; } return self;}- (void)test { [self performSelector:@selector(method2)];}- (id)forwardingTargetForSelector:(SEL)aSelector { NSLog(@&quot;forwardingTargetForSelector&quot;); NSString *selectorString = NSStringFromSelector(aSelector); // å°†æ¶ˆæ¯è½¬å‘ç»™_helperæ¥å¤„ç† if ([selectorString isEqualToString:@&quot;method2&quot;]) { return _helper; } return [super forwardingTargetForSelector:aSelector];}@end æœ€åè¿›è¡Œè½¬å‘å¦‚æœä»¥ä¸Šä¸¤ç§éƒ½æ²¡æ³•å¤„ç†æœªçŸ¥æ¶ˆæ¯å°±éœ€è¦å®Œæ•´æ¶ˆæ¯è½¬å‘äº†ã€‚è°ƒç”¨å¦‚ä¸‹æ–¹æ³• 1234//è¿™ä¸€æ­¥æ˜¯æœ€åæœºä¼šå°†æ¶ˆæ¯è½¬å‘ç»™å…¶å®ƒå¯¹è±¡ï¼Œå¯¹è±¡ä¼šå°†æœªå¤„ç†çš„æ¶ˆæ¯ç›¸å…³çš„selectorï¼Œtargetå’Œå‚æ•°éƒ½å°è£…åœ¨anInvocationä¸­ã€‚forwardInvocation:åƒæœªçŸ¥æ¶ˆæ¯åˆ†å‘ä¸­å¿ƒï¼Œå°†æœªçŸ¥æ¶ˆæ¯è½¬å‘ç»™å…¶å®ƒå¯¹è±¡ã€‚æ³¨æ„çš„æ˜¯forwardInvocation:æ–¹æ³•åªæœ‰åœ¨æ¶ˆæ¯æ¥æ”¶å¯¹è±¡æ— æ³•æ­£å¸¸å“åº”æ¶ˆæ¯æ—¶æ‰è¢«è°ƒç”¨ã€‚- (void)forwardInvocation:(NSInvocation *)anInvocation//å¿…é¡»é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œæ¶ˆæ¯è½¬å‘ä½¿ç”¨è¿™ä¸ªæ–¹æ³•è·å¾—çš„ä¿¡æ¯åˆ›å»ºNSInvocationå¯¹è±¡ã€‚- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector èŒƒä¾‹ 12345678910111213141516- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector { NSMethodSignature *signature = [super methodSignatureForSelector:aSelector]; if (!signature) { if ([SUTRuntimeMethodHelper instancesRespondToSelector:aSelector]) { signature = [SUTRuntimeMethodHelper instanceMethodSignatureForSelector:aSelector]; } } return signature;}- (void)forwardInvocation:(NSInvocation *)anInvocation { if ([SUTRuntimeMethodHelper instancesRespondToSelector:anInvocation.selector]) { [anInvocation invokeWithTarget:_helper]; }} è½¬å‘å’Œå¤šç»§æ‰¿è½¬å‘å’Œç»§æ‰¿ç›¸ä¼¼ï¼Œä¸€ä¸ªObjectæŠŠæ¶ˆæ¯è½¬å‘å‡ºå»å°±å¥½åƒå®ƒç»§æ‰¿äº†å¦ä¸€ä¸ªObjectçš„æ–¹æ³•ä¸€æ ·ã€‚ Messageæ¶ˆæ¯çš„å‚è€ƒæ–‡ç«  Message forwarding https://mikeash.com/pyblog/friday-qa-2009-03-27-objective-c-message-forwarding.html Objective-c messaging https://www.mikeash.com/pyblog/friday-qa-2009-03-20-objective-c-messaging.html The faster objc_msgSend https://www.mulle-kybernetik.com/artikel/Optimization/opti-9.html Method Swizzlingæ˜¯æ”¹å˜ä¸€ä¸ªselectorå®é™…å®ç°çš„æŠ€æœ¯ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹selectorå¯¹åº”çš„å‡½æ•°æ¥ä¿®æ”¹Methodçš„å®ç°ã€‚å‰é¢çš„æ¶ˆæ¯è½¬å‘å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯éœ€è¦èƒ½å¤Ÿä¿®æ”¹å¯¹åº”ç±»çš„æºç ï¼Œä½†æ˜¯å¯¹äºæœ‰äº›ç±»æ— æ³•ä¿®æ”¹å…¶æºç æ—¶åˆè¦æ›´æ”¹å…¶æ–¹æ³•å®ç°æ—¶å¯ä»¥ä½¿ç”¨Method Swizzlingï¼Œé€šè¿‡é‡æ–°æ˜ å°„æ–¹æ³•æ¥è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯è·Ÿæ¶ˆæ¯è½¬å‘æ¯”èµ·æ¥è°ƒè¯•ä¼šå›°éš¾ã€‚ ä½¿ç”¨method swizzlingéœ€è¦æ³¨æ„çš„é—®é¢˜ Swizzlingåº”è¯¥æ€»åœ¨+loadä¸­æ‰§è¡Œï¼šObjective-Cåœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ç±»çš„ä¸¤ä¸ªæ–¹æ³•+loadå’Œ+initializeã€‚+loadä¼šåœ¨ç±»åˆå§‹åŠ è½½æ—¶è°ƒç”¨ï¼Œå’Œ+initializeæ¯”è¾ƒ+loadèƒ½ä¿è¯åœ¨ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¢«åŠ è½½ Swizzlingåº”è¯¥æ€»æ˜¯åœ¨dispatch_onceä¸­æ‰§è¡Œï¼šswizzlingä¼šæ”¹å˜å…¨å±€çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶é‡‡å–ä¸€äº›é¢„é˜²æªæ–½ï¼Œä½¿ç”¨dispatch_onceå°±èƒ½å¤Ÿç¡®ä¿ä»£ç ä¸ç®¡æœ‰å¤šå°‘çº¿ç¨‹éƒ½åªè¢«æ‰§è¡Œä¸€æ¬¡ã€‚è¿™å°†æˆä¸ºmethod swizzlingçš„æœ€ä½³å®è·µã€‚ Selectorï¼ŒMethodå’ŒImplementationï¼šè¿™å‡ ä¸ªä¹‹é—´å…³ç³»å¯ä»¥è¿™æ ·ç†è§£ï¼Œä¸€ä¸ªç±»ç»´æŠ¤ä¸€ä¸ªè¿è¡Œæ—¶å¯æ¥æ”¶çš„æ¶ˆæ¯åˆ†å‘è¡¨ï¼Œåˆ†å‘è¡¨ä¸­æ¯ä¸ªå…¥å£æ˜¯ä¸€ä¸ªMethodï¼Œå…¶ä¸­keyæ˜¯ä¸€ä¸ªç‰¹å®šçš„åç§°ï¼ŒåŠSELï¼Œä¸å…¶å¯¹åº”çš„å®ç°æ˜¯IMPå³æŒ‡å‘åº•å±‚Cå‡½æ•°çš„æŒ‡é’ˆã€‚ ä¸¾ä¾‹è¯´æ˜å¦‚ä½•ä½¿ç”¨Method Swizzlingå¯¹ä¸€ä¸ªç±»ä¸­æ³¨å…¥ä¸€äº›æˆ‘ä»¬çš„æ–°çš„æ“ä½œã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142#import &lt;objc/runtime.h&gt;@implementation UIViewController (Tracking)+ (void)load { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ Class class = [self class]; // When swizzling a class method, use the following: // Class class = object_getClass((id)self); //é€šè¿‡method swizzlingä¿®æ”¹äº†UIViewControllerçš„@selector(viewWillAppear:)çš„æŒ‡é’ˆä½¿å…¶æŒ‡å‘äº†è‡ªå®šä¹‰çš„xxx_viewWillAppear SEL originalSelector = @selector(viewWillAppear:); SEL swizzledSelector = @selector(xxx_viewWillAppear:); Method originalMethod = class_getInstanceMethod(class, originalSelector); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); //å¦‚æœç±»ä¸­ä¸å­˜åœ¨è¦æ›¿æ¢çš„æ–¹æ³•ï¼Œå°±å…ˆç”¨class_addMethodå’Œclass_replaceMethodå‡½æ•°æ·»åŠ å’Œæ›¿æ¢ä¸¤ä¸ªæ–¹æ³•å®ç°ã€‚ä½†å¦‚æœå·²ç»æœ‰äº†è¦æ›¿æ¢çš„æ–¹æ³•ï¼Œå°±è°ƒç”¨method_exchangeImplementationså‡½æ•°äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„Implementationã€‚ if (didAddMethod) { class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); } else { method_exchangeImplementations(originalMethod, swizzledMethod); } });}#pragma mark - Method Swizzling- (void)xxx_viewWillAppear:(BOOL)animated { [self xxx_viewWillAppear:animated]; NSLog(@&quot;viewWillAppear: %@&quot;, self);}@end method_exchangeImplementationsåšçš„äº‹æƒ…å’Œå¦‚ä¸‹ä»£ç æ˜¯ä¸€æ ·çš„ 1234IMP imp1 = method_getImplementation(m1);IMP imp2 = method_getImplementation(m2);method_setImplementation(m1, imp2);method_setImplementation(m2, imp1); å¦ä¸€ç§Method Swizzlingçš„å®ç° 123456789101112131415- (void)replacementReceiveMessage:(const struct BInstantMessage *)arg1 { NSLog(@&quot;arg1 is %@&quot;, arg1); [self replacementReceiveMessage:arg1];}+ (void)load { SEL originalSelector = @selector(ReceiveMessage:); SEL overrideSelector = @selector(replacementReceiveMessage:); Method originalMethod = class_getInstanceMethod(self, originalSelector); Method overrideMethod = class_getInstanceMethod(self, overrideSelector); if (class_addMethod(self, originalSelector, method_getImplementation(overrideMethod), method_getTypeEncoding(overrideMethod))) { class_replaceMethod(self, overrideSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); } else { method_exchangeImplementations(originalMethod, overrideMethod); }} è¿™é‡Œæœ‰å‡ ä¸ªå…³äºMethod Swizzlingçš„èµ„æºå¯ä»¥å‚è€ƒ How do I implement method swizzling? https://stackoverflow.com/questions/5371601/how-do-i-implement-method-swizzling Method Swizzling https://nshipster.com/method-swizzling/ What are the Dangers of Method Swizzling in Objective C? https://stackoverflow.com/questions/5339276/what-are-the-dangers-of-method-swizzling-in-objective-c JRSwizzle https://github.com/rentzsch/jrswizzle Protocolå’ŒCategoryåŸºç¡€æ•°æ®ç±»å‹CategoryæŒ‡å‘åˆ†ç±»çš„ç»“æ„ä½“çš„æŒ‡é’ˆ 123456789typedef struct objc_category *Category;struct objc_category { char *category_name OBJC2_UNAVAILABLE; // åˆ†ç±»å char *class_name OBJC2_UNAVAILABLE; // åˆ†ç±»æ‰€å±çš„ç±»å struct objc_method_list *instance_methods OBJC2_UNAVAILABLE; // å®ä¾‹æ–¹æ³•åˆ—è¡¨ struct objc_method_list *class_methods OBJC2_UNAVAILABLE; // ç±»æ–¹æ³•åˆ—è¡¨ï¼ŒMeta Classæ–¹æ³•åˆ—è¡¨çš„å­é›† struct objc_protocol_list *protocols OBJC2_UNAVAILABLE; // åˆ†ç±»æ‰€å®ç°çš„åè®®åˆ—è¡¨} Categoryé‡Œé¢çš„æ–¹æ³•åŠ è½½è¿‡ç¨‹ï¼Œobjcæºç ä¸­æ‰¾åˆ°objc-os.mmï¼Œå‡½æ•°_objc_initå°±æ˜¯runtimeçš„åŠ è½½å…¥å£ç”±libSystemè°ƒç”¨ï¼Œå¼€å§‹åˆå§‹åŒ–ï¼Œä¹‹åobjc-runtime-new.mmé‡Œçš„map_imagesä¼šåŠ è½½mapåˆ°å†…å­˜ï¼Œ_read_imageså¼€å§‹åˆå§‹åŒ–è¿™ä¸ªmapï¼Œè¿™æ—¶ä¼šloadæ‰€æœ‰Classï¼ŒProtocolå’ŒCategoryï¼ŒNSObjectçš„+loadæ–¹æ³•å°±æ˜¯è¿™ä¸ªæ—¶å€™è°ƒç”¨çš„ã€‚ä¸‹é¢æ˜¯åŠ è½½ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172// Discover categories.for (EACH_HEADER) { category_t **catlist = _getObjc2CategoryList(hi, &amp;count); for (i = 0; i &lt; count; i++) { category_t *cat = catlist[i]; Class cls = remapClass(cat-&gt;cls); if (!cls) { // Category&apos;s target class is missing (probably weak-linked). // Disavow any knowledge of this category. catlist[i] = nil; if (PrintConnecting) { _objc_inform(&quot;CLASS: IGNORING category \\?\\?\\?(%s) %p with &quot; &quot;missing weak-linked target class&quot;, cat-&gt;name, cat); } continue; } // Process this category. // First, register the category with its target class. // Then, rebuild the class&apos;s method lists (etc) if // the class is realized. BOOL classExists = NO; if (cat-&gt;instanceMethods || cat-&gt;protocols || cat-&gt;instanceProperties) { addUnattachedCategoryForClass(cat, cls, hi); if (cls-&gt;isRealized()) { remethodizeClass(cls); classExists = YES; } if (PrintConnecting) { _objc_inform(&quot;CLASS: found category -%s(%s) %s&quot;, cls-&gt;nameForLogging(), cat-&gt;name, classExists ? &quot;on existing class&quot; : &quot;&quot;); } } if (cat-&gt;classMethods || cat-&gt;protocols /* || cat-&gt;classProperties */) { addUnattachedCategoryForClass(cat, cls-&gt;ISA(), hi); if (cls-&gt;ISA()-&gt;isRealized()) { remethodizeClass(cls-&gt;ISA()); } if (PrintConnecting) { _objc_inform(&quot;CLASS: found category +%s(%s)&quot;, cls-&gt;nameForLogging(), cat-&gt;name); } } }}//è°ƒç”¨remethodizeClassæ–¹æ³•ï¼Œåœ¨å…¶å®ç°é‡Œè°ƒç”¨attachCategoryMethodsstatic voidattachCategoryMethods(Class cls, category_list *cats, bool flushCaches){ if (!cats) return; if (PrintReplacedMethods) printReplacements(cls, cats); bool isMeta = cls-&gt;isMetaClass(); method_list_t **mlists = (method_list_t **) _malloc_internal(cats-&gt;count * sizeof(*mlists)); // Count backwards through cats to get newest categories first int mcount = 0; int i = cats-&gt;count; BOOL fromBundle = NO; while (i--) { method_list_t *mlist = cat_method_list(cats-&gt;list[i].cat, isMeta); if (mlist) { mlists[mcount++] = mlist; fromBundle |= cats-&gt;list[i].fromBundle; } } attachMethodLists(cls, mlists, mcount, NO, fromBundle, flushCaches); _free_internal(mlists);} ç¤ºä¾‹ï¼Œä¸‹é¢çš„ä»£ç ä¼šç¼–è¯‘é”™è¯¯ï¼ŒRuntime Crashè¿˜æ˜¯ä¼šæ­£å¸¸è¾“å‡º 12345678910111213141516171819@interface NSObject (Sark)+ (void)foo;@end@implementation NSObject (Sark)- (void)foo{ NSLog(@&quot;IMP: -[NSObject(Sark) foo]&quot;);}@endint main(int argc, const char * argv[]) { @autoreleasepool { [NSObject foo]; [[NSObject new] foo]; } return 0;}//ç»“æœï¼Œæ­£å¸¸è¾“å‡ºç»“æœå¦‚ä¸‹2014-11-06 13:11:46.694 Test[14872:1110786] IMP: -[NSObject(Sark) foo]2014-11-06 13:11:46.695 Test[14872:1110786] IMP: -[NSObject(Sark) foo] objc runtimeåŠ è½½åNSObjectçš„Sark Categoryè¢«åŠ è½½ï¼Œå¤´æ–‡ä»¶+(void)fooæ²¡æœ‰IMPï¼Œåªä¼šå‡ºç°ä¸€ä¸ªwarningã€‚è¢«åŠ åˆ°Classçš„Method listé‡Œçš„æ–¹æ³•åªæœ‰-(void)fooï¼ŒMeta Classçš„æ–¹æ³•åˆ—è¡¨é‡Œæ²¡æœ‰ã€‚ æ‰§è¡Œ[NSObject foo]æ—¶ï¼Œä¼šåœ¨Meta Classçš„Method listé‡Œæ‰¾ï¼Œæ‰¾ä¸ç€å°±ç»§ç»­å¾€super classé‡Œæ‰¾ï¼ŒNSObject Meta Clasçš„super classæ˜¯NSObjectæœ¬èº«ï¼Œè¿™æ—¶åœ¨NSObjectçš„Method listé‡Œå°±æœ‰fooè¿™ä¸ªæ–¹æ³•äº†ï¼Œèƒ½å¤Ÿæ­£å¸¸è¾“å‡ºã€‚ æ‰§è¡Œ[[NSObject new] foo]å°±ç®€å•çš„å¤šäº†ï¼Œ[NSObject new]ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œå®ä¾‹çš„Method listæ˜¯æœ‰fooæ–¹æ³•çš„ï¼Œäºæ˜¯æ­£å¸¸è¾“å‡ºã€‚ ProtocolProtocolå…¶å®å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ç»“æ„ä½“ 1typedef struct objc_object Protocol; æ“ä½œå‡½æ•°Categoryæ“ä½œå‡½æ•°ä¿¡æ¯éƒ½åŒ…å«åœ¨objc_classä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡objc_classçš„æ“ä½œå‡½æ•°æ¥è·å–åˆ†ç±»çš„æ“ä½œå‡½æ•°ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142@interface RuntimeCategoryClass : NSObject- (void)method1;@end@interface RuntimeCategoryClass (Category)- (void)method2;@end@implementation RuntimeCategoryClass- (void)method1 {}@end@implementation RuntimeCategoryClass (Category)- (void)method2 {}@end#pragma mark -NSLog(@&quot;æµ‹è¯•objc_classä¸­çš„æ–¹æ³•åˆ—è¡¨æ˜¯å¦åŒ…å«åˆ†ç±»ä¸­çš„æ–¹æ³•&quot;);unsigned int outCount = 0;Method *methodList = class_copyMethodList(RuntimeCategoryClass.class, &amp;outCount);for (int i = 0; i &lt; outCount; i++) { Method method = methodList[i]; const char *name = sel_getName(method_getName(method)); NSLog(@&quot;RuntimeCategoryClass&apos;s method: %s&quot;, name); if (strcmp(name, sel_getName(@selector(method2)))) { NSLog(@&quot;åˆ†ç±»æ–¹æ³•method2åœ¨objc_classçš„æ–¹æ³•åˆ—è¡¨ä¸­&quot;); }}//è¾“å‡º2014-11-08 10:36:39.213 [561:151847] æµ‹è¯•objc_classä¸­çš„æ–¹æ³•åˆ—è¡¨æ˜¯å¦åŒ…å«åˆ†ç±»ä¸­çš„æ–¹æ³•2014-11-08 10:36:39.215 [561:151847] RuntimeCategoryClass&apos;s method: method22014-11-08 10:36:39.215 [561:151847] RuntimeCategoryClass&apos;s method: method12014-11-08 10:36:39.215 [561:151847] åˆ†ç±»æ–¹æ³•method2åœ¨objc_classçš„æ–¹æ³•åˆ—è¡¨ä¸­ Runtimeæä¾›äº†Protocolçš„ä¸€ç³»åˆ—å‡½æ•°æ“ä½œï¼Œå‡½æ•°åŒ…æ‹¬ 123456789101112131415161718192021222324252627282930// è¿”å›æŒ‡å®šçš„åè®®Protocol * objc_getProtocol ( const char *name );// è·å–è¿è¡Œæ—¶æ‰€çŸ¥é“çš„æ‰€æœ‰åè®®çš„æ•°ç»„Protocol ** objc_copyProtocolList ( unsigned int *outCount );// åˆ›å»ºæ–°çš„åè®®å®ä¾‹Protocol * objc_allocateProtocol ( const char *name );// åœ¨è¿è¡Œæ—¶ä¸­æ³¨å†Œæ–°åˆ›å»ºçš„åè®®void objc_registerProtocol ( Protocol *proto ); //åˆ›å»ºä¸€ä¸ªæ–°åè®®åå¿…é¡»ä½¿ç”¨è¿™ä¸ªè¿›è¡Œæ³¨å†Œè¿™ä¸ªæ–°åè®®ï¼Œä½†æ˜¯æ³¨å†Œåä¸èƒ½å¤Ÿå†ä¿®æ”¹å’Œæ·»åŠ æ–°æ–¹æ³•ã€‚// ä¸ºåè®®æ·»åŠ æ–¹æ³•void protocol_addMethodDescription ( Protocol *proto, SEL name, const char *types, BOOL isRequiredMethod, BOOL isInstanceMethod );// æ·»åŠ ä¸€ä¸ªå·²æ³¨å†Œçš„åè®®åˆ°åè®®ä¸­void protocol_addProtocol ( Protocol *proto, Protocol *addition );// ä¸ºåè®®æ·»åŠ å±æ€§void protocol_addProperty ( Protocol *proto, const char *name, const objc_property_attribute_t *attributes, unsigned int attributeCount, BOOL isRequiredProperty, BOOL isInstanceProperty );// è¿”å›åè®®åconst char * protocol_getName ( Protocol *p );// æµ‹è¯•ä¸¤ä¸ªåè®®æ˜¯å¦ç›¸ç­‰BOOL protocol_isEqual ( Protocol *proto, Protocol *other );// è·å–åè®®ä¸­æŒ‡å®šæ¡ä»¶çš„æ–¹æ³•çš„æ–¹æ³•æè¿°æ•°ç»„struct objc_method_description * protocol_copyMethodDescriptionList ( Protocol *p, BOOL isRequiredMethod, BOOL isInstanceMethod, unsigned int *outCount );// è·å–åè®®ä¸­æŒ‡å®šæ–¹æ³•çš„æ–¹æ³•æè¿°struct objc_method_description protocol_getMethodDescription ( Protocol *p, SEL aSel, BOOL isRequiredMethod, BOOL isInstanceMethod );// è·å–åè®®ä¸­çš„å±æ€§åˆ—è¡¨objc_property_t * protocol_copyPropertyList ( Protocol *proto, unsigned int *outCount );// è·å–åè®®çš„æŒ‡å®šå±æ€§objc_property_t protocol_getProperty ( Protocol *proto, const char *name, BOOL isRequiredProperty, BOOL isInstanceProperty );// è·å–åè®®é‡‡ç”¨çš„åè®®Protocol ** protocol_copyProtocolList ( Protocol *proto, unsigned int *outCount );// æŸ¥çœ‹åè®®æ˜¯å¦é‡‡ç”¨äº†å¦ä¸€ä¸ªåè®®BOOL protocol_conformsToProtocol ( Protocol *proto, Protocol *other ); Blockruntimeä¸­ä¸€äº›æ”¯æŒblockæ“ä½œçš„å‡½æ•° 12345678// åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå‡½æ•°çš„æŒ‡é’ˆï¼Œè¯¥å‡½æ•°è°ƒç”¨æ—¶ä¼šè°ƒç”¨ç‰¹å®šçš„blockIMP imp_implementationWithBlock ( id block );// è¿”å›ä¸IMP(ä½¿ç”¨imp_implementationWithBlockåˆ›å»ºçš„)ç›¸å…³çš„blockid imp_getBlock ( IMP anImp );// è§£é™¤blockä¸IMP(ä½¿ç”¨imp_implementationWithBlockåˆ›å»ºçš„)çš„å…³è”å…³ç³»ï¼Œå¹¶é‡Šæ”¾blockçš„æ‹·è´BOOL imp_removeBlock ( IMP anImp ); æµ‹è¯•ä»£ç  1234567891011121314151617@interface MyRuntimeBlock : NSObject@end@implementation MyRuntimeBlock@endIMP imp = imp_implementationWithBlock(^(id obj, NSString *str) { NSLog(@&quot;%@&quot;, str);});class_addMethod(MyRuntimeBlock.class, @selector(testBlock:), imp, &quot;v@:@&quot;);MyRuntimeBlock *runtime = [[MyRuntimeBlock alloc] init];[runtime performSelector:@selector(testBlock:) withObject:@&quot;hello world!&quot;];//ç»“æœ2014-11-09 14:03:19.779 [1172:395446] hello world! Runtimeçš„åº”ç”¨è·å–ç³»ç»Ÿæä¾›çš„åº“ç›¸å…³ä¿¡æ¯ä¸»è¦å‡½æ•° 12345678// è·å–æ‰€æœ‰åŠ è½½çš„Objective-Cæ¡†æ¶å’ŒåŠ¨æ€åº“çš„åç§°const char ** objc_copyImageNames ( unsigned int *outCount );// è·å–æŒ‡å®šç±»æ‰€åœ¨åŠ¨æ€åº“const char * class_getImageName ( Class cls );// è·å–æŒ‡å®šåº“æˆ–æ¡†æ¶ä¸­æ‰€æœ‰ç±»çš„ç±»åconst char ** objc_copyClassNamesForImage ( const char *image, unsigned int *outCount ); é€šè¿‡è¿™äº›å‡½æ•°å°±èƒ½å¤Ÿè·å–æŸä¸ªç±»æ‰€æœ‰çš„åº“ï¼Œä»¥åŠæŸä¸ªåº“ä¸­åŒ…å«å“ªäº›ç±» 123456789101112131415161718192021NSLog(@&quot;è·å–æŒ‡å®šç±»æ‰€åœ¨åŠ¨æ€åº“&quot;);NSLog(@&quot;UIView&apos;s Framework: %s&quot;, class_getImageName(NSClassFromString(@&quot;UIView&quot;)));NSLog(@&quot;è·å–æŒ‡å®šåº“æˆ–æ¡†æ¶ä¸­æ‰€æœ‰ç±»çš„ç±»å&quot;);const char ** classes = objc_copyClassNamesForImage(class_getImageName(NSClassFromString(@&quot;UIView&quot;)), &amp;outCount);for (int i = 0; i &lt; outCount; i++) { NSLog(@&quot;class name: %s&quot;, classes[i]);}//ç»“æœ2014-11-08 12:57:32.689 [747:184013] è·å–æŒ‡å®šç±»æ‰€åœ¨åŠ¨æ€åº“2014-11-08 12:57:32.690 [747:184013] UIView&apos;s Framework: /System/Library/Frameworks/UIKit.framework/UIKit2014-11-08 12:57:32.690 [747:184013] è·å–æŒ‡å®šåº“æˆ–æ¡†æ¶ä¸­æ‰€æœ‰ç±»çš„ç±»å2014-11-08 12:57:32.691 [747:184013] class name: UIKeyboardPredictiveSettings2014-11-08 12:57:32.691 [747:184013] class name: _UIPickerViewTopFrame2014-11-08 12:57:32.691 [747:184013] class name: _UIOnePartImageView2014-11-08 12:57:32.692 [747:184013] class name: _UIPickerViewSelectionBar2014-11-08 12:57:32.692 [747:184013] class name: _UIPickerWheelView2014-11-08 12:57:32.692 [747:184013] class name: _UIPickerViewTestParameters...... å¯¹Appçš„ç”¨æˆ·è¡Œä¸ºè¿›è¡Œè¿½è¸ªå°±æ˜¯ç”¨æˆ·ç‚¹å‡»æ—¶æŠŠäº‹ä»¶è®°å½•ä¸‹æ¥ã€‚ä¸€èˆ¬æ¯”è¾ƒåšæ³•å°±æ˜¯åœ¨viewDidAppearé‡Œè®°å½•äº‹ä»¶ï¼Œè¿™æ ·ä¼šè®©è¿™æ ·è®°å½•äº‹ä»¶çš„ä»£ç éå¸ƒæ•´ä¸ªé¡¹ç›®ä¸­ã€‚ç»§æ‰¿æˆ–ç±»åˆ«ä¹Ÿä¼šæœ‰é—®é¢˜ã€‚è¿™æ—¶åˆ©ç”¨Method SwizzlingæŠŠä¸€ä¸ªæ–¹æ³•çš„å®ç°å’Œå¦ä¸€ä¸ªæ–¹æ³•çš„å®ç°è¿›è¡Œæ›¿æ¢ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738//å…ˆå®šä¹‰ä¸€ä¸ªç±»åˆ«ï¼Œæ·»åŠ è¦Swizzledçš„æ–¹æ³•@implementation UIViewController (Logging)- (void)swizzled_viewDidAppear:(BOOL)animated{ // call original implementation [self swizzled_viewDidAppear:animated]; // Logging [Logging logWithEventName:NSStringFromClass([self class])];}//æ¥ä¸‹æ¥å®ç°swizzleæ–¹æ³•@implementation UIViewController (Logging)void swizzleMethod(Class class, SEL originalSelector, SEL swizzledSelector) { // the method might not exist in the class, but in its superclass Method originalMethod = class_getInstanceMethod(class, originalSelector); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); // class_addMethod will fail if original method already exists BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); // the method doesnâ€™t exist and we just added one if (didAddMethod) { class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); } else { method_exchangeImplementations(originalMethod, swizzledMethod); }}//æœ€åè¦ç¡®ä¿åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™è°ƒç”¨swizzleMethodæ–¹æ³•åœ¨ä¹‹å‰çš„UIViewControllerçš„Loggingç±»åˆ«é‡Œæ·»åŠ +load:æ–¹æ³•ï¼Œç„¶ååœ¨+load:é‡ŒæŠŠviewDidAppearæ›¿æ¢æ‰@implementation UIViewController (Logging)+ (void)load{ swizzleMethod([self class], @selector(viewDidAppear:), @selector(swizzled_viewDidAppear:));}//æ›´ç®€åŒ–ç›´æ¥ç”¨æ–°çš„IMPå–ä»£åŸIMPï¼Œä¸æ˜¯æ›¿æ¢ï¼Œåªéœ€è¦æœ‰å…¨å±€çš„å‡½æ•°æŒ‡é’ˆæŒ‡å‘åŸIMPå³å¯ã€‚void (gOriginalViewDidAppear)(id, SEL, BOOL);void newViewDidAppear(UIViewController *self, SEL _cmd, BOOL animated){ // call original implementation gOriginalViewDidAppear(self, _cmd, animated); // Logging [Logging logWithEventName:NSStringFromClass([self class])];}+ (void)load{ Method originalMethod = class_getInstanceMethod(self, @selector(viewDidAppear:)); gOriginalViewDidAppear = (void *)method_getImplementation(originalMethod); if(!class_addMethod(self, @selector(viewDidAppear:), (IMP) newViewDidAppear, method_getTypeEncoding(originalMethod))) { method_setImplementation(originalMethod, (IMP) newViewDidAppear); }} é€šè¿‡Method Swizzlingå¯ä»¥æŠŠäº‹ä»¶ä»£ç æˆ–Loggingï¼ŒAuthenticationï¼ŒCachingç­‰è·Ÿä¸»è¦ä¸šåŠ¡é€»è¾‘ä»£ç è§£è€¦ã€‚è¿™ç§å¤„ç†æ–¹å¼å«åšCross Cutting Concernshttps://en.wikipedia.org/wiki/Cross-cutting_concern ç”¨Method SwizzlingåŠ¨æ€ç»™æŒ‡å®šçš„æ–¹æ³•æ·»åŠ ä»£ç è§£å†³Cross Cutting Concernsçš„ç¼–ç¨‹æ–¹å¼å«Aspect Oriented Programming https://en.wikipedia.org/wiki/Aspect-oriented_programming ç›®å‰æœ‰äº›ç¬¬ä¸‰æ–¹åº“å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨AOPï¼Œæ¯”å¦‚Aspects https://github.com/steipete/Aspects è¿™é‡Œæ˜¯ä½¿ç”¨Aspectsçš„èŒƒä¾‹https://github.com/okcomp/AspectsDemoming1016","link":"/program/ï£¿/objc-runtime/"},{"title":"UICollectionView","text":"Layout Objectsä½¿ç”¨UICollectionViewFlowLayoutç±»è¿›è¡Œå…·ä½“çš„å¸ƒå±€å®ç°ï¼Œç±»çš„å®˜æ–¹æ–‡æ¡£è¯´æ˜ï¼šhttps://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewFlowLayout_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionViewFlowLayout,è¿›ä¸€æ­¥å®šåˆ¶å¯å‚è€ƒå®˜æ–¹è¿™ä¸ªæ–‡æ¡£ï¼šhttps://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/UsingtheFlowLayout/UsingtheFlowLayout.html#//apple_ref/doc/uid/TP40012334-CH3-SW4 Cellså’Œå…¶å®ƒViewcollection viewç®¡ç†è€…cellsï¼Œsupplementary viewså’Œdecoration views cellsï¼šå’Œtableviewçš„cellç±»ä¼¼ã€‚ Supplementary viewsï¼šç›¸å½“äºtableviewçš„section headerå’Œfooter viewsï¼Œä¸åŒçš„æ˜¯æ•°é‡å’Œä½ç½®ç”±å¸ƒå±€æ§åˆ¶ Decoration viewsï¼šè£…é¥°ç”¨ åŸºäºå†…å®¹çš„å¸ƒå±€è®¡ç®—è‡ªå®šä¹‰å¸ƒå±€å­ç±»é‡å†™çš„æ–¹æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewLayout_class/Reference/Reference.html collectionViewContentSize1234567891011- (CGSize)collectionViewContentSize{ //ä¸èƒ½æ°´å¹³æ»šåŠ¨ CGFloat contentWidth = self.collectionView.bounds.size.width; //å‚ç›´æ»šåŠ¨æ˜¾ç¤ºå®Œæ•´æ•°æ® CGFloat contentHeight = DayHeaderHeight + (HeightPerHour * HoursPerDay); CGSize contentSize = CGSizeMake(contentWidth, contentHeight); return contentSize;} å¸ƒå±€ä¸­æœ€é‡è¦çš„æ–¹æ³•layoutAttributesForElementsInRect:12345678910111213141516171819202122232425262728293031- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect{ NSMutableArray *layoutAttributes = [NSMutableArray array]; // Cells // We call a custom helper method -indexPathsOfItemsInRect: here // which computes the index paths of the cells that should be included // in rect. NSArray *visibleIndexPaths = [self indexPathsOfItemsInRect:rect]; for (NSIndexPath *indexPath in visibleIndexPaths) { UICollectionViewLayoutAttributes *attributes = [self layoutAttributesForItemAtIndexPath:indexPath]; [layoutAttributes addObject:attributes]; } // Supplementary views NSArray *dayHeaderViewIndexPaths = [self indexPathsOfDayHeaderViewsInRect:rect]; for (NSIndexPath *indexPath in dayHeaderViewIndexPaths) { UICollectionViewLayoutAttributes *attributes = [self layoutAttributesForSupplementaryViewOfKind:@â€œDayHeaderView&quot; atIndexPath:indexPath]; [layoutAttributes addObject:attributes]; } NSArray *hourHeaderViewIndexPaths = [self indexPathsOfHourHeaderViewsInRect:rect]; for (NSIndexPath *indexPath in hourHeaderViewIndexPaths) { UICollectionViewLayoutAttributes *attributes = [self layoutAttributesForSupplementaryViewOfKind:@&quot;HourHeaderView&quot;atIndexPath:indexPath]; [layoutAttributes addObject:attributes]; } return layoutAttributes;} layoutAttributesForItemAtIndexPath:123456789- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath{ CalendarDataSource *dataSource = self.collectionView.dataSource; id event = [dataSource eventAtIndexPath:indexPath]; UICollectionViewLayoutAttributes *attributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath]; attributes.frame = [self frameForEvent:event]; return attributes;} shouldInvalidateLayoutForBoundsChange:12345678- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds{ CGRect oldBounds = self.collectionView.bounds; if (CGRectGetWidth(newBounds) != CGRectGetWidth(oldBounds)) { return YES; } return NO;} æ’å…¥ï¼Œåˆ é™¤å’Œå¸ƒå±€é—´åˆ‡æ¢çš„åŠ¨ç”»æ’å…¥ï¼Œåˆ é™¤ initialLayoutAttributesForAppearingItemAtIndexPath: initialLayoutAttributesForAppearingSupplementaryElementOfKind:atIndexPath: initialLayoutAttributesForAppearingDecorationElementOfKind:atIndexPath: finalLayoutAttributesForDisappearingItemAtIndexPath: finalLayoutAttributesForDisappearingSupplementaryElementOfKind:atIndexPath: finalLayoutAttributesForDisappearingDecorationElementOfKind:atIndexPath:å‘é€setCollectionViewLayout:animated:æ¶ˆæ¯ï¼Œcollection viewä¼šä¸ºcellsåœ¨æ–°å¸ƒå±€å‚æ•°ï¼ŒåŠ¨æ€å°†æ¯ä¸ªcellä»æ—§å˜åˆ°æ–°ã€‚ èŒƒä¾‹ è‡ªå®šä¹‰å¸ƒå±€èŒƒä¾‹ï¼šhttps://github.com/objcio/issue-3-collection-view-layouts","link":"/program/ï£¿/uicollectionview/"},{"title":"å¤§è¯Socket","text":"è¦äº†è§£Socketé¦–å…ˆè¦äº†è§£ TCPï¼Œä»–ä»¬ä¸¤ä¸ªçš„å…³ç³»å¯ä»¥è¯´æ˜¯ï¼š Socket æ˜¯æŠ½è±¡å‡ºæ¥çš„ä½¿ç”¨ TCP/UDP çš„æ¦‚å¿µæ¨¡å‹ï¼Œå±è”½æ‰äº†æ™¦æ¶©çš„åº•å±‚åè®®çš„å®ç°ï¼Œæ˜¯ä¸€ä¸ªæ¥å£ã€‚ æœ€è¿‘çœ‹åˆ°äº†ä¸€å¼ å¦‚æ­¤è¯¦ç»†çš„ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Œæ‰“å°ä¸€å¼ æ”¾å·¥ä½ï¼æ‘˜è‡ªã€Šå›¾è§£ç½‘ç»œç¡¬ä»¶ã€‹249é¡µ å›¾5-11 ã€ŠTCPçš„ä¸‰æ¬¡æ¡æ‰‹ã€‹æ‰€è°“çš„Xã€X+1ã€Yã€Y+1å¯¹åº”äºä½ æ”¶åˆ°äº†æ²¡ã€æˆ‘æ”¶åˆ°äº†ã€ä½ æ”¶åˆ°â€™æˆ‘æ”¶åˆ°â€™æ²¡ã€æˆ‘æ”¶åˆ°äº†ä¸ç”¨å›äº†,ä¸ºä»€ä¹ˆç”¨+1è¡¨ç¤ºå‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºå‰ä¸¤ä¸ªæŒ‡çš„æ˜¯ä¸€ä¸ªäººï¼Œåä¸¤ä¸ªæŒ‡çš„æ˜¯ä¸€ä¸ªäººã€‚å››ç»„æ˜¯ä¸‰ä¸ªè¿æ¥ï¼Œæ¯ä¸ªè¿æ¥çš„åºå·ä¾æ¬¡æ˜¯Xã€Yã€Zã€‚ TCPçš„è¿æ¥è¿‡ç¨‹å°±åƒä¸¤ä¸ªäººçš„å¯¹è¯ï¼š æƒ³è±¡ä¸€ä¸‹ï¼Œæ¯æ¬¡è¿™ä¿©å„¿äººèŠå¤©ï¼Œéƒ½è¦åƒä¸‹é¢è¿™æ ·ä¸€æ¥ä¸€å›ä¸‰æ¬¡ï¼Œæ¥ä¸‹æ¥ä»–ä»¬æ‰èƒ½ã€å¥½å¥½èŠå¤©äº†ã€‚ã€‚ã€‚ã€‘çœŸæ˜¯æœ‰ç‚¹â€œä½œâ€ã€‚ã€‚ã€‚ æˆ‘æ˜¯å®¢æˆ·ç«¯ï¼Œæ ‘æ‡’æ˜¯æœåŠ¡ç«¯ï¼Œæ¼”ç¤ºä¸‰æ¬¡æ¡æ‰‹ã€æ•°æ®ä¼ è¾“æ­¥éª¤å…¶å®æœ‰ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ å› ä¸ºå½“Serverç«¯æ”¶åˆ°Clientç«¯çš„SYNè¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œå¯ä»¥ç›´æ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚å…¶ä¸­ACKæŠ¥æ–‡æ˜¯ç”¨æ¥åº”ç­”çš„ï¼ŒSYNæŠ¥æ–‡æ˜¯ç”¨æ¥åŒæ­¥çš„ã€‚ä½†æ˜¯å…³é—­è¿æ¥æ—¶ï¼Œå½“Serverç«¯æ”¶åˆ°FINæŠ¥æ–‡æ—¶ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹å³å…³é—­SOCKETï¼Œæ‰€ä»¥åªèƒ½å…ˆå›å¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰Clientç«¯ï¼Œâ€ä½ å‘çš„FINæŠ¥æ–‡æˆ‘æ”¶åˆ°äº†â€ã€‚åªæœ‰ç­‰åˆ°æˆ‘Serverç«¯æ‰€æœ‰çš„æŠ¥æ–‡éƒ½å‘é€å®Œäº†ï¼Œæˆ‘æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ã€‚æ•…éœ€è¦å››æ­¥æ¡æ‰‹ã€‚ è€Œè¿™ä¸€è®¾è®¡ï¼Œä¸»è¦æ˜¯å› ä¸ºâ€œæœåŠ¡å™¨ä¸æ˜¯ä½ æƒ³å…³å°±èƒ½å…³â€ã€‚ã€‚ã€‚ æ¯”å¦‚è¯´ä¸¤ä¸ªçƒ­æ‹ä¸­çš„äººæ­£åœ¨QQä¸Šå‘é€ä¸€ä¸ªä¼ mp4æ ¼å¼çš„æ–‡ä»¶ï¼Œ Aè¯´ï¼Œæˆ‘è¦ä¸‹QQäº†ï¼Œ Bè¯´ï¼šæˆ‘çŸ¥é“äº†ï¼Œä½ ä¸‹å§ã€‚ Aè¯´ï¼Œé‚£æˆ‘å…³äº†ï¼Œï¼ˆæƒ³å…³ï¼‰ ä½†æ˜¯å½“Aå°è¯•å…³é—­QQçš„æ—¶å€™ï¼ŒQQå¼¹çª—è¯´â€œæ­£åœ¨ä¼ è¾“æ–‡ä»¶ï¼Œä¼ è¾“å®Œæˆåè‡ªåŠ¨å…³é—­QQï¼Ÿâ€ è¿™æ—¶å€™Aå¯¹Bè¯´ï¼Œå‘€ï¼Œæ­£åœ¨ä¼ ä¸œè¥¿ï¼Œç­‰ä¼ å®Œäº†ï¼Œæˆ‘å°±å…³å§ã€‚ï¼ˆä¸èƒ½å…³ï¼‰ Bè¯´ï¼šè¡Œã€‚æ—¢ç„¶å…³ä¸æ‰ï¼Œä¸è¡Œå†èŠä¼šå„¿å‘—ï¼Ÿ Aï¼šèŠå§ã€‚ã€‚ã€‚ä¼ å®Œäº†å•Šï¼Œä¸‹äº†å•Šï¼ˆä¼ è¾“ç»“æŸäº†â€“èƒ½å…³ï¼‰ Bï¼šä¸‹å§ã€‚æˆ‘ä¹Ÿä¸‹äº†ã€‚ã€‚ã€‚ å°±æ˜¯å¤šäº†ä¸€ä¸ªFinishæŠ¥æ–‡ã€‚ æˆ–è€…ç®€å•ç‚¹è¡¨ç¤ºæ˜¯è¿™æ ·çš„ï¼šå›¾ç‰‡æ¼”ç¤ºäº†å››æ¬¡æŒ¥æ‰‹ï¼Œä¸ä¸‰æ¬¡æ¡æ‰‹ç›¸æ¯”ï¼Œåªå¤šäº†ä¸€ä¸ªè¢«åŠ¨æ–¹ç¡®è®¤è‡ªèº«ä»»åŠ¡Finishçš„åŠ¨ä½œã€‚æ€»ç»“ä¸‹ç›¸å…³çš„å‡½æ•°ï¼š åˆ›å»ºå¥—æ¥å­— 1Socket(af,type,protocol) å»ºç«‹åœ°å€å’Œå¥—æ¥å­—çš„è”ç³» 1bind(sockid, local addr, addrlen) æœåŠ¡å™¨ç«¯ä¾¦å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ 1listen( Sockid ,quenlen) å»ºç«‹æœåŠ¡å™¨/å®¢æˆ·ç«¯çš„è¿æ¥ (é¢å‘è¿æ¥TCPï¼‰ å®¢æˆ·ç«¯è¯·æ±‚è¿æ¥ 1Connect(sockid, destaddr, addrlen) æœåŠ¡å™¨ç«¯ç­‰å¾…ä»ç¼–å·ä¸ºSockidçš„Socketä¸Šæ¥æ”¶å®¢æˆ·è¿æ¥è¯·æ±‚ 1newsockid=accept(Sockidï¼ŒClientaddr, paddrlen) å‘é€/æ¥æ”¶æ•°æ® é¢å‘è¿æ¥ï¼š 12send(sockid, buff, bufflen) recv( ) é¢å‘æ— è¿æ¥ï¼š 12sendto(sockid,buff,â€¦,addrlen) recvfrom( ) é‡Šæ”¾å¥—æ¥å­— 1close(sockid) è‡³äºä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œä¸æ˜¯äºŒæ¬¡æ¡æ‰‹ï¼Œè¿˜æœ‰å››æ¬¡æ¡æ‰‹ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹é¢çš„ç±»æ¯”ï¼š ä¸‰æ¬¡æ¡æ‰‹ äºŒæ¬¡æ¡æ‰‹ å››æ¬¡æ¡æ‰‹ å‚è€ƒï¼šçŸ¥ä¹ ä¸‰æ¬¡æ¡æ‰‹çš„å¯¹è¯ï¼Œä¹ŸæŒºåƒè¿™ä¸ªçš„ï¼Œå“ˆå“ˆï¼š A: How are you? B: Iâ€™m fine, thanks,and you? A: Iâ€™m fine too. Posted by å¾®åš@iOSç¨‹åºçŠ­è¢åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | Creative Commons BY-NC-ND 3.0","link":"/program/ï£¿/socket/"},{"title":"æ·±å…¥å‰–æ iOS æ€§èƒ½ä¼˜åŒ–","text":"é—®é¢˜ç§ç±»æ—¶é—´å¤æ‚åº¦åœ¨é›†åˆé‡Œæ•°æ®é‡å°çš„æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦å¯¹äºæ€§èƒ½çš„å½±å“çœ‹èµ·æ¥å¾®ä¹å…¶å¾®ã€‚ä½†å¦‚æœæŸä¸ªå¼€å‘çš„åŠŸèƒ½æ˜¯ä¸€ä¸ªå…¬å…±åŠŸèƒ½ï¼Œæ— æ³•é¢„æ–™è°ƒç”¨è€…ä¼ å…¥æ•°æ®çš„é‡æ—¶ï¼Œè¿™ä¸ªå¤æ‚åº¦çš„ä¼˜åŒ–æ˜¾å¾—éå¸¸é‡è¦äº†ã€‚ ä¸Šå›¾åˆ—å‡ºäº†å„ç§æƒ…å†µçš„æ—¶é—´å¤æ‚åº¦ï¼Œæ¯”å¦‚é«˜æ•ˆçš„æ’åºç®—æ³•ä¸€èˆ¬éƒ½æ˜¯ O(n log n)ã€‚æ¥ä¸‹æ¥çœ‹çœ‹ä¸‹å›¾ï¼š å›¾ä¸­å¯ä»¥çœ‹å‡º O(n) æ˜¯ä¸ªåˆ†æ°´å²­ï¼Œå¤§äºå®ƒå¯¹äºæ€§èƒ½å°±å…·æœ‰å¾ˆå¤§çš„æ½œåœ¨å½±å“ï¼Œå¦‚æœæ˜¯ä¸ªå…¬å…±çš„æ¥å£ä¸€å®šè¦åŠ ä¸Šè¯´æ˜ï¼Œè‡ªå·±è°ƒç”¨ä¹Ÿè¦åšåˆ°å¿ƒä¸­æœ‰æ•°ã€‚å½“ç„¶æœ€å¥½æ˜¯é€šè¿‡ç®—æ³•ä¼˜åŒ–æˆ–è€…ä½¿ç”¨åˆé€‚çš„ç³»ç»Ÿæ¥å£æ–¹æ³•ï¼Œæƒè¡¡å†…å­˜æ¶ˆè€—äº‰å–é€šè¿‡ç©ºé—´æ¥æ¢å–æ—¶é—´ã€‚ ä¸‹é¢é€šè¿‡é›†åˆé‡Œæ˜¯å¦æœ‰æŸä¸ªå€¼æ¥ä¸¾ä¸ªä¾‹å­ï¼š 1234567891011121314151617181920//O(1)return array[idx] == value;//O(n)for (int i = 0; i &lt; count; i++) { if (array[i] == value) { return YES; }}return NO;//O(n2) æ‰¾é‡å¤çš„å€¼for (int i = 0; i &lt; count; i++) { for (int j = 0; j &lt; count; j++) { if ( i != j &amp;&amp; array[i] == array[j]) { return YES; } }}return NO; é‚£ä¹ˆ OC é‡Œå‡ ç§å¸¸ç”¨é›†åˆå¯¹è±¡æä¾›çš„æ¥å£æ–¹æ³•æ—¶é—´å¤æ‚åº¦æ˜¯æ€ä¹ˆæ ·çš„ã€‚ NSArray / NSMutableArrayé¦–å…ˆæˆ‘ä»¬å‘ç°ä»–ä»¬æ˜¯æœ‰æ’åºï¼Œå¹¶å…è®¸é‡å¤å…ƒç´ å­˜åœ¨çš„ï¼Œé‚£ä¹ˆè¿™ä¹ˆè®¾è®¡å°±è¡¨æ˜äº†é›†åˆå­˜å‚¨æ²¡æ³•ä½¿ç”¨é‡Œé¢çš„å…ƒç´ åš hash table çš„ key è¿›è¡Œç›¸å…³çš„å¿«é€Ÿæ“ä½œï¼Œã€‚æ‰€ä»¥ä¸åŒåŠŸèƒ½æ¥å£æ–¹æ³•æ€§èƒ½æ˜¯ä¼šæœ‰å¾ˆå¤§çš„å·®å¼‚ã€‚ containsObject:ï¼ŒcontainsObject:ï¼ŒindexOfObject*ï¼ŒremoveObject: ä¼šéå†é‡Œé¢å…ƒç´ æŸ¥çœ‹æ˜¯å¦ä¸ä¹‹åŒ¹å¯¹ï¼Œæ‰€ä»¥å¤æ‚åº¦ç­‰äºæˆ–å¤§äº O(n) objectAtIndex:ï¼ŒfirstObject:ï¼ŒlastObject:ï¼ŒaddObject:ï¼ŒremoveLastObject: è¿™äº›åªé’ˆå¯¹æ ˆé¡¶æ ˆåº•æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1) indexOfObject:inSortedRange:options:usingComparator: ä½¿ç”¨çš„æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(log n) NSSet / NSMutableSet / NSCountedSetè¿™äº›é›†åˆç±»å‹æ˜¯æ— åºæ²¡æœ‰é‡å¤å…ƒç´ ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡ hash table è¿›è¡Œå¿«é€Ÿçš„æ“ä½œã€‚æ¯”å¦‚ addObject:, removeObject:, containsObject: éƒ½æ˜¯æŒ‰ç…§ O(1) æ¥çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å°†æ•°ç»„è½¬æˆ Set æ—¶ä¼šå°†é‡å¤å…ƒç´ åˆæˆä¸€ä¸ªï¼ŒåŒæ—¶å¤±å»æ’åºã€‚ NSDictionary / NSMutableDictionaryå’Œ Set å·®ä¸å¤šï¼Œå¤šäº†é”®å€¼å¯¹åº”ã€‚æ·»åŠ åˆ é™¤å’ŒæŸ¥æ‰¾éƒ½æ˜¯ O(1) çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ Keys å¿…é¡»æ˜¯ç¬¦åˆ NSCopyingã€‚ containsObject æ–¹æ³•åœ¨æ•°ç»„å’Œ Set é‡Œä¸åŒçš„å®ç°åœ¨æ•°ç»„ä¸­çš„å®ç° 123456789101112131415161718192021- (BOOL) containsObject: (id)anObject{ return ([self indexOfObject: anObject] != NSNotFound);}- (NSUInteger) indexOfObject: (id)anObject{ unsigned c = [self count]; if (c &gt; 0 &amp;&amp; anObject != nil) { unsigned i; IMP get = [self methodForSelector: oaiSel]; BOOL (*eq)(id, SEL, id) = (BOOL (*)(id, SEL, id))[anObject methodForSelector: eqSel]; for (i = 0; i &lt; c; i++) if ((*eq)(anObject, eqSel, (*get)(self, oaiSel, i)) == YES) return i; } return NSNotFound;} å¯ä»¥çœ‹åˆ°ä¼šéå†æ‰€æœ‰å…ƒç´ åœ¨æŸ¥æ‰¾åˆ°åæ‰è¿›è¡Œè¿”å›. æ¥ä¸‹æ¥å¯ä»¥çœ‹çœ‹ containsObject åœ¨ Set é‡Œçš„å®ç°ï¼š 1234567891011121314151617- (BOOL) containsObject: (id)anObject{ return (([self member: anObject]) ? YES : NO);}//åœ¨ GSSet,m é‡Œæœ‰å¯¹ member çš„å®ç°- (id) member: (id)anObject{ if (anObject != nil) { GSIMapNode node = GSIMapNodeForKey(&amp;map, (GSIMapKey)anObject); if (node != 0) { return node-&gt;key.obj; } } return nil;} æ‰¾å…ƒç´ æ—¶æ˜¯é€šè¿‡é”®å€¼æ–¹å¼ä» map æ˜ å°„è¡¨é‡Œå–å‡ºï¼Œå› ä¸º Set é‡Œå…ƒç´ æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å¯ä»¥ hash å…ƒç´ å¯¹è±¡ä½œä¸º key è¾¾åˆ°å¿«é€Ÿè·å–å€¼çš„ç›®çš„ã€‚ ç”¨ GCD æ¥åšä¼˜åŒ–æˆ‘ä»¬å¯ä»¥é€šè¿‡ GCD æä¾›çš„æ–¹æ³•æ¥å°†ä¸€äº›éœ€è¦è€—æ—¶æ“ä½œæ”¾åˆ°éä¸»çº¿ç¨‹ä¸Šåšï¼Œä½¿å¾— App èƒ½å¤Ÿè¿è¡Œçš„æ›´åŠ æµç•…å“åº”æ›´å¿«ã€‚ä½†æ˜¯ä½¿ç”¨ GCD æ—¶éœ€è¦æ³¨æ„é¿å…å¯èƒ½å¼•èµ·çº¿ç¨‹çˆ†ç‚¸å’Œæ­»é”çš„æƒ…å†µï¼Œè¿˜æœ‰éä¸»çº¿ç¨‹å¤„ç†ä»»åŠ¡ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¦‚æœä¸€ä¸ªå¤„ç†éœ€è¦æ¶ˆè€—å¤§é‡å†…å­˜æˆ–è€…å¤§é‡CPUæ“ä½œ GCD ä¹Ÿæ²¡æ³•å¸®ä½ ï¼Œåªèƒ½é€šè¿‡å°†å¤„ç†è¿›è¡Œæ‹†è§£åˆ†æ­¥éª¤åˆ†æ—¶é—´è¿›è¡Œå¤„ç†æ‰æ¯”è¾ƒå¦¥å½“ã€‚ å¼‚æ­¥å¤„ç†äº‹ä»¶ ä¸Šå›¾æ˜¯æœ€å…¸å‹çš„å¼‚æ­¥å¤„ç†äº‹ä»¶çš„æ–¹æ³• éœ€è¦è€—æ—¶é•¿çš„ä»»åŠ¡ å°† GCD çš„ block é€šè¿‡ dispatch_block_create_with_qos_class æ–¹æ³•æŒ‡å®šé˜Ÿåˆ—çš„ QoS ä¸º QOS_CLASS_UTILITYã€‚è¿™ç§ QoS ç³»ç»Ÿä¼šé’ˆå¯¹å¤§çš„è®¡ç®—ï¼ŒI/Oï¼Œç½‘ç»œä»¥åŠå¤æ‚æ•°æ®å¤„ç†åšç”µé‡ä¼˜åŒ–ã€‚ é¿å…çº¿ç¨‹çˆ†ç‚¸ ä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ— ä½¿ç”¨ NSOperationQueues çš„å¹¶å‘é™åˆ¶æ–¹æ³• NSOperationQueue.maxConcurrentOperationCount ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢çš„å†™æ³•å°±æ¯”è¾ƒå±é™©ï¼Œå¯èƒ½ä¼šé€ æˆçº¿ç¨‹çˆ†ç‚¸å’Œæ­»é” 1234for (int i = 0; i &lt; 999; i++) { dispatch_async(q, ^{...});}dispatch_barrier_sync(q, ^{}); é‚£ä¹ˆæ€ä¹ˆèƒ½å¤Ÿé¿å…å‘¢ï¼Ÿé¦–å…ˆå¯ä»¥ä½¿ç”¨ dispatch_apply 1dispatch_apply(999, q, ^(size_t i){...}); æˆ–è€…ä½¿ç”¨ dispatch_semaphore 1#define CONCURRENT_TASKS 4sema = dispatch_semaphore_create(CONCURRENT_TASKS);for (int i = 0; i &lt; 999; i++){ dispatch_async(q, ^{ dispatch_semaphore_signal(sema); }); dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);} GCD ç›¸å…³ Crash æ—¥å¿—ç®¡ç†çº¿ç¨‹é—®é¢˜ 1234Thread 1:: Dispatch queue: com.apple.libdispatch-manager0 libsystem_kernel.dylib 0x00007fff8967e08a kevent_qos + 101 libdispatch.dylib 0x00007fff8be05811 _dispatch_mgr_invoke + 2512 libdispatch.dylib 0x00007fff8be05465 _dispatch_mgr_thread + 52 çº¿ç¨‹é—²ç½®æ—¶ 1234Thread 6:0 libsystem_kernel.dylib 0x00007fff8967d772 __workq_kernreturn + 101 libsystem_pthread.dylib 0x00007fff8fd317d9 _pthread_wqthread + 12832 libsystem_pthread.dylib 0x00007fff8fd2ed95 start_wqthread + 13 çº¿ç¨‹æ´»è·ƒæ—¶ 12345678910Thread 3 Crashed:: Dispatch queue: &lt;queue name&gt;&lt;my code&gt;7 libdispatch.dylib 0x07fff8fcfd323 _dispatch_call_block_and_release8 libdispatch.dylib 0x07fff8fcf8c13 _dispatch_client_callout + 89 libdispatch.dylib 0x07fff8fcfc365 _dispatch_queue_drain + 110010 libdispatch.dylib 0x07fff8fcfdecc _dispatch_queue_invoke + 20211 libdispatch.dylib 0x07fff8fcfb6b7 _dispatch_root_queue_drain + 46312 libdispatch.dylib 0x07fff8fd09fe4 _dispatch_worker_thread3 + 9113 libsystem_pthread.dylib 0x07fff93c17637 _pthread_wqthread + 72914 libsystem_pthread.dylib 0x07fff93c1540d start_wqthread + 13 ä¸»çº¿ç¨‹é—²ç½®æ—¶ 12345678910Thread 0 Crashed:: Dispatch queue: com.apple.main-thread0 libsystem_kernel.dylib 0x00007fff906614de mach_msg_trap + 101 libsystem_kernel.dylib 0x00007fff9066064f mach_msg + 552 com.apple.CoreFoundation 0x00007fff9a8c1eb4 __CFRunLoopServiceMachPort3 com.apple.CoreFoundation 0x00007fff9a8c137b __CFRunLoopRun + 13714 com.apple.CoreFoundation 0x00007fff9a8c0bd8 CFRunLoopRunSpecific + 296...10 com.apple.AppKit 0x00007fff8e823c03 -[NSApplication run] + 59411 com.apple.AppKit 0x00007fff8e7a0354 NSApplicationMain + 183212 com.example 0x00000001000013b4 start + 52 ä¸»é˜Ÿåˆ— 123456789101112131415Thread 0 Crashed:: Dispatch queue: com.apple.main-thread&lt;my code&gt;12 com.apple.Foundation 0x00007fff931157e8 __NSBLOCKOPERATION_IS_CALLING_OUT_TO_A_BLOCK__ + 713 com.apple.Foundation 0x00007fff931155b5 -[NSBlockOperation main] + 914 com.apple.Foundation 0x00007fff93114a6c -[__NSOperationInternal _start:] + 65315 com.apple.Foundation 0x00007fff93114543 __NSOQSchedule_f + 18416 libdispatch.dylib 0x00007fff935d6c13 _dispatch_client_callout + 817 libdispatch.dylib 0x00007fff935e2cbf _dispatch_main_queue_callback_4CF + 86118 com.apple.CoreFoundation 0x00007fff8d9223f9 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__19 com.apple.CoreFoundation 0x00007fff8d8dd68f __CFRunLoopRun + 215920 com.apple.CoreFoundation 0x00007fff8d8dcbd8 CFRunLoopRunSpecific + 296...26 com.apple.AppKit 0x00007fff999a1bd3 -[NSApplication run] + 59427 com.apple.AppKit 0x00007fff9991e324 NSApplicationMain + 183228 libdyld.dylib 0x00007fff9480f5c9 start + 1 I/O æ€§èƒ½ä¼˜åŒ–I/O æ˜¯æ€§èƒ½æ¶ˆè€—å¤§æˆ·ï¼Œä»»ä½•çš„ I/O æ“ä½œéƒ½ä¼šä½¿ä½åŠŸè€—çŠ¶æ€è¢«æ‰“ç ´ï¼Œæ‰€ä»¥å‡å°‘ I/O æ¬¡æ•°æ˜¯è¿™ä¸ªæ€§èƒ½ä¼˜åŒ–çš„å…³é”®ç‚¹ï¼Œä¸ºäº†è¾¾æˆè¿™ä¸ªç›®ä¸‹é¢åˆ—å‡ºä¸€äº›æ–¹æ³•ã€‚ å°†é›¶ç¢çš„å†…å®¹ä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œå†™å…¥ ä½¿ç”¨åˆé€‚çš„ I/O æ“ä½œ API ä½¿ç”¨åˆé€‚çš„çº¿ç¨‹ ä½¿ç”¨ NSCache åšç¼“å­˜èƒ½å¤Ÿå‡å°‘ I/O NSCache è¾¾åˆ°å¦‚å›¾çš„ç›®çš„ä¸ºä½•ä¸ç›´æ¥ç”¨å­—å…¸æ¥åšå‘¢ï¼ŸNSCache å…·æœ‰å­—å…¸çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒæ—¶è¿˜æœ‰å¦‚ä¸‹çš„ç‰¹æ€§ï¼š è‡ªåŠ¨æ¸…ç†ç³»ç»Ÿå ç”¨å†…å­˜ NSCache æ˜¯çº¿ç¨‹å®‰å…¨ -(void)cache:(NSCache *)cache willEvictObject:(id)obj; ç¼“å­˜å¯¹è±¡å°†è¢«æ¸…ç†æ—¶çš„å›è°ƒ evictsObjectsWithDiscardedContent å¯ä»¥æ§åˆ¶æ˜¯å¦æ¸…ç† é‚£ä¹ˆ NSCacheæ˜¯å¦‚ä½•åšåˆ°è¿™äº›ç‰¹æ€§çš„å‘¢ï¼Ÿ æ¥ä¸‹æ¥å­¦ä¹ ä¸‹ NSCache æ˜¯å¦‚ä½•åšçš„ã€‚é¦–å…ˆ NSCache æ˜¯ä¼šæŒæœ‰ä¸€ä¸ª NSMutableDictionaryã€‚ 1234567891011@implementation NSCache- (id) init{ if (nil == (self = [super init])) { return nil; } _objects = [NSMutableDictionary new]; _accesses = [NSMutableArray new]; return self;} éœ€è¦è®¾è®¡ä¸€ä¸ª Cached å¯¹è±¡ç»“æ„æ¥ä¿å­˜ä¸€äº›é¢å¤–çš„ä¿¡æ¯ 12345678910@interface _GSCachedObject : NSObject{ @public id object; //cache çš„å€¼ NSString *key; //è®¾ç½® cache çš„ key int accessCount; //ä¿å­˜è®¿é—®æ¬¡æ•°ï¼Œç”¨äºè‡ªåŠ¨æ¸…ç† NSUInteger cost; //setObject:forKey:cost: BOOL isEvictable; //çº¿ç¨‹å®‰å…¨}@end åœ¨ Cache è¯»å–çš„æ—¶å€™ä¼šå¯¹ _accesses æ•°ç»„çš„æ·»åŠ åˆ é™¤é€šè¿‡ isEvictable å¸ƒå°”å€¼æ¥ä¿è¯çº¿ç¨‹å®‰å…¨æ“ä½œã€‚ä½¿ç”¨ Cached å¯¹è±¡é‡Œçš„ accessCount å±æ€§è¿›è¡Œ +1 æ“ä½œä¸ºåé¢è‡ªåŠ¨æ¸…ç†çš„æ¡ä»¶åˆ¤æ–­åšå‡†å¤‡ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š 1234567891011121314151617- (id) objectForKey: (id)key{ _GSCachedObject *obj = [_objects objectForKey: key]; if (nil == obj) { return nil; } if (obj-&gt;isEvictable) //ä¿è¯æ·»åŠ åˆ é™¤æ“ä½œçº¿ç¨‹å®‰å…¨ { // å°† obj ç§»åˆ° access list æœ«ç«¯ [_accesses removeObjectIdenticalTo: obj]; [_accesses addObject: obj]; } obj-&gt;accessCount++; _totalAccesses++; return obj-&gt;object;} åœ¨æ¯æ¬¡ Cache æ·»åŠ æ—¶ä¼šå…ˆå»æ£€æŸ¥æ˜¯å¦è‡ªåŠ¨æ¸…ç†ï¼Œä¼šåˆ›å»ºä¸€ä¸ª Cached å¯¹è±¡å°† keyï¼Œobjectï¼Œcost ç­‰ä¿¡æ¯è®°å½•ä¸‹æ·»åŠ åˆ° _accesses æ•°ç»„å’Œ _objects å­—å…¸é‡Œã€‚ 123456789101112131415161718192021222324- (void) setObject: (id)obj forKey: (id)key cost: (NSUInteger)num{ _GSCachedObject *oldObject = [_objects objectForKey: key]; _GSCachedObject *newObject; if (nil != oldObject) { [self removeObjectForKey: oldObject-&gt;key]; } [self _evictObjectsToMakeSpaceForObjectWithCost: num]; newObject = [_GSCachedObject new]; // Retained here, released when obj is dealloc&apos;d newObject-&gt;object = RETAIN(obj); newObject-&gt;key = RETAIN(key); newObject-&gt;cost = num; if ([obj conformsToProtocol: @protocol(NSDiscardableContent)]) { newObject-&gt;isEvictable = YES; [_accesses addObject: newObject]; } [_objects setObject: newObject forKey: key]; RELEASE(newObject); _totalCost += num;} é‚£ä¹ˆä¸Šé¢æåˆ°çš„è‡ªåŠ¨æ¸…ç†å†…å­˜çš„æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿæ—¢ç„¶æ˜¯è‡ªåŠ¨æ¸…ç†å¿…å®šéœ€è¦æœ‰è§¦å‘æ—¶æœºå’Œè¿›å…¥æ¸…ç†çš„æ¡ä»¶åˆ¤æ–­ï¼Œè§¦å‘æ—¶æœºä¸€ä¸ªæ˜¯å‘ç”Ÿåœ¨æ·»åŠ  Cache å†…å®¹æ—¶ï¼Œä¸€ä¸ªæ˜¯å‘ç”Ÿåœ¨å†…å­˜è­¦å‘Šæ—¶ã€‚æ¡ä»¶åˆ¤æ–­ä»£ç å¦‚ä¸‹ï¼š 12345678// cost åœ¨æ·»åŠ æ–° cache å€¼æ—¶æŒ‡å®šçš„ cost// _costLimit æ˜¯ totalCostLimit å±æ€§å€¼if (_costLimit &gt; 0 &amp;&amp; _totalCost + cost &gt; _costLimit){ spaceNeeded = _totalCost + cost - _costLimit;}// åªæœ‰å½“ cost å¤§äºäººå·¥é™åˆ¶æ—¶æ‰ä¼šæ¸…ç†// æˆ–è€… cost è®¾ç½®ä¸º0ä¸è¿›è¡Œäººå·¥å¹²é¢„if (count &gt; 0 &amp;&amp; (spaceNeeded &gt; 0 || count &gt;= _countLimit)) æ‰€ä»¥ NSCache çš„ totalCostLimit çš„å€¼ä¼šå’Œæ¯æ¬¡ Cache æ·»åŠ çš„ cost ä¹‹å’Œå¯¹æ¯”ï¼Œè¶…å‡ºé™åˆ¶å¿…ç„¶è§¦å‘å†…å­˜æ¸…ç†ã€‚ æ¸…ç†æ—¶ä¼šå¯¹ç»å¸¸è®¿é—®çš„ objects ä¸æ¸…ç†ï¼Œä¸»è¦æ˜¯é€šè¿‡ _totalAccesses å’Œæ€»æ•°è·å¾—å¹³å‡è®¿é—®é¢‘ç‡ï¼Œå¦‚æœé‚£ä¸ªå¯¹è±¡çš„è®¿é—®æ¬¡æ•°æ˜¯å°äºå¹³å‡å€¼çš„æ‰éœ€è¦æ¸…ç†ã€‚ 1234//_totalAccesses æ‰€æœ‰çš„å€¼çš„è®¿é—®éƒ½ä¼š +1NSUInteger averageAccesses = (_totalAccesses / count * 0.2) + 1;//accessCount æ¯æ¬¡ obj å–å€¼æ—¶ä¼š +1if (obj-&gt;accessCount &lt; averageAccesses &amp;&amp; obj-&gt;isEvictable) åœ¨æ¸…ç†ä¹‹å‰è¿˜éœ€è¦ä¸€äº›å‡†å¤‡å·¥ä½œï¼ŒåŒ…æ‹¬æ ‡è®° Cached å¯¹è±¡çš„ isEvictable é˜²æ­¢åé¢æœ‰ä¸å®‰å…¨çš„çº¿ç¨‹æ“ä½œã€‚å°†æ»¡è¶³æ¡ä»¶çš„æ¸…ç† objects æ”¾åˆ°æ¸…ç†æ•°ç»„é‡Œï¼Œå¦‚æœç©ºé—´é‡Šæ”¾è¶³å¤Ÿå°±ä¸ç”¨å†æŠŠæ›´å¤šçš„ objects åŠ åˆ°æ¸…ç†æ•°ç»„é‡Œäº†ï¼Œæœ€åéå†æ¸…ç†æ•°ç»„è¿›è¡Œé€ä¸ªæ¸…ç†å³å¯ã€‚ 12345678910111213141516NSUInteger cost = obj-&gt;cost;obj-&gt;cost = 0;// ä¸ä¼šè¢«å†æ¬¡æ¸…é™¤obj-&gt;isEvictable = NO;// æ·»åŠ åˆ° remove list é‡Œif (_evictsObjectsWithDiscardedContent){ [evictedKeys addObject: obj-&gt;key];}_totalCost -= cost;// å¦‚æœå·²ç»é‡Šæ”¾äº†è¶³å¤Ÿç©ºé—´å°±ä¸ç”¨åé¢æ“ä½œäº†if (cost &gt; spaceNeeded){ break;}spaceNeeded -= cost; åœ¨æ¸…ç†æ—¶ä¼šæ‰§è¡Œå›è°ƒå†…å®¹ï¼Œè¿™æ ·å¦‚æœæœ‰äº›ç¼“å­˜æ•°æ®éœ€è¦æŒç»­åŒ–å­˜å‚¨å¯ä»¥åœ¨å›è°ƒé‡Œè¿›è¡Œå¤„ç†ã€‚ 123456789101112- (void) removeObjectForKey: (id)key{ _GSCachedObject *obj = [_objects objectForKey: key]; if (nil != obj) { [_delegate cache: self willEvictObject: obj-&gt;object]; _totalAccesses -= obj-&gt;accessCount; [_objects removeObjectForKey: key]; [_accesses removeObjectIdenticalTo: obj]; }} å®Œæ•´çš„å®ç°å¯ä»¥æŸ¥çœ‹ GNUstep Base çš„ NSCache.m æ–‡ä»¶ã€‚ ä¸‹é¢å¯ä»¥çœ‹çœ‹ NSCache åœ¨ SDWebImage çš„è¿ç”¨æ˜¯æ€ä¹ˆæ ·çš„ï¼š 1234567891011121314151617- (UIImage *)imageFromMemoryCacheForKey:(NSString *)key { return [self.memCache objectForKey:key];}- (UIImage *)imageFromDiskCacheForKey:(NSString *)key { // æ£€æŸ¥ NSCache é‡Œæ˜¯å¦æœ‰ UIImage *image = [self imageFromMemoryCacheForKey:key]; if (image) { return image; } // ä»ç£ç›˜é‡Œè¯» UIImage *diskImage = [self diskImageForKey:key]; if (diskImage &amp;&amp; self.shouldCacheImagesInMemory) { NSUInteger cost = SDCacheCostForImage(diskImage); [self.memCache setObject:diskImage forKey:key cost:cost]; } return diskImage;} å¯ä»¥çœ‹å‡ºåˆ©ç”¨ NSCache è‡ªåŠ¨é‡Šæ”¾å†…å­˜çš„ç‰¹ç‚¹å°†å›¾ç‰‡éƒ½æ”¾åˆ° NSCache é‡Œè¿™æ ·åœ¨å†…å­˜ä¸å¤Ÿç”¨æ—¶å¯ä»¥è‡ªåŠ¨æ¸…ç†æ‰ä¸å¸¸ç”¨çš„é‚£äº›å›¾ç‰‡ï¼Œåœ¨è¯»å– Cache é‡Œå†…å®¹æ—¶å¦‚æœæ²¡æœ‰è¢«æ¸…ç†ä¼šç›´æ¥è¿”å›å›¾ç‰‡æ•°æ®ï¼Œæ¸…ç†äº†çš„è¯æ‰ä¼šæ‰§è¡Œ I/O ä»ç£ç›˜è¯»å–å›¾ç‰‡ï¼Œé€šè¿‡è¿™ç§æ–¹å¼èƒ½å¤Ÿåˆ©ç”¨ç©ºé—´å‡å°‘ç£ç›˜æ“ä½œï¼Œç©ºé—´ä¹Ÿèƒ½å¤Ÿæ›´åŠ æœ‰æ•ˆçš„æ§åˆ¶é‡Šæ”¾ã€‚ æ§åˆ¶ App çš„ Wake æ¬¡æ•°é€šçŸ¥ï¼ŒVoIPï¼Œå®šä½ï¼Œè“ç‰™ç­‰éƒ½ä¼šä½¿è®¾å¤‡ä» Standby çŠ¶æ€å”¤èµ·ã€‚å”¤èµ·è¿™ä¸ªè¿‡ç¨‹ä¼šæœ‰æ¯”è¾ƒå¤§çš„æ¶ˆè€—ï¼Œåº”è¯¥é¿å…é¢‘ç¹å‘ç”Ÿã€‚é€šçŸ¥æ–¹é¢ä¸»è¦è¦åœ¨äº§å“å±‚é¢å¤šåšè€ƒè™‘ã€‚å®šä½æ–¹é¢ï¼Œä¸‹é¢å¯ä»¥çœ‹çœ‹å®šä½çš„ä¸€äº› API çœ‹çœ‹å®ƒä»¬å¯¹æ€§èƒ½çš„ä¸åŒå½±å“ï¼Œä¾¿äºè€ƒè™‘é‡‡ç”¨åˆé€‚çš„æ¥å£ã€‚ è¿ç»­çš„ä½ç½®æ›´æ–° 1[locationManager startUpdatingLocation] è¿™ä¸ªæ–¹æ³•ä¼šæ—¶è®¾å¤‡ä¸€ç›´å¤„äºæ´»è·ƒçŠ¶æ€ã€‚ å»¶æ—¶æœ‰æ•ˆå®šä½ 1[locationManager allowDeferredLocationUpdatesUntilTraveled: timeout:] é«˜æ•ˆèŠ‚èƒ½çš„å®šä½æ–¹å¼ï¼Œæ•°æ®ä¼šç¼“å­˜åœ¨ä½ç½®ç¡¬ä»¶ä¸Šã€‚é€‚åˆäºè·‘æ­¥åº”ç”¨åº”è¯¥éƒ½é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚ é‡å¤§ä½ç½®å˜åŒ– 1[locationManager startMonitoringSignificantLocationChanges] ä¼šæ›´èŠ‚èƒ½ï¼Œå¯¹äºé‚£äº›åªæœ‰åœ¨ä½ç½®æœ‰å¾ˆå¤§å˜åŒ–çš„æ‰éœ€è¦å›è°ƒçš„åº”ç”¨å¯ä»¥é‡‡ç”¨è¿™ç§ï¼Œæ¯”å¦‚å¤©æ°”åº”ç”¨ã€‚ åŒºåŸŸç›‘æµ‹ 1[locationManager startMonitoringForRegion:(CLRegion *)] ä¹Ÿæ˜¯ä¸€ç§èŠ‚èƒ½çš„å®šä½æ–¹å¼ï¼Œæ¯”å¦‚åœ¨åšç‰©é¦†é‡ŒæŒ‰ç…§ä¸åŒåŒºåŸŸç›‘æµ‹å±•ç¤ºä¸åŒä¿¡æ¯ä¹‹ç±»çš„åº”ç”¨æ¯”è¾ƒé€‚åˆè¿™ç§å®šä½ã€‚ ç»å¸¸è®¿é—®çš„åœ°æ–¹ 1// Start monitoringlocationManager.startMonitoringVisits()// Stop monitoring when no longer neededlocationManager.stopMonitoringVisits() æ€»çš„æ¥è¯´ï¼Œä¸è¦è½»æ˜“ä½¿ç”¨ startUpdatingLocation() é™¤éä¸‡ä¸å¾—å·²ï¼Œå°½å¿«çš„ä½¿ç”¨ stopUpdatingLocation() æ¥ç»“æŸå®šä½è¿˜ç”¨æˆ·ä¸€ä¸ªèŠ‚èƒ½è®¾å¤‡ã€‚ å†…å­˜å¯¹äºæ€§èƒ½çš„å½±å“é¦–å…ˆ Reclaiming å†…å­˜æ˜¯éœ€è¦æ—¶é—´çš„ï¼Œçªç„¶çš„å¤§é‡å†…å­˜éœ€æ±‚æ˜¯ä¼šå½±å“å“åº”çš„ã€‚ å¦‚ä½•é¢„é˜²è¿™äº›æ€§èƒ½é—®é¢˜ï¼Œéœ€è¦åˆ»æ„é¢„é˜²ä¹ˆåšæŒä¸‹é¢å‡ ä¸ªåŸåˆ™äº‰å–åœ¨ç¼–ç é˜¶æ®µé¿å…ä¸€äº›æ€§èƒ½é—®é¢˜ã€‚ ä¼˜åŒ–è®¡ç®—çš„å¤æ‚åº¦ä»è€Œå‡å°‘ CPU çš„ä½¿ç”¨ åœ¨åº”ç”¨å“åº”äº¤äº’çš„æ—¶å€™åœæ­¢æ²¡å¿…è¦çš„ä»»åŠ¡å¤„ç† è®¾ç½®åˆé€‚çš„ QoS å°†å®šæ—¶å™¨ä»»åŠ¡åˆå¹¶ï¼Œè®© CPU æ›´å¤šæ—¶å€™å¤„äº idle çŠ¶æ€ é‚£ä¹ˆå¦‚æœå†™éœ€æ±‚æ—¶æ¥ä¸åŠæ³¨æ„è¿™äº›é—®é¢˜åšä¸åˆ°é¢„é˜²çš„è¯ï¼Œå¯ä»¥é€šè¿‡è‡ªåŠ¨åŒ–ä»£ç æ£€æŸ¥çš„æ–¹å¼æ¥é¿å…è¿™äº›é—®é¢˜å—ï¼Ÿ å¦‚ä½•æ£€æŸ¥æ ¹æ®è¿™äº›é—®é¢˜åœ¨ä»£ç é‡ŒæŸ¥ï¼Œå†™å·¥å…·æˆ–ç”¨å·¥å…·è‡ªåŠ¨åŒ–æŸ¥ï¼Ÿè™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯éœ€è¦è€ƒè™‘çš„æƒ…å†µå¤ªå¤šï¼Œç°æœ‰å·¥å…·æ”¯æŒä¸å¥½ï¼Œè‡ªå·±å†™éœ€è¦è€ƒè™‘çš„ç‚¹å¤ªå¤šéœ€è¦èŠ±è´¹å¤ªé•¿çš„æ—¶é—´ï¼Œé‚£ä¹ˆä»€ä¹ˆæ–¹å¼ä¼šæ¯”è¾ƒå¥½å‘¢ï¼Ÿ é€šè¿‡ç›‘å¬ä¸»çº¿ç¨‹æ–¹å¼æ¥ç›‘å¯Ÿé¦–å…ˆç”¨ CFRunLoopObserverCreate åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…é‡Œé¢æ¥å— CFRunLoopActivity çš„å›è°ƒï¼Œç„¶åç”¨ CFRunLoopAddObserver å°†è§‚å¯Ÿè€…æ·»åŠ åˆ° CFRunLoopGetMain() ä¸»çº¿ç¨‹ Runloop çš„ kCFRunLoopCommonModes æ¨¡å¼ä¸‹è¿›è¡Œè§‚å¯Ÿã€‚ æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹æ¥è¿›è¡Œç›‘æ§ï¼Œä½¿ç”¨ dispatch_semaphore_wait å®šä¹‰åŒºé—´æ—¶é—´ï¼Œæ ‡å‡†æ˜¯ 16 æˆ– 20 å¾®ç§’ä¸€æ¬¡ç›‘æ§çš„è¯åŸºæœ¬å¯ä»¥æŠŠå½±å“å“åº”çš„éƒ½æ‰¾å‡ºæ¥ã€‚ç›‘æ§ç»“æœçš„æ ‡å‡†æ˜¯æ ¹æ®ä¸¤ä¸ª Runloop çš„çŠ¶æ€ BeforeSources å’Œ AfterWaiting åœ¨åŒºé—´æ—¶é—´æ˜¯å¦èƒ½æ£€æµ‹åˆ°æ¥åˆ¤æ–­æ˜¯å¦å¡é¡¿ã€‚ å¦‚ä½•æ‰“å°å †æ ˆä¿¡æ¯ï¼Œä¿å­˜ç°åœºæ‰“å°å †æ ˆæ•´ä½“æ€è·¯æ˜¯è·å–çº¿ç¨‹çš„ä¿¡æ¯å¾—åˆ°çº¿ç¨‹çš„ state ä»è€Œå¾—åˆ°çº¿ç¨‹é‡Œæ‰€æœ‰æ ˆçš„æŒ‡é’ˆï¼Œæ ¹æ®è¿™äº›æŒ‡é’ˆåœ¨ ç¬¦å·è¡¨é‡Œæ‰¾åˆ°å¯¹åº”çš„æè¿°å³ç¬¦å·åŒ–è§£æï¼Œè¿™æ ·å°±èƒ½å¤Ÿå±•ç¤ºå‡ºå¯è¯»çš„å †æ ˆä¿¡æ¯ã€‚å…·ä½“å®ç°æ˜¯æ€æ ·çš„å‘¢ï¼Ÿä¸‹é¢è¯¦ç»†è¯´è¯´ï¼š è·å–çº¿ç¨‹çš„ä¿¡æ¯è¿™é‡Œé¦–å…ˆæ˜¯è¦é€šè¿‡ task_threads å–åˆ°æ‰€æœ‰çš„çº¿ç¨‹ï¼Œ 12345thread_act_array_t threads; //int ç»„æˆçš„æ•°ç»„æ¯”å¦‚ thread[1] = 5635mach_msg_type_number_t thread_count = 0; //mach_msg_type_number_t æ˜¯ int ç±»å‹const task_t this_task = mach_task_self(); //int//æ ¹æ®å½“å‰ task è·å–æ‰€æœ‰çº¿ç¨‹kern_return_t kr = task_threads(this_task, &amp;threads, &amp;thread_count); éå†æ—¶é€šè¿‡ thread_info è·å–å„ä¸ªçº¿ç¨‹çš„è¯¦ç»†ä¿¡æ¯ 12345678910111213141516SMThreadInfoStruct threadInfoSt = {0};thread_info_data_t threadInfo;thread_basic_info_t threadBasicInfo;mach_msg_type_number_t threadInfoCount = THREAD_INFO_MAX;if (thread_info((thread_act_t)thread, THREAD_BASIC_INFO, (thread_info_t)threadInfo, &amp;threadInfoCount) == KERN_SUCCESS) { threadBasicInfo = (thread_basic_info_t)threadInfo; if (!(threadBasicInfo-&gt;flags &amp; TH_FLAGS_IDLE)) { threadInfoSt.cpuUsage = threadBasicInfo-&gt;cpu_usage / 10; threadInfoSt.userTime = threadBasicInfo-&gt;system_time.microseconds; }}uintptr_t buffer[100];int i = 0;NSMutableString *reStr = [NSMutableString stringWithFormat:@&quot;Stack of thread: %u:\\n CPU used: %.1f percent\\n user time: %d second\\n&quot;, thread, threadInfoSt.cpuUsage, threadInfoSt.userTime]; è·å–çº¿ç¨‹é‡Œæ‰€æœ‰æ ˆçš„ä¿¡æ¯å¯ä»¥é€šè¿‡ thread_get_state å¾—åˆ° machine context é‡Œé¢åŒ…å«äº†çº¿ç¨‹æ ˆé‡Œæ‰€æœ‰çš„æ ˆæŒ‡é’ˆã€‚ 1234_STRUCT_MCONTEXT machineContext; //çº¿ç¨‹æ ˆé‡Œæ‰€æœ‰çš„æ ˆæŒ‡é’ˆ//é€šè¿‡ thread_get_state è·å–å®Œæ•´çš„ machineContext ä¿¡æ¯ï¼ŒåŒ…å« thread çŠ¶æ€ä¿¡æ¯mach_msg_type_number_t state_count = smThreadStateCountByCPU();kern_return_t kr = thread_get_state(thread, smThreadStateByCPU(), (thread_state_t)&amp;machineContext.__ss, &amp;state_count); åˆ›å»ºä¸€ä¸ªæ ˆç»“æ„ä½“ç”¨æ¥ä¿å­˜æ ˆçš„æ•°æ® 123456789101112131415161718//ä¸ºé€šç”¨å›æº¯è®¾è®¡ç»“æ„æ”¯æŒæ ˆåœ°å€ç”±å°åˆ°å¤§ï¼Œåœ°å€é‡Œå­˜å‚¨ä¸Šä¸ªæ ˆæŒ‡é’ˆçš„åœ°å€typedef struct SMStackFrame { const struct SMStackFrame *const previous; const uintptr_t return_address;} SMStackFrame;SMStackFrame stackFrame = {0};//é€šè¿‡æ ˆåŸºå€æŒ‡é’ˆè·å–å½“å‰æ ˆå¸§åœ°å€const uintptr_t framePointer = smMachStackBasePointerByCPU(&amp;machineContext);if (framePointer == 0 || smMemCopySafely((void *)framePointer, &amp;stackFrame, sizeof(stackFrame)) != KERN_SUCCESS) { return @&quot;Fail frame pointer&quot;;}for (; i &lt; 32; i++) { buffer[i] = stackFrame.return_address; if (buffer[i] == 0 || stackFrame.previous == 0 || smMemCopySafely(stackFrame.previous, &amp;stackFrame, sizeof(stackFrame)) != KERN_SUCCESS) { break; }} ç¬¦å·åŒ–ç¬¦å·åŒ–ä¸»è¦æ€æƒ³å°±æ˜¯é€šè¿‡æ ˆæŒ‡é’ˆåœ°å€å‡å» Slide åœ°å€å¾—åˆ° ASLR åç§»é‡ï¼Œé€šè¿‡è¿™ä¸ªåç§»é‡å¯ä»¥åœ¨ __LINKEDIT segment æŸ¥æ‰¾åˆ°å­—ç¬¦ä¸²å’Œç¬¦å·è¡¨çš„ä½ç½®ã€‚å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394info-&gt;dli_fname = NULL;info-&gt;dli_fbase = NULL;info-&gt;dli_sname = NULL;info-&gt;dli_saddr = NULL;//æ ¹æ®åœ°å€è·å–æ˜¯å“ªä¸ª imageconst uint32_t idx = smDyldImageIndexFromAddress(address);if (idx == UINT_MAX) { return false;}/* Header ------------------ Load commands Segment command 1 -------------| Segment command 2 | ------------------ | Data | Section 1 data |segment 1 &lt;----| Section 2 data | &lt;----| Section 3 data | &lt;----| Section 4 data |segment 2 Section 5 data | ... | Section n data | *//*----------Mach Header---------*///æ ¹æ® image çš„åºå·è·å– mach_headerconst struct mach_header* machHeader = _dyld_get_image_header(idx);//è¿”å› image_index ç´¢å¼•çš„ image çš„è™šæ‹Ÿå†…å­˜åœ°å€ slide çš„æ•°é‡ï¼Œå¦‚æœ image_index è¶…å‡ºèŒƒå›´è¿”å›0//åŠ¨æ€é“¾æ¥å™¨åŠ è½½ image æ—¶ï¼Œimage å¿…é¡»æ˜ å°„åˆ°æœªå ç”¨åœ°å€çš„è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚åŠ¨æ€é“¾æ¥å™¨é€šè¿‡æ·»åŠ ä¸€ä¸ªå€¼åˆ° image çš„åŸºåœ°å€æ¥å®ç°ï¼Œè¿™ä¸ªå€¼æ˜¯è™šæ‹Ÿå†…å­˜ slide æ•°é‡const uintptr_t imageVMAddressSlide = (uintptr_t)_dyld_get_image_vmaddr_slide(idx);/*-----------ASLR çš„åç§»é‡---------*///https://en.wikipedia.org/wiki/Address_space_layout_randomizationconst uintptr_t addressWithSlide = address - imageVMAddressSlide;//æ ¹æ® Image çš„ Index æ¥è·å– segment çš„åŸºåœ°å€//æ®µå®šä¹‰Mach-Oæ–‡ä»¶ä¸­çš„å­—èŠ‚èŒƒå›´ä»¥åŠåŠ¨æ€é“¾æ¥å™¨åŠ è½½åº”ç”¨ç¨‹åºæ—¶è¿™äº›å­—èŠ‚æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­çš„åœ°å€å’Œå†…å­˜ä¿æŠ¤å±æ€§ã€‚ å› æ­¤ï¼Œæ®µæ€»æ˜¯è™šæ‹Ÿå†…å­˜é¡µå¯¹é½ã€‚ ç‰‡æ®µåŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªèŠ‚ã€‚const uintptr_t segmentBase = smSegmentBaseOfImageIndex(idx) + imageVMAddressSlide;if (segmentBase == 0) { return false;}//info-&gt;dli_fname = _dyld_get_image_name(idx);info-&gt;dli_fbase = (void*)machHeader;/*--------------Mach Segment-------------*///åœ°å€æœ€åŒ¹é…çš„symbolconst nlistByCPU* bestMatch = NULL;uintptr_t bestDistance = ULONG_MAX;uintptr_t cmdPointer = smCmdFirstPointerFromMachHeader(machHeader);if (cmdPointer == 0) { return false;}//éå†æ¯ä¸ª segment åˆ¤æ–­ç›®æ ‡åœ°å€æ˜¯å¦è½åœ¨è¯¥ segment åŒ…å«çš„èŒƒå›´é‡Œfor (uint32_t iCmd = 0; iCmd &lt; machHeader-&gt;ncmds; iCmd++) { const struct load_command* loadCmd = (struct load_command*)cmdPointer; /*----------ç›®æ ‡ Image çš„ç¬¦å·è¡¨----------*/ //Segment é™¤äº† __TEXT å’Œ __DATA å¤–è¿˜æœ‰ __LINKEDIT segmentï¼Œå®ƒé‡Œé¢åŒ…å«åŠ¨æ€é“¾æ¥å™¨çš„ä½¿ç”¨çš„åŸå§‹æ•°æ®ï¼Œæ¯”å¦‚ç¬¦å·ï¼Œå­—ç¬¦ä¸²å’Œé‡å®šä½è¡¨é¡¹ã€‚ //LC_SYMTAB æè¿°äº† __LINKEDIT segment å†…æŸ¥æ‰¾å­—ç¬¦ä¸²å’Œç¬¦å·è¡¨çš„ä½ç½® if (loadCmd-&gt;cmd == LC_SYMTAB) { //è·å–å­—ç¬¦ä¸²å’Œç¬¦å·è¡¨çš„è™šæ‹Ÿå†…å­˜åç§»é‡ã€‚ const struct symtab_command* symtabCmd = (struct symtab_command*)cmdPointer; const nlistByCPU* symbolTable = (nlistByCPU*)(segmentBase + symtabCmd-&gt;symoff); const uintptr_t stringTable = segmentBase + symtabCmd-&gt;stroff; for (uint32_t iSym = 0; iSym &lt; symtabCmd-&gt;nsyms; iSym++) { //å¦‚æœ n_value æ˜¯0ï¼Œsymbol æŒ‡å‘å¤–éƒ¨å¯¹è±¡ if (symbolTable[iSym].n_value != 0) { //ç»™å®šçš„åç§»é‡æ˜¯æ–‡ä»¶åç§»é‡ï¼Œå‡å» __LINKEDIT segment çš„æ–‡ä»¶åç§»é‡è·å¾—å­—ç¬¦ä¸²å’Œç¬¦å·è¡¨çš„è™šæ‹Ÿå†…å­˜åç§»é‡ uintptr_t symbolBase = symbolTable[iSym].n_value; uintptr_t currentDistance = addressWithSlide - symbolBase; //å¯»æ‰¾æœ€å°çš„è·ç¦» bestDistanceï¼Œå› ä¸º addressWithSlide æ˜¯æŸä¸ªæ–¹æ³•çš„æŒ‡ä»¤åœ°å€ï¼Œè¦å¤§äºè¿™ä¸ªæ–¹æ³•çš„å…¥å£ã€‚ //ç¦» addressWithSlide è¶Šè¿‘çš„å‡½æ•°å…¥å£è¶ŠåŒ¹é… if ((addressWithSlide &gt;= symbolBase) &amp;&amp; (currentDistance &lt;= bestDistance)) { bestMatch = symbolTable + iSym; bestDistance = currentDistance; } } } if (bestMatch != NULL) { //å°†è™šæ‹Ÿå†…å­˜åç§»é‡æ·»åŠ åˆ° __LINKEDIT segment çš„è™šæ‹Ÿå†…å­˜åœ°å€å¯ä»¥æä¾›å­—ç¬¦ä¸²å’Œç¬¦å·è¡¨çš„å†…å­˜ addressã€‚ info-&gt;dli_saddr = (void*)(bestMatch-&gt;n_value + imageVMAddressSlide); info-&gt;dli_sname = (char*)((intptr_t)stringTable + (intptr_t)bestMatch-&gt;n_un.n_strx); if (*info-&gt;dli_sname == &apos;_&apos;) { info-&gt;dli_sname++; } //æ‰€æœ‰çš„ symbols çš„å·²ç»è¢«å¤„ç†å¥½äº† if (info-&gt;dli_saddr == info-&gt;dli_fbase &amp;&amp; bestMatch-&gt;n_type == 3) { info-&gt;dli_sname = NULL; } break; } } cmdPointer += loadCmd-&gt;cmdsize;} éœ€è¦æ³¨æ„çš„åœ°æ–¹éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªç¨‹åºæœ‰æ¶ˆè€—æ€§èƒ½çš„åœ°æ–¹ thread get stateã€‚è¿™ä¸ªä¹Ÿä¼šè¢«ç›‘æ§æ£€æŸ¥å‡ºï¼Œæ‰€ä»¥å¯ä»¥è¿‡æ»¤æ‰è¿™æ ·çš„å †æ ˆä¿¡æ¯ã€‚ å¤Ÿè·å–æ›´å¤šä¿¡æ¯çš„æ–¹æ³•è·å–æ›´å¤šä¿¡æ¯æ¯”å¦‚å…¨å±‚çº§æ–¹æ³•è°ƒç”¨å’Œæ¯ä¸ªæ–¹æ³•æ¶ˆè€—çš„æ—¶é—´ï¼Œé‚£ä¹ˆè¿™æ ·åšçš„å¥½å¤„åœ¨å“ªå‘¢ï¼Ÿ å¯ä»¥æ›´ç»†åŒ–çš„æµ‹é‡æ—¶é—´æ¶ˆè€—ï¼Œæ‰¾åˆ°è€—æ—¶æ–¹æ³•ï¼Œæ›´å¿«çš„äº¤äº’æ“ä½œèƒ½ä½¿ç”¨æˆ·ä½“éªŒæ›´å¥½ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¯ä»¥å»è¡¡é‡çš„åœºæ™¯ï¼š å“åº”èƒ½åŠ› æŒ‰é’®ç‚¹å‡» æ‰‹åŠ¿æ“ä½œ Tab åˆ‡æ¢ vc çš„åˆ‡æ¢å’Œè½¬åœº å¯ä»¥ç»™ä¼˜åŒ–å®šä¸ªç›®æ ‡ï¼Œæ¯”å¦‚æ»šåŠ¨å’ŒåŠ¨ç”»è¾¾åˆ° 60fpsï¼Œå“åº”ç”¨æˆ·æ“ä½œåœ¨ 100ms å†…å®Œæˆã€‚ç„¶åé€ä¸ªæ£€æµ‹å‡ºæ¥ fix æ‰ã€‚ å¦‚ä½•è·å–åˆ°æ›´å¤šä¿¡æ¯å‘¢ï¼Ÿ é€šè¿‡ hook objc_msgSend æ–¹æ³•èƒ½å¤Ÿè·å–æ‰€æœ‰è¢«è°ƒç”¨çš„æ–¹æ³•ï¼Œè®°å½•æ·±åº¦å°±èƒ½å¤Ÿå¾—åˆ°æ–¹æ³•è°ƒç”¨çš„æ ‘çŠ¶ç»“æ„ï¼Œé€šè¿‡æ‰§è¡Œå‰åæ—¶é—´çš„è®°å½•èƒ½å¤Ÿå¾—åˆ°æ¯ä¸ªæ–¹æ³•çš„è€—æ—¶ï¼Œè¿™æ ·å°±èƒ½è·å–ä¸€ä»½å®Œæ•´çš„æ€§èƒ½æ¶ˆè€—ä¿¡æ¯äº†ã€‚ hook c å‡½æ•°å¯ä»¥ä½¿ç”¨ facebook çš„ fishhookï¼Œ è·å–æ–¹æ³•è°ƒç”¨æ ‘çŠ¶ç»“æ„å¯ä»¥ä½¿ç”¨ InspectiveCï¼Œä¸‹é¢å¯¹äºä»–ä»¬çš„å®ç°è¯¦ç»†ä»‹ç»ä¸€ä¸‹ï¼š è·å–æ–¹æ³•è°ƒç”¨æ ‘ç»“æ„é¦–å…ˆè®¾è®¡ä¸¤ä¸ªç»“æ„ä½“ï¼ŒCallRecord è®°å½•è°ƒç”¨æ–¹æ³•è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ obj å’Œ SEL ç­‰ï¼ŒThreadCallStack é‡Œé¢éœ€è¦ç”¨ index è®°å½•å½“å‰è°ƒç”¨æ–¹æ³•æ ‘çš„æ·±åº¦ã€‚æœ‰äº† SEL å†é€šè¿‡ NSStringFromSelector å°±èƒ½å¤Ÿå–å¾—æ–¹æ³•åï¼Œæœ‰äº† obj é€šè¿‡ object_getClass èƒ½å¤Ÿå¾—åˆ° Class å†ç”¨ NSStringFromClass å°±èƒ½å¤Ÿè·å¾—ç±»åã€‚ 123456789101112131415161718192021// Shared structures.typedef struct CallRecord_ { id obj; //é€šè¿‡ object_getClass èƒ½å¤Ÿå¾—åˆ° Class å†é€šè¿‡ NSStringFromClass èƒ½å¤Ÿå¾—åˆ°ç±»å SEL _cmd; //é€šè¿‡ NSStringFromSelector æ–¹æ³•èƒ½å¤Ÿå¾—åˆ°æ–¹æ³•å uintptr_t lr; int prevHitIndex; char isWatchHit;} CallRecord;typedef struct ThreadCallStack_ { FILE *file; char *spacesStr; CallRecord *stack; int allocatedLength; int index; int numWatchHits; int lastPrintedIndex; int lastHitIndex; char isLoggingEnabled; char isCompleteLoggingEnabled;} ThreadCallStack; å­˜å‚¨è¯»å– ThreadCallStackpthread_setspecific() å¯ä»¥å°†ç§æœ‰æ•°æ®è®¾ç½®åœ¨æŒ‡å®šçº¿ç¨‹ä¸Šï¼Œpthread_getspecific() ç”¨æ¥è¯»å–è¿™ä¸ªç§æœ‰æ•°æ®ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§å¯ä»¥å°±å¯ä»¥å°† ThreadCallStack çš„æ•°æ®å’Œè¯¥çº¿ç¨‹ç»‘å®šåœ¨ä¸€èµ·ï¼Œéšæ—¶è¿›è¡Œæ•°æ®çš„å­˜å–ã€‚ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122static inline ThreadCallStack * getThreadCallStack() { ThreadCallStack *cs = (ThreadCallStack *)pthread_getspecific(threadKey); //è¯»å– if (cs == NULL) { cs = (ThreadCallStack *)malloc(sizeof(ThreadCallStack));#ifdef MAIN_THREAD_ONLY cs-&gt;file = (pthread_main_np()) ? newFileForThread() : NULL;#else cs-&gt;file = newFileForThread();#endif cs-&gt;isLoggingEnabled = (cs-&gt;file != NULL); cs-&gt;isCompleteLoggingEnabled = 0; cs-&gt;spacesStr = (char *)malloc(DEFAULT_CALLSTACK_DEPTH + 1); memset(cs-&gt;spacesStr, &apos; &apos;, DEFAULT_CALLSTACK_DEPTH); cs-&gt;spacesStr[DEFAULT_CALLSTACK_DEPTH] = &apos;\\0&apos;; cs-&gt;stack = (CallRecord *)calloc(DEFAULT_CALLSTACK_DEPTH, sizeof(CallRecord)); //åˆ†é… CallRecord é»˜è®¤ç©ºé—´ cs-&gt;allocatedLength = DEFAULT_CALLSTACK_DEPTH; cs-&gt;index = cs-&gt;lastPrintedIndex = cs-&gt;lastHitIndex = -1; cs-&gt;numWatchHits = 0; pthread_setspecific(threadKey, cs); //ä¿å­˜æ•°æ® } return cs;} è®°å½•æ–¹æ³•è°ƒç”¨æ·±åº¦å› ä¸ºè¦è®°å½•æ·±åº¦ï¼Œè€Œä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨é‡Œä¼šæœ‰æ›´å¤šçš„æ–¹æ³•è°ƒç”¨ï¼Œæ‰€ä»¥æ–¹æ³•çš„è°ƒç”¨å†™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«è®°å½•å¼€å§‹ pushCallRecord å’Œè®°å½•ç»“æŸçš„æ—¶åˆ» popCallRecordï¼Œè¿™æ ·æ‰èƒ½å¤Ÿé€šè¿‡åœ¨å¼€å§‹æ—¶å¯¹æ·±åº¦åŠ ä¸€åœ¨ç»“æŸæ—¶å‡ä¸€ã€‚ 1234567891011121314151617181920//å¼€å§‹æ—¶static inline void pushCallRecord(id obj, uintptr_t lr, SEL _cmd, ThreadCallStack *cs) { int nextIndex = (++cs-&gt;index); //å¢åŠ æ·±åº¦ if (nextIndex &gt;= cs-&gt;allocatedLength) { cs-&gt;allocatedLength += CALLSTACK_DEPTH_INCREMENT; cs-&gt;stack = (CallRecord *)realloc(cs-&gt;stack, cs-&gt;allocatedLength * sizeof(CallRecord)); cs-&gt;spacesStr = (char *)realloc(cs-&gt;spacesStr, cs-&gt;allocatedLength + 1); memset(cs-&gt;spacesStr, &apos; &apos;, cs-&gt;allocatedLength); cs-&gt;spacesStr[cs-&gt;allocatedLength] = &apos;\\0&apos;; } CallRecord *newRecord = &amp;cs-&gt;stack[nextIndex]; newRecord-&gt;obj = obj; newRecord-&gt;_cmd = _cmd; newRecord-&gt;lr = lr; newRecord-&gt;isWatchHit = 0;}//ç»“æŸæ—¶static inline CallRecord * popCallRecord(ThreadCallStack *cs) { return &amp;cs-&gt;stack[cs-&gt;index--]; //å‡å°‘æ·±åº¦} åœ¨ objc_msgSend å‰åæ’å…¥æ‰§è¡Œæ–¹æ³•æœ€åæ˜¯ hook objc_msgSend éœ€è¦åœ¨è°ƒç”¨å‰å’Œè°ƒç”¨ååˆ†åˆ«åŠ å…¥ pushCallRecord å’Œ popCallRecordã€‚å› ä¸ºéœ€è¦åœ¨è°ƒç”¨åè¿™ä¸ªæ—¶æœºæ’å…¥ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œä¸”ä¸å¯èƒ½ç¼–å†™ä¸€ä¸ªä¿ç•™æœªçŸ¥å‚æ•°å¹¶è·³è½¬åˆ° c ä¸­ä»»æ„å‡½æ•°æŒ‡é’ˆçš„å‡½æ•°ï¼Œé‚£ä¹ˆè¿™å°±éœ€è¦ç”¨åˆ°æ±‡ç¼–æ¥åšåˆ°ã€‚ ä¸‹é¢é’ˆå¯¹ arm64 è¿›è¡Œåˆ†æï¼Œarm64 æœ‰31ä¸ª64 bit çš„æ•´æ•°å‹å¯„å­˜å™¨ï¼Œç”¨ x0 åˆ° x30 è¡¨ç¤ºï¼Œä¸»è¦æ€è·¯å°±æ˜¯å…ˆå…¥æ ˆå‚æ•°ï¼Œå‚æ•°å¯„å­˜å™¨æ˜¯ x0 - x7ï¼Œå¯¹äºobjc_msgSendæ–¹æ³•æ¥è¯´ x0 ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¼ å…¥å¯¹è±¡ï¼Œx1 ç¬¬äºŒä¸ªå‚æ•°æ˜¯é€‰æ‹©å™¨ _cmdã€‚ syscall çš„ number ä¼šæ”¾åˆ° x8 é‡Œã€‚ç„¶åäº¤æ¢å¯„å­˜å™¨ä¸­ï¼Œå°†ç”¨äºè¿”å›çš„å¯„å­˜å™¨ lr ç§»åˆ° x1 é‡Œã€‚å…ˆè®© pushCallRecord èƒ½å¤Ÿæ‰§è¡Œï¼Œå†æ‰§è¡ŒåŸå§‹çš„ objc_msgSendï¼Œä¿å­˜è¿”å›å€¼ï¼Œæœ€åè®© popCallRecord èƒ½æ‰§è¡Œã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768static void replacementObjc_msgSend() { __asm__ volatile ( // sp æ˜¯å †æ ˆå¯„å­˜å™¨ï¼Œå­˜æ”¾æ ˆçš„åç§»åœ°å€ï¼Œæ¯æ¬¡éƒ½æŒ‡å‘æ ˆé¡¶ã€‚ // ä¿å­˜ {q0-q7} åç§»åœ°å€åˆ° sp å¯„å­˜å™¨ &quot;stp q6, q7, [sp, #-32]!\\n&quot; &quot;stp q4, q5, [sp, #-32]!\\n&quot; &quot;stp q2, q3, [sp, #-32]!\\n&quot; &quot;stp q0, q1, [sp, #-32]!\\n&quot; // ä¿å­˜ {x0-x8, lr} &quot;stp x8, lr, [sp, #-16]!\\n&quot; &quot;stp x6, x7, [sp, #-16]!\\n&quot; &quot;stp x4, x5, [sp, #-16]!\\n&quot; &quot;stp x2, x3, [sp, #-16]!\\n&quot; &quot;stp x0, x1, [sp, #-16]!\\n&quot; // äº¤æ¢å‚æ•°. &quot;mov x2, x1\\n&quot; &quot;mov x1, lr\\n&quot; &quot;mov x3, sp\\n&quot; // è°ƒç”¨ preObjc_msgSendï¼Œä½¿ç”¨ bl label è¯­æ³•ã€‚bl æ‰§è¡Œä¸€ä¸ªåˆ†æ”¯é“¾æ¥æ“ä½œï¼Œlabel æ˜¯æ— æ¡ä»¶åˆ†æ”¯çš„ï¼Œæ˜¯å’Œæœ¬æŒ‡ä»¤çš„åœ°å€åç§»ï¼ŒèŒƒå›´æ˜¯ -128MB åˆ° +128MB &quot;bl __Z15preObjc_msgSendP11objc_objectmP13objc_selectorP9RegState_\\n&quot; &quot;mov x9, x0\\n&quot; &quot;mov x10, x1\\n&quot; &quot;tst x10, x10\\n&quot; // è¯»å– {x0-x8, lr} ä»ä¿å­˜åˆ° sp æ ˆé¡¶çš„åç§»åœ°å€è¯»èµ· &quot;ldp x0, x1, [sp], #16\\n&quot; &quot;ldp x2, x3, [sp], #16\\n&quot; &quot;ldp x4, x5, [sp], #16\\n&quot; &quot;ldp x6, x7, [sp], #16\\n&quot; &quot;ldp x8, lr, [sp], #16\\n&quot; // è¯»å– {q0-q7} &quot;ldp q0, q1, [sp], #32\\n&quot; &quot;ldp q2, q3, [sp], #32\\n&quot; &quot;ldp q4, q5, [sp], #32\\n&quot; &quot;ldp q6, q7, [sp], #32\\n&quot; &quot;b.eq Lpassthrough\\n&quot; // è°ƒç”¨åŸå§‹ objc_msgSendã€‚ä½¿ç”¨ blr xn è¯­æ³•ã€‚blr é™¤äº†ä»æŒ‡å®šå¯„å­˜å™¨è¯»å–æ–°çš„ PC å€¼å¤–æ•ˆæœå’Œ bl ä¸€æ ·ã€‚xn æ˜¯é€šç”¨å¯„å­˜å™¨çš„64ä½åç§°åˆ†æ”¯åœ°å€ï¼ŒèŒƒå›´0åˆ°31 &quot;blr x9\\n&quot; // ä¿å­˜ {x0-x9} &quot;stp x0, x1, [sp, #-16]!\\n&quot; &quot;stp x2, x3, [sp, #-16]!\\n&quot; &quot;stp x4, x5, [sp, #-16]!\\n&quot; &quot;stp x6, x7, [sp, #-16]!\\n&quot; &quot;stp x8, x9, [sp, #-16]!\\n&quot; // ä¿å­˜ {q0-q7} &quot;stp q0, q1, [sp, #-32]!\\n&quot; &quot;stp q2, q3, [sp, #-32]!\\n&quot; &quot;stp q4, q5, [sp, #-32]!\\n&quot; &quot;stp q6, q7, [sp, #-32]!\\n&quot; // è°ƒç”¨ postObjc_msgSend hook. &quot;bl __Z16postObjc_msgSendv\\n&quot; &quot;mov lr, x0\\n&quot; // è¯»å– {q0-q7} &quot;ldp q6, q7, [sp], #32\\n&quot; &quot;ldp q4, q5, [sp], #32\\n&quot; &quot;ldp q2, q3, [sp], #32\\n&quot; &quot;ldp q0, q1, [sp], #32\\n&quot; // è¯»å– {x0-x9} &quot;ldp x8, x9, [sp], #16\\n&quot; &quot;ldp x6, x7, [sp], #16\\n&quot; &quot;ldp x4, x5, [sp], #16\\n&quot; &quot;ldp x2, x3, [sp], #16\\n&quot; &quot;ldp x0, x1, [sp], #16\\n&quot; &quot;ret\\n&quot; &quot;Lpassthrough:\\n&quot; // br æ— æ¡ä»¶åˆ†æ”¯åˆ°å¯„å­˜å™¨ä¸­çš„åœ°å€ &quot;br x9&quot; );} è®°å½•æ—¶é—´çš„æ–¹æ³•ä¸ºäº†è®°å½•è€—æ—¶ï¼Œè¿™æ ·å°±éœ€è¦åœ¨ pushCallRecord å’Œ popCallRecord é‡Œè®°å½•ä¸‹æ—¶é—´ã€‚ä¸‹é¢åˆ—å‡ºä¸€äº›è®¡ç®—ä¸€æ®µä»£ç å¼€å§‹åˆ°ç»“æŸçš„æ—¶é—´çš„æ–¹æ³• ç¬¬ä¸€ç§ï¼š NSDate å¾®ç§’ 1234NSDate* tmpStartData = [NSDate date];//some code need caculatedouble deltaTime = [[NSDate date] timeIntervalSinceDate:tmpStartData];NSLog(@&quot;cost time: %f s&quot;, deltaTime); ç¬¬äºŒç§ï¼šclock_t å¾®ç§’clock_tè®¡æ—¶æ‰€è¡¨ç¤ºçš„æ˜¯å ç”¨CPUçš„æ—¶é’Ÿå•å…ƒ 1234clock_t start = clock();//some code need caculateclock_t end = clock();NSLog(@&quot;cost time: %f s&quot;, (double)(end - start)/CLOCKS_PER_SEC); ç¬¬ä¸‰ç§ï¼šCFAbsoluteTime å¾®ç§’ 1234CFAbsoluteTime start = CFAbsoluteTimeGetCurrent();//some code need caculateCFAbsoluteTime end = CFAbsoluteTimeGetCurrent();NSLog(@&quot;cost time = %f s&quot;, end - start); //s ç¬¬å››ç§ï¼šCFTimeInterval çº³ç§’ 12345678910CFTimeInterval start = CACurrentMediaTime();//some code need caculateCFTimeInterval end = CACurrentMediaTime();NSLog(@&quot;cost time: %f s&quot;, end - start);```ç¬¬äº”ç§ï¼šmach_absolute_time çº³ç§’```objcuint64_t start = mach_absolute_time ();//some code need caculateuint64_t end = mach_absolute_time ();uint64_t elapsed = 1e-9 *(end - start); æœ€åä¸¤ç§å¯ç”¨ï¼Œæœ¬è´¨åŒºåˆ«NSDate æˆ– CFAbsoluteTimeGetCurrent() è¿”å›çš„æ—¶é’Ÿæ—¶é—´å°†ä¼šä¼šç½‘ç»œæ—¶é—´åŒæ­¥ï¼Œä»æ—¶é’Ÿ åç§»é‡çš„è§’åº¦ã€‚mach_absolute_time() å’Œ CACurrentMediaTime() æ˜¯åŸºäºå†…å»ºæ—¶é’Ÿçš„ã€‚é€‰æ‹©ä¸€ç§ï¼ŒåŠ åˆ° pushCallRecord å’Œ popCallRecord é‡Œï¼Œç›¸å‡å°±èƒ½å¤Ÿè·å¾—è€—æ—¶ã€‚ å¦‚ä½• hook msgsend æ–¹æ³•é‚£ä¹ˆ objc_msgSend è¿™ä¸ª c æ–¹æ³•æ˜¯å¦‚ä½• hook åˆ°çš„å‘¢ã€‚é¦–å…ˆäº†è§£ä¸‹ dyld æ˜¯é€šè¿‡æ›´æ–° Mach-O äºŒè¿›åˆ¶çš„ __DATA segment ç‰¹å®šçš„éƒ¨åˆ†ä¸­çš„æŒ‡é’ˆæ¥é‚¦å®š lazy å’Œ non-lazy ç¬¦å·ï¼Œé€šè¿‡ç¡®è®¤ä¼ é€’ç»™ rebind_symbol é‡Œæ¯ä¸ªç¬¦å·åç§°æ›´æ–°çš„ä½ç½®å°±å¯ä»¥æ‰¾å‡ºå¯¹åº”æ›¿æ¢æ¥é‡æ–°ç»‘å®šè¿™äº›ç¬¦å·ã€‚ä¸‹é¢é’ˆå¯¹å…³é”®ä»£ç è¿›è¡Œåˆ†æï¼š éå† dyldé¦–å…ˆæ˜¯éå† dyld é‡Œçš„æ‰€æœ‰çš„ imageï¼Œå–å‡º image header å’Œ slideã€‚æ³¨æ„ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ä¸»è¦æ³¨å†Œ callbackã€‚ 12345678if (!_rebindings_head-&gt;next) { _dyld_register_func_for_add_image(_rebind_symbols_for_image);} else { uint32_t c = _dyld_image_count(); for (uint32_t i = 0; i &lt; c; i++) { _rebind_symbols_for_image(_dyld_get_image_header(i), _dyld_get_image_vmaddr_slide(i)); }} æ‰¾å‡ºç¬¦å·è¡¨ç›¸å…³ Commandæ¥ä¸‹æ¥éœ€è¦æ‰¾åˆ°ç¬¦å·è¡¨ç›¸å…³çš„ commandï¼ŒåŒ…æ‹¬ linkedit segment commandï¼Œsymtab command å’Œ dysymtab commandã€‚æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718segment_command_t *cur_seg_cmd;segment_command_t *linkedit_segment = NULL;struct symtab_command* symtab_cmd = NULL;struct dysymtab_command* dysymtab_cmd = NULL;uintptr_t cur = (uintptr_t)header + sizeof(mach_header_t);for (uint i = 0; i &lt; header-&gt;ncmds; i++, cur += cur_seg_cmd-&gt;cmdsize) { cur_seg_cmd = (segment_command_t *)cur; if (cur_seg_cmd-&gt;cmd == LC_SEGMENT_ARCH_DEPENDENT) { if (strcmp(cur_seg_cmd-&gt;segname, SEG_LINKEDIT) == 0) { linkedit_segment = cur_seg_cmd; } } else if (cur_seg_cmd-&gt;cmd == LC_SYMTAB) { symtab_cmd = (struct symtab_command*)cur_seg_cmd; } else if (cur_seg_cmd-&gt;cmd == LC_DYSYMTAB) { dysymtab_cmd = (struct dysymtab_command*)cur_seg_cmd; }} è·å¾— base å’Œ indirect ç¬¦å·è¡¨1234567// Find base symbol/string table addressesuintptr_t linkedit_base = (uintptr_t)slide + linkedit_segment-&gt;vmaddr - linkedit_segment-&gt;fileoff;nlist_t *symtab = (nlist_t *)(linkedit_base + symtab_cmd-&gt;symoff);char *strtab = (char *)(linkedit_base + symtab_cmd-&gt;stroff);// Get indirect symbol table (array of uint32_t indices into symbol table)uint32_t *indirect_symtab = (uint32_t *)(linkedit_base + dysymtab_cmd-&gt;indirectsymoff); è¿›è¡Œæ–¹æ³•æ›¿æ¢æœ‰äº†ç¬¦å·è¡¨å’Œä¼ å…¥çš„æ–¹æ³•æ›¿æ¢æ•°ç»„å°±å¯ä»¥è¿›è¡Œç¬¦å·è¡¨è®¿é—®æŒ‡é’ˆåœ°å€çš„æ›¿æ¢ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728uint32_t *indirect_symbol_indices = indirect_symtab + section-&gt;reserved1;void **indirect_symbol_bindings = (void **)((uintptr_t)slide + section-&gt;addr);for (uint i = 0; i &lt; section-&gt;size / sizeof(void *); i++) { uint32_t symtab_index = indirect_symbol_indices[i]; if (symtab_index == INDIRECT_SYMBOL_ABS || symtab_index == INDIRECT_SYMBOL_LOCAL || symtab_index == (INDIRECT_SYMBOL_LOCAL | INDIRECT_SYMBOL_ABS)) { continue; } uint32_t strtab_offset = symtab[symtab_index].n_un.n_strx; char *symbol_name = strtab + strtab_offset; if (strnlen(symbol_name, 2) &lt; 2) { continue; } struct rebindings_entry *cur = rebindings; while (cur) { for (uint j = 0; j &lt; cur-&gt;rebindings_nel; j++) { if (strcmp(&amp;symbol_name[1], cur-&gt;rebindings[j].name) == 0) { if (cur-&gt;rebindings[j].replaced != NULL &amp;&amp; indirect_symbol_bindings[i] != cur-&gt;rebindings[j].replacement) { *(cur-&gt;rebindings[j].replaced) = indirect_symbol_bindings[i]; } indirect_symbol_bindings[i] = cur-&gt;rebindings[j].replacement; goto symbol_loop; } } cur = cur-&gt;next; }symbol_loop:; ç»Ÿè®¡æ–¹æ³•è°ƒç”¨é¢‘æ¬¡åœ¨ä¸€äº›åº”ç”¨åœºæ™¯ä¼šæœ‰ä¸€äº›é¢‘ç¹çš„æ–¹æ³•è°ƒç”¨ï¼Œæœ‰äº›æ–¹æ³•çš„è°ƒç”¨å®é™…ä¸Šæ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œä½†æ˜¯é¦–å…ˆæ˜¯éœ€è¦å°†é‚£äº›é¢‘ç¹è°ƒç”¨çš„æ–¹æ³•æ‰¾å‡ºæ¥è¿™æ ·æ‰èƒ½å¤Ÿæ›´å¥½çš„å®šä½åˆ°æ½œåœ¨çš„ä¼šé€ æˆæ€§èƒ½æµªè´¹çš„æ–¹æ³•ä½¿ç”¨ã€‚è¿™äº›é¢‘ç¹è°ƒç”¨çš„æ–¹æ³•è¦æ€ä¹ˆæ‰¾å‘¢ï¼Ÿ å¤§è‡´çš„æ€è·¯æ˜¯è¿™æ ·ï¼ŒåŸºäºä¸Šé¢ç« èŠ‚æåˆ°çš„è®°å½•æ–¹æ³•è°ƒç”¨æ·±åº¦çš„æ–¹æ¡ˆï¼Œå°†æ¯ä¸ªè°ƒç”¨æ–¹æ³•çš„è·¯å¾„ä¿å­˜ä½ï¼Œè°ƒç”¨ç›¸åŒè·¯å¾„çš„ç›¸åŒæ–¹æ³•è°ƒç”¨ä¸€æ¬¡åŠ ä¸€è®°å½•åœ¨æ•°æ®åº“ä¸­ï¼Œæœ€ååšä¸€ä¸ªè§†å›¾æŒ‰ç…§è°ƒç”¨æ¬¡æ•°çš„æ’åºå³å¯æ‰¾åˆ°è°ƒç”¨é¢‘ç¹çš„é‚£äº›æ–¹æ³•ã€‚ä¸‹å›¾æ˜¯å®Œæˆåå±•ç¤ºçš„æ•ˆæœï¼š æ¥ä¸‹æ¥çœ‹çœ‹å…·ä½“å®ç°æ–¹å¼ è®¾è®¡æ–¹æ³•è°ƒç”¨é¢‘æ¬¡è®°å½•çš„ç»“æ„åœ¨å…ˆå‰æ—¶é—´æ¶ˆè€—çš„ model åŸºç¡€ä¸Šå¢åŠ è·¯å¾„ï¼Œé¢‘æ¬¡ç­‰ä¿¡æ¯ 123456789@property (nonatomic, strong) NSString *className; //ç±»å@property (nonatomic, strong) NSString *methodName; //æ–¹æ³•å@property (nonatomic, assign) BOOL isClassMethod; //æ˜¯å¦æ˜¯ç±»æ–¹æ³•@property (nonatomic, assign) NSTimeInterval timeCost; //æ—¶é—´æ¶ˆè€—@property (nonatomic, assign) NSUInteger callDepth; //Call å±‚çº§@property (nonatomic, copy) NSString *path; //è·¯å¾„@property (nonatomic, assign) BOOL lastCall; //æ˜¯å¦æ˜¯æœ€åä¸€ä¸ª Call@property (nonatomic, assign) NSUInteger frequency; //è®¿é—®é¢‘æ¬¡@property (nonatomic, strong) NSArray &lt;SMCallTraceTimeCostModel *&gt; *subCosts; æ‹¼è£…æ–¹æ³•è·¯å¾„åœ¨éå† SMCallTrace è®°å½•çš„æ–¹æ³• model å’Œ éå†æ–¹æ³•å­æ–¹æ³•æ—¶å°†è·¯å¾„æ‹¼è£…å¥½ï¼Œè®°å½•åˆ°æ•°æ®åº“ä¸­ 12345678910111213141516171819for (SMCallTraceTimeCostModel *model in arr) { //è®°å½•æ–¹æ³•è·¯å¾„ model.path = [NSString stringWithFormat:@&quot;[%@ %@]&quot;,model.className,model.methodName]; [self appendRecord:model to:mStr];}+ (void)appendRecord:(SMCallTraceTimeCostModel *)cost to:(NSMutableString *)mStr { [mStr appendFormat:@&quot;%@\\n path%@\\n&quot;,[cost des],cost.path]; if (cost.subCosts.count &lt; 1) { cost.lastCall = YES; } //è®°å½•åˆ°æ•°æ®åº“ä¸­ [[[SMLagDB shareInstance] increaseWithClsCallModel:cost] subscribeNext:^(id x) {}]; for (SMCallTraceTimeCostModel *model in cost.subCosts) { //è®°å½•æ–¹æ³•çš„å­æ–¹æ³•çš„è·¯å¾„ model.path = [NSString stringWithFormat:@&quot;%@ - [%@ %@]&quot;,cost.path,model.className,model.methodName]; [self appendRecord:model to:mStr]; }} è®°å½•æ–¹æ³•è°ƒç”¨é¢‘æ¬¡æ•°æ®åº“åˆ›å»ºæ•°æ®åº“è¿™é‡Œçš„ lastcall æ˜¯è®°å½•æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ï¼Œå±•ç¤ºæ—¶åªå–æœ€åä¸€ä¸ªæ–¹æ³•å³å¯ï¼Œå› ä¸ºä¹Ÿä¼šæœ‰å®Œæ•´è·¯å¾„å¯ä»¥çŸ¥é“çˆ¶æ–¹æ³•å’Œæ¥æºæ–¹æ³•ã€‚ 12345678910111213141516171819_clsCallDBPath = [PATH_OF_DOCUMENT stringByAppendingPathComponent:@&quot;clsCall.sqlite&quot;];if ([[NSFileManager defaultManager] fileExistsAtPath:_clsCallDBPath] == NO) { FMDatabase *db = [FMDatabase databaseWithPath:_clsCallDBPath]; if ([db open]) { /* cid: ä¸»id fid: çˆ¶id æš‚æ—¶ä¸ç”¨ cls: ç±»å mtd: æ–¹æ³•å path: å®Œæ•´è·¯å¾„æ ‡è¯† timecost: æ–¹æ³•æ¶ˆè€—æ—¶é•¿ calldepth: å±‚çº§ frequency: è°ƒç”¨æ¬¡æ•° lastcall: æ˜¯å¦æ˜¯æœ€åä¸€ä¸ª call */ NSString *createSql = @&quot;create table clscall (cid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, fid integer, cls text, mtd text, path text, timecost integer, calldepth integer, frequency integer, lastcall integer)&quot;; [db executeUpdate:createSql]; }} æ·»åŠ è®°å½•æ·»åŠ è®°å½•æ—¶éœ€è¦å…ˆæ£€æŸ¥æ•°æ®åº“é‡Œæ˜¯å¦æœ‰ç›¸åŒè·¯å¾„çš„åŒä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œè¿™æ ·å¯ä»¥ç»™ frequency å­—æ®µåŠ ä¸€å·²è¾¾åˆ°è®°å½•é¢‘æ¬¡çš„ç›®çš„ã€‚ 12345678910111213141516FMResultSet *rsl = [db executeQuery:@&quot;select cid,frequency from clscall where path = ?&quot;, model.path];if ([rsl next]) { //æœ‰ç›¸åŒè·¯å¾„å°±æ›´æ–°è·¯å¾„è®¿é—®é¢‘ç‡ int fq = [rsl intForColumn:@&quot;frequency&quot;] + 1; int cid = [rsl intForColumn:@&quot;cid&quot;]; [db executeUpdate:@&quot;update clscall set frequency = ? where cid = ?&quot;, @(fq), @(cid)];} else { //æ²¡æœ‰å°±æ·»åŠ ä¸€æ¡è®°å½• NSNumber *lastCall = @0; if (model.lastCall) { lastCall = @1; } [db executeUpdate:@&quot;insert into clscall (cls, mtd, path, timecost, calldepth, frequency, lastcall) values (?, ?, ?, ?, ?, ?, ?)&quot;, model.className, model.methodName, model.path, @(model.timeCost), @(model.callDepth), @1, lastCall];}[db close];[subscriber sendCompleted]; æ£€ç´¢è®°å½•æ£€ç´¢æ—¶æ³¨æ„æŒ‰ç…§è°ƒç”¨é¢‘æ¬¡å­—æ®µè¿›è¡Œæ’åºå³å¯ã€‚ 123456789101112131415FMResultSet *rs = [db executeQuery:@&quot;select * from clscall where lastcall=? order by frequency desc limit ?, 50&quot;,@1, @(page * 50)];NSUInteger count = 0;NSMutableArray *arr = [NSMutableArray array];while ([rs next]) { SMCallTraceTimeCostModel *model = [self clsCallModelFromResultSet:rs]; [arr addObject:model]; count ++;}if (count &gt; 0) { [subscriber sendNext:arr];} else { [subscriber sendError:nil];}[subscriber sendCompleted];[db close]; æ‰¾å‡º CPU ä½¿ç”¨å¤§çš„çº¿ç¨‹å †æ ˆåœ¨å‰é¢æ£€æµ‹å¡é¡¿æ‰“å°çš„å †æ ˆé‡Œæåˆ°ä½¿ç”¨ thread_info èƒ½å¤Ÿè·å–åˆ°å„ä¸ªçº¿ç¨‹çš„ cpu æ¶ˆè€—ï¼Œä½†æ˜¯ cpu ä¸åœ¨ä¸»çº¿ç¨‹å³ä½¿æ¶ˆè€—å¾ˆå¤§ä¹Ÿä¸ä¸€å®šä¼šé€ æˆå¡é¡¿å¯¼è‡´å¡é¡¿æ£€æµ‹æ— æ³•æ£€æµ‹å‡ºæ›´å¤š cpu æ¶ˆè€—çš„æƒ…å†µï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡è½®è¯¢ç›‘æ§å„çº¿ç¨‹é‡Œçš„ cpu ä½¿ç”¨æƒ…å†µï¼Œå¯¹äºè¶…è¿‡æ ‡å‡†å€¼æ¯”å¦‚70%çš„è¿›è¡Œè®°å½•æ¥è·Ÿè¸ªå®šä½å‡ºè€—ç”µçš„é‚£äº›æ–¹æ³•ã€‚ä¸‹å›¾æ˜¯åˆ—å‡º cpu è¿‡è½½æ—¶çš„å †æ ˆè®°å½•çš„å±•ç¤ºæ•ˆæœï¼š æœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œå®ç°èµ·æ¥è½»æ¾å¤šäº† 12345678910111213141516171819202122232425262728//è½®è¯¢æ£€æŸ¥å¤šä¸ªçº¿ç¨‹ cpu æƒ…å†µ+ (void)updateCPU { thread_act_array_t threads; mach_msg_type_number_t threadCount = 0; const task_t thisTask = mach_task_self(); kern_return_t kr = task_threads(thisTask, &amp;threads, &amp;threadCount); if (kr != KERN_SUCCESS) { return; } for (int i = 0; i &lt; threadCount; i++) { thread_info_data_t threadInfo; thread_basic_info_t threadBaseInfo; mach_msg_type_number_t threadInfoCount = THREAD_INFO_MAX; if (thread_info((thread_act_t)threads[i], THREAD_BASIC_INFO, (thread_info_t)threadInfo, &amp;threadInfoCount) == KERN_SUCCESS) { threadBaseInfo = (thread_basic_info_t)threadInfo; if (!(threadBaseInfo-&gt;flags &amp; TH_FLAGS_IDLE)) { integer_t cpuUsage = threadBaseInfo-&gt;cpu_usage / 10; if (cpuUsage &gt; 70) { //cup æ¶ˆè€—å¤§äº 70 æ—¶æ‰“å°å’Œè®°å½•å †æ ˆ NSString *reStr = smStackOfThread(threads[i]); //è®°å½•æ•°æ®åº“ä¸­ [[[SMLagDB shareInstance] increaseWithStackString:reStr] subscribeNext:^(id x) {}]; NSLog(@&quot;CPU useage overload thread stackï¼š\\n%@&quot;,reStr); } } } }} Demoå·¥å…·å·²æ•´åˆåˆ°å…ˆå‰åšçš„ GCDFetchFeed é‡Œã€‚ å­çº¿ç¨‹æ£€æµ‹ä¸»çº¿ç¨‹å¡é¡¿ä½¿ç”¨çš„è¯åœ¨éœ€è¦å¼€å§‹æ£€æµ‹çš„åœ°æ–¹æ·»åŠ  [[SMLagMonitor shareInstance] beginMonitor]; å³å¯ã€‚ éœ€è¦æ£€æµ‹æ‰€æœ‰æ–¹æ³•è°ƒç”¨çš„ç”¨æ³•å°±æ˜¯åœ¨éœ€è¦æ£€æµ‹çš„åœ°æ–¹è°ƒç”¨ [SMCallTrace start]; å°±å¯ä»¥äº†ï¼Œä¸æ£€æµ‹æ‰“å°å‡ºç»“æœçš„è¯è°ƒç”¨ stop å’Œ save å°±å¥½äº†ã€‚è¿™é‡Œè¿˜å¯ä»¥è®¾ç½®æœ€å¤§æ·±åº¦å’Œæœ€å°è€—æ—¶æ£€æµ‹æ¥è¿‡æ»¤ä¸éœ€è¦çœ‹åˆ°çš„ä¿¡æ¯ã€‚ æ–¹æ³•è°ƒç”¨é¢‘æ¬¡ä½¿ç”¨å¯ä»¥åœ¨éœ€è¦å¼€å§‹ç»Ÿè®¡çš„åœ°æ–¹åŠ ä¸Š [SMCallTrace startWithMaxDepth:3]; è®°å½•æ—¶ä½¿ç”¨ [SMCallTrace stopSaveAndClean]; è®°å½•åˆ°åˆ°æ•°æ®åº“ä¸­åŒæ—¶æ¸…ç†å†…å­˜çš„å ç”¨ã€‚å¯ä»¥ hook VC çš„ viewWillAppear å’Œ viewWillDisappearï¼Œåœ¨ appear æ—¶å¼€å§‹è®°å½•ï¼Œåœ¨ disappear æ—¶è®°å½•åˆ°æ•°æ®åº“åŒæ—¶æ¸…ç†ä¸€æ¬¡ã€‚ç»“æœå±•ç¤ºçš„ view controller æ˜¯ SMClsCallViewControllerï¼Œpush å‡ºæ¥å°±èƒ½å¤Ÿçœ‹åˆ°åˆ—è¡¨ç»“æœã€‚ èµ„æ–™WWDC WWDC 2013 224 Designing Code for Performance WWDC 2013 408 Optimizing Your Code Using LLVM WWDC 2013 712 Energy Best Practices WWDC 2014 710 writing energy efficient code part 1 WWDC 2014 710 writing energy efficient code part 2 WWDC 2015 230 performance on ios and watchos WWDC 2015 707 achieving allday battery life WWDC 2015 708 debugging energy issues WWDC 2015 718 building responsive and efficient apps with gcd WWDC 2016 406 optimizing app startup time WWDC 2016 719 optimizing io for performance and battery life WWDC 2017 238 writing energy efficient apps WWDC 2017 706 modernizing grand central dispatch usage","link":"/program/ï£¿/pou-xi/"},{"title":"UIView","text":"è§†å›¾å±‚çº§UIViewæœ‰ä¸‰ä¸ªåŸºç±»ï¼šUIResponderï¼ŒUIViewå’ŒUIControlã€‚ UIResponderï¼šæ˜¯UIViewçš„çˆ¶ç±»ã€‚responderå¤„ç†è§¦æ‘¸ï¼Œæ‰‹åŠ¿ï¼Œè¿œç¨‹æ§åˆ¶äº‹ä»¶ã€‚UIApplicationå’ŒUIViewControllerä¹Ÿæ˜¯UIResponderçš„å­ç±»ã€‚ UIViewï¼šå¤„ç†ç»˜åˆ¶å’Œè§¦æ‘¸æ—¶é—´ã€‚ UIControlï¼šæœ‰target/actionæ¨¡å¼ã€‚buttonï¼ŒDate pickersï¼Œæ–‡æœ¬æ¡†éƒ½æ˜¯ã€‚ æ¸²æŸ“é¿å…ä½¿ç”¨drawRect:åœ¨CPUä¸Šåšæ¸²æŸ“ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨GPUæ¸²æŸ“å°±ä½¿ç”¨ç°æœ‰çš„è§†å›¾æ„å»ºè‡ªå®šä¹‰è§†å›¾ã€‚å¦‚æœè¦å®ç°ä¸€ä¸ªå¸¦è¾¹æ¡†çš„åœ†å½¢å¤´åƒ 1234567- (void)setupView{ self.clipsToBounds = YES; self.layer.cornerRadius = self.bounds.size.width / 2; self.layer.borderWidth = 3; self.layer.borderColor = [UIColor darkGrayColor].CGColor;} æ¸²æŸ“é€Ÿåº¦æ¯”è¾ƒ OpenGL -&gt; Core Image -&gt; Core Graphics è‡ªå®šä¹‰äº¤äº’å“åº”è§¦æ‘¸ï¼Œå¯ä»¥ä½¿ç”¨é‡å†™æ›´åŠ åº•å±‚çš„touchesBeganï¼ŒtouchesMovedå’ŒtouchesEndedæ–¹æ³•ã€‚è¿˜å¯ä»¥ä½¿ç”¨å…¶å®ƒä¸åŒçš„æ–¹æ³•æ¥è§£å†³æ¯”å¦‚target actionï¼Œä»£ç†ï¼Œblockï¼ŒKVOæˆ–é€šçŸ¥ Target actionï¼šæœ€æ–¹ä¾¿çš„åšæ³•ï¼Œä¹Ÿæ˜¯æœ€å­¦é™¢æ´¾çš„ã€‚ 1234567891011121314[self sendActionsForControlEvents:UIControlEventValueChanged];//å¦‚æœä¸€ä¸ªview controllerç®¡ç†è¿™ä¸ªè§†å›¾- (void)setupPieChart{ [self.pieChart addTarget:self action:@selector(updateSelection:) forControlEvents:UIControlEventValueChanged];}- (void)updateSelection:(id)sender{ NSLog(@&quot;%@&quot;, self.pieChart.selectedSector);} ä½¿ç”¨ä»£ç†12345678910111213141516[self.delegate pieChart:self didSelectSector:self.selectedSector];//åœ¨view controllerä¸­ä»£ç @interface MyViewController &lt;PieChartDelegate&gt;...- (void)setupPieChart{ self.pieChart.delegate = self;}- (void)pieChart:(PieChart*)pieChart didSelectSector:(PieChartSector*)sector{ // å¤„ç†åŒºå—} ä½¿ç”¨Block12345678910111213141516171819202122232425@interface PieChart : UIControl@property (nonatomic,copy) void(^selectionHandler)(PieChartSection* selectedSection);@end//åœ¨æ‰§è¡Œä¹‹å‰æ£€æŸ¥ä¸‹blockæ˜¯å¦è¢«èµ‹å€¼ï¼Œæœªè¢«èµ‹å€¼çš„blockä¼šå´©if (self.selectionHandler != NULL) { self.selectionHandler(self.selectedSection);}//å¯ä»¥æŠŠç›¸å…³çš„ä»£ç æ•´åˆåœ¨view controllerä¸­- (void)setupPieChart{ self.pieChart.selectionHandler = ^(PieChartSection* section) { // å¤„ç†åŒºå— }}//é¿å…å¼•ç”¨å¾ªç¯__weak id weakSelf = self;self.pieChart.selectionHandler = ^(PieChartSection* section) { MyViewController* strongSelf = weakSelf; [strongSelf handleSectionChange:section];} ä½¿ç”¨KVO12345678910111213self.selectedSegment = theNewSelectedSegment;- (void)setupPieChart{ [self.pieChart addObserver:self forKeyPath:@&quot;selectedSegment&quot; options:0 context:NULL];}- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{ if(object == self.pieChart &amp;&amp; [keyPath isEqualToString:@&quot;selectedSegment&quot;]) { // å¤„ç†æ”¹å˜ }}//åœ¨viewWillDisappearï¼šæˆ–deallocä¸­ç§»é™¤è§‚å¯Ÿè€…ã€‚ ä½¿ç”¨é€šçŸ¥1234567891011121314151617181920212223242526//å¤´æ–‡ä»¶ä¸­extern NSString* const SelectedSegmentChangedNotification;//å®ç°çš„æ–‡ä»¶ä¸­NSString* const SelectedSegmentChangedNotification = @&quot;selectedSegmentChangedNotification&quot;;...- (void)notifyAboutChanges{ [[NSNotificationCenter defaultCenter] postNotificationName:SelectedSegmentChangedNotification object:self];}//ç°åœ¨è®¢é˜…é€šçŸ¥ï¼Œåœ¨view controllerä¸­å®ç°- (void)setupPieChart{ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(segmentChanged:) name:SelectedSegmentChangedNotification object:self.pieChart];}...- (void)segmentChanged:(NSNotification*)note{}//æ³¨æ„åœ¨åˆé€‚çš„åœ°æ–¹é€€è®¢é€šçŸ¥ ming1016","link":"/program/ï£¿/uiview/"},{"title":"å†è°ˆiOSé™æ€åº“","text":"1.ç°åœ¨æ¡Œé¢åˆ›å»ºæ–‡ä»¶å¤¹ SHTestSDk 2.æ‰“å¼€Xcode,åˆ›å»ºä¸€ä¸ªworkspace æµç¨‹: Xcodeâ€”Fileâ€”Newâ€”Workspace å¿«æ·é”® :command +N = åˆ›å»ºé¡¹ç›® 3.æŠŠåˆ›å»ºå¥½çš„æ·»åŠ åˆ° æ–‡ä»¶åä¸º SHTestSDK é‡Œé¢ å›¾1: å›¾2: å›¾3:åˆ›å»ºæˆåŠŸæ•ˆæœ 1ã€æ‰“å¼€SHTestSDK.xcworkspaceæ–‡ä»¶ï¼Œåˆ›å»ºproject å›¾4: å›¾5: å›¾6: å›¾7: å›¾8:æˆåŠŸæ•ˆæœå›¾ å›¾9: å›¾10: å›¾11:æˆåŠŸæ•ˆæœå›¾ 1.è¿™é‡Œåˆ›å»ºä¸€ä¸ªSHViewç±»ï¼Œç»§æ‰¿äºUIViewï¼Œç®€å•çš„é‡å†™äº†åˆå§‹åŒ–æ–¹æ³•ï¼Œè®¾ç½®äº†é¢œè‰² å›¾12: 2.è®¾ç½®Build Settingå‚æ•° å°†Build Active Architecture onlyè®¾ç½®ä¸ºNO, å›¾13: 3.è®¾ç½®Build Settingå‚æ•° åœ¨Architecturesä¸‹å¢åŠ armv7s å›¾14: 4.è®¾ç½®Headersï¼Œå°†è¦å…¬å¼€çš„å¤´æ–‡ä»¶æ‹–åˆ°Publicä¸‹ï¼Œè¦éšè—çš„æ”¾åˆ°Privateæˆ–Projectä¸‹ï¼Œéšè—çš„å¤´æ–‡ä»¶ä¸èƒ½è¢«å¼•ç”¨,æ•ˆæœå›¾: å›¾15: 5.åœ¨SHTestSDK.h(å¿…é¡»æ˜¯å…¬å¼€çš„ï¼Œå¦åˆ™æ— æ³•å¼•ç”¨)ä¸­å°†æ‰€æœ‰è¦å…¬å¼€çš„.hå¼•å…¥ 6.åˆ›å»ºä¸€ä¸ªAggregare å›¾16: å›¾17: 7.åµŒå…¥è„šæœ¬ï¼Œé€‰ä¸­åˆšåˆšåˆ›å»ºçš„Aggregare,ç„¶åé€‰ä¸­å³ä¾§çš„Build Phases,ç‚¹å‡»å·¦è¾¹çš„+å·ï¼Œé€‰æ‹©New Run Script Phases å›¾18: å›¾19: 8.ä¸‹é¢æŠŠè¿™æ®µè„šæœ¬å¤åˆ¶è¿›å»ï¼ˆæ ¼å¼ä¸è¦é”™ï¼Œæ ¼å¼é”™ç¼–è¯‘ä¸é€šè¿‡ï¼‰ 1234567891011121314151617181920212223242526# Sets the target folders and the final framework product.# å¦‚æœå·¥ç¨‹åç§°å’ŒFrameworkçš„Targetåç§°ä¸ä¸€æ ·çš„è¯ï¼Œè¦è‡ªå®šä¹‰FMKNAME# ä¾‹å¦‚: FMK_NAME = &quot;MyFramework&quot;FMK_NAME=${PROJECT_NAME}# Install dir will be the final output to the framework.# The following line create it in the root folder of the current project.INSTALL_DIR=${SRCROOT}/Products/${FMK_NAME}.framework# Working dir will be deleted after the framework creation.WRK_DIR=buildDEVICE_DIR=${WRK_DIR}/Release-iphoneos/${FMK_NAME}.frameworkSIMULATOR_DIR=${WRK_DIR}/Release-iphonesimulator/${FMK_NAME}.framework# -configuration ${CONFIGURATION}# Clean and Building both architectures.xcodebuild -configuration &quot;Release&quot; -target &quot;${FMK_NAME}&quot; -sdk iphoneos clean buildxcodebuild -configuration &quot;Release&quot; -target &quot;${FMK_NAME}&quot; -sdk iphonesimulator clean build# Cleaning the oldest.if [ -d &quot;${INSTALL_DIR}&quot; ]thenrm -rf &quot;${INSTALL_DIR}&quot;fimkdir -p &quot;${INSTALL_DIR}&quot;cp -R &quot;${DEVICE_DIR}/&quot; &quot;${INSTALL_DIR}/&quot;# Uses the Lipo Tool to merge both binary files (i386 + armv6/armv7) into one Universal final product.lipo -create &quot;${DEVICE_DIR}/${FMK_NAME}&quot; &quot;${SIMULATOR_DIR}/${FMK_NAME}&quot; -output &quot;${INSTALL_DIR}/${FMK_NAME}&quot;rm -r &quot;${WRK_DIR}&quot;open &quot;${INSTALL_DIR}&quot; å›¾20:æ•ˆæœå›¾: 9.æœ€åç¼–è¯‘ï¼Œcommand + Bï¼Œç¼–è¯‘é€šè¿‡åœ¨finderä¸­æ‰¾åˆ°frameworkï¼Œæ‹·è´å‡ºæ¥ å›¾21: å›¾22:æ•ˆæœå›¾ 1.æŠŠæ‰“åŒ…å¥½çš„frameworkæ‹–åˆ°demoé‡Œé¢ å›¾23: 2.ä½¿ç”¨SDKï¼Œè¿è¡Œdemo å›¾24: å›¾25:æ•ˆæœå›¾: æ³¨æ„:ä»¥ä¸ŠåŠŸèƒ½å°±æ˜¯SDK å’Œ demo ç›¸å…³è”å¥½äº†. 1.ä¿®æ”¹ä¸‹é¢SDKä¸­çš„ä»£ç ï¼Œè¿è¡Œdemoå°±æ˜¯ä¿®æ”¹åçš„æ•ˆæœï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«çš„åœ¨è¿™ä¸ªå·¥ç¨‹é‡Œé¢å¼€å‘è°ƒè¯•SDKäº†ï¼Œå¦‚æœæˆ‘æŠŠMyViewçš„é¢œè‰²è®¾ç½®ä¸ºyellowï¼Œå†å»è¿è¡Œdemoï¼Œçœ‹ä¸€ä¸‹æ•ˆæœ å›¾26: åŸæ–‡é“¾æ¥ğŸ‘‡","link":"/program/apple/framework2/"},{"title":"æ·±å…¥å‰–æ-iOS-ç¼–è¯‘-Clang---LLVM","text":"å‰è¨€2000å¹´ï¼Œä¼Šåˆ©è¯ºä¼Šå¤§å­¦å„å·´çº³ï¼é¦™æ§Ÿåˆ†æ ¡ï¼ˆUniversity of Illinois at Urbana-Champaign ç®€ç§°UIUCï¼‰è¿™æ‰€äº«æœ‰ä¸–ç•Œå£°æœ›çš„ä¸€æµå…¬ç«‹ç ”ç©¶å‹å¤§å­¦çš„ Chris Lattnerï¼ˆä»–çš„ twitter @clattner_llvm ï¼‰ å¼€å‘äº†ä¸€ä¸ªå«ä½œ Low Level Virtual Machine çš„ç¼–è¯‘å™¨å¼€å‘å·¥å…·å¥—ä»¶ï¼Œåæ¥æ¶‰åŠèŒƒå›´è¶Šæ¥è¶Šå¤§ï¼Œå¯ä»¥ç”¨äºå¸¸è§„ç¼–è¯‘å™¨ï¼ŒJITç¼–è¯‘å™¨ï¼Œæ±‡ç¼–å™¨ï¼Œè°ƒè¯•å™¨ï¼Œé™æ€åˆ†æå·¥å…·ç­‰ä¸€ç³»åˆ—è·Ÿç¼–ç¨‹è¯­è¨€ç›¸å…³çš„å·¥ä½œï¼Œäºæ˜¯å°±æŠŠç®€ç§° LLVM è¿™ä¸ªç®€ç§°ä½œä¸ºäº†æ­£å¼çš„åå­—ã€‚Chris Lattner åæ¥åˆå¼€å‘äº† Clangï¼Œä½¿å¾— LLVM ç›´æ¥æŒ‘æˆ˜ GCC çš„åœ°ä½ã€‚2012å¹´ï¼ŒLLVM è·å¾—ç¾å›½è®¡ç®—æœºå­¦ä¼š ACM çš„è½¯ä»¶ç³»ç»Ÿå¤§å¥–ï¼Œå’Œ UNIXï¼ŒWWWï¼ŒTCP/IPï¼ŒTexï¼ŒJAVA ç­‰é½åã€‚ Chris Lattner ç”Ÿäº 1978 å¹´ï¼Œ2005å¹´åŠ å…¥è‹¹æœï¼Œå°†è‹¹æœä½¿ç”¨çš„ GCC å…¨é¢è½¬ä¸º LLVMã€‚2010å¹´å¼€å§‹ä¸»å¯¼å¼€å‘ Swift è¯­è¨€ã€‚ iOS å¼€å‘ä¸­ Objective-C æ˜¯ Clang / LLVM æ¥ç¼–è¯‘çš„ã€‚ swift æ˜¯ Swift / LLVMï¼Œå…¶ä¸­ Swift å‰ç«¯ä¼šå¤šå‡º SIL optimizerï¼Œå®ƒä¼šæŠŠ .swift ç”Ÿæˆçš„ä¸­é—´ä»£ç  .sil å±äº High-Level IRï¼Œ å› ä¸º swift åœ¨ç¼–è¯‘æ—¶å°±å®Œæˆäº†æ–¹æ³•ç»‘å®šç›´æ¥é€šè¿‡åœ°å€è°ƒç”¨å±äºå¼ºç±»å‹è¯­è¨€ï¼Œæ–¹æ³•è°ƒç”¨ä¸å†æ˜¯åƒOCé‚£æ ·çš„æ¶ˆæ¯å‘é€ï¼Œè¿™æ ·ç¼–è¯‘å°±å¯ä»¥è·å¾—æ›´å¤šçš„ä¿¡æ¯ç”¨åœ¨åé¢çš„åç«¯ä¼˜åŒ–ä¸Šã€‚ LLVMæ˜¯ä¸€ä¸ªæ¨¡å—åŒ–å’Œå¯é‡ç”¨çš„ç¼–è¯‘å™¨å’Œå·¥å…·é“¾æŠ€æœ¯çš„é›†åˆï¼ŒClang æ˜¯ LLVM çš„å­é¡¹ç›®ï¼Œæ˜¯ Cï¼ŒC++ å’Œ Objective-C ç¼–è¯‘å™¨ï¼Œç›®çš„æ˜¯æä¾›æƒŠäººçš„å¿«é€Ÿç¼–è¯‘ï¼Œæ¯” GCC å¿«3å€ï¼Œå…¶ä¸­çš„ clang static analyzer ä¸»è¦æ˜¯è¿›è¡Œè¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æå’Œç”Ÿæˆä¸­é—´ä»£ç ï¼Œå½“ç„¶è¿™ä¸ªè¿‡ç¨‹ä¼šå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå‡ºé”™çš„å’Œéœ€è¦è­¦å‘Šçš„ä¼šæ ‡æ³¨å‡ºæ¥ã€‚LLVM æ ¸å¿ƒåº“æä¾›ä¸€ä¸ªä¼˜åŒ–å™¨ï¼Œå¯¹æµè¡Œçš„ CPU åšä»£ç ç”Ÿæˆæ”¯æŒã€‚lld æ˜¯ Clang / LLVM çš„å†…ç½®é“¾æ¥å™¨ï¼Œclang å¿…é¡»è°ƒç”¨é“¾æ¥å™¨æ¥äº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ã€‚ LLVM æ¯”è¾ƒæœ‰ç‰¹è‰²çš„ä¸€ç‚¹æ˜¯å®ƒèƒ½æä¾›ä¸€ç§ä»£ç ç¼–å†™è‰¯å¥½çš„ä¸­é—´è¡¨ç¤º IRï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ä½œä¸ºå¤šç§è¯­è¨€çš„åç«¯ï¼Œè¿™æ ·å°±èƒ½å¤Ÿæä¾›è¯­è¨€æ— å…³çš„ä¼˜åŒ–åŒæ—¶è¿˜èƒ½å¤Ÿæ–¹ä¾¿çš„é’ˆå¯¹å¤šç§ CPU çš„ä»£ç ç”Ÿæˆã€‚ LLVM è¿˜ç”¨åœ¨ Gallium3D ä¸­è¿›è¡Œ JIT ä¼˜åŒ–ï¼ŒXorg ä¸­çš„ pixman ä¹Ÿæœ‰è€ƒè™‘ä½¿ç”¨ LLVM ä¼˜åŒ–æ‰§è¡Œé€Ÿåº¦ï¼Œ LLVM-Lua ç”¨LLVM æ¥ç¼–è¯‘ lua ä»£ç ï¼Œ gpuocelot ä½¿ç”¨ LLVM å¯ä»¥è®© CUDA ç¨‹åºæ— éœ€é‡æ–°ç¼–è¯‘å°±èƒ½å¤Ÿåœ¨å¤šç§ CPU æœºå™¨ä¸Šè·‘ã€‚ è¿™é‡Œæ˜¯ Clang å®˜æ–¹è¯¦ç»†æ–‡æ¡£ï¼š Welcome to Clangâ€™s documentation! â€” Clang 4.0 documentation è¿™ç¯‡æ˜¯å¯¹ LLVM æ¶æ„çš„ä¸€ä¸ªæ¦‚è¿°ï¼š The Architecture of Open Source Applications å°†ç¼–è¯‘å™¨ä¹‹å‰å¯¹äºç¼–è¯‘çš„å‰ä¸–ä»Šç”Ÿä¹Ÿæ˜¯éœ€è¦äº†è§£çš„ï¼Œæ¯”å¦‚å›ç­”ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œç¼–è¯‘å™¨ç¨‹åºæ˜¯ç”¨ä»€ä¹ˆç¼–è¯‘çš„ï¼Ÿçœ‹çœ‹ ã€Šlinkers and loadersã€‹ è¿™æœ¬ä¹¦å°±çŸ¥é“äº†ã€‚ ç¼–è¯‘æµç¨‹åœ¨åˆ—å‡ºå®Œæ•´æ­¥éª¤ä¹‹å‰å¯ä»¥å…ˆçœ‹ä¸ªç®€å•ä¾‹å­ã€‚çœ‹çœ‹æ˜¯å¦‚ä½•å®Œæˆä¸€æ¬¡ç¼–è¯‘çš„ã€‚ 12345678910111213#import &lt;Foundation/Foundation.h&gt;#define DEFINEEight 8int main(){ @autoreleasepool { int eight = DEFINEEight; int six = 6; NSString* site = [[NSString alloc] initWithUTF8String:â€starmingâ€]; int rank = eight + six; NSLog(@â€œ%@ rank %dâ€, site, rank); } return 0;} åœ¨å‘½ä»¤è¡Œè¾“å…¥ 1clang -ccc-print-phases main.m å¯ä»¥çœ‹åˆ°ç¼–è¯‘æºæ–‡ä»¶éœ€è¦çš„å‡ ä¸ªä¸åŒçš„é˜¶æ®µ 12345670: input, â€œmain.mâ€, objective-c1: preprocessor, {0}, objective-c-cpp-output2: compiler, {1}, ir3: backend, {2}, assembler4: assembler, {3}, object5: linker, {4}, image6: bind-arch, â€œx86_64â€, {5}, image è¿™æ ·èƒ½å¤Ÿäº†è§£åˆ°è¿‡ç¨‹å’Œé‡è¦çš„ä¿¡æ¯ã€‚æŸ¥çœ‹ocçš„cå®ç°å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ 1clang -rewrite-objc main.m æŸ¥çœ‹æ“ä½œå†…éƒ¨å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ -### å‘½ä»¤ 1clang -### main.m -o main æƒ³çœ‹æ¸…clangçš„å…¨éƒ¨è¿‡ç¨‹ï¼Œå¯ä»¥å…ˆé€šè¿‡-EæŸ¥çœ‹clangåœ¨é¢„ç¼–è¯‘å¤„ç†è¿™æ­¥åšäº†ä»€ä¹ˆã€‚ 1clang -E main.m æ‰§è¡Œå®Œåå¯ä»¥çœ‹åˆ°æ–‡ä»¶ 1234567891011121314# 1 â€œ/System/Library/Frameworks/Foundation.framework/Headers/FoundationLegacySwiftCompatibility.hâ€ 1 3# 185 â€œ/System/Library/Frameworks/Foundation.framework/Headers/Foundation.hâ€ 2 3# 2 â€œmain.mâ€ 2int main(){ @autoreleasepool { int eight = 8; int six = 6; NSString* site = [[NSString alloc] initWithUTF8String:â€starmingâ€]; int rank = eight + six; NSLog(@â€œ%@ rank %dâ€, site, rank); } return 0;} è¿™ä¸ªè¿‡ç¨‹çš„å¤„ç†åŒ…æ‹¬å®çš„æ›¿æ¢ï¼Œå¤´æ–‡ä»¶çš„å¯¼å…¥ã€‚ä¸‹é¢è¿™äº›ä»£ç ä¹Ÿä¼šåœ¨è¿™æ­¥å¤„ç†ã€‚ â€œ#defineâ€ â€œ#includeâ€ â€œ#indefâ€ æ³¨é‡Š â€œ#pragmaâ€ é¢„å¤„ç†å®Œæˆåå°±ä¼šè¿›è¡Œè¯æ³•åˆ†æï¼Œè¿™é‡Œä¼šæŠŠä»£ç åˆ‡æˆä¸€ä¸ªä¸ª Tokenï¼Œæ¯”å¦‚å¤§å°æ‹¬å·ï¼Œç­‰äºå·è¿˜æœ‰å­—ç¬¦ä¸²ç­‰ã€‚ 1clang -fmodules -fsyntax-only -Xclang -dump-tokens main.m ç„¶åæ˜¯è¯­æ³•åˆ†æï¼ŒéªŒè¯è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œç„¶åå°†æ‰€æœ‰èŠ‚ç‚¹ç»„æˆæŠ½è±¡è¯­æ³•æ ‘ AST ã€‚ 1clang -fmodules -fsyntax-only -Xclang -ast-dump main.m å®Œæˆè¿™äº›æ­¥éª¤åå°±å¯ä»¥å¼€å§‹IRä¸­é—´ä»£ç çš„ç”Ÿæˆäº†ï¼ŒCodeGen ä¼šè´Ÿè´£å°†è¯­æ³•æ ‘è‡ªé¡¶å‘ä¸‹éå†é€æ­¥ç¿»è¯‘æˆ LLVM IRï¼ŒIR æ˜¯ç¼–è¯‘è¿‡ç¨‹çš„å‰ç«¯çš„è¾“å‡ºåç«¯çš„è¾“å…¥ã€‚ 1clang -S -fobjc-arc -emit-llvm main.m -o main.ll è¿™é‡Œ LLVM ä¼šå»åšäº›ä¼˜åŒ–å·¥ä½œï¼Œåœ¨ Xcode çš„ç¼–è¯‘è®¾ç½®é‡Œä¹Ÿå¯ä»¥è®¾ç½®ä¼˜åŒ–çº§åˆ«-01ï¼Œ-03ï¼Œ-0sï¼Œè¿˜å¯ä»¥å†™äº›è‡ªå·±çš„ Passï¼Œå®˜æ–¹æœ‰æ¯”è¾ƒå®Œæ•´çš„ Pass æ•™ç¨‹ï¼š Writing an LLVM Pass â€” LLVM 5 documentation ã€‚ 1clang -O3 -S -fobjc-arc -emit-llvm main.m -o main.ll Pass æ˜¯ LLVM ä¼˜åŒ–å·¥ä½œçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹åšäº›äº‹ï¼Œä¸€èµ·åŠ èµ·æ¥å°±æ„æˆäº† LLVM å®Œæ•´çš„ä¼˜åŒ–å’Œè½¬åŒ–ã€‚ å¦‚æœå¼€å¯äº† bitcode è‹¹æœä¼šåšè¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œæœ‰æ–°çš„åç«¯æ¶æ„è¿˜æ˜¯å¯ä»¥ç”¨è¿™ä»½ä¼˜åŒ–è¿‡çš„ bitcode å»ç”Ÿæˆã€‚ 1clang -emit-llvm -c main.m -o main.bc ç”Ÿæˆæ±‡ç¼– 1clang -S -fobjc-arc main.m -o main.s ç”Ÿæˆç›®æ ‡æ–‡ä»¶ 1clang -fmodules -c main.m -o main.o ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™æ ·å°±èƒ½å¤Ÿæ‰§è¡Œçœ‹åˆ°è¾“å‡ºç»“æœ 12345clang main.o -o mainæ‰§è¡Œ./mainè¾“å‡ºstarming rank 14 ä¸‹é¢æ˜¯å®Œæ•´æ­¥éª¤ï¼š ç¼–è¯‘ä¿¡æ¯å†™å…¥è¾…åŠ©æ–‡ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶æ¶æ„ .app æ–‡ä»¶ å¤„ç†æ–‡ä»¶æ‰“åŒ…ä¿¡æ¯ æ‰§è¡Œ CocoaPod ç¼–è¯‘å‰è„šæœ¬ï¼ŒcheckPods Manifest.lock ç¼–è¯‘.mæ–‡ä»¶ï¼Œä½¿ç”¨ CompileC å’Œ clang å‘½ä»¤ é“¾æ¥éœ€è¦çš„ Framework ç¼–è¯‘ xib æ‹·è´ xib ï¼Œèµ„æºæ–‡ä»¶ ç¼–è¯‘ ImageAssets å¤„ç† info.plist æ‰§è¡Œ CocoaPod è„šæœ¬ æ‹·è´æ ‡å‡†åº“ åˆ›å»º .app æ–‡ä»¶å’Œç­¾å Clang ç¼–è¯‘ .m æ–‡ä»¶åœ¨ Xcode ç¼–è¯‘è¿‡åï¼Œå¯ä»¥é€šè¿‡ Show the report navigator é‡Œå¯¹åº” target çš„ build ä¸­æŸ¥çœ‹æ¯ä¸ª .m æ–‡ä»¶çš„ clang å‚æ•°ä¿¡æ¯ï¼Œè¿™äº›å‚æ•°éƒ½æ˜¯é€šè¿‡Build Settingã€‚ å…·ä½“æ‹¿ç¼–è¯‘ AFSecurityPolicy.m çš„ä¿¡æ¯æ¥çœ‹çœ‹ã€‚é¦–å…ˆå¯¹ä»»åŠ¡è¿›è¡Œæè¿°ã€‚ 1CompileC DerivedData path/AFSecurityPolicy.o AFNetworking/AFNetworking/AFSecurityPolicy.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler æ¥ä¸‹æ¥å¯¹ä¼šæ›´æ–°å·¥ä½œè·¯å¾„ï¼ŒåŒæ—¶è®¾ç½® PATH 123cd /Users/didi/Documents/Demo/GitHub/GCDFetchFeed/GCDFetchFeed/Pods export LANG=en_US.US-ASCII export PATH=â€œ/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbinâ€ æ¥ä¸‹æ¥å°±æ˜¯å®é™…çš„ç¼–è¯‘å‘½ä»¤ 1clang -x objective-c -arch x86_64 -fmessage-length=0 -fobjc-arcâ€¦ -Wno-missing-field-initializers â€¦ -DDEBUG=1 â€¦ -isysroot iPhoneSimulator10.1.sdk -fasm-blocks â€¦ -I -F -c AFSecurityPolicy.m -o AFSecurityPolicy.o clang å‘½ä»¤å‚æ•° 12345678910-x ç¼–è¯‘è¯­è¨€æ¯”å¦‚objective-c-arch ç¼–è¯‘çš„æ¶æ„ï¼Œæ¯”å¦‚arm7-f ä»¥-få¼€å¤´çš„ã€‚-W ä»¥-Wå¼€å¤´çš„ï¼Œå¯ä»¥é€šè¿‡è¿™äº›å®šåˆ¶ç¼–è¯‘è­¦å‘Š-D ä»¥-Då¼€å¤´çš„ï¼ŒæŒ‡çš„æ˜¯é¢„ç¼–è¯‘å®ï¼Œé€šè¿‡è¿™äº›å®å¯ä»¥å®ç°æ¡ä»¶ç¼–è¯‘-iPhoneSimulator10.1.sdk ç¼–è¯‘é‡‡ç”¨çš„iOS SDKç‰ˆæœ¬-I æŠŠç¼–è¯‘ä¿¡æ¯å†™å…¥æŒ‡å®šçš„è¾…åŠ©æ–‡ä»¶-F éœ€è¦çš„Framework-c æ ‡è¯†ç¬¦æŒ‡æ˜éœ€è¦è¿è¡Œé¢„å¤„ç†å™¨ï¼Œè¯­æ³•åˆ†æï¼Œç±»å‹æ£€æŸ¥ï¼ŒLLVMç”Ÿæˆä¼˜åŒ–ä»¥åŠæ±‡ç¼–ä»£ç ç”Ÿæˆ.oæ–‡ä»¶-o ç¼–è¯‘ç»“æœ æ„å»º Targetç¼–è¯‘å·¥ç¨‹ä¸­çš„ç¬¬ä¸‰æ–¹ä¾èµ–åº“åä¼šæ„å»ºæˆ‘ä»¬ç¨‹åºçš„ targetï¼Œä¼šæŒ‰é¡ºåºè¾“å‡ºå¦‚ä¸‹çš„ä¿¡æ¯ï¼š 123456789101112131415Create product structureProcess product packagingRun custom shell script â€˜Check Pods Manifest.lockâ€™Compile â€¦ å„ä¸ªé¡¹ç›®ä¸­çš„.mæ–‡ä»¶Link /Users/â€¦ è·¯å¾„Copy â€¦ é™æ€æ–‡ä»¶Compile asset catalogsCompile Storyboard file â€¦Process info.plistLink StoryboardsRun custom shell script â€˜Embed Pods Frameworksâ€™Run custom shell script â€˜Copy Pods Resourcesâ€™â€¦Touch GCDFetchFeed.appSign GCDFetchFeed.app ä»è¿™äº›ä¿¡æ¯å¯ä»¥çœ‹å‡ºåœ¨è¿™äº›æ­¥éª¤ä¸­ä¼šåˆ†åˆ«è°ƒç”¨ä¸åŒçš„å‘½ä»¤è¡Œå·¥å…·æ¥æ‰§è¡Œã€‚ Target åœ¨ Build è¿‡ç¨‹çš„æ§åˆ¶åœ¨ Xcode çš„ Project editor ä¸­çš„ Build Settingï¼ŒBuild Phases å’Œ Build Rules èƒ½å¤Ÿæ§åˆ¶ç¼–è¯‘çš„è¿‡ç¨‹ã€‚ Build Phasesæ„å»ºå¯æ‰§è¡Œæ–‡ä»¶çš„è§„åˆ™ã€‚æŒ‡å®š target çš„ä¾èµ–é¡¹ç›®ï¼Œåœ¨ target build ä¹‹å‰éœ€è¦å…ˆ build çš„ä¾èµ–ã€‚åœ¨ Compile Source ä¸­æŒ‡å®šæ‰€æœ‰å¿…é¡»ç¼–è¯‘çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¼šæ ¹æ® Build Setting å’Œ Build Rules é‡Œçš„è®¾ç½®æ¥å¤„ç†ã€‚ åœ¨ Link Binary With Libraries é‡Œä¼šåˆ—å‡ºæ‰€æœ‰çš„é™æ€åº“å’ŒåŠ¨æ€åº“ï¼Œå®ƒä»¬ä¼šå’Œç¼–è¯‘ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶è¿›è¡Œé“¾æ¥ã€‚ build phase è¿˜ä¼šæŠŠé™æ€èµ„æºæ‹·è´åˆ° bundle é‡Œã€‚ å¯ä»¥é€šè¿‡åœ¨ build phases é‡Œæ·»åŠ è‡ªå®šä¹‰è„šæœ¬æ¥åšäº›äº‹æƒ…ï¼Œæ¯”å¦‚åƒ CocoaPods æ‰€åšçš„é‚£æ ·ã€‚ Build RulesæŒ‡å®šä¸åŒæ–‡ä»¶ç±»å‹å¦‚ä½•ç¼–è¯‘ã€‚æ¯æ¡ build rule æŒ‡å®šäº†è¯¥ç±»å‹å¦‚ä½•å¤„ç†ä»¥åŠè¾“å‡ºåœ¨å“ªã€‚å¯ä»¥å¢åŠ ä¸€æ¡æ–°è§„åˆ™å¯¹ç‰¹å®šæ–‡ä»¶ç±»å‹æ·»åŠ å¤„ç†æ–¹æ³•ã€‚ Build Settingsåœ¨ build çš„è¿‡ç¨‹ä¸­å„ä¸ªé˜¶æ®µçš„é€‰é¡¹çš„è®¾ç½®ã€‚ pbxprojå·¥ç¨‹æ–‡ä»¶build è¿‡ç¨‹æ§åˆ¶çš„è¿™äº›è®¾ç½®éƒ½ä¼šè¢«ä¿å­˜åœ¨å·¥ç¨‹æ–‡ä»¶ .pbxproj é‡Œã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯ä»¥æ‰¾ rootObject çš„ ID å€¼ 1rootObject = 3EE311301C4E1F0800103FA3 /* Project object */; ç„¶åæ ¹æ®è¿™ä¸ª ID æ‰¾åˆ° main å·¥ç¨‹çš„å®šä¹‰ã€‚ 12345/* Begin PBXProject section */ 3EE311301C4E1F0800103FA3 /* Project object */ = { isa = PBXProject; â€¦/* End PBXProject section */ åœ¨ targets é‡Œä¼šæŒ‡å‘å„ä¸ª taget çš„å®šä¹‰ 12345targets = ( 3EE311371C4E1F0800103FA3 /* GCDFetchFeed */, 3EE311501C4E1F0800103FA3 /* GCDFetchFeedTests */, 3EE3115B1C4E1F0800103FA3 /* GCDFetchFeedUITests */,); é¡ºç€è¿™äº› ID å°±èƒ½å¤Ÿæ‰¾åˆ°æ›´è¯¦ç»†çš„å®šä¹‰åœ°æ–¹ã€‚æ¯”å¦‚æˆ‘ä»¬é€šè¿‡ GCDFetchFeed è¿™ä¸ª target çš„ ID æ‰¾åˆ°å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819203EE311371C4E1F0800103FA3 /* GCDFetchFeed */ = { isa = PBXNativeTarget; buildConfigurationList = 3EE311651C4E1F0800103FA3 /* configuration list for PBXNativeTarget â€œGCDFetchFeedâ€ buildPhases = ( 9527AA01F4AAE11E18397E0C /* Check Pods st.lock */, 3EE311341C4E1F0800103FA3 /* Sources */, 3EE311351C4E1F0800103FA3 /* Frameworks */, 3EE311361C4E1F0800103FA3 /* Resources */, C3DDA7C46C0308459A18B7D9 /* Embed Pods Frameworks DD33A716222617FAB49F1472 /* Copy Pods Resources ); buildRules = ( ); dependencies = ( ); name = GCDFetchFeed; productName = GCDFetchFeed; productReference = 3EE311381C4E1F0800103FA3 /* chFeed.app */; productType = â€œcom.apple.product-type.applicationâ€;}; è¿™ä¸ªé‡Œé¢åˆæœ‰æ›´å¤šçš„ ID å¯ä»¥å¾—åˆ°æ›´å¤šçš„å®šä¹‰ï¼Œå…¶ä¸­ buildConfigurationList æŒ‡å‘äº†å¯ç”¨çš„é…ç½®é¡¹ï¼ŒåŒ…å« Debug å’Œ Releaseã€‚å¯ä»¥çœ‹åˆ°è¿˜æœ‰ buildPhasesï¼ŒbuildRules å’Œ dependencies éƒ½èƒ½å¤Ÿé€šè¿‡è¿™é‡Œç´¢å¼•æ‰¾åˆ°æ›´è¯¦ç»†çš„å®šä¹‰ã€‚ æ¥ä¸‹æ¥è¯¦ç»†çš„çœ‹çœ‹ Clang æ‰€åšçš„äº‹æƒ…å§ã€‚ Clang Static Analyzeré™æ€ä»£ç åˆ†æå¯ä»¥åœ¨ llvm/clang/ Source Tree - Woboq Code Browser ä¸ŠæŸ¥çœ‹ Clang çš„ä»£ç ã€‚ Youtubeä¸Šä¸€ä¸ªæ•™ç¨‹ï¼šThe Clang AST - a Tutorial - YouTubeCMUå…³äºllvmçš„æ•™æ¡ˆ https://www.cs.cmu.edu/afs/cs.cmu.edu/academic/class/15745-s14/public/lectures/ é™æ€åˆ†æå‰ä¼šå¯¹æºä»£ç åˆ†è¯æˆ Tokenï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰ï¼Œåœ¨ TokensKind.def é‡Œæœ‰ Clang å®šä¹‰çš„æ‰€æœ‰ Tokenã€‚Token å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±» å…³é”®å­—ï¼šè¯­æ³•ä¸­çš„å…³é”®å­—ï¼Œif else while for ç­‰ã€‚ æ ‡è¯†ç¬¦ï¼šå˜é‡å å­—é¢é‡ï¼šå€¼ï¼Œæ•°å­—ï¼Œå­—ç¬¦ä¸² ç‰¹æ®Šç¬¦å·ï¼šåŠ å‡ä¹˜é™¤ç­‰ç¬¦å· é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¯ä»¥è¾“å‡ºæ‰€æœ‰ token å’Œæ‰€åœ¨æ–‡ä»¶å…·ä½“ä½ç½® 123clang -fmodules -E -Xclang -dump-tokens main.m``` ç»“æœå¦‚ä¸‹ annot_module_include â€˜#import &lt;Foâ€™ Loc=main.m:2:1int â€˜intâ€™ [StartOfLine] Loc=main.m:5:1identifier â€˜mainâ€™ [LeadingSpace] Loc=main.m:5:5l_paren â€˜(â€˜ Loc=main.m:5:9r_paren â€˜)â€™ Loc=main.m:5:10l_brace â€˜{â€˜ [LeadingSpace] Loc=main.m:5:12at â€˜@â€˜ [StartOfLine] [LeadingSpace] Loc=main.m:6:5identifier â€˜autoreleasepoolâ€™ Loc=main.m:6:6l_brace â€˜{â€˜ [LeadingSpace] Loc=main.m:6:22identifier â€˜NSStringâ€™ [StartOfLine] [LeadingSpace] Loc=main.m:7:9star â€˜*â€™ [LeadingSpace] Loc=main.m:7:18identifier â€˜aâ€™ Loc=main.m:7:19equal â€˜=â€˜ [LeadingSpace] Loc=main.m:7:21at â€˜@â€˜ [LeadingSpace] Loc=main.m:7:23string_literal â€˜â€aaaâ€â€™ Loc=main.m:7:24semi â€˜;â€™ Loc=main.m:7:29identifier â€˜NSLogâ€™ [StartOfLine] [LeadingSpace] Loc=main.m:8:9l_paren â€˜(â€˜ Loc=main.m:8:14at â€˜@â€˜ Loc=main.m:8:15string_literal â€˜â€hi %@â€œâ€™ Loc=main.m:8:16comma â€˜,â€™ Loc=main.m:8:23identifier â€˜aâ€™ Loc=main.m:8:24r_paren â€˜)â€™ Loc=main.m:8:25semi â€˜;â€™ Loc=main.m:8:26r_brace â€˜}â€™ [StartOfLine] [LeadingSpace] Loc=main.m:9:5return â€˜returnâ€™ [StartOfLine] [LeadingSpace] Loc=main.m:10:5numeric_constant â€˜0â€™ [LeadingSpace] Loc=main.m:10:12semi â€˜;â€™ Loc=main.m:10:13r_brace â€˜}â€™ [StartOfLine] Loc=main.m:11:1eof â€˜â€™ Loc=main.m:11:2 1234567å¯ä»¥è·å¾—æ¯ä¸ª token çš„ç±»å‹ï¼Œå€¼è¿˜æœ‰ç±»ä¼¼ StartOfLine çš„ä½ç½®ç±»å‹å’Œ Loc=&lt;main.m:11:1&gt; è¿™ä¸ªæ ·çš„å…·ä½“ä½ç½®ã€‚æ¥ç€è¿›è¡Œè¯­æ³•åˆ†æï¼ˆSemantic Analysisï¼‰å°† token å…ˆæŒ‰ç…§è¯­æ³•ç»„åˆæˆè¯­ä¹‰ç”Ÿæˆ VarDecl èŠ‚ç‚¹ï¼Œç„¶åå°†è¿™äº›èŠ‚ç‚¹æŒ‰ç…§å±‚çº§å…³ç³»æ„æˆæŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Tree (AST)ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœé‡åˆ° token æ˜¯ = ç¬¦å·è¿›è¡Œèµ‹å€¼çš„å¤„ç†ï¼Œé‡åˆ°åŠ å‡ä¹˜é™¤å°±å…ˆå¤„ç†ä¹˜é™¤ï¼Œç„¶åå¤„ç†åŠ å‡ï¼Œè¿™äº›ç»„åˆç»è¿‡åµŒå¥—åä¼šç”Ÿæˆä¸€ä¸ªè¯­æ³•æ•°çš„ç»“æ„ã€‚è¿™ä¸ªè¿‡ç¨‹å®Œæˆåä¼šè¿›è¡Œèµ‹å€¼æ“ä½œæ—¶ç±»å‹æ˜¯ä¸æ˜¯åŒ¹é…çš„å¤„ç†ã€‚æ‰“å°è¯­æ³•æ ‘çš„å‘½ä»¤ clang -fmodules -fsyntax-only -Xclang -ast-dump main.m 1è¾“å‡ºç»“æœ TranslationUnitDecl 0x7fa80f018ad0 &lt;&gt; |-TypedefDecl 0x7fa80f018fc8 &lt;&gt; implicit int128_t â€˜int128â€™| -BuiltinType 0x7fa80f018d20 â€˜__int128â€™ |-TypedefDecl 0x7fa80f019028 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __uint128_t â€˜unsigned __int128â€™ |-BuiltinType 0x7fa80f018d40 â€˜unsigned int128â€™|-TypedefDecl 0x7fa80f0190b8 &lt;&gt; implicit SEL â€˜SEL *â€™| -PointerType 0x7fa80f019080 â€˜SEL *â€™ |-BuiltinType 0x7fa80f018f30 â€˜SELâ€™|-TypedefDecl 0x7fa80f019198 &lt;&gt; implicit id â€˜idâ€™| -ObjCObjectPointerType 0x7fa80f019140 â€˜idâ€™ imported |-ObjCObjectType 0x7fa80f019110 â€˜idâ€™ imported|-TypedefDecl 0x7fa80f019278 &lt;&gt; implicit Class â€˜Classâ€™| -ObjCObjectPointerType 0x7fa80f019220 â€˜Classâ€™ |-ObjCObjectType 0x7fa80f0191f0 â€˜Classâ€™|-ObjCInterfaceDecl 0x7fa80f0192c8 &lt;&gt; implicit Protocol|-TypedefDecl 0x7fa80f019618 &lt;&gt; implicit __NSConstantString â€˜struct __NSConstantString_tagâ€™| -RecordType 0x7fa80f019430 â€˜struct __NSConstantString_tagâ€™ |-Record 0x7fa80f019390 â€˜NSConstantString_tagâ€™|-TypedefDecl 0x7fa80f0196a8 &lt;&gt; implicit builtin_ms_va_list â€˜char *â€™| -PointerType 0x7fa80f019670 â€˜char *â€™ |-BuiltinType 0x7fa80f018b60 â€˜charâ€™|-TypedefDecl 0x7fa80f047978 &lt;&gt; implicit __builtin_va_list â€˜struct __va_list_tag [1]â€™| -ConstantArrayType 0x7fa80f047920 â€˜struct __va_list_tag [1]â€™ 1 |-RecordType 0x7fa80f0197a0 â€˜struct __va_list_tagâ€™| `-Record 0x7fa80f0196f8 â€˜va_list_tagâ€™|-ImportDecl 0x7fa80f0486b0 main.m:2:1 col:1 implicit Foundation|-FunctionDecl 0x7fa80f048738 &lt;line:5:1, line:11:1&gt; line:5:5 main â€˜int ()â€™| -CompoundStmt 0x7fa80f393998 &lt;col:12, line:11:1&gt; | |-ObjCAutoreleasePoolStmt 0x7fa80f393950 &lt;line:6:5, line:9:5&gt; | |-CompoundStmt 0x7fa80f393928 &lt;line:6:22, line:9:5&gt;| | |-DeclStmt 0x7fa80f3a3b38 &lt;line:7:9, col:29&gt;| | | -VarDecl 0x7fa80f3a3580 &lt;col:9, col:24&gt; col:19 used a â€˜NSString *â€™ cinit | | |-ObjCStringLiteral 0x7fa80f3a3648 &lt;col:23, col:24&gt; â€˜NSString â€™| | | -StringLiteral 0x7fa80f3a3618 &lt;col:24&gt; â€˜char [4]â€™ lvalue â€œaaaâ€ | |-CallExpr 0x7fa80f3938c0 &lt;line:8:9, col:25&gt; â€˜voidâ€™| | |-ImplicitCastExpr 0x7fa80f3938a8 col:9 â€˜void ()(id, â€¦)â€™ | | | -DeclRefExpr 0x7fa80f3a3b50 &lt;col:9&gt; â€˜void (id, â€¦)â€™ Function 0x7fa80f3a3670 â€˜NSLogâ€™ â€˜void (id, â€¦)â€™ | | |-ImplicitCastExpr 0x7fa80f3938f8 &lt;col:15, col:16&gt; â€˜idâ€™:â€™idâ€™ &lt;BitCast&gt; | | |-ObjCStringLiteral 0x7fa80f393800 &lt;col:15, col:16&gt; â€˜NSString *â€™| | | -StringLiteral 0x7fa80f3a3bb8 &lt;col:16&gt; â€˜char [6]â€™ lvalue â€œhi %@â€œ | |-ImplicitCastExpr 0x7fa80f393910 col:24 â€˜NSString *â€™ | | -DeclRefExpr 0x7fa80f393820 &lt;col:24&gt; â€˜NSString *â€™ lvalue Var 0x7fa80f3a3580 â€˜aâ€™ â€˜NSString *â€™ |-ReturnStmt 0x7fa80f393980 &lt;line:10:5, col:12&gt;| -IntegerLiteral 0x7fa80f393960 &lt;col:12&gt; â€˜intâ€™ 0- 12345TranslationUnitDecl æ˜¯æ ¹èŠ‚ç‚¹ï¼Œè¡¨ç¤ºä¸€ä¸ªæºæ–‡ä»¶ã€‚Decl è¡¨ç¤ºä¸€ä¸ªå£°æ˜ï¼ŒExpr è¡¨ç¤ºè¡¨è¾¾å¼ï¼ŒLiteral è¡¨ç¤ºå­—é¢é‡æ˜¯ç‰¹æ®Šçš„ Exprï¼ŒStmt è¡¨ç¤ºè¯­å¥ã€‚clang é™æ€åˆ†ææ˜¯é€šè¿‡å»ºç«‹åˆ†æå¼•æ“å’Œ checkers æ‰€ç»„æˆçš„æ¶æ„ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½å¯ä»¥é€šè¿‡ clang â€”analyze å‘½ä»¤æ–¹å¼è°ƒç”¨ã€‚clang static analyzer åˆ†ä¸º analyzer core åˆ†æå¼•æ“å’Œ checkers ä¸¤éƒ¨åˆ†ï¼Œæ‰€æœ‰ checker éƒ½æ˜¯åŸºäºåº•å±‚åˆ†æå¼•æ“ä¹‹ä¸Šï¼Œé€šè¿‡åˆ†æå¼•æ“æä¾›çš„åŠŸèƒ½èƒ½å¤Ÿç¼–å†™æ–°çš„ checkerã€‚å¯ä»¥é€šè¿‡ clang â€”analyze -Xclang -analyzer-checker-help æ¥åˆ—å‡ºå½“å‰ clang ç‰ˆæœ¬ä¸‹æ‰€æœ‰ checkerã€‚å¦‚æœæƒ³ç¼–å†™è‡ªå·±çš„ checkerï¼Œå¯ä»¥åœ¨ clang é¡¹ç›®çš„ lib / StaticAnalyzer / Checkers ç›®å½•ä¸‹æ‰¾åˆ°å®ä¾‹å‚è€ƒï¼Œæ¯”å¦‚ ObjCUnusedIVarsChecker.cpp ç”¨æ¥æ£€æŸ¥æœªä½¿ç”¨å®šä¹‰è¿‡çš„å˜é‡ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿæ–¹ä¾¿ç”¨æˆ·æ‰©å±•å¯¹ä»£ç æ£€æŸ¥è§„åˆ™æˆ–è€…å¯¹ bug ç±»å‹è¿›è¡Œæ‰©å±•ï¼Œä½†æ˜¯è¿™ç§æ¶æ„ä¹Ÿæœ‰ä¸è¶³ï¼Œæ¯æ‰§è¡Œå®Œä¸€æ¡è¯­å¥åï¼Œåˆ†æå¼•æ“ä¼šéå†æ‰€æœ‰ checker ä¸­çš„å›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥ checker è¶Šå¤šï¼Œé€Ÿåº¦è¶Šæ…¢ã€‚é€šè¿‡ clang -cc1 -analyzer-checker-help å¯ä»¥åˆ—å‡ºèƒ½è°ƒç”¨çš„ checkerï¼Œä¸‹é¢æ˜¯å¸¸ç”¨ checker debug.ConfigDumper Dump config tabledebug.DumpCFG Display Control-Flow Graphsdebug.DumpCallGraph Display Call Graphdebug.DumpCalls Print calls as they are traversed by the enginedebug.DumpDominators Print the dominance tree for a given CFGdebug.DumpLiveVars Print results of live variable analysisdebug.DumpTraversal Print branch conditions as they are traversed by the enginedebug.ExprInspection Check the analyzerâ€™s understanding of expressionsdebug.Stats Emit warnings with analyzer statisticsdebug.TaintTest Mark tainted symbols as such.debug.ViewCFG View Control-Flow Graphs using GraphVizdebug.ViewCallGraph View Call Graph using GraphVizdebug.ViewExplodedGraph View Exploded Graphs using GraphViz 1234567891011è¿™äº› checker é‡Œæœ€å¸¸ç”¨çš„æ˜¯ DumpCFGï¼ŒDumpCallGraphï¼ŒDumpLiveVars å’Œ DumpViewExplodedGraphã€‚clang static analyzer å¼•æ“å¤§è‡´åˆ†ä¸º CFGï¼ŒMemRegionï¼ŒSValBuilderï¼ŒConstraintManager å’Œ ExplodedGraph å‡ ä¸ªæ¨¡å—ã€‚clang static analyzer æœ¬è´¨ä¸Šå°±æ˜¯ path-sensitive analysisï¼Œè¦å¾ˆå¥½çš„ç†è§£ clang static analyzer å¼•æ“å°±éœ€è¦å¯¹ Data Flow Analysis æœ‰æ‰€äº†è§£ï¼ŒåŒ…æ‹¬è¿­ä»£æ•°æ®æµåˆ†æï¼Œpath-sensitiveï¼Œpath-insensitive ï¼Œflow-sensitiveç­‰ã€‚ç¼–è¯‘çš„æ¦‚å¿µï¼ˆè¯æ³•-&gt;è¯­æ³•-&gt;è¯­ä¹‰-&gt;IR-&gt;ä¼˜åŒ–-&gt;CodeGenï¼‰åœ¨ clang static analyzer é‡Œåˆ°å¤„å¯è§ï¼Œä¾‹å¦‚ Relaxed Live Variables Analysis å¯ä»¥å‡å°‘åˆ†æä¸­çš„å†…å­˜æ¶ˆè€—ï¼Œä½¿ç”¨ mark-sweep å®ç° Dead Symbols çš„åˆ é™¤ã€‚clang static analyzer æä¾›äº†å¾ˆå¤šè¾…åŠ©æ–¹æ³•ï¼Œæ¯”å¦‚ SVal.dump()ï¼ŒMemRegion.getString ä»¥åŠ Stmt å’Œ Dcel æä¾›çš„ dump æ–¹æ³•ã€‚Clang æŠ½è±¡è¯­æ³•æ ‘ Clang AST å¸¸è§çš„ API æœ‰ Stmtï¼ŒDeclï¼ŒExpr å’Œ QualTypeã€‚åœ¨ç¼–å†™ checker æ—¶ä¼šé‡åˆ° AST çš„å±‚çº§æ£€æŸ¥ï¼Œè¿™æ—¶æœ‰ä¸ªå¾ˆå¥½çš„æ¥å£ StmtVisitorï¼Œè¿™ä¸ªæ¥å£ç±»ä¼¼ RecursiveASTVisitorã€‚æ•´ä¸ª clang static analyzer çš„å…¥å£æ˜¯ AnalysisConsumerï¼Œæ¥ç€ä¼šè°ƒ HandleTranslationUnit() æ–¹æ³•è¿›è¡Œ AST å±‚çº§è¿›è¡Œåˆ†ææˆ–è€…è¿›è¡Œ path-sensitive åˆ†æã€‚é»˜è®¤ä¼šæŒ‰ç…§ inline çš„ path-sensitive åˆ†æï¼Œæ„å»º CallGraphï¼Œä»é¡¶å±‚ caller æŒ‰ç…§è°ƒç”¨çš„å…³ç³»æ¥åˆ†æï¼Œå…·ä½“æ˜¯ä½¿ç”¨çš„ WorkList ç®—æ³•ï¼Œä» EntryBlock å¼€å§‹ä¸€æ­¥æ­¥çš„æ¨¡æ‹Ÿï¼Œè¿™ä¸ªè¿‡ç¨‹å«åš intra-procedural analysisï¼ˆIPAï¼‰ã€‚è¿™ä¸ªæ¨¡æ‹Ÿè¿‡ç¨‹è¿˜éœ€è¦å¯¹å†…å­˜è¿›è¡Œæ¨¡æ‹Ÿï¼Œclang static analyzer çš„å†…å­˜æ¨¡å‹æ˜¯åŸºäºã€ŠA Memory Model for Static Analysis of C Programsã€‹è¿™ç¯‡è®ºæ–‡è€Œæ¥ï¼Œpdfåœ°å€ï¼šhttps://lcs.ios.ac.cn/~xuzb/canalyze/memmodel.pdf åœ¨clangé‡Œçš„å…·ä½“å®ç°ä»£ç å¯ä»¥æŸ¥çœ‹è¿™ä¸¤ä¸ªæ–‡ä»¶ [MemRegion.h](https://code.woboq.org/llvm/clang/include/clang/StaticAnalyzer/Core/PathSensitive/MemRegion.h.html)å’Œ [RegionStore.cpp](https://code.woboq.org/llvm/clang/lib/StaticAnalyzer/Core/RegionStore.cpp.html) ã€‚ä¸‹é¢ä¸¾ä¸ªç®€å•ä¾‹å­çœ‹çœ‹ clang static analyzer æ˜¯å¦‚ä½•å¯¹æºç è¿›è¡Œæ¨¡æ‹Ÿçš„ã€‚ int main(){ int a; int b = 10; a = b; return a;} 1å¯¹åº”çš„ AST ä»¥åŠ CFG #â€”â€”â€”â€”â€”â€”â€”â€”ASTâ€”â€”â€”â€”â€”â€”â€”â€”â€” clang -cc1 -ast-dumpTranslationUnitDecl 0xc75b450 &lt;&gt; |-TypedefDecl 0xc75b740 &lt;&gt; implicit __builtin_va_list â€˜char *â€™-FunctionDecl 0xc75b7b0 &lt;test.cpp:1:1, line:7:1&gt; line:1:5 main â€˜int (void)â€™-CompoundStmt 0xc75b978 &lt;line:2:1, line:7:1&gt; |-DeclStmt 0xc75b870 &lt;line:3:2, col:7&gt; | -VarDecl 0xc75b840 &lt;col:2, col:6&gt; col:6 used a â€˜intâ€™ |-DeclStmt 0xc75b8d8 &lt;line:4:2, col:12&gt; |-VarDecl 0xc75b890 &lt;col:2, col:10&gt; col:6 used b â€˜intâ€™ cinit | `-IntegerLiteral 0xc75b8c0 col:10 â€˜intâ€™ 10 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; a = b &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; |-BinaryOperator 0xc75b928 &lt;line:5:2, col:6&gt; â€˜intâ€™ lvalue â€˜=â€˜ | |-DeclRefExpr 0xc75b8e8 col:2 â€˜intâ€™ lvalue Var 0xc75b840 â€˜aâ€™ â€˜intâ€™ | -ImplicitCastExpr 0xc75b918 &lt;col:6&gt; â€˜intâ€™ &lt;LValueToRValue&gt; |-DeclRefExpr 0xc75b900 col:6 â€˜intâ€™ lvalue Var 0xc75b890 â€˜bâ€™ â€˜intâ€™&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; `-ReturnStmt 0xc75b968 &lt;line:6:2, col:9&gt; `-ImplicitCastExpr 0xc75b958 &lt;col:9&gt; â€˜intâ€™ &lt;LValueToRValue&gt; `-DeclRefExpr 0xc75b940 &lt;col:9&gt; â€˜intâ€™ lvalue Var 0xc75b840 â€˜aâ€™ â€˜intâ€™#â€”â€”â€”â€”â€”â€”â€”â€”CFGâ€”â€”â€”â€”â€”â€”â€”â€”â€” clang -cc1 -analyze -analyzer-checker=debug.DumpCFGint main() [B2 (ENTRY)] Succs (1): B1 [B1] 1: int a; 2: 10 3: int b = 10; 4: b 5: [B1.4] (ImplicitCastExpr, LValueToRValue, int) 6: a 7: [B1.6] = [B1.5] 8: a 9: [B1.8] (ImplicitCastExpr, LValueToRValue, int) 10: return [B1.9]; Preds (1): B2 Succs (1): B0 [B0 (EXIT)] Preds (1): B1 1234567891011121314151617181920212223242526272829303132CFG å°†ç¨‹åºæ‹†å¾—æ›´ç»†ï¼Œèƒ½å¤Ÿå°†æ‰§è¡Œçš„è¿‡ç¨‹è¡¨ç°çš„æ›´ç›´è§‚äº›ï¼Œä¸ºäº†é¿å…è·¯å¾„çˆ†ç‚¸ï¼Œå‡½æ•° inline çš„æ¡ä»¶ä¼šè®¾ç½®çš„æ¯”è¾ƒä¸¥æ ¼ï¼Œå‡½æ•° CFG å—å¤šæ—¶ä¸ä¼šè¿›è¡Œ inline åˆ†æï¼Œæ¨¡æ‹Ÿæ ˆæ·±åº¦è¶…è¿‡ä¸€å®šå€¼ä¸ä¼šè¿›è¡Œ inline åˆ†æï¼Œè¿™ä¸ªé»˜è®¤æ˜¯5ã€‚åœ¨MRCä½¿ç”¨çš„æ˜¯CFGè¿™æ ·çš„æ‰§è¡Œè·¯å¾„æ¨¡æ‹Ÿï¼ŒARCå°±æ²¡æœ‰äº†ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ²¡æœ‰å…¨éƒ¨æ¡ä»¶éƒ½è¿”å›ï¼ŒCFGå°±ä¼šæŠ¥é”™ï¼Œè€ŒASTå°±ä¸ä¼šã€‚å®˜æ–¹ AST ç›¸å…³æ–‡æ¡£* https://clang.llvm.org/docs/Tooling.html* https://clang.llvm.org/docs/IntroductionToTheClangAST.html* https://clang.llvm.org/docs/RAVFrontendAction.html* https://clang.llvm.org/docs/LibTooling.html* https://clang.llvm.org/docs/LibASTMatchers.htmlé™æ€æ£€æŸ¥çš„ä¸€äº›åº“ä»¥åŠä½¿ç”¨æ–¹æ³•* [FauxPas_document_translation/README.md at master Â· DeveloperLx/FauxPas_document_translation Â· GitHub](https://github.com/DeveloperLx/FauxPas_document_translation/blob/master/README.md?from=timeline&amp;isappinstalled=0)# CodeGen ç”Ÿæˆ IR ä»£ç å°†è¯­æ³•æ ‘ç¿»è¯‘æˆ LLVM IR ä¸­é—´ä»£ç ï¼Œåšä¸º LLVM Backend è¾“å…¥çš„æ¡¥æ¥è¯­è¨€ã€‚è¿™æ ·åšçš„å¥½å¤„åœ¨å‰è¨€é‡Œä¹Ÿæåˆ°äº†ï¼Œæ–¹ä¾¿ LLVM Backend ç»™å¤šè¯­è¨€åšç›¸åŒçš„ä¼˜åŒ–ï¼Œåšåˆ°è¯­è¨€æ— å…³ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜ä¼šè·Ÿ runtime æ¡¥æ¥ã€‚* å„ç§ç±»ï¼Œæ–¹æ³•ï¼Œæˆå‘˜å˜é‡ç­‰çš„ç»“æ„ä½“çš„ç”Ÿæˆï¼Œå¹¶å°†å…¶æ”¾åˆ°å¯¹åº”çš„Mach-Oçš„sectionä¸­ã€‚* Non-Fragile ABI åˆæˆ OBJC_IVAR_$_ åç§»å€¼å¸¸é‡ã€‚* ObjCMessageExpr ç¿»è¯‘æˆç›¸åº”ç‰ˆæœ¬çš„ objc_msgSendï¼Œsuper ç¿»è¯‘æˆ objc_msgSendSuperã€‚* strongï¼Œweakï¼Œcopyï¼Œatomic åˆæˆ @property è‡ªåŠ¨å®ç° setter å’Œ getterã€‚* @synthesize çš„å¤„ç†ã€‚* ç”Ÿæˆ block_layout æ•°æ®ç»“æ„* __block å’Œ __weak* _block_invoke* ARC å¤„ç†ï¼Œæ’å…¥ objc_storeStrong å’Œ objc_storeWeak ç­‰ ARC ä»£ç ã€‚ObjCAutoreleasePoolStmt è½¬ objc_autorealeasePoolPush / Popã€‚è‡ªåŠ¨æ·»åŠ  [super dealloc]ã€‚ç»™æ¯ä¸ª ivar çš„ç±»åˆæˆ .cxx_destructor æ–¹æ³•è‡ªåŠ¨é‡Šæ”¾ç±»çš„æˆå‘˜å˜é‡ã€‚ä¸ç®¡ç¼–è¯‘çš„è¯­è¨€æ—¶ Objective-C è¿˜æ˜¯ Swift ä¹Ÿä¸ç®¡å¯¹åº”æœºå™¨æ˜¯ä»€ä¹ˆï¼Œäº¦æˆ–æ˜¯å³æ—¶ç¼–è¯‘ï¼ŒLLVM é‡Œå”¯ä¸€ä¸å˜çš„æ˜¯ä¸­é—´è¯­è¨€ LLVM IRã€‚é‚£ä¹ˆæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•ç© LLVM IRã€‚## IR ç»“æ„ä¸‹é¢æ˜¯åˆšæ‰ç”Ÿæˆçš„ main.ll ä¸­é—´ä»£ç æ–‡ä»¶ã€‚ ; ModuleID = â€˜main.câ€™source_filename = â€œmain.câ€target datalayout = â€œe-m:o-i64:64-f80:128-n8:16:32:64-S128â€target triple = â€œx86_64-apple-macosx10.12.0â€ @.str = private unnamed_addr constant [16 x i8] câ€Please input a:\\00â€, align 1@.str.1 = private unnamed_addr constant [3 x i8] câ€%d\\00â€, align 1@.str.2 = private unnamed_addr constant [16 x i8] câ€Please input b:\\00â€, align 1@.str.3 = private unnamed_addr constant [32 x i8] câ€a is:%d,b is :%d,count equal:%d\\00â€, align 1 ; Function Attrs: nounwind ssp uwtabledefine i32 @main() #0 { %1 = alloca i32, align 4 %2 = alloca i32, align 4 %3 = bitcast i32* %1 to i8* call void @llvm.lifetime.start(i64 4, i8* %3) #3 %4 = bitcast i32* %2 to i8* call void @llvm.lifetime.start(i64 4, i8* %4) #3 %5 = tail call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([16 x i8], [16 x i8]* @.str, i64 0, i64 0)) %6 = call i32 (i8, â€¦) @scanf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32* nonnull %1) %7 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([16 x i8], [16 x i8]* @.str.2, i64 0, i64 0)) %8 = call i32 (i8, â€¦) @scanf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32* nonnull %2) %9 = load i32, i32* %1, align 4, !tbaa !2 %10 = load i32, i32* %2, align 4, !tbaa !2 %11 = add nsw i32 %10, %9 %12 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([32 x i8], [32 x i8]* @.str.3, i64 0, i64 0), i32 %9, i32 %10, i32 %11) call void @llvm.lifetime.end(i64 4, i8* %4) #3 call void @llvm.lifetime.end(i64 4, i8* %3) #3 ret i32 0} ; Function Attrs: argmemonly nounwinddeclare void @llvm.lifetime.start(i64, i8* nocapture) #1 ; Function Attrs: nounwinddeclare i32 @printf(i8* nocapture readonly, â€¦) #2 ; Function Attrs: nounwinddeclare i32 @scanf(i8* nocapture readonly, â€¦) #2 ; Function Attrs: argmemonly nounwinddeclare void @llvm.lifetime.end(i64, i8* nocapture) #1 attributes #0 = { nounwind ssp uwtable â€œdisable-tail-callsâ€=â€œfalseâ€ â€œless-precise-fpmadâ€=â€œfalseâ€ â€œno-frame-pointer-elimâ€=â€œtrueâ€ â€œno-frame-pointer-elim-non-leafâ€ â€œno-infs-fp-mathâ€=â€œfalseâ€ â€œno-nans-fp-mathâ€=â€œfalseâ€ â€œstack-protector-buffer-sizeâ€=â€œ8â€ â€œtarget-cpuâ€=â€œpenrynâ€ â€œtarget-featuresâ€=â€œ+cx16,+fxsr,+mmx,+sse,+sse2,+sse3,+sse4.1,+ssse3â€ â€œunsafe-fp-mathâ€=â€œfalseâ€ â€œuse-soft-floatâ€=â€œfalseâ€ }attributes #1 = { argmemonly nounwind }attributes #2 = { nounwind â€œdisable-tail-callsâ€=â€œfalseâ€ â€œless-precise-fpmadâ€=â€œfalseâ€ â€œno-frame-pointer-elimâ€=â€œtrueâ€ â€œno-frame-pointer-elim-non-leafâ€ â€œno-infs-fp-mathâ€=â€œfalseâ€ â€œno-nans-fp-mathâ€=â€œfalseâ€ â€œstack-protector-buffer-sizeâ€=â€œ8â€ â€œtarget-cpuâ€=â€œpenrynâ€ â€œtarget-featuresâ€=â€œ+cx16,+fxsr,+mmx,+sse,+sse2,+sse3,+sse4.1,+ssse3â€ â€œunsafe-fp-mathâ€=â€œfalseâ€ â€œuse-soft-floatâ€=â€œfalseâ€ }attributes #3 = { nounwind } !llvm.module.flags = !{!0}!llvm.ident = !{!1} !0 = !{i32 1, !â€PIC Levelâ€, i32 2}!1 = !{!â€Apple LLVM version 8.0.0 (clang-800.0.42.1)â€}!2 = !{!3, !3, i64 0}!3 = !{!â€intâ€, !4, i64 0}!4 = !{!â€omnipotent charâ€, !5, i64 0}!5 = !{!â€Simple C/C++ TBAAâ€} 123456789101112131415161718LLVM IR æœ‰ä¸‰ç§è¡¨ç¤ºæ ¼å¼ï¼Œç¬¬ä¸€ç§æ˜¯ bitcode è¿™æ ·çš„å­˜å‚¨æ ¼å¼ï¼Œä»¥ .bc åšåç¼€ï¼Œç¬¬äºŒç§æ˜¯å¯è¯»çš„ä»¥ .llï¼Œç¬¬ä¸‰ç§æ˜¯ç”¨äºå¼€å‘æ—¶æ“ä½œ LLVM IR çš„å†…å­˜æ ¼å¼ã€‚ä¸€ä¸ªç¼–è¯‘çš„å•å…ƒå³ä¸€ä¸ªæ–‡ä»¶åœ¨ IR é‡Œå°±æ˜¯ä¸€ä¸ª Moduleï¼ŒModule é‡Œæœ‰ Global Variable å’Œ Functionï¼Œåœ¨ Functioné‡Œæœ‰ Basic Blockï¼ŒBasic Block é‡Œæœ‰ æŒ‡ä»¤ Instructionsã€‚â€˜é€šè¿‡ä¸‹é¢çš„ IR ç»“æ„å›¾èƒ½å¤Ÿæ›´å¥½çš„ç†è§£ IR çš„æ•´ä½“ç»“æ„ã€‚![](https://github.com/ming1016/study/blob/master/pic/deeply-analyse-llvm08.png?raw=true)å›¾ä¸­å¯ä»¥çœ‹å‡ºæœ€å¤§çš„æ˜¯ Moduleï¼Œé‡Œé¢åŒ…å«å¤šä¸ª Functionï¼Œæ¯ä¸ª Function åŒ…å«å¤šä¸ª BasicBlockï¼ŒBasicBlock é‡Œå«æœ‰ Instructionï¼Œä»£ç éå¸¸æ¸…æ™°ï¼Œè¿™æ ·å¦‚æœæƒ³å¼€å‘ä¸€ä¸ªæ–°è¯­è¨€åªéœ€è¦å®Œæˆè¯­æ³•è§£æåé€šè¿‡ LLVM æä¾›çš„ä¸°å¯Œæ¥å£åœ¨å†…å­˜ä¸­ç”Ÿæˆ IR å°±å¯ä»¥ç›´æ¥è¿è¡Œåœ¨å„ä¸ªä¸åŒçš„å¹³å°ã€‚IR è¯­è¨€æ»¡è¶³é™æ€å•èµ‹å€¼ï¼Œå¯ä»¥å¾ˆå¥½çš„é™ä½æ•°æ®æµåˆ†æå’Œæ§åˆ¶æµåˆ†æçš„å¤æ‚åº¦ã€‚åŠåªèƒ½åœ¨å®šä¹‰æ—¶èµ‹å€¼ï¼Œåé¢ä¸èƒ½æ›´æ”¹ã€‚ä½†æ˜¯è¿™æ ·å°±æ²¡æ³•å†™ç¨‹åºäº†ï¼Œè¾“å…¥è¾“å‡ºéƒ½æ²¡æ³•å¼„ï¼Œæ‰€ä»¥å‡½æ•°å¼ç¼–ç¨‹æ‰ä¼šæœ‰ç±»ä¼¼ Monad è¿™æ ·æœºåˆ¶çš„åŸå› ã€‚## LLVM IR ä¼˜åŒ–ä½¿ç”¨ O2ï¼ŒO3 è¿™æ ·çš„ä¼˜åŒ–ä¼šè°ƒç”¨å¯¹åº”çš„ Pass æ¥è¿›è¡Œå¤„ç†ï¼Œæœ‰æ¯”å¦‚ç±»ä¼¼æ­»ä»£ç æ¸…ç†ï¼Œå†…è”åŒ–ï¼Œè¡¨è¾¾å¼é‡ç»„ï¼Œå¾ªç¯å˜é‡ç§»åŠ¨è¿™æ ·çš„ Passã€‚å¯ä»¥é€šè¿‡ llvm-opt è°ƒç”¨ LLVM ä¼˜åŒ–ç›¸å…³çš„åº“ã€‚å¯èƒ½ç›´æ¥è¿™ä¹ˆè¯´ä¸å¤ªç›´è§‚ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹ä¸‹åŸ c ä»£ç ä¸¾ä¸ªå°ä¾‹å­çœ‹çœ‹è¿™äº› Pass ä¼šåšå“ªäº›ä¼˜åŒ–ã€‚å½“æˆ‘ä»¬åŠ ä¸Š int i = 0;while (i &lt; 10) { i++; printf(â€œ%dâ€,i);} 1å¯¹åº”çš„ IR ä»£ç æ˜¯ %call4 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 1) %call4.1 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 2) %call4.2 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 3) %call4.3 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 4) %call4.4 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 5) %call4.5 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 6) %call4.6 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 7) %call4.7 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 8) %call4.8 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 9) %call4.9 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 10) 123å¯ä»¥çœ‹å‡ºæ¥è¿™ä¸ª while åœ¨ IR ä¸­å°±æ˜¯é‡å¤çš„æ‰“å°äº†10æ¬¡ï¼Œé‚£è¦æ˜¯æˆ‘æŠŠ10æ”¹æˆ100æ˜¯ä¸æ˜¯ä¼šå˜æˆæ‰“å°100æ¬¡å‘¢ï¼Ÿæˆ‘ä»¬æ”¹æˆ100åï¼Œå†æ¬¡ç”Ÿæˆ IR å¯ä»¥çœ‹åˆ° IR å˜æˆäº†è¿™æ ·ï¼š br label %while.body while.body: ; preds = %while.body, %entry %i.010 = phi i32 [ 0, %entry ], [ %inc, %while.body ] %inc = add nuw nsw i32 %i.010, 1 %call4 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 %inc) %exitcond = icmp eq i32 %inc, 100 br i1 %exitcond, label %while.end, label %while.body while.end: ; preds = %while.body %2 = load i32, i32* %a, align 4, !tbaa !2 %3 = load i32, i32* %b, align 4, !tbaa !2 %add = add nsw i32 %3, %2 %call5 = call i32 (i8, â€¦) @printf(i8 getelementptr inbounds ([11 x i8], [11 x i8]* @.str.3, i64 0, i64 0), i32 %add) call void @llvm.lifetime.end(i64 4, i8* nonnull %1) #3 call void @llvm.lifetime.end(i64 4, i8* nonnull %0) #3 ret i32 0} 123456789101112è¿™é‡Œå¯¹ä¸åŒæ¡ä»¶ç”Ÿæˆçš„ä¸åŒéƒ½æ˜¯ Pass ä¼˜åŒ–å™¨åšçš„äº‹æƒ…ã€‚è§£è¯»ä¸Šé¢è¿™æ®µ IR éœ€è¦å…ˆäº†è§£ä¸‹ IR è¯­æ³•å…³é”®å­—ï¼Œå¦‚ä¸‹ï¼š* @ - ä»£è¡¨å…¨å±€å˜é‡* % - ä»£è¡¨å±€éƒ¨å˜é‡* alloca - æŒ‡ä»¤åœ¨å½“å‰æ‰§è¡Œçš„å‡½æ•°çš„å †æ ˆå¸§ä¸­åˆ†é…å†…å­˜ï¼Œå½“è¯¥å‡½æ•°è¿”å›åˆ°å…¶è°ƒç”¨è€…æ—¶ï¼Œå°†è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚* i32ï¼š- i æ˜¯å‡ è¿™ä¸ªæ•´æ•°å°±ä¼šå å‡ ä½ï¼Œi32å°±æ˜¯32ä½4å­—èŠ‚* align - å¯¹é½ï¼Œæ¯”å¦‚ä¸€ä¸ª int,ä¸€ä¸ª char å’Œä¸€ä¸ª intã€‚å•ä¸ª int å 4ä¸ªå­—èŠ‚ï¼Œä¸ºäº†å¯¹é½åªå ä¸€ä¸ªå­—èŠ‚çš„ charéœ€è¦å‘4å¯¹é½å ç”¨4å­—èŠ‚ç©ºé—´ã€‚* Load - è¯»å‡ºï¼Œstore å†™å…¥* icmp - ä¸¤ä¸ªæ•´æ•°å€¼æ¯”è¾ƒï¼Œè¿”å›å¸ƒå°”å€¼* br - é€‰æ‹©åˆ†æ”¯ï¼Œæ ¹æ® cond æ¥è½¬å‘ labelï¼Œä¸æ ¹æ®æ¡ä»¶è·³è½¬çš„è¯ç±»ä¼¼ goto* indirectbr - æ ¹æ®æ¡ä»¶é—´æ¥è·³è½¬åˆ°ä¸€ä¸ª labelï¼Œè€Œè¿™ä¸ª label ä¸€èˆ¬æ˜¯åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼Œæ‰€ä»¥è·³è½¬ç›®æ ‡æ˜¯å¯å˜çš„ï¼Œç”±è¿è¡Œæ—¶å†³å®šçš„* label - ä»£ç æ ‡ç­¾ br label %while.body 1å¦‚ä¸Šé¢è¡¨è¿°ï¼Œbr ä¼šé€‰æ‹©è·³å‘ while.body å®šä¹‰çš„è¿™ä¸ªæ ‡ç­¾ã€‚è¿™ä¸ªæ ‡ç­¾é‡Œå¯ä»¥çœ‹åˆ° %exitcond = icmp eq i32 %inc, 100 br i1 %exitcond, label %while.end, label %while.body 1234567è¿™æ®µï¼Œicmp ä¼šæ¯”è¾ƒå½“å‰çš„ %inc å’Œå®šä¹‰çš„ä¸´ç•Œå€¼ 100ï¼Œæ ¹æ®è¿”å›çš„å¸ƒå°”å€¼æ¥å†³å®š br è·³è½¬åˆ°é‚£ä¸ªä»£ç æ ‡ç­¾ï¼ŒçœŸå°±è·³è½¬åˆ° while.end æ ‡ç­¾ï¼Œå¦å°±åœ¨è¿›å…¥ while.body æ ‡ç­¾ã€‚è¿™å°±æ˜¯ while çš„é€»è¾‘ã€‚é€šè¿‡br è·³è½¬å’Œ label è¿™ç§æ ‡ç­¾çš„æ¦‚å¿µä½¿å¾— IR è¯­è¨€èƒ½å¤Ÿæˆä¸ºæ›´ä½çº§å…¼å®¹æ€§æ›´é«˜æ›´æ–¹ä¾¿è½¬å‘æ›´ä½çº§è¯­è¨€çš„è¯­è¨€ã€‚## SSALLVM IR æ˜¯ SSA å½¢å¼çš„ï¼Œç»´æŠ¤åŒå‘ def-use ä¿¡æ¯ï¼Œuse-def æ˜¯é€šè¿‡æ™®é€šæŒ‡é’ˆå®ç°ä¿¡æ¯ç»´æŠ¤ï¼Œdef-use æ˜¯é€šè¿‡å†…å­˜è·³è¡¨å’Œé“¾è¡¨æ¥å®ç°çš„ï¼Œä¾¿äº forward dataflow analysis å’Œ backward dataflow analysisã€‚å¯ä»¥é€šè¿‡ ADCE è¿™ä¸ª Pass æ¥äº†è§£ä¸‹ backward dataflowï¼Œè¿™ä¸ªpass çš„æºæ–‡ä»¶åœ¨ lib/Transforms/Scalar/ADCE.cpp ä¸­ï¼ŒADCE å®ç°äº† Aggressive Dead Code Elimination Passã€‚è¿™ä¸ª Pass ä¹è§‚åœ°å‡è®¾æ‰€æœ‰ instructions éƒ½æ˜¯ Dead ç›´åˆ°è¯æ˜æ˜¯å¦å®šçš„ï¼Œå…è®¸å®ƒæ¶ˆé™¤å…¶ä»– DCE Pass çš„ Dead è®¡ç®— catchï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠå¾ªç¯è®¡ç®—ã€‚å…¶å®ƒ DCE ç›¸å…³çš„ Pass å¯ä»¥æŸ¥çœ‹åŒçº§ç›®å½•ä¸‹çš„ BDCE.cpp å’Œ DCE.cppï¼Œç›®å½•ä¸‹å…¶å®ƒçš„ Pass éƒ½æ˜¯å’Œæ•°æ®æµç›¸å…³çš„åˆ†æåŒ…å«äº†å„ç§åˆ†æç®—æ³•å’Œæ€è·¯ã€‚é‚£ä¹ˆçœ‹çœ‹åŠ æ³•è¿™ä¸ªæ“ä½œçš„ç›¸å…³çš„ IR ä»£ç  %2 = load i32, i32* %a, align 4, !tbaa !2%3 = load i32, i32* %b, align 4, !tbaa !2%add = add nsw i32 %3, %2 12åŠ æ³•å¯¹åº”çš„æŒ‡ä»¤æ˜¯ BinaryOperator::CreateAdd(Value *V1, Value *V2, const Twine &amp;Name) 12ä¸¤ä¸ªè¾“å…¥ V1 å’Œ V2 çš„ def-use æ˜¯å¦‚ä½•çš„å‘¢ï¼Œçœ‹çœ‹å¦‚ä¸‹ä»£ç  class Value { void addUse(Use &amp;U) { U.addToList(&amp;UseList); } // â€¦}; class Use { Value Val; Use *Next; PointerIntPair&lt;Use *, 2, PrevPtrTag&gt; Prev; // â€¦}; void Use::set(Value V) { if (Val) removeFromList(); Val = V; if (V) V-&gt;addUse(this);} Value *Use::operator=(Value *RHS) { set(RHS); return RHS;} class User : public Value { template &lt;int Idx, typename U&gt; static Use &amp;OpFrom(const U that) { return Idx &lt; 0 ? OperandTraits::op_end(const_cast&lt;U&gt;(that))[Idx] : OperandTraits::op_begin(const_cast&lt;U*&gt;(that))[Idx]; } template Use &amp;Op() { return OpFrom(this); } template const Use &amp;Op() const { return OpFrom(this); } // â€¦}; class Instruction : public User, public ilist_node_with_parent&lt;Instruction, BasicBlock&gt; { // â€¦}; class BinaryOperator : public Instruction { /// Construct a binary instruction, given the opcode and the two /// operands. Optionally (if InstBefore is specified) insert the instruction /// into a BasicBlock right before the specified instruction. The specified /// Instruction is allowed to be a dereferenced end iterator. /// static BinaryOperator *Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name = Twine(), Instruction *InsertBefore = nullptr); // â€¦}; BinaryOperator::BinaryOperator(BinaryOps iType, Value *S1, Value *S2, Type *Ty, const Twine &amp;Name, Instruction *InsertBefore) : Instruction(Ty, iType, OperandTraits::op_begin(this), OperandTraits::operands(this), InsertBefore) { Op&lt;0&gt;() = S1; Op&lt;1&gt;() = S2; init(iType); setName(Name);} BinaryOperator *BinaryOperator::Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore) { assert(S1-&gt;getType() == S2-&gt;getType() &amp;&amp; â€œCannot create binary operator with two operands of differing type!â€); return new BinaryOperator(Op, S1, S2, S1-&gt;getType(), Name, InsertBefore);} 1234567891011121314151617181920212223242526272829303132ä»ä»£ç é‡Œå¯ä»¥çœ‹å‡ºæ˜¯ä½¿ç”¨äº† Use å¯¹è±¡æ¥æŠŠ use å’Œ def è”ç³»èµ·æ¥çš„ã€‚LLVM IR é€šè¿‡ mem2reg è¿™ä¸ª Pass æ¥æŠŠå±€éƒ¨å˜é‡æˆ SSA å½¢å¼ã€‚è¿™ä¸ª Pass çš„ä»£ç åœ¨ lib/Transforms/Utils/Mem2Reg.cpp é‡Œã€‚LLVMé€šè¿‡ mem2reg Pass èƒ½å¤Ÿè¯†åˆ« alloca æ¨¡å¼ï¼Œå°†å…¶è®¾ç½® SSA valueã€‚è¿™æ—¶å°±ä¸åœ¨éœ€è¦ allocaï¼Œloadå’Œstoreäº†ã€‚mem2reg æ˜¯å¯¹ PromoteMemToReg å‡½æ•°è°ƒç”¨çš„ä¸€ä¸ªç®€å•åŒ…è£…ï¼ŒçœŸæ­£çš„ç®—æ³•å®ç°æ˜¯åœ¨ PromoteMemToReg å‡½æ•°é‡Œï¼Œè¿™ä¸ªå‡½æ•°åœ¨ lib/Transforms/Utils/PromoteMemoryToRegister.cpp è¿™ä¸ªæ–‡ä»¶é‡Œã€‚è¿™ä¸ªç®—æ³•ä¼šä½¿ alloca è¿™ä¸ªä»…ä»…ä½œä¸º load å’Œ stores çš„ç”¨é€”çš„æŒ‡ä»¤ä½¿ç”¨è¿­ä»£ dominator è¾¹ç•Œè½¬æ¢æˆ PHI èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡ä½¿ç”¨æ·±åº¦ä¼˜å…ˆå‡½æ•°æ’åºé‡å†™ loads å’Œ storesã€‚è¿™ç§ç®—æ³•å«åš iterated dominance frontierç®—æ³•ï¼Œå…·ä½“å®ç°æ–¹æ³•å¯ä»¥å‚çœ‹ PromoteMemToReg å‡½æ•°çš„å®ç°ã€‚å½“ç„¶æŠŠå¤šä¸ªå­—èŠ‚ç  .bc åˆæˆä¸€ä¸ªæ–‡ä»¶ï¼Œé“¾æ¥æ—¶è¿˜ä¼šä¼˜åŒ–ï¼ŒIR ç»“æ„åœ¨ä¼˜åŒ–åä¼šæœ‰å˜åŒ–ï¼Œè¿™æ ·è¿˜èƒ½å¤Ÿåœ¨å˜åŒ–åçš„ IR çš„ç»“æ„ä¸Šå†è¿›è¡Œæ›´å¤šçš„ä¼˜åŒ–ã€‚è¿™é‡Œå¯ä»¥è¿›è¡Œ lli è§£é‡Šæ‰§è¡Œ LLVM IRã€‚llc ç¼–è¯‘å™¨æ˜¯ä¸“é—¨ç¼–è¯‘ LLVM IR çš„ç¼–è¯‘å™¨ç”¨æ¥ç”Ÿæˆæ±‡ç¼–æ–‡ä»¶ã€‚è°ƒç”¨ç³»ç»Ÿæ±‡ç¼–å™¨æ¯”å¦‚ GNU çš„ as æ¥ç¼–è¯‘ç”Ÿæˆ .o Object æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç”¨é“¾æ¥å™¨é“¾æ¥ç›¸å…³åº“å’Œ .o æ–‡ä»¶ä¸€èµ·ç”Ÿæˆå¯æ‰§è¡Œçš„ .out æˆ–è€… exe æ–‡ä»¶äº†ã€‚llvm-mc è¿˜å¯ä»¥ç›´æ¥ç”Ÿæˆ object æ–‡ä»¶ã€‚# Clang CFEåŠ¨æ‰‹ç©è‚¯å®šä¸èƒ½å°‘äº† Clang çš„å‰ç«¯ç»„ä»¶åŠåº“ï¼Œç†Ÿæ‚‰è¿™äº›åº“ä»¥åå°±èƒ½å¤Ÿè‡ªå·±åŠ¨æ‰‹ç”¨è¿™äº›åº“ç¼–å†™è‡ªå·±çš„ç¨‹åºäº†ã€‚ä¸‹é¢æˆ‘å°±å¯¹è¿™äº›åº“åšäº›ä»‹ç»ï¼Œç„¶åå†ç€é‡è¯´è¯´ libclang åº“ï¼Œä»¥åŠå¦‚ä½•ç”¨å®ƒæ¥å†™å·¥å…·ã€‚* LLVM Support Library - LLVM libSupport åº“æä¾›äº†è®¸å¤šåº•å±‚åº“å’Œæ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬å‘½ä»¤è¡Œ option å¤„ç†ï¼Œå„ç§å®¹å™¨å’Œç³»ç»ŸæŠ½è±¡å±‚ï¼Œç”¨äºæ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€‚* The Clang â€œBasicâ€ Library - æä¾›äº†è·Ÿè¸ªå’Œæ“çºµ source buffersï¼Œsource buffers çš„ä½ç½®ï¼Œdiagnosticsï¼Œtokens,æŠ½è±¡ç›®æ ‡ä»¥åŠç¼–è¯‘è¯­è¨€å­é›†ä¿¡æ¯çš„ low-level å®ç”¨ç¨‹åºã€‚è¿˜æœ‰éƒ¨åˆ†å¯ä»¥ç”¨åœ¨å…¶ä»–çš„é c è¯­è¨€æ¯”å¦‚ SourceLocationï¼ŒSourceManagerï¼ŒDiagnositicsï¼ŒFileManager ç­‰ã€‚å…¶ä¸­ Diagnositics è¿™ä¸ªå­ç³»ç»Ÿæ˜¯ç¼–è¯‘å™¨å’Œæ™®é€šå†™ä»£ç äººäº¤æµçš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒä¼šè¯Šæ–­å½“å‰ä»£ç å“ªäº›ä¸æ­£ç¡®ï¼ŒæŒ‰ç…§ä¸¥é‡ç¨‹åº¦è€Œäº§ç”Ÿ WARNING æˆ– ERRORï¼Œæ¯ä¸ªè¯Šæ–­ä¼šæœ‰å”¯ä¸€ ID ï¼Œ SourceLocation ä¼šè´Ÿè´£ç®¡ç†ã€‚* The Driver Library - å’Œ Driver ç›¸å…³çš„åº“ï¼Œä¸Šé¢å·²ç»å¯¹å…¶åšäº†è¯¦ç»†çš„ä»‹ç»ã€‚* Precompiled Headers - Clang æ”¯æŒé¢„ç¼–è¯‘ headers çš„ä¸¤ä¸ªå®ç°ã€‚* The Frontend Library - è¿™ä¸ªåº“é‡ŒåŒ…å«äº†åœ¨ Clang åº“ä¹‹ä¸Šæ„å»ºçš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¾“å‡º diagnositics çš„å‡ ç§æ–¹æ³•ã€‚* The Lexer and Preprocessor Library - è¯æ³•åˆ†æå’Œé¢„å¤„ç†çš„åº“ï¼ŒåŒ…å«äº† Tokenï¼ŒAnnotation Tokensï¼ŒTokenLexerï¼ŒLexer ç­‰è¯æ³•ç±»ï¼Œè¿˜æœ‰ Parser Library å’Œ AST è¯­æ³•æ ‘ç›¸å…³çš„æ¯”å¦‚ Typeï¼ŒASTContextï¼ŒQualTypeï¼ŒDeclarationNameï¼ŒDeclContext ä»¥åŠ CFG ç±»ã€‚* The Sema Library - è§£æå™¨è°ƒç”¨æ­¤åº“æ—¶ï¼Œä¼šå¯¹è¾“å…¥è¿›è¡Œè¯­ä¹‰åˆ†æã€‚ å¯¹äºæœ‰æ•ˆçš„ç¨‹åºï¼ŒSema ä¸ºè§£ææ„é€ ä¸€ä¸ª ASTã€‚* The CodeGen Library - CodeGen ç”¨ AST ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä»ä¸­ç”Ÿæˆ LLVM IR ä»£ç ã€‚## libclanglibclang ä¼šè®©ä½ è§‰å¾— clang ä¸ä»…ä»…åªæ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„ç¼–è¯‘å™¨ã€‚ä¸‹é¢ä»è§£ææºç æ¥è¯´ä¸‹å…ˆå†™ä¸ª libclang çš„ç¨‹åºæ¥è§£ææºç  int main(int argc, char *argv[]) { CXIndex Index = clang_createIndex(0, 0); CXTranslationUnit TU = clang_parseTranslationUnit(Index, 0, argv, argc, 0, 0, CXTranslationUnit_None); for (unsigned I = 0, N = clang_getNumDiagnostics(TU); I != N; ++I) { CXDiagnostic Diag = clang_getDiagnostic(TU, I); CXString String = clang_formatDiagnostic(Diag,clang_defaultDiagnosticDisplayOptions()); fprintf(stderr, â€œ%s\\nâ€, clang_getCString(String)); clang_disposeString(String); } clang_disposeTranslationUnit(TU); clang_disposeIndex(Index); return 0;} 12å†å†™ä¸ªæœ‰é—®é¢˜çš„ c ç¨‹åº struct List { /*/ };int sum(union List *L) { / â€¦ */ } 1234567891011è¿è¡Œäº†è¯­æ³•æ£€æŸ¥åä¼šå‡ºç°æç¤ºä¿¡æ¯```bashlist.c:2:9: error: use of &apos;List&apos; with tag type that does not match previous declarationint sum(union List *Node) {^~~~~structlist.c:1:8: note: previous use is herestruct List {^ ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è¯Šæ–­è¿‡ç¨‹ï¼Œæ˜¾ç¤ºå‡ ä¸ªæ ¸å¿ƒè¯Šæ–­æ–¹æ³•è¯Šæ–­å‡ºé—®é¢˜ enum CXDiagnosticSeverity clang_getDiagnosticSeverity(CXDiagnostic Diag); CXSourceLocation clang_getDiagnosticLocation(CXDiagnostic Diag); CXString clang_getDiagnosticSpelling(CXDiagnostic Diag); æ¥ç€è¿›è¡Œé«˜äº®æ˜¾ç¤ºï¼Œæœ€åæä¾›ä¸¤ä¸ªæç¤ºä¿®å¤çš„æ–¹æ³• unsigned clang_getDiagnosticNumFixIts(CXDiagnostic Diag);* CXString clang_getDiagnosticFixIt(CXDiagnostic Diag, unsigned FixIt,CXSourceRange *ReplacementRange); æˆ‘ä»¬å…ˆéå†è¯­æ³•æ ‘çš„èŠ‚ç‚¹ã€‚æº c ç¨‹åºå¦‚ä¸‹ 12345678910struct List { int Data; struct List *Next;};int sum(struct List *Node) { int result = 0; for (; Node; Node = Node-&gt;Next) result = result + Node-&gt;Data; return result;} å…ˆæ‰¾å‡ºæ‰€æœ‰çš„å£°æ˜ï¼Œæ¯”å¦‚ Listï¼ŒDataï¼ŒNextï¼Œsumï¼ŒNode ä»¥åŠ result ç­‰ã€‚å†æ‰¾å‡ºå¼•ç”¨ï¼Œæ¯”å¦‚ struct List *Next é‡Œçš„ Listã€‚è¿˜æœ‰å£°æ˜å’Œè¡¨è¾¾å¼ï¼Œæ¯”å¦‚ int result = 0; è¿˜æœ‰ for è¯­å¥ç­‰ã€‚è¿˜æœ‰å®å®šä¹‰å’Œå®ä¾‹åŒ–ç­‰ã€‚ CXCursor ä¼šç»Ÿä¸€ AST çš„èŠ‚ç‚¹ï¼Œè§„èŒƒåŒ…å«çš„ä¿¡æ¯ ä»£ç æ‰€åœ¨ä½ç½®å’Œé•¿åº¦ åå­—å’Œç¬¦å·è§£æ ç±»å‹ å­èŠ‚ç‚¹ ä¸¾ä¸ª CXCursor åˆ†æä¾‹å­ 1234struct List { int Data; struct List *Next;}; CXCursor çš„å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ 12345678910111213//Top-level cursor Cclang_getCursorKind(C) == CXCursor_StructDeclclang_getCursorSpelling(C) == &quot;List&quot; //è·å–åå­—å­—ç¬¦ä¸²clang_getCursorLocation(C) //ä½ç½®clang_getCursorExtent(C) //é•¿åº¦clang_visitChildren(C, ...); //è®¿é—®å­èŠ‚ç‚¹//Reference cursor Rclang_getCursorKind(R) == CXCursor_TypeRef clang_getCursorSpelling(R) == &quot;List&quot;clang_getCursorLocation(R)clang_getCursorExtent(R)clang_getCursorReferenced(R) == C //æŒ‡å‘C DriveråŠ¨æ‰‹ç©çš„è¯ï¼Œç‰¹åˆ«æ˜¯æƒ³è¦ä½¿ç”¨è¿™äº›å·¥å…·é“¾ä¹‹å‰æœ€å¥½å…ˆäº†è§£æˆ‘ä»¬å’Œ LLVM äº¤äº’çš„å®ç°ã€‚é‚£ä¹ˆè¿™éƒ¨åˆ†å°±ä»‹ç»ä¸‹ LLVM é‡Œçš„ Driverã€‚ Driver æ˜¯ Clang é¢å¯¹ç”¨æˆ·çš„æ¥å£ï¼Œç”¨æ¥è§£æ Option è®¾ç½®ï¼Œåˆ¤æ–­å†³å®šè°ƒç”¨çš„å·¥å…·é“¾ï¼Œæœ€ç»ˆå®Œæˆæ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ã€‚ ç›¸å…³æºä»£ç åœ¨è¿™é‡Œï¼šclang/tools/driver/driver.cpp æ•´ä¸ª Driver æºç çš„å…¥å£å‡½æ•°å°±æ˜¯ driver.cpp é‡Œçš„ main() å‡½æ•°ã€‚ä»è¿™é‡Œå¯ä»¥ä½œä¸ºå…¥å£çœ‹çœ‹æ•´ä¸ª driver æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¿™æ ·æ›´åˆ©äºæˆ‘ä»¬ä»¥åè½»æ¾åŠ¨æ‰‹é©¾é©­ LLVMã€‚ 1234567891011121314151617181920212223242526272829303132int main(int argc_, const char **argv_) { llvm::sys::PrintStackTraceOnErrorSignal(argv_[0]); llvm::PrettyStackTraceProgram X(argc_, argv_); llvm::llvm_shutdown_obj Y; // Call llvm_shutdown() on exit. if (llvm::sys::Process::FixupStandardFileDescriptors()) return 1; SmallVector&lt;const char *, 256&gt; argv; llvm::SpecificBumpPtrAllocator&lt;char&gt; ArgAllocator; std::error_code EC = llvm::sys::Process::GetArgumentVector( argv, llvm::makeArrayRef(argv_, argc_), ArgAllocator); if (EC) { llvm::errs() &lt;&lt; &quot;error: couldn&apos;t get arguments: &quot; &lt;&lt; EC.message() &lt;&lt; &apos;\\n&apos;; return 1; } llvm::InitializeAllTargets(); std::string ProgName = argv[0]; std::pair&lt;std::string, std::string&gt; TargetAndMode = ToolChain::getTargetAndModeFromProgramName(ProgName); llvm::BumpPtrAllocator A; llvm::StringSaver Saver(A); //çœç•¥ ... // If we have multiple failing commands, we return the result of the first // failing command. return Res;} Driver çš„å·¥ä½œæµç¨‹å›¾åœ¨ driver.cpp çš„ main å‡½æ•°é‡Œæœ‰ Driver çš„åˆå§‹åŒ–ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å’Œ driver ç›¸å…³çš„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344 Driver TheDriver(Path, llvm::sys::getDefaultTargetTriple(), Diags); SetInstallDir(argv, TheDriver, CanonicalPrefixes); insertTargetAndModeArgs(TargetAndMode.first, TargetAndMode.second, argv, SavedStrings); SetBackdoorDriverOutputsFromEnvVars(TheDriver); std::unique_ptr&lt;Compilation&gt; C(TheDriver.BuildCompilation(argv)); int Res = 0; SmallVector&lt;std::pair&lt;int, const Command *&gt;, 4&gt; FailingCommands; if (C.get()) Res = TheDriver.ExecuteCompilation(*C, FailingCommands); // Force a crash to test the diagnostics. if (::getenv(&quot;FORCE_CLANG_DIAGNOSTICS_CRASH&quot;)) { Diags.Report(diag::err_drv_force_crash) &lt;&lt; &quot;FORCE_CLANG_DIAGNOSTICS_CRASH&quot;; // Pretend that every command failed. FailingCommands.clear(); for (const auto &amp;J : C-&gt;getJobs()) if (const Command *C = dyn_cast&lt;Command&gt;(&amp;J)) FailingCommands.push_back(std::make_pair(-1, C)); } for (const auto &amp;P : FailingCommands) { int CommandRes = P.first; const Command *FailingCommand = P.second; if (!Res) Res = CommandRes; // If result status is &lt; 0, then the driver command signalled an error. // If result status is 70, then the driver command reported a fatal error. // On Windows, abort will return an exit code of 3. In these cases, // generate additional diagnostic information if possible. bool DiagnoseCrash = CommandRes &lt; 0 || CommandRes == 70;#ifdef LLVM_ON_WIN32 DiagnoseCrash |= CommandRes == 3;#endif if (DiagnoseCrash) { TheDriver.generateCompilationDiagnostics(*C, *FailingCommand); break; } } å¯ä»¥çœ‹åˆ°åˆå§‹åŒ– Driver å driver ä¼šè°ƒç”¨ BuildCompilation ç”Ÿæˆ Compilationã€‚Compilation å­—é¢æ„æ€æ˜¯åˆé›†çš„æ„æ€ï¼Œé€šè¿‡ driver.cpp çš„ include å¯ä»¥çœ‹åˆ° 1#include &quot;clang/Driver/Compilation.h&quot; æ ¹æ®æ­¤è·¯å¾„å¯ä»¥ç»†çœ‹ä¸‹ Compilation è¿™ä¸ªä¸ºäº† driver è®¾ç½®çš„ä¸€ç»„ä»»åŠ¡çš„ç±»ã€‚é€šè¿‡è¿™ä¸ªç±»æˆ‘ä»¬æå–é‡Œé¢è¿™ä¸ªé˜¶æ®µæ¯”è¾ƒå…³é”®çš„å‡ ä¸ªä¿¡æ¯å‡ºæ¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class Compilation { /// The original (untranslated) input argument list. llvm::opt::InputArgList *Args; /// The driver translated arguments. Note that toolchains may perform their /// own argument translation. llvm::opt::DerivedArgList *TranslatedArgs; /// The driver we were created by. const Driver &amp;TheDriver; /// The default tool chain. const ToolChain &amp;DefaultToolChain; ... /// The list of actions. This is maintained and modified by consumers, via /// getActions(). ActionList Actions; /// The root list of jobs. JobList Jobs; ...public: ... const Driver &amp;getDriver() const { return TheDriver; } const ToolChain &amp;getDefaultToolChain() const { return DefaultToolChain; } ... ActionList &amp;getActions() { return Actions; } const ActionList &amp;getActions() const { return Actions; } ... JobList &amp;getJobs() { return Jobs; } const JobList &amp;getJobs() const { return Jobs; } void addCommand(std::unique_ptr&lt;Command&gt; C) { Jobs.addJob(std::move(C)); } ... /// ExecuteCommand - Execute an actual command. /// /// \\param FailingCommand - For non-zero results, this will be set to the /// Command which failed, if any. /// \\return The result code of the subprocess. int ExecuteCommand(const Command &amp;C, const Command *&amp;FailingCommand) const; /// ExecuteJob - Execute a single job. /// /// \\param FailingCommands - For non-zero results, this will be a vector of /// failing commands and their associated result code. void ExecuteJobs( const JobList &amp;Jobs, SmallVectorImpl&lt;std::pair&lt;int, const Command *&gt;&gt; &amp;FailingCommands) const; ...}; é€šè¿‡è¿™äº›å…³é”®å®šä¹‰å†ç»“åˆ BuildCompilation å‡½æ•°çš„å®ç°å¯ä»¥çœ‹å‡ºè¿™ä¸ª Driver çš„æµç¨‹æ˜¯æŒ‰ç…§ ArgList - Actions - Jobs æ¥çš„ï¼Œå®Œæ•´çš„å›¾å¦‚ä¸‹ï¼š Parseçœ‹å®Œå®Œæ•´çš„ Driver æµç¨‹åï¼Œæˆ‘ä»¬å°±å…ˆä» Parse å¼€å§‹è¯´èµ·ã€‚ Parse æ˜¯è§£æé€‰é¡¹ï¼Œå¯¹åº”çš„ä»£ç åœ¨ ParseArgStrings è¿™ä¸ªå‡½æ•°é‡Œã€‚ ä¸‹é¢é€šè¿‡æ‰§è¡Œä¸€ä¸ªè¯•è¯•ï¼Œæ¯”å¦‚ clang -### main.c -ITheOptionWeAdd è¿™é‡Œçš„ -I æ˜¯ Clang æ”¯æŒçš„ï¼Œåœ¨ Clang é‡Œæ˜¯ Option ç±»ï¼ŒClang ä¼šå¯¹è¿™äº› Option ä¸“é—¨çš„è¿›è¡Œè§£æï¼Œä½¿ç”¨ä¸€ç§ DSL è¯­è¨€å°†å…¶è½¬æˆ .tb æ–‡ä»¶åä½¿ç”¨ table-gen è½¬æˆ C++ è¯­è¨€å’Œå…¶å®ƒä»£ç ä¸€èµ·è¿›è¡Œç¼–è¯‘ã€‚ Driver å±‚ä¼šè§£ææˆ‘ä»¬ä¼ å…¥çš„ -I Option å‚æ•°ã€‚ -x ååŠ ä¸ª c è¡¨ç¤ºæ˜¯å¯¹ c è¯­è¨€è¿›è¡Œç¼–è¯‘ï¼ŒClang Driver é€šè¿‡æ–‡ä»¶çš„åç¼€ .c æ¥è‡ªåŠ¨åŠ ä¸Šè¿™ä¸ª å‚æ•°çš„ã€‚å¦‚æœæ˜¯ c++ è¯­è¨€ï¼Œä»…ä»…é€šè¿‡åœ¨ -x åæ·»åŠ  cpp ç¼–è¯‘è¿˜æ˜¯ä¼šå‡ºé”™çš„ã€‚ 1clang -x c++ main.cpp é€šè¿‡æŠ¥é”™ä¿¡æ¯å¯ä»¥çœ‹å‡ºä¸€äº›é“¾æ¥é”™è¯¯ å› ä¸ºéœ€è¦é“¾æ¥ C++ æ ‡å‡†åº“ï¼Œæ‰€ä»¥åŠ ä¸Šå‚æ•° -lc++ å°±å¯ä»¥äº† 1clang -x c++ -lc++ main.cpp é‚£ä¹ˆ clang++ å’Œ clang å‘½ä»¤çš„åŒºåˆ«å°±åœ¨äºä¼šåŠ è½½ C++ åº“ï¼Œå…¶å® clang++ æœ€ç»ˆè¿˜æ˜¯ä¼šè°ƒç”¨ Clangï¼Œé‚£ä¹ˆæ‰‹åŠ¨æŒ‡å®šåŠ è½½åº“å°±å¥½äº†ä½•å¿…è¿˜è¦å¤šä¸ª clang++ å‘½ä»¤å‘¢ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨è¿™ä¸ªå‘½ä»¤é‡Œå»åŠ è½½æ›´å¤šçš„åº“ï¼Œé™¤äº†æ ‡å‡†åº“ä»¥å¤–ï¼Œè¿˜æœ‰äº›é C++ æ ‡å‡†åº“ï¼Œè¾…åŠ©åº“ç­‰ç­‰ã€‚è¿™æ ·åªè¦æ˜¯ C++ çš„ç¨‹åºç”¨ clang++ å¤Ÿäº†ã€‚ åªæœ‰åŠ ä¸Š -cc1 è¿™ä¸ª option æ‰èƒ½è¿›å…¥åˆ° Clang driver æ¯”å¦‚ emit-obj è¿™ä¸ª option å°±éœ€è¦å…ˆåŠ ä¸Š -cc1ã€‚ è¿™ç‚¹å¯ä»¥é€šè¿‡ driver.cpp æºç æ¥çœ‹ï¼Œåœ¨ main() å‡½æ•°é‡Œå¯ä»¥çœ‹åˆ°åœ¨åšäº†äº›å¤šå¹³å°çš„å…¼å®¹å¤„ç†åå°±å¼€å§‹è¿›è¡Œå¯¹å…¥å‚åˆ¤æ–­ç¬¬ä¸€ä¸ªæ˜¯ä¸æ˜¯ -cc1ã€‚ 123456789101112131415if (MarkEOLs &amp;&amp; argv.size() &gt; 1 &amp;&amp; StringRef(argv[1]).startswith(&quot;-cc1&quot;)) MarkEOLs = false; llvm::cl::ExpandResponseFiles(Saver, Tokenizer, argv, MarkEOLs); // å¤„ç† -cc1 é›†æˆå·¥å…· auto FirstArg = std::find_if(argv.begin() + 1, argv.end(), [](const char *A) { return A != nullptr; }); if (FirstArg != argv.end() &amp;&amp; StringRef(*FirstArg).startswith(&quot;-cc1&quot;)) { // å¦‚æœ -cc1 æ¥è‡ª response file, ç§»é™¤ EOL sentinels if (MarkEOLs) { auto newEnd = std::remove(argv.begin(), argv.end(), nullptr); argv.resize(newEnd - argv.begin()); } return ExecuteCC1Tool(argv, argv[1] + 4); } å¦‚æœæ˜¯ -cc1 çš„è¯ä¼šè°ƒç”¨ ExecuteCC1Tool è¿™ä¸ªå‡½æ•°ï¼Œå…ˆçœ‹çœ‹è¿™ä¸ªå‡½æ•° 1234567891011static int ExecuteCC1Tool(ArrayRef&lt;const char *&gt; argv, StringRef Tool) { void *GetExecutablePathVP = (void *)(intptr_t) GetExecutablePath; if (Tool == &quot;&quot;) return cc1_main(argv.slice(2), argv[0], GetExecutablePathVP); if (Tool == &quot;as&quot;) return cc1as_main(argv.slice(2), argv[0], GetExecutablePathVP); // æ‹’ç»æœªçŸ¥å·¥å…· llvm::errs() &lt;&lt; &quot;error: unknown integrated tool &apos;&quot; &lt;&lt; Tool &lt;&lt; &quot;&apos;\\n&quot;; return 1;} æœ€ç»ˆçš„æ‰§è¡Œä¼šæ‰§è¡Œ cc1-main æˆ–è€… cc1as_main ã€‚è¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«åœ¨ driver.cpp åŒçº§ç›®å½•é‡Œçš„ cc1_main.cpp å’Œ cc1as_main.cpp ä¸­ã€‚ ä¸‹é¢çœ‹çœ‹æœ‰å“ªäº›è§£æ Args çš„æ–¹æ³• ParseAnalyzerArgs - è§£æå‡ºé™æ€åˆ†æå™¨ option ParseMigratorArgs - è§£æ Migrator option ParseDependencyOutputArgs - è§£æä¾èµ–è¾“å‡º option ParseCommentArgs - è§£ææ³¨é‡Š option ParseFileSystemArgs - è§£ææ–‡ä»¶ç³»ç»Ÿ option ParseFrontendArgs - è§£æå‰ç«¯ option ParseTargetArgs - è§£æç›®æ ‡ option ParseCodeGenArgs - è§£æ CodeGen ç›¸å…³çš„ option ParseHeaderSearchArgs - è§£æ HeaderSearch å¯¹è±¡ç›¸å…³åˆå§‹åŒ–ç›¸å…³çš„ option parseSanitizerKinds - è§£æ Sanitizer Kinds ParsePreprocessorArgs - è§£æé¢„å¤„ç†çš„ option ParsePreprocessorOutputArgs - è§£æé¢„å¤„ç†è¾“å‡ºçš„ option PipelinePipeline è¿™é‡Œå¯ä»¥æ·»åŠ  -ccc-print-phases çœ‹åˆ°è¿›å…¥ Pipeline ä»¥åçš„äº‹æƒ…ã€‚ è¿™äº›å¦‚ -ccc-print-phases è¿™æ ·çš„ option åœ¨ç¼–è¯‘æ—¶ä¼šç”Ÿæˆ.inc è¿™æ ·çš„ C++ TableGen æ–‡ä»¶ã€‚åœ¨ Options.td å¯ä»¥çœ‹åˆ°å…¨éƒ¨çš„ option å®šä¹‰ã€‚ åœ¨ Clang çš„ Pipeline ä¸­å¾ˆå¤šå®é™…è¡Œä¸ºéƒ½æœ‰å¯¹åº”çš„ Actionï¼Œæ¯”å¦‚ preprocessor æ—¶æä¾›æ–‡ä»¶çš„ InputAction å’Œç”¨äºç»‘å®šæœºå™¨æ¶æ„çš„ BindArchActionã€‚ ä½¿ç”¨ clang main.c -arch i386 -arch x86_64 -o main ç„¶å file main èƒ½å¤Ÿçœ‹åˆ°è¿™æ—¶ BindArchAction è¿™ä¸ª Action èµ·åˆ°äº†ä½œç”¨ï¼Œç¼–è¯‘é“¾æ¥äº†ä¸¤æ¬¡åŒæ—¶åˆ›å»ºäº†ä¸€ä¸ªåº“æ—¢èƒ½å¤Ÿæ”¯æŒ32ä½ä¹Ÿèƒ½å¤Ÿæ”¯æŒ64ä½ç”¨ lipo æ‰“åŒ…ã€‚ Action12345678910111213141516/// BuildActions - Construct the list of actions to perform for the /// given arguments, which are only done for a single architecture. /// /// \\param C - The compilation that is being built. /// \\param Args - The input arguments. /// \\param Actions - The list to store the resulting actions onto. void BuildActions(Compilation &amp;C, llvm::opt::DerivedArgList &amp;Args, const InputList &amp;Inputs, ActionList &amp;Actions) const; /// BuildUniversalActions - Construct the list of actions to perform /// for the given arguments, which may require a universal build. /// /// \\param C - The compilation that is being built. /// \\param TC - The default host tool chain. void BuildUniversalActions(Compilation &amp;C, const ToolChain &amp;TC, const InputList &amp;BAInputs) const; ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ä¸­ BuildUniversalActions æœ€åä¹Ÿä¼šèµ° BuildActionsã€‚BuildActions äº†ï¼Œè¿›å…¥è¿™ä¸ªæ–¹æ³• 1234567891011void Driver::BuildActions(Compilation &amp;C, DerivedArgList &amp;Args, const InputList &amp;Inputs, ActionList &amp;Actions) const { llvm::PrettyStackTraceString CrashInfo(&quot;Building compilation actions&quot;); if (!SuppressMissingInputWarning &amp;&amp; Inputs.empty()) { Diag(clang::diag::err_drv_no_input_files); return; } Arg *FinalPhaseArg; phases::ID FinalPhase = getFinalPhase(Args, &amp;FinalPhaseArg); æ¥ç€è·Ÿ getFinalPhase è¿™ä¸ªæ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930// -{E,EP,P,M,MM} only run the preprocessor. if (CCCIsCPP() || (PhaseArg = DAL.getLastArg(options::OPT_E)) || (PhaseArg = DAL.getLastArg(options::OPT__SLASH_EP)) || (PhaseArg = DAL.getLastArg(options::OPT_M, options::OPT_MM)) || (PhaseArg = DAL.getLastArg(options::OPT__SLASH_P))) { FinalPhase = phases::Preprocess; // -{fsyntax-only,-analyze,emit-ast} only run up to the compiler. } else if ((PhaseArg = DAL.getLastArg(options::OPT_fsyntax_only)) || (PhaseArg = DAL.getLastArg(options::OPT_module_file_info)) || (PhaseArg = DAL.getLastArg(options::OPT_verify_pch)) || (PhaseArg = DAL.getLastArg(options::OPT_rewrite_objc)) || (PhaseArg = DAL.getLastArg(options::OPT_rewrite_legacy_objc)) || (PhaseArg = DAL.getLastArg(options::OPT__migrate)) || (PhaseArg = DAL.getLastArg(options::OPT__analyze, options::OPT__analyze_auto)) || (PhaseArg = DAL.getLastArg(options::OPT_emit_ast))) { FinalPhase = phases::Compile; // -S only runs up to the backend. } else if ((PhaseArg = DAL.getLastArg(options::OPT_S))) { FinalPhase = phases::Backend; // -c compilation only runs up to the assembler. } else if ((PhaseArg = DAL.getLastArg(options::OPT_c))) { FinalPhase = phases::Assemble; // Otherwise do everything. } else FinalPhase = phases::Link; çœ‹å®Œè¿™æ®µä»£ç å°±ä¼šå‘ç°å…¶å®æ¯æ¬¡çš„ option éƒ½ä¼šå®Œæ•´çš„èµ°ä¸€éä»é¢„å¤„ç†ï¼Œé™æ€åˆ†æï¼Œbackend å†åˆ°æ±‡ç¼–çš„è¿‡ç¨‹ã€‚ ä¸‹é¢åˆ—ä¸‹ä¸€äº›ç¼–è¯‘å™¨çš„å‰ç«¯ Actionï¼Œå¤§å®¶å¯ä»¥ä¸€ä¸ªä¸ªç”¨ç€ç©ã€‚ InitOnlyAction - åªåšå‰ç«¯åˆå§‹åŒ–ï¼Œç¼–è¯‘å™¨ option æ˜¯ -init-only PreprocessOnlyAction - åªåšé¢„å¤„ç†ï¼Œä¸è¾“å‡ºï¼Œç¼–è¯‘å™¨çš„ option æ˜¯ -Eonly PrintPreprocessedAction - åšé¢„å¤„ç†ï¼Œå­é€‰é¡¹è¿˜åŒ…æ‹¬-Pã€-Cã€-dMã€-dD å…·ä½“å¯ä»¥æŸ¥çœ‹PreprocessorOutputOptions è¿™ä¸ªç±»ï¼Œç¼–è¯‘å™¨ option æ˜¯ -E RewriteIncludesAction - é¢„å¤„ç† DumpTokensAction - æ‰“å°tokenï¼Œoption æ˜¯ -dump-tokens DumpRawTokensAction - è¾“å‡ºåŸå§‹tokensï¼ŒåŒ…æ‹¬ç©ºæ ¼ç¬¦ï¼Œoption æ˜¯ -dump-raw-tokens RewriteMacrosAction - å¤„ç†å¹¶æ‰©å±•å®å®šä¹‰ï¼Œå¯¹åº”çš„ option æ˜¯ -rewrite-macros HTMLPrintAction - ç”Ÿæˆé«˜äº®çš„ä»£ç ç½‘é¡µï¼Œå¯¹åº”çš„ option æ˜¯ -emit-html DeclContextPrintAction - æ‰“å°å£°æ˜ï¼Œoption å¯¹åº”çš„æ˜¯ -print-decl-contexts ASTDeclListAction - æ‰“å° AST èŠ‚ç‚¹ï¼Œoption æ˜¯ -ast-list ASTDumpAction - æ‰“å° AST è¯¦ç»†ä¿¡æ¯ï¼Œå¯¹åº” option æ˜¯ -ast-dump ASTViewAction - ç”Ÿæˆ AST dot æ–‡ä»¶ï¼Œèƒ½å¤Ÿé€šè¿‡ Graphviz æ¥æŸ¥çœ‹å›¾å½¢è¯­æ³•æ ‘ã€‚ option æ˜¯ -ast-view AnalysisAction - è¿è¡Œé™æ€åˆ†æå¼•æ“ï¼Œoption æ˜¯ -analyze EmitLLVMAction - ç”Ÿæˆå¯è¯»çš„ IR ä¸­é—´è¯­è¨€æ–‡ä»¶ï¼Œå¯¹åº”çš„ option æ˜¯ -emit-llvm EmitBCAction - ç”Ÿæˆ IR Bitcode æ–‡ä»¶ï¼Œoption æ˜¯ -emit-llvm-bc MigrateSourceAction - ä»£ç è¿ç§»ï¼Œoption æ˜¯ -migrate BindBind ä¸»è¦æ˜¯ä¸å·¥å…·é“¾ ToolChain äº¤äº’æ ¹æ®åˆ›å»ºçš„é‚£äº› Actionï¼Œåœ¨ Action æ‰§è¡Œæ—¶ Bind æ¥æä¾›ä½¿ç”¨å“ªäº›å·¥å…·ï¼Œæ¯”å¦‚ç”Ÿæˆæ±‡ç¼–æ—¶æ˜¯ä½¿ç”¨å†…åµŒçš„è¿˜æ˜¯ GNU çš„ï¼Œè¿˜æ˜¯å…¶å®ƒçš„å‘¢ï¼Œè¿™ä¸ªå°±æ˜¯ç”± Bind æ¥å†³å®šçš„ï¼Œå…·ä½“ä½¿ç”¨çš„å·¥å…·æœ‰å„ä¸ªæ¶æ„ï¼Œå¹³å°ï¼Œç³»ç»Ÿçš„ ToolChain æ¥å†³å®šã€‚ é€šè¿‡ clang -ccc-print-bindings main.c -o main æ¥çœ‹çœ‹ Bind çš„ç»“æœ å¯ä»¥çœ‹åˆ°ç¼–è¯‘é€‰æ‹©çš„æ˜¯ clangï¼Œé“¾æ¥é€‰æ‹©çš„æ˜¯ darwin::Linkerï¼Œä½†æ˜¯åœ¨é“¾æ¥æ—¶å‰æ²¡æœ‰æ±‡ç¼–å™¨çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªå°±æ˜¯ Bind èµ·äº†ä½œç”¨ï¼Œå®ƒä¼šæ ¹æ®ä¸åŒçš„å¹³å°æ¥å†³å®šé€‰æ‹©ä»€ä¹ˆå·¥å…·ï¼Œå› ä¸ºæ˜¯åœ¨ Mac ç³»ç»Ÿé‡Œ Bind å°±ä¼šå†³å®šä½¿ç”¨ integrated-as è¿™ä¸ªå†…ç½®æ±‡ç¼–å™¨ã€‚é‚£ä¹ˆå¦‚ä½•åœ¨ä¸ç”¨å†…ç½®æ±‡ç¼–å™¨å‘¢ã€‚å¯ä»¥ä½¿ç”¨ -fno-integrated-as è¿™ä¸ª optionã€‚ TranslateTranslate å°±æ˜¯æŠŠç›¸å…³çš„å‚æ•°å¯¹åº”åˆ°ä¸åŒå¹³å°ä¸Šä¸åŒçš„å·¥å…·ã€‚ Jobsä»åˆ›å»º Jobs çš„æ–¹æ³• 12345678910/// BuildJobsForAction - Construct the jobs to perform for the action \\p A and /// return an InputInfo for the result of running \\p A. Will only construct /// jobs for a given (Action, ToolChain, BoundArch, DeviceKind) tuple once. InputInfo BuildJobsForAction(Compilation &amp;C, const Action *A, const ToolChain *TC, StringRef BoundArch, bool AtTopLevel, bool MultipleArchs, const char *LinkingOutput, std::map&lt;std::pair&lt;const Action *, std::string&gt;, InputInfo&gt; &amp;CachedResults, Action::OffloadKind TargetDeviceOffloadKind) const; å¯ä»¥çœ‹å‡º Jobs éœ€è¦å‰é¢çš„ Compilationï¼ŒActionï¼ŒToolChain ç­‰ï¼Œé‚£ä¹ˆ Jobs å°±æ˜¯å°†å‰é¢è·å–çš„ä¿¡æ¯è¿›è¡Œç»„åˆåˆ†ç»„ç»™åé¢çš„ Execute åšä¸‡å…¨å‡†å¤‡ã€‚ Executeåœ¨ driver.cpp çš„ main å‡½æ•°é‡Œçš„ ExecuteCompilation æ–¹æ³•é‡Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š 12345// Set up response file names for each command, if necessary for (auto &amp;Job : C.getJobs()) setUpResponseFiles(C, Job); C.ExecuteJobs(C.getJobs(), FailingCommands); èƒ½å¤Ÿçœ‹åˆ° Jobs å‡†å¤‡å¥½äº†åå°±è¦å¼€å§‹ Excute ä»–ä»¬ã€‚ Execute å°±æ˜¯æ‰§è¡Œæ•´ä¸ªçš„ç¼–è¯‘è¿‡ç¨‹çš„ Jobsã€‚è¿‡ç¨‹æ‰§è¡Œçš„å†…å®¹å’Œè€—æ—¶å¯ä»¥é€šè¿‡æ·»åŠ  -ftime-report è¿™ä¸ª option æ¥çœ‹åˆ°ã€‚ Clang Attributesä»¥ attribute(xx) çš„è¯­æ³•æ ¼å¼å‡ºç°ï¼Œæ˜¯ Clang æä¾›çš„ä¸€äº›èƒ½å¤Ÿè®©å¼€å‘è€…åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å‚ä¸ä¸€äº›æºç æ§åˆ¶çš„æ–¹æ³•ã€‚ä¸‹é¢åˆ—ä¸€äº›ä¼šç”¨åˆ°çš„ç”¨æ³•ï¼š attribute((format(NSString, F, A))) æ ¼å¼åŒ–å­—ç¬¦ä¸²å¯ä»¥æŸ¥çœ‹ NSLog çš„ç”¨æ³• 12345678910FOUNDATION_EXPORT void NSLog(NSString *format, â€¦) NS_FORMAT_FUNCTION(1,2) NS_NO_TAIL_CALL;// Marks APIs which format strings by taking a format string and optional varargs as arguments#if !defined(NS_FORMAT_FUNCTION) #if (__GNUC__*10+__GNUC_MINOR__ &gt;= 42) &amp;&amp; (TARGET_OS_MAC || TARGET_OS_EMBEDDED) #define NS_FORMAT_FUNCTION(F,A) __attribute__((format(__NSString__, F, A))) #else #define NS_FORMAT_FUNCTION(F,A) #endif#endif attribute((deprecated(s))) ç‰ˆæœ¬å¼ƒç”¨æç¤ºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­èƒ½å¤Ÿæç¤ºå¼€å‘è€…è¯¥æ–¹æ³•æˆ–è€…å±æ€§å·²ç»è¢«å¼ƒç”¨ 12- (void)preMethod:( NSString *)string __attribute__((deprecated(â€œpreMethodå·²ç»è¢«å¼ƒç”¨ï¼Œè¯·ä½¿ç”¨newMethodâ€)));- (void)deprecatedMethod DEPRECATED_ATTRIBUTE; //ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨DEPRECATED_ATTRIBUTEè¿™ä¸ªç³»ç»Ÿå®šä¹‰çš„å® attribute((availability(os,introduced=m,deprecated=n, obsoleted=o,message=â€œâ€ VA_ARGS))) æŒ‡æ˜ä½¿ç”¨ç‰ˆæœ¬èŒƒå›´os æŒ‡ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œm æŒ‡æ˜å¼•å…¥çš„ç‰ˆæœ¬ï¼Œn æŒ‡æ˜è¿‡æ—¶çš„ç‰ˆæœ¬ï¼Œo æŒ‡å®Œå…¨ä¸ç”¨çš„ç‰ˆæœ¬ï¼Œmessage å¯ä»¥å†™å…¥äº›æè¿°ä¿¡æ¯ã€‚ 1- (void)method __attribute__((availability(ios,introduced=3_0,deprecated=6_0,obsoleted=7_0,message=â€œiOS3åˆ°iOS7ç‰ˆæœ¬å¯ç”¨ï¼ŒiOS7ä¸èƒ½ç”¨â€))); attribute((unavailable(â€¦))) æ–¹æ³•ä¸å¯ç”¨æç¤ºè¿™ä¸ªä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å‘ŠçŸ¥æ–¹æ³•ä¸å¯ç”¨ï¼Œå¦‚æœä½¿ç”¨äº†è¿˜ä¼šè®©ç¼–è¯‘å¤±è´¥ã€‚ attribute((unused))æ²¡æœ‰è¢«ä½¿ç”¨ä¹Ÿä¸æŠ¥è­¦å‘Š attribute((warn_unused_result))ä¸ä½¿ç”¨æ–¹æ³•çš„è¿”å›å€¼å°±ä¼šè­¦å‘Šï¼Œç›®å‰ swift3 å·²ç»æ”¯æŒè¯¥ç‰¹æ€§äº†ã€‚ocä¸­ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰è¿™ä¸ªattributeæ¥æ”¯æŒã€‚ attribute((availability(swift, unavailable, message=_msg)))OC çš„æ–¹æ³•ä¸èƒ½åœ¨ Swift ä¸­ä½¿ç”¨ã€‚ attribute((cleanup(â€¦))) ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨æ‰§è¡Œä¸€ä¸ªæŒ‡å®šæ–¹æ³•ä½œç”¨åŸŸç»“æŸåŒ…æ‹¬å¤§æ‹¬å·ç»“æŸï¼Œreturnï¼Œgotoï¼Œbreakï¼Œexception ç­‰æƒ…å†µã€‚è¿™ä¸ªåŠ¨ä½œæ˜¯å…ˆäºè¿™ä¸ªå¯¹è±¡çš„ dealloc è°ƒç”¨çš„ã€‚ Reactive Cocoa ä¸­æœ‰ä¸ªæ¯”è¾ƒå¥½çš„ä½¿ç”¨èŒƒä¾‹ï¼Œ@onExit è¿™ä¸ªå®ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 1234567#define onExit \\ rac_keywordify \\ __strong rac_cleanupBlock_t metamacro_concat(rac_exitBlock_, __LINE__) __attribute__((cleanup(rac_executeCleanupBlock), unused)) = ^static inline void rac_executeCleanupBlock (__strong rac_cleanupBlock_t *block) { (*block)();} è¿™æ ·å¯ä»¥åœ¨å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŠŠéœ€è¦æˆå¯¹å‡ºç°çš„ä»£ç å†™åœ¨ä¸€èµ·äº†ã€‚åŒæ ·å¯ä»¥åœ¨ Reactive Cocoa çœ‹åˆ°å…¶ä½¿ç”¨ 123456789101112131415if (property != NULL) { rac_propertyAttributes *attributes = rac_copyPropertyAttributes(property); if (attributes != NULL) { @onExit { free(attributes); }; BOOL isObject = attributes-&gt;objectClass != nil || strstr(attributes-&gt;type, @encode(id)) == attributes-&gt;type; BOOL isProtocol = attributes-&gt;objectClass == NSClassFromString(@â€œProtocolâ€); BOOL isBlock = strcmp(attributes-&gt;type, @encode(void(^)())) == 0; BOOL isWeak = attributes-&gt;weak; shouldAddDeallocObserver = isObject &amp;&amp; isWeak &amp;&amp; !isBlock &amp;&amp; !isProtocol; } } å¯ä»¥çœ‹å‡º attributes çš„è®¾ç½®å’Œé‡Šæ”¾éƒ½åœ¨ä¸€èµ·ä½¿å¾—ä»£ç çš„å¯è¯»æ€§å¾—åˆ°äº†æé«˜ã€‚ attribute((overloadable)) æ–¹æ³•é‡è½½èƒ½å¤Ÿåœ¨ c çš„å‡½æ•°ä¸Šå®ç°æ–¹æ³•é‡è½½ã€‚å³åŒæ ·çš„å‡½æ•°åå‡½æ•°èƒ½å¤Ÿå¯¹ä¸åŒå‚æ•°åœ¨ç¼–è¯‘æ—¶èƒ½å¤Ÿè‡ªåŠ¨æ ¹æ®å‚æ•°æ¥é€‰æ‹©å®šä¹‰çš„å‡½æ•° 1234567891011__attribute__((overloadable)) void printArgument(int number){ NSLog(@â€œAdd Int %iâ€, number);}__attribute__((overloadable)) void printArgument(NSString *number){ NSLog(@â€œAdd NSString %@â€œ, number);}__attribute__((overloadable)) void printArgument(NSNumber *number){ NSLog(@â€œAdd NSNumber %@â€œ, number);} attribute((objc_designated_initializer)) æŒ‡å®šå†…éƒ¨å®ç°çš„åˆå§‹åŒ–æ–¹æ³• å¦‚æœæ˜¯ objc_designated_initializer åˆå§‹åŒ–çš„æ–¹æ³•å¿…é¡»è°ƒç”¨è¦†ç›–å®ç° super çš„ objc_designated_initializer æ–¹æ³•ã€‚ å¦‚æœä¸æ˜¯ objc_designated_initializer çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä½†æ˜¯è¯¥ç±»æœ‰ objc_designated_initializer çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œé‚£ä¹ˆå¿…é¡»è°ƒç”¨è¯¥ç±»çš„ objc_designated_initializer æ–¹æ³•æˆ–è€…é objc_designated_initializer æ–¹æ³•ï¼Œè€Œä¸èƒ½å¤Ÿè°ƒç”¨ super çš„ä»»ä½•åˆå§‹åŒ–æ–¹æ³•ã€‚ attribute((objc_subclassing_restricted)) æŒ‡å®šä¸èƒ½æœ‰å­ç±»ç›¸å½“äº Java é‡Œçš„ final å…³é”®å­—ï¼Œå¦‚æœæœ‰å­ç±»ç»§æ‰¿å°±ä¼šå‡ºé”™ã€‚ attribute((objc_requires_super)) å­ç±»ç»§æ‰¿å¿…é¡»è°ƒç”¨ superå£°æ˜åå­ç±»åœ¨ç»§æ‰¿è¿™ä¸ªæ–¹æ³•æ—¶å¿…é¡»è¦è°ƒç”¨ superï¼Œå¦åˆ™ä¼šå‡ºç°ç¼–è¯‘è­¦å‘Šï¼Œè¿™ä¸ªå¯ä»¥å®šä¹‰ä¸€äº›å¿…è¦æ‰§è¡Œçš„æ–¹æ³•åœ¨ super é‡Œæé†’ä½¿ç”¨è€…è¿™ä¸ªæ–¹æ³•çš„å†…å®¹æ—¶å¿…è¦çš„ã€‚ attribute((const)) é‡å¤è°ƒç”¨ç›¸åŒæ•°å€¼å‚æ•°ä¼˜åŒ–è¿”å›ç”¨äºæ•°å€¼ç±»å‹å‚æ•°çš„å‡½æ•°ï¼Œå¤šæ¬¡è°ƒç”¨ç›¸åŒçš„æ•°å€¼å‹å‚æ•°ï¼Œè¿”å›æ˜¯ç›¸åŒçš„ï¼Œåªåœ¨ç¬¬ä¸€æ¬¡æ˜¯éœ€è¦è¿›è¡Œè¿ç®—ï¼Œåé¢åªè¿”å›ç¬¬ä¸€æ¬¡çš„ç»“æœï¼Œè¿™æ—¶ç¼–è¯‘å™¨çš„ä¸€ç§ä¼˜åŒ–å¤„ç†æ–¹å¼ã€‚ attribute((constructor(PRIORITY))) å’Œ attribute((destructor(PRIORITY)))PRIORITY æ˜¯æŒ‡æ‰§è¡Œçš„ä¼˜å…ˆçº§ï¼Œmain å‡½æ•°æ‰§è¡Œä¹‹å‰ä¼šæ‰§è¡Œ constructorï¼Œmain å‡½æ•°æ‰§è¡Œåä¼šæ‰§è¡Œ destructorï¼Œ+load ä¼šæ¯” constructor æ‰§è¡Œçš„æ›´æ—©ç‚¹ï¼Œå› ä¸ºåŠ¨æ€é“¾æ¥å™¨åŠ è½½ Mach-O æ–‡ä»¶æ—¶ä¼šå…ˆåŠ è½½æ¯ä¸ªç±»ï¼Œéœ€è¦ +load è°ƒç”¨ï¼Œç„¶åæ‰ä¼šè°ƒç”¨æ‰€æœ‰çš„ constructor æ–¹æ³•ã€‚ é€šè¿‡è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥åšäº›æ¯”è¾ƒå¥½ç©çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯´ç±»å·²ç» load å®Œäº†ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥åœ¨ constructor ä¸­å¯¹æƒ³æ›¿æ¢çš„ç±»è¿›è¡Œæ›¿æ¢ï¼Œè€Œä¸ç”¨åŠ åœ¨ç‰¹å®šç±»çš„ +load æ–¹æ³•é‡Œã€‚ Clang è­¦å‘Šå¤„ç†å…ˆçœ‹çœ‹è¿™ä¸ª 1234#pragma clang diagnostic push#pragma clang diagnostic ignored â€œ-Wdeprecated-declarationsâ€ sizeLabel = [self sizeWithFont:font constrainedToSize:size lineBreakMode:NSLineBreakByWordWrapping];#pragma clang diagnostic pop å¦‚æœæ²¡æœ‰#pragma clang è¿™äº›å®šä¹‰ï¼Œä¼šæŠ¥å‡º sizeWithFont çš„æ–¹æ³•ä¼šè¢«åºŸå¼ƒçš„è­¦å‘Šï¼Œè¿™ä¸ªåŠ ä¸Šè¿™ä¸ªæ–¹æ³•å½“ç„¶æ˜¯ä¸ºäº†å…¼å®¹è€ç³»ç»Ÿï¼ŒåŠ ä¸Š ignored â€œ-Wdeprecated-declarationsâ€ çš„ä½œç”¨æ˜¯å¿½ç•¥è¿™ä¸ªè­¦å‘Šã€‚é€šè¿‡ clang diagnostic push/pop å¯ä»¥çµæ´»çš„æ§åˆ¶ä»£ç å—çš„ç¼–è¯‘é€‰é¡¹ã€‚ ä½¿ç”¨ libclang æ¥è¿›è¡Œè¯­æ³•åˆ†æä½¿ç”¨ libclang é‡Œé¢æä¾›çš„æ–¹æ³•å¯¹æºæ–‡ä»¶è¿›è¡Œè¯­æ³•åˆ†æï¼Œåˆ†æè¯­æ³•æ ‘ï¼Œéå†è¯­æ³•æ ‘ä¸Šæ¯ä¸ªèŠ‚ç‚¹ã€‚ ä½¿ç”¨è¿™ä¸ªåº“å¯ä»¥ç›´æ¥ä½¿ç”¨ C çš„ APIï¼Œå®˜æ–¹ä¹Ÿæä¾›äº† python bindingã€‚è¿˜æœ‰å¼€æºçš„ node-js / ruby bindingï¼Œè¿˜æœ‰ Objective-Cçš„å¼€æºåº“ GitHub - macmade/ClangKit: ClangKit provides an Objective-C frontend to LibClang. Source tokenization, diagnostics and fix-its are actually implemented. ã€‚ å†™ä¸ª python è„šæœ¬æ¥è°ƒç”¨ clang 12345678910111213141516171819202122232425262728pip install clang#!/usr/bin/python# vim: set fileencoding=utf-8import clang.cindeximport asciitreeimport sysdef node_children(node): return (c for c in node.get_children() if c.location.file == sys.argv[1])def print_node(node): text = node.spelling or node.displayname kind = str(node.kind)[str(node.kind).index(â€˜.â€™)+1:] return â€˜{} {}â€™.format(kind, text)if len(sys.argv) != 2: print(â€œUsage: dump_ast.py [header file name]â€) sys.exit()clang.cindex.Config.set_library_file(â€˜/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/libclang.dylibâ€™)index = clang.cindex.Index.create()translation_unit = index.parse(sys.argv[1], [â€˜-xâ€™, â€˜objective-câ€™])print asciitree.draw_tree(translation_unit.cursor, lambda n: list(n.get_children()), lambda n: â€œ%s (%s)â€ % (n.spelling or n.displayname, str(n.kind).split(â€œ.â€)[1])) åŸºäºè¯­æ³•æ ‘çš„åˆ†æè¿˜å¯ä»¥é’ˆå¯¹å­—ç¬¦ä¸²åšåŠ å¯†ã€‚ LibTooling å¯¹è¯­æ³•æ ‘å®Œå…¨çš„æ§åˆ¶å› ä¸º LibTooling èƒ½å¤Ÿå®Œå…¨æ§åˆ¶è¯­æ³•æ ‘ï¼Œé‚£ä¹ˆå¯ä»¥åšçš„äº‹æƒ…å°±éå¸¸å¤šäº†ã€‚ å¯ä»¥æ”¹å˜ clang ç”Ÿæˆä»£ç çš„æ–¹å¼ã€‚ å¢åŠ æ›´å¼ºçš„ç±»å‹æ£€æŸ¥ã€‚ æŒ‰ç…§è‡ªå·±çš„å®šä¹‰è¿›è¡Œä»£ç çš„æ£€æŸ¥åˆ†æã€‚ å¯¹æºç åšä»»æ„ç±»å‹åˆ†æï¼Œç”šè‡³é‡å†™ç¨‹åºã€‚ ç»™ clang æ·»åŠ ä¸€äº›è‡ªå®šä¹‰çš„åˆ†æï¼Œåˆ›å»ºè‡ªå·±çš„é‡æ„å™¨ã€‚ åŸºäºç°æœ‰ä»£ç åšå‡ºå¤§é‡çš„ä¿®æ”¹ã€‚ åŸºäºå·¥ç¨‹ç”Ÿæˆç›¸å…³å›¾å½¢æˆ–æ–‡æ¡£ã€‚ æ£€æŸ¥å‘½åæ˜¯å¦è§„èŒƒï¼Œè¿˜èƒ½å¤Ÿè¿›è¡Œè¯­è¨€çš„è½¬æ¢ï¼Œæ¯”å¦‚æŠŠ OC è¯­è¨€è½¬æˆJSæˆ–è€… Swift ã€‚ å®˜æ–¹æœ‰ä¸ªæ–‡æ¡£å¼€å‘è€…å¯ä»¥æŒ‰ç…§è¿™ä¸ªé‡Œé¢çš„è¯´æ˜å»æ„é€  LLVMï¼Œclang å’Œå…¶å·¥å…·ï¼š Tutorial for building tools using LibTooling and LibASTMatchers â€” Clang 4.0 documentation æŒ‰ç…§è¯´æ˜ç¼–è¯‘å®Œæˆåè¿›å…¥ LLVM çš„ç›®å½• ~/llvm/tools/clang/tools/ åœ¨è¿™äº†å¯ä»¥åˆ›å»ºè‡ªå·±çš„ clang å·¥å…·ã€‚è¿™é‡Œæœ‰ä¸ªèŒƒä¾‹ï¼š GitHub - objcio/issue-6-compiler-tool: Example code for a standalone clang/llvm tool. å¯ä»¥ç›´æ¥ make æˆä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä¸‹é¢æ˜¯æ£€æŸ¥ target å¯¹è±¡ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„ action æ–¹æ³•å­˜åœ¨æ£€æŸ¥çš„ä¸€ä¸ªä¾‹å­ 123@interface Observer+ (instancetype)observerWithTarget:(id)target action:(SEL)selector;@end 123456789101112131415161718192021222324//æŸ¥æ‰¾æ¶ˆæ¯è¡¨è¾¾å¼ï¼Œobserver ä½œä¸ºæ¥å—è€…ï¼ŒobserverWithTarget:action: ä½œä¸º selectorï¼Œæ£€æŸ¥ target ä¸­æ˜¯å¦å­˜åœ¨ç›¸åº”çš„æ–¹æ³•ã€‚virtual bool VisitObjCMessageExpr(ObjCMessageExpr *E) { if (E-&gt;getReceiverKind() == ObjCMessageExpr::Class) { QualType ReceiverType = E-&gt;getClassReceiver(); Selector Sel = E-&gt;getSelector(); string TypeName = ReceiverType.getAsString(); string SelName = Sel.getAsString(); if (TypeName == â€œObserverâ€ &amp;&amp; SelName == â€œobserverWithTarget:action:â€) { Expr *Receiver = E-&gt;getArg(0)-&gt;IgnoreParenCasts(); ObjCSelectorExpr* SelExpr = cast&lt;ObjCSelectorExpr&gt;(E-&gt;getArg(1)-&gt;IgnoreParenCasts()); Selector Sel = SelExpr-&gt;getSelector(); if (const ObjCObjectPointerType *OT = Receiver-&gt;getType()-&gt;getAs&lt;ObjCObjectPointerType&gt;()) { ObjCInterfaceDecl *decl = OT-&gt;getInterfaceDecl(); if (! decl-&gt;lookupInstanceMethod(Sel)) { errs() &lt;&lt; â€œWarning: class â€œ &lt;&lt; TypeName &lt;&lt; â€œ does not implement selector â€œ &lt;&lt; Sel.getAsString() &lt;&lt; â€œ\\nâ€; SourceLocation Loc = E-&gt;getExprLoc(); PresumedLoc PLoc = astContext-&gt;getSourceManager().getPresumedLoc(Loc); errs() &lt;&lt; â€œin â€œ &lt;&lt; PLoc.getFilename() &lt;&lt; â€œ &lt;â€œ &lt;&lt; PLoc.getLine() &lt;&lt; â€œ:â€ &lt;&lt; PLoc.getColumn() &lt;&lt; â€œ&gt;\\nâ€; } } } } return true;} Clang Pluginé€šè¿‡è‡ªå·±å†™ä¸ªæ’ä»¶ï¼Œæ¯”å¦‚ä¸Šé¢å†™çš„ LibTooling çš„ clang å·¥å…·ï¼Œå¯ä»¥å°†è¿™ä¸ªæ’ä»¶åŠ¨æ€çš„åŠ è½½åˆ°ç¼–è¯‘å™¨ä¸­ï¼Œå¯¹ç¼–è¯‘è¿›è¡Œæ§åˆ¶ï¼Œå¯ä»¥åœ¨ LLVM çš„è¿™ä¸ªç›®å½•ä¸‹æŸ¥çœ‹ä¸€äº›èŒƒä¾‹ llvm/tools/clang/tools åŠ¨æ€åŒ–æ–¹æ¡ˆ DynamicCocoa ä¸­å°±æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªå°† OC æºç è½¬ JS çš„æ’ä»¶æ¥è¿›è¡Œä»£ç çš„è½¬æ¢ï¼Œè¿™é‡Œæ•´ç†äº†äº›åˆ©ç”¨ clang è½¬ js çš„åº“ clangtojsèµ„æº - Lmsgsendnilself ï¼ŒJSPatch æ˜¯ç›´æ¥æ‰‹å†™ JS è€Œæ²¡æœ‰è½¬æ¢çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰å¤šå‡ºè¿™ä¸€æ­¥ï¼Œè€Œé¹…å‚çš„OCSæ›´çŒ›ï¼Œç›´æ¥åœ¨ç«¯å†…å†™äº†ä¸ªç¼–è¯‘å™¨ã€‚åœ¨ C å‡½æ•°çš„è°ƒç”¨ä¸Šå­™æºæœ‰ä¸ª slides å¯ä»¥çœ‹çœ‹ï¼š Calling Conventions in Cocoa by sunnyxx bang ä¹Ÿæœ‰ç¯‡æ–‡ç« ï¼š å¦‚ä½•åŠ¨æ€è°ƒç”¨ C å‡½æ•° Â« bangâ€™s blog ã€‚ è¿™ä¸‰ä¸ªæ–¹æ¡ˆä½œè€…éƒ½åˆ†åˆ«å†™äº†æ–‡ç« è¯¦ç»†è¯´æ˜å…¶å®ç°æ–¹æ¡ˆã€‚ JSPatchå®ç°åŸç†è¯¦è§£ Â« bangâ€™s blog DynamicCocoaï¼šæ»´æ»´ iOS åŠ¨æ€åŒ–æ–¹æ¡ˆçš„è¯ç”Ÿä¸èµ·èˆª OCSâ€”â€”å²ä¸Šæœ€ç–¯ç‹‚çš„iOSåŠ¨æ€åŒ–æ–¹æ¡ˆ - ç®€ä¹¦ æ»´æ»´çš„ç‹åº·åœ¨åšç˜¦èº«æ—¶ä¹Ÿå®ç°äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ clang æ’ä»¶ï¼Œå…·ä½“è‡ªå®šä¹‰æ’ä»¶çš„å®ç°å¯ä»¥æŸ¥çœ‹ä»–çš„è¿™æ–‡ç«  ã€ŠåŸºäºclangæ’ä»¶çš„ä¸€ç§iOSåŒ…å¤§å°ç˜¦èº«æ–¹æ¡ˆã€‹ é‚£ä¹ˆæˆ‘ä»¬è¦è‡ªå·±åŠ¨æ‰‹åšåº”è¯¥æ€ä¹ˆå…¥é—¨å‘¢ï¼Œé™¤äº†æœ¬èº«å¸¦çš„èŒƒä¾‹å¤–è¿˜æœ‰äº›æ•™ç¨‹å¯ä»¥çœ‹çœ‹ã€‚ å®˜æ–¹ clang çš„æ’ä»¶ï¼š External Clang Examples æ”¶é›†ä¸€äº›å¦‚ä½•ä½¿ç”¨ clang åº“çš„ä¾‹å­ï¼šGitHub - loarabia/Clang-tutorial: A collection of code samples showing usage of clang and llvm as a library åœ¨ Xcode ä¸­æ·»åŠ  clang é™æ€åˆ†æè‡ªå®šä¹‰ checksï¼š Running the analyzer within Xcode å°† LLVM C çš„ API ç”¨ swift æ¥åŒ…è£…ï¼š GitHub - harlanhaskins/LLVMSwift: A Swifty wrapper for the LLVM C API version 3.9.1 LLVM Backendé¦–å…ˆé€šè¿‡ä¸‹å›¾çœ‹çœ‹ LLVM Backend åœ¨æ•´ä¸ª LLVM é‡Œæ‰€å¤„çš„ä½ç½®ï¼š æ¥ä¸‹æ¥æ˜¯æ•´ä¸ª LLVM Backend çš„æµç¨‹å›¾ï¼Œåé¢ä¼šå¯¹æ¯ä¸ªè¿‡ç¨‹è¯¦ç»†è¯´æ˜ CodeGen é˜¶æ®µ Instruction Selection æŒ‡ä»¤é€‰æ‹©ï¼šå°†IRè½¬åŒ–æˆç›®æ ‡å¹³å°æŒ‡ä»¤ç»„æˆçš„å®šå‘éå¾ªç¯å›¾ DAGï¼ˆDirected Acyclic Graphï¼‰ Scheduling and Formation è°ƒåº¦ä¸æ’åºï¼šè¯»å– DAGï¼Œå°† DAG çš„æŒ‡ä»¤æ’æˆ MachineInstr çš„é˜Ÿåˆ— SSA ä¼˜åŒ–ï¼šå¤šä¸ªåŸºäº SSAï¼ˆStatic Single Assignmentï¼‰ çš„ Pass ç»„æˆã€‚æ¯”å¦‚ modulo-scheduling å’Œ peephole optimization éƒ½æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µå®Œæˆçš„ Register allocation å¯„å­˜å™¨åˆ†é…ï¼šå°† Virtual Register æ˜ å°„åˆ° Physical Register æˆ–å†…å­˜ä¸ŠProlog / Epilog ç”Ÿæˆ ç¡®å®šæ‰€éœ€å †æ ˆå¤§å°ï¼šMachine Code æ™šæœŸä¼˜åŒ–ï¼šæœ€åä¸€æ¬¡ä¼˜åŒ–æœºä¼š Code Emissionï¼šè¾“å‡ºä»£ç ï¼Œå¯ä»¥é€‰æ‹©æ±‡ç¼–æˆ–è€…äºŒè¿›åˆ¶æœºå™¨ç ã€‚ SelectionDAG æ„å»ºæœ€åˆçš„ DAGï¼šæŠŠ IR é‡Œçš„ add æŒ‡ä»¤è½¬æˆ SelectionDAG çš„ add èŠ‚ç‚¹ ä¼˜åŒ–æ„å»ºå¥½çš„ DAGï¼šæŠŠä¸€äº›å¹³å°æ”¯æŒçš„ meta instructions æ¯”å¦‚ Rotatesï¼Œdiv / rem æŒ‡ä»¤è¯†åˆ«å‡º Legalization SelectionDAG ç±»å‹ï¼šæ¯”å¦‚æŸäº›å¹³å°åªæœ‰64ä½æµ®ç‚¹å’Œ32ä½æ•´æ•°è¿ç®—æŒ‡ä»¤ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠæ‰€æœ‰ f32 éƒ½æå‡åˆ° f64ï¼Œi1/i8/i16 éƒ½æå‡åˆ° i32ï¼ŒåŒæ—¶è¿˜è¦æŠŠ i64 æ‹†åˆ†æˆä¸¤ä¸ª i32 æ¥å­˜å‚¨ï¼Œæ“ä½œç¬¦çš„åˆæ³•åŒ–ï¼Œæ¯”å¦‚ SDIV åœ¨ x86 ä¸Šå›è½¬æˆ SDIVREMã€‚è¿™ä¸ªè¿‡ç¨‹ç»“æœå¯ä»¥é€šè¿‡ llc -view-dag-combine2-dags sum.ll çœ‹åˆ° æŒ‡ä»¤é€‰æ‹© instruction selectorï¼ˆISelï¼‰ï¼šå°†å¹³å°æ— å…³çš„ DAG é€šè¿‡ TableGen è¯»å…¥ .tb æ–‡ä»¶å¹¶ä¸”ç”Ÿæˆå¯¹åº”çš„æ¨¡å¼åŒ¹é…ä»£ç ä»è€Œè½¬æˆå¹³å°ç›¸å…³çš„ DAG SelectionDAG Scheduling and Formationï¼šå› ä¸º CPU æ˜¯æ²¡æ³•æ‰§è¡Œ DAGï¼Œæ‰€ä»¥éœ€è¦å°†æŒ‡ä»¤ä» DAG ä¸­æå–ä¾æ®ä¸€å®šè§„åˆ™æ¯”å¦‚ minimal register pressure æˆ–éšè—æŒ‡ä»¤å»¶è¿Ÿé‡æ’æˆæŒ‡ä»¤é˜Ÿåˆ—ã€‚ï¼ˆDAG -&gt; linear listï¼ˆSSA formï¼‰ -&gt; MachineInstr -&gt; MC Layer API MCInst MCStreamr -&gt; MCCodeEmitter -&gt; Binary Instrï¼‰ ä¸‹å›¾æ˜¯ llc -view-isel-dags çŠ¶æ€ä¸‹çš„ DAG å›¾ï¼š æŸ¥çœ‹ DAG ä¸åŒçŠ¶æ€çš„è¯´æ˜å¦‚ä¸‹ï¼š -view-dag-combine1-dagsï¼šå¯ä»¥æ˜¾ç¤ºæ²¡æœ‰è¢«ä¼˜åŒ–çš„ DAG -view-legalize-dagsï¼šåˆæ³•åŒ–ä¹‹å‰çš„ DAG -view-dag-cmobine2-dagsï¼šç¬¬äºŒæ¬¡ä¼˜åŒ–å‰ -view-isel-dagsï¼šæ˜¾ç¤ºæŒ‡ä»¤é€‰æ‹©å‰çš„ DAG -view-sched-dagsï¼šåœ¨ Scheduler ä¹‹å‰ ISel ä¹‹å -view-sunit-dagsï¼šå¯ä»¥æ˜¾ç¤º Scheduler çš„ä¾èµ–å›¾ Register Allocation å¯„å­˜å™¨åˆ†é…å¯„å­˜å™¨åœ¨ LLVM ä¸­çš„è¡¨è¾¾ç‰©ç†å¯„å­˜å™¨åœ¨ LLVM é‡Œå‡æœ‰ 1 - 1023 èŒƒå›´å†…çš„ç¼–å·ã€‚åœ¨ GenRegisterNames.inc é‡Œæ‰¾åˆ°ï¼Œæ¯”å¦‚ lib/Target/X86/X86GenRegisterInfo.inc è™šæ‹Ÿå¯„å­˜å™¨åˆ°ç‰©ç†å¯„å­˜å™¨çš„æ˜ å°„ç›´æ¥æ˜ å°„ä½¿ç”¨ TargetRegisterInfo å’Œ MachineOperand ä¸­çš„ APIã€‚é—´æ¥æ˜ å°„çš„APIç”¨ VirtRegMap ä»¥æ­£ç¡®æ’å…¥è¯»å†™æŒ‡ä»¤å®ç°å†…å­˜è°ƒåº¦ LLVM è‡ªå¸¦çš„å¯„å­˜å™¨åˆ†é…ç®—æ³•llc -regalloc=Greedy add.bc -o ln.s Fast - debug é»˜è®¤ï¼Œå°½å¯èƒ½ä¿å­˜å¯„å­˜å™¨ã€‚ Basic - å¢é‡åˆ†é… Greedy - LLVM é»˜è®¤å¯„å­˜å™¨åˆ†é…ç®—æ³•ï¼Œå¯¹ Basic ç®—æ³•å˜é‡ç”Ÿå­˜æœŸè¿›è¡Œåˆ†è£‚è¿›è¡Œé«˜åº¦ä¼˜åŒ– PBQP - å°†å¯„å­˜å™¨åˆ†é…æè¿°æˆåˆ†åŒºå¸ƒå°”äºŒæ¬¡è§„åˆ’ Code Emissionä¸‹å›¾è¯¦ç»†è¡¨è¾¾äº†æ•´ä¸ª Code Emission çš„è¿‡ç¨‹ Swift ç¼–è¯‘æµSwift ç¼–è¯‘æµå’Œ Clang ä¸€æ ·éƒ½æ˜¯ç¼–è¯‘å‰ç«¯ï¼Œå’Œ Clang ä¸€æ ·ä»£ç ä¼šè¢«è§£ææˆè¯­æ³•æ•° ASTï¼Œæ¥ä¸‹æ¥ä¼šæ¯” Clang å¤šä¸€æ­¥ï¼Œé€šè¿‡ SILGen ç”Ÿæˆ SIL è¿™ä¸€æ¬¡æ–¹ä¾¿åšäº› Swift ç‰¹å®šçš„ä¼˜åŒ–ï¼ŒSIL ä¼šè¢«ä¼ é€’ç»™ IR ç”Ÿæˆé˜¶æ®µç”Ÿæˆ LLVM IRï¼Œæœ€åç”± LLVM è§£å†³ä½™ä¸‹äº‹æƒ…ã€‚çœ‹åˆ°è¿™é‡Œå¤§å®¶è‚¯å®šä¼šå¥½å¥‡ swift æ˜¯å¦‚ä½•ä¸ C å’Œ OC äº¤äº’çš„æ¯”å¦‚ç³»ç»Ÿåº•å±‚çš„æ¨¡å—ï¼Œè¿™é‡Œå°±è¦ææ swift çš„æ¨¡å—æ˜ å°„äº†ï¼ˆModule mapï¼‰ï¼Œå®ƒè°ƒç”¨ Clang çš„æ¨¡å—ï¼Œå°†å…¶ä¼ å…¥ Clang importer ä¸­ç”Ÿæˆ AST æ¥åˆ†ææ˜¯çš„ swift èƒ½å¤Ÿå’Œ C/OC è¿›è¡Œäº¤äº’ã€‚ ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­çœ‹è¯¦ç»†äº†è§£ä¸‹ Swift ç¼–è¯‘æµå§ã€‚å…ˆåˆ›å»ºä¸€ä¸ª toy.swift 1print(â€œhi!â€) ç”Ÿæˆç¨‹åº 12swiftc toy.swift./toy ç”Ÿæˆæ£€æŸ¥ AST 1swiftc -dump-ast toy.swift å¯ä»¥è¿˜åŸä¹‹å‰å‡½æ•°å 1swiftc -emit-silgen toy.swift | xcrun swift-demangle llvm ir å’Œæ±‡ç¼–çš„ç”Ÿæˆ 12swiftc -emit-ir toy.swiftswiftc -emit-assembly toy.swift ç”Ÿæˆå¯æ‰§è¡Œçš„è„šæœ¬ 1xcrun -sdk macosx swiftc toy.swift -o toy ç¼–è¯‘åç”Ÿæˆçš„äºŒè¿›åˆ¶å†…å®¹ Link Map Fileåœ¨ Build Settings é‡Œè®¾ç½® Write Link Map File ä¸º Yes åæ¯æ¬¡ç¼–è¯‘éƒ½ä¼šåœ¨æŒ‡å®šç›®å½•ç”Ÿæˆè¿™æ ·ä¸€ä¸ªæ–‡ä»¶ã€‚æ–‡ä»¶å†…å®¹åŒ…å« Object filesï¼ŒSectionsï¼ŒSymbolsã€‚ä¸‹é¢åˆ†åˆ«è¯´è¯´è¿™äº›å†…å®¹ Object filesè¿™ä¸ªéƒ¨åˆ†çš„å†…å®¹éƒ½æ˜¯ .m æ–‡ä»¶ç¼–è¯‘åçš„ .o å’Œéœ€è¦ link çš„ .a æ–‡ä»¶ã€‚å‰é¢æ˜¯æ–‡ä»¶ç¼–å·ï¼Œåé¢æ˜¯æ–‡ä»¶è·¯å¾„ã€‚ Sectionsè¿™é‡Œæè¿°çš„æ˜¯æ¯ä¸ª Section åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ä½ç½®å’Œå¤§å°ã€‚æ¯ä¸ª Section çš„ Segment çš„ç±»å‹åˆ†ä¸º __TEXT ä»£ç æ®µå’Œ __DATA æ•°æ®æ®µä¸¤ç§ã€‚ SymbolsSymbols æ˜¯å¯¹ Sections è¿›è¡Œäº†å†åˆ’åˆ†ã€‚è¿™é‡Œä¼šæè¿°æ‰€æœ‰çš„ methodsï¼Œivar å’Œå­—ç¬¦ä¸²ï¼ŒåŠå®ƒä»¬å¯¹åº”çš„åœ°å€ï¼Œå¤§å°ï¼Œæ–‡ä»¶ç¼–å·ä¿¡æ¯ã€‚ æ¯æ¬¡ç¼–è¯‘åç”Ÿæˆçš„ dSYM æ–‡ä»¶åœ¨æ¯æ¬¡ç¼–è¯‘åéƒ½ä¼šç”Ÿæˆä¸€ä¸ª dSYM æ–‡ä»¶ï¼Œç¨‹åºåœ¨æ‰§è¡Œä¸­é€šè¿‡åœ°å€æ¥è°ƒç”¨æ–¹æ³•å‡½æ•°ï¼Œè€Œ dSYM æ–‡ä»¶é‡Œå­˜å‚¨äº†å‡½æ•°åœ°å€æ˜ å°„ï¼Œè¿™æ ·è°ƒç”¨æ ˆé‡Œçš„åœ°å€å¯ä»¥é€šè¿‡ dSYM è¿™ä¸ªæ˜ å°„è¡¨èƒ½å¤Ÿè·å¾—å…·ä½“å‡½æ•°çš„ä½ç½®ã€‚ä¸€èˆ¬éƒ½ä¼šç”¨æ¥å¤„ç† crash æ—¶è·å–åˆ°çš„è°ƒç”¨æ ˆ .crash æ–‡ä»¶å°†å…¶ç¬¦å·åŒ–ã€‚ å¯ä»¥é€šè¿‡ Xcode è¿›è¡Œç¬¦å·åŒ–ï¼Œå°† .crash æ–‡ä»¶ï¼Œ.dSYM å’Œ .app æ–‡ä»¶æ”¾åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰“å¼€ Xcode çš„ Window èœå•ä¸‹çš„ organizerï¼Œå†ç‚¹å‡» Device tabï¼Œæœ€åé€‰ä¸­å·¦è¾¹çš„ Device Logsã€‚é€‰æ‹© import å°† .crash æ–‡ä»¶å¯¼å…¥å°±å¯ä»¥çœ‹åˆ° crash çš„è¯¦ç»† log äº†ã€‚ è¿˜å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå·¥å…· symbolicatecrash æ¥æ‰‹åŠ¨ç¬¦å·åŒ– crash logã€‚åŒæ ·å…ˆå°† .crash æ–‡ä»¶ï¼Œ.dSYM å’Œ .app æ–‡ä»¶æ”¾åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ 12export DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developersymbolicatecrash appName.crash appName.app &gt; appName.log Mach-O æ–‡ä»¶è®°å½•ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯¹è±¡ä»£ç ï¼Œå…±äº«åº“ï¼ŒåŠ¨æ€åŠ è½½ä»£ç å’Œå†…å­˜è½¬å‚¨çš„æ–‡ä»¶æ ¼å¼ã€‚ä¸åŒäº xml è¿™æ ·çš„æ–‡ä»¶ï¼Œå®ƒåªæ˜¯äºŒè¿›åˆ¶å­—èŠ‚æµï¼Œé‡Œé¢æœ‰ä¸åŒçš„åŒ…å«å…ƒä¿¡æ¯çš„æ•°æ®å—ï¼Œæ¯”å¦‚å­—èŠ‚é¡ºåºï¼Œcpu ç±»å‹ï¼Œå—å¤§å°ç­‰ã€‚æ–‡ä»¶å†…å®¹æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼Œå› ä¸ºåœ¨ .app ç›®å½•ä¸­æœ‰ä¸ª _CodeSignature çš„ç›®å½•ï¼Œé‡Œé¢åŒ…å«äº†ç¨‹åºä»£ç çš„ç­¾åï¼Œè¿™ä¸ªç­¾åçš„ä½œç”¨å°±æ˜¯ä¿è¯ç­¾åå .app é‡Œçš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬èµ„æºæ–‡ä»¶ï¼ŒMach-O æ–‡ä»¶éƒ½ä¸èƒ½å¤Ÿæ›´æ”¹ã€‚ Mach-O æ–‡ä»¶åŒ…å«ä¸‰ä¸ªåŒºåŸŸ Mach-O Headerï¼šåŒ…å«å­—èŠ‚é¡ºåºï¼Œmagicï¼Œcpu ç±»å‹ï¼ŒåŠ è½½æŒ‡ä»¤çš„æ•°é‡ç­‰ Load Commandsï¼šåŒ…å«å¾ˆå¤šå†…å®¹çš„è¡¨ï¼ŒåŒ…æ‹¬åŒºåŸŸçš„ä½ç½®ï¼Œç¬¦å·è¡¨ï¼ŒåŠ¨æ€ç¬¦å·è¡¨ç­‰ã€‚æ¯ä¸ªåŠ è½½æŒ‡ä»¤åŒ…å«ä¸€ä¸ªå…ƒä¿¡æ¯ï¼Œæ¯”å¦‚æŒ‡ä»¤ç±»å‹ï¼Œåç§°ï¼Œåœ¨äºŒè¿›åˆ¶ä¸­çš„ä½ç½®ç­‰ã€‚ Dataï¼šæœ€å¤§çš„éƒ¨åˆ†ï¼ŒåŒ…å«äº†ä»£ç ï¼Œæ•°æ®ï¼Œæ¯”å¦‚ç¬¦å·è¡¨ï¼ŒåŠ¨æ€ç¬¦å·è¡¨ç­‰ã€‚ Mach-O æ–‡ä»¶çš„è§£æå†é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥åˆ†æä¸‹ï¼šè¿™æ¬¡ç”¨ xcrun æ¥ 1xcrun clang -v å…ˆåˆ›å»ºä¸€ä¸ªtest.cçš„æ–‡ä»¶ 1touch test.c ç¼–è¾‘é‡Œé¢çš„å†…å®¹ 12345678vi test.c#include &lt;stdio.h&gt;int main(int argc, char *argv[]){ printf(&quot;hi there!\\n&quot;); return 0;} ç¼–è¯‘è¿è¡Œï¼Œæ²¡æœ‰èµ·åé»˜è®¤ä¸º a.out 12xcrun clang test.c./a.out a.out å°±æ˜¯ç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸‹é¢çœ‹çœ‹è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æ—¶å¦‚ä½•ç”Ÿæˆçš„æŠŠã€‚å…ˆçœ‹çœ‹è¾“å‡ºçš„æ±‡ç¼–ä»£ç  1xcrun clang -S -o - test.c | open -f è¾“å‡ºçš„ç»“æœé‡Œ . å¼€å¤´çš„è¡Œæ˜¯æ±‡ç¼–æŒ‡ä»¤ä¸æ˜¯æ±‡ç¼–ä»£ç ï¼Œå…¶å®ƒçš„éƒ½æ˜¯æ±‡ç¼–ä»£ç ã€‚å…ˆçœ‹çœ‹å‰å‡ è¡Œ 1234.section __TEXT,__text,regular,pure_instructions.macosx_version_min 10, 12.globl _main.align 4, 0x90 .section æŒ‡ä»¤æŒ‡å®šæ¥ä¸‹æ¥æ‰§è¡Œå“ªä¸€ä¸ªæ®µã€‚ .globl æŒ‡ä»¤è¯´æ˜ _main æ˜¯ä¸€ä¸ªå¤–éƒ¨ç¬¦å·ï¼Œå› ä¸º main() å‡½æ•°å¯¹äºç³»ç»Ÿæ¥è¯´æ˜¯éœ€è¦è°ƒç”¨å®ƒæ¥è¿è¡Œæ‰§è¡Œæ–‡ä»¶çš„ã€‚ .align æŒ‡å‡ºåé¢ä»£ç çš„å¯¹é½æ–¹å¼ï¼Œ16(2^4) å­—èŠ‚å¯¹é½ï¼Œ 0x90 è¡¥é½ã€‚ çœ‹çœ‹æ¥ä¸‹æ¥çš„ main å‡½æ•°å¤´éƒ¨éƒ¨åˆ† 123456789101112_main: ## @main .cfi_startproc## BB#0: pushq %rbpLtmp0: .cfi_def_cfa_offset 16Ltmp1: .cfi_offset %rbp, -16 movq %rsp, %rbpLtmp2: .cfi_def_cfa_register %rbp subq $32, %rsp _main æ˜¯å‡½æ•°å¼€å§‹çš„åœ°å€ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ä¼šæœ‰è¿™ä¸ªä½ç½®çš„å¼•ç”¨ã€‚ .cfi_startproc è¿™ä¸ªæŒ‡ä»¤ç”¨äºå‡½æ•°çš„å¼€å§‹ï¼ŒCFI æ˜¯ Call Frame Infomation çš„ç¼©å†™æ˜¯è°ƒç”¨å¸§ä¿¡æ¯çš„æ„æ€ï¼Œåœ¨ç”¨ debugger æ—¶å®é™…ä¸Šå°±æ˜¯ stepping in / out çš„ä¸€ä¸ªè°ƒç”¨å¸§ã€‚å½“å‡ºç° .cfi_endproc æ—¶è¡¨ç¤ºåŒ¹å¯¹ç»“æŸæ ‡è®°å‡º main() å‡½æ•°ç»“æŸã€‚ pushq %rbp æ˜¯æ±‡ç¼–ä»£ç ï¼Œ## BB#0: è¿™ä¸ª label é‡Œçš„ã€‚ABI ä¼šè®© rbp è¿™ä¸ªå¯„å­˜å™¨çš„è¢«ä¿æŠ¤èµ·æ¥ï¼Œå½“å‡½æ•°è°ƒç”¨è¿”å›æ—¶è®© rbp å¯„å­˜å™¨çš„å€¼è·Ÿä»¥å‰ä¸€æ ·ã€‚ ABI æ˜¯ application binary interface çš„ç¼©å†™è¡¨ç¤ºåº”ç”¨äºŒè¿›åˆ¶æ¥å£ï¼Œå®ƒæŒ‡å®šäº†å‡½æ•°è°ƒç”¨æ˜¯å¦‚ä½•åœ¨æ±‡ç¼–ä»£ç å±‚é¢ä¸Šå·¥ä½œçš„ã€‚pushq %rbp å°† rbp çš„å€¼ push åˆ°æ ˆä¸­ã€‚ .cfi_def_cfa_offset 16 å’Œ .cfi_offset %rbp, -16 ä¼šè¾“å‡ºä¸€äº›å †æ ˆå’Œè°ƒè¯•ä¿¡æ¯ï¼Œç¡®ä¿è°ƒè¯•å™¨è¦ä½¿ç”¨è¿™äº›ä¿¡æ¯æ—¶èƒ½å¤Ÿæ‰¾åˆ°ã€‚ movq %rsp, %rbp æŠŠå±€éƒ¨å˜é‡æ”¾åˆ°æ ˆä¸Šã€‚ subq $32, %rsp ä¼šå°†æ ˆæŒ‡é’ˆç§»åŠ¨ 32 ä¸ªå­—èŠ‚ï¼Œå°±æ˜¯å‡½æ•°è°ƒç”¨çš„ä½ç½®ã€‚æ—§çš„æ ˆæŒ‡é’ˆå­˜åœ¨ rbp é‡Œä½œä¸ºå±€éƒ¨å˜é‡çš„åŸºå€ï¼Œå†æ›´æ–°å †æ ˆæŒ‡é’ˆåˆ°ä¼šä½¿ç”¨çš„ä½ç½®ã€‚ å†çœ‹çœ‹ printf() 1234567leaq L_.str(%rip), %raxmovl $0, -4(%rbp)movl %edi, -8(%rbp)movq %rsi, -16(%rbp)movq %rax, %rdimovb $0, %alcallq _printf leap ä¼šå°† L_.str è¿™ä¸ªæŒ‡é’ˆåŠ è½½åˆ° rax å¯„å­˜å™¨é‡Œã€‚å¯ä»¥çœ‹çœ‹ L_.str çš„å®šä¹‰ 12L_.str: ## @.str .asciz &quot;hi there\\n&quot; è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ä»£ç æ–‡ä»¶é‡Œå®šä¹‰çš„é‚£ä¸ªå­—ç¬¦ä¸²ã€‚ è¿™é‡Œå¯ä»¥çœ‹åˆ°å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¿å­˜åœ¨ edi å’Œ rsi å¯„å­˜å™¨é‡Œï¼Œæ ¹æ®å‡½æ•°åœ°å€åšäº†ä¸åŒçš„åç§»ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥çœ‹å‡ºåœ¨è¿™ä¸ªæ±‡ç¼–ä»£ç è¿˜æœ‰èƒ½å¤Ÿä¼˜åŒ–çš„åœ°æ–¹ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªå€¼å¹¶æ²¡æœ‰ç”¨ï¼Œå´è¿˜æ˜¯è¢«å¯„å­˜å™¨å­˜å‚¨äº†ã€‚ printf() æ˜¯ä¸ªå¯å˜å‚æ•°çš„å‡½æ•°ï¼ŒæŒ‰ç…§ ABI è°ƒç”¨çº¦å®šå­˜å‚¨å‚æ•°çš„å¯„å­˜å™¨æ•°é‡å­˜å‚¨åœ¨å¯„å­˜å™¨ al ä¸­ï¼Œå¯å˜æ‰€ä»¥æ•°é‡è®¾ç½®ä¸º0ï¼Œcallq ä¼šè°ƒç”¨ printf() å‡½æ•°ã€‚ æ¥ä¸‹æ¥çœ‹çœ‹è¿”å›å’Œå‡½æ•°çš„ç»“æŸ 1234567xorl %ecx, %ecxmovl %eax, -20(%rbp) ## 4-byte Spillmovl %ecx, %eaxaddq $32, %rsppopq %rbpretq.cfi_endproc xorl %ecx, %ecx ç›¸å½“äºå°† ecx å¯„å­˜å™¨è®¾ç½®ä¸º0ã€‚ABI çº¦å®š eax å¯„å­˜å™¨ç”¨æ¥ä¿å­˜å‡½æ•°è¿”å›å€¼ï¼Œæ‹·è´ ecx åˆ° eax ä¸­ï¼Œè¿™æ · main() è¿”å›å€¼å°±æ˜¯0ã€‚ å‡½æ•°æ‰§è¡Œå®Œä¼šæ¢å¤å †æ ˆæŒ‡é’ˆï¼Œå‰é¢æ˜¯ subq 32 æ˜¯æŠŠ rsp ä¸‹ç§»32å­—èŠ‚ï¼Œaddq å°±æ˜¯ä¸Šç§»å½’ä½ã€‚ç„¶åæŠŠ rbp çš„å€¼ä»æ ˆé‡Œ pop å‡ºæ¥ã€‚ret ä¼šè¯»å–å‡ºæ ˆè¿”å›çš„åœ°å€ï¼Œ.cfi_endproc å’Œ .cfi_startproc é…å¯¹æ ‡è®°ç»“æŸã€‚ æ¥ä¸‹æ¥æ˜¯å­—ç¬¦ä¸²è¾“å‡º 12345 .section __TEXT,__cstring,cstring_literalsL_.str: ## @.str .asciz &quot;hi there\\n&quot;.subsections_via_symbols åŒæ · .section æŒ‡å‡ºè¿›å…¥ä¸€ä¸ªæ–°çš„æ®µã€‚æœ€å .subsections_via_symbols æ˜¯é™æ€é“¾æ¥å™¨ç”¨çš„ã€‚ æ¥ä¸‹æ¥é€šè¿‡ size å·¥å…·æ¥çœ‹çœ‹ a.out é‡Œçš„ sectionã€‚ 1xcrun size -x -l -m a.out 1234567891011121314Segment __PAGEZERO: 0x100000000 (vmaddr 0x0 fileoff 0)Segment __TEXT: 0x1000 (vmaddr 0x100000000 fileoff 0) Section __text: 0x34 (addr 0x100000f50 offset 3920) Section __stubs: 0x6 (addr 0x100000f84 offset 3972) Section __stub_helper: 0x1a (addr 0x100000f8c offset 3980) Section __cstring: 0xa (addr 0x100000fa6 offset 4006) Section __unwind_info: 0x48 (addr 0x100000fb0 offset 4016) total 0xa6Segment __DATA: 0x1000 (vmaddr 0x100001000 fileoff 4096) Section __nl_symbol_ptr: 0x10 (addr 0x100001000 offset 4096) Section __la_symbol_ptr: 0x8 (addr 0x100001010 offset 4112) total 0x18Segment __LINKEDIT: 0x1000 (vmaddr 0x100002000 fileoff 8192)total 0x100003000 å¯ä»¥çœ‹å‡ºæœ‰å››ä¸ª segment å’Œå¤šä¸ªsectionã€‚ åœ¨è¿è¡Œæ—¶ï¼Œè™šæ‹Ÿå†…å­˜ä¼šæŠŠ segment æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œè™šæ‹Ÿå†…å­˜ä¼šé¿å…å°†å…¨éƒ¨æ‰§è¡Œæ–‡ä»¶å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ã€‚ __PAGEZERO segment çš„å¤§å°æ˜¯ 4GBï¼Œä¸æ˜¯æ–‡ä»¶çœŸå®å¤§å°ï¼Œæ˜¯è§„å®šè¿›ç¨‹åœ°å€ç©ºé—´å‰ 4GB è¢«æ˜ å°„ä¸ºä¸å¯æ‰§è¡Œï¼Œä¸å¯å†™å’Œä¸å¯è¯»ã€‚ __TEXT segment åŒ…å«è¢«æ‰§è¡Œçš„ä»£ç ä»¥åªè¯»å’Œå¯æ‰§è¡Œçš„æ–¹å¼æ˜ å°„ã€‚ __text section åŒ…å«ç¼–è¯‘åçš„æœºå™¨ç ã€‚ __stubs å’Œ __stub_helper æ˜¯ç»™åŠ¨æ€é“¾æ¥å™¨ dyld ä½¿ç”¨ï¼Œå¯ä»¥å…è®¸å»¶è¿Ÿé“¾æ¥ã€‚ __cstring å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²ã€‚ __const ä¸å¯å˜çš„å¸¸é‡ã€‚ __DATA segment ä»¥å¯è¯»å†™å’Œä¸å¯æ‰§è¡Œçš„æ–¹å¼æ˜ å°„ï¼Œé‡Œé¢æ˜¯ä¼šè¢«æ›´æ”¹çš„æ•°æ®ã€‚ __nl_symbol_ptr éå»¶è¿ŸæŒ‡é’ˆã€‚å¯æ‰§è¡Œæ–‡ä»¶åŠ è½½åŒæ—¶åŠ è½½ã€‚ __la_symbol_ptr å»¶è¿Ÿç¬¦å·æŒ‡é’ˆã€‚å»¶è¿Ÿç”¨äºå¯æ‰§è¡Œæ–‡ä»¶ä¸­è°ƒç”¨æœªå®šä¹‰çš„å‡½æ•°ï¼Œå¯æ‰§è¡Œæ–‡ä»¶é‡Œæ²¡æœ‰åŒ…å«çš„å‡½æ•°ä¼šå»¶è¿ŸåŠ è½½ã€‚ __const éœ€è¦é‡å®šå‘çš„å¸¸é‡ï¼Œä¾‹å¦‚ char * const c = â€œfooâ€; cæŒ‡é’ˆæŒ‡å‘å¯å˜çš„æ•°æ®ã€‚ __bss ä¸ç”¨åˆå§‹åŒ–çš„é™æ€å˜é‡ï¼Œä¾‹å¦‚ static int i; ANSI C æ ‡å‡†è§„å®šé™æ€å˜é‡å¿…é¡»è®¾ç½®ä¸º0ã€‚è¿è¡Œæ—¶é™æ€å˜é‡çš„å€¼æ˜¯å¯ä¿®æ”¹çš„ã€‚ __common åŒ…å«å¤–éƒ¨å…¨å±€å˜é‡ã€‚ä¾‹å¦‚åœ¨å‡½æ•°å¤–å®šä¹‰ int i; __dyld æ˜¯sectionå ä½ç¬¦ï¼Œç”¨äºåŠ¨æ€é“¾æ¥å™¨ã€‚ æ›´å¤š section ç±»å‹ä»‹ç»å¯ä»¥æŸ¥çœ‹è‹¹æœæ–‡æ¡£ï¼š OS X Assembler Reference æ¥ä¸‹æ¥ç”¨ otool æŸ¥çœ‹ä¸‹ section é‡Œçš„å†…å®¹ï¼š 1xcrun otool -s __TEXT __text a.out 123456a.out:Contents of (__TEXT,__text) section0000000100000f50 55 48 89 e5 48 83 ec 20 48 8d 05 47 00 00 00 c7 0000000100000f60 45 fc 00 00 00 00 89 7d f8 48 89 75 f0 48 89 c7 0000000100000f70 b0 00 e8 0d 00 00 00 31 c9 89 45 ec 89 c8 48 83 0000000100000f80 c4 20 5d c3 è¿™ä¸ªè¿”å›çš„å†…å®¹å¾ˆéš¾è¯»ï¼ŒåŠ ä¸ª - v å°±å¯ä»¥æŸ¥çœ‹åæ±‡ç¼–ä»£ç äº†ï¼Œ -s __TEXT __text æœ‰ä¸ªç¼©å†™ -t 1xcrun otool -v -t a.out 12345678910111213141516171819a.out:(__TEXT,__text) section_main:0000000100000f50 pushq %rbp0000000100000f51 movq %rsp, %rbp0000000100000f54 subq $0x20, %rsp0000000100000f58 leaq 0x47(%rip), %rax0000000100000f5f movl $0x0, -0x4(%rbp)0000000100000f66 movl %edi, -0x8(%rbp)0000000100000f69 movq %rsi, -0x10(%rbp)0000000100000f6d movq %rax, %rdi0000000100000f70 movb $0x0, %al0000000100000f72 callq 0x100000f840000000100000f77 xorl %ecx, %ecx0000000100000f79 movl %eax, -0x14(%rbp)0000000100000f7c movl %ecx, %eax0000000100000f7e addq $0x20, %rsp0000000100000f82 popq %rbp0000000100000f83 retq çœ‹èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå’Œå‰é¢çš„ç¼–è¯‘æ—¶å·®ä¸å¤šï¼Œä¸åŒçš„å°±æ˜¯æ²¡æœ‰æ±‡ç¼–æŒ‡ä»¤ã€‚ ç°åœ¨æ¥çœ‹çœ‹å¯æ‰§è¡Œæ–‡ä»¶ã€‚ é€šè¿‡ otool æ¥çœ‹çœ‹å¯æ‰§è¡Œæ–‡ä»¶å¤´éƒ¨ï¼Œ é€šè¿‡ -h å¯ä»¥æ‰“å°å‡ºå¤´éƒ¨ä¿¡æ¯ï¼š 1otool -v -h a.out 123Mach header magic cputype cpusubtype caps filetype ncmds sizeofcmds flagsMH_MAGIC_64 X86_64 ALL LIB64 EXECUTE 15 1200 NOUNDEFS DYLDLINK TWOLEVEL PIE mach_header ç»“æ„ä½“ 123456789struct mach_header { uint32_t magic; cpu_type_t cputype; cpu_subtype_t cpusubtype; uint32_t filetype; uint32_t ncmds; uint32_t sizeofcmds; uint32_t flags;}; cputype å’Œ cpusubtype è§„å®šå¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥åœ¨å“ªäº›ç›®æ ‡æ¶æ„è¿è¡Œã€‚ncmds å’Œ sizeofcmds æ˜¯åŠ è½½å‘½ä»¤ã€‚é€šè¿‡ -l å¯ä»¥æŸ¥çœ‹åŠ è½½å‘½ä»¤ 1otool -v -l a.out | open -f åŠ è½½å‘½ä»¤ç»“æ„ä½“ 12345678910111213struct segment_command { uint32_t cmd; uint32_t cmdsize; char segname[16]; uint32_t vmaddr; uint32_t vmsize; uint32_t fileoff; uint32_t filesize; vm_prot_t maxprot; vm_prot_t initprot; uint32_t nsects; uint32_t flags;}; æŸ¥çœ‹ Load command 1 è¿™ä¸ªéƒ¨åˆ†å¯ä»¥æ‰¾åˆ° initprot r-x ï¼Œè¡¨ç¤ºåªè¯»å’Œå¯æ‰§è¡Œã€‚ åœ¨åŠ è½½å‘½ä»¤é‡Œè¿˜æ˜¯çœ‹çœ‹ __TEXT __text çš„sectionçš„å†…å®¹ 12345678910111213Section sectname __text segname __TEXT addr 0x0000000100000f50 size 0x0000000000000034 offset 3920 align 2^4 (16) reloff 0 nreloc 0 type S_REGULARattributes PURE_INSTRUCTIONS SOME_INSTRUCTIONS reserved1 0 reserved2 0 addr çš„å€¼è¡¨ç¤ºä»£ç çš„ä½ç½®åœ°å€ï¼Œåœ¨ä¸Šé¢åæ±‡ç¼–çš„ä»£ç é‡Œå¯ä»¥çœ‹åˆ°åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œoffset è¡¨ç¤ºåœ¨æ–‡ä»¶ä¸­çš„åç§»é‡ã€‚ å•ä¸ªæ–‡ä»¶çš„å°±è¿™æ ·äº†ï¼Œä½†æ˜¯å·¥ç¨‹éƒ½æ˜¯å¤šä¸ªæºæ–‡ä»¶çš„ï¼Œé‚£ä¹ˆå¤šä¸ªæ–‡ä»¶æ˜¯æ€ä¹ˆåˆæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„å‘¢ï¼Ÿé‚£ä¹ˆå»ºå¤šä¸ªæ–‡ä»¶æ¥çœ‹çœ‹å…ˆã€‚Foo.h 1234567#import &lt;Foundation/Foundation.h&gt;@interface Foo : NSObject- (void)say;@end Foo.m 12345678910#import â€œFoo.hâ€@implementation Foo- (void)say{ NSLog(@â€œhi there again!\\nâ€);}@end SayHi.m 12345678910#import â€œFoo.hâ€int main(int argc, char *argv[]){ @autoreleasepool { Foo *foo = [[Foo alloc] init]; [foo say]; return 0; }} å…ˆç¼–è¯‘å¤šä¸ªæ–‡ä»¶ 12xcrun clang -c Foo.mxcrun clang -c SayHi.m å†å°†ç¼–è¯‘åçš„æ–‡ä»¶é“¾æ¥èµ·æ¥ï¼Œè¿™æ ·å°±å¯ä»¥ç”Ÿæˆ a.out å¯æ‰§è¡Œæ–‡ä»¶äº†ã€‚ 1xcrun clang SayHi.o Foo.o -Wl,`xcrun â€”show-sdk-path`/System/Library/Frameworks/Foundation.framework/Foundation é€†å‘ Mach-O æ–‡ä»¶éœ€è¦å…ˆå®‰è£… tweakï¼Œå®‰è£…è¶Šç‹±å¯ä»¥é€šè¿‡ cydiaï¼Œä¸è¶Šç‹±ç›´æ¥æ‰“åŒ…æˆ ipa å®‰è£…åŒ…ã€‚è¶Šç‹±çš„è¯ä¼šå®‰è£…ä¸€ä¸ª mobilesubstrate çš„åŠ¨æ€åº“ï¼Œä½¿ç”¨ theos å¼€å‘å·¥å…·ï¼Œéè¶Šç‹±çš„ç›´æ¥æŠŠè¿™ä¸ªåº“æ‰“åŒ…è¿› ipa ä¸­æˆ–è€…ç›´æ¥ä¿®æ”¹æ±‡ç¼–ä»£ç ã€‚ Mobilesubstrate æä¾›äº†ä¸‰ä¸ªæ¨¡å—æ¥æ–¹ä¾¿å¼€å‘ã€‚ MobileHookerï¼šåˆ©ç”¨ method swizzling æŠ€æœ¯å®šä¹‰ä¸€äº›å®å’Œå‡½æ•°æ¥æ›¿æ¢ç³»ç»Ÿæˆ–è€…ç›®æ ‡å‡½æ•°ã€‚ MobileLoaderï¼šåœ¨ç¨‹åºå¯åŠ¨æ—¶å°†æˆ‘ä»¬å†™çš„ç ´è§£ç¨‹åºç”¨çš„ç¬¬ä¸‰æ–¹åº“æ³¨å…¥è¿›å»ã€‚æ€ä¹ˆæ³¨å…¥çš„å‘¢ï¼Œè¿˜è®°å¾—å…ˆå‰è¯´çš„ clang attribute é‡Œçš„ä¸€ä¸ª attribute((constructor)) ä¹ˆï¼Œå®ƒä¼šåœ¨ main æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œæ‰€ä»¥æŠŠæˆ‘ä»¬çš„ hook æ”¾åœ¨è¿™é‡Œå°±å¯ä»¥äº†ã€‚ Safe modeï¼šç±»ä¼¼å®‰å…¨æ¨¡å¼ï¼Œä¼šç¦ç”¨çš„æ”¹åŠ¨ã€‚ å…ˆå‰æåˆ° Mach-O çš„ç»“æ„æœ‰ Headerï¼ŒLoad commands å’Œ Dataï¼ŒMobileloader ä¼šé€šè¿‡ä¿®æ”¹äºŒè¿›åˆ¶çš„ loadCommands æ¥å…ˆæŠŠè‡ªå·±æ³¨å…¥ç„¶åå†æŠŠæˆ‘ä»¬å†™çš„ç¬¬ä¸‰æ–¹åº“æ³¨å…¥è¿›å»ï¼Œè¿™æ ·ç ´è§£ç¨‹åºå°±ä¼šæ”¾åœ¨ Load commands æ®µé‡Œé¢äº†ã€‚ å½“ç„¶å¦‚æœæ˜¯æˆ‘ä»¬è‡ªå·±çš„ç¨‹åºæˆ‘ä»¬æ˜¯çŸ¥é“è¦æ›¿æ¢å“ªäº›æ–¹æ³•çš„ï¼Œæ—¢ç„¶æ˜¯é€†å‘è‚¯å®šæ˜¯åˆ«äººçš„ç¨‹åºäº†ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å»å…ˆåˆ†æä¸‹æˆ‘ä»¬æƒ³æ›¿æ¢æ–¹æ³•æ˜¯å“ªä¸ªï¼Œç½‘ç»œç›¸å…³çš„åˆ†æå¯ä»¥ç”¨å¸¸ç”¨é‚£äº›æŠ“åŒ…å·¥å…·ï¼Œæ¯”å¦‚ Charlesï¼ŒWireShark ç­‰ï¼Œé™æ€çš„å¯ä»¥é€šè¿‡ç ¸å£³ï¼Œåæ±‡ç¼–ï¼Œclassdump å¤´æ–‡ä»¶æ¥åˆ†æ app çš„æ¶æ„ï¼Œå¯¹åº”çš„å¸¸ç”¨å·¥å…·dumpdecryptedï¼Œhopper disassembler å’Œ class_dumpã€‚è¿è¡Œæ—¶çš„åˆ†æå¯ç”¨å·¥å…·æœ‰è¿è¡Œæ—¶æ§åˆ¶å°cycriptï¼Œè¿œç¨‹æ–­ç‚¹è°ƒè¯•lldb+debugserverï¼Œlogifyã€‚ è¿™é‡Œæœ‰ä¸ªå®ä¾‹ï¼Œè®²è§£å¦‚ä½•é€šè¿‡é€†å‘å®ç°å¾®ä¿¡æŠ¢çº¢åŒ…çš„æ’ä»¶ï¼š ã€Dev Club åˆ†äº«ç¬¬ä¸‰æœŸã€‘iOS é»‘å®¢æŠ€æœ¯å¤§æ­ç§˜ - DEV CLUB å…¥é—¨æ–‡ç« å¯ä»¥çœ‹çœ‹è¿™ç¯‡ï¼š MyArticles/iOSå†°ä¸ç«ä¹‹æ­Œ at master Â· zhengmin1989/MyArticles Â· GitHub ç©å‡ºæ–°èŠ±æ ·ï¼š é»‘ç§‘æŠ€ï¼šæŠŠç¬¬ä¸‰æ–¹ iOS åº”ç”¨è½¬æˆåŠ¨æ€åº“ - Junâ€™s Blogï¼Œä½œè€…å¦ä¸€ç¯‡æ–‡ç« ï¼š iOSç¬¦å·è¡¨æ¢å¤&amp;é€†å‘æ”¯ä»˜å® - Junâ€™s Blog dyldåŠ¨æ€é“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åå°±æ˜¯åœ¨å¯åŠ¨æ—¶è¿›è¡ŒåŠ¨æ€é“¾æ¥äº†ï¼Œè¿›è¡Œç¬¦å·å’Œåœ°å€çš„ç»‘å®šã€‚é¦–å…ˆä¼šåŠ è½½æ‰€ä¾èµ–çš„ dylibsï¼Œä¿®æ­£åœ°å€åç§»ï¼Œå› ä¸º iOS ä¼šç”¨ ASLR æ¥åšåœ°å€åç§»é¿å…æ”»å‡»ï¼Œç¡®å®š Non-Lazy Pointer åœ°å€è¿›è¡Œç¬¦å·åœ°å€ç»‘å®šï¼ŒåŠ è½½æ‰€æœ‰ç±»ï¼Œæœ€åæ‰§è¡Œ load æ–¹æ³•å’Œ clang attribute çš„ constructor ä¿®é¥°å‡½æ•°ã€‚ ç”¨å…ˆå‰ Mach-O ç« èŠ‚çš„ä¾‹å­ç»§ç»­åˆ†æï¼Œæ¯ä¸ªå‡½æ•°ï¼Œå…¨å±€å˜é‡å’Œç±»éƒ½æ˜¯é€šè¿‡ç¬¦å·çš„å½¢å¼æ¥å®šä¹‰å’Œä½¿ç”¨çš„ï¼Œå½“æŠŠç›®æ ‡æ–‡ä»¶é“¾æ¥æˆä¸€ä¸ªæ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œé“¾æ¥å™¨åœ¨ç›®æ ‡æ–‡ä»¶å’ŒåŠ¨æ€åº“ä¹‹é—´å¯¹ç¬¦å·åšè§£æå¤„ç†ã€‚ ç¬¦å·è¡¨ä¼šè§„å®šå®ƒä»¬çš„ç¬¦å·ï¼Œä½¿ç”¨ nm å·¥å…·çœ‹çœ‹ 1xcrun nm -nm SayHi.o 12345 (undefined) external _OBJC_CLASS_$_Foo (undefined) external _objc_autoreleasePoolPop (undefined) external _objc_autoreleasePoolPush (undefined) external _objc_msgSend0000000000000000 (__TEXT,__text) external _main OBJC_CLASS$_Foo è¡¨ç¤º Foo çš„ OC ç¬¦å·ã€‚ (undefined) external è¡¨ç¤ºæœªå®ç°éç§æœ‰ï¼Œå¦‚æœæ˜¯ç§æœ‰å°±æ˜¯ non-externalã€‚ external _main è¡¨ç¤º main() å‡½æ•°ï¼Œå¤„ç† 0 åœ°å€ï¼Œå°†è¦åˆ° TEXT,text section å†çœ‹çœ‹ Foo 1xcrun nm -nm Foo.o 1234567891011 (undefined) external _NSLog (undefined) external _OBJC_CLASS_$_NSObject (undefined) external _OBJC_METACLASS_$_NSObject (undefined) external ___CFConstantStringClassReference (undefined) external __objc_empty_cache0000000000000000 (__TEXT,__text) non-external -[Foo say]0000000000000060 (__DATA,__objc_const) non-external l_OBJC_METACLASS_RO_$_Foo00000000000000a8 (__DATA,__objc_const) non-external l_OBJC_$_INSTANCE_METHODS_Foo00000000000000c8 (__DATA,__objc_const) non-external l_OBJC_CLASS_RO_$_Foo0000000000000110 (__DATA,__objc_data) external _OBJC_METACLASS_$_Foo0000000000000138 (__DATA,__objc_data) external _OBJC_CLASS_$_Foo å› ä¸º undefined ç¬¦å·è¡¨ç¤ºè¯¥æ–‡ä»¶ç±»æœªå®ç°çš„ï¼Œæ‰€ä»¥åœ¨ç›®æ ‡æ–‡ä»¶å’Œ Fundation framework åŠ¨æ€åº“åšé“¾æ¥å¤„ç†æ—¶ï¼Œé“¾æ¥å™¨ä¼šå°è¯•è§£ææ‰€æœ‰çš„ undefined ç¬¦å·ã€‚ é“¾æ¥å™¨é€šè¿‡åŠ¨æ€åº“è§£ææˆç¬¦å·ä¼šè®°å½•æ˜¯é€šè¿‡å“ªä¸ªåŠ¨æ€åº“è§£æçš„ï¼Œè·¯å¾„ä¹Ÿä¼šä¸€èµ·è®°å½•ã€‚å¯¹æ¯”ä¸‹ a.out ç¬¦å·è¡¨çœ‹çœ‹æ˜¯æ€ä¹ˆè§£æç¬¦å·çš„ã€‚ 1xcrun nm -nm a.out 1234567891011121314 (undefined) external _NSLog (from Foundation) (undefined) external _OBJC_CLASS_$_NSObject (from CoreFoundation) (undefined) external _OBJC_METACLASS_$_NSObject (from CoreFoundation) (undefined) external ___CFConstantStringClassReference (from CoreFoundation) (undefined) external __objc_empty_cache (from libobjc) (undefined) external _objc_autoreleasePoolPop (from libobjc) (undefined) external _objc_autoreleasePoolPush (from libobjc) (undefined) external _objc_msgSend (from libobjc) (undefined) external dyld_stub_binder (from libSystem)0000000100000000 (__TEXT,__text) [referenced dynamically] external __mh_execute_header0000000100000e90 (__TEXT,__text) external _main0000000100000f10 (__TEXT,__text) non-external -[Foo say]0000000100001130 (__DATA,__objc_data) external _OBJC_METACLASS_$_Foo0000000100001158 (__DATA,__objc_data) external _OBJC_CLASS_$_Foo çœ‹çœ‹å“ªäº› undefined çš„ç¬¦å·ï¼Œæœ‰äº†æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥çŸ¥é“åœ¨å“ªä¸ªåŠ¨æ€åº“èƒ½å¤Ÿæ‰¾åˆ°ã€‚ é€šè¿‡ otool å¯ä»¥æ‰¾åˆ°æ‰€éœ€åº“åœ¨å“ª 1xcrun otool -L a.out 12345a.out: /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 1349.25.0) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1238.0.0) /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1348.28.0) /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0) libSystem é‡Œæœ‰å¾ˆå¤šæˆ‘ä»¬ç†Ÿæ‚‰çš„lib libdispatchï¼šGCD libsystem_cï¼šCè¯­è¨€åº“ libsystem_blocksï¼šBlock libcommonCryptoï¼šåŠ å¯†ï¼Œæ¯”å¦‚md5 dylib è¿™ç§æ ¼å¼çš„è¡¨ç¤ºæ˜¯åŠ¨æ€é“¾æ¥çš„ï¼Œç¼–è¯‘çš„æ—¶å€™ä¸ä¼šè¢«ç¼–è¯‘åˆ°æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œåœ¨ç¨‹åºæ‰§è¡Œçš„æ—¶å€™æ‰ linkï¼Œè¿™æ ·å°±ä¸ç”¨ç®—åˆ°åŒ…çš„å¤§å°é‡Œï¼Œè€Œä¸”ä¹Ÿèƒ½å¤Ÿä¸æ›´æ–°æ‰§è¡Œç¨‹åºå°±èƒ½å¤Ÿæ›´æ–°åº“ã€‚ æ‰“å°ä»€ä¹ˆåº“è¢«åŠ è½½äº† 1(export DYLD_PRINT_LIBRARIES=; ./a.out ) 12345dyld: loaded: /Users/didi/Downloads/./a.outdyld: loaded: /System/Library/Frameworks/Foundation.framework/Versions/C/Foundationdyld: loaded: /usr/lib/libSystem.B.dylibdyld: loaded: /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundationâ€¦ æ•°æ•°è¿˜æŒºå¤šçš„ï¼Œå› ä¸º Fundation è¿˜ä¼šä¾èµ–ä¸€äº›å…¶å®ƒçš„åŠ¨æ€åº“ï¼Œå…¶å®ƒçš„åº“è¿˜ä¼šå†ä¾èµ–æ›´å¤šçš„åº“ï¼Œè¿™æ ·ç›¸äº’ä¾èµ–çš„ç¬¦å·ä¼šå¾ˆå¤šï¼Œéœ€è¦å¤„ç†çš„æ—¶é—´ä¹Ÿä¼šæ¯”è¾ƒé•¿ï¼Œè¿™é‡Œç³»ç»Ÿä¸Šçš„åŠ¨æ€é“¾æ¥å™¨ä¼šä½¿ç”¨å…±äº«ç¼“å­˜ï¼Œå…±äº«ç¼“å­˜åœ¨ /var/db/dyld/ã€‚å½“åŠ è½½ Mach-O æ–‡ä»¶æ—¶åŠ¨æ€é“¾æ¥å™¨ä¼šå…ˆæ£€æŸ¥å…±äº«å†…å­˜æ˜¯å¦æœ‰ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šåœ¨è‡ªå·±åœ°å€ç©ºé—´æ˜ å°„è¿™äº›å…±äº«ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦ã€‚ åŠ¨æ€é“¾æ¥å™¨çš„ä½œç”¨é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Œå¯ä»¥å…ˆçœ‹çœ‹ Mike Ash å†™çš„è¿™ç¯‡å…³äº dyld çš„åšå®¢ï¼š Dynamic Linking On OS X dyld åšäº†äº›ä»€ä¹ˆäº‹ kernel åšå¯åŠ¨ç¨‹åºåˆå§‹å‡†å¤‡ï¼Œå¼€å§‹ç”±dyldè´Ÿè´£ã€‚ åŸºäºéå¸¸ç®€å•çš„åŸå§‹æ ˆä¸º kernel è®¾ç½®è¿›ç¨‹æ¥å¯åŠ¨è‡ªèº«ã€‚ ä½¿ç”¨å…±äº«ç¼“å­˜æ¥å¤„ç†é€’å½’ä¾èµ–å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼ŒImageLoader ä¼šè¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬çš„ç±»ï¼Œæ–¹æ³•ç­‰å„ç§ç¬¦å·ã€‚ ç«‹å³ç»‘å®š non-lazy çš„ç¬¦å·å¹¶è®¾ç½®ç”¨äº lazy bind çš„å¿…è¦è¡¨ï¼Œå°†è¿™äº›åº“ link åˆ°æ‰§è¡Œæ–‡ä»¶é‡Œã€‚ ä¸ºå¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œé™æ€åˆå§‹åŒ–ã€‚ è®¾ç½®å‚æ•°åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„ main å‡½æ•°å¹¶è°ƒç”¨å®ƒã€‚ åœ¨æ‰§è¡ŒæœŸé—´ï¼Œé€šè¿‡ç»‘å®šç¬¦å·å¤„ç†å¯¹ lazily-bound ç¬¦å·å­˜æ ¹çš„è°ƒç”¨æä¾› runtime åŠ¨æ€åŠ è½½æœåŠ¡ï¼ˆé€šè¿‡ dl*() è¿™ä¸ª API ï¼‰ï¼Œå¹¶ä¸ºgdbå’Œå…¶å®ƒè°ƒè¯•å™¨æä¾›é’©å­ä»¥è·å¾—å…³é”®ä¿¡æ¯ã€‚runtime ä¼šè°ƒç”¨ map_images åšè§£æå’Œå¤„ç†ï¼Œload_images æ¥è°ƒç”¨ call_load_methods æ–¹æ³•éå†æ‰€æœ‰åŠ è½½äº†çš„ Classï¼ŒæŒ‰ç…§ç»§æ‰¿å±‚çº§ä¾æ¬¡è°ƒç”¨ +load æ–¹æ³•ã€‚ åœ¨ mian å‡½æ•°è¿”å›åè¿è¡Œ static terminatorã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€æ—¦ main å‡½æ•°è¿”å›ï¼Œå°±éœ€è¦è°ƒç”¨ libSystem çš„ _exitã€‚ æŸ¥çœ‹è¿è¡Œæ—¶çš„è°ƒç”¨ map_images å’Œ è°ƒç”¨ +load æ–¹æ³•çš„ç›¸å…³ runtime å¤„ç†å¯ä»¥é€šè¿‡ RetVal çš„å¯debug çš„ objc/runtime RetVal/objc-runtime: objc runtime 706 æ¥è¿›è¡Œæ–­ç‚¹æŸ¥çœ‹è°ƒç”¨çš„ runtime æ–¹æ³•å…·ä½“å®ç°ã€‚åœ¨ debug-objc ä¸‹åˆ›å»ºä¸€ä¸ªç±»ï¼Œåœ¨ +load æ–¹æ³•é‡Œæ–­ç‚¹æŸ¥çœ‹èµ°åˆ°è¿™é‡Œè°ƒç”¨çš„å †æ ˆå¦‚ä¸‹ï¼š 1234560 +[someclass load]1 call_class_loads()2 ::call_load_methods3 ::load_images(const char *path __unused, const struct mach_header *mh)4 dyld::notifySingle(dyld_image_states, ImageLoader const*, ImageLoader::InitializerTimingList*)11 _dyld_start åœ¨ load_images æ–¹æ³•é‡Œæ–­ç‚¹ p path å¯ä»¥æ‰“å°å‡ºæ‰€æœ‰åŠ è½½çš„åŠ¨æ€é“¾æ¥åº“ï¼Œè¿™ä¸ªæ–¹æ³•çš„ hasLoadMethods ç”¨äºå¿«é€Ÿåˆ¤æ–­æ˜¯å¦æœ‰ +load æ–¹æ³•ã€‚ prepare_load_methods è¿™ä¸ªæ–¹æ³•ä¼šè·å–æ‰€æœ‰ç±»çš„åˆ—è¡¨ç„¶åæ”¶é›†å…¶ä¸­çš„ +load æ–¹æ³•ï¼Œåœ¨ä»£ç é‡Œå¯ä»¥å‘ç° Class çš„ +load æ˜¯å…ˆæ‰§è¡Œçš„ï¼Œç„¶åæ‰§è¡Œ Category çš„ã€‚ä¸ºä»€ä¹ˆè¿™æ ·åšï¼ŒåŸå› å¯ä»¥é€šè¿‡ prepare_load_methods è¿™ä¸ªæ–¹æ³•çœ‹å‡ºï¼Œåœ¨éå† Class çš„ +load æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ schedule_class_load è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šé€’å½’åˆ°æ ¹èŠ‚ç‚¹æ¥æ»¡è¶³ Class æ”¶é›†å®Œæ•´å…³ç³»æ ‘çš„éœ€æ±‚ã€‚ æœ€å call_load_methods ä¼šåˆ›å»ºä¸€ä¸ª autoreleasePool ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæ¥åŠ¨æ€è°ƒç”¨ç±»å’Œ Category çš„ +load æ–¹æ³•ã€‚ å¦‚æœæƒ³äº†è§£ Cocoa çš„ Fundation åº“å¯ä»¥é€šè¿‡ GNUStep æºç æ¥å­¦ä¹ ã€‚æ¯”å¦‚ NSNotificationCenter å‘é€é€šçŸ¥æ˜¯æŒ‰ä»€ä¹ˆé¡ºåºå‘é€çš„å¯ä»¥æŸ¥çœ‹ NSNotificationCenter.m é‡Œçš„ addObserver æ–¹æ³•å’Œ postNotification æ–¹æ³•ï¼Œçœ‹çœ‹è§‚å¯Ÿè€…æ˜¯æ€ä¹ˆæ·»åŠ çš„å’Œæ€ä¹ˆè¢«éå†é€šçŸ¥åˆ°çš„ã€‚ dyld æ˜¯å¼€æºçš„ï¼š GitHub - opensource-apple/dyld è¿˜å¯ä»¥çœ‹çœ‹è‹¹æœçš„ WWDC è§†é¢‘ WWDC 2016 Session 406 é‡Œè®²è§£å¯¹å¯åŠ¨è¿›è¡Œä¼˜åŒ–ã€‚ è¿™ç¯‡æ–‡ç« ä¹Ÿä¸é”™ï¼š Dynamic Linking of Imported Functions in Mach-O - CodeProject LLVM å·¥å…·é“¾è·å– LLVM12345678910111213141516#å…ˆä¸‹è½½ LLVMsvn co https://llvm.org/svn/llvm-project/llvm/trunk llvm#åœ¨ LLVM çš„ tools ç›®å½•ä¸‹ä¸‹è½½ Clangcd llvm/toolssvn co https://llvm.org/svn/llvm-project/cfe/trunk clang#åœ¨ LLVM çš„ projects ç›®å½•ä¸‹ä¸‹è½½ compiler-rtï¼Œlibcxxï¼Œlibcxxabicd ../projectssvn co https://llvm.org/svn/llvm-project/compiler-rt/trunk compiler-rtsvn co https://llvm.org/svn/llvm-project/libcxx/trunk libcxxsvn co https://llvm.org/svn/llvm-project/libcxxabi/trunk libcxxabi#åœ¨ Clang çš„ tools ä¸‹å®‰è£… extra å·¥å…·cd ../tools/clang/toolssvn co https://llvm.org/svn/llvm-project/clang-tools-extra/trunk extra ç¼–è¯‘ LLVM123456789brew install gccbrew install cmakemkdir buildcd buildcmake -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=ON -DLLVM_TARGETS_TO_BUILD=\"AArch64;X86\" -G \"Unix Makefiles\" ..make j8#å®‰è£…make install#å¦‚æœæ‰¾ä¸åˆ°æ ‡å‡†åº“ï¼ŒXcode éœ€è¦å®‰è£… xcode-select --install 1234#å¦‚æœå¸Œæœ›æ˜¯ xcodeproject æ–¹å¼ build å¯ä»¥ä½¿ç”¨ -GXcodemkdir xcodeBuildcd xcodeBuildcmake -GXcode /path/to/llvm/source åœ¨ bin ä¸‹å­˜æ”¾ç€å·¥å…·é“¾ï¼Œæœ‰äº†è¿™äº›å·¥å…·é“¾å°±èƒ½å¤Ÿå®Œæˆæºç ç¼–è¯‘äº†ã€‚ LLVM æºç å·¥ç¨‹ç›®å½•ä»‹ç» llvm/examples/ - ä½¿ç”¨ LLVM IR å’Œ JIT çš„ä¾‹å­ã€‚ llvm/include/ - å¯¼å‡ºçš„å¤´æ–‡ä»¶ã€‚ llvm/lib/ - ä¸»è¦æºæ–‡ä»¶éƒ½åœ¨è¿™é‡Œã€‚ llvm/project/ - åˆ›å»ºè‡ªå·±åŸºäº LLVM çš„é¡¹ç›®çš„ç›®å½•ã€‚ llvm/test/ - åŸºäº LLVM çš„å›å½’æµ‹è¯•ï¼Œå¥å…¨æ£€å¯Ÿã€‚ llvm/suite/ - æ­£ç¡®æ€§ï¼Œæ€§èƒ½å’ŒåŸºå‡†æµ‹è¯•å¥—ä»¶ã€‚ llvm/tools/ - åŸºäº lib æ„å»ºçš„å¯ä»¥æ‰§è¡Œæ–‡ä»¶ï¼Œç”¨æˆ·é€šè¿‡è¿™äº›ç¨‹åºè¿›è¡Œäº¤äº’ï¼Œ-help å¯ä»¥æŸ¥çœ‹å„ä¸ªå·¥å…·è¯¦ç»†ä½¿ç”¨ã€‚ llvm/utils/ - LLVM æºä»£ç çš„å®ç”¨å·¥å…·ï¼Œæ¯”å¦‚ï¼ŒæŸ¥æ‰¾ LLC å’Œ LLI ç”Ÿæˆä»£ç å·®å¼‚å·¥å…·ï¼Œ Vim æˆ– Emacs çš„è¯­æ³•é«˜äº®å·¥å…·ç­‰ã€‚ lib ç›®å½•ä»‹ç» llvm/lib/IR/ - æ ¸å¿ƒç±»æ¯”å¦‚ Instruction å’Œ BasicBlockã€‚ llvm/lib/AsmParser/ - æ±‡ç¼–è¯­è¨€è§£æå™¨ã€‚ llvm/lib/Bitcode/ - è¯»å–å’Œå†™å…¥å­—èŠ‚ç  llvm/lib/Analysis/ - å„ç§å¯¹ç¨‹åºçš„åˆ†æï¼Œæ¯”å¦‚ Call Graphsï¼ŒInduction Variablesï¼ŒNatural Loop Identification ç­‰ç­‰ã€‚ llvm/lib/Transforms/ - IR-to-IR ç¨‹åºçš„å˜æ¢ã€‚ llvm/lib/Target/ - å¯¹åƒ X86 è¿™æ ·æœºå™¨çš„æè¿°ã€‚ llvm/lib/CodeGen/ - ä¸»è¦æ˜¯ä»£ç ç”Ÿæˆï¼ŒæŒ‡ä»¤é€‰æ‹©å™¨ï¼ŒæŒ‡ä»¤è°ƒåº¦å’Œå¯„å­˜å™¨åˆ†é…ã€‚ llvm/lib/ExecutionEngine/ - åœ¨è§£é‡Šæ‰§è¡Œå’ŒJITç¼–è¯‘åœºæ™¯èƒ½å¤Ÿç›´æ¥åœ¨è¿è¡Œæ—¶æ‰§è¡Œå­—èŠ‚ç çš„åº“ã€‚ å·¥å…·é“¾å‘½ä»¤ä»‹ç»åŸºæœ¬å‘½ä»¤ llvm-as - æ±‡ç¼–å™¨ï¼Œå°† .ll æ±‡ç¼–æˆå­—èŠ‚ç ã€‚ llvm-dis - åæ±‡ç¼–å™¨ï¼Œå°†å­—èŠ‚ç ç¼–æˆå¯è¯»çš„ .ll æ–‡ä»¶ã€‚ opt - å­—èŠ‚ç ä¼˜åŒ–å™¨ã€‚ llc - é™æ€ç¼–è¯‘å™¨ï¼Œå°†å­—èŠ‚ç ç¼–è¯‘æˆæ±‡ç¼–ä»£ç ã€‚ lli - ç›´æ¥æ‰§è¡Œ LLVM å­—èŠ‚ç ã€‚ llvm-link - å­—èŠ‚ç é“¾æ¥å™¨ï¼Œå¯ä»¥æŠŠå¤šä¸ªå­—èŠ‚ç æ–‡ä»¶é“¾æ¥æˆä¸€ä¸ªã€‚ llvm-ar - å­—èŠ‚ç æ–‡ä»¶æ‰“åŒ…å™¨ã€‚ llvm-lib - LLVM lib.exe å…¼å®¹åº“å·¥å…·ã€‚ llvm-nm - åˆ—å‡ºå­—èŠ‚ç å’Œç¬¦å·è¡¨ã€‚ llvm-config - æ‰“å° LLVM ç¼–è¯‘é€‰é¡¹ã€‚ llvm-diff - å¯¹ä¸¤ä¸ªè¿›è¡Œæ¯”è¾ƒã€‚ llvm-cov - è¾“å‡º coverage infomationã€‚ llvm-profdata - Profile æ•°æ®å·¥å…·ã€‚ llvm-stress - ç”Ÿæˆéšæœº .ll æ–‡ä»¶ã€‚ llvm-symbolizer - åœ°å€å¯¹åº”æºç ä½ç½®ï¼Œå®šä½é”™è¯¯ã€‚ llvm-dwarfdump - æ‰“å° DWARFã€‚ è°ƒè¯•å·¥å…· bugpoint - è‡ªåŠ¨æµ‹è¯•æ¡ˆä¾‹å·¥å…· llvm-extract - ä»ä¸€ä¸ª LLVM çš„æ¨¡å—é‡Œæå–ä¸€ä¸ªå‡½æ•°ã€‚ llvm-bcanalyzer - LLVM å­—èŠ‚ç åˆ†æå™¨ã€‚ å¼€å‘å·¥å…· FileCheck - çµæ´»çš„æ¨¡å¼åŒ¹é…æ–‡ä»¶éªŒè¯å™¨ã€‚ tblgen - C++ ä»£ç ç”Ÿæˆå™¨ã€‚ lit - LLVM é›†æˆæµ‹è¯•å™¨ã€‚ llvm-build - LLVM æ„å»ºå·¥ç¨‹æ—¶éœ€è¦çš„å·¥å…·ã€‚ llvm-readobj - LLVM Object ç»“æ„æŸ¥çœ‹å™¨ã€‚ Swift ç¼–è¯‘å®˜ç½‘ï¼š GitHub - apple/swift: The Swift Programming Languageswift ç°åœ¨æ˜¯å¼€æºçš„ï¼Œå¦‚æœå¸Œæœ›èƒ½å¤Ÿä¸ºå®ƒåšè´¡çŒ®å¯ä»¥å…ˆäº†è§£ä¸‹å®˜æ–¹çš„ä»‹ç»è¯´æ˜ï¼š Swift.org - Contributing 1234567891011121314151617181920212223242526#é¦–å…ˆå’Œ LLVM ä¸€æ ·å…ˆå®‰è£… cmake å’Œ ninja ï¼Œå†åˆ›å»ºç›®å½•brew install cmake ninjamkdir swiftsourcecd swiftsource#clone ä¸‹ swift æºç git clone https://github.com/apple/swift.git#checkout ç›¸å…³ç¼–è¯‘çš„ä¾èµ–ï¼Œæ¯”å¦‚ llvmï¼Œclangï¼Œllbuildï¼Œlldbï¼Œninjaï¼Œcmark ç­‰ç­‰ï¼Œç›®å‰å·®ä¸å¤šæœ‰13ä¸ª./swift/utils/update-checkout â€”clone#æŸ¥çœ‹æ–‡ä»¶å¤¹du -h -d 1#build swiftï¼Œè¿™é‡Œçš„ -x å‚æ•°ä¼šç”Ÿæˆ xcode çš„å·¥ç¨‹æ–‡ä»¶æ–¹ä¾¿åœ¨xcodeé‡Œé˜…è¯»ã€‚-R ä¼šä½¿ç”¨ release æ¨¡å¼ï¼Œæ¯” debug å¿«ã€‚./swift/utils/build-script -x -R#æ›´æ–°./swift/utils/update-checkout./swift/utils/build-script -x -R#åˆ‡åˆ°æŒ‡å®štagå’Œåˆ†æ”¯#tag./swift/utils/update-checkout â€”tag swift-3.0-RELEASE#ç‰¹å®šåˆ†æ”¯./swift/utils/update-checkout â€”scheme swift-3.0-branch swift ç¼–è¯‘æ˜¯ç”±å¤šä¸ªä»£ç ä»“åº“ç»„åˆè€Œæˆçš„ï¼Œå„ä¸ªä»£ç ä»“åº“çš„ä»‹ç»è¯´æ˜å¯ä»¥æŸ¥çœ‹å®˜æ–¹è¯´æ˜ï¼š Swift.org - Source Code å…¶å®ƒç¼–è¯‘å·¥å…·jså†™çš„C++è§£é‡Šå™¨JSCPPé€‚åˆå­¦ç”Ÿå­¦ä¹ æ—¶èƒ½å¤Ÿæ–¹ä¾¿çš„åœ¨æµè§ˆå™¨é‡Œç›´æ¥ç¼–c++ç¨‹åºã€‚é¡¹ç›®åœ°å€ï¼šGitHub - felixhao28/JSCPP: A simple C++ interpreter written in JavaScript C-SMILE ä¸€å¥—æ”¯æŒC/C++ JS JAVAå››ç§è¯­è¨€çš„scripting languageåœ¨ web ä¸­æœ‰ä¸ª WebAssembly æ˜¯ä¸ªæ ‡å‡†ï¼Œå¯ä»¥ä½¿å¾— web è¿è¡Œ C/C++ æˆä¸ºå¯èƒ½ã€‚å½“ç„¶è¿˜æœ‰å…¶å®ƒçš„æ¯”å¦‚ï¼šhttps://c-smile.sourceforge.net/ èµ„æ–™ç½‘å€ https://llvm.org https://clang.llvm.org/ https://www.aosabook.org/en/llvm.html GitHub - loarabia/Clang-tutorial: A collection of code samples showing usage of clang and llvm as a library Using an external Xcode Clang Static Analyzer binary, with additional checks - Stack Overflow LLVM Developersâ€™ Metting ming1016","link":"/program/ï£¿/clang-llvm/"},{"title":"é è°±çš„iOS","text":"è¯´æ˜ï¼šé¢è¯•é¢˜æ¥æºæ˜¯å¾®åš@æˆ‘å°±å«Sunnyæ€ä¹ˆäº†çš„è¿™ç¯‡åšæ–‡ï¼šã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„ iOSã€‹ï¼Œå…¶ä¸­å…±55é¢˜ï¼Œé™¤ç¬¬ä¸€é¢˜ä¸ºçº é”™é¢˜å¤–ï¼Œå…¶ä»–54é“å‡ä¸ºç®€ç­”é¢˜ã€‚ å‡ºé¢˜è€…ç®€ä»‹ï¼š å­™æºï¼ˆsunnyxxï¼‰ï¼Œç›®å‰å°±èŒäºç™¾åº¦ï¼Œè´Ÿè´£ç™¾åº¦çŸ¥é“ iOS å®¢æˆ·ç«¯çš„å¼€å‘å·¥ä½œï¼Œå¯¹æŠ€æœ¯å–œæ¬¢åˆ¨æ ¹é—®åº•å’Œæ€»ç»“æœ€ä½³å®è·µï¼Œçƒ­çˆ±åˆ†äº«å’Œå¼€æºï¼Œç»´æŠ¤ä¸€ä¸ªå« forkingdog çš„å¼€æºå°ç»„ã€‚ ç­”æ¡ˆä¸ºå¾®åš@iOSç¨‹åºçŠ­è¢æ•´ç†ï¼Œæœªç»å‡ºé¢˜è€…æ ¡å¯¹ï¼Œå¦‚æœ‰çº°æ¼ï¼Œè¯·å‘å¾®åš@iOSç¨‹åºçŠ­è¢æŒ‡æ­£ã€‚ ã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„iOSã€‹é¢è¯•é¢˜å‚è€ƒç­”æ¡ˆ é£æ ¼çº é”™é¢˜1.1. ä¼˜åŒ–éƒ¨åˆ†1.2. ç¡¬ä¼¤éƒ¨åˆ† ä»€ä¹ˆæƒ…å†µä½¿ç”¨ weak å…³é”®å­—ï¼Œç›¸æ¯” assign æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ æ€ä¹ˆç”¨ copy å…³é”®å­—ï¼Ÿ è¿™ä¸ªå†™æ³•ä¼šå‡ºä»€ä¹ˆé—®é¢˜ï¼š @property (copy) NSMutableArray *array; å¦‚ä½•è®©è‡ªå·±çš„ç±»ç”¨ copy ä¿®é¥°ç¬¦ï¼Ÿå¦‚ä½•é‡å†™å¸¦ copy å…³é”®å­—çš„ setterï¼Ÿ @property çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿivarã€getterã€setter æ˜¯å¦‚ä½•ç”Ÿæˆå¹¶æ·»åŠ åˆ°è¿™ä¸ªç±»ä¸­çš„ @protocol å’Œ category ä¸­å¦‚ä½•ä½¿ç”¨ @property runtime å¦‚ä½•å®ç° weak å±æ€§ @propertyä¸­æœ‰å“ªäº›å±æ€§å…³é”®å­—ï¼Ÿ/ @property åé¢å¯ä»¥æœ‰å“ªäº›ä¿®é¥°ç¬¦ï¼Ÿ weakå±æ€§éœ€è¦åœ¨deallocä¸­ç½®nilä¹ˆï¼Ÿ @synthesizeå’Œ@dynamicåˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ ARCä¸‹ï¼Œä¸æ˜¾å¼æŒ‡å®šä»»ä½•å±æ€§å…³é”®å­—æ—¶ï¼Œé»˜è®¤çš„å…³é”®å­—éƒ½æœ‰å“ªäº›ï¼Ÿ ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ13.1. å¯¹éé›†åˆç±»å¯¹è±¡çš„copyæ“ä½œ13.2. é›†åˆç±»å¯¹è±¡çš„copyä¸mutableCopy @synthesizeåˆæˆå®ä¾‹å˜é‡çš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå‡å¦‚propertyåä¸ºfooï¼Œå­˜åœ¨ä¸€ä¸ªåä¸º_fooçš„å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆè¿˜ä¼šè‡ªåŠ¨åˆæˆæ–°å˜é‡ä¹ˆï¼Ÿ åœ¨æœ‰äº†è‡ªåŠ¨åˆæˆå±æ€§å®ä¾‹å˜é‡ä¹‹åï¼Œ@synthesizeè¿˜æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ objcä¸­å‘ä¸€ä¸ªnilå¯¹è±¡å‘é€æ¶ˆæ¯å°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ objcä¸­å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯[obj foo]å’Œobjc_msgSend()å‡½æ•°ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectorçš„å¼‚å¸¸ï¼Ÿ ä¸€ä¸ªobjcå¯¹è±¡å¦‚ä½•è¿›è¡Œå†…å­˜å¸ƒå±€ï¼Ÿï¼ˆè€ƒè™‘æœ‰çˆ¶ç±»çš„æƒ…å†µï¼‰ ä¸€ä¸ªobjcå¯¹è±¡çš„isaçš„æŒ‡é’ˆæŒ‡å‘ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ 211234567891011@implementation Son : Father- (id)init{ self = [super init]; if (self) { NSLog(@&quot;%@&quot;, NSStringFromClass([self class])); NSLog(@&quot;%@&quot;, NSStringFromClass([super class])); } return self;}@end runtimeå¦‚ä½•é€šè¿‡selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€ï¼Ÿï¼ˆåˆ†åˆ«è€ƒè™‘ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼‰ ä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾ä¹ˆï¼Ÿ objcä¸­çš„ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«å’Œè”ç³»ï¼Ÿ _objc_msgForward å‡½æ•°æ˜¯åšä»€ä¹ˆçš„ï¼Œç›´æ¥è°ƒç”¨å®ƒå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ runtimeå¦‚ä½•å®ç°weakå˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ èƒ½å¦å‘ç¼–è¯‘åå¾—åˆ°çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿèƒ½å¦å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ runloopå’Œçº¿ç¨‹æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ runloopçš„modeä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ ä»¥+ scheduledTimerWithTimeIntervalâ€¦çš„æ–¹å¼è§¦å‘çš„timer çŒœæƒ³runloopå†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ objcä½¿ç”¨ä»€ä¹ˆæœºåˆ¶ç®¡ç†å¯¹è±¡å†…å­˜ï¼Ÿ ARCé€šè¿‡ä»€ä¹ˆæ–¹å¼å¸®åŠ©å¼€å‘è€…ç®¡ç†å†…å­˜ï¼Ÿ ä¸€ä¸ªautorealeseå¯¹è±¡åœ¨ä»€ä¹ˆæ—¶åˆ»é‡Šæ”¾ï¼Ÿ BAD_ACCESSåœ¨ä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°ï¼Ÿ è‹¹æœæ˜¯å¦‚ä½•å®ç°autoreleasepoolçš„ï¼Ÿ ä½¿ç”¨blockæ—¶ä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿå¼•ç”¨å¾ªç¯ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ åœ¨blockå†…å¦‚ä½•ä¿®æ”¹blockå¤–éƒ¨å˜é‡ï¼Ÿ ä½¿ç”¨ç³»ç»Ÿçš„æŸäº›block apiï¼ˆå¦‚UIViewçš„blockç‰ˆæœ¬å†™åŠ¨ç”»æ—¶ï¼‰ï¼Œæ˜¯å¦ä¹Ÿè€ƒè™‘å¼•ç”¨å¾ªç¯é—®é¢˜ï¼Ÿ GCDçš„é˜Ÿåˆ—ï¼ˆdispatch_queue_tï¼‰åˆ†å“ªä¸¤ç§ç±»å‹ï¼Ÿ å¦‚ä½•ç”¨GCDåŒæ­¥è‹¥å¹²ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Ÿï¼ˆå¦‚æ ¹æ®è‹¥å¹²ä¸ªurlå¼‚æ­¥åŠ è½½å¤šå¼ å›¾ç‰‡ï¼Œç„¶ååœ¨éƒ½ä¸‹è½½å®Œæˆååˆæˆä¸€å¼ æ•´å›¾ï¼‰ dispatch_barrier_asyncçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ è‹¹æœä¸ºä»€ä¹ˆè¦åºŸå¼ƒdispatch_get_current_queueï¼Ÿ ä»¥ä¸‹ä»£ç è¿è¡Œç»“æœå¦‚ä½•ï¼Ÿ 44123456789- (void)viewDidLoad{ [super viewDidLoad]; NSLog(@&quot;1&quot;); dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;);} observerä¸­éœ€è¦å®ç°å“ªä¸ªæ–¹æ³•æ‰èƒ½è·å¾—KVOå›è°ƒï¼Ÿ å¦‚ä½•æ‰‹åŠ¨è§¦å‘ä¸€ä¸ªvalueçš„KVO è‹¥ä¸€ä¸ªç±»æœ‰å®ä¾‹å˜é‡ NSString *_foo ï¼Œè°ƒç”¨setValue:forKey:æ—¶ï¼Œå¯ä»¥ä»¥fooè¿˜æ˜¯ _foo ä½œä¸ºkeyï¼Ÿ KVCçš„keyPathä¸­çš„é›†åˆè¿ç®—ç¬¦å¦‚ä½•ä½¿ç”¨ï¼Ÿ KVCå’ŒKVOçš„keyPathä¸€å®šæ˜¯å±æ€§ä¹ˆï¼Ÿ å¦‚ä½•å…³é—­é»˜è®¤çš„KVOçš„é»˜è®¤å®ç°ï¼Œå¹¶è¿›å…¥è‡ªå®šä¹‰çš„KVOå®ç°ï¼Ÿ appleç”¨ä»€ä¹ˆæ–¹å¼å®ç°å¯¹ä¸€ä¸ªå¯¹è±¡çš„KVOï¼Ÿ IBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak? IBä¸­User Defined Runtime Attributeså¦‚ä½•ä½¿ç”¨ï¼Ÿ å¦‚ä½•è°ƒè¯•BAD_ACCESSé”™è¯¯ lldbï¼ˆgdbï¼‰å¸¸ç”¨çš„è°ƒè¯•å‘½ä»¤ï¼Ÿ 1. é£æ ¼çº é”™é¢˜ä¿®æ”¹å®Œçš„ä»£ç ï¼š ä¿®æ”¹æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œç°ç»™å‡ºä¸€ç§åšç¤ºä¾‹ï¼š 1234567891011121314151617181920// .hæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ä¿®æ”¹å®Œçš„ä»£ç ï¼Œè¿™æ˜¯ç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ï¼Œåé¢ä¼šç»™å‡ºç¬¬äºŒç§ä¿®æ”¹æ–¹æ³•typedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman};@interface CYLUser : NSObject&lt;NSCopying&gt;@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readonly, assign) CYLSex sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;@end ä¸‹é¢å¯¹å…·ä½“ä¿®æ”¹çš„åœ°æ–¹ï¼Œåˆ†ä¸¤éƒ¨åˆ†åšä¸‹ä»‹ç»ï¼šç¡¬ä¼¤éƒ¨åˆ† å’Œ ä¼˜åŒ–éƒ¨åˆ†ã€‚å› ä¸ºç¡¬ä¼¤éƒ¨åˆ†æ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œä¸ºäº†èŠ‚çœå¤§å®¶æ—¶é—´ï¼Œæ”¾åœ¨åé¢è®²ï¼Œå¤§ç¥è¯·ç›´æ¥çœ‹ä¼˜åŒ–éƒ¨åˆ†ã€‚ ä¼˜åŒ–éƒ¨åˆ† enum å»ºè®®ä½¿ç”¨ NS_ENUM å’Œ NS_OPTIONS å®æ¥å®šä¹‰æšä¸¾ç±»å‹ï¼Œå‚è§å®˜æ–¹çš„ Adopting Modern Objective-C ä¸€æ–‡ï¼š 12345//å®šä¹‰ä¸€ä¸ªæšä¸¾ typedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman }; ï¼ˆä»…ä»…è®©æ€§åˆ«åŒ…å«ç”·å’Œå¥³å¯èƒ½å¹¶ä¸ä¸¥è°¨ï¼Œæœ€ä¸¥è°¨çš„åšæ³•å¯ä»¥å‚è€ƒ è¿™é‡Œ ã€‚ï¼‰ age å±æ€§çš„ç±»å‹ï¼šåº”é¿å…ä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œå»ºè®®ä½¿ç”¨ Foundation æ•°æ®ç±»å‹ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š 1234int -&gt; NSIntegerunsigned -&gt; NSUIntegerfloat -&gt; CGFloatåŠ¨ç”»æ—¶é—´ -&gt; NSTimeInterval åŒæ—¶è€ƒè™‘åˆ° age çš„ç‰¹ç‚¹ï¼Œåº”ä½¿ç”¨ NSUInteger ï¼Œè€Œé int ã€‚è¿™æ ·åšçš„æ˜¯åŸºäº64-bit é€‚é…è€ƒè™‘ï¼Œè¯¦æƒ…å¯å‚è€ƒå‡ºé¢˜è€…çš„åšæ–‡ã€Š64-bit Tipsã€‹ã€‚ å¦‚æœå·¥ç¨‹é¡¹ç›®éå¸¸åºå¤§ï¼Œéœ€è¦æ‹†åˆ†æˆä¸åŒçš„æ¨¡å—ï¼Œå¯ä»¥åœ¨ç±»ã€typedefå®å‘½åçš„æ—¶å€™ä½¿ç”¨å‰ç¼€ã€‚ doLogInæ–¹æ³•ä¸åº”å†™åœ¨è¯¥ç±»ä¸­ï¼š è™½ç„¶LogInçš„å‘½åä¸å¤ªæ¸…æ™°ï¼Œä½†ç¬”è€…çŒœæµ‹æ˜¯loginçš„æ„æ€ï¼Œ ï¼ˆå‹˜è¯¯ï¼šLoginæ˜¯åè¯ï¼ŒLogIn æ˜¯åŠ¨è¯ï¼Œéƒ½è¡¨ç¤ºç™»é™†çš„æ„æ€ã€‚è§ï¼š Log in vs. login ï¼‰ç™»å½•æ“ä½œå±äºä¸šåŠ¡é€»è¾‘ï¼Œè§‚å¯Ÿç±»å UserModel ï¼Œä»¥åŠå±æ€§çš„å‘½åæ–¹å¼ï¼Œè¯¥ç±»åº”è¯¥æ˜¯ä¸€ä¸ª Model è€Œä¸æ˜¯ä¸€ä¸ªâ€œ MVVM æ¨¡å¼ä¸‹çš„ ViewModel â€ï¼š æ— è®ºæ˜¯ MVC æ¨¡å¼è¿˜æ˜¯ MVVM æ¨¡å¼ï¼Œä¸šåŠ¡é€»è¾‘éƒ½ä¸åº”å½“å†™åœ¨ Model é‡Œï¼šMVC åº”åœ¨ Cï¼ŒMVVM åº”åœ¨ VMã€‚ ï¼ˆå¦‚æœæŠ›å¼€å‘½åè§„èŒƒï¼Œå‡è®¾è¯¥ç±»çœŸçš„æ˜¯ MVVM æ¨¡å¼é‡Œçš„ ViewModel ï¼Œé‚£ä¹ˆ UserModel è¿™ä¸ªç±»å¯èƒ½å¯¹åº”çš„æ˜¯ç”¨æˆ·æ³¨å†Œé¡µé¢ï¼Œå¦‚æœæœ‰ç‰¹æ®Šçš„ä¸šåŠ¡éœ€æ±‚ï¼Œæ¯”å¦‚ï¼š -logIn å¯¹åº”çš„åº”å½“æ˜¯æ³¨å†Œå¹¶ç™»å½•çš„ä¸€ä¸ª Button ï¼Œå‡ºç° -logIn æ–¹æ³•ä¹Ÿå¯èƒ½æ˜¯åˆç†çš„ã€‚ï¼‰ doLogIn æ–¹æ³•å‘½åä¸è§„èŒƒï¼šæ·»åŠ äº†å¤šä½™çš„åŠ¨è¯å‰ç¼€ã€‚è¯·ç‰¢è®°ï¼š å¦‚æœæ–¹æ³•è¡¨ç¤ºè®©å¯¹è±¡æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼Œä½¿ç”¨åŠ¨è¯æ‰“å¤´æ¥å‘½åï¼Œæ³¨æ„ä¸è¦ä½¿ç”¨ doï¼Œdoes è¿™ç§å¤šä½™çš„å…³é”®å­—ï¼ŒåŠ¨è¯æœ¬èº«çš„æš—ç¤ºå°±è¶³å¤Ÿäº†ã€‚ åº”ä¸º -logIn ï¼ˆæ³¨æ„ï¼š Login æ˜¯åè¯ï¼Œ LogIn æ˜¯åŠ¨è¯ï¼Œéƒ½è¡¨ç¤ºç™»é™†ã€‚ è§ Log in vs. login ï¼‰ -(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;æ–¹æ³•ä¸­ä¸è¦ç”¨ with æ¥è¿æ¥ä¸¤ä¸ªå‚æ•°: withAge: åº”å½“æ¢ä¸ºage:ï¼Œage: å·²ç»è¶³ä»¥æ¸…æ™°è¯´æ˜å‚æ•°çš„ä½œç”¨ï¼Œä¹Ÿä¸å»ºè®®ç”¨ andAge: ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œå³ä½¿æœ‰ç±»ä¼¼ withA:withB: çš„å‘½åéœ€æ±‚ï¼Œä¹Ÿé€šå¸¸æ˜¯ä½¿ç”¨withA:andB: è¿™ç§å‘½åï¼Œç”¨æ¥è¡¨ç¤ºæ–¹æ³•æ‰§è¡Œäº†ä¸¤ä¸ªç›¸å¯¹ç‹¬ç«‹çš„æ“ä½œï¼ˆä»è®¾è®¡ä¸Šæ¥è¯´ï¼Œè¿™æ—¶å€™ä¹Ÿå¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„æ–¹æ³•ï¼‰ï¼Œå®ƒä¸åº”è¯¥ç”¨ä½œé˜æ˜æœ‰å¤šä¸ªå‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢çš„ï¼š 123456//é”™è¯¯ï¼Œä¸è¦ä½¿ç”¨&quot;and&quot;æ¥è¿æ¥å‚æ•°- (int)runModalForDirectory:(NSString *)path andFile:(NSString *)name andTypes:(NSArray *)fileTypes;//é”™è¯¯ï¼Œä¸è¦ä½¿ç”¨&quot;and&quot;æ¥é˜æ˜æœ‰å¤šä¸ªå‚æ•°- (instancetype)initWithName:(CGFloat)width andAge:(CGFloat)height;//æ­£ç¡®ï¼Œä½¿ç”¨&quot;and&quot;æ¥è¡¨ç¤ºä¸¤ä¸ªç›¸å¯¹ç‹¬ç«‹çš„æ“ä½œ- (BOOL)openFile:(NSString *)fullPath withApplication:(NSString *)appName andDeactivate:(BOOL)flag; ç”±äºå­—ç¬¦ä¸²å€¼å¯èƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥è¦æŠŠç›¸å…³å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€å£°æ˜ä¸º copy ã€‚(åŸå› åœ¨ä¸‹æ–‡æœ‰è¯¦ç»†è®ºè¿°ï¼šç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ) â€œæ€§åˆ«â€(sexï¼‰å±æ€§çš„ï¼šè¯¥ç±»ä¸­åªç»™å‡ºäº†ä¸€ç§â€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ç”¨äºè®¾ç½®â€œå§“åâ€(Name)å’Œâ€œå¹´é¾„â€(Age)çš„åˆå§‹å€¼ï¼Œé‚£å¦‚ä½•å¯¹â€œæ€§åˆ«â€(Sexï¼‰åˆå§‹åŒ–ï¼Ÿ Objective-C æœ‰ designated å’Œ secondary åˆå§‹åŒ–æ–¹æ³•çš„è§‚å¿µã€‚ designated åˆå§‹åŒ–æ–¹æ³•æ˜¯æä¾›æ‰€æœ‰çš„å‚æ•°ï¼Œsecondary åˆå§‹åŒ–æ–¹æ³•æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„é»˜è®¤å‚æ•°æ¥è°ƒç”¨ designated åˆå§‹åŒ–æ–¹æ³•çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ä¸¾ä¾‹è¯´æ˜ï¼š 12345678910111213141516171819202122232425// .mæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong//@implementation CYLUser- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex { if(self = [super init]) { _name = [name copy]; _age = age; _sex = sex; } return self;}- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age { return [self initWithName:name age:age sex:nil];}@end ä¸Šé¢çš„ä»£ç ä¸­initWithName:age:sex: å°±æ˜¯ designated åˆå§‹åŒ–æ–¹æ³•ï¼Œå¦å¤–çš„æ˜¯ secondary åˆå§‹åŒ–æ–¹æ³•ã€‚å› ä¸ºä»…ä»…æ˜¯è°ƒç”¨ç±»å®ç°çš„ designated åˆå§‹åŒ–æ–¹æ³•ã€‚ å› ä¸ºå‡ºé¢˜è€…æ²¡æœ‰ç»™å‡º .m æ–‡ä»¶ï¼Œæ‰€ä»¥æœ‰ä¸¤ç§çŒœæµ‹ï¼š1ï¼šæœ¬æ¥æ‰“ç®—åªè®¾è®¡ä¸€ä¸ª designated åˆå§‹åŒ–æ–¹æ³•ï¼Œä½†æ¼æ‰äº†â€œæ€§åˆ«â€(sexï¼‰å±æ€§ã€‚é‚£ä¹ˆæœ€ç»ˆçš„ä¿®æ”¹ä»£ç å°±æ˜¯ä¸Šæ–‡ç»™å‡ºçš„ç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ã€‚2ï¼šä¸æ‰“ç®—åˆå§‹æ—¶åˆå§‹åŒ–â€œæ€§åˆ«â€(sexï¼‰å±æ€§ï¼Œæ‰“ç®—åæœŸå†ä¿®æ”¹ï¼Œå¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆåº”è¯¥æŠŠâ€œæ€§åˆ«â€(sexï¼‰å±æ€§è®¾ä¸º readwrite å±æ€§ï¼Œæœ€ç»ˆç»™å‡ºçš„ä¿®æ”¹ä»£ç åº”è¯¥æ˜¯ï¼š 123456789101112131415161718192021// .hæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ç¬¬äºŒç§ä¿®æ”¹æ–¹æ³•ï¼ˆåŸºäºç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•çš„åŸºç¡€ä¸Šï¼‰typedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman};@interface CYLUser : NSObject&lt;NSCopying&gt;@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readwrite, assign) CYLSex sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age;+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;@end .h ä¸­æš´éœ² designated åˆå§‹åŒ–æ–¹æ³•ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿å­ç±»åŒ– ï¼ˆæƒ³äº†è§£æ›´å¤šï¼Œè¯·æˆ³â€“ã€‹ ã€Šç¦…ä¸ Objective-C ç¼–ç¨‹è‰ºæœ¯ ï¼ˆZen and the Art of the Objective-C Craftsmanship ä¸­æ–‡ç¿»è¯‘ï¼‰ã€‹ã€‚ï¼‰ æŒ‰ç…§æ¥å£è®¾è®¡çš„æƒ¯ä¾‹ï¼Œå¦‚æœè®¾è®¡äº†â€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ï¼Œä¹Ÿåº”å½“æ­é…ä¸€ä¸ªå¿«æ·æ„é€ æ–¹æ³•ã€‚è€Œå¿«æ·æ„é€ æ–¹æ³•çš„è¿”å›å€¼ï¼Œå»ºè®®ä¸º instancetypeï¼Œä¸ºä¿æŒä¸€è‡´æ€§ï¼Œinit æ–¹æ³•å’Œå¿«æ·æ„é€ æ–¹æ³•çš„è¿”å›ç±»å‹æœ€å¥½éƒ½ç”¨ instancetypeã€‚ å¦‚æœåŸºäºç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ï¼šæ—¢ç„¶è¯¥ç±»ä¸­å·²ç»æœ‰ä¸€ä¸ªâ€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ï¼Œç”¨äºè®¾ç½®â€œå§“åâ€(Name)ã€â€œå¹´é¾„â€(Age)å’Œâ€œæ€§åˆ«â€(Sexï¼‰çš„åˆå§‹å€¼:é‚£ä¹ˆåœ¨è®¾è®¡å¯¹åº” @property æ—¶å°±åº”è¯¥å°½é‡ä½¿ç”¨ä¸å¯å˜çš„å¯¹è±¡ï¼šå…¶ä¸‰ä¸ªå±æ€§éƒ½åº”è¯¥è®¾ä¸ºâ€œåªè¯»â€ã€‚ç”¨åˆå§‹åŒ–æ–¹æ³•è®¾ç½®å¥½å±æ€§å€¼ä¹‹åï¼Œå°±ä¸èƒ½å†æ”¹å˜äº†ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä»éœ€å£°æ˜å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€ã€‚äºæ˜¯å¯ä»¥æŠŠå±æ€§çš„å®šä¹‰æ”¹æˆè¿™æ · 123@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readonly, assign) CYLSex sex; ç”±äºæ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶åˆ›å»ºå¯¹åº”çš„â€œè®¾ç½®æ–¹æ³•â€ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å†™ä¸Šè¿™äº›å±æ€§çš„è¯­ä¹‰ï¼Œä»¥æ­¤è¡¨æ˜åˆå§‹åŒ–æ–¹æ³•åœ¨è®¾ç½®è¿™äº›å±æ€§å€¼æ—¶æ‰€ç”¨çš„æ–¹å¼ã€‚è¦æ˜¯ä¸å†™æ˜è¯­ä¹‰çš„è¯ï¼Œè¯¥ç±»çš„è°ƒç”¨è€…å°±ä¸çŸ¥é“åˆå§‹åŒ–æ–¹æ³•é‡Œä¼šæ‹·è´è¿™äº›å±æ€§ï¼Œä»–ä»¬æœ‰å¯èƒ½ä¼šåœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ä¹‹å‰è‡ªè¡Œæ‹·è´å±æ€§å€¼ã€‚è¿™ç§æ“ä½œå¤šä½™è€Œä¸”ä½æ•ˆã€‚ initUserModelWithUserName å¦‚æœæ”¹ä¸º initWithName ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚ UserModel å¦‚æœæ”¹ä¸º User ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚ UserSexå¦‚æœæ”¹ä¸ºSex ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚ ç¬¬äºŒä¸ª @property ä¸­ assign å’Œ nonatomic è°ƒæ¢ä½ç½®ã€‚æ¨èæŒ‰ç…§ä¸‹é¢çš„æ ¼å¼æ¥å®šä¹‰å±æ€§ 1@property (nonatomic, readwrite, copy) NSString *name; å±æ€§çš„å‚æ•°åº”è¯¥æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ’åˆ—ï¼š åŸå­æ€§ï¼Œè¯»å†™ å’Œ å†…å­˜ç®¡ç†ã€‚ è¿™æ ·åšä½ çš„å±æ€§æ›´å®¹æ˜“ä¿®æ”¹æ­£ç¡®ï¼Œå¹¶ä¸”æ›´å¥½é˜…è¯»ã€‚è¿™åœ¨ã€Šç¦…ä¸Objective-Cç¼–ç¨‹è‰ºæœ¯ &gt;ã€‹é‡Œæœ‰ä»‹ç»ã€‚è€Œä¸”ä¹ æƒ¯ä¸Šä¿®æ”¹æŸä¸ªå±æ€§çš„ä¿®é¥°ç¬¦æ—¶ï¼Œä¸€èˆ¬ä»å±æ€§åä»å³å‘å·¦æœç´¢éœ€è¦ä¿®åŠ¨çš„ä¿®é¥°ç¬¦ã€‚æœ€å¯èƒ½ä»æœ€å³è¾¹å¼€å§‹ä¿®æ”¹è¿™äº›å±æ€§çš„ä¿®é¥°ç¬¦ï¼Œæ ¹æ®ç»éªŒè¿™äº›ä¿®é¥°ç¬¦è¢«ä¿®æ”¹çš„å¯èƒ½æ€§ä»é«˜åˆ°åº•åº”ä¸ºï¼šå†…å­˜ç®¡ç† &gt; è¯»å†™æƒé™ &gt;åŸå­æ“ä½œã€‚ ç¡¬ä¼¤éƒ¨åˆ† åœ¨-å’Œ(void)ä¹‹é—´åº”è¯¥æœ‰ä¸€ä¸ªç©ºæ ¼ enum ä¸­é©¼å³°å‘½åæ³•å’Œä¸‹åˆ’çº¿å‘½åæ³•æ··ç”¨é”™è¯¯ï¼šæšä¸¾ç±»å‹çš„å‘½åè§„åˆ™å’Œå‡½æ•°çš„å‘½åè§„åˆ™ç›¸åŒï¼šå‘½åæ—¶ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œå‹¿ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•ã€‚ enum å·¦æ‹¬å·å‰åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œæˆ–è€…å°†å·¦æ‹¬å·æ¢åˆ°ä¸‹ä¸€è¡Œ enum å³æ‹¬å·ååŠ ä¸€ä¸ªç©ºæ ¼ UserModel :NSObject åº”ä¸ºUserModel : NSObjectï¼Œä¹Ÿå°±æ˜¯:å³ä¾§å°‘äº†ä¸€ä¸ªç©ºæ ¼ã€‚ @interface ä¸ @property å±æ€§å£°æ˜ä¸­é—´åº”å½“é—´éš”ä¸€è¡Œã€‚ ä¸¤ä¸ªæ–¹æ³•å®šä¹‰ä¹‹é—´ä¸éœ€è¦æ¢è¡Œï¼Œæœ‰æ—¶ä¸ºäº†åŒºåˆ†æ–¹æ³•çš„åŠŸèƒ½ä¹Ÿå¯é—´éš”ä¸€è¡Œï¼Œä½†ç¤ºä¾‹ä»£ç ä¸­é—´éš”äº†ä¸¤è¡Œã€‚ -(id)initUserModelWithUserName: (NSString*)name withAge:(int)age; æ–¹æ³•ä¸­æ–¹æ³•åä¸å‚æ•°ä¹‹é—´å¤šäº†ç©ºæ ¼ã€‚è€Œä¸” - ä¸ (id) ä¹‹é—´å°‘äº†ç©ºæ ¼ã€‚ -(id)initUserModelWithUserName: (NSString*)name withAge:(int)age; æ–¹æ³•ä¸­æ–¹æ³•åä¸å‚æ•°ä¹‹é—´å¤šäº†ç©ºæ ¼ï¼š(NSString*)name å‰å¤šäº†ç©ºæ ¼ã€‚ -(id)initUserModelWithUserName: (NSString*)name withAge:(int)age; æ–¹æ³•ä¸­ (NSString*)name,åº”ä¸º (NSString *)nameï¼Œå°‘äº†ç©ºæ ¼ã€‚ doLogInæ–¹æ³•ä¸­çš„ `LogIn` å‘½åä¸æ¸…æ™°ï¼šç¬”è€…çŒœæµ‹æ˜¯loginçš„æ„æ€ï¼Œåº”è¯¥æ˜¯ç²—å¿ƒæ‰‹è¯¯é€ æˆçš„ã€‚ ï¼ˆå‹˜è¯¯ï¼š `Login` æ˜¯åè¯ï¼Œ `LogIn` æ˜¯åŠ¨è¯ï¼Œéƒ½è¡¨ç¤ºç™»é™†çš„æ„æ€ã€‚è§ï¼š [ ***Log in vs. login*** ](https://grammarist.com/spelling/log-in-login/)ï¼‰ 2. ä»€ä¹ˆæƒ…å†µä½¿ç”¨ weak å…³é”®å­—ï¼Œç›¸æ¯” assign æœ‰ä»€ä¹ˆä¸åŒï¼Ÿä»€ä¹ˆæƒ…å†µä½¿ç”¨ weak å…³é”®å­—ï¼Ÿ åœ¨ ARC ä¸­,åœ¨æœ‰å¯èƒ½å‡ºç°å¾ªç¯å¼•ç”¨çš„æ—¶å€™,å¾€å¾€è¦é€šè¿‡è®©å…¶ä¸­ä¸€ç«¯ä½¿ç”¨ weak æ¥è§£å†³,æ¯”å¦‚: delegate ä»£ç†å±æ€§ è‡ªèº«å·²ç»å¯¹å®ƒè¿›è¡Œä¸€æ¬¡å¼ºå¼•ç”¨,æ²¡æœ‰å¿…è¦å†å¼ºå¼•ç”¨ä¸€æ¬¡,æ­¤æ—¶ä¹Ÿä¼šä½¿ç”¨ weak,è‡ªå®šä¹‰ IBOutlet æ§ä»¶å±æ€§ä¸€èˆ¬ä¹Ÿä½¿ç”¨ weakï¼›å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨strongã€‚åœ¨ä¸‹æ–‡ä¹Ÿæœ‰è®ºè¿°ï¼šã€ŠIBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak?ã€‹ ä¸åŒç‚¹ï¼š weak æ­¤ç‰¹è´¨è¡¨æ˜è¯¥å±æ€§å®šä¹‰äº†ä¸€ç§â€œéæ‹¥æœ‰å…³ç³»â€ (nonowning relationship)ã€‚ä¸ºè¿™ç§å±æ€§è®¾ç½®æ–°å€¼æ—¶ï¼Œè®¾ç½®æ–¹æ³•æ—¢ä¸ä¿ç•™æ–°å€¼ï¼Œä¹Ÿä¸é‡Šæ”¾æ—§å€¼ã€‚æ­¤ç‰¹è´¨åŒassignç±»ä¼¼ï¼Œç„¶è€Œåœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚è€Œ assign çš„â€œè®¾ç½®æ–¹æ³•â€åªä¼šæ‰§è¡Œé’ˆå¯¹â€œçº¯é‡ç±»å‹â€ (scalar typeï¼Œä¾‹å¦‚ CGFloat æˆ–NSlnteger ç­‰)çš„ç®€å•èµ‹å€¼æ“ä½œã€‚ assign å¯ä»¥ç”¨é OC å¯¹è±¡,è€Œ weak å¿…é¡»ç”¨äº OC å¯¹è±¡ 3. æ€ä¹ˆç”¨ copy å…³é”®å­—ï¼Ÿç”¨é€”ï¼š NSStringã€NSArrayã€NSDictionary ç­‰ç­‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼šNSMutableStringã€NSMutableArrayã€NSMutableDictionaryï¼› block ä¹Ÿç»å¸¸ä½¿ç”¨ copy å…³é”®å­—ï¼Œå…·ä½“åŸå› è§å®˜æ–¹æ–‡æ¡£ï¼šObjects Use Properties to Keep Track of Blocksï¼š block ä½¿ç”¨ copy æ˜¯ä» MRC é—ç•™ä¸‹æ¥çš„â€œä¼ ç»Ÿâ€,åœ¨ MRC ä¸­,æ–¹æ³•å†…éƒ¨çš„ block æ˜¯åœ¨æ ˆåŒºçš„,ä½¿ç”¨ copy å¯ä»¥æŠŠå®ƒæ”¾åˆ°å †åŒº.åœ¨ ARC ä¸­å†™ä¸å†™éƒ½è¡Œï¼šå¯¹äº block ä½¿ç”¨ copy è¿˜æ˜¯ strong æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†å†™ä¸Š copy ä¹Ÿæ— ä¼¤å¤§é›…ï¼Œè¿˜èƒ½æ—¶åˆ»æé†’æˆ‘ä»¬ï¼šç¼–è¯‘å™¨è‡ªåŠ¨å¯¹ block è¿›è¡Œäº† copy æ“ä½œã€‚å¦‚æœä¸å†™ copy ï¼Œè¯¥ç±»çš„è°ƒç”¨è€…æœ‰å¯èƒ½ä¼šå¿˜è®°æˆ–è€…æ ¹æœ¬ä¸çŸ¥é“â€œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¯¹ block è¿›è¡Œäº† copy æ“ä½œâ€ï¼Œä»–ä»¬æœ‰å¯èƒ½ä¼šåœ¨è°ƒç”¨ä¹‹å‰è‡ªè¡Œæ‹·è´å±æ€§å€¼ã€‚è¿™ç§æ“ä½œå¤šä½™è€Œä½æ•ˆã€‚ä½ ä¹Ÿè®¸ä¼šæ„Ÿè§‰æˆ‘è¿™ç§åšæ³•æœ‰äº›æ€ªå¼‚ï¼Œä¸éœ€è¦å†™ä¾ç„¶å†™ã€‚å¦‚æœä½ è¿™æ ·æƒ³ï¼Œå…¶å®æ˜¯ä½ â€œæ—¥ç”¨è€Œä¸çŸ¥â€ï¼Œä½ å¹³æ—¶å¼€å‘ä¸­æ˜¯ç»å¸¸åœ¨ç”¨æˆ‘è¯´çš„è¿™ç§åšæ³•çš„ï¼Œæ¯”å¦‚ä¸‹é¢çš„å±æ€§ä¸å†™copyä¹Ÿè¡Œï¼Œä½†æ˜¯ä½ ä¼šé€‰æ‹©å†™è¿˜æ˜¯ä¸å†™å‘¢ï¼Ÿ 12345678910@property (nonatomic, copy) NSString *userId;- (instancetype)initWithUserId:(NSString *)userId { self = [super init]; if (!self) { return nil; } _userId = [userId copy]; return self;} ä¸‹é¢åšä¸‹è§£é‡Šï¼š copy æ­¤ç‰¹è´¨æ‰€è¡¨è¾¾çš„æ‰€å±å…³ç³»ä¸ strong ç±»ä¼¼ã€‚ç„¶è€Œè®¾ç½®æ–¹æ³•å¹¶ä¸ä¿ç•™æ–°å€¼ï¼Œè€Œæ˜¯å°†å…¶â€œæ‹·è´â€ (copy)ã€‚å½“å±æ€§ç±»å‹ä¸º NSString æ—¶ï¼Œç»å¸¸ç”¨æ­¤ç‰¹è´¨æ¥ä¿æŠ¤å…¶å°è£…æ€§ï¼Œå› ä¸ºä¼ é€’ç»™è®¾ç½®æ–¹æ³•çš„æ–°å€¼æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ª NSMutableString ç±»çš„å®ä¾‹ã€‚è¿™ä¸ªç±»æ˜¯ NSString çš„å­ç±»ï¼Œè¡¨ç¤ºä¸€ç§å¯ä¿®æ”¹å…¶å€¼çš„å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶è‹¥æ˜¯ä¸æ‹·è´å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè®¾ç½®å®Œå±æ€§ä¹‹åï¼Œå­—ç¬¦ä¸²çš„å€¼å°±å¯èƒ½ä¼šåœ¨å¯¹è±¡ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹é­äººæ›´æ”¹ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å°±è¦æ‹·è´ä¸€ä»½â€œä¸å¯å˜â€ (immutable)çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ã€‚åªè¦å®ç°å±æ€§æ‰€ç”¨çš„å¯¹è±¡æ˜¯â€œå¯å˜çš„â€ (mutable)ï¼Œå°±åº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚ ç”¨ @property å£°æ˜ NSStringã€NSArrayã€NSDictionary ç»å¸¸ä½¿ç”¨ copy å…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼šNSMutableStringã€NSMutableArrayã€NSMutableDictionaryï¼Œä»–ä»¬ä¹‹é—´å¯èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œä¸ºç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ï¼Œåº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚ è¯¥é—®é¢˜åœ¨ä¸‹æ–‡ä¸­ä¹Ÿæœ‰è®ºè¿°ï¼šç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ 4. è¿™ä¸ªå†™æ³•ä¼šå‡ºä»€ä¹ˆé—®é¢˜ï¼š @property (copy) NSMutableArray *array;ä¸¤ä¸ªé—®é¢˜ï¼š1ã€æ·»åŠ ,åˆ é™¤,ä¿®æ”¹æ•°ç»„å†…çš„å…ƒç´ çš„æ—¶å€™,ç¨‹åºä¼šå› ä¸ºæ‰¾ä¸åˆ°å¯¹åº”çš„æ–¹æ³•è€Œå´©æºƒ.å› ä¸º copy å°±æ˜¯å¤åˆ¶ä¸€ä¸ªä¸å¯å˜ NSArray çš„å¯¹è±¡ï¼›2ã€ä½¿ç”¨äº† atomic å±æ€§ä¼šä¸¥é‡å½±å“æ€§èƒ½ ï¼› ç¬¬1æ¡çš„ç›¸å…³åŸå› åœ¨ä¸‹æ–‡ä¸­æœ‰è®ºè¿°ã€Šç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨ copy å…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿã€‹ ä»¥åŠä¸Šæ–‡ã€Šæ€ä¹ˆç”¨ copy å…³é”®å­—ï¼Ÿã€‹ä¹Ÿæœ‰è®ºè¿°ã€‚ æ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒ 123456// .hæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒ@property (nonatomic, copy) NSMutableArray *mutableArray; 12345678// .mæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒNSMutableArray *array = [NSMutableArray arrayWithObjects:@1,@2,nil];self.mutableArray = array;[self.mutableArray removeObjectAtIndex:0]; æ¥ä¸‹æ¥å°±ä¼šå¥”æºƒï¼š 1-[__NSArrayI removeObjectAtIndex:]: unrecognized selector sent to instance 0x7fcd1bc30460 ç¬¬2æ¡åŸå› ï¼Œå¦‚ä¸‹ï¼š è¯¥å±æ€§ä½¿ç”¨äº†è‡ªæ—‹é”ï¼Œä¼šåœ¨åˆ›å»ºæ—¶ç”Ÿæˆä¸€äº›é¢å¤–çš„ä»£ç ç”¨äºå¸®åŠ©ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºï¼Œè¿™ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œé€šè¿‡å£°æ˜ nonatomic å¯ä»¥èŠ‚çœè¿™äº›è™½ç„¶å¾ˆå°ä½†æ˜¯ä¸å¿…è¦é¢å¤–å¼€é”€ã€‚ åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±ç¼–è¯‘å™¨æ‰€åˆæˆçš„æ–¹æ³•ä¼šé€šè¿‡é”å®šæœºåˆ¶ç¡®ä¿å…¶åŸå­æ€§(atomicity)ã€‚å¦‚æœå±æ€§å…·å¤‡ nonatomic ç‰¹è´¨ï¼Œåˆ™ä¸ä½¿ç”¨è‡ªæ—‹é”ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡æ²¡æœ‰åä¸ºâ€œatomicâ€çš„ç‰¹è´¨(å¦‚æœæŸå±æ€§ä¸å…·å¤‡ nonatomic ç‰¹è´¨ï¼Œé‚£å®ƒå°±æ˜¯â€œåŸå­çš„â€(atomic))ã€‚ åœ¨iOSå¼€å‘ä¸­ï¼Œä½ ä¼šå‘ç°ï¼Œå‡ ä¹æ‰€æœ‰å±æ€§éƒ½å£°æ˜ä¸º nonatomicã€‚ ä¸€èˆ¬æƒ…å†µä¸‹å¹¶ä¸è¦æ±‚å±æ€§å¿…é¡»æ˜¯â€œåŸå­çš„â€ï¼Œå› ä¸ºè¿™å¹¶ä¸èƒ½ä¿è¯â€œçº¿ç¨‹å®‰å…¨â€ ( thread safety)ï¼Œè‹¥è¦å®ç°â€œçº¿ç¨‹å®‰å…¨â€çš„æ“ä½œï¼Œè¿˜éœ€é‡‡ç”¨æ›´ä¸ºæ·±å±‚çš„é”å®šæœºåˆ¶æ‰è¡Œã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨è¿ç»­å¤šæ¬¡è¯»å–æŸå±æ€§å€¼çš„è¿‡ç¨‹ä¸­æœ‰åˆ«çš„çº¿ç¨‹åœ¨åŒæ—¶æ”¹å†™è¯¥å€¼ï¼Œé‚£ä¹ˆå³ä¾¿å°†å±æ€§å£°æ˜ä¸º atomicï¼Œä¹Ÿè¿˜æ˜¯ä¼šè¯»åˆ°ä¸åŒçš„å±æ€§å€¼ã€‚ å› æ­¤ï¼Œå¼€å‘iOSç¨‹åºæ—¶ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ nonatomic å±æ€§ã€‚ä½†æ˜¯åœ¨å¼€å‘ Mac OS X ç¨‹åºæ—¶ï¼Œä½¿ç”¨ atomic å±æ€§é€šå¸¸éƒ½ä¸ä¼šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚ 5. å¦‚ä½•è®©è‡ªå·±çš„ç±»ç”¨ copy ä¿®é¥°ç¬¦ï¼Ÿå¦‚ä½•é‡å†™å¸¦ copy å…³é”®å­—çš„ setterï¼Ÿ è‹¥æƒ³ä»¤è‡ªå·±æ‰€å†™çš„å¯¹è±¡å…·æœ‰æ‹·è´åŠŸèƒ½ï¼Œåˆ™éœ€å®ç° NSCopying åè®®ã€‚å¦‚æœè‡ªå®šä¹‰çš„å¯¹è±¡åˆ†ä¸ºå¯å˜ç‰ˆæœ¬ä¸ä¸å¯å˜ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±è¦åŒæ—¶å®ç° NSCopying ä¸ NSMutableCopying åè®®ã€‚ å…·ä½“æ­¥éª¤ï¼š éœ€å£°æ˜è¯¥ç±»éµä» NSCopying åè®® å®ç° NSCopying åè®®ã€‚è¯¥åè®®åªæœ‰ä¸€ä¸ªæ–¹æ³•: 1- (id)copyWithZone:(NSZone *)zone; æ³¨æ„ï¼šä¸€æåˆ°è®©è‡ªå·±çš„ç±»ç”¨ copy ä¿®é¥°ç¬¦ï¼Œæˆ‘ä»¬æ€»æ˜¯æƒ³è¦†å†™copyæ–¹æ³•ï¼Œå…¶å®çœŸæ­£éœ€è¦å®ç°çš„å´æ˜¯ â€œcopyWithZoneâ€ æ–¹æ³•ã€‚ ä»¥ç¬¬ä¸€é¢˜çš„ä»£ç ä¸ºä¾‹ï¼š 1234567891011121314151617181920// .hæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ä¿®æ”¹å®Œçš„ä»£ç typedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman};@interface CYLUser : NSObject&lt;NSCopying&gt;@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readonly, assign) CYLSex sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;@end ç„¶åå®ç°åè®®ä¸­è§„å®šçš„æ–¹æ³•ï¼š 1234567- (id)copyWithZone:(NSZone *)zone { CYLUser *copy = [[[self class] allocWithZone:zone] initWithName:_name age:_age sex:_sex]; return copy;} ä½†åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œä¸å¯èƒ½è¿™ä¹ˆç®€å•ï¼Œé‡åˆ°æ›´å¤æ‚ä¸€ç‚¹ï¼Œæ¯”å¦‚ç±»å¯¹è±¡ä¸­çš„æ•°æ®ç»“æ„å¯èƒ½å¹¶æœªåœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­è®¾ç½®å¥½ï¼Œéœ€è¦å¦è¡Œè®¾ç½®ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ CYLUser ä¸­å«æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œä¸å…¶ä»– CYLUser å¯¹è±¡å»ºç«‹æˆ–è§£é™¤æœ‹å‹å…³ç³»çš„é‚£äº›æ–¹æ³•éƒ½éœ€è¦æ“ä½œè¿™ä¸ªæ•°ç»„ã€‚é‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¾—æŠŠè¿™ä¸ªåŒ…å«æœ‹å‹å¯¹è±¡çš„æ•°ç»„ä¹Ÿä¸€å¹¶æ‹·è´è¿‡æ¥ã€‚ä¸‹é¢åˆ—å‡ºäº†å®ç°æ­¤åŠŸèƒ½æ‰€éœ€çš„å…¨éƒ¨ä»£ç : 12345678910111213141516171819202122// .hæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ä»¥ç¬¬ä¸€é¢˜ã€Šé£æ ¼çº é”™é¢˜ã€‹é‡Œçš„ä»£ç ä¸ºä¾‹typedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman};@interface CYLUser : NSObject&lt;NSCopying&gt;@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readonly, assign) CYLSex sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;- (void)addFriend:(CYLUser *)user;- (void)removeFriend:(CYLUser *)user;@end // .mæ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253// .mæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong//@implementation CYLUser { NSMutableSet *_friends;}- (void)setName:(NSString *)name { _name = [name copy];}- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex { if(self = [super init]) { _name = [name copy]; _age = age; _sex = sex; _friends = [[NSMutableSet alloc] init]; } return self;}- (void)addFriend:(CYLUser *)user { [_friends addObject:user];}- (void)removeFriend:(CYLUser *)user { [_friends removeObject:user];}- (id)copyWithZone:(NSZone *)zone { CYLUser *copy = [[[self class] allocWithZone:zone] initWithName:_name age:_age sex:_sex]; copy-&gt;_friends = [_friends mutableCopy]; return copy;}- (id)deepCopy { CYLUser *copy = [[[self class] alloc] initWithName:_name age:_age sex:_sex]; copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends copyItems:YES]; return copy;}@end ä»¥ä¸Šåšæ³•èƒ½æ»¡è¶³åŸºæœ¬çš„éœ€æ±‚ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºé™·ï¼š å¦‚æœä½ æ‰€å†™çš„å¯¹è±¡éœ€è¦æ·±æ‹·è´ï¼Œé‚£ä¹ˆå¯è€ƒè™‘æ–°å¢ä¸€ä¸ªä¸“é—¨æ‰§è¡Œæ·±æ‹·è´çš„æ–¹æ³•ã€‚ ã€æ³¨ï¼šæ·±æµ…æ‹·è´çš„æ¦‚å¿µï¼Œåœ¨ä¸‹æ–‡ä¸­æœ‰ä»‹ç»ï¼Œè¯¦è§ä¸‹æ–‡çš„ï¼šç”¨@propertyå£°æ˜çš„ NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨ copy å…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨ strong å…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿã€‘ åœ¨ä¾‹å­ä¸­ï¼Œå­˜æ”¾æœ‹å‹å¯¹è±¡çš„ set æ˜¯ç”¨ â€œcopyWithZone:â€ æ–¹æ³•æ¥æ‹·è´çš„ï¼Œè¿™ç§æµ…æ‹·è´æ–¹å¼ä¸ä¼šé€ä¸ªå¤åˆ¶ set ä¸­çš„å…ƒç´ ã€‚è‹¥éœ€è¦æ·±æ‹·è´çš„è¯ï¼Œåˆ™å¯åƒä¸‹é¢è¿™æ ·ï¼Œç¼–å†™ä¸€ä¸ªä¸“ä¾›æ·±æ‹·è´æ‰€ç”¨çš„æ–¹æ³•: 123456789- (id)deepCopy { CYLUser *copy = [[[self class] alloc] initWithName:_name age:_age sex:_sex]; copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends copyItems:YES]; return copy;} è‡³äºå¦‚ä½•é‡å†™å¸¦ copy å…³é”®å­—çš„ setterè¿™ä¸ªé—®é¢˜ï¼Œ å¦‚æœæŠ›å¼€æœ¬ä¾‹æ¥å›ç­”çš„è¯ï¼Œå¦‚ä¸‹ï¼š 1234- (void)setName:(NSString *)name { //[_name release]; _name = [name copy];} ä¸è¿‡ä¹Ÿæœ‰äº‰è®®ï¼Œæœ‰äººè¯´â€œè‹¹æœå¦‚æœåƒä¸‹é¢è¿™æ ·å¹²ï¼Œæ˜¯ä¸æ˜¯æ•ˆç‡ä¼šé«˜ä¸€äº›ï¼Ÿâ€ 123456- (void)setName:(NSString *)name { if (_name != name) { //[_name release];//MRC _name = [name copy]; }} è¿™æ ·çœŸå¾—é«˜æ•ˆå—ï¼Ÿä¸è§å¾—ï¼è¿™ç§å†™æ³•â€œçœ‹ä¸Šå»å¾ˆç¾ã€å¾ˆåˆç†â€ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œå®ƒæ›´åƒä¸‹å›¾é‡Œçš„åšæ³•ï¼š å…‹å¼ºæ€»ç†è¿™æ ·è¯„ä»·ä½ çš„ä»£ç é£æ ¼ï¼š æˆ‘å’Œæ€»ç†çš„æ„è§åŸºæœ¬ä¸€è‡´ï¼š è€ç™¾å§“ copy ä¸€ä¸‹ï¼Œå’‹å°±è¿™ä¹ˆéš¾ï¼Ÿ ä½ å¯èƒ½ä¼šè¯´ï¼š ä¹‹æ‰€ä»¥åœ¨è¿™é‡Œåšifåˆ¤æ–­ è¿™ä¸ªæ“ä½œï¼šæ˜¯å› ä¸ºä¸€ä¸ª if å¯èƒ½é¿å…ä¸€ä¸ªè€—æ—¶çš„copyï¼Œè¿˜æ˜¯å¾ˆåˆ’ç®—çš„ã€‚(åœ¨åˆšåˆšè®²çš„ï¼šã€Šå¦‚ä½•è®©è‡ªå·±çš„ç±»ç”¨ copy ä¿®é¥°ç¬¦ï¼Ÿã€‹é‡Œçš„é‚£ç§å¤æ‚çš„copyï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸º â€œè€—æ—¶çš„copyâ€ï¼Œä½†æ˜¯å¯¹ NSString çš„ copy è¿˜ç§°ä¸ä¸Šã€‚) ä½†æ˜¯ä½ æœ‰æ²¡æœ‰è€ƒè™‘è¿‡ä»£ä»·ï¼š ä½ æ¯æ¬¡è°ƒç”¨ setX: éƒ½ä¼šåš if åˆ¤æ–­ï¼Œè¿™ä¼šè®© setX: å˜æ…¢ï¼Œå¦‚æœä½ åœ¨ setX:å†™äº†ä¸€ä¸²å¤æ‚çš„ if+elseif+elseif+... åˆ¤æ–­ï¼Œå°†ä¼šæ›´æ…¢ã€‚ è¦å›ç­”â€œå“ªä¸ªæ•ˆç‡ä¼šé«˜ä¸€äº›ï¼Ÿâ€è¿™ä¸ªé—®é¢˜ï¼Œä¸èƒ½è„±ç¦»å®é™…å¼€å‘ï¼Œå°±ç®— copy æ“ä½œååˆ†è€—æ—¶ï¼Œif åˆ¤æ–­ä¹Ÿä¸è§å¾—ä¸€å®šä¼šæ›´å¿«ï¼Œé™¤éä½ æŠŠä¸€ä¸ªâ€œ @propertyä»–å½“å‰çš„å€¼ â€èµ‹ç»™äº†ä»–è‡ªå·±ï¼Œä»£ç çœ‹èµ·æ¥å°±åƒï¼š 12[a setX:x1];[a setX:x1]; //ä½ ç¡®å®šä½ è¦è¿™ä¹ˆå¹²ï¼Ÿä¸å…¶åœ¨setterä¸­åˆ¤æ–­ï¼Œä¸ºä»€ä¹ˆä¸æŠŠä»£ç å†™å¥½ï¼Ÿ æˆ–è€… 1[a setX:[a x]]; //é˜Ÿå‹å’†å“®é“ï¼šä½ åœ¨å¹²å˜›ï¼Ÿï¼ï¼ ä¸è¦åœ¨ setter é‡Œè¿›è¡Œåƒ if(_obj != newObj) è¿™æ ·çš„åˆ¤æ–­ã€‚ï¼ˆè¯¥è§‚ç‚¹å‚è€ƒé“¾æ¥ï¼š How To Write Cocoa Object Settersï¼š Principle 3: Only Optimize After You Measure ï¼‰ ä»€ä¹ˆæƒ…å†µä¼šåœ¨ copy setter é‡Œåš if åˆ¤æ–­ï¼Ÿä¾‹å¦‚ï¼Œè½¦é€Ÿå¯èƒ½å°±æœ‰æœ€é«˜é€Ÿçš„é™åˆ¶ï¼Œè½¦é€Ÿä¹Ÿä¸å¯èƒ½å‡ºç°è´Ÿå€¼ï¼Œå¦‚æœè½¦å­çš„æœ€é«˜é€Ÿä¸º300ï¼Œåˆ™ setter çš„æ–¹æ³•å°±è¦æ”¹å†™æˆè¿™æ ·ï¼š 12345-(void)setSpeed:(int)_speed{ if(_speed &lt; 0) speed = 0; if(_speed &gt; 300) speed = 300; _speed = speed;} å›åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œå¦‚æœå•å•å°±ä¸Šæ–‡çš„ä»£ç è€Œè¨€ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¹Ÿä¸èƒ½é‡å†™ name çš„ setter ï¼šç”±äºæ˜¯ name æ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶åˆ›å»ºå¯¹åº”çš„â€œè®¾ç½®æ–¹æ³•â€ï¼Œç”¨åˆå§‹åŒ–æ–¹æ³•è®¾ç½®å¥½å±æ€§å€¼ä¹‹åï¼Œå°±ä¸èƒ½å†æ”¹å˜äº†ã€‚ï¼ˆ åœ¨æœ¬ä¾‹ä¸­ï¼Œä¹‹æ‰€ä»¥è¿˜è¦å£°æ˜å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€â€“copyï¼Œæ˜¯å› ä¸ºï¼šå¦‚æœä¸å†™ copyï¼Œè¯¥ç±»çš„è°ƒç”¨è€…å°±ä¸çŸ¥é“åˆå§‹åŒ–æ–¹æ³•é‡Œä¼šæ‹·è´è¿™äº›å±æ€§ï¼Œä»–ä»¬æœ‰å¯èƒ½ä¼šåœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ä¹‹å‰è‡ªè¡Œæ‹·è´å±æ€§å€¼ã€‚è¿™ç§æ“ä½œå¤šä½™è€Œä½æ•ˆï¼‰ã€‚ é‚£å¦‚ä½•ç¡®ä¿ name è¢« copyï¼Ÿåœ¨åˆå§‹åŒ–æ–¹æ³•(initializer)ä¸­åšï¼š 1234567891011- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex { if(self = [super init]) { _name = [name copy]; _age = age; _sex = sex; _friends = [[NSMutableSet alloc] init]; } return self;} 6. @property çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿivarã€getterã€setter æ˜¯å¦‚ä½•ç”Ÿæˆå¹¶æ·»åŠ åˆ°è¿™ä¸ªç±»ä¸­çš„@property çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ @property = ivar + getter + setter; ä¸‹é¢è§£é‡Šä¸‹ï¼š â€œå±æ€§â€ (property)æœ‰ä¸¤å¤§æ¦‚å¿µï¼šivarï¼ˆå®ä¾‹å˜é‡ï¼‰ã€å­˜å–æ–¹æ³•ï¼ˆaccess method ï¼ getter + setterï¼‰ã€‚ â€œå±æ€§â€ (property)ä½œä¸º Objective-C çš„ä¸€é¡¹ç‰¹æ€§ï¼Œä¸»è¦çš„ä½œç”¨å°±åœ¨äºå°è£…å¯¹è±¡ä¸­çš„æ•°æ®ã€‚ Objective-C å¯¹è±¡é€šå¸¸ä¼šæŠŠå…¶æ‰€éœ€è¦çš„æ•°æ®ä¿å­˜ä¸ºå„ç§å®ä¾‹å˜é‡ã€‚å®ä¾‹å˜é‡ä¸€èˆ¬é€šè¿‡â€œå­˜å–æ–¹æ³•â€(access method)æ¥è®¿é—®ã€‚å…¶ä¸­ï¼Œâ€œè·å–æ–¹æ³•â€ (getter)ç”¨äºè¯»å–å˜é‡å€¼ï¼Œè€Œâ€œè®¾ç½®æ–¹æ³•â€ (setter)ç”¨äºå†™å…¥å˜é‡å€¼ã€‚è¿™ä¸ªæ¦‚å¿µå·²ç»å®šå‹ï¼Œå¹¶ä¸”ç»ç”±â€œå±æ€§â€è¿™ä¸€ç‰¹æ€§è€Œæˆä¸º Objective-C 2.0 çš„ä¸€éƒ¨åˆ†ã€‚è€Œåœ¨æ­£è§„çš„ Objective-C ç¼–ç é£æ ¼ä¸­ï¼Œå­˜å–æ–¹æ³•æœ‰ç€ä¸¥æ ¼çš„å‘½åè§„èŒƒã€‚æ­£å› ä¸ºæœ‰äº†è¿™ç§ä¸¥æ ¼çš„å‘½åè§„èŒƒï¼Œæ‰€ä»¥ Objective-C è¿™é—¨è¯­è¨€æ‰èƒ½æ ¹æ®åç§°è‡ªåŠ¨åˆ›å»ºå‡ºå­˜å–æ–¹æ³•ã€‚å…¶å®ä¹Ÿå¯ä»¥æŠŠå±æ€§å½“åšä¸€ç§å…³é”®å­—ï¼Œå…¶è¡¨ç¤º: ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å†™å‡ºä¸€å¥—å­˜å–æ–¹æ³•ï¼Œç”¨ä»¥è®¿é—®ç»™å®šç±»å‹ä¸­å…·æœ‰ç»™å®šåç§°çš„å˜é‡ã€‚æ‰€ä»¥ä½ ä¹Ÿå¯ä»¥è¿™ä¹ˆè¯´ï¼š @property = getter + setter; ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç±»ï¼š 1234@interface Person : NSObject@property NSString *firstName;@property NSString *lastName;@end ä¸Šè¿°ä»£ç å†™å‡ºæ¥çš„ç±»ä¸ä¸‹é¢è¿™ç§å†™æ³•ç­‰æ•ˆï¼š 123456@interface Person : NSObject- (NSString *)firstName;- (void)setFirstName:(NSString *)firstName;- (NSString *)lastName;- (void)setLastName:(NSString *)lastName;@end æ›´æ–°ï¼š propertyåœ¨runtimeä¸­æ˜¯objc_property_tå®šä¹‰å¦‚ä¸‹: 1typedef struct objc_property *objc_property_t; è€Œobjc_propertyæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…æ‹¬nameå’Œattributesï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 1234struct property_t { const char *name; const char *attributes;}; è€Œattributesæœ¬è´¨æ˜¯objc_property_attribute_tï¼Œå®šä¹‰äº†propertyçš„ä¸€äº›å±æ€§ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 12345/// Defines a property attributetypedef struct { const char *name; /**&lt; The name of the attribute */ const char *value; /**&lt; The value of the attribute (usually empty) */} objc_property_attribute_t; è€Œattributesçš„å…·ä½“å†…å®¹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®ï¼ŒåŒ…æ‹¬ï¼šç±»å‹ï¼ŒåŸå­æ€§ï¼Œå†…å­˜è¯­ä¹‰å’Œå¯¹åº”çš„å®ä¾‹å˜é‡ã€‚ ä¾‹å¦‚ï¼šæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªstringçš„property@property (nonatomic, copy) NSString *string;ï¼Œé€šè¿‡ property_getAttributes(property)è·å–åˆ°attributeså¹¶æ‰“å°å‡ºæ¥ä¹‹åçš„ç»“æœä¸ºT@&quot;NSString&quot;,C,N,V_string å…¶ä¸­Tå°±ä»£è¡¨ç±»å‹ï¼Œå¯å‚é˜…Type Encodingsï¼ŒCå°±ä»£è¡¨Copyï¼ŒNä»£è¡¨nonatomicï¼ŒVå°±ä»£è¡¨å¯¹åº”çš„å®ä¾‹å˜é‡ã€‚ ivarã€getterã€setter æ˜¯å¦‚ä½•ç”Ÿæˆå¹¶æ·»åŠ åˆ°è¿™ä¸ªç±»ä¸­çš„? â€œè‡ªåŠ¨åˆæˆâ€( autosynthesis) å®Œæˆå±æ€§å®šä¹‰åï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç¼–å†™è®¿é—®è¿™äº›å±æ€§æ‰€éœ€çš„æ–¹æ³•ï¼Œæ­¤è¿‡ç¨‹å«åšâ€œè‡ªåŠ¨åˆæˆâ€(autosynthesis)ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œæ‰€ä»¥ç¼–è¾‘å™¨é‡Œçœ‹ä¸åˆ°è¿™äº›â€œåˆæˆæ–¹æ³•â€(synthesized method)çš„æºä»£ç ã€‚é™¤äº†ç”Ÿæˆæ–¹æ³•ä»£ç  getterã€setter ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜è¦è‡ªåŠ¨å‘ç±»ä¸­æ·»åŠ é€‚å½“ç±»å‹çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åœ¨å±æ€§åå‰é¢åŠ ä¸‹åˆ’çº¿ï¼Œä»¥æ­¤ä½œä¸ºå®ä¾‹å˜é‡çš„åå­—ã€‚åœ¨å‰ä¾‹ä¸­ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªå®ä¾‹å˜é‡ï¼Œå…¶åç§°åˆ†åˆ«ä¸º _firstName ä¸ _lastNameã€‚ä¹Ÿå¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡ @synthesize è¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—. 1234@implementation Person@synthesize firstName = _myFirstName;@synthesize lastName = _myLastName;@end æˆ‘ä¸ºäº†ææ¸…å±æ€§æ˜¯æ€ä¹ˆå®ç°çš„,æ›¾ç»åç¼–è¯‘è¿‡ç›¸å…³çš„ä»£ç ,ä»–å¤§è‡´ç”Ÿæˆäº†äº”ä¸ªä¸œè¥¿ OBJC_IVAR_$ç±»å$å±æ€§åç§° ï¼šè¯¥å±æ€§çš„â€œåç§»é‡â€ (offset)ï¼Œè¿™ä¸ªåç§»é‡æ˜¯â€œç¡¬ç¼–ç â€ (hardcode)ï¼Œè¡¨ç¤ºè¯¥å˜é‡è·ç¦»å­˜æ”¾å¯¹è±¡çš„å†…å­˜åŒºåŸŸçš„èµ·å§‹åœ°å€æœ‰å¤šè¿œã€‚ setter ä¸ getter æ–¹æ³•å¯¹åº”çš„å®ç°å‡½æ•° ivar_list ï¼šæˆå‘˜å˜é‡åˆ—è¡¨ method_list ï¼šæ–¹æ³•åˆ—è¡¨ prop_list ï¼šå±æ€§åˆ—è¡¨ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ¯æ¬¡åœ¨å¢åŠ ä¸€ä¸ªå±æ€§,ç³»ç»Ÿéƒ½ä¼šåœ¨ ivar_list ä¸­æ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡çš„æè¿°,åœ¨ method_list ä¸­å¢åŠ  setter ä¸ getter æ–¹æ³•çš„æè¿°,åœ¨å±æ€§åˆ—è¡¨ä¸­å¢åŠ ä¸€ä¸ªå±æ€§çš„æè¿°,ç„¶åè®¡ç®—è¯¥å±æ€§åœ¨å¯¹è±¡ä¸­çš„åç§»é‡,ç„¶åç»™å‡º setter ä¸ getter æ–¹æ³•å¯¹åº”çš„å®ç°,åœ¨ setter æ–¹æ³•ä¸­ä»åç§»é‡çš„ä½ç½®å¼€å§‹èµ‹å€¼,åœ¨ getter æ–¹æ³•ä¸­ä»åç§»é‡å¼€å§‹å–å€¼,ä¸ºäº†èƒ½å¤Ÿè¯»å–æ­£ç¡®å­—èŠ‚æ•°,ç³»ç»Ÿå¯¹è±¡åç§»é‡çš„æŒ‡é’ˆç±»å‹è¿›è¡Œäº†ç±»å‹å¼ºè½¬. 7. @protocol å’Œ category ä¸­å¦‚ä½•ä½¿ç”¨ @property åœ¨ protocol ä¸­ä½¿ç”¨ property åªä¼šç”Ÿæˆ setter å’Œ getter æ–¹æ³•å£°æ˜,æˆ‘ä»¬ä½¿ç”¨å±æ€§çš„ç›®çš„,æ˜¯å¸Œæœ›éµå®ˆæˆ‘åè®®çš„å¯¹è±¡èƒ½å®ç°è¯¥å±æ€§ category ä½¿ç”¨ @property ä¹Ÿæ˜¯åªä¼šç”Ÿæˆ setter å’Œ getter æ–¹æ³•çš„å£°æ˜,å¦‚æœæˆ‘ä»¬çœŸçš„éœ€è¦ç»™ category å¢åŠ å±æ€§çš„å®ç°,éœ€è¦å€ŸåŠ©äºè¿è¡Œæ—¶çš„ä¸¤ä¸ªå‡½æ•°ï¼š objc_setAssociatedObject objc_getAssociatedObject 8. runtime å¦‚ä½•å®ç° weak å±æ€§è¦å®ç° weak å±æ€§ï¼Œé¦–å…ˆè¦ææ¸…æ¥š weak å±æ€§çš„ç‰¹ç‚¹ï¼š weak æ­¤ç‰¹è´¨è¡¨æ˜è¯¥å±æ€§å®šä¹‰äº†ä¸€ç§â€œéæ‹¥æœ‰å…³ç³»â€ (nonowning relationship)ã€‚ä¸ºè¿™ç§å±æ€§è®¾ç½®æ–°å€¼æ—¶ï¼Œè®¾ç½®æ–¹æ³•æ—¢ä¸ä¿ç•™æ–°å€¼ï¼Œä¹Ÿä¸é‡Šæ”¾æ—§å€¼ã€‚æ­¤ç‰¹è´¨åŒ assign ç±»ä¼¼ï¼Œ ç„¶è€Œåœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚ é‚£ä¹ˆ runtime å¦‚ä½•å®ç° weak å˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ runtime å¯¹æ³¨å†Œçš„ç±»ï¼Œ ä¼šè¿›è¡Œå¸ƒå±€ï¼Œå¯¹äº weak å¯¹è±¡ä¼šæ”¾å…¥ä¸€ä¸ª hash è¡¨ä¸­ã€‚ ç”¨ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€ä½œä¸º keyï¼Œå½“æ­¤å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ä¼š deallocï¼Œå‡å¦‚ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€æ˜¯aï¼Œé‚£ä¹ˆå°±ä¼šä»¥aä¸ºé”®ï¼Œ åœ¨è¿™ä¸ª weak è¡¨ä¸­æœç´¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ä»¥aä¸ºé”®çš„ weak å¯¹è±¡ï¼Œä»è€Œè®¾ç½®ä¸º nilã€‚ ï¼ˆæ³¨ï¼šåœ¨ä¸‹æ–‡çš„ã€Šä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾ä¹ˆï¼Ÿã€‹é‡Œç»™å‡ºçš„â€œå¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨â€ä¹Ÿæåˆ°__weakå¼•ç”¨çš„è§£é™¤æ—¶é—´ã€‚ï¼‰ å…ˆçœ‹ä¸‹ runtime é‡Œæºç çš„å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334/** * The internal structure stored in the weak references table. * It maintains and stores * a hash set of weak references pointing to an object. * If out_of_line==0, the set is instead a small inline array. */#define WEAK_INLINE_COUNT 4struct weak_entry_t { DisguisedPtr&lt;objc_object&gt; referent; union { struct { weak_referrer_t *referrers; uintptr_t out_of_line : 1; uintptr_t num_refs : PTR_MINUS_1; uintptr_t mask; uintptr_t max_hash_displacement; }; struct { // out_of_line=0 is LSB of one of these (don&apos;t care which) weak_referrer_t inline_referrers[WEAK_INLINE_COUNT]; }; };};/** * The global weak references table. Stores object ids as keys, * and weak_entry_t structs as their values. */struct weak_table_t { weak_entry_t *weak_entries; size_t num_entries; uintptr_t mask; uintptr_t max_hash_displacement;}; å…·ä½“å®Œæ•´å®ç°å‚ç…§ objc/objc-weak.h ã€‚ æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼ˆä¼ªä»£ç ï¼‰æ¥è¡¨ç¤ºä¸Šè¿°æœºåˆ¶ï¼š objc_storeWeak(&amp;a, b)å‡½æ•°ï¼š objc_storeWeakå‡½æ•°æŠŠç¬¬äºŒä¸ªå‚æ•°â€“èµ‹å€¼å¯¹è±¡ï¼ˆbï¼‰çš„å†…å­˜åœ°å€ä½œä¸ºé”®å€¼keyï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°â€“weakä¿®é¥°çš„å±æ€§å˜é‡ï¼ˆaï¼‰çš„å†…å­˜åœ°å€ï¼ˆ&amp;aï¼‰ä½œä¸ºvalueï¼Œæ³¨å†Œåˆ° weak è¡¨ä¸­ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ï¼ˆbï¼‰ä¸º0ï¼ˆnilï¼‰ï¼Œé‚£ä¹ˆæŠŠå˜é‡ï¼ˆaï¼‰çš„å†…å­˜åœ°å€ï¼ˆ&amp;aï¼‰ä»weakè¡¨ä¸­åˆ é™¤ï¼Œ ä½ å¯ä»¥æŠŠobjc_storeWeak(&amp;a, b)ç†è§£ä¸ºï¼šobjc_storeWeak(value, key)ï¼Œå¹¶ä¸”å½“keyå˜nilï¼Œå°†valueç½®nilã€‚ åœ¨bénilæ—¶ï¼Œaå’ŒbæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œåœ¨bå˜nilæ—¶ï¼Œaå˜nilã€‚æ­¤æ—¶å‘aå‘é€æ¶ˆæ¯ä¸ä¼šå´©æºƒï¼šåœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®‰å…¨çš„ã€‚ è€Œå¦‚æœaæ˜¯ç”± assign ä¿®é¥°çš„ï¼Œåˆ™ï¼šåœ¨ b é nil æ—¶ï¼Œa å’Œ b æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œåœ¨ b å˜ nil æ—¶ï¼Œa è¿˜æ˜¯æŒ‡å‘è¯¥å†…å­˜åœ°å€ï¼Œå˜é‡æŒ‡é’ˆã€‚æ­¤æ—¶å‘ a å‘é€æ¶ˆæ¯ææ˜“å´©æºƒã€‚ ä¸‹é¢æˆ‘ä»¬å°†åŸºäºobjc_storeWeak(&amp;a, b)å‡½æ•°ï¼Œä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿâ€œruntimeå¦‚ä½•å®ç°weakå±æ€§â€ï¼š 12345678// ä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿï¼šruntimeå¦‚ä½•å®ç°weakå±æ€§// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong id obj1; objc_initWeak(&amp;obj1, obj);/*objå¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œå˜é‡ä½œç”¨åŸŸç»“æŸ*/ objc_destroyWeak(&amp;obj1); ä¸‹é¢å¯¹ç”¨åˆ°çš„ä¸¤ä¸ªæ–¹æ³•objc_initWeakå’Œobjc_destroyWeakåšä¸‹è§£é‡Šï¼š æ€»ä½“è¯´æ¥ï¼Œä½œç”¨æ˜¯ï¼šé€šè¿‡objc_initWeakå‡½æ•°åˆå§‹åŒ–â€œé™„æœ‰weakä¿®é¥°ç¬¦çš„å˜é‡ï¼ˆobj1ï¼‰â€ï¼Œåœ¨å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶é€šè¿‡objc_destoryWeakå‡½æ•°é‡Šæ”¾è¯¥å˜é‡ï¼ˆobj1ï¼‰ã€‚ ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸‹æ–¹æ³•çš„å†…éƒ¨å®ç°ï¼š objc_initWeakå‡½æ•°çš„å®ç°æ˜¯è¿™æ ·çš„ï¼šåœ¨å°†â€œé™„æœ‰weakä¿®é¥°ç¬¦çš„å˜é‡ï¼ˆobj1ï¼‰â€åˆå§‹åŒ–ä¸º0ï¼ˆnilï¼‰åï¼Œä¼šå°†â€œèµ‹å€¼å¯¹è±¡â€ï¼ˆobjï¼‰ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨objc_storeWeakå‡½æ•°ã€‚ 12obj1 = 0ï¼›obj_storeWeak(&amp;obj1, obj); ä¹Ÿå°±æ˜¯è¯´ï¼š weak ä¿®é¥°çš„æŒ‡é’ˆé»˜è®¤å€¼æ˜¯ nil ï¼ˆåœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®‰å…¨çš„ï¼‰ ç„¶åobj_destroyWeakå‡½æ•°å°†0ï¼ˆnilï¼‰ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨objc_storeWeakå‡½æ•°ã€‚ objc_storeWeak(&amp;obj1, 0); å‰é¢çš„æºä»£ç ä¸ä¸‹åˆ—æºä»£ç ç›¸åŒã€‚ 123456789// ä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿï¼šruntimeå¦‚ä½•å®ç°weakå±æ€§// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilongid obj1;obj1 = 0;objc_storeWeak(&amp;obj1, obj);/* ... objçš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œè¢«ç½®nil ... */objc_storeWeak(&amp;obj1, 0); objc_storeWeak å‡½æ•°æŠŠç¬¬äºŒä¸ªå‚æ•°â€“èµ‹å€¼å¯¹è±¡ï¼ˆobjï¼‰çš„å†…å­˜åœ°å€ä½œä¸ºé”®å€¼ï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°â€“weakä¿®é¥°çš„å±æ€§å˜é‡ï¼ˆobj1ï¼‰çš„å†…å­˜åœ°å€æ³¨å†Œåˆ° weak è¡¨ä¸­ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ï¼ˆobjï¼‰ä¸º0ï¼ˆnilï¼‰ï¼Œé‚£ä¹ˆæŠŠå˜é‡ï¼ˆobj1ï¼‰çš„åœ°å€ä» weak è¡¨ä¸­åˆ é™¤ï¼Œåœ¨åé¢çš„ç›¸å…³ä¸€é¢˜ä¼šè¯¦è§£ã€‚ ä½¿ç”¨ä¼ªä»£ç æ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä¸‹é¢æˆ‘ä»¬â€œçœŸæªå®å¼¹â€åœ°å®ç°ä¸‹ï¼š å¦‚ä½•è®©ä¸ä½¿ç”¨weakä¿®é¥°çš„@propertyï¼Œæ‹¥æœ‰weakçš„æ•ˆæœã€‚ æˆ‘ä»¬ä»setteræ–¹æ³•å…¥æ‰‹ï¼š ï¼ˆæ³¨æ„ä»¥ä¸‹çš„ cyl_runAtDealloc æ–¹æ³•å®ç°ä»…ä»…ç”¨äºæ¨¡æ‹ŸåŸç†ï¼Œå¦‚æœæƒ³ç”¨äºé¡¹ç›®ä¸­ï¼Œè¿˜éœ€è¦è€ƒè™‘æ›´å¤æ‚çš„åœºæ™¯ï¼Œæƒ³åœ¨å®é™…é¡¹ç›®ä½¿ç”¨çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘å†™çš„ä¸€ä¸ªå°åº“ï¼Œå¯ä»¥ä½¿ç”¨ CocoaPods åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼š CYLDeallocBlockExecutor ï¼‰ 1234567- (void)setObject:(NSObject *)object{ objc_setAssociatedObject(self, &quot;object&quot;, object, OBJC_ASSOCIATION_ASSIGN); [object cyl_runAtDealloc:^{ _object = nil; }];} ä¹Ÿå°±æ˜¯æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š åœ¨setteræ–¹æ³•ä¸­åšå¦‚ä¸‹è®¾ç½®ï¼š 1objc_setAssociatedObject(self, &quot;object&quot;, object, OBJC_ASSOCIATION_ASSIGN); åœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚åšåˆ°è¿™ç‚¹ï¼ŒåŒæ ·è¦å€ŸåŠ© runtimeï¼š 12345678//è¦é”€æ¯çš„ç›®æ ‡å¯¹è±¡id objectToBeDeallocated;//å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ä¸Šé¢çš„ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚id objectWeWantToBeReleasedWhenThatHappens;objc_setAssociatedObject(objectToBeDeallocted, someUniqueKey, objectWeWantToBeReleasedWhenThatHappens, OBJC_ASSOCIATION_RETAIN); çŸ¥é“äº†æ€è·¯ï¼Œæˆ‘ä»¬å°±å¼€å§‹å®ç° cyl_runAtDealloc æ–¹æ³•ï¼Œå®ç°è¿‡ç¨‹åˆ†ä¸¤éƒ¨åˆ†ï¼š ç¬¬ä¸€éƒ¨åˆ†ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ© block æ‰§è¡Œâ€œäº‹ä»¶â€ã€‚ // .hæ–‡ä»¶ 123456789101112// .hæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// è¿™ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ©blockæ‰§è¡Œâ€œäº‹ä»¶â€ã€‚typedef void (^voidBlock)(void);@interface CYLBlockExecutor : NSObject- (id)initWithBlock:(voidBlock)block;@end // .mæ–‡ä»¶ 1234567891011121314151617181920212223242526272829// .mæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// è¿™ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ©blockæ‰§è¡Œâ€œäº‹ä»¶â€ã€‚#import &quot;CYLBlockExecutor.h&quot;@interface CYLBlockExecutor() { voidBlock _block;}@implementation CYLBlockExecutor- (id)initWithBlock:(voidBlock)aBlock{ self = [super init]; if (self) { _block = [aBlock copy]; } return self;}- (void)dealloc{ _block ? _block() : nil;}@end ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒä»£ç ï¼šåˆ©ç”¨runtimeå®ç°cyl_runAtDeallocæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839// CYLNSObject+RunAtDealloc.hæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// åˆ©ç”¨runtimeå®ç°cyl_runAtDeallocæ–¹æ³•#import &quot;CYLBlockExecutor.h&quot;const void *runAtDeallocBlockKey = &amp;runAtDeallocBlockKey;@interface NSObject (CYLRunAtDealloc)- (void)cyl_runAtDealloc:(voidBlock)block;@end// CYLNSObject+RunAtDealloc.mæ–‡ä»¶// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// åˆ©ç”¨runtimeå®ç°cyl_runAtDeallocæ–¹æ³•#import &quot;CYLNSObject+RunAtDealloc.h&quot;#import &quot;CYLBlockExecutor.h&quot;@implementation NSObject (CYLRunAtDealloc)- (void)cyl_runAtDealloc:(voidBlock)block{ if (block) { CYLBlockExecutor *executor = [[CYLBlockExecutor alloc] initWithBlock:block]; objc_setAssociatedObject(self, runAtDeallocBlockKey, executor, OBJC_ASSOCIATION_RETAIN); }}@end ä½¿ç”¨æ–¹æ³•ï¼šå¯¼å…¥ 1#import &quot;CYLNSObject+RunAtDealloc.h&quot; ç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ï¼š 12345NSObject *foo = [[NSObject alloc] init];[foo cyl_runAtDealloc:^{ NSLog(@&quot;æ­£åœ¨é‡Šæ”¾foo!&quot;);}]; å¦‚æœå¯¹ cyl_runAtDealloc çš„å®ç°åŸç†æœ‰å…´è¶£ï¼Œå¯ä»¥çœ‹ä¸‹æˆ‘å†™çš„ä¸€ä¸ªå°åº“ï¼Œå¯ä»¥ä½¿ç”¨ CocoaPods åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼š CYLDeallocBlockExecutor å‚è€ƒåšæ–‡ï¼š Fun With the Objective-C Runtime: Run Code at Deallocation of Any Object 9. @propertyä¸­æœ‰å“ªäº›å±æ€§å…³é”®å­—ï¼Ÿ/ @property åé¢å¯ä»¥æœ‰å“ªäº›ä¿®é¥°ç¬¦ï¼Ÿå±æ€§å¯ä»¥æ‹¥æœ‰çš„ç‰¹è´¨åˆ†ä¸ºå››ç±»: åŸå­æ€§â€” nonatomic ç‰¹è´¨ åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±ç¼–è¯‘å™¨åˆæˆçš„æ–¹æ³•ä¼šé€šè¿‡é”å®šæœºåˆ¶ç¡®ä¿å…¶åŸå­æ€§(atomicity)ã€‚å¦‚æœå±æ€§å…·å¤‡ nonatomic ç‰¹è´¨ï¼Œåˆ™ä¸ä½¿ç”¨è‡ªæ—‹é”ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡æ²¡æœ‰åä¸ºâ€œatomicâ€çš„ç‰¹è´¨(å¦‚æœæŸå±æ€§ä¸å…·å¤‡ nonatomic ç‰¹è´¨ï¼Œé‚£å®ƒå°±æ˜¯â€œåŸå­çš„â€ ( atomic) )ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥åœ¨å±æ€§ç‰¹è´¨ä¸­å†™æ˜è¿™ä¸€ç‚¹ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ã€‚è‹¥æ˜¯è‡ªå·±å®šä¹‰å­˜å–æ–¹æ³•ï¼Œé‚£ä¹ˆå°±åº”è¯¥éµä»ä¸å±æ€§ç‰¹è´¨ç›¸ç¬¦çš„åŸå­æ€§ã€‚ è¯»/å†™æƒé™â€”readwrite(è¯»å†™)ã€readonly (åªè¯») å†…å­˜ç®¡ç†è¯­ä¹‰â€”assignã€strongã€ weakã€unsafe_unretainedã€copy æ–¹æ³•åâ€”getter=&lt;name&gt; ã€setter=&lt;name&gt; getter=&lt;name&gt;çš„æ ·å¼ï¼š 1@property (nonatomic, getter=isOn) BOOL on; ï¼ˆ `setter=`è¿™ç§ä¸å¸¸ç”¨ï¼Œä¹Ÿä¸æ¨èä½¿ç”¨ã€‚æ•…ä¸åœ¨è¿™é‡Œç»™å‡ºå†™æ³•ã€‚ï¼‰ setter=&lt;name&gt;ä¸€èˆ¬ç”¨åœ¨ç‰¹æ®Šçš„æƒ…å¢ƒä¸‹ï¼Œæ¯”å¦‚ï¼š åœ¨æ•°æ®ååºåˆ—åŒ–ã€è½¬æ¨¡å‹çš„è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨è¿”å›çš„å­—æ®µå¦‚æœä»¥ init å¼€å¤´ï¼Œæ‰€ä»¥ä½ éœ€è¦å®šä¹‰ä¸€ä¸ª init å¼€å¤´çš„å±æ€§ï¼Œä½†é»˜è®¤ç”Ÿæˆçš„ setter ä¸ getter æ–¹æ³•ä¹Ÿä¼šä»¥ init å¼€å¤´ï¼Œè€Œç¼–è¯‘å™¨ä¼šæŠŠæ‰€æœ‰ä»¥ init å¼€å¤´çš„æ–¹æ³•å½“æˆåˆå§‹åŒ–æ–¹æ³•ï¼Œè€Œåˆå§‹åŒ–æ–¹æ³•åªèƒ½è¿”å› self ç±»å‹ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ è¿™æ—¶ä½ å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥é¿å…ç¼–è¯‘å™¨æŠ¥é”™ï¼š 1@property(nonatomic, strong, getter=p_initBy, setter=setP_initBy:)NSString *initBy; å¦å¤–ä¹Ÿå¯ä»¥ç”¨å…³é”®å­—è¿›è¡Œç‰¹æ®Šè¯´æ˜ï¼Œæ¥é¿å…ç¼–è¯‘å™¨æŠ¥é”™ï¼š 12@property(nonatomic, readwrite, copy, null_resettable) NSString *initBy;- (NSString *)initBy __attribute__((objc_method_family(none))); ä¸å¸¸ç”¨çš„ï¼šnonnull,null_resettable,nullable æ³¨æ„ï¼šå¾ˆå¤šäººä¼šè®¤ä¸ºå¦‚æœå±æ€§å…·å¤‡ nonatomic ç‰¹è´¨ï¼Œåˆ™ä¸ä½¿ç”¨â€œåŒæ­¥é”â€ã€‚å…¶å®åœ¨å±æ€§è®¾ç½®æ–¹æ³•ä¸­ä½¿ç”¨çš„æ˜¯è‡ªæ—‹é”ï¼Œè‡ªæ—‹é”ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839static inline void reallySetProperty(id self, SEL _cmd, id newValue, ptrdiff_t offset, bool atomic, bool copy, bool mutableCopy){ if (offset == 0) { object_setClass(self, newValue); return; } id oldValue; id *slot = (id*) ((char*)self + offset); if (copy) { newValue = [newValue copyWithZone:nil]; } else if (mutableCopy) { newValue = [newValue mutableCopyWithZone:nil]; } else { if (*slot == newValue) return; newValue = objc_retain(newValue); } if (!atomic) { oldValue = *slot; *slot = newValue; } else { spinlock_t&amp; slotlock = PropertyLocks[slot]; slotlock.lock(); oldValue = *slot; *slot = newValue; slotlock.unlock(); } objc_release(oldValue);}void objc_setProperty(id self, SEL _cmd, ptrdiff_t offset, id newValue, BOOL atomic, signed char shouldCopy) { bool copy = (shouldCopy &amp;&amp; shouldCopy != MUTABLE_COPY); bool mutableCopy = (shouldCopy == MUTABLE_COPY); reallySetProperty(self, _cmd, newValue, offset, atomic, copy, mutableCopy);} 10. weakå±æ€§éœ€è¦åœ¨deallocä¸­ç½®nilä¹ˆï¼Ÿä¸éœ€è¦ã€‚ åœ¨ARCç¯å¢ƒæ— è®ºæ˜¯å¼ºæŒ‡é’ˆè¿˜æ˜¯å¼±æŒ‡é’ˆéƒ½æ— éœ€åœ¨ dealloc è®¾ç½®ä¸º nil ï¼Œ ARC ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç† å³ä¾¿æ˜¯ç¼–è¯‘å™¨ä¸å¸®æˆ‘ä»¬åšè¿™äº›ï¼Œweakä¹Ÿä¸éœ€è¦åœ¨ dealloc ä¸­ç½®nilï¼š æ­£å¦‚ä¸Šæ–‡çš„ï¼šruntime å¦‚ä½•å®ç° weak å±æ€§ ä¸­æåˆ°çš„ï¼š æˆ‘ä»¬æ¨¡æ‹Ÿä¸‹ weak çš„ setter æ–¹æ³•ï¼Œåº”è¯¥å¦‚ä¸‹ï¼š 1234567- (void)setObject:(NSObject *)object{ objc_setAssociatedObject(self, &quot;object&quot;, object, OBJC_ASSOCIATION_ASSIGN); [object cyl_runAtDealloc:^{ _object = nil; }];} å¦‚æœå¯¹ cyl_runAtDealloc çš„å®ç°åŸç†æœ‰å…´è¶£ï¼Œå¯ä»¥çœ‹ä¸‹æˆ‘å†™çš„ä¸€ä¸ªå°åº“ï¼Œå¯ä»¥ä½¿ç”¨ CocoaPods åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼š CYLDeallocBlockExecutor ä¹Ÿå³: åœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚ 11. @synthesizeå’Œ@dynamicåˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ @propertyæœ‰ä¸¤ä¸ªå¯¹åº”çš„è¯ï¼Œä¸€ä¸ªæ˜¯ @synthesizeï¼Œä¸€ä¸ªæ˜¯ @dynamicã€‚å¦‚æœ @synthesizeå’Œ @dynamicéƒ½æ²¡å†™ï¼Œé‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯@syntheszie var = _var; @synthesize çš„è¯­ä¹‰æ˜¯å¦‚æœä½ æ²¡æœ‰æ‰‹åŠ¨å®ç° setter æ–¹æ³•å’Œ getter æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºä½ åŠ ä¸Šè¿™ä¸¤ä¸ªæ–¹æ³•ã€‚ @dynamic å‘Šè¯‰ç¼–è¯‘å™¨ï¼šå±æ€§çš„ setter ä¸ getter æ–¹æ³•ç”±ç”¨æˆ·è‡ªå·±å®ç°ï¼Œä¸è‡ªåŠ¨ç”Ÿæˆã€‚ï¼ˆå½“ç„¶å¯¹äº readonly çš„å±æ€§åªéœ€æä¾› getter å³å¯ï¼‰ã€‚å‡å¦‚ä¸€ä¸ªå±æ€§è¢«å£°æ˜ä¸º @dynamic varï¼Œç„¶åä½ æ²¡æœ‰æä¾› @setteræ–¹æ³•å’Œ @getter æ–¹æ³•ï¼Œç¼–è¯‘çš„æ—¶å€™æ²¡é—®é¢˜ï¼Œä½†æ˜¯å½“ç¨‹åºè¿è¡Œåˆ° instance.var = someVarï¼Œç”±äºç¼º setter æ–¹æ³•ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼›æˆ–è€…å½“è¿è¡Œåˆ° someVar = var æ—¶ï¼Œç”±äºç¼º getter æ–¹æ³•åŒæ ·ä¼šå¯¼è‡´å´©æºƒã€‚ç¼–è¯‘æ—¶æ²¡é—®é¢˜ï¼Œè¿è¡Œæ—¶æ‰æ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åŠ¨æ€ç»‘å®šã€‚ 12. ARCä¸‹ï¼Œä¸æ˜¾å¼æŒ‡å®šä»»ä½•å±æ€§å…³é”®å­—æ—¶ï¼Œé»˜è®¤çš„å…³é”®å­—éƒ½æœ‰å“ªäº›ï¼Ÿ å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤å…³é”®å­—æ˜¯ atomic,readwrite,assign å¯¹äºæ™®é€šçš„ Objective-C å¯¹è±¡ atomic,readwrite,strong å‚è€ƒé“¾æ¥ï¼š Objective-C ARC: strong vs retain and weak vs assign Variable property attributes or Modifiers in iOS 13. ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ å› ä¸ºçˆ¶ç±»æŒ‡é’ˆå¯ä»¥æŒ‡å‘å­ç±»å¯¹è±¡,ä½¿ç”¨ copy çš„ç›®çš„æ˜¯ä¸ºäº†è®©æœ¬å¯¹è±¡çš„å±æ€§ä¸å—å¤–ç•Œå½±å“,ä½¿ç”¨ copy æ— è®ºç»™æˆ‘ä¼ å…¥æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡è¿˜æ˜¯ä¸å¯å¯¹è±¡,æˆ‘æœ¬èº«æŒæœ‰çš„å°±æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å‰¯æœ¬. å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ˜¯ strong ,é‚£ä¹ˆè¿™ä¸ªå±æ€§å°±æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ªå¯å˜å¯¹è±¡,å¦‚æœè¿™ä¸ªå¯å˜å¯¹è±¡åœ¨å¤–éƒ¨è¢«ä¿®æ”¹äº†,é‚£ä¹ˆä¼šå½±å“è¯¥å±æ€§. copy æ­¤ç‰¹è´¨æ‰€è¡¨è¾¾çš„æ‰€å±å…³ç³»ä¸ strong ç±»ä¼¼ã€‚ç„¶è€Œè®¾ç½®æ–¹æ³•å¹¶ä¸ä¿ç•™æ–°å€¼ï¼Œè€Œæ˜¯å°†å…¶â€œæ‹·è´â€ (copy)ã€‚å½“å±æ€§ç±»å‹ä¸º NSString æ—¶ï¼Œç»å¸¸ç”¨æ­¤ç‰¹è´¨æ¥ä¿æŠ¤å…¶å°è£…æ€§ï¼Œå› ä¸ºä¼ é€’ç»™è®¾ç½®æ–¹æ³•çš„æ–°å€¼æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ª NSMutableString ç±»çš„å®ä¾‹ã€‚è¿™ä¸ªç±»æ˜¯ NSString çš„å­ç±»ï¼Œè¡¨ç¤ºä¸€ç§å¯ä¿®æ”¹å…¶å€¼çš„å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶è‹¥æ˜¯ä¸æ‹·è´å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè®¾ç½®å®Œå±æ€§ä¹‹åï¼Œå­—ç¬¦ä¸²çš„å€¼å°±å¯èƒ½ä¼šåœ¨å¯¹è±¡ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹é­äººæ›´æ”¹ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å°±è¦æ‹·è´ä¸€ä»½â€œä¸å¯å˜â€ (immutable)çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ã€‚åªè¦å®ç°å±æ€§æ‰€ç”¨çš„å¯¹è±¡æ˜¯â€œå¯å˜çš„â€ (mutable)ï¼Œå°±åº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼š å®šä¹‰ä¸€ä¸ªä»¥ strong ä¿®é¥°çš„ arrayï¼š 1@property (nonatomic ,readwrite, strong) NSArray *array; ç„¶åè¿›è¡Œä¸‹é¢çš„æ“ä½œï¼š 1234567891011NSArray *array = @[ @1, @2, @3, @4 ];NSMutableArray *mutableArray = [NSMutableArray arrayWithArray:array];self.array = mutableArray;[mutableArray removeAllObjects];;NSLog(@&quot;%@&quot;,self.array);[mutableArray addObjectsFromArray:array];self.array = [mutableArray copy];[mutableArray removeAllObjects];;NSLog(@&quot;%@&quot;,self.array); æ‰“å°ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š 123456782015-09-27 19:10:32.523 CYLArrayCopyDmo[10681:713670] ()2015-09-27 19:10:32.524 CYLArrayCopyDmo[10681:713670] ( 1, 2, 3, 4) ï¼ˆè¯¦è§ä»“åº“å†…é™„å½•çš„ Demoã€‚ï¼‰ ä¸ºäº†ç†è§£è¿™ç§åšæ³•ï¼Œé¦–å…ˆè¦çŸ¥é“ï¼Œä¸¤ç§æƒ…å†µï¼š å¯¹éé›†åˆç±»å¯¹è±¡çš„ copy ä¸ mutableCopy æ“ä½œï¼› å¯¹é›†åˆç±»å¯¹è±¡çš„ copy ä¸ mutableCopy æ“ä½œã€‚ 1. å¯¹éé›†åˆç±»å¯¹è±¡çš„copyæ“ä½œï¼šåœ¨éé›†åˆç±»å¯¹è±¡ä¸­ï¼šå¯¹ immutable å¯¹è±¡è¿›è¡Œ copy æ“ä½œï¼Œæ˜¯æŒ‡é’ˆå¤åˆ¶ï¼ŒmutableCopy æ“ä½œæ—¶å†…å®¹å¤åˆ¶ï¼›å¯¹ mutable å¯¹è±¡è¿›è¡Œ copy å’Œ mutableCopy éƒ½æ˜¯å†…å®¹å¤åˆ¶ã€‚ç”¨ä»£ç ç®€å•è¡¨ç¤ºå¦‚ä¸‹ï¼š [immutableObject copy] // æµ…å¤åˆ¶ [immutableObject mutableCopy] //æ·±å¤åˆ¶ [mutableObject copy] //æ·±å¤åˆ¶ [mutableObject mutableCopy] //æ·±å¤åˆ¶ æ¯”å¦‚ä»¥ä¸‹ä»£ç ï¼š 12NSMutableString *string = [NSMutableString stringWithString:@&quot;origin&quot;];//copyNSString *stringCopy = [string copy]; æŸ¥çœ‹å†…å­˜ï¼Œä¼šå‘ç° stringã€stringCopy å†…å­˜åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œè¯´æ˜æ­¤æ—¶éƒ½æ˜¯åšå†…å®¹æ‹·è´ã€æ·±æ‹·è´ã€‚å³ä½¿ä½ è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š 1[string appendString:@&quot;origion!&quot;] stringCopy çš„å€¼ä¹Ÿä¸ä¼šå› æ­¤æ”¹å˜ï¼Œä½†æ˜¯å¦‚æœä¸ä½¿ç”¨ copyï¼ŒstringCopy çš„å€¼å°±ä¼šè¢«æ”¹å˜ã€‚ é›†åˆç±»å¯¹è±¡ä»¥æ­¤ç±»æ¨ã€‚æ‰€ä»¥ï¼Œ ç”¨ @property å£°æ˜ NSStringã€NSArrayã€NSDictionary ç»å¸¸ä½¿ç”¨ copy å…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼šNSMutableStringã€NSMutableArrayã€NSMutableDictionaryï¼Œä»–ä»¬ä¹‹é—´å¯èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œä¸ºç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ï¼Œåº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚ 2ã€é›†åˆç±»å¯¹è±¡çš„copyä¸mutableCopyé›†åˆç±»å¯¹è±¡æ˜¯æŒ‡ NSArrayã€NSDictionaryã€NSSet â€¦ ä¹‹ç±»çš„å¯¹è±¡ã€‚ä¸‹é¢å…ˆçœ‹é›†åˆç±»immutableå¯¹è±¡ä½¿ç”¨ copy å’Œ mutableCopy çš„ä¸€ä¸ªä¾‹å­ï¼š 123NSArray *array = @[@[@&quot;a&quot;, @&quot;b&quot;], @[@&quot;c&quot;, @&quot;d&quot;]];NSArray *copyArray = [array copy];NSMutableArray *mCopyArray = [array mutableCopy]; æŸ¥çœ‹å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ° copyArray å’Œ array çš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œè€Œ mCopyArray å’Œ array çš„åœ°å€æ˜¯ä¸åŒçš„ã€‚è¯´æ˜ copy æ“ä½œè¿›è¡Œäº†æŒ‡é’ˆæ‹·è´ï¼ŒmutableCopy è¿›è¡Œäº†å†…å®¹æ‹·è´ã€‚ä½†éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šæ­¤å¤„çš„å†…å®¹æ‹·è´ï¼Œä»…ä»…æ˜¯æ‹·è´ array è¿™ä¸ªå¯¹è±¡ï¼Œarray é›†åˆå†…éƒ¨çš„å…ƒç´ ä»ç„¶æ˜¯æŒ‡é’ˆæ‹·è´ã€‚è¿™å’Œä¸Šé¢çš„éé›†åˆ immutable å¯¹è±¡çš„æ‹·è´è¿˜æ˜¯æŒºç›¸ä¼¼çš„ï¼Œé‚£ä¹ˆmutableå¯¹è±¡çš„æ‹·è´ä¼šä¸ä¼šç±»ä¼¼å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­å¾€ä¸‹ï¼Œçœ‹ mutable å¯¹è±¡æ‹·è´çš„ä¾‹å­ï¼š 123NSMutableArray *array = [NSMutableArray arrayWithObjects:[NSMutableString stringWithString:@&quot;a&quot;],@&quot;b&quot;,@&quot;c&quot;,nil];NSArray *copyArray = [array copy];NSMutableArray *mCopyArray = [array mutableCopy]; æŸ¥çœ‹å†…å­˜ï¼Œå¦‚æˆ‘ä»¬æ‰€æ–™ï¼ŒcopyArrayã€mCopyArrayå’Œ array çš„å†…å­˜åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œè¯´æ˜ copyArrayã€mCopyArray éƒ½å¯¹ array è¿›è¡Œäº†å†…å®¹æ‹·è´ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š åœ¨é›†åˆç±»å¯¹è±¡ä¸­ï¼Œå¯¹ immutable å¯¹è±¡è¿›è¡Œ copyï¼Œæ˜¯æŒ‡é’ˆå¤åˆ¶ï¼Œ mutableCopy æ˜¯å†…å®¹å¤åˆ¶ï¼›å¯¹ mutable å¯¹è±¡è¿›è¡Œ copy å’Œ mutableCopy éƒ½æ˜¯å†…å®¹å¤åˆ¶ã€‚ä½†æ˜¯ï¼šé›†åˆå¯¹è±¡çš„å†…å®¹å¤åˆ¶ä»…é™äºå¯¹è±¡æœ¬èº«ï¼Œå¯¹è±¡å…ƒç´ ä»ç„¶æ˜¯æŒ‡é’ˆå¤åˆ¶ã€‚ç”¨ä»£ç ç®€å•è¡¨ç¤ºå¦‚ä¸‹ï¼š 1234[immutableObject copy] // æµ…å¤åˆ¶[immutableObject mutableCopy] //å•å±‚æ·±å¤åˆ¶[mutableObject copy] //å•å±‚æ·±å¤åˆ¶[mutableObject mutableCopy] //å•å±‚æ·±å¤åˆ¶ è¿™ä¸ªä»£ç ç»“è®ºå’Œéé›†åˆç±»çš„éå¸¸ç›¸ä¼¼ã€‚ å‚è€ƒé“¾æ¥ï¼šiOS é›†åˆçš„æ·±å¤åˆ¶ä¸æµ…å¤åˆ¶ 14. @synthesizeåˆæˆå®ä¾‹å˜é‡çš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå‡å¦‚propertyåä¸ºfooï¼Œå­˜åœ¨ä¸€ä¸ªåä¸º_fooçš„å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆè¿˜ä¼šè‡ªåŠ¨åˆæˆæ–°å˜é‡ä¹ˆï¼Ÿåœ¨å›ç­”ä¹‹å‰å…ˆè¯´æ˜ä¸‹ä¸€ä¸ªæ¦‚å¿µï¼š å®ä¾‹å˜é‡ = æˆå‘˜å˜é‡ ï¼ ivar è¿™äº›è¯´æ³•ï¼Œç¬”è€…ä¸‹æ–‡ä¸­ï¼Œå¯èƒ½éƒ½ä¼šç”¨åˆ°ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚ æ­£å¦‚Appleå®˜æ–¹æ–‡æ¡£ You Can Customize Synthesized Instance Variable Names æ‰€è¯´ï¼š å¦‚æœä½¿ç”¨äº†å±æ€§çš„è¯ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨ç¼–å†™è®¿é—®å±æ€§æ‰€éœ€çš„æ–¹æ³•ï¼Œæ­¤è¿‡ç¨‹å«åšâ€œè‡ªåŠ¨åˆæˆâ€( auto synthesis)ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œæ‰€ä»¥ç¼–è¾‘å™¨é‡Œçœ‹ä¸åˆ°è¿™äº›â€œåˆæˆæ–¹æ³•â€ (synthesized method)çš„æºä»£ç ã€‚é™¤äº†ç”Ÿæˆæ–¹æ³•ä»£ç ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜è¦è‡ªåŠ¨å‘ç±»ä¸­æ·»åŠ é€‚å½“ç±»å‹çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åœ¨å±æ€§åå‰é¢åŠ ä¸‹åˆ’çº¿ï¼Œä»¥æ­¤ä½œä¸ºå®ä¾‹å˜é‡çš„åå­—ã€‚ 1234@interface CYLPerson : NSObject @property NSString *firstName; @property NSString *lastName; @end åœ¨ä¸Šä¾‹ä¸­ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªå®ä¾‹å˜é‡ï¼Œå…¶åç§°åˆ†åˆ«ä¸º _firstName ä¸ _lastNameã€‚ä¹Ÿå¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡ @synthesize è¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—: 1234@implementation CYLPerson @synthesize firstName = _myFirstName; @synthesize lastName = _myLastName; @end ä¸Šè¿°è¯­æ³•ä¼šå°†ç”Ÿæˆçš„å®ä¾‹å˜é‡å‘½åä¸º _myFirstName ä¸ _myLastName ï¼Œè€Œä¸å†ä½¿ç”¨é»˜è®¤çš„åå­—ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ— é¡»ä¿®æ”¹é»˜è®¤çš„å®ä¾‹å˜é‡åï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ä»¥ä¸‹åˆ’çº¿æ¥å‘½åå®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è¿™ä¸ªåŠæ³•å°†å…¶æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„åå­—ã€‚ç¬”è€…è¿˜æ˜¯æ¨èä½¿ç”¨é»˜è®¤çš„å‘½åæ–¹æ¡ˆï¼Œå› ä¸ºå¦‚æœæ‰€æœ‰äººéƒ½åšæŒè¿™å¥—æ–¹æ¡ˆï¼Œé‚£ä¹ˆå†™å‡ºæ¥çš„ä»£ç å¤§å®¶éƒ½èƒ½çœ‹å¾—æ‡‚ã€‚ æ€»ç»“ä¸‹ @synthesize åˆæˆå®ä¾‹å˜é‡çš„è§„åˆ™ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š å¦‚æœæŒ‡å®šäº†æˆå‘˜å˜é‡çš„åç§°,ä¼šç”Ÿæˆä¸€ä¸ªæŒ‡å®šçš„åç§°çš„æˆå‘˜å˜é‡, å¦‚æœè¿™ä¸ªæˆå‘˜å·²ç»å­˜åœ¨äº†å°±ä¸å†ç”Ÿæˆäº†. å¦‚æœæ˜¯ @synthesize foo; è¿˜ä¼šç”Ÿæˆä¸€ä¸ªåç§°ä¸ºfooçš„æˆå‘˜å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š å¦‚æœæ²¡æœ‰æŒ‡å®šæˆå‘˜å˜é‡çš„åç§°ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå±æ€§åŒåçš„æˆå‘˜å˜é‡, å¦‚æœæ˜¯ @synthesize foo = _foo; å°±ä¸ä¼šç”Ÿæˆæˆå‘˜å˜é‡äº†. å‡å¦‚ property åä¸º fooï¼Œå­˜åœ¨ä¸€ä¸ªåä¸º _foo çš„å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆè¿˜ä¼šè‡ªåŠ¨åˆæˆæ–°å˜é‡ä¹ˆï¼Ÿä¸ä¼šã€‚å¦‚ä¸‹å›¾ï¼š 15. åœ¨æœ‰äº†è‡ªåŠ¨åˆæˆå±æ€§å®ä¾‹å˜é‡ä¹‹åï¼Œ@synthesizeè¿˜æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿå›ç­”è¿™ä¸ªé—®é¢˜å‰ï¼Œæˆ‘ä»¬è¦ææ¸…æ¥šä¸€ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¸ä¼šautosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Ÿ åŒæ—¶é‡å†™äº† setter å’Œ getter æ—¶ é‡å†™äº†åªè¯»å±æ€§çš„ getter æ—¶ ä½¿ç”¨äº† @dynamic æ—¶ åœ¨ @protocol ä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§ åœ¨ category ä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§ é‡è½½çš„å±æ€§ å½“ä½ åœ¨å­ç±»ä¸­é‡è½½äº†çˆ¶ç±»ä¸­çš„å±æ€§ï¼Œä½ å¿…é¡» ä½¿ç”¨ @synthesize æ¥æ‰‹åŠ¨åˆæˆivarã€‚ é™¤äº†åä¸‰æ¡ï¼Œå¯¹å…¶ä»–å‡ ä¸ªæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä¸€ä¸ªè§„å¾‹ï¼šå½“ä½ æƒ³æ‰‹åŠ¨ç®¡ç† @property çš„æ‰€æœ‰å†…å®¹æ—¶ï¼Œä½ å°±ä¼šå°è¯•é€šè¿‡å®ç° @property çš„æ‰€æœ‰â€œå­˜å–æ–¹æ³•â€ï¼ˆthe accessor methodsï¼‰æˆ–è€…ä½¿ç”¨ @dynamic æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œè¿™æ—¶ç¼–è¯‘å™¨å°±ä¼šè®¤ä¸ºä½ æ‰“ç®—æ‰‹åŠ¨ç®¡ç† @propertyï¼Œäºæ˜¯ç¼–è¯‘å™¨å°±ç¦ç”¨äº† autosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰ã€‚ å› ä¸ºæœ‰äº† autosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Œå¤§éƒ¨åˆ†å¼€å‘è€…å·²ç»ä¹ æƒ¯ä¸å»æ‰‹åŠ¨å®šä¹‰ivarï¼Œè€Œæ˜¯ä¾èµ–äº autosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Œä½†æ˜¯ä¸€æ—¦ä½ éœ€è¦ä½¿ç”¨ivarï¼Œè€Œ autosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰åˆå¤±æ•ˆäº†ï¼Œå¦‚æœä¸å»æ‰‹åŠ¨å®šä¹‰ivarï¼Œé‚£ä¹ˆä½ å°±å¾—å€ŸåŠ© @synthesize æ¥æ‰‹åŠ¨åˆæˆ ivarã€‚ å…¶å®ï¼Œ@synthesize è¯­æ³•è¿˜æœ‰ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼Œä½†æ˜¯ä¸å¤ªå»ºè®®å¤§å®¶ä½¿ç”¨ï¼š å¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡ @synthesize è¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—: 1234@implementation CYLPerson @synthesize firstName = _myFirstName; @synthesize lastName = _myLastName; @end ä¸Šè¿°è¯­æ³•ä¼šå°†ç”Ÿæˆçš„å®ä¾‹å˜é‡å‘½åä¸º _myFirstName ä¸ _myLastNameï¼Œè€Œä¸å†ä½¿ç”¨é»˜è®¤çš„åå­—ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ— é¡»ä¿®æ”¹é»˜è®¤çš„å®ä¾‹å˜é‡åï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ä»¥ä¸‹åˆ’çº¿æ¥å‘½åå®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è¿™ä¸ªåŠæ³•å°†å…¶æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„åå­—ã€‚ç¬”è€…è¿˜æ˜¯æ¨èä½¿ç”¨é»˜è®¤çš„å‘½åæ–¹æ¡ˆï¼Œå› ä¸ºå¦‚æœæ‰€æœ‰äººéƒ½åšæŒè¿™å¥—æ–¹æ¡ˆï¼Œé‚£ä¹ˆå†™å‡ºæ¥çš„ä»£ç å¤§å®¶éƒ½èƒ½çœ‹å¾—æ‡‚ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼šåº”ç”¨åœºæ™¯ï¼š 12345678910111213141516171819202122232425262728293031323334353637//// .mæ–‡ä»¶// https://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)// https://github.com/ChenYilong// æ‰“å¼€ç¬¬14è¡Œå’Œç¬¬17è¡Œä¸­ä»»æ„ä¸€è¡Œï¼Œå°±å¯ç¼–è¯‘æˆåŠŸ@import Foundation;@interface CYLObject : NSObject@property (nonatomic, copy) NSString *title;@end@implementation CYLObject { // NSString *_title;}//@synthesize title = _title;- (instancetype)init{ self = [super init]; if (self) { _title = @&quot;å¾®åš@iOSç¨‹åºçŠ­è¢&quot;; } return self;}- (NSString *)title { return _title;}- (void)setTitle:(NSString *)title { _title = [title copy];}@end ç»“æœç¼–è¯‘å™¨æŠ¥é”™ï¼š å½“ä½ åŒæ—¶é‡å†™äº† setter å’Œ getter æ—¶ï¼Œç³»ç»Ÿå°±ä¸ä¼šç”Ÿæˆ ivarï¼ˆå®ä¾‹å˜é‡/æˆå‘˜å˜é‡ï¼‰ã€‚è¿™æ—¶å€™æœ‰ä¸¤ç§é€‰æ‹©ï¼š è¦ä¹ˆå¦‚ç¬¬14è¡Œï¼šæ‰‹åŠ¨åˆ›å»º ivar è¦ä¹ˆå¦‚ç¬¬17è¡Œï¼šä½¿ç”¨@synthesize foo = _foo; ï¼Œå…³è” @property ä¸ ivarã€‚ æ›´å¤šä¿¡æ¯ï¼Œè¯·æˆ³- ã€‹ When should I use @synthesize explicitly? 16. objcä¸­å‘ä¸€ä¸ªnilå¯¹è±¡å‘é€æ¶ˆæ¯å°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿåœ¨ Objective-C ä¸­å‘ nil å‘é€æ¶ˆæ¯æ˜¯å®Œå…¨æœ‰æ•ˆçš„â€”â€”åªæ˜¯åœ¨è¿è¡Œæ—¶ä¸ä¼šæœ‰ä»»ä½•ä½œç”¨: å¦‚æœä¸€ä¸ªæ–¹æ³•è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå‘é€ç»™nilçš„æ¶ˆæ¯å°†è¿”å›0(nil)ã€‚ä¾‹å¦‚ï¼š 1Person * motherInlaw = [[aPerson spouse] mother]; å¦‚æœ spouse å¯¹è±¡ä¸º nilï¼Œé‚£ä¹ˆå‘é€ç»™ nil çš„æ¶ˆæ¯ mother ä¹Ÿå°†è¿”å› nilã€‚ å¦‚æœæ–¹æ³•è¿”å›å€¼ä¸ºæŒ‡é’ˆç±»å‹ï¼Œå…¶æŒ‡é’ˆå¤§å°ä¸ºå°äºæˆ–è€…ç­‰äºsizeof(void*)ï¼Œfloatï¼Œdoubleï¼Œlong double æˆ–è€… long long çš„æ•´å‹æ ‡é‡ï¼Œå‘é€ç»™ nil çš„æ¶ˆæ¯å°†è¿”å›0ã€‚ å¦‚æœæ–¹æ³•è¿”å›å€¼ä¸ºç»“æ„ä½“,å‘é€ç»™ nil çš„æ¶ˆæ¯å°†è¿”å›0ã€‚ç»“æ„ä½“ä¸­å„ä¸ªå­—æ®µçš„å€¼å°†éƒ½æ˜¯0ã€‚ å¦‚æœæ–¹æ³•çš„è¿”å›å€¼ä¸æ˜¯ä¸Šè¿°æåˆ°çš„å‡ ç§æƒ…å†µï¼Œé‚£ä¹ˆå‘é€ç»™ nil çš„æ¶ˆæ¯çš„è¿”å›å€¼å°†æ˜¯æœªå®šä¹‰çš„ã€‚ å…·ä½“åŸå› å¦‚ä¸‹ï¼š objcæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨è¿è¡Œæ—¶ä¼šè¢«åŠ¨æ€è½¬ä¸ºæ¶ˆæ¯å‘é€ï¼Œå³ï¼šobjc_msgSend(receiver, selector)ã€‚ é‚£ä¹ˆï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£è¿™ä¸ªå†…å®¹ï¼Œè¿˜æ˜¯è´´ä¸€ä¸ªobjcçš„æºä»£ç ï¼š 123456789101112131415161718// runtime.hï¼ˆç±»åœ¨runtimeä¸­çš„å®šä¹‰ï¼‰// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilongstruct objc_class { Class isa OBJC_ISA_AVAILABILITY; //isaæŒ‡é’ˆæŒ‡å‘Meta Classï¼Œå› ä¸ºObjcçš„ç±»çš„æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªObjectï¼Œä¸ºäº†å¤„ç†è¿™ä¸ªå…³ç³»ï¼Œruntimeå°±åˆ›é€ äº†Meta Classï¼Œå½“ç»™ç±»å‘é€[NSObject alloc]è¿™æ ·æ¶ˆæ¯æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŠŠè¿™ä¸ªæ¶ˆæ¯å‘ç»™äº†Class Object #if !__OBJC2__ Class super_class OBJC2_UNAVAILABLE; // çˆ¶ç±» const char *name OBJC2_UNAVAILABLE; // ç±»å long version OBJC2_UNAVAILABLE; // ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé»˜è®¤ä¸º0 long info OBJC2_UNAVAILABLE; // ç±»ä¿¡æ¯ï¼Œä¾›è¿è¡ŒæœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯† long instance_size OBJC2_UNAVAILABLE; // è¯¥ç±»çš„å®ä¾‹å˜é‡å¤§å° struct objc_ivar_list *ivars OBJC2_UNAVAILABLE; // è¯¥ç±»çš„æˆå‘˜å˜é‡é“¾è¡¨ struct objc_method_list **methodLists OBJC2_UNAVAILABLE; // æ–¹æ³•å®šä¹‰çš„é“¾è¡¨ struct objc_cache *cache OBJC2_UNAVAILABLE; // æ–¹æ³•ç¼“å­˜ï¼Œå¯¹è±¡æ¥åˆ°ä¸€ä¸ªæ¶ˆæ¯ä¼šæ ¹æ®isaæŒ‡é’ˆæŸ¥æ‰¾æ¶ˆæ¯å¯¹è±¡ï¼Œè¿™æ—¶ä¼šåœ¨method Listsä¸­éå†ï¼Œå¦‚æœcacheäº†ï¼Œå¸¸ç”¨çš„æ–¹æ³•è°ƒç”¨æ—¶å°±èƒ½å¤Ÿæé«˜è°ƒç”¨çš„æ•ˆç‡ã€‚ struct objc_protocol_list *protocols OBJC2_UNAVAILABLE; // åè®®é“¾è¡¨ #endif } OBJC2_UNAVAILABLE; objcåœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œruntimeåº“ä¼šæ ¹æ®å¯¹è±¡çš„isaæŒ‡é’ˆæ‰¾åˆ°è¯¥å¯¹è±¡å®é™…æ‰€å±çš„ç±»ï¼Œç„¶ååœ¨è¯¥ç±»ä¸­çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠå…¶çˆ¶ç±»æ–¹æ³•åˆ—è¡¨ä¸­å¯»æ‰¾æ–¹æ³•è¿è¡Œï¼Œç„¶ååœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œobjc_msgSendæ–¹æ³•ä¸ä¼šè¿”å›å€¼ï¼Œæ‰€è°“çš„è¿”å›å†…å®¹éƒ½æ˜¯å…·ä½“è°ƒç”¨æ—¶æ‰§è¡Œçš„ã€‚é‚£ä¹ˆï¼Œå›åˆ°æœ¬é¢˜ï¼Œå¦‚æœå‘ä¸€ä¸ªnilå¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œé¦–å…ˆåœ¨å¯»æ‰¾å¯¹è±¡çš„isaæŒ‡é’ˆæ—¶å°±æ˜¯0åœ°å€è¿”å›äº†ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯ã€‚ 17. objcä¸­å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯[obj foo]å’Œobjc_msgSend()å‡½æ•°ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿå…·ä½“åŸå› åŒä¸Šé¢˜ï¼šè¯¥æ–¹æ³•ç¼–è¯‘ä¹‹åå°±æ˜¯objc_msgSend()å‡½æ•°è°ƒç”¨. æˆ‘ä»¬ç”¨ clang åˆ†æä¸‹ï¼Œclang æä¾›ä¸€ä¸ªå‘½ä»¤ï¼Œå¯ä»¥å°†Objective-Cçš„æºç æ”¹å†™æˆC++è¯­è¨€ï¼Œå€Ÿæ­¤å¯ä»¥ç ”ç©¶ä¸‹[obj foo]å’Œobjc_msgSend()å‡½æ•°ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ã€‚ ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼Œç”±äº clang åçš„ä»£ç è¾¾åˆ°äº†10ä¸‡å¤šè¡Œï¼Œä¸ºäº†ä¾¿äºåŒºåˆ†ï¼Œæ·»åŠ äº†ä¸€ä¸ªå« iOSinit æ–¹æ³•ï¼Œ 1234567891011121314151617//// main.m// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// Copyright (c) 2015å¹´ å¾®åš@iOSç¨‹åºçŠ­è¢. All rights reserved.//#import &quot;CYLTest.h&quot;int main(int argc, char * argv[]) { @autoreleasepool { CYLTest *test = [[CYLTest alloc] init]; [test performSelector:(@selector(iOSinit))]; return 0; }} åœ¨ç»ˆç«¯ä¸­è¾“å…¥ 1clang -rewrite-objc main.m å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªmain.cppçš„æ–‡ä»¶ï¼Œåœ¨æœ€ä½ç«¯ï¼ˆ10ä¸‡4åƒè¡Œå·¦å³ï¼‰ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š 1((void ()(id, SEL))(void )objc_msgSend)((id)obj, sel_registerName(&quot;foo&quot;)); ä¹Ÿå°±æ˜¯è¯´ï¼š [obj foo];åœ¨objcç¼–è¯‘æ—¶ï¼Œä¼šè¢«è½¬æ„ä¸ºï¼šobjc_msgSend(obj, @selector(foo));ã€‚ 18. ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectorçš„å¼‚å¸¸ï¼Ÿç®€å•æ¥è¯´ï¼š å½“è°ƒç”¨è¯¥å¯¹è±¡ä¸ŠæŸä¸ªæ–¹æ³•,è€Œè¯¥å¯¹è±¡ä¸Šæ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡â€œæ¶ˆæ¯è½¬å‘â€è¿›è¡Œè§£å†³ã€‚ ç®€å•çš„æµç¨‹å¦‚ä¸‹ï¼Œåœ¨ä¸Šä¸€é¢˜ä¸­ä¹Ÿæåˆ°è¿‡ï¼š objcæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨è¿è¡Œæ—¶ä¼šè¢«åŠ¨æ€è½¬ä¸ºæ¶ˆæ¯å‘é€ï¼Œå³ï¼šobjc_msgSend(receiver, selector)ã€‚ objcåœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œruntimeåº“ä¼šæ ¹æ®å¯¹è±¡çš„isaæŒ‡é’ˆæ‰¾åˆ°è¯¥å¯¹è±¡å®é™…æ‰€å±çš„ç±»ï¼Œç„¶ååœ¨è¯¥ç±»ä¸­çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠå…¶çˆ¶ç±»æ–¹æ³•åˆ—è¡¨ä¸­å¯»æ‰¾æ–¹æ³•è¿è¡Œï¼Œå¦‚æœï¼Œåœ¨æœ€é¡¶å±‚çš„çˆ¶ç±»ä¸­ä¾ç„¶æ‰¾ä¸åˆ°ç›¸åº”çš„æ–¹æ³•æ—¶ï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šæŒ‚æ‰å¹¶æŠ›å‡ºå¼‚å¸¸unrecognized selector sent to XXX ã€‚ä½†æ˜¯åœ¨è¿™ä¹‹å‰ï¼Œobjcçš„è¿è¡Œæ—¶ä¼šç»™å‡ºä¸‰æ¬¡æ‹¯æ•‘ç¨‹åºå´©æºƒçš„æœºä¼šï¼š Method resolution objcè¿è¡Œæ—¶ä¼šè°ƒç”¨+resolveInstanceMethod:æˆ–è€… +resolveClassMethod:ï¼Œè®©ä½ æœ‰æœºä¼šæä¾›ä¸€ä¸ªå‡½æ•°å®ç°ã€‚å¦‚æœä½ æ·»åŠ äº†å‡½æ•°ï¼Œé‚£è¿è¡Œæ—¶ç³»ç»Ÿå°±ä¼šé‡æ–°å¯åŠ¨ä¸€æ¬¡æ¶ˆæ¯å‘é€çš„è¿‡ç¨‹ï¼Œå¦åˆ™ ï¼Œè¿è¡Œæ—¶å°±ä¼šç§»åˆ°ä¸‹ä¸€æ­¥ï¼Œæ¶ˆæ¯è½¬å‘ï¼ˆMessage Forwardingï¼‰ã€‚ Fast forwarding å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†-forwardingTargetForSelector:ï¼ŒRuntime è¿™æ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç»™ä½ æŠŠè¿™ä¸ªæ¶ˆæ¯è½¬å‘ç»™å…¶ä»–å¯¹è±¡çš„æœºä¼šã€‚åªè¦è¿™ä¸ªæ–¹æ³•è¿”å›çš„ä¸æ˜¯nilå’Œselfï¼Œæ•´ä¸ªæ¶ˆæ¯å‘é€çš„è¿‡ç¨‹å°±ä¼šè¢«é‡å¯ï¼Œå½“ç„¶å‘é€çš„å¯¹è±¡ä¼šå˜æˆä½ è¿”å›çš„é‚£ä¸ªå¯¹è±¡ã€‚å¦åˆ™ï¼Œå°±ä¼šç»§ç»­Normal Fowardingã€‚è¿™é‡Œå«Fastï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ«ä¸‹ä¸€æ­¥çš„è½¬å‘æœºåˆ¶ã€‚å› ä¸ºè¿™ä¸€æ­¥ä¸ä¼šåˆ›å»ºä»»ä½•æ–°çš„å¯¹è±¡ï¼Œä½†ä¸‹ä¸€æ­¥è½¬å‘ä¼šåˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡ï¼Œæ‰€ä»¥ç›¸å¯¹æ›´å¿«ç‚¹ã€‚ Normal forwarding è¿™ä¸€æ­¥æ˜¯Runtimeæœ€åä¸€æ¬¡ç»™ä½ æŒ½æ•‘çš„æœºä¼šã€‚é¦–å…ˆå®ƒä¼šå‘é€-methodSignatureForSelector:æ¶ˆæ¯è·å¾—å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ã€‚å¦‚æœ-methodSignatureForSelector:è¿”å›nilï¼ŒRuntimeåˆ™ä¼šå‘å‡º-doesNotRecognizeSelector:æ¶ˆæ¯ï¼Œç¨‹åºè¿™æ—¶ä¹Ÿå°±æŒ‚æ‰äº†ã€‚å¦‚æœè¿”å›äº†ä¸€ä¸ªå‡½æ•°ç­¾åï¼ŒRuntimeå°±ä¼šåˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡å¹¶å‘é€-forwardInvocation:æ¶ˆæ¯ç»™ç›®æ ‡å¯¹è±¡ã€‚ ä¸ºäº†èƒ½æ›´æ¸…æ™°åœ°ç†è§£è¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œgitä»“åº“é‡Œä¹Ÿç»™å‡ºäº†ä¸€ä¸ªDemoï¼Œåç§°å«â€œ _objc_msgForward_demo â€,å¯è¿è¡Œèµ·æ¥çœ‹çœ‹ã€‚ 19. ä¸€ä¸ªobjcå¯¹è±¡å¦‚ä½•è¿›è¡Œå†…å­˜å¸ƒå±€ï¼Ÿï¼ˆè€ƒè™‘æœ‰çˆ¶ç±»çš„æƒ…å†µï¼‰ æ‰€æœ‰çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œè‡ªå·±çš„æˆå‘˜å˜é‡éƒ½ä¼šå­˜æ”¾åœ¨è¯¥å¯¹è±¡æ‰€å¯¹åº”çš„å­˜å‚¨ç©ºé—´ä¸­. æ¯ä¸€ä¸ªå¯¹è±¡å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆ,æŒ‡å‘ä»–çš„ç±»å¯¹è±¡,ç±»å¯¹è±¡ä¸­å­˜æ”¾ç€æœ¬å¯¹è±¡çš„ å¯¹è±¡æ–¹æ³•åˆ—è¡¨ï¼ˆå¯¹è±¡èƒ½å¤Ÿæ¥æ”¶çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œä¿å­˜åœ¨å®ƒæ‰€å¯¹åº”çš„ç±»å¯¹è±¡ä¸­ï¼‰ æˆå‘˜å˜é‡çš„åˆ—è¡¨, å±æ€§åˆ—è¡¨, å®ƒå†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å…ƒå¯¹è±¡(meta class),å…ƒå¯¹è±¡å†…éƒ¨å­˜æ”¾çš„æ˜¯ç±»æ–¹æ³•åˆ—è¡¨,ç±»å¯¹è±¡å†…éƒ¨è¿˜æœ‰ä¸€ä¸ªsuperclassçš„æŒ‡é’ˆ,æŒ‡å‘ä»–çš„çˆ¶ç±»å¯¹è±¡ã€‚ æ¯ä¸ª Objective-C å¯¹è±¡éƒ½æœ‰ç›¸åŒçš„ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç¿»è¯‘è¿‡æ¥å°±æ˜¯ Objective-C å¯¹è±¡çš„ç»“æ„å›¾ ISAæŒ‡é’ˆ æ ¹ç±»çš„å®ä¾‹å˜é‡ å€’æ•°ç¬¬äºŒå±‚çˆ¶ç±»çš„å®ä¾‹å˜é‡ â€¦ çˆ¶ç±»çš„å®ä¾‹å˜é‡ ç±»çš„å®ä¾‹å˜é‡ æ ¹å¯¹è±¡å°±æ˜¯NSObjectï¼Œå®ƒçš„superclassæŒ‡é’ˆæŒ‡å‘nil ç±»å¯¹è±¡æ—¢ç„¶ç§°ä¸ºå¯¹è±¡ï¼Œé‚£å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå®ä¾‹ã€‚ç±»å¯¹è±¡ä¸­ä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å®ƒçš„å…ƒç±»(meta class)ï¼Œå³ç±»å¯¹è±¡æ˜¯å…ƒç±»çš„å®ä¾‹ã€‚å…ƒç±»å†…éƒ¨å­˜æ”¾çš„æ˜¯ç±»æ–¹æ³•åˆ—è¡¨ï¼Œæ ¹å…ƒç±»çš„isaæŒ‡é’ˆæŒ‡å‘è‡ªå·±ï¼ŒsuperclassæŒ‡é’ˆæŒ‡å‘NSObjectç±»ã€‚ å¦‚å›¾: 20. ä¸€ä¸ªobjcå¯¹è±¡çš„isaçš„æŒ‡é’ˆæŒ‡å‘ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼ŸæŒ‡å‘ä»–çš„ç±»å¯¹è±¡,ä»è€Œå¯ä»¥æ‰¾åˆ°å¯¹è±¡ä¸Šçš„æ–¹æ³• 21. ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ 1234567891011@implementation Son : Father- (id)init{ self = [super init]; if (self) { NSLog(@&quot;%@&quot;, NSStringFromClass([self class])); NSLog(@&quot;%@&quot;, NSStringFromClass([super class])); } return self;}@end ç­”æ¡ˆï¼š éƒ½è¾“å‡º Son NSStringFromClass([self class]) = Son NSStringFromClass([super class]) = Sonè¿™ä¸ªé¢˜ç›®ä¸»è¦æ˜¯è€ƒå¯Ÿå…³äº Objective-C ä¸­å¯¹ self å’Œ super çš„ç†è§£ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ï¼šself æ˜¯ç±»çš„éšè—å‚æ•°ï¼ŒæŒ‡å‘å½“å‰è°ƒç”¨æ–¹æ³•çš„è¿™ä¸ªç±»çš„å®ä¾‹ã€‚é‚£ super å‘¢ï¼Ÿ å¾ˆå¤šäººä¼šæƒ³å½“ç„¶çš„è®¤ä¸ºâ€œ super å’Œ self ç±»ä¼¼ï¼Œåº”è¯¥æ˜¯æŒ‡å‘çˆ¶ç±»çš„æŒ‡é’ˆå§ï¼â€ã€‚è¿™æ˜¯å¾ˆæ™®éçš„ä¸€ä¸ªè¯¯åŒºã€‚å…¶å® super æ˜¯ä¸€ä¸ª Magic Keywordï¼Œ å®ƒæœ¬è´¨æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨æ ‡ç¤ºç¬¦ï¼Œå’Œ self æ˜¯æŒ‡å‘çš„åŒä¸€ä¸ªæ¶ˆæ¯æ¥å—è€…ï¼ä»–ä»¬ä¸¤ä¸ªçš„ä¸åŒç‚¹åœ¨äºï¼šsuper ä¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè°ƒç”¨ class è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œè¦å»çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æœ¬ç±»é‡Œçš„ã€‚ ä¸Šé¢çš„ä¾‹å­ä¸ç®¡è°ƒç”¨[self class]è¿˜æ˜¯[super class]ï¼Œæ¥å—æ¶ˆæ¯çš„å¯¹è±¡éƒ½æ˜¯å½“å‰ Son ï¼Šxxx è¿™ä¸ªå¯¹è±¡ã€‚ å½“ä½¿ç”¨ self è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šä»å½“å‰ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä»çˆ¶ç±»ä¸­å†æ‰¾ï¼›è€Œå½“ä½¿ç”¨ super æ—¶ï¼Œåˆ™ä»çˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ã€‚ç„¶åè°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•ã€‚ è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¯´â€œä¸æ¨èåœ¨ init æ–¹æ³•ä¸­ä½¿ç”¨ç‚¹è¯­æ³•â€ï¼Œå¦‚æœæƒ³è®¿é—®å®ä¾‹å˜é‡ iVar åº”è¯¥ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ _iVar ï¼‰ï¼Œè€Œéç‚¹è¯­æ³•ï¼ˆ self.iVar ï¼‰ã€‚ ç‚¹è¯­æ³•ï¼ˆ self.iVar ï¼‰çš„åå¤„å°±æ˜¯å­ç±»æœ‰å¯èƒ½è¦†å†™ setter ã€‚å‡è®¾ Person æœ‰ä¸€ä¸ªå­ç±»å« ChenPersonï¼Œè¿™ä¸ªå­ç±»ä¸“é—¨è¡¨ç¤ºé‚£äº›å§“â€œé™ˆâ€çš„äººã€‚è¯¥å­ç±»å¯èƒ½ä¼šè¦†å†™ lastName å±æ€§æ‰€å¯¹åº”çš„è®¾ç½®æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//// ChenPerson.m// //// Created by https://github.com/ChenYilong on 15/8/30.// Copyright (c) 2015å¹´ https://weibo.com/luohanchenyilong/ å¾®åš@iOSç¨‹åºçŠ­è¢. All rights reserved.//#import &quot;ChenPerson.h&quot;@implementation ChenPerson@synthesize lastName = _lastName;- (instancetype)init{ self = [super init]; if (self) { NSLog(@&quot;ğŸ”´ç±»åä¸æ–¹æ³•åï¼š%sï¼ˆåœ¨ç¬¬%dè¡Œï¼‰ï¼Œæè¿°ï¼š%@&quot;, __PRETTY_FUNCTION__, __LINE__, NSStringFromClass([self class])); NSLog(@&quot;ğŸ”´ç±»åä¸æ–¹æ³•åï¼š%sï¼ˆåœ¨ç¬¬%dè¡Œï¼‰ï¼Œæè¿°ï¼š%@&quot;, __PRETTY_FUNCTION__, __LINE__, NSStringFromClass([super class])); } return self;}- (void)setLastName:(NSString*)lastName{ //è®¾ç½®æ–¹æ³•ä¸€ï¼šå¦‚æœsetteré‡‡ç”¨æ˜¯è¿™ç§æ–¹å¼ï¼Œå°±å¯èƒ½å¼•èµ·å´©æºƒ// if (![lastName isEqualToString:@&quot;é™ˆ&quot;])// {// [NSException raise:NSInvalidArgumentException format:@&quot;å§“ä¸æ˜¯é™ˆ&quot;];// }// _lastName = lastName; //è®¾ç½®æ–¹æ³•äºŒï¼šå¦‚æœsetteré‡‡ç”¨æ˜¯è¿™ç§æ–¹å¼ï¼Œå°±å¯èƒ½å¼•èµ·å´©æºƒ _lastName = @&quot;é™ˆ&quot;; NSLog(@&quot;ğŸ”´ç±»åä¸æ–¹æ³•åï¼š%sï¼ˆåœ¨ç¬¬%dè¡Œï¼‰ï¼Œæè¿°ï¼š%@&quot;, __PRETTY_FUNCTION__, __LINE__, @&quot;ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•,æƒ³ä¸€ä¸‹ä¸ºä»€ä¹ˆï¼Ÿ&quot;);}@end åœ¨åŸºç±» Person çš„é»˜è®¤åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œå¯èƒ½ä¼šå°†å§“æ°è®¾ä¸ºç©ºå­—ç¬¦ä¸²ã€‚æ­¤æ—¶è‹¥ä½¿ç”¨ç‚¹è¯­æ³•ï¼ˆ self.lastName ï¼‰ä¹Ÿå³ setter è®¾ç½®æ–¹æ³•ï¼Œé‚£ä¹ˆè°ƒç”¨å°†ä¼šæ˜¯å­ç±»çš„è®¾ç½®æ–¹æ³•ï¼Œå¦‚æœåœ¨åˆšåˆšçš„ setter ä»£ç ä¸­é‡‡ç”¨è®¾ç½®æ–¹æ³•ä¸€ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œ ä¸ºäº†æ–¹ä¾¿é‡‡ç”¨æ‰“å°çš„æ–¹å¼å±•ç¤ºï¼Œç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬ä½¿ç”¨è®¾ç½®æ–¹æ³•äºŒã€‚ å¦‚æœåŸºç±»çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š 123456789101112131415161718192021222324252627282930//// Person.m// nilå¯¹è±¡è°ƒç”¨ç‚¹è¯­æ³•//// Created by https://github.com/ChenYilong on 15/8/29.// Copyright (c) 2015å¹´ https://weibo.com/luohanchenyilong/ å¾®åš@iOSç¨‹åºçŠ­è¢. All rights reserved.// #import &quot;Person.h&quot;@implementation Person- (instancetype)init{ self = [super init]; if (self) { self.lastName = @&quot;&quot;; //NSLog(@&quot;ğŸ”´ç±»åä¸æ–¹æ³•åï¼š%sï¼ˆåœ¨ç¬¬%dè¡Œï¼‰ï¼Œæè¿°ï¼š%@&quot;, __PRETTY_FUNCTION__, __LINE__, NSStringFromClass([self class])); //NSLog(@&quot;ğŸ”´ç±»åä¸æ–¹æ³•åï¼š%sï¼ˆåœ¨ç¬¬%dè¡Œï¼‰ï¼Œæè¿°ï¼š%@&quot;, __PRETTY_FUNCTION__, __LINE__, self.lastName); } return self;}- (void)setLastName:(NSString*)lastName{ NSLog(@&quot;ğŸ”´ç±»åä¸æ–¹æ³•åï¼š%sï¼ˆåœ¨ç¬¬%dè¡Œï¼‰ï¼Œæè¿°ï¼š%@&quot;, __PRETTY_FUNCTION__, __LINE__, @&quot;æ ¹æœ¬ä¸ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•&quot;); _lastName = @&quot;ç‚é»„&quot;;}@end é‚£ä¹ˆæ‰“å°ç»“æœå°†ä¼šæ˜¯è¿™æ ·çš„ï¼š 123ğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[ChenPerson setLastName:]ï¼ˆåœ¨ç¬¬36è¡Œï¼‰ï¼Œæè¿°ï¼šä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•,æƒ³ä¸€ä¸‹ä¸ºä»€ä¹ˆï¼ŸğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[ChenPerson init]ï¼ˆåœ¨ç¬¬19è¡Œï¼‰ï¼Œæè¿°ï¼šChenPersonğŸ”´ç±»åä¸æ–¹æ³•åï¼š-[ChenPerson init]ï¼ˆåœ¨ç¬¬20è¡Œï¼‰ï¼Œæè¿°ï¼šChenPerson æˆ‘åœ¨ä»“åº“é‡Œä¹Ÿç»™å‡ºäº†ä¸€ä¸ªç›¸åº”çš„ Demoï¼ˆåå­—å«ï¼šDemo_21é¢˜_ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼‰ã€‚æœ‰å…´è¶£å¯ä»¥è·‘èµ·æ¥çœ‹ä¸€ä¸‹ï¼Œä¸»è¦çœ‹ä¸‹ä»–æ˜¯æ€ä¹ˆæ‰“å°çš„ï¼Œæ€è€ƒä¸‹ä¸ºä»€ä¹ˆè¿™ä¹ˆæ‰“å°ã€‚ æ¥ä¸‹æ¥è®©æˆ‘ä»¬åˆ©ç”¨ runtime çš„ç›¸å…³çŸ¥è¯†æ¥éªŒè¯ä¸€ä¸‹ super å…³é”®å­—çš„æœ¬è´¨ï¼Œä½¿ç”¨clangé‡å†™å‘½ä»¤: 1$ clang -rewrite-objc test.m å°†è¿™é“é¢˜ç›®ä¸­ç»™å‡ºçš„ä»£ç è¢«è½¬åŒ–ä¸º: 123NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gm_0jk35cwn1d3326x0061qym280000gn_T_main_a5cecc_mi_0, NSStringFromClass(((Class (*)(id, SEL))(void *)objc_msgSend)((id)self, sel_registerName(&quot;class&quot;))));NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gm_0jk35cwn1d3326x0061qym280000gn_T_main_a5cecc_mi_1, NSStringFromClass(((Class (*)(__rw_objc_super *, SEL))(void *)objc_msgSendSuper)((__rw_objc_super){ (id)self, (id)class_getSuperclass(objc_getClass(&quot;Son&quot;)) }, sel_registerName(&quot;class&quot;)))); ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨è°ƒç”¨ [self class] æ—¶ï¼Œä¼šè½¬åŒ–æˆ objc_msgSendå‡½æ•°ã€‚çœ‹ä¸‹å‡½æ•°å®šä¹‰ï¼š 1id objc_msgSend(id self, SEL op, ...) æˆ‘ä»¬æŠŠ self åšä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’è¿›å»ã€‚ è€Œåœ¨è°ƒç”¨ [super class]æ—¶ï¼Œä¼šè½¬åŒ–æˆ objc_msgSendSuperå‡½æ•°ã€‚çœ‹ä¸‹å‡½æ•°å®šä¹‰: 1id objc_msgSendSuper(struct objc_super *super, SEL op, ...) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ objc_super è¿™æ ·ä¸€ä¸ªç»“æ„ä½“ï¼Œå…¶å®šä¹‰å¦‚ä¸‹: 1234struct objc_super { __unsafe_unretained id receiver; __unsafe_unretained Class super_class;}; ç»“æ„ä½“æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯ receiver, ç±»ä¼¼äºä¸Šé¢çš„ objc_msgSendå‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°self ã€‚ç¬¬äºŒä¸ªæˆå‘˜æ˜¯è®°å½•å½“å‰ç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆã€‚ æ‰€ä»¥ï¼Œå½“è°ƒç”¨ ï¼»self class] æ—¶ï¼Œå®é™…å…ˆè°ƒç”¨çš„æ˜¯ objc_msgSendå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Sonå½“å‰çš„è¿™ä¸ªå®ä¾‹ï¼Œç„¶ååœ¨ Son è¿™ä¸ªç±»é‡Œé¢å»æ‰¾ - (Class)classè¿™ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰ï¼Œå»çˆ¶ç±» Fatheré‡Œæ‰¾ï¼Œä¹Ÿæ²¡æœ‰ï¼Œæœ€ååœ¨ NSObjectç±»ä¸­å‘ç°è¿™ä¸ªæ–¹æ³•ã€‚è€Œ - (Class)classçš„å®ç°å°±æ˜¯è¿”å›selfçš„ç±»åˆ«ï¼Œæ•…ä¸Šè¿°è¾“å‡ºç»“æœä¸º Sonã€‚ objc Runtimeå¼€æºä»£ç å¯¹- (Class)classæ–¹æ³•çš„å®ç°: 123- (Class)class { return object_getClass(self);} è€Œå½“è°ƒç”¨ [super class]æ—¶ï¼Œä¼šè½¬æ¢æˆobjc_msgSendSuperå‡½æ•°ã€‚ç¬¬ä¸€æ­¥å…ˆæ„é€  objc_super ç»“æ„ä½“ï¼Œç»“æ„ä½“ç¬¬ä¸€ä¸ªæˆå‘˜å°±æ˜¯ self ã€‚ç¬¬äºŒä¸ªæˆå‘˜æ˜¯ (id)class_getSuperclass(objc_getClass(â€œSonâ€)) , å®é™…è¯¥å‡½æ•°è¾“å‡ºç»“æœä¸º Fatherã€‚ ç¬¬äºŒæ­¥æ˜¯å» Fatherè¿™ä¸ªç±»é‡Œå»æ‰¾ - (Class)classï¼Œæ²¡æœ‰ï¼Œç„¶åå»NSObjectç±»å»æ‰¾ï¼Œæ‰¾åˆ°äº†ã€‚æœ€åå†…éƒ¨æ˜¯ä½¿ç”¨ objc_msgSend(objc_super-&gt;receiver, @selector(class))å»è°ƒç”¨ï¼Œ æ­¤æ—¶å·²ç»å’Œ[self class]è°ƒç”¨ç›¸åŒäº†ï¼Œæ•…ä¸Šè¿°è¾“å‡ºç»“æœä»ç„¶è¿”å› Sonã€‚ å‚è€ƒé“¾æ¥ï¼šå¾®åš@Chun_iOSçš„åšæ–‡åˆ¨æ ¹é—®åº•Objectiveï¼C Runtimeï¼ˆ1ï¼‰ï¼ Self &amp; Super 22. runtimeå¦‚ä½•é€šè¿‡selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€ï¼Ÿï¼ˆåˆ†åˆ«è€ƒè™‘ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼‰æ¯ä¸€ä¸ªç±»å¯¹è±¡ä¸­éƒ½ä¸€ä¸ªæ–¹æ³•åˆ—è¡¨,æ–¹æ³•åˆ—è¡¨ä¸­è®°å½•ç€æ–¹æ³•çš„åç§°,æ–¹æ³•å®ç°,ä»¥åŠå‚æ•°ç±»å‹,å…¶å®selectoræœ¬è´¨å°±æ˜¯æ–¹æ³•åç§°,é€šè¿‡è¿™ä¸ªæ–¹æ³•åç§°å°±å¯ä»¥åœ¨æ–¹æ³•åˆ—è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•å®ç°. 23. ä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾ä¹ˆï¼Ÿ åœ¨ARCä¸‹ä¸éœ€è¦ã€‚ åœ¨MRCä¸­,å¯¹äºä½¿ç”¨retainæˆ–copyç­–ç•¥çš„éœ€è¦ ã€‚åœ¨MRCä¸‹ä¹Ÿä¸éœ€è¦ æ— è®ºåœ¨MRCä¸‹è¿˜æ˜¯ARCä¸‹å‡ä¸éœ€è¦ã€‚ 2011å¹´ç‰ˆæœ¬çš„Apple API å®˜æ–¹æ–‡æ¡£ - Associative References ä¸€èŠ‚ä¸­æœ‰ä¸€ä¸ªMRCç¯å¢ƒä¸‹çš„ä¾‹å­ï¼š 12345678910111213141516171819202122232425// åœ¨MRCä¸‹ï¼Œä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œä¸éœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾// https://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)// https://github.com/ChenYilong// æ‘˜è‡ª2011å¹´ç‰ˆæœ¬çš„Apple API å®˜æ–¹æ–‡æ¡£ - Associative References static char overviewKey; NSArray *array = [[NSArray alloc] initWithObjects:@&quot;One&quot;, @&quot;Two&quot;, @&quot;Three&quot;, nil];// For the purposes of illustration, use initWithFormat: to ensure// the string can be deallocatedNSString *overview = [[NSString alloc] initWithFormat:@&quot;%@&quot;, @&quot;First three numbers&quot;]; objc_setAssociatedObject ( array, &amp;overviewKey, overview, OBJC_ASSOCIATION_RETAIN); [overview release];// (1) overview valid[array release];// (2) overview invalid æ–‡æ¡£æŒ‡å‡º At point 1, the string overview is still valid because the OBJC_ASSOCIATION_RETAIN policy specifies that the array retains the associated object. When the array is deallocated, however (at point 2), overview is released and so in this case also deallocated. æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨[array release];ä¹‹åï¼Œoverviewå°±ä¼šè¢«releaseé‡Šæ”¾æ‰äº†ã€‚ æ—¢ç„¶ä¼šè¢«é”€æ¯ï¼Œé‚£ä¹ˆå…·ä½“åœ¨ä»€ä¹ˆæ—¶é—´ç‚¹ï¼Ÿ æ ¹æ® WWDC 2011, Session 322 (ç¬¬36åˆ†22ç§’) ä¸­å‘å¸ƒçš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ï¼Œè¢«å…³è”çš„å¯¹è±¡åœ¨ç”Ÿå‘½å‘¨æœŸå†…è¦æ¯”å¯¹è±¡æœ¬èº«é‡Šæ”¾çš„æ™šå¾ˆå¤šã€‚å®ƒä»¬ä¼šåœ¨è¢« NSObject -dealloc è°ƒç”¨çš„ object_dispose() æ–¹æ³•ä¸­é‡Šæ”¾ã€‚ å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ï¼Œåˆ†å››ä¸ªæ­¥éª¤ï¼š // å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ // https://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢) // https://github.com/ChenYilong // æ ¹æ® WWDC 2011, Session 322 (36åˆ†22ç§’)ä¸­å‘å¸ƒçš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ 1. è°ƒç”¨ -release ï¼šå¼•ç”¨è®¡æ•°å˜ä¸ºé›¶ * å¯¹è±¡æ­£åœ¨è¢«é”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸå³å°†ç»“æŸ. * ä¸èƒ½å†æœ‰æ–°çš„ __weak å¼±å¼•ç”¨ï¼Œ å¦åˆ™å°†æŒ‡å‘ nil. * è°ƒç”¨ [self dealloc] 2. å­ç±» è°ƒç”¨ -dealloc * ç»§æ‰¿å…³ç³»ä¸­æœ€åº•å±‚çš„å­ç±» åœ¨è°ƒç”¨ -dealloc * å¦‚æœæ˜¯ MRC ä»£ç  åˆ™ä¼šæ‰‹åŠ¨é‡Šæ”¾å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰ * ç»§æ‰¿å…³ç³»ä¸­æ¯ä¸€å±‚çš„çˆ¶ç±» éƒ½åœ¨è°ƒç”¨ -dealloc 3. NSObject è°ƒ -dealloc * åªåšä¸€ä»¶äº‹ï¼šè°ƒç”¨ Objective-C runtime ä¸­çš„ object_dispose() æ–¹æ³• 4. è°ƒç”¨ object_dispose() * ä¸º C++ çš„å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰è°ƒç”¨ destructors * ä¸º ARC çŠ¶æ€ä¸‹çš„ å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰ è°ƒç”¨ -release * è§£é™¤æ‰€æœ‰ä½¿ç”¨ runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ * è§£é™¤æ‰€æœ‰ __weak å¼•ç”¨ * è°ƒç”¨ free()å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ï¼šå‚è€ƒé“¾æ¥ã€‚ 24. objcä¸­çš„ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«å’Œè”ç³»ï¼Ÿç±»æ–¹æ³•ï¼š ç±»æ–¹æ³•æ˜¯å±äºç±»å¯¹è±¡çš„ ç±»æ–¹æ³•åªèƒ½é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨ ç±»æ–¹æ³•ä¸­çš„selfæ˜¯ç±»å¯¹è±¡ ç±»æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–çš„ç±»æ–¹æ³• ç±»æ–¹æ³•ä¸­ä¸èƒ½è®¿é—®æˆå‘˜å˜é‡ ç±»æ–¹æ³•ä¸­ä¸èƒ½ç›´æ¥è°ƒç”¨å¯¹è±¡æ–¹æ³• å®ä¾‹æ–¹æ³•ï¼š å®ä¾‹æ–¹æ³•æ˜¯å±äºå®ä¾‹å¯¹è±¡çš„ å®ä¾‹æ–¹æ³•åªèƒ½é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨ å®ä¾‹æ–¹æ³•ä¸­çš„selfæ˜¯å®ä¾‹å¯¹è±¡ å®ä¾‹æ–¹æ³•ä¸­å¯ä»¥è®¿é—®æˆå‘˜å˜é‡ å®ä¾‹æ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨å®ä¾‹æ–¹æ³• å®ä¾‹æ–¹æ³•ä¸­ä¹Ÿå¯ä»¥è°ƒç”¨ç±»æ–¹æ³•(é€šè¿‡ç±»å) 25. _objc_msgForwardå‡½æ•°æ˜¯åšä»€ä¹ˆçš„ï¼Œç›´æ¥è°ƒç”¨å®ƒå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ _objc_msgForwardæ˜¯ IMP ç±»å‹ï¼Œç”¨äºæ¶ˆæ¯è½¬å‘çš„ï¼šå½“å‘ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å®ç°çš„æ—¶å€™ï¼Œ_objc_msgForwardä¼šå°è¯•åšæ¶ˆæ¯è½¬å‘ã€‚ æˆ‘ä»¬å¯ä»¥è¿™æ ·åˆ›å»ºä¸€ä¸ª_objc_msgForwardå¯¹è±¡ï¼š IMP msgForwardIMP = _objc_msgForward;åœ¨ä¸Šç¯‡ä¸­çš„ã€Šobjcä¸­å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯[obj foo]å’Œobjc_msgSend()å‡½æ•°ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿã€‹æ›¾æåˆ°objc_msgSendåœ¨â€œæ¶ˆæ¯ä¼ é€’â€ä¸­çš„ä½œç”¨ã€‚åœ¨â€œæ¶ˆæ¯ä¼ é€’â€è¿‡ç¨‹ä¸­ï¼Œobjc_msgSendçš„åŠ¨ä½œæ¯”è¾ƒæ¸…æ™°ï¼šé¦–å…ˆåœ¨ Class ä¸­çš„ç¼“å­˜æŸ¥æ‰¾ IMP ï¼ˆæ²¡ç¼“å­˜åˆ™åˆå§‹åŒ–ç¼“å­˜ï¼‰ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œåˆ™å‘çˆ¶ç±»çš„ Class æŸ¥æ‰¾ã€‚å¦‚æœä¸€ç›´æŸ¥æ‰¾åˆ°æ ¹ç±»ä»æ—§æ²¡æœ‰å®ç°ï¼Œåˆ™ç”¨_objc_msgForwardå‡½æ•°æŒ‡é’ˆä»£æ›¿ IMP ã€‚æœ€åï¼Œæ‰§è¡Œè¿™ä¸ª IMP ã€‚ Objective-Cè¿è¡Œæ—¶æ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒçš„å®ç°ã€‚æ‰“å¼€ Apple Open Source é‡ŒMacä»£ç é‡Œçš„objåŒ… ä¸‹è½½ä¸€ä¸ªæœ€æ–°ç‰ˆæœ¬ï¼Œæ‰¾åˆ° objc-runtime-new.mmï¼Œè¿›å…¥ä¹‹åæœç´¢_objc_msgForwardã€‚ é‡Œé¢æœ‰å¯¹_objc_msgForwardçš„åŠŸèƒ½è§£é‡Šï¼š 123456789101112/************************************************************************ lookUpImpOrForward.* The standard IMP lookup. * initialize==NO tries to avoid +initialize (but sometimes fails)* cache==NO skips optimistic unlocked lookup (but uses cache elsewhere)* Most callers should use initialize==YES and cache==YES.* inst is an instance of cls or a subclass thereof, or nil if none is known. * If cls is an un-initialized metaclass then a non-nil inst is faster.* May return _objc_msgForward_impcache. IMPs destined for external use * must be converted to _objc_msgForward or _objc_msgForward_stret.* If you don&apos;t want forwarding at all, use lookUpImpOrNil() instead.**********************************************************************/ å¯¹ objc-runtime-new.mmæ–‡ä»¶é‡Œä¸_objc_msgForwardæœ‰å…³çš„ä¸‰ä¸ªå‡½æ•°ä½¿ç”¨ä¼ªä»£ç å±•ç¤ºä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435// objc-runtime-new.mm æ–‡ä»¶é‡Œä¸ _objc_msgForward æœ‰å…³çš„ä¸‰ä¸ªå‡½æ•°ä½¿ç”¨ä¼ªä»£ç å±•ç¤º// Created by https://github.com/ChenYilong// Copyright (c) å¾®åš@iOSç¨‹åºçŠ­è¢(https://weibo.com/luohanchenyilong/). All rights reserved.// åŒæ—¶ï¼Œè¿™ä¹Ÿæ˜¯ obj_msgSend çš„å®ç°è¿‡ç¨‹id objc_msgSend(id self, SEL op, ...) { if (!self) return nil; IMP imp = class_getMethodImplementation(self-&gt;isa, SEL op); imp(self, op, ...); //è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä¼ªä»£ç ...} //æŸ¥æ‰¾IMPIMP class_getMethodImplementation(Class cls, SEL sel) { if (!cls || !sel) return nil; IMP imp = lookUpImpOrNil(cls, sel); if (!imp) return _objc_msgForward; //_objc_msgForward ç”¨äºæ¶ˆæ¯è½¬å‘ return imp;} IMP lookUpImpOrNil(Class cls, SEL sel) { if (!cls-&gt;initialize()) { _class_initialize(cls); } Class curClass = cls; IMP imp = nil; do { //å…ˆæŸ¥ç¼“å­˜,ç¼“å­˜æ²¡æœ‰æ—¶é‡å»º,ä»æ—§æ²¡æœ‰åˆ™å‘çˆ¶ç±»æŸ¥è¯¢ if (!curClass) break; if (!curClass-&gt;cache) fill_cache(cls, curClass); imp = cache_getImp(curClass, sel); if (imp) break; } while (curClass = curClass-&gt;superclass); return imp;} è™½ç„¶Appleæ²¡æœ‰å…¬å¼€_objc_msgForwardçš„å®ç°æºç ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯èƒ½å¾—å‡ºç»“è®ºï¼š _objc_msgForwardæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ˆå’Œ IMP çš„ç±»å‹ä¸€æ ·ï¼‰ï¼Œæ˜¯ç”¨äºæ¶ˆæ¯è½¬å‘çš„ï¼šå½“å‘ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å®ç°çš„æ—¶å€™ï¼Œ_objc_msgForwardä¼šå°è¯•åšæ¶ˆæ¯è½¬å‘ã€‚ åœ¨ä¸Šç¯‡ä¸­çš„ã€Šobjcä¸­å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯[obj foo]å’Œobjc_msgSend()å‡½æ•°ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿã€‹æ›¾æåˆ°objc_msgSendåœ¨â€œæ¶ˆæ¯ä¼ é€’â€ä¸­çš„ä½œç”¨ã€‚åœ¨â€œæ¶ˆæ¯ä¼ é€’â€è¿‡ç¨‹ä¸­ï¼Œobjc_msgSendçš„åŠ¨ä½œæ¯”è¾ƒæ¸…æ™°ï¼šé¦–å…ˆåœ¨ Class ä¸­çš„ç¼“å­˜æŸ¥æ‰¾ IMP ï¼ˆæ²¡ç¼“å­˜åˆ™åˆå§‹åŒ–ç¼“å­˜ï¼‰ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œåˆ™å‘çˆ¶ç±»çš„ Class æŸ¥æ‰¾ã€‚å¦‚æœä¸€ç›´æŸ¥æ‰¾åˆ°æ ¹ç±»ä»æ—§æ²¡æœ‰å®ç°ï¼Œåˆ™ç”¨_objc_msgForwardå‡½æ•°æŒ‡é’ˆä»£æ›¿ IMP ã€‚æœ€åï¼Œæ‰§è¡Œè¿™ä¸ª IMP ã€‚ ä¸ºäº†å±•ç¤ºæ¶ˆæ¯è½¬å‘çš„å…·ä½“åŠ¨ä½œï¼Œè¿™é‡Œå°è¯•å‘ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€æ¡é”™è¯¯çš„æ¶ˆæ¯ï¼Œå¹¶æŸ¥çœ‹ä¸€ä¸‹_objc_msgForwardæ˜¯å¦‚ä½•è¿›è¡Œè½¬å‘çš„ã€‚ é¦–å…ˆå¼€å¯è°ƒè¯•æ¨¡å¼ã€æ‰“å°å‡ºæ‰€æœ‰è¿è¡Œæ—¶å‘é€çš„æ¶ˆæ¯ï¼šå¯ä»¥åœ¨ä»£ç é‡Œæ‰§è¡Œä¸‹é¢çš„æ–¹æ³•ï¼š 1(void)instrumentObjcMessageSends(YES); å› ä¸ºè¯¥å‡½æ•°å¤„äº objc-internal.h å†…ï¼Œè€Œè¯¥æ–‡ä»¶å¹¶ä¸å¼€æ”¾ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ—¶å€™å…ˆå£°æ˜ï¼Œç›®çš„æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ç¨‹åºç›®æ ‡æ–‡ä»¶åŒ…å«è¯¥æ–¹æ³•å­˜åœ¨ï¼Œè®©ç¼–è¯‘é€šè¿‡ 123OBJC_EXPORT voidinstrumentObjcMessageSends(BOOL flag)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); æˆ–è€…æ–­ç‚¹æš‚åœç¨‹åºè¿è¡Œï¼Œå¹¶åœ¨ gdb ä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š 1call (void)instrumentObjcMessageSends(YES) ä»¥ç¬¬äºŒç§ä¸ºä¾‹ï¼Œæ“ä½œå¦‚ä¸‹æ‰€ç¤ºï¼š ä¹‹åï¼Œè¿è¡Œæ—¶å‘é€çš„æ‰€æœ‰æ¶ˆæ¯éƒ½ä¼šæ‰“å°åˆ°/tmp/msgSend-xxxxæ–‡ä»¶é‡Œäº†ã€‚ ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤å‰å¾€ï¼š 1open /private/tmp å¯èƒ½çœ‹åˆ°æœ‰å¤šæ¡ï¼Œæ‰¾åˆ°æœ€æ–°ç”Ÿæˆçš„ï¼ŒåŒå‡»æ‰“å¼€ åœ¨æ¨¡æ‹Ÿå™¨ä¸Šæ‰§è¡Œæ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼ˆè¿™ä¸€å¥—è°ƒè¯•æ–¹æ¡ˆä»…é€‚ç”¨äºæ¨¡æ‹Ÿå™¨ï¼ŒçœŸæœºä¸å¯ç”¨ï¼Œå…³äºè¯¥è°ƒè¯•æ–¹æ¡ˆçš„æ‹“å±•é“¾æ¥ï¼š Can the messages sent to an object in Objective-C be monitored or printed out? ï¼‰ï¼Œå‘ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€æ¡é”™è¯¯çš„æ¶ˆæ¯ï¼š 12345678910111213141516171819//// main.m// CYLObjcMsgForwardTest//// Created by https://weibo.com/luohanchenyilong/.// Copyright (c) 2015å¹´ å¾®åš@iOSç¨‹åºçŠ­è¢. All rights reserved.//#import &lt;UIKit/UIKit.h&gt;#import &quot;AppDelegate.h&quot;#import &quot;CYLTest.h&quot;int main(int argc, char * argv[]) { @autoreleasepool { CYLTest *test = [[CYLTest alloc] init]; [test performSelector:(@selector(iOSç¨‹åºçŠ­è¢))]; return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); }} ä½ å¯ä»¥åœ¨/tmp/msgSend-xxxxï¼ˆæˆ‘è¿™ä¸€æ¬¡æ˜¯/tmp/msgSend-9805ï¼‰æ–‡ä»¶é‡Œï¼Œçœ‹åˆ°æ‰“å°å‡ºæ¥ï¼š 1234567891011121314+ CYLTest NSObject initialize+ CYLTest NSObject alloc- CYLTest NSObject init- CYLTest NSObject performSelector:+ CYLTest NSObject resolveInstanceMethod:+ CYLTest NSObject resolveInstanceMethod:- CYLTest NSObject forwardingTargetForSelector:- CYLTest NSObject forwardingTargetForSelector:- CYLTest NSObject methodSignatureForSelector:- CYLTest NSObject methodSignatureForSelector:- CYLTest NSObject class- CYLTest NSObject doesNotRecognizeSelector:- CYLTest NSObject doesNotRecognizeSelector:- CYLTest NSObject class ç»“åˆã€ŠNSObjectå®˜æ–¹æ–‡æ¡£ã€‹ï¼Œæ’é™¤æ‰ NSObject åšçš„äº‹ï¼Œå‰©ä¸‹çš„å°±æ˜¯_objc_msgForwardæ¶ˆæ¯è½¬å‘åšçš„å‡ ä»¶äº‹ï¼š è°ƒç”¨resolveInstanceMethod:æ–¹æ³• (æˆ– resolveClassMethod:)ã€‚å…è®¸ç”¨æˆ·åœ¨æ­¤æ—¶ä¸ºè¯¥ Class åŠ¨æ€æ·»åŠ å®ç°ã€‚å¦‚æœæœ‰å®ç°äº†ï¼Œåˆ™è°ƒç”¨å¹¶è¿”å›YESï¼Œé‚£ä¹ˆé‡æ–°å¼€å§‹objc_msgSendæµç¨‹ã€‚è¿™ä¸€æ¬¡å¯¹è±¡ä¼šå“åº”è¿™ä¸ªé€‰æ‹©å™¨ï¼Œä¸€èˆ¬æ˜¯å› ä¸ºå®ƒå·²ç»è°ƒç”¨è¿‡class_addMethodã€‚å¦‚æœä»æ²¡å®ç°ï¼Œç»§ç»­ä¸‹é¢çš„åŠ¨ä½œã€‚ è°ƒç”¨forwardingTargetForSelector:æ–¹æ³•ï¼Œå°è¯•æ‰¾åˆ°ä¸€ä¸ªèƒ½å“åº”è¯¥æ¶ˆæ¯çš„å¯¹è±¡ã€‚å¦‚æœè·å–åˆ°ï¼Œåˆ™ç›´æ¥æŠŠæ¶ˆæ¯è½¬å‘ç»™å®ƒï¼Œè¿”å›é nil å¯¹è±¡ã€‚å¦åˆ™è¿”å› nil ï¼Œç»§ç»­ä¸‹é¢çš„åŠ¨ä½œã€‚æ³¨æ„ï¼Œè¿™é‡Œä¸è¦è¿”å› self ï¼Œå¦åˆ™ä¼šå½¢æˆæ­»å¾ªç¯ã€‚ è°ƒç”¨methodSignatureForSelector:æ–¹æ³•ï¼Œå°è¯•è·å¾—ä¸€ä¸ªæ–¹æ³•ç­¾åã€‚å¦‚æœè·å–ä¸åˆ°ï¼Œåˆ™ç›´æ¥è°ƒç”¨doesNotRecognizeSelectoræŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æœèƒ½è·å–ï¼Œåˆ™è¿”å›énilï¼šåˆ›å»ºä¸€ä¸ª NSlnvocation å¹¶ä¼ ç»™forwardInvocation:ã€‚ è°ƒç”¨forwardInvocation:æ–¹æ³•ï¼Œå°†ç¬¬3æ­¥è·å–åˆ°çš„æ–¹æ³•ç­¾ååŒ…è£…æˆ Invocation ä¼ å…¥ï¼Œå¦‚ä½•å¤„ç†å°±åœ¨è¿™é‡Œé¢äº†ï¼Œå¹¶è¿”å›énilã€‚ è°ƒç”¨doesNotRecognizeSelector: ï¼Œé»˜è®¤çš„å®ç°æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æœç¬¬3æ­¥æ²¡èƒ½è·å¾—ä¸€ä¸ªæ–¹æ³•ç­¾åï¼Œæ‰§è¡Œè¯¥æ­¥éª¤ã€‚ ä¸Šé¢å‰4ä¸ªæ–¹æ³•å‡æ˜¯æ¨¡æ¿æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥overrideï¼Œç”± runtime æ¥è°ƒç”¨ã€‚æœ€å¸¸è§çš„å®ç°æ¶ˆæ¯è½¬å‘ï¼šå°±æ˜¯é‡å†™æ–¹æ³•3å’Œ4ï¼Œåæ‰ä¸€ä¸ªæ¶ˆæ¯æˆ–è€…ä»£ç†ç»™å…¶ä»–å¯¹è±¡éƒ½æ˜¯æ²¡é—®é¢˜çš„ ä¹Ÿå°±æ˜¯è¯´_objc_msgForwardåœ¨è¿›è¡Œæ¶ˆæ¯è½¬å‘çš„è¿‡ç¨‹ä¸­ä¼šæ¶‰åŠä»¥ä¸‹è¿™å‡ ä¸ªæ–¹æ³•ï¼š resolveInstanceMethod:æ–¹æ³• (æˆ– resolveClassMethod:)ã€‚ forwardingTargetForSelector:æ–¹æ³• methodSignatureForSelector:æ–¹æ³• forwardInvocation:æ–¹æ³• doesNotRecognizeSelector: æ–¹æ³• ä¸ºäº†èƒ½æ›´æ¸…æ™°åœ°ç†è§£è¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œgitä»“åº“é‡Œä¹Ÿç»™å‡ºäº†ä¸€ä¸ªDemoï¼Œåç§°å«â€œ _objc_msgForward_demo â€,å¯è¿è¡Œèµ·æ¥çœ‹çœ‹ã€‚ ä¸‹é¢å›ç­”ä¸‹ç¬¬äºŒä¸ªé—®é¢˜â€œç›´æ¥_objc_msgForwardè°ƒç”¨å®ƒå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿâ€ ç›´æ¥è°ƒç”¨_objc_msgForwardæ˜¯éå¸¸å±é™©çš„äº‹ï¼Œå¦‚æœç”¨ä¸å¥½ä¼šç›´æ¥å¯¼è‡´ç¨‹åºCrashï¼Œä½†æ˜¯å¦‚æœç”¨å¾—å¥½ï¼Œèƒ½åšå¾ˆå¤šéå¸¸é…·çš„äº‹ã€‚ å°±å¥½åƒè·‘é…·ï¼Œå¹²å¾—å¥½ï¼Œå«â€œè€é…·â€ï¼Œå¹²ä¸å¥½å°±å«â€œä½œæ­»â€ã€‚ æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼š _objc_msgForwardæ˜¯ IMP ç±»å‹ï¼Œç”¨äºæ¶ˆæ¯è½¬å‘çš„ï¼šå½“å‘ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å®ç°çš„æ—¶å€™ï¼Œ_objc_msgForwardä¼šå°è¯•åšæ¶ˆæ¯è½¬å‘ã€‚ å¦‚ä½•è°ƒç”¨_objc_msgForwardï¼Ÿ_objc_msgForwardéš¶å± C è¯­è¨€ï¼Œæœ‰ä¸‰ä¸ªå‚æ•° ï¼š â€“ _objc_msgForwardå‚æ•° ç±»å‹ 1. æ‰€å±å¯¹è±¡ idç±»å‹ 2. æ–¹æ³•å SELç±»å‹ 3. å¯å˜å‚æ•° å¯å˜å‚æ•°ç±»å‹ é¦–å…ˆäº†è§£ä¸‹å¦‚ä½•è°ƒç”¨ IMP ç±»å‹çš„æ–¹æ³•ï¼ŒIMPç±»å‹æ˜¯å¦‚ä¸‹æ ¼å¼ï¼š ä¸ºäº†ç›´è§‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å®šä¹‰ä¸€ä¸ª IMPç±»å‹ ï¼š 1typedef void (*voidIMP)(id, SEL, ...) ä¸€æ—¦è°ƒç”¨_objc_msgForwardï¼Œå°†è·³è¿‡æŸ¥æ‰¾ IMP çš„è¿‡ç¨‹ï¼Œç›´æ¥è§¦å‘â€œæ¶ˆæ¯è½¬å‘â€ï¼Œ å¦‚æœè°ƒç”¨äº†_objc_msgForwardï¼Œå³ä½¿è¿™ä¸ªå¯¹è±¡ç¡®å®å·²ç»å®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œä½ ä¹Ÿä¼šå‘Šè¯‰objc_msgSendï¼š â€œæˆ‘æ²¡æœ‰åœ¨è¿™ä¸ªå¯¹è±¡é‡Œæ‰¾åˆ°è¿™ä¸ªæ–¹æ³•çš„å®ç°â€ æƒ³è±¡ä¸‹objc_msgSendä¼šæ€ä¹ˆåšï¼Ÿé€šå¸¸æƒ…å†µä¸‹ï¼Œä¸‹é¢è¿™å¼ å›¾å°±æ˜¯ä½ æ­£å¸¸èµ°objc_msgSendè¿‡ç¨‹ï¼Œå’Œç›´æ¥è°ƒç”¨_objc_msgForwardçš„å‰åå·®åˆ«ï¼š æœ‰å“ªäº›åœºæ™¯éœ€è¦ç›´æ¥è°ƒç”¨_objc_msgForwardï¼Ÿæœ€å¸¸è§çš„åœºæ™¯æ˜¯ï¼šä½ æƒ³è·å–æŸæ–¹æ³•æ‰€å¯¹åº”çš„NSInvocationå¯¹è±¡ã€‚ä¸¾ä¾‹è¯´æ˜ï¼š JSPatch ï¼ˆGithub é“¾æ¥ï¼‰å°±æ˜¯ç›´æ¥è°ƒç”¨_objc_msgForwardæ¥å®ç°å…¶æ ¸å¿ƒåŠŸèƒ½çš„ï¼š JSPatch ä»¥å°å·§çš„ä½“ç§¯åšåˆ°äº†è®©JSè°ƒç”¨/æ›¿æ¢ä»»æ„OCæ–¹æ³•ï¼Œè®©iOS APPå…·å¤‡çƒ­æ›´æ–°çš„èƒ½åŠ›ã€‚ ä½œè€…çš„åšæ–‡ã€ŠJSPatchå®ç°åŸç†è¯¦è§£ã€‹è¯¦ç»†è®°å½•äº†å®ç°åŸç†ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹ä¸‹ã€‚ åŒæ—¶ RAC(ReactiveCocoa) æºç ä¸­ä¹Ÿç”¨åˆ°äº†è¯¥æ–¹æ³•ã€‚ 26. runtimeå¦‚ä½•å®ç°weakå˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ runtime å¯¹æ³¨å†Œçš„ç±»ï¼Œ ä¼šè¿›è¡Œå¸ƒå±€ï¼Œå¯¹äº weak å¯¹è±¡ä¼šæ”¾å…¥ä¸€ä¸ª hash è¡¨ä¸­ã€‚ ç”¨ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€ä½œä¸º keyï¼Œå½“æ­¤å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ä¼š deallocï¼Œå‡å¦‚ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€æ˜¯aï¼Œé‚£ä¹ˆå°±ä¼šä»¥aä¸ºé”®ï¼Œ åœ¨è¿™ä¸ª weak è¡¨ä¸­æœç´¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ä»¥aä¸ºé”®çš„ weak å¯¹è±¡ï¼Œä»è€Œè®¾ç½®ä¸º nilã€‚ åœ¨ä¸Šç¯‡ä¸­çš„ã€Šruntime å¦‚ä½•å®ç° weak å±æ€§ã€‹æœ‰è®ºè¿°ã€‚ï¼ˆæ³¨ï¼šåœ¨ä¸Šç¯‡çš„ã€Šä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾ä¹ˆï¼Ÿã€‹é‡Œç»™å‡ºçš„â€œå¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨â€ä¹Ÿæåˆ°__weakå¼•ç”¨çš„è§£é™¤æ—¶é—´ã€‚ï¼‰ æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼ˆä¼ªä»£ç ï¼‰æ¥è¡¨ç¤ºä¸Šè¿°æœºåˆ¶ï¼š objc_storeWeak(&amp;a, b)å‡½æ•°ï¼š objc_storeWeakå‡½æ•°æŠŠç¬¬äºŒä¸ªå‚æ•°â€“èµ‹å€¼å¯¹è±¡ï¼ˆbï¼‰çš„å†…å­˜åœ°å€ä½œä¸ºé”®å€¼keyï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°â€“weakä¿®é¥°çš„å±æ€§å˜é‡ï¼ˆaï¼‰çš„å†…å­˜åœ°å€ï¼ˆ&amp;aï¼‰ä½œä¸ºvalueï¼Œæ³¨å†Œåˆ° weak è¡¨ä¸­ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ï¼ˆbï¼‰ä¸º0ï¼ˆnilï¼‰ï¼Œé‚£ä¹ˆæŠŠå˜é‡ï¼ˆaï¼‰çš„å†…å­˜åœ°å€ï¼ˆ&amp;aï¼‰ä»weakè¡¨ä¸­åˆ é™¤ï¼Œ ä½ å¯ä»¥æŠŠobjc_storeWeak(&amp;a, b)ç†è§£ä¸ºï¼šobjc_storeWeak(value, key)ï¼Œå¹¶ä¸”å½“keyå˜nilï¼Œå°†valueç½®nilã€‚ åœ¨bénilæ—¶ï¼Œaå’ŒbæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œåœ¨bå˜nilæ—¶ï¼Œaå˜nilã€‚æ­¤æ—¶å‘aå‘é€æ¶ˆæ¯ä¸ä¼šå´©æºƒï¼šåœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®‰å…¨çš„ã€‚ è€Œå¦‚æœaæ˜¯ç”±assignä¿®é¥°çš„ï¼Œåˆ™ï¼šåœ¨bénilæ—¶ï¼Œaå’ŒbæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œåœ¨bå˜nilæ—¶ï¼Œaè¿˜æ˜¯æŒ‡å‘è¯¥å†…å­˜åœ°å€ï¼Œå˜é‡æŒ‡é’ˆã€‚æ­¤æ—¶å‘aå‘é€æ¶ˆæ¯ææ˜“å´©æºƒã€‚ ä¸‹é¢æˆ‘ä»¬å°†åŸºäºobjc_storeWeak(&amp;a, b)å‡½æ•°ï¼Œä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿâ€œruntimeå¦‚ä½•å®ç°weakå±æ€§â€ï¼š 12345678// ä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿï¼šruntimeå¦‚ä½•å®ç°weakå±æ€§// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong id obj1; objc_initWeak(&amp;obj1, obj);/*objå¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œå˜é‡ä½œç”¨åŸŸç»“æŸ*/ objc_destroyWeak(&amp;obj1); ä¸‹é¢å¯¹ç”¨åˆ°çš„ä¸¤ä¸ªæ–¹æ³•objc_initWeakå’Œobjc_destroyWeakåšä¸‹è§£é‡Šï¼š æ€»ä½“è¯´æ¥ï¼Œä½œç”¨æ˜¯ï¼šé€šè¿‡objc_initWeakå‡½æ•°åˆå§‹åŒ–â€œé™„æœ‰weakä¿®é¥°ç¬¦çš„å˜é‡ï¼ˆobj1ï¼‰â€ï¼Œåœ¨å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶é€šè¿‡objc_destoryWeakå‡½æ•°é‡Šæ”¾è¯¥å˜é‡ï¼ˆobj1ï¼‰ã€‚ ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸‹æ–¹æ³•çš„å†…éƒ¨å®ç°ï¼š objc_initWeakå‡½æ•°çš„å®ç°æ˜¯è¿™æ ·çš„ï¼šåœ¨å°†â€œé™„æœ‰weakä¿®é¥°ç¬¦çš„å˜é‡ï¼ˆobj1ï¼‰â€åˆå§‹åŒ–ä¸º0ï¼ˆnilï¼‰åï¼Œä¼šå°†â€œèµ‹å€¼å¯¹è±¡â€ï¼ˆobjï¼‰ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨objc_storeWeakå‡½æ•°ã€‚ 12obj1 = 0ï¼›obj_storeWeak(&amp;obj1, obj); ä¹Ÿå°±æ˜¯è¯´ï¼š weak ä¿®é¥°çš„æŒ‡é’ˆé»˜è®¤å€¼æ˜¯ nil ï¼ˆåœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®‰å…¨çš„ï¼‰ ç„¶åobj_destroyWeakå‡½æ•°å°†0ï¼ˆnilï¼‰ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨objc_storeWeakå‡½æ•°ã€‚ objc_storeWeak(&amp;obj1, 0); å‰é¢çš„æºä»£ç ä¸ä¸‹åˆ—æºä»£ç ç›¸åŒã€‚ 123456789// ä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿï¼šruntimeå¦‚ä½•å®ç°weakå±æ€§// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilongid obj1;obj1 = 0;objc_storeWeak(&amp;obj1, obj);/* ... objçš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œè¢«ç½®nil ... */objc_storeWeak(&amp;obj1, 0); objc_storeWeakå‡½æ•°æŠŠç¬¬äºŒä¸ªå‚æ•°â€“èµ‹å€¼å¯¹è±¡ï¼ˆobjï¼‰çš„å†…å­˜åœ°å€ä½œä¸ºé”®å€¼ï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°â€“weakä¿®é¥°çš„å±æ€§å˜é‡ï¼ˆobj1ï¼‰çš„å†…å­˜åœ°å€æ³¨å†Œåˆ° weak è¡¨ä¸­ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ï¼ˆobjï¼‰ä¸º0ï¼ˆnilï¼‰ï¼Œé‚£ä¹ˆæŠŠå˜é‡ï¼ˆobj1ï¼‰çš„åœ°å€ä»weakè¡¨ä¸­åˆ é™¤ã€‚ 27. èƒ½å¦å‘ç¼–è¯‘åå¾—åˆ°çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿèƒ½å¦å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ ä¸èƒ½å‘ç¼–è¯‘åå¾—åˆ°çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼› èƒ½å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼› è§£é‡Šä¸‹ï¼š å› ä¸ºç¼–è¯‘åçš„ç±»å·²ç»æ³¨å†Œåœ¨ runtime ä¸­ï¼Œç±»ç»“æ„ä½“ä¸­çš„ objc_ivar_list å®ä¾‹å˜é‡çš„é“¾è¡¨ å’Œ instance_size å®ä¾‹å˜é‡çš„å†…å­˜å¤§å°å·²ç»ç¡®å®šï¼ŒåŒæ—¶runtime ä¼šè°ƒç”¨ class_setIvarLayout æˆ– class_setWeakIvarLayout æ¥å¤„ç† strong weak å¼•ç”¨ã€‚æ‰€ä»¥ä¸èƒ½å‘å­˜åœ¨çš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼› è¿è¡Œæ—¶åˆ›å»ºçš„ç±»æ˜¯å¯ä»¥æ·»åŠ å®ä¾‹å˜é‡ï¼Œè°ƒç”¨ class_addIvar å‡½æ•°ã€‚ä½†æ˜¯å¾—åœ¨è°ƒç”¨ objc_allocateClassPair ä¹‹åï¼Œobjc_registerClassPair ä¹‹å‰ï¼ŒåŸå› åŒä¸Šã€‚ 28. runloopå’Œçº¿ç¨‹æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿæ€»çš„è¯´æ¥ï¼ŒRun loopï¼Œæ­£å¦‚å…¶åï¼Œloopè¡¨ç¤ºæŸç§å¾ªç¯ï¼Œå’Œrunæ”¾åœ¨ä¸€èµ·å°±è¡¨ç¤ºä¸€ç›´åœ¨è¿è¡Œç€çš„å¾ªç¯ã€‚å®é™…ä¸Šï¼Œrun loopå’Œçº¿ç¨‹æ˜¯ç´§å¯†ç›¸è¿çš„ï¼Œå¯ä»¥è¿™æ ·è¯´run loopæ˜¯ä¸ºäº†çº¿ç¨‹è€Œç”Ÿï¼Œæ²¡æœ‰çº¿ç¨‹ï¼Œå®ƒå°±æ²¡æœ‰å­˜åœ¨çš„å¿…è¦ã€‚Run loopsæ˜¯çº¿ç¨‹çš„åŸºç¡€æ¶æ„éƒ¨åˆ†ï¼Œ Cocoa å’Œ CoreFundation éƒ½æä¾›äº† run loop å¯¹è±¡æ–¹ä¾¿é…ç½®å’Œç®¡ç†çº¿ç¨‹çš„ run loop ï¼ˆä»¥ä¸‹éƒ½ä»¥ Cocoa ä¸ºä¾‹ï¼‰ã€‚æ¯ä¸ªçº¿ç¨‹ï¼ŒåŒ…æ‹¬ç¨‹åºçš„ä¸»çº¿ç¨‹ï¼ˆ main thread ï¼‰éƒ½æœ‰ä¸ä¹‹ç›¸åº”çš„ run loop å¯¹è±¡ã€‚ runloop å’Œçº¿ç¨‹çš„å…³ç³»ï¼š ä¸»çº¿ç¨‹çš„run loopé»˜è®¤æ˜¯å¯åŠ¨çš„ã€‚ iOSçš„åº”ç”¨ç¨‹åºé‡Œé¢ï¼Œç¨‹åºå¯åŠ¨åä¼šæœ‰ä¸€ä¸ªå¦‚ä¸‹çš„main()å‡½æ•° 12345int main(int argc, char * argv[]) { @autoreleasepool { return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); }} é‡ç‚¹æ˜¯UIApplicationMain()å‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šä¸ºmain threadè®¾ç½®ä¸€ä¸ªNSRunLoopå¯¹è±¡ï¼Œè¿™å°±è§£é‡Šäº†ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬çš„åº”ç”¨å¯ä»¥åœ¨æ— äººæ“ä½œçš„æ—¶å€™ä¼‘æ¯ï¼Œéœ€è¦è®©å®ƒå¹²æ´»çš„æ—¶å€™åˆèƒ½ç«‹é©¬å“åº”ã€‚ å¯¹å…¶å®ƒçº¿ç¨‹æ¥è¯´ï¼Œrun loopé»˜è®¤æ˜¯æ²¡æœ‰å¯åŠ¨çš„ï¼Œå¦‚æœä½ éœ€è¦æ›´å¤šçš„çº¿ç¨‹äº¤äº’åˆ™å¯ä»¥æ‰‹åŠ¨é…ç½®å’Œå¯åŠ¨ï¼Œå¦‚æœçº¿ç¨‹åªæ˜¯å»æ‰§è¡Œä¸€ä¸ªé•¿æ—¶é—´çš„å·²ç¡®å®šçš„ä»»åŠ¡åˆ™ä¸éœ€è¦ã€‚ åœ¨ä»»ä½•ä¸€ä¸ª Cocoa ç¨‹åºçš„çº¿ç¨‹ä¸­ï¼Œéƒ½å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç æ¥è·å–åˆ°å½“å‰çº¿ç¨‹çš„ run loop ã€‚ 1NSRunLoop *runloop = [NSRunLoop currentRunLoop]; å‚è€ƒé“¾æ¥ï¼šã€ŠObjective-Cä¹‹run loopè¯¦è§£ã€‹ã€‚ 29. runloopçš„modeä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿmodel ä¸»è¦æ˜¯ç”¨æ¥æŒ‡å®šäº‹ä»¶åœ¨è¿è¡Œå¾ªç¯ä¸­çš„ä¼˜å…ˆçº§çš„ï¼Œåˆ†ä¸ºï¼š NSDefaultRunLoopModeï¼ˆkCFRunLoopDefaultModeï¼‰ï¼šé»˜è®¤ï¼Œç©ºé—²çŠ¶æ€ UITrackingRunLoopModeï¼šScrollViewæ»‘åŠ¨æ—¶ UIInitializationRunLoopModeï¼šå¯åŠ¨æ—¶ NSRunLoopCommonModesï¼ˆkCFRunLoopCommonModesï¼‰ï¼šModeé›†åˆ è‹¹æœå…¬å¼€æä¾›çš„ Mode æœ‰ä¸¤ä¸ªï¼š NSDefaultRunLoopModeï¼ˆkCFRunLoopDefaultModeï¼‰ NSRunLoopCommonModesï¼ˆkCFRunLoopCommonModesï¼‰ 30. ä»¥ä¸‹çš„æ–¹å¼è§¦å‘çš„timerï¼Œåœ¨æ»‘åŠ¨é¡µé¢ä¸Šçš„åˆ—è¡¨æ—¶ï¼Œtimerä¼šæš‚å®šå›è°ƒï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ+ scheduledTimerWithTimeIntervalâ€¦ RunLoopåªèƒ½è¿è¡Œåœ¨ä¸€ç§modeä¸‹ï¼Œå¦‚æœè¦æ¢modeï¼Œå½“å‰çš„loopä¹Ÿéœ€è¦åœä¸‹é‡å¯æˆæ–°çš„ã€‚åˆ©ç”¨è¿™ä¸ªæœºåˆ¶ï¼ŒScrollViewæ»šåŠ¨è¿‡ç¨‹ä¸­NSDefaultRunLoopModeï¼ˆkCFRunLoopDefaultModeï¼‰çš„modeä¼šåˆ‡æ¢åˆ°UITrackingRunLoopModeæ¥ä¿è¯ScrollViewçš„æµç•…æ»‘åŠ¨ï¼šåªèƒ½åœ¨NSDefaultRunLoopModeæ¨¡å¼ä¸‹å¤„ç†çš„äº‹ä»¶ä¼šå½±å“ScrollViewçš„æ»‘åŠ¨ã€‚ å¦‚æœæˆ‘ä»¬æŠŠä¸€ä¸ªNSTimerå¯¹è±¡ä»¥NSDefaultRunLoopModeï¼ˆkCFRunLoopDefaultModeï¼‰æ·»åŠ åˆ°ä¸»è¿è¡Œå¾ªç¯ä¸­çš„æ—¶å€™,ScrollViewæ»šåŠ¨è¿‡ç¨‹ä¸­ä¼šå› ä¸ºmodeçš„åˆ‡æ¢ï¼Œè€Œå¯¼è‡´NSTimerå°†ä¸å†è¢«è°ƒåº¦ã€‚ åŒæ—¶å› ä¸ºmodeè¿˜æ˜¯å¯å®šåˆ¶çš„ï¼Œæ‰€ä»¥ï¼š Timerè®¡æ—¶ä¼šè¢«scrollViewçš„æ»‘åŠ¨å½±å“çš„é—®é¢˜å¯ä»¥é€šè¿‡å°†timeræ·»åŠ åˆ°NSRunLoopCommonModesï¼ˆkCFRunLoopCommonModesï¼‰æ¥è§£å†³ã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617// // https://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)// https://github.com/ChenYilong//å°†timeræ·»åŠ åˆ°NSDefaultRunLoopModeä¸­[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];//ç„¶åå†æ·»åŠ åˆ°NSRunLoopCommonModesé‡ŒNSTimer *timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 31. çŒœæƒ³runloopå†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ ä¸€èˆ¬æ¥è®²ï¼Œä¸€ä¸ªçº¿ç¨‹ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæˆåçº¿ç¨‹å°±ä¼šé€€å‡ºã€‚å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœºåˆ¶ï¼Œè®©çº¿ç¨‹èƒ½éšæ—¶å¤„ç†äº‹ä»¶ä½†å¹¶ä¸é€€å‡ºï¼Œé€šå¸¸çš„ä»£ç é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š function loop() { initialize(); do { var message = get_next_message(); process_message(message); } while (message != quit); }æˆ–ä½¿ç”¨ä¼ªä»£ç æ¥å±•ç¤ºä¸‹: // // https://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢) // https://github.com/ChenYilong int main(int argc, char * argv[]) { //ç¨‹åºä¸€ç›´è¿è¡ŒçŠ¶æ€ while (AppIsRunning) { //ç¡çœ çŠ¶æ€ï¼Œç­‰å¾…å”¤é†’äº‹ä»¶ id whoWakesMe = SleepForWakingUp(); //å¾—åˆ°å”¤é†’äº‹ä»¶ id event = GetEvent(whoWakesMe); //å¼€å§‹å¤„ç†äº‹ä»¶ HandleEvent(event); } return 0; }å‚è€ƒé“¾æ¥ï¼š ã€Šæ·±å…¥ç†è§£RunLoopã€‹ æ‘˜è‡ªåšæ–‡CFRunLoopï¼ŒåŸä½œè€…æ˜¯å¾®åš@æˆ‘å°±å«Sunnyæ€ä¹ˆäº† 32. objcä½¿ç”¨ä»€ä¹ˆæœºåˆ¶ç®¡ç†å¯¹è±¡å†…å­˜ï¼Ÿé€šè¿‡ retainCount çš„æœºåˆ¶æ¥å†³å®šå¯¹è±¡æ˜¯å¦éœ€è¦é‡Šæ”¾ã€‚æ¯æ¬¡ runloop çš„æ—¶å€™ï¼Œéƒ½ä¼šæ£€æŸ¥å¯¹è±¡çš„ retainCountï¼Œå¦‚æœretainCount ä¸º 0ï¼Œè¯´æ˜è¯¥å¯¹è±¡æ²¡æœ‰åœ°æ–¹éœ€è¦ç»§ç»­ä½¿ç”¨äº†ï¼Œå¯ä»¥é‡Šæ”¾æ‰äº†ã€‚ 33. ARCé€šè¿‡ä»€ä¹ˆæ–¹å¼å¸®åŠ©å¼€å‘è€…ç®¡ç†å†…å­˜ï¼Ÿ ç¼–è¯‘æ—¶æ ¹æ®ä»£ç ä¸Šä¸‹æ–‡ï¼Œæ’å…¥ retain/release ARCç›¸å¯¹äºMRCï¼Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶æ·»åŠ retain/release/autoreleaseè¿™ä¹ˆç®€å•ã€‚åº”è¯¥æ˜¯ç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸä¸¤éƒ¨åˆ†å…±åŒå¸®åŠ©å¼€å‘è€…ç®¡ç†å†…å­˜ã€‚ åœ¨ç¼–è¯‘æœŸï¼ŒARCç”¨çš„æ˜¯æ›´åº•å±‚çš„Cæ¥å£å®ç°çš„retain/release/autoreleaseï¼Œè¿™æ ·åšæ€§èƒ½æ›´å¥½ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ARCç¯å¢ƒä¸‹æ‰‹åŠ¨retain/release/autoreleaseï¼ŒåŒæ—¶å¯¹åŒä¸€ä¸Šä¸‹æ–‡çš„åŒä¸€å¯¹è±¡çš„æˆå¯¹retain/releaseæ“ä½œè¿›è¡Œä¼˜åŒ–ï¼ˆå³å¿½ç•¥æ‰ä¸å¿…è¦çš„æ“ä½œï¼‰ï¼›ARCä¹ŸåŒ…å«è¿è¡ŒæœŸç»„ä»¶ï¼Œè¿™ä¸ªåœ°æ–¹åšçš„ä¼˜åŒ–æ¯”è¾ƒå¤æ‚ï¼Œä½†ä¹Ÿä¸èƒ½è¢«å¿½ç•¥ã€‚ã€TODO:åç»­æ›´æ–°ä¼šè¯¦ç»†æè¿°ä¸‹ã€‘ 34. ä¸æ‰‹åŠ¨æŒ‡å®šautoreleasepoolçš„å‰æä¸‹ï¼Œä¸€ä¸ªautorealeseå¯¹è±¡åœ¨ä»€ä¹ˆæ—¶åˆ»é‡Šæ”¾ï¼Ÿï¼ˆæ¯”å¦‚åœ¨ä¸€ä¸ªvcçš„viewDidLoadä¸­åˆ›å»ºï¼‰åˆ†ä¸¤ç§æƒ…å†µï¼šæ‰‹åŠ¨å¹²é¢„é‡Šæ”¾æ—¶æœºã€ç³»ç»Ÿè‡ªåŠ¨å»é‡Šæ”¾ã€‚ æ‰‹åŠ¨å¹²é¢„é‡Šæ”¾æ—¶æœºâ€“æŒ‡å®šautoreleasepoolå°±æ˜¯æ‰€è°“çš„ï¼šå½“å‰ä½œç”¨åŸŸå¤§æ‹¬å·ç»“æŸæ—¶é‡Šæ”¾ã€‚ ç³»ç»Ÿè‡ªåŠ¨å»é‡Šæ”¾â€“ä¸æ‰‹åŠ¨æŒ‡å®šautoreleasepool Autoreleaseå¯¹è±¡å‡ºäº†ä½œç”¨åŸŸä¹‹åï¼Œä¼šè¢«æ·»åŠ åˆ°æœ€è¿‘ä¸€æ¬¡åˆ›å»ºçš„è‡ªåŠ¨é‡Šæ”¾æ± ä¸­ï¼Œå¹¶ä¼šåœ¨å½“å‰çš„ runloop è¿­ä»£ç»“æŸæ—¶é‡Šæ”¾ã€‚ é‡Šæ”¾çš„æ—¶æœºæ€»ç»“èµ·æ¥ï¼Œå¯ä»¥ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š ä¸‹é¢å¯¹è¿™å¼ å›¾è¿›è¡Œè¯¦ç»†çš„è§£é‡Šï¼š ä»ç¨‹åºå¯åŠ¨åˆ°åŠ è½½å®Œæˆæ˜¯ä¸€ä¸ªå®Œæ•´çš„è¿è¡Œå¾ªç¯ï¼Œç„¶åä¼šåœä¸‹æ¥ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’ï¼Œç”¨æˆ·çš„æ¯ä¸€æ¬¡äº¤äº’éƒ½ä¼šå¯åŠ¨ä¸€æ¬¡è¿è¡Œå¾ªç¯ï¼Œæ¥å¤„ç†ç”¨æˆ·æ‰€æœ‰çš„ç‚¹å‡»äº‹ä»¶ã€è§¦æ‘¸äº‹ä»¶ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ï¼šæ‰€æœ‰ autorelease çš„å¯¹è±¡ï¼Œåœ¨å‡ºäº†ä½œç”¨åŸŸä¹‹åï¼Œä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°æœ€è¿‘åˆ›å»ºçš„è‡ªåŠ¨é‡Šæ”¾æ± ä¸­ã€‚ ä½†æ˜¯å¦‚æœæ¯æ¬¡éƒ½æ”¾è¿›åº”ç”¨ç¨‹åºçš„ main.m ä¸­çš„ autoreleasepool ä¸­ï¼Œè¿Ÿæ—©æœ‰è¢«æ’‘æ»¡çš„ä¸€åˆ»ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­å¿…å®šæœ‰ä¸€ä¸ªé‡Šæ”¾çš„åŠ¨ä½œã€‚ä½•æ—¶ï¼Ÿ åœ¨ä¸€æ¬¡å®Œæ•´çš„è¿è¡Œå¾ªç¯ç»“æŸä¹‹å‰ï¼Œä¼šè¢«é”€æ¯ã€‚ é‚£ä»€ä¹ˆæ—¶é—´ä¼šåˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ï¼Ÿè¿è¡Œå¾ªç¯æ£€æµ‹åˆ°äº‹ä»¶å¹¶å¯åŠ¨åï¼Œå°±ä¼šåˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ã€‚ ä» RunLoop æºä»£ç ä¸­å¯çŸ¥ï¼Œå­çº¿ç¨‹é»˜è®¤æ˜¯æ²¡æœ‰ RunLoop çš„ï¼Œå¦‚æœéœ€è¦åœ¨å­çº¿ç¨‹å¼€å¯ RunLoop ï¼Œåˆ™éœ€è¦è°ƒç”¨ [NSRunLoop CurrentRunLoop] æ–¹æ³•ï¼Œå®ƒå†…éƒ¨å®ç°æ˜¯å…ˆæ£€æŸ¥çº¿ç¨‹ï¼Œå¦‚æœå‘ç°æ˜¯å­çº¿ç¨‹ï¼Œä»¥æ‡’åŠ è½½çš„å½¢å¼ åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹çš„ RunLoopã€‚å¹¶å­˜å‚¨åœ¨ä¸€ä¸ªå…¨å±€çš„ å¯å˜å­—å…¸é‡Œã€‚ç¼–ç¨‹äººå‘˜åœ¨è°ƒç”¨ [NSRunLoop CurrentRunLoop] æ—¶ï¼Œæ˜¯è‡ªåŠ¨åˆ›å»º RunLoop çš„ï¼Œè€Œæ²¡æ³•æ‰‹åŠ¨åˆ›å»ºã€‚ è‡ªå®šä¹‰çš„ NSOperation å’Œ NSThread éœ€è¦æ‰‹åŠ¨åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ã€‚æ¯”å¦‚ï¼š è‡ªå®šä¹‰çš„ NSOperation ç±»ä¸­çš„ main æ–¹æ³•é‡Œå°±å¿…é¡»æ·»åŠ è‡ªåŠ¨é‡Šæ”¾æ± ã€‚å¦åˆ™å‡ºäº†ä½œç”¨åŸŸåï¼Œè‡ªåŠ¨é‡Šæ”¾å¯¹è±¡ä¼šå› ä¸ºæ²¡æœ‰è‡ªåŠ¨é‡Šæ”¾æ± å»å¤„ç†å®ƒï¼Œè€Œé€ æˆå†…å­˜æ³„éœ²ã€‚ ä½†å¯¹äº blockOperation å’Œ invocationOperation è¿™ç§é»˜è®¤çš„Operation ï¼Œç³»ç»Ÿå·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ã€‚ @autoreleasepool å½“è‡ªåŠ¨é‡Šæ”¾æ± è¢«é”€æ¯æˆ–è€…è€—å°½æ—¶ï¼Œä¼šå‘è‡ªåŠ¨é‡Šæ”¾æ± ä¸­çš„æ‰€æœ‰å¯¹è±¡å‘é€ release æ¶ˆæ¯ï¼Œé‡Šæ”¾è‡ªåŠ¨é‡Šæ”¾æ± ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚ å¦‚æœåœ¨ä¸€ä¸ªvcçš„viewDidLoadä¸­åˆ›å»ºä¸€ä¸ª Autoreleaseå¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡ä¼šåœ¨ viewDidAppear æ–¹æ³•æ‰§è¡Œå‰å°±è¢«é”€æ¯äº†ã€‚ å‚è€ƒé“¾æ¥ï¼šã€Šé»‘å¹•èƒŒåçš„Autoreleaseã€‹ 35. BAD_ACCESSåœ¨ä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°ï¼Ÿè®¿é—®äº†æ‚¬å‚æŒ‡é’ˆï¼Œæ¯”å¦‚å¯¹ä¸€ä¸ªå·²ç»é‡Šæ”¾çš„å¯¹è±¡æ‰§è¡Œäº†releaseã€è®¿é—®å·²ç»é‡Šæ”¾å¯¹è±¡çš„æˆå‘˜å˜é‡æˆ–è€…å‘æ¶ˆæ¯ã€‚æ­»å¾ªç¯ 36. è‹¹æœæ˜¯å¦‚ä½•å®ç°autoreleasepoolçš„ï¼Ÿautoreleasepool ä»¥ä¸€ä¸ªé˜Ÿåˆ—æ•°ç»„çš„å½¢å¼å®ç°,ä¸»è¦é€šè¿‡ä¸‹åˆ—ä¸‰ä¸ªå‡½æ•°å®Œæˆ. objc_autoreleasepoolPush objc_autoreleasepoolPop objc_autorelease çœ‹å‡½æ•°åå°±å¯ä»¥çŸ¥é“ï¼Œå¯¹ autorelease åˆ†åˆ«æ‰§è¡Œ pushï¼Œå’Œ pop æ“ä½œã€‚é”€æ¯å¯¹è±¡æ—¶æ‰§è¡Œreleaseæ“ä½œã€‚ ä¸¾ä¾‹è¯´æ˜ï¼šæˆ‘ä»¬éƒ½çŸ¥é“ç”¨ç±»æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯ Autorelease çš„ï¼Œé‚£ä¹ˆä¸€æ—¦ Person å‡ºäº†ä½œç”¨åŸŸï¼Œå½“åœ¨ Person çš„ dealloc æ–¹æ³•ä¸­æ‰“ä¸Šæ–­ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°è¿™æ ·çš„è°ƒç”¨å †æ ˆä¿¡æ¯ï¼š 37. ä½¿ç”¨blockæ—¶ä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿå¼•ç”¨å¾ªç¯ï¼Œå¦‚ä½•è§£å†³ï¼Ÿä¸€ä¸ªå¯¹è±¡ä¸­å¼ºå¼•ç”¨äº†blockï¼Œåœ¨blockä¸­åˆå¼ºå¼•ç”¨äº†è¯¥å¯¹è±¡ï¼Œå°±ä¼šå‘å°„å¾ªç¯å¼•ç”¨ã€‚ è§£å†³æ–¹æ³•æ˜¯å°†è¯¥å¯¹è±¡ä½¿ç”¨weakæˆ–è€…blockä¿®é¥°ç¬¦ä¿®é¥°ä¹‹åå†åœ¨blockä¸­ä½¿ç”¨ã€‚ id weak weakSelf = self;æˆ–è€… weak __typeof(&amp;*self)weakSelf = selfè¯¥æ–¹æ³•å¯ä»¥è®¾ç½®å® id __block weakSelf = self; æˆ–è€…å°†å…¶ä¸­ä¸€æ–¹å¼ºåˆ¶åˆ¶ç©º xxx = nilã€‚ æ£€æµ‹ä»£ç ä¸­æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œå¯ä½¿ç”¨ Facebook å¼€æºçš„ä¸€ä¸ªæ£€æµ‹å·¥å…· FBRetainCycleDetector ã€‚ 38. åœ¨blockå†…å¦‚ä½•ä¿®æ”¹blockå¤–éƒ¨å˜é‡ï¼Ÿé»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨blockä¸­è®¿é—®çš„å¤–éƒ¨å˜é‡æ˜¯å¤åˆ¶è¿‡å»çš„ï¼Œå³ï¼šå†™æ“ä½œä¸å¯¹åŸå˜é‡ç”Ÿæ•ˆã€‚ä½†æ˜¯ä½ å¯ä»¥åŠ ä¸Š __block æ¥è®©å…¶å†™æ“ä½œç”Ÿæ•ˆï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹: 123456__block int a = 0;void (^foo)(void) = ^{ a = 1; };foo(); //è¿™é‡Œï¼Œaçš„å€¼è¢«ä¿®æ”¹ä¸º1 è¿™æ˜¯ å¾®åš@å”å·§_boyçš„ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹ä¸­çš„ç¬¬11.2.3ç« èŠ‚ä¸­çš„æè¿°ã€‚ä½ åŒæ ·å¯ä»¥åœ¨é¢è¯•ä¸­è¿™æ ·å›ç­”ï¼Œä½†ä½ å¹¶æ²¡æœ‰ç­”åˆ°â€œç‚¹å­ä¸Šâ€ã€‚çœŸæ­£çš„åŸå› ï¼Œå¹¶æ²¡æœ‰ä¹¦è¿™æœ¬ä¹¦é‡Œå†™çš„è¿™ä¹ˆâ€œç¥å¥‡â€ï¼Œè€Œä¸”è¿™ç§è¯´æ³•ä¹Ÿæœ‰ç‚¹ç‰µå¼ºã€‚é¢è¯•å®˜è‚¯å®šä¼šè¿½é—®â€œä¸ºä»€ä¹ˆå†™æ“ä½œå°±ç”Ÿæ•ˆäº†ï¼Ÿâ€çœŸæ­£çš„åŸå› æ˜¯è¿™æ ·çš„ï¼š æˆ‘ä»¬éƒ½çŸ¥é“ï¼šBlockä¸å…è®¸ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ï¼Œè¿™é‡Œæ‰€è¯´çš„å¤–éƒ¨å˜é‡çš„å€¼ï¼ŒæŒ‡çš„æ˜¯æ ˆä¸­æŒ‡é’ˆçš„å†…å­˜åœ°å€ã€‚__block æ‰€èµ·åˆ°çš„ä½œç”¨å°±æ˜¯åªè¦è§‚å¯Ÿåˆ°è¯¥å˜é‡è¢« block æ‰€æŒæœ‰ï¼Œå°±å°†â€œå¤–éƒ¨å˜é‡â€åœ¨æ ˆä¸­çš„å†…å­˜åœ°å€æ”¾åˆ°äº†å †ä¸­ã€‚è¿›è€Œåœ¨blockå†…éƒ¨ä¹Ÿå¯ä»¥ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ã€‚ Blockä¸å…è®¸ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ã€‚Appleè¿™æ ·è®¾è®¡ï¼Œåº”è¯¥æ˜¯è€ƒè™‘åˆ°äº†blockçš„ç‰¹æ®Šæ€§ï¼Œblockä¹Ÿå±äºâ€œå‡½æ•°â€çš„èŒƒç•´ï¼Œå˜é‡è¿›å…¥blockï¼Œå®é™…å°±æ˜¯å·²ç»æ”¹å˜äº†ä½œç”¨åŸŸã€‚åœ¨å‡ ä¸ªä½œç”¨åŸŸä¹‹é—´è¿›è¡Œåˆ‡æ¢æ—¶ï¼Œå¦‚æœä¸åŠ ä¸Šè¿™æ ·çš„é™åˆ¶ï¼Œå˜é‡çš„å¯ç»´æŠ¤æ€§å°†å¤§å¤§é™ä½ã€‚åˆæ¯”å¦‚æˆ‘æƒ³åœ¨blockå†…å£°æ˜äº†ä¸€ä¸ªä¸å¤–éƒ¨åŒåçš„å˜é‡ï¼Œæ­¤æ—¶æ˜¯å…è®¸å‘¢è¿˜æ˜¯ä¸å…è®¸å‘¢ï¼Ÿåªæœ‰åŠ ä¸Šäº†è¿™æ ·çš„é™åˆ¶ï¼Œè¿™æ ·çš„æƒ…æ™¯æ‰èƒ½å®ç°ã€‚äºæ˜¯æ ˆåŒºå˜æˆäº†çº¢ç¯åŒºï¼Œå †åŒºå˜æˆäº†ç»¿ç¯åŒºã€‚ æˆ‘ä»¬å¯ä»¥æ‰“å°ä¸‹å†…å­˜åœ°å€æ¥è¿›è¡ŒéªŒè¯ï¼š 12345678__block int a = 0;NSLog(@&quot;å®šä¹‰å‰ï¼š%p&quot;, &amp;a); //æ ˆåŒºvoid (^foo)(void) = ^{ a = 1; NSLog(@&quot;blockå†…éƒ¨ï¼š%p&quot;, &amp;a); //å †åŒº};NSLog(@&quot;å®šä¹‰åï¼š%p&quot;, &amp;a); //å †åŒºfoo(); 1232016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] å®šä¹‰å‰ï¼š0x16fda86f82016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] å®šä¹‰åï¼š0x155b22fc82016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] blockå†…éƒ¨ï¼š 0x155b22fc8 â€œå®šä¹‰åâ€å’Œâ€œblockå†…éƒ¨â€ä¸¤è€…çš„å†…å­˜åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ block å†…éƒ¨çš„å˜é‡ä¼šè¢« copy åˆ°å †åŒºï¼Œâ€œblockå†…éƒ¨â€æ‰“å°çš„æ˜¯å †åœ°å€ï¼Œå› è€Œä¹Ÿå°±å¯ä»¥çŸ¥é“ï¼Œâ€œå®šä¹‰åâ€æ‰“å°çš„ä¹Ÿæ˜¯å †çš„åœ°å€ã€‚ é‚£ä¹ˆå¦‚ä½•è¯æ˜â€œblockå†…éƒ¨â€æ‰“å°çš„æ˜¯å †åœ°å€ï¼Ÿ æŠŠä¸‰ä¸ª16è¿›åˆ¶çš„å†…å­˜åœ°å€è½¬æˆ10è¿›åˆ¶å°±æ˜¯ï¼š å®šä¹‰åå‰ï¼š6171559672 blockå†…éƒ¨ï¼š5732708296 å®šä¹‰ååï¼š5732708296 ä¸­é—´ç›¸å·®438851376ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯ 418.5M çš„ç©ºé—´ï¼Œå› ä¸ºå †åœ°å€è¦å°äºæ ˆåœ°å€ï¼Œåˆå› ä¸ºiOSä¸­ä¸€ä¸ªè¿›ç¨‹çš„æ ˆåŒºå†…å­˜åªæœ‰1Mï¼ŒMacä¹Ÿåªæœ‰8Mï¼Œæ˜¾ç„¶aå·²ç»æ˜¯åœ¨å †åŒºäº†ã€‚ è¿™ä¹Ÿè¯å®äº†ï¼ša åœ¨å®šä¹‰å‰æ˜¯æ ˆåŒºï¼Œä½†åªè¦è¿›å…¥äº† block åŒºåŸŸï¼Œå°±å˜æˆäº†å †åŒºã€‚è¿™æ‰æ˜¯ __block å…³é”®å­—çš„çœŸæ­£ä½œç”¨ã€‚ __block å…³é”®å­—ä¿®é¥°åï¼Œintç±»å‹ä¹Ÿä»4å­—èŠ‚å˜æˆäº†32å­—èŠ‚ï¼Œè¿™æ˜¯ Foundation æ¡†æ¶ malloc å‡ºæ¥çš„ã€‚è¿™ä¹ŸåŒæ ·èƒ½è¯å®ä¸Šé¢çš„ç»“è®ºã€‚ï¼ˆPSï¼šå±…ç„¶æ¯” NSObject alloc å‡ºæ¥çš„ 16 å­—èŠ‚è¦å¤šä¸€å€ï¼‰ã€‚ ç†è§£åˆ°è¿™æ˜¯å› ä¸ºå †æ ˆåœ°å€çš„å˜æ›´ï¼Œè€Œéæ‰€è°“çš„â€œå†™æ“ä½œç”Ÿæ•ˆâ€ï¼Œè¿™ä¸€ç‚¹è‡³å…³é‡è¦ï¼Œè¦ä¸ç„¶ä½ å¦‚ä½•è§£é‡Šä¸‹é¢è¿™ä¸ªç°è±¡ï¼š ä»¥ä¸‹ä»£ç ç¼–è¯‘å¯ä»¥é€šè¿‡ï¼Œå¹¶ä¸”åœ¨blockä¸­æˆåŠŸå°†açš„ä»Tomä¿®æ”¹ä¸ºJerryã€‚ 123456789101112NSMutableString *a = [NSMutableString stringWithString:@&quot;Tom&quot;];NSLog(@&quot;\\n å®šä»¥å‰ï¼š------------------------------------\\n\\ aæŒ‡å‘çš„å †ä¸­åœ°å€ï¼š%pï¼›aåœ¨æ ˆä¸­çš„æŒ‡é’ˆåœ°å€ï¼š%p&quot;, a, &amp;a); //aåœ¨æ ˆåŒºvoid (^foo)(void) = ^{ a.string = @&quot;Jerry&quot;; NSLog(@&quot;\\n blockå†…éƒ¨ï¼š------------------------------------\\n\\ aæŒ‡å‘çš„å †ä¸­åœ°å€ï¼š%pï¼›aåœ¨æ ˆä¸­çš„æŒ‡é’ˆåœ°å€ï¼š%p&quot;, a, &amp;a); //aåœ¨æ ˆåŒº a = [NSMutableString stringWithString:@&quot;William&quot;];};foo();NSLog(@&quot;\\n å®šä»¥åï¼š------------------------------------\\n\\ aæŒ‡å‘çš„å †ä¸­åœ°å€ï¼š%pï¼›aåœ¨æ ˆä¸­çš„æŒ‡é’ˆåœ°å€ï¼š%p&quot;, a, &amp;a); //aåœ¨æ ˆåŒº è¿™é‡Œçš„aå·²ç»ç”±åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå˜æˆäº†å¯¹è±¡ç±»å‹ã€‚blockä¼šå¯¹å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆè¿›è¡Œcopyï¼Œcopyåˆ°å †ä¸­ï¼Œä½†å¹¶ä¸ä¼šæ”¹å˜è¯¥æŒ‡é’ˆæ‰€æŒ‡å‘çš„å †ä¸­çš„åœ°å€ï¼Œæ‰€ä»¥åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œblockä½“å†…ä¿®æ”¹çš„å®é™…æ˜¯aæŒ‡å‘çš„å †ä¸­çš„å†…å®¹ã€‚ ä½†å¦‚æœæˆ‘ä»¬å°è¯•åƒä¸Šé¢å›¾ç‰‡ä¸­çš„65è¡Œé‚£æ ·åšï¼Œç»“æœä¼šç¼–è¯‘ä¸é€šè¿‡ï¼Œé‚£æ˜¯å› ä¸ºæ­¤æ—¶ä½ åœ¨ä¿®æ”¹çš„å°±ä¸æ˜¯å †ä¸­çš„å†…å®¹ï¼Œè€Œæ˜¯æ ˆä¸­çš„å†…å®¹ã€‚ ä¸Šæ–‡å·²ç»è¯´è¿‡ï¼šBlockä¸å…è®¸ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ï¼Œè¿™é‡Œæ‰€è¯´çš„å¤–éƒ¨å˜é‡çš„å€¼ï¼ŒæŒ‡çš„æ˜¯æ ˆä¸­æŒ‡é’ˆçš„å†…å­˜åœ°å€ã€‚æ ˆåŒºæ˜¯çº¢ç¯åŒºï¼Œå †åŒºæ‰æ˜¯ç»¿ç¯åŒºã€‚ 39. ä½¿ç”¨ç³»ç»Ÿçš„æŸäº›block apiï¼ˆå¦‚UIViewçš„blockç‰ˆæœ¬å†™åŠ¨ç”»æ—¶ï¼‰ï¼Œæ˜¯å¦ä¹Ÿè€ƒè™‘å¼•ç”¨å¾ªç¯é—®é¢˜ï¼Ÿç³»ç»Ÿçš„æŸäº›block apiä¸­ï¼ŒUIViewçš„blockç‰ˆæœ¬å†™åŠ¨ç”»æ—¶ä¸éœ€è¦è€ƒè™‘ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›api éœ€è¦è€ƒè™‘ï¼š æ‰€è°“â€œå¼•ç”¨å¾ªç¯â€æ˜¯æŒ‡åŒå‘çš„å¼ºå¼•ç”¨ï¼Œæ‰€ä»¥é‚£äº›â€œå•å‘çš„å¼ºå¼•ç”¨â€ï¼ˆblock å¼ºå¼•ç”¨ self ï¼‰æ²¡æœ‰é—®é¢˜ï¼Œæ¯”å¦‚è¿™äº›ï¼š 1[UIView animateWithDuration:duration animations:^{ [self.superview layoutIfNeeded]; }]; 1[[NSOperationQueue mainQueue] addOperationWithBlock:^{ self.someProperty = xyz; }]; 12345[[NSNotificationCenter defaultCenter] addObserverForName:@&quot;someNotification&quot; object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification * notification) { self.someProperty = xyz; }]; è¿™äº›æƒ…å†µä¸éœ€è¦è€ƒè™‘â€œå¼•ç”¨å¾ªç¯â€ã€‚ ä½†å¦‚æœä½ ä½¿ç”¨ä¸€äº›å‚æ•°ä¸­å¯èƒ½å«æœ‰ ivar çš„ç³»ç»Ÿ api ï¼Œå¦‚ GCD ã€NSNotificationCenterå°±è¦å°å¿ƒä¸€ç‚¹ï¼šæ¯”å¦‚GCD å†…éƒ¨å¦‚æœå¼•ç”¨äº† selfï¼Œè€Œä¸” GCD çš„å…¶ä»–å‚æ•°æ˜¯ ivarï¼Œåˆ™è¦è€ƒè™‘åˆ°å¾ªç¯å¼•ç”¨ï¼š 1234567__weak __typeof__(self) weakSelf = self;dispatch_group_async(_operationsGroup, _operationsQueue, ^{__typeof__(self) strongSelf = weakSelf;[strongSelf doSomething];[strongSelf doSomethingElse];} ); ç±»ä¼¼çš„ï¼š 12345678__weak __typeof__(self) weakSelf = self;_observer = [[NSNotificationCenter defaultCenter] addObserverForName:@&quot;testKey&quot; object:nil queue:nil usingBlock:^(NSNotification *note) { __typeof__(self) strongSelf = weakSelf; [strongSelf dismissModalViewControllerAnimated:YES];}]; self â€“&gt; _observer â€“&gt; block â€“&gt; self æ˜¾ç„¶è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ªç¯å¼•ç”¨ã€‚ æ£€æµ‹ä»£ç ä¸­æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œå¯ä½¿ç”¨ Facebook å¼€æºçš„ä¸€ä¸ªæ£€æµ‹å·¥å…· FBRetainCycleDetector ã€‚ 40. GCDçš„é˜Ÿåˆ—ï¼ˆdispatch_queue_tï¼‰åˆ†å“ªä¸¤ç§ç±»å‹ï¼Ÿ ä¸²è¡Œé˜Ÿåˆ—Serial Dispatch Queue å¹¶è¡Œé˜Ÿåˆ—Concurrent Dispatch Queue 41. å¦‚ä½•ç”¨GCDåŒæ­¥è‹¥å¹²ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Ÿï¼ˆå¦‚æ ¹æ®è‹¥å¹²ä¸ªurlå¼‚æ­¥åŠ è½½å¤šå¼ å›¾ç‰‡ï¼Œç„¶ååœ¨éƒ½ä¸‹è½½å®Œæˆååˆæˆä¸€å¼ æ•´å›¾ï¼‰ä½¿ç”¨Dispatch Groupè¿½åŠ blockåˆ°Global Group Queue,è¿™äº›blockå¦‚æœå…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šæ‰§è¡ŒMain Dispatch Queueä¸­çš„ç»“æŸå¤„ç†çš„blockã€‚ 12345678dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);dispatch_group_t group = dispatch_group_create();dispatch_group_async(group, queue, ^{ /*åŠ è½½å›¾ç‰‡1 */ });dispatch_group_async(group, queue, ^{ /*åŠ è½½å›¾ç‰‡2 */ });dispatch_group_async(group, queue, ^{ /*åŠ è½½å›¾ç‰‡3 */ }); dispatch_group_notify(group, dispatch_get_main_queue(), ^{ // åˆå¹¶å›¾ç‰‡}); 42. dispatch_barrier_asyncçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ åœ¨å¹¶è¡Œé˜Ÿåˆ—ä¸­ï¼Œä¸ºäº†ä¿æŒæŸäº›ä»»åŠ¡çš„é¡ºåºï¼Œéœ€è¦ç­‰å¾…ä¸€äº›ä»»åŠ¡å®Œæˆåæ‰èƒ½ç»§ç»­è¿›è¡Œï¼Œä½¿ç”¨ barrier æ¥ç­‰å¾…ä¹‹å‰ä»»åŠ¡å®Œæˆï¼Œé¿å…æ•°æ®ç«äº‰ç­‰é—®é¢˜ã€‚ dispatch_barrier_async å‡½æ•°ä¼šç­‰å¾…è¿½åŠ åˆ°Concurrent Dispatch Queueå¹¶è¡Œé˜Ÿåˆ—ä¸­çš„æ“ä½œå…¨éƒ¨æ‰§è¡Œå®Œä¹‹åï¼Œç„¶åå†æ‰§è¡Œ dispatch_barrier_async å‡½æ•°è¿½åŠ çš„å¤„ç†ï¼Œç­‰ dispatch_barrier_async è¿½åŠ çš„å¤„ç†æ‰§è¡Œç»“æŸä¹‹åï¼ŒConcurrent Dispatch Queueæ‰æ¢å¤ä¹‹å‰çš„åŠ¨ä½œç»§ç»­æ‰§è¡Œã€‚ æ‰“ä¸ªæ¯”æ–¹ï¼šæ¯”å¦‚ä½ ä»¬å…¬å¸å‘¨æœ«è·Ÿå›¢æ—…æ¸¸ï¼Œé«˜é€Ÿä¼‘æ¯ç«™ä¸Šï¼Œå¸æœºè¯´ï¼šå¤§å®¶éƒ½å»ä¸Šå•æ‰€ï¼Œé€Ÿæˆ˜é€Ÿå†³ï¼Œä¸Šå®Œå•æ‰€å°±ä¸Šé«˜é€Ÿã€‚è¶…å¤§çš„å…¬å…±å•æ‰€ï¼Œå¤§å®¶åŒæ—¶å»ï¼Œç¨‹åºçŒ¿å¾ˆå¿«å°±ç»“æŸäº†ï¼Œä½†ç¨‹åºåª›å°±å¯èƒ½ä¼šæ…¢ä¸€äº›ï¼Œå³ä½¿ä½ ç¬¬ä¸€ä¸ªå›æ¥ï¼Œå¸æœºä¹Ÿä¸ä¼šå‡ºå‘ï¼Œå¸æœºè¦ç­‰å¾…æ‰€æœ‰äººéƒ½å›æ¥åï¼Œæ‰èƒ½å‡ºå‘ã€‚ dispatch_barrier_async å‡½æ•°è¿½åŠ çš„å†…å®¹å°±å¦‚åŒ â€œä¸Šå®Œå•æ‰€å°±ä¸Šé«˜é€Ÿâ€è¿™ä¸ªåŠ¨ä½œã€‚ ï¼ˆæ³¨æ„ï¼šä½¿ç”¨ dispatch_barrier_async ï¼Œè¯¥å‡½æ•°åªèƒ½æ­é…è‡ªå®šä¹‰å¹¶è¡Œé˜Ÿåˆ— dispatch_queue_t ä½¿ç”¨ã€‚ä¸èƒ½ä½¿ç”¨ï¼š dispatch_get_global_queue ï¼Œå¦åˆ™ dispatch_barrier_async çš„ä½œç”¨ä¼šå’Œ dispatch_async çš„ä½œç”¨ä¸€æ¨¡ä¸€æ ·ã€‚ ï¼‰ 43. è‹¹æœä¸ºä»€ä¹ˆè¦åºŸå¼ƒ dispatchâ€¦ï¼Ÿdispatch_get_current_queueå‡½æ•°çš„è¡Œä¸ºå¸¸å¸¸ä¸å¼€å‘è€…æ‰€é¢„æœŸçš„ä¸åŒã€‚ç”±äºæ´¾å‘é˜Ÿåˆ—æ˜¯æŒ‰å±‚çº§æ¥ç»„ç»‡çš„ï¼Œè¿™æ„å‘³ç€æ’åœ¨æŸæ¡é˜Ÿåˆ—ä¸­çš„å—ä¼šåœ¨å…¶ä¸Šçº§é˜Ÿåˆ—é‡Œæ‰§è¡Œã€‚é˜Ÿåˆ—é—´çš„å±‚çº§å…³ç³»ä¼šå¯¼è‡´æ£€æŸ¥å½“å‰é˜Ÿåˆ—æ˜¯å¦ä¸ºæ‰§è¡ŒåŒæ­¥æ´¾å‘æ‰€ç”¨çš„é˜Ÿåˆ—è¿™ç§æ–¹æ³•å¹¶ä¸æ€»æ˜¯å¥æ•ˆã€‚dispatch_get_current_queueå‡½æ•°é€šå¸¸ä¼šè¢«ç”¨äºè§£å†³ç”±ä¸å¯ä»¥é‡å…¥çš„ä»£ç æ‰€å¼•å‘çš„æ­»é”ï¼Œç„¶åèƒ½ç”¨æ­¤å‡½æ•°è§£å†³çš„é—®é¢˜ï¼Œé€šå¸¸ä¹Ÿå¯ä»¥ç”¨â€é˜Ÿåˆ—ç‰¹å®šæ•°æ®â€æ¥è§£å†³ã€‚ 44. ä»¥ä¸‹ä»£ç è¿è¡Œç»“æœå¦‚ä½•ï¼Ÿ- (void)viewDidLoad { [super viewDidLoad]; NSLog(@&quot;1&quot;); dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;); }åªè¾“å‡ºï¼š1 ã€‚å‘ç”Ÿä¸»çº¿ç¨‹é”æ­»ã€‚ 45. å„ä¸ªå‚æ•°çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œobserverä¸­éœ€è¦å®ç°å“ªä¸ªæ–¹æ³•æ‰èƒ½è·å¾—KVOå›è°ƒï¼ŸaddObserver:forKeyPath:options:context: 12345678// æ·»åŠ é”®å€¼è§‚å¯Ÿ/*1 è§‚å¯Ÿè€…ï¼Œè´Ÿè´£å¤„ç†ç›‘å¬äº‹ä»¶çš„å¯¹è±¡2 è§‚å¯Ÿçš„å±æ€§3 è§‚å¯Ÿçš„é€‰é¡¹4 ä¸Šä¸‹æ–‡*/[self.person addObserver:self forKeyPath:@&quot;name&quot; options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:@&quot;Person Name&quot;]; observerä¸­éœ€è¦å®ç°ä¸€ä¸‹æ–¹æ³•ï¼š 12345678// æ‰€æœ‰çš„ kvo ç›‘å¬åˆ°äº‹ä»¶ï¼Œéƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•/* 1. è§‚å¯Ÿçš„å±æ€§ 2. è§‚å¯Ÿçš„å¯¹è±¡ 3. change å±æ€§å˜åŒ–å­—å…¸ï¼ˆæ–°ï¼æ—§ï¼‰ 4. ä¸Šä¸‹æ–‡ï¼Œä¸ç›‘å¬çš„æ—¶å€™ä¼ é€’çš„ä¸€è‡´ */- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context; 46. å¦‚ä½•æ‰‹åŠ¨è§¦å‘ä¸€ä¸ªvalueçš„KVOæ‰€è°“çš„â€œæ‰‹åŠ¨è§¦å‘â€æ˜¯åŒºåˆ«äºâ€œè‡ªåŠ¨è§¦å‘â€ï¼š è‡ªåŠ¨è§¦å‘æ˜¯æŒ‡ç±»ä¼¼è¿™ç§åœºæ™¯ï¼šåœ¨æ³¨å†Œ KVO ä¹‹å‰è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼Œæ³¨å†Œä¹‹åï¼Œè®¾ç½®ä¸€ä¸ªä¸ä¸€æ ·çš„å€¼ï¼Œå°±å¯ä»¥è§¦å‘äº†ã€‚ æƒ³çŸ¥é“å¦‚ä½•æ‰‹åŠ¨è§¦å‘ï¼Œå¿…é¡»çŸ¥é“è‡ªåŠ¨è§¦å‘ KVO çš„åŸç†ï¼š é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äº NSObject çš„ä¸¤ä¸ªæ–¹æ³•: willChangeValueForKey: å’Œ didChangevlueForKey: ã€‚åœ¨ä¸€ä¸ªè¢«è§‚å¯Ÿå±æ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼Œ willChangeValueForKey: ä¸€å®šä¼šè¢«è°ƒç”¨ï¼Œè¿™å°±ä¼šè®°å½•æ—§çš„å€¼ã€‚è€Œå½“æ”¹å˜å‘ç”Ÿåï¼Œ observeValueForKey:ofObject:change:context: ä¼šè¢«è°ƒç”¨ï¼Œç»§è€Œ didChangeValueForKey: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚å¦‚æœå¯ä»¥æ‰‹åŠ¨å®ç°è¿™äº›è°ƒç”¨ï¼Œå°±å¯ä»¥å®ç°â€œæ‰‹åŠ¨è§¦å‘â€äº†ã€‚ é‚£ä¹ˆâ€œæ‰‹åŠ¨è§¦å‘â€çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿä¸€èˆ¬æˆ‘ä»¬åªåœ¨å¸Œæœ›èƒ½æ§åˆ¶â€œå›è°ƒçš„è°ƒç”¨æ—¶æœºâ€æ—¶æ‰ä¼šè¿™ä¹ˆåšã€‚ å…·ä½“åšæ³•å¦‚ä¸‹ï¼š å¦‚æœè¿™ä¸ª value æ˜¯ è¡¨ç¤ºæ—¶é—´çš„ self.now ï¼Œé‚£ä¹ˆä»£ç å¦‚ä¸‹ï¼šæœ€åä¸¤è¡Œä»£ç ç¼ºä¸€ä¸å¯ã€‚ ç›¸å…³ä»£ç å·²æ”¾åœ¨ä»“åº“é‡Œã€‚ 12345678910111213141516// .mæ–‡ä»¶// Created by https://github.com/ChenYilong// å¾®åš@iOSç¨‹åºçŠ­è¢(https://weibo.com/luohanchenyilong/).// æ‰‹åŠ¨è§¦å‘ value çš„KVOï¼Œæœ€åä¸¤è¡Œä»£ç ç¼ºä¸€ä¸å¯ã€‚//@property (nonatomic, strong) NSDate *now;- (void)viewDidLoad { [super viewDidLoad]; _now = [NSDate date]; [self addObserver:self forKeyPath:@&quot;now&quot; options:NSKeyValueObservingOptionNew context:nil]; NSLog(@&quot;1&quot;); [self willChangeValueForKey:@&quot;now&quot;]; // â€œæ‰‹åŠ¨è§¦å‘self.nowçš„KVOâ€ï¼Œå¿…å†™ã€‚ NSLog(@&quot;2&quot;); [self didChangeValueForKey:@&quot;now&quot;]; // â€œæ‰‹åŠ¨è§¦å‘self.nowçš„KVOâ€ï¼Œå¿…å†™ã€‚ NSLog(@&quot;4&quot;);} ä½†æ˜¯å¹³æ—¶æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆå¹²ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç­‰ç³»ç»Ÿå»â€œè‡ªåŠ¨è§¦å‘â€ã€‚â€œè‡ªåŠ¨è§¦å‘â€çš„å®ç°åŸç†ï¼š æ¯”å¦‚è°ƒç”¨ setNow: æ—¶ï¼Œç³»ç»Ÿè¿˜ä¼šä»¥æŸç§æ–¹å¼åœ¨ä¸­é—´æ’å…¥ wilChangeValueForKey: ã€ didChangeValueForKey: å’Œ observeValueForKeyPath:ofObject:change:context: çš„è°ƒç”¨ã€‚ å¤§å®¶å¯èƒ½ä»¥ä¸ºè¿™æ˜¯å› ä¸º setNow: æ˜¯åˆæˆæ–¹æ³•ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°æœ‰äººè¿™ä¹ˆå†™ä»£ç : 12345- (void)setNow:(NSDate *)aDate { [self willChangeValueForKey:@&quot;now&quot;]; // æ²¡æœ‰å¿…è¦ _now = aDate; [self didChangeValueForKey:@&quot;now&quot;];// æ²¡æœ‰å¿…è¦} è¿™å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œä¸è¦è¿™ä¹ˆåšï¼Œè¿™æ ·çš„è¯ï¼ŒKVOä»£ç ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ã€‚KVOåœ¨è°ƒç”¨å­˜å–æ–¹æ³•ä¹‹å‰æ€»æ˜¯è°ƒç”¨ willChangeValueForKey: ï¼Œä¹‹åæ€»æ˜¯è°ƒç”¨ didChangeValueForkey: ã€‚æ€ä¹ˆåšåˆ°çš„å‘¢?ç­”æ¡ˆæ˜¯é€šè¿‡ isa æ··å†™ï¼ˆisa-swizzlingï¼‰ã€‚ä¸‹æ–‡ã€Šappleç”¨ä»€ä¹ˆæ–¹å¼å®ç°å¯¹ä¸€ä¸ªå¯¹è±¡çš„KVOï¼Ÿã€‹ä¼šæœ‰è¯¦è¿°ã€‚ å‚è€ƒé“¾æ¥ï¼š Manual Change Notificationâ€”Apple å®˜æ–¹æ–‡æ¡£ 47. è‹¥ä¸€ä¸ªç±»æœ‰å®ä¾‹å˜é‡ NSString *_foo ï¼Œè°ƒç”¨setValue:forKey:æ—¶ï¼Œå¯ä»¥ä»¥fooè¿˜æ˜¯ _foo ä½œä¸ºkeyï¼Ÿéƒ½å¯ä»¥ã€‚ 48. KVCçš„keyPathä¸­çš„é›†åˆè¿ç®—ç¬¦å¦‚ä½•ä½¿ç”¨ï¼Ÿ å¿…é¡»ç”¨åœ¨é›†åˆå¯¹è±¡ä¸Šæˆ–æ™®é€šå¯¹è±¡çš„é›†åˆå±æ€§ä¸Š ç®€å•é›†åˆè¿ç®—ç¬¦æœ‰@avgï¼Œ @count ï¼Œ @max ï¼Œ @min ï¼Œ@sumï¼Œ æ ¼å¼ @â€@sum.ageâ€æˆ– @â€é›†åˆå±æ€§.@max.ageâ€œ 49. KVCå’ŒKVOçš„keyPathä¸€å®šæ˜¯å±æ€§ä¹ˆï¼ŸKVC æ”¯æŒå®ä¾‹å˜é‡ï¼ŒKVO åªèƒ½æ‰‹åŠ¨æ”¯æŒæ‰‹åŠ¨è®¾å®šå®ä¾‹å˜é‡çš„KVOå®ç°ç›‘å¬ 50. å¦‚ä½•å…³é—­é»˜è®¤çš„KVOçš„é»˜è®¤å®ç°ï¼Œå¹¶è¿›å…¥è‡ªå®šä¹‰çš„KVOå®ç°ï¼Ÿè¯·å‚è€ƒï¼š ã€Šå¦‚ä½•è‡ªå·±åŠ¨æ‰‹å®ç° KVOã€‹ KVO for manually implemented properties 51. appleç”¨ä»€ä¹ˆæ–¹å¼å®ç°å¯¹ä¸€ä¸ªå¯¹è±¡çš„KVOï¼ŸApple çš„æ–‡æ¡£å¯¹ KVO å®ç°çš„æè¿°ï¼š Automatic key-value observing is implemented using a technique called isa-swizzlingâ€¦ When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class â€¦ ä»Apple çš„æ–‡æ¡£å¯ä»¥çœ‹å‡ºï¼šApple å¹¶ä¸å¸Œæœ›è¿‡å¤šæš´éœ² KVO çš„å®ç°ç»†èŠ‚ã€‚ä¸è¿‡ï¼Œè¦æ˜¯å€ŸåŠ© runtime æä¾›çš„æ–¹æ³•å»æ·±å…¥æŒ–æ˜ï¼Œæ‰€æœ‰è¢«æ©ç›–çš„ç»†èŠ‚éƒ½ä¼šåŸå½¢æ¯•éœ²ï¼š å½“ä½ è§‚å¯Ÿä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¸€ä¸ªæ–°çš„ç±»ä¼šè¢«åŠ¨æ€åˆ›å»ºã€‚è¿™ä¸ªç±»ç»§æ‰¿è‡ªè¯¥å¯¹è±¡çš„åŸæœ¬çš„ç±»ï¼Œå¹¶é‡å†™äº†è¢«è§‚å¯Ÿå±æ€§çš„ setter æ–¹æ³•ã€‚é‡å†™çš„ setter æ–¹æ³•ä¼šè´Ÿè´£åœ¨è°ƒç”¨åŸ setter æ–¹æ³•ä¹‹å‰å’Œä¹‹åï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿå¯¹è±¡ï¼šå€¼çš„æ›´æ”¹ã€‚æœ€åé€šè¿‡ isa æ··å†™ï¼ˆisa-swizzlingï¼‰ æŠŠè¿™ä¸ªå¯¹è±¡çš„ isa æŒ‡é’ˆ ( isa æŒ‡é’ˆå‘Šè¯‰ Runtime ç³»ç»Ÿè¿™ä¸ªå¯¹è±¡çš„ç±»æ˜¯ä»€ä¹ˆ ) æŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å­ç±»ï¼Œå¯¹è±¡å°±ç¥å¥‡çš„å˜æˆäº†æ–°åˆ›å»ºçš„å­ç±»çš„å®ä¾‹ã€‚æˆ‘ç”»äº†ä¸€å¼ ç¤ºæ„å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š KVO ç¡®å®æœ‰ç‚¹é»‘é­”æ³•ï¼š Apple ä½¿ç”¨äº† isa æ··å†™ï¼ˆisa-swizzlingï¼‰æ¥å®ç° KVO ã€‚ ä¸‹é¢åšä¸‹è¯¦ç»†è§£é‡Šï¼š é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äº NSObject çš„ä¸¤ä¸ªæ–¹æ³•: willChangeValueForKey: å’Œ didChangevlueForKey: ã€‚åœ¨ä¸€ä¸ªè¢«è§‚å¯Ÿå±æ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼Œ willChangeValueForKey: ä¸€å®šä¼šè¢«è°ƒç”¨ï¼Œè¿™å°±ä¼šè®°å½•æ—§çš„å€¼ã€‚è€Œå½“æ”¹å˜å‘ç”Ÿåï¼Œ observeValueForKey:ofObject:change:context: ä¼šè¢«è°ƒç”¨ï¼Œç»§è€Œ didChangeValueForKey: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚å¯ä»¥æ‰‹åŠ¨å®ç°è¿™äº›è°ƒç”¨ï¼Œä½†å¾ˆå°‘æœ‰äººè¿™ä¹ˆåšã€‚ä¸€èˆ¬æˆ‘ä»¬åªåœ¨å¸Œæœ›èƒ½æ§åˆ¶å›è°ƒçš„è°ƒç”¨æ—¶æœºæ—¶æ‰ä¼šè¿™ä¹ˆåšã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ”¹å˜é€šçŸ¥ä¼šè‡ªåŠ¨è°ƒç”¨ã€‚ æ¯”å¦‚è°ƒç”¨ setNow: æ—¶ï¼Œç³»ç»Ÿè¿˜ä¼šä»¥æŸç§æ–¹å¼åœ¨ä¸­é—´æ’å…¥ wilChangeValueForKey: ã€ didChangeValueForKey: å’Œ observeValueForKeyPath:ofObject:change:context: çš„è°ƒç”¨ã€‚å¤§å®¶å¯èƒ½ä»¥ä¸ºè¿™æ˜¯å› ä¸º setNow: æ˜¯åˆæˆæ–¹æ³•ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°æœ‰äººè¿™ä¹ˆå†™ä»£ç : 12345- (void)setNow:(NSDate *)aDate { [self willChangeValueForKey:@&quot;now&quot;]; // æ²¡æœ‰å¿…è¦ _now = aDate; [self didChangeValueForKey:@&quot;now&quot;];// æ²¡æœ‰å¿…è¦} è¿™å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œä¸è¦è¿™ä¹ˆåšï¼Œè¿™æ ·çš„è¯ï¼ŒKVOä»£ç ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ã€‚KVOåœ¨è°ƒç”¨å­˜å–æ–¹æ³•ä¹‹å‰æ€»æ˜¯è°ƒç”¨ willChangeValueForKey: ï¼Œä¹‹åæ€»æ˜¯è°ƒç”¨ didChangeValueForkey: ã€‚æ€ä¹ˆåšåˆ°çš„å‘¢?ç­”æ¡ˆæ˜¯é€šè¿‡ isa æ··å†™ï¼ˆisa-swizzlingï¼‰ã€‚ç¬¬ä¸€æ¬¡å¯¹ä¸€ä¸ªå¯¹è±¡è°ƒç”¨ addObserver:forKeyPath:options:context: æ—¶ï¼Œæ¡†æ¶ä¼šåˆ›å»ºè¿™ä¸ªç±»çš„æ–°çš„ KVO å­ç±»ï¼Œå¹¶å°†è¢«è§‚å¯Ÿå¯¹è±¡è½¬æ¢ä¸ºæ–°å­ç±»çš„å¯¹è±¡ã€‚åœ¨è¿™ä¸ª KVO ç‰¹æ®Šå­ç±»ä¸­ï¼Œ Cocoa åˆ›å»ºè§‚å¯Ÿå±æ€§çš„ setter ï¼Œå¤§è‡´å·¥ä½œåŸç†å¦‚ä¸‹: 12345- (void)setNow:(NSDate *)aDate { [self willChangeValueForKey:@&quot;now&quot;]; [super setValue:aDate forKey:@&quot;now&quot;]; [self didChangeValueForKey:@&quot;now&quot;];} è¿™ç§ç»§æ‰¿å’Œæ–¹æ³•æ³¨å…¥æ˜¯åœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯ç¼–è¯‘æ—¶å®ç°çš„ã€‚è¿™å°±æ˜¯æ­£ç¡®å‘½åå¦‚æ­¤é‡è¦çš„åŸå› ã€‚åªæœ‰åœ¨ä½¿ç”¨KVCå‘½åçº¦å®šæ—¶ï¼ŒKVOæ‰èƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚ KVO åœ¨å®ç°ä¸­é€šè¿‡ isa æ··å†™ï¼ˆisa-swizzlingï¼‰ æŠŠè¿™ä¸ªå¯¹è±¡çš„ isa æŒ‡é’ˆ ( isa æŒ‡é’ˆå‘Šè¯‰ Runtime ç³»ç»Ÿè¿™ä¸ªå¯¹è±¡çš„ç±»æ˜¯ä»€ä¹ˆ ) æŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å­ç±»ï¼Œå¯¹è±¡å°±ç¥å¥‡çš„å˜æˆäº†æ–°åˆ›å»ºçš„å­ç±»çš„å®ä¾‹ã€‚è¿™åœ¨Apple çš„æ–‡æ¡£å¯ä»¥å¾—åˆ°å°è¯ï¼š Automatic key-value observing is implemented using a technique called isa-swizzlingâ€¦ When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class â€¦ ç„¶è€Œ KVO åœ¨å®ç°ä¸­ä½¿ç”¨äº† isa æ··å†™ï¼ˆ isa-swizzlingï¼‰ ï¼Œè¿™ä¸ªçš„ç¡®ä¸æ˜¯å¾ˆå®¹æ˜“å‘ç°ï¼šApple è¿˜é‡å†™ã€è¦†ç›–äº† -class æ–¹æ³•å¹¶è¿”å›åŸæ¥çš„ç±»ã€‚ ä¼å›¾æ¬ºéª—æˆ‘ä»¬ï¼šè¿™ä¸ªç±»æ²¡æœ‰å˜ï¼Œå°±æ˜¯åŸæœ¬é‚£ä¸ªç±»ã€‚ã€‚ã€‚ ä½†æ˜¯ï¼Œå‡è®¾â€œè¢«ç›‘å¬çš„å¯¹è±¡â€çš„ç±»å¯¹è±¡æ˜¯ MYClass ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬èƒ½çœ‹åˆ°å¯¹ NSKVONotifying_MYClass çš„å¼•ç”¨è€Œä¸æ˜¯å¯¹ MYClass çš„å¼•ç”¨ã€‚å€Ÿæ­¤æˆ‘ä»¬å¾—ä»¥çŸ¥é“ Apple ä½¿ç”¨äº† isa æ··å†™ï¼ˆisa-swizzlingï¼‰ã€‚å…·ä½“æ¢ç©¶è¿‡ç¨‹å¯å‚è€ƒ è¿™ç¯‡åšæ–‡ ã€‚ é‚£ä¹ˆ wilChangeValueForKey: ã€ didChangeValueForKey: å’Œ observeValueForKeyPath:ofObject:change:context: è¿™ä¸‰ä¸ªæ–¹æ³•çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ wilChangeValueForKey: ã€ didChangeValueForKey: å¾ˆå¥½ç†è§£ï¼ŒobserveValueForKeyPath:ofObject:change:context: çš„æ‰§è¡Œæ—¶æœºæ˜¯ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿ å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š ä»£ç å·²æ”¾åœ¨ä»“åº“é‡Œã€‚ 12345678910111213- (void)viewDidLoad { [super viewDidLoad]; [self addObserver:self forKeyPath:@&quot;now&quot; options:NSKeyValueObservingOptionNew context:nil]; NSLog(@&quot;1&quot;); [self willChangeValueForKey:@&quot;now&quot;]; // â€œæ‰‹åŠ¨è§¦å‘self.nowçš„KVOâ€ï¼Œå¿…å†™ã€‚ NSLog(@&quot;2&quot;); [self didChangeValueForKey:@&quot;now&quot;]; // â€œæ‰‹åŠ¨è§¦å‘self.nowçš„KVOâ€ï¼Œå¿…å†™ã€‚ NSLog(@&quot;4&quot;);}- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context { NSLog(@&quot;3&quot;);} å¦‚æœå•å•ä»ä¸‹é¢è¿™ä¸ªä¾‹å­çš„æ‰“å°ä¸Šï¼Œ é¡ºåºä¼¼ä¹æ˜¯ wilChangeValueForKey: ã€ observeValueForKeyPath:ofObject:change:context: ã€ didChangeValueForKey: ã€‚ å…¶å®ä¸ç„¶ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª observeValueForKeyPath:ofObject:change:context: , å’Œ didChangeValueForKey: åˆ°åº•è°å…ˆè°ƒç”¨çš„é—®é¢˜ï¼šå¦‚æœ observeValueForKeyPath:ofObject:change:context: æ˜¯åœ¨ didChangeValueForKey: å†…éƒ¨è§¦å‘çš„æ“ä½œå‘¢ï¼Ÿ é‚£ä¹ˆé¡ºåºå°±æ˜¯ï¼š wilChangeValueForKey: ã€ didChangeValueForKey: å’Œ observeValueForKeyPath:ofObject:change:context: ä¸ä¿¡ä½ æŠŠ didChangeValueForKey: æ³¨è§†æ‰ï¼Œçœ‹ä¸‹ observeValueForKeyPath:ofObject:change:context: ä¼šä¸ä¼šæ‰§è¡Œã€‚ äº†è§£åˆ°è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œæ­£å¦‚ 46. å¦‚ä½•æ‰‹åŠ¨è§¦å‘ä¸€ä¸ªvalueçš„KVO æ‰€è¯´çš„ï¼š â€œæ‰‹åŠ¨è§¦å‘â€çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿä¸€èˆ¬æˆ‘ä»¬åªåœ¨å¸Œæœ›èƒ½æ§åˆ¶â€œå›è°ƒçš„è°ƒç”¨æ—¶æœºâ€æ—¶æ‰ä¼šè¿™ä¹ˆåšã€‚ è€Œâ€œå›è°ƒçš„è°ƒç”¨æ—¶æœºâ€å°±æ˜¯åœ¨ä½ è°ƒç”¨ didChangeValueForKey: æ–¹æ³•æ—¶ã€‚ 52. IBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak?å‚è€ƒé“¾æ¥ï¼š Should IBOutlets be strong or weak under ARC? æ–‡ç« å‘Šè¯‰æˆ‘ä»¬ï¼š å› ä¸ºæ—¢ç„¶æœ‰å¤–é“¾é‚£ä¹ˆè§†å›¾åœ¨xibæˆ–è€…storyboardä¸­è‚¯å®šå­˜åœ¨ï¼Œè§†å›¾å·²ç»å¯¹å®ƒæœ‰ä¸€ä¸ªå¼ºå¼•ç”¨äº†ã€‚ ä¸è¿‡è¿™ä¸ªå›ç­”æ¼äº†ä¸ªé‡è¦çŸ¥è¯†ï¼Œä½¿ç”¨storyboardï¼ˆxibä¸è¡Œï¼‰åˆ›å»ºçš„vcï¼Œä¼šæœ‰ä¸€ä¸ªå«_topLevelObjectsToKeepAliveFromStoryboardçš„ç§æœ‰æ•°ç»„å¼ºå¼•ç”¨æ‰€æœ‰top levelçš„å¯¹è±¡ï¼Œæ‰€ä»¥è¿™æ—¶å³ä¾¿outletå£°æ˜æˆweakä¹Ÿæ²¡å…³ç³» 53. IBä¸­User Defined Runtime Attributeså¦‚ä½•ä½¿ç”¨ï¼Ÿå®ƒèƒ½å¤Ÿé€šè¿‡KVCçš„æ–¹å¼é…ç½®ä¸€äº›ä½ åœ¨interface builder ä¸­ä¸èƒ½é…ç½®çš„å±æ€§ã€‚å½“ä½ å¸Œæœ›åœ¨IBä¸­ä½œå°½å¯èƒ½å¤šå¾—äº‹æƒ…ï¼Œè¿™ä¸ªç‰¹æ€§èƒ½å¤Ÿå¸®åŠ©ä½ ç¼–å†™æ›´åŠ è½»é‡çº§çš„viewcontroller 54. å¦‚ä½•è°ƒè¯•BAD_ACCESSé”™è¯¯ é‡å†™objectçš„respondsToSelectoræ–¹æ³•ï¼Œç°å®å‡ºç°EXEC_BAD_ACCESSå‰è®¿é—®çš„æœ€åä¸€ä¸ªobject é€šè¿‡ Zombie è®¾ç½®å…¨å±€æ–­ç‚¹å¿«é€Ÿå®šä½é—®é¢˜ä»£ç æ‰€åœ¨è¡Œ Xcode 7 å·²ç»é›†æˆäº†BAD_ACCESSæ•è·åŠŸèƒ½ï¼šAddress Sanitizerã€‚ç”¨æ³•å¦‚ä¸‹ï¼šåœ¨é…ç½®ä¸­å‹¾é€‰âœ…Enable Address Sanitizer 55. lldbï¼ˆgdbï¼‰å¸¸ç”¨çš„è°ƒè¯•å‘½ä»¤ï¼Ÿ breakpoint è®¾ç½®æ–­ç‚¹å®šä½åˆ°æŸä¸€ä¸ªå‡½æ•° n æ–­ç‚¹æŒ‡é’ˆä¸‹ä¸€æ­¥ poæ‰“å°å¯¹è±¡ æ›´å¤š lldbï¼ˆgdbï¼‰ è°ƒè¯•å‘½ä»¤å¯æŸ¥çœ‹ The LLDB Debugger ï¼› è‹¹æœå®˜æ–¹æ–‡æ¡£ï¼š iOS Debugging Magic ã€‚ Posted by å¾®åš@iOSç¨‹åºçŠ­è¢åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | Creative Commons BY-NC-ND 3.0 å…¶ä»–é¢˜ç›® importâ€â€, import&lt;&gt;, çš„åŒºåˆ«1Â· #importå’Œ#includeçš„åŒºåˆ«ï¼šimportä¸ä¼šå¼•å‘äº¤å‰ç¼–è¯‘ï¼Œincludeä¼š #import&lt;&gt;å’Œ#importâ€œâ€çš„åŒºåˆ«ï¼šimport&lt;&gt;å¼•ç”¨ç³»ç»Ÿæ–‡ä»¶ï¼Œå¯¹äºç³»ç»Ÿè‡ªå¸¦å¤´æ–‡ä»¶çš„é¥®ç”¨importâ€œâ€å¼•ç”¨è‡ªå®šä¹‰æ–‡ä»¶ï¼Œé¦–å…ˆä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹æŸ¥æ‰¾è§†å›¾ç›¸å…³1Â· æ²¡æœ‰navigationControllerçš„æƒ…å†µä¸‹ï¼Œä»ä¸€ä¸ªviewControlleråˆ‡æ¢åˆ°å¦ä¸€ä¸ªviewControllerçš„æ–¹æ³•æ˜¯ï¼š[self presentModalViewController:nextViewController animated:YES]pushViewControlleréœ€è¦æœ‰navigationController2Â· UISplitViewControlleræ§åˆ¶å™¨å¯ä»¥å‘ˆç°å±å¹•åˆ†æ è§†å›¾çš„æ•ˆæœï¼ŒMasterViewå æœ‰320ç‚¹çš„å›ºå®šå¤§å°ã€‚æ­£ç¡®ç­”æ¡ˆ: BA æ˜¯B å¦è§£é‡Šï¼šios8 sdk ä¸­ ï¼ŒUISplitViewController å¯ä»¥åœ¨ iphone ä¸­ ä½¿ç”¨ äº†ï¼ŒmasterView çš„ å®½åº¦ æ˜¯ æ•´ä¸ª å±å¹•çš„ å®½åº¦ï¼Œæ‰€ä»¥ ä¸æ˜¯ å›ºå®šçš„ å¤§å° 3203Â· iOSä¸­å¯¼èˆªè®¾è®¡æ¨¡å¼æœ‰å‡ ç§ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: A B C ä½ çš„ç­”æ¡ˆ: A B C D (é”™è¯¯)A å¹³é“ºå¯¼èˆªB æ ‡ç­¾å¯¼èˆªC æ ‘å½¢å¯¼èˆªD æ¨¡æ€è§†å›¾å¯¼èˆªè§£é‡Šï¼šæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°åœ¨æŸä¸ªè·¯å¾„ä¸­æ»‘å‡ºä¸€ä¸ªå•å±ã€è¿›è¡Œç¼–è¾‘ã€æŸ¥çœ‹ä¿¡æ¯ã€æ“ä½œç•Œé¢çš„ä¸Šçš„å†…å®¹çš„æƒ…å†µå‘ç”Ÿã€‚è¿™æ˜¯ä¸€ç§åº”ç”¨è¡Œä¸ºçš„ç‰¹å®šå½¢æ€ï¼Œä¸€èˆ¬å¸¦æœ‰æµç¨‹çš„ç•Œé¢å˜æ›´çš„æƒ…å†µå‘ç”Ÿï¼Œæ¯”å¦‚ä¸€å¼ é¡µé¢ä¸´æ—¶å–ä»£äº†æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ˜¾ç¤ºå±ï¼Œæˆ‘ä»¬ç§°è¿™ç§å¤„ç†æ–¹å¼ä¸ºâ€œæ¨¡æ€è§†å›¾â€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å¼è§†å›¾ä»å±å¹•åº•éƒ¨è¾¹ç¼˜æ»‘ä¸Šæ¥åˆ‡ä¸€åŠè¦†ç›–äº†å½“å‰æ•´ä¸ªå±å¹•,æ¨¡æ€è§†å›¾å®Œæˆå’Œç¨‹åºä¸»åŠŸèƒ½æœ‰å…³ç³»çš„ç‹¬ç«‹ä»»åŠ¡ï¼Œå°¤å…¶é€‚åˆäºä¸»åŠŸèƒ½ç•Œé¢ä¸­æ¬ ç¼ºçš„å¤šçº§å­ä»»åŠ¡ã€‚è¿™ç§æ“ä½œä¼šæš‚æ—¶ç»•å¼€åº”ç”¨çš„æ­£å¸¸æ“ä½œã€‚æ¨¡æ€è§†å›¾å¸¸å¸¸è¢«ç”¨æ¥ç¼–è¾‘æˆ–æ·»åŠ å†…å®¹ï¼Œå½“ä½ éœ€è¦çš„æ—¶å€™æ¨¡æ€è§†å›¾ä¸€èˆ¬ä»å±å¹•åº•éƒ¨æ»‘å‡ºè€Œåé®ç›–å…ˆå‰çš„é¡µé¢ï¼Œå½“ä½ å®Œæˆä»»åŠ¡åæ»‘å‡ºçš„é¡µé¢ä¹Ÿä¼šç›¸åº”çš„ç¼©å›å»ï¼Œç„¶åå¯ä»¥ç»§ç»­ä¹‹å‰çš„æµç¨‹ã€‚æœ‰äº›æ§ä»¶å’Œç•Œé¢å…ƒç´ åªåœ¨æ¬¡è¦ä»»åŠ¡ä¸­è¢«å¶å°”ç”¨åˆ°ï¼Œæ¨¡æ€è§†å›¾å¾ˆå¥½çš„æŠŠä»–ä»¬æš‚æ—¶éšè—äº†ï¼Œå¹¶ä¸”å½“éœ€è¦çš„æ—¶å€™å‡ºç°ï¼Œæœ‰æ•ˆçš„èŠ‚çº¦äº†å±å¹•ç©ºé—´ã€‚æ¨¡æ€è§†å›¾æœ‰ç‚¹åƒæ˜¯å¯¼èˆªä¸­çš„æ­»èƒ¡åŒï¼Œä¸ºäº†èƒ½å¤Ÿè®©ç”¨æˆ·ä¹Ÿå¯ä»¥åŒæ ·æ–¹ä¾¿çš„å›åˆ°æ­£å¸¸çš„æµç¨‹ä¸­å»ï¼Œæ¨¡æ€è§†å›¾é™¤äº†æ­£å¸¸çš„æ“ä½œä¹‹å¤–ä¸€èˆ¬è¿˜æœ‰åŠ ä¸Šä¸€ä¸ªâ€œå®Œæˆâ€æŒ‰é’®ï¼Œæˆ–è€…â€œå–æ¶ˆâ€æŒ‰é’®ã€‚4Â· æ¨¡æ€è§†å›¾ä¸“ç”¨å±æ€§æœ‰å“ªäº›ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: A B C DA UIModalPresentationFullScreenï¼Œå…¨å±çŠ¶æ€ï¼Œæ˜¯é»˜è®¤å‘ˆç°æ ·å¼ï¼ŒiPhoneåªèƒ½å…¨å±å‘ˆç°ã€‚B UIModalPresentationPageSheetï¼Œå®ƒçš„å®½åº¦æ˜¯å›ºå®šçš„768ç‚¹ï¼Œåœ¨iPadç«–å±æƒ…å†µä¸‹åˆ™å…¨å±å‘ˆç°ã€‚C UIModalPresentationFormSheetï¼Œå®ƒçš„æ˜¯å›ºå®šçš„540x620ç‚¹ï¼Œæ— è®ºæ˜¯æ¨ªå±è¿˜æ˜¯ç«–å±æƒ…å†µä¸‹å‘ˆç°å°ºå¯¸éƒ½ä¸ä¼šå˜åŒ–ã€‚D UIModalPresentationCurrentContextï¼Œå®ƒä¸çˆ¶è§†å›¾æ§åˆ¶å™¨æœ‰ç›¸åŒçš„å‘ˆç°æ–¹å¼ã€‚è§£é‡Šï¼šä½œç”¨ï¼šä¸´æ—¶ä¸­æ–­å½“å‰å·¥ä½œæµç¨‹ï¼Œæ˜¾ç¤ºä¸€ä¸ªæ–°çš„è§†å›¾å±‚æ¬¡ç»“æ„ã€‚ç”¨é€”ï¼šç«‹å³ä»ç”¨æˆ·é‚£é‡Œæ”¶é›†ä¿¡æ¯ï¼›ä¸´æ—¶æ˜¾ç¤ºä¸€äº›å†…å®¹ï¼›ä¸´æ—¶æ”¹å˜å·¥ä½œæ¨¡å¼ï¼›ä¸ºä¸åŒçš„è®¾å¤‡æ–¹å‘å®ç°å¯æ›¿ä»£çš„ç•Œé¢ï¼›ä½¿ç”¨æŒ‡å®šç±»å‹çš„è¿‡æ¸¡åŠ¨ç”»æ¥æ˜¾ç¤ºä¸€ä¸ªæ–°çš„è§†å›¾ç»“æ„ï¼›æ¨¡æ€è§†å›¾çš„æ˜¾ç¤ºé£æ ¼ï¼šé€šè¿‡è®¾ç½®å±æ€§modalpresentationStyleUIModalPresentationFullScreen;UIModalPresentationPageSheet;UIModalPresentationFormSheet;æ¨¡æ€è§†å›¾çš„è¿‡æ¸¡é£æ ¼ï¼šé€šè¿‡è®¾ç½®å±æ€§modalTransitionStyleUIModalTransitionStyleCoverVertical;UIModalTransitionStyleFlipHorizontal;UIModalTransitionStyleCrossDissolve;æ­¥éª¤ï¼šåˆ›å»ºä¸€ä¸ªè¦å±•ç¤ºçš„è§†å›¾æ§ä»¶ï¼›åœ¨é€‚å½“çš„åœ°æ–¹åˆ†é…ä¸€ä¸ªå§”æ‰˜å¯¹è±¡ï¼›è°ƒç”¨å½“å‰è§†å›¾æ§åˆ¶å‰çš„presentModalViewController:animated:æ–¹æ³•ï¼Œä¼ é€’ä½ è¦æ¨¡æ€æ˜¾ç¤ºçš„è§†å›¾æ§åˆ¶å™¨ï¼›å¤šçº¿ç¨‹ç›¸å…³1Â· å®ç°å¤šçº¿ç¨‹éƒ½æœ‰å“ªå‡ ç§æ–¹æ³•ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: B CA ä½¿ç”¨@synchronized(self)B ä½¿ç”¨GCDC ä½¿ç”¨NSOperationQueueD ä½¿ç”¨@threadè§£é‡Šï¼š@thredæ˜¯å®‰å“çš„å…³é”®å­—2Â· å…³äºNSOperation queueçš„è¯´æ³•ï¼Œæ­£ç¡®çš„æ˜¯ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: A C DA ä¸»è¦ç”¨äºå¤šçº¿ç¨‹å¹¶å‘å¤„ç†B å®ƒæ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæœ‰ä¸¥æ ¼çš„å…ˆè¿›å…ˆå‡ºC å®ƒä¸ä¼šéµå®ˆä¸¥æ ¼çš„å…ˆè¿›å…ˆå‡ºD NSOperationQueueå¯ä»¥é€šè¿‡è°ƒæ•´æƒé‡æ¥è°ƒæ•´é˜Ÿåˆ—çš„æ‰§è¡Œé¡ºåºè§£é‡Šï¼šé¦–å…ˆNSOperationQueueæ˜¯å±äºå¤šçº¿ç¨‹å¹¶å‘å¤„ç†è¿™ä¸€éƒ¨åˆ†ï¼Œå®ƒä¸»è¦ç”¨æ¥æä¾›ä¸€ä¸ªå¯æ·»åŠ çš„æ“ä½œé˜Ÿåˆ—ï¼Œå°†ä¸€ç³»åˆ—æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åæ ¹æ®æ“ä½œçš„ä¼˜å…ˆçº§å’Œå†…éƒ¨æ“ä½œä¾èµ–æ¥å†³å®šæ“ä½œæ‰§è¡Œçš„é¡ºåºã€‚é«˜ä¼˜å…ˆçº§çš„æ“ä½œå…ˆäºä½ä¼˜å…ˆçº§æ‰§è¡Œã€‚ä¸€ä¸ªæ“ä½œæ‰€ä¾èµ–çš„æ“ä½œå…¨éƒ¨æ‰§è¡Œå®Œæ¯•åæ‰èƒ½æ‰§è¡Œã€‚æ‰€ä»¥A,C,Dæ­£ç¡®å†…å­˜ç›¸å…³1Â· ä¸allocç›¸åï¼Œä¸retainç›¸åï¼Œä¸allocé…å¯¹çš„åˆ†åˆ«æ˜¯:dealloc, release, releaseæ­£ç¡®ç­”æ¡ˆ: BA dealloc release deallocB dealloc release releaseC dealloc dealloc deallocD release release releaseè§£é‡Š:allocå…¶å®ç›¸å½“äºc++ä¸­çš„æ„é€ å‡½æ•°ï¼Œdeallocç›¸å½“äºææ„å‡½æ•°ï¼›retainç›¸åçš„æ˜¯releaseï¼Œè¿™ä¸ªåº”è¯¥æ²¡å¼‚è®®ï¼Œallocé…å¯¹ä½¿ç”¨çš„ä¹Ÿæ˜¯releaseï¼Œallocä¼šä½¿å¯¹è±¡çš„retainCount=1ï¼Œæ‰€ä»¥é…å¯¹çš„æ˜¯releaseã€‚2Â· ä¸‹åˆ—ç¨‹åºè¾“å‡ºæ˜¯ï¼š 1234567891011NSMutableArray* ary = [[NSMutableArray array] retain];NSString *str = [NSString stringWithFormat:@&quot;test&quot;];[str retain];[ary addObject:str];NSLog(@&quot;%@%d&quot;,str,[str retainCount]);[str retain];[str release];[str release];NSLog(@&quot;%@%d&quot;,str,[str retainCount]);[ary removeAllObjects];NSLog(@&quot;%@%d&quot;,str,[str retainCount]); ç­”æ¡ˆï¼š -1, -1, -1è§£é‡Šï¼šNSString *str = [NSString stringWithFormat:@â€testâ€];å½“ä¸­stringWithFormatæ˜¯ç±»æ–¹æ³•ï¼Œå†…å­˜ç®¡ç†ä¸Šæ˜¯autoreleaseçš„ï¼Œå› æ­¤å†…å­˜ç®¡ç†æ˜¯-13Â· ä¸‹é¢å…³äº Objective-C å†…å­˜ç®¡ç†çš„æè¿°é”™è¯¯çš„æ˜¯æ­£ç¡®ç­”æ¡ˆ: A C ä½ çš„ç­”æ¡ˆ: A B C (é”™è¯¯)A å½“ä½¿ç”¨ARCæ¥ç®¡ç†å†…å­˜æ—¶ï¼Œä»£ç ä¸­å¯ä»¥å‡ºç°autoreleaseB autoreleasepollåœ¨drainçš„æ—¶å€™ä¼šé‡Šæ”¾åœ¨å…¶ä¸­åˆ†é…çš„å¯¹è±¡C å½“ä½¿ç”¨ARCæ¥ç®¡ç†å†…å­˜æ—¶ï¼Œåœ¨çº¿ç¨‹ä¸­å¤§é‡åˆ†é…å¯¹è±¡è€Œä¸ç”¨autoreleasepoolåˆ™å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ²4Â· å…³äºå†…å­˜ç®¡ç†ï¼Œä¸‹åˆ—è¯´æ³•é”™è¯¯çš„æ˜¯æ­£ç¡®ç­”æ¡ˆ: CA è°ç”³è¯·ï¼Œè°é‡Šæ”¾B å†…å­˜ç®¡ç†ä¸»è¦è¦é¿å…â€œè¿‡æ—©é‡Šæ”¾â€å’Œâ€œå†…å­˜æ³„æ¼â€ï¼Œå¯¹äºâ€œè¿‡æ—©é‡Šæ”¾â€éœ€è¦æ³¨æ„@propertyè®¾ç½®ç‰¹æ€§æ—¶ï¼Œä¸€å®šè¦ç”¨å¯¹ç‰¹æ€§å…³é”®å­—ï¼Œå¯¹äºâ€œå†…å­˜æ³„æ¼â€ï¼Œä¸€å®šè¦ç”³è¯·äº†è¦è´Ÿè´£é‡Šæ”¾ã€‚C å…³é”®å­—alloc æˆ–new ç”Ÿæˆçš„å¯¹è±¡å¯ä»¥è‡ªåŠ¨é‡Šæ”¾ï¼›D è®¾ç½®æ­£ç¡®çš„propertyå±æ€§ï¼Œå¯¹äºretainéœ€è¦åœ¨åˆé€‚çš„åœ°æ–¹é‡Šæ”¾ï¼Œè§£é‡Š:allocæˆ–newç”Ÿæˆçš„å¯¹è±¡ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œè¦è‡ªåŠ¨é‡Šæ”¾éœ€è¦è°ƒç”¨autoreleaseæ–¹æ³•ã€‚è°ç”³è¯·ï¼Œè°é‡Šæ”¾ã€‚ä¹Ÿä¸æ˜¯å¾ˆå¯¹ï¼Œåœ¨non-ARCä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°è¦è¿”å›ä¸€ä¸ªåœ¨å †ä¸Šallocçš„å¯¹è±¡ï¼Œåœ¨è¿”å›çš„æ—¶å€™éœ€è¦è°ƒç”¨autoreleaseæ–¹æ³•ã€‚å®é™…ä¸Šæ˜¯ä½ ç”³è¯·äº†ï¼Œä½†é‡Šæ”¾äº¤ç»™äº†NSAutoReleasePoolã€‚RunLoopç›¸å…³1Â· é€‰CNSRunLoopçš„ä»¥ä¸‹æè¿°é”™è¯¯çš„æ˜¯ï¼ˆï¼‰ 1/1A Runloopå¹¶ä¸æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨æ§åˆ¶çš„B æœ‰3ç±»å¯¹è±¡å¯ä»¥è¢«run loopç›‘æ§ï¼šsourcesï¼Œtimersï¼ŒobserversC çº¿ç¨‹æ˜¯é»˜è®¤å¯åŠ¨run loopçš„D NSTimerå¯æ‰‹åŠ¨æ·»åŠ åˆ°æ–°å»ºçš„NSRunLoopä¸­è§£é‡Šï¼šA:Runloopçš„ä½œç”¨åœ¨äºå½“æœ‰äº‹æƒ…è¦åšæ—¶å®ƒä½¿å½“å‰çš„threadå·¥ä½œï¼Œæ²¡æœ‰äº‹æƒ…åšæ—¶åˆä½¿thread ä¼‘çœ sleepã€‚Runloopå¹¶ä¸æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨æ§åˆ¶çš„ï¼Œå°¤å…¶æ˜¯å¯¹é‚£äº›æ–°å»ºçš„æ¬¡çº¿ç¨‹éœ€è¦å¯¹å…¶è¿›è¡Œæ˜¾ç¤ºçš„æ§åˆ¶ã€‚Bï¼šæœ‰3ç±»å¯¹è±¡å¯ä»¥è¢«run loopç›‘æ§ï¼šsourcesã€timersã€observersã€‚å½“è¿™äº›å¯¹è±¡éœ€è¦å¤„ç†çš„æ—¶å€™ï¼Œä¸ºäº†æ¥æ”¶å›è°ƒï¼Œé¦–å…ˆå¿…é¡»é€šè¿‡ CFRunLoopAddSource ,CFRunLoopAddTimer æˆ–è€… CFRunLoopAddObserver æŠŠè¿™äº›å¯¹è±¡æ”¾å…¥run loopã€‚ è¦åœæ­¢æ¥æ”¶å®ƒçš„å›è°ƒï¼Œå¯ä»¥é€šè¿‡CFRunLoopRemoveSourceä»run loopä¸­ç§»é™¤æŸä¸ªå¯¹è±¡ã€‚Cï¼šæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„runloop, ä¸»çº¿ç¨‹æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œåˆ›å»ºçš„å­çº¿ç¨‹è¦æ‰‹åŠ¨å¼€å¯ï¼Œå› ä¸ºNSApplication åªå¯åŠ¨main applicaiton threadã€‚Dï¼šNSTimeré»˜è®¤æ·»åŠ åˆ°å½“å‰NSRunLoopä¸­ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ¶å®šæ·»åŠ åˆ°è‡ªå·±æ–°å»ºçš„NSRunLoopçš„ä¸­ã€‚2Â· å¯¹ä¸‹è¿°ä»£ç é”™è¯¯æè¿°æ­£ç¡®çš„æ˜¯( )NSTimer *myTimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(doSomeThing:) userInfo:nil repeats:YES];[myTimer fire]æ­£ç¡®ç­”æ¡ˆ: AA æ²¡æœ‰å°†timeråŠ å…¥runloopB doSomeThingç¼ºå°‘å‚æ•°C å¿˜è®°ä¼ é€’æ•°æ®ç»™userInfoD myTimerå¯¹è±¡æœªé€šè¿‡[[myTimer alloc] init]æ–¹æ³•åˆå§‹åŒ–è§£é‡Šï¼šNSTimeræœ‰ä¸¤ç§åˆå§‹åŒ–æ–¹æ³•ï¼šåˆå§‹åŒ–æ–¹æ³•ä¸€ï¼š scheduledTimerWithTimeInterval:target:selector:userInfo:repeats: æ–¹æ³•+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)seconds target:(id)target selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)repeats seconds ï¼šéœ€è¦è°ƒç”¨çš„æ¯«ç§’æ•°target ï¼šè°ƒç”¨æ–¹æ³•éœ€è¦å‘é€çš„å¯¹è±¡ã€‚å³ï¼šå‘ç»™è°userInfo ï¼šå‘é€çš„å‚æ•°repeats ï¼šæŒ‡å®šå®šæ—¶å™¨æ˜¯å¦é‡å¤è°ƒç”¨ç›®æ ‡æ–¹æ³• ç°åœ¨åšä¸ªæ¯”å–»ï¼šå¯ä»¥æŠŠè°ƒåº¦ä¸€ä¸ªè®¡æ—¶å™¨ä¸å¯åŠ¨æ±½è½¦çš„å¼•æ“ç›¸æ¯”è¾ƒã€‚è¢«è°ƒåº¦çš„è®¡æ—¶å™¨å°±æ˜¯è¿è¡Œä¸­çš„å¼•æ“ã€‚æ²¡æœ‰è¢«è°ƒåº¦çš„è®¡æ—¶å™¨å°±æ˜¯ä¸€ä¸ªå·²ç»å‡†å¤‡å¥½å¯åŠ¨ä½†æ˜¯è¿˜æ²¡æœ‰è¿è¡Œçš„å¼•æ“ã€‚æˆ‘ä»¬åœ¨ç¨‹åºé‡Œé¢ , æ— è®ºä½•æ—¶ , éƒ½å¯ä»¥è°ƒåº¦å’Œå–æ¶ˆè°ƒåº¦è®¡æ—¶å™¨ , å°±åƒæ ¹æ®æˆ‘ä»¬æ‰€å¤„çš„ç¯å¢ƒ , å†³å®šæ±½è½¦çš„å¼•æ“æ˜¯å¯åŠ¨è¿˜æ˜¯åœæ­¢ã€‚å¦‚æœä½ æƒ³è¦åœ¨ç¨‹åºä¸­ , æ‰‹åŠ¨çš„åœ¨æŸä¸€ä¸ªç¡®å®šæ—¶é—´ç‚¹è°ƒåº¦è®¡æ—¶å™¨ , å¯ä»¥ä½¿ç”¨ NSTimer çš„ç±»æ–¹æ³• timerWithTimeInterval:target:selector:userInfo:repeats: æ–¹æ³•ã€‚åˆå§‹åŒ–æ–¹æ³•äºŒï¼šå¦‚æœï¼Œæˆ‘ä»¬æƒ³åœ¨ä»»ä½•æ—¶å€™éƒ½èƒ½å¤Ÿéšå¿ƒæ‰€æ¬²çš„ å¯åŠ¨ / åœæ­¢å®šæ—¶å™¨ã€‚å’‹åŠï¼Ÿä¸ç”¨æ€¥ï¼Œè¿˜æœ‰ NSTimer çš„å¦ä¸€ç§åˆå§‹åŒ–æ–¹æ³•ï¼Œèƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ï¼š 12345678910// ä½¿ç”¨ timerWithTimeInterval æ–¹æ³•æ¥å®ä¾‹åŒ–ä¸€ä¸ª NSTimer, è¿™æ—¶å€™ NSTimer æ˜¯ä¸ä¼šå¯åŠ¨çš„self.paintingTimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(paint:) userInfo:nil repeats:YES]; // å½“éœ€è¦è°ƒç”¨æ—¶ , å¯ä»¥æŠŠè®¡æ—¶å™¨æ·»åŠ åˆ°äº‹ä»¶å¤„ç†å¾ªç¯ä¸­ [[NSRunLoop currentRunLoop] addTimer:self.paintingTimer forMode:NSDefaultRunLoopMode]; æ€»ç»“ï¼š scheduledå¼€å¤´çš„æ–¹æ³•åˆå§‹åŒ–çš„ï¼Œä¼šå°†è¿™ä¸ªtimerè°ƒåº¦åˆ°å½“å‰è¿è¡Œçš„loopä¸­; timerå’Œinitå¼€å¤´çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œåªæ˜¯åˆ›å»ºï¼Œå¹¶æ²¡æœ‰è°ƒåº¦åˆ°loopä¸­ï¼Œéœ€è¦æ‰‹åŠ¨addTimerã€‚3Â·NSString *str = @â€œlanouâ€;[str retain];NSLog(@â€œ%luâ€,str.retainCount);æ­¤å¤„æ‰“å°å‡ºæ¥çš„å€¼æ˜¯å¤šå°‘().æ­£ç¡®ç­”æ¡ˆ: DA 1B 2C -1D ULONG_MAXè§£é‡Šï¼šè¿™æ˜¯ä¸€ä¸ªæ”¾åœ¨å¸¸é‡åŒºçš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œè¿”å›çš„ç»“æœæ˜¯UINT_MAXå€¼ æœ‰äº›åœ°æ–¹çš„å›ç­”TableViewç›¸å…³1Â· ä»¥ä¸‹å…³äºtableViewç¼–è¾‘çš„æ–¹æ³•ä¸­å“ªä¸ªä¸å±äºä»£ç†æ–¹æ³•ï¼ŸAA -(void)setEditing:(BOOL)editing animated:(BOOL)animatedB -(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPathC -(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPathD -(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPathè§£é‡Šï¼š Aæ˜¯tableViewè‡ªå·±çš„æ–¹æ³•ï¼Œä¸æ˜¯ä»£ç†2Â· ä¸‹é¢å“ªäº›å±äºUITableViewDelegateåè®®çš„æ–¹æ³•ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: CA tableView:cellForRowAtIndexPath:B tableView:numberOfRowsInSection:C tableView:didSelectRowAtIndexPath:D numberOfSectionsInTableView:è§£é‡Šï¼šä»£ç†çš„ä½œç”¨æ˜¯ç”¨æ¥å®ŒæˆæŒ‡å®šçš„æŸç§åŠ¨ä½œï¼Œæ‰€ä»¥å¿…é¡»æ˜¯åŠ¨ä½œæ€§çš„æ“ä½œè€Œä¸æ˜¯æ•°æ®æ€§çš„æ“ä½œpropertyç›¸å…³1Â· å…³äºreadwrite, readonly, assign, automaticçš„è¯´æ³•ï¼Œä¸‹åˆ—è¯´æ³•é”™è¯¯çš„æ˜¯A readwrite æ˜¯å¯è¯»å¯å†™ç‰¹æ€§ï¼›éœ€è¦ç”Ÿæˆgetteræ–¹æ³•å’Œsetteræ–¹æ³•æ—¶B readonly æ˜¯åªè¯»ç‰¹æ€§ åªä¼šç”Ÿæˆgetteræ–¹æ³• ä¸ä¼šç”Ÿæˆsetteræ–¹æ³• ;ä¸å¸Œæœ›å±æ€§åœ¨ç±»å¤–æ”¹å˜C assign æ˜¯èµ‹å€¼ç‰¹æ€§ï¼Œsetteræ–¹æ³•å°†ä¼ å…¥å‚æ•°èµ‹å€¼ç»™å®ä¾‹å˜é‡ï¼›ä»…è®¾ç½®å˜é‡æ—¶ï¼›D nonatomic éåŸå­æ“ä½œï¼Œå†³å®šç¼–è¯‘å™¨ç”Ÿæˆçš„setter getteræ˜¯å¦æ˜¯åŸå­æ“ä½œï¼›nonatomicè¡¨ç¤ºå¤šçº¿ç¨‹å®‰å…¨ï¼›ä¸€èˆ¬ä½¿ç”¨atomicè§£é‡Šï¼šDé¡¹è¯´ä¸€èˆ¬ä½¿ç”¨atomicæ˜¯ä¸å¯¹çš„ï¼Œä¸€èˆ¬ä½¿ç”¨nonatomicã€‚readonly, readwriteï¼šæ˜¯æ§åˆ¶å±æ€§çš„è®¿é—®æƒé™ï¼Œreadonlyåªç”Ÿæˆgetteræ–¹æ³•ï¼Œå…¶ä»–ç±»æ˜¯æ— æ³•ä¿®æ”¹å…¶å€¼çš„ã€‚readwriteæ˜¯ä¼šåŒæ—¶ç”Ÿæˆgetterå’Œsetteræ–¹æ³•ï¼Œå…¶ä»–ç±»å¯ä»¥ä¿®æ”¹å…¶å€¼ã€‚assign, retain, weak, strong, copy, unsafe_unretainedï¼šåœ¨non-ARCä¸­ï¼Œassignå’Œretainæ˜¯ä¸€ç»„ï¼Œassignçš„å¯¹è±¡å±æ€§å¼•ç”¨è®¡æ•°ä¸å˜ï¼Œè€Œretainä¼šè¢«+1ã€‚å¯¹åº”çš„åœ¨ARCä¸­ï¼Œweakå’Œstrongæ˜¯ä¸€ç»„ï¼Œweakçš„å¯¹è±¡å±æ€§å¼•ç”¨è®¡æ•°ä¸å˜ï¼Œè€Œstrongä¼šè¢«+1ã€‚assignè¿˜ç”¨æ¥èµ‹å€¼éå¯¹è±¡å±æ€§ï¼Œä¾‹å¦‚ï¼Œintï¼Œdoubleï¼ŒBOOLï¼Œcharç­‰ã€‚copyç”¨æ¥è®¾ç½®ä¸å¯å˜çš„å¯¹è±¡å±æ€§ï¼Œä¾‹å¦‚ï¼ŒNSStringï¼ŒNSArrayï¼ŒNSDictionaryç­‰ã€‚åœ¨ARCä¸­ï¼Œä¸€ä¸ªå±æ€§è¢«è®¾ç½®ä¸ºweakï¼Œå½“å‡ºäº†ä½œç”¨åŸŸï¼Œå…¶å€¼ä¼šè¢«è®¾ç½®æˆnilã€‚ä¸å…¶ç›¸å¯¹åº”çš„æ˜¯unsafe_unretainedï¼Œunsafe_unretainedä¸ä¼šæ”¹å˜å¯¹è±¡å±æ€§çš„å¼•ç”¨è®¡æ•°ï¼ŒåŒæ—¶å‡ºäº†ä½œç”¨åŸŸçš„æ—¶å€™ï¼Œå…¶å€¼ä¹Ÿä¸ä¼šè¢«è®¾ç½®æˆnilã€‚unsafe_unretainedç›¸å½“äºnon-ARCä¸­çš„assignã€‚atomic, nonatomic: atomicæ˜¯åŸå­æ“ä½œï¼Œnonatomicæ˜¯éåŸå­æ“ä½œï¼Œä¸€èˆ¬å¸¸ç”¨çš„æ˜¯nonatomicã€‚2Â· è®¾ç½®ä»£ç†ä¸ºå±æ€§æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰æ­£ç¡®ç­”æ¡ˆ: AA @property(nonatomic,assign)B @property(atomic,copy)C @property(nonatomic,copy)D @property(nonatomic,retain)è§£é‡Šï¼šç”¨weakæ›´å¥½ï¼Œä½†æ˜¯Aæœ€æ¥è¿‘3Â· å…³äºObjective-Cä¸­å±æ€§çš„è¯´æ˜ï¼Œä»¥ä¸‹é”™è¯¯çš„æ˜¯ï¼ˆï¼‰æ­£ç¡®ç­”æ¡ˆ: DA readwriteæ˜¯å¯è¯»å¯å†™ç‰¹æ€§ï¼Œéœ€è¦ç”Ÿæˆgetteræ–¹æ³•å’Œsetteræ–¹æ³•B readonlyæ˜¯åªè¯»ç‰¹æ€§ï¼Œåªæœ‰getteræ–¹æ³•ï¼Œæ²¡æœ‰setteræ–¹æ³•C assignæ˜¯èµ‹å€¼å±æ€§ï¼Œsetteræ–¹æ³•å°†ä¼ å…¥å‚æ•°èµ‹å€¼ç»™å®ä¾‹å˜é‡D retainè¡¨ç¤ºæŒæœ‰ç‰¹æ€§ï¼Œcopyå±æ€§è¡¨ç¤ºæ‹·è´å±æ€§ï¼Œéƒ½ä¼šå»ºç«‹ä¸€ä¸ªç›¸åŒçš„å¯¹è±¡è§£é‡Šï¼š copyæ˜¯ç›´æ¥åˆ›å»ºä¸€ä¸ªã€‚æ•°ç»„ã€å­—å…¸ç­‰ç›¸å…³1Â· ä»¥ä¸‹å“ªä¸€æ®µä»£ç ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆï¼‰ CA NSArray array=@[1ï¼Œ2ï¼Œ3];NSNumber * number=array[3];B NSDictionary *dict=@{@â€keyâ€:nil};C NSString *str=nil;NSString *str2=[str substringFromIndex:3];D NSString *str=@â€hiâ€;NSString *str2=[str substringFromIndex:3];è§£é‡Šï¼šA æ•°ç»„è¶Šç•ŒB å­—å…¸çš„Keyä¸èƒ½ä¸ºnilD æ•°ç»„ä¸‹æ ‡è¶Šç•Œ2Â· å…³äºä¸‹åˆ—ç¨‹åºï¼Œè¾“å‡ºæ˜¯NSMutableArray ary = [[NSMutableArray array] retain];NSString str = [NSString stringWithFormat:@â€testâ€];[str retain];[ary addObject:str];NSLog(@â€%@%dâ€,str,[str retainCount]);[str retain];[str release];[str release];NSLog(@â€%@%dâ€,str,[str retainCount]);[aryremoveAllObjects];NSLog(@â€%@%dâ€,str,[str retainCount]);æ­£ç¡®ç­”æ¡ˆ: DA 2ï¼Œ3ï¼Œ1B 3ï¼Œ2ï¼Œ1C 1ï¼Œ2ï¼Œ3D -1ï¼Œ-1ï¼Œ-1è§£é‡Šï¼šobjective-C: NSStringåº”è¯¥ç”¨initWithFormat? è¿˜æ˜¯ stringWithFormat?ä»Šå¤©åœ¨çœ‹ä¹¦ä¸Šçš„ä¸€æ®µä»£ç æ—¶ï¼Œå‘ç°NSStringå®ä¾‹åŒ–æ—¶ï¼Œæœ‰æ—¶ç”¨çš„æ˜¯initWithFormatæ–¹æ³•ï¼Œæœ‰æ—¶ç”¨çš„æ˜¯stringWithFormatï¼Œåˆ°åº•åº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼ŸåŒºåˆ«ï¼š1ã€initWithFormatæ˜¯å®ä¾‹æ–¹æ³•åªèƒ½é€šè¿‡ NSString str = [[NSString alloc] initWithFormat:@â€%@â€,@â€Hello Worldâ€] è°ƒç”¨ï¼Œä½†æ˜¯å¿…é¡»æ‰‹åŠ¨releaseæ¥é‡Šæ”¾å†…å­˜èµ„æº2ã€stringWithFormatæ˜¯ç±»æ–¹æ³•å¯ä»¥ç›´æ¥ç”¨ NSString* str = [NSString stringWithFormat:@â€%@â€,@â€Hello Worldâ€] è°ƒç”¨ï¼Œå†…å­˜ç®¡ç†ä¸Šæ˜¯autoreleaseçš„ï¼Œä¸ç”¨æ‰‹åŠ¨æ˜¾å¼releaseã€‚ç½‘ç»œç›¸å…³1Â· NSURLConnectionDelegateåè®®ä¸­çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: A B DA connection:didReceiveData:B connection:didFailWithError:C initWithRequest:delegate:D connectionDidFinishLoading:è§£é‡Šï¼šå• çœ‹ NSURLConnectionDelegate ï¼Œç­”æ¡ˆåªæœ‰ B ï¼Œè€Œ A å’Œ D å±äº NSURLConnectionDataDelegate ã€‚ä»” ç»† çœ‹ NSURLConnectionDataDelegate çš„å£°æ˜ï¼š@protocol NSURLConnectionDataDelegate Cæ˜¯æ–¹æ³•ï¼Œä¸æ˜¯ä»£ç†2Â· NSURLConnectionç±»çš„åŒæ­¥è¯·æ±‚æ–¹æ³•æ˜¯ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: AA + sendSynchronousRequest:returningResponse:error:B â€“ initWithRequest:delegate:C â€“ initWithRequest:delegate:startImmediately:è§£é‡Šï¼šBå’ŒCéƒ½æ˜¯å¼‚æ­¥æ–¹æ³•ï¼Œéœ€è¦è®¾ç½®delegateå±æ€§ã€‚3Â· NSURLçš„æ„é€ å‡½æ•°æœ‰ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: C D requestWithURL:â€“ initWithURL: URLWithString:â€“ initWithString:è§£é‡Šï¼š[NSURL URLWithString:@â€https://a.com&quot;];[[NSURL alloc] initWithString:@â€https://a.com&quot;];æ•°æ®æŒä¹…åŒ–ç›¸å…³1Â· iOSä¸­æŒä¹…åŒ–æ–¹å¼æœ‰å“ªäº›ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: A B C DA å±æ€§åˆ—è¡¨æ–‡ä»¶B å¯¹è±¡å½’æ¡£C SQLiteæ•°æ®åº“D CoreDataè§£é‡Šï¼šA ï¼šå±æ€§åˆ—è¡¨æ–‡ä»¶ //NSUserDefaults çš„å­˜å‚¨ï¼Œå®é™…æ˜¯æœ¬åœ°ç”Ÿæˆä¸€ä¸ª plist æ–‡ä»¶ï¼Œå°†æ‰€éœ€å±æ€§å­˜å‚¨åœ¨ plist æ–‡ä»¶ä¸­B ï¼šå¯¹è±¡å½’æ¡£ // æœ¬åœ°åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥æ•°æ®ï¼Œæ–‡ä»¶ç±»å‹ä¸é™C ï¼š SQLite æ•°æ®åº“ // æœ¬åœ°åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ï¼Œè¿›è¡Œæ•°æ®å¤„ç†D ï¼š CoreData // åŒæ•°æ®åº“å¤„ç†æ€æƒ³ç›¸åŒï¼Œä½†å®ç°æ–¹å¼ä¸åŒæŸäº›æƒ…å†µä¸‹ï¼ŒBç”Ÿæˆçš„æ–‡ä»¶ä¹Ÿå¯ä»¥æ˜¯æ•°æ®åº“æ–‡ä»¶ï¼Œä½†æ˜¯å¯¹æ•°æ®çš„å¤„ç†æ–¹å¼è‚¯å®šæ˜¯ä¸åŒçš„æ‰€ä»¥ï¼ŒABCDéƒ½å±äºæœ¬åœ°æŒä¹…åŒ–çš„æ–¹å¼2Â· ä»¥ä¸‹é€‚åˆåœ¨å®¢æˆ·ç«¯åšæ•°æ®æŒä¹…åŒ–å­˜å‚¨çš„æ•°æ®çš„æœ‰æ­£ç¡®ç­”æ¡ˆ: B DA redisB localStorageC sessionStorageD userDataè§£é‡Šï¼šredisæ˜¯ä¸€ä¸ªå¼€æºä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ã€‚æ‰€ä»¥Aé€‰é¡¹ä¸­redisæ•°æ®å°±æ˜¯ä¸€ä¸ªå¹²æ‰°é¡¹ï¼Œç›´æ¥æ’é™¤ã€‚localStorageå’ŒsessionStorageä¸€æ ·éƒ½æ˜¯ç”¨æ¥å­˜å‚¨å®¢æˆ·ç«¯ä¸´æ—¶ä¿¡æ¯çš„å¯¹è±¡ã€‚ä¸åŒï¼šlocalStorageç”Ÿå‘½å‘¨æœŸæ˜¯æ°¸ä¹…ï¼Œè¿™æ„å‘³ç€é™¤éç”¨æˆ·æ˜¾ç¤ºåœ¨æµè§ˆå™¨æä¾›çš„UIä¸Šæ¸…é™¤localStorageä¿¡æ¯ï¼Œå¦åˆ™è¿™äº›ä¿¡æ¯å°†æ°¸è¿œå­˜åœ¨ã€‚sessionStorageç”Ÿå‘½å‘¨æœŸä¸ºå½“å‰çª—å£æˆ–æ ‡ç­¾é¡µï¼Œä¸€æ—¦çª—å£æˆ–æ ‡ç­¾é¡µè¢«æ°¸ä¹…å…³é—­äº†ï¼Œé‚£ä¹ˆæ‰€æœ‰é€šè¿‡sessionStorageå­˜å‚¨çš„æ•°æ®ä¹Ÿå°±è¢«æ¸…ç©ºäº†ã€‚æ‰€ä»¥é€‰Bä¸é€‰CDé€‰é¡¹ç”¨æˆ·æ•°æ®å½“ç„¶é€‚åˆåšæŒä¹…åŒ–å­˜å‚¨ï¼Œå…ç™»é™†å°±æ˜¯è·å–ä¹‹å‰å­˜å‚¨çš„ç”¨æˆ·æ•°æ®æ¥å®ç°çš„ã€‚æŒ‡é’ˆç›¸å…³1Â· å…³äºæµ…å¤åˆ¶å’Œæ·±å¤åˆ¶çš„è¯´æ³•ï¼Œä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯æ­£ç¡®ç­”æ¡ˆ: A B DA æµ…å±‚å¤åˆ¶ï¼šåªå¤åˆ¶æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¼•ç”¨å¯¹è±¡æœ¬èº«ã€‚B æ·±å±‚å¤åˆ¶ï¼šå¤åˆ¶å¼•ç”¨å¯¹è±¡æœ¬èº«ã€‚C å¦‚æœæ˜¯æµ…å¤åˆ¶ï¼Œè‹¥ç±»ä¸­å­˜åœ¨æˆå‘˜å˜é‡æŒ‡é’ˆï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ä¸€å®šä¼šå½±å“å¦å¤–ä¸€ä¸ªå¯¹è±¡D å¦‚æœæ˜¯æ·±æ‹·è´ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ä¸ä¼šå½±å“åˆ°å¦å¤–ä¸€ä¸ªå¯¹è±¡è§£é‡Šï¼šæˆ‘è®¤ä¸ºæµ…æ‹·è´æ˜¯ä¸€ä¸ªä¸å–œæ¬¢æ€è€ƒçš„æ‡’æ±‰ï¼Œè€Œæ·±æ‹·è´åˆ™æ˜¯ä¸€ä¸ªæ€ç»´ä¸¥è°¨ï¼Œå–œæ¬¢æ€è€ƒçš„äººã€‚å¯¹äºæ‡’æ±‰æ¥è¯´ï¼Œè™½ç„¶ç»™äº†ä»–ä»»åŠ¡ï¼Œä½†æ˜¯ä»–æ€»æ˜¯æƒ³å°½é‡çš„å°‘åšä¸€äº›äº‹æƒ…ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™åšå‡ºæ¥çš„ä¸œè¥¿å°±æ˜¯åªçœ‹åˆ°äº†è¡¨é¢ï¼Œä¸ä¼šå»æ€è€ƒå¯¹ä¸å¯¹ã€‚structX{intx;inty;};å¯¹äºæ‡’æ±‰æ¥è¯´ï¼Œä»–å¾ˆç›´ç™½çš„çœ‹åˆ°äº†xï¼Œçœ‹åˆ°äº†yï¼Œç„¶åå°±æ‹·è´xå’Œyï¼Œç„¶åå°±ä¸ç®¡äº†ï¼Œåæ­£æˆ‘å®Œæˆæˆ‘çš„æ‹·è´äº†ï¼Œè‡³äºå¯¹ä¸å¯¹ï¼Œæˆ‘ä¸ç®¡ã€‚è€Œä¸€æ—¦æœ‰äº†å¼•ç”¨æˆ–è€…æŒ‡é’ˆï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†structX{intx;inty;intp;};æ‡’æ±‰ä¾ç„¶åªæ˜¯ç›´æ¥è¡¨é¢çº§åˆ«çš„æ‹·è´ï¼Œäºæ˜¯æ‹·è´x, y , pï¼Œä½†æ˜¯ä»–æ²¡æœ‰æ€è€ƒæ¥ä¸‹æ¥çš„äº‹æƒ…å¯¹ä¸å¯¹ã€‚å¯¹äºæŒ‡é’ˆæˆ–è€…å¼•ç”¨æ¥è¯´ï¼Œè‹¥æ˜¯åªæ˜¯æ‹·è´è¡¨é¢ï¼Œé‚£ä¹ˆæ‹·è´åçš„ç‰©ä½“çš„æŒ‡é’ˆä¹Ÿå’ŒåŸæ¥çš„æŒ‡é’ˆæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥è™½ç„¶ç›®çš„æƒ³å®Œæˆä¸€ä¸ªå®Œç¾çš„å…‹éš†ä½“ï¼Œä½†æ˜¯å´å‘ç°å…‹éš†ä½“å’ŒåŸæ¥çš„ç‰©ä½“ä¸­é—´è¿˜æœ‰ä¸€æ ¹çº¿è¿ç€ï¼Œæ²¡æœ‰å®Œç¾çš„åˆ†ç¦»ã€‚intp=newint(47);int*q=p;å¦‚qä¸péƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªç‰©ä½“ä¸€æ ·ã€‚é‚£ä¹ˆå¦‚æœåŸæ¥çš„ç‰©ä½“é”€æ¯äº†ï¼Œä½†æ˜¯ç°åœ¨æ‹·è´çš„ç‰©ä½“è¿˜åœ¨ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ä½ æ‹·è´åçš„ç‰©ä½“çš„æˆå‘˜æŒ‡é’ˆå°±æ˜¯ä¸€ä¸ªæ‚¬æŒ‚æŒ‡é’ˆï¼ŒæŒ‡å‘äº†ä¸å†å­˜åœ¨çš„ç‰©ä½“ï¼Œé‚£ä¹ˆä½ è®¿é—®çš„è¯ï¼Œé‚£å°±ä¸çŸ¥é“ä¼šå‘ç”Ÿä»€ä¹ˆäº†ã€‚è€Œå¯¹äºæ·±æ‹·è´ï¼Œè¿™ä¸€ä¸ªå‹¤å¥‹çš„äººï¼Œä»–ä¸ä¼šåªåšè¡¨é¢ï¼Œä»–ä¼šæŠŠæ¯ä¸€ä¸ªç»†èŠ‚éƒ½ç…§é¡¾å¥½ã€‚äºæ˜¯ï¼Œå½“ä»–é‡åˆ°æŒ‡é’ˆçš„æ—¶å€™ï¼Œä»–ä¼šçŸ¥é“newå‡ºæ¥ä¸€å—æ–°çš„å†…å­˜ï¼Œç„¶åæŠŠåŸæ¥æŒ‡é’ˆæŒ‡å‘çš„å€¼æ‹¿è¿‡æ¥ï¼Œè¿™æ ·æ‰æ˜¯çœŸæ­£çš„å®Œæˆäº†å…‹éš†ä½“å’ŒåŸæ¥çš„ç‰©ä½“çš„å®Œç¾åˆ†ç¦»ï¼Œå¦‚æœç‰©ä½“æ¯”ä½œäººçš„è¯ï¼Œé‚£ä¹ˆåŸæ¥çš„äººçš„æ¯ä¸€æ ¹æ¯›ç»†è¡€ç®¡éƒ½è¢«å®Œç¾çš„æ‹·è´äº†è¿‡æ¥ï¼Œè€Œç»éåªæ˜¯è¡¨é¢ã€‚æ‰€ä»¥ï¼Œè¿™æ ·çš„ä»£ä»·ä¼šæ¯”æµ…æ‹·è´è€—è´¹çš„ç²¾åŠ›æ›´å¤§ï¼Œä»˜å‡ºçš„åŠªåŠ›æ›´å¤šï¼Œä½†æ˜¯æ˜¯å€¼å¾—çš„ã€‚å½“åŸæ¥çš„ç‰©ä½“é”€æ¯åï¼Œå…‹éš†ä½“ä¹Ÿå¯ä»¥æ´»çš„å¾ˆå¥½ã€‚ç„¶è€Œäº‹å®ä¸Šæ˜¯è¿™ä¸ªä¸–ç•Œä¸Šå¤§å¤šéƒ½æ˜¯æ‡’æ±‰ï¼ŒåŒ…æ‹¬ç¼–ç¨‹çš„äººï¼Œç¼–è¯‘å™¨ç­‰ï¼Œæ‰€ä»¥é»˜è®¤çš„è¡Œä¸ºéƒ½æ˜¯æµ…æ‹·è´ï¼Œäºæ˜¯æœ‰æ—¶å€™ä½ éœ€è¦åšä¸€ä¸ªå‹¤å¥‹çš„äººï¼Œè®©äº‹æƒ…åšæ­£ç¡®ï¼Œè‡ªå·±å»å®Œæˆæ·±æ‹·è´æ‰€éœ€è¦çš„äº‹æƒ…ã€‚delegateã€protocolç›¸å…³1Â· ä½¿ç”¨protocolæ—¶ï¼Œå£°æ˜ä¸€ç»„å¯é€‰æ‹©å®ç°ä¸å¦çš„å‡½æ•°ï¼Œéœ€è¦åœ¨å£°æ˜çš„å‰ä¸€è¡ŒåŠ ä¸Šï¼šæ­£ç¡®ç­”æ¡ˆ: BA @requiredB @optionalC @interfaceD @protocolè§£é‡Šï¼š é»˜è®¤æ˜¯@required,å¯ä»¥é€‰æ‹©å®ç°ä¸å¦å°±æ˜¯@optionalå†…çœç›¸å…³å†…çœï¼ˆIntrospectionï¼‰æ˜¯é¢å‘å¯¹è±¡è¯­è¨€å’Œç¯å¢ƒçš„ä¸€ä¸ªå¼ºå¤§ç‰¹æ€§ï¼ŒObjective-Cå’ŒCocoaåœ¨è¿™ä¸ªæ–¹é¢å°¤å…¶çš„ä¸°å¯Œã€‚å†…çœæ˜¯å¯¹è±¡æ­ç¤ºè‡ªå·±ä½œä¸ºä¸€ä¸ªè¿è¡Œæ—¶å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯çš„ä¸€ç§èƒ½åŠ›ã€‚è¿™äº›è¯¦ç»†ä¿¡æ¯åŒ…æ‹¬å¯¹è±¡åœ¨ç»§æ‰¿æ ‘ä¸Šçš„ä½ç½®ï¼Œå¯¹è±¡æ˜¯å¦éµå¾ªç‰¹å®šçš„åè®®ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥å“åº”ç‰¹å®šçš„æ¶ˆæ¯ã€‚NSObjectåè®®å’Œç±»å®šä¹‰äº†å¾ˆå¤šå†…çœæ–¹æ³•ï¼Œç”¨äºæŸ¥è¯¢è¿è¡Œæ—¶ä¿¡æ¯ï¼Œä»¥ä¾¿æ ¹æ®å¯¹è±¡çš„ç‰¹å¾è¿›è¡Œè¯†åˆ«ã€‚æ˜æ™ºåœ°ä½¿ç”¨å†…çœå¯ä»¥ä½¿é¢å‘å¯¹è±¡çš„ç¨‹åºæ›´åŠ é«˜æ•ˆå’Œå¼ºå£®ã€‚å®ƒæœ‰åŠ©äºé¿å…é”™è¯¯åœ°è¿›è¡Œæ¶ˆæ¯æ´¾å‘ã€é”™è¯¯åœ°å‡è®¾å¯¹è±¡ç›¸ç­‰ã€ä»¥åŠç±»ä¼¼çš„é—®é¢˜ã€‚1Â· ä¸‹é¢å“ªä¸ªæ–¹æ³•ä¸å±äºNSObjectçš„å†…çœ(Introspection)æ–¹æ³•æ­£ç¡®ç­”æ¡ˆ: CA isMemberOfClassB responseToSelectorC initD isKindOfClassè§£é‡Š:å†…çœæ˜¯æŒ‡èƒ½å¤Ÿæ­ç¤ºè‡ªå·±ä½œä¸ºä¸€ä¸ªè¿è¡Œæ—¶å¯¹è±¡æ‰€å…·æœ‰çš„ä¿¡æ¯çš„èƒ½åŠ›ã€‚å¯¹äºNSObjectå¯¹è±¡æ¥è¯´ï¼Œå†…çœèƒ½åŠ›æœ‰ï¼Œæ­ç¤ºå¯¹è±¡çš„ç»§æ‰¿å…³ç³»(isMemberOfClass,isKindOfClass)ï¼Œæ˜¯å¦éµå®ˆæŸä¸ªåè®®(confirmsToProtocol)ï¼Œæ˜¯å¦å®ç°æŸä¸ªæ–¹æ³•(respondsToSelector)mainå‡½æ•°ç›¸å…³1Â· ios åº”ç”¨ç¨‹åºä¸­ï¼Œ main å‡½æ•°åœ¨æœ€å¤§ç¨‹åº¦ä¸Šè¢«ä½¿ç”¨ï¼Œåº”ç”¨ç¨‹åºè¿è¡Œçš„ä¸€å°éƒ¨åˆ†å·¥ä½œç”± AppMain å‡½æ•°æ¥å¤„ç†ï¼Œæ˜¯å¦æ­£ç¡®ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: BA å¯¹B é”™è§£é‡Šï¼šåœ¨iOSåº”ç”¨ç¨‹åºï¼Œmainå‡½æ•°çš„ä½œç”¨æ˜¯å¾ˆå°‘çš„ã€‚å®ƒçš„ä¸»è¦å·¥ä½œæ˜¯æ§åˆ¶UIKit frameworkã€‚åœ¨iPhoneçš„åº”ç”¨ç¨‹åºä¸­,mainå‡½æ•°ä»…åœ¨æœ€å°ç¨‹åº¦ä¸Šè¢«ä½¿ç”¨,åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„å¤§å¤šæ•°å®é™…å·¥ä½œç”±UIApplicationMainå‡½æ•°æ¥å¤„ç†ã€‚mainä¾‹ç¨‹åªåšä¸‰ä»¶äº‹: 1.åˆ›å»ºä¸€ä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ,2.è°ƒç”¨UIApplicationMainå‡½æ•°,3.é‡Šæ”¾è‡ªåŠ¨é‡Šæ”¾æ± ã€‚æµ‹è¯•ç›¸å…³1Â· iOSå•å…ƒæµ‹è¯•æ¡†æ¶æœ‰å“ªäº›ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: A B CA OCUnitB GHUnitC OCMockD 0NSXMLè§£é‡Šï¼šOCUnitå’ŒXCTestéƒ½æ˜¯å®˜æ–¹çš„æµ‹è¯•æ¡†æ¶ï¼ŒOCUnitå·²ç»è¿‡æ—¶è¢«XCTestæ‰€å–ä»£ã€‚GHUnitå’ŒOCMockéƒ½æ˜¯ç¬¬ä¸‰æ–¹çš„æµ‹è¯•æ¡†æ¶ï¼Œå…¶å®˜æ–¹åœ°å€åˆ†åˆ«ä¸ºï¼šhttps://github.com/gh-unit/gh-unithttps://github.com/erikdoe/ocmockæ­£åˆ™è¡¨è¾¾å¼ç›¸å…³1Â· ä¸‹åˆ—æ­£åˆ™è¡¨è¾¾å¼ä¸èƒ½åŒ¹é…â€www.innotechx.comâ€çš„æ˜¯ï¼šæ­£ç¡®ç­”æ¡ˆ: A DA ^w+.w+.w+$B [w]{0,3}.[a-z].[a-z]+C ^w.*com$D [w]{3}.[a-z]{11}.[a-z]è§£é‡Šï¼šé¦–å…ˆæ¥çœ‹Aé€‰é¡¹ï¼Œ^è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œè€Œ w å’Œ . æ˜¯æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰çš„ï¼Œåƒä¸‡ä¸è¦çœ‹é”™æˆæ˜¯â€œ\\wï¼ˆåŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿æˆ–æ±‰å­—ï¼‰â€äº†ï¼Œ+ è¡¨ç¤ºé‡å¤ä¸€æ¬¡æˆ–è€…å¤šæ¬¡ï¼Œ$æ˜¯åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸã€‚æ‰€ä»¥è¯¥é€‰é¡¹ä¼šåŒ¹é… www.www.wwwï¼ˆå…¶ä¸­wå¯é‡å¤ä¸€æ¬¡ä»¥ä¸Šï¼‰ã€‚Bé€‰é¡¹ï¼Œ[w]{0,3}é™å®šç¬¦ï¼Œè¡¨ç¤ºå°†wé‡å¤0åˆ°3æ¬¡ï¼Œ â€œ . â€æ— ç‰¹æ®Šæ„ä¹‰ï¼Œ è¡¨ç¤ºé‡å¤ä»»æ„æ¬¡ï¼ŒåŒ…æ‹¬é›¶æ¬¡ï¼Œ[a-z]è¡¨ç¤ºåŒ¹é…aåˆ°zçš„å­—æ¯ï¼Œæ‰€ä»¥å°±æ˜¯åŒ¹é…aåˆ°zä¸­çš„æŸä¸€å­—æ¯ä»»æ„æ¬¡é‡å¤ã€‚åé¢è¿™ä¸ªç›¸åŒæ„æ€ï¼Œå°±æ˜¯+å·æ˜¯é‡å¤ä¸€æ¬¡ä»¥ä¸Šã€‚è¿èµ·æ¥çœ‹ï¼Œæ˜¯å¯ä»¥åŒ¹é…é€‰é¡¹çš„ã€‚Cé€‰é¡¹ï¼Œä¸ä¸Šè¿°é€‰é¡¹ç›¸åŒï¼Œ^å…ˆåŒ¹é…å­—ç¬¦ä¸²å¼€å§‹ï¼Œç„¶ååŒ…å«ä¸€ä¸ª w ï¼Œå’Œ â€œ . â€œé‡å¤ä»»æ„æ¬¡ï¼Œæœ€åä»¥comç»“å°¾ã€‚è¿™ä¸ªæ­£åˆ™ä¼šåŒ¹é…åŒ…å«äº† â€œwcomâ€çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯wè¦æ˜¯å¼€å¤´ï¼Œcomè¦æ˜¯ç»“å°¾ï¼Œæ‰€ä»¥å¯ä»¥åŒ¹é…é€‰é¡¹ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•è¯•çœ‹ã€‚Dé€‰é¡¹ï¼Œé‡å¤ä¸‰æ¬¡wï¼Œç„¶åä¸€ä¸ªâ€ . â€œ,ä½†æ˜¯åé¢è¿™é‡Œè¦é‡å¤11æ¬¡aåˆ°zä¸­çš„æŸä¸€å­—æ¯ï¼Œæ•°äº†ä¸‹é¢˜ç›®ä¸­é€‰é¡¹åªæœ‰9ä¸ªå­—æ¯ï¼Œåé¢å°±ä¸è¦çœ‹å•¦ï¼Œå·²ç»é”™å•¦~å›¾ç‰‡ç›¸å…³1Â· ä½¿ç”¨imageNamedæ–¹æ³•åˆ›å»ºUIImageå¯¹è±¡æ—¶ï¼Œä¸æ™®é€šçš„initæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæ­£ç¡®ç­”æ¡ˆ: CA æ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿B imageNamedæ–¹æ³•åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæŒ‡é’ˆï¼Œæ²¡æœ‰åˆ†é…å…¶ä»–å†…å­˜C imageNamedæ–¹æ³•å°†å›¾ç‰‡åŠ è½½åˆ°å†…å­˜ä¸­åä¸å†é‡Šæ”¾D imageNamedæ–¹æ³•å°†ä½¿ç”¨å®Œå›¾ç‰‡åç«‹å³é‡Šæ”¾è§£é‡Šï¼š imageNamedæ˜¯ä¼šæŠŠè¯»å–åˆ°çš„imageå­˜åœ¨æŸä¸ªç¼“å­˜é‡Œé¢ï¼Œç¬¬äºŒæ¬¡è¯»å–ç›¸åŒå›¾ç‰‡çš„è¯ç³»ç»Ÿå°±ä¼šç›´æ¥ä»é‚£ä¸ªç¼“å­˜ä¸­è·å–ï¼Œä»æŸç§æ„ä¹‰ä¸Šå¥½åƒä¸€ç§ä¼˜åŒ–ï¼Œä½†æ˜¯imageNamedè¯»å–åˆ°çš„é‚£ä¸ªå›¾ç‰‡ä¼¼ä¹ä¸ä¼šå› ä¸ºMemory Warningè€Œé‡Šæ”¾ï¼Œæ‰€ä»¥ç”¨è¿™ä¸ªä¼šå¯¼è‡´åœ¨ å†…å­˜ä¸è¶³ çš„æ—¶å€™é—ªé€€ã€‚ç®€å•çš„è¯´imageNamedé‡‡ç”¨äº†ç¼“å­˜æœºåˆ¶ï¼Œå¦‚æœç¼“å­˜ä¸­å·²åŠ è½½äº†å›¾ç‰‡ï¼Œç›´æ¥ä»ç¼“å­˜è¯»å°±è¡Œäº†ï¼Œæ¯æ¬¡å°±ä¸ç”¨å†å»è¯»æ–‡ä»¶äº†ï¼Œæ•ˆç‡ä¼šæ›´é«˜ã€‚1.KVOå®ç°åŸç†ï¼ŸKVOåœ¨Appleä¸­çš„APIæ–‡æ¡£å¦‚ä¸‹ï¼š Automatic key-value observing is implemented using a technique called isa-swizzlingâ€¦ When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class â€¦KVOåŸºæœ¬åŸç†ï¼š1.KVOæ˜¯åŸºäºruntimeæœºåˆ¶å®ç°çš„2.å½“æŸä¸ªç±»çš„å±æ€§å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿæ—¶ï¼Œç³»ç»Ÿå°±ä¼šåœ¨è¿è¡ŒæœŸåŠ¨æ€åœ°åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œåœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­ä»»ä½•è¢«è§‚å¯Ÿå±æ€§çš„setter æ–¹æ³•ã€‚æ´¾ç”Ÿç±»åœ¨è¢«é‡å†™çš„setteræ–¹æ³•å†…å®ç°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶3.å¦‚æœåŸç±»ä¸ºPersonï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ´¾ç”Ÿç±»åä¸ºNSKVONotifying_Person4.æ¯ä¸ªç±»å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å½“å‰ç±»ï¼Œå½“ä¸€ä¸ªç±»å¯¹è±¡çš„ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå·å·å°†isaæŒ‡é’ˆæŒ‡å‘åŠ¨æ€ç”Ÿæˆçš„æ´¾ç”Ÿç±»ï¼Œä»è€Œåœ¨ç»™è¢«ç›‘æ§å±æ€§èµ‹å€¼æ—¶æ‰§è¡Œçš„æ˜¯æ´¾ç”Ÿç±»çš„setteræ–¹æ³•5.é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äºNSObject çš„ä¸¤ä¸ªæ–¹æ³•: willChangeValueForKey: å’Œ didChangevlueForKey:ï¼›åœ¨ä¸€ä¸ªè¢«è§‚å¯Ÿå±æ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼Œ willChangeValueForKey:ä¸€å®šä¼šè¢«è°ƒç”¨ï¼Œè¿™å°± ä¼šè®°å½•æ—§çš„å€¼ã€‚è€Œå½“æ”¹å˜å‘ç”Ÿåï¼ŒdidChangeValueForKey:ä¼šè¢«è°ƒç”¨ï¼Œç»§è€Œ observeValueForKey:ofObject:change:context: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚KVOæ·±å…¥åŸç†ï¼š1.Apple ä½¿ç”¨äº† isa æ··å†™ï¼ˆisa-swizzlingï¼‰æ¥å®ç° KVO ã€‚å½“è§‚å¯Ÿå¯¹è±¡Aæ—¶ï¼ŒKVOæœºåˆ¶åŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„åä¸ºï¼š NSKVONotifying_Açš„æ–°ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ªå¯¹è±¡Açš„æœ¬ç±»ï¼Œä¸”KVOä¸ºNSKVONotifying_Aé‡å†™è§‚å¯Ÿå±æ€§çš„setter æ–¹æ³•ï¼Œsetter æ–¹æ³•ä¼šè´Ÿè´£åœ¨è°ƒç”¨åŸ setter æ–¹æ³•ä¹‹å‰å’Œä¹‹åï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿå¯¹è±¡å±æ€§å€¼çš„æ›´æ”¹æƒ…å†µã€‚2.NSKVONotifying_Aç±»å‰–æï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ï¼Œè¢«è§‚å¯Ÿå¯¹è±¡çš„ isa æŒ‡é’ˆä»æŒ‡å‘åŸæ¥çš„Aç±»ï¼Œè¢«KVOæœºåˆ¶ä¿®æ”¹ä¸ºæŒ‡å‘ç³»ç»Ÿæ–°åˆ›å»ºçš„å­ç±» NSKVONotifying_Aç±»ï¼Œæ¥å®ç°å½“å‰ç±»å±æ€§å€¼æ”¹å˜çš„ç›‘å¬ï¼›3.æ‰€ä»¥å½“æˆ‘ä»¬ä»åº”ç”¨å±‚é¢ä¸Šçœ‹æ¥ï¼Œå®Œå…¨æ²¡æœ‰æ„è¯†åˆ°æœ‰æ–°çš„ç±»å‡ºç°ï¼Œè¿™æ˜¯ç³»ç»Ÿâ€œéšç’â€äº†å¯¹KVOçš„åº•å±‚å®ç°è¿‡ç¨‹ï¼Œè®©æˆ‘ä»¬è¯¯ä»¥ä¸ºè¿˜æ˜¯åŸæ¥çš„ç±»ã€‚ä½†æ˜¯æ­¤æ—¶å¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„åä¸ºâ€œNSKVONotifying_Aâ€çš„ç±»()ï¼Œå°±ä¼šå‘ç°ç³»ç»Ÿè¿è¡Œåˆ°æ³¨å†ŒKVOçš„é‚£æ®µä»£ç æ—¶ç¨‹åºå°±å´©æºƒï¼Œå› ä¸ºç³»ç»Ÿåœ¨æ³¨å†Œç›‘å¬çš„æ—¶å€™åŠ¨æ€åˆ›å»ºäº†åä¸ºNSKVONotifying_Açš„ä¸­é—´ç±»ï¼Œå¹¶æŒ‡å‘è¿™ä¸ªä¸­é—´ç±»äº†ã€‚4.ï¼ˆisa æŒ‡é’ˆçš„ä½œç”¨ï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰isa æŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„ç±»ï¼Œå®ƒå‘Šè¯‰ Runtime ç³»ç»Ÿè¿™ä¸ªå¯¹è±¡çš„ç±»æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥å¯¹è±¡æ³¨å†Œä¸ºè§‚å¯Ÿè€…æ—¶ï¼ŒisaæŒ‡é’ˆæŒ‡å‘æ–°å­ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªè¢«è§‚å¯Ÿçš„å¯¹è±¡å°±ç¥å¥‡åœ°å˜æˆæ–°å­ç±»çš„å¯¹è±¡ï¼ˆæˆ–å®ä¾‹ï¼‰äº†ã€‚ï¼‰ å› è€Œåœ¨è¯¥å¯¹è±¡ä¸Šå¯¹ setter çš„è°ƒç”¨å°±ä¼šè°ƒç”¨å·²é‡å†™çš„ setterï¼Œä»è€Œæ¿€æ´»é”®å€¼é€šçŸ¥æœºåˆ¶ã€‚5.å­ç±»setteræ–¹æ³•å‰–æï¼šKVOçš„é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äº NSObject çš„ä¸¤ä¸ªæ–¹æ³•:willChangeValueForKey:å’Œ didChangevlueForKey:ï¼Œåœ¨å­˜å–æ•°å€¼çš„å‰ååˆ†åˆ«è°ƒç”¨2ä¸ªæ–¹æ³•ï¼š è¢«è§‚å¯Ÿå±æ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼ŒwillChangeValueForKey:è¢«è°ƒç”¨ï¼Œé€šçŸ¥ç³»ç»Ÿè¯¥ keyPath çš„å±æ€§å€¼å³å°†å˜æ›´ï¼›å½“æ”¹å˜å‘ç”Ÿåï¼Œ didChangeValueForKey: è¢«è°ƒç”¨ï¼Œé€šçŸ¥ç³»ç»Ÿè¯¥ keyPath çš„å±æ€§å€¼å·²ç»å˜æ›´ï¼›ä¹‹åï¼Œ observeValueForKey:ofObject:change:context: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚ä¸”é‡å†™è§‚å¯Ÿå±æ€§çš„setter æ–¹æ³•è¿™ç§ç»§æ‰¿æ–¹å¼çš„æ³¨å…¥æ˜¯åœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯ç¼–è¯‘æ—¶å®ç°çš„ã€‚KVOåŸç†å›¾ 2.è¯´è¯´ä½ ç†è§£çš„åŸ‹ç‚¹ï¼Ÿä»¥ä¸‹å‡ ç¯‡æ–‡ç« å†™çš„ç›¸å½“ä¸é”™ï¼Œå¯ä»¥é€‚å½“å€Ÿé‰´ä¸‹ï¼ iOSæ— åŸ‹ç‚¹æ•°æ®SDKå®è·µä¹‹è·¯ iOSæ— åŸ‹ç‚¹æ•°æ®SDKçš„æ•´ä½“è®¾è®¡ä¸æŠ€æœ¯å®ç° iOSæ— åŸ‹ç‚¹SDK ä¹‹ RNé¡µé¢çš„æ•°æ®æ”¶é›† 3.æ¶ˆæ¯è½¬å‘æœºåˆ¶åŸç†ï¼Ÿæ¶ˆæ¯è½¬å‘æœºåˆ¶åŸºæœ¬åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š 1ã€åŠ¨æ€æ–¹æ³•è§£æ 2ã€å¤‡ç”¨æ¥å—è€… 3ã€å®Œæ•´è½¬å‘ è½¬å‘æœºåˆ¶åŸç†æ–°å»ºä¸€ä¸ªHelloClassçš„ç±»ï¼Œå®šä¹‰ä¸¤ä¸ªæ–¹æ³•ï¼š 123@interfaceHelloClass:NSObject- (void)hello;+ (HelloClass *)hi;@end åŠ¨æ€æ–¹æ³•è§£æå¯¹è±¡åœ¨æ¥æ”¶åˆ°æœªçŸ¥çš„æ¶ˆæ¯æ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨æ‰€å±ç±»çš„ç±»æ–¹æ³•+resolveInstanceMethod:(å®ä¾‹æ–¹æ³•)æˆ–è€…+resolveClassMethod:(ç±»æ–¹æ³•)ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æœ‰æœºä¼šä¸ºè¯¥æœªçŸ¥æ¶ˆæ¯æ–°å¢ä¸€ä¸ªâ€å¤„ç†æ–¹æ³•â€â€œã€‚ä¸è¿‡ä½¿ç”¨è¯¥æ–¹æ³•çš„å‰ææ˜¯æˆ‘ä»¬å·²ç»å®ç°äº†è¯¥â€å¤„ç†æ–¹æ³•â€ï¼Œåªéœ€è¦åœ¨è¿è¡Œæ—¶é€šè¿‡class_addMethodå‡½æ•°åŠ¨æ€æ·»åŠ åˆ°ç±»é‡Œé¢å°±å¯ä»¥äº†ã€‚ 123456789101112131415161718192021222324252627282930313233void functionForMethod(id self, SEL _cmd){ NSLog(@&quot;Hello!&quot;);}Class functionForClassMethod(id self, SEL _cmd){ NSLog(@&quot;Hi!&quot;); return [HelloClass class];}#pragma mark - 1ã€åŠ¨æ€æ–¹æ³•è§£æ+ (BOOL)resolveClassMethod:(SEL)sel{ NSLog(@&quot;resolveClassMethod&quot;); NSString *selString = NSStringFromSelector(sel); if ([selString isEqualToString:@&quot;hi&quot;]) { Class metaClass = objc_getMetaClass(&quot;HelloClass&quot;); class_addMethod(metaClass, @selector(hi), (IMP)functionForClassMethod, &quot;v@:&quot;); return YES; } return [super resolveClassMethod:sel];}+ (BOOL)resolveInstanceMethod:(SEL)sel{ NSLog(@&quot;resolveInstanceMethod&quot;); NSString *selString = NSStringFromSelector(sel); if ([selString isEqualToString:@&quot;hello&quot;]) { class_addMethod(self, @selector(hello), (IMP)functionForMethod, &quot;v@:&quot;); return YES; } return [super resolveInstanceMethod:sel];} å¤‡ç”¨æ¥å—è€…åŠ¨æ€æ–¹æ³•è§£ææ— æ³•å¤„ç†æ¶ˆæ¯ï¼Œåˆ™ä¼šèµ°å¤‡ç”¨æ¥å—è€…ã€‚è¿™ä¸ªå¤‡ç”¨æ¥å—è€…åªèƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¸èƒ½æ˜¯selfæœ¬èº«ï¼Œå¦åˆ™å°±ä¼šå‡ºç°æ— é™å¾ªç¯ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç›¸åº”çš„å¯¹è±¡æ¥å¤„ç†aSelectorï¼Œåˆ™åº”è¯¥è°ƒç”¨çˆ¶ç±»çš„å®ç°æ¥è¿”å›ç»“æœã€‚ 12345678910111213141516171819202122232425262728293031#pragma mark - 2ã€å¤‡ç”¨æ¥æ”¶è€…- (id)forwardingTargetForSelector:(SEL)aSelector{ NSLog(@&quot;forwardingTargetForSelector&quot;); NSString *selectorString = NSStringFromSelector(aSelector); // å°†æ¶ˆæ¯äº¤ç»™_helperæ¥å¤„ç† if ([selectorString isEqualToString:@&quot;hello&quot;]) { return _helper; } return [super forwardingTargetForSelector:aSelector];}åœ¨æœ¬ç±»ä¸­éœ€è¦å®ç°è¿™ä¸ªæ–°çš„æ¥å—å¯¹è±¡@interfaceHelloClass(){ RuntimeMethodHelper *_helper;}@end@implementationHelloClass- (instancetype)init{ self = [super init]; if (self) { _helper = [RuntimeMethodHelper new]; } return self;}RuntimeMethodHelper ç±»éœ€è¦å®ç°è¿™ä¸ªéœ€è¦è½¬å‘çš„æ–¹æ³•ï¼š#import&quot;RuntimeMethodHelper.h&quot;@implementationRuntimeMethodHelper- (void)hello{ NSLog(@&quot;%@, %p&quot;, self, _cmd);}@end å®Œæ•´æ¶ˆæ¯è½¬å‘å¦‚æœåŠ¨æ€æ–¹æ³•è§£æå’Œå¤‡ç”¨æ¥å—è€…éƒ½æ²¡æœ‰å¤„ç†è¿™ä¸ªæ¶ˆæ¯ï¼Œé‚£ä¹ˆå°±ä¼šèµ°å®Œæ•´æ¶ˆæ¯è½¬å‘ï¼š 123456789101112131415161718192021#pragma mark - 3ã€å®Œæ•´æ¶ˆæ¯è½¬å‘- (void)forwardInvocation:(NSInvocation *)anInvocation{ NSLog(@&quot;forwardInvocation&quot;); if ([RuntimeMethodHelper instancesRespondToSelector:anInvocation.selector]) { [anInvocation invokeWithTarget:_helper]; }}/*å¿…é¡»é‡æ–°è¿™ä¸ªæ–¹æ³•ï¼Œæ¶ˆæ¯è½¬å‘æœºåˆ¶ä½¿ç”¨ä»è¿™ä¸ªæ–¹æ³•ä¸­è·å–çš„ä¿¡æ¯æ¥åˆ›å»ºNSInvocationå¯¹è±¡*/- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector{ NSMethodSignature *signature = [super methodSignatureForSelector:aSelector]; if (!signature) { if ([RuntimeMethodHelper instancesRespondToSelector:aSelector]) { signature = [RuntimeMethodHelper instanceMethodSignatureForSelector:aSelector]; } } return signature;} 4.è¯´è¯´ä½ ç†è§£weakå±æ€§ï¼Ÿweakå®ç°åŸç†ï¼šRuntimeç»´æŠ¤äº†ä¸€ä¸ªweakè¡¨ï¼Œç”¨äºå­˜å‚¨æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰weakæŒ‡é’ˆã€‚weakè¡¨å…¶å®æ˜¯ä¸€ä¸ªhashï¼ˆå“ˆå¸Œï¼‰è¡¨ï¼ŒKeyæ˜¯æ‰€æŒ‡å¯¹è±¡çš„åœ°å€ï¼ŒValueæ˜¯weakæŒ‡é’ˆçš„åœ°å€ï¼ˆè¿™ä¸ªåœ°å€çš„å€¼æ˜¯æ‰€æŒ‡å¯¹è±¡çš„åœ°å€ï¼‰æ•°ç»„ã€‚1ã€åˆå§‹åŒ–æ—¶ï¼šruntimeä¼šè°ƒç”¨objc_initWeakå‡½æ•°ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„weakæŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„åœ°å€ã€‚2ã€æ·»åŠ å¼•ç”¨æ—¶ï¼šobjc_initWeakå‡½æ•°ä¼šè°ƒç”¨ objc_storeWeak() å‡½æ•°ï¼Œ objc_storeWeak() çš„ä½œç”¨æ˜¯æ›´æ–°æŒ‡é’ˆæŒ‡å‘ï¼Œåˆ›å»ºå¯¹åº”çš„å¼±å¼•ç”¨è¡¨ã€‚3ã€é‡Šæ”¾æ—¶ï¼Œè°ƒç”¨clearDeallocatingå‡½æ•°ã€‚clearDeallocatingå‡½æ•°é¦–å…ˆæ ¹æ®å¯¹è±¡åœ°å€è·å–æ‰€æœ‰weakæŒ‡é’ˆåœ°å€çš„æ•°ç»„ï¼Œç„¶åéå†è¿™ä¸ªæ•°ç»„æŠŠå…¶ä¸­çš„æ•°æ®è®¾ä¸ºnilï¼Œæœ€åæŠŠè¿™ä¸ªentryä»weakè¡¨ä¸­åˆ é™¤ï¼Œæœ€åæ¸…ç†å¯¹è±¡çš„è®°å½•ã€‚è¿½é—®çš„é—®é¢˜ä¸€ï¼š1.å®ç°weakåï¼Œä¸ºä»€ä¹ˆå¯¹è±¡é‡Šæ”¾åä¼šè‡ªåŠ¨ä¸ºnilï¼Ÿruntime å¯¹æ³¨å†Œçš„ç±»ï¼Œ ä¼šè¿›è¡Œå¸ƒå±€ï¼Œå¯¹äº weak å¯¹è±¡ä¼šæ”¾å…¥ä¸€ä¸ª hash è¡¨ä¸­ã€‚ ç”¨ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€ä½œä¸º keyï¼Œå½“æ­¤å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º 0 çš„æ—¶å€™ä¼š deallocï¼Œå‡å¦‚ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€æ˜¯ a ï¼Œé‚£ä¹ˆå°±ä¼šä»¥ a ä¸ºé”®ï¼Œ åœ¨è¿™ä¸ª weak è¡¨ä¸­æœç´¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ä»¥ a ä¸ºé”®çš„ weak å¯¹è±¡ï¼Œä»è€Œè®¾ç½®ä¸º nil ã€‚è¿½é—®çš„é—®é¢˜äºŒï¼š2.å½“weakå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œåˆæ˜¯å¦‚ä½•å»å¤„ç†weakæŒ‡é’ˆçš„å‘¢ï¼Ÿ1ã€è°ƒç”¨objc_release2ã€å› ä¸ºå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0ï¼Œæ‰€ä»¥æ‰§è¡Œdealloc3ã€åœ¨deallocä¸­ï¼Œè°ƒç”¨äº†_objc_rootDeallocå‡½æ•°4ã€åœ¨_objc_rootDeallocä¸­ï¼Œè°ƒç”¨äº†object_disposeå‡½æ•°5ã€è°ƒç”¨objc_destructInstance6ã€æœ€åè°ƒç”¨objc_clear_deallocating,è¯¦ç»†è¿‡ç¨‹å¦‚ä¸‹ï¼ša. ä»weakè¡¨ä¸­è·å–åºŸå¼ƒå¯¹è±¡çš„åœ°å€ä¸ºé”®å€¼çš„è®°å½•b. å°†åŒ…å«åœ¨è®°å½•ä¸­çš„æ‰€æœ‰é™„æœ‰ weakä¿®é¥°ç¬¦å˜é‡çš„åœ°å€ï¼Œèµ‹å€¼ä¸º nilc. å°†weakè¡¨ä¸­è¯¥è®°å½•åˆ é™¤d. ä»å¼•ç”¨è®¡æ•°è¡¨ä¸­åˆ é™¤åºŸå¼ƒå¯¹è±¡çš„åœ°å€ä¸ºé”®å€¼çš„è®°å½•5.å‡å¦‚Controllerå¤ªè‡ƒè‚¿ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ1.å°†ç½‘ç»œè¯·æ±‚æŠ½è±¡åˆ°å•ç‹¬çš„ç±»ä¸­æ–¹ä¾¿åœ¨åŸºç±»ä¸­å¤„ç†å…¬å…±é€»è¾‘ï¼›æ–¹ä¾¿åœ¨åŸºç±»ä¸­å¤„ç†ç¼“å­˜é€»è¾‘ï¼Œä»¥åŠå…¶å®ƒä¸€äº›å…¬å…±é€»è¾‘ï¼›æ–¹ä¾¿åšå¯¹è±¡çš„æŒä¹…åŒ–ã€‚2.å°†ç•Œé¢çš„å°è£…æŠ½è±¡åˆ°ä¸“é—¨çš„ç±»ä¸­æ„é€ ä¸“é—¨çš„ UIView çš„å­ç±»ï¼Œæ¥è´Ÿè´£è¿™äº›æ§ä»¶çš„æ‹¼è£…ã€‚è¿™æ˜¯æœ€å½»åº•å’Œä¼˜é›…çš„æ–¹å¼ï¼Œä¸è¿‡ç¨å¾®éº»çƒ¦ä¸€äº›çš„æ˜¯ï¼Œä½ éœ€è¦æŠŠè¿™äº›æ§ä»¶çš„äº‹ä»¶å›è°ƒå…ˆæ¥ç®¡ï¼Œå†éƒ½ä¸€ä¸€æš´éœ²å› Controllerã€‚3.æ„é€  ViewModelå€Ÿé‰´MVVMã€‚å…·ä½“åšæ³•å°±æ˜¯å°† ViewController ç»™ View ä¼ é€’æ•°æ®è¿™ä¸ªè¿‡ç¨‹ï¼ŒæŠ½è±¡æˆæ„é€  ViewModel çš„è¿‡ç¨‹ã€‚4.ä¸“é—¨æ„é€ å­˜å‚¨ç±»ä¸“é—¨æ¥å¤„ç†æœ¬åœ°æ•°æ®çš„å­˜å–ã€‚5.æ•´åˆå¸¸é‡6.é¡¹ç›®ä¸­ç½‘ç»œå±‚å¦‚ä½•åšå®‰å…¨å¤„ç†ï¼Ÿ 1ã€å°½é‡ä½¿ç”¨httpshttpså¯ä»¥è¿‡æ»¤æ‰å¤§éƒ¨åˆ†çš„å®‰å…¨é—®é¢˜ã€‚httpsåœ¨è¯ä¹¦ç”³è¯·ï¼ŒæœåŠ¡å™¨é…ç½®ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œå®¢æˆ·ç«¯é…ç½®ä¸Šéƒ½éœ€è¦æŠ•å…¥ç²¾åŠ›ï¼Œæ‰€ä»¥ç¼ºä¹å®‰å…¨æ„è¯†çš„å¼€å‘äººå‘˜å®¹æ˜“è·³è¿‡httpsï¼Œæˆ–è€…æ‹–åˆ°ä»¥åé‡åˆ°é—®é¢˜å†ä¼˜åŒ–ã€‚httpsé™¤äº†æ€§èƒ½ä¼˜åŒ–éº»çƒ¦ä¸€äº›ä»¥å¤–å…¶ä»–éƒ½æ¯”æƒ³è±¡ä¸­çš„ç®€å•ï¼Œå¦‚æœæ²¡ç²¾åŠ›ä¼˜åŒ–æ€§èƒ½ï¼Œè‡³å°‘åœ¨æ³¨å†Œç™»å½•æ¨¡å—éœ€è¦å¯ç”¨httpsï¼Œè¿™éƒ¨åˆ†ä¸šåŠ¡å¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒä½ã€‚2ã€ä¸è¦ä¼ è¾“æ˜æ–‡å¯†ç ä¸çŸ¥é“ç°åœ¨è¿˜æœ‰å¤šå°‘appåå°æ˜¯æ˜æ–‡å­˜å‚¨å¯†ç çš„ã€‚æ— è®ºå®¢æˆ·ç«¯ï¼Œserverè¿˜æ˜¯ç½‘ç»œä¼ è¾“éƒ½è¦é¿å…æ˜æ–‡å¯†ç ï¼Œè¦ä½¿ç”¨hashå€¼ã€‚å®¢æˆ·ç«¯ä¸è¦åšä»»ä½•å¯†ç ç›¸å…³çš„å­˜å‚¨ï¼Œhashå€¼ä¹Ÿä¸è¡Œã€‚å­˜å‚¨tokenè¿›è¡Œä¸‹ä¸€æ¬¡çš„è®¤è¯ï¼Œè€Œä¸”tokenéœ€è¦è®¾ç½®æœ‰æ•ˆæœŸï¼Œä½¿ç”¨refreshtokenå»ç”³è¯·æ–°çš„tokenã€‚3ã€Postå¹¶ä¸æ¯”Getå®‰å…¨äº‹å®ä¸Šï¼ŒPostå’ŒGetä¸€æ ·ä¸å®‰å…¨ï¼Œéƒ½æ˜¯æ˜æ–‡ã€‚å‚æ•°æ”¾åœ¨QueryStringæˆ–è€…Bodyæ²¡ä»»ä½•å®‰å…¨ä¸Šçš„å·®åˆ«ã€‚åœ¨Httpçš„ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨Postæˆ–è€…Getéƒ½éœ€è¦åšåŠ å¯†å’Œç­¾åå¤„ç†ã€‚4ã€ä¸è¦ä½¿ç”¨301è·³è½¬301è·³è½¬å¾ˆå®¹æ˜“è¢«HttpåŠ«æŒæ”»å‡»ã€‚ç§»åŠ¨ç«¯httpä½¿ç”¨301æ¯”æ¡Œé¢ç«¯æ›´å±é™©ï¼Œç”¨æˆ·çœ‹ä¸åˆ°æµè§ˆå™¨åœ°å€ï¼Œæ— æ³•å¯Ÿè§‰åˆ°è¢«é‡å®šå‘åˆ°äº†å…¶ä»–åœ°å€ã€‚å¦‚æœä¸€å®šè¦ä½¿ç”¨ï¼Œç¡®ä¿è·³è½¬å‘ç”Ÿåœ¨httpsçš„ç¯å¢ƒä¸‹ï¼Œè€Œä¸”httpsåšäº†è¯ä¹¦ç»‘å®šæ ¡éªŒã€‚5ã€httpè¯·æ±‚éƒ½å¸¦ä¸ŠMACæ‰€æœ‰å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚ï¼Œæ— è®ºæ˜¯æŸ¥è¯¢è¿˜æ˜¯å†™æ“ä½œï¼Œéƒ½å¸¦ä¸ŠMACï¼ˆMessage AuthenticationCodeï¼‰ã€‚MACä¸ä½†èƒ½ä¿è¯è¯·æ±‚æ²¡æœ‰è¢«ç¯¡æ”¹ï¼ˆIntegrityï¼‰ï¼Œè¿˜èƒ½ä¿è¯è¯·æ±‚ç¡®å®æ¥è‡ªä½ çš„åˆæ³•å®¢æˆ·ç«¯ï¼ˆSigningï¼‰ã€‚å½“ç„¶å‰ææ˜¯ä½ å®¢æˆ·ç«¯çš„keyæ²¡æœ‰è¢«æ³„æ¼ï¼Œå¦‚ä½•ä¿è¯å®¢æˆ·ç«¯keyçš„å®‰å…¨æ˜¯å¦ä¸€ä¸ªè¯é¢˜ã€‚MACå€¼çš„è®¡ç®—å¯ä»¥ç®€å•çš„å¤„ç†ä¸ºhashï¼ˆrequestparamsï¼‹keyï¼‰ã€‚å¸¦ä¸ŠMACä¹‹åï¼ŒæœåŠ¡å™¨å°±å¯ä»¥è¿‡æ»¤æ‰ç»å¤§éƒ¨åˆ†çš„éæ³•è¯·æ±‚ã€‚MACè™½ç„¶å¸¦æœ‰ç­¾åçš„åŠŸèƒ½ï¼Œå’ŒRSAè¯ä¹¦çš„ç”µå­ç­¾åæ–¹å¼å´ä¸ä¸€æ ·ï¼ŒåŸå› æ˜¯MACç­¾åå’Œç­¾åéªŒè¯ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªkeyï¼Œè€ŒRSAæ˜¯ä½¿ç”¨ç§é’¥ç­¾åï¼Œå…¬é’¥éªŒè¯ï¼ŒMACçš„ç­¾åå¹¶ä¸å…·å¤‡æ³•å¾‹æ•ˆåº”ã€‚6ã€httpè¯·æ±‚ä½¿ç”¨ä¸´æ—¶å¯†é’¥é«˜å»¶è¿Ÿçš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œä¸ç»ä¼˜åŒ–httpsçš„ä½“éªŒç¡®å®ä¼šæ˜æ˜¾ä¸å¦‚httpã€‚åœ¨ä¸å…·å¤‡httpsæ¡ä»¶æˆ–å¯¹ç½‘ç»œæ€§èƒ½è¦æ±‚è¾ƒé«˜ä¸”ç¼ºä¹httpsä¼˜åŒ–ç»éªŒçš„åœºæ™¯ä¸‹ï¼Œhttpçš„æµé‡ä¹Ÿåº”è¯¥ä½¿ç”¨AESè¿›è¡ŒåŠ å¯†ã€‚AESçš„å¯†é’¥å¯ä»¥ç”±å®¢æˆ·ç«¯æ¥ä¸´æ—¶ç”Ÿæˆï¼Œä¸è¿‡è¿™ä¸ªä¸´æ—¶çš„AESkeyéœ€è¦ä½¿ç”¨æœåŠ¡å™¨çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œç¡®ä¿åªæœ‰è‡ªå·±çš„æœåŠ¡å™¨æ‰èƒ½è§£å¼€è¿™ä¸ªè¯·æ±‚çš„ä¿¡æ¯ï¼Œå½“ç„¶æœåŠ¡å™¨çš„responseä¹Ÿéœ€è¦ä½¿ç”¨åŒæ ·çš„AESkeyè¿›è¡ŒåŠ å¯†ã€‚ç”±äºhttpçš„åº”ç”¨åœºæ™¯éƒ½æ˜¯ç”±å®¢æˆ·ç«¯å‘èµ·ï¼ŒæœåŠ¡å™¨å“åº”ï¼Œæ‰€ä»¥è¿™ç§ç”±å®¢æˆ·ç«¯å•æ–¹ç”Ÿæˆå¯†é’¥çš„æ–¹å¼å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šä¾¿æ·çš„ä¿è¯é€šä¿¡å®‰å…¨ã€‚7ã€AESä½¿ç”¨CBCæ¨¡å¼ä¸è¦ä½¿ç”¨ECBæ¨¡å¼ï¼Œè®°å¾—è®¾ç½®åˆå§‹åŒ–å‘é‡ï¼Œæ¯ä¸ªblockåŠ å¯†ä¹‹å‰è¦å’Œä¸Šä¸ªblockçš„ç§˜æ–‡è¿›è¡Œè¿ç®—ã€‚7.main()ä¹‹å‰çš„è¿‡ç¨‹æœ‰å“ªäº›ï¼Ÿ1ã€mainä¹‹å‰çš„åŠ è½½è¿‡ç¨‹1ï¼‰dyld å¼€å§‹å°†ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶åˆå§‹åŒ–2ï¼‰äº¤ç”±ImageLoader è¯»å– imageï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬çš„ç±»ï¼Œæ–¹æ³•ç­‰å„ç§ç¬¦å·ï¼ˆClassã€Protocol ã€Selectorã€ IMPï¼‰3ï¼‰ç”±äºruntime å‘dyld ç»‘å®šäº†å›è°ƒï¼Œå½“imageåŠ è½½åˆ°å†…å­˜åï¼Œdyldä¼šé€šçŸ¥runtimeè¿›è¡Œå¤„ç†4ï¼‰runtime æ¥æ‰‹åè°ƒç”¨map_imagesåšè§£æå’Œå¤„ç†5ï¼‰æ¥ä¸‹æ¥load_images ä¸­è°ƒç”¨call_load_methodsæ–¹æ³•ï¼Œéå†æ‰€æœ‰åŠ è½½è¿›æ¥çš„Classï¼ŒæŒ‰ç»§æ‰¿å±‚æ¬¡ä¾æ¬¡è°ƒç”¨Classçš„+loadå’Œå…¶ä»–Categoryçš„+loadæ–¹æ³•6ï¼‰è‡³æ­¤ æ‰€æœ‰çš„ä¿¡æ¯éƒ½è¢«åŠ è½½åˆ°å†…å­˜ä¸­7ï¼‰æœ€ådyldè°ƒç”¨çœŸæ­£çš„mainå‡½æ•°æ³¨æ„ï¼šdyldä¼šç¼“å­˜ä¸Šä¸€æ¬¡æ³¨æ„ï¼šdyldä¼šç¼“å­˜ä¸Šä¸€æ¬¡æ³¨æ„ï¼šdyldä¼šç¼“å­˜ä¸Šä¸€ æ¦‚å¿µéƒ¨åˆ†structå’Œclassçš„åŒºåˆ«ï¼Ÿ structä¸­ä¸èƒ½å®šä¹‰å‡½æ•°ï¼ˆé’ˆå¯¹é¢å‘è¿‡ç¨‹è¯­è¨€ï¼Œä¾‹å¦‚Cï¼‰// å¯ä¸ç”¨ ä½¿ç”¨å¤§æ‹¬å·è¿›è¡Œåˆå§‹åŒ– classå’Œstructå¦‚æœå®šä¹‰äº†æ„é€ å‡½æ•°ï¼Œå°±ä¸èƒ½ç”¨å¤§æ‹¬å·åˆå§‹åŒ–ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™structå¯ä»¥ï¼Œclassåªæœ‰åœ¨æ‰€æœ‰æˆå‘˜å˜é‡å‡ä¸ºpublicæ—¶æ‰è¡Œã€‚ // å¯ä¸ç”¨ é»˜è®¤è®¿é—®æƒé™ classé»˜è®¤æˆå‘˜è®¿é—®æƒé™ä¸ºprivateï¼›structé»˜è®¤è®¿é—®ä½ æƒé™ä¸ºpublicã€‚ // é‡ç‚¹ ç»§æ‰¿æ–¹å¼ classé»˜è®¤privateï¼›structé»˜è®¤publicã€‚ // é‡ç‚¹ è¯´å‡ºä»¥ä¸‹æŒ‡é’ˆçš„å«ä¹‰ï¼š1234int **a : æŒ‡å‘ä¸€ä¸ªæŒ‡é’ˆçš„æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ•´æ•°ã€‚int *a[10] : æŒ‡å‘ä¸€ä¸ªæœ‰10ä¸ªæŒ‡é’ˆçš„æ•°ç»„ï¼Œæ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ•´æ•°ã€‚int (*a)[10] : æŒ‡å‘ä¸€ä¸ªæœ‰10ä¸ªæ•´æ•°æ•°ç»„çš„æŒ‡é’ˆã€‚int (*a)(int) : æŒ‡å‘ä¸€ä¸ªå‡½æ•°çš„æŒ‡é’ˆï¼Œè¯¥å‡½æ•°æœ‰ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ã€‚ int å’Œ NSInterger çš„åŒºåˆ«ï¼š ä»¥Cè¯­è¨€ä¸¾ä¾‹ï¼Œintå’Œlongçš„å­—èŠ‚æ•°å’Œå½“å‰æ“ä½œç³»ç»Ÿä¸­çš„æŒ‡é’ˆæ‰€å ä½æ•°æ˜¯ç›¸ç­‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œlongçš„é•¿åº¦æ°¸è¿œ â‰¥ intï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦å»è€ƒè™‘æ­¤æ—¶æ˜¯ä½¿ç”¨intè¿˜æ˜¯longæ¯”è¾ƒåˆé€‚ï¼Œä¼šä¸ä¼šå› ä¸ºä¸€æ—¶ç–å¿½é€‰æ‹©äº†intè€Œå¯¼è‡´ä½æ•°ä¸å¤Ÿé€ æˆæº¢å‡ºã€‚ è€Œåœ¨OCä¸­ä½¿ç”¨ NSInterger ï¼Œè‹¹æœå¯¹å…¶è¿›è¡Œäº†ä¸€ä¸ªå®å®šä¹‰çš„åˆ¤æ–­ï¼ˆcmd+é¼ æ ‡å·¦é”®è¿›å»çœ‹å§ï¼‰ï¼Œè¿™ä¸ªå®å®šä¹‰ä¼šè‡ªåŠ¨åˆ¤æ–­å½“å‰Appè¿è¡Œçš„ç¡¬ä»¶ç¯å¢ƒï¼Œåˆ°åº•æ˜¯32ä½æœºè¿˜æ˜¯64ä½æœºç­‰ç­‰ï¼Œä»è€Œè‡ªåŠ¨è¿”å›æœ€å¤§çš„ç±»å‹ï¼Œè€Œä¸ç”¨æˆ‘ä»¬å»æ€è€ƒæ­¤æ—¶åˆ°åº•åº”è¯¥æ˜¯ç”¨intè¿˜æ˜¯longã€‚ æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«ï¼š æµ…æ‹·è´ï¼šåˆç§°â€œæŒ‡é’ˆæ‹·è´â€ã€‚ä¸å¢åŠ æ–°å†…å­˜ï¼Œåªå¢åŠ ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘åŸæ¥çš„å†…å­˜åŒºåŸŸã€‚ æ·±æ‹·è´ï¼šåˆç§°â€œå†…å®¹æ‹·è´â€ã€‚åŒæ—¶æ‹·è´æŒ‡æ­£å’ŒæŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜ï¼Œæ–°å¢æŒ‡é’ˆæŒ‡å‘æ–°å¢å†…å­˜ã€‚ // å¯å¯¹OCä¸­çš„å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡åšæ‹“å±•ï¼Œæ­¤é—®é¢˜åªæ˜¯å•çº¯çš„æ¦‚å¿µã€‚ å†…å­˜ä¸­çš„åŒºåŸŸæ˜¯æ€ä¹ˆåˆ’åˆ†çš„ï¼Ÿ ç”¨ä¹‹å‰åšçš„ä¸€å¼ å›¾è¿›è¡Œæè¿°ï¼š è¯­è¨€éƒ¨åˆ†nilã€Nilã€NULLå’ŒNSNULLçš„åŒºåˆ«ï¼š nilï¼š æŠŠå¯¹è±¡ç½®ç©ºï¼Œç½®ç©ºåæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ä¸”å®Œå…¨ä»å†…å­˜ä¸­é‡Šæ”¾ï¼› Nilï¼š ç”¨nilçš„åœ°æ–¹å‡å¯ç”¨Nilæ›¿æ¢ï¼ŒNilè¡¨ç¤ºç½®ç©ºä¸€ä¸ªç±»ï¼› NULLï¼š è¡¨ç¤ºæŠŠä¸€ä¸ªæŒ‡é’ˆç½®ç©ºã€‚ï¼ˆç©ºæŒ‡é’ˆï¼‰ NSNULLï¼š æŠŠä¸€ä¸ªOCå¯¹è±¡ç½®ç©ºï¼Œä½†æƒ³ä¿ç•™å…¶å®¹å™¨ï¼ˆå¤§å°ï¼‰ã€‚ categoryå’Œextensionçš„åŒºåˆ«ï¼š categoryï¼šä¸ºå·²çŸ¥ç±»å¢åŠ æ–°æ–¹æ³•ã€‚ æ–°å¢æ–¹æ³•è¢«å­ç±»é›†æˆï¼› æ–°å¢çš„æ–¹æ³•æ¯”åŸæœ‰ç±»å…·å¤‡æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œä¸”ä¸å¯é‡åï¼Œé˜²æ­¢è¢«è¦†ç›–ï¼› ä¸èƒ½å¢åŠ æˆå‘˜å˜é‡ã€‚ extensionï¼š ä¸ºå½“å‰ç±»å¢åŠ ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•ï¼Œæ·»åŠ çš„æ–¹æ³•æ˜¯å¿…é¡»å®ç°çš„ã€‚ @Propertyå…³é”®è¯åŠå…¶ç›¸å…³å…³é”®å­—çš„ç†è§£ï¼š æ ¹æ®è¢«ä¿®æ”¹çš„å¯èƒ½æ€§ï¼Œã€@Propertyä¸­å…³é”®å­—çš„æ’åˆ—æ¨èä¸ºï¼šåŸå­æ€§ã€è¯»å†™æ€§ã€å†…å­˜ç®¡ç†ç‰¹æ€§ï¼› åŸå­æ€§ï¼š automaticå’Œnonautomaticã€‚å†³å®šäº†è¯¥å±æ€§æ˜¯å¦ä¸ºåŸå­æ€§çš„ï¼Œå³åœ¨å¤šçº¿ç¨‹çš„æ“ä½œä¸­ï¼Œä¸èƒ½è¢«å…¶å®ƒçº¿ç¨‹æ‰“æ–­çš„ç‰¹æ€§ï¼Œä¸€æ—¦ä½¿ç”¨äº†è¯¥å˜é‡çš„æ“ä½œä¸èƒ½è¢«å®Œæ•´æ‰§è¡Œæ—¶ï¼Œå°†ä¼šå›åˆ°è¯¥å˜é‡æ“ä½œä¹‹å‰çš„çŠ¶æ€ï¼Œä½†åŸå­æ€§å³automaticå› ä¸ºæ˜¯åŸè¯­æ“ä½œï¼ˆä¿è¯setter/getterçš„åŸè¯­æ‰§è¡Œï¼‰ï¼Œä¼šæŸè€—æ€§èƒ½ï¼Œåœ¨iOSå¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨ï¼Œè€Œåœ¨macOSå¼€å‘ä¸­éšæ„ã€‚ è¯»å†™æ€§ï¼š readOnlyå’ŒreadWriteã€‚é»˜è®¤ä¸ºreadWriteï¼Œç¼–è¯‘å™¨ä¼šå¸®åŠ©ç”Ÿæˆserter/getteræ–¹æ³•ï¼Œè€ŒreadOnlyåªä¼šå¸®åŠ©ç”Ÿæˆgetteræ–¹æ³•ã€‚ // æ­¤å¤„å¯æ‹“å±•ï¼Œéè¦ä¿®æ”¹readOnlyä¿®é¥°çš„å˜é‡æ€ä¹ˆåŠï¼Œå¯ç”¨KVCï¼Œåˆå¯ç»§ç»­æ‹“å±•KVCç›¸å…³çŸ¥è¯†ã€‚ å†…å­˜ç®¡ç†ç‰¹æ€§ï¼š assignã€weakã€strongã€unsafe_unretainedã€‚ assignï¼šä¸€èˆ¬ç”¨äºå€¼ç±»å‹ï¼Œæ¯”å¦‚intã€BOOLç­‰ï¼ˆè¿˜å¯ç”¨äºä¿®é¥°OCå¯¹è±¡ï¼› weakï¼šç”¨äºä¿®é¥°å¼•ç”¨ç±»å‹ï¼ˆå¼±å¼•ç”¨ï¼Œåªèƒ½ä¿®é¥°OCå¯¹è±¡ï¼‰ï¼› strongï¼šç”¨äºä¿®é¥°å¼•ç”¨ç±»å‹ï¼ˆå¼ºå¼•ç”¨ï¼‰ï¼› unsafeunretainedï¼šåªç”¨äºä¿®é¥°å¼•ç”¨ç±»å‹ï¼ˆå¼±å¼•ç”¨ï¼‰ï¼Œä¸weakçš„åŒºåˆ«åœ¨äºï¼Œè¢«unsafeunretainedä¿®é¥°çš„å¯¹è±¡è¢«é”€æ¯åï¼Œå…¶æŒ‡é’ˆå¹¶ä¸ä¼šè¢«è‡ªåŠ¨ç½®ç©ºï¼Œæ­¤æ—¶æŒ‡å‘äº†ä¸€ä¸ªé‡åœ°å€ã€‚ OCä¸­å¦‚ä½•å®šä¹‰ä¸€ä¸ªæšä¸¾ï¼Ÿåœ¨OCä¸­å®šä¹‰ä¸€ä¸ªæšä¸¾æœ‰ä¸‰ç§åšæ³•ï¼š å› ä¸ºOCæ˜¯å…¼å®¹Cçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨Cè¯­è¨€é£æ ¼çš„enumè¿›è¡Œå®šä¹‰ã€‚ ä½¿ç”¨NS_ENUMå®è¿›è¡Œå®šä¹‰ï¼› ä½¿ç”¨NS_OPTIONSå®è¿›è¡Œå®šä¹‰ï¼› NS_ENUMä¸ºå®šä¹‰é€šç”¨æ€§æšä¸¾ï¼Œåªèƒ½å•é€‰ï¼ŒNS_OPTIONSä¸ºå®šä¹‰ä½ç§»æšä¸¾ï¼Œå¯å¤šé€‰ã€‚ // æšä¸¾ä¸ºå•¥è¦è¿™ä¹ˆåˆ†ï¼Ÿå› ä¸ºæ¶‰åŠåˆ°æ˜¯å¦ä½¿ç”¨C++æ¨¡å¼è¿›è¡Œç¼–è¯‘æœ‰å…³ã€‚ Blockå’Œå‡½æ•°çš„å…³ç³»ï¼ˆå¯¹Blockçš„ç†è§£ï¼‰ï¼Ÿ Blockä¸å‡½æ•°æŒ‡é’ˆéå¸¸ç±»ä¼¼ï¼Œä½†Blockèƒ½å¤Ÿè®¿é—®å‡½æ•°ä»¥å¤–ã€è¯æ³•ä½œç”¨åŸŸä»¥å¤–çš„å¤–éƒ¨å˜é‡çš„å€¼ï¼› Blockä¸ä»…å®ç°äº†å‡½æ•°çš„åŠŸèƒ½ï¼Œè¿˜æºå¸¦äº†å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒï¼› Blockå®é™…ä¸Šæ˜¯æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆï¼›ï¼ˆå¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼‰ Blockä¼šæŠŠè¿›å…¥å…¶å†…éƒ¨çš„åŸºæœ¬æ•°æ®ç±»å‹å˜é‡å½“åšå¸¸é‡å¤„ç†ã€‚ã€‘ Blockæ‰§è¡Œçš„æ˜¯ä¸€ä¸ªå›è°ƒï¼Œå¹¶ä¸çŸ¥é“å…¶ä¸­çš„å¯¹è±¡åˆé€‚è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥ä¸ºäº†é˜²æ­¢åœ¨ä½¿ç”¨å¯¹è±¡ä¹‹å‰å°±è¢«é‡Šæ”¾æ‰äº†ï¼Œä¼šè‡ªåŠ¨ç»™å…¶å†…éƒ¨æ‰€ä½¿ç”¨çš„å¯¹è±¡è¿›è¡Œretainä¸€æ¬¡ã€‚ Blockä½¿ç”¨copyä¿®é¥°ç¬¦è¿›è¡Œä¿®é¥°ï¼Œä¸”ä¸èƒ½ä½¿ç”¨retainè¿›è¡Œä¿®é¥°ï¼Œå› ä¸ºretainåªæ˜¯è¿›è¡Œäº†ä¸€æ¬¡å›è°ƒï¼Œä½†blockçš„å†…å­˜è¿˜æ˜¯æ”¾åœ¨äº†æ ˆç©ºé—´ä¸­ï¼Œåœ¨æ ˆä¸Šçš„å˜é‡éšæ—¶ä¼šè¢«ç³»ç»Ÿå›æ”¶ï¼Œä¸”Blockåœ¨åˆ›å»ºçš„æ—¶å€™å†…å­˜é»˜è®¤å°±å·²ç»åˆ†é…åœ¨æ ˆç©ºé—´ä¸­ï¼Œå…¶æœ¬èº«çš„ä½œç”¨åŸŸé™äºå…¶åˆ›å»ºæ—¶ï¼Œä¸€æ—¦åœ¨è¶…å‡ºå…¶åˆ›å»ºæ—¶çš„ä½œç”¨åŸŸä¹‹å¤–ä½¿ç”¨ï¼Œåˆ™ä¼šå¯¼è‡´ç¨‹åºçš„å´©æºƒï¼Œæ•…ä½¿ç”¨copyä¿®é¥°ï¼Œä½¿å…¶æ‹·è´åˆ°å †ç©ºé—´ä¸­ï¼Œblockæœ‰æ—¶è¿˜ä¼šç”¨åˆ°ä¸€äº›æœ¬åœ°å˜é‡ï¼Œåªæœ‰å°†å…¶copyåˆ°å †ç©ºé—´ä¸­ï¼Œæ‰èƒ½ä½¿ç”¨è¿™äº›å˜é‡ã€‚ deletegateéœ€è¦weakä¿®é¥°çš„åŸå› ï¼Ÿä»¥å›¾è¯´æ˜ï¼Œå›¾ä¸­æ‰€è¡¨ç¤ºçš„æ˜¯VCå¯¹tableViewçš„æŒæœ‰ï¼Œå¦‚æœæ­¤æ—¶çš„tableView.deletegateå¯¹VCä¹Ÿæ˜¯å¼ºå¼•ç”¨ï¼Œä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨ï¼ŒåŒæ—¶ä¹Ÿç»™äº†æˆ‘ä»¬æ•²äº†è­¦é’Ÿï¼Œå½“å‡ºç°ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯å¼ºå¼•ç”¨æ—¶ï¼Œä¸‡åˆ†å°å¿ƒï¼ è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„è¾“å‡ºï¼š ç®€å†™ï¼š 123456789Computer : NSObjectMac : Computer@implementation MacNSLog(@&quot;%@&quot;, [self class]);NSLog(@&quot;%@&quot;, [super class])@end äºŒè€…éƒ½ä¼šè¾“å‡ºMacã€‚ [self class]ï¼šå½“ä½¿ç”¨selfè°ƒç”¨æ–¹æ³•æ—¶ï¼Œä»å½“å‰ç±»æ–¹æ³•åˆ—è¡¨ä¸­æ‰¾ï¼Œè‹¥æ²¡æœ‰åˆ™å†å»çˆ¶ç±»ä¸­æ‰¾ã€‚è°ƒç”¨[self class]æ—¶ï¼Œä¼šè½¬åŒ–æˆobjc_msgSendå‡½æ•°ï¼Œå…¶å®šä¹‰ä¸ºid objc_msgSend(id self, SEL op, â€¦)ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Macå®ä¾‹ï¼Œä½†å…¶å¹¶æ— -(Class)classæ–¹æ³•ï¼Œæ­¤æ—¶å»çˆ¶ç±»Computerä¸­å¯»æ‰¾ï¼Œå‘ç°ä¹Ÿæ²¡æœ‰ï¼Œå†å»å…¶çˆ¶ç±»NSObjectä¸­æ‰¾ï¼Œæ‰¾åˆ°äº†ï¼è¿”å›çš„å°±æ˜¯selfå…¶æœ¬èº«ï¼Œå¯çŒœæµ‹å…¶æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š 123- (Class)class {return object_getClass(self);} [super class]ï¼šä»çˆ¶ç±»æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œè°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚å½“è°ƒç”¨[super class]æ—¶ï¼Œè½¬æ¢æˆobjc_msgSendSuperå‡½æ•°ï¼Œå…¶å®šä¹‰ä¸ºid objc_msgSendSuper(struct objc_super *super, SEL op, â€¦)ï¼Œè€Œstruct objc_superç»“æ„ä½“çš„å®šä¹‰ä¸ºï¼š 1234struct objc_super {__unsafe_unretained id receiver;__unsafe_unretained Class super_class;} æ‰€ä»¥è½¬æ¢æˆobjc_msgSendSuperå‡½æ•°åï¼Œç¬¬ä¸€æ­¥è¦å…ˆå»æ„é€ objc_superç»“æ„ä½“ï¼Œç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜receiverå°±æ˜¯selfï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯(id)class_getSuperclass(object_getClass(â€œMacâ€))ï¼Œè¯¥å‡½æ•°è¾“å‡ºçš„ç»“æœä¸ºsuper_classå€¼ï¼Œå³Computerï¼Œç¬¬äºŒæ­¥ï¼Œåˆ™å»Computerç±»ä¸­å»æ‰¾- (Class)classï¼Œå‘ç°å¹¶æœªæ‰¾åˆ°ï¼Œæ¥ç€å»NSObjectä¸­æ‰¾ï¼Œæ‰¾åˆ°äº†ï¼æœ€åæ˜¯ä½¿ç”¨äº†objc_msgSend(objc_super-&gt;receiver, @selector(class))å»è°ƒç”¨äº†ï¼Œè¿™ä¸ªæ—¶å€™å·²ç»è·Ÿä¹‹å‰çš„[self class]è°ƒç”¨è¾“å‡ºç»“æœé‡å¤äº†ï¼Œè¿”å›ç»“æœè¿˜æ˜¯Macã€‚ iOSéƒ¨åˆ†UITableViewæ€§èƒ½è°ƒä¼˜çš„æ–¹æ³•ï¼š Cellé‡ç”¨ï¼š æ•°æ®æºæ–¹æ³•ä¼˜åŒ–ï¼šåˆ›å»ºä¸€ä¸ªé™æ€å˜é‡é‡ç”¨IDï¼Œä¾‹å¦‚ï¼šstatic NSString *cellID = @&quot;cellID&quot;;é˜²æ­¢å› ä¸ºè°ƒç”¨æ¬¡æ•°è¿‡å¤šï¼Œstaticä¿è¯åªåˆ›å»ºä¸€æ¬¡ï¼Œæé«˜æ€§èƒ½ï¼ˆæ„Ÿè§‰æ€§èƒ½çš„æå‡å¯ä»¥å¿½ç•¥ä¸è®°emmmï¼‰ ç¼“å­˜æ± è·å–å¯é‡ç”¨Cellçš„ä¸¤ä¸ªæ–¹æ³•ï¼š dequeueReusableCellWithIdentifier:(NSString *)IDä¼šæŸ¥è¯¢å¯é‡ç”¨Cellï¼Œè‹¥æ³¨å†Œäº†åŸå‹Cellåˆ™èƒ½å¤ŸæŸ¥è¯¢åˆ°ï¼Œå¦åˆ™ä¸ºnilï¼Œæ•…éœ€è¦å…ˆåˆ¤æ–­if(cell == nil) dequeueReusableCellWithIdentifier:(NSString *)ID indexPath:(NSIndexPath *)indexPathï¼Œä½¿ç”¨ä¹‹å‰å¿…é¡»é€šè¿‡SB/classè¿›è¡Œå¯é‡ç”¨Cellçš„æ³¨å†Œï¼ˆregisterNib/registerClassï¼‰ï¼Œä¸éœ€è¦åˆ¤æ–­nilï¼Œä¸€å®šä¼šè¿”å›cellï¼Œè‹¥ç¼“å†²åŒºCellä¸å­˜åœ¨ï¼Œä¼šä½¿ç”¨åŸå‹Cellé‡æ–°å®ä¾‹åŒ–ä¸€ä¸ªæ–°Cellã€‚ å°½é‡ä½¿ç”¨ä¸€ç§ç±»å‹çš„Cellï¼šèƒ½å¤Ÿå‡å°‘ä»£ç é‡ï¼Œå‡å°Nibæ–‡ä»¶çš„æ•°é‡ï¼›ä¿è¯åªæœ‰ä¸€ç§ç±»å‹çš„Cellï¼Œå®é™…ä¸ŠAppè¿ååªæœ‰Nä¸ªCellï¼Œä½†è‹¥æœ‰Mç§Cellï¼Œåˆ™å®é™…ä¸Šè¿è¡Œæœ€å¤šå´å¯èƒ½ä¼šæ˜¯MxN ä¸ªã€‚ å–„ç”¨hiddenéšè—subviewï¼šæŠŠæ‰€æœ‰ä¸åŒç±»å‹çš„viewéƒ½å®šä¹‰å¥½ï¼Œé€šè¿‡cellçš„æšä¸¾ç±»å‹å˜é‡åŠhiddenæ˜¾ç¤º/éšè—ä¸åŒç±»å‹çš„å†…å®¹ï¼Œå› ä¸ºåœ¨å®é™…å¿«é€Ÿæ»‘åŠ¨ä¸­ï¼Œå•çº¯çš„æ˜¾ç¤º/éšè—subviewæ¯”å®æ—¶åˆ›å»ºå¿«å¾—å¤šã€‚ æå‰è®¡ç®—å¹¶ç¼“å­˜Cellçš„é«˜åº¦ã€‚å¦‚æœæˆ‘ä»¬ä¸é¢„ä¼°è¡Œé«˜ï¼Œåˆ™ä¼˜å…ˆè°ƒç”¨heightForRowAtIndexPathè·å–æ¯ä¸ªCellå³å°†æ˜¾ç¤ºçš„é«˜åº¦ï¼Œå®é™…ä¸Šå°±æ˜¯è¦ç¡®å®šæ€»çš„tableView.contenSizeï¼Œæœ€åæ‰åˆæ¥ç€è°ƒç”¨cellForRowAtIndexPathï¼Œå¯ä»¥å»ºä¸€ä¸ªframeæ¨¡å‹ï¼Œä¿å­˜ä¸‹æå‰è®¡ç®—å¥½çš„cellé«˜åº¦ã€‚ å¼‚æ­¥ç»˜åˆ¶ï¼šè¿™æ˜¯ç›®å‰æœ€ç«çš„tableViewæ€§èƒ½è°ƒä¼˜æ–¹æ³•ï¼Œæ–°æµªå¾®åšæ˜¯è¿™ä¹ˆåšçš„ï¼Œå¯ä»¥ä½¿ç”¨ASDKè¿™ä¸ªåº“è¿›è¡Œã€‚ tableViewæ»‘åŠ¨æ—¶ï¼ŒæŒ‰éœ€åŠ è½½ï¼šè¯†åˆ«tableViewé™æ­¢æˆ–å‡é€Ÿæ»‘åŠ¨ç»“æŸåï¼Œå¼‚æ­¥åŠ è½½ï¼Œåœ¨å¿«é€Ÿæ»‘åŠ¨è¿‡ç¨‹ä¸­ï¼ŒåªæŒ‰éœ€åŠ è½½ç›®æ ‡æ–¹ä½å†…çš„Cellã€‚ é¿å…å¤§é‡ä½¿ç”¨å›¾ç‰‡ç¼©æ”¾ã€é¢œè‰²æ¸å˜ã€é€æ˜å›¾å±‚ã€CALayerç‰¹æ•ˆï¼ˆé˜´å½±ï¼‰ç­‰æ“ä½œï¼Œå°½é‡æ˜¾ç¤ºå¤§å°åˆšå¥½åˆé€‚çš„å›¾ç‰‡èµ„æºã€‚ å†…å­˜ä¼˜åŒ–æ–¹æ¡ˆï¼š é¦–å…ˆARCã€‚ä½†è¦æ³¨æ„é˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œé¿å…å†…å­˜æ³„éœ²ï¼› æ‡’åŠ è½½ã€‚å»¶è¿Ÿåˆ›å»ºå¯¹è±¡ï¼Œç”¨æ—¶å†åˆ›å»ºï¼› å¤ç”¨ã€‚æ¯”å¦‚tableViewã€collectionViewå•å…ƒæ ¼çš„å¤ç”¨ï¼› å·§å¦™ä½¿ç”¨å•ä¾‹ï¼Œè€Œä¸æ˜¯å…¨éƒ½ä½¿ç”¨å•ä¾‹ï¼ å•ä¾‹çš„å†™æ³•ï¼Ÿ12345678910111213141516171819static User *user;+ (User *)shareInstance { if (user == nil) { @synchronized(self) { // åŠ é” user = [User alloc] init]; } } return user;}+ (User *)shareInstance { static dispatch_onec_t onecToken; dispatch_onece(&amp;onceToken, ^{ user = [User alloc] init; }) return user;} iOSçš„è¿œç¨‹æ¨é€è¿‡ç¨‹ï¼Ÿä»¥å›¾è®²è§£ï¼š iOSä¸­å¤šçº¿ç¨‹çš„æ¦‚å¿µï¼šï¼ˆå•é—®æ¦‚å¿µï¼‰ å¤šçº¿ç¨‹ä¼˜ç‚¹ï¼šæé«˜ç¨‹åºæ‰§è¡Œæ•ˆç‡ã€‚ç¼ºç‚¹ï¼šå¼€å¯çº¿ç¨‹éœ€è¦ä¸€å®šçš„å†…å­˜æ§ä»¶ã€‚ åŒæ­¥å’Œå¼‚æ­¥ï¼šå†³å®šäº†è¦ä¸è¦å¼€å¯æ–°çš„çº¿ç¨‹ã€‚åŒæ­¥ï¼šåœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹èƒ½åŠ›ï¼›å¼‚æ­¥ï¼šåœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›ã€‚ å¹¶è¡Œå’Œä¸²è¡Œï¼šå†³å®šäº†ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼ã€‚å¹¶è¡Œï¼šå¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼Œç±»ä¼¼è¿…é›·å¤šä»»åŠ¡åŒæ—¶ä¸‹è½½ï¼›ä¸²è¡Œï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œç±»ä¼¼ä¸€ä¸ªä¸€ä¸ªä¸‹è½½ã€‚ é‡ç‚¹ï¼š å¿…é¡»è¦æ˜ç¡®iOSä¸­åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹â€”â€”UIçº¿ç¨‹ï¼Œä¸”ä¸å¯å°†è€—æ—¶ä»»åŠ¡æ”¾åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¦åˆ™ä¼šé€ æˆå¡é¡¿ã€‚","link":"/program/ï£¿/kaopu/"},{"title":"æ·±å…¥å‰–æ-WebKit","text":"HTML æ ‡å‡†HTML HTML DOM æ ‘çš„æ’å…¥çŠ¶æ€è§„èŒƒ https://html.spec.whatwg.org/multipage/parsing.html#the-insertion-mode HTML Tokenize è§„èŒƒ https://html.spec.whatwg.org/multipage/parsing.html#tokenization https://dev.w3.org/html5/spec-preview/tokenization.html HTMLElement å †æ ˆè§„èŒƒ https://html.spec.whatwg.org/multipage/parsing.html#the-stack-of-open-elements æµè§ˆå™¨å†å²1990å¹´ Berners-Lee å‘æ˜äº† WorldWideWeb æµè§ˆå™¨ï¼Œåæ”¹å Nexusï¼Œåœ¨1991å¹´å…¬å¸ƒäº†æºç ã€‚ 1993å¹´ Marc Andreessen çš„å›¢é˜Ÿå¼€å‘äº† Mosaicï¼Œ1994å¹´æ¨å‡ºæˆ‘ä»¬ç†Ÿæ‚‰çš„ Netscape Navigator ç½‘æ™¯æµè§ˆå™¨ï¼Œåœ¨æœ€ç«çˆ†çš„æ—¶å€™æ›¾å æ˜¯ç»å¤§å¤šæ•°äººçš„é€‰æ‹©ã€‚åŒæ—¶ä»–è¿˜æˆç«‹äº†ç½‘æ™¯å…¬å¸ã€‚ 1995å¹´å¾®è½¯æ¨å‡ºäº† Internet Explorer æµè§ˆå™¨ï¼Œç®€ç§° IEï¼Œé€šè¿‡å…è´¹ç»‘å®šè¿› Windows 95 ç³»ç»Ÿæœ€ç»ˆæ›¿ä»£äº† Netscapeï¼Œèµ¢å¾—äº†æµè§ˆå™¨å¤§æˆ˜ã€‚ 1998å¹´ç½‘æ™¯å…¬å¸æˆç«‹äº† Mozilla åŸºé‡‘ä¼šç»„ç»‡ï¼ŒåŒæ—¶å¼€æºæµè§ˆå™¨ä»£ç ï¼Œ2004å¹´æ¨å‡ºæœ‰å¤šæ ‡ç­¾å’Œæ”¯æŒæ‰©å±•çš„ Firefox ç«ç‹æµè§ˆå™¨å¼€å§‹æ…¢æ…¢çš„å é¢†å¸‚åœºä»½é¢ã€‚ 2003å¹´è‹¹æœå‘å¸ƒäº† Safari æµè§ˆå™¨ï¼Œ2005å¹´æ”¾å‡ºäº†æ ¸å¿ƒæºç  WebKitã€‚ 2008å¹´ Google ä»¥è‹¹æœçš„ WebKit ä¸ºå†…æ ¸ï¼Œå»ºç«‹äº†æ–°çš„é¡¹ç›® Chromiumï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¼€å‘äº†è‡ªå·±æµè§ˆå™¨ Chromeã€‚ 2012å¹´ WHATWG å’Œ W3C æ¨å‡º HTML5 æŠ€æœ¯è§„èŒƒã€‚HTML5 åŒ…å«äº†10å¤§ç±»åˆ«ï¼Œoffline ç¦»çº¿ï¼Œstorage å­˜å‚¨ï¼Œconnectivity è¿æ¥ï¼Œfile access æ–‡ä»¶è®¿é—®ï¼Œsemantics è¯­ä¹‰ï¼Œaudio / video éŸ³é¢‘è§†é¢‘ï¼Œ3D/graphics 3Då’Œå›¾å½¢ï¼Œpresentation å±•ç¤ºï¼Œperformance æ€§èƒ½å’Œ Nuts and bolts å…¶å®ƒã€‚ å®Œæ•´çš„æµè§ˆå™¨å‘å±•å²å¯ä»¥åœ¨è¿™é‡Œçœ‹ï¼šhttps://en.wikipedia.org/wiki/Timeline_of_web_browsers WebKit å…¨è²Œæ¶æ„å¯ä»¥çœ‹åˆ°æµè§ˆå™¨æŠ€æœ¯çš„å‘å±•åˆ°äº†åæœŸåŸºæœ¬éƒ½æ˜¯åŸºäº WebKit å¼€å‘çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥äº†è§£ä¸‹ WebKit å§ã€‚å…ˆçœ‹çœ‹å®ƒçš„å…¨è²Œã€‚å…ˆçœ‹çœ‹å®ƒçš„å¤§æ¨¡å—ï¼šWebKit ä¸ºäº†èƒ½å¤Ÿå…·æœ‰ Chromium é‚£æ ·çš„å¤šè¿›ç¨‹ä¼˜ç‚¹è€Œæ¨å‡ºäº† WebKit2 æŠ½è±¡å‡ºä¸€ç»„æ–°çš„ç¼–ç¨‹æ¥å£ï¼Œä¸‹é¢æ˜¯ WebKit2 çš„è¿›ç¨‹ç»“æ„æ¨¡å‹ï¼šæ•´ä¸ª WebKit æ¶æ„ï¼Œå¦‚ä¸‹ï¼šå®çº¿éƒ¨åˆ†æ˜¯å…±äº«çš„ï¼Œè™šçº¿éƒ¨åˆ†ä¼šæ ¹æ®ä¸åŒçš„å¹³å°æœ‰ä¸åŒçš„å®ç°ã€‚ ä¸‹é¢æ˜¯ WebKit æœ€æ ¸å¿ƒæœ€å¤æ‚çš„æ’ç‰ˆå¼•æ“ WebCore çš„ç»“æ„å›¾ï¼š è§£æåä¼šäº§ç”Ÿ DOM Treeï¼Œè§£æ CSS ä¼šäº§ç”Ÿ CSS Rule Treeï¼ŒJavascript ä¼šé€šè¿‡ DOM API å’Œ CSS Object Modelï¼ˆCSSOMï¼‰ API æ¥æ“ä½œ DOM Tree å’Œ CSS Rule Treeã€‚ DOM Treeä»ç½‘é¡µ URL åˆ°æ„å»ºå®Œ DOM æ ‘çš„è¿‡ç¨‹å¦‚å›¾ CSS Rule Tree é€šè¿‡ä¸Šé¢çš„ä¸¤ä¸ªæ•°æ„é€ çš„ Style Context Tree æµè§ˆå™¨å¼•æ“æœ€åä¼š é€šè¿‡ DOM Tree å’Œ CSS Rule Tree æ¥æ„é€  Rendering Treeã€‚è¿™ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š è®¡ç®—æ¯ä¸ª Node çš„ä½ç½®ï¼Œæ‰§è¡Œ Layout è¿‡ç¨‹ Compute style æ˜¯è®¡ç®— CSS æ ·å¼ï¼Œlayout æ˜¯å®šä½åæ ‡å’Œå¤§å°ï¼Œå„ç§ positionï¼Œoverflowï¼Œz-index ç­‰ã€‚è¿™äº›ç®­å¤´è¡¨ç¤ºåŠ¨æ€ä¿®æ”¹äº† DOM å±æ€§å’Œ CSS å±æ€§ä¼šå¯¼è‡´ Layout æ‰§è¡Œã€‚ WebKit æºä»£ç ç»“æ„è¯´æ˜ JavaScriptCoreï¼šé»˜è®¤ JavaScript å¼•æ“ï¼ŒGoogle å·²ç»ä½¿ç”¨äº† V8 ä½œä¸ºå…¶ Chromium çš„ JS å¼•æ“ã€‚ WebCoreï¼šæµè§ˆå™¨æ¸²æŸ“å¼•æ“ï¼ŒåŒ…å«äº†å„ä¸ªæ ¸å¿ƒæ¨¡å—ã€‚ WebCore/cssï¼šCSS è§£é‡Šå™¨ï¼ŒCSS è§„åˆ™ç­‰ã€‚ WebCore/domï¼šå„ç§ DOM å…ƒç´ å’Œ DOM Tree ç»“æ„ç›¸å…³çš„ç±»ã€‚ WebCore/htmlï¼šHTML è§£é‡Šå™¨å’Œå„ç§ HTML å…ƒç´ ç­‰ç›¸å…³å†…å®¹ã€‚ WebCore/renderingï¼šRender Object ç›¸å…³ï¼Œè¿˜æœ‰é¡µé¢æ¸²æŸ“çš„æ ·å¼å’Œå¸ƒå±€ç­‰ã€‚ WebCore/inspectorï¼šç½‘é¡µè°ƒè¯•å·¥å…·ã€‚ WebCore/loaderï¼šä¸»èµ„æºå’Œæ´¾ç”Ÿèµ„æºçš„åŠ è½½ç›¸å…³å®ç°ï¼Œè¿˜æœ‰æ´¾ç”Ÿèµ„æºçš„ Memory Cache ç­‰ã€‚ WebCore/pageï¼šé¡µé¢ç›¸å…³çš„æ“ä½œï¼Œé¡µé¢ç»“æ„å’Œäº¤äº’äº‹ä»¶ç­‰ã€‚ WebCore/platformï¼šå„ä¸ªå¹³å°ç›¸å…³çš„ä»£ç ï¼Œæ¯”å¦‚ iOSï¼ŒMac ç­‰ WebCore/storageï¼šå­˜å‚¨ç›¸å…³ï¼Œæ¯”å¦‚ WebStorageï¼ŒIndex DB ç­‰æ¥å£çš„å®ç°ã€‚ WebCore/workersï¼šWorker çº¿ç¨‹å°è£…ï¼Œæä¾› JS å¤šçº¿ç¨‹æ‰§è¡Œç¯å¢ƒã€‚ WebCore/xmlï¼šXML ç›¸å…³æ¯”å¦‚ XML Parserï¼ŒXPathï¼ŒXSLT ç­‰ã€‚ WebCore/accessibilityï¼šå›¾å½¢æ§ä»¶è®¿é—®æ¥å£ã€‚ WebCore/bindingsï¼šDOM å…ƒç´ å’Œ JS ç»‘å®šçš„æ¥å£ã€‚ WebCore/bridgeï¼šCï¼ŒJavaScript å’Œ Objective-C çš„æ¡¥æ¥ã€‚ WebCore/editingï¼šé¡µé¢ç¼–è¾‘ç›¸å…³ï¼Œæ¯”å¦‚ DOM ä¿®æ”¹ï¼Œæ‹¼å†™æ£€æŸ¥ç­‰ã€‚ WebCore/historyï¼šPage Cache å®ç°å‰è¿›åé€€æµè§ˆè®°å½•ç­‰ã€‚ WebCore/mathmlï¼šæ•°å­¦è¡¨è¾¾å¼åœ¨ç½‘é¡µä¸­çš„è§„èŒƒä»£ç å®ç°ã€‚ WebCore/pluginsï¼šNPPlugin çš„æ”¯æŒæ¥å£ WebCore/svgï¼šçŸ¢é‡å›¾å½¢çš„æ”¯æŒã€‚ WebKitï¼šå¹³å°ç›¸å…³çš„æ¥å£ï¼Œæ¯ä¸ªç›®å½•éƒ½æ˜¯ä¸åŒçš„å¹³å°æ¥å£å®ç°ã€‚ WTFï¼šåŸºç¡€ç±»åº“ï¼Œç±»ä¼¼ C++ çš„ STL åº“ï¼Œæœ‰æ¯”å¦‚å­—ç¬¦ä¸²æ“ä½œï¼Œæ™ºèƒ½æŒ‡é’ˆï¼Œçº¿ç¨‹ç­‰ã€‚ DumpRenderTreeï¼šç”¨äºç”Ÿæˆ RenderTree TestWebKitAPIï¼šæµ‹è¯• WebKit çš„ API çš„æµ‹è¯•ä»£ç  WebKit ä»£ç é£æ ¼ å†…å­˜ç®¡ç†ï¼šä½¿ç”¨çš„å¼•ç”¨è®¡æ•°ï¼Œåœ¨ RefCounted æ¨¡æ¿ç±»é‡Œæœ‰ ref() åŠ å’Œ unref() å‡æ¥è¿›è¡Œæ§åˆ¶ï¼Œå¾ˆå¤šç±»éƒ½æ˜¯ç»§æ‰¿äº†è¿™ä¸ªæ¨¡æ¿ç±»ã€‚åæœŸåŠ å…¥äº† RefPtr å’Œ PassRefPtr æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ç±»ï¼Œé‡‡ç”¨çš„æ˜¯é‡è½½èµ‹å€¼æ“ä½œç¬¦çš„æ–¹å¼èƒ½å¤Ÿè‡ªåŠ¨å®Œæˆè®¡æ•°åŠ å‡ï¼Œè¿™æ ·åŸºæœ¬æ²¡æœ‰å†…å­˜æ³„æ¼çš„å¯èƒ½ã€‚ ä»£ç è‡ªåŠ¨ç”Ÿæˆï¼šC++ å¯¹è±¡åˆ° JS å¯¹è±¡çš„ Binding å®ç°ä½¿ç”¨çš„æ˜¯ä»£ç è‡ªåŠ¨ç”Ÿæˆï¼Œç”¨ Perl è„šæœ¬ æ ¹æ® IDL æ¥å£æè¿°æ–‡ä»¶å®Œæˆä»£ç è‡ªåŠ¨ç”Ÿæˆã€‚è¿˜æœ‰éƒ¨åˆ† CSS å’Œ HTML è§£æä¹Ÿç”¨åˆ°äº†ï¼Œè¿™æ · CSS å±æ€§å€¼å’Œ HTML æ ‡ç­¾å±æ€§çš„æ·»åŠ ä¹Ÿå¤ŸèŠ‚çœå¤§é‡æ—¶é—´ï¼Œéœ€è¦ä¿®æ”¹ .in é…ç½®æ–‡ä»¶å³å¯ã€‚ ä»£ç ç¼–å†™é£æ ¼ï¼šå¯ä»¥åœ¨å®˜ç½‘æŸ¥çœ‹åˆ°ï¼šhttps://webkit.org/code-style-guidelines/ æƒ³ç»™ WebKit åšè´¡çŒ®çš„åŒå­¦ä»¬å¯ä»¥å¥½å¥½çœ‹çœ‹äº†ã€‚ WebKit çš„è®¾è®¡æ¨¡å¼ä¸‹é¢å¯ä»¥çœ‹çœ‹åœ¨ WebKit é‡Œä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Œæ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚ å•ä¾‹ï¼šWebKit é‡Œçš„ Loader ç®¡ç† CacheResource å°±æ˜¯å•ä¾‹æ¨¡å¼ã€‚ å·¥å‚æ¨¡å¼ï¼šå¯ä»¥åœ¨ WebKit æºç é‡Œæœç´¢ç»“å°¾æ˜¯ Factory çš„ä»£ç ï¼Œå®ƒä»¬ä¸€èˆ¬éƒ½æ˜¯ç”¨çš„å·¥å‚æ¨¡å¼ã€‚ è§‚å¯Ÿè€…æ¨¡å¼ï¼šåç§°ç»“å°¾æ˜¯ Client éƒ½æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ¯”å¦‚ FrameLoaderClient å¯ä»¥çœ‹æˆæ˜¯è§‚å¯Ÿè€…ç±»ï¼Œè¢«è§‚å¯Ÿè€… FrameLoader ä¼šå‘ Client è§‚å¯Ÿè€…ç±»é€šçŸ¥è‡ªèº«çŠ¶æ€çš„å˜åŒ–ã€‚ ç»„åˆæ¨¡å¼ï¼šç”¨äºæ ‘çŠ¶ç»“æ„å¯¹è±¡ï¼Œæ¯”å¦‚ DOM Treeï¼ŒRender Treeï¼Œç»„æˆå®ƒä»¬çš„ç±» ContainerNode å’Œ RenderObject å¯ä»¥çœ‹æˆç»„åˆæ¨¡å¼ã€‚ å‘½ä»¤æ¨¡å¼ï¼šDOM æ¨¡å—çš„ Event ç±»å’Œ Editing æ¨¡å—çš„ Command ç±»éƒ½æ˜¯å‘½ä»¤æ¨¡å¼ã€‚ ä¸»è¦ç±»æ•´ä½“ Frameï¼šä¸­å¿ƒç±»ï¼Œé€šè¿‡å®ƒæ‰¾å…¶å®ƒç±» FrameLoaderï¼šåŠ è½½èµ„æºç”¨çš„ Documentï¼šå…·ä½“å®ç°æ˜¯ HTMLDocument Pageï¼šçª—å£çš„æ“ä½œ EventHandlerï¼šè¾“å…¥äº‹ä»¶çš„å¤„ç†ï¼Œæ¯”å¦‚é”®ç›˜ï¼Œé¼ æ ‡ï¼Œè§¦å±ç­‰ WebCore::Frame FrameTreeï¼šç®¡ç†çˆ¶ Frame å’Œå­ Frame çš„å…³ç³»ï¼Œæ¯”å¦‚ main frame é‡Œçš„ iframeã€‚ FrameLoaderï¼šframe çš„åŠ è½½ NavigationSchedulerï¼šä¸»è¦ç”¨æ¥ç®¡ç†é¡µé¢è·³è½¬ï¼Œæ¯”å¦‚é‡å®šå‘ï¼Œmeta refresh ç­‰ã€‚ DOMWindowï¼šç®¡ç† DOM ç›¸å…³çš„äº‹ä»¶ï¼Œå±æ€§å’Œæ¶ˆæ¯ã€‚ FrameViewï¼šFrame çš„æ’ç‰ˆã€‚ Documentï¼šç”¨æ¥ç®¡ç† DOM é‡Œçš„ nodeï¼Œæ¯ä¸ª tag éƒ½ä¼šæœ‰å¯¹åº”çš„ DOM node å…³è”ã€‚ ScriptControllerï¼šç®¡ç† js è„šæœ¬ã€‚ Editorï¼šç®¡ç†é¡µé¢æ¯”å¦‚ copyï¼Œpasteå’Œè¾“å…¥ç­‰ç¼–è¾‘æ“ä½œã€‚ SelectionControllerï¼šç®¡ç† Frame é‡Œçš„é€‰æ‹©æ“ä½œã€‚ AnimationControlleï¼šåŠ¨ç”»æ§åˆ¶ã€‚ EventHandlerï¼šå¤„ç†äº‹ä»¶æ¯”å¦‚é¼ æ ‡ï¼ŒæŒ‰é”®ï¼Œæ»šåŠ¨å’Œ resize ç­‰äº‹ä»¶ã€‚ æ¸²æŸ“å¼•æ“ä¸Šå›¾å¯ä»¥çœ‹åˆ°æ¸²æŸ“å¼•æ“å¤„äºæµè§ˆå™¨ä¸‰å±‚ç»“æ„çš„æœ€ä¸Šå±‚ã€‚ä¸‹é¢æ˜¯æ¸²æŸ“çš„è¿‡ç¨‹ï¼š Frame çš„ä¸»è¦æ¥å£Create123456Ref&lt;Frame&gt; Frame::create(Page* page, HTMLFrameOwnerElement* ownerElement, FrameLoaderClient* client){ ASSERT(page); ASSERT(client); return adoptRef(*new Frame(*page, ownerElement, *client));} Frame::create é‡Œä¼šè°ƒç”¨åˆ° Frame çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»º Frame å¯¹è±¡ã€‚åˆå§‹è°ƒç”¨é¡ºåº 123456webPage::setViewwebPage::setViewportSizewebPage::mainFramewebPagePrivate::createMainFramewebFrameData::webFrameDataFrame::create è§£æä¸­å‘ç° iframe æ—¶çš„è°ƒç”¨é¡ºåº 12345678FrameLoader::finishedLoadingHTMLDocumentParser::appendHTMLTreeBuilder::processTokenHTMLElementBase::openURLSubFrameLoader::requestFrameFrameLoaderClient::creatFramewebFrameData::webFrameDataFrame::create createView12345c++void Frame::createView(const IntSize&amp; viewportSize, const Color&amp; backgroundColor, bool transparent, const IntSize&amp; fixedLayoutSize, const IntRect&amp; fixedVisibleContentRect, bool useFixedLayout, ScrollbarMode horizontalScrollbarMode, bool horizontalLock, ScrollbarMode verticalScrollbarMode, bool verticalLock) ä¼šåˆ›å»ºå‡ºç”¨äºæ’ç‰ˆçš„ FrameView å¯¹è±¡ã€‚éœ€è¦ä¸€äº›å’Œæ’ç‰ˆç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚åˆå§‹ viewport çš„å¤§å°ï¼ŒèƒŒæ™¯è‰²ï¼Œæ»šåŠ¨æ¡æ¨¡å¼ç­‰ï¼Œå®Œæˆåˆ›å»ºè°ƒç”¨ Frame::setView è®¾ç½®ä¸ºå½“å‰ FrameViewã€‚è°ƒç”¨é¡ºåº 12345c++FrameLoader::commitProvisionalLoadFrameLoader::transitionToCommittedFrameLoaderClient::transitionToCommittedForNewPageFrame::createView setDocument12c++void Frame::setDocument(RefPtr&lt;Document&gt;&amp;&amp; newDocument) ç”¨æ¥å…³è” Frame å’Œ Document å¯¹è±¡Frame åˆå§‹åŒ–è°ƒç”¨é¡ºåº 1234567c++WebFrame::webFramewebFramePrivate::initFrame::initFrameLoader::initDocumentWriter::beginFrame::setDocument js è„šæœ¬æ›´æ”¹æ•°æ®æ—¶çš„è°ƒç”¨é¡ºåº 1234567891011c++DocumentLoader::receivedDataDocumentLoader::commitLoadFrameLoaderClient::committedLoadDocumentLoader::commitDataDocumentWriter::setEncodingDocumentWriter::willSetEncodingFrameLoader::receivedFirstDataDocumentWriter::beginFrameLoader::clearFrame::setDocument WTFå…¨ç§°æ˜¯ Web Template Libraryï¼Œæ˜¯ WebKit çš„åŸºç¡€åº“ï¼Œå®ç°äº†æ™ºèƒ½æŒ‡é’ˆï¼Œå­—ç¬¦ä¸²å’Œ Containerï¼Œæä¾›è·¨å¹³å°åŸå­æ“ä½œï¼Œæ—¶é—´å’Œçº¿ç¨‹çš„å°è£…ï¼Œèƒ½å¤Ÿé«˜æ•ˆçš„å¯¹å†…å­˜è¿›è¡Œç®¡ç†ã€‚WebCore é‡Œéƒ½æ˜¯ WTF çš„ä»£ç è€Œæ²¡æœ‰ STLã€‚ Smart ptr æ™ºèƒ½æŒ‡é’ˆå¯¹åŸç”ŸæŒ‡é’ˆçš„å°è£…ï¼Œè¿™æ · C++ å¯ä»¥è‡ªåŠ¨åŒ–çš„å®ç°èµ„æºç®¡ç†å’ŒæŒ‡é’ˆè¡ç”Ÿæ“ä½œæ¯”å¦‚æ‹·è´ï¼Œå¼•ç”¨è®¡æ•°ï¼ŒautoLocker å’Œ Lazy evaluation ç­‰ã€‚ æ™ºèƒ½æŒ‡é’ˆä¸»è¦å°±æ˜¯å®ç°åŠ¨æ€åˆ†é…å¯¹è±¡çš„å†…å­˜å¹¶ä¸”èƒ½è‡ªåŠ¨å›æ”¶ï¼ŒåŸç†å°±æ˜¯æ™ºèƒ½æŒ‡é’ˆçš„å¯¹è±¡ä¼šä½œä¸ºæ ˆä¸Šåˆ†é…çš„è‡ªåŠ¨å˜é‡åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶è¢«è‡ªåŠ¨ææ„ã€‚ æ™ºèƒ½æŒ‡é’ˆçš„å®ç°æ–¹å¼ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243template &lt;typename T&gt;class SmartPtr { public: typedef T ValueType; typedef ValueType *PtrType; //æ„é€ ææ„å‡½æ•° SmartPtr() :m_ptr(NULL) {} SmartPtr(PtrType ptr) :m_ptr(ptr) {} ~SmartPtr() { if(m_ptr) delete m_ptr; } //æ‹·è´æ„é€ å‡½æ•° SmartPtr(const SmartPtr&lt;T&gt;&amp; o); //å †ä¸Šåˆ†é…çš„å¯¹è±¡ template&lt;typename U&gt; SmartPtr(const SmartPtr&lt;U&gt;&amp; o); //æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ template&lt;typename U&gt; SmartPtr&amp; operator = (const SmartPtr&lt;U&gt;&amp; o); //æŒ‡é’ˆè¿ç®—ï¼Œæ˜¯ä¸ºäº†è®©æ™ºèƒ½æŒ‡é’ˆåœ¨è¡Œä¸ºä¸Šæ›´ç±»ä¼¼åŸç”ŸæŒ‡é’ˆ ValueType&amp; operator*() const { return *m_ptr; } PtrType operator-&gt;() const { return m_ptr; } //é€»è¾‘è¿ç®—ç¬¦é‡è½½ //å¯¹æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºçš„ç®€æ´åˆ¤æ–­ if(!ptr)ï¼Œå¦‚æœå®šä¹‰äº† operator!() æ™ºèƒ½æŒ‡é’ˆå°±å¯ä»¥ç”¨ if(!SmartPtr) bool operator!() const { return !m_ptr; } //è½¬æˆ raw ptr operator PtrType() { return m_ptr; } private: PtrType m_ptr;}//åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡æ ¼å¼SmartPtr(new ValueType()); RefPtrRefPtr éœ€è¦æ“ä½œå¯¹è±¡æ¥å¼•ç”¨è®¡æ•°ï¼ŒåŒ…å« ref() å’Œ deref() æ–¹æ³•çš„ç±»å¯¹è±¡æ‰å¯ä»¥ç”± RefPtr å¼•ç”¨ã€‚ä¸ºäº†ä¸è®© RefPtr å¼•ç”¨çš„ç±»éƒ½ç”¨æ‰‹å·¥å»æ·»åŠ  ref() å’Œ deref() WTF æä¾›äº† RefCounted ç±»æ¨¡æ¿ï¼Œåœ¨ WTF/Source/wtf/RefCounted.h é‡Œã€‚ç±»æ¨¡æ¿çš„å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106class RefCountedBase {public: void ref() const {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT_WITH_SECURITY_IMPLICATION(!m_deletionHasBegun); ASSERT(!m_adoptionIsRequired);#endif ++m_refCount; } bool hasOneRef() const {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT(!m_deletionHasBegun);#endif return m_refCount == 1; } unsigned refCount() const { return m_refCount; } void relaxAdoptionRequirement() {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT_WITH_SECURITY_IMPLICATION(!m_deletionHasBegun); ASSERT(m_adoptionIsRequired); m_adoptionIsRequired = false;#endif }protected: RefCountedBase() : m_refCount(1)#if CHECK_REF_COUNTED_LIFECYCLE , m_deletionHasBegun(false) , m_adoptionIsRequired(true)#endif { } ~RefCountedBase() {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT(m_deletionHasBegun); ASSERT(!m_adoptionIsRequired);#endif } // Returns whether the pointer should be freed or not. bool derefBase() const {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT_WITH_SECURITY_IMPLICATION(!m_deletionHasBegun); ASSERT(!m_adoptionIsRequired);#endif ASSERT(m_refCount); unsigned tempRefCount = m_refCount - 1; if (!tempRefCount) {#if CHECK_REF_COUNTED_LIFECYCLE m_deletionHasBegun = true;#endif return true; } m_refCount = tempRefCount; return false; }#if CHECK_REF_COUNTED_LIFECYCLE bool deletionHasBegun() const { return m_deletionHasBegun; }#endifprivate:#if CHECK_REF_COUNTED_LIFECYCLE friend void adopted(RefCountedBase*);#endif mutable unsigned m_refCount;#if CHECK_REF_COUNTED_LIFECYCLE mutable bool m_deletionHasBegun; mutable bool m_adoptionIsRequired;#endif};template&lt;typename T&gt; class RefCounted : public RefCountedBase { WTF_MAKE_NONCOPYABLE(RefCounted); WTF_MAKE_FAST_ALLOCATED;public: void deref() const { if (derefBase()) delete static_cast&lt;const T*&gt;(this); }protected: RefCounted() { } ~RefCounted() { }}; ä¸Šé¢å¯ä»¥çœ‹åˆ° RefCounted ç±»å®šä¹‰æœ‰ RefCountedBase ç±»å’Œ RefCounted ç±»ï¼ŒRefCounted ç±»ä¼šè¢«å¤§é‡ç»§æ‰¿ï¼Œä»»ä½•ç±»å¦‚æœæƒ³è¢« RefPtr å¼•ç”¨åªéœ€è¦ç»§æ‰¿ RefCountedå³å¯ã€‚åœ¨ RefPtr.h é‡Œå¯ä»¥çœ‹åˆ° refIfNotNull å’Œ derefIfNotNull å®šä¹‰äº†è®¡æ•°çš„å¢åŠ å’Œå‡å°‘ã€‚ Assert æ–­è¨€çš„å®ç°å’Œåº”ç”¨æ–­è¨€åœ¨ WTF é‡Œæ˜¯è¿™æ ·å®šä¹‰çš„ 1234567891011121314151617181920212223242526272829303132333435 c++#define ASSERT(assertion) do { \\ if (!(assertion)) { \\ //æ‰“å°ç”¨ WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #assertion); \\ //é‡ç‚¹ CRASH(); \\ } \\} while (0)#ifndef CRASH#if defined(NDEBUG) &amp;&amp; OS(DARWIN)// Crash with a SIGTRAP i.e EXC_BREAKPOINT.// We are not using __builtin_trap because it is only guaranteed to abort, but not necessarily// trigger a SIGTRAP. Instead, we use inline asm to ensure that we trigger the SIGTRAP.#define CRASH() do { \\ //ç›´æ¥ inline æ±‡ç¼–ä»£ç  WTFBreakpointTrap(); \\ __builtin_unreachable(); \\} while (0)#else#define CRASH() WTFCrash()#endif#endif // !defined(CRASH)//æ ¹æ®ä¸åŒ CPU å®šä¹‰ä¸åŒçš„ WTFBreakpointTrap() æ±‡ç¼–å®#if CPU(X86_64) || CPU(X86)#define WTFBreakpointTrap() __asm__ volatile (&quot;int3&quot;)#elif CPU(ARM_THUMB2)#define WTFBreakpointTrap() __asm__ volatile (&quot;bkpt #0&quot;)#elif CPU(ARM64)#define WTFBreakpointTrap() __asm__ volatile (&quot;brk #0&quot;)#else#define WTFBreakpointTrap() WTFCrash() // Not implemented.#endif å†…å­˜ç®¡ç†WTF æä¾›çš„å†…å­˜ç®¡ç†å’Œ STL ç±»ä¼¼ï¼Œä¸ºå®¹å™¨å’Œåº”ç”¨æä¾›å†…å­˜åˆ†é…æ¥å£ã€‚å…ˆçœ‹ WTF_MAKE_FAST_ALLOCATED è¿™ä¸ªå® 1234567891011121314151617181920212223242526272829303132 c++#define WTF_MAKE_FAST_ALLOCATED \\public: \\ void* operator new(size_t, void* p) { return p; } \\ void* operator new[](size_t, void* p) { return p; } \\ \\ void* operator new(size_t size) \\ { \\ return ::WTF::fastMalloc(size); \\ } \\ \\ void operator delete(void* p) \\ { \\ ::WTF::fastFree(p); \\ } \\ \\ void* operator new[](size_t size) \\ { \\ return ::WTF::fastMalloc(size); \\ } \\ \\ void operator delete[](void* p) \\ { \\ ::WTF::fastFree(p); \\ } \\ void* operator new(size_t, NotNullTag, void* location) \\ { \\ ASSERT(location); \\ return location; \\ } \\private: \\typedef int __thisIsHereToForceASemicolonAfterThisMacro è¿™ä¸ªå®å®šä¹‰äº† operator new å’Œ operator deleteã€‚operator new æ˜¯ç›´æ¥è°ƒç”¨ fastMalloc å®Œæˆå†…å­˜åˆ†é…ï¼Œä¸‹é¢çœ‹çœ‹ fastMalloc çš„å®ç°ï¼š 12345void* fastMalloc(size_t size){ ASSERT_IS_WITHIN_LIMIT(size); return bmalloc::api::malloc(size);} å¯ä»¥çœ‹åˆ° WTF ä½¿ç”¨äº† bmalloc æ¥ mallocï¼Œè¿™ä¸ª bmalloc è¢«è‹¹æœå·ç§°åœ¨æ€§èƒ½ä¸Šè¦è¿œè¶…äº TCMalloc å’Œ STL é‡Œåœ¨ malloc ä¹‹ä¸Šå®ç°ä¸€ä¸ªå†…å­˜æ± çš„çš„æ€è·¯ä¹Ÿå®Œå…¨ä¸ä¸€æ ·ã€‚å…³äº TCMalloc çš„å®ç°å’ŒåŸç†å¯ä»¥å‚çœ‹ï¼šhttps://goog-perftools.sourceforge.net/doc/tcmalloc.html ã€‚å…³äº STL å†…å­˜ç®¡ç†çš„å®ç°å¯ä»¥åœ¨ ã€ŠSTL æºç åˆ†æã€‹ç¬¬äºŒç« é‡Œæœ‰è¯¦ç»†è¯´æ˜ã€‚ å®¹å™¨ç±»WTF é‡Œå¾ˆå¤šçš„å®¹å™¨ï¼Œæ¯”å¦‚ BlockStackï¼ŒDequeï¼ŒVector å’Œ HashTableã€‚ Vector åŠ¨æ€æ•°ç»„WTF é‡Œçš„ Vector å’Œ STL é‡Œçš„ Vector ä¸€æ ·ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç›¸å½“äºåŠ¨æ€æ•°ç»„ï¼Œå½“ä¸çŸ¥é“éœ€è¦çš„æ•°ç»„è§„æ¨¡å¤šå¤§æ—¶å¯ä»¥è¾¾åˆ°æœ€å¤§èŠ‚çº¦ç©ºé—´çš„ç›®çš„ï¼Œé‚£ä¹ˆçœ‹çœ‹ WTF æ˜¯å¦‚ä½•å®ç° Vector çš„å§ï¼Œå…³é”®åœ°æ–¹æˆ‘åœ¨ä»£ç é‡Œåšäº†æ³¨é‡Šè¯´æ˜ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246 c++template&lt;typename T, size_t inlineCapacity = 0, typename OverflowHandler = CrashOnOverflow, size_t minCapacity = 16, typename Malloc = FastMalloc&gt;class Vector : private VectorBuffer&lt;T, inlineCapacity, Malloc&gt; { WTF_MAKE_FAST_ALLOCATED;private: //VectorBuffer æ˜¯å†…éƒ¨å­˜å‚¨æ•°æ®çš„å®¹å™¨ typedef VectorBuffer&lt;T, inlineCapacity, Malloc&gt; Base; //Vector é‡Œå…ƒç´ çš„åˆå§‹åŒ–ï¼Œå¤åˆ¶å’Œç§»åŠ¨è¿™äº›æ“ä½œéƒ½åœ¨ VectorTypeOperations é‡Œ typedef VectorTypeOperations&lt;T&gt; TypeOperations;public: typedef T ValueType; //iterator ç›´æ¥ä½¿ç”¨çš„åŸç”ŸæŒ‡é’ˆ typedef T* iterator; typedef const T* const_iterator; typedef std::reverse_iterator&lt;iterator&gt; reverse_iterator; typedef std::reverse_iterator&lt;const_iterator&gt; const_reverse_iterator; Vector() { } // Unlike in std::vector, this constructor does not initialize POD types. explicit Vector(size_t size) : Base(size, size) { asanSetInitialBufferSizeTo(size); if (begin()) TypeOperations::initialize(begin(), end()); } Vector(size_t size, const T&amp; val) : Base(size, size) { asanSetInitialBufferSizeTo(size); if (begin()) TypeOperations::uninitializedFill(begin(), end(), val); } Vector(std::initializer_list&lt;T&gt; initializerList) { reserveInitialCapacity(initializerList.size()); asanSetInitialBufferSizeTo(initializerList.size()); for (const auto&amp; element : initializerList) uncheckedAppend(element); } ~Vector() { if (m_size) TypeOperations::destruct(begin(), end()); asanSetBufferSizeToFullCapacity(0); } Vector(const Vector&amp;); template&lt;size_t otherCapacity, typename otherOverflowBehaviour, size_t otherMinimumCapacity, typename OtherMalloc&gt; explicit Vector(const Vector&lt;T, otherCapacity, otherOverflowBehaviour, otherMinimumCapacity, OtherMalloc&gt;&amp;); Vector&amp; operator=(const Vector&amp;); template&lt;size_t otherCapacity, typename otherOverflowBehaviour, size_t otherMinimumCapacity, typename OtherMalloc&gt; Vector&amp; operator=(const Vector&lt;T, otherCapacity, otherOverflowBehaviour, otherMinimumCapacity, OtherMalloc&gt;&amp;); Vector(Vector&amp;&amp;); Vector&amp; operator=(Vector&amp;&amp;); //è¿”å› Vector é‡Œå…ƒç´ ä¸ªæ•° size_t size() const { return m_size; } static ptrdiff_t sizeMemoryOffset() { return OBJECT_OFFSETOF(Vector, m_size); } //è¿”å›çš„æ˜¯ Vector ä¸­çš„å®¹é‡ï¼Œå®¹é‡éšç€å…ƒç´ å¢åŠ å’Œåˆ é™¤è€Œå˜åŒ– size_t capacity() const { return Base::capacity(); } bool isEmpty() const { return !size(); } //è¿™é‡Œæä¾›çš„æ˜¯æ•°ç»„çš„è®¿é—®åŠŸèƒ½ T&amp; at(size_t i) { if (UNLIKELY(i &gt;= size())) OverflowHandler::overflowed(); return Base::buffer()[i]; } const T&amp; at(size_t i) const { if (UNLIKELY(i &gt;= size())) OverflowHandler::overflowed(); return Base::buffer()[i]; } T&amp; at(Checked&lt;size_t&gt; i) { RELEASE_ASSERT(i &lt; size()); return Base::buffer()[i]; } const T&amp; at(Checked&lt;size_t&gt; i) const { RELEASE_ASSERT(i &lt; size()); return Base::buffer()[i]; } //è¿”å›æ•°ç»„ä¸­ç¬¬å‡ ä¸ªå…ƒç´  T&amp; operator[](size_t i) { return at(i); } const T&amp; operator[](size_t i) const { return at(i); } T&amp; operator[](Checked&lt;size_t&gt; i) { return at(i); } const T&amp; operator[](Checked&lt;size_t&gt; i) const { return at(i); } T* data() { return Base::buffer(); } const T* data() const { return Base::buffer(); } static ptrdiff_t dataMemoryOffset() { return Base::bufferMemoryOffset(); } //è¿­ä»£åŠŸèƒ½çš„å®ç°ï¼Œè·å– begin å’Œ endï¼ŒVector å…ƒç´ æœ‰äº†æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½éœ€è¦é‡æ–° begin å’Œ endã€‚ iterator begin() { return data(); } iterator end() { return begin() + m_size; } const_iterator begin() const { return data(); } const_iterator end() const { return begin() + m_size; } reverse_iterator rbegin() { return reverse_iterator(end()); } reverse_iterator rend() { return reverse_iterator(begin()); } const_reverse_iterator rbegin() const { return const_reverse_iterator(end()); } const_reverse_iterator rend() const { return const_reverse_iterator(begin()); } T&amp; first() { return at(0); } const T&amp; first() const { return at(0); } T&amp; last() { return at(size() - 1); } const T&amp; last() const { return at(size() - 1); } T takeLast() { T result = WTFMove(last()); removeLast(); return result; } //O(n) éå†æŸ¥æ‰¾çš„æ“ä½œï¼Œæ‰€ä»¥æ•°æ®é‡å¤§æ—¶æŸ¥æ‰¾ç”¨ hashtable æ•ˆæœä¼šæ›´å¥½ template&lt;typename U&gt; bool contains(const U&amp;) const; template&lt;typename U&gt; size_t find(const U&amp;) const; template&lt;typename MatchFunction&gt; size_t findMatching(const MatchFunction&amp;) const; template&lt;typename U&gt; size_t reverseFind(const U&amp;) const; template&lt;typename U&gt; bool appendIfNotContains(const U&amp;); //å®ç° STL é‡Œçš„æ–¹æ³•ï¼Œè¿™é‡Œçš„ insertï¼Œappend å’Œ resize ç­‰æ“ä½œçš„æ—¶å€™ä¼šé€šè¿‡ reserveCapacity æˆ– tryReserveCapacity æ¥è¿›è¡Œç©ºé—´æ‰©å±•è¾¾åˆ°åŠ¨æ€æ•°ç»„çš„èƒ½åŠ› void shrink(size_t size); void grow(size_t size); void resize(size_t size); void resizeToFit(size_t size); void reserveCapacity(size_t newCapacity); bool tryReserveCapacity(size_t newCapacity); void reserveInitialCapacity(size_t initialCapacity); void shrinkCapacity(size_t newCapacity); void shrinkToFit() { shrinkCapacity(size()); } void clear() { shrinkCapacity(0); } void append(ValueType&amp;&amp; value) { append&lt;ValueType&gt;(std::forward&lt;ValueType&gt;(value)); } template&lt;typename U&gt; void append(U&amp;&amp;); template&lt;typename... Args&gt; void constructAndAppend(Args&amp;&amp;...); template&lt;typename... Args&gt; bool tryConstructAndAppend(Args&amp;&amp;...); void uncheckedAppend(ValueType&amp;&amp; value) { uncheckedAppend&lt;ValueType&gt;(std::forward&lt;ValueType&gt;(value)); } template&lt;typename U&gt; void uncheckedAppend(U&amp;&amp;); template&lt;typename U&gt; void append(const U*, size_t); template&lt;typename U, size_t otherCapacity&gt; void appendVector(const Vector&lt;U, otherCapacity&gt;&amp;); template&lt;typename U&gt; bool tryAppend(const U*, size_t); template&lt;typename U&gt; void insert(size_t position, const U*, size_t); template&lt;typename U&gt; void insert(size_t position, U&amp;&amp;); template&lt;typename U, size_t c&gt; void insertVector(size_t position, const Vector&lt;U, c&gt;&amp;); void remove(size_t position); void remove(size_t position, size_t length); template&lt;typename U&gt; bool removeFirst(const U&amp;); template&lt;typename MatchFunction&gt; bool removeFirstMatching(const MatchFunction&amp;, size_t startIndex = 0); template&lt;typename U&gt; unsigned removeAll(const U&amp;); template&lt;typename MatchFunction&gt; unsigned removeAllMatching(const MatchFunction&amp;, size_t startIndex = 0); void removeLast() { if (UNLIKELY(isEmpty())) OverflowHandler::overflowed(); shrink(size() - 1); } void fill(const T&amp;, size_t); void fill(const T&amp; val) { fill(val, size()); } template&lt;typename Iterator&gt; void appendRange(Iterator start, Iterator end); MallocPtr&lt;T&gt; releaseBuffer(); void swap(Vector&lt;T, inlineCapacity, OverflowHandler, minCapacity&gt;&amp; other) {#if ASAN_ENABLED if (this == std::addressof(other)) // ASan will crash if we try to restrict access to the same buffer twice. return;#endif // Make it possible to copy inline buffers. asanSetBufferSizeToFullCapacity(); other.asanSetBufferSizeToFullCapacity(); Base::swap(other, m_size, other.m_size); std::swap(m_size, other.m_size); asanSetInitialBufferSizeTo(m_size); other.asanSetInitialBufferSizeTo(other.m_size); } void reverse(); void checkConsistency(); template&lt;typename MapFunction, typename R = typename std::result_of&lt;MapFunction(const T&amp;)&gt;::type&gt; Vector&lt;R&gt; map(MapFunction) const;private: void expandCapacity(size_t newMinCapacity); T* expandCapacity(size_t newMinCapacity, T*); bool tryExpandCapacity(size_t newMinCapacity); const T* tryExpandCapacity(size_t newMinCapacity, const T*); template&lt;typename U&gt; U* expandCapacity(size_t newMinCapacity, U*); template&lt;typename U&gt; void appendSlowCase(U&amp;&amp;); template&lt;typename... Args&gt; void constructAndAppendSlowCase(Args&amp;&amp;...); template&lt;typename... Args&gt; bool tryConstructAndAppendSlowCase(Args&amp;&amp;...); void asanSetInitialBufferSizeTo(size_t); void asanSetBufferSizeToFullCapacity(size_t); void asanSetBufferSizeToFullCapacity() { asanSetBufferSizeToFullCapacity(size()); } void asanBufferSizeWillChangeTo(size_t); using Base::m_size; using Base::buffer; using Base::capacity; using Base::swap; using Base::allocateBuffer; using Base::deallocateBuffer; using Base::tryAllocateBuffer; using Base::shouldReallocateBuffer; using Base::reallocateBuffer; using Base::restoreInlineBufferIfNeeded; using Base::releaseBuffer;#if ASAN_ENABLED using Base::endOfBuffer;#endif}; HashTable å“ˆå¸Œè¡¨HashTable å®ç°ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206 c++ template&lt;typename Key, typename Value, typename Extractor, typename HashFunctions, typename Traits, typename KeyTraits&gt; class HashTable { public: typedef HashTableIterator&lt;Key, Value, Extractor, HashFunctions, Traits, KeyTraits&gt; iterator; typedef HashTableConstIterator&lt;Key, Value, Extractor, HashFunctions, Traits, KeyTraits&gt; const_iterator; typedef Traits ValueTraits; typedef Key KeyType; typedef Value ValueType; typedef IdentityHashTranslator&lt;ValueTraits, HashFunctions&gt; IdentityTranslatorType; typedef HashTableAddResult&lt;iterator&gt; AddResult;#if DUMP_HASHTABLE_STATS_PER_TABLE struct Stats { Stats() : numAccesses(0) , numRehashes(0) , numRemoves(0) , numReinserts(0) , maxCollisions(0) , numCollisions(0) , collisionGraph() { } unsigned numAccesses; unsigned numRehashes; unsigned numRemoves; unsigned numReinserts; unsigned maxCollisions; unsigned numCollisions; unsigned collisionGraph[4096]; void recordCollisionAtCount(unsigned count) { if (count &gt; maxCollisions) maxCollisions = count; numCollisions++; collisionGraph[count]++; } void dumpStats() { dataLogF(&quot;\\nWTF::HashTable::Stats dump\\n\\n&quot;); dataLogF(&quot;%d accesses\\n&quot;, numAccesses); dataLogF(&quot;%d total collisions, average %.2f probes per access\\n&quot;, numCollisions, 1.0 * (numAccesses + numCollisions) / numAccesses); dataLogF(&quot;longest collision chain: %d\\n&quot;, maxCollisions); for (unsigned i = 1; i &lt;= maxCollisions; i++) { dataLogF(&quot; %d lookups with exactly %d collisions (%.2f%% , %.2f%% with this many or more)\\n&quot;, collisionGraph[i], i, 100.0 * (collisionGraph[i] - collisionGraph[i+1]) / numAccesses, 100.0 * collisionGraph[i] / numAccesses); } dataLogF(&quot;%d rehashes\\n&quot;, numRehashes); dataLogF(&quot;%d reinserts\\n&quot;, numReinserts); } };#endif HashTable(); ~HashTable() { invalidateIterators(); if (m_table) deallocateTable(m_table, m_tableSize);#if CHECK_HASHTABLE_USE_AFTER_DESTRUCTION m_table = (ValueType*)(uintptr_t)0xbbadbeef;#endif } HashTable(const HashTable&amp;); void swap(HashTable&amp;); HashTable&amp; operator=(const HashTable&amp;); HashTable(HashTable&amp;&amp;); HashTable&amp; operator=(HashTable&amp;&amp;); // When the hash table is empty, just return the same iterator for end as for begin. // This is more efficient because we don&apos;t have to skip all the empty and deleted // buckets, and iterating an empty table is a common case that&apos;s worth optimizing. iterator begin() { return isEmpty() ? end() : makeIterator(m_table); } iterator end() { return makeKnownGoodIterator(m_table + m_tableSize); } const_iterator begin() const { return isEmpty() ? end() : makeConstIterator(m_table); } const_iterator end() const { return makeKnownGoodConstIterator(m_table + m_tableSize); } unsigned size() const { return m_keyCount; } unsigned capacity() const { return m_tableSize; } bool isEmpty() const { return !m_keyCount; } AddResult add(const ValueType&amp; value) { return add&lt;IdentityTranslatorType&gt;(Extractor::extract(value), value); } AddResult add(ValueType&amp;&amp; value) { return add&lt;IdentityTranslatorType&gt;(Extractor::extract(value), WTFMove(value)); } // A special version of add() that finds the object by hashing and comparing // with some other type, to avoid the cost of type conversion if the object is already // in the table. template&lt;typename HashTranslator, typename T, typename Extra&gt; AddResult add(T&amp;&amp; key, Extra&amp;&amp;); template&lt;typename HashTranslator, typename T, typename Extra&gt; AddResult addPassingHashCode(T&amp;&amp; key, Extra&amp;&amp;); iterator find(const KeyType&amp; key) { return find&lt;IdentityTranslatorType&gt;(key); } const_iterator find(const KeyType&amp; key) const { return find&lt;IdentityTranslatorType&gt;(key); } bool contains(const KeyType&amp; key) const { return contains&lt;IdentityTranslatorType&gt;(key); } template&lt;typename HashTranslator, typename T&gt; iterator find(const T&amp;); template&lt;typename HashTranslator, typename T&gt; const_iterator find(const T&amp;) const; template&lt;typename HashTranslator, typename T&gt; bool contains(const T&amp;) const; void remove(const KeyType&amp;); void remove(iterator); void removeWithoutEntryConsistencyCheck(iterator); void removeWithoutEntryConsistencyCheck(const_iterator); template&lt;typename Functor&gt; void removeIf(const Functor&amp;); void clear(); static bool isEmptyBucket(const ValueType&amp; value) { return isHashTraitsEmptyValue&lt;KeyTraits&gt;(Extractor::extract(value)); } static bool isDeletedBucket(const ValueType&amp; value) { return KeyTraits::isDeletedValue(Extractor::extract(value)); } static bool isEmptyOrDeletedBucket(const ValueType&amp; value) { return isEmptyBucket(value) || isDeletedBucket(value); } ValueType* lookup(const Key&amp; key) { return lookup&lt;IdentityTranslatorType&gt;(key); } template&lt;typename HashTranslator, typename T&gt; ValueType* lookup(const T&amp;); template&lt;typename HashTranslator, typename T&gt; ValueType* inlineLookup(const T&amp;);#if !ASSERT_DISABLED void checkTableConsistency() const;#else static void checkTableConsistency() { }#endif#if CHECK_HASHTABLE_CONSISTENCY void internalCheckTableConsistency() const { checkTableConsistency(); } void internalCheckTableConsistencyExceptSize() const { checkTableConsistencyExceptSize(); }#else static void internalCheckTableConsistencyExceptSize() { } static void internalCheckTableConsistency() { }#endif private: static ValueType* allocateTable(unsigned size); static void deallocateTable(ValueType* table, unsigned size); typedef std::pair&lt;ValueType*, bool&gt; LookupType; typedef std::pair&lt;LookupType, unsigned&gt; FullLookupType; LookupType lookupForWriting(const Key&amp; key) { return lookupForWriting&lt;IdentityTranslatorType&gt;(key); }; template&lt;typename HashTranslator, typename T&gt; FullLookupType fullLookupForWriting(const T&amp;); template&lt;typename HashTranslator, typename T&gt; LookupType lookupForWriting(const T&amp;); template&lt;typename HashTranslator, typename T, typename Extra&gt; void addUniqueForInitialization(T&amp;&amp; key, Extra&amp;&amp;); template&lt;typename HashTranslator, typename T&gt; void checkKey(const T&amp;); void removeAndInvalidateWithoutEntryConsistencyCheck(ValueType*); void removeAndInvalidate(ValueType*); void remove(ValueType*); bool shouldExpand() const { return (m_keyCount + m_deletedCount) * m_maxLoad &gt;= m_tableSize; } bool mustRehashInPlace() const { return m_keyCount * m_minLoad &lt; m_tableSize * 2; } bool shouldShrink() const { return m_keyCount * m_minLoad &lt; m_tableSize &amp;&amp; m_tableSize &gt; KeyTraits::minimumTableSize; } ValueType* expand(ValueType* entry = nullptr); void shrink() { rehash(m_tableSize / 2, nullptr); } ValueType* rehash(unsigned newTableSize, ValueType* entry); ValueType* reinsert(ValueType&amp;&amp;); static void initializeBucket(ValueType&amp; bucket); static void deleteBucket(ValueType&amp; bucket) { hashTraitsDeleteBucket&lt;Traits&gt;(bucket); } FullLookupType makeLookupResult(ValueType* position, bool found, unsigned hash) { return FullLookupType(LookupType(position, found), hash); } iterator makeIterator(ValueType* pos) { return iterator(this, pos, m_table + m_tableSize); } const_iterator makeConstIterator(ValueType* pos) const { return const_iterator(this, pos, m_table + m_tableSize); } iterator makeKnownGoodIterator(ValueType* pos) { return iterator(this, pos, m_table + m_tableSize, HashItemKnownGood); } const_iterator makeKnownGoodConstIterator(ValueType* pos) const { return const_iterator(this, pos, m_table + m_tableSize, HashItemKnownGood); }#if !ASSERT_DISABLED void checkTableConsistencyExceptSize() const;#else static void checkTableConsistencyExceptSize() { }#endif#if CHECK_HASHTABLE_ITERATORS void invalidateIterators();#else static void invalidateIterators() { }#endif static const unsigned m_maxLoad = 2; static const unsigned m_minLoad = 6; ValueType* m_table; unsigned m_tableSize; unsigned m_tableSizeMask; unsigned m_keyCount; unsigned m_deletedCount;#if CHECK_HASHTABLE_ITERATORS public: // All access to m_iterators should be guarded with m_mutex. mutable const_iterator* m_iterators; // Use std::unique_ptr so HashTable can still be memmove&apos;d or memcpy&apos;ed. mutable std::unique_ptr&lt;Lock&gt; m_mutex;#endif#if DUMP_HASHTABLE_STATS_PER_TABLE public: mutable std::unique_ptr&lt;Stats&gt; m_stats;#endif }; å®Œæ•´å…·ä½“çš„å®ç°å¯ä»¥æŸ¥çœ‹ WTF/Source/wtf/HashTable.hã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ HashTable æ˜¯çº¿æ€§å­˜å‚¨ç©ºé—´çš„èµ·å§‹åœ°å€æ˜¯ bengin å’Œ end æ¥è¡¨ç¤ºçš„ï¼Œcapacity å­˜å‚¨ç©ºé—´ä¸è¶³æ—¶ä¼šä½¿ç”¨ doubleHash çš„æ–¹æ³•æ¥æ‰©å®¹ï¼Œå°†åŸç©ºé—´å¤§å°å˜æˆä¸¤å€ã€‚è°ƒç”¨ begin æˆ– end æ—¶ä¼šåˆ›å»º HashTable çš„ const_iteratorï¼Œå®ƒç»´æŒäº†ä¸€ä¸ªæŒ‡å‘ value_type çš„æŒ‡é’ˆï¼Œæ‰€ä»¥ iterator çš„è‡ªå¢å’Œè‡ªå‡å°±æ˜¯æŒ‡é’ˆçš„è‡ªå¢è‡ªå‡ï¼Œè¿™ç‚¹æ¯” STL çš„ HashMap é‡‡ç”¨æ•°ç»„åŠ é“¾è¡¨å®ç°è¦ç®€å•ã€‚ çº¿ç¨‹WebKit å¯¹çº¿ç¨‹çš„å¤„ç†å°±æ˜¯åœ¨ä¸€ä¸ª loop å¾ªç¯é‡Œå¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåœ¨ WTF/Source/wtf/MessageQueue.h é‡Œæœ‰å¯¹æ¶ˆæ¯é˜Ÿåˆ—çš„å®šä¹‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243 c++// The queue takes ownership of messages and transfer it to the new owner// when messages are fetched from the queue.// Essentially, MessageQueue acts as a queue of std::unique_ptr&lt;DataType&gt;.template&lt;typename DataType&gt;class MessageQueue { WTF_MAKE_NONCOPYABLE(MessageQueue);public: MessageQueue() : m_killed(false) { } ~MessageQueue(); void append(std::unique_ptr&lt;DataType&gt;); void appendAndKill(std::unique_ptr&lt;DataType&gt;); bool appendAndCheckEmpty(std::unique_ptr&lt;DataType&gt;); void prepend(std::unique_ptr&lt;DataType&gt;); std::unique_ptr&lt;DataType&gt; waitForMessage(); std::unique_ptr&lt;DataType&gt; tryGetMessage(); Deque&lt;std::unique_ptr&lt;DataType&gt;&gt; takeAllMessages(); std::unique_ptr&lt;DataType&gt; tryGetMessageIgnoringKilled(); template&lt;typename Predicate&gt; std::unique_ptr&lt;DataType&gt; waitForMessageFilteredWithTimeout(MessageQueueWaitResult&amp;, Predicate&amp;&amp;, WallTime absoluteTime); template&lt;typename Predicate&gt; void removeIf(Predicate&amp;&amp;); void kill(); bool killed() const; // The result of isEmpty() is only valid if no other thread is manipulating the queue at the same time. bool isEmpty();private: //m_mutex æ˜¯è®¿é—® Deque çš„äº’æ–¥é”ï¼Œæ˜¯å¯¹ pthread_mutex_t ç±»å‹çš„ä¸€ä¸ªå°è£… mutable Lock m_mutex; //Condition æ˜¯å¯¹ pthread_cond_t ç±»å‹çš„å°è£…ï¼Œm_condition æä¾›äº†æŒ‚èµ·çº¿ç¨‹ Condition m_condition; //å†…éƒ¨ä¸»è¦å­˜å‚¨ç»“æ„ Deque&lt;std::unique_ptr&lt;DataType&gt;&gt; m_queue; bool m_killed;}; å¯ä»¥çœ‹å‡º MessageQueue æ˜¯é€šè¿‡ pthread_mutex_t æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„ã€‚WebKit åœ¨è¿è¡Œæ—¶ä¼šæœ‰å¾ˆå¤šçº¿ç¨‹ï¼Œæœ‰ç½‘ç»œèµ„æºåŠ è½½çš„çº¿ç¨‹ï¼Œè§£æé¡µé¢å¸ƒå±€çš„çº¿ç¨‹ï¼Œç»˜åˆ¶çº¿ç¨‹ï¼ŒI/O çº¿ç¨‹ï¼Œè§£ç çº¿ç¨‹ç­‰çº¿ç¨‹ã€‚æœ€æ ¸å¿ƒçš„æ˜¯è§£æé¡µé¢å¸ƒå±€çº¿ç¨‹ï¼Œå…¶å®ƒçº¿ç¨‹éƒ½ç”±å®ƒè§¦å‘ï¼Œæ‰€ä»¥å¯ä»¥ç§°ä¸ºä¸»çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹åœ¨ Mac ç«¯æ˜¯ MainThread å®šä¹‰å’Œå®ç°çš„ï¼Œåœ¨ iOS ç«¯æ˜¯ WebCoreThread å®šä¹‰å®ç°çš„ã€‚è¿™äº›å®šä¹‰æ¯”å¦‚ callOnMainThread å°±æ˜¯å…¶å®ƒå¼‚æ­¥çº¿ç¨‹åšå›è°ƒæ—¶è°ƒç”¨çš„å‡½æ•°ã€‚ Loaderä¸»è¦ä½œç”¨å°±æ˜¯åŠ è½½èµ„æºï¼Œæœ‰ MainResourceLoader å’Œ SubResourceLoaderã€‚åŠ è½½çš„èµ„æºæœ‰æ¥è‡ªç½‘ç»œï¼Œæœ¬åœ°æˆ–è€…ç¼“å­˜çš„ã€‚Loader æ¨¡å—æœ¬èº«æ˜¯å¹³å°æ— å…³çš„ï¼Œåªæ˜¯å°†éœ€è¦è·å¾—èµ„æºçš„è¯·æ±‚ä¼ ç»™å¹³å°ç›¸å…³çš„ç½‘ç»œæ¨¡å—ï¼Œæ¥å—ç½‘ç»œæ¨¡å—è¿”å›èµ„æºã€‚å¹³å°ç›¸å…³çš„ç½‘ç»œæ¨¡å—åœ¨ WebCore/platform/network é‡Œã€‚å¦‚æœæ˜¯ iOS å°±åœ¨ WebCore/platform/network/iOS é‡Œï¼Œå¦‚æœ Mac å°±åœ¨ WebCore/platform/network/mac é‡Œã€‚ Loader çš„èµ„æºç½‘é¡µæœ¬èº«å°±æ˜¯ä¸€ç§èµ„æºï¼ŒåŒæ—¶ç½‘é¡µè¿˜éœ€è¦å…¶å®ƒçš„ä¸€äº›èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ï¼Œè§†é¢‘ï¼Œjs ä»£ç ç­‰ã€‚ä¸‹é¢æ˜¯ä¸»è¦èµ„æºçš„ç±»å‹ï¼š HTMLï¼šé¡µé¢ä¸»æ–‡ä»¶ JavaScriptï¼šå•ç‹¬çš„æ–‡ä»¶åè€…ç›´æ¥åœ¨ HTML ä»£ç é‡Œ CSSï¼šåŒ JavaScript ä¸€æ ·å¯ä»¥æ˜¯å•ç‹¬æ–‡ä»¶ä¹Ÿå¯ä»¥ç›´æ¥å†™åœ¨ HTML ä»£ç é‡Œ å›¾ç‰‡ï¼šå„ç§ç¼–ç å›¾ç‰‡æ¯”å¦‚ jpg å’Œ png SVGï¼šçŸ¢é‡å›¾ç‰‡ CSS Shaderï¼šä¸º CSS å¸¦æ¥ 3D å›¾å½¢ç‰¹æ€§ éŸ³é¢‘è§†é¢‘ï¼šå¤šåª’ä½“èµ„æºä»¥åŠè§†é¢‘å­—å¹• å­—ä½“ï¼šè‡ªå®šä¹‰çš„å­—ä½“ XSLï¼šå¯¹ XSLT è¯­è¨€ç¼–å†™çš„æ–‡ä»¶æ”¯æŒ WebKit é‡Œä¼šæœ‰ä¸åŒçš„ç±»æ¥è¡¨ç¤ºè¿™äº›èµ„æºï¼Œå®ƒä»¬éƒ½ä¼šæœ‰ä¸ªå…±åŒçš„åŸºç±» CachedResourceã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­ HTML çš„èµ„æºç±»å‹æ˜¯ CachedRawResource ç±»ï¼Œç±»å‹å« MainResource ç±»ã€‚ FrameLoaderåŠ è½½çš„å…¥å£ï¼Œæœ€ç»ˆä¼šè°ƒåˆ°å¼‚æ­¥ load è¿‡ç¨‹ã€‚ä¸»è¦æ˜¯æä¾›ä¸€ä¸ªä¸‹è½½ä¸€ä¸ª Frame çš„ä¸€äº›æ¥å£ã€‚ä»»ä½•ä¸€ä¸ªé¡µé¢éƒ½éœ€è¦è‡³å°‘ä¸€ä¸ª mainframeï¼Œå› æ­¤ load ä¸€èˆ¬éƒ½æ˜¯ä» load ä¸€ä¸ª mainframe å¼€å§‹ã€‚ MainResourceLoaderï¼šåŠ è½½èµ„æºï¼Œhtml ä¹Ÿæ˜¯èµ„æºï¼Œè¿˜æœ‰ cssï¼Œjavascript å’Œ image ç­‰è¿™äº›æ˜¯ SubresourceLoader æ¥ç®¡ç†çš„ã€‚ CacheResourceLoaderï¼šç¼“å­˜èµ„æºè¯»å–ã€‚ èµ„æºåŠ è½½å’Œç¼“å­˜æ˜¯ç”± ResourceLoader å’Œ Cache è¿™ä¸¤ä¸ªç‹¬ç«‹æ€§é«˜çš„æ¨¡å—æ¥å®ç°ã€‚ DocumentWriterï¼šè¾…åŠ©ç±»ï¼Œå°†è·å–çš„æ•°æ®å†™åˆ° writer é‡Œï¼Œä¼šåˆ›å»º DOM æ ‘çš„æ ¹èŠ‚ç‚¹ HTMLDocument å¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œ DocumentParser è§£ææ“ä½œï¼ŒåŒæ—¶è¯¥ç±»è¿˜åŒ…å«äº†æ–‡æ¡£å­—ç¬¦è§£ç ç±»å’Œ HTMLDocumentParser ç±»ã€‚ åŠ è½½è¿‡ç¨‹ è§£æå‰ä¼šåˆ›å»ºä¸åŒçš„ Dcoumentï¼ŒDocumentLoader çš„ commitData ç¬¬ä¸€æ¬¡æ”¶åˆ°æ•°æ®æ—¶ä¼šè°ƒ DcumentWriter çš„ beginï¼Œè¿™ä¸ª begin ä¼šè°ƒç”¨ DocumentWriter::createDocument åˆ›å»ºä¸€ä¸ª Document å¯¹è±¡ã€‚ è¿™é‡Œåˆ›å»ºçš„å¯¹è±¡ä¼šæ ¹æ® URL æ¥åˆ›å»ºä¸åŒçš„ Documentï¼Œè¿™é‡Œæœ‰ HTMLDocument ï¼Œè¯¦ç»†å®ç°å¯ä»¥çœ‹çœ‹ DOMImplementation::createDocument çš„å®ç°ã€‚ æ•´ä¸ªèµ„æºåŠ è½½è¿‡ç¨‹ï¼Œè¿™ç¯‡æ–‡ç« æœ‰è¯¦ç»†çš„ä»‹ç»ï¼šhttps://hacks.mozilla.org/2017/09/building-the-dom-faster-speculative-parsing-async-defer-and-preload/ ç±»å…³ç³» Frame å’Œ FrameLoaderClientï¼šåœ¨ Frame çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨ FrameLoader çš„æ„é€ å‡½æ•°éœ€è¦ä¼ å…¥ Frame æŒ‡é’ˆå’Œ FrameLoaderClient æŒ‡é’ˆã€‚ä¸€èˆ¬ä½œä¸ºä¸åŒå¹³å°é€‚é…ä»£ç ï¼Œæ§åˆ¶ WebKit çš„ä½¿ç”¨é€»è¾‘ã€‚FrameLoader ä¼šæŠŠåŠ è½½è¿‡ç¨‹çš„çŠ¶æ€ï¼Œè¿˜æœ‰ç»“æœç­‰ä¿¡æ¯ä¼ é€’ç»™ FrameLoaderClientï¼Œè¿™æ ·çš„è¯ FrameLoaderClient å°±èƒ½å¤ŸæŒæ§ FrameLoader çš„åŠ¨ä½œã€‚ SubFrameLoaderï¼šç»´æŠ¤å­ Frameã€‚ DocumentWriterï¼šæœ‰ä¸€ä¸ª m_writer å¯¹è±¡åœ¨ Frame çš„æ•°æ® load å®Œæˆæ—¶è¿›è¡Œä¸‹ä¸€æ­¥æ¯”å¦‚è§£ç å¤„ç†ã€‚ DocumentLoaderï¼šFrameLoader ä¼šç»´æŠ¤ä¸‰ä¸ª DocumentLoaderã€‚m_policyDocumentLoader æ˜¯ policy check çš„é˜¶æ®µã€‚m_provisionalDocumentLoader ä¼šè´Ÿè´£ startLoadingMainResource çš„è°ƒç”¨ã€‚m_documentLoader æ˜¯æ•°æ®åˆ°äº†åä½¿ç”¨çš„ï¼Œå‰ä¸€ä¸ª Frame çš„ DocumentLoader ä¸èƒ½å†ç”¨ã€‚ HistoryControllerï¼šç®¡ç†å†å²è®°å½•ï¼Œä¿å­˜å’Œæ¢å¤ Document å’Œ Page çš„çŠ¶æ€åˆ° HistoryItemï¼Œç»´æŠ¤æµè§ˆé¡µé¢çš„å‰è¿›åé€€é˜Ÿåˆ—ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å‰è¿›å’Œåé€€ç­‰æ“ä½œã€‚FrameLoader é€šè¿‡ HistoryController æ¥æ“ä½œ m_backForwardController å¯¹è±¡ã€‚ ResourceLoadNotifierï¼šå½“ ResourceLoader æœ‰å˜åŒ–æ—¶æ¥é€šçŸ¥ FrameLoaderï¼Œç”¨äºå®ƒä»¬ä¹‹é—´çš„é€šä¿¡ã€‚ SubframeLoaderï¼šç”¨æ¥æ§åˆ¶ MainFrame é‡Œçš„ iframe çš„åŠ è½½ã€‚ FrameLoaderStateMachineï¼šæè¿° FrameLoader å¤„ç† DocumentLoader çš„èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œçœ‹æ˜¯åœ¨åˆ›å»ºçŠ¶æ€è¿˜æ˜¯æ˜¾ç¤ºçŠ¶æ€ã€‚ PolicyCheckerï¼šå¯¹ FrameLoader åšæ ¡éªŒï¼Œæœ‰ä¸‰ç§ï¼Œç¬¬ä¸€ç§ NewWindow Policyï¼ŒæŒ‡å¯¹æ–°å¼€ tab æˆ– window æ—¶æ ¡éªŒã€‚ç¬¬äºŒç§ NavigationPolicy æ˜¯å¯¹é¡µé¢è¯·æ±‚çš„æ ¡éªŒã€‚ç¬¬ä¸‰ç§ ContentPolicy æ˜¯å¯¹è¯·æ±‚æ”¶åˆ°çš„æ•°æ®åˆ¤æ–­ Mime type ç­‰çš„æ ¡éªŒã€‚PolicyChecker ä¼šæä¾›å¯¹åº”å‡ å£ï¼Œç”± FrameLoaderClient æ¥å¯¹è¿™äº›è¯·æ±‚æ ¡éªŒç¡®å®šæ˜¯å¦ç»§ç»­åŠ è½½æˆ–è€…åšå…¶å®ƒæ“ä½œã€‚ FrameLoader çš„ä¸»è¦æ¥å£Frame::initFrameLoader è‡ªèº«çš„åˆå§‹åŒ–ã€‚åˆå§‹åŒ–çš„è°ƒç”¨é¡ºåº 1234WebFrame::WebFrame(webPage* parent,WebFrameData *frameData)WebFramePrivate::init(WebFrame* webframe,WebFrameData* frameData)Frame::init()FrameLoader::init() FrameLoader::commitProvisionalLoadæäº¤ provisional é˜¶æ®µæ—¶ä¸‹è½½çš„æ•°æ®å®Œæˆ Document loading çš„è°ƒç”¨é¡ºåº 123DocumentLoader::finishLoadingDocumentLoader::commitIfReadyFrameLoader::commitProvisionalLoad èµ„æºæ•°æ®æ¥å—æäº¤è°ƒç”¨é¡ºåº 123456ResourceLoader::didReceiveDataMainResourceLoader::addDataDocumentLoader::receiveDataDocumentLoader::commitLoadDocumentLoader::commitIfReadyDocumentLoader::commitProvisionalLoad Frame::finishedLoadingç½‘ç»œåŠ è½½å®Œæˆçš„æ¥å£ï¼Œä½œç”¨æ˜¯é€šçŸ¥ DocumentLoader å’Œ DocumentWriter å·²ç»å®Œæˆï¼Œå¯ä»¥è¿›è¡Œåé¢çš„æäº¤æ•°æ®å’Œè§£æå·¥ä½œã€‚å‡½æ•°çš„è°ƒç”¨é¡ºåº 1234ResourceLoader::didFinishLoadingMainResourceLoader::didFinishLoadingFrameLoader::finishedLoadingFrameLoader::init() FrameLoader::finishedParsingå®Œæˆè§£ææ—¶è°ƒç”¨çš„æ¥å£è°ƒç”¨é¡ºåº 1234DocumentWritter::endDocument::finishParsingDocument::finishedParsingFrameLoader::finishedParsing FrameLoader::load(FrameLoadRequest&amp;&amp; request)åŠ è½½è¯·æ±‚ï¼Œå°† Frame ç›¸å…³çš„æ•°æ®å°è£…æˆ ResourceRequest ä½œä¸ºå‚æ•°å¸¦å…¥ï¼Œè¿™ä¸ªæ¥å£ä¼šåˆ›å»ºå‡º DocumentLoaderã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210 c++//åˆ›å»º DocumentLoadervoid FrameLoader::load(FrameLoadRequest&amp;&amp; request){ if (m_inStopAllLoaders) return; if (!request.frameName().isEmpty()) { Frame* frame = findFrameForNavigation(request.frameName()); if (frame) { request.setShouldCheckNewWindowPolicy(false); if (&amp;frame-&gt;loader() != this) { frame-&gt;loader().load(WTFMove(request)); return; } } } if (request.shouldCheckNewWindowPolicy()) { NavigationAction action { request.requester(), request.resourceRequest(), InitiatedByMainFrame::Unknown, NavigationType::Other, request.shouldOpenExternalURLsPolicy() }; policyChecker().checkNewWindowPolicy(WTFMove(action), request.resourceRequest(), nullptr, request.frameName(), [this] (const ResourceRequest&amp; request, FormState* formState, const String&amp; frameName, const NavigationAction&amp; action, bool shouldContinue) { continueLoadAfterNewWindowPolicy(request, formState, frameName, action, shouldContinue, AllowNavigationToInvalidURL::Yes, NewFrameOpenerPolicy::Suppress); }); return; } if (!request.hasSubstituteData()) request.setSubstituteData(defaultSubstituteDataForURL(request.resourceRequest().url())); //FrameLoader ä½¿ç”¨ç©º SubStituteData æ¥åˆ›å»º DocumentLoader å®Œæˆ MainResource çš„åŠ è½½ã€‚ Ref&lt;DocumentLoader&gt; loader = m_client.createDocumentLoader(request.resourceRequest(), request.substituteData()); applyShouldOpenExternalURLsPolicyToNewDocumentLoader(m_frame, loader, request); load(loader.ptr());}//å®Œå–„ request ä¿¡æ¯void FrameLoader::load(DocumentLoader* newDocumentLoader){ ResourceRequest&amp; r = newDocumentLoader-&gt;request(); //ResourceRequest åŒ…å«äº† HTTP Header çš„å†…å®¹ï¼ŒaddExtraFieldsToMainResourceRequest è¿™ä¸ªæ–¹æ³•ä¼šæ·»åŠ ä¸€äº›ç±»ä¼¼ Cookie ç­–ç•¥ï¼ŒUser Agentï¼ŒCache-Controlï¼ŒContent-type ç­‰ä¿¡æ¯ã€‚ addExtraFieldsToMainResourceRequest(r); FrameLoadType type; if (shouldTreatURLAsSameAsCurrent(newDocumentLoader-&gt;originalRequest().url())) { r.setCachePolicy(ReloadIgnoringCacheData); type = FrameLoadType::Same; } else if (shouldTreatURLAsSameAsCurrent(newDocumentLoader-&gt;unreachableURL()) &amp;&amp; m_loadType == FrameLoadType::Reload) type = FrameLoadType::Reload; else if (m_loadType == FrameLoadType::RedirectWithLockedBackForwardList &amp;&amp; !newDocumentLoader-&gt;unreachableURL().isEmpty() &amp;&amp; newDocumentLoader-&gt;substituteData().isValid()) type = FrameLoadType::RedirectWithLockedBackForwardList; else type = FrameLoadType::Standard; if (m_documentLoader) newDocumentLoader-&gt;setOverrideEncoding(m_documentLoader-&gt;overrideEncoding()); if (shouldReloadToHandleUnreachableURL(newDocumentLoader)) { history().saveDocumentAndScrollState(); ASSERT(type == FrameLoadType::Standard); type = FrameLoadType::Reload; } loadWithDocumentLoader(newDocumentLoader, type, 0, AllowNavigationToInvalidURL::Yes);}//æ ¡éªŒæ£€æŸ¥void FrameLoader::loadWithDocumentLoader(DocumentLoader* loader, FrameLoadType type, FormState* formState, AllowNavigationToInvalidURL allowNavigationToInvalidURL){ // Retain because dispatchBeforeLoadEvent may release the last reference to it. Ref&lt;Frame&gt; protect(m_frame); ASSERT(m_client.hasWebView()); ASSERT(m_frame.view()); if (!isNavigationAllowed()) return; if (m_frame.document()) m_previousURL = m_frame.document()-&gt;url(); const URL&amp; newURL = loader-&gt;request().url(); // Log main frame navigation types. if (m_frame.isMainFrame()) { if (auto* page = m_frame.page()) page-&gt;mainFrameLoadStarted(newURL, type);static_cast&lt;MainFrame&amp;&gt;(m_frame).performanceLogging().didReachPointOfInterest(PerformanceLogging::MainFrameLoadStarted); } policyChecker().setLoadType(type); bool isFormSubmission = formState; const String&amp; httpMethod = loader-&gt;request().httpMethod(); if (shouldPerformFragmentNavigation(isFormSubmission, httpMethod, policyChecker().loadType(), newURL)) { RefPtr&lt;DocumentLoader&gt; oldDocumentLoader = m_documentLoader; NavigationAction action { *m_frame.document(), loader-&gt;request(), InitiatedByMainFrame::Unknown, policyChecker().loadType(), isFormSubmission }; oldDocumentLoader-&gt;setTriggeringAction(action); oldDocumentLoader-&gt;setLastCheckedRequest(ResourceRequest()); policyChecker().stopCheck(); policyChecker().checkNavigationPolicy(loader-&gt;request(), false /* didReceiveRedirectResponse */, oldDocumentLoader.get(), formState, [this] (const ResourceRequest&amp; request, FormState*, bool shouldContinue) { continueFragmentScrollAfterNavigationPolicy(request, shouldContinue); }); return; } if (Frame* parent = m_frame.tree().parent()) loader-&gt;setOverrideEncoding(parent-&gt;loader().documentLoader()-&gt;overrideEncoding()); policyChecker().stopCheck(); //æŠŠ DocumentLoader èµ‹ç»™ m_policyDocumentLoader setPolicyDocumentLoader(loader); //å°†è¯·æ±‚ä¿¡æ¯è®°åœ¨ loader.m_triggeringAction ä¸­ if (loader-&gt;triggeringAction().isEmpty()) loader-&gt;setTriggeringAction({ *m_frame.document(), loader-&gt;request(), InitiatedByMainFrame::Unknown, policyChecker().loadType(), isFormSubmission }); if (Element* ownerElement = m_frame.ownerElement()) { if (!m_stateMachine.committedFirstRealDocumentLoad() &amp;&amp; !ownerElement-&gt;dispatchBeforeLoadEvent(loader-&gt;request().url().string())) { continueLoadAfterNavigationPolicy(loader-&gt;request(), formState, false, allowNavigationToInvalidURL); return; } } //ä½¿ç”¨ loader.m_triggeringAction åšæ ¡éªŒï¼Œå¤„ç†ç©ºç™½ç­‰ï¼Œç”¨æ¥å†³å®šæ€ä¹ˆå¤„ç†è¯·æ±‚ policyChecker().checkNavigationPolicy(loader-&gt;request(), false /* didReceiveRedirectResponse */, loader, formState, [this, allowNavigationToInvalidURL] (const ResourceRequest&amp; request, FormState* formState, bool shouldContinue) { //shouldContinue çš„ä¸åŒæµç¨‹ä¼šä¸åŒï¼ŒformState æ˜¯ç”¨æ¥åˆ¤æ–­ HTMLFormElement è¡¨å• FormSubmissionTrigger æšä¸¾çŠ¶æ€çš„ï¼Œè¿™æ ·ä¹Ÿä¼šæœ‰ä¸åŒçš„æµç¨‹ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹ continueLoadAfterNavigationPolicy ä¼šæ€ä¹ˆå»å¤„ç†è¿™äº›å‚æ•°ä¸åŒçš„å€¼å§ã€‚ continueLoadAfterNavigationPolicy(request, formState, shouldContinue, allowNavigationToInvalidURL); });}//void FrameLoader::continueLoadAfterNavigationPolicy(const ResourceRequest&amp; request, FormState* formState, bool shouldContinue, AllowNavigationToInvalidURL allowNavigationToInvalidURL){ // If we loaded an alternate page to replace an unreachableURL, we&apos;ll get in here with a // nil policyDataSource because loading the alternate page will have passed // through this method already, nested; otherwise, policyDataSource should still be set. ASSERT(m_policyDocumentLoader || !m_provisionalDocumentLoader-&gt;unreachableURL().isEmpty()); bool isTargetItem = history().provisionalItem() ? history().provisionalItem()-&gt;isTargetItem() : false; bool urlIsDisallowed = allowNavigationToInvalidURL == AllowNavigationToInvalidURL::No &amp;&amp; !request.url().isValid(); // Three reasons we can&apos;t continue: // 1) Navigation policy delegate said we can&apos;t so request is nil. A primary case of this // is the user responding Cancel to the form repost nag sheet. // 2) User responded Cancel to an alert popped up by the before unload event handler. // 3) The request&apos;s URL is invalid and navigation to invalid URLs is disallowed. bool canContinue = shouldContinue &amp;&amp; shouldClose() &amp;&amp; !urlIsDisallowed; if (!canContinue) { // If we were waiting for a quick redirect, but the policy delegate decided to ignore it, then we // need to report that the client redirect was cancelled. // FIXME: The client should be told about ignored non-quick redirects, too. if (m_quickRedirectComing) clientRedirectCancelledOrFinished(false); setPolicyDocumentLoader(nullptr); // If the navigation request came from the back/forward menu, and we punt on it, we have the // problem that we have optimistically moved the b/f cursor already, so move it back. For sanity, // we only do this when punting a navigation for the target frame or top-level frame. if ((isTargetItem || m_frame.isMainFrame()) &amp;&amp; isBackForwardLoadType(policyChecker().loadType())) { if (Page* page = m_frame.page()) { if (HistoryItem* resetItem = m_frame.mainFrame().loader().history().currentItem()) { page-&gt;backForward().setCurrentItem(resetItem); m_frame.loader().client().updateGlobalHistoryItemForPage(); } } } return; } FrameLoadType type = policyChecker().loadType(); // A new navigation is in progress, so don&apos;t clear the history&apos;s provisional item. stopAllLoaders(ShouldNotClearProvisionalItem); // &lt;rdar://problem/6250856&gt; - In certain circumstances on pages with multiple frames, stopAllLoaders() // might detach the current FrameLoader, in which case we should bail on this newly defunct load. if (!m_frame.page()) return; //æŠŠ DocumentLoader èµ‹å€¼ç»™ m_provisionalDocumentLoader setProvisionalDocumentLoader(m_policyDocumentLoader.get()); m_loadType = type; //è®¾ç½® FrameLoader çŠ¶æ€ä¸º Provisional setState(FrameStateProvisional); setPolicyDocumentLoader(nullptr); if (isBackForwardLoadType(type)) { auto&amp; diagnosticLoggingClient = m_frame.page()-&gt;diagnosticLoggingClient(); if (history().provisionalItem()-&gt;isInPageCache()) { diagnosticLoggingClient.logDiagnosticMessageWithResult(DiagnosticLoggingKeys::pageCacheKey(), DiagnosticLoggingKeys::retrievalKey(), DiagnosticLoggingResultPass, ShouldSample::Yes); loadProvisionalItemFromCachedPage(); return; } diagnosticLoggingClient.logDiagnosticMessageWithResult(DiagnosticLoggingKeys::pageCacheKey(), DiagnosticLoggingKeys::retrievalKey(), DiagnosticLoggingResultFail, ShouldSample::Yes); } if (!formState) { continueLoadAfterWillSubmitForm(); return; } m_client.dispatchWillSubmitForm(*formState, [this] (PolicyAction action) { policyChecker().continueLoadAfterWillSubmitForm(action); });} æ¥ç€åœ¨ continueLoadAfterWillSubmitForm() æ–¹æ³•é‡Œ m_provisionalDocumentLoader ä¼šåšäº›å‡†å¤‡å·¥ä½œå¹¶å°†çŠ¶æ€è®¾ç½®æˆæ­£åœ¨åŠ è½½èµ„æºçš„çŠ¶æ€ã€‚åœ¨ prepareForLoadStart ä¸­æŠ›å‡ºåŠ è½½çŠ¶æ€ï¼Œå›è°ƒç»™ FrameLoaderClientï¼Œè°ƒç”¨ DocumentLoader çš„ startLoadingMainResourceã€‚ WebKit ç½‘ç»œå¤„ç†WebKit èµ„æºçš„åŠ è½½éƒ½æ˜¯ç”±å…¶ç§»æ¤æ–¹å®ç°çš„ï¼Œç½‘ç»œéƒ¨åˆ†ä»£ç éƒ½åœ¨ WebCore/platform/network é‡Œï¼Œé‡Œé¢åŒ…å«äº† HTTP Headerï¼ŒMIMEï¼ŒçŠ¶æ€ç ç­‰ä¿¡æ¯çš„å¤„ç†ã€‚ ResourceHandle çš„ç›¸å…³ç±» ResouceHandleClientï¼šè·Ÿç½‘ç»œä¼ è¾“è¿‡ç¨‹ç›¸å…³ï¼Œæ˜¯ç½‘ç»œäº‹ä»¶å¯¹åº”çš„å›è°ƒã€‚ MainResourceLoaderï¼šä¸»èµ„æºï¼ŒæŒ‡çš„ HTML é¡µé¢ï¼Œä¼šç«‹åˆ»å‘èµ·ï¼Œä¸‹è½½å¤±è´¥ä¼šå‘ç”¨æˆ·æŠ¥é”™ã€‚æ²¡æœ‰ç¼“å­˜ SubResourceLoaderï¼šæ´¾ç”Ÿèµ„æºï¼ŒHTML é¡µé¢é‡Œå†…åµŒçš„å›¾ç‰‡å’Œè„šæœ¬é“¾æ¥ç­‰ï¼Œä¼šé€šè¿‡ ResourceScheduler è¿™ä¸ªç±»æ¥ç®¡ç†èµ„æºåŠ è½½è°ƒåº¦ã€‚ä¸‹è½½å¤±è´¥ä¸å‘ç”¨æˆ·æŠ¥é”™ã€‚æœ‰ç¼“å­˜æœºåˆ¶ï¼Œé€šè¿‡ ResourceCach ä¿å­˜ CSS JS ç­‰èµ„æºåŸå§‹æ•°æ®ä»¥åŠè§£ç åçš„å›¾ç‰‡æ•°æ®ï¼Œä¸€æ–¹é¢å¯ä»¥èŠ‚çœæµé‡ä¸€æ–¹é¢å¯ä»¥èŠ‚çœè§£ç æ—¶é—´ã€‚ ResourceLoaderï¼šæ˜¯ä¸»èµ„æºå’Œæ´¾ç”Ÿèµ„æºåŠ è½½å™¨çš„åŸºç±»ï¼Œä¼šé€šè¿‡ ResourceNotifier å°†å›è°ƒä¼ ç»™ FrameLoaderClientã€‚ ResourceHandleClientResourceHandleClient å®šä¹‰äº†ä¸€äº›å¯¹åº”ç½‘ç»œåŠ è½½äº‹ä»¶å›è°ƒå¤„ç†çš„è™šå‡½æ•°ã€‚ä¸‹é¢å°±æ˜¯ ResourceHandleClient çš„å®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566class ResourceHandleClient {public: WEBCORE_EXPORT ResourceHandleClient(); WEBCORE_EXPORT virtual ~ResourceHandleClient(); WEBCORE_EXPORT virtual ResourceRequest willSendRequest(ResourceHandle*, ResourceRequest&amp;&amp;, ResourceResponse&amp;&amp;); virtual void didSendData(ResourceHandle*, unsigned long long /*bytesSent*/, unsigned long long /*totalBytesToBeSent*/) { } //æ”¶åˆ°æœåŠ¡å™¨ç«¯ç¬¬ä¸€ä¸ªå“åº”åŒ…ï¼Œé€šè¿‡é‡Œé¢çš„ HTTP Header å¯ä»¥åˆ¤æ–­æ˜¯å¦æˆåŠŸ virtual void didReceiveResponse(ResourceHandle*, ResourceResponse&amp;&amp;) { } //æ”¶åˆ°æœåŠ¡å™¨ç«¯åŒ…å«è¯·æ±‚æ•°æ®çš„å“åº”åŒ… virtual void didReceiveData(ResourceHandle*, const char*, unsigned, int /*encodedDataLength*/) { } WEBCORE_EXPORT virtual void didReceiveBuffer(ResourceHandle*, Ref&lt;SharedBuffer&gt;&amp;&amp;, int encodedDataLength); //æ¥å—è¿‡ç¨‹ç»“æŸ virtual void didFinishLoading(ResourceHandle*) { } //æ¥å—å¤±è´¥ virtual void didFail(ResourceHandle*, const ResourceError&amp;) { } virtual void wasBlocked(ResourceHandle*) { } virtual void cannotShowURL(ResourceHandle*) { } virtual bool usesAsyncCallbacks() { return false; } virtual bool loadingSynchronousXHR() { return false; } // Client will pass an updated request using ResourceHandle::continueWillSendRequest() when ready. WEBCORE_EXPORT virtual void willSendRequestAsync(ResourceHandle*, ResourceRequest&amp;&amp;, ResourceResponse&amp;&amp;); // Client will call ResourceHandle::continueDidReceiveResponse() when ready. WEBCORE_EXPORT virtual void didReceiveResponseAsync(ResourceHandle*, ResourceResponse&amp;&amp;);#if USE(PROTECTION_SPACE_AUTH_CALLBACK) // Client will pass an updated request using ResourceHandle::continueCanAuthenticateAgainstProtectionSpace() when ready. WEBCORE_EXPORT virtual void canAuthenticateAgainstProtectionSpaceAsync(ResourceHandle*, const ProtectionSpace&amp;);#endif // Client will pass an updated request using ResourceHandle::continueWillCacheResponse() when ready.#if USE(CFURLCONNECTION) WEBCORE_EXPORT virtual void willCacheResponseAsync(ResourceHandle*, CFCachedURLResponseRef);#elif PLATFORM(COCOA) WEBCORE_EXPORT virtual void willCacheResponseAsync(ResourceHandle*, NSCachedURLResponse *);#endif#if USE(SOUP) virtual char* getOrCreateReadBuffer(size_t /*requestedLength*/, size_t&amp; /*actualLength*/) { return 0; }#endif virtual bool shouldUseCredentialStorage(ResourceHandle*) { return false; } virtual void didReceiveAuthenticationChallenge(ResourceHandle*, const AuthenticationChallenge&amp;) { }#if USE(PROTECTION_SPACE_AUTH_CALLBACK) virtual bool canAuthenticateAgainstProtectionSpace(ResourceHandle*, const ProtectionSpace&amp;) { return false; }#endif virtual void receivedCancellation(ResourceHandle*, const AuthenticationChallenge&amp;) { }#if PLATFORM(IOS) || USE(CFURLCONNECTION) virtual RetainPtr&lt;CFDictionaryRef&gt; connectionProperties(ResourceHandle*) { return nullptr; }#endif#if USE(CFURLCONNECTION) virtual CFCachedURLResponseRef willCacheResponse(ResourceHandle*, CFCachedURLResponseRef response) { return response; }#if PLATFORM(WIN) virtual bool shouldCacheResponse(ResourceHandle*, CFCachedURLResponseRef) { return true; }#endif // PLATFORM(WIN)#elif PLATFORM(COCOA) virtual NSCachedURLResponse *willCacheResponse(ResourceHandle*, NSCachedURLResponse *response) { return response; }#endif}; ä¸ ResourceHandleClient ç›¸å…³çš„ç±»å¦‚ä¸‹ åŠ è½½æµç¨‹ MainResourceLoader çš„åŠ è½½é¡ºåºMainResourceLoader åŠ è½½çš„æ˜¯ html æ–‡æœ¬èµ„æºã€‚ 12345678910111213141516171819202122232425262728293031 c++MainResourceLoader::loadMainResourceLoader::loadNowMainResourceLoader::willSendRequestResourceLoader::willSendRequest //åŸºç±» ResourceLoader ä¼šå°†å›è°ƒé€šè¿‡ ResourceNotifier ä¼ ç»™ FrameLoaderClient è¿™æ ·å¯ä»¥æ“ä½œ ResourceRequest æ¥åšäº›è®¾ç½® request header çš„æ“ä½œã€‚PolicyChecker::checkNavigationPolicy //æ£€æŸ¥ NavigationPolicy å¯ä»¥è¿‡æ»¤ä¸€äº›é‡å¤çš„è¯·æ±‚ResourceHandle::create å¼€å§‹å‘ç½‘ç»œè¯·æ±‚MainResourceLoader::didReceiveResponse //ä¸»èµ„æºæ”¶åˆ°ç¬¬ä¸€ä¸ª HTTP çš„å“åº”å›è°ƒï¼Œå¤„ç† HTTP headerPolicyChecker:: checkContentPolicy //è¿›è¡Œ ContentPolicy çš„æ£€æŸ¥ï¼Œé€šè¿‡ dispatchDecidePolicyForMIMEType æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ä¸‹è½½çš„è¯·æ±‚MainResourceLoader::continueAfterContentPolicy //çœ‹çœ‹ ContentPolicy æ£€æŸ¥åæ˜¯å¦æœ‰é”™è¯¯ResourceLoader::didReceiveResponse //åŸºç±» ResourceLoader ä¼šå°†å›è°ƒé€šè¿‡ ResourceNotifier ä¼ ç»™ FrameLoaderClientMainResourceLoader::didReceiveData //ä¸»èµ„æºå¼€å§‹æ¥å— body æ•°æ®ResourceLoader::didReceiveData //åŸºç±» ResourceLoader ä¼šå°†å›è°ƒé€šè¿‡ ResourceNotifier ä¼ ç»™ FrameLoaderClientMainResourceLoader::addDataDocumentLoader::receivedDataDocumentLoader::commitLoadFrameLoader::commitProvisionalLoad //ä» provisional çŠ¶æ€åˆ° Committed çŠ¶æ€FrameLoaderClientQt::committedLoadDocumentLoader::commitDataDocumentWriter::setEncodingDocumentWriter::addDataDocumentParser::appendByteDecodedDataDocumentParser::appendBytes //ç¼–ç å¤„ç†HTMLDocumentParser::append //è§£æ HTMLMainResourceLoader::didFinishLoadingFrameLoader::finishedLoadingDocumentLoader::finishedLoadingFrameLoader::finishedLoadingDocumentDocumentWriter::endDocument::finishParsingHTMLDocumentParser::finish åœ¨æ”¶åˆ°ç¬¬ä¸€ä¸ªå“åº”åŒ…åä¼šå›è°ƒç»™ MainResourceLoader çš„ didReceiveResponse å‡½æ•°å¤„ç† Header ä½¿ç”¨ PolicyChecker çš„ checkContentPolicy åšæ ¡éªŒï¼Œå½“ PolicyAction ä¸º PolicyUse å›è°ƒç»™ MainResourceLoader çš„ continueAfterContentPolicyã€‚ç»“æœ ResourceResponse ä¼šé€šè¿‡ ResourceNotifier é€šçŸ¥ç»™å¤–éƒ¨æ¥å—å›è°ƒçš„ä¸åŒå¹³å°çš„ FrameLoaderClientã€‚ åœ¨æ”¶åˆ°åé¢çš„å¸¦æ•°æ®çš„å“åº”åŒ…ä¼šå›è°ƒç»™ MainResourceLoader çš„ didReceiveDataï¼Œé€šè¿‡ ResourceLoader çš„ addDataOrBuffer æŠŠæ”¶åˆ°çš„æ•°æ®å­˜åˆ° m_resourceData é‡Œã€‚ä¸‹é¢æ˜¯ addDataOrBuffer æ–¹æ³•çš„å®ç°ä»£ç ï¼š 12345678910111213141516171819 c++void ResourceLoader::addDataOrBuffer(const char* data, unsigned length, SharedBuffer* buffer, DataPayloadType dataPayloadType){ if (m_options.dataBufferingPolicy == DoNotBufferData) return; if (!m_resourceData || dataPayloadType == DataPayloadWholeResource) { if (buffer) m_resourceData = buffer; else m_resourceData = SharedBuffer::create(data, length); return; } if (buffer) m_resourceData-&gt;append(*buffer); else m_resourceData-&gt;append(data, length);} æ¥æ”¶åˆ°çš„ receiveData ä¼šè¿›å…¥åˆ° DocumentLoader çš„ commitLoad é‡Œ 12345678910111213141516171819202122 c++void DocumentLoader::commitLoad(const char* data, int length){ // Both unloading the old page and parsing the new page may execute JavaScript which destroys the datasource // by starting a new load, so retain temporarily. RefPtr&lt;Frame&gt; protectedFrame(m_frame); Ref&lt;DocumentLoader&gt; protectedThis(*this); commitIfReady(); FrameLoader* frameLoader = DocumentLoader::frameLoader(); if (!frameLoader) return;#if ENABLE(WEB_ARCHIVE) || ENABLE(MHTML) if (ArchiveFactory::isArchiveMimeType(response().mimeType())) return;#endif //FrameLoader é€šè¿‡ transitionToCommitted ä» Provisional çš„çŠ¶æ€å˜ä¸º Committed çŠ¶æ€ frameLoader-&gt;client().committedLoad(this, data, length); if (isMultipartReplacingLoad()) frameLoader-&gt;client().didReplaceMultipartContent();} éšå DocumentLoader æ‰§è¡Œ commitData å°†å‰é¢çš„å†…å®¹è¿›è¡Œç¼–ç  encodingï¼Œè¿™äº›æ•°æ®ä¼šé€šè¿‡ DocumentParser æ¥è§£ç ï¼Œè§£ç åçš„æ•°æ® ä¼šåˆ›å»º HTMLDocument å’Œ Document å¯¹è±¡ï¼Œåé€šè¿‡ DocumentWriter ä¼ ç»™ DocumentParserã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šåœ¨ DocumentWriter çš„ begin æ–¹æ³•é‡Œå®Œæˆï¼Œå…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172 c++void DocumentWriter::begin(const URL&amp; urlReference, bool dispatch, Document* ownerDocument){ // We grab a local copy of the URL because it&apos;s easy for callers to supply // a URL that will be deallocated during the execution of this function. // For example, see &lt;https://bugs.webkit.org/show_bug.cgi?id=66360&gt;. URL url = urlReference; // Create a new document before clearing the frame, because it may need to // inherit an aliased security context. //åˆ›å»ºäº† Document å¯¹è±¡ Ref&lt;Document&gt; document = createDocument(url); // If the new document is for a Plugin but we&apos;re supposed to be sandboxed from Plugins, // then replace the document with one whose parser will ignore the incoming data (bug 39323) if (document-&gt;isPluginDocument() &amp;&amp; document-&gt;isSandboxed(SandboxPlugins)) document = SinkDocument::create(m_frame, url); // FIXME: Do we need to consult the content security policy here about blocked plug-ins? bool shouldReuseDefaultView = m_frame-&gt;loader().stateMachine().isDisplayingInitialEmptyDocument() &amp;&amp; m_frame-&gt;document()-&gt;isSecureTransitionTo(url); if (shouldReuseDefaultView) document-&gt;takeDOMWindowFrom(m_frame-&gt;document()); else document-&gt;createDOMWindow(); // Per &lt;https://www.w3.org/TR/upgrade-insecure-requests/&gt;, we need to retain an ongoing set of upgraded // requests in new navigation contexts. Although this information is present when we construct the // Document object, it is discard in the subsequent &apos;clear&apos; statements below. So, we must capture it // so we can restore it. HashSet&lt;RefPtr&lt;SecurityOrigin&gt;&gt; insecureNavigationRequestsToUpgrade; if (auto* existingDocument = m_frame-&gt;document()) insecureNavigationRequestsToUpgrade = existingDocument-&gt;contentSecurityPolicy()-&gt;takeNavigationRequestsToUpgrade(); m_frame-&gt;loader().clear(document.ptr(), !shouldReuseDefaultView, !shouldReuseDefaultView); clear(); // m_frame-&gt;loader().clear() might fire unload event which could remove the view of the document. // Bail out if document has no view. if (!document-&gt;view()) return; if (!shouldReuseDefaultView) m_frame-&gt;script().updatePlatformScriptObjects(); m_frame-&gt;loader().setOutgoingReferrer(url); m_frame-&gt;setDocument(document.copyRef()); document-&gt;contentSecurityPolicy()-&gt;setInsecureNavigationRequestsToUpgrade(WTFMove(insecureNavigationRequestsToUpgrade)); if (m_decoder) document-&gt;setDecoder(m_decoder.get()); if (ownerDocument) { document-&gt;setCookieURL(ownerDocument-&gt;cookieURL()); document-&gt;setSecurityOriginPolicy(ownerDocument-&gt;securityOriginPolicy()); document-&gt;setStrictMixedContentMode(ownerDocument-&gt;isStrictMixedContentMode()); } m_frame-&gt;loader().didBeginDocument(dispatch); document-&gt;implicitOpen(); // We grab a reference to the parser so that we&apos;ll always send data to the // original parser, even if the document acquires a new parser (e.g., via // document.open). m_parser = document-&gt;parser(); if (m_frame-&gt;view() &amp;&amp; m_frame-&gt;loader().client().hasHTMLView()) m_frame-&gt;view()-&gt;setContentsSize(IntSize()); m_state = StartedWritingState;} Document å¯¹è±¡æ—¶ DOM æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œm_writer åœ¨ addData æ—¶ä¼šç”¨ DocumentParser æ¥è§£ç ï¼Œè¿™ä¸ªè§£ç æ˜¯åœ¨ DecodedDataDocumentParser çš„ appendBytes é‡Œåšçš„ã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314 c++void DecodedDataDocumentParser::appendBytes(DocumentWriter&amp; writer, const char* data, size_t length){ if (!length) return; //è§£ç  Loader æ¨¡å—ä¼ æ¥çš„å­—èŠ‚æµï¼Œè§£ç åçš„ String ä¼šè¢« HTMLDocumentParser çš„ HTMLInputStream æ‰€æŒæœ‰ã€‚ String decoded = writer.createDecoderIfNeeded()-&gt;decode(data, length); if (decoded.isEmpty()) return; //è§£ç æˆåŠŸä¼šäº¤ç»™ Parser å¤„ç†ç”Ÿæˆ DOM Treeï¼Œå½¢æˆ Parser å’Œ MainResourceLoader åŒæ­¥ writer.reportDataReceived(); append(decoded.releaseImpl());} æ•°æ®æ¥æ”¶å®Œæ¯•ä¼šå›è°ƒ MainResourceLoader çš„ didFinishLoadingã€‚æ¥ä¸‹æ¥å†è°ƒç”¨ FrameLoader çš„ finishedLoading å’Œ finishedLoadingDocumentï¼Œè°ƒç”¨ DocumentWriter çš„ endã€‚æœ€åè°ƒç”¨ Document çš„ finishParsingï¼Œè¿™æ · MainResource çš„åŠ è½½å®Œæˆã€‚ ä¸‹é¢çœ‹çœ‹è§£ç çš„æµç¨‹ï¼šdecoder çš„ç±»å›¾å¦‚ä¸‹: SubResourceLoader çš„åŠ è½½é¡ºåºSubResourceLoader åŠ è½½çš„éƒ½æ˜¯æ´¾ç”Ÿèµ„æºï¼ŒåŠ è½½æ´¾ç”Ÿèµ„æºçš„æ—¶åºå›¾å¦‚ä¸‹ï¼š ä¼šåœ¨åˆ›å»º HTMLElement è®¾ç½® src å±æ€§æ—¶ä¼šåˆ¤æ–­ tagName æ˜¯å¦æ˜¯ imgï¼Œæ˜¯çš„è¯å°±ä¼šè§¦å‘ SubResourceLoaderã€‚è®¾ç½®å±æ€§å’Œåˆ¤æ–­çš„ä»£ç åœ¨ HTMLConstructionSite è¿™ä¸ªç±»é‡Œï¼Œå…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243 c++RefPtr&lt;Element&gt; HTMLConstructionSite::createHTMLElementOrFindCustomElementInterface(AtomicHTMLToken&amp; token, JSCustomElementInterface** customElementInterface){ auto&amp; localName = token.name(); // FIXME: This can&apos;t use HTMLConstructionSite::createElement because we // have to pass the current form element. We should rework form association // to occur after construction to allow better code sharing here. // https://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#create-an-element-for-the-token Document&amp; ownerDocument = ownerDocumentForCurrentNode(); bool insideTemplateElement = !ownerDocument.frame(); //å°† tagName å’ŒèŠ‚ç‚¹æ„é€ åˆ›å»ºæˆ HTMLImageElement RefPtr&lt;Element&gt; element = HTMLElementFactory::createKnownElement(localName, ownerDocument, insideTemplateElement ? nullptr : form(), true); if (UNLIKELY(!element)) { auto* window = ownerDocument.domWindow(); if (customElementInterface &amp;&amp; window) { auto* registry = window-&gt;customElementRegistry(); if (UNLIKELY(registry)) { if (auto* elementInterface = registry-&gt;findInterface(localName)) { *customElementInterface = elementInterface; return nullptr; } } } QualifiedName qualifiedName(nullAtom(), localName, xhtmlNamespaceURI); if (Document::validateCustomElementName(localName) == CustomElementNameValidationStatus::Valid) { element = HTMLElement::create(qualifiedName, ownerDocument); element-&gt;setIsCustomElementUpgradeCandidate(); } else element = HTMLUnknownElement::create(qualifiedName, ownerDocument); } ASSERT(element); // FIXME: This is a hack to connect images to pictures before the image has // been inserted into the document. It can be removed once asynchronous image // loading is working. if (is&lt;HTMLPictureElement&gt;(currentNode()) &amp;&amp; is&lt;HTMLImageElement&gt;(*element)) downcast&lt;HTMLImageElement&gt;(*element).setPictureElement(&amp;downcast&lt;HTMLPictureElement&gt;(currentNode())); //è®¾ç½®å±æ€§ï¼Œè¿™é‡Œä¼šåˆ¤æ–­æ˜¯å¦æ˜¯ srcï¼Œå¦‚æœ element çš„ tagName æ˜¯ img å°±ä¼šè§¦å‘æ´¾ç”Ÿèµ„æºä¸‹è½½ setAttributes(*element, token, m_parserContentPolicy); ASSERT(element-&gt;isHTMLElement()); return element;} åœ¨ HTMLImageElement è¿™ä¸ªç±»é‡Œä¼šç”¨ parseAttribute æ–¹æ³•å¤„ç†ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œåˆ¤æ–­åˆ°å±æ€§æ˜¯ srcAttr æ—¶ä¼šè§¦å‘ selectImageSource æ–¹æ³•ï¼Œæ–¹æ³•å®ç°å¦‚ä¸‹ï¼š 1234567891011121314 c++void HTMLImageElement::selectImageSource(){ // First look for the best fit source from our &lt;picture&gt; parent if we have one. ImageCandidate candidate = bestFitSourceFromPictureElement(); if (candidate.isEmpty()) { // If we don&apos;t have a &lt;picture&gt; or didn&apos;t find a source, then we use our own attributes. auto sourceSize = SizesAttributeParser(attributeWithoutSynchronization(sizesAttr).string(), document()).length(); candidate = bestFitSourceForImageAttributes(document().deviceScaleFactor(), attributeWithoutSynchronization(srcAttr), attributeWithoutSynchronization(srcsetAttr), sourceSize); } setBestFitURLAndDPRFromImageCandidate(candidate); //updateFromElementIgnoringPreviousError æ˜¯ ImageLoader ç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šè°ƒç”¨ updateFromElement æ–¹æ³•æ¥åˆ¤æ–­èµ„æºæ¥æº m_imageLoader.updateFromElementIgnoringPreviousError();} SubResourceLoader ä¸»è¦æ˜¯è½¬ç»™ SubResourceLoaderClient ç±»æ¥å®Œæˆï¼Œå¦‚ä¸‹å›¾ï¼š ResourceLoadScheduler ä¼šå¯¹ SubResourceLoader è¿›è¡Œè°ƒåº¦ç®¡ç† Documentï¼šä¼šåˆ›å»ºæ‹¥æœ‰ä¸€ä¸ª CachedResourceLoader ç±»çš„å¯¹è±¡å®ä¾‹ m_cachedResourceLoaderï¼Œè¿™ä¸ªç±»æœ‰è®¿é—®æ´¾ç”Ÿèµ„æºçš„æ¥å£ï¼Œæ¯”å¦‚ requestImageï¼ŒrequestCSSStyleSheetï¼ŒrequestUserCSSStyleSheetï¼ŒrequestScriptï¼ŒrequestFontï¼ŒrequestXSLStyleSheetï¼ŒrequestLinkPrefetch ç­‰ã€‚è¿™é‡Œ requestImage æœ‰æ¡ä»¶åˆ¤æ–­ï¼Œè¿™æ ·å¤–éƒ¨å®ç°æ¥å£å°±å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŠ è½½å›¾ç‰‡ï¼Œè¾¾åˆ°å¾ˆå¤šæµè§ˆå™¨é‡Œæä¾›é‚£ç§æ— å›¾æ¨¡å¼äº†ã€‚ CacheResourceLoaderï¼šä¼šåˆ›å»º CachedResourceRequest å¯¹è±¡å‘è¯·æ±‚ã€‚åœ¨å®ƒçš„æ„é€ å‡½æ•°é‡Œä¼šä¼ å…¥ä¸€ä¸ª CachedResource å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚è¿˜ä¼šé€šè¿‡ m_requests æ¥è®°å½•èµ„æºè¯·æ±‚æ•°é‡ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠåŠ è½½çŠ¶æ€å›è°ƒå‡ºå»äº†ã€‚ MemoryCacheï¼šä¼šç»´æŠ¤ä¸€ä¸ª HashMap ï¼Œé‡Œé¢çš„ value å­˜å‚¨ CachedResource ç±»ç¼“å­˜çš„å†…å®¹ã€‚HashMap å®šä¹‰ä¸º HashMap &lt;String,CachedResource&gt; m_resources; åœ¨ CachedResourceLoader é‡Œä¼šé€šè¿‡ resourceForUrl åœ¨ Memory Cache é‡Œæ‰¾å¯¹åº” url å¯¹åº”çš„ç¼“å­˜èµ„æºï¼ŒdetermineRevalidationPolicy ä¼šè¿”å›ä¸€ä¸ªæšä¸¾å€¼ç”¨æ¥ç¡®å®šç”¨å“ªç§æ–¹å¼åŠ è½½èµ„æºï¼š 12enum RevalidationPolicy { Use, Revalidate, Reload, Load }; RevalidationPolicy determineRevalidationPolicy(CachedResource::Type, CachedResourceRequest&amp;, CachedResource* existingResource, ForPreload, DeferOption) const; å¯ä»¥çœ‹åˆ° RevalidationPolicy æœ‰å››ç§ï¼ŒUseï¼ŒRevalidateï¼ŒReload å’Œ Loadã€‚Use è¡¨ç¤ºèµ„æºå·²ç»åœ¨ç¼“å­˜é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚Revalidate è¡¨ç¤ºç¼“å­˜èµ„æºå·²å¤±æ•ˆï¼Œéœ€åˆ é™¤æ—§èµ„æºï¼Œé‡æ–°åœ¨ç¼“å­˜é‡ŒåŠ æ–°èµ„æºã€‚Reload è¡¨ç¤ºå·²ç¼“å­˜ä½†ç”±äºèµ„æºç±»å‹ä¸åŒæˆ–è€… Cache-control:no-cache è®¾ç½®ä¸ç”¨ Cache çš„æƒ…å†µéœ€è¦é‡æ–°åŠ è½½ã€‚Load è¡¨ç¤ºç¼“å­˜é‡Œæ²¡æœ‰ï¼Œéœ€ç›´æ¥åŠ è½½ã€‚è¿™æ®µé€»è¾‘å¤„ç†åœ¨ CachedResourceLoader é‡Œçš„ requestResource é‡Œæœ‰å®ç°ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748 c++RevalidationPolicy policy = determineRevalidationPolicy(type, request, resource.get(), forPreload, defer);switch (policy) {case Reload: memoryCache.remove(*resource); FALLTHROUGH;case Load: if (resource) logMemoryCacheResourceRequest(frame(), DiagnosticLoggingKeys::memoryCacheEntryDecisionKey(), DiagnosticLoggingKeys::unusedKey()); resource = loadResource(type, WTFMove(request)); break;case Revalidate: if (resource) logMemoryCacheResourceRequest(frame(), DiagnosticLoggingKeys::memoryCacheEntryDecisionKey(), DiagnosticLoggingKeys::revalidatingKey()); resource = revalidateResource(WTFMove(request), *resource); break;case Use: ASSERT(resource); if (shouldUpdateCachedResourceWithCurrentRequest(*resource, request)) { resource = updateCachedResourceWithCurrentRequest(*resource, WTFMove(request)); if (resource-&gt;status() != CachedResource::Status::Cached) policy = Load; } else { ResourceError error; if (!shouldContinueAfterNotifyingLoadedFromMemoryCache(request, *resource, error)) return makeUnexpected(WTFMove(error)); logMemoryCacheResourceRequest(frame(), DiagnosticLoggingKeys::memoryCacheEntryDecisionKey(), DiagnosticLoggingKeys::usedKey()); loadTiming.setResponseEnd(MonotonicTime::now()); memoryCache.resourceAccessed(*resource); if (RuntimeEnabledFeatures::sharedFeatures().resourceTimingEnabled() &amp;&amp; document() &amp;&amp; !resource-&gt;isLoading()) { auto resourceTiming = ResourceTiming::fromCache(url, request.initiatorName(), loadTiming, resource-&gt;response(), *request.origin()); if (initiatorContext == InitiatorContext::Worker) { ASSERT(is&lt;CachedRawResource&gt;(resource.get())); downcast&lt;CachedRawResource&gt;(resource.get())-&gt;finishedTimingForWorkerLoad(WTFMove(resourceTiming)); } else { ASSERT(initiatorContext == InitiatorContext::Document); m_resourceTimingInfo.storeResourceTimingInitiatorInformation(resource, request.initiatorName(), frame()); m_resourceTimingInfo.addResourceTiming(*resource.get(), *document(), WTFMove(resourceTiming)); } } if (forPreload == ForPreload::No) resource-&gt;setLoadPriority(request.priority()); } break;} åœ¨ CachedResourceLoader çš„ loadResource æ–¹æ³•é‡Œä¼šé€šè¿‡å·¥å‚æ–¹æ³• createResource æ¥åˆ›å»ºä¸åŒçš„ CacheResourceã€‚ CachedResource åŠ è½½CachedResource å®ç°äº† RFC2616 https://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html çš„ w3c ç¼“å­˜æ ‡å‡†ï¼Œæ ¹æ®èµ„æºç±»å‹è¿˜æ´¾ç”Ÿå‡ºä¸åŒçš„å­ç±»å¦‚å›¾æ‰€ç¤ºï¼š ä¼šæœ‰ä¸€ä¸ª CachedResourceClient çš„é›†åˆ m_clients æ¥è®°å½•æ‰€æœ‰çš„ CachedResourceï¼ŒåŒæ—¶ CachedResourceClientWalker è¿™ä¸ªæ¥å£å¯ä»¥éå†è¿™ä¸ªé›†åˆã€‚ CacheResource ä¼šé€šè¿‡ CachedResourceClient::notifyFinished æ¥å£æ¥åœ¨æ•°æ®éƒ½åˆ°ä½åæ¥è¿›è¡Œé€šçŸ¥ã€‚ åœ¨ CachedResource é‡Œ type æšä¸¾å®šä¹‰äº†æ´¾ç”Ÿèµ„æºçš„ç±»å‹ï¼Œé€šè¿‡ defaultPriorityForResourceType å‡½æ•°æ–¹æ³•çš„è¿”å›å¯ä»¥çœ‹åˆ°å„èµ„æºåŠ è½½çš„ä¼˜å…ˆçº§å…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041 c++ResourceLoadPriority CachedResource::defaultPriorityForResourceType(Type type){ switch (type) { case CachedResource::MainResource: return ResourceLoadPriority::VeryHigh; case CachedResource::CSSStyleSheet: case CachedResource::Script: return ResourceLoadPriority::High;#if ENABLE(SVG_FONTS) case CachedResource::SVGFontResource:#endif case CachedResource::MediaResource: case CachedResource::FontResource: case CachedResource::RawResource: case CachedResource::Icon: return ResourceLoadPriority::Medium; case CachedResource::ImageResource: return ResourceLoadPriority::Low;#if ENABLE(XSLT) case CachedResource::XSLStyleSheet: return ResourceLoadPriority::High;#endif case CachedResource::SVGDocumentResource: return ResourceLoadPriority::Low; case CachedResource::Beacon: return ResourceLoadPriority::VeryLow;#if ENABLE(LINK_PREFETCH) case CachedResource::LinkPrefetch: return ResourceLoadPriority::VeryLow; case CachedResource::LinkSubresource: return ResourceLoadPriority::VeryLow;#endif#if ENABLE(VIDEO_TRACK) case CachedResource::TextTrackResource: return ResourceLoadPriority::Low;#endif } ASSERT_NOT_REACHED(); return ResourceLoadPriority::Low;} æ•´ä¸ªåŠ è½½çš„å®‰æ’æ˜¯é€šè¿‡ WebResourceLoadScheduler é‡Œçš„ scheduleLoad é€šè¿‡ä¸Šé¢è¿”å›çš„ä¼˜å…ˆçº§æ¥çš„ã€‚å½“ç„¶è¿™äº›å®ç°å’Œå¹³å°æ˜¯ç›¸å…³çš„ä¼šæ ¹æ®ä¸åŒå¹³å°æœ‰ä¸åŒçš„å¤„ç†ï¼Œå…·ä½“å¤„ç†å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960 c++void WebResourceLoadScheduler::scheduleLoad(ResourceLoader* resourceLoader){ ASSERT(resourceLoader);#if PLATFORM(IOS) // If there&apos;s a web archive resource for this URL, we don&apos;t need to schedule the load since it will never touch the network. if (!isSuspendingPendingRequests() &amp;&amp; resourceLoader-&gt;documentLoader()-&gt;archiveResourceForURL(resourceLoader-&gt;iOSOriginalRequest().url())) { resourceLoader-&gt;startLoading(); return; }#else if (resourceLoader-&gt;documentLoader()-&gt;archiveResourceForURL(resourceLoader-&gt;request().url())) { resourceLoader-&gt;start(); return; }#endif//æ ¹æ® url åˆ›å»º hostï¼Œç„¶ååŠ åˆ° ResourceLoadSchedule çš„ m_hosts å±æ€§é‡Œ#if PLATFORM(IOS) HostInformation* host = hostForURL(resourceLoader-&gt;iOSOriginalRequest().url(), CreateIfNotFound);#else HostInformation* host = hostForURL(resourceLoader-&gt;url(), CreateIfNotFound);#endif ResourceLoadPriority priority = resourceLoader-&gt;request().priority(); bool hadRequests = host-&gt;hasRequests(); //æŠŠä¼˜å…ˆçº§å­˜æ”¾åˆ° host çš„ m_requestsPending å±æ€§é‡Œ host-&gt;schedule(resourceLoader, priority);#if PLATFORM(COCOA) || USE(CFURLCONNECTION) if (ResourceRequest::resourcePrioritiesEnabled() &amp;&amp; !isSuspendingPendingRequests()) { // Serve all requests at once to keep the pipeline full at the network layer. // FIXME: Does this code do anything useful, given that we also set maxRequestsInFlightPerHost to effectively unlimited on these platforms? servePendingRequests(host, ResourceLoadPriority::VeryLow); return; }#endif//è¿™é‡Œå°±æ˜¯å¦‚ä½•æ ¹æ®ä¼˜å…ˆçº§æ¥è¿›è¡Œå®‰æ’çš„#if PLATFORM(IOS) if ((priority &gt; ResourceLoadPriority::Low || !resourceLoader-&gt;iOSOriginalRequest().url().protocolIsInHTTPFamily() || (priority == ResourceLoadPriority::Low &amp;&amp; !hadRequests)) &amp;&amp; !isSuspendingPendingRequests()) { //é‡è¦èµ„æºç«‹åˆ»è¿›è¡Œ servePendingRequests(host, priority); return; }#else if (priority &gt; ResourceLoadPriority::Low || !resourceLoader-&gt;url().protocolIsInHTTPFamily() || (priority == ResourceLoadPriority::Low &amp;&amp; !hadRequests)) { //é‡è¦èµ„æºç«‹åˆ»è¿›è¡Œ servePendingRequests(host, priority); return; }#endif // Handle asynchronously so early low priority requests don&apos;t // get scheduled before later high priority ones. //ä¸é‡è¦çš„å°±å»¶è¿Ÿè¿›è¡Œï¼Œç„¶åæ ¹æ®ä¼˜å…ˆçº§ï¼Œç”±é«˜åˆ°ä½ä¾æ¬¡åŠ è½½ scheduleServePendingRequests();} servePendingRequests æœ‰ä¸¤ä¸ªé‡è½½å®ç°ï¼Œç¬¬ä¸€ä¸ªä¼šæ ¹æ® host æ¥éå†ï¼Œç„¶åç”±ç¬¬äºŒä¸ªé‡è½½æ¥å…·ä½“å®ç°ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233 c++void WebResourceLoadScheduler::servePendingRequests(HostInformation* host, ResourceLoadPriority minimumPriority){ auto priority = ResourceLoadPriority::Highest; while (true) { auto&amp; requestsPending = host-&gt;requestsPending(priority); while (!requestsPending.isEmpty()) { RefPtr&lt;ResourceLoader&gt; resourceLoader = requestsPending.first(); // For named hosts - which are only http(s) hosts - we should always enforce the connection limit. // For non-named hosts - everything but http(s) - we should only enforce the limit if the document isn&apos;t done parsing // and we don&apos;t know all stylesheets yet. Document* document = resourceLoader-&gt;frameLoader() ? resourceLoader-&gt;frameLoader()-&gt;frame().document() : 0; bool shouldLimitRequests = !host-&gt;name().isNull() || (document &amp;&amp; (document-&gt;parsing() || !document-&gt;haveStylesheetsLoaded())); if (shouldLimitRequests &amp;&amp; host-&gt;limitRequests(priority)) return; requestsPending.removeFirst(); host-&gt;addLoadInProgress(resourceLoader.get());#if PLATFORM(IOS) if (!IOSApplication::isWebProcess()) { resourceLoader-&gt;startLoading(); return; }#endif //åœ¨è¿™ä¸ªå‡½æ•°é‡Œåˆ›å»ºäº† ResourceHandle resourceLoader-&gt;start(); } if (priority == minimumPriority) return; --priority; }} åŠ è½½å®Œæ•°æ®åï¼Œå¤„ç†è¿‡ç¨‹å’Œ MainResource ç±»ä¼¼ï¼ŒSubResourceLoader ä¼šä½œä¸º ResourceHandle çš„æ¥å—è€…ï¼Œä¼šæ¥å— ResourceHandle çš„å›è°ƒï¼Œå’Œ MainResource ä¸åŒçš„åªæ˜¯ Memeory Cache éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†çš„å®ç°æ˜¯åœ¨ SubResourceLoader çš„ didReceiveData é‡Œã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324 c++void SubresourceLoader::didReceiveDataOrBuffer(const char* data, int length, RefPtr&lt;SharedBuffer&gt;&amp;&amp; buffer, long long encodedDataLength, DataPayloadType dataPayloadType){ ASSERT(m_resource); if (m_resource-&gt;response().httpStatusCode() &gt;= 400 &amp;&amp; !m_resource-&gt;shouldIgnoreHTTPStatusCodeErrors()) return; ASSERT(!m_resource-&gt;resourceToRevalidate()); ASSERT(!m_resource-&gt;errorOccurred()); ASSERT(m_state == Initialized); // Reference the object in this method since the additional processing can do // anything including removing the last reference to this object; one example of this is 3266216. Ref&lt;SubresourceLoader&gt; protectedThis(*this); //ResourceLoader é‡Œä¼šæ‰ addDataOrBuffer ä¼šæŠŠæ•°æ®å­˜åœ¨ SubResourceLoader çš„ m_resourceData é‡Œ ResourceLoader::didReceiveDataOrBuffer(data, length, buffer.copyRef(), encodedDataLength, dataPayloadType); if (!m_loadingMultipartContent) { if (auto* resourceData = this-&gt;resourceData()) m_resource-&gt;addDataBuffer(*resourceData); else m_resource-&gt;addData(buffer ? buffer-&gt;data() : data, buffer ? buffer-&gt;size() : length); }} ä»¥ image ä¸ºä¾‹å¦‚å›¾æ‰€ç¤ºï¼š ä¸¾ä¸ªä¾‹å­ image åŠ è½½çš„é¡ºåºã€‚DocLoader æ˜¯è´Ÿè´£å­èµ„æºçš„åŠ è½½ï¼Œè¦åŠ è½½ä¸€ä¸ªå›¾åƒï¼Œé¦–å…ˆ DocLoader è¦æ£€æŸ¥ Cache ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„ CacheImage å¯¹è±¡ï¼Œå¦‚æœæœ‰å°±ä¸ç”¨å†æ¬¡ä¸‹è½½å’Œè§£ç ç›´æ¥ç”¨ä¹‹ã€‚ä¸åœ¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ CacheImage å¯¹è±¡ï¼Œè¿™ä¸ª CacheImage ä¼šè¦æ±‚ Loader å¯¹è±¡åˆ›å»º SubresourceLoader æ¥å¯åŠ¨ç½‘ç»œè¯·æ±‚ã€‚ CacheImage çš„åŠ è½½è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š å…·ä½“è°ƒç”¨æ–¹æ³•é¡ºåºå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132 c++HTMLImageElement::create //è§£æåˆ° img æ ‡ç­¾ ä¼šåˆ›å»º HTMLImageElement å¯¹è±¡ï¼Œé‡Œé¢åŒ…å« HTMLImageLoader å¯¹è±¡ImageLoader::updateFromElementIgnoringPreviousError //è§£æåˆ° img çš„ href å±æ€§ImageLoader::updateFromElementCachedResourceLoader::requestImageCachedResourceLoader::requestResource //åˆ¤æ–­æ˜¯å¦ä»ç¼“å­˜è¯»å–ï¼Œè¿˜æ˜¯ç½‘ç»œè·å–CachedResourceLoader::loadResource //åˆ›å»ºä¸åŒç±»å‹çš„ CachedResourceï¼Œè¿™é‡Œæ˜¯ CachedImageMemoryCache::add //åˆ›å»ºå¯¹åº”çš„ cache é¡¹ç›®CachedImage::loadCachedResource::loadCachedResourceLoader::loadCachedResourceRequest::loadResourceLoaderScheduler::scheduleSubresourceLoadSubresourceLoader::createResourceLoadScheduler::requestTimerFiredResourceLoader::startResourceHandle::createResourceLoader::didReceiveResponse //æ”¶åˆ° HTTP Header çš„ responseSubresourceLoader::didiReceiveResponseCachedResourceRequest::didReceiveResponse //å¤„ç†å“åº”ResourceLoader::didReceiveResponseResourceLoader::didReceiveData //æ”¶åˆ° body æ•°æ®SubresourceLoader::didReceiveDataResourceLoader::didReceiveDataResourceLoader::addDataCachedResourceRequest::didReceiveDataResourceLoader::didFinishLoading //æ•°æ®è¯»å–å®ŒæˆSubresourceLoader::didFinishLoadingCachedResourceRequest::didFinishLoadingCachedResource::finishCachedResourceLoader::loadDoneCachedImage::data //åˆ›å»º Image å¯¹è±¡ï¼Œè¿›è¡Œè§£ç  å¯ä»¥ç”¨ä¸‹å›¾æ¦‚æ‹¬ä¸‹ï¼šä¸€èˆ¬çš„èµ„æºåŠ è½½éƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œä½†æ˜¯ç¢°åˆ° JavaScript æ–‡ä»¶åŠ è½½æ—¶ä¼šé˜»ç¢ä¸»çº¿ç¨‹çš„æ¸²æŸ“ï¼Œè¿™æ—¶ WebKit ä¼šåœ¨é˜»ç¢æ—¶å»åé¢æ”¶é›†å…¶å®ƒèµ„æºçš„ URL å‘å¹¶å‘è¯·æ±‚ï¼Œè¿™æ ·å¯¹åŠ è½½é€Ÿåº¦ä¼šæœ‰ä¸€å®šçš„ä¼˜åŒ–ã€‚ èµ„æºçš„ç”Ÿå‘½å‘¨æœŸèµ„æºæ± é‡‡ç”¨çš„æ˜¯ Least Recent Used æœ€å°‘ä½¿ç”¨ç®—æ³• LRUã€‚é€šè¿‡ HTTP åè®®è§„èŒƒä¸­æ›´æ–°è§„èŒƒæ¥ç¡®å®šä¸‹æ¬¡æ˜¯å¦éœ€è¦æ›´æ–°èµ„æºã€‚å…·ä½“åšæ³•æ˜¯å…ˆåˆ¤æ–­èµ„æºæ˜¯å¦åœ¨èµ„æºæ± é‡Œï¼Œåœ¨çš„è¯å°±å‘ä¸€ä¸ª HTTP è¯·æ±‚å¸¦ä¸Šä¸€äº›ä¿¡æ¯æ¯”å¦‚èµ„æºçš„ä¿®æ”¹æ—¶é—´ï¼Œç„¶åæœåŠ¡å™¨æ ¹æ®è¿™ä¸ªä¿¡æ¯åˆ¤æ–­æ˜¯å¦æœ‰æ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰æ›´æ–°å°±è¿”å› 304 çŠ¶æ€ç ï¼Œè¿™æ ·å°±ç›´æ¥ä½¿ç”¨èµ„æºæ± çš„åŸèµ„æºï¼Œä¸ç„¶å°±ä¸‹è½½æœ€æ–°èµ„æºã€‚ WebKit çš„ CacheWebKit ä¸»è¦æœ‰ä¸‰ç§ Cacheã€‚ Page Cacheå¯¹æµè§ˆé¡µé¢çš„ç¼“å­˜ç”¨æ¥ä½¿é¡µé¢å†å²æ“ä½œåŠ é€Ÿã€‚å•ä¾‹æ¨¡å¼ï¼Œä¼šæœ‰é¡µé¢ä¸Šé™ï¼Œä¼šç¼“å­˜ DOM Treeï¼ŒRender Treeã€‚åœ¨æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢çš„æ—¶å€™ä¼šåœ¨ FrameLoader çš„ commitProvisionalLoad æ–¹æ³•é‡ŒæŠŠå‰ä¸€ä¸ªé¡µé¢åŠ å…¥ Page Cacheã€‚æˆªå–ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š 12345678 c++if (!m_frame.tree().parent() &amp;&amp; history().currentItem()) { // Check to see if we need to cache the page we are navigating away from into the back/forward cache. // We are doing this here because we know for sure that a new page is about to be loaded. PageCache::singleton().addIfCacheable(*history().currentItem(), m_frame.page()); WebCore::jettisonExpensiveObjectsOnTopLevelNavigation();} PageCache çš„ addIfCacheable ä¼šå¯¹ç¼“å­˜è¿›è¡Œç®¡ç†ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243 c++void PageCache::addIfCacheable(HistoryItem&amp; item, Page* page){ if (item.isInPageCache()) return; if (!page || !canCache(*page)) return; ASSERT_WITH_MESSAGE(!page-&gt;isUtilityPage(), &quot;Utility pages such as SVGImage pages should never go into PageCache&quot;); setPageCacheState(*page, Document::AboutToEnterPageCache); // Focus the main frame, defocusing a focused subframe (if we have one). We do this here, // before the page enters the page cache, while we still can dispatch DOM blur/focus events. if (page-&gt;focusController().focusedFrame()) page-&gt;focusController().setFocusedFrame(&amp;page-&gt;mainFrame()); // Fire the pagehide event in all frames. firePageHideEventRecursively(page-&gt;mainFrame()); // Check that the page is still page-cacheable after firing the pagehide event. The JS event handlers // could have altered the page in a way that could prevent caching. if (!canCache(*page)) { setPageCacheState(*page, Document::NotInPageCache); return; } destroyRenderTree(page-&gt;mainFrame()); setPageCacheState(*page, Document::InPageCache); // Make sure we no longer fire any JS events past this point. NoEventDispatchAssertion assertNoEventDispatch; //åˆ›å»ºä¸€ä¸ªæ–°çš„ CachedPage å­˜æ”¾åˆ° HistoryItem é‡Œ item.m_cachedPage = std::make_unique&lt;CachedPage&gt;(*page); item.m_pruningReason = PruningReason::None; //å°† HistoryItem æ·»åŠ åˆ° m_items åˆ—è¡¨ä¸­ m_items.add(&amp;item); //æ£€æŸ¥æ˜¯å¦æœ‰è¶…è¿‡å›æ”¶çš„é™åˆ¶ï¼Œè¿›è¡Œèµ„æºå›æ”¶ prune(PruningReason::ReachedMaxSize);} å½“ Page çš„ goBack æ–¹æ³•è°ƒç”¨æ—¶ä¼šè°ƒç”¨ FrameLoader çš„ loadDifferentDocumentItemï¼ŒåŒæ—¶åŠ è½½ç±»å‹è®¾ç½®ä¸º FrameLoadTypeBackï¼Œç„¶åé¡µé¢å°†ä¼šä» Page Cache é‡Œæ¢å¤ã€‚ Memory Cacheä½¿å¾—ç›¸åŒ url çš„èµ„æºèƒ½å¤Ÿå¿«é€Ÿè·å¾—ã€‚å•ä¾‹æ¨¡å¼ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€æ—¶åˆ›å»ºï¼Œå…³é—­æ—¶é‡Šæ”¾ã€‚å…³è”ç±»ç»“æ„å›¾å¦‚ä¸‹ï¼šMemory Cache æœ‰ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ã€‚ m_resourcesï¼šç±»å‹æ˜¯ HashMapï¼Œkey æ˜¯ urlï¼Œå€¼æ˜¯ CacheResourceã€‚ m_allResourcesï¼šé‡‡ç”¨çš„æ˜¯ LRU ç®—æ³•ï¼Œç±»å‹æ˜¯ Vector&lt;LRUList,32&gt; æœ‰ 32 ä¸ªå‘é‡ï¼Œå…·ä½“å®ç°æ˜¯åœ¨ MemeoryCache çš„ lruListForã€‚å›æ”¶èµ„æºæ˜¯é€šè¿‡ MemoryCache é‡Œçš„ prune æ¥çš„ï¼Œä¼šä»é“¾è¡¨å°¾å¼€å§‹è¿›è¡Œå›æ”¶ç›´åˆ°ç©ºé—´å¤§å°è¾¾æ ‡ä¸ºæ­¢ã€‚ m_liveDecodedResourceï¼šç±»å‹ä¸º LRUListï¼Œè§£ç åçš„æ•°æ®ä¼šè®°å½•åœ¨é‡Œé¢ã€‚ Disk Cacheæ ¹æ® HTTP çš„å¤´ä¿¡æ¯æ¥è®¾ç½®ç¼“å­˜ã€‚å±äºæŒä¹…åŒ–ç¼“å­˜å­˜å‚¨ï¼Œé‡æ–°æ‰“å¼€æµè§ˆå™¨è¿˜èƒ½èŠ‚çœä¸‹è½½çš„æµé‡å’Œæ—¶é—´æµªè´¹ã€‚ä½¿ç”¨çš„ä¹Ÿæ˜¯ LRU ç®—æ³•æ¥æ§åˆ¶ç¼“å­˜ç£ç›˜ç©ºé—´å¤§å°ã€‚å…·ä½“å®ç°æ˜¯ç”±å¹³å°ç›¸å…³ä»£ç æ¥å®Œæˆã€‚ HTML è¯æ³•è§£æï¼Œå­—ç¬¦ä¸²è§£ææˆ Tag ä¸ºå•ä½çš„ HTML Tokenè§£ææˆ HTML Token çš„ç®—æ³•åˆå§‹çŠ¶æ€æ˜¯ Data stateï¼Œç¢°åˆ° &lt; å­—ç¬¦çŠ¶æ€å˜ä¸º Tag open stateï¼Œä¸‹ä¸ªå­—ç¬¦ä¸ºå­—æ¯æ—¶å°±åˆ›å»º Start tag tokenï¼ŒçŠ¶æ€å˜æˆ Tag name stateï¼Œåˆ° &gt; å­—ç¬¦çŠ¶æ€å˜æˆ Data stateï¼Œä¸­é—´çš„å­—ç¬¦éƒ½ä¼šè¢«åŠ åˆ° token name é‡Œã€‚ åœ¨ Tag open state çŠ¶æ€æ—¶å¦‚æœç¢°åˆ° / å­—ç¬¦é‚£ä¹ˆå°±ä¼šåˆ›å»º End tag tokenï¼ŒåŒæ—¶çŠ¶æ€å˜æˆ Tag name stateã€‚ åœ¨ WebKit ä¸­æœ‰ä¸¤ä¸ªç±»æ˜¯ä¸“é—¨åšè¯æ³•åˆ†æçš„ï¼Œä¸€ä¸ªæ˜¯åšæ ‡è®°çš„ HTMLTokenï¼Œå¦ä¸€ä¸ªæ˜¯è¯æ³•è§£æå™¨ HTMLTokenizer ç±»ï¼Œè§£æä»»åŠ¡å°±æ˜¯è¦æŠŠå­—èŠ‚æµè§£ææˆä¸€ä¸ªä¸ª HTMLToken ç»™è¯­æ³•è§£æå™¨åˆ†æã€‚åœ¨ html è§£æä¸­ä¸€ä¸ª element å¯¹åº” ä¸‰ä¸ª HTMLTokenï¼Œä¸€ä¸ªæ˜¯èµ·å§‹æ ‡ç­¾ï¼Œä¸€ä¸ªæ˜¯ element å†…å®¹ï¼Œä¸€ä¸ªæ˜¯ç»“æŸæ ‡ç­¾ HTMLTokenã€‚åœ¨ DOM æ ‘ä¸Šèµ·å§‹ç»“æŸæ ‡ç­¾å¯¹åº”ä¸€ä¸ª element nodeï¼Œå†…å®¹æ˜¯å¦ä¸€ä¸ª nodeã€‚ HTMLToken çš„æ‰€æœ‰ç±»å‹å®šä¹‰åœ¨ HTMLToken.h é‡Œ 12345678910 c++enum Type { Uninitialized, //é»˜è®¤ç±»å‹ DOCTYPE, //æ–‡æ¡£ç±»å‹ StartTag, //èµ·å§‹æ ‡ç­¾ EndTag, //ç»“æŸæ ‡ç­¾ Comment, //æ³¨é‡Š Character, //å…ƒç´ å†…å®¹ EndOfFile, //æ–‡æ¡£ç»“æŸ}; æ¥ä¸‹æ¥çœ‹çœ‹ HTMLToken çš„æˆå‘˜å˜é‡ï¼ŒHTMLTokenizer ç±»ä¼šè§£æå‡ºçš„è¿™æ ·çš„ç»“æ„ä½“ã€‚ 1234567891011121314151617 c++private: Type m_type; //é‚£ç§ç±»å‹ DataVector m_data; //æ ¹æ®ç±»å‹æ¥ï¼Œä¸åŒç±»å‹å†…å®¹ä¸ä¸€æ · UChar m_data8BitCheck; // For StartTag and EndTag bool m_selfClosing; //æ˜¯å¦æ˜¯è‡ªå°é—­ AttributeList m_attributes; //å±æ€§åˆ—è¡¨ Attribute* m_currentAttribute; //å½“å‰å±æ€§ // For DOCTYPE std::unique_ptr&lt;DoctypeData&gt; m_doctypeData; unsigned m_attributeBaseOffset { 0 }; // Changes across document.write() boundaries.}; åœ¨è¯´ HTMLTokenizer å…·ä½“è§£æå®ç°ä¹‹å‰æˆ‘ä»¬å…ˆäº†è§£ä¸‹æœ‰é™çŠ¶æ€æœºã€‚å…ˆçœ‹çœ‹æ•°å­¦æ¨¡å‹ HTMLTokenizer é‡Œçš„ processToken æ–¹æ³•å…·ä½“å®ç°äº†æ•´ä¸ªçŠ¶æ€æœºï¼Œå®ç°ä¸»è¦æ˜¯æ ¹æ® w3c çš„ tokenization æ ‡å‡†æ¥å®ç°çš„ï¼šhttps://dev.w3.org/html5/spec-preview/tokenization.html ã€‚html çš„å­—ç¬¦é›†åˆå°±æ˜¯æ•°å­¦æ¨¡å‹é‡Œçš„å­—æ¯è¡¨ï¼ŒçŠ¶æ€çš„éç©ºé›†åˆéƒ½å®šä¹‰åœ¨ HTMLTokenizer.h çš„ state æšä¸¾é‡Œã€‚state æšä¸¾å€¼ DataState è¡¨ç¤ºåˆå§‹çŠ¶æ€ã€‚processToken é‡Œå¯¹ä¸åŒ state æ‰€åšçš„ case å¤„ç†å°±æ˜¯çŠ¶æ€è½¬ç§»å‡½æ•°ã€‚ä¸‹é¢æ˜¯ HTMLTokenizer é‡Œçš„ state æšä¸¾ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485 c++//HTML æœ‰é™çŠ¶æ€æœºçš„çŠ¶æ€éç©ºé›†åˆenum State { DataState, //åˆå§‹çŠ¶æ€ï¼Œä¸€èˆ¬æœ€å¼€å§‹å’Œå…¶å®ƒåœ°æ–¹ç¢°åˆ° &gt; ç¬¦å·ä¸ºæˆªæ­¢å†æ¬¡è¿›å…¥è¿™ä¸ªçŠ¶æ€ã€‚ç¢°åˆ°å­—æ¯éœ€è¦è®¾ç½® HTMLToken çš„ type ä¸º character CharacterReferenceInDataState, RCDATAState, CharacterReferenceInRCDATAState, RAWTEXTState, ScriptDataState, PLAINTEXTState, TagOpenState, //ç¢°åˆ° &lt; ç¬¦å·ã€‚å¦‚æœå‰é¢çš„ DataState æœ‰å€¼éœ€è¦æå–å€¼åˆ° HTMLToken çš„ m_data é‡Œ EndTagOpenState, //TagOpenState çŠ¶æ€ç¢°è§ / è¿›å…¥ã€‚HTMLToken çš„ type ä¸º endTag TagNameState, //åœ¨ TagOpenState æˆ– EndTagOpenState çŠ¶æ€ç¢°åˆ°å­—æ¯ã€‚HTMLToken çš„ type ä¸º StartTag RCDATALessThanSignState, RCDATAEndTagOpenState, RCDATAEndTagNameState, RAWTEXTLessThanSignState, RAWTEXTEndTagOpenState, RAWTEXTEndTagNameState, ScriptDataLessThanSignState, ScriptDataEndTagOpenState, ScriptDataEndTagNameState, ScriptDataEscapeStartState, ScriptDataEscapeStartDashState, ScriptDataEscapedState, ScriptDataEscapedDashState, ScriptDataEscapedDashDashState, ScriptDataEscapedLessThanSignState, ScriptDataEscapedEndTagOpenState, ScriptDataEscapedEndTagNameState, ScriptDataDoubleEscapeStartState, ScriptDataDoubleEscapedState, ScriptDataDoubleEscapedDashState, ScriptDataDoubleEscapedDashDashState, ScriptDataDoubleEscapedLessThanSignState, ScriptDataDoubleEscapeEndState, BeforeAttributeNameState, //TagNameState ç¢°åˆ°ç©ºæ ¼ã€‚HTMLToken çš„ m_data ä¼šè®°å½•å‰é¢çš„ tagname AttributeNameState, //BeforeAttributeNameState ç¢°è§å­—æ¯è¿›å…¥ AfterAttributeNameState, BeforeAttributeValueState, //AttributeNameState çŠ¶æ€ç¢°åˆ° = ä¼šè¿›å…¥ï¼ŒåŒæ—¶ä¼šåœ¨ HTMLToken å±æ€§åˆ—è¡¨é‡Œå¢åŠ ä¸€ä¸ªå±æ€§ï¼Œå±æ€§åä¸ºå‰é¢çŠ¶æ€è®°å½•çš„ AttributeValueDoubleQuotedState, //BeforeAttributeValueState ç¢°åˆ° &quot; ç¬¦å· AttributeValueSingleQuotedState, //BeforeAttributeValueState ç¢°åˆ° &apos; ç¬¦å· AttributeValueUnquotedState, CharacterReferenceInAttributeValueState, AfterAttributeValueQuotedState, // å†æ¬¡ç¢°åˆ° &quot; æˆ– &apos; ç¬¦å·ã€‚HTMLToken è®°å½•å±æ€§çš„å€¼ SelfClosingStartTagState, BogusCommentState, ContinueBogusCommentState, // Not in the HTML spec, used internally to track whether we started the bogus comment token. MarkupDeclarationOpenState, //TagOpenState åé‡åˆ°! æ¯”å¦‚&lt;! //è§£æcomment CommentStartState, //MarkupDeclarationOpenState çŠ¶æ€åè·Ÿäº†ä¸¤ä¸ª - æ¯”å¦‚ &lt;!-- ã€‚HTMLToken çš„ type ä¸º COMMENT CommentStartDashState, CommentState, //CommentStartState ç¢°åˆ°å­—æ¯è¿›å…¥è¿™ä¸ªçŠ¶æ€ CommentEndDashState, //åœ¨ CommentState çŠ¶æ€ç¢°è§ - è¿›å…¥ã€‚HTMLToken çš„ m_data ä¸º å‰é¢è®°å½•çš„ comment å†…å®¹ CommentEndState, //åœ¨ CommentEndDashState çŠ¶æ€ç¢°è§ - è¿›å…¥ CommentEndBangState, //è§£æ &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt; è¿™ç§æ ‡ç­¾ DOCTYPEState, //åŒ¹é…åˆ° DOCTYPEï¼Œ&lt;!DOCTYPE BeforeDOCTYPENameState, //DOCTYPE çŠ¶æ€åé‡åˆ°ç©ºæ ¼ DOCTYPENameState, //BeforeDOCTYPENameState çŠ¶æ€é‡åˆ°å­—æ¯ï¼Œæå– htmlã€‚HTMLToken çš„ m_data ä¸º html AfterDOCTYPENameState, //DOCTYPENameState é‡åˆ°ç©ºæ ¼ &lt;!DOCTYPE html AfterDOCTYPEPublicKeywordState, //AfterDOCTYPENameState ååŒ¹é…åˆ° publicã€‚&lt;!DOCTYPE html PUBLIC BeforeDOCTYPEPublicIdentifierState, //AfterDOCTYPEPublicKeywordState çŠ¶æ€åç¢°åˆ°ç©ºæ ¼ DOCTYPEPublicIdentifierDoubleQuotedState, //BeforeDOCTYPEPublicIdentifierState çŠ¶æ€ç¢°åˆ° &quot; è¿›å…¥ DOCTYPEPublicIdentifierSingleQuotedState, //BeforeDOCTYPEPublicIdentifierState çŠ¶æ€ç¢°åˆ° &apos; è¿›å…¥ AfterDOCTYPEPublicIdentifierState, //å†æ¬¡é‡åˆ° &quot; æˆ– &apos; ã€‚å¯å°† HTMLToken çš„ m_publicIdentifier ç¡®å®š BetweenDOCTYPEPublicAndSystemIdentifiersState, AfterDOCTYPESystemKeywordState, BeforeDOCTYPESystemIdentifierState, DOCTYPESystemIdentifierDoubleQuotedState, DOCTYPESystemIdentifierSingleQuotedState, AfterDOCTYPESystemIdentifierState, BogusDOCTYPEState, CDATASectionState, // These CDATA states are not in the HTML5 spec, but we use them internally. CDATASectionRightSquareBracketState, CDATASectionDoubleRightSquareBracketState,}; è¯æ³•è§£æä¸»è¦æ¥å£æ˜¯ nextToken å‡½æ•°ï¼Œä¸‹å›¾å±•ç¤ºäº† HTMLTokenizer çš„ä¸»è¦å·¥ä½œæµç¨‹ï¼š HTML è¯­æ³•è§£æHTML çš„è¯­æ³•å®šä¹‰HTML çš„è¯­æ³•è§„èŒƒæ˜¯ç”± w3c ç»„ç»‡åˆ›å»ºå’Œå®šä¹‰çš„ã€‚è¯­æ³•è¯­å¥å¯ä»¥ä½¿ç”¨æ­£å¼çš„æ¯”å¦‚ BNF æ¥å®šä¹‰ï¼Œä¸è¿‡å¯¹äº html è¿™ç§ä¼šåœ¨åˆ›å»ºåå…è®¸å†æ’å…¥ä»£ç çš„è¯­è¨€ w3c ä½¿ç”¨äº† DTD æ¥å®šä¹‰ HTMLï¼Œå®šä¹‰çš„æ–‡ä»¶å¯ä»¥åœ¨è¿™é‡Œï¼šhttps://www.w3.org/TR/html4/strict.dtd ç›¸å…³ç±»å…³ç³»å›¾ Document å’Œ DocumentParser ç›¸äº’å¼•ç”¨ HTMLDocumentParser çˆ¶ç±»æ˜¯ ScriptableDocumentParserï¼ŒDecodedDataDocumentParserï¼ˆå­—ç¬¦è§£ç åŠŸèƒ½ï¼‰ æœ€åæ˜¯ DocumentParserã€‚ HTMLInputStreamï¼šè§£ç åçš„å­—ç¬¦æµçš„ä¿å­˜ï¼Œä½œä¸ºç¼“å†²åŒºã€‚ HTMLTokenizerï¼šå¯¹å­—ç¬¦æµè¿›è¡Œè§£æï¼Œå°†è§£æåçš„ä¿¡æ¯æ¯”å¦‚ tag åå±æ€§åˆ—è¡¨ï¼Œæ³¨é‡Šï¼ŒDoc å£°æ˜ï¼Œç»“æŸ tagï¼Œæ–‡æœ¬éƒ½å­˜åœ¨ HTMLToken ç±»ä¸­ã€‚ HTMLTreeBuilderï¼šç”Ÿæˆ DOM Treeï¼Œè¿™é‡Œä¼šåšäº›è¯­ä¹‰ä¸Šçš„æ£€æŸ¥ï¼Œæ¯”å¦‚ head tag é‡Œä¸èƒ½åŒ…å« body tagã€‚ HTMLTokenï¼šHTMLTokenizer ç”Ÿæˆï¼ŒHTMLTreeBuilder æ¥ä½¿ç”¨ HTMLConstructionSiteï¼šåˆ›å»ºå„ç§ HTMLElementï¼Œå†å®Œæˆ DOM Treeï¼Œå…³é”®æ ‡ç­¾æ¯”å¦‚ bodyï¼Œhead å’Œ html ä»¥å¤–éƒ½æ˜¯é€šè¿‡ HTMLElementFactory æ¥å®ç°ã€‚å±æ€§ä½¿ç”¨ç”Ÿæˆçš„ Element é‡Œå¯¹åº”çš„å‡½æ•°æ¥å®ç°ã€‚ HTMLPreloadScannerï¼šä¸“é—¨ç”¨æ¥æŸ¥æ‰¾ç±»ä¼¼ srcï¼Œlink è¿™æ ·çš„å±æ€§ï¼Œè·å–å¤–éƒ¨èµ„æºï¼Œé€šè¿‡ CachedResourceLoader è¿™ä¸ªç±»è¿›è¡ŒåŠ è½½ã€‚ è§£æè¿‡ç¨‹ DocumentWriter è°ƒç”¨ DocumentParser::appendBytes å°†ç»“æœå­˜å…¥ HTMLInputStream ä¸­ã€‚ HTMLDocumentParser::pumpTokenizer å‡½æ•°é‡Œçš„ nextToken ä¼šæŠŠå­—ç¬¦æµè§£ææˆ HTMLTokenã€‚ æŠŠ HTMLToken å¯¹è±¡äº¤ç»™ HTMLTreeBuildï¼Œé€šè¿‡ HTMLTreeBuild::processToken æ¥åˆ†ææ ‡ç­¾æ˜¯å¦ OKï¼Œå†ç”¨ HTMLConstructionSite çš„ insertHTMLElementï¼ŒinsertHTMLHeadElement æ¥æ’å…¥åˆ° HTMLConstructionSite é‡Œï¼ŒåŸç†æ˜¯ stack of open elements æ ˆçš„æ–¹å¼æ„é€ ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™é‡Œï¼šhttps://html.spec.whatwg.org/multipage/parsing.html#the-stack-of-open-elementsã€‚HTMLConstructionSite é€šè¿‡ HTMLElementFactory é‡Œçš„ createHTMLElement æ¥åˆ›å»º HTMLElement å¯¹è±¡ã€‚Element çš„ parserSetAttributes å‡½æ•°ç”¨æ¥è§£æå±æ€§ã€‚åˆ›å»ºå®Œä¸€ä¸ª Element ä¼šè¢«åŠ åˆ°å½“å‰ Node é‡Œï¼Œé€šè¿‡ HTMLConstructionSite çš„ attachLater å‡½æ•°å¼‚æ­¥å®Œæˆã€‚ ç„¶å HTMLToken å¯¹è±¡è¿˜ä¼šäº¤ç»™ HTMLPreloadScannerï¼Œå®ƒä¼šå…ˆè°ƒç”¨ scan å‡½æ•°ï¼Œç”Ÿæˆä¸€ä¸ª PreloadTaskï¼Œè°ƒç”¨ preload å‡½æ•°æˆ– CachedResourceLoader çš„ preload è¿›è¡Œèµ„æºé¢„åŠ è½½ã€‚åœ¨ CachedResourceLoader é‡Œçš„èµ„æºæ˜¯ä»¥ url ä½œä¸º keyï¼Œé€šè¿‡ url æ¥è·å–èµ„æºã€‚å…·ä½“å®ç°å¯ä»¥çœ‹ HTMLPreloadScanner::processTokenã€‚ Element å±æ€§è®¾ç½®æ˜¯é€šè¿‡ Element::parserSetAttributes æ¥è®¾ç½®çš„ 123456789101112131415161718192021 c++void Element::parserSetAttributes(const Vector&lt;Attribute&gt;&amp; attributeVector){ ASSERT(!isConnected()); ASSERT(!parentNode()); ASSERT(!m_elementData); if (!attributeVector.isEmpty()) { if (document().sharedObjectPool()) m_elementData = document().sharedObjectPool()-&gt;cachedShareableElementDataWithAttributes(attributeVector); else m_elementData = ShareableElementData::createWithAttributes(attributeVector); } parserDidSetAttributes(); // Use attributeVector instead of m_elementData because attributeChanged might modify m_elementData. for (const auto&amp; attribute : attributeVector) attributeChanged(attribute.name(), nullAtom(), attribute.value(), ModifiedDirectly);} m_attributeData å­˜å‚¨å±æ€§çš„å¯¹è±¡ï¼ŒattributeChange å‡½æ•°ä¼šè°ƒç”¨ parseAttribute å‡½æ•°ï¼Œä½œç”¨æ˜¯è®© Element èƒ½å¤Ÿå¤„ç† src è¿™æ ·çš„å±æ€§åŠ è½½å›¾ç‰‡ èµ„æºåŠ è½½HTMLPreloadScanner è°ƒç”¨ CachedResourceLoader æ¥åŠ è½½çš„ã€‚ æ„å»º DOM Treeæ„å»º DOM Tree éœ€è¦ç»è¿‡çš„å››ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯è§£ç ï¼Œåˆ†è¯ï¼Œè§£æï¼ˆåˆ›å»ºä¸ Tag ç›¸å¯¹åº”çš„ Nodeï¼‰ï¼Œåˆ›å»ºæ ‘ï¼ˆæœ‰ DOM Treeï¼ŒRender Treeï¼ŒRenderLayer Treeï¼‰ç›¸å…³ç±»æµç¨‹å›¾ï¼š å‰ä¸‰ä¸ªé˜¶æ®µå‰é¢å·²ç»ä»‹ç»ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»ä¸‹åˆ›å»º DOM æ ‘ DOM æ ‡å‡†è§„èŒƒDocument Object Model ç®€ç§° DOMï¼Œå…¨ç§°æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå¯ä»¥æ˜¯ HTMLï¼ŒXML å’Œ XHTMLï¼ŒDOM æ˜¯ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥æè¿°æ–‡æ¡£çš„ï¼Œè¿™æ ·å¯ä»¥é€šè¿‡ JavaScript æˆ–å…¶å®ƒé¢å‘å¯¹è±¡çš„è¯­è¨€è¿›è¡Œè®¿é—®ï¼Œåˆ›å»ºï¼Œåˆ é™¤å’Œä¿®æ”¹ DOM ç»“æ„ã€‚DOM çš„æ¥å£ä¸å¹³å°å’Œè¯­è¨€æ— å…³ã€‚W3C å®šä¹‰äº†ä¸€ç³»åˆ—çš„ DOM æ¥å£ï¼Œç›®å‰å·²ç»æœ‰äº†å››ä¸ª level æ ‡å‡†ï¼Œæ¯ä¸ªæ ‡å‡†éƒ½æ˜¯åŸºäºä¸Šä¸ªæ ‡å‡†åŸºç¡€ä¸Šè¿›è¡Œçš„è¿­ä»£ï¼Œå¦‚ä¸‹å›¾æ˜¯ DOM è§„èŒƒçš„æ¼”è¿›è¿‡ç¨‹ï¼šä¸‹é¢å¯¹å„ä¸ª level è¿›è¡Œè¯´æ˜DOM level 1 Coreï¼šåº•å±‚æ¥å£ï¼Œæ¥å£æ”¯æŒ XML ç­‰ä»»ä½•ç»“æ„åŒ–æ–‡æ¡£ã€‚ HTMLï¼šæŠŠ HTML å†…å®¹å®šä¹‰ä¸º Document æ–‡æ¡£ï¼ŒNode èŠ‚ç‚¹ï¼ŒAttribute å±æ€§ï¼ŒElement å…ƒç´ ï¼ŒText æ–‡æœ¬ã€‚ DOM level 2 Coreï¼šå¯¹ level 1 çš„ Core éƒ¨åˆ†è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚ getElementByIdï¼Œè¿˜æœ‰ namespace çš„æ¥å£ã€‚ HTMLï¼šå…è®¸åŠ¨æ€è®¿é—®ä¿®æ”¹æ–‡æ¡£ã€‚ Viewsï¼šæ–‡æ¡£çš„å„ç§è§†å›¾ã€‚ Eventsï¼šé¼ æ ‡äº‹ä»¶ç­‰ã€‚ Styleï¼šå¯ä»¥ä¿®æ”¹ HTML æ ·å¼çš„ä¸€ä¸ªå±æ€§ã€‚ Traveral and rangeï¼šNodeIterator å’Œ TreeWalker éå†æ ‘å¯¹æ–‡æ¡£ä¿®æ”¹ï¼Œåˆ é™¤ç­‰æ“ä½œã€‚ èŠ‚ç‚¹DOM level 3 Coreï¼šåŠ å…¥äº†æ–°æ¥å£ adoptNode å’Œ textContentã€‚ Load and Saveï¼šåŠ è½½ XML è½¬æˆ DOM è¡¨ç¤ºçš„æ–‡æ¡£ç»“æ„ã€‚ Validationï¼šéªŒè¯æ–‡æ¡£æœ‰æ•ˆæ€§ã€‚ Eventsï¼šåŠ å…¥é”®ç›˜æ”¯æŒã€‚ XPathï¼šä¸€ç§ç®€å•ç›´è§‚æ£€ç´¢ DOM èŠ‚ç‚¹çš„æ–¹å¼ã€‚ DOM ç»“æ„æ„æˆçš„åŸºæœ¬è¦ç´ æ˜¯èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æ¦‚å¿µæ¯”è¾ƒå¤§ï¼ŒDocument ä¹Ÿæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå« Document èŠ‚ç‚¹ï¼ŒHTML é‡Œçš„ Tag ä¹Ÿæ˜¯ä¸€ç§èŠ‚ç‚¹ï¼Œå« Element èŠ‚ç‚¹ï¼Œè¿˜æœ‰å±æ€§èŠ‚ç‚¹ï¼ŒEntity èŠ‚ç‚¹ï¼ŒProcessingIntruction èŠ‚ç‚¹ï¼ŒCDataSection èŠ‚ç‚¹ï¼ŒComment èŠ‚ç‚¹ã€‚ä¸‹é¢çœ‹çœ‹ Document èŠ‚ç‚¹æä¾›çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£çš„æè¿°æ–‡ä»¶è·¯å¾„æ˜¯åœ¨ WebCore/dom/Document.idl æ–‡ä»¶é‡Œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171interface Document : Node { readonly attribute DOMImplementation implementation; // FIXME: Should be [SameObject]. [ImplementedAs=urlForBindings] readonly attribute USVString URL; [ImplementedAs=urlForBindings] readonly attribute USVString documentURI; readonly attribute USVString origin; readonly attribute DOMString compatMode; [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString characterSet; [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString charset; // Historical alias of .characterSet, [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString inputEncoding; // Historical alias of .characterSet. readonly attribute DOMString contentType; readonly attribute DocumentType? doctype; [DOMJIT=Getter] readonly attribute Element? documentElement; HTMLCollection getElementsByTagName(DOMString qualifiedName); HTMLCollection getElementsByTagNameNS(DOMString? namespaceURI, DOMString localName); HTMLCollection getElementsByClassName(DOMString classNames); [NewObject, MayThrowException, ImplementedAs=createElementForBindings] Element createElement(DOMString localName); // FIXME: missing options parameter. [NewObject, MayThrowException] Element createElementNS(DOMString? namespaceURI, DOMString qualifiedName); // FIXME: missing options parameter. [NewObject] DocumentFragment createDocumentFragment(); [NewObject] Text createTextNode(DOMString data); [NewObject, MayThrowException] CDATASection createCDATASection(DOMString data); [NewObject] Comment createComment(DOMString data); [NewObject, MayThrowException] ProcessingInstruction createProcessingInstruction(DOMString target, DOMString data); [CEReactions, MayThrowException, NewObject] Node importNode(Node node, optional boolean deep = false); [CEReactions, MayThrowException] Node adoptNode(Node node); [NewObject, MayThrowException] Attr createAttribute(DOMString localName); [NewObject, MayThrowException] Attr createAttributeNS(DOMString? namespaceURI, DOMString qualifiedName); [MayThrowException, NewObject] Event createEvent(DOMString type); [NewObject] Range createRange(); // NodeFilter.SHOW_ALL = 0xFFFFFFFF. [NewObject] NodeIterator createNodeIterator(Node root, optional unsigned long whatToShow = 0xFFFFFFFF, optional NodeFilter? filter = null); [NewObject] TreeWalker createTreeWalker(Node root, optional unsigned long whatToShow = 0xFFFFFFFF, optional NodeFilter? filter = null); // Extensions from HTML specification (https://html.spec.whatwg.org/#the-document-object). [PutForwards=href, Unforgeable] readonly attribute Location? location; [SetterMayThrowException] attribute USVString domain; readonly attribute USVString referrer; [GetterMayThrowException, SetterMayThrowException] attribute USVString cookie; readonly attribute DOMString lastModified; readonly attribute DocumentReadyState readyState; // DOM tree accessors. [CEReactions] attribute DOMString title; [CEReactions] attribute DOMString dir; [CEReactions, DOMJIT=Getter, ImplementedAs=bodyOrFrameset, SetterMayThrowException] attribute HTMLElement? body; readonly attribute HTMLHeadElement? head; readonly attribute HTMLCollection images; // Should be [SameObject]. readonly attribute HTMLCollection embeds; // Should be [SameObject]. readonly attribute HTMLCollection plugins; // Should be [SameObject]. readonly attribute HTMLCollection links; // Should be [SameObject]. readonly attribute HTMLCollection forms; // Should be [SameObject]. readonly attribute HTMLCollection scripts; // Should be [SameObject]. NodeList getElementsByName([AtomicString] DOMString elementName); readonly attribute HTMLScriptElement? currentScript; // FIXME: Should return a HTMLOrSVGScriptElement. // dynamic markup insertion // FIXME: The HTML spec says this should consult the &quot;responsible document&quot;. We should ensure // that the caller document matches those semantics. It is possible we should replace it with // the existing &apos;incumbent document&apos; concept. [CEReactions, CallWith=ResponsibleDocument, ImplementedAs=openForBindings, MayThrowException] Document open(optional DOMString type = &quot;text/html&quot;, optional DOMString replace = &quot;&quot;); [CallWith=ActiveWindow&amp;FirstWindow, ImplementedAs=openForBindings, MayThrowException] DOMWindow open(USVString url, DOMString name, DOMString features); [CEReactions, ImplementedAs=closeForBindings, MayThrowException] void close(); [CEReactions, CallWith=ResponsibleDocument, MayThrowException] void write(DOMString... text); [CEReactions, CallWith=ResponsibleDocument, MayThrowException] void writeln(DOMString... text); // User interaction. readonly attribute DOMWindow? defaultView; boolean hasFocus(); [CEReactions] attribute DOMString designMode; [CEReactions] boolean execCommand(DOMString commandId, optional boolean showUI = false, optional DOMString? value = null); // FIXME: value should not be nullable. boolean queryCommandEnabled(DOMString commandId); boolean queryCommandIndeterm(DOMString commandId); boolean queryCommandState(DOMString commandId); boolean queryCommandSupported(DOMString commandId); DOMString queryCommandValue(DOMString commandId); // Special event handler IDL attributes that only apply to Document objects. [LenientThis] attribute EventHandler onreadystatechange; // Extensions from the CSSOM specification (https://drafts.csswg.org/cssom/#extensions-to-the-document-interface). // FIXME: Should likely be moved to DocumentOrShadowRoot. readonly attribute StyleSheetList styleSheets; // FIXME: Should be [SameObject]. // Extensions from the CSSOM-View specification (https://drafts.csswg.org/cssom-view/#extensions-to-the-document-interface). readonly attribute Element? scrollingElement; // Extensions from Selection API (https://www.w3.org/TR/selection-api/#extensions-to-document-interface). // FIXME: Should likely be moved to DocumentOrShadowRoot. DOMSelection? getSelection(); // XPath extensions (https://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator). [MayThrowException] XPathExpression createExpression(optional DOMString expression = &quot;undefined&quot;, optional XPathNSResolver? resolver); // FIXME: Using &quot;undefined&quot; as default parameter value is wrong. XPathNSResolver createNSResolver(Node? nodeResolver); [MayThrowException] XPathResult evaluate(optional DOMString expression = &quot;undefined&quot;, optional Node? contextNode, optional XPathNSResolver? resolver, optional unsigned short type = 0, optional XPathResult? inResult); // FIXME: Using &quot;undefined&quot; as default parameter value is wrong. // Extensions from FullScreen API (https://fullscreen.spec.whatwg.org/#api). // FIXME: Should probably be unprefixed. [Conditional=FULLSCREEN_API] readonly attribute boolean webkitFullscreenEnabled; [Conditional=FULLSCREEN_API, ImplementedAs=webkitFullscreenElementForBindings] readonly attribute Element? webkitFullscreenElement; [Conditional=FULLSCREEN_API] void webkitExitFullscreen(); [Conditional=FULLSCREEN_API] readonly attribute boolean webkitIsFullScreen; // Mozilla version. [Conditional=FULLSCREEN_API] readonly attribute boolean webkitFullScreenKeyboardInputAllowed; // Mozilla version. [Conditional=FULLSCREEN_API, ImplementedAs=webkitCurrentFullScreenElementForBindings] readonly attribute Element webkitCurrentFullScreenElement; // Mozilla version. [Conditional=FULLSCREEN_API] void webkitCancelFullScreen(); // Mozilla version. [NotEnumerable, Conditional=FULLSCREEN_API] attribute EventHandler onwebkitfullscreenchange; [NotEnumerable, Conditional=FULLSCREEN_API] attribute EventHandler onwebkitfullscreenerror; // Extensions from Pointer Lock API (https://www.w3.org/TR/pointerlock/#extensions-to-the-document-interface). [NotEnumerable, Conditional=POINTER_LOCK] attribute EventHandler onpointerlockchange; // FIXME: Should be enumerable. [NotEnumerable, Conditional=POINTER_LOCK] attribute EventHandler onpointerlockerror; // FIXME: Should be enumerable. [Conditional=POINTER_LOCK] void exitPointerLock(); // Extensions from CSS Font Loading API (https://drafts.csswg.org/css-font-loading/#font-face-source). // FIXME: Should be in a separate FontFaceSource interface. readonly attribute FontFaceSet fonts; // Extensions from Page visibility API (https://www.w3.org/TR/page-visibility/#sec-document-interface). readonly attribute boolean hidden; readonly attribute VisibilityState visibilityState; attribute EventHandler onvisibilitychange; // FIXME: Those were dropped from the CSSOM specification. readonly attribute DOMString? preferredStylesheetSet; attribute DOMString? selectedStylesheetSet; // FIXME: Those have been dropped from the DOM specification. readonly attribute DOMString? xmlEncoding; [SetterMayThrowException] attribute DOMString? xmlVersion; attribute boolean xmlStandalone; // FIXME: Blink has already dropped this (https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/s3ezjTuC8ig). CSSStyleDeclaration getOverrideStyle(optional Element? element = null, optional DOMString pseudoElement = &quot;undefined&quot;); // FIXME: Should be moved to GlobalEventHandlers (https://w3c.github.io/selection-api/#extensions-to-globaleventhandlers). [NotEnumerable] attribute EventHandler onselectstart; // FIXME: Should be enumerable. [NotEnumerable] attribute EventHandler onselectionchange; // FIXME: Should be enumerable. // Non standard: It has been superseeded by caretPositionFromPoint which we do not implement yet. Range caretRangeFromPoint(optional long x = 0, optional long y = 0); // FIXME: This is not standard and has been dropped from Blink already. RenderingContext? getCSSCanvasContext(DOMString contextId, DOMString name, long width, long height); // Non standard (https://developer.apple.com/reference/webkitjs/document/1633863-webkitgetnamedflows). [Conditional=CSS_REGIONS] DOMNamedFlowCollection webkitGetNamedFlows(); // Obsolete features from https://html.spec.whatwg.org/multipage/obsolete.html [CEReactions] attribute [TreatNullAs=EmptyString] DOMString fgColor; [CEReactions, ImplementedAs=linkColorForBindings] attribute [TreatNullAs=EmptyString] DOMString linkColor; [CEReactions] attribute [TreatNullAs=EmptyString] DOMString vlinkColor; [CEReactions] attribute [TreatNullAs=EmptyString] DOMString alinkColor; [CEReactions] attribute [TreatNullAs=EmptyString] DOMString bgColor; readonly attribute HTMLCollection anchors; /* [SameObject] */ readonly attribute HTMLCollection applets; /* [SameObject] */ void clear(); void captureEvents(); void releaseEvents(); [Replaceable] readonly attribute HTMLAllCollection all; /* [SameObject] */}; DOM Tree Token çš„æ„é€ ç®—æ³•è¿™ä¸ªç®—æ³•è¢«æè¿°ä¸ºä¸€ä¸ª state machineï¼Œstate ä¸ºæ’å…¥æ¨¡å¼ï¼ˆinsertion modesï¼‰ã€‚å®Œæ•´ç®—æ³•å¯ä»¥å‚çœ‹ w3c çš„å®šä¹‰ï¼šhttps://www.w3.org/TR/html5/syntax.html#html-parser å½“ parser åˆ›å»ºåä¹Ÿä¼šåˆ›å»ºä¸€ä¸ª Document å¯¹è±¡ã€‚åœ¨ tree construction çš„é˜¶æ®µï¼ŒDocument ä¼šåšä¸º root çš„ element æ·»åŠ è¿›æ¥ã€‚tree constructor ä¼šå¤„ç†æ¯ä¸ª tokenizer ç”Ÿæˆçš„ nodeã€‚æ¯ä¸ª token ä¼šå¯¹åº”ä¸€ä¸ª DOM elementã€‚æ¯ä¸ª element ä¸å…‰ä¼šè¢«æ·»åŠ åˆ° DOM treeï¼Œè¿˜ä¼šæ·»åŠ åˆ° stack of open elementsé‡Œã€‚è¿™ä¸ª stack ç”¨äºæ£€æŸ¥åµŒå¥—é”™è¯¯å’Œæœªå…³é—­çš„ tagã€‚ å…·ä½“è¿‡ç¨‹æ˜¯ï¼Œåœ¨ tree construction é˜¶æ®µçš„è¾“å…¥æ˜¯æ¥è‡ª tokenization çš„ tokens æ’åºçš„é˜¶æ®µã€‚æœ€å¼€å§‹çš„çŠ¶æ€æ˜¯ initial modeã€‚æ¥æ”¶ html token ä¼šå˜æˆ before html modeï¼Œå¹¶ä¸”åœ¨é‚£ä¸ªæ¨¡å¼é‡Œé‡æ–°å¤„ç† tokenã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ª HTMLHtmlElement å…ƒç´ æ·»åŠ åˆ° Document å¯¹è±¡çš„ root ä¸Šã€‚ æ¥ä¸‹æ¥çŠ¶æ€ä¼šå˜æˆ before headã€‚ç„¶ååˆ›å»º HTMLHeadElementï¼Œå¦‚æœ head é‡Œæœ‰ token å°±ä¼šè¢«æ·»åŠ åˆ°è¿™ä¸ª tree é‡Œã€‚çŠ¶æ€ä¼šæœ‰ in head å’Œ after headã€‚ å†åé¢ä¼šåˆ›å»º HTMLBodyElementï¼Œæ·»åŠ åˆ°æ ‘ä¸­ï¼ŒçŠ¶æ€è½¬æˆ in bodyï¼Œé‡Œé¢çš„ html token ä¼šè¢«è½¬æˆå¯¹åº”çš„ DOM element è¢«æ·»åŠ åˆ° body çš„ node ä¸­ã€‚å½“æ”¶åˆ° body end token ä¼šè®©çŠ¶æ€åˆ‡æ¢æˆ after bodyã€‚æ¥ç€å°±æ˜¯æ”¶åˆ° html end tagï¼Œè½¬æˆ after after body çŠ¶æ€ï¼Œæ¥åˆ° end of file token ä¼šç»“æŸ parsingã€‚ å…³é”®ç±»æ„å»º DOM çš„å‡ ä¸ªå…³é”®çš„ç±» HTMLDocumentParserï¼šç®¡ç†ç±»ï¼Œè§£æ html æ–‡æœ¬ä½¿ç”¨è¯æ³•åˆ†æå™¨æˆ HTMLTokenizer ç±»ï¼Œæœ€åè¾“å‡ºåˆ° HTMLTreeBuilderã€‚ HTMLTreeBuilderï¼šè´Ÿè´£ DOM æ ‘çš„å»ºç«‹ï¼Œå¯¹ tokens åˆ†ç±»å¤„ç†ï¼Œåˆ›å»ºä¸€ä¸ªä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œä½¿ç”¨ HTMLConstructionSite ç±»å°†è¿™äº›åˆ›å»ºå¥½çš„èŠ‚ç‚¹æ„å»ºä¸º DOM æ ‘ã€‚ HTMLConstructionSiteï¼šä¸åŒçš„æ ‡ç­¾ç±»å‹åœ¨ä¸åŒä½ç½®ä¼šæœ‰ä¸åŒçš„å‡½æ•°æ¥æ„å»º DOM æ ‘ã€‚m_document ä»£è¡¨æ ¹èŠ‚ç‚¹ï¼Œå³ javascript é‡Œçš„ window.document å¯¹è±¡ã€‚ HTMLElementFactoryï¼šä¸€ä¸ªå·¥å‚ç±»å¯¹ä¸åŒç±»å‹çš„æ ‡ç­¾åˆ›å»ºä¸åŒçš„ html å…ƒç´ ï¼ŒåŒæ—¶å»ºç«‹çˆ¶å­å…„å¼Ÿå…³ç³»ã€‚ æ„å»º DOM æ ‘çš„è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š ä¸¾ä¸ªä¾‹å­ï¼š 12345678&lt;html&gt; &lt;body&gt; &lt;p&gt; Hello World &lt;/p&gt; &lt;div&gt; &lt;img src=\"example.png\"/&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; è½¬æˆ DOM Tree å¦‚ä¸‹ï¼š åŠ è½½é€šè¿‡ DocumentLoader è¿™ä¸ªç±»é‡Œçš„ startLoadingMainResource åŠ è½½ url 1234FetchRequest fetchRequest(m_request, FetchInitiatorTypeNames::document, mainResourceLoadOptions); m_mainResource = RawResource::fetchMainResource(fetchRequest, fetcher(), m_substituteData); DocumentLoader çš„ commitData ä¼šå»å¤„ç† dataReceived çš„æ•°æ®å— 1234567891011void DocumentLoader::commitData(const char* bytes, size_t length) { ensureWriter(m_response.mimeType()); //ä¼šåˆå§‹åŒ– HTMLDocumentParser å®ä¾‹åŒ– document å¯¹è±¡ if (length) m_dataReceived = true; m_writer-&gt;addData(bytes, length); //ç»™ Parser è§£æï¼Œè¿™é‡Œçš„byteså°±æ˜¯è¿”å›æ¥çš„ html æ–‡æœ¬ä»£ç }//ensureWriter é‡Œæœ‰ä¸ªåˆ¤æ–­ï¼Œå¦‚æœ m_writer å·²ç»åˆå§‹åŒ–å°±ä¸å¤„ç†ï¼Œæ‰€ä»¥ parser åªä¼šåˆå§‹åŒ–ä¸€æ¬¡void DocumentLoader::ensureWriter(const AtomicString&amp; mimeType, const KURL&amp; overridingURL) { if (m_writer) return;} DOM TreeDOM Tree å·²ç»è¢« W3 æ ‡å‡†åŒ–äº† Document Object Model (DOM) Technical Reports åœ¨ DOM Level 3 é‡Œ IDL çš„å®šä¹‰åœ¨ IDL Definitions Node èŠ‚ç‚¹Node æ˜¯ DOM æ¨¡å‹çš„åŸºç¡€ç±»ï¼Œæ ¹æ®æ ‡ç­¾çš„ä¸åŒå¯ä»¥åˆ†æˆå¤šä¸ªç±»ï¼Œè¯¦ç»†çš„å®šä¹‰å¯ä»¥çœ‹ NodeTypeï¼Œæœ€ä¸»è¦çš„æ˜¯ Documentï¼ŒElement å’Œ Text ä¸‰ç±»ã€‚ä¸‹å›¾åˆ—å‡ºäº† Node èŠ‚ç‚¹ç›¸å…³ç»§æ‰¿å…³ç³»å›¾ï¼š åœ¨æ„å»ºæ ‘æ—¶æ˜¯ç”± Insertion Mode æ¥æ§åˆ¶ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯å®Œå…¨æŒ‰ç…§ w3c æŒ‡å®šï¼Œå¯ä»¥å‚çœ‹ï¼šhttps://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html#the-insertion-mode ã€‚æ„å»ºæ ‘çº§åˆ«æ—¶æ˜¯æ ¹æ®å †æ ˆæ¥çš„ï¼Œç¢°åˆ° StartTag çš„ token å°±ä¼šåœ¨ m_opnElements é‡Œå‹æ ˆï¼Œç¢°åˆ° EndTag çš„ token å°±ä¼šå‡ºæ ˆã€‚ w3c å¯¹äº Element çš„å †æ ˆä¹Ÿæœ‰è§„èŒƒï¼šhttps://html.spec.whatwg.org/multipage/parsing.html#the-stack-of-open-elements ã€‚é€šè¿‡ ContainerNode::parserAddChild æ¥å£æ·»åŠ  Node åˆ° DOM Tree ä¸­ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯æœ‰äº›æ ‡ç­¾å±äº Format æ ‡ç­¾ä¸å‚ä¸åµŒå¥—å…³ç³»å±äºå¹³çº§ï¼Œæ˜¯ä¸ä¼šè¢«åŠ å…¥åˆ° m_openElements é‡Œã€‚è¿™äº›æ ‡ç­¾çš„å®šä¹‰å¯ä»¥å‚çœ‹ï¼šhttps://html.spec.whatwg.org/multipage/parsing.html#list-of-active-formatting-elements DOM Node çš„æ•°æ®ç»“æ„ HTMLElementç”± HTMLElementFactory ç±»çš„ createHTMLElement æ¥åˆ›å»ºï¼Œç„¶åé€šè¿‡ Hash map æ¥è®°å½•ï¼Œkey ä¸º tag nameï¼Œvalue ä¸ºå¯¹åº”çš„ elementã€‚ä¸åŒ tag æœ‰ä¸åŒçš„ HTMLElement æ´¾ç”Ÿç±»ï¼Œç±»ç»§æ‰¿å›¾å¦‚ä¸‹ï¼š æ„å»º DOM Treeä» Token çš„æ„å»ºèŠ‚ç‚¹ã€‚æ˜¯ HTMLDocumentParser ç±»è°ƒç”¨äº† HTMLTreeBuilder ç±»çš„ processToken å‡½æ•°æ¥å¤„ç†çš„ï¼Œè¯¥å‡½æ•°åœ¨ WebCore/html/parser/HTMLTreeBuilder.cpp æ–‡ä»¶é‡Œã€‚constructtreefromToken 12345678910111213141516171819202122232425262728293031void HTMLTreeBuilder::processToken(AtomicHTMLToken&amp;&amp; token){ switch (token.type()) { case HTMLToken::Uninitialized: ASSERT_NOT_REACHED(); break; case HTMLToken::DOCTYPE: m_shouldSkipLeadingNewline = false; processDoctypeToken(WTFMove(token)); break; case HTMLToken::StartTag: m_shouldSkipLeadingNewline = false; processStartTag(WTFMove(token)); break; case HTMLToken::EndTag: m_shouldSkipLeadingNewline = false; processEndTag(WTFMove(token)); break; case HTMLToken::Comment: m_shouldSkipLeadingNewline = false; processComment(WTFMove(token)); return; case HTMLToken::Character: processCharacter(WTFMove(token)); break; case HTMLToken::EndOfFile: m_shouldSkipLeadingNewline = false; processEndOfFile(WTFMove(token)); break; }} å°†èŠ‚ç‚¹æ„å»ºæˆ DOM Treeï¼Œè¿˜æœ‰ç»™ Tree çš„å…ƒç´ èŠ‚ç‚¹åˆ›å»ºå±æ€§èŠ‚ç‚¹éƒ½æ˜¯ HTMLConstructionSite è¿™ä¸ªç±»æ¥åšçš„ï¼Œå®ƒä¼šé€šè¿‡ insert ç±»å‡½æ•°ä¸€æ¬¡å°† Token ç±»å‹åˆ›å»ºçš„ HTMLElement å¯¹è±¡åŠ å…¥åˆ° DOM Treeã€‚è¿™ä¸ªç±»ä¼šä¼šå…ˆåˆ›å»ºä¸€ä¸ª html æ ¹èŠ‚ç‚¹ HTMLDocument å¯¹è±¡å’Œä¸€ä¸ªæ ˆ HTMLElementStack å˜é‡ï¼Œæ ˆé‡Œå­˜æ”¾æ²¡æœ‰é‡åˆ° EndTag çš„ æ‰€æœ‰ StartTagã€‚æ ¹æ®è¿™ä¸ªæ ˆæ¥å»ºç«‹çˆ¶å­å…³ç³»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839void HTMLConstructionSite::insertHTMLHtmlStartTagBeforeHTML(AtomicHTMLToken* token) { HTMLHtmlElement* element = HTMLHtmlElement::create(*m_document); attachLater(m_attachmentRoot, element); m_openElements.pushHTMLHtmlElement(HTMLStackItem::create(element, token)); //push åˆ° HTMLStackItem æ ˆé‡Œ executeQueuedTasks();}//é€šè¿‡ attachLater åˆ›å»º taskvoid HTMLConstructionSite::attachLater(ContainerNode* parent, Node* child, bool selfClosing) { HTMLConstructionSiteTask task(HTMLConstructionSiteTask::Insert); task.parent = parent; task.child = child; task.selfClosing = selfClosing; //åˆ¤æ–­æ˜¯å¦åˆ°è¾¾æœ€æ·±ï¼Œ512æ˜¯æœ€æ·± if (m_openElements.stackDepth() &gt; maximumHTMLParserDOMTreeDepth &amp;&amp; task.parent-&gt;parentNode()) task.parent = task.parent-&gt;parentNode(); queueTask(task);}//executeQueued æ·»åŠ å­èŠ‚ç‚¹void ContainerNode::parserAppendChild(Node* newChild) { if (!checkParserAcceptChild(*newChild)) return; AdoptAndAppendChild()(*this, *newChild, nullptr); } notifyNodeInserted(*newChild, ChildrenChangeSourceParser);}//æ·»åŠ å‰ä¼šå…ˆæ£€æŸ¥æ˜¯å¦æ”¯æŒå­å…ƒç´ void ContainerNode::appendChildCommon(Node&amp; child) { child.setParentOrShadowHostNode(this); if (m_lastChild) { child.setPreviousSibling(m_lastChild); m_lastChild-&gt;setNextSibling(&amp;child); } else { setFirstChild(&amp;child); } setLastChild(&amp;child);} é—­æ ‡ç­¾ä¼šæŠŠå…ƒç´  pop å‡ºæ¥ 1m_tree.openElements()-&gt;popUntilPopped(token-&gt;name()); å¯¹é”™è¯¯çš„å¤„ç†parser ä¸€ä¸ª html ä»£ç çš„æ—¶å€™å¦‚æœæ˜¯ç¬¦åˆè§„èŒƒçš„é‚£ä¹ˆå°±éƒ½å¥½è¯´ï¼Œä¸å¹¸çš„æ˜¯å¾ˆå¤š html ä»£ç éƒ½ä¸è§„èŒƒï¼Œæ‰€ä»¥ parser éœ€è¦åšäº›å®¹é”™ã€‚ä¸‹é¢åˆ—å‡ºä¸€äº› WebKit å®¹é”™çš„ä¾‹å­ é—®é¢˜ä¸€äº›ç½‘ç«™ä¼šç”¨ æ›¿ä»£ ï¼Œå¤„ç†çš„ä»£ç å¦‚ä¸‹ï¼š 1234if (t-&gt;isCloseTag(brTag) &amp;&amp; m_document-&gt;inCompatMode()) { reportError(MalformedBRError); t-&gt;beginTag = true;} stray tablestray table æ˜¯ä¸€ä¸ª table åŒ…å«äº†ä¸€ä¸ªä¸åœ¨ table cell çš„ tableã€‚ 123456&lt;table&gt; &lt;table&gt; &lt;tr&gt;&lt;td&gt;inner table&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; &lt;tr&gt;&lt;td&gt;outer table&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; WebKit çš„å¤„ç† 12if (m_inStrayTableContent &amp;&amp; localName == tableTag) popBlock(tableTag); è¿™æ ·ä¼šå¤„ç†æˆä¸¤ä¸ªåŒçº§ table 123456&lt;table&gt; &lt;tr&gt;&lt;td&gt;outer table&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;table&gt; &lt;tr&gt;&lt;td&gt;inner table&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; åµŒå¥— formå°†ä¸€ä¸ª form æ”¾åˆ°å¦ä¸€ä¸ª form é‡Œã€‚é‚£ä¹ˆç¬¬äºŒä¸ª form ä¼šè¢«å¿½ç•¥ 123if (!m_currentFormElement) { m_currentFormElement = new HTMLFormElement(formTag, m_document);} è¿‡æ·±çš„å±‚çº§åŒä¸€ä¸ªç±»å‹é‡Œåªå…è®¸åµŒå¥— 20 ä¸ª tagã€‚ 12345678bool HTMLParser::allowNestedRedundantTag(const AtomicString&amp; tagName){unsigned i = 0;for (HTMLStackElem* curr = m_blockStack; i &lt; cMaxRedundantTagDepth &amp;&amp; curr &amp;&amp; curr-&gt;tagName == tagName; curr = curr-&gt;next, i++) { }return i != cMaxRedundantTagDepth;} html æˆ– body çš„ end tags ç¼ºå¤±è¿™äº›éƒ½ä¼šåœ¨ end() æ˜¯è°ƒç”¨ 12if (t-&gt;tagName == htmlTag || t-&gt;tagName == bodyTag ) return; CSSCSS è¯­æ³•ç®€ä»‹æ‰€æœ‰çš„ CSS éƒ½æ˜¯ç”± CSSStyleSheet é›†åˆç»„æˆï¼ŒCSSStyleSheet æ˜¯æœ‰å¤šä¸ª CSSRule ç»„æˆï¼Œæ¯ä¸ª CSSRule ç”± CSSStyleSelector é€‰æ‹©å™¨å’Œ CSSStyleDeclaration å£°æ˜ç»„æˆã€‚CSSStyleDeclaration æ˜¯ CSS å±æ€§çš„é”®å€¼é›†åˆã€‚ CSS declarationsåœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ° CSS çš„ä¸åŒçš„å±æ€§ã€‚ CSS declaration blocksä½¿ç”¨å¤§æ‹¬å·åŒ…èµ·æ¥ã€‚ CSS selectors and rulesåœ¨ CSS declarations block å‰åŠ ä¸Š selector æ¥åŒ¹é…é¡µé¢ä¸Šçš„å…ƒç´ ã€‚selector å’Œ declarations block åœ¨ä¸€èµ·è¢«ç§°ä½œ rulesetï¼Œç®€ç§° ruleã€‚ selector å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ç±»åˆ« Simple selectorsï¼šç®€å•é€‰æ‹©å™¨ï¼Œé€šè¿‡ class æˆ– id ç±»åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚ Attribute selectorsï¼šå±æ€§é€‰æ‹©å™¨ï¼Œé€šè¿‡å±æ€§åŒ¹é…ã€‚ Pseudo-classesï¼šä¼ªç±»ï¼ŒåŒ¹é…ç¡®å®šçŠ¶æ€çš„æ¯”å¦‚é¼ æ ‡æ‚¬åœå…ƒç´ ï¼Œå½“å‰é€‰ä¸­æˆ–æœªé€‰ä¸­çš„å¤é€‰æ¡†ï¼Œ DOM æ ‘ä¸­ä¸€çˆ¶èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„å…ƒç´ ã€‚æ¯”å¦‚ a:visited è¡¨ç¤ºè®¿é—®è¿‡çš„é“¾æ¥ï¼Œ a:hover è¡¨ç¤ºé¼ æ ‡åœ¨ä¸Šé¢çš„é“¾æ¥ã€‚ Pseudo-elementsï¼šä¼ªå…ƒç´ ï¼ŒåŒ¹é…å¤„äºç¡®å®šä½ç½®çš„ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œæ¯”å¦‚æ¯ä¸ªæ®µè½çš„ç¬¬ä¸€ä¸ªå­—ï¼ŒæŸä¸ªå…ƒç´ ä¹‹å‰ç”Ÿæˆçš„å†…å®¹ã€‚æ¯”å¦‚ [href^=http]::after { content: â€˜-&gt;â€™} è¡¨ç¤ºå±æ€§æ˜¯ herf å€¼çš„å¼€å¤´æ˜¯ http çš„å…ƒç´ å†…å®¹åé¢æ·»åŠ  -&gt; ç¬¦å·ã€‚ Combinatorsï¼šç»„åˆå™¨ï¼Œç»„åˆå¤šä¸ªé€‰æ‹©å™¨ç”¨äºç‰¹å®šçš„é€‰æ‹©çš„æ–¹æ³•ã€‚æ¯”å¦‚åªé€‰æ‹© div çš„ç›´ç³»å­èŠ‚ç‚¹æ®µè½ã€‚æ¯”å¦‚ A &gt; B é‚£ä¹ˆ B æ˜¯ A çš„ç›´æ¥å­èŠ‚ç‚¹ã€‚ Multiple selectorsï¼šå¤šç”¨é€‰æ‹©å™¨ï¼Œå°†ä¸€ç»„å£°æ˜åº”ç”¨äºç”±å¤šä¸ªé€‰æ‹©å™¨é€‰æ‹©çš„æ‰€æœ‰å…ƒç´ ã€‚ Attribute selectors å±æ€§é€‰æ‹©å™¨æ˜¯é’ˆå¯¹ data-* è¿™æ ·çš„æ•°æ®å±æ€§è¿›è¡Œé€‰æ‹©çš„ï¼Œå°è¯•åŒ¹é…ç²¾ç¡®å±æ€§å€¼çš„ Presence and value attribute selector åˆ†ä¸ºä¸‹é¢å‡ ç§ [attr]ï¼šä¸è®ºå€¼æ˜¯ä»€ä¹ˆé€‰æ‹©æ‰€æœ‰ attr å±æ€§çš„å…ƒç´ ã€‚ [attr=val]ï¼šæŒ‰ç…§ attr å±æ€§çš„å€¼ä¸º val çš„æ‰€æœ‰å…ƒç´ ã€‚ [attr~=val]ï¼šattr å±æ€§çš„å€¼åŒ…å« val å€¼çš„æ‰€æœ‰å…ƒç´ ï¼Œval ä»¥ç©ºæ ¼é—´éš”å¤šä¸ªå€¼ã€‚ è¿˜æœ‰ Substring value attribute selector è¿™æ ·çš„ä¼ªæ­£åˆ™é€‰æ‹©å™¨ï¼š [attr|=val]ï¼šåŒ¹é…é€‰æ‹©ä»¥ val æˆ– val- å¼€å¤´çš„å…ƒç´ ï¼Œ-ä¸€èˆ¬ç”¨æ¥å¤„ç†è¯­è¨€ç¼–ç ã€‚ [attr^=val]ï¼šåŒ¹é…é€‰æ‹©ä»¥ val å¼€å¤´çš„å…ƒç´ ã€‚ [attr$=val]ï¼šåŒ¹é…é€‰æ‹©ä»¥ val ç»“å°¾çš„å…ƒç´ ã€‚ [attr*=val]ï¼šåŒ¹é…é€‰æ‹©åŒ…å« val çš„å…ƒç´ ã€‚ Combinators ç»„åˆå™¨æœ‰ä»¥ä¸‹å‡ ç§ A,Bï¼š åŒ¹é… A B çš„ä»»æ„å…ƒç´ ã€‚ A Bï¼šB æ˜¯ A çš„åä»£èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ç›´æ¥çš„å­èŠ‚ç‚¹æˆ–è€…æ˜¯å­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚ A &gt; Bï¼šB æ˜¯ A çš„ç›´æ¥å­èŠ‚ç‚¹ã€‚ A + Bï¼šB æ˜¯ A çš„å…„å¼ŸèŠ‚ç‚¹ã€‚ A ~ Bï¼šB æ˜¯ A å…„å¼ŸèŠ‚ç‚¹ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚ CSS statementsCSS rule åªæ˜¯ CSS statements çš„ä¸€ç§ã€‚å…¶å®ƒç±»å‹æ˜¯ @-è§„åˆ™ï¼Œåœ¨ CSS é‡Œä½¿ç”¨ @-è§„åˆ™æ¥ä¼ é€’å…ƒæ•°æ®ï¼Œæ¡ä»¶ä¿¡æ¯æˆ–å…¶å®ƒæè¿°ä¿¡æ¯ã€‚@ ç¬¦å·åé¢è·Ÿä¸€ä¸ªæè¿°ç¬¦æ¥è¡¨æ˜ç”¨å“ªç§è§„åˆ™ï¼Œå†åé¢æ˜¯ CSS declarations blockï¼Œç»“æŸæ˜¯ ; ç¬¦å·ã€‚ @charsetï¼šå…ƒæ•°æ® @importï¼šå…ƒæ•°æ® @mediaï¼šåµŒå¥—è¯­å¥ï¼Œåªåœ¨è¿è¡Œæµè§ˆå™¨çš„è®¾å¤‡åŒ¹é…æ¡ä»¶æ—¶æ‰ä¼šè¿ç”¨ @-è§„åˆ™é‡Œçš„å†…å®¹ã€‚ @supportsï¼šåµŒå¥—è¯­å¥ï¼Œåªæœ‰æµè§ˆå™¨ç¡®å®æ”¯æŒé‡‡ç”¨åº”ç”¨ @-è§„åˆ™é‡Œçš„å†…å®¹ã€‚ @documentï¼šåµŒå¥—è¯­å¥ï¼Œåªæœ‰å½“å‰é¡µé¢åŒ¹é…æ¡ä»¶é‡‡ç”¨è¿ç”¨ @-è§„åˆ™çš„å†…å®¹ã€‚ @font-faceï¼šæè¿°æ€§ä¿¡æ¯ æ¯”å¦‚ 1@import &apos;starming.css&apos;; è¡¨ç¤ºå‘å½“å‰çš„ CSS å¯¼å…¥äº† starming.css æ–‡ä»¶ã€‚å†ä¸¾ä¸ªä¾‹å­ï¼š 123456@media (min-width: 801px) { body { margin:0 auto; width:800px; }} è¿™ä¸ªè¡¨ç¤ºé¡µé¢å®½åº¦è¶…è¿‡801åƒç´ æ—¶æ‰ä¼šè¿ç”¨ @-è§„åˆ™é‡Œçš„å†…å®¹ã€‚ Shorthandæœ‰äº›å±æ€§æ˜¯ Shorthand å±æ€§ï¼Œæ¯”å¦‚ fontï¼Œbackgroundï¼Œpaddingï¼Œborderå’Œ marginã€‚ä»–ä»¬å…è®¸ä¸€è¡Œé‡Œè®¾ç½®å¤šä¸ªå±æ€§ã€‚æ¯”å¦‚ 1maring: 20px 10px 10px 20px; ç­‰æ•ˆäº 1234margin-top: 20px;margin-right: 10px;margin-bottom: 10px;margin-left: 20px; å†æ¯”å¦‚ background å±æ€§ 1background: black url(starming-bg.png) 20px 20px repeat-x fixed; å’Œä¸‹é¢çš„å±æ€§è®¾ç½®ç­‰æ•ˆ 12345background-color: black;background-image: url(starming-bg.png);background-position: 20px 20px;background-repeat: repeat-x;background-scroll: fixed; Value and unit absolute units ç»å¯¹å•ä½ï¼špxï¼Œmmï¼Œcmï¼Œinï¼špixel åƒç´ ï¼Œmillimeters æ¯«ç±³ï¼Œcentimeters å˜ç±³ï¼Œinches è‹±å¯¸ã€‚ptï¼Œpcï¼šPoints (1/72 of an inch) ç‚¹ï¼Œpicas (12 points.) åäºŒç‚¹æ´»å­—ã€‚ ç›¸å¯¹å•ä½ï¼šemï¼š1em çš„è®¡ç®—å€¼é»˜è®¤ä¸º 16pxã€‚ä½†æ˜¯è¦æ³¨æ„ em å•ä½ä¼šç»§æ‰¿çˆ¶å…ƒç´ çš„å­—ä½“å¤§å°ã€‚exï¼Œchï¼šæ”¯æŒçš„ä¸æ˜¯å¾ˆå¥½ã€‚remï¼šREM(root em)ï¼Œè·Ÿ em å·¥ä½œæ–¹å¼ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯æ€»æ˜¯ç­‰äºé»˜è®¤åŸºç¡€å­—ä½“å¤§å°ã€‚vwï¼Œvhï¼šè§†å›¾å®½åº¦çš„ 1/100 å’Œè§†å›¾é«˜åº¦çš„ 1/100ï¼Œä½†æ˜¯æ”¯æŒæ²¡æœ‰ rem é‚£ä¹ˆå¥½ã€‚ æ— å•ä½çš„å€¼ï¼šåœ¨æŸäº›æƒ…å†µä¸‹æ— å•ä½çš„å€¼æ˜¯å¯ä»¥å­˜åœ¨çš„ï¼Œæ¯”å¦‚è®¾ç½® margin: 0; å°±æ˜¯å¯ä»¥çš„ï¼Œè¿˜æœ‰ p { line-height: 1.5 } è¿™é‡Œçš„å€¼ç±»ä¼¼ä¸€ä¸ªç®€å•çš„ä¹˜æ³•å› å­ï¼Œæ¯”å¦‚ font-size ä¸º16pxçš„è¯ï¼Œè¡Œé«˜å°±ä¸º24pxã€‚ ç™¾åˆ†æ¯”ï¼šç›¸å¯¹äºçˆ¶å®¹å™¨æ‰€å çš„ç™¾åˆ†æ¯”ï¼Œæ³¨æ„å¦‚æœ font-size ä½¿ç”¨ç™¾åˆ†æ¯”æ˜¯æŒ‡æ–°çš„å¤§å°ç›¸å¯¹äºçˆ¶å®¹å™¨çš„å­—ä½“å¤§å°ï¼Œå’Œ em ç±»ä¼¼ï¼Œæ‰€ä»¥ 200% å’Œ 2em ç±»ä¼¼ã€‚ é¢œè‰²ï¼šæœ‰165ä¸ªä¸åŒå…³é”®å­—å¯ç”¨ï¼Œå…·ä½“è§ https://developer.mozilla.org/en-US/docs/Web/CSS/color_value#Color_keywords ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç±»ä¼¼ background-color: #0000ff; è¿™æ ·çš„åå…­è¿›åˆ¶è¡¨ç¤ºé¢œè‰²ï¼Œè¿˜æœ‰ RGB è¡¨ç¤º background-color: rgb(0,0,255); ã€‚è¿˜æ”¯æŒbackground-color: hsl(240,100%,50%); è¿™ç§ HSL çš„è¡¨ç¤ºï¼Œå€¼ä¾æ¬¡æ˜¯è‰²è°ƒï¼Œå€¼èŒƒå›´æ˜¯0åˆ°360ï¼Œé¥±å’Œåº¦0è¡¨ç¤ºæ²¡æœ‰é¢œè‰²ï¼Œæ˜åº¦é‡Œ0è¡¨ç¤ºå…¨é»‘ï¼Œ100%è¡¨ç¤ºå…¨ç™½ã€‚HSL æ˜¯é‡‡ç”¨åœ†æŸ±ä½“å¯è§†åŒ–é¢œè‰²çš„å·¥ä½œæ–¹å¼ï¼ŒWikipedia ä¸Šæœ‰è¯¦ç»†è¯´æ˜ï¼šhttps://en.wikipedia.org/wiki/HSL_and_HSV#Basic_principle é€æ˜åº¦ï¼šå¯ä»¥é€šè¿‡ rgba å’Œ hsla æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚ background-color: hsla(240,100%,50%,0.5); ã€‚è¿˜å¯ä»¥é€šè¿‡ CSS å±æ€§ opacity æ¥æŒ‡å®šé€æ˜åº¦ã€‚ å‡½æ•°ï¼šåªè¦æ˜¯ä¸€ä¸ªåå­—åé¢ç”¨æ‹¬å·åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ä¹‹é—´ç”¨é€—å·åˆ†éš”å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚ background-color: rgba(255,0,0,0.5); transform: translate(50px, 60px); background-image: url(â€˜myimage.pngâ€™); éªŒè¯ CSS è¯­æ³•æ­£ç¡®æ€§å¯ä»¥é€šè¿‡ w3c æä¾›çš„æœåŠ¡ https://jigsaw.w3.org/css-validator/ æ¥éªŒè¯ï¼Œw3c è¿˜æä¾›äº† html çš„éªŒè¯æœåŠ¡ https://validator.w3.org/#validate_by_uri CSS BNFCSS è¯­æ³• BNF 123456789101112131415161718192021222324ruleset : selector [ &apos;,&apos; S* selector ]* &apos;{&apos; S* declaration [ &apos;;&apos; S* declaration ]* &apos;}&apos; S* ;selector : simple_selector [ combinator selector | S+ [ combinator selector ] ] ;simple_selector : element_name [ HASH | class | attrib | pseudo ]* | [ HASH | class | attrib | pseudo ]+ ;class : &apos;.&apos; IDENT ;element_name : IDENT | &apos;*&apos; ;attrib : &apos;[&apos; S* IDENT S* [ [ &apos;=&apos; | INCLUDES | DASHMATCH ] S* [ IDENT | STRING ] S* ] &apos;]&apos; ;pseudo : &apos;:&apos; [ IDENT | FUNCTION S* [IDENT S*] &apos;)&apos; ] ; WebKit ä¼šä½¿ç”¨ Flex å’Œ Bison æ¥è§£æè¿™ä¸ª BNF æ–‡ä»¶ã€‚CSS æ–‡ä»¶ä¼šè¢«è§£ææˆ StyleSheet objectï¼Œæ¯ä¸ª object åŒ…å« CSS rules objectï¼Œè¿™äº› object åŒ…å« selector å’Œ declaration è¿˜è¦å…¶å®ƒå¯¹åº”äº CSS è¯­æ³•çš„ objectã€‚æ¥ä¸‹æ¥è¿›è¡Œä¼šè¿›è¡Œ CSSRule çš„åŒ¹é…è¿‡ç¨‹ï¼Œå»æ‰¾èƒ½å¤Ÿå’Œ CSSRule Selector éƒ¨åˆ†åŒ¹é…çš„ HTML å…ƒç´ ã€‚ CSS ä¸»è¦ç±»ä¸å…³ç³»ä¸Šå›¾çœ‹å‡º Document é‡ŒåŒ…å«äº†ä¸€ä¸ª DocumentStyleSheetCollection ç±»å’Œä¸€ä¸ª StyleSheetResolver ç±»ï¼ŒDocumentStyleSheetCollection åŒ…å«äº†æ‰€æœ‰çš„ StyleSheetï¼ŒStyleSheet é‡ŒåŒ…å«äº† CSS çš„ hrefï¼Œç±»å‹ï¼Œå†…å®¹ç­‰ä¿¡æ¯ï¼Œè¿™äº›å†…å®¹å°±æ˜¯ StyleSheetContentsï¼ŒåŒ…å«äº† StyleRuleBaseã€‚ StyleSheetResolver è´Ÿè´£ç»„ç»‡ç”¨æ¥ä¸º DOM é‡Œçš„å…ƒç´ åŒ¹é…çš„è§„åˆ™ï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ª DocumentRuleSets çš„ç±»ï¼Œè¿™ä¸ªç±»æ˜¯ç”¨æ¥è¡¨ç¤ºå¤šä¸ª RuleSet çš„ã€‚ CSS æ–‡æ¡£ç»“æ„çš„ç±»å›¾å¦‚ä¸‹ï¼š StyleRuleBase ç±»çš„ç»§æ‰¿å…³ç³»RuleSet æœ‰å¾ˆå¤šç±»å‹ï¼Œä¸‹å›¾æ˜¯ StyleRuleBase ç›¸å…³ç»§æ‰¿å…³ç³»æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›å­ç±»ç±»å‹éƒ½æ˜¯å¯¹åº” CSS é‡Œçš„ä»€ä¹ˆ StyleRuleï¼šå¸¸ç”¨çš„éƒ½æ˜¯è¿™ä¸ªç±»å‹ StyleRuleImportï¼šå¯¹åº”çš„æ˜¯ @import StyleRuleMediaï¼šå¯¹åº”çš„æ˜¯ @media StyleRuleFontFaceï¼šå¯¹åº”çš„ @font-face StyleRulePageï¼šå¯¹åº”çš„ @page StyleRuleKeyFramesï¼šå¯¹åº”çš„ @-webkit-key-frames StyleRuleRegionï¼šåˆ†åŒºåŸŸæ’ç‰ˆ StyleRule ç±»çš„ç»“æ„ è§£æ CSSWebKit è§£æçš„å…¥å£å‡½æ•°æ˜¯ CSSParser::parseSheetã€‚è§£æè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š å­—ç¬¦ä¸²è½¬ tokens å°† tokens è½¬æˆ styleRuleã€‚æ¯ä¸ª styleRule åŒ…å« selectors å’Œ propertiesã€‚å®šä¹‰ matchType 1234567891011121314151617enum MatchType { Unknown, Tag, //æ¯”å¦‚ div Id, // #id Class, // .class PseudoClass, // :nth-child(2) PseudoElement, // ::first-line PagePseudoClass, // AttributeExact, // E[attr=&quot;value&quot;] AttributeSet, // E[attr] AttributeHyphen, // E[attr|=&quot;value&quot;] AttributeList, // E[attr~=&quot;value&quot;] AttributeContain, // E[attr*=&quot;value&quot;] AttributeBegin, // E[attr^=&quot;value&quot;] AttributeEnd, // E[attr$=&quot;value&quot;] FirstAttributeSelectorMatch = AttributeExact,}; å®šä¹‰ selectors çš„ Relation ç±»å‹ 123456789101112enum RelationType { SubSelector, // No combinator Descendant, // &quot;Space&quot; combinator Child, // &gt; combinator DirectAdjacent, // + combinator IndirectAdjacent, // ~ combinator // Special cases for shadow DOM related selectors. ShadowPiercingDescendant, // &gt;&gt;&gt; combinator ShadowDeep, // /deep/ combinator ShadowPseudo, // ::shadow pseudo element ShadowSlot // ::slotted() pseudo element}; CSS çš„å±æ€§æ˜¯ id æ¥æ ‡è¯†çš„ 12345678enum CSSPropertyID { CSSPropertyColor = 15, CSSPropertyWidth = 316, CSSPropertyMarginLeft = 145, CSSPropertyMarginRight = 146, CSSPropertyMarginTop = 147, CSSPropertyMarkerEnd = 148,} é»˜è®¤æ ·å¼ï¼ŒBlink uaå…¨éƒ¨ CSS æ ·å¼ï¼šhttps://yincheng.site/html/chrome-ua-css.html ã€‚w3c çš„é»˜è®¤æ ·å¼æ˜¯ï¼šhttps://www.w3.org/TR/CSS2/sample.html æ¥ç€ä¼šç”Ÿæˆ hash mapï¼Œåˆ†æˆå››ä¸ªç±»å‹ 1234CompactRuleMap m_idRules; //idCompactRuleMap m_classRules; //classCompactRuleMap m_tagRules; //æ ‡ç­¾CompactRuleMap m_shadowPseudoElementRules; //ä¼ªç±»é€‰æ‹©å™¨ CSS è§£æå®Œä¼šè§¦å‘ layout tree ï¼Œä¼šç»™æ¯ä¸ªå¯è§† Node åˆ›å»ºä¸€ä¸ª layout èŠ‚ç‚¹ï¼Œåˆ›å»ºæ—¶éœ€è¦è®¡ç®— styleï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬æ‰¾åˆ° selector å’Œ è®¾ç½® styleã€‚ layout ä¼šæ›´æ–°é€’å½’æ‰€æœ‰ DOM å…ƒç´  123456void ContainerNode::attachLayoutTree(const AttachContext&amp; context) { for (Node* child = firstChild(); child; child = child-&gt;nextSibling()) { if (child-&gt;needsAttach()) child-&gt;attachLayoutTree(childrenContext); }} ç„¶åå¯¹æ¯ä¸ª node éƒ½ä¼šæŒ‰ç…§ idï¼Œclassï¼Œä¼ªå…ƒç´ å’Œæ ‡ç­¾é¡ºåºå–å‡ºæ‰€æœ‰å¯¹åº”çš„ selector 1234567891011121314151617181920//idif (element.hasID()) collectMatchingRulesForList( matchRequest.ruleSet-&gt;idRules(element.idForStyleResolution()), cascadeOrder, matchRequest);//classif (element.isStyledElement() &amp;&amp; element.hasClass()) { for (size_t i = 0; i &lt; element.classNames().size(); ++i) collectMatchingRulesForList( matchRequest.ruleSet-&gt;classRules(element.classNames()[i]), cascadeOrder, matchRequest);}//ä¼ªç±»...//tag å’Œ selectorcollectMatchingRulesForList( matchRequest.ruleSet-&gt;tagRules(element.localNameForSelectorMatching()), cascadeOrder, matchRequest);//é€šé…ç¬¦... å¯ä»¥çœ‹åˆ° id æ˜¯å”¯ä¸€çš„ï¼Œå®¹æ˜“ç›´æ¥å–åˆ°ï¼Œclass å°±éœ€è¦éå†æ•°ç»„æ¥è®¾ç½® styleã€‚ åœ¨ classRules é‡Œä¼šè¿›è¡Œæ£€éªŒ 12345678910111213141516if (!checkOne(context, subResult)) return SelectorFailsLocally;if (context.selector-&gt;isLastInTagHistory()) { return SelectorMatches;}//checkOne çš„å®ç°switch (selector.match()) { case CSSSelector::Tag: return matchesTagName(element, selector.tagQName()); case CSSSelector::Class: return element.hasClass() &amp;&amp; element.classNames().contains(selector.value()); case CSSSelector::Id: return element.hasID() &amp;&amp; element.idForStyleResolution() == selector.value();} å¦‚æœ Relation ç±»å‹æ˜¯ Descendant è¡¨ç¤ºæ˜¯åä»£ï¼Œå°±éœ€è¦åœ¨ checkOne åå¤„ç† relationã€‚ 1234567891011121314switch (relation) { case CSSSelector::Descendant: for (nextContext.element = parentElement(context); nextContext.element; nextContext.element = parentElement(nextContext)) { MatchStatus match = matchSelector(nextContext, result); if (match == SelectorMatches || match == SelectorFailsCompletely) return match; if (nextSelectorExceedsScope(nextContext)) return SelectorFailsCompletely; } return SelectorFailsCompletely; case CSSSelector::Child: //...} å¯ä»¥çœ‹åˆ°è¿™ä¸ªå°±æ˜¯ selector ä»å³åˆ°å·¦è§£é‡Šçš„å®ç°ï¼Œå®ƒä¼šé€’å½’æ‰€æœ‰çˆ¶èŠ‚ç‚¹ï¼Œå†æ¬¡æ‰§è¡Œ checkOne ï¼Œè¿™æ ·ç›´åˆ°æ‰¾åˆ°éœ€è¦çš„çˆ¶èŠ‚ç‚¹ä»¥åŠå¦‚æœéœ€è¦çš„çˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ‰ä¼šåœæ­¢é€’å½’ã€‚æ‰€ä»¥é€‰æ‹©å™¨ä¸è¦å†™å¤ªé•¿ï¼Œä¼šå½±å“æ•ˆç‡ã€‚ CSS è§„åˆ™åŒ¹é…CSS è§£æå®Œï¼ŒèŠ‚ç‚¹ä¼šè°ƒç”¨ CSSStyleSelector çš„ styleForElement æ¥ç»™èŠ‚ç‚¹åˆ›å»º RenderStyle å®ä¾‹ã€‚RenderObject éœ€è¦ RenderStyle çš„æ’ç‰ˆä¿¡æ¯ã€‚ CSSStyleSelector ä¼šä» CSSRuleList é‡Œå°†åŒ¹é…çš„æ ·å¼å±æ€§å–å‡ºè¿›è¡Œè§„åˆ™åŒ¹é…ï¼Œç›¸å…³ç±»å›¾å¦‚ä¸‹ï¼šåŒ¹é…çš„æµç¨‹å›¾å¦‚ä¸‹ï¼š è®¾ç½® styleè®¾ç½®çš„é¡ºåºæ˜¯å…ˆè®¾ç½®çˆ¶èŠ‚ç‚¹ï¼Œåœ¨ä½¿ç”¨é»˜è®¤çš„ UA çš„ styleï¼Œæœ€åå†ä½¿ç”¨ Author çš„ styleã€‚ 123style-&gt;inheritFrom(*state.parentStyle())matchUARules(collector);matchAuthorRules(*state.element(), collector); åœ¨æ‰§è¡Œæ¯ä¸€æ­¥æ—¶å¦‚æœ‰ä¸€ä¸ª styleRule åŒ¹é…çš„è¯éƒ½ä¼šæ”¾åˆ°å½“å‰å…ƒç´ çš„ m_matchedRule é‡Œï¼Œç„¶åè®¡ç®—ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§ç®—æ³•å°±æ˜¯ä»å³åˆ°å·¦å–æ¯ä¸ª selector ä¼˜å…ˆçº§ä¹‹å’Œï¼Œå®ç°å¦‚ä¸‹ 12345for (const CSSSelector* selector = this; selector; selector = selector-&gt;tagHistory()) { temp = total + selector-&gt;specificityForOneSelector();}return total; æ¯ä¸ªä¸åŒç±»å‹çš„ selector çš„ä¼˜å…ˆçº§å¦‚ä¸‹ 12345678910111213141516171819202122switch (m_match) { case Id: return 0x010000; case PseudoClass: return 0x000100; case Class: case PseudoElement: case AttributeExact: case AttributeSet: case AttributeList: case AttributeHyphen: case AttributeContain: case AttributeBegin: case AttributeEnd: return 0x000100; case Tag: return 0x000001; case Unknown: return 0; } return 0;} å¯ä»¥çœ‹å‡º id çš„ä¼˜å…ˆçº§æœ€å¤§æ˜¯ 0x010000 = 65536ï¼Œç±»ï¼Œå±æ€§ï¼Œä¼ªç±»ä¼˜å…ˆçº§æ˜¯ 0x000100 = 256ï¼Œæ ‡ç­¾æ˜¯ 0x000001 = 1 ä¸¾ä¸ªä¼˜å…ˆçº§è®¡ç®—çš„ä¾‹å­ 12345678/*ä¼˜å…ˆçº§ä¸º257 = 265 + 1*/.text h1{ font-size: 8em;}/*ä¼˜å…ˆçº§ä¸º65537 = 65536 + 1*/#my-text h1{ font-size: 16em;} å°†æ‰€æœ‰ CSS è§„åˆ™æ”¾åˆ° collector çš„ m_matchedRules é‡Œï¼Œå†æ ¹æ®ä¼˜å…ˆçº§ä»å°åˆ°å¤§æ’åºï¼Œè¿™æ ·ï¼Œè¶Šæ‰§è¡Œåˆ°åé¢ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¯ä»¥è¦†ç›–å‰é¢çš„ã€‚ ç›®å‰ä¼˜å…ˆçº§æ˜¯ ID é€‰æ‹©å™¨å¤§äºç±»å‹é€‰æ‹©å™¨ï¼Œå¤§äºæ ‡ç­¾é€‰æ‹©å™¨ï¼Œå¤§äºç›¸é‚»é€‰æ‹©å™¨ï¼Œå¤§äºå­é€‰æ‹©å™¨ï¼Œå¤§äºåä»£é€‰æ‹©å™¨ã€‚ æ’åºè§„åˆ™ 123456789static inline bool compareRules(const MatchedRule&amp; matchedRule1, const MatchedRule&amp; matchedRule2) { unsigned specificity1 = matchedRule1.specificity(); unsigned specificity2 = matchedRule2.specificity(); if (specificity1 != specificity2) return specificity1 &lt; specificity2; return matchedRule1.position() &lt; matchedRule2.position();} è§„åˆ™å’Œä¼˜å…ˆçº§å®Œåå°±å¼€å§‹è®¾ç½®å…ƒç´ çš„ style äº†ï¼š 123456789applyMatchedPropertiesAndCustomPropertyAnimations( state, collector.matchedResult(), element);applyMatchedProperties&lt;HighPropertyPriority, CheckNeedsApplyPass&gt;( state, matchResult.allRules(), false, applyInheritedOnly, needsApplyPass); for (auto range : ImportantAuthorRanges(matchResult)) { applyMatchedProperties&lt;HighPropertyPriority, CheckNeedsApplyPass&gt;( state, range, true, applyInheritedOnly, needsApplyPass); } æœ€åçš„ style æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œstyle ä¼šç”Ÿæˆä¸€ä¸ª ComputedStyle å¯¹è±¡ã€‚å¯¹è±¡ç»“æ„å¦‚ä¸‹ï¼š CSS Object Model (CSSOM)CSS å¯¹è±¡æ¨¡å‹ CSSOM æä¾›äº†ä¾¿äº JavaScript æ“ä½œ CSS çš„æ¥å£ CSSStyleSheetã€‚é€šè¿‡è¿™ä¸ªæ¥å£æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“è·å– CSS çš„ hrefï¼ŒcssRule è¿™æ ·çš„ä¿¡æ¯ã€‚ W3C è¿˜å®šä¹‰äº† CSSOM Viewï¼Œå¢åŠ äº† Windowï¼ŒDocumentï¼ŒElementï¼ŒHTMLElement å’Œ MouseEvent çš„æ¥å£ã€‚æ¯”å¦‚ Window å¯¹ CSSOM View çš„æ”¯æŒå°±å¯ä»¥åœ¨ WebCore/page/DOMWindow.idl é‡ŒæŸ¥çœ‹åˆ°ï¼Œæˆ‘æ‘˜å‡ºå’Œ CSSOM View ç›¸å…³çš„è§„èŒƒå®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132// Extensions from the CSSOM-View specification (https://drafts.csswg.org/cssom-view/#extensions-to-the-window-interface).[NewObject] MediaQueryList matchMedia(CSSOMString query);[Replaceable] readonly attribute Screen screen; // FIXME: Should be [SameObject].// Browsing context (CSSOM-View).void moveTo(optional unrestricted float x = NaN, optional unrestricted float y = NaN); // FIXME: Parameters should be mandatory and of type long.void moveBy(optional unrestricted float x = NaN, optional unrestricted float y = NaN); // FIXME: Parameters should be mandatory and of type long.void resizeTo(optional unrestricted float width = NaN, optional unrestricted float height = NaN); // Parameters should be mandatory and of type long.void resizeBy(optional unrestricted float x = NaN, optional unrestricted float y = NaN); // FIXME: Parameters should be mandatory and of type long.// Viewport (CSSOM-View).[Replaceable] readonly attribute long innerHeight;[Replaceable] readonly attribute long innerWidth;// Viewport scrolling (CSSOM-View).[Replaceable] readonly attribute double scrollX;[Replaceable, ImplementedAs=scrollX] readonly attribute double pageXOffset;[Replaceable] readonly attribute double scrollY;[Replaceable, ImplementedAs=scrollY] readonly attribute double pageYOffset;[ImplementedAs=scrollTo] void scroll(optional ScrollToOptions options);[ImplementedAs=scrollTo] void scroll(unrestricted double x, unrestricted double y);void scrollTo(optional ScrollToOptions options);void scrollTo(unrestricted double x, unrestricted double y);void scrollBy(optional ScrollToOptions option);void scrollBy(unrestricted double x, unrestricted double y);// Client (CSSOM-View).[Replaceable] readonly attribute long screenX;[Replaceable] readonly attribute long screenY;[Replaceable] readonly attribute long outerWidth;[Replaceable] readonly attribute long outerHeight;[Replaceable] readonly attribute double devicePixelRatio; å¯ä»¥çœ‹å‡º CSSOM View å®šä¹‰äº† Window çš„å¤§å°ï¼Œæ»šåŠ¨ï¼Œä½ç½®ç­‰å„ç§ä¿¡æ¯ã€‚ RenderObject Treeå½“ DOM tree æ„å»ºè¿‡ç¨‹ä¸­ï¼Œåœ¨ HTMLConstruction çš„ attachToCurrent æ–¹æ³•é‡Œä¼šé€šè¿‡ createRendererIfNeeded æ–¹æ³•æ„å»ºçš„å¦å¤–ä¸€ä¸ª treeï¼Œå« Render treeã€‚æ„æˆè¿™ä¸ª tree çš„å…ƒç´ éƒ½æ˜¯ RenderObjectã€‚RenderObject ä¼šè®°å½•å„ä¸ª node çš„ render ä¿¡æ¯ï¼Œæ¯”å¦‚ RenderStyleï¼ŒNode å’Œ RenderLayer ç­‰ã€‚å½“ WebKit åˆ›å»º DOM Tree çš„åŒæ—¶ä¹Ÿä¼šåˆ›å»º RenderObject å¯¹è±¡ï¼ŒDOM Tree åŠ¨æ€åŠ å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹æ—¶ä¹Ÿä¼šåˆ›å»ºç›¸åº”çš„ RenderObject å¯¹è±¡ã€‚ æ•´ä¸ª tree çš„åˆ›å»ºè¿‡ç¨‹éƒ½æ˜¯ç”± NodeRenderingContext ç±»æ¥å®Œæˆã€‚ä¸‹å›¾æ˜¯å¦‚ä½•åˆ›å»º RenderObject å¯¹è±¡å’Œæ„å»º RenderObject Tree çš„ã€‚ä¸Šå›¾æ‰€ç¤ºï¼ŒWebKit ä¼šå…ˆæ£€æŸ¥ DOM èŠ‚ç‚¹æ˜¯å¦éœ€è¦æ–°çš„ RenderObject å¯¹è±¡ï¼Œéœ€è¦çš„è¯ä¼šåˆ›å»ºæˆ–è€…è·å–ä¸€ä¸ª NodeRenderingContext å¯¹è±¡æ¥åˆ›å»º RenderObject å¯¹è±¡ã€‚NodeRenderingContext çš„ä½œç”¨æ˜¯åˆ†æè®¾ç½® RenderObject å¯¹è±¡çˆ¶ç»“ç‚¹ï¼Œå…„å¼ŸèŠ‚ç‚¹ç­‰ä¿¡æ¯ç„¶åå®Œæˆæ’å…¥ RenderObject æ ‘ã€‚ RenderObjectRenderObject éœ€è¦çŸ¥é“ CSS ç›¸å…³å±æ€§ï¼Œä¼šå¼•ç”¨åœ¨ CSS è§£æè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ CSSStyleSelector æä¾›çš„ RenderStyleã€‚RenderObject çš„åˆ›å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š RenderObject è¢«åˆ›å»ºæ—¶åˆ›å»ºæ—¶ç›¸å…³çš„ç±»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šElement å¯¹è±¡ä¼šé€’å½’è°ƒç”¨ attach å‡½æ•°ï¼Œä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ RenderObjectã€‚éœ€è¦åˆ›å»ºçš„è¯ä¼šä½¿ç”¨ NodeRenderingContext ç±»æ¥åˆ›å»ºä¸åŒ DOM èŠ‚ç‚¹ç±»å‹çš„ RenderObjectã€‚attach çš„å…·ä½“è¿‡ç¨‹æ˜¯åœ¨å½“å‰çš„ Render èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¼šå°†å½“å‰çš„ Render èŠ‚ç‚¹æ’å…¥åˆ°åˆé€‚ä½ç½®ï¼Œçˆ¶èŠ‚ç‚¹å†è®¾ç½®å½“å‰èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ã€‚attach è¿‡ç¨‹è§ä¸‹å›¾ï¼š RenderObject æ ‘å’Œ DOM æ ‘ä¸€æ ·ä¹Ÿæœ‰å¾ˆå¤šç±»å‹ï¼Œä¸‹é¢æ˜¯ RenderObject åŸºç±»å’Œå­ç±»ç¤ºæ„å›¾ï¼š RenderObject æ ¸å¿ƒå¯¹è±¡å…³ç³»å›¾å¦‚ä¸‹ï¼š RenderBox ç±»æ˜¯ Box æ¨¡å‹çš„ç±»ï¼ŒåŒ…å«äº†å¤–è¾¹è·ï¼Œå†…è¾¹è·ï¼Œè¾¹æ¡†ç­‰ä¿¡æ¯ã€‚ RenderObject çš„ç»§æ‰¿å…³ç³»å›¾å¦‚ä¸‹ï¼š RenderObject çš„ä¸€äº›ä¸»è¦è™šå‡½æ•° parent()ï¼ŒfirstChild()ï¼ŒnextSibling()ï¼ŒpreviousSibling()ï¼ŒaddChild()ï¼ŒremoveChild() è¿™äº›éå†å’Œä¿®æ”¹ RenderObject æ ‘çš„å‡½æ•°ã€‚ layout()ï¼Œstyle()ï¼ŒenclosingBox() è¿™äº›è®¡ç®—å’Œè·å–å¸ƒå±€çš„å‡½æ•°ã€‚ isASubClass ç±»ä¼¼è¿™æ ·åˆ¤æ–­é‚£ç§å­ç±»ç±»å‹çš„å‡½æ•°ã€‚ paint()ï¼Œrepaint() è¿™æ ·è®²å†…å®¹ç»˜åˆ¶ä¼ å…¥ç»˜åˆ¶ç»“æœå¯¹è±¡çš„åæ ‡å’Œç»˜å›¾å‡½æ•°ã€‚ RenderObject ç”¨æ¥æ„å»º Render Tree çš„ç›¸å…³æ–¹æ³• 1234567891011121314151617181920RenderElement* parent() const { return m_parent; }bool isDescendantOf(const RenderObject*) const;RenderObject* previousSibling() const { return m_previous; }RenderObject* nextSibling() const { return m_next; }// Use RenderElement versions instead.virtual RenderObject* firstChildSlow() const { return nullptr; }virtual RenderObject* lastChildSlow() const { return nullptr; }RenderObject* nextInPreOrder() const;RenderObject* nextInPreOrder(const RenderObject* stayWithin) const;RenderObject* nextInPreOrderAfterChildren() const;RenderObject* nextInPreOrderAfterChildren(const RenderObject* stayWithin) const;RenderObject* previousInPreOrder() const;RenderObject* previousInPreOrder(const RenderObject* stayWithin) const;WEBCORE_EXPORT RenderObject* childAt(unsigned) const;RenderObject* firstLeafChild() const;RenderObject* lastLeafChild() const; RenderObject ç”¨æ¥å¸ƒå±€ç›¸å…³çš„æ–¹æ³• 1234567891011121314151617bool needsLayout() const{ return m_bitfields.needsLayout() || m_bitfields.normalChildNeedsLayout() || m_bitfields.posChildNeedsLayout() || m_bitfields.needsSimplifiedNormalFlowLayout() || m_bitfields.needsPositionedMovementLayout();}bool selfNeedsLayout() const { return m_bitfields.needsLayout(); }bool needsPositionedMovementLayout() const { return m_bitfields.needsPositionedMovementLayout(); }bool needsPositionedMovementLayoutOnly() const{ return m_bitfields.needsPositionedMovementLayout() &amp;&amp; !m_bitfields.needsLayout() &amp;&amp; !m_bitfields.normalChildNeedsLayout() &amp;&amp; !m_bitfields.posChildNeedsLayout() &amp;&amp; !m_bitfields.needsSimplifiedNormalFlowLayout();}bool posChildNeedsLayout() const { return m_bitfields.posChildNeedsLayout(); }bool needsSimplifiedNormalFlowLayout() const { return m_bitfields.needsSimplifiedNormalFlowLayout(); }bool normalChildNeedsLayout() const { return m_bitfields.normalChildNeedsLayout(); } RenderBoxModelObject æ˜¯ RenderObject çš„å­ç±»ï¼Œæ˜¯å¯¹ CSS Box çš„å°è£…ï¼Œé‡Œé¢å®šä¹‰äº† CSS Box çš„å„ä¸ªæ¥å£ã€‚ RenderBox æ˜¯ RenderBoxModelObject çš„å­ç±»ï¼Œä¼šé‡è½½ RenderObject å’Œ RenderBoxModelObject çš„ä¸€äº›æ–¹æ³•ã€‚ RenderBlock æ˜¯ RenderBox çš„å­ç±»ï¼Œå°è£… CSS é‡Œ Block çš„å…ƒç´ ï¼Œé‡Œé¢æœ‰å¸ƒå±€ Inlineï¼Œblockï¼Œå’Œå®šä½ç›¸å…³çš„æ–¹æ³•ï¼Œæœ‰åˆ é™¤ï¼Œæ’å…¥ Float æµ®åŠ¨èŠ‚ç‚¹è¿˜æœ‰è®¡ç®—æµ®åŠ¨èŠ‚ç‚¹ä½ç½®ç­‰æ–¹æ³•ï¼Œç»˜åˆ¶ç›¸å…³çš„æ¯”å¦‚ç»˜åˆ¶ Float èŠ‚ç‚¹ï¼Œç»˜åˆ¶ outlineï¼Œç»˜åˆ¶é€‰æ‹©åŒºç­‰æ–¹æ³•ã€‚ RenderView ç»§æ‰¿è‡ª RenderBlockï¼ŒRender Tree çš„æ ¹èŠ‚ç‚¹ï¼Œæ˜¯ Tree å¸ƒå±€å’Œæ¸²æŸ“çš„å…¥å£ã€‚ RenderInlineBox æ˜¯ RenderBoxModelObject çš„å­ç±»ï¼Œä¼šå°è£… CSS é‡Œçš„ Inline å…ƒç´ ã€‚é‡Œé¢çš„æ–¹æ³•ä¸»è¦å¤„ç† Inline çš„è‡ªåŠ¨æ¢å¤šè¡Œæƒ…å†µã€‚å¯¹å¤šè¡Œçš„å¤„ç† RenderInlineBox ä¼šæœ‰ä¸ª RenderInlineBoxList ç±»çš„ m_lineBoxes æŒæœ‰æœ‰å¤šä¸ª InlineBox çš„è¡Œå…ƒç´ ã€‚RenderBox å’Œ InlineBox çš„å…³ç³»ç±»å›¾å¦‚ä¸‹ï¼šRenderStyle ä¼šä¿å­˜ CSS è§£æç»“æœï¼Œè¿™äº› CSS å±æ€§ä¼šä¿å­˜åœ¨ InheritedFlags å’Œ NonInheritedFlags é‡Œï¼ŒInheritedFlags ä¿å­˜çš„éƒ½æ˜¯æ–‡æœ¬æ–¹å‘å’Œæ–‡æœ¬å¯¹é½ç­‰å±æ€§ï¼ŒNonInheritedFlags é‡Œä¿å­˜äº†æµ®åŠ¨ï¼Œå®šä½ï¼Œoverflow ç­‰å±æ€§ï¼Œè¿˜æœ‰å¤§é‡çš„è®¿é—®å’Œè®¾ç½® CSS å±æ€§çš„æ–¹æ³•ã€‚ RenderText ç»§æ‰¿ RenderObjectï¼Œæä¾›å¤„ç†æ–‡å­—ç›¸å…³åŠŸèƒ½ã€‚ç›¸å…³çš„ç±»å›¾å¦‚ä¸‹ï¼š StyleResolverRenderStyle æ¥è‡ª CSSï¼Œä¿å­˜äº† Render Tree ç»˜åˆ¶éœ€è¦çš„æ‰€æœ‰å†…å®¹ï¼ŒStyleResolver å°±æ˜¯è´Ÿè´£å°† CSS è½¬æˆ RenderStyleã€‚StyleResolver ç±»æ ¹æ®å…ƒç´ çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ ‡ç­¾åå’Œç±»åˆ«ç­‰ï¼Œä¿å­˜åˆ°æ–°å»ºçš„ RenderStyle å¯¹è±¡ä¸­ï¼Œå®ƒä»¬æœ€åè¢« RenderObject ç±»æ‰€ç®¡ç†å’Œä½¿ç”¨ã€‚ è§„åˆ™çš„åŒ¹é…æ˜¯ç”± ElementRuleCollector ç±»è®¡ç®—è·å¾—ï¼Œæ ¹æ®å…ƒç´ å±æ€§ä¿¡æ¯ï¼Œä» DocumentRuleSets ç±»é‡Œè·å¾—è§„åˆ™é›†åˆæŒ‰ç…§ IDï¼ŒClassï¼ŒTag ç­‰ä¿¡æ¯è·å¾—å…ƒç´ çš„æ ·å¼ï¼Œå…·ä½“çš„è¿‡ç¨‹å¦‚ä¸‹ï¼šåˆ›å»º RenderObject ç±»æ—¶ StyleResolver ä¼šæ”¶é›†æ ·å¼ä¿¡æ¯ç»™ RenderStyle å¯¹è±¡ï¼Œè¿™æ · RenderStyle å¯¹è±¡åŒ…å«äº†å®Œæ•´çš„æ ·å¼ä¿¡æ¯ã€‚ 1234567891011PassRefPtr&lt;RenderStyle&gt; styleForElement(Element*, RenderStyle* parentStyle = 0, StyleSharingBehavior = AllowStyleSharing, RuleMatchingBehavior = MatchAllRules, RenderRegion* regionForStyling = 0); ...... PassRefPtr&lt;RenderStyle&gt; pseudoStyleForElement(PseudoId, Element*, RenderStyle* parentStyle); PassRefPtr&lt;RenderStyle&gt; styleForPage(int pageIndex); PassRefPtr&lt;RenderStyle&gt; defaultStyleForElement(); PassRefPtr&lt;RenderStyle&gt; styleForText(Text*); static PassRefPtr&lt;RenderStyle&gt; styleForDocument(Document*, CSSFontSelector* = 0); StyleResolver æ˜¯ Document çš„å­å¯¹è±¡ã€‚å½“ CSS å‘ç”Ÿå˜åŒ–ï¼ˆstyle å‘ç”Ÿå˜åŒ–ï¼‰å°±ä¼šè°ƒç”¨ recalcStyleï¼ŒrecalcStyle è°ƒç”¨ Element::StyleForRenderï¼ŒElement::StyleForRender è°ƒç”¨ styleForElementã€‚ styleForElement è¿›è¡Œ CSS é€‰æ‹©å’ŒåŒ¹é…å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425//ä¿å­˜ elementinitElement(element);initForStyleResolve(element, defaultParent); .... //è§„åˆ™åŒ¹é… MatchResult matchResult; if (matchingBehavior == MatchOnlyUserAgentRules) matchUARules(matchResult); else matchAllRules(matchResult, matchingBehavior != MatchAllRulesExcludingSMIL); //å°†è§„åˆ™å’Œ element åšæ˜ å°„applyMatchedProperties(matchResult, element);//matchUARulesvoid StyleResolver::matchUARules(MatchResult&amp; result, RuleSet* rules) { m_matchedRules.clear(); result.ranges.lastUARule = result.matchedProperties.size() - 1; //æ”¶é›†åŒ¹é…è§„åˆ™ collectMatchingRules(rules, result.ranges.firstUARule, result.ranges.lastUARule, false); //è§„åˆ™æ’åº sortAndTransferMatchedRules(result); } RuleSetmatchUARules çš„ RuleSet ä»£è¡¨ CSS è§„åˆ™ï¼Œæ¯”å¦‚ 1p { background : red; } RuleSet çš„æˆå‘˜å˜é‡ 12345678class RuleSet ... {.....AtomRuleMap m_idRules;AtomRuleMap m_classRules;AtomRuleMap m_tagRules;AtomRuleMap m_shadowPseudoElementRules;...}; sortAndTransferMatchedRules æ˜¯ä¸ºäº†ä¿è¯æ­£ç¡®çš„åŒ¹é…é¡ºåºã€‚ RuleSet æ¥è‡ªæµè§ˆå™¨å®šä¹‰çš„é»˜è®¤ RuleSetï¼Œä¹Ÿå¯æ¥è‡ªå†™é¡µé¢å®šä¹‰çš„ Author RuleSetï¼Œå¯¹äº Element è¿˜æœ‰è‡ªèº«çš„è§„åˆ™ã€‚åªæœ‰ç»§æ‰¿ StyledElement çš„å†…è” CSS çš„ Element æ‰èƒ½å¤Ÿæœ‰ RuleSetã€‚å®ç°æ˜¯åœ¨ StyledElement::rebuildPresentationAttributeStyle é‡Œå®ç°çš„ã€‚ 1234567891011121314151617181920212223void StyledElement::rebuildPresentationAttributeStyle() { ..... RefPtr&lt;StylePropertySet&gt; style; if (cacheHash &amp;&amp; cacheIterator-&gt;value) { style = cacheIterator-&gt;value-&gt;value; presentationAttributeCacheCleaner().didHitPresentationAttributeCache(); } else { style = StylePropertySet::create(isSVGElement() ? SVGAttributeMode : CSSQuirksMode); unsigned size = attributeCount(); for (unsigned i = 0; i &lt; size; ++i) { const Attribute* attribute = attributeItem(i); collectStyleForPresentationAttribute(*attribute, style.get()); } } // ImmutableElementAttributeData doesn&apos;t store presentation attribute style, so make sure we have a MutableElementAttributeData. ElementAttributeData* attributeData = mutableAttributeData(); attributeData-&gt;m_presentationAttributeStyleIsDirty = false; attributeData-&gt;setPresentationAttributeStyle(style-&gt;isEmpty() ? 0 : style); .... å…³äº AuthorStyle ç”¨ StyleResolver::m_authorStyle æ¥ä¿å­˜ html é‡Œæ‰€æœ‰ style tag å’Œ link çš„å¤–éƒ¨ cssã€‚å½“ CSS è¢«æ”¹å˜æˆ–è€…é¡µé¢å¤§å°å˜åŒ–æ—¶ä¼šè°ƒç”¨ Document::styleResolverChanged å‡½æ•°ï¼Œæ¥ç€è°ƒç”¨ DocumentStyleCollection::updateActiveStyleSheetsï¼Œæœ€åè°ƒç”¨ StyleResolver::appendAuthorStyleSheetsã€‚ Render tree å’Œ DOM tree åšå¯¹åº”å…¶å®å¹¶ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ¯”å¦‚è¯´ head æ ‡ç­¾æˆ–è€… display å±æ€§ä¸º none çš„å°±ä¸ä¼šåœ¨ Render tree ä¸­ã€‚ æœ‰äº› render object æœ‰å¯¹åº”çš„ DOM nodeï¼Œä½†æ˜¯ä¸åœ¨ tree çš„ç›¸åŒä½ç½®ï¼Œæ¯”å¦‚ floats å’Œ absolutely position çš„å…ƒç´ ï¼Œä»–ä»¬ä¼šæ”¾åœ¨ tree çš„å…¶å®ƒåœ°æ–¹ï¼Œä¼šæ˜ æ ¹æ®è®¾ç½®çš„ frame ç›´æ¥å°„åˆ°å¯¹åº”çš„ä½ç½®ã€‚å¦‚ä¸‹å›¾ï¼Œè™šçº¿è¡¨ç¤ºä»–ä»¬èƒ½å¤Ÿå¯¹åº”çš„ï¼š ä¸Šå›¾å¯ä»¥çœ‹åˆ°ä¸€èˆ¬çš„ Element æ¯”å¦‚ HTMLBodyElement å’Œ HTMLDivElement å¯¹åº”çš„éƒ½æ˜¯ RenderBlockã€‚ æ„å»º Render Tree çš„æµç¨‹è§£å†³æ ·å¼å’Œåˆ›å»ºä¸€ä¸ª renderer ç§°ä½œ attachmentï¼Œæ¯ä¸ª Element æœ‰ä¸€ä¸ª attach æ–¹æ³•ï¼ŒRender Tree çš„åˆ›å»ºå°±æ˜¯ä»è¿™é‡Œå¼€å§‹ï¼Œattachment æ˜¯åŒæ­¥çš„ï¼ŒElement èŠ‚ç‚¹æ’å…¥ DOM tree ä¼šè°ƒç”¨æ–° node çš„ attach æ–¹æ³•ã€‚åœ¨å¤„ç† html å’Œ body æ ‡ç­¾æ—¶ä¼šåˆ›å»º Render Tree çš„ rootã€‚root Render Object å¯¹åº”äº† CSS é‡Œçš„ containing blockï¼Œtop block ä¼šåŒ…å«æ‰€æœ‰çš„å…¶å®ƒ blockã€‚Render Object é€šè¿‡ RenderObject::CreateObject é™æ€æ–¹æ³•åˆ›å»ºï¼Œåˆ›å»ºæ—¶ä¼šè®¡ç®—å‡º Element çš„ CSSStyleã€‚ æµè§ˆå™¨ window æ˜¾ç¤ºåŒºåŸŸ viewportï¼Œåœ¨ WebKit é‡Œå«åš RenderViewã€‚ RenderLayer TreeRenderLayer Tree æ˜¯åŸºäº RenderObject Tree å»ºç«‹çš„ï¼Œå®ƒä»¬æ˜¯å¤šä¸ª RenderObject å¯¹åº”ä¸€ä¸ª RenderLayer çš„å…³ç³»ã€‚åœ¨åˆ›å»ºå®Œ RenderObject Tree WebKit è¿˜ä¼šåˆ›å»º RenderLayer Treeï¼Œæ ¹èŠ‚ç‚¹æ˜¯ RenderView å®ä¾‹ï¼Œæ ¹æ®ä¸€äº›æ¡ä»¶æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ RenderLayer å¯¹è±¡ï¼Œå†è®¾ç½® RenderLayer å¯¹è±¡çš„çˆ¶å¯¹è±¡å’Œå…„å¼Ÿå¯¹è±¡ã€‚RenderLayer éœ€è¦æ»¡è¶³ä¸€å®šæ¡ä»¶æ‰ä¼šåˆ›å»ºï¼Œä¸‹é¢æ˜¯é‚£äº›éœ€è¦åˆ›å»ºæ–° RenderLayer å¯¹è±¡çš„æ¡ä»¶ï¼š HTMLElement èŠ‚ç‚¹å¯¹åº”çš„ RenderBlock èŠ‚ç‚¹ã€‚ æœ‰è®¾ç½® relativeï¼Œabsoluteï¼Œtransform çš„ CSS position å±æ€§çš„ã€‚ é€æ˜æ•ˆæœçš„ RenderObject èŠ‚ç‚¹ã€‚ èŠ‚ç‚¹æœ‰ overflowï¼Œ apha mask æˆ–åå°„æ•ˆæœçš„ RenderObject èŠ‚ç‚¹ã€‚ è®¾ç½®äº† CSS filter å±æ€§çš„èŠ‚ç‚¹ã€‚ ä½¿ç”¨ Canvas æˆ– WebGL çš„ RenderObject èŠ‚ç‚¹ã€‚ Video èŠ‚ç‚¹å¯¹åº”çš„ RenderObject èŠ‚ç‚¹ã€‚ RenderObject Tree å’Œ RenderLayer Tree çš„å…³ç³»å¦‚ä¸‹å›¾ï¼šæ¥ä¸‹æ¥çœ‹çœ‹ RenderObject Tree å’Œ RenderLayer Tree çš„å¸ƒå±€ä¿¡æ¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š style è®¡ç®—æ„å»º render tree éœ€è¦è®¡ç®—æ¯ä¸ª render object çš„è§†è§‰ç‰¹æ€§ã€‚æ˜¯é€šè¿‡è®¡ç®—æ¯ä¸ª element çš„ style å±æ€§æ¥åšåˆ°çš„ã€‚ è¿™ä¸ªæ ·å¼åŒ…å«äº†å„ç§æ¥æºçš„ style sheetsï¼Œæœ‰ inline style element å’Œ html é‡Œè§†è§‰å±æ€§è®¾ç½®æ¯”å¦‚ bgcolor è¿™æ ·çš„å±æ€§ï¼Œåé¢è¿™äº›éƒ½ä¼šè½¬ä¸º CSS style çš„å±æ€§ã€‚æ¥æºè¿˜æœ‰æµè§ˆå™¨é»˜è®¤çš„ style sheetsï¼Œè¿™ä¸ª style sheets å¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ã€‚ æˆ‘ä»¬å…ˆçœ‹çœ‹ style è®¡ç®—å¯èƒ½ä¼šæœ‰ä¸€äº›ä»€ä¹ˆæ ·é—®é¢˜ Style çš„æ•°æ®æ˜¯ä¸ªéå¸¸å¤§çš„ç»“æ„ï¼Œå› ä¸ºé‡Œé¢æœ‰å¤§é‡çš„ style å±æ€§è¿™æ ·ä¼šæœ‰å†…å­˜é—®é¢˜ã€‚ å¦‚æœæ²¡æœ‰ä¼˜åŒ–ä¸ºæ¯ä¸ª element æŸ¥æ‰¾åˆé€‚çš„è§„åˆ™ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚ä¸ºæ¯ä¸ª element åˆ°æ•´ä¸ªè§„åˆ™åˆ—è¡¨æŸ¥æ‰¾åˆé€‚çš„è§„åˆ™æ˜¯ä¸ªå·¨å¤§æ¶ˆè€—ã€‚Selectors å¯èƒ½ä¼šæœ‰ä¸ªå¾ˆå¤æ‚çš„ç»“æ„ï¼Œæ¯”å¦‚ div div div div {â€¦} è¿™æ ·çš„è¯åŒ¹é…æ—¶ä¼šæœ‰å¾ˆå¤šéå†æ¥åŒ¹é…ã€‚ åº”ç”¨è§„åˆ™æ¶‰åŠåˆ°æ¯”è¾ƒå¤æ‚çš„å±‚çº§è§„åˆ™ã€‚ ä¸‹é¢æ¥è¯´ä¸‹å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ å…±äº« style æ•°æ®WebKit çš„ nodes æ˜¯ style objectsï¼ˆRenderStyleï¼‰ï¼Œè¿™äº› objects å¯ä»¥è¢« nodes åœ¨æŸäº›æƒ…å†µä¸‹å…±äº«ï¼Œè¿™äº› nodes å¯ä»¥æ˜¯å…„å¼ŸèŠ‚ç‚¹æˆ–è¡¨å…„å¼ŸèŠ‚ç‚¹ã€‚æœ‰ä¸‹é¢è¿™äº›æƒ…å†µæ˜¯å¯ä»¥ style å…±äº«çš„ element å¿…é¡»æœ‰ç›¸åŒçš„é¼ æ ‡çŠ¶æ€ éƒ½æ²¡æœ‰ id tag åèƒ½åŒ¹é…ä¸Š class å±æ€§èƒ½åŒ¹é…ä¸Š ä¸€ç»„æ˜ å°„çš„å±æ€§æ˜¯ç›¸åŒçš„ é“¾æ¥çŠ¶æ€èƒ½åŒ¹é…ä¸Š focus çŠ¶æ€èƒ½åŒ¹é…ä¸Š ä»»ä½• element éƒ½ä¸ä¼šè¢«å±æ€§ selectors å½±å“ elements ä¸èƒ½æœ‰ inline style å±æ€§ ä¸è¦ä½¿ç”¨å…„å¼Ÿ selectors Rule treeWebKit ä¼šæŠŠ style objects å’Œ DOM çš„ node ç›¸å…³è”ã€‚é€šè¿‡æ­£ç¡®çš„é¡ºåºå°†æ‰€æœ‰é€»è¾‘è§„åˆ™å€¼è½¬æˆè®¡ç®—å€¼ï¼Œæ¯”å¦‚ç™¾åˆ†æ¯”ä¼šè¢«è½¬æ¢æˆç»å¯¹å•ä½ï¼Œrule tree å¯ä»¥ä½¿èŠ‚ç‚¹ä¹‹é—´å…±äº«è¿™äº›å€¼ï¼Œé¿å…å¤šæ¬¡è®¡ç®—ï¼ŒåŒæ—¶èŠ‚çœå†…å­˜ã€‚æ‰€æœ‰åŒ¹é…çš„è§„åˆ™éƒ½ä¼šå­˜åœ¨ä¸€ä¸ª tree é‡Œã€‚tree çš„æœ€ä¸‹é¢çš„ node æœ‰ç€æœ€é«˜çš„ä¼˜å…ˆçº§ã€‚Rule tree æ˜¯å½“ node style éœ€è¦çš„æ—¶å€™æ‰ä¼šå»æ ¹æ®è§„åˆ™è®¡ç®—çš„ã€‚ é€šè¿‡ä¸Šå›¾çœ‹çœ‹è®¾ç½® rule tree çš„å¥½å¤„å§ï¼Œå¦‚æœæˆ‘ä»¬è¦æ‰¾åˆ° B - E - I çš„è§„åˆ™æˆ‘ä»¬èƒ½å¤Ÿçœæ‰å¾ˆå¤šå·¥ä½œï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»è®¡ç®—äº† A - B - E - Iã€‚ å¯ç¡®å®šæ ·å¼åˆ†åˆ°å„ä¸ª structs é‡Œä¸€äº›æ ·å¼çš„ä¿¡æ¯æ˜¯å¯ä»¥ä¸€å¼€å§‹å°±ç¡®å®šçš„ï¼Œæ¯”å¦‚ border å’Œ colorã€‚æ‰€æœ‰å±æ€§åˆ†ä¸ºå¯ç»§æ‰¿å’Œä¸å¯ç»§æ‰¿ä¸¤ç§ï¼Œå¦‚æœæ˜¯éœ€è¦ç»§æ‰¿éœ€è¦ç‰¹åˆ«æŒ‡å®šï¼Œé»˜è®¤éƒ½æ˜¯ä¸å¯ç»§æ‰¿çš„ã€‚ rule tree å¸®ç€æˆ‘ä»¬ç¼“å­˜å…¨éƒ¨çš„ structsï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¦‚æœä¸‹é¢çš„ node æ²¡æœ‰å¯ç”¨çš„ structï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸Šä¸€çº§ node çš„ç¼“å­˜é‡Œçš„æ¥ç”¨ã€‚ ä½¿ç”¨ rule tree è®¡ç®— style contextså½“ç¡®å®šè¦ä¸ºæŸä¸ª element è®¡ç®— style context æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆè®¡ç®— rule tree çš„è·¯å¾„æˆ–è€…ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ã€‚æ¥ç€æˆ‘ä»¬å¼€å§‹åœ¨æˆ‘ä»¬æ–°çš„ style context é‡Œåº”ç”¨è·¯å¾„é‡Œçš„è§„åˆ™å»å¡«å…… structsã€‚ ä»è·¯å¾„ä¸‹é¢çš„ node å¼€å§‹ï¼Œç„¶åå¾€ä¸Šç›´åˆ° struct å®Œæˆã€‚å¦‚æœ struct æ²¡æœ‰ç¬¦åˆçš„ rule nodeï¼Œé‚£ä¹ˆå¾€ rule tree ä¸Šé¢ node æ‰¾ï¼ŒçŸ¥é“æ‰¾åˆ°å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè¿™æ ·å°±æ˜¯è¢«ä¼˜åŒ–äº†ï¼Œæ•´ä¸ª struct éƒ½æ˜¯å…±äº«çš„ã€‚ å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªä¸ºè¿™ä¸ª struct çš„ rule node å®šä¹‰ï¼Œé‚£ä¹ˆå…ˆæ£€æŸ¥æ˜¯å¦æ˜¯å¯ç»§æ‰¿çš„ï¼Œå¦‚æœæ˜¯å°±ä½¿ç”¨çˆ¶ struct çš„ contextã€‚å¦‚æœè¿™ä¸ªæ¡ä»¶ä¹Ÿæ²¡æ»¡è¶³é‚£ä¹ˆå°±ä½¿ç”¨é»˜è®¤çš„å€¼ã€‚ å¦‚æœä¸€ä¸ª element æœ‰å…„å¼ŸèŠ‚ç‚¹æŒ‡å‘ç›¸åŒçš„ tree nodeï¼Œé‚£ä¹ˆå…¨éƒ¨ style context å¯ä»¥è¢«å…±äº«ã€‚ çœ‹ä¸ªä¾‹å­ 123456789101112&lt;html&gt; &lt;body&gt; &lt;div class=\"err\" id=\"div1\"&gt; &lt;p&gt; this is a &lt;span class=\"big\"&gt; big error &lt;/span&gt; this is also a &lt;span class=\"big\"&gt; very big error&lt;/span&gt; error &lt;/p&gt; &lt;/div&gt; &lt;div class=\"err\" id=\"div2\"&gt;another error&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ä¸‹é¢æ˜¯ CSS çš„å®šä¹‰ 123456div {margin:5px;color:black}.err {color:red}.big {margin-top:3px}div span {margin-bottom:4px}#div1 {color:blue}#div2 {color:green} è¿™é‡Œæœ‰ä¸¤ä¸ª structs éœ€è¦å¡«å……ï¼Œ color struct å’Œ margin structã€‚color struct åªåŒ…å«ä¸€ä¸ªå€¼ï¼Œ margin struct æœ‰å››ä¸ªã€‚ä¸‹é¢æ˜¯ rule tree context treeï¼š å‡è®¾åˆ°ç¬¬äºŒä¸ª div æ ‡ç­¾æ—¶ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ª style context ç»™è¿™ä¸ª node å¹¶ä¸”å¡«å…… style structã€‚æˆ‘ä»¬æ‰¾åˆ° 1ï¼Œ2å’Œ6è¿™ä¸ª rule æ˜¯æ»¡è¶³çš„ï¼Œè€Œä¸”åœ¨ rule tree é‡Œå·²ç»å­˜åœ¨äº†ä¸€ä¸ªè¿™æ ·çš„è·¯å¾„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠ F æ·»åŠ åˆ°è¿™ä¸ª node é‡Œã€‚è¿™æ ·å½¢æˆä¸€ä¸ª context tree æ¥ä¿å­˜è¿™äº›å¯¹åº”å…³ç³»ã€‚ ç°åœ¨éœ€è¦å¡«å…… style structï¼Œå…ˆä» margin struct å¼€å§‹ï¼Œæ¯”å¦‚ rule tree é‡Œæœ€å node F æ²¡æœ‰æ·»åŠ åˆ° margin struct é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å¾€ rule tree çš„ä¸Šé¢æ‰¾ï¼Œæ‰¾åˆ°å¹¶ä¸”ä½¿ç”¨ä¹‹ï¼Œæœ€åæˆ‘ä»¬æ‰¾åˆ° node B è¿™ä¸ªæ˜¯æœ€è¿‘çš„ä¸€ä¸ªæœ‰ margin struct çš„ nodeã€‚ å·²ç»å®šä¹‰äº† color structï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä½¿ç”¨ç¼“å­˜çš„ structï¼Œè¿™æ ·å°±ä¸ç”¨å¾€ rule tree ä¸Šçº§ node å»æ‰¾ï¼Œæ¥ç€å°±æŠŠå€¼è½¬æˆ RGB ä»€ä¹ˆçš„å¹¶ä¸”ç¼“å­˜åˆ°è¿™ä¸ª node é‡Œã€‚ å¯¹äºç¬¬äºŒä¸ª span elementï¼Œå®ƒä¼šæŒ‡å‘ rule Gï¼Œå°±åƒå‰ä¸€ä¸ª span ä¸€æ ·ã€‚å¦‚æœå…„å¼Ÿ node éƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ª rule nodeï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯å¯ä»¥å…±äº«æ•´ä¸ª style context çš„ã€‚ å¦‚æœæ˜¯ç»§æ‰¿çš„ struct ä¼šåœ¨ context tree ä¸Šè¿›è¡Œç¼“å­˜ï¼Œcolor å±æ€§æ˜¯å¯ç»§æ‰¿çš„ã€‚ æ¯”è¾ƒå®¹æ˜“åŒ¹é…çš„ rulesä¸‹é¢æ˜¯ä¸åŒçš„ style rules çš„æ¥æºï¼š CSS rulesï¼Œæ¥è‡ªäº style sheets æˆ–è€…åœ¨ style elements é‡Œ 1p {color:blue} Inline style å±æ€§ 1&lt;p style=\"color:blue\" /&gt; HTML è§†è§‰å±æ€§ 1&lt;p bgcolor=\"blue\"&gt; åé¢ä¸¤ä¸ªå±äºå®¹æ˜“åŒ¹é… elementï¼Œå¯ä»¥ä½¿ç”¨ element ä½œä¸º map çš„ keyã€‚è§£æ style sheet åï¼Œé€šè¿‡ selector rules ä¼šæ·»åŠ ä¸€äº› has mapsã€‚æœ‰ id çš„ mapï¼Œæœ‰ class name çš„ mapï¼Œè¿˜æœ‰ tag name çš„ mapã€‚å¦‚æœ selector æ˜¯ id é‚£ä¹ˆ rule ä¼šæ·»åŠ åˆ° id map é‡Œã€‚ å¦‚æœæ˜¯ class name é‚£ä¹ˆä¼šæ·»åŠ åˆ° class map é‡Œã€‚ è¿™ä¸ªæ“ä½œæ›´å®¹æ˜“åŒ¹é… ruleã€‚å®Œå…¨æ²¡å¿…è¦å»æŸ¥æ‰¾æ¯ä¸ªå£°æ˜ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¯¹åº”çš„ element çš„ map é‡Œæå–ç›¸å…³çš„ ruleã€‚ ä¸‹é¢ä¸¾ä¸ªä¾‹å­ 123p.error {color:red}#messageDiv {height:50px}div {margin:5px} ç¬¬ä¸€ä¸ª rule ä¼šè¢«åŠ åˆ° class map é‡Œã€‚ç¬¬äºŒä¸ªä¼šåŠ å…¥åˆ° id map é‡Œï¼Œç¬¬ä¸‰ä¸ªä¼šè¢«æ·»åŠ åˆ° tag map é‡Œã€‚ å¯¹äºä¸‹é¢çš„ HTML 12&lt;p class=\"error\"&gt;an error occurred &lt;/p&gt;&lt;div id=\" messageDiv\"&gt;this is a message&lt;/div&gt; æˆ‘ä»¬ä¼šå…ˆè¯•ç€æ‰¾ p è¿™ä¸ª element çš„ rulesï¼Œåœ¨ class map é‡Œèƒ½æ‰¾åˆ° error è¿™ä¸ª key é‡Œæœ‰ rule p.errorã€‚div è¿™ä¸ª element å¯ä»¥åœ¨ id map å’Œ tag map é‡Œæ‰¾åˆ°ã€‚ä¸‹é¢çœ‹çœ‹ div çš„è¿™ä¸ª rule 1table div {margin:5px} selector éƒ½æ˜¯ä»å³åˆ°å·¦æ¥æŸ¥æ‰¾çš„ï¼Œå…ˆåœ¨ tag map é‡Œæ‰¾ divï¼Œç„¶åå†çœ‹çœ‹å·¦è¾¹æ˜¯ table tagï¼Œæ‰€ä»¥ä¸å»åˆã€‚ Style sheet çš„ cascade æ’åºä¸€ä¸ª style å±æ€§å¯ä»¥è¢«å®šä¹‰åœ¨å¤šä¸ª style sheets é‡Œï¼Œé‚£ä¹ˆåº”ç”¨ rules çš„é¡ºåºå°±æ˜¾å¾—éå¸¸çš„é‡è¦ï¼Œåœ¨ CSS çš„å®šä¹‰é‡ŒæŠŠè¿™ä¸ªé¡ºåºå«åš cascade æ’åºï¼Œæ„æ€æ˜¯ä»ä½åˆ°é«˜ã€‚ æµè§ˆå™¨çš„è®¾ç½® ç”¨æˆ·çš„è®¾ç½® ç½‘é¡µé‡Œæ™®é€šçš„è®¾ç½® ç½‘é¡µé‡Œé‡è¦çš„è®¾ç½® ç”¨æˆ·é‡è¦çš„è®¾ç½® CSS specificationselector çš„ specifity åœ¨ w3c é‡Œæœ‰å®šä¹‰ https://www.w3.org/TR/CSS2/cascade.html#specificity è®¡ç®—æ–¹æ³•å¦‚ä¸‹ style attribute æ•°é‡ =a ID attribute æ•°é‡ =b å…¶å®ƒçš„ attribute å’Œ pseudo-classes æ•°é‡ =c element names å’Œ pseudo-element æ•°é‡ =d ä¸¾ä¸ªä¾‹å­ 12345678910111213141516171819 * {} /* a=0 b=0 c=0 d=0 -&gt; specificity = 0,0,0,0 */ li {} /* a=0 b=0 c=0 d=1 -&gt; specificity = 0,0,0,1 */ li:first-line {} /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */ ul li {} /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */ ul ol+li {} /* a=0 b=0 c=0 d=3 -&gt; specificity = 0,0,0,3 */ h1 + *[rel=up]{} /* a=0 b=0 c=1 d=1 -&gt; specificity = 0,0,1,1 */ ul ol li.red {} /* a=0 b=0 c=1 d=3 -&gt; specificity = 0,0,1,3 */ li.red.level {} /* a=0 b=0 c=2 d=1 -&gt; specificity = 0,0,2,1 */ #x34y {} /* a=0 b=1 c=0 d=0 -&gt; specificity = 0,1,0,0 */ style=\"\" /* a=1 b=0 c=0 d=0 -&gt; specificity = 1,0,0,0 */&lt;HEAD&gt;&lt;STYLE type=\"text/css\"&gt; #x97z { color: red }&lt;/STYLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;P ID=x97z style=\"color: green\"&gt;&lt;/BODY&gt; ä»ä¾‹å­å¯ä»¥çœ‹å‡º p element çš„ color ä¼šæ˜¯ greenï¼Œå› ä¸º style attribute ä¼šè¦†ç›– Style element é‡Œçš„è®¾ç½®ï¼Œå› ä¸ºå®ƒæœ‰æ›´é«˜çš„ specificityã€‚ Rules æ’åºè¿™äº› rules åŒ¹é…åå°±éœ€è¦å¯¹å…¶æ’åºäº†ï¼ŒWebKit ä½¿ç”¨çš„æ˜¯å†’æ³¡æ’åºï¼Œé€šè¿‡é‡å†™ &gt; æ“ä½œç¬¦ 123456static bool operator &gt;(CSSRuleData&amp; r1, CSSRuleData&amp; r2){ int spec1 = r1.selector()-&gt;specificity(); int spec2 = r2.selector()-&gt;specificity(); return (spec1 == spec2) : r1.position() &gt; r2.position() : spec1 &gt; spec2; } Layout å¸ƒå±€å½“ renderer åˆ›å»ºå®Œå¹¶æ·»åŠ åˆ° tree é‡Œæ—¶æ˜¯æ²¡æœ‰ä½ç½®å’Œé«˜è¿™äº›ä¿¡æ¯çš„ï¼Œéœ€è¦è®¡ç®—ï¼ŒWebKit è®¡ç®—ä½ç½®å¤§å°ç­‰ä¿¡æ¯çš„è¿‡ç¨‹ç§°ä¸ºå¸ƒå±€è®¡ç®—ã€‚ HTML ä½¿ç”¨çš„æ˜¯æµå¼å¸ƒå±€æ¨¡å‹ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºå¤§å¤šæ•°æƒ…å†µä¸€æ¬¡å°±å¯ä»¥æŒ‰ç…§ä»å·¦åˆ°å³ä»é¡¶åˆ°åº•ç®—å‡ºå¸ƒå±€éœ€è¦çš„å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ HTML tables éœ€è¦çš„æ¬¡æ•°å¯èƒ½ä¸ä»…ä¸€æ¬¡ã€‚ Layout æ˜¯ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œä»¥ FrameView::layout ä¸ºèµ·å§‹ï¼Œè°ƒç”¨ Render Tree æ ¹èŠ‚ç‚¹çš„ layoutï¼Œå¯¹åº” HTML é‡Œçš„ elementï¼ŒLayout æŒç»­é€’å½’ frame hierarchy è®¡ç®—æ¯ä¸ª renderer çš„å‡ ä½•ä¿¡æ¯ã€‚root çš„ position æ˜¯0,0ï¼ŒæŠŠæµè§ˆå™¨é‡Œå¯è§çš„éƒ¨åˆ†å°ºå¯¸å«åš viewportã€‚æ¯ä¸ª renderer éƒ½æœ‰ layout æˆ– reflow æ–¹æ³•ï¼Œæ¯ä¸ª renderer éƒ½ä¼šå»è°ƒç”¨å­è§†å›¾çš„ layout æ–¹æ³•ã€‚FrameView::layout å¯ä»¥è¢«å¸ƒå±€ WebViewCore::layout æ–¹æ³•è§¦å‘ã€‚ Layout å¤„ç†è¿‡ç¨‹å®Œæˆä¸Šé¢é‚£äº›è¿‡ç¨‹åå°±ä¼šå¼€å§‹å¸ƒå±€ï¼Œä¸Šé¢çš„è¿‡ç¨‹è¾¾åˆ°å¼€å§‹å¸ƒå±€ FrameView::layout çš„æ–¹æ³•å †æ ˆå¦‚ä¸‹ 12345678910111213141516FrameView:: layout( bool allowSubtree) // æ ˆ é¡¶ Document:: implicitClose() FrameLoader:: checkCallImplicitClose() FrameLoader:: checkCompleted() FrameLoader:: finishedParsing() Document:: finishedParsing() HTMLParser:: finished() HTMLTokenizer:: end() HTMLTokenizer:: finish() Document:: finishParsing() FrameLoader:: endIfNotLoadingMainResource() FrameLoader:: end() DocumentLoader:: finishedLoading() FrameLoader:: finishedLoading() MainResourceLoader:: didFinishLoading() ResourceLoader:: didFinishLoading( WebCore:: ResourceHandle * h) layout ä¼šå…ˆæš‚åœ layout å®šæ—¶å™¨çš„å®ç°ï¼Œç„¶åæ›´æ–°æ ·å¼ï¼Œè·å–åˆ° RenderView ç„¶åè°ƒç”¨å®ƒçš„ layout æ–¹æ³•å¼€å§‹å¸ƒå±€ï¼Œå…·ä½“ç›¸å…³çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313void FrameView::layout(bool allowSubtree){ ASSERT_WITH_SECURITY_IMPLICATION(!frame().document()-&gt;inRenderTreeUpdate()); LOG(Layout, &quot;FrameView %p (%dx%d) layout, main frameview %d, allowSubtree=%d&quot;, this, size().width(), size().height(), frame().isMainFrame(), allowSubtree); //åˆ¤æ–­æ˜¯å¦å·²åœ¨ layout è¿‡ç¨‹ä¸­ï¼Œé¿å…å¤šæ¬¡ layout if (isInRenderTreeLayout()) { LOG(Layout, &quot; in layout, bailing&quot;); return; } if (layoutDisallowed()) { LOG(Layout, &quot; layout is disallowed, bailing&quot;); return; } // Protect the view from being deleted during layout (in recalcStyle). Ref&lt;FrameView&gt; protectedThis(*this); // Many of the tasks performed during layout can cause this function to be re-entered, // so save the layout phase now and restore it on exit. SetForScope&lt;LayoutPhase&gt; layoutPhaseRestorer(m_layoutPhase, InPreLayout); // Every scroll that happens during layout is programmatic. SetForScope&lt;bool&gt; changeInProgrammaticScroll(m_inProgrammaticScroll, true); bool inChildFrameLayoutWithFrameFlattening = isInChildFrameWithFrameFlattening(); if (inChildFrameLayoutWithFrameFlattening) { if (!m_frameFlatteningViewSizeForMediaQuery) { LOG_WITH_STREAM(MediaQueries, stream &lt;&lt; &quot;FrameView &quot; &lt;&lt; this &lt;&lt; &quot; snapshotting size &quot; &lt;&lt; ScrollView::layoutSize() &lt;&lt; &quot; for media queries&quot;); m_frameFlatteningViewSizeForMediaQuery = ScrollView::layoutSize(); } startLayoutAtMainFrameViewIfNeeded(allowSubtree); //è·å– rootã€‚è¿™ä¸ª root å°±æ˜¯ RenderView å¯¹è±¡ RenderElement* root = m_layoutRoot ? m_layoutRoot : frame().document()-&gt;renderView(); if (!root || !root-&gt;needsLayout()) return; } TraceScope tracingScope(LayoutStart, LayoutEnd);#if PLATFORM(IOS) if (updateFixedPositionLayoutRect()) allowSubtree = false;#endif //ä¹Ÿæ˜¯é¿å…å¤šæ¬¡è§¦å‘ï¼Œä¼šæŠŠ layoutTimer å…ˆåœæ­¢ m_layoutTimer.stop(); m_delayedLayout = false; m_setNeedsLayoutWasDeferred = false; //æˆ‘ä»¬ä¸åº”è¯¥åœ¨ painting æ—¶è¿›å…¥ layout ASSERT(!isPainting()); if (isPainting()) return; InspectorInstrumentationCookie cookie = InspectorInstrumentation::willLayout(frame()); AnimationUpdateBlock animationUpdateBlock(&amp;frame().animation()); if (!allowSubtree &amp;&amp; m_layoutRoot) convertSubtreeLayoutToFullLayout(); ASSERT(frame().view() == this); ASSERT(frame().document()); Document&amp; document = *frame().document(); ASSERT(document.pageCacheState() == Document::NotInPageCache); //å¯¹æ ·å¼å…ˆè¿›è¡Œæ›´æ–° { SetForScope&lt;bool&gt; changeSchedulingEnabled(m_layoutSchedulingEnabled, false); if (!m_nestedLayoutCount &amp;&amp; !m_inSynchronousPostLayout &amp;&amp; m_postLayoutTasksTimer.isActive() &amp;&amp; !inChildFrameLayoutWithFrameFlattening) { // This is a new top-level layout. If there are any remaining tasks from the previous // layout, finish them now. SetForScope&lt;bool&gt; inSynchronousPostLayoutChange(m_inSynchronousPostLayout, true); performPostLayoutTasks(); } m_layoutPhase = InPreLayoutStyleUpdate; // Viewport-dependent media queries may cause us to need completely different style information. auto* styleResolver = document.styleScope().resolverIfExists(); if (!styleResolver || styleResolver-&gt;hasMediaQueriesAffectedByViewportChange()) { LOG(Layout, &quot; hasMediaQueriesAffectedByViewportChange, enqueueing style recalc&quot;); document.styleScope().didChangeStyleSheetEnvironment(); // FIXME: This instrumentation event is not strictly accurate since cached media query results do not persist across StyleResolver rebuilds. InspectorInstrumentation::mediaQueryResultChanged(document); } document.evaluateMediaQueryList(); // If there is any pagination to apply, it will affect the RenderView&apos;s style, so we should // take care of that now. applyPaginationToViewport(); // Always ensure our style info is up-to-date. This can happen in situations where // the layout beats any sort of style recalc update that needs to occur. document.updateStyleIfNeeded(); // If there is only one ref to this view left, then its going to be destroyed as soon as we exit, // so there&apos;s no point to continuing to layout if (hasOneRef()) return; // Close block here so we can set up the font cache purge preventer, which we will still // want in scope even after we want m_layoutSchedulingEnabled to be restored again. // The next block sets m_layoutSchedulingEnabled back to false once again. } m_layoutPhase = InPreLayout; RenderLayer* layer = nullptr; bool subtree = false; RenderElement* root = nullptr; ++m_nestedLayoutCount; { SetForScope&lt;bool&gt; changeSchedulingEnabled(m_layoutSchedulingEnabled, false); autoSizeIfEnabled(); //é‡æ–°è®¾ç½® RenderView å¯¹è±¡ï¼Œå‡†å¤‡å¼€å§‹ layout root = m_layoutRoot ? m_layoutRoot : document.renderView(); if (!root) return; subtree = m_layoutRoot; if (!m_layoutRoot) { auto* body = document.bodyOrFrameset(); if (body &amp;&amp; body-&gt;renderer()) { if (is&lt;HTMLFrameSetElement&gt;(*body) &amp;&amp; !frameFlatteningEnabled()) { body-&gt;renderer()-&gt;setChildNeedsLayout(); } else if (is&lt;HTMLBodyElement&gt;(*body)) { if (!m_firstLayout &amp;&amp; m_size.height() != layoutHeight() &amp;&amp; body-&gt;renderer()-&gt;enclosingBox().stretchesToViewport()) body-&gt;renderer()-&gt;setChildNeedsLayout(); } }#if !LOG_DISABLED if (m_firstLayout &amp;&amp; !frame().ownerElement()) LOG(Layout, &quot;FrameView %p elapsed time before first layout: %.3fs\\n&quot;, this, document.timeSinceDocumentCreation().value());#endif } m_needsFullRepaint = !subtree &amp;&amp; (m_firstLayout || downcast&lt;RenderView&gt;(*root).printing()); if (!subtree) { ScrollbarMode hMode; ScrollbarMode vMode; calculateScrollbarModesForLayout(hMode, vMode); if (m_firstLayout || (hMode != horizontalScrollbarMode() || vMode != verticalScrollbarMode())) { if (m_firstLayout) { setScrollbarsSuppressed(true); m_firstLayout = false; m_firstLayoutCallbackPending = true; m_lastViewportSize = sizeForResizeEvent(); m_lastZoomFactor = root-&gt;style().zoom(); // Set the initial vMode to AlwaysOn if we&apos;re auto. if (vMode == ScrollbarAuto) setVerticalScrollbarMode(ScrollbarAlwaysOn); // This causes a vertical scrollbar to appear. // Set the initial hMode to AlwaysOff if we&apos;re auto. if (hMode == ScrollbarAuto) setHorizontalScrollbarMode(ScrollbarAlwaysOff); // This causes a horizontal scrollbar to disappear. Page* page = frame().page(); if (page &amp;&amp; page-&gt;expectsWheelEventTriggers()) scrollAnimator().setWheelEventTestTrigger(page-&gt;testTrigger()); setScrollbarModes(hMode, vMode); setScrollbarsSuppressed(false, true); } else setScrollbarModes(hMode, vMode); } LayoutSize oldSize = m_size; m_size = layoutSize(); if (oldSize != m_size) { LOG(Layout, &quot; layout size changed from %.3fx%.3f to %.3fx%.3f&quot;, oldSize.width().toFloat(), oldSize.height().toFloat(), m_size.width().toFloat(), m_size.height().toFloat()); m_needsFullRepaint = true; if (!m_firstLayout) { RenderBox* rootRenderer = document.documentElement() ? document.documentElement()-&gt;renderBox() : nullptr; auto* body = document.bodyOrFrameset(); RenderBox* bodyRenderer = rootRenderer &amp;&amp; body ? body-&gt;renderBox() : nullptr; if (bodyRenderer &amp;&amp; bodyRenderer-&gt;stretchesToViewport()) bodyRenderer-&gt;setChildNeedsLayout(); else if (rootRenderer &amp;&amp; rootRenderer-&gt;stretchesToViewport()) rootRenderer-&gt;setChildNeedsLayout(); } } m_layoutPhase = InPreLayout; } layer = root-&gt;enclosingLayer(); SubtreeLayoutStateMaintainer subtreeLayoutStateMaintainer(m_layoutRoot); RenderView::RepaintRegionAccumulator repaintRegionAccumulator(&amp;root-&gt;view()); ASSERT(m_layoutPhase == InPreLayout); m_layoutPhase = InRenderTreeLayout; forceLayoutParentViewIfNeeded(); ASSERT(m_layoutPhase == InRenderTreeLayout);#ifndef NDEBUG RenderTreeNeedsLayoutChecker checker(*root);#endif //ä» RenderView è¿™ä¸ªæ ¹çº§å¼€å§‹è¿›è¡Œ layoutã€‚ root-&gt;layout(); ASSERT(!root-&gt;view().renderTreeIsBeingMutatedInternally());#if ENABLE(TEXT_AUTOSIZING) if (frame().settings().textAutosizingEnabled() &amp;&amp; !root-&gt;view().printing()) { float minimumZoomFontSize = frame().settings().minimumZoomFontSize(); float textAutosizingWidth = frame().page() ? frame().page()-&gt;textAutosizingWidth() : 0; if (int overrideWidth = frame().settings().textAutosizingWindowSizeOverride().width()) textAutosizingWidth = overrideWidth; LOG(TextAutosizing, &quot;Text Autosizing: minimumZoomFontSize=%.2f textAutosizingWidth=%.2f&quot;, minimumZoomFontSize, textAutosizingWidth); if (minimumZoomFontSize &amp;&amp; textAutosizingWidth) { root-&gt;adjustComputedFontSizesOnBlocks(minimumZoomFontSize, textAutosizingWidth); if (root-&gt;needsLayout()) root-&gt;layout(); } }#endif ASSERT(m_layoutPhase == InRenderTreeLayout); m_layoutRoot = nullptr; // Close block here to end the scope of changeSchedulingEnabled and SubtreeLayoutStateMaintainer. } m_layoutPhase = InViewSizeAdjust; bool neededFullRepaint = m_needsFullRepaint; if (!subtree &amp;&amp; !downcast&lt;RenderView&gt;(*root).printing()) { adjustViewSize(); // FIXME: Firing media query callbacks synchronously on nested frames could produced a detached FrameView here by // navigating away from the current document (see webkit.org/b/173329). if (hasOneRef()) return; } m_layoutPhase = InPostLayout; m_needsFullRepaint = neededFullRepaint; // Now update the positions of all layers. if (m_needsFullRepaint) root-&gt;view().repaintRootContents(); root-&gt;view().releaseProtectedRenderWidgets(); ASSERT(!root-&gt;needsLayout()); layer-&gt;updateLayerPositionsAfterLayout(renderView()-&gt;layer(), updateLayerPositionFlags(layer, subtree, m_needsFullRepaint)); updateCompositingLayersAfterLayout(); m_layoutPhase = InPostLayerPositionsUpdatedAfterLayout; m_layoutCount++;#if PLATFORM(COCOA) || PLATFORM(WIN) || PLATFORM(GTK) if (AXObjectCache* cache = root-&gt;document().existingAXObjectCache()) cache-&gt;postNotification(root, AXObjectCache::AXLayoutComplete);#endif#if ENABLE(DASHBOARD_SUPPORT) updateAnnotatedRegions();#endif#if ENABLE(IOS_TOUCH_EVENTS) document.setTouchEventRegionsNeedUpdate();#endif updateCanBlitOnScrollRecursively(); handleDeferredScrollUpdateAfterContentSizeChange(); handleDeferredScrollbarsUpdateAfterDirectionChange(); if (document.hasListenerType(Document::OVERFLOWCHANGED_LISTENER)) updateOverflowStatus(layoutWidth() &lt; contentsWidth(), layoutHeight() &lt; contentsHeight()); frame().document()-&gt;markers().invalidateRectsForAllMarkers(); if (!m_postLayoutTasksTimer.isActive()) { if (!m_inSynchronousPostLayout) { if (inChildFrameLayoutWithFrameFlattening) updateWidgetPositions(); else { SetForScope&lt;bool&gt; inSynchronousPostLayoutChange(m_inSynchronousPostLayout, true); performPostLayoutTasks(); // Calls resumeScheduledEvents(). } } if (!m_postLayoutTasksTimer.isActive() &amp;&amp; (needsLayout() || m_inSynchronousPostLayout || inChildFrameLayoutWithFrameFlattening)) { // If we need layout or are already in a synchronous call to postLayoutTasks(), // defer widget updates and event dispatch until after we return. postLayoutTasks() // can make us need to update again, and we can get stuck in a nasty cycle unless // we call it through the timer here. m_postLayoutTasksTimer.startOneShot(0_s); } if (needsLayout()) layout(); } InspectorInstrumentation::didLayout(cookie, *root); DebugPageOverlays::didLayout(frame()); --m_nestedLayoutCount;} RenderView çš„ layout é‡Œä¼šè°ƒç”¨ layoutContent æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„å®ç°å¦‚ä¸‹ï¼š 123456789101112void RenderView::layoutContent(const LayoutState&amp; state){ UNUSED_PARAM(state); ASSERT(needsLayout()); RenderBlockFlow::layout(); if (hasRenderNamedFlowThreads()) flowThreadController().layoutRenderNamedFlowThreads();#ifndef NDEBUG checkLayoutState(state);#endif} å¯ä»¥å‘ç°è¿™ä¸ªæ–¹æ³•å®ç°å¾ˆç®€å•ï¼Œé‡Œé¢ä¸»è¦æ˜¯é€šè¿‡ RenderBlockFlow æ¥è¿›è¡Œ layout çš„ã€‚RenderBlockFlow æ˜¯ RenderBlock çš„å­ç±»ï¼Œlayout æ–¹æ³•æ˜¯åœ¨ RenderBlock é‡Œå®ç°ï¼Œé‡Œé¢ç›´æ¥è°ƒäº† layoutBlock æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ RenderBlockFlow é‡Œé‡è½½å®ç°çš„ã€‚ä¸‹é¢çœ‹çœ‹ RenderBlockFlow çš„å®ç°å§ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157void RenderBlockFlow::layoutBlock(bool relayoutChildren, LayoutUnit pageLogicalHeight){ ASSERT(needsLayout()); //å½“ä¸éœ€è¦å¸ƒå±€å­èŠ‚ç‚¹åŒæ—¶èƒ½ simplifiedLayout é‡æ–°å¸ƒå±€æˆåŠŸ if (!relayoutChildren &amp;&amp; simplifiedLayout()) return; LayoutRepainter repainter(*this, checkForRepaintDuringLayout()); //é‡æ–°è®¡ç®—é€»è¾‘å®½åº¦ if (recomputeLogicalWidthAndColumnWidth()) relayoutChildren = true; rebuildFloatingObjectSetFromIntrudingFloats(); //å…ˆä¿ç•™ä¸€ä»½ä»¥å‰çš„é«˜åº¦ä¸ºåé¢åšå¯¹æ¯”ç”¨ LayoutUnit previousHeight = logicalHeight(); // FIXME: should this start out as borderAndPaddingLogicalHeight() + scrollbarLogicalHeight(), // for consistency with other render classes? //ç„¶åå°† logicalHeight è®¾ç½®ä¸º 0ï¼Œé¿å…ç´¯åŠ ä»¥å‰çš„ã€‚ setLogicalHeight(0); bool pageLogicalHeightChanged = false; checkForPaginationLogicalHeightChange(relayoutChildren, pageLogicalHeight, pageLogicalHeightChanged); const RenderStyle&amp; styleToUse = style(); LayoutStateMaintainer statePusher(view(), *this, locationOffset(), hasTransform() || hasReflection() || styleToUse.isFlippedBlocksWritingMode(), pageLogicalHeight, pageLogicalHeightChanged); preparePaginationBeforeBlockLayout(relayoutChildren); if (!relayoutChildren) relayoutChildren = namedFlowFragmentNeedsUpdate(); // We use four values, maxTopPos, maxTopNeg, maxBottomPos, and maxBottomNeg, to track // our current maximal positive and negative margins. These values are used when we // are collapsed with adjacent blocks, so for example, if you have block A and B // collapsing together, then you&apos;d take the maximal positive margin from both A and B // and subtract it from the maximal negative margin from both A and B to get the // true collapsed margin. This algorithm is recursive, so when we finish layout() // our block knows its current maximal positive/negative values. // // Start out by setting our margin values to our current margins. Table cells have // no margins, so we don&apos;t fill in the values for table cells. bool isCell = isTableCell(); if (!isCell) { initMaxMarginValues(); setHasMarginBeforeQuirk(styleToUse.hasMarginBeforeQuirk()); setHasMarginAfterQuirk(styleToUse.hasMarginAfterQuirk()); setPaginationStrut(0); } LayoutUnit repaintLogicalTop = 0; LayoutUnit repaintLogicalBottom = 0; LayoutUnit maxFloatLogicalBottom = 0; if (!firstChild() &amp;&amp; !isAnonymousBlock()) setChildrenInline(true); //Inline å’Œ Block çš„ä¸åŒå¸ƒå±€å¤„ç† if (childrenInline()) layoutInlineChildren(relayoutChildren, repaintLogicalTop, repaintLogicalBottom); else layoutBlockChildren(relayoutChildren, maxFloatLogicalBottom); // Expand our intrinsic height to encompass floats. LayoutUnit toAdd = borderAndPaddingAfter() + scrollbarLogicalHeight(); if (lowestFloatLogicalBottom() &gt; (logicalHeight() - toAdd) &amp;&amp; createsNewFormattingContext()) setLogicalHeight(lowestFloatLogicalBottom() + toAdd); if (relayoutForPagination(statePusher) || relayoutToAvoidWidows(statePusher)) { ASSERT(!shouldBreakAtLineToAvoidWidow()); return; } // Calculate our new height. è®¡ç®—æ–°é«˜ LayoutUnit oldHeight = logicalHeight(); LayoutUnit oldClientAfterEdge = clientLogicalBottom(); // Before updating the final size of the flow thread make sure a forced break is applied after the content. // This ensures the size information is correctly computed for the last auto-height region receiving content. if (is&lt;RenderFlowThread&gt;(*this)) downcast&lt;RenderFlowThread&gt;(*this).applyBreakAfterContent(oldClientAfterEdge); updateLogicalHeight(); LayoutUnit newHeight = logicalHeight(); if (oldHeight != newHeight) { if (oldHeight &gt; newHeight &amp;&amp; maxFloatLogicalBottom &gt; newHeight &amp;&amp; !childrenInline()) { // One of our children&apos;s floats may have become an overhanging float for us. We need to look for it. for (auto&amp; blockFlow : childrenOfType&lt;RenderBlockFlow&gt;(*this)) { if (blockFlow.isFloatingOrOutOfFlowPositioned()) continue; if (blockFlow.lowestFloatLogicalBottom() + blockFlow.logicalTop() &gt; newHeight) addOverhangingFloats(blockFlow, false); } } } //å‰é¢ä¿ç•™çš„å…ˆå‰é«˜åº¦å’Œé‡æ–°è®¡ç®—åçš„é«˜åº¦æ¯”è¾ƒæœ‰å˜åŒ–å°±é‡æ–°å¸ƒå±€å­ç»“ç‚¹ bool heightChanged = (previousHeight != newHeight); if (heightChanged) relayoutChildren = true; layoutPositionedObjects(relayoutChildren || isDocumentElementRenderer()); //Add overflow from children (unless we&apos;re multi-column, since in that case all our child overflow is clipped anyway). computeOverflow(oldClientAfterEdge); statePusher.pop(); fitBorderToLinesIfNeeded(); if (view().layoutState()-&gt;m_pageLogicalHeight) setPageLogicalOffset(view().layoutState()-&gt;pageLogicalOffset(this, logicalTop())); updateLayerTransform(); // Update our scroll information if we&apos;re overflow:auto/scroll/hidden now that we know if // we overflow or not. updateScrollInfoAfterLayout(); // FIXME: This repaint logic should be moved into a separate helper function! // Repaint with our new bounds if they are different from our old bounds. bool didFullRepaint = repainter.repaintAfterLayout(); if (!didFullRepaint &amp;&amp; repaintLogicalTop != repaintLogicalBottom &amp;&amp; (styleToUse.visibility() == VISIBLE || enclosingLayer()-&gt;hasVisibleContent())) { // FIXME: We could tighten up the left and right invalidation points if we let layoutInlineChildren fill them in based off the particular lines // it had to lay out. We wouldn&apos;t need the hasOverflowClip() hack in that case either. LayoutUnit repaintLogicalLeft = logicalLeftVisualOverflow(); LayoutUnit repaintLogicalRight = logicalRightVisualOverflow(); if (hasOverflowClip()) { // If we have clipped overflow, we should use layout overflow as well, since visual overflow from lines didn&apos;t propagate to our block&apos;s overflow. // Note the old code did this as well but even for overflow:visible. The addition of hasOverflowClip() at least tightens up the hack a bit. // layoutInlineChildren should be patched to compute the entire repaint rect. repaintLogicalLeft = std::min(repaintLogicalLeft, logicalLeftLayoutOverflow()); repaintLogicalRight = std::max(repaintLogicalRight, logicalRightLayoutOverflow()); } LayoutRect repaintRect; if (isHorizontalWritingMode()) repaintRect = LayoutRect(repaintLogicalLeft, repaintLogicalTop, repaintLogicalRight - repaintLogicalLeft, repaintLogicalBottom - repaintLogicalTop); else repaintRect = LayoutRect(repaintLogicalTop, repaintLogicalLeft, repaintLogicalBottom - repaintLogicalTop, repaintLogicalRight - repaintLogicalLeft); if (hasOverflowClip()) { // Adjust repaint rect for scroll offset repaintRect.moveBy(-scrollPosition()); // Don&apos;t allow this rect to spill out of our overflow box. repaintRect.intersect(LayoutRect(LayoutPoint(), size())); } // Make sure the rect is still non-empty after intersecting for overflow above if (!repaintRect.isEmpty()) { repaintRectangle(repaintRect); // We need to do a partial repaint of our content. if (hasReflection()) repaintRectangle(reflectedRect(repaintRect)); } } clearNeedsLayout();} ä»¥ä¸Šæ–¹æ³•é‡Œæœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä¸€ä¸ªæ˜¯ layoutInlineChildren ä¸€ä¸ªæ˜¯ layoutBlockChildrenã€‚ç”±äº Inline å±äºåŠ¨æ€è°ƒæ•´é«˜åº¦æ‰€ä»¥æ¯” Block çš„å®ç°è¦è´Ÿè´£å¾ˆå¤šï¼ŒlayoutInlineChildren æ–¹å¼æ˜¯ Inline å¸ƒå±€çš„å…¥å£ã€‚ Layout Tree åˆ›å»ºParsing å®Œæˆä¼šè§¦å‘ Layout Treeã€‚Layout Tree çš„ç›®çš„å°±æ˜¯å­˜å‚¨éœ€è¦ç»˜åˆ¶çš„æ•°æ®ï¼ŒLayout å°±æ˜¯å¤„ç† Nodes åœ¨é¡µé¢ä¸Šçš„å¤§å°å’Œä½ç½®ã€‚Chromeï¼Œfirefoxå’Œ android ä½¿ç”¨çš„æ˜¯Skia å¼€æº 2D å›¾å½¢åº“åšåº•å±‚ Paint å¼•æ“ã€‚ 123void Document::finishedParsing() { updateStyleAndLayoutTree();} æ¯ä¸ª Node éƒ½ä¼šåˆ›å»ºä¸€ä¸ª LayoutObjectï¼Œ 12LayoutObject* newLayoutObject = m_node-&gt;createLayoutObject(style);parentLayoutObject-&gt;addChild(newLayoutObject, nextLayoutObject); Layout å€¼çš„è®¡ç®—Layout Tree åˆ›å»ºå®Œæˆå°±å¼€å§‹è®¡ç®— layout çš„å€¼ï¼Œæ¯”å¦‚å®½ï¼Œmargin ç­‰ã€‚Block ç±»å‹èŠ‚ç‚¹çš„ä½ç½®è®¡ç®—å®ç°æ˜¯åœ¨ RenderBlock é‡Œçš„ layoutBlockChild æ–¹æ³•é‡Œå®ç°çš„ï¼Œè¯¥æ–¹æ³•ä¸»è¦æ˜¯å…ˆç¡®å®šèŠ‚ç‚¹çš„ top åæ ‡ï¼Œç„¶åè®¡ç®—å¸ƒå±€å˜åŒ–å marginï¼Œfloat å’Œ åˆ†é¡µç­‰å¯¹ top å€¼çš„å½±å“ç¡®å®šå½±å“åçš„ top åæ ‡ï¼Œæœ€åä½¿ç”¨ determineLogicalLeftPositionForChild å¾—åˆ° left åæ ‡ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149void RenderBlockFlow::layoutBlockChild(RenderBox&amp; child, MarginInfo&amp; marginInfo, LayoutUnit&amp; previousFloatLogicalBottom, LayoutUnit&amp; maxFloatLogicalBottom){ LayoutUnit oldPosMarginBefore = maxPositiveMarginBefore(); LayoutUnit oldNegMarginBefore = maxNegativeMarginBefore(); // The child is a normal flow object. Compute the margins we will use for collapsing now. child.computeAndSetBlockDirectionMargins(*this); // Try to guess our correct logical top position. In most cases this guess will // be correct. Only if we&apos;re wrong (when we compute the real logical top position) // will we have to potentially relayout. LayoutUnit estimateWithoutPagination; //ä¼°ç®— top åæ ‡ï¼ŒestimateLogicalTopPosition ä¼šå…ˆè·å– RenderBlock çš„é«˜æ¥ä½œä¸ºåˆå§‹çš„ topï¼Œå†æ ¹æ® margin åˆ†é¡µå’Œ float æ¥è°ƒæ•´ top åæ ‡ LayoutUnit logicalTopEstimate = estimateLogicalTopPosition(child, marginInfo, estimateWithoutPagination); // Cache our old rect so that we can dirty the proper repaint rects if the child moves. LayoutRect oldRect = child.frameRect(); LayoutUnit oldLogicalTop = logicalTopForChild(child);#if !ASSERT_DISABLED LayoutSize oldLayoutDelta = view().layoutDelta();#endif // Position the child as though it didn&apos;t collapse with the top. //å…ˆè®¾ç½®å¸ƒå±€å‰ top åæ ‡ setLogicalTopForChild(child, logicalTopEstimate, ApplyLayoutDelta); estimateRegionRangeForBoxChild(child); RenderBlockFlow* childBlockFlow = is&lt;RenderBlockFlow&gt;(child) ? &amp;downcast&lt;RenderBlockFlow&gt;(child) : nullptr; bool markDescendantsWithFloats = false; if (logicalTopEstimate != oldLogicalTop &amp;&amp; !child.avoidsFloats() &amp;&amp; childBlockFlow &amp;&amp; childBlockFlow-&gt;containsFloats()) markDescendantsWithFloats = true; else if (UNLIKELY(logicalTopEstimate.mightBeSaturated())) // logicalTopEstimate, returned by estimateLogicalTopPosition, might be saturated for // very large elements. If it does the comparison with oldLogicalTop might yield a // false negative as adding and removing margins, borders etc from a saturated number // might yield incorrect results. If this is the case always mark for layout. markDescendantsWithFloats = true; else if (!child.avoidsFloats() || child.shrinkToAvoidFloats()) { // If an element might be affected by the presence of floats, then always mark it for // layout. LayoutUnit fb = std::max(previousFloatLogicalBottom, lowestFloatLogicalBottom()); if (fb &gt; logicalTopEstimate) markDescendantsWithFloats = true; } if (childBlockFlow) { if (markDescendantsWithFloats) childBlockFlow-&gt;markAllDescendantsWithFloatsForLayout(); if (!child.isWritingModeRoot()) previousFloatLogicalBottom = std::max(previousFloatLogicalBottom, oldLogicalTop + childBlockFlow-&gt;lowestFloatLogicalBottom()); } child.markForPaginationRelayoutIfNeeded(); bool childHadLayout = child.everHadLayout(); //å¯¹å­èŠ‚ç‚¹è¿›è¡Œå¸ƒå±€ bool childNeededLayout = child.needsLayout(); if (childNeededLayout) child.layout(); // Cache if we are at the top of the block right now. bool atBeforeSideOfBlock = marginInfo.atBeforeSideOfBlock(); //ä¿è¯ top åæ ‡å’Œå­èŠ‚ç‚¹å¸ƒå±€åèƒ½å¤ŸåŒæ­¥ // Now determine the correct ypos based off examination of collapsing margin // values. LayoutUnit logicalTopBeforeClear = collapseMargins(child, marginInfo); // Now check for clear. LayoutUnit logicalTopAfterClear = clearFloatsIfNeeded(child, marginInfo, oldPosMarginBefore, oldNegMarginBefore, logicalTopBeforeClear); bool paginated = view().layoutState()-&gt;isPaginated(); if (paginated) logicalTopAfterClear = adjustBlockChildForPagination(logicalTopAfterClear, estimateWithoutPagination, child, atBeforeSideOfBlock &amp;&amp; logicalTopBeforeClear == logicalTopAfterClear); //ç»è¿‡ä¸Šé¢çš„å­èŠ‚ç‚¹å¸ƒå±€å®Œåé‡æ–°è®¡ç®—å¾—åˆ°æ–°é«˜ setLogicalTopForChild(child, logicalTopAfterClear, ApplyLayoutDelta); // Now we have a final top position. See if it really does end up being different from our estimate. // clearFloatsIfNeeded can also mark the child as needing a layout even though we didn&apos;t move. This happens // when collapseMargins dynamically adds overhanging floats because of a child with negative margins. if (logicalTopAfterClear != logicalTopEstimate || child.needsLayout() || (paginated &amp;&amp; childBlockFlow &amp;&amp; childBlockFlow-&gt;shouldBreakAtLineToAvoidWidow())) { if (child.shrinkToAvoidFloats()) { // The child&apos;s width depends on the line width. When the child shifts to clear an item, its width can // change (because it has more available line width). So mark the item as dirty. child.setChildNeedsLayout(MarkOnlyThis); } if (childBlockFlow) { if (!child.avoidsFloats() &amp;&amp; childBlockFlow-&gt;containsFloats()) childBlockFlow-&gt;markAllDescendantsWithFloatsForLayout(); child.markForPaginationRelayoutIfNeeded(); } } if (updateRegionRangeForBoxChild(child)) child.setNeedsLayout(MarkOnlyThis); // In case our guess was wrong, relayout the child. child.layoutIfNeeded(); // We are no longer at the top of the block if we encounter a non-empty child. // This has to be done after checking for clear, so that margins can be reset if a clear occurred. if (marginInfo.atBeforeSideOfBlock() &amp;&amp; !child.isSelfCollapsingBlock()) marginInfo.setAtBeforeSideOfBlock(false); // Now place the child in the correct left position //è®¡ç®—è·å¾— left åæ ‡ã€‚determineLogicalLeftPositionForChild ä¼šå…ˆå»è®¡ç®— border-left å’Œ padding-left ç„¶åè®¡ç®— margin-left æ¥ç¡®å®š left åæ ‡ã€‚æœ€åé€šè¿‡ setLogicalLeftForChild å°†ç¡®è®¤çš„ left åæ ‡è®°å½•ä¸‹ã€‚ determineLogicalLeftPositionForChild(child, ApplyLayoutDelta); // Update our height now that the child has been placed in the correct position. setLogicalHeight(logicalHeight() + logicalHeightForChildForFragmentation(child)); if (mustSeparateMarginAfterForChild(child)) { setLogicalHeight(logicalHeight() + marginAfterForChild(child)); marginInfo.clearMargin(); } // If the child has overhanging floats that intrude into following siblings (or possibly out // of this block), then the parent gets notified of the floats now. if (childBlockFlow &amp;&amp; childBlockFlow-&gt;containsFloats()) maxFloatLogicalBottom = std::max(maxFloatLogicalBottom, addOverhangingFloats(*childBlockFlow, !childNeededLayout)); LayoutSize childOffset = child.location() - oldRect.location(); if (childOffset.width() || childOffset.height()) { view().addLayoutDelta(childOffset); // If the child moved, we have to repaint it as well as any floating/positioned // descendants. An exception is if we need a layout. In this case, we know we&apos;re going to // repaint ourselves (and the child) anyway. if (childHadLayout &amp;&amp; !selfNeedsLayout() &amp;&amp; child.checkForRepaintDuringLayout()) child.repaintDuringLayoutIfMoved(oldRect); } //æ¸²æŸ“ if (!childHadLayout &amp;&amp; child.checkForRepaintDuringLayout()) { child.repaint(); child.repaintOverhangingFloats(true); } if (paginated) { if (RenderFlowThread* flowThread = flowThreadContainingBlock()) flowThread-&gt;flowThreadDescendantBoxLaidOut(&amp;child); // Check for an after page/column break. LayoutUnit newHeight = applyAfterBreak(child, logicalHeight(), marginInfo); if (newHeight != height()) setLogicalHeight(newHeight); } ASSERT(view().layoutDeltaMatches(oldLayoutDelta));} åˆ¤æ–­å€¼çš„ç±»å‹æ˜¯å›ºå®šå€¼è¿˜æ˜¯ç™¾åˆ†æ¯”çš„æ–¹æ³• 12345678switch (length.type()) { case Fixed: return LayoutUnit(length.value()); //è¿”å› LayoutUnit å°è£…çš„æ•°æ® 1px = 1 &lt;&lt; 6 = 64 unit case Percent: //maximumValue æ˜¯ä¼ è¿›æ¥çš„æœ€å¤§å€¼ return LayoutUnit( static_cast&lt;float&gt;(maximumValue * length.percent() / 100.0f));} è®¡ç®— margin çš„å€¼ 123456789101112// CSS 2.1: &quot;If both &apos;margin-left&apos; and &apos;margin-right&apos; are &apos;auto&apos;, their used// values are equal. This horizontally centers the element with respect to// the edges of the containing block.&quot;const ComputedStyle&amp; containingBlockStyle = containingBlock-&gt;styleRef();if (marginStartLength.isAuto() &amp;&amp; marginEndLength.isAuto()) { LayoutUnit centeredMarginBoxStart = std::max( LayoutUnit(), (availableWidth - childWidth) / 2); marginStart = centeredMarginBoxStart; marginEnd = availableWidth - childWidth - marginStart; return;} Box Model é‡Œ 12m_frameRect.setWidth(width);m_marginBox.setStart(marginLeft); ç»è¿‡è®¡ç®—åçš„ Render Tree å…·æœ‰å¸ƒå±€ä¿¡æ¯ï¼Œæ¯”å¦‚ä¸‹é¢çš„ html ä»£ç ï¼š 12345&lt;html&gt;&lt;body&gt;&lt;p&gt;First line.&lt;br&gt;Second one.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; å¸ƒå±€è®¡ç®—åå¸¦å¸ƒå±€ä¿¡æ¯çš„ Render Tree å¦‚ä¸‹ï¼š 123456RenderBlock {HTML} at (0, 0) size 640x480 |â€”â€” RenderBody {BODY} at (0, 80) size 640x480 [bgcolor=# FFFFFF] | |â€”â€” RenderBlock {P} at (0, 0) size 640x80 | | |â€”â€” RenderText {#text} at (0, 0) size 48x24 &quot;First line.&quot; | | |â€”â€” RenderBR {BR} at (20, 20) size 0x0 | | |â€”â€” RenderText {#text} at (0, 24) size 48x24 &quot;Second one.&quot; Box Model æ•°æ®ç»“æ„æ‰€æœ‰çš„ elements éƒ½æœ‰ display å±æ€§ç”¨æ¥ç¡®å®šæ˜¾ç¤ºç±»å‹ã€‚å±æ€§å€¼æœ‰ blockï¼šç”Ÿæˆä¸€ä¸ª block box inlineï¼šç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª inline boxes noneï¼šä¸ç”Ÿæˆ box é»˜è®¤æ˜¯ inline çš„ï¼Œä½†æ˜¯æµè§ˆå™¨ä¼šè®¾ç½®å…¶å®ƒé»˜è®¤å€¼ï¼Œæ¯”å¦‚è¯´ div å°±æ˜¯ block çš„ï¼Œå®Œæ•´çš„å®šä¹‰å¯ä»¥å‚çœ‹ w3c å®šä¹‰çš„ï¼šhttps://www.w3.org/TR/CSS2/sample.html å®šä½çš„æ–¹æ¡ˆæœ‰ä¸‰ç§æ–¹æ¡ˆ Normalï¼šç”± render tree æ¥å†³å®šçš„ä½ç½®ã€‚ Floatï¼šä¼šå…ˆæŒ‰ç…§æ­£å¸¸æµç¨‹æ¥æ’åˆ—ï¼Œç„¶åå†å°½å¯èƒ½çš„å¾€å·¦æˆ–å¾€å³ç§»åŠ¨ã€‚ Absoluteï¼šè®©å…¶åœ¨ render tree çš„ä½ç½®å’Œ DOM tree ä¸ä¸€æ · å®šä½æ–¹æ¡ˆæ˜¯æ ¹æ® position å±æ€§å’Œ float å±æ€§æ¥å†³å®šçš„ï¼Œstatic å’Œ relative å°±æ˜¯æ­£å¸¸çš„æ’åˆ—ï¼Œ absolute å’Œ fixed å°±æ˜¯ absolute å®šä½ã€‚ å¯¹äº float çš„å¤„ç†ï¼Œé¦–å…ˆéœ€è¦åˆ¤æ–­å®½åº¦æ˜¯å¦éœ€è¦ fit content 123456bool LayoutBox::sizesLogicalWidthToFitContent( const Length&amp; logicalWidth) const { if (isFloating() || isInlineBlockOrInlineTable()) return true; ...} å¦‚æœæ˜¯ float æˆ–è€… inline-block ï¼Œå®½åº¦é å†…å®¹æ¥æ’‘ï¼Œè¡Œå†…çš„å†…å®¹ä¼šå°†é—´éš”æ§åˆ¶æˆä¸€ä¸ªç©ºæ ¼ï¼Œå‰åç©ºæ ¼å’Œå¤šä½™ç©ºæ ¼éƒ½ä¼šå¿½ç•¥ã€‚ å¯¹äº float:left çš„è®¡ç®— 12345678910111213141516//logicalRightOffsetForPositioningFloat å‰©ä½™ç©ºé—´å¦‚æœä¸å°äº floatLogicalLeft æ—¶å¾ªç¯ç»“æŸwhile (logicalRightOffsetForPositioningFloat( logicalTopOffset, logicalRightOffset, &amp;heightRemainingRight) - floatLogicalLeft &lt; floatLogicalWidth) { //ä¸‹ç§» logicalTopOffset += std::min&lt;LayoutUnit&gt;(heightRemainingLeft, heightRemainingRight); //æ–°çš„ floatLogicalLeft floatLogicalLeft = logicalLeftOffsetForPositioningFloat( logicalTopOffset, logicalLeftOffset, &amp;heightRemainingLeft); }}//çœ‹çœ‹ floatLogicalLeft æ˜¯å¦å¤§äº left çš„ offset å’Œ padding left çš„å·®å€¼floatLogicalLeft = std::max( logicalLeftOffset - borderAndPaddingLogicalLeft(), floatLogicalLeft); Box ç±»å‹Block boxï¼šåœ¨æµè§ˆå™¨çš„ window é‡Œæœ‰è‡ªå·±çš„çŸ©å½¢ Inline boxï¼šæ²¡æœ‰è‡ªå·±çš„ blockï¼Œä½†æ˜¯ä¼šåœ¨ä¸€ä¸ª block é‡Œ Block æ˜¯æŒ‰ç…§å‚ç›´æ’åˆ—ï¼ŒInline æ˜¯æŒ‰ç…§æ°´å¹³æ¥æ’åˆ— Inline boxes ä¼šè¢«åŒ…å«åœ¨ line boxes é‡Œï¼Œlines çš„é«˜åº¦è‡³å°‘å’Œæœ€é«˜çš„ box ä¸€æ ·ï¼Œç”šè‡³æ›´é«˜ï¼Œå½“ boxes ç”¨çš„æ˜¯ baselineï¼Œè¿™æ„å‘³ç€å¤šä¸ªå…ƒç´ åº•éƒ¨å¯¹é½ã€‚å¦‚æœå®¹å™¨å®½åº¦ä¸å¤Ÿï¼Œinline ä¼šå˜æˆå¤š linesã€‚ ä¸‹é¢ä¸¾ä¸ªä¾‹å­çœ‹çœ‹ Inline ç±»å‹çš„ä¾‹å­ï¼Œæ¯”å¦‚æœ‰å¦‚ä¸‹çš„ htmlï¼š 1&lt;p&gt;First line.&lt;br&gt;Second one.&lt;/p&gt; è¿™æ®µ html çš„ Render Tree å¦‚ä¸‹ï¼š Position ç±»å‹Relativeï¼šç›¸å¯¹å®šä½ï¼Œå…ˆæŒ‰ç…§æ­£å¸¸çš„å®šä½ç„¶åæ ¹æ®è®¾ç½®çš„å€¼å†ç§»åŠ¨ã€‚ Floatï¼šä¼šè¢«ç§»åŠ¨åˆ°å·¦è¾¹æˆ–å³è¾¹ä¾§ Absolute å’Œ fixedï¼šä¸ä¼šå‚ä¸ normal flowï¼ŒåªæŒ‰ç…§ç²¾ç¡®å®šä½ï¼Œå°ºå¯¸å€¼ç›¸å¯¹äºå®¹å™¨ï¼Œå¯¹äº fixed æ¥è¯´ï¼Œæ˜¯ç›¸å¯¹äº view port çš„ã€‚fixed box ä¸ä¼šéšç€ document çš„æ»šåŠ¨è€Œç§»åŠ¨ã€‚ åˆ†å±‚åˆ†å±‚å¯ä»¥é€šè¿‡æŒ‡å®š CSS çš„ z-index å±æ€§ã€‚å®ƒè¡¨ç¤ºäº† box çš„ç¬¬ä¸‰ä¸ªç»´åº¦ï¼Œä½ç½®æŒ‰ç…§ z è½´æ¥ã€‚è¿™äº› box ä¼šè¢«åˆ†æˆ stacksï¼Œå«åš stacking contextsï¼Œæ¯ä¸ªæ ˆé¡¶çš„ box æ›´é è¿‘ç”¨æˆ·ã€‚stack æ ¹æ® z-index çš„å±æ€§æ’åºã€‚ 1234567891011&lt;STYLE type=\"text/css\"&gt; div { position: absolute; left: 2in; top: 2in; }&lt;/STYLE&gt;&lt;P&gt;&lt;DIV style=\"z-index: 3;background-color:red; width: 1in; height: 1in; \"&gt;&lt;/DIV&gt;&lt;DIV style=\"z-index: 1;background-color:green;width: 2in; height: 2in;\"&gt;&lt;/DIV&gt;&lt;/p&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°å±‚çº§æ˜¯æŒ‰ç…§ z-index æ¥æ’çš„ã€‚ å¤§å°çš„è®¡ç®—border åŠä»¥å†…åŒºåŸŸä½¿ç”¨ m_frameRect å¯¹è±¡è¡¨ç¤ºã€‚ä¸åŒæ–¹æ³•é€šè¿‡ä¸åŒçš„è®¡ç®—èƒ½å¤Ÿè·å–åˆ°ä¸åŒçš„å€¼æ¯”å¦‚ clientWidth çš„è®¡ç®—æ–¹æ³•æ˜¯ 123456// More IE extensions. clientWidth and clientHeight represent the interior of// an object excluding border and scrollbar.LayoutUnit LayoutBox::clientWidth() const { return m_frameRect.width() - borderLeft() - borderRight() - verticalScrollbarWidth();} offsetWidth æ˜¯ frameRect çš„å®½åº¦ 123// IE extensions. Used to calculate offsetWidth/Height.LayoutUnit offsetWidth() const override { return m_frameRect.width(); }LayoutUnit offsetHeight() const override { return m_frameRect.height(); } Margin åŒºåŸŸæ˜¯ç”¨ LayoutRectOutsets 1234LayoutUnit m_top;LayoutUnit m_right;LayoutUnit m_bottom;LayoutUnit m_left; ä½ç½®ä½ç½®çš„è®¡ç®—ï¼Œå³ x å’Œ y æ˜¯é€šè¿‡ä¸‹é¢ä¸¤ä¸ªå‡½æ•°è®¡ç®—å¾—åˆ° 123456// æ ¹æ® margin å¾—åˆ° y å€¼LayoutUnit logicalTopBeforeClear = collapseMargins(child, layoutInfo, childIsSelfCollapsing, childDiscardMarginBefore, childDiscardMarginAfter);// å¾—åˆ° x å€¼determineLogicalLeftPositionForChild(child); è®¡ç®—æ˜¯ä¸ªé€’å½’è¿‡ç¨‹ï¼Œç”±å­å…ƒç´ åˆ°çˆ¶å…ƒç´ ã€‚è¿™æ ·åšçš„åŸå› æ˜¯æœ‰çš„çˆ¶å…ƒç´ çš„é«˜æ˜¯ç”±å­å…ƒç´ æ’‘èµ·çš„ï¼Œéœ€è¦å…ˆçŸ¥é“å­å…ƒç´ æ‰èƒ½å¤Ÿæ¨å‡ºçˆ¶å…ƒç´ ã€‚ ming1016","link":"/program/ï£¿/webkit/"}],"tags":[{"name":"Hexo","slug":"Hexo","link":"/tags/Hexo/"},{"name":"å–„ç”¨ä½³è½¯","slug":"å–„ç”¨ä½³è½¯","link":"/tags/å–„ç”¨ä½³è½¯/"},{"name":"ï£¿","slug":"ï£¿","link":"/tags/ï£¿/"},{"name":"program","slug":"program","link":"/tags/program/"},{"name":"git","slug":"git","link":"/tags/git/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"Node.js","slug":"Node-js","link":"/tags/Node-js/"},{"name":"Markdown","slug":"Markdown","link":"/tags/Markdown/"},{"name":"Python","slug":"Python","link":"/tags/Python/"},{"name":"Django","slug":"Django","link":"/tags/Django/"}],"categories":[{"name":"blog","slug":"blog","link":"/categories/blog/"},{"name":"Software","slug":"Software","link":"/categories/Software/"},{"name":"label","slug":"label","link":"/categories/label/"},{"name":"news","slug":"news","link":"/categories/news/"},{"name":"notes","slug":"notes","link":"/categories/notes/"},{"name":"program","slug":"program","link":"/categories/program/"},{"name":"JavaScript","slug":"program/JavaScript","link":"/categories/program/JavaScript/"},{"name":"Git","slug":"program/Git","link":"/categories/program/Git/"},{"name":"Linux","slug":"program/Linux","link":"/categories/program/Linux/"},{"name":"Markdown","slug":"program/Markdown","link":"/categories/program/Markdown/"},{"name":"Python","slug":"program/Python","link":"/categories/program/Python/"},{"name":"ï£¿","slug":"program/ï£¿","link":"/categories/program/ï£¿/"},{"name":"Flutter","slug":"program/Flutter","link":"/categories/program/Flutter/"}]}