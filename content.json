{"pages":[{"title":"","text":"ÁΩëÈ°µ‰∏çÂ≠òÂú® - 404.life body {background-color: #326696;margin: 0px;overflow: hidden;font-family:Monospace;font-size:13px;text-align:center;font-weight: bold;text-align:center;}a {color:#0078ff;} varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 ); } uniform sampler2D map; uniform vec3 fogColor; uniform float fogNear; uniform float fogFar; varying vec2 vUv; void main() { float depth = gl_FragCoord.z / gl_FragCoord.w; float fogFactor = smoothstep( fogNear, fogFar, depth ); gl_FragColor = texture2D( map, vUv ); gl_FragColor.w *= pow( gl_FragCoord.z, 20.0 ); gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor ); } if ( ! Detector.webgl ) Detector.addGetWebGLMessage(); var container; var camera, scene, renderer; var mesh, geometry, material; var mouseX = 0, mouseY = 0; var start_time = Date.now(); var windowHalfX = window.innerWidth / 2; var windowHalfY = window.innerHeight / 2; init(); function init() { container = document.createElement( 'div' ); document.body.appendChild( container ); // Bg gradient var canvas = document.createElement( 'canvas' ); canvas.width = 32; canvas.height = window.innerHeight; var context = canvas.getContext( '2d' ); var gradient = context.createLinearGradient( 0, 0, 0, canvas.height ); gradient.addColorStop(0, \"#1e4877\"); gradient.addColorStop(0.5, \"#4584b4\"); context.fillStyle = gradient; context.fillRect(0, 0, canvas.width, canvas.height); container.style.background = 'url(' + canvas.toDataURL('image/png') + ')'; container.style.backgroundSize = '32px 100%'; // camera = new THREE.PerspectiveCamera( 30, window.innerWidth / window.innerHeight, 1, 3000 ); camera.position.z = 6000; scene = new THREE.Scene(); geometry = new THREE.Geometry(); var texture = THREE.ImageUtils.loadTexture( 'cloud10.png', null, animate ); texture.magFilter = THREE.LinearMipMapLinearFilter; texture.minFilter = THREE.LinearMipMapLinearFilter; var fog = new THREE.Fog( 0x4584b4, - 100, 3000 ); material = new THREE.ShaderMaterial( { uniforms: { \"map\": { type: \"t\", value: texture }, \"fogColor\" : { type: \"c\", value: fog.color }, \"fogNear\" : { type: \"f\", value: fog.near }, \"fogFar\" : { type: \"f\", value: fog.far }, }, vertexShader: document.getElementById( 'vs' ).textContent, fragmentShader: document.getElementById( 'fs' ).textContent, depthWrite: false, depthTest: false, transparent: true } ); var plane = new THREE.Mesh( new THREE.PlaneGeometry( 64, 64 ) ); for ( var i = 0; i < 8000; i++ ) { plane.position.x = Math.random() * 1000 - 500; plane.position.y = - Math.random() * Math.random() * 200 - 15; plane.position.z = i; plane.rotation.z = Math.random() * Math.PI; plane.scale.x = plane.scale.y = Math.random() * Math.random() * 1.5 + 0.5; THREE.GeometryUtils.merge( geometry, plane ); } mesh = new THREE.Mesh( geometry, material ); scene.add( mesh ); mesh = new THREE.Mesh( geometry, material ); mesh.position.z = - 8000; scene.add( mesh ); renderer = new THREE.WebGLRenderer( { antialias: false } ); renderer.setSize( window.innerWidth, window.innerHeight ); container.appendChild( renderer.domElement ); document.addEventListener( 'mousemove', onDocumentMouseMove, false ); window.addEventListener( 'resize', onWindowResize, false ); } function onDocumentMouseMove( event ) { mouseX = ( event.clientX - windowHalfX ) * 0.25; mouseY = ( event.clientY - windowHalfY ) * 0.15; } function onWindowResize( event ) { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize( window.innerWidth, window.innerHeight ); } function animate() { requestAnimationFrame( animate ); position = ( ( Date.now() - start_time ) * 0.03 ) % 8000; camera.position.x += ( mouseX - camera.position.x ) * 0.01; camera.position.y += ( - mouseY - camera.position.y ) * 0.01; camera.position.z = - position + 8000; renderer.render( scene, camera ); }","link":"/404/dmaku.css"},{"title":"","text":"","link":"/404.html"},{"title":"ÁïôË®ÄÊùø","text":"Âú®‰∏ÄÂàáÂèòÂ•Ω‰πãÂâçÔºåÊàë‰ª¨ÊÄªË¶ÅÁªèÂéÜ‰∏Ä‰∫õ‰∏çÂºÄÂøÉÁöÑÊó•Â≠êÔºåËøôÊÆµÊó•Â≠ê‰πüËÆ∏ÂæàÈïøÔºå‰πüËÆ∏Âè™ÊòØ‰∏ÄËßâÈÜíÊù•ÔºåÊâÄ‰ª•ËÄêÂøÉÁÇπÔºåÁªôÂ•ΩËøê‰∏ÄÁÇπÊó∂Èó¥„ÄÇ","link":"/message/index.html"},{"title":"ÂÖ≥‰∫é","text":"‰∏Ä‰∏™ÂØπÁùÄÊâãÊú∫ÂæÆÁ¨ëÁöÑÂ•≥Â≠©ÔºåÊàë‰πü‰ºöÁåúÊµãÂ•πÂæÆÁ¨ëÔºåÊòØÊÅã‰∫∫ÁöÑÂØÜËØ≠ÔºåËøòÊòØÊúãÂèãÁöÑÈóÆÂÄôÔºåÊàñËÆ∏ÊòØÁúã‰∏ÄÊÆµÁ¨ëËØùÔºåÊÄª‰πãÔºåÂæàÁæé„ÄÇÊàëÊÉ≥ÂùêËøáÂéªÔºå‰ΩÜÂ•πÁöÑÁõÆÂÖâÊäïËøáÊù•ÔºåÊàëÂèà‰Ωé‰∏ã‰∫ÜÂ§¥ÔºåÂÉè‰∏™ÁäØÈîôÁöÑÂ≠©Â≠ê„ÄÇ","link":"/about/index.html"}],"posts":[{"title":"hexo-theme-icarus","text":"Hexo-theme-icarus ÊòØ‰∏Ä‰∏™‰ºòÁßÄÁöÑ Hexo ‰∏ªÈ¢òÔºåÂºÄÂèëËÄÖ Ruipeng Zhang ÂêåÊó∂ËøòÁª¥Êä§‰∫Ü hexo-theme-hueman Âíå hexo-theme-minos ‰∏§‰∏™È°πÁõÆ„ÄÇ icarus ÊòØ‰∏Ä‰∏™‰∏âÊ†èÁªìÊûÑÁöÑËá™ÈÄÇÂ∫î‰∏ªÈ¢òÔºåÈ¢ÑÁΩÆ‰∫ÜÂ§ßÈáèÁ¨¨‰∏âÊñπÊèí‰ª∂ÔºåÂèØ‰ª•Êñπ‰æø‰ΩøÁî®ËÄÖÂø´ÈÄüÂª∫Á´ô„ÄÇÊï¥‰ΩìÈ£éÊ†ºÁÆÄÁ∫¶ÔºåÈÄÇÂêàÂêÑÁßçÁ±ªÂûãÁöÑÁ´ôÁÇπÔºåÊó†ËÆ∫ÊòØÊäÄÊúØÊñáÁ´†ÔºåËøòÊòØÊëÑÂΩ±‰Ω≥‰ΩúÔºåÈÉΩÂèØ‰ª•ÂÆåÁæéÊâøËΩΩ„ÄÇ ÊïàÊûúÂõæ ÂÆâË£ÖÂú®ÂëΩ‰ª§Ë°å‰∏≠cdËá≥ÂçöÂÆ¢Ê†πÁõÆÂΩïÔºåÂä†ËΩΩ‰∏ªÈ¢òÔºö 1git clone https://github.com/ppoffice/hexo-theme-icarus.git themes/icarus Âü∫Á°ÄÈÖçÁΩÆÈ¶ñÂÖàÔºåË¶ÅÂú®ÂçöÂÆ¢Ê†πÁõÆÂΩï‰∏ãÁöÑ _config.yml Êñá‰ª∂‰∏≠ÂÅö‰∏§‰ª∂‰∫ãÊÉÖÔºö ËÆæÁΩÆËØ≠Ë®Ä: language: zh-CN ËÆæÁΩÆ‰∏ªÈ¢ò‰∏∫ icarus: theme: icarus icarus ‰∏∫Êàë‰ª¨È¢ÑÁΩÆ‰∫ÜÂ§öËææ 12 ÁßçËØ≠Ë®ÄÔºåÈªòËÆ§ÊòØËã±Êñá„ÄÇ‰∏ÄÂºÄÂßãÊàëÊ≤°ÊúâËÆæÁΩÆËØ≠Ë®ÄÔºåÁîµËÑë‰∏äÊâìÂºÄ‰ΩøÁî®ÁöÑÊòØËã±ÊñáÔºå‰ΩÜÊòØÊâãÊú∫‰∏äÁúãÂ∞±ÊòØ‰∏ÄÁßçÁ±ª‰ººËë°ËêÑÁâôËØ≠ÁöÑÊñáÂ≠ó„ÄÇÊ≤°ÊúâÊ∑±Á©∂ÂéüÂõ†ÔºåÊâÄ‰ª•ËøòÊòØÊåâÁÖßÂçöÂÆ¢ÁöÑÂèó‰ºó‰ª•ÂèäÂπ≥Êó∂ÁöÑÂñúÂ•ΩËÆæÁΩÆ‰∏Ä‰∏ãËØ≠Ë®ÄÔºåzh-CNÊòØÁÆÄ‰Ωì‰∏≠Êñá„ÄÇ icarus ÁöÑÊñá‰ª∂ÁªìÊûÑÂÖàÊù•ÁúãÁúã icarus ‰∏ªÈ¢òÁöÑÊñá‰ª∂ÁªìÊûÑÂêßÔºåËÆ©Êàë‰ª¨ÂáÜÂ§áÂ•ΩÂ∞ñÂè´Â£∞ÔºÅ 123456789101112131415‚îú‚îÄincludes‚îú‚îÄlanguages‚îú‚îÄlayout‚îÇ ‚îú‚îÄcomment‚îÇ ‚îú‚îÄcommon‚îÇ ‚îú‚îÄdonate‚îÇ ‚îú‚îÄplugin‚îÇ ‚îú‚îÄsearch‚îÇ ‚îú‚îÄshare‚îÇ ‚îî‚îÄwidget‚îú‚îÄsripts‚îî‚îÄsource ‚îú‚îÄcss ‚îú‚îÄimages ‚îî‚îÄjs ‰ªîÁªÜËßÇÂØüÊ∏≤ÊüìÊñá‰ª∂ layout ÁõÆÂΩïÔºåÂ∞±ÂèØ‰ª•ÂèëÁé∞ icarus ÁöÑÂº∫Â§ß‰∫ÜÔºåËØÑËÆ∫„ÄÅÊçêËµ†„ÄÅÊêúÁ¥¢„ÄÅÂàÜ‰∫´‰ª•ÂèäËØ∏Â§öÁ¨¨‰∏âÊñπÊèí‰ª∂ÔºåÈÉΩÂ∑≤ÁªèÈõÜÊàêÂ•ΩÂï¶ÔºÅÂÜçËØ¥‰∏ÄÈÅçÔºåÈõÜÊàêÂ•ΩÂï¶ÔºÅicarus ÁöÑÁÆÄ‰∏≠ÁøªËØëÁõ∏ÂØπ‰∏≠ËßÑ‰∏≠Áü©ÔºåÂ§ßÂÆ∂ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÊñáÊ°àÈ£éÊ†º‰øÆÊîπ languages ÁõÆÂΩï‰∏ãÁöÑ zh-CN.yml Êñá‰ª∂„ÄÇ _config.yml Êñá‰ª∂ÈÖçÁΩÆÈ¶ñÊ¨°Âú®ÂçöÂÆ¢Ê†πÁõÆÂΩïÊâßË°å hexo clean ÊàñËÄÖ hexo g ÈÉΩ‰ºöËß¶Âèë icarus Ëá™Âä®ÁîüÊàê‰∏Ä‰∏™ _config.yml Êñá‰ª∂ÔºåÊàë‰ª¨ÈÄê‰∏ÄËØ¥Êòé„ÄÇ logologo ‰ºöÂ±ïÁ§∫Âú®È°∂ÈÉ®ÂØºËà™Ê†èÁöÑÊúÄÂ∑¶‰æß‰ª•ÂèäÂ∫ïÈÉ®ÁöÑfooterÂå∫ÂüüÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÊõøÊç¢ source/images/ ‰∏ãÁöÑ logo Êñá‰ª∂Ôºå‰ΩøÁî® svg ÊàñËÄÖ png Ê†ºÂºèÁöÑÈÉΩÂèØ‰ª•„ÄÇÁ†îÁ©∂Ê∫êÁ†ÅÂèëÁé∞ÔºåËøô‰∏™Âú∞ÊñπÁªôÊ≤°Êúâ logo ÁöÑÂêåÂ≠¶‰øùÁïô‰∫Ü‰∏ÄÂ•óÊñáÂ≠óÊñπÊ°àÔºö /layout/common/navbar.ejs12345&lt;% if (has_config('logo.text') &amp;&amp; get_config('logo.text')) { %&gt; &lt;%= get_config('logo.text') %&gt;&lt;% } else { %&gt; &lt;img src=\"&lt;%- url_for(get_config('logo')) %&gt;\" alt=\"&lt;%= get_config('title') %&gt;\" height=\"28\"&gt;&lt;% } %&gt; ‰πüÂ∞±ÊòØËØ¥ÔºåÂè™Ë¶ÅÁªô logo Ê∑ªÂä† text Â±ûÊÄßÔºåÂ∞±‰ºö‰ºòÂÖàÂ±ïÁ§∫È¢ÑËÆæÊñáÂ≠ó‰Ωú‰∏∫ logoÔºö 12logo: text: your name ËøôÂØπ‰∫é‰∏ç‰ºöÁîª logo ÁöÑÂêåÂ≠¶Êù•ËØ¥Êó†ÁñëÊòØ‰∏™Â§ßÂ•ΩÊ∂àÊÅØ‰∫ÜÔºö ËØÑËÆ∫Á≥ªÁªüicarus È¢ÑÁΩÆ‰∫Ü Changyan Disqus Facebook Gitment Gitalk Isso LiveRe Âíå Valine ÂÖ´Â§ß‰∏ªÊµÅËØÑËÆ∫Êèí‰ª∂„ÄÇ ËøôÈáå‰ª•Êàë‰ΩøÁî®ÁöÑ Valine ‰∏∫‰æã„ÄÇÈ¶ñÂÖàÂú® LeanCloud Ê≥®ÂÜå‰∏Ä‰∏™ÂÖçË¥πÁöÑÂºÄÂèëË¥¶Âè∑ÔºåÊñ∞Âª∫‰∏Ä‰∏™Êñ∞Â∫îÁî®ÔºåÂπ∂Êää appid Âíå appkey ÈÖçÁΩÆÂú®ÂØπÂ∫îÈÉ®ÂàÜÔºö 1234567comment: type: valine app_id: # (required) LeanCloud application id app_key: # (required) LeanCloud application key notify: # (optional) receive email notification verify: # (optional) show verification code placeholder: # (optional) comment box placeholder text ÂÖ∂‰ΩôÁöÑ‰∏âÈ°πÈÄâÂ°´ÔºåËøôÊ†∑Â∞±ÂÆåÊàê‰∫Ü Valine ÁöÑÂü∫Êú¨ÈÖçÁΩÆ‰∫Ü„ÄÇÊ≠§Â§ñÔºåValine ÂêåÊ≠• Gravatar Â§¥ÂÉèÔºåÂè™Ë¶ÅÂú®ËØÑËÆ∫ÁöÑÊó∂ÂÄôÁïô‰∏ãÈÇÆÁÆ±ÔºåÂ∞±‰ºöÂ±ïÁ§∫‰Ω†Áã¨‰∏ÄÊó†‰∫åÁöÑÂ§¥ÂÉèÂíØÔºÅ ÊïàÊûúÂ¶Ç‰∏ãÔºö Â¶ÇÊûúÊúâÁöÑÊñáÁ´†‰∏çÂ∏åÊúõÂà´‰∫∫ËØÑËÆ∫Ôºå‰ΩÜÊòØÊàë‰ª¨ÂèàÂ∏åÊúõÊääÊï¥‰∏™Á´ôÁÇπÁöÑËØÑËÆ∫ÂÖ≥Èó≠ÁöÑËØùÔºåÂ∞±ÈúÄË¶ÅÂØπÊåáÂÆöÊñáÁ´†ËøõË°åËØÑËÆ∫ÂÖ≥Èó≠Êìç‰Ωú‰∫Ü„ÄÇÊìç‰Ωú‰πüÂæàÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÂú®ÊñáÁ´† markdown Êñá‰ª∂ÁöÑ front-matter Âå∫ÂüüËÆæÁΩÆ comments comment ‰∏∫ false Âç≥ÂèØÔºö Ê≥®ÊÑèÔºöÊòØ comment Ê≤°Êúâ s 1234---title: article titlecomment: false--- ÊâìËµè‰Ωú‰∏∫Á®ãÂ∫èÂëòÁöÑÊî∂ÂÖ•Êù•Ê∫ê‰πã‰∏ÄÔºåÊâìËµèÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑÂï¶„ÄÇicarus Êèê‰æõ‰∫Ü ÊîØ‰ªòÂÆù ÂæÆ‰ø° PayPal Âíå Patreon ÂõõÁßçÊñπÂºèÔºö 1234567891011121314151617donate: - type: alipay qrcode: /images/alipay.JPG - type: wechat qrcode: /images/wechat.JPG - # type: paypal # Paypal business ID or email address # business: '' # Currency code # currency_code: USD - # type: patreon # URL to the Patreon page # url: '' ÊîØ‰ªòÂÆù Âíå ÂæÆ‰ø° Âè™ÈúÄË¶ÅÊèê‰æõ‰∫åÁª¥Á†ÅÂ∞±ÂèØ‰ª•‰∫ÜÔºåÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞ÈùôÊÄÅËµÑÊ∫êÊàñËÄÖÂõæÂ∫äÈìæÊé•„ÄÇÊïàÊûúÂ¶Ç‰∏ãÔºåÂ§ßÂÆ∂ÊáÇÁöÑÔºö widgetÊàëËßâÂæóËøôÊòØ icarus ÊØîËæÉÁ≤æÈ´ìÁöÑÈÉ®ÂàÜ‰∫ÜÔºåÊâÄÊúâÁöÑ widget ÈÉΩÊòØ‰∏Ä‰∏™Âç°ÁâáÔºå\bÂèØ‰ª•Ëá™Áî±ÊëÜÊîæÂú®‰ªª‰Ωï‰ΩçÁΩÆÔºö ÂåÖÊã¨ÊñáÁ´†Âú®ÂÜÖÔºå‰∏™‰∫∫ËµÑÊñô„ÄÅÈìæÊé•„ÄÅÂàÜÁ±ª„ÄÅÊúÄÊñ∞ÊñáÁ´†„ÄÅÂΩíÊ°£„ÄÅÊ†áÁ≠æÂíåÊ†áÁ≠æ‰∫ëÈÉΩÊòØ‰∏Ä‰∏™Âç°ÁâáÔºåÂèØ‰ª•Âú® _config.yml ‰∏≠ËÆæÁΩÆÂêÑ‰∏™Âç°ÁâáÁöÑÂÖ∑‰ΩìÂ±ûÊÄßÔºåÂêåÊó∂‰πüÂèØ‰ª•ËÆæÁΩÆÂç°ÁâáÂá∫Áé∞Âú®ÁΩëÁ´ôÁöÑÂ∑¶‰æßËøòÊòØÂè≥‰æßÔºö 123456widgets: - # Widget name type: tagcloud # Where should the widget be placed, left or right position: left ÂÖ∂‰ªñËÆæÁΩÆÔºàÁΩÆÈ°∂/ÈòÖËØªÈáèÁªüËÆ°ÔºâËøòÊúâ‰∏Ä‰∫õÂÖ∂‰ªñÁöÑËÆæÁΩÆÂ∞±‰∏çÂú®ËøôÈáåËµòËø∞‰∫ÜÔºåÂÖ∑‰ΩìÂèØ‰ª•ÂèÇËÄÉ ÂÆòÊñπÊñáÊ°£ ËøõË°å‰∫ÜËß£„ÄÇ Èô§Ê≠§‰πãÂ§ñÔºåÊàëÊ†πÊçÆÂÆûÈôÖÈúÄÊ±ÇÔºåÂú® icarus ‰∏ªÈ¢òÂÜÖÊ∑ªÂä†‰∫Ü ÁΩÆÈ°∂ÊñáÁ´† Âíå ÈòÖËØªÈáèÁªüËÆ° ÁöÑ‰∏§‰∏™Â∞èÂäüËÉΩÔºåÂ§ßÂÆ∂Â¶ÇÊûúÊúâÂÖ¥Ë∂£ÔºåÂèØ‰ª•ÂâçÂæÄÊàëÁöÑÂçöÂÆ¢ÂíåÊàë‰∫§ÊµÅÂñî:-O ÂéüÊñáÈìæÊé•üëá","link":"/ÂçöÂÆ¢/hexo-theme-icarus/"},{"title":"Hexo front-matter ÊÄé‰πàÂÜôÔºü","text":"Front-matter ÊòØÊñá‰ª∂ÊúÄ‰∏äÊñπ‰ª• ‚Äî ÂàÜÈöîÁöÑÂå∫ÂüüÔºåÁî®‰∫éÊåáÂÆö‰∏™Âà´Êñá‰ª∂ÁöÑÂèòÈáè„ÄÇ ÂèÇÊï∞ ÊèèËø∞ ÈªòËÆ§ÂÄº layout Â∏ÉÂ±Ä title Ê†áÈ¢ò date Âª∫Á´ãÊó•Êúü Êñá‰ª∂Âª∫Á´ãÊó•Êúü updated Êõ¥Êñ∞Êó•Êúü Êñá‰ª∂Êõ¥Êñ∞Êó•Êúü comments ÂºÄÂêØÊñáÁ´†ÁöÑËØÑËÆ∫ÂäüËÉΩ true/false comment Icarus ‰∏ªÈ¢òÂºÄÂêØÊñáÁ´†ÁöÑËØÑËÆ∫ÂäüËÉΩ true/false thumbnail Â∞ÅÈù¢Âõæ Icarus ‰∏ªÈ¢òÊúâÊïà url feature Â∞ÅÈù¢Âõæ Gridea ‰∏ªÈ¢òÊúâÊïà url password Âä†ÂØÜ hideInList ÂàóË°®‰∏≠ÈöêËóè true/false published ÂèëË°® true/false tags Ê†áÁ≠æÔºà‰∏çÈÄÇÁî®‰∫éÂàÜÈ°µÔºâ toc ÂºÄÂêØÁõÆÂΩï true/false categories ÂàÜÁ±ªÔºà‰∏çÈÄÇÁî®‰∫éÂàÜÈ°µÔºâ permalink Ë¶ÜÁõñÊñáÁ´†ÁΩëÂùÄ","link":"/front-matter/"},{"title":"Hexo+Github+NetlifyÈÉ®ÁΩ≤‰∏™‰∫∫ÂçöÂÆ¢","text":"Netlify ÊòØ‰∏Ä‰∏™Êèê‰æõÈùôÊÄÅËµÑÊ∫êÁΩëÁªúÊâòÁÆ°ÁöÑÁªºÂêàÂπ≥Âè∞ÔºåÊèê‰æõCIÊúçÂä°ÔºåËÉΩÂ§üÂ∞ÜÊâòÁÆ° GitHubÔºåGitLab Á≠âÁΩëÁ´ô‰∏äÁöÑ JekyllÔºåHexoÔºåHugo Á≠â‰ª£Á†ÅËá™Âä®ÁºñËØëÂπ∂ÁîüÊàêÈùôÊÄÅÁΩëÁ´ô„ÄÇ‰ΩøÁî®githubÂàÜÊîØÂíånetlifyÊúçÂä°ÁöÑÊñπÂºèÈÉ®ÁΩ≤hexoÔºåÊê≠Âª∫‰∏ÄÂ•óÂèØË∑®Âπ≥Âè∞„ÄÅÂèØÂ§ö‰∫∫ÂÜô‰Ωú,ÈöèÊó∂ÈöèÂú∞ÂèëÂ∏ÉÁºñËæëÊñáÂ≠ó,ÂèØË¢´ÁôæÂ∫¶Êî∂ÂΩï,ÂèØËá™ÂÆöÂüüÂêç,ÂÖçË¥πHTTPSÁöÑÂçöÂÆ¢Á≥ªÁªüÔºÅÔºÅ ‰ªÄ‰πàÊòØHexo Hexo ÊòØ‰∏Ä‰∏™Âø´ÈÄü„ÄÅÁÆÄÊ¥Å‰∏îÈ´òÊïàÁöÑÂçöÂÆ¢Ê°ÜÊû∂„ÄÇHexo ‰ΩøÁî® MarkdownÔºàÊàñÂÖ∂‰ªñÊ∏≤ÊüìÂºïÊìéÔºâËß£ÊûêÊñáÁ´†ÔºåÂú®Âá†ÁßíÂÜÖÔºåÂç≥ÂèØÂà©Áî®Èùì‰∏ΩÁöÑ‰∏ªÈ¢òÁîüÊàêÈùôÊÄÅÁΩëÈ°µ„ÄÇ Êõ¥Â§öÂü∫Á°ÄÁü•ËØÜÂèØÂèÇËÄÉhexoÂÆòÁΩëÔºåÊú¨ÁØáÊñáÁ´†ÁöÑÈáçÁÇπÊòØ‰ªãÁªçÈÉ®ÁΩ≤ÁöÑÊäÄÂ∑ß„ÄÇÂ¶ÇÊûúÂ∑≤ÊéåÊè°hexoÁöÑÂü∫Á°ÄÁü•ËØÜÔºåÂèØÁõ¥Êé•Ë∑≥Âà∞ÈÉ®ÁΩ≤Á´†ËäÇËøõË°åÊµèËßà„ÄÇ ÂÆâË£ÖÂÆâË£Öhexo‰πãÂâçÈúÄË¶ÅÂÆâË£Ö‰∏Ä‰∏ãÁéØÂ¢ÉÔºö Node.js Git ÂÆâË£ÖÂÆånodeÂêéÁî±‰∫énpmÊòØËá™Â∏¶ÁöÑÔºåÂèØËÉΩÁâàÊú¨Êúâ‰∫õËêΩÂêéÔºåÈúÄË¶ÅÂÖàÂ∞ÜËá™Ë∫´ÂçáÁ∫ß‰∏Ä‰∏ã„ÄÇ 1npm -g install npm Áî±‰∫éÂõΩÂÜÖ‰∫íËÅîÁΩëÁéØÂ¢ÉÔºåÂØºËá¥npm‰∏ãËΩΩÂ§±Ë¥•ÔºåÂèØ‰ΩøÁî®npmÊ∑òÂÆùÈïúÂÉècnpm 1npm install -g cnpm --registry=https://registry.npm.taobao.org Â¶ÇÈÅáÂà∞npm‰∏ãËΩΩÁªÑ‰ª∂Â§±Ë¥•Êó∂ÔºåÂèØ‰ΩøÁî®cnpmËøõË°å‰∏ãËΩΩÔºåÂè™ÈúÄÂ∞ÜnpmÊõøÊç¢‰∏∫cnpmÔºå‰∏ãÊñπ‰ª£Á†ÅÂ∞ÜÁªßÁª≠‰ΩøÁî®npmÔºåËØ∑Ê†πÊçÆËá™Ë∫´ÁΩëÁªúÁéØÂ¢ÉÈÄâÊã©ÈÄÇÂêàÁöÑ‰ΩøÁî®„ÄÇ‰ª•‰∏äÁéØÂ¢ÉÂ¶ÇÊûúÊ≤°ÊúâÈóÆÈ¢òÔºå‰∏ãÈù¢Â∞±ÂºÄÂßãÂÆâË£Öhexo‰∫Ü 1npm install -g hexo-cli ‰πãÂêéÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊµãËØïËæìÂÖ• 1hexo version ÂàõÂª∫‰∏™‰∫∫Á´ôÁÇπÂÆâË£ÖhexoÂÆåÊàêÂêéÔºåÊé•‰∏ãÊù•Êàë‰ª¨Â∞±ËØ•‰ΩøÁî®hexoÊù•ÂàõÂª∫Ëá™Â∑±ÁöÑ‰∏™‰∫∫Á´ôÁÇπ‰∫Ü„ÄÇ 123hexo init &lt;folder&gt; #‰ΩøÁî®hexoÂëΩ‰ª§Âú®ÊåáÂÆöÁöÑ&lt;folder&gt;Êñá‰ª∂Â§π‰∏ãÂàùÂßãÂåñÂàõÂª∫‰∏Ä‰∏™ÂçöÂÆ¢È°πÁõÆcd &lt;folder&gt; #ËøõÂÖ•ÂàõÂª∫Â•ΩÁöÑÈ°πÁõÆÁõÆÂΩïnpm install #‰ΩøÁî®npmÂÆâË£ÖÊâÄÈúÄ‰æùËµñ„ÄÇ Êñ∞Âª∫ÂÆåÊàêÂêéËØ¶ÁªÜÁöÑÁõÆÂΩïÂê´‰πâ‰ª•ÂèäÈÖçÁΩÆÊïôÁ®ãÔºåËØ∑ÂèÇÈòÖhexoÂÆòÁΩëÊñáÊ°£ÁöÑ‰ªãÁªçÊú¨ÁØáÊñáÁ´†ÊöÇ‰∏çËµòËø∞„ÄÇ‰∏äÈù¢‰ª£Á†ÅÊâßË°åÂÆåÊØï‰πãÂêéÔºåÊàë‰ª¨Â∞±Â∑≤ÁªèÂàõÂª∫Â•Ω‰∫Ü‰∏Ä‰∏™Ëá™Â∑±ÁöÑ‰∏™‰∫∫ÂçöÂÆ¢‰∫ÜÔºå‰∏ãÈù¢Êàë‰ª¨Âè™ÈúÄË¶Å‰ΩøÁî®hexoÁöÑÂëΩ‰ª§Â∑•ÂÖ∑ÁîüÊàêÂçöÂÆ¢Âπ∂Áî®Ëá™Â∏¶ÁöÑÊúçÂä°Âô®Ê®°ÂùóÂêØÂä®ÔºåÈ¢ÑËßà‰∏ãÊàë‰ª¨ÁöÑÂçöÂÆ¢„ÄÇ 123hexo clean #Ê∏ÖÁêÜÂêÑÁßçÁºìÂ≠òÂíåÊóßÊñá‰ª∂hexo g #ÁîüÊàêÈùôÊÄÅÊñá‰ª∂hexo s #ÂºÄÂêØÊúçÂä°Âô®È¢ÑËßà ÊâßË°åÂÆå hexo s ÂêéÂëΩ‰ª§Ë°åÁ™óÂè£Â∞ÜÊèêÁ§∫ÊÇ®Â¶Ç‰∏ã‰ø°ÊÅØ 123456789INFO Start processingWARN ===============================================================WARN ========================= ATTENTION! ==========================WARN ===============================================================WARN NexT repository is moving here: https://github.com/theme-nextWARN ===============================================================WARN It's rebase to v6.0.0 and future maintenance will resume thereWARN ===============================================================INFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop. ÂÖ∂‰∏≠ÊúçÂä°Âô®È¢ÑËßàÂú∞ÂùÄÂ∞±ÊòØ http://localhost:4000/Ëá≥Ê≠§ÔºåÊàë‰ª¨ÁöÑ‰∏™‰∫∫ÂçöÂÆ¢ÂàõÂª∫Â•Ω‰∫ÜÔºå‰∏ãÈù¢Êàë‰ª¨Â∞±Êù•ËøõÂÖ•ÈÉ®ÁΩ≤ÁéØËäÇ„ÄÇ ÈÉ®ÁΩ≤ËøõÂÖ•ËøôÈáåÊâçÊòØÊàë‰ª¨ÁöÑÈáçÁÇπÁéØËäÇÔºåÂõ†‰∏∫ÂØπ‰∫éhexoÊù•ËØ¥ÂÖ•Èó®Á∫ßÁöÑÊïôÁ®ãÈÅçÂ∏ÉÊª°ÁΩëÔºåÈöè‰æøÊêú‰∏Ä‰∏ãÂà∞Â§ÑÈÉΩÊòØÔºå‰ΩÜÊòØÊ∂âÂèäÂà∞‰∏Ä‰∫õÂÖ≥ÈîÆÁöÑÁéØËäÇÔºåÊàñËÄÖÊòØÈ´òÁ∫ßÁÇπÁöÑÊïôÁ®ãÁî®Ê≥ïÔºåÂ∞±ÂæàÂ∞ëÔºåÂÆòÁΩëÊñáÊ°£‰πü‰ªãÁªçÁöÑÂê´Á≥äÂÖ∂ËæûÔºå‰ª•Ëá≥‰∫éÊúâ‰∫õÂú∞ÊñπÊàë‰ª¨ÈÉΩÊêûÈîô‰∫ÜÁî®Ê≥ïÔºåÁîöËá≥Ê†πÊú¨Â∞±‰∏çÊôìÂæóÊÄé‰πàÂéªÁî®„ÄÇÈÇ£‰πàËøôÈáåÈíàÂØπÈÉ®ÁΩ≤ÔºåÊàëËøõË°åÈáçÁÇπ‰ªãÁªçÔºåÂπ∂‰∏î‰ª•ÊàëÊú¨Ë∫´ÁöÑÂçöÂÆ¢ÂÆûÊàòÈÉ®ÁΩ≤ÁªèÈ™å‰∏∫Ê°à‰æãÔºåÊù•ËÆ≤Ëß£hexoÁöÑÈ´òÁ∫ßÈÉ®ÁΩ≤ÊñπÂºèÔºåÊâìÈÄ†ÂèØË∑®Âπ≥Âè∞ÔºåÂ§ö‰∫∫ÂÜô‰ΩúÁºñËæëÊñáÁ´†ÔºåÂèØCDNÂä†ÈÄüÔºåÂèØHTTPSÔºåÂèØÁôæÂ∫¶Êî∂ÂΩïÔºåÂèØËá™ÂÆö‰πâÂüüÂêçÔºåÊó†ÈúÄÂ§áÊ°àÔºåÊó†ÈúÄ‰∏ÄÂàÜÈí±Ë¥πÁî®ÁöÑÈÉ®ÁΩ≤ÊñπÊ°à„ÄÇÊé•‰∏ãÊù•ÊàëÂàÜÊ≠•È™§ÁöÑË∑üÂ§ßÂÆ∂Êù•‰ªãÁªçÊàëÁöÑÈÉ®ÁΩ≤ÊñπÊ°à„ÄÇ ‰ªÄ‰πàÊòØÈÉ®ÁΩ≤ÁªèËøáÁ¨¨‰∏Ä‰∏™Á´†ËäÇÔºåÊàë‰ª¨Áü•ÈÅìÔºåÂΩìÊàë‰ª¨‰ΩøÁî® hexo g Âíå hexo s ÂëΩ‰ª§ÁîüÊàêÂπ∂ÂºÄÂêØÊúçÂä°ÂêéÔºåÊàë‰ª¨Êú¨Âú∞ËÆøÈóÆÁöÑÊµãËØïÂüüÂêçÂÆûÈôÖÊòØÊåáÂêë‰∫ÜÊàë‰ª¨ÂΩìÂâçÁõÆÂΩï‰∏ãÁöÑ public ÁõÆÂΩïÔºå‰πüÂ∞±ÊòØËØ¥ hexo g ÂëΩ‰ª§ÁîüÊàêÁöÑÈùôÊÄÅÊñá‰ª∂Â∞±ÊòØ public ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÔºåÈÉ®ÁΩ≤ÁöÑËøáÁ®ãÂ∞±ÊòØÂ∞ÜËøô‰∏™ public ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÊîæÂà∞Êàë‰ª¨ÁöÑÊúçÂä°Âô®‰∏äËøôÊ†∑Â∞±ÂÆåÊàê‰∫ÜÈÉ®ÁΩ≤„ÄÇ ‰∏∫‰ªÄ‰πàÈÄâÊã©netlifyÊúçÂä°ÈÉ®ÁΩ≤Netlify ÊúâÂ¶Ç‰∏ãÁöÑÂäüËÉΩ: ËÉΩÂ§üÊâòÁÆ°ÊúçÂä°ÔºåÂÖçË¥π CDN ËÉΩÂ§üÁªëÂÆöËá™ÂÆö‰πâÂüüÂêç ËÉΩÂ§üÂêØÁî®ÂÖçË¥πÁöÑTLSËØÅ‰π¶ÔºåÂêØÁî®HTTPS ÊîØÊåÅËá™Âä®ÊûÑÂª∫ Êèê‰æõ Webhooks Âíå API ‰ΩøÁî® NetlifyÈ¶ñÂÖà‰ΩøÁî®‰Ω†ÁöÑ GitHub Ë¥¶Âè∑ÁôªÈôÜ NetlifyÔºåÁôªÈôÜÂêéËøõÂÖ•Á©∫Èó¥ÁÆ°ÁêÜ‰∏≠ÂøÉÔºåÔºåÁÇπÂáªNew site from gitÊåâÈíÆÂºÄÂßãÈÉ®ÁΩ≤‰Ω†ÁöÑÂçöÂÆ¢Ôºö ÁÑ∂ÂêéÊ†πÊçÆËá™Â∑±ÁöÑÊâòÁÆ°Âπ≥Âè∞ÔºåÂèØ‰ª•ÈÄâÊã©GitHub„ÄÅGitLabÊàñËÄÖBitBucketÔºàËøôÈáå‰ª• GitHub ‰∏∫‰æãÔºâÔºö ÁÇπÂáªGitHub‰πãÂêé‰ºöÂºπÂá∫‰∏Ä‰∏™ËÆ©‰Ω†ÊéàÊùÉÁöÑÁ™óÂè£ÔºåÁªô Netlify ÊéàÊùÉÂêéÔºåÂ∞±‰ºöËá™Âä®ËØªÂèñ‰Ω† GitHub ÁöÑ‰ªìÂ∫ìÔºö ÈÄâÊã©‰ªìÂ∫ìÂêéÔºåNetlify ‰ºöËá™Âä®ËØÜÂà´Âà∞ hexoÔºåÂπ∂Â°´ÂÖ•Áõ∏ÂÖ≥‰ø°ÊÅØÔºåËøôÊó∂ÂÄôÂè™Ë¶ÅÊó†ËÑëÁÇπÂáª Deploy siteÂ∞±ÂèØ‰ª•Ôºö Á®çÁ≠â‰∏ÄÊÆµÊó∂Èó¥Â∞±ÂèØ‰ª•ÁúãÂà∞‰Ω†ÁöÑÂçöÂÆ¢Â∑≤ÁªèÈÉ®ÁΩ≤ÊàêÂäüÔºåÂπ∂‰∏îÁªô‰Ω†ÂàÜÈÖç‰∫Ü‰∏Ä‰∏™‰∫åÁ∫ßÂüüÂêçÔºàÂÖàËÆ∞‰∏ãËøô‰∏™‰∫åÁ∫ßÂüüÂêçÔºâÔºö Â¶ÇÊûú‰Ω†Ë¶ÅÁªëÂÆöËá™Â∑±‰π∞ÁöÑÂüüÂêçÔºåÂ∞±Áõ¥Êé•ÁÇπÂáªÁ¨¨‰∫åÊ≠•Set up custom domain„ÄÇÊ∑ªÂä†Ëá™ÂÆö‰πâÂüüÂêçÔºåÂÖàÊ∑ªÂä†‰∏çÂ∏¶wwwÁöÑÂüüÂêç‰Ωú‰∏∫‰∏ªÂüüÂêçÔºåÂÆÉ‰ºöËá™Âä®Ê∑ªÂä†‰∏Ä‰∏™www.domain.ccÈáçÂÆöÂêëÂà∞domain.ccÔºö ËÆæÁΩÆÂÆåÔºåNetlify ‰ºöÊèêÁ§∫‰Ω†ÂéªÂüüÂêçDNSËß£ÊûêÂ§ÑÔºå‰øÆÊîπÂüüÂêçÁöÑCNAMEËÆ∞ÂΩïÔºö Âéª‰Ω†ÁöÑ DNS Ëß£ÊûêÊèê‰æõÂïÜÈáåÈù¢ÔºåÂ∞Ü CNAME ËÆ∞ÂΩïÂÄºÊõ¥Êîπ‰∏∫ Netlify Áªô‰Ω†ÁöÑ‰∫åÁ∫ßÂüüÂêçÔºö ‰øÆÊîπÂÆåÔºåÂ∞±ÂèØ‰ª•ÁúãÂà∞ Netlify Áä∂ÊÄÅÊõ¥Êñ∞Ôºö NetlifyÈªòËÆ§‰ºöÂêØÁî® HTTPSÔºåËÄå‰∏î‰∏çËÉΩÂÖ≥Èó≠ÔºåÂ¶ÇÊûú‰Ω†Ê≤°ÊúâËØÅ‰π¶ÔºåÂÆÉ‰ºöÂ∏Æ‰Ω†ÂéªLet‚Äôs EncryptÁî≥ËØ∑ÂÖçË¥πÁöÑËØÅ‰π¶ÔºåÂΩìÁÑ∂‰Ω†‰πüÂèØ‰ª•Ëá™Â∑±Áî≥ËØ∑ËØÅ‰π¶Ôºå‰ª•ÈòøÈáåÂÖçË¥πÁöÑ ssl ËØÅ‰π¶‰∏∫‰æãÔºå‰∏ãËΩΩËØÅ‰π¶ËØÅ‰π¶Êó∂ÈÄâÊúçÂä°Âô®Á±ªÂûã‰∏∫ApacheÁöÑËØÅ‰π¶ÔºåNetlify ÈÖçÁΩÆÂ°´ÂÜôÂ¶Ç‰∏ãÔºö Ëá™Âä®ÂåñÈÉ®ÁΩ≤‰∏äÈù¢ÊµÅÁ®ãËµ∞ÂÆåÔºåÂÖ∂ÂÆûÂ∑≤ÁªèÂèØ‰ª•Ëá™Âä®ÂåñÈÉ®ÁΩ≤ÔºåÂè™Ë¶Å push ‰∫Ü‰ª£Á†ÅÔºåÂ∞±‰ºöËá™Âä®Êõ¥Êñ∞Ôºå‰Ω†ÂèØ‰ª•Âú®‰∏ãÈù¢Âú∞ÊñπÊü•ÁúãÈÉ®ÁΩ≤ÁöÑ‰ø°ÊÅØÔºö Â¶ÇÊûú‰Ω†‰∏çÊÉ≥Áî® Netlify ÁöÑÊúçÂä°Ôºå‰πüÂèØ‰ª•Áî® [Circle][14] ÁöÑÊúçÂä°ÔºåÂÆÉÂíå GitHub ÂÖ≥ËÅîÔºåÊèê‰æõ CI ÊúçÂä°„ÄÇ‰Ω†ÈúÄË¶ÅÂÅöÁöÑ‰∫ãÂú®Ê†πÁõÆÂΩï‰∏ãÊñ∞Âª∫‰∏Ä‰∏™.circleÊñá‰ª∂Â§πÔºåÈáåÈù¢Êñ∞Âª∫‰∏Ä‰∏™config.ymlÊñá‰ª∂ÔºàÊ≥®ÊÑèÊääÁõ∏ÂÖ≥‰ø°ÊÅØÊõøÊç¢ÊàêËá™Â∑±ÁöÑÔºâÔºö # Javascript Node CircleCI 2.0 configuration file # # Check https://circleci.com/docs/2.0/language-javascript/ for more details # version: 2 jobs: build: docker: # specify the version you desire here - image: circleci/node:7.10 # Specify service dependencies here if necessary # CircleCI maintains a library of pre-built images # documented at https://circleci.com/docs/2.0/circleci-images/ # - image: circleci/mongo:3.4.4 working_directory: ~/repo steps: - checkout # Download and cache dependencies - restore_cache: keys: - v1-dependencies-{{ checksum \"package.json\" }} # fallback to using the latest cache if no exact match is found - v1-dependencies- - add_ssh_keys: fingerprints: - &quot;‰Ω†ÁöÑ ssh keyÁöÑfingerprints&quot; - run: git config --global user.email &quot;user@domain.com&quot; - run: git config --global user.name &quot;user&quot; - run: npm install - run: sudo npm install hexo-cli -g - save_cache: paths: - node_modules key: v1-dependencies-{{ checksum \"package.json\" }} # run tests! - run: hexo clean - run: hexo g - run: hexo dËøôÊó∂ÂÄôÔºå‰Ω†Âè™Ë¶ÅÊèê‰∫§‰ª£Á†ÅÂà∞Ëøô‰∏™‰ªìÂ∫ìÔºåcircle Â∞±‰ºöÂ∏Æ‰Ω†Ëá™Âä®ÈÉ®ÁΩ≤‰∫Ü„ÄÇ ÊâãÊääÊâãÊïô‰Ω†‰ΩøÁî®NetlifyÈÉ®ÁΩ≤ÂçöÂÆ¢ÂèäÈÉ®ÁΩ≤Ëá™Âä®Âåñ hexoÈ´òÁ∫ßÈÉ®ÁΩ≤ÊïôÁ®ã,Âà©Áî®github+netlifyÈÉ®ÁΩ≤","link":"/ÂçöÂÆ¢/netlify/"},{"title":"16Âπ¥‰ºö","text":"Êñ∞ÁöÑ‰∏ÄÂπ¥ÔºåÊñ∞ÁöÑÂºÄÂßã„ÄÇ","link":"/ÁîüÊ¥ª/16/"},{"title":"17Âπ¥‰ºö","text":"‰∏ÄË∑ØÂêåË°åÂÖ±Á≤æÂΩ©ÔºÅ","link":"/ÁîüÊ¥ª/17/"},{"title":"ËûçË¥ù‰∫åÂë®Âπ¥","text":"ËûçË¥ù‰∫åÂë®Âπ¥","link":"/ÁîüÊ¥ª/2year/"},{"title":"ËûçË¥ù‰∏âÂë®Âπ¥","text":"‰∏âÂë®Âπ¥Â∫ÜÂÖ∏üéâ","link":"/ÁîüÊ¥ª/3year/"},{"title":"ÁéãËÄÖËç£ËÄÄ","text":"ü§î","link":"/ÁîüÊ¥ª/AppleSupport/"},{"title":"Êê¨ÂÆ∂","text":"‰∏âÂπ¥ÔºåÂÜçËßÅ„ÄÇ","link":"/ÁîüÊ¥ª/banjia/"},{"title":"ÊúàËñ™Â§öÂ∞ëËÉΩÊíëËµ∑‰∏Ä‰∏™ÂÆ∂Ôºü","text":"","link":"/ÁîüÊ¥ª/beijing/"},{"title":"Êú∫Ê¢∞ÈîÆÁõò","text":"Â∑•Ê¨≤ÂñÑÂÖ∂‰∫ãÔºåÂøÖÂÖàÂà©ÂÖ∂Âô®„ÄÇ","link":"/ÁîüÊ¥ª/jianpan/"},{"title":"2018Âàõ‰∏öËÆ∞ÔºöÂ¶Ç‰ΩïÈÄâÊã©Âêà‰ºô‰∫∫Ôºü","text":"Âàõ‰∏öË∑Ø‰∏äÂç±Êú∫Âõõ‰ºèÔºåÂ¶Ç‰ΩïÁ†¥Â±ÄÔºü ÂæàÂ§öÊúãÂèãÂú®2018Âπ¥ÂÅöÂá∫‰∫ÜÊîπÂèòÔºåËøàÂá∫‰∫ÜÊñ∞ÁöÑ‰∏ÄÊ≠•„ÄÇÊØîÂ¶ÇË∫´ËæπÂá†‰ΩçÊúãÂèãÊ≠£Êë©Êã≥Êì¶ÊéåÂáÜÂ§áÂàõ‰∏ö„ÄÇÁÑ∂ËÄåÔºåÁúãÂà´‰∫∫Âàõ‰∏öÂíåËá™Â∑±Âàõ‰∏öÂÆåÂÖ®ÊòØ‰∏§Âõû‰∫ãÂÑøÔºåËßÅÂæóÂÜçÂ§öÔºåËá™Â∑±Ë∂üÊ∞¥Êó∂‰πüÈöæÂÖçÊúâÊâÄÈ°æËôë„ÄÇ Âú®Ë∑ü‰ªñ‰ª¨ËÅäËøá‰πãÂêéÔºåÊàë‰ª¨ÂèëÁé∞‰∫Ü‰ªñ‰ª¨ÊôÆÈÅçÈù¢‰∏¥ÁöÑ‰∏Ä‰∏™ËØæÈ¢òÔºöÂ¶Ç‰ΩïÈÄâÊã©Âêà‰ºô‰∫∫?ËøôÊòØË∫´ÁªèÁôæÊàòÁöÑËøûÁª≠Âàõ‰∏öËÄÖ‰πüÂæàÈöæÈ©æËΩªÂ∞±ÁÜüÁöÑ‰∏Ä‰∏™ËØæÈ¢òÔºå‰ªäÂ§©Êàë‰ª¨Â∞±Êù•‰∏ÄËµ∑ËÅäËÅä„ÄÇÊú¨ÊñáÂ∞Ü‰ªéËÉΩ‰∏çËÉΩÂíåÊúãÂèã‰∏ÄËµ∑Âàõ‰∏ö„ÄÅÂêà‰ºô‰∫∫Â∫îËØ•‰∏éÊàë‰∫íË°•ËøòÊòØÁõ∏‰ºº„ÄÅÂ¶Ç‰ΩïÂà§Êñ≠ÂèåÊñπÊòØÂê¶ÂøóÂêåÈÅìÂêà„ÄÅÂ¶Ç‰ΩïÂ∫îÂØπÂ∏∏ËßÅÁöÑÂàÜÊ≠ßÂá†‰∏™ÈÉ®ÂàÜÂ±ïÂºÄÊù•ËØ¥„ÄÇ È£éÁâ©ÈïøÂÆúÊîæÁúºÈáèÔºåÊä±ÊåÅÂºÄÈòîÁöÑËÉ∏Ë•ü„ÄÅÊïèÈîêÁöÑÂà§Êñ≠„ÄÅÂùöÈüßÁöÑÊÑèÂøóÔºåÁõ∏‰ø°Â§ßÂÆ∂ËÉΩÂ§ü‰∏éÂøóÂêåÈÅìÂêàÁöÑ‰ºô‰º¥‰∏ÄËµ∑ÔºåË∂äËøáÂ±±‰∏òÔºåÊê∫ÊâãÁ´ô‰∏äÊ¢¶ÊÉ≥‰πãÂ∑Ö„ÄÇ ËÉΩ‰∏çËÉΩÂíåÊúãÂèã‰∏ÄËµ∑Âàõ‰∏öÔºüÂú®Âàõ‰∏öÂàùÊúüÔºåÂàõ‰∏öËÄÖÈÄâÊã©Âêà‰ºô‰∫∫ÂæÄÂæÄ‰ºö‰ªéË∫´ËæπÁöÑÊúãÂèã‚Äú‰∏ãÊâã‚Äù„ÄÇ ‰∏ÄËµ∑Âàõ‰∏öÂèØ‰ª•ËØ¥ÊòØËÆ§Ê∏Ö‰∏Ä‰∏™ÊúãÂèãÁöÑÊúÄÂ•ΩÊñπÂºè„ÄÇ‰∏ÄÁØáÂêç‰∏∫„ÄäÂèãË∞äÁöÑ‰ª£‰ª∑„ÄãÁöÑËÆ∫ÊñáÔºåËÄÉÂØü‰∫Ü3510‰∏™È£éÈô©ÊäïËµÑËÄÖÔºå‰ª•Âèä‰ªñ‰ª¨Âú®1975-2003Âπ¥Èó¥11895‰∏™ÊäïËµÑÈ°πÁõÆ„ÄÇ ËÆ∫ÊñáÂÜôÈÅìÔºåÊúâÁöÑ‰∫∫ÈÄâÊã©‰∏éËá™Â∑±ËÉΩÂäõÁõ∏ÂΩìÁöÑ‰∫∫Âêà‰ΩúÔºåÊØîÂ¶ÇÂêåÊòØÂêçÊ†°ÊØï‰∏öÔºõ‰ΩÜÊõ¥Â§öÁöÑ‰∫∫ÈÄâÊã©‰∏éËá™Â∑±ÁöÑÁÜü‰∫∫Âêà‰ΩúÔºåÊØîÂ¶ÇÊõæÁªèÁöÑÂêåÂ≠¶ÊàñÂêå‰∫ã„ÄÇÁªìÊûúË°®ÊòéÔºåÊåâËÉΩÂäõÊê≠Ê°£ÂèØ‰ª•Â¢ûÂä†ÊäïËµÑÁöÑÊàêÂäüÊ¶ÇÁéáÔºåËÄåÊâæÁÜü‰∫∫Êê≠Ê°£ÔºåÂàô‰ºöÊòéÊòæÈôç‰ΩéÊàêÂäüÁöÑÂèØËÉΩÊÄß„ÄÇ ÊâÄÊúâ‰∫∫ÈÉΩÂñúÊ¨¢Âº∫ËÅîÁ≥ªÔºå‰ΩÜÂÖ≥Á≥ªÊòØÂÖ≥Á≥ªÔºåÂ∑•‰ΩúÂΩíÂ∑•‰Ωú„ÄÇÁé∞Âú®Á§æ‰ºöÂ≠¶Â∑≤ÁªèÊúâ‰∫ÜË∂≥Â§üÂ§öÁöÑËØÅÊçÆËØ¥ÊòéÔºöÂØπÂ∑•‰ΩúÊù•ËØ¥ÔºåÂêå‰π°‰ºöÂíåÊ†°ÂèãÂΩïÂπ∂‰∏çÊòØÊâ©Â±ï‰∫∫ËÑâÁöÑÂ•ΩÂú∞Êñπ„ÄÇ„Ää‰∏≠ÂõΩÂêà‰ºô‰∫∫„ÄãËøôÈÉ®ÁîµÂΩ±‰∏äÊò†ÂêéÔºå‚ÄúÂçÉ‰∏áÂà´Ë∑üÂ•ΩÊúãÂèãÂêà‰ºôÂºÄÂÖ¨Âè∏‚Äù‰πüÊàê‰∫ÜÁÉ≠ËÆÆËØùÈ¢ò„ÄÇÁîµÂΩ±ÁöÑÊúÄÂêéÔºå‰∏â‰ΩçÂêà‰ºô‰∫∫ÂàÜÈÅìÊâ¨Èï≥ÔºåËÄåÂâßÊú¨ÁöÑÂéüÂûã‚Äî‚ÄîÊñ∞‰∏úÊñπÁöÑ‰∏â‰ΩçÂàõÂßã‰∫∫‰πü‰ª•‚ÄúÂàÜÂÆ∂‚ÄùÊî∂Âú∫„ÄÇ ÂΩìÁÑ∂ÔºåÊúãÂèãÂêà‰ºôÂàõ‰∏öÊàêÂäüÁöÑÊ°à‰æã‰πü‰∏çÂú®Â∞ëÊï∞ÔºåÂÜµ‰∏îÔºåÈïøÊúüÁöÑ‰ºô‰º¥ÂÖ≥Á≥ªÊõ¥ÊúâÂä©‰∫éÂÖ±ÂêåÈù¢ÂØπÂàõ‰∏öËøáÁ®ã‰∏≠ÁöÑËâ∞ÈöæÈô©ÈòªÔºåÂõ¢Èòü‰πüÊõ¥ÂÆπÊòìÂú®Âàõ‰∏öÂàùÊúüËé∑ÂæóÊäïËµÑ‰∫∫ÁöÑÈùíÁùê„ÄÇÂ¶ÇÊûúÂú®ÂØªÊâæÂêà‰ºô‰∫∫ÁöÑËøáÁ®ã‰∏≠Ôºå‰Ω†ËßâÂæóËøòÊòØÊüê‰∏™ÊúãÂèãÊõ¥ÈÄÇÂêàÔºåÈÇ£‰πà‰∏ÄÂÆöË¶ÅÂú®Âêà‰Ωú‰πãÂâçÁ∫¶Ê≥ï‰∏âÁ´†ÔºåËÄÉËôëÂà∞ÊúÄÂùèÁöÑÊÉÖÂÜµÔºåÊèêÂâçÁî®‰π¶Èù¢ÂêàÂêåÁöÑÊñπÂºèÁ°ÆÂÆöÂèåÊñπÁöÑË¥£ÊùÉÂà©ÔºåÁî®ËßÑÁ´†Âà∂Â∫¶Êù•Á∫¶ÊùüÊåáÂØºÂèåÊñπÁöÑË°å‰∏∫ÔºåËÄå‰∏çÊòØÈù†‰∫∫ÊÉÖÂÖ≥Á≥ª„ÄÇ ‰∏≠Èó¥‰∏ÄÊó¶ËßâÂæóÂèëÁîü‰∫ÜÈóÆÈ¢òÔºå‰Ω†Â∞±ÂøÖÈ°ªËÄÉËôë‰∏Ä‰∏ãËÉΩÂê¶ÁªßÁª≠Âêà‰Ωú‰∏ãÂéª„ÄÇÂÖ∂ÂÆûÔºåÂæàÂ§öÂêà‰ΩúËÄÖËµ∞‰∏çÂà∞ÊúÄÂêéÂ∞±ÊòØÂõ†‰∏∫‰∏≠Èó¥ÁöÑÂ∞èÈóÆÈ¢òÊ≤°ÊúâËß£ÂÜ≥Ôºå‰∏ÄÁÇπ‰∏ÄÁÇπÁßØÁ¥ØÊúÄÂêéÁàÜÂèëÂá∫Êù•„ÄÇ Âõ†Ê≠§ÔºåËÉΩÂê¶ÂíåÊúãÂèã‰∏ÄËµ∑Âàõ‰∏öËøô‰∏™ÈóÆÈ¢òÔºåÈúÄË¶ÅËæ©ËØÅÊÄùËÄÉ„ÄÇÂ¶ÇÊûúÊúãÂèãÈó¥Áõ∏‰∫í‰∫ÜËß£ÂØπÊñπÁöÑ‰∏™ÊÄßÂíåËÉΩÂäõÔºåÂ∑•‰Ωú‰∏≠ËÉΩÂÅöÂà∞ÂàÜÂ∑•ÊòéÁ°ÆÔºåÁî®ËßÑÁ´†Âà∂Â∫¶Êù•ËßÑËåÉÂèåÊñπÁöÑË°å‰∏∫ÔºåÂèäÊó∂Ëß£ÂÜ≥Â∞èÁüõÁõæÔºåÁõ∏‰∫íÁÖßÈ°æÔºå‰∏ÄËµ∑ÂàÜÊãÖÔºåÂÖ±ÂêåÂ•ãÊñóÔºåÈÇ£‰πàÂàõ‰∏öÊàêÂäüÂ∞±‰ºöÊàê‰∏∫Â§ßÊ¶ÇÁéá‰∫ã‰ª∂„ÄÇ Âêà‰ºô‰∫∫Â∫îËØ•‰∏éÊàë‰∫íË°•ËøòÊòØÁõ∏‰ººÔºü‰∏Ä‰∏™ËæÉ‰∏∫ÂêàÁêÜÁöÑÁ≠îÊ°àÊòØÔºöÁêÜÂøµÂíå‰ª∑ÂÄºËßÇ‰∏äË¶ÅÁõ∏‰ººÔºåËÉΩÂäõÂíåÁªèÈ™å‰∏äË¶Å‰∫íË°•„ÄÇ ÁêÜÂøµÂíå‰ª∑ÂÄºËßÇ‰∏äÁöÑÁõ∏ËøëÔºåÂèØ‰ª•‰øùËØÅ‰Ω†‰ª¨Âú®ÈáçÂ§ßÂéüÂàôÈóÆÈ¢ò‰∏äÁöÑÂà§Êñ≠ÊòØÊØîËæÉ‰∏ÄËá¥ÁöÑÔºå‰∏çËá≥‰∫éÂá∫Áé∞Ê†πÊú¨ÊÄßÁöÑÂÜ≤Á™Å„ÄÇËøô‰∫õÈáçÂ§ßÁöÑÂéüÂàôÈóÆÈ¢òÂåÖÊã¨‰ºÅ‰∏öÁöÑÊàòÁï•ÊñπÂêë„ÄÅÂà©ÁõäÂàÜÈÖçÊú∫Âà∂„ÄÅÂÅö‰∫ãÁöÑÂü∫Êú¨Â∫ïÁ∫øÁ≠âÁ≠â„ÄÇ Âú®Ëøô‰∫õÈóÆÈ¢ò‰∏äÂá∫Áé∞‰∏çÂêåÊÑèËßÅÔºåÈÄöÂ∏∏ÂæàÈöæÂèñÂæóÂÖ±ËØÜ„ÄÇÂõ†‰∏∫‰∏™ÊÄßÂíå‰ª∑ÂÄºËßÇÁöÑÂΩ¢ÊàêÔºåÈÄöÂ∏∏ÈÉΩ‰∏çÊòØ‰∏ÄÊúù‰∏ÄÂ§ïÁöÑ‰∫ãÊÉÖÔºå‰πüÂ∞±ÊòØÊàë‰ª¨Â∏∏ËØ¥ÁöÑ‚ÄúÊ±üÂ±±ÊòìÊîπÔºåÊú¨ÊÄßÈöæÁßª‚Äù„ÄÇÂ¶ÇÊûúÂú®Âàõ‰∏öÁöÑËâ∞ÈöæÁéØÂ¢É‰∏ãÔºåÂèåÊñπËøòË¶ÅÊù•Á£®ÂêàËøô‰∏™Â±ÇÈù¢ÁöÑ‰∏úË•øÔºåÂ∞±‰ºöÈùûÂ∏∏ÁóõËã¶„ÄÇ ËÉΩÂäõÂíåÁªèÈ™å‰∏äÁöÑ‰∫íË°•Áõ∏ÂØπÊõ¥Â•ΩÁêÜËß£„ÄÇ‰Ω†ÊìÖÈïø‰∫ßÂìÅÔºå‰ªñ‰∏ì‰∫éÁ†îÂèëÔºõ‰Ω†Êúâ‰∏∞ÂØåÁöÑËøêËê•ÁªèÈ™åÔºå‰ªñÂàôÂØπ‰∫éÂïÜ‰∏öÊ®°ÂºèÁöÑÂª∫Á´ãÊõ¥ÊúâÂøÉÂæóÔºõ‰Ω†ÂØπÊï∞Â≠ó‰∏çÊïèÊÑüÔºå‰ªñÂàôÊòØÊäïËµÑÂíåË¥¢Âä°È¢ÜÂüüÁöÑËµÑÊ∑±‰∫∫Â£´„ÄÇËøô‰∫õÈÉΩÊòØÂæàÂ•ΩÁöÑ‰∫íË°•„ÄÇ ‰∫íË°•ÂèØ‰ª•ËÆ©‰Ω†‰ª¨Âú®ÂÖ∑‰Ωì‰∫ãÊÉÖÁöÑÊé®Ëøõ‰∏≠‰∫ãÂçäÂäüÂÄçÔºåÂπ∂Âª∫Á´ãËµ∑ÂØπ‰∫éÂØπÊñπÂú®‰∏ì‰∏öÈ¢ÜÂüüÁöÑ‰æùÈù†Âíå‰ø°‰ªª„ÄÇ‰∫∫‰∏çÂèØËÉΩÊòØÂÖ®ËÉΩÁöÑÔºåÂ¶ÇÊûú‰∏ÄÂàáÊú™Áü•ÁöÑÈ¢ÜÂüüÈÉΩÈúÄË¶Å‰Ω†Ëá™Â∑±Êù•Êë∏Á¥¢ÔºåË¥πÊó∂Ë¥πÂäõ‰∏çËØ¥ÔºåÈ£éÈô©ËøòÂæàÂ§ß„ÄÇ ÂØπ‰∫éÁõ∏‰ººËøòÊòØ‰∫íË°•Ëøô‰∏™ÈóÆÈ¢òÁöÑËß£ËØªÔºåËøòÂèØ‰ª•ÂèçÂêëËøõË°å„ÄÇÊØîÂ¶Ç‰Ω†‰ª¨ÊòØËÉΩÂäõÁªèÈ™å‰∏äÁöÑÁõ∏ËøëÔºåËÄåÂú®ÁêÜÂøµ‰∏ä‰∫íË°•Ôºå‰Ω†ÂèØ‰ª•ÊÉ≥Ë±°‰∏Ä‰∏ãÊòØ‰∏™‰ªÄ‰πàÂ±ÄÈù¢Ôºå‰∏ÄÂÆöÊòØ‰Ω†‰∏ç‰ºöÁöÑ‰ªñ‰πü‰∏ç‰ºöÔºå‰Ω†ËßâÂæóÂØπÁöÑ‰ªñËßâÂæó‰∏çÂØπÔºåÈÇ£Â∞±ÁúüÁöÑÂæàÈöæÂêà‰Ωú‰∏ãÂéª‰∫Ü„ÄÇ Â¶Ç‰ΩïÂà§Êñ≠ÂèåÊñπÊòØÂê¶ÂøóÂêåÈÅìÂêàÔºüÂØπ‰∫éËøô‰∏™ÈóÆÈ¢òÔºå‰∏çÂêåÁöÑ‰∫∫ÂèØËÉΩ‰ºöÁªôÂá∫ÈùûÂ∏∏‰∏çÂêåÁöÑÁ≠îÊ°à„ÄÇÈõ∑ÂÜõÂ∞±ÊõæËØ¥ËøáÔºå‰ªñÊâæ‰∫∫Êúâ‰∏§‰∏™Ë¶ÅÁ¥†Ôºö‚Äú‰∏ÄË¶ÅÊúÄ‰∏ì‰∏öÔºåÂ∞èÁ±≥ÁöÑÂêà‰ºô‰∫∫ÈÉΩÊòØÂêÑÁÆ°‰∏ÄÂùóÔºåËøôÊ†∑ËÉΩ‰øùËØÅÊï¥‰∏™ÂÜ≥Á≠ñÈùûÂ∏∏Âø´ÔºåÊää‰∏öÂä°‰∫§Áªô‰ªñÔºåË¶ÅËÉΩÂÆûÊâìÂÆûÂÅöÂá∫ÊàêÁª©Êù•Ôºõ‰∫åË¶ÅÊúÄÂêàÈÄÇÔºå‰∏ªË¶ÅÊòØÊåáË¶ÅÊúâÂàõ‰∏öÂøÉÊÄÅÔºåÂØπÊâÄÂÅöÁöÑ‰∫ãË¶ÅÊûÅÂ∫¶ÂñúÊ¨¢ÔºåÊúâÂÖ±ÂêåÁöÑÊÑøÊôØÔºåËøôÊ†∑Â∞±‰ºöÊúâÂæàÂº∫ÁöÑÈ©±Âä®Âäõ„ÄÇ‚Äù Èõ∑ÂÜõËØ¥Ôºå‰ªñÂú®‰∏â‰∏™ÊúàÁöÑÊó∂Èó¥ÈáåËßÅ‰∫ÜË∂ÖËøá100‰ΩçÂÅöÁ°¨‰ª∂ÁöÑ‰∫∫ÈÄâÔºåÁªà‰∫éÊâæÂà∞‰∫ÜË¥üË¥£Á°¨‰ª∂ÁöÑËÅîÂêàÂàõÂßã‰∫∫Âë®ÂÖâÂπ≥ÂçöÂ£´Ôºå‰∏§‰∫∫Á¨¨‰∏ÄÊ¨°ËßÅÈù¢Â∞±Ë∞à‰∫Ü12‰∏™Â∞èÊó∂„ÄÇ ËÄåÂë®È∏øÁ•éË°®Á§∫Ôºå‰ªñ‰ºöÈÄâÊã©ÂÖ∑Â§áËøôÂõõÁßçÁ¥†Ë¥®ÁöÑÂêà‰ºô‰∫∫ÔºöÈ¶ñÂÖàÂ∫îËØ•ÊúâÂàõ‰∏öÁ≤æÁ•ûÔºõÂÖ∂Ê¨°Ë¶ÅÊúâÂæàÂº∫ÁöÑÂ≠¶‰π†ËÉΩÂäõÔºõÁ¨¨‰∏âÔºåË¶ÅÊúâÂæàÂ•ΩÁöÑÂºÄÊîæÂêà‰ΩúÂøÉÊÄÅÔºõÊ≠§Â§ñÔºåËøòË¶ÅËÉΩËá™ÊàëÊøÄÂä±ÔºåËá™ÊàëÈ©±Âä®ÔºåÂêåÊ†∑‰∏Ä‰ª∂‰∫ãÔºåÁî®ÊâìÂ∑•ÁöÑÂøÉÊÄÅÂíåÁî®Âàõ‰∏öÁöÑÂøÉÊÄÅÂÅöÔºåÊïàÊûúÂÆåÂÖ®‰∏ç‰∏ÄÊ†∑„ÄÇ ËôΩÁÑ∂Á≠îÊ°àÂõ†‰∫∫ËÄåÂºÇÔºå‰ΩÜ‰ªçÁÑ∂ÂèØ‰ª•ÊÄªÁªìÂá∫‰∏Ä‰∫õÂà§Êñ≠Ê†áÂáÜÔºå‰ª•‰∏ãÂá†Êù°ÂèØ‰∏∫‰Ω†ÈÄâÊã©Âêà‰ºô‰∫∫Êó∂Êèê‰æõÂèÇËÄÉ„ÄÇ 1„ÄÅÂÖ≥Á≥ªÊúâ‰∏ÄÂÆöÁöÑÊ∑±Â∫¶ÂíåÂπøÂ∫¶ÔºåÂΩºÊ≠§‰ø°‰ªªÂÖ±‰∫ã‰∏îÁª¥ÊåÅÊúãÂèãÂÖ≥Á≥ªÂ§öÂπ¥ÁöÑÂàõ‰∏öÂõ¢ÈòüÂÖ≥Á≥ªÊõ¥Ê∑±ÔºåÊúâÂèØËÉΩÁªèÂèó‰ΩèÁ¥ßÂº†ÂíåÂÜ≤Á™ÅÁöÑËÄÉÈ™å„ÄÇÂêà‰ºô‰∫∫Êú™ÂøÖÈúÄË¶ÅÊàê‰∏∫ÊúÄË¶ÅÂ•ΩÁöÑÊúãÂèãÔºå‰ΩÜÂ¶ÇÊûú‰ªñ‰ª¨Áõ∏‰∫íÂñúÊ¨¢ÁöÑËØù‰∫ãÊÉÖÂèØËÉΩ‰ºöÊõ¥Â•ΩÂäû‰∫õ„ÄÇÊõ¥ÈáçË¶ÅÁöÑÊòØÔºåÂàõÂßã‰∫∫‰πãÈó¥Â∫îËØ•Â∞äÈáçÂΩºÊ≠§‰ª•Âèä‰ªñ‰ª¨ÁªôÂõ¢ÈòüÂ∏¶Êù•ÁöÑ‰∏çÂêåËÉΩÂäõ„ÄÇ‰∏ç‰ø°‰ªªÂêà‰ºô‰∫∫ÁöÑËÉΩÂäõ‰ºöÂØºËá¥Êâã‰º∏ËøáÂ§¥ÔºåËøòÂèØËÉΩ‰ºöÂØºËá¥ÊéßÂà∂ÊùÉ‰πã‰∫â„ÄÇÂú®ËøôÁßçÁ™ùÈáåÊñóÁöÑÊÉÖÂÜµ‰∏ãÂ§ßÈÉ®ÂàÜÁöÑÂêà‰ΩúÂÖ≥Á≥ªÈÉΩÊó†Ê≥ïÁª¥Á≥ª„ÄÇ 2„ÄÅ‰∫ÜËß£ÂΩºÊ≠§ÁöÑ‰ºòÂäøÂíåÂä£ÂäøÔºåÂàÜÂ∑•ÊòéÁ°ÆÂ∞äÈáçÂΩºÊ≠§ÁöÑÊäÄËÉΩÂíå‰ºòÂäøÂπ∂‰∏çÊÑèÂë≥ÁùÄÂàõÂßã‰∫∫Â∞±‰∏çÈúÄË¶ÅÂÆ°ËßÜÂêà‰ºô‰∫∫ÁöÑÂº±ÁÇπ‰∫Ü„ÄÇÂèãË∞äÊõ¥‰πÖËá™ÁÑ∂‰πü‰ºöÊõ¥‰∫ÜËß£Êüê‰∫∫ÁöÑÁâπÈïøÂíåÊäÄËÉΩ„ÄÇËøô‰∫õ‰∏çÂêåÁöÑÊäÄËÉΩÊúâÂä©‰∫éÂàõÂßã‰∫∫Âõ¢ÈòüËá™ÁÑ∂Âú∞ÂàÜÊ∏ÖË¥£‰ªª„ÄÅËßíËâ≤ÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãËøòÂèØ‰ª•ÂàÜÊ∏ÖÂ§¥Ë°î„ÄÇÊ†πÊçÆÊØè‰∏Ä‰ΩçÂêà‰ºô‰∫∫ÁöÑÊäÄËÉΩÊòéÁ°ÆÂàíÂàÜËÅåË¥£ÔºåÂØπÂàõ‰∏öÁöÑÂ∏ÆÂä©ÂæàÂ§ß„ÄÇÂÅö‰∫ãÁöÑÊó∂ÂÄôÊØè‰∏™‰∫∫Ë¶ÅÊúâÁã¨Á´ãÁöÑËßíËâ≤Ôºå‰ΩÜÂêåÊó∂Ê∞∏ËøúË¶ÅÂØπÂÖ∂‰ªñÂêà‰ºô‰∫∫ÁöÑÂèçÈ¶àÊåÅÂºÄÊîæÊÄÅÂ∫¶„ÄÇ 3„ÄÅÁ°Æ‰øùÊâÄÊúâÂêà‰ºô‰∫∫ÂØπÊàêÂäüÂíåÂ§±Ë¥•ÁöÑÂÆö‰πâ‰∏ÄËá¥ÈüßÊÄßÊúÄÂº∫ÁöÑÂàõÂßã‰∫∫‰∏ç‰ºö‰ªéË¥¢Âä°ÁöÑËßíÂ∫¶ÂéªË°°ÈáèËá™Â∑±ÁöÑÂàùÂàõ‰ºÅ‰∏öÊòØÂê¶ÊàêÂäüÔºåÁõ∏ÂèçÔºå‰ªñ‰ª¨‰ºö‰ªé‰ΩøÂëΩÁöÑËßíÂ∫¶ÂéªË°°Èáè„ÄÇ‰ªñ‰ª¨ÁöÑÂàùÂàõ‰ºÅ‰∏öÂè™ÊòØËøΩÊ±ÇÂÆûÁé∞‰ΩøÂëΩÁöÑÊâãÊÆµ„ÄÇ‰ΩÜÊòØÔºåÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÂàõÂßã‰∫∫ÈÉΩËøô‰πàÁúãÔºåÁîöËá≥‰∏ÄÂºÄÂßãÂÖ≥Ê≥®‰ΩøÂëΩÁöÑÂàõÂßã‰∫∫ÊúâÊó∂ÂÄôÂà∞ÂêéÈù¢‰πü‰ºöËΩ¨ÂêëËÄÉËôëË¥¢Âä°ÊñπÈù¢ÁöÑ‰∫ãÊÉÖ„ÄÇ ÊúâÁöÑÂàõÂßã‰∫∫ÂèØËÉΩÂøóÂ≠òÈ´òËøúÔºå‰∏∫‰∫ÜÂ∞ΩÂø´ÂÅöÂ§ßÊÑøÊÑèÁÉßÂæàÂ§öÈí±ÔºåËÄåÊúâÁöÑ‰∫∫Â∏åÊúõÈÄêÊ≠•ÊâìÁ£®‰∫ßÂìÅÔºåÈôêÂà∂‰∫∫Êï∞ËßÑÊ®°Âíå‰øùÁïôÁé∞ÈáëÂ∞∫Â∫¶„ÄÇ‰∏ç‰ªÖÂØπÊàêÂäüÁöÑËÆ§Áü•‰ºöÂΩ±ÂìçËøêËê•ÂÜ≥Á≠ñÔºåÂØπÂ§±Ë¥•ÁöÑËÆ§Áü•ÂêåÊ†∑‰ºöËµ∑‰ΩúÁî®„ÄÇ Âú®Âàõ‰∏öËøáÁ®ã‰∏≠ÔºåÂÖ∂‰∏≠‰∏Ä‰ΩçÂêà‰ºô‰∫∫ÊÄ•ÁùÄÈÄÄÂá∫ÁöÑÊïÖ‰∫ãÂ±°ËßÅ‰∏çÈ≤úÔºåÂõ†Ê≠§Ëøô‰∏™ÊïôËÆ≠ÂÄºÂæó‰∏ÄÊèêÂÜçÊèê„ÄÇÂØπ‰∫éÊã•ÊúâÊàêÂäü‰ºÅ‰∏öÁöÑÂàõÂßã‰∫∫Êù•ËØ¥ÔºåÈÅøÂÖçÂú®Ëøô‰∏™ÈóÆÈ¢ò‰∏äÂèëÁîüÂÜ≤Á™ÅÁöÑÂÖ≥ÈîÆÊòØÂÆöÊúüËÆ®ËÆ∫Ëøô‰ª∂‰∫ã„ÄÇÂ∫îËØ•Âú®ÂÖ¨Âè∏Êó©ÊúüÂ∞±ËÆæÂÆöÂ•ΩÁõÆÊ†áÔºåÂπ∂‰∏îÂØπËøô‰∏™ËØùÈ¢òËøõË°åÂÆöÊúüÂ§çËÆÆ„ÄÇ 4„ÄÅÊâÄÊúâÂêà‰ºô‰∫∫ÂùáÂ∫îÂØπËÇ°ÊùÉÂàÜÈÖçÊª°ÊÑèÂìà‰ΩõÊïôÊéàWassermanÂèëÁé∞Ôºå73%ÁöÑËÅîÂêàÂàõ‰∏öÂõ¢Èòü‰∏ÄËà¨Âú®ÂÖ¨Âè∏ÊàêÁ´ã30Â§©ÂÜÖÂ∞±Á°ÆÂÆö‰∫ÜÂ¶Ç‰ΩïËøõË°åËÇ°ÊùÉÂàÜÈÖç„ÄÇËÇ°ÊùÉÂàÜÈÖçÂΩìÁÑ∂ÊòØ‰ªª‰ΩïÂÖ±ÂêåÂàõ‰∏öÁöÑ‰∫∫ÈÉΩË¶ÅÈ¶ñÂÖàËÄÉËôëÁöÑ‰∫ãÊÉÖ‰πã‰∏ÄÔºå‰ΩÜ‰∫ãÂÆû‰∏äÂú®ÈÇ£‰∏™Êó∂ÂÄôÔºåÊ≤°‰∫∫Áü•ÈÅìË∞ÅÂπ≤Ê¥ªÊúÄÂçñÂäõÔºåË∞ÅÂØπÂàùÂàõ‰ºÅ‰∏öÁöÑË¥°ÁåÆÊúÄÊúâ‰ª∑ÂÄº„ÄÇËøáÊó©Á°ÆÂÆöËÇ°ÊùÉÂàÜÈÖç‰ºöÂØºËá¥ÂêéÈù¢ÂèëÁîüÈóÆÈ¢ò„ÄÇÂ¶ÇÊûúÂèØ‰ª•ÁöÑËØùÔºåÊúÄÂ•ΩÁ≠âÂà∞‰Ω†ÊúâÊú∫‰ºö‰∫ÜËß£Â§ßÂÆ∂‰∏ÄËµ∑Â∑•‰Ωú‰ºöÊòØ‰ªÄ‰πà‰∏™ÊÉÖÂÜµÂêéÂÜçÊ≠£ÂºèÂàÜËõãÁ≥ï„ÄÇËØùËôΩÂ¶ÇÊ≠§ÔºåËøô‰ª∂‰∫ãÊÉÖËøòÊòØ‰∏çË¶ÅÊãñÂ§™‰πÖÔºåÂõ¥ÁªïËÇ°ÊùÉÁöÑÂàÜÊ≠ßÊúÄÂ•ΩÂú®ÂÖ¨Âè∏Êó©ÊúüÂ∞±Ëß£ÂÜ≥Êéâ„ÄÇ 5„ÄÅÊ∞∏ËøúË¶ÅÁõ∏‰∫íÊîØÊåÅËøôËØùÂê¨‰∏äÂéª‰ºº‰πéÂ§™Á©∫Ê≥õÔºå‰ΩÜÊòØÂêà‰ºô‰∫∫ÁöÑÂÖ≥Á≥ª‰πüÂèØËÉΩ‰ºöÂèçÂ§çÊó†Â∏∏ÔºåÂ∞§ÂÖ∂ÊòØÂú®ÂèóÂà∞‰∏çÂêåËßÇÁÇπ„ÄÅËë£‰∫ã‰ºöÊàêÂëòÁ≠âÁöÑÂΩ±Âìç‰∏ã„ÄÇÂêà‰ºô‰∫∫‰πãÈó¥ÁöÑÁõ∏‰∫íÊîØÊåÅÂèØÂ∏¶Êù•‰ø°ÂøÉÔºåÁ°Æ‰øùÂêà‰ºô‰∫∫ÂíåÂëòÂ∑•ÈÉΩÊúâÂÖ±ÂêåÁöÑ‰ΩøÂëΩÊÑü„ÄÇ Âõ¢ÈòüÂ∫îËØ•Êó©ÁÇπÁêÜËß£‰∏Ä‰ª∂‰∫ãÔºå‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÂêà‰ºô‰∫∫‰πãÈó¥ÈÉΩÂ∫îËØ•ËÉåÈù†ËÉåÁõ∏‰∫íÊîØÊåÅÔºåÊâÄ‰ª•Âêà‰ºô‰∫∫Ë¶ÅÂ∞ΩÈáèÈÅøÂÖçÂΩìÁùÄÂëòÂ∑•„ÄÅËë£‰∫ã‰ºöÁ≠â‰∫∫ÁöÑÈù¢‰∫íÁõ∏ÊãÜÂè∞ÔºåËøôÊ†∑ËÉΩÂ§üËÆ©ÂÖ¨Âè∏ÂÖ∂‰ªñ‰∫∫ÊÑüËßâÂà∞‰ªñ‰ª¨ÂèãÊÉÖ‰πãÁâ¢Âõ∫ÔºåËÆ©ÊØè‰∏Ä‰ΩçÂêà‰ºô‰∫∫ÈÉΩËÉΩ‰øùÊåÅÈïáÂÆöÔºåÂõ†‰∏∫‰ªñ‰ª¨Áü•ÈÅìÂØπÊñπ‰∏ÄÂÆö‰ºöÊîØÊåÅËá™Â∑±ÁöÑ„ÄÇ Â¶Ç‰ΩïÂ∫îÂØπÂ∏∏ËßÅÁöÑÂàÜÊ≠ßÔºü1„ÄÅÂÖ¨Âè∏Ëµ∞ÂêëÁöÑÊ≠ßËßÅÂú®0Âà∞1ÁöÑÊé¢Á¥¢ÊúüÔºåÂÖ¨Âè∏ÁöÑËµ∞ÂêëÂæÄÂæÄÊòØÁî±Âêà‰ºô‰∫∫‰∏ÄËµ∑ÂÜ≥ÂÆöÁöÑ„ÄÇ‰ΩÜËøõÂÖ•1Âà∞100ÁöÑÊâ©Âº†ÊúüÔºå‰∏Ä‰∏™Âπ¥ËΩª‰ºÅ‰∏öÈÄöÂ∏∏‰ºöÂºÄÂßãÊúâËë£‰∫ã‰ºö‰ª•ÂèäÈáçË¶ÅÁöÑ‰æõÂ∫î„ÄÅÈÄöË∑Ø‰ºô‰º¥„ÄÇ‰πÖËÄå‰πÖ‰πãÔºåÂêà‰ºô‰∫∫ÂØπ‰∫éÂÖ¨Âè∏Êú™Êù•Ëµ∞ÂêëÁöÑÁúãÊ≥ïÔºåÂ∏∏Â∏∏‰ºöË∂äÊù•Ë∂äÂèòÂæóÂàÜÊ≠ß„ÄÇ Èò≤ËåÉËøô‰∏™Èô∑Èò±Ë¶Å‰ªéÊ†πÊ∫êÂºÄÂßãÔºöÊØèÂΩìCEOÊúâ‰∫ÜÊñ∞ÁöÑËµÑËÆØ„ÄÅÊàêÈïø„ÄÅÂ≠¶‰π†„ÄÅÈ¢ÜÊÇüÔºåÂ∫îËØ•ÁßØÊûÅÂú∞‰∏éÂêà‰ºô‰∫∫ÂàÜ‰∫´ÔºåÂçèÂä©‰ªñ‰ª¨Ëé∑Âæó‰∏é‰Ω†Á±ª‰ººÁöÑÊàêÈïø„ÄÇÂêåÊó∂Ôºå‰Ω†Â∫îËØ•ÊääÂ∞èËåÉÂõ¥ÁöÑÂÜ≥Á≠ñÊéàÊùÉÂá∫ÂéªÔºåËÆ©‰ªñ‰ª¨‰πüËÉΩÁªßÁª≠‰∏ªÂØºÂÖ¨Âè∏Êüê‰∏ÄÈÉ®ÂàÜÁöÑËµ∞Âêë„ÄÇÊúÄÂêéÔºå‰Ω†Â∫îËØ•ÁßØÊûÅÁÆ°ÁêÜÂ§ßÂÆ∂ÂØπÂÜ≥Á≠ñÁöÑÊúüÊúõÂÄºÔºåÊñ∞ÂàõÂÖ¨Âè∏ÂøÖÈ°ªÂú®‚ÄúÂø´‚Äù‰∏é‚ÄúÂ•Ω‚Äù‰πãÈó¥ÂÅöÂá∫Âπ≥Ë°°ÔºåÂõ†Ê≠§ÂÜ≥Á≠ñÊ±ÇÁöÑÊòØÂ§öÊï∞ÂØπÔºåËÄå‰∏çÊòØÊ†∑Ê†∑ÂØπ„ÄÇ 2„ÄÅÊó†Ê≥ïÈÄÇÂ∫îÂà∂Â∫¶0Âà∞1ÁöÑÊñ∞ÂàõÂõ¢ÈòüÊ±ÇÂø´ÔºåÂõ†Ê≠§‰∏ç‰ºöÊúâÂ§™Â§öÂà∂Â∫¶„ÄÇËøõÂÖ•1Âà∞100Èò∂ÊÆµÔºåÂÖ¨Âè∏ÂäøÂøÖË¶ÅÂºÄÂßãÂª∫Á´ã‰∏Ä‰∫õÁÆ°ÁêÜÁ≥ªÁªüÔºå‰ª•Âú®È£éÈô©‰∏éÂèëÂ±ï‰∏≠Èó¥ÂèñÂæóÂπ≥Ë°°„ÄÇ Êúâ‰∫õ‰π†ÊÉØ‰∫ÜËØ¥Âπ≤Â∞±Âπ≤ÁöÑÂêà‰ºô‰∫∫ÔºåÂú®Ê≠§Êó∂‰ºö‰∫ßÁîü‰∏•ÈáçÁöÑ‰∏çÈÄÇÂ∫îÔºåÊó∂Èó¥‰∏ÄÈïøÁîöËá≥‰ºöËßâÂæóÂÖ¨Âè∏ËÉåÁ¶ª‰∫ÜÂàõÂäûÁöÑÂàùË°∑„ÄÇË¶ÅËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÈô§‰∫ÜÂèäÊó©ÂèëÁé∞ÂèäÊó©ËæÖÂØºÂ§ñÔºåËØ∑‰ªñ‰ª¨ÂèÇ‰∏é„ÄÅ‰∏ªÂØºÂà∂Â∫¶ÁöÑËÆæËÆ°Ôºå‰πüÊòØÂçèÂä©Âêà‰ºô‰∫∫ÈÄÇÂ∫îÊñ∞Âà∂Â∫¶ÁöÑÊñπÊ≥ï„ÄÇ 3„ÄÅË∂äÊùÉÁÆ°ÁêÜÂΩìÂÖ¨Âè∏ÂºÄÂßãÊúâÈÉ®Èó®„ÄÅÈÉ®Èó®‰∏ªÁÆ°ÔºåÂêà‰ºô‰∫∫ËøòÊòØ‰π†ÊÉØÁúã‰∏çÈ°∫ÁúºÂ∞±ÁÆ°ÔºåÂÆπÊòìÈÄ†ÊàêÁªèÁêÜ‰∫∫ÁöÑÂõ∞Êâ∞„ÄÇÊõ¥ÊúâÁîöËÄÖÔºåÈÄ†ÊàêÂêà‰ºô‰∫∫ÂØπÁªèÁêÜ‰∫∫‰∏ç‰ø°‰ªªÔºåÂèçËÄåËÆ©ÁªèÁêÜ‰∫∫Ê≤°ÊúâË∂≥Â§üÁöÑÊó∂Èó¥„ÄÅÁ©∫Èó¥ÂéªÈÄÇÂ∫î„ÄÅÂ≠¶‰π†„ÄÇËøô‰∏™ÈóÆÈ¢òÈÄöÂ∏∏ÊòØÊÉØÊÄß‰ΩøÁÑ∂ÔºåÈáçÁÇπÂ∞±ÊòØË¶ÅÊâìÁ†¥ÂÆÉ„ÄÇÊâÄ‰ª•ÔºåÁúãÂà∞ËøôÊ†∑ÁöÑË°å‰∏∫Ë¶ÅËµ∂Âø´ÊèêÈÜí‰ºô‰º¥‰ª¨Ê≥®ÊÑè„ÄÇ 4„ÄÅÊó†Ê≥ïË∑ü‰∏äÂÖ¨Âè∏ÊàêÈïøÁöÑÈúÄË¶ÅÂú®ÂÖ¨Âè∏Âø´ÈÄüÊâ©Âº†ÊúüÔºå‰∏Ä‰∏™3‰∫∫‰∫ßÂìÅÂõ¢ÈòüÂèØËÉΩÂú®‰∏ÄÂπ¥ÂÜÖÊàêÈïø‰∏∫30‰∫∫ÔºåËÄå‰∏§ËÄÖ‰πãÈó¥ÁÆ°ÁêÜ‰∏äÁöÑ‰∏çÂêåÔºåÂ∏∏Â∏∏‰ºöËÆ©Êú¨Êù•ÊìÖÈïøÊäÄÊúØ„ÄÅ‰∫ßÂìÅÔºå‰ΩÜ‰ªéÊù•Ê≤°ÊúâÁÆ°ÁêÜ‰∏≠Â§ßÂûãÂõ¢ÈòüÁªèÈ™åÁöÑÂêà‰ºô‰∫∫‰∏ÄÊó∂Èó¥Ë∑ü‰∏ç‰∏äÂÖ¨Âè∏ÂèëÂ±ïÁöÑÊ≠•‰ºê„ÄÇ ÂõûÂà∞Êâ©Âº†ÂâçÔºå‰Ω†Â∫îËØ•Êó©Êó©ÊâæÂà∞Â•ΩÁöÑCTO MentorÔºåÂú®Êâ©Âº†‰∏≠ÔºåÁªèÂ∏∏ÈºìÂä±‰ªñÂú®ÁÆ°ÁêÜÁü•ËØÜ‰∏éËÉΩÂäõ‰∏äÁ≤æËøõ„ÄÇÊâ©Âº†ÂêéÔºåÂ¶ÇÊûú‰ªñÁúüÁöÑÊó†Ê≥ïÈÄÇÂ∫îÔºå‰πüÊØîËæÉËÉΩÂ§üÊé•ÂèóÂéªÂØªÊâæÊõ¥ÊúâÁªèÈ™åÁöÑCTOÔºåËÄåËá™Â∑±ÈÄÄÂ±ÖÈÉ®Èó®‰∫åÊääÊâã„ÄÅ‰∏âÊääÊâã„ÄÇ 5„ÄÅÂà©ÁõäÂàÜÈÖçÂΩìÂÖ¨Âè∏Ë∂äÊù•Ë∂äÊàêÂäü„ÄÅË∂äËµöÈí±„ÄÅÁ¶ªIPOË∂äËøëÔºåËÇ°ÊùÉ‰∏éÂà©ÁõäÁöÑÈóÆÈ¢òÂ∞±‰ºöË∂äÂÆπÊòì‰∫ßÁîü„ÄÇÂ∞§ÂÖ∂ÂΩìÂàùÁöÑËÇ°ÊùÉÂàÜÈÖçÂ¶ÇÊûúÊ≤°ÊúâÂΩ∞ÊòæÊØè‰∏™Âêà‰ºô‰∫∫ÁöÑÁõ∏ÂØπ‰ª∑ÂÄºÔºåÈÇ£Âõ¢Èòü‰∏≠ÂèØËÉΩÈÖùÈÖøÂá∫‰∏çËâØÊÉÖÁª™„ÄÇ ÊØîËæÉÂ•ΩÁöÑÊñπÊ≥ïÂΩìÁÑ∂ÊòØÊó©ÊúüÂ∞±ÊääËøô‰∏™ÈóÆÈ¢òËß£ÂÜ≥ÊéâÔºåÂõ†‰∏∫Âà∞‰∫ÜÂêéÊúüÔºå‰Ω†ÁöÑÂ∑•ÂÖ∑‰ºöË∂äÊù•Ë∂äÊúâÈôê„ÄÇ‰ΩÜ‰πü‰∏çÊòØÊ≤°ÊúâÊú∫‰ºö‰øÆÊ≠£ÔºåÂ¶ÇÊûúÊúâÂêà‰ºô‰∫∫Á¶ªÂºÄÔºå‰Ω†ÂèØ‰ª•Êî∂Âõû‰ªñÁöÑËÇ°ÊùÉÊù•ÈáçÊñ∞ÂàÜÈÖç„ÄÇÂ¶ÇÊûúÊúâB„ÄÅC„ÄÅDËΩÆÂ¢ûËµÑÔºå‰Ω†ÂèØ‰ª•Ë∑üÊäïËµÑ‰∫∫Ë¶ÅÊ±Ç‚ÄúÊúüÊùÉÊ±†‚Äù(ESOP)ÔºåÈÄöËøáÂèëÊîæÊñ∞ÁöÑÈÄâÊã©ÊùÉÊù•Âπ≥Ë°°„ÄÇÊúÄÂêéÔºåÂ¶ÇÊûúÁúüÁöÑËøá‰∫éÈõÜ‰∏≠ÔºåË¥üË¥£‰ªªÁöÑCEOÔºåÁîöËá≥‰ºöÊãøÂá∫Ëá™Â∑±ÁöÑËÇ°ÊùÉÂàÜÈÖçÁªô‰ºô‰º¥‰ª¨„ÄÇ ÈÄâÊã©Âêà‰ºô‰∫∫Êú™ÂøÖÊúâ‰∏ÄÂÆö‰πãËßÑÔºåÂàõ‰∏öË∑Ø‰∏äÂèØËÉΩÈÅáÂà∞ÁöÑÂç±Êú∫‰πüËøúËøú‰∏çÊ≠¢‰∏äËø∞Ëøô‰∫õÔºåÂ∏åÊúõËøôÁØáÊñáÁ´†ËÉΩÂØπ‰Ω†ÊúâÊâÄË£®ÁõäÔºåÂä©‰Ω†Âú®Âàõ‰∏öË∑Ø‰∏äÂ∞ëËµ∞ÂºØË∑ØÔºå‰πüÁ•ùÊÑøÂàõ‰∏öËÄÖ‰ª¨Âú®2018Âπ¥ÂçöÂæóÂ•ΩÂΩ©Â§¥ÔºåÂ§ßÈπè‰∏ÄÊó•ÂêåÈ£éËµ∑ÔºåÊâ∂ÊëáÁõ¥‰∏ä‰πù‰∏áÈáå„ÄÇ Êú¨ÊñáÊù•Ê∫êÔºöËÅîÊÉ≥‰πãÊòü","link":"/ÁîüÊ¥ª/chuangye/"},{"title":"ÂëäÂà´","text":"ÂëäÂà´Â∑•‰ΩúÂ§öÂπ¥ÁöÑÂÖ¨Âè∏ÔºåÊàëË¶ÅÂéªÊñ∞ÁöÑÂú∞Êñπ‰∫Ü„ÄÇ","link":"/ÁîüÊ¥ª/juanshi/"},{"title":"ËØª‰π¶","text":"ÈÖí‰ªôÊ°•Âà∞Á´ãÊ∞¥Ê°•ÁöÑË∑ùÁ¶ªÔºå‰∏ÄËæÜÂÖ¨‰∫§ËΩ¶„ÄÇËá≥Ê≠§Êó∂Ê≠§ÂàªÔºåÊàëÂ∑≤ÁªèÂú®‰∏ä‰∏ãÁè≠ÁöÑË∑Ø‰∏äÁúãËøá‰∏âÊú¨‰π¶‰∫ÜÔºåÂÆÉ‰ª¨ÊòØ„ÄäÂπ∏Á¶è‰∫ÜÂêó„Äã„ÄäÁúãËßÅ„Äã„ÄäÊãñÂª∂ÂøÉÁêÜÂ≠¶„ÄãÂíå„ÄäÁæéÂõΩËÆ∞ÂøÜÂÜ†ÂÜõ„Äã„ÄÇÊàëÂæàÂ∫ÜÂπ∏Ê≤°ÊúâÊµ™Ë¥πËøôÊÆµÂÆùË¥µÁöÑÊó∂ÂÖâÔºåÂêåÊó∂Êàë‰πüÂú®ÊÄùËÄÉÔºå‰ªñ‰ª¨Áªô‰∫ÜÊàë‰∏Ä‰∫õ‰ªÄ‰πàÔºüÊàëÂèàÊòØÂê¶‰ΩìÁé∞‰∫ÜÂÆÉ‰ª¨ÁöÑ‰ª∑ÂÄºÔºüÁúã‰π¶‰∏çËÆ∞‰π¶ÁöÑÊàëÔºåËøòÂæóË¶ÅÊñ•Ë¥£Ëá™Â∑±ÂëêÔºåÊàë‰∫´ÂèóËøôËΩ¶‰∏äÁöÑÊó∂ÂÖâÔºå‰∏çËßâÂæóÊó∂Èó¥ÊµÅÊ∑å„ÄÇËøòÊòØË¶ÅÂéªËÆ∞‰∏ÄÁÇπÂêßÔºåÁôΩÂ≤©ÊùæÁöÑ„ÄäÂπ∏Á¶è‰∫ÜÂêó„ÄãÊàëËÆ∞ÂøÜÊ∑±ÂàªÁöÑÊòØ‰πù‰∏Ä‰∏ÄÂêé‰∏ÄÊÆµÊïÖ‰∫ãÔºå‰ΩúËÄÖÂΩìÊó∂‰Ωú‰∏∫Â™í‰Ωì‰∫∫‰∏ÄÁßçÊïèÊÑü„ÄÇ","link":"/ÁîüÊ¥ª/kindle/"},{"title":"‰∏≠ÂõΩÂêà‰ºô‰∫∫","text":"ËØ∑ËæìÂÖ•Ë¶ÅÈòÖËØªÁöÑÂØÜÁ†Å„ÄÇ Incorrect Password! No content to display! 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","link":"/ÁîüÊ¥ª/partner/"},{"title":"‰∏∫‰ªÄ‰πàÊàê‰∏∫‰∏ÄÂêçÁ®ãÂ∫èÂëòËøô‰πàÈöæÔºü","text":"Êúâ‰∫∫ËØ¥ÔºåÊØè‰∏™ÁúãËµ∑Êù•‰∏éÊ≠£Â∏∏‰∫∫Êó†ÂºÇÁöÑÂ∑•Á®ãÂ∏àÔºåÂÖ∂ÂÆûÈÉΩÊòØÂú®Â≠¶‰π†Á®ãÂ∫èÂºÄÂèëÁöÑÈÄî‰∏≠ÁÜ¨Ëøá„ÄÅÂéãÊäëËøá„ÄÅËÄå‰∏îÂàõ‰º§ËøáÁöÑÂèçÁ§æ‰ºö‰∫∫Â£´(sociopaths)„ÄÇ Âú®Â≠¶‰π†Á®ãÂ∫èÂºÄÂèëÁöÑËøáÁ®ã‰∏≠ÔºåÂ∏∏Â∏∏ÁúãÂà∞ÁΩëÁªú‰∏äÁöÑ„ÄåÁîòËã¶Ë∞à„ÄçÔºå‰πüÂê¨ËøáË∫´ËæπÂâçÈÄî‰∏ÄÁâáÂÖâÊòéÁöÑÂ∑•Á®ãÂ∏àÊúãÂèã‰ª¨ÂàÜ‰∫´ËøáÂ≠¶‰π†ÂéÜÁ®ãÔºåÊÄªËßâÂæó‰∏çÂêåÁöÑ‰∫∫„ÄÅÂêåÊ†∑ÁöÑÊïÖ‰∫ãÂç¥‰∏çÊñ≠ÁöÑÈáçÂ§çÔºåÂÉèÊòØÁãºÂè´Â£∞Ëà¨Ôºå‰ªéËøúÂ§Ñ‰º†Êù•‰∏ÄÂ£∞Âèà‰∏ÄÂ£∞ÁöÑÂõûÂìç„ÄÇ ÊúÄËøëËØªÂà∞Erik TrautmanÂú®Viking Code SchoolÈÉ®ËêΩÊ†º‰∏≠ÁöÑÊñáÁ´†„ÄäWhy Learning to Code is So Damn Hard„ÄãÔºåÊñáÁ´†ÈáåÂ∞ÜÂ≠¶‰π†ÂÜôÁ®ãÂ∫è(Learn to Code)ÁöÑËøáÁ®ãÂàÜÊàê‰∫ÜÂõõ‰∏™Èò∂ÊÆµÔºåÂπ∂Ëß£Èáä‰∫Ü‰∏§‰∏™ÂΩ±ÂìçÂêÑÈò∂ÊÆµÂΩ¢ÊàêÁöÑÂÖ≥ÈîÆÂõ†Á¥†„ÄåËµÑÊñôÂØÜÂ∫¶„Äç‰ª•Âèä„ÄåÁü•ËØÜÂπøÂ∫¶„ÄçÔºåÊúÄÂêéÈõÜÂêàÊàêËøôÂº†ÂõæÔºö ËøôÁØáÊñáÁ´†ÂæàÊúâË∂£‰πüÂçÅÂàÜÁ¨¶ÂêàÊàëÊâÄÂê¨ÈóªÁöÑÈÇ£‰∫õ„ÄåÂ∑•Á®ãÂ∏àËæõÈÖ∏Âè≤„ÄçÔºåÂõ†Ê≠§ÂÜ≥ÂÆöÂ∞ÜËøôÂõõ‰∏™Èò∂ÊÆµ‰ªãÁªçÁªôÂ§ßÂÆ∂ÔºåÂ∏åÊúõÁ®ãÂ∫èÂàùÂ≠¶ËÄÖ‰ª¨Âú®ËøõÂÖ•ËøôÊù°‰∏çÂΩíË∑Ø‰πãÂâçÔºåÁúºÁùõË¶ÅÊîæ‰∫Æ„ÄÅËÆ°ÂàíË¶ÅÂë®ËØ¶ÔºåÊ∏ÖÊ•öÊòéÁôΩÂú®ÂâçÊñπÁ≠â‰Ω†‰ª¨ÁöÑÊòØ‰ªÄ‰πàÔºåÂÅöÂ•ΩÂÆåÂÖ®ÂøÉÁêÜÂáÜÂ§áÂêß! Êé•‰∏ãÊù•ÊàëÂ∞Ü‰ªãÁªç‰ªéÂàöÂºÄÂßãÂÜôÁ®ãÂ∫èÂà∞Êàê‰∏∫‰∏ÄÂêçÂ∑•Á®ãÂ∏àÔºåErik TrautmanÊâÄÂΩíÁ±ªÂøÖÁªèÁöÑÂõõ‰∏™Èò∂ÊÆµÔºö ÊÉ≥Êàê‰∏∫Â∑•Á®ãÂ∏àÔºåËØ∑ÂÅöÂ•ΩÂáÜÂ§áËøéÊé•ËøôÊÆµÂøÖÁªè‰πãË∑Ø ÂÖàÂÅáËÆæ‰Ω†Â≠¶ÂÜôÁ®ãÂ∫èÁöÑÁªàÊûÅÁõÆÊ†áÊòØË¶ÅÈù†ËøôË°åÂêÉÈ•≠‚Äì‚ÄìËøõÂÖ•Áõ∏ÂÖ≥È¢ÜÂüüÂ∑•‰ΩúÊàñÊòØËá™Ë°åÂàõ‰∏öÔºå‰Ω†ÊòØÂê¶ÂÅöÂ•Ω‰∏áÂÖ®ÂáÜÂ§áÂèØ‰ª•‰ªé‰Ω†ÁöÑ‰ø°ÂøÉ(Confidence)Ë∑üËÉΩÂäõ(Capability)Êï£‰ΩàÂõæ‰∏≠ÁúãÂá∫Ôºö ÈöèÁùÄ‰Ω†ÂÖ∑Â§áÁöÑÁü•ËØÜË∑üÊäÄËÉΩË∂äÊù•Ë∂äÂ§öÔºå‰Ω†ÁöÑËá™‰ø°ÂøÉ‰πü‰ºöÈöè‰πãËÄåÂ¢ûÂáèÔºåÊúÄÂêéËææÂà∞ËÉΩÂäõÂ§ü‰ø°ÂøÉË∂≥ÁöÑ„ÄåJob Ready„ÄçÁÇπ„ÄÇÂú®Job ReadyÂâçÂàôÂèØ‰ª•ÂàÜÊàêÂõõ‰∏™Èò∂ÊÆµÔºö Á¨¨‰∏ÄÈò∂ÊÆµÔºöÊâãÁâµÊâãÂøÉËøûÂøÉËúúÊúàÊúüÂàöÂºÄÂßãËøõÂÖ•Á®ãÂ∫èÂºÄÂèëÁïåÁöÑÊúãÂèã‰ª¨ÊÄªÊòØÊÄÄÊä±ÁùÄËøúÂ§ßÁöÑÊ¢¶ÊÉ≥Ë∑üÊä±Ë¥üÔºåËøô‰∏çËÉΩÊÄ™‰ªñ‰ª¨ÔºåÊØïÁ´ü‰∏ÄÊñπÈù¢ÔºåÂ§ßÂÆ∂Â∞èÊó∂ÂÄôÂê¨Â§ö‰∫Ü„ÄåÂÜôÁ®ãÂ∫èÂæàÈöæ„Äç„ÄÅ„ÄåÁîµËÑëÁßëÂ≠¶ÂæàÁ°¨„ÄçËøôÁßç‰º†ÈóªÔºå‰ªé‰∏ÄÂºÄÂßãÂ∞±Êää‰∏çÂ∞ë‰∫∫ÂêìÂéªÂøµÁ§æ‰ºöÁßëÂ≠¶(‚Ä¶Ê≤°ÊúâÂÜíÁäØÁ§æ‰ºöÁßëÂ≠¶‰∏ì‰∏ö‰∫∫Â£´ÁöÑÊÑèÊÄù);Âè¶‰∏ÄÊñπÈù¢Ôºå„ÄåÂÖ®Ê∞ëÂÜôÁ®ãÂ∫è„ÄçËøôÈ°πËøêÂä®ÂÆûÂú®Â§™ÊàêÂäüÔºåÂùäÈó¥ËÆ∏Â§öÂ∑•ÂÖ∑Ë∑üÂ≠¶‰π†Âπ≥Âè∞ËÆ©Á®ãÂ∫èÂºÄÂèëÂèòÂæóË∂ÖÂ•ΩÁêÜËß£„ÄÅ‰∏äÊâãÂÆπÊòìÔºåÂÉèÊòØCodecademy„ÄÅTreehouse„ÄÅË∑üCode SchoolÁ≠âÁ∫ø‰∏äÂπ≥Âè∞ÔºåÊàñÊòØÈ∫ªÁúÅÁêÜÂ∑•ÁöÑScratchËØ≠Ë®Ä„ÄÅGoogleÁöÑBlocklyÁ≠âÁ®ãÂ∫èËØ≠Ë®ÄÂ∑•ÂÖ∑ÔºåÊàêÂäüÂú∞Ëê•ÈÄ†‰∫Ü‰∫∫‰∫∫ÈÉΩËÉΩÂÜôÁ®ãÂ∫èËÄå‰∏îÈù†ËøôË°åÂêÉÈ•≠ÁöÑÂÅáË±°ÂΩ¢Ë±°„ÄÇ Á™ÅÁÑ∂Èó¥Êàë‰ª¨ÁöÑÈóÆÈ¢ò‰∏çÂÜçÊòØ„ÄåÂõ∞ÈöæÂ∫¶„ÄçÔºåËÄåÊòØ„ÄåÊØîÂ§©È´òÁöÑÊúüÊúõ„ÄçË∑ü„ÄåÊØîÂú∞Â§ßÁöÑÊ¢¶ÊÉ≥„Äç„ÄÇ ÊúÄÈáçË¶ÅÁöÑÊòØÔºå‰ª•‰∏äÊèêÂà∞ÁöÑËøô‰∫õÂ∑•ÂÖ∑Ë∑üÂπ≥Âè∞ÂÆûÂú®Â§™ÊúâÁî®ÔºåÂ∏¶È¢ÜÊØ´Êó†Á®ãÂ∫èÂºÄÂèëÁªèÈ™åÁöÑÂàùÂ≠¶ËÄÖ‰ª¨‰∏ÄÊ≠•Ê≠•ËÆ§ËØÜÂèòÊï∞„ÄÅÊù°‰ª∂ËØ≠Âè•„ÄÅÁ®ãÂ∫èËØ≠Ê≥ï„ÄÇÂΩì‰Ω†‰∏ÄË∑ØËøáÂÖ≥Êñ©Â∞ÜÊääÁ®ãÂ∫èËØ≠Ë®ÄÂü∫Êú¨ÈÄªËæëË∑üËØ≠Ê≥ïÂ≠¶‰ºöÁöÑÂêåÊó∂Ôºå‰Ω†Â∞±‰ºöË∂ÖÊúâÊàêÂ∞±ÊÑü„ÄÅËá™‰ø°ÂøÉÂ§ßÂ¢ûÔºåÂºÄÂßãÊúâ„ÄåÂéüÊù•Êàë‰πüË°åÂòõ„Äç„ÄÅ„ÄåÂÜôÁ®ãÂ∫è‰πü‰∏çËøáÂ∞±ËøôÊ†∑„ÄçÁöÑÊÑüËßâÔºåÂü∫Êú¨‰∏äËßâÂæóËá™Â∑±Â∑≤ÁªèË∑ü„ÄåÂ∑•Á®ãÂ∏à„ÄçÁõ∏Â∑Æ‰∏çËøú‰∫Ü„ÄÇ Ëøô‰∏™Èò∂ÊÆµÂ∞ÜÂÖÖÊª°ÂñúÊÇ¶‰∏éÊàêÂ∞±ÊÑüÔºåÂú®ÂêÑÁßçÁ∫ø‰∏äÂ∑•ÂÖ∑„ÄÅÁΩëÁªúÊïôÂ≠¶ÁöÑÂ∏ÆÂä©‰∏ãÔºå‰Ω†‰∫´ÂèóÁùÄÁî®ÊåáÂ∞ñ‰∏ãÊåá‰ª§„ÄÅÁîµËÑëÂ∞±ËÉΩÂáÜÁ°ÆÊâßË°åÁöÑ‰∏ªÂØºÊÑüÔºå‰Ω†ËµûÂèπÁùÄÁ®ãÂ∫èËØ≠Ë®ÄÁöÑÁ•ûÂ•á‰∏éÂº∫Â§ß‰πãÂ§ÑÔºå‰ªéHello WorldÂà∞ÁÆÄÂçïÂõûÂúàÔºåÊØèÂÆåÊàê‰∏ÄÈÅìÁªÉ‰π†È¢ò‰Ω†ÁöÑÊàêÂ∞±ÊÑüÂèàÂ¢ûÂä†Âá†ÂàÜÔºåÂæàÂ§ö‰∫∫‰ºöÂú®Ëøô‰∏™Êó∂ÂÄôËÆ§‰∏∫Ëá™Â∑±Â∑≤ÁªèÁà±‰∏ä‰∫ÜÁîµËÑëÁßëÂ≠¶(ËÄå‰∏îËßâÂæóÁîµËÑëÁßëÂ≠¶‰πüÁà±‰ªñ‰ª¨)ÔºåÊ≠£Â§Ñ‰∫éËÉΩÂäõÊèêÂçáÔºåËá™‰ø°ÂøÉ‰πüÂ§ßÂ¢ûÁöÑ„ÄåËúúÊúàÊúü„ÄçÔºåËøôÊó∂‰Ω†ÂèØËÉΩ‰ºöËßâÂæó‰∏ñÁïåÁúüÁæéÂ•Ω„ÄÅ‰∫∫ÁîüÂ§ßÊ¶ÇÂ∞±‰ºö‰ªéÊ≠§È£ûÈªÑËÖæËææÔºå‰ΩÜÊàëÂæóÊÆãÈÖ∑ÁöÑÂëäËØâ‰Ω†Ôºö ËøôÊÆµÊóÖÁ®ãÊâçÂàöÂºÄÂßãËÄåÂ∑≤„ÄÇ Á¨¨‰∫åÈò∂ÊÆµÔºöÂõ∞ÊÉë‰πãÂ¥ñÂ∞±Ë∑üÂ§ßÈÉ®‰ªΩÁöÑÊÉÖ‰æ£/Êñ∞Â©öÂ§´Â¶ª‰∏ÄÊ†∑ÔºåËúúÊúàÊúü‰ºöÁªìÊùüÔºå‰Ω†‰ºöÊÖ¢ÊÖ¢ÂèëÁé∞„ÄåÁõ∏Áà±Ê≤°Ëøô‰πàÁÆÄÂçï„Äç„ÄÇ ‰Ωú‰∏öÈöæÂ∫¶‰∏ÄÂ¢ûÂä†(ÈáçÁÇπÊòØÁ®ãÂ∫èÁ†ÅÈïøÂ∫¶‰πü‰ºöË∑üÁùÄÂ¢ûÂä†)ÔºåÁ®ãÂ∫èÈîôËØØË≠¶ÂëäÂ∞±È¢ëÈ¢ëÂá∫Áé∞ÔºåÂºÄÂßã‰∏çÂÅúÁöÑÈô§Èîô(Debug)„ÄÇËÄå‰∏îÈÄöÂ∏∏ÊúÄÂ§ßÁöÑÊåëÊàòÊòØ‚Äì‚ÄìÂΩìÈîôËØØÂá∫Áé∞Êó∂Ôºå‰Ω†Ê†πÊú¨‰∏çÁü•ÈÅìÈîôÂú®Âì™Èáå„ÄÅËØ•ÈóÆ‰ªÄ‰πàÈóÆÈ¢ò„ÄÇ‰Ω†ÁöÑÂ≠¶‰π†ËøõÂ∫¶Âú®Ëøô‰∏™Èò∂ÊÆµÂºÄÂßãÂÅúÊªû‰∏çÂâçÔºåÂÉèË∑ØËµ∞Âà∞‰∏ÄÂçäÁ™ÅÁÑ∂ÈÅáÂà∞ÊÇ¨Â¥ñËÄåÊó†Ë∑ØÂèØËµ∞Ëà¨ÔºåÂºÄÂßãÂØπ‰πãÂâçÁöÑËÆ§Áü•ÊÑüÂà∞Âõ∞ÊÉëÔºåË∑üÁùÄ‰ø°ÂøÉÂ§ßÂ§±„ÄÇ ÈÄöÂ∏∏Ëøô‰∏™Èò∂ÊÆµ‰ºöÂú®‰Ω†ÂÆåÊàêÁ∫ø‰∏äÁöÑÂü∫Á°ÄÊïôÂ≠¶ÂêéÂèëÁîü„ÄÇ‰ª•Âà∂‰Ωú‰∏™‰∫∫ÁΩëÁ´ô(Portfolio Website)‰∏∫‰æãÂ•Ω‰∫ÜÔºåW3 SchoolÂπ≥Âè∞Êèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàóHTML„ÄÅCSS„ÄÅJavaScriptÁ≠âÁΩëÈ°µÂà∂‰ΩúÁõ∏ÂÖ≥ÁöÑÁ®ãÂ∫èÊïôÂ≠¶ÔºåËÆ©ÂàùÂ≠¶ËÄÖ‰∏ÄÂçïÂÖÉ‰∏ÄÂçïÂÖÉÁöÑÂ≠¶‰π†ËØ≠Ê≥ïË∑üÂäüËÉΩÔºåÊØèÂçïÂÖÉËøòÊúâ‰æãÂ≠êÁ§∫ËåÉÁî®Ê≥ïÔºåÁúã‰ººÂ•ΩÁÆÄÂçï!ÂÖ®ÈÉ®Ë∑üÁùÄÂ≠¶‰∏ÄÈÅç‰πãÂêéÔºå‰Ω†ÂáÜÂ§áÂ•ΩÂä®ÊâãÊâìÈÄ†Ëá™Â∑±ÁöÑÁΩëÁ´ôÔºåÊâìÂºÄÊñáÂ≠óÁºñËæëÂô®Ôºå‚Ä¶‚Ä¶ÔºåÁÑ∂ÂêéÂÜôÊ≤°‰∏§Ë°åÂ∞±Âç°ÂÖ≥‰∫Ü„ÄÇ ‰πüËÆ∏Èù†GoogleÊêúÂØªÂèØ‰ª•ËÆ©‰Ω†ÊíëÂà∞ÂÆåÊàêÁΩëÁ´ôÂü∫Êú¨Êû∂ÊûÑÔºå‰ΩÜÂΩì‰Ω†ÊÉ≥ÂÆûÁé∞Ëá™Â∑±ÁöÑÂàõÊÑè„ÄÅÂä†‰∏ä‰∏™‰∫∫ÂåñÁöÑËÆæËÆ°Êó∂ÔºåÁΩëÁªú‰∏äÁöÑÂõûÁ≠îË∑üÁ§∫ËåÉÊÄªÊòØÂíå‰Ω†ÂøÉÈáåÊâÄÊÉ≥ÁöÑ‰∏çÂ§™‰∏ÄÊ†∑ÔºåÊâÄ‰ª•Á®ãÂ∫èÁ†Å‰∏çËÉΩÂÖ®ÊäÑÔºåÁÑ∂ËÄåÂ∑¶ÊãºÂè≥ÂáëÂá∫ÁöÑÁ®ãÂ∫èÁ†ÅÁúã‰ººÂèØË°å‰ΩÜÂÆûÈôÖ‰∏äÂ∑ÆÂæóÂèØËøú‰∫Ü!ÂÅèÂÅèËøò‰∏çÁü•‰ªé‰ΩïdebugËµ∑ÔºåÂèØËÉΩÊäïËµÑ‰∫ÜÂ§ßÂçäÁöÑÊó∂Èó¥Á®ãÂ∫èÁ†ÅËøò„ÄåÊúâÂáèÊó†Â¢û„ÄçÔºåÊØ´Êó†ËøõÂ±ïÂèØË®Ä„ÄÇ ËøôÊòØ‰∏Ä‰∏™Â∞§ÂÖ∂Êå´ÊäòÁöÑÂøÖÁªèÈò∂ÊÆµÔºåÊÉ≥Êàê‰∏∫ProgrammerÂ∞±ÂøÖÈ°ªÁªèÂéÜËøô‰∏™ÂÖ≥Âç°ÔºåÂãáÊï¢Ë∑≥‰∏ãÊÇ¨Â¥ñ„ÄÅÈÄºËá™Â∑±Â±ïÁøÖÈ´òÈ£û(ÂΩìÁÑ∂Âú®Ëøô‰∏™Èò∂ÊÆµÊëîÊ≠ªÁöÑÂ∞èÈõèÈ∏üÊï∞ÈáèÂçÅÂàÜÂèØËßÇ)„ÄÇ ‰ΩÜÂç≥‰Ωø‰Ω†Ê∂àÁÅ≠‰∫ÜÊó†Êï∞ÁöÑbugÔºåÁªà‰∫éÂÆåÊàê‰∫ÜÂá†‰∏™Â∞è‰∏ìÊ°âÂêéÔºå‰Ω†‰πüÂà´È´òÂÖ¥ÂæóÂ§™Êó©ÔºåÊú™Êù•ÁöÑË∑ØËøòÊòØÈùûÂ∏∏ÈïøËøúËÄå‰∏îÊåëÊàòÊÄßÊõ¥È´ò!ÂØπ‰∫éÊÉ≥ËøõÂÖ•ËøôË°åÂêÉÈ•≠ÁöÑ‰∫∫Êù•ËØ¥Ôºå„ÄåÂõ∞ÊÉë‰πãÂ¥ñ„ÄçÈÄöÂ∏∏ÊòØ‰Ω†ÂÜ≥ÂÆöÊòØÂê¶ÂÖ®ÂøÉÂÖ®ÊÑèËøõÂÖ•Ëøô‰∏ÄË°åÁöÑËΩ¨Êç©ÁÇπÔºåËÄåÂΩì‰Ω†ÊäïËµÑÊâÄÊúâÁöÑÊó∂Èó¥ÂøÉÂäõÂú®ÂÜôÁ®ãÂ∫è‰∏äÊó∂Ôºå‰Ω†Â∞ÜËøõÂÖ•ÊúÄËÆ©‰∫∫ÂøÉÁÅ∞ÊÑèÂÜ∑ÁöÑÁ¨¨‰∏âÈò∂ÊÆµ„ÄÇ ‰Ω†ÂèØËÉΩ‰ºöÂæàÂ•ΩÂ•áÔºåÂà∞Â∫ï‰∏∫‰ªÄ‰πàÁ¥ßÁ¥ßÁõ∏ËøûÁöÑÁ¨¨‰∏ÄÈò∂ÊÆµ(ËúúÊúàÊúü)Ë∑üÁ¨¨‰∫åÈò∂ÊÆµ(Âõ∞ÊÉë‰πãÂ¥ñ)‰ºöÂ∑ÆËøô‰πàÂ§ö?Â¶ÇÊûú‰Ω†‰πüÊ≠£Âú®ÁªèÂéÜ‰ª•‰∏ä‰∏§‰∏™Èò∂ÊÆµÔºå‰Ω†Ë¶ÅÁü•ÈÅìÔºåÈÄ†ÊàêÈò∂ÊÆµËΩ¨Êç¢ÁöÑÂéüÂõ†Ë∑ü‰Ω†‰∏ÄÁÇπÂÖ≥‰øÇÈÉΩÊ≤°ÊúâÔºåÂπ∂‰∏çÂÆåÂÖ®ÊòØÂõ†‰∏∫‰Ω†ÊØîÂà´‰∫∫Á¨®ÊàñÊØîÂà´‰∫∫‰∏çÂä™ÂäõÔºåËÄåÊòØÂõ†‰∏∫„ÄåËµÑÊ∫êÂØÜÂ∫¶„ÄçÊîπÂèòÁöÑÁºòÊïÖ„ÄÇ Âõ†Á¥†1ÔºöËµÑÊ∫êÂØÜÂ∫¶Resource Density Âú®Á¨¨‰∏ÄÈò∂ÊÆµ‰∏≠ÊúâÊèêÂà∞ÔºåÂΩìÈõ∂ÁªèÈ™åÈõ∂Âü∫Á°ÄÁöÑ‰Ω†ÂºÄÂßãÂ≠¶‰π†ÂÜôÁ®ãÂ∫èÊó∂ÔºåË∫´ËæπÊúâÁùÄÊó†Êï∞ÁöÑËµÑÊ∫êË∑üÂ∑•ÂÖ∑Á≠âÁùÄ‰Ω†Êù•ËøêÁî®„ÄÇÂà∞GoogleÊêúÂØªÊâì„ÄåLearn to Code„Äç‰Ω†‰ºöÊü•Âà∞Ë∂ÖÂ§öÁ®ãÂ∫èÂ≠¶‰π†Âπ≥Âè∞„ÄÅÊïôÂ≠¶Êñá„ÄÅÊïôÂ≠¶ÂΩ±Áâá„ÄÅÁîöËá≥ÁªèÈ™åË∞àÔºåËÆ©‰Ω†ÊÑüÂà∞‰∏áÂàÜÁöÑ‰∫≤ÂàáÂèäÊ∏©ÊöñÔºåÂÖ∂„ÄåÊâãÁâµÊâãÂøÉËøûÂøÉËúúÊúàÊúü„ÄçÁöÑÁß∞Ë∞ìÂΩì‰πãÊó†ÊÑß„ÄÇ ÁÑ∂ËÄåÂà∞‰∫ÜÁ¨¨‰∫åÈò∂ÊÆµÊó∂ÔºåËøô‰∫õÊïôÂ≠¶ËµÑÊ∫êÁöÑÊï∞ÈáèÂ∞ÜÂ§ß‰∏∫È™§ÂáèÔºå‰ªª‰Ωï‰∏Ä‰∏™ÂàöËÑ±Á¶ªÂàùÂ≠¶ËÄÖÁöÑÁ®ãÂ∫èÂ≠¶‰π†ËÄÖÈÉΩËÉΩÂ§üËØÅÂÆûÊàëÊ≠§Ë®Ä‰∏çÂÅá„ÄÇÂàùÂ≠¶ËÄÖ‰∏ÄÂºÄÂßãÈÅáÂà∞ÁöÑÈöúÁ¢çÈÉΩÊòØ„Äå‰∏ÄËà¨Â∏∏ËßÅÈóÆÈ¢ò„ÄçÔºåÊïôÂ≠¶Êñá„ÄÅÊïôÁßë‰π¶ÈáåÂ∞±‰ºöÊ≥®Êòé‰∫Ü;ÂêéÊúüÁî±‰∫é‰Ωú‰∏öÈöæÂ∫¶‰ª•Âèä‰∏™‰∫∫ÈúÄÊ±ÇÔºåÈóÆÈ¢òÊâçÊ∏êÊ∏êÂ§çÊùÇËµ∑Êù•ÔºåË¶Å‰ªéStack OverflowÊàñÊòØ‰∏Ä‰∫õÁ®ãÂ∫è‰∫∫ÁöÑÈÉ®ËêΩÊ†º‰∏≠ÂéªÊâæÂØªËß£È¢òÁ∫øÁ¥¢„ÄÇ‰∏ÄÁõ¥Âà∞Âú®‰Ω†ÈÅáÂà∞ÁöÑÈóÆÈ¢òÂ∑≤ÁªèÊ£òÊâãÂà∞ÁΩëÁªú‰∏äÊ†πÊú¨Êâæ‰∏çÂ§™Âà∞Á∫øÁ¥¢ÁöÑÊó∂ÂÄôÔºå‰Ω†‰æøËøõÂÖ•‰∫Ü‰∏ã‰∏Ä‰∏™Èò∂ÊÆµ„ÄÇ Á¨¨‰∏âÈò∂ÊÆµÔºöÁªùÊúõÊ≤ôÊ¥≤Ë¶Å‰∫ÜËß£ËøõÂÖ•Á¨¨‰∏âÈò∂ÊÆµÁöÑÂÖ≥ÈîÆÔºåÂ∞±Ë¶Å‰∫ÜËß£Âè¶‰∏ÄÈ°πÂΩ±ÂìçÁùÄÂêÑÈò∂ÊÆµÂèòÂåñÁöÑÈáçË¶ÅÂõ†Á¥†ÔºöÁü•ËØÜÂπøÂ∫¶„ÄÇ Âõ†Á¥†2ÔºöÁü•ËØÜÂπøÂ∫¶Scope of Knowledge „ÄåÁü•ËØÜÂπøÂ∫¶„Äç‰πüÂ∞±ÊòØÂ∫¶ËøáÊØè‰∏™Èò∂ÊÆµ‰Ω†ÊâÄÂøÖÂ§áÁöÑÁü•ËØÜÈ¢ÜÂüüËåÉÂõ¥„ÄÇÂàöÂºÄÂßãÊó∂‰Ω†ÈúÄË¶ÅÂê∏Êî∂ÁöÑÁü•ËØÜÂæàÈõÜ‰∏≠Ôºå‰∏çÁÆ°Áî®Âì™ÁßçÁ®ãÂ∫èËØ≠Ë®Ä„ÄÅ‰∏çÁÆ°ÂäüËÉΩÊòØ‰ªÄ‰πàÔºåÈ¶ñÂÖàÈÉΩË¶ÅÂ≠¶‰ºöÂèòÊï∞ÂûãÊÄÅ„ÄÅÂÆ£ÂëäËØ≠Ê≥ï„ÄÅÂõûÂúàÂèäÊù°‰ª∂Âà§Êñ≠ÂºèÁ≠âÁ≠âÔºåËøôÊó∂Èöè‰æøËØ∑‰∏Ä‰∏™Â∑•Á®ãÂ∏àÊïô‰Ω†ÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂõ†‰∏∫„ÄåÈáçË¶ÅÈ°ªÁü•„ÄçÂ∞±ÊòØËøôÂá†ÁÇπËÄåÂ∑≤„ÄÇ ÁÑ∂ËÄåÂ≠¶ÂÆåÂü∫Êú¨ÂäüÂêéÔºå‰Ω†ÊâÄÈúÄÁöÑÁü•ËØÜÈ¢ÜÂüü‰ºö‰∏Ä‰∏ãÂ≠êÊâ©Â±ïÂæàÂ§öÔºåÂÉèÊòØÂºÄÂßãÂ≠¶‰π†Áâ©‰ª∂ÂØºÂêëÊàñÊòØÁùÄÈáçÊºîÁÆóÊ≥ïÁöÑÊïàÁéáÔºå‰Ω†‰ºöÈúÄË¶ÅÊâéÂÆûÁöÑÁîµËÑëÁßëÂ≠¶ËÉåÊôØÊù•Â∫î‰ªòÔºåËÄå‰∏îÊØè‰∏Ä‰∏™Â∫îÁî®ÈÉΩÂèØ‰ª•ÁâµÊâØÂá∫Êõ¥Â§öÁöÑÂèòÂåñ‚Ä¶Áõ∏‰ø°ÊàëÔºåËøô‰∏çÊòØÂá†Â†ÇMOOCËØæÁ®ãÂ∞±ËÉΩÊïëÂæó‰∫Ü‰Ω†ÁöÑ„ÄÇ Âú®Ëøô‰∏™Êó∂ÊúüÔºå‰∏áËÉΩÁöÑGoogle‰πüÂè™‰ºö‰∏¢Áªô‰Ω†Êõ¥Â§ö‰Ω†‰∏çÊáÇÁöÑ‰∏úË•øÔºåÊ†πÊú¨Êü•‰∏çÂà∞Áõ∏ÂÖ≥ÁöÑÁ∫øÁ¥¢!ÊúÄÁ≥üÁöÑÊòØ‰Ω†Ê†πÊú¨‰∏çÁü•ÈÅì‰Ω†‰ªÄ‰πà‰∏çÁü•ÈÅì„ÄÇ(You don‚Äôt know what you don‚Äôt know.)„ÄÇ‰∫éÊòØ„ÄåÂ≠¶‰πüÂ≠¶‰∏çÂÆå„ÄÅË∂äÂ≠¶Ë∂ä‰∏çÊáÇ„ÄçÁöÑÊó†ÂäõÊÑüÊéíÂ±±ÂÄíÊµ∑ËÄåÊù•ÔºåËøõÂÖ•ÊúÄÊúÄÈöæÁÜ¨ÁöÑÁ¨¨‰∏âÈò∂ÊÆµ‚Äì‚Äì„ÄåÁªùÊúõÊ≤ôÊ¥≤„Äç„ÄÇ Ëøô‰∏™Èò∂ÊÆµÈ°æÂêçÊÄù‰πâÂÉèÊòØÂú®Ê®™Ë∂äÊ≤ôÊº†Ëà¨ÔºåÊòØ‰∏ÄÊÆµÈùûÂ∏∏Èïø‰∏îÂØÇÂØûÁöÑÊóÖÁ®ãÔºåËÆ©‰Ω†Êúâ‰∏çÁü•‰ΩïÂπ¥‰ΩïÊúàÊâçËÉΩËµ∞Âá∫Êù•ÁöÑÁªùÊúõÊÑü„ÄÇÂú®‰∏ÄÊúõÊó†ÈôÖÁöÑÊ≤ôÊº†ÈáåÔºåÊ†πÊú¨Êêû‰∏çÊ∏ÖÊ•ö‰∏úË•øÂçóÂåóÔºåËµÑÊñôÊü•‰∫ÜÂçäÂ§©ÊØ´Êó†Êñ©Ëé∑ÔºåËøò‰∏çÊó∂Ë¢´Êµ∑Â∏ÇËúÉÊ•º(ÈîôËØØËµÑËÆØÊàñÁúã‰ººÂèØË°åÁöÑËß£ÂÜ≥ÊñπÊ°â)ÁªôËØØÂØºÔºåÊêûÂæóÁÅ∞Â§¥ÂúüËÑ∏„ÄÅÂ§¥ÊòèÁúºËä±ÔºåÂú®Ëøô‰∏™Èò∂ÊÆµÊôíÊ≠ª„ÄÅÊ∏¥Ê≠ª„ÄÅÁªùÊúõÊ≠ªÁöÑÊúâ‰∏∫ÈùíÂπ¥Êõ¥ÊòØ‰∏çËÆ°ÂÖ∂Êï∞„ÄÇ ‰ΩÜÂè™Ë¶ÅÂú®ÁªùÊúõÊ≤ôÊ¥≤ÈáåÁÜ¨‰∏ãÂéªÔºåÊé•‰∏ãÊù•Â∞±‰ºöËá™Âú®ËÆ∏Â§ö‰∫Ü!Á¥ØÁßØË∂≥Â§üÁöÑÁªèÈ™åÔºåÁ®ãÂ∫èÁöÑÈîôËØØÂ∞±‰ºöÂ§ßÈáèÂáèÂ∞ë„ÄÅËææÂà∞‰∏ÄÂÆöÁü•ËØÜÊ∞¥ÂáÜÔºåÂ∞±ËÉΩÂáÜÁ°ÆÂà§Êñ≠ÈóÆÈ¢òÁöÑÊñπÂêëÂàáÂÖ•Ê†∏ÂøÉÔºåÂ∑•‰ΩúÊïàÁéáÂõ†ËÄåÊúâÊâÄÂ¢ûËøõÔºåÁü•ËØÜÂπøÂ∫¶‰πü‰ºöÊÖ¢ÊÖ¢ËÅöÁÑ¶„ÄÇÁ≠â‰Ω†ÊãñÁùÄ‰∏ÄË∫´ÁöÑÁñ≤ÊÉ´Áªà‰∫éËµ∞Âá∫ËøôËçíÊº†Êó∂ÔºåÂ∞±ËøõÂÖ•‰∫ÜÊúÄÂêéÁöÑÈò∂ÊÆµ„ÄÇ Á¨¨ÂõõÈò∂ÊÆµÔºöÂàõ‰º§ÂêéÁöÑÊÅ¢Â§çÊúüË∏©ÁùÄÂçÉ‰∏á‰∫∫ÁöÑÂ∞∏‰ΩìÊàêÂäüÊ®™Ë∂ä‰∫ÜÊ≤ôÊº†Ôºå‰Ω†ÁöÑËá™‰ø°ÂøÉÂºÄÂßãÂõûÂçáÔºåGoogleÂäüÂäõ‰πüÂèØ‰ª•ËØ¥ÊòØÁ•û‰∫∫ÁöÑÁ≠âÁ∫ß„ÄÇÂà∞‰∫ÜËøô‰∏™Êó∂ÂÄôÔºåHacker NewsÁöÑÊñ∞Èóª‰ª•ÂèäË∂ÖÁ°¨ÁöÑMOOCËØæÁ®ãÈÉΩ‰∏çÊàêÈóÆÈ¢òÔºå‰Ω†‰πüÈÄâÂÆö‰∫ÜÊüê‰∏™Á®ãÂ∫èËØ≠Ë®ÄË∑üÊ°ÜÊû∂Êù•‰∏ìÁ†îÔºåËÄå‰∏îÊúâËÉΩÂäõÂà∂‰ΩúÂá∫ÂèØ‰ª•Ê≠£Â∏∏Ëøê‰ΩúÁöÑÂ∫îÁî®Á®ãÂ∫è‰∫Ü„ÄÇ ‰ΩÜ‰Ω†ÂøÉÈáåÊ∑±Â§ÑÊÄªÊúâÁùÄÈöêÈöêÁöÑ‰∏çÂÆâÔºåËßâÂæóÁ®ãÂ∫èËÉΩ„ÄåÁî®„Äç‰ΩÜÂÖ∂ÂÆû‰ª£Á†ÅÂáå‰π±Êó†Á´†ÔºåÂ∑•Á®ãÂ∏àÁöÑÂ§¥Ë°î‰∏ãÂÖ∂ÂÆûÊòØËØØÊâìËØØÊíûËøõËøôË°åÁöÑÂçäË∞ÉÂ≠êÔºåËôΩÁÑ∂‰Ω†‰ºº‰πéÂÖ∑Â§á‰∫Ü‰∏ÄÂàáÂ∞±ËÅåÊù°‰ª∂ÔºåÂç¥ÊÄªÂÆ≥ÊÄïÈù¢ËØïÂÆòÂèëÁé∞‰Ω†Ê†πÂü∫ËñÑÂº±ÁöÑÁîµËÑëÁü•ËØÜ‚Ä¶‰Ω†Ê≠£Âú®ÁªèÂéÜ„ÄåÂàõ‰º§ÂêéÁöÑÊÅ¢Â§çÊúü„Äç„ÄÇ Âú®È£ûË∂äÂõ∞ÊÉë‰πãÂ¥ñ„ÄÅÊ®™Ë∂äÁªùÊúõÊ≤ôÊ¥≤‰πãÂêéÔºå‰Ω†Â∫îËØ•Â∑≤ÁªèÂ≠¶‰ºöËØ•Â≠¶ÁöÑ„ÄÅÂÅö‰∫ÜËØ•ÂÅöÁöÑÔºåÊàê‰∏∫‰∏Ä‰∏™ÂêçÁ¨¶ÂÖ∂ÂÆûÁöÑÂ∑•Á®ãÂ∏àÔºåÂç¥ÊÄªËßâÂæóËá™Â∑≤ËµÑË¥®Âπ≥Â∫∏Ê†πÂü∫‰∏çÁ®≥ÔºåËôΩÁÑ∂ÊúâÊàêÂäüÊâìÈÄ†Âá∫‰∏Ä‰∏™‰∏™‰∏ìÊ°àËÄå‰ø°ÂøÉÂõûÂçáÔºå‰ΩÜËÄÅÊòØÊÑüÂèπËá™Â∑±‰∏éÂøÉÁõÆ‰∏≠„Äå‰∏ì‰∏öÂ∑•Á®ãÂ∏à„Äç‰ªçÊúâ‰∏ÄÂ§ßÊÆµÂ∑ÆË∑ù‚Ä¶ÔºåËøô‰∫õÈÉΩÊòØ„ÄåÂÜíÁâåËÄÖÁóáÂÄôÁæ§„Äç(Impostor Syndrome)Âú®‰ΩúÁ•ü! Âú®ËøôÂàõ‰º§ÂêéÁöÑÊÅ¢Â§çÊúü‰∏≠Ôºå‰Ω†ÂèØËÉΩ‰ºöÁªèÂ∏∏Ëá™ÊàëÊÄÄÁñëÔºå‰ΩÜÂè™Ë¶ÅÈ°∫ÁùÄËøôÊ≥¢ÊïàÁéáÊèêÂçá‰ø°ÂøÉ‰πüÂõûÂçáÁöÑÊΩÆÊµÅÁªßÁª≠Âä™ÂäõÔºåÂú®ËÉΩÂäõ‰∏éËá™‰ø°ËææÂà∞‰∏Ä‰∏™Á®ãÂ∫¶Êó∂‚Ä¶ÊÅ≠Âñú‰Ω†ÔºöYou Are Job Ready! Êù•Ê∫êÔºöinside ‰ΩúËÄÖÔºöJewel","link":"/ÁîüÊ¥ª/programmer/"},{"title":"programming","text":"Á∫¢ÁâõÈô™‰º¥ÔºÅ","link":"/ÁîüÊ¥ª/programming/"},{"title":"ÂüπËÆ≠","text":"ÂÖ•ËÅåÂüπËÆ≠","link":"/ÁîüÊ¥ª/training/"},{"title":"1803ÁöÑÊúõ‰∫¨Ë•ø","text":"1803ÁöÑÊúõ‰∫¨Ë•øÔºåÈõ®ÂêéÁöÑÊÆã‰∫ëË£πÁùÄÊñúÈò≥ÔºåÊàëÁúØÁùÄÁñ≤ÊÉ´ÁöÑÂèåÁúºÔºåÊäøÂò¥ÂæÆÁ¨ëÔºåÁï•Â∏¶ÂáâÊÑèÁöÑÈ£éÂêπËøáÔºåÊ≠§ÂàªÔºåÂ∞±ÊÉ≥Ëøô‰πàËµ∞Ôºå‰∏ÄÁõ¥Ëµ∞ÔºåËµ∞Âæà‰πÖÂæà‰πÖÔºÅ","link":"/ÁîüÊ¥ª/wjx/"},{"title":"Áü≥ÂÆ∂Â∫Ñ","text":"ÂÜçÊ¨°Êù•Âà∞ËøôÂ∫ßÂüéÔºåÂΩìÁÅ´ËΩ¶Âà∞ËææËΩ¶Á´ôÁöÑÊó∂ÂÄôÔºåÊàëÊâçÊÑèËØÜÂà∞ÊàëÂæà‰πÖÊ≤°ÊúâÊù•Ëøá‰∫Ü„ÄÇÁÅ´ËΩ¶Á´ôÂÖ∑‰ΩìÁöÑ‰ΩçÁΩÆÊ≤°ÊúâÂºÑÊ∏ÖÊ•öÔºå‰ΩÜÊòØÁúüÁöÑÂæàÊ∞îÊ¥æÁöÑÂª∫Á≠ëÔºåÊÅçÊÉöÈó¥‰ª•‰∏∫ÊòØÂåó‰∫¨ÂçóÁ´ô„ÄÇÂ∏ÇÂÜÖÂÖ¨‰∫§ÔºàËá≥Â∞ëÊàëÂùêÁöÑÈÇ£Ë∑ØÔºâÊØîÂåó‰∫¨ÁöÑË¶ÅÂ•ΩÔºåÊàñËÆ∏ÊòØÊñ∞ËΩ¶ÁöÑÂéüÂõ†„ÄÇÊôöÈ•≠ÂíåÈù¢ÂØπ‰∏ÄÊ°åÁöÑÂàùÊ¨°ËßÅÈù¢ÁöÑ‰∫∫ÔºåÊàëÊäø‰∫ÜÂçÅÂàÜ‰πã‰∏ÄÊùØÁôΩÈÖíÔºåÂç¥ÊÑüËßâÊôï‰πé‰πéÁöÑ„ÄÇÊ≠§ÂàªË∫∫Âú®ÂÆæÈ¶ÜÁöÑÂ∫ä‰∏äÔºåÂæÆÂõ∞„ÄÇ","link":"/ÁîüÊ¥ª/sjz/"},{"title":"Â∞èÁ±≥","text":"Êò®Â§©ÔºåÊé•Âà∞‰∫ÜÂ∞èÁ±≥ÁöÑÁîµËØùÔºåËøô‰∏™ÂàöÂàöÊª°‰∫åÂçÅÂ≤ÅÂ∞è‰ºôÂ≠êËØ¥Ëá™Â∑±Êúâ‰∫õÊÑüÂà∞Â≠§ÂçïÔºåÊàëÂçäÂºÄÁé©Á¨ëÁöÑËØ¥ÔºöÂéªË∞àÊÅãÁà±Âêß„ÄÇ‰∫åÂçÅÂ≤ÅÔºå‰∏Ä‰∏™Â§öÂ∞ë‰∫∫Áæ°ÊÖïÁöÑÂπ¥ÈæÑÔºåÊàëÂú®‰∫åÂçÅÂ≤ÅÁöÑÊó∂ÂÄôÔºåËøòÂú®Ë±°ÁâôÂ°î‰∏≠ËØª‰π¶ÔºåÂ∞èÁ±≥Â∑≤ÁÑ∂Â∑•‰Ωú‰∫Ü‰∏ÄÂπ¥„ÄÇËØùËØ≠‰∏≠‰ªñÊµÅÈú≤Âá∫‰∏éÁ§æ‰ºöÈó¥ÁöÑ‰∏çÂÆåÂÖ®ËûçÂÖ•ÔºåËã¶‰∫Ü‰ªñ‰∫Ü„ÄÇÊÉ≠ÊÑßÁöÑÊòØÊàëÂÜô‰∏ãËøôÊÆµÊñáÂ≠óÁöÑÊó∂ÂÄôÔºåÊàëÂπ∂Ê≤°ÊúâËÉΩÂ§üÁªô‰ªñË∂≥Â§üÁöÑÂèØË°åÊÄßÂª∫ËÆÆÔºåÊõ¥Â§öÁöÑÊòØ‰∏Ä‰∏™ÂÄæÂê¨ËÄÖ„ÄÇÊàëÊÑüË∞¢‰ªñËÉΩÂú®‰∏çÂ¶ÇÊÑèÁöÑÊó∂ÂÄôÊÉ≥Âà∞ÊàëÔºå","link":"/ÁîüÊ¥ª/xiaomi/"},{"title":"‰∏ãÈõ™‰∫Ü","text":"Èõ™‰∏ãÁöÑÈÇ£‰πàÊ∑±Ôºå‰∏ãÁöÑÈÇ£‰πàËÆ§Áúü„ÄÇ","link":"/ÁîüÊ¥ª/xue/"},{"title":"Website","text":"Êî∂Ëóè https://www.gotapi.com/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöHTML,CSS,XPATH,XSL,JAVASCRIPTÁ≠âAPIÁöÑÊü•ËØ¢ÁΩëÁ´ô„ÄÇ https://www.w3schools.com/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöW3CÂà∂ÂÆöÁöÑÊ†áÂáÜËØ∏Â¶ÇXML,HTML,XSLÁ≠âÁ≠âÁöÑÂú®Á∫øÂ≠¶‰π†ÊïôÁ®ã„ÄÇ https://www.xml.org.cn/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºöÂèØ‰ª•ËØ¥ÊòØXMLÁöÑ‰∏≠ÂõΩÂÆòÊñπÁΩëÂêß„ÄÇW3CÊ†áÂáÜÁöÑÁøªËØëÁªÑÁªá‰∏éXMLÁ≥ªÂàóÊäÄÊúØ‰∫§ÊµÅÁ§æÂå∫. https://www.connectionstrings.com/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöËøôÈáåÂá†‰πéÊî∂ÈõÜ‰∫ÜÊâÄÊúâÁöÑÊï∞ÊçÆÂ∫ìËøûÊé•Â≠óÁ¨¶(connectionstring)‰∫Ü„ÄÇ https://www.itpub.net/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºöÊàë‰∏™‰∫∫ËÆ§‰∏∫ÊòØÂõΩÂÜÖÊúÄ‰∏ì‰∏öÁöÑÁªºÂêàÊÄßË°å‰∏öÊÄßÊäÄÊúØÁ±ªÁ§æÂå∫. https://www.netvtm.com/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºöÂÜÖÂÆπÂ§öÁøªËØë‰∫éw3schools.comÔºåÂ∞ëÊúâÂéüÂàõ„ÄÇ‰∏çËøáËøòÊòØÂ∫îËØ•ÈºìÂä±Á≤æÂìÅÁøªËØë„ÄÇ https://www.regexlib.com ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöÊ≠£ÂàôË°®ËææÂºèÂ∫ì„ÄÇÊêúÁ¥¢Ê≠£ÂàôË°®ËææÂºèÁî®„ÄÇ https://www.rexv.org/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöÁî®AjaxÂºÄÂèëÁöÑÂú®Á∫øÊ≠£ÂàôË°®ËææÂºèÈ™åËØÅÂô®. https://www.koders.com/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºö‰ª£Á†ÅÊêúÁ¥¢ÂºïÊìéÔºåÂèØ‰ª•ÊêúÁ¥¢Âá†ÂçÅÁßçËØ≠Ë®ÄÁöÑ‰ª£Á†Å„ÄÇ https://www.123aspx.com/Rotor/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºö.Net FrameworksÁöÑÊ∫ê‰ª£Á†Å„ÄÇ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºöÂ≠üÂÆ™‰ºöÁöÑËµÑÊñôÁ´ôÔºåËôΩËµÑÊñôÂ§ßÂ§öÊØîËæÉÁÆÄÂçïÔºåÂç¥Ëß£ÂÜ≥‰∫ÜÂºÄÂèë‰∏≠ÁöÑÂ§ßÈÉ®ÂàÜÈóÆÈ¢òÔºüÔºÅ https://www.dofactory.com/Patterns/Patterns.aspx ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºö23ÁßçËÆæËÆ°Ê®°ÂºèÁöÑÂÆûÁé∞ÂèÇËÄÉ„ÄÇÁâπÁÇπÊòØUML+Á≤æÁªÉÁöÑÁ§∫‰æã‰ª£Á†Å+ÁÆÄÊ¥ÅÁöÑËß£ËØ¥È£éÊ†º„ÄÇ https://www.open-open.com/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºöJavaÂºÄÊ∫êÂ§ßÂÖ®,Â¶ÇÊûú‰Ω†Áî®.NETÔºåÁÖßÁùÄÂÆÉÁöÑÂêçÂ≠óÂâçÂä†NÊâæÊâæÂ∫îËØ•ÈÉΩÊúâÂêß ÔºüÔºÅÔºöÔºâ https://www.riacn.com/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºöÊàëËÆ§‰∏∫ÊòØÂõΩÂÜÖÂ∞ëÊúâÁöÑRIA‰∏ì‰∏öÊäÄÊúØÁ´ô‰∫é‰∫§ÊµÅÁ§æÂå∫. https://www.cnpaf.net/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºö‰∏≠ÂõΩÂçèËÆÆÂàÜÊûêÁΩëÔºåÂæàÂÖ®Èù¢ÁöÑÂçèËÆÆËµÑÊñôÁΩë„ÄÇ https://www.pinvoke.net/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöÈÄöËøá.netË∞ÉÁî®win32Á≠âÈùûÂèóÊéßAPIÁöÑËµÑÊñôÂ§ßÂÖ®„ÄÇ https://bbs.51js.com/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºöÊó†ÂøßËÑöÊú¨,‰∏ì‰∏öÁöÑËÑöÊú¨ÊäÄÊúØÁ§æÂå∫„ÄÇ https://www.c-sharpcorner.com/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöC# Corner,Â≠¶‰π†c#ÁöÑÂ•ΩÂú∞Êñπ. https://blog.csdn.net/group/experts/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºöCSDN‰∏ìÂÆ∂Áæ§,Ê±áÈõÜCSDN‰∏ìÂÆ∂ÁöÑÁîµÂ≠êÊä•. https://www.codeproject.com/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöÊúâÂæàÂ§öÂèØÂ≠¶‰π†ÁöÑÁ§∫‰æã‰ª£Á†ÅÔºåÁâπÁÇπÊòØ‰∏∞ÂØåÔºåÊ∑±ÂÖ•ÊµÖÂá∫Ôºé https://www.gotdotnet.com/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöÂæÆËΩØÂºÄÂèëÁª¥Êä§ÁöÑÂÖ≥‰∫é.net framework‰∫§ÊµÅÁ§æÂå∫. https://www.sourceforge.net/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöÂÖ®ÁêÉÊúÄÂ§ßÁöÑÂºÄÊ∫êËΩØ‰ΩìÁ´ôÁÇπ https://www.asp.net/QuickStart/ ËØ≠Ë®ÄÔºöËã±ËØ≠ ÁÆÄ‰ªãÔºöMicrosoft .NET Framework SDK QuickStart Tutorials https://www.matrix.org.cn/ ËØ≠Ë®ÄÔºö‰∏≠Êñá ÁÆÄ‰ªãÔºö‰∏é Java ÂÖ±Ëàû,Java‰ºòÁßÄÁöÑ‰∏ì‰∏öÁ§æÂå∫,ÊñáÁ´†Ë¥®ÈáèÂæàÈ´ò.ÂÅö.NetÁöÑÊúãÂèã‰πüÂèØ‰ª•‰ªéÂÖ∂ÂÄüÈâ¥ÂæàÂ§öÁü•ËØÜ. JAVAÂ≠¶‰π†Ê®°Êùø‚Äî‚ÄîÂ≠¶‰π†ÊµÅÁ®ã https://www.7zcn.com/javastep/StudyJavaInfo.html SUN‰∏≠ÂõΩÊäÄÊúØÁ§æÂå∫ https://developers.sun.com.cn/ ÁªºÂêàÁΩëÁ´ô ¬≠ Êï∞Âä®Âú®Á∫øhttps://www.shudoo.com/ÔºàÁîµËÑëÊä•Ôºâ ¬≠https://www.csdn.net/ ¬≠ ÊØîÁâπÁΩëITÁü•ËØÜÂ∫ìhttps://know.chinabyte.com/index.php/%E9%A6%96%E9%A1%B5 ¬≠ Ëá≥È°∂ÁΩëhttps://www.zdnet.com.cn/ ¬≠ ËÆ°‰∏ñÁΩëhttps://www.ccw.com.cn/ ¬≠ ‰∏≠ÂõΩITÂÆûÈ™åÂÆ§https://www.chinaitlab.com/ ¬≠ Â§©ÊûÅÁΩëhttps://www.yesky.com/ ¬≠ ËµõËø™ÁΩëhttps://www.ccidnet.com/ ¬≠ ÂÖ®ÁêÉÊµÅÈáèÊü•ËØ¢https://www.alexa.com/ ¬≠ JavaÁΩëÁ´ô ¬≠ JavaËΩØ‰ª∂Á§æÂå∫https://www.javaeye.com/ ¬≠ java‰∏ñÁ∫™ÁΩëhttps://www.java2000.net/ ¬≠ JAVABUGShttps://bugs.sun.com/JAVAÊºèÊ¥û ¬≠ https://www.mldnjava.cn/java.htm ¬≠ HEY JAVAÊäÄÊúØÁ§æÂå∫https://www.heyjava.com/ ¬≠ ACCPÊïôÁ®ãÁΩëhttps://www.accptech.com/index.html ËÆ∫ÂùõÁΩëÁ´ô ¬≠ ÁæéÊ≤≥ËÆ∫Âùõhttps://www.eimhe.com/bbs/ ¬≠ È≠îhttps://bbs.mldn.cn/ ¬≠ https://bbs.chinajavaworld.com/index.jspa ÊäÄÊúØÁΩëÁ´ô ¬≠ apacheÁöÑANThttps://ant.apache.org/bindownload.cgi ¬≠ IBM https://www.ibm.com/developerworks/¬≠ IDE¬≠ EclipseÂÆòÁΩëhttps://www.eclipse.org/downloads¬≠ MyEclipseÂÆòÁΩëhttps://www.myeclipseide.com/ ËΩØ‰ª∂ÊµãËØï ËΩØ‰ª∂ÊµãËØïÁΩëhttps://www.51testing.com/ 1 Á®ãÂ∫èÂëòËÆ∫ÂùõÔºöhttps://www.gxcxy.com 2 J2meÁ§æÂå∫ https://www.j2meforums.com/forum/ 3 csdn https://www.csdn.net/ 4 VcÁü•ËØÜÂ∫ì https://www.vckbase.com/ 5 codeproject https://www.codeproject.com/ 6 Á®ãÂ∫èÂëòËÅîÂêàÂºÄÂèëÁΩë https://www.pudn.com/ 7 ÁúãÈõ™Â≠¶Èô¢ https://www.pediy.com 8 ËìùËâ≤ÁêÜÊÉ≥ https://www.blueidea.com/ 9 ÂçöÂÆ¢Âõ≠ https://www.cnblogs.com/ 10 NuixÂ∫îÁî®ÂºÄÂèëÁ§æÂå∫ https://chinaunix.net/ 11 javaeye https://www.javaeye.com 12 It‰∫∫ÁΩë https://www.iteer.net/ 13 ‰∏≠ÂõΩ‰∫∫ÊâçÁÉ≠Á∫ø https://www.cjol.com/ 14 Â§©Ê∂ØËÆ∫Âùõ https://www.tianya.cn/ 15 È£é‰∫ëÁöÑblog https://blog.codingnow.com/ 16 Êñ∞Êµ™ÁßëÊäÄÈ¢ëÈÅì https://tech.sina.com.cn/ 17 phpchina https://www.phpchina.com/html/index.html 18 Ê∏∏ÊàèÂºÄÂèëËµÑÊ∫êÁΩë https://www.gameres.com/ 19 ÁΩëÁªúÊ∏∏ÊàèÁ¨¨‰∏ÄÈó®Êà∑ https://www.17173.com/ 20 ÊàëÁà±Á†îÂèëÁΩë https://www.52rd.com/ 21 Msdn‰∏≠ÊñáÁΩë https://www.microsoft.com/china/MSDN/DeveloperCenter/default.mspx 22 Â§ßÂØåÁøÅÁºñÁ®ãÁΩëÁ´ô https://www.delphibbs.com/ 23 DelphiÁõíÂ≠ê https://www.2ccc.com/ 24 C++buillderÁ†îÁ©∂ https://www.ccrun.com/ 25 ItËÆ∫Âùõ https://bbs.itren.cn/ 26 JavaÂºÄÊ∫êÂ§ßÂÖ® https://www.open-open.com/ 27 codegurn https://www.codeguru.com/ 28 ÁºñÁ®ãÁà±Â•ΩËÄÖ https://www.programfan.com/ 29 Java‰∏≠ÊñáÁ´ô https://www.java-cn.com/ 30 reactos https://www.reactos.org/zh/index.htm 31 ÂºÄÊ∫êÂäõÈáè https://www.opensourceforce.org/ 32 ÁîµËÑëÁºñÁ®ãÊäÄÂ∑ß‰∏éÁª¥Êä§ https://www.comprg.com.cn/ 33 ‰∏≠ÂõΩÁîµÂ≠êÁΩë https://21ic.com/ 34 ÁºñÁ®ã‰∏≠ÂõΩ https://www.bc-cn.net/ 35 ÂµåÂÖ•ÂºèÂºÄÂèëËÆ∫Âùõ https://www.cevx.com/bbs/ 36 ÁîµËÑëÁà±Â•ΩËÄÖ https://www.cfan.com.cn/ 37 sybase‰∏≠ÂõΩ https://www.sybase.com.cn/gvswse/site/china/index.jsp 38 pbdr https://www.pbdr.com/ 39 apache https://www.apache.org 40 rootkit https://www.rootkit.com/index.php 41 È©±Âä®ÂºÄÂèëÁΩë https://www.driverdevelop.com/first.html 42 ÂÆâÂÖ®ÁÑ¶ÁÇπ https://www.xfocus.net/ 43 cnbetaÁΩëÂèãÂ™í‰Ωì‰∏éË®ÄËÆ∫Âπ≥Âè∞ https://www.cnbeta.com/ 44 fyterÁöÑÂçöÂÆ¢ https://www.fyter.cn/Default.aspx 45 asp.netÊéß‰ª∂ https://www.devexpress.com/ 46 operamask https://www.operamasks.org/ 47 ‰∏≠ÂõΩÊ∫êÁ†ÅÁΩë https://www.yuanma.org/ 48 sawinËΩØ‰ª∂Á†îÂèë‰πãÁ™ó https://www.sawin.cn/ 49 ÁîµËÑëÊïôËÇ≤‰∏éWEBÊïôËÇ≤Âú®Á∫ø https://210.40.7.188/ 50 ‰∏≠ÂõΩdosËÅîÁõü https://www.cn-dos.net/ 51 ‰∏≠ÂõΩbiosËÅîÁõü https://www.biosren.com/index.php 52 bioscentral https://bioscentral.com/ 53 eda‰∏ì‰∏öËÆ∫Âùõ https://www.edacn.net/bbs/ 54 ËØ∫Âü∫‰∫öËÆ∫Âùõ https://forum.nokia.com.cn/sch/index.html 55 ËÆ°ÁÆóÊú∫ÁßëÂ≠¶ËÆ∫Âùõ https://www.ieee.org.cn/index.asp 56 ibm developerworks ‰∏≠ÂõΩ https://www.ibm.com/developerworks/cn/ 57 w3 https://www.w3.org/ 58 ÁΩëÈ°µËÆæËÆ°Â∏à https://www.w3cn.org/ 59 ‰∏≠ÂõΩ‰∏áÁª¥ÁΩëËÅîÁõü https://www.w3china.org/index.htm 60 Ë±ÜÁì£ https://www.douban.com/ 61 Á®ãÂ∫èÂëòÈó®Êà∑Á´ôÔºöhttps://www.gxcxy.com 62 ËΩØ‰ª∂ÂïÜÂä°ÁΩë https://www.bizsofts.com/ 63 sun https://www.sun.com/ 64 google code https://code.google.com/ 65 google ÂºÄÂèë‰∫∫Âëò‰∏ªÈ°µ https://code.google.com/intl/zh-CN/ 66 the official microsoft asp.net https://www.asp.net/ 67 microsoft IIS https://www.iis.net/default.aspx?tabid=1 68 Ëç£ËÄÄ https://www.royaloo.com/index.html 69 ‰æØÊç∑ÁΩëÁ´ô https://jjhou.csdn.net/ 70 javaÂ§ßÊú¨Ëê• https://www.javadby.com/ 71 ÊØîÁâπÁΩë https://www.chinabyte.com/ 72 51cto https://www.51cto.com/ 73 infoq https://www.infoq.com/ 74 ÂçöÂÆ¢Â†Ç https://blog.joycode.com/ 75 ÂµåÂÖ•ÂºèÂºÄÂèëÁΩë https://www.embed.com.cn/ 76 ÂµåÂÖ•ÂºèÂºÄÁ∫ø https://www.mcuol.com/ 77 ‰∏≠ÂµåÁΩë https://www.chinaeda.cn/ 78 ÈÖ∑Âã§ÁΩë https://www.kuqin.com/ 79 Á∫¢ËÅîlinuxÈó®Êà∑ https://www.linuxdiyf.com/ 80 itpubÊäÄÊúØÈó®Êà∑ https://www.itpub.net/ 81 Á®ãÂºèËÆæËÆ°‰ø±‰πêÈÉ® https://www.programmer-club.com/index.asp 82 umlËΩØ‰ª∂Â∑•Á®ãÁªÑÁªá https://www.uml.org.cn/index.asp 83 delphiÂõ≠Âú∞ https://www.delphifans.com/ 84 theserverside https://www.theserverside.com/ 85 ‰∏≠ÂõΩdonet‰ø±‰πêÈÉ® https://www.chinaaspx.com/ 86 ÁºñÁ®ãÁéã https://www.kingofcoders.com/ 87 it168 https://www.it168.com/ 88 open source software in c# https://csharp-source.net/ 89 ‰∏≠ÂõΩITÂÆûÈ™åÂÆ§ https://www.chinaitlab.com/ 90 ËêΩ‰ºçËÄÖÁ´ôÈïøËÆ∫Âùõ https://www.im286.com/ 91 ‰∏≠ÂõΩÁ´ôÈïøÁ´ô https://www.chinaz.com/ 92 asp.netÊ∫êÁ†Å‰∏ãËΩΩ‰∏ì‰∏öÁ´ô https://www.51aspx.com/ 93 itËÅå‰∏öÂ∑•Á®ãÂ∏à https://www.51myit.com/ 94 Â§™Âπ≥Ê¥ãÁîµËÑëÁΩë https://www.pconline.com.cn/ 95 ‰πòÈ£éÂéüÂàõÁ®ãÂ∫è https://study.qqcf.com/ 96 ÁΩëÊòìÂ≠¶Èô¢ https://tech.163.com/school/ 97 Á®ãÂ∫èËÆæËÆ°ÔºèÁ®ãÂ∫èÂºÄÂèëÁ±ªÊïôÁ®ã https://www.pcvz.com/Program/Programs/Index.html 98 ÁÆóÊ≥ïÊ∫êÁ†ÅÂêß https://www.sfcode.cn/ 99 codegurn https://www.codeguru.cn/ 100 ÂæóÁõäÁΩë https://www.netyi.net/ 101 ‰∏≠ÂõΩeclipseÁ§æÂå∫ https://www.eclipseworld.org/bbs/ 102 È°πÁõÆÁÆ°ÁêÜËÄÖËÅîÁõü https://www.mypm.net/ 103 Ê†ñÊÅØË∞∑ https://www.21manager.com/ 104 J2meÂºÄÂèëÁΩë https://www.j2medev.com/bbs/index.asp 105 ÂçìË∂ä‰∫öÈ©¨ÈÄä https://www.amazon.cn/ WEBÊäÄÊúØÔºö WEBÂâçÁ´ØÂºÄÂèë https://www.css88.com/ Ext JSÂÆòÊñπÁΩë https://www.extjs.com/ Ext JS‰∏≠ÊñáËµÑÊñô https://www.extjs.org.cn/ 1 J2meÂºÄÂèëÁΩë https://www.j2medev.com/bbs/index.asp2 J2meÁ§æÂå∫ https://www.j2meforums.com/forum/3 csdn https://www.csdn.net/4 VcÁü•ËØÜÂ∫ì https://www.vckbase.com/5 codeproject https://www.codeproject.com/6 Á®ãÂ∫èÂëòËÅîÂêàÂºÄÂèëÁΩë https://www.pudn.com/7 ÁúãÈõ™Â≠¶Èô¢ https://www.pediy.com/8 ËìùËâ≤ÁêÜÊÉ≥ https://www.blueidea.com/9 ÂçöÂÆ¢Âõ≠ https://www.cnblogs.com/10 NuixÂ∫îÁî®ÂºÄÂèëÁ§æÂå∫ https://chinaunix.net/11 javaeye https://www.javaeye.com/12 It‰∫∫ÁΩë https://www.iteer.net/13 ‰∏≠ÂõΩ‰∫∫ÊâçÁÉ≠Á∫ø https://www.cjol.com/14 Â§©Ê∂ØËÆ∫Âùõ https://www.tianya.cn/15 È£é‰∫ëÁöÑblog https://blog.codingnow.com/16 Êñ∞Êµ™ÁßëÊäÄÈ¢ëÈÅì https://tech.sina.com.cn/17 phpchina https://www.phpchina.com/html/index.html18 Ê∏∏ÊàèÂºÄÂèëËµÑÊ∫êÁΩë https://www.gameres.com/19 ÁΩëÁªúÊ∏∏ÊàèÁ¨¨‰∏ÄÈó®Êà∑ https://www.17173.com/20 ÊàëÁà±Á†îÂèëÁΩë https://www.52rd.com/21 Msdn‰∏≠ÊñáÁΩë https://www.microsoft.com/china/MSDN/DeveloperCenter/default.mspx22 Â§ßÂØåÁøÅÁºñÁ®ãÁΩëÁ´ô https://www.delphibbs.com/23 DelphiÁõíÂ≠ê https://www.2ccc.com/24 C++buillderÁ†îÁ©∂ https://www.ccrun.com/25 ItËÆ∫Âùõ https://bbs.itren.cn/26 JavaÂºÄÊ∫êÂ§ßÂÖ® https://www.open-open.com/27 codegurn https://www.codeguru.com/28 ÁºñÁ®ãÁà±Â•ΩËÄÖ https://www.programfan.com/29 Java‰∏≠ÊñáÁ´ô https://www.java-cn.com/30 reactos https://www.reactos.org/zh/index.html31 ÂºÄÊ∫êÂäõÈáè https://www.opensourceforce.org/32 ÁîµËÑëÁºñÁ®ãÊäÄÂ∑ß‰∏éÁª¥Êä§ https://www.comprg.com.cn/33 ‰∏≠ÂõΩÁîµÂ≠êÁΩë https://21ic.com/34 ÁºñÁ®ã‰∏≠ÂõΩ https://www.bc-cn.net/35 ÂµåÂÖ•ÂºèÂºÄÂèëËÆ∫Âùõ https://www.cevx.com/bbs/36 ÁîµËÑëÁà±Â•ΩËÄÖ https://www.cfan.com.cn/37 sybase‰∏≠ÂõΩ https://www.sybase.com.cn/gvswse/site/china/index.jsp38 pbdr https://www.pbdr.com/39 apache https://www.apache.org/40 rootkit https://www.rootkit.com/index.php41 È©±Âä®ÂºÄÂèëÁΩë https://www.driverdevelop.com/first.html42 ÂÆâÂÖ®ÁÑ¶ÁÇπ https://www.xfocus.net/43 cnbetaÁΩëÂèãÂ™í‰Ωì‰∏éË®ÄËÆ∫Âπ≥Âè∞ https://www.cnbeta.com/44 fyterÁöÑÂçöÂÆ¢ https://www.fyter.cn/Default.aspx45 asp.netÊéß‰ª∂ https://www.devexpress.com/46 operamask https://www.operamasks.org/47 ‰∏≠ÂõΩÊ∫êÁ†ÅÁΩë https://www.yuanma.org/48 sawinËΩØ‰ª∂Á†îÂèë‰πãÁ™ó https://www.sawin.cn/49 ÁîµËÑëÊïôËÇ≤‰∏éWEBÊïôËÇ≤Âú®Á∫ø https://210.40.7.188/50 ‰∏≠ÂõΩdosËÅîÁõü https://www.cn-dos.net/51 ‰∏≠ÂõΩbiosËÅîÁõü https://www.biosren.com/index.php52 bioscentral https://bioscentral.com/53 eda‰∏ì‰∏öËÆ∫Âùõ https://www.edacn.net/bbs/54 ËØ∫Âü∫‰∫öËÆ∫Âùõ https://forum.nokia.com.cn/sch/index.html55 ËÆ°ÁÆóÊú∫ÁßëÂ≠¶ËÆ∫Âùõ https://www.ieee.org.cn/index.asp56 ibm developerworks ‰∏≠ÂõΩ https://www.ibm.com/developerworks/cn/57 w3 https://www.w3.org/58 ÁΩëÈ°µËÆæËÆ°Â∏à https://www.w3cn.org/59 ‰∏≠ÂõΩ‰∏áÁª¥ÁΩëËÅîÁõü https://www.w3china.org/index.htm60 Ë±ÜÁì£ https://www.douban.com/61 ÂçìË∂ä‰∫öÈ©¨ÈÄä https://www.amazon.cn/62 ËΩØ‰ª∂ÂïÜÂä°ÁΩë https://www.bizsofts.com/63 sun https://www.sun.com/64 google code https://code.google.com/65 google ÂºÄÂèë‰∫∫Âëò‰∏ªÈ°µ https://code.google.com/intl/zh-CN/66 the official microsoft asp.net https://www.asp.net/67 microsoft IIS https://www.iis.net/default.aspx?tabid=168 Ëç£ËÄÄ https://www.royaloo.com/index.html69 ‰æØÊç∑ÁΩëÁ´ô https://jjhou.csdn.net/70 javaÂ§ßÊú¨Ëê• https://www.javadby.com/71 ÊØîÁâπÁΩë https://www.chinabyte.com/72 51cto https://www.51cto.com/73 infoq https://www.infoq.com/74 ÂçöÂÆ¢Â†Ç https://blog.joycode.com/75 ÂµåÂÖ•ÂºèÂºÄÂèëÁΩë https://www.embed.com.cn/76 ÂµåÂÖ•ÂºèÂºÄÁ∫ø https://www.mcuol.com/77 ‰∏≠ÂµåÁΩë https://www.chinaeda.cn/78 ÈÖ∑Âã§ÁΩë https://www.kuqin.com/79 Á∫¢ËÅîlinuxÈó®Êà∑ https://www.linuxdiyf.com/80 itpubÊäÄÊúØÈó®Êà∑ https://www.itpub.net/81 Á®ãÂºèËÆæËÆ°‰ø±‰πêÈÉ® https://www.programmer-club.com/index.asp82 umlËΩØ‰ª∂Â∑•Á®ãÁªÑÁªá https://www.uml.org.cn/index.asp83 delphiÂõ≠Âú∞ https://www.delphifans.com/84 theserverside https://www.theserverside.com/85 ‰∏≠ÂõΩdonet‰ø±‰πêÈÉ® https://www.chinaaspx.com/86 ÁºñÁ®ãÁéã https://www.kingofcoders.com/87 it168 https://www.it168.com/88 open source software in c# https://csharp-source.net/89 ‰∏≠ÂõΩITÂÆûÈ™åÂÆ§ https://www.chinaitlab.com/90 ËêΩ‰ºçËÄÖÁ´ôÈïøËÆ∫Âùõ https://www.im286.com/91 ‰∏≠ÂõΩÁ´ôÈïøÁ´ô https://www.chinaz.com/92 asp.netÊ∫êÁ†Å‰∏ãËΩΩ‰∏ì‰∏öÁ´ô https://www.51aspx.com/93 itËÅå‰∏öÂ∑•Á®ãÂ∏à https://www.51myit.com/94 Â§™Âπ≥Ê¥ãÁîµËÑëÁΩë https://www.pconline.com.cn/95 ‰πòÈ£éÂéüÂàõÁ®ãÂ∫è https://study.qqcf.com/96 ÁΩëÊòìÂ≠¶Èô¢ https://tech.163.com/school/97 Á®ãÂ∫èËÆæËÆ°ÔºèÁ®ãÂ∫èÂºÄÂèëÁ±ªÊïôÁ®ã https://www.pcvz.com/Program/Programs/Index.html98 ÁÆóÊ≥ïÊ∫êÁ†ÅÂêß https://www.sfcode.cn/99 codegurn https://www.codeguru.cn/100 ÂæóÁõäÁΩë https://www.netyi.net/101 ‰∏≠ÂõΩeclipseÁ§æÂå∫ https://www.eclipseworld.org/bbs/102 È°πÁõÆÁÆ°ÁêÜËÄÖËÅîÁõü https://www.mypm.net/103 Ê†ñÊÅØË∞∑ https://www.21manager.com/","link":"/ËÆ∞ÂΩï/Website/"},{"title":"È¢Ü‰ø° APP","text":"","link":"/ËÆ∞ÂΩï/linktrust/"},{"title":"Mac ÊäÄÂ∑ß","text":"2015Âπ¥1Êúà14Êó• ÂæÆËΩØÈõ∑Âæ∑ËíôÂæ∑ÂÖ¨Âè∏ÊÄªÈÉ®ÔºåËøôÈáåÂç≥Â∞ÜÂè¨ÂºÄ‰∏ÄÂú∫ÂÖ≥‰∫é WIN10 Á≥ªÁªüÁöÑÂèëÂ∏É‰ºö„ÄÇÁÑ∂ËÄåÂæÆËΩØÊñ∞‰ªªCEO Ëê®ËíÇ‰∫ö¬∑Á∫≥Âæ∑Êãâ Âç¥ÈìÅÈùíÁùÄËÑ∏ÊúõÂêëÂè∞‰∏ã„ÄÇÊØïÁ´üÔºåÂá†‰πéË¢´Ê∑πÊ≤°Âú®Â™í‰ΩìËÆ∞ËÄÖË∫´ÂâçÂêÑÁßçÂêÑÊ†∑ÂèëÂÖâËãπÊûú Logo ‰πã‰∏≠ÁöÑÂæÆËΩØÂèëÂ∏É‰ºöÔºå‰ø®ÁÑ∂Êàê‰∏∫‰∫Ü‰∏Ä‰∏™ÂÖçË¥πÁöÑËãπÊûúÂπøÂëä„ÄÇ MacBook Á≥ªÂàóÁ¨îËÆ∞Êú¨‰πãÊâÄ‰ª•Êàê‰∏∫ÂäûÂÖ¨‰∫∫Â£´ÁöÑÂøÉÂ§¥ÂÆ†ÔºåÈô§‰∫ÜÊûÅÂÖ∑ÁßëÊäÄÂíåÁæéÊÑüÁöÑËÆæËÆ°Ôºå‰∏ªÊµÅÁöÑÁ°¨‰ª∂ÈÖçÁΩÆ‰πãÂ§ñÔºåÈ´òÊïàÁöÑ Mac OS X Á≥ªÁªüÊâçÊòØÊèêÈ´òÁîü‰∫ßÂäõÁöÑÂÖ≥ÈîÆÊâÄÂú®„ÄÇ Option + Shift +Ë∞ÉËäÇÈü≥Èáè‰∫ÆÂ∫¶macÈÄöËøáÈü≥ÈáèÈîÆÊàñËÄÖ‰∫ÆÂ∫¶ÈîÆÂ∞±ÂèØ‰ª•ÁÆÄÂçïÂø´ÈÄüÁöÑË∞ÉËäÇÔºå‰ΩÜÊòØÊØèÊ¨°‰∏ÄÂ§ßÊ†º‰∏ÄË∑≥Ôºå‰∏§ËÄÖ‰πãÈó¥Ë∑®Â∫¶ÂØπÊüê‰∫õÂú∫ÊôØÊù•ËØ¥ËøòÊòØÈó¥ÈöîÊúâ‰∫õÂ§ßÔºåÊØîÂ¶ÇÂú®ÈùôÈü≥ÁéØÂ¢ÉÁöÑÊó∂ÂÄôÊÉ≥Ë¶ÅÁ®çÂæÆÂºÄ‰∏Ä‰∫õÈü≥ÈáèÂç¥‰∏çÊÉ≥ÂΩ±Âìç‰ªñ‰∫∫ÔºåÊ≠§Êó∂‰Ω†ÂèØ‰ª•ËØïËØïÊåâ‰ΩèOption + ShiftÁÑ∂ÂêéÈÖçÂêàÈü≥ÈáèÈîÆÔºå‰Ω†‰ºöÊÉäÂ•áÁöÑÂèëÁé∞ÔºåÈü≥Èáè‰∫ÆÂ∫¶‰ºö‰ª•1/4Ê†ºÁöÑÂ∑ÆË∑ùËøõË°åË∞ÉËäÇ Ë∞ÉÊï¥Á™óÂè£Â§ßÂ∞èË∞ÉÊï¥Á™óÂè£Â§ßÂ∞èÁöÑÂêåÊó∂Êåâ‰ΩèOption + ShiftÈîÆÂ∞Ü‰ºö‰ΩøÊï¥‰∏™‰∫ãÁâ©‰∏ÄÊ¨°ÊàêÊØî‰æãÂú∞Â¢ûÈïøÂíåÁº©Â∞è„ÄÇÁöÑÂêåÊó∂Êåâ‰ΩèOption + ShiftÈîÆÂ∞Ü‰ºö‰ΩøÊï¥‰∏™‰∫ãÁâ©‰∏ÄÊ¨°ÊàêÊØî‰æãÂú∞Â¢ûÈïøÂíåÁº©Â∞è„ÄÇ ÁîµÊ∫êÊèêÁ§∫Èü≥ ÊøÄÊ¥ªÁöÑÊñπÊ≥ïÂæàÁÆÄÂçï: ÊâìÂºÄÂ∫îÁî®Á®ãÂ∫è - ÂÆûÁî®Â∑•ÂÖ∑ - ÁªàÁ´Ø. ËæìÂÖ•Â¶Ç‰∏ãÁöÑÂëΩ‰ª§: 1defaults write com.apple.PowerChime ChimeOnAllHardware -bool true; open /System/Library/CoreServices/PowerChime.app &amp; ÁÑ∂ÂêéÂõûËΩ¶, ÂÜçËØïËØïÂÖÖÁîµÊòØ‰∏çÊòØÂ∞±ÊúâÊèêÁ§∫Èü≥‰∫Ü? Â¶ÇÊûú‰Ω†‰∏çÂñúÊ¨¢Êó•Âêé‰πüÂèØ‰ª•ÂèñÊ∂àÂëΩ‰ª§Ë°åÂ¶Ç‰∏ã 1defaults write com.apple.PowerChime ChimeOnAllHardware -bool false;killall PowerChime ÂÖ≥Èó≠‰ªªÂä° Command + Option + Escape ‰ΩøÁî®Ëøô‰∏™ÊäÄÂ∑ß‰ºöÊØîËá™Â∑±Âú®ÊØè‰∏™È∫ªÁÉ¶ÁöÑÂ∫îÁî®Á®ãÂ∫è‰∏äÂè≥ÂáªÊõ¥Âø´„ÄÇ Launchpad‰∏≠‰∏çÊòæÁ§∫AppÂõæÊ†á Âú®ÁªàÁ´ØÈáçÂêØLaunchpad Á¨¨‰∏ÄÊ≠• rm ~/Library/Application\\ Support/Dock/*.dbÁ¨¨‰∫åÊ≠• killall Dock OK„ÄÇ mac Zip Âä†ÂØÜ ÊúÄÈÄö‰øóÁöÑÁî®Ê≥ï 1zip -q -r -e -m -o [yourName].zip someThing -q Ë°®Á§∫‰∏çÊòæÁ§∫ÂéãÁº©ËøõÂ∫¶Áä∂ÊÄÅ -r Ë°®Á§∫Â≠êÁõÆÂΩïÂ≠êÊñá‰ª∂ÂÖ®ÈÉ®ÂéãÁº©‰∏∫zip //ËøôÈÉ®ÊØîËæÉÈáçË¶ÅÔºå‰∏çÁÑ∂ÁöÑËØùÂè™ÊúâsomethingËøô‰∏™Êñá‰ª∂Â§πË¢´ÂéãÁº©ÔºåÈáåÈù¢ÁöÑÊ≤°ÊúâË¢´ÂéãÁº©ËøõÂéª -e Ë°®Á§∫‰Ω†ÁöÑÂéãÁº©Êñá‰ª∂ÈúÄË¶ÅÂä†ÂØÜÔºåÁªàÁ´Ø‰ºöÊèêÁ§∫‰Ω†ËæìÂÖ•ÂØÜÁ†ÅÁöÑ // ËøòÊúâÁßçÂä†ÂØÜÊñπÊ≥ïÔºåËøôÁßçÊòØÁõ¥Êé•Âú®ÂëΩ‰ª§Ë°åÈáåÂÅöÁöÑÔºåÊØîÂ¶Çzip -r -P Password01! modudu.zip SomeDir, Â∞±Áõ¥Êé•Áî®Password01!Êù•Âä†ÂØÜmodudu.zip‰∫Ü„ÄÇ -m Ë°®Á§∫ÂéãÁº©ÂÆåÂà†Èô§ÂéüÊñá‰ª∂ -o Ë°®Á§∫ËÆæÁΩÆÊâÄÊúâË¢´ÂéãÁº©Êñá‰ª∂ÁöÑÊúÄÂêé‰øÆÊîπÊó∂Èó¥‰∏∫ÂΩìÂâçÂéãÁº©Êó∂Èó¥ ÂΩìË∑®ÁõÆÂΩïÁöÑÊó∂ÂÄôÊòØËøô‰πàÊìç‰ΩúÁöÑ 1zip -q -r -e -m -o &apos;\\user\\someone\\someDir\\someFile.zip&apos; &apos;\\users\\someDir&apos; Êà™ÂõæCommand + Shift + 3 ÊçïÊçâÊï¥‰∏™Â±èÂπï„ÄÇCommand + Shift + 4 Â∞ÜÊçïËé∑ÊòæÁ§∫ÁöÑËá™ÂÆö‰πâÈÉ®ÂàÜ„ÄÇ ÂàÜÂâ≤ËßÜÂõæÂ∏ÉÂ±Ä Split ScreenÂàÜÂ±èÂäüËÉΩËøô‰æùÊóßÊòØ‰∏ÄÊù°ÊèêÂçáÁîü‰∫ßÂäõÁöÑÂäüËÉΩÔºå‰π†ÊÉØ‰∏Ä‰∏™Â±èÊâìÂºÄIDEAÔºåÂè¶Â§ñ‰∏Ä‰∏™ÂºÄÁùÄGoogleÔºåÂØπ‰∫éÊ≤°ÊúâÂ§ñÊé•ÊòæÁ§∫Âô®Êù•ËØ¥Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®MacËá™Â∏¶ÁöÑÂàÜÂ±èÊù•ÂÆûÁé∞ÔºàÊúâÁöÑËΩØ‰ª∂ÂèØËÉΩ‰∏çÊîØÊåÅÔºâ ‰ΩøÁî®ÊñπÊ≥ï: Â∑¶ÈîÆÊåâ‰Ωè‰∏Ä‰∏™Á®ãÂ∫èÂ∑¶‰∏äÊñπÁªøËâ≤ÊúÄÂ§ßÂåñÊåâÈíÆ‰∏çÂä®ÔºåËøôÊó∂‰ºöËÆ©‰Ω†ÈÄâÊã©ÂΩìÂâçÈÄâ‰∏≠App‰ºöÂá∫Áé∞Âú®Âì™‰∏ÄËæπÔºåÂèØ‰ª•ÊòØÂ∑¶Ëæπ‰πüÂèØ‰ª•ÊòØÂè≥ËæπÔºåÊéíÂ•Ω‰πãÂêéÂÜçÁÇπÂáªÂè¶‰∏Ä‰∏™AppÂ∞±‰ºöÂá∫Áé∞Âú®Âè¶‰∏Ä‰æßÔºåËøôÊ†∑‰∏ÄÊù•ÔºåÂêå‰∏ÄÂ±èÂπï‰∏≠Â∞±ÂêåÊó∂Êúâ‰∫Ü‰∏§‰∏™AppÁöÑÁïåÈù¢„ÄÇ‰∏≠Èó¥Êúâ‰∏ÄÊù°ÂàÜÈöîÁ∫øÔºåÊãñÂä®ÂàÜÂâ≤Á∫øÂèØ‰ª•ÈáçÊñ∞ÂàíÂàÜÂ∑¶Âè≥ÁöÑÂå∫ÂüüÂ§ßÂ∞èÔºåÂèØ‰ª•ËÆ©‰Ω†ÁöÑÊ≥®ÊÑèÂäõÊõ¥ÈõÜ‰∏≠Âú®Êüê‰∏ÄÊñπÈù¢ Xcode ÂíåÊ®°ÊãüÂô®ÂàÜÂ±èÈúÄË¶ÅÂú®ÁªàÁ´ØÂÆûÁé∞‰ª•‰∏ãÂëΩ‰ª§ 1defaults write com.apple.iphonesimulator AllowFullscreenMode -bool YES ÈÄâÈ°πÂç°ÊàñÁ™óÂè£‰πãÈó¥ÂàáÊç¢‰∏ç‰ΩøÁî®Èº†Ê†áÁöÑÊÉÖÂÜµ‰∏ãÂú®ÈÄâÈ°πÂç°ÊàñÁ™óÂè£‰πãÈó¥ÂàáÊç¢„ÄÇÂú®‰∏çÂêåÂ∫îÁî®Á®ãÂ∫è‰πãÈó¥ÂàáÊç¢ÔºöCommand + TabÂú®Áõ∏ÂêåÂ∫îÁî®Á®ãÂ∫èÁöÑÂ§ö‰∏™Á™óÂè£‰πãÈó¥ÂàáÊç¢ÔºöCommand + ~ Ë¶ÅÂú®Âêå‰∏Ä‰∏™ÊµèËßàÂô®Á™óÂè£‰∏≠ÂàáÊç¢Ê†áÁ≠æÔºåÂÆûÈôÖ‰∏äÊúâ‰∏§ÁßçÊñπÊ≥ïÔºö Command + Option +ÂâçËøõ/ÂêéÈÄÄÁÆ≠Â§¥ Control + TabÈÄöËøáÊ†áÁ≠æÂêëÂâçÁßªÂä®ÔºåControl + Tab + ShiftÂêëÂêéÁßªÂä®Ê†áÁ≠æ„ÄÇ ÂéªÊ†ºÂºèÁ≤òË¥¥Â§çÂà∂ÊñáÊú¨ÂÜÖÂÆπÁöÑÊó∂ÂÄôÁªèÂ∏∏‰ºöÂ∏¶Ê†ºÂºèÔºàÂ≠óÂè∑„ÄÅÈ¢úËâ≤„ÄÅÂ≠ó‰ΩìÔºåÊúâÊó∂ÂÄôËøòÊúâÁúã‰∏çËßÅÁöÑ‰ª£Á†ÅÔºâÔºåÊâãÂä®Ë∞ÉÊï¥‰ºöÂæàÈ∫ªÁÉ¶Ôºå ‰ΩøÁî®ÊñπÊ≥ïÔºö Command+CCommand+V ‚Äì&gt; Command + Shift + option + V ÈÄöËøá‰ª•‰∏äÊñπÊ≥ïÂ∞±ËÉΩÂø´ÈÄüÁöÑ‰∏¢ÂºÉÂéüÊúâÁöÑÊ†ºÂºèÂ±ûÊÄßÔºå‰ΩøÂÖ∂‰∏éÂΩìÂâçÊñáÊú¨Ê†ºÂºè‰øùÊåÅ‰∏ÄËá¥ 3„ÄÅÂ∫îÁî®Á®ãÂ∫è‚ÄúÊé•Âäõ‚Äù‰æãÔºö‚ÄúÁîµËÑë‰∏äÂ§çÂà∂ÔºåÊâãÊú∫‰∏äÁ≤òË¥¥‚ÄùÁöÑÈÄöÁî®Ââ™Ë¥¥ÊùøÔºåÊòØ‰∏çÊòØÂæàNB Êù°‰ª∂Ôºö1„ÄÅÊâÄÊúâËÆæÂ§áÂùá‰ΩøÁî®Âêå‰∏Ä Apple ID ÁôªÂΩï iCloud2„ÄÅÊâÄÊúâËÆæÂ§áÂùáÂ∑≤ÂºÄÂêØËìùÁâô3„ÄÅÊâÄÊúâËÆæÂ§áÂùáÂ∑≤ÂºÄÂêØ Wi-Fi ÊâìÂºÄÊé•ÂäõÊâãÊú∫ÔºöËÆæÁΩÆ‚Äì&gt;ÈÄöÁî®‚Äì&gt;Êé•Âäõ MACÔºöÁ≥ªÁªüÂÅèÂ•ΩËÆæÁΩÆ‚Äì&gt; ÈÄöÁî® ‚Äì&gt; ÂÖÅËÆ∏Âú®ËøôÂè∞MacÂíåiClouldËÆæÂ§á‰πãÈó¥‰ΩøÁî®‚ÄúÊé•Âäõ‚Äù ÊâìÂºÄiCloudÊâãÊú∫ÊâìÂºÄiCloudÔºöËÆæÁΩÆ‚Äì&gt;Â§¥ÂÉè‚Äì&gt;iCloudÁîµËÑëÊâìÂºÄiCloudÔºöÁ≥ªÁªüÂÅèÂ•ΩËÆæÁΩÆ‚Äì&gt; iCloud","link":"/ËÆ∞ÂΩï/macbook/"},{"title":"WWDC 2014","text":"Remembering that you are going to die is the best way I know to avoid the trap of thinking you have something to lose„ÄÇ Ë∞®ËÆ∞Ëá™Â∑±ÊÄª‰ºöÊ≠ªÂéªÔºåÊòØËÆ©Ëá™Â∑±ÈÅøÂÖçÈô∑ÂÖ•‚Äú‰∫∫ÁîüÊúâÊâÄÂ§±‚ÄùÊÄùËÄÉÁöÑÊúÄ‰Ω≥ÊñπÊ≥ï„ÄÇ","link":"/ËµÑËÆØ/2014/"},{"title":"WWDC 2015","text":"I think the greatest value of learning how to think‚Ä¶. I think everybody in this country should learn how to program a computer, should learn a computer language, because it teaches you how to think, it‚Äôs like going to law school, I don‚Äôt think anybody should be a lawyer, but I think going to law school may actually be useful coz it teaches you how to think in a certain way. In the same way the computer programming teaches you in a slightly different way how to think‚Ä¶ And so ‚Ä¶ I view computer science as a liberal art. It should be something everybody takes in a year in their life, one of the courses they take is, you know learning how to program. ‚Äî‚Äî‚Äì Steve Jobs ÊàëËÆ§‰∏∫Â≠¶‰π†ÊÄùËÄÉÊúÄÂ§ßÁöÑ‰ª∑ÂÄºÂú®‰∫é‚Ä¶ ÊàëËßâÂæóÊâÄÊúâÁæéÂõΩ‰∫∫ÈÉΩÂ∫îËØ•Â≠¶‰π†ÁºñÁ®ãÔºåÂ≠¶‰π†‰∏ÄÈó®ÁºñÁ®ãËØ≠Ë®ÄÔºåÂ≠¶‰π†ÁºñÁ®ãÊïô‰Ω†Â¶Ç‰ΩïÊÄùËÄÉÔºåÂ∞±ÂÉèÂ≠¶Ê≥ïÂæã‰∏ÄÊ†∑ÔºåÂ≠¶Ê≥ïÂæãÁöÑ‰∫∫Êú™ÂøÖÈÉΩÊàê‰∏∫ÂæãÂ∏àÔºå‰ΩÜÊ≥ïÂæãÊïô‰Ω†‰∏ÄÁßçÊÄùËÄÉÊñπÂºè„ÄÇÂêåÊ†∑ÁºñÁ®ã‰ºöÊïô‰Ω†Âè¶‰∏ÄÁßçÊÄùËÄÉÊñπÂºèÔºåÊâÄ‰ª•ÊàëÊääËÆ°ÁÆóÊú∫ÁßëÂ≠¶ÁúãÊàêÂü∫Á°ÄÊïôËÇ≤ÔºåÊòØÊØè‰∏™‰∫∫ÈÉΩÂ∫îËØ•Ëä±‰∏ÄÂπ¥Êó∂Èó¥Â≠¶‰π†ÁöÑËØæÁ®ã„ÄÇ ‚Äî‚Äî‚Äì Âè≤ËíÇÂ§´¬∑‰πîÂ∏ÉÊñØ","link":"/ËµÑËÆØ/2015/"},{"title":"WWDC 2016","text":"There‚Äôs a phrase in Buddhism, ‚ÄòBeginner‚Äôs mind.‚Äô It‚Äôs wonderful to have a beginner‚Äôs mind. ‰ΩõÊïô‰∏≠Êúâ‰∏ÄÂè•ËØùÔºöÂàùÂ≠¶ËÄÖÁöÑÂøÉÊÄÅÔºöÊã•ÊúâÂàùÂ≠¶ËÄÖÁöÑÂøÉÊÄÅÊòØ‰ª∂‰∫Ü‰∏çËµ∑ÁöÑ‰∫ãÊÉÖ„ÄÇ","link":"/ËµÑËÆØ/2016/"},{"title":"WWDC 2017","text":"We think basically you watch television to turn your brain off, and you work on your computer when you want to turn your brain on. Êàë‰ª¨ËÆ§‰∏∫ÁúãÁîµËßÜÁöÑÊó∂ÂÄôÔºå‰∫∫ÁöÑÂ§ßËÑëÂü∫Êú¨ÂÅúÊ≠¢Â∑•‰ΩúÔºåÊâìÂºÄÁîµËÑëÁöÑÊó∂ÂÄôÔºåÂ§ßËÑëÊâçÂºÄÂßãËøêËΩ¨„ÄÇ","link":"/ËµÑËÆØ/2017/"},{"title":"WWDC 2018","text":"Being the richest man in the cemetery doesn‚Äôt matter to me ‚Ä¶ Going to bed at night saying we‚Äôve done something wonderful‚Ä¶ that‚Äôs what matters to me„ÄÇ ÊòØÂê¶ËÉΩÊàê‰∏∫Â¢ìÂú∞ÈáåÊúÄÂØåÊúâÁöÑ‰∫∫ÔºåÂØπÊàëËÄåË®ÄÊó†Ë∂≥ËΩªÈáç„ÄÇÈáçË¶ÅÁöÑÊòØÔºåÂΩìÊàëÊôö‰∏äÁù°ËßâÊó∂ÔºåÊàëÂèØ‰ª•ËØ¥ÔºöÊàë‰ª¨‰ªäÂ§©ÂÆåÊàê‰∫Ü‰∏Ä‰∫õÁæéÂ¶ôÁöÑ‰∫ã„ÄÇ","link":"/ËµÑËÆØ/2018/"},{"title":"WWDC 2019","text":"Your time is limited, so don‚Äôt waste it living someone else‚Äôs life.‚Ä¶Don‚Äôt let the noise of others‚Äô opinions drown out your own inner voice„ÄÇ ‰Ω†ÁöÑÊó∂Èó¥ÊúâÈôêÔºå‰∏çË¶ÅÊµ™Ë¥π‰∫éÈáçÂ§çÂà´‰∫∫ÁöÑÁîüÊ¥ª„ÄÇ‰∏çË¶ÅËÆ©Âà´‰∫∫ÁöÑËßÇÁÇπÊ∑πÊ≤°‰∫Ü‰Ω†ÂÜÖÂøÉÁöÑÂ£∞Èü≥„ÄÇ","link":"/ËµÑËÆØ/2019/"},{"title":"Êú™Êù•‰∫îÂπ¥ÔºåiOS ÂºÄÂèëÂ¶Ç‰ΩïÂâçË°åÔºü","text":"„ÄêCSDN ÁºñËÄÖÊåâ„ÄëÊäÄÊúØÂúàÈáå‰∏ÄÁõ¥ÂÄ°ÂØº‰∏ÄÂè•ËØùÔºåÈÇ£‰æøÊòØ‚ÄúÊã•Êä±ÂèòÂåñ‚ÄùÔºåÂõ†‰∏∫ÊäÄÊúØÂßãÁªàÂú®È£ûÈÄüÂú∞Êõ¥Êñ∞Ëø≠‰ª£ÔºåËøáÂéªÊéåÊè°ÁöÑÊäÄËÉΩÂèØËÉΩÁ™ÅÁÑ∂‰πãÈó¥Â∞±ËøáÊó∂‰∫Ü„ÄÇÂú®ËøëÂá†Âπ¥ÔºåÁßªÂä®ÂºÄÂèëÈÄêÊ∏êË∂ã‰∫éÁ®≥ÂÆöÔºåËÄå‰∫∫Â∑•Êô∫ËÉΩ„ÄÅÂå∫ÂùóÈìæÁ≠âÊäÄÊúØÂºÄÂßãÁîöÂö£Â∞ò‰∏äÔºåÂÆ¢Êà∑Á´ØÂºÄÂèëËÄÖ‰ª¨‰∏çÁî±ÂæóÂºÄÂßãËø∑Ëå´ÔºåÊõæÁªèÂ¶ÇÊ≠§ÂêÉÈ¶ôÔºåÊú™Êù•ÂèàËØ•ÊÄé‰πàËµ∞Ôºü‰πüËÆ∏Êú¨Êñá‰ºöÊúâ‰∏ÄÁÇπÊÄùË∑Ø‰∏äÁöÑÂ∏ÆÂä©„ÄÇ ‰ΩúËÄÖ | David O. ËØëËÄÖ | ÁΩóÊò≠Êàê Ë¥£Áºñ | Ê≤≠‰∏É Âá∫ÂìÅ | CSDNÔºàIDÔºöCSDNnewsÔºâ ‰ª•‰∏ã‰∏∫ËØëÊñáÔºö ËøëÂçÅÂπ¥Ôºå10~15 Âπ¥Ââç‰∏çÂ≠òÂú®ÁöÑÊäÄÊúØÔºåËÆ©Ëøô‰∏™‰∏ñÁïåÂèòÂæóÈªØÁÑ∂Â§±Ëâ≤„ÄÇÊúâË∂£ÁöÑÊòØÔºåËøô‰∫õÊ¶ÇÂøµÊ≠£Âú®ÊûÑÂª∫Êú™Êù•ÁöÑÁîüÊ¥ªÊñπÂºè„ÄÇÂ¶ÇÊûú‰Ω†ËÆ§‰∏∫‰Ω†Âú®Áé∞Âú®Â∑≤Áªè‰∏äÁ∫øÁöÑ App ‰∏≠ÁúãÂà∞‰∫ÜËøô‰∫õÂèòÂåñÔºåÂπ∂‰∏î‰πüÂú®ÁùÄÊâãÂºÄÂèëËá™Â∑±ÁöÑ AppÔºåÂú®Êú™Êù•‰∫îÂπ¥Ôºå‰Ω†‰æùÁÑ∂‰ºöÂØπ iOS Á®ãÂ∫èÂºÄÂèëÁöÑÂèëÂ±ïÊñπÂºèÊÑüÂà∞ÂºÇÂ∏∏ÈúáÊÉä„ÄÇ ‰ª•‰∏ãÂõõÁÇπÔºå‰Ω†ÂèØ‰ª•ÈáçÁÇπÂÖ≥Ê≥®Ôºö ‰∫∫Â∑•Êô∫ËÉΩ ‰∫∫Â∑•Êô∫ËÉΩÔºàAIÔºâÊòØ‰∏Ä‰∏™Áã¨ÁâπÁöÑËåÉÂºèËΩ¨Êç¢Âô®ÔºàParadigm ShifterÔºâ[1]„ÄÇiOS Â∫îÁî®Á®ãÂ∫èÂºÄÂèëÈ¢ÜÂüü‰∏≠ÔºåÁùøÊô∫ÁöÑÂºÄÂèëËÄÖÊó†Êó∂Êó†ÂàªÈÉΩÂú®ÂàõÂª∫Âü∫‰∫é AI ÁöÑÂ∫îÁî®Á®ãÂ∫è„ÄÇ‰æãÂ¶ÇÊòüÂ∑¥ÂÖãÔºåÂèëÂ∏É‰∫Ü‰∏Ä‰∏™ÂêçÂè´ My Starbucks Barista ÁöÑ iOS Â∫îÁî®ÔºåÂÆÉ‰ºöÊ†πÊçÆ‰Ω†ÂΩìÂ§©ÁöÑÈúÄË¶ÅÔºå‰∏∫‰Ω†ËÆ¢Ë¥≠ÂíñÂï°ÂíåÈõ∂È£ü„ÄÇÂú®ÈáëËûçÈ¢ÜÂüüÔºå‰πüÊúâÂæàÂ§ö iOS ÁöÑ‰∫∫Â∑•Êô∫ËÉΩÂ∫îÁî®Á®ãÂ∫èÔºåÊ†πÊçÆ‰Ω†ÁöÑÊåáÁ§∫ÔºåËá™Âä®ËøõË°å‰∫§Êòì„ÄÇ Âú®‰∏ç‰πÖÁöÑÂ∞ÜÊù•ÔºåÂú® iOS Âπ≥Âè∞Ôºå‰Ω†Â∞Ü‰ºöÁúãÂà∞Ë∂äÊù•Ë∂äÂ§öÁöÑ AI Â∫îÁî®Á®ãÂ∫èÔºåÂÆÉ‰ª¨Â∞Ü‰ª•ÂÖ®Êñ∞ÁöÑÊñπÂºèÔºåÈÄêÊ∏êÊõøÊç¢‰º†ÁªüÊñπÂºè‰∏∫Êàë‰ª¨Êèê‰æõÊúçÂä°„ÄÇËøô‰∫õ AI Â∫îÁî®Á®ãÂ∫èÂ∞Ü‰ª£Êõø‰Ω†ÂÅöÈÄâÊã©„ÄÇËøô‰∏™È¢ÜÂüüÔºåÊúâÊó†ÈôêÂèØËÉΩ„ÄÇ Â¢ûÂº∫Áé∞ÂÆûÂ¢ûÂº∫Áé∞ÂÆûÔºàARÔºâ‰∏é AI ‰∏ÄÊ†∑Á•ûÂ•á„ÄÇÂá†Âπ¥ÂâçÔºå Pok√©mon GO Â∞ÜËôöÊãüÊÄ™ÂÖΩÂ∏¶Âà∞Êàë‰ª¨ÁöÑ‰∏ñÁïåÔºåËÆ©ÂÖ®‰∏ñÁïåÁöÑ‰∫∫ÂØπ AR Ë∂ã‰πãËã•Èπú„ÄÇËøô‰∏™Ê∏∏ÊàèÔºåÂú® 2016 Âπ¥Êî∂ÂÖ•Á∫¶ 9.5 ‰∫øÁæéÂÖÉÔºåÂà∞ 2017 Âπ¥ÔºåÂ∞±Êé•Ëøë‰∫Ü 9 ‰∫øÁæéÂÖÉ„ÄÇ Âú®Êú™Êù•Âá†Âπ¥ÔºåAR Â∞ÜÂú®Ê∏∏ÊàèÂíåÂÖ∂ÂÆÉÂ∫îÁî®‰∏≠‰∫ßÁîüÊõ¥Âä†ÊÉä‰∫∫ÁöÑÂΩ±Âìç„ÄÇËøô‰∫õÂèòÂåñÔºå‰Ω†Â∞ÜÂú®Êú™Êù•Âá†Âπ¥ÁöÑ iOS Â∫îÁî®Á®ãÂ∫è‰∏≠ÁúãÂà∞„ÄÇ Áâ©ËÅîÁΩëÔºàIoTÔºâ ÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºåÁâ©ËÅîÁΩëÔºàIoTÔºâÊ≠£Âú®ÈÄêÊ∏êÂ£ÆÂ§ß„ÄÇÁé∞Â¶Ç‰ªäÔºå‰Ω†ÂèØ‰ª•ÁúãÂà∞ÔºåÁÅØ„ÄÅÈó®ÈìÉ„ÄÅÊô∫ËÉΩÈó®ÈîÅ„ÄÅÂÆ∂Â∫≠ÂÆâÈò≤Á≥ªÁªü„ÄÅÈü≥ÁÆ±„ÄÅÁîµËßÜ„ÄÅÁîµËßÜÁõíÂ≠ê„ÄÅÊâãË°®„ÄÅÂπ≥Êùø„ÄÅÂÜ∞ÁÆ±ÈÉΩËøûÊé•Âà∞‰∫íËÅîÁΩë‰∏äÔºå‰Ω†ÂèØ‰ª•ÈöèÊó∂ÈöèÂú∞ÊéßÂà∂ÂÆÉ‰ª¨„ÄÇËôΩÁÑ∂ iOS Â∫îÁî®Á®ãÂ∫è‰∏çËÉΩËÆ©‰Ω†ÁúãÂà∞ÂÜ∞ÁÆ±‰∏≠ËøòÂâ©Â§öÂ∞ëÈ£üÁâ©ÔºåËøò‰∏çËÉΩÊîπÂñÑÁâ©ËÅîÁΩëÁöÑ‰ΩìÈ™åÔºå‰ΩÜÊòØ IoT ËÆæÂ§áËé∑ÂèñÂà∞Ë∂äÂ§öÁöÑÊï∞ÊçÆÔºåË∂äËÉΩÂ∏ÆÂä©‰Ω†‰ΩúÂá∫Ê≠£Á°ÆÁöÑÈÄâÊã©„ÄÇ IoT Ê≠£Âú®‰ºòÂåñÈÖíÂ∫ó„ÄÅÊ±ΩËΩ¶„ÄÅÈõ∂ÂîÆÁ≠âÂ§öÁßçË°å‰∏öÔºåËøôÂá†Âπ¥ÁöÑÂèòÂåñÔºåÁîöÊòØÊúâË∂£„ÄÇÊ≠§Â§ñÔºåÂΩì‰∫∫Â∑•Êô∫ËÉΩ‰∏é IoT Áõ∏ÁªìÂêàÔºåIoT Â∞ÜÊúâÂèØËÉΩÂΩªÂ∫ïÊîπÂèòÂÖ®ÁêÉ‰∫∫ÁöÑÁîüÊ¥ªÊñπÂºè„ÄÇ Âü∫‰∫é‰∫ëÁöÑÂ∫îÁî®Á®ãÂ∫è ÂæàÂ§ö iOS Â∫îÁî®Á®ãÂ∫èÂºÄÂèë‰∏ìÂÆ∂È¢ÑÊµãÔºåÂü∫‰∫é‰∫ëÁöÑ iOS Â∫îÁî®Á®ãÂ∫èÂ∞ÜÊòØ‰∏ã‰∏Ä‰∏™Ë°å‰∏öÈáçÁÇπ„ÄÇÂú®Êú™Êù•Âá†Âπ¥ÂÜÖÔºåÂ∞ÜÊúâË∂ÖËøá‰∏ÄÂçäÁöÑ‰ºÅ‰∏ö‰∏éÁªÑÁªáÊã•ÊúâËá≥Â∞ë‰∏Ä‰∏™Âü∫‰∫é‰∫ëÁöÑÂéüÁîüÂ∫îÁî®Á®ãÂ∫è[2]„ÄÇ ‰∏äÈù¢ÁöÑÈ¢ÑÊµãÈáåÔºåÊúâ‰∏Ä‰∏™Â•áÊÄ™ÁöÑ‰∫ãÊÉÖÔºåËøô‰∏™Â∏ÇÂú∫Ôºå80% ÁöÑ‰ªΩÈ¢ùÂ∞ÜÁî± Google„ÄÅÂæÆËΩØ„ÄÅ‰∫öÈ©¨ÈÄäÂç†ÊçÆÔºåËÄåËãπÊûúÂàôÂè™Ââ©‰∏ã 20% Â∑¶Âè≥„ÄÇËøôÊÑèÂë≥ÁùÄÔºåÂ¶ÇÊûú‰Ω†ÁöÑ iOS Â∫îÁî®Á®ãÂ∫èË¶ÅÂú®Ëøô 1780 ‰∫øÁæéÂÖÉÁöÑÂ∏ÇÂú∫‰∏≠Âç†ÊçÆ‰∏ÄÂ∏≠‰πãÂú∞Ôºå‰Ω†ÈúÄË¶ÅÂ•ΩÂ•ΩÁ£®ÁªÉ‰Ω†ÁöÑ iOS ÂºÄÂèëÊäÄËÉΩ„ÄÇ Ê≠§Â§ñÔºåËãπÊûúÂèØËÉΩ‰ºöÂú®Êú™Êù•Âá†Âπ¥ÔºåÂÉèÂÖ∂ÂÆÉÈ¢ÜÂüü‰∏ÄÊ†∑ÔºåÈÄöËøáÂàõÊñ∞Êù•Êä¢ÂõûÂ∏ÇÂú∫„ÄÇËãπÊûú‰ªäÂ§©ÁöÑÊàêÁª©ÔºåÊàë‰ª¨Áõ∏‰ø°ÂÆÉÊúâÈÇ£‰∏™ËÉΩÂäõ„ÄÇ ÁªìËÆ∫ ÊÄª‰πãÔºå‰∏äÈù¢ÊèêÂà∞ÁöÑÈ¢ÜÂüüÔºåÂπ∂ÈùûÂè™ÊúâËøô‰∫õÈ¢ÜÂüü„ÄÇÂú® iOS ÂºÄÂèë‰∏≠ÔºåÂèØÁ©øÊà¥ËÆæÂ§áÔºåË∑®Âπ≥Âè∞Â∫îÁî®„ÄÅÁßªÂä®ÊîØ‰ªòÂíåÂå∫ÂùóÈìæÊäÄÊúØÁ≠âÈ¢ÜÂüüÔºåÈÉΩËÉΩÂºÄÂèëÂá∫‰ª§‰∫∫ÊÉäÂèπÁ®ãÂ∫è„ÄÇ ËøôÁØáÊñáÁ´†Âπ∂‰∏çÊòØÈ¢ÑÊµãÊú™Êù•ÔºåËÄåÊòØÂëäËØâ‰Ω†‰∏Ä‰∫õÊΩúÂú®ÁöÑÈ¢ÜÂüüÔºåÂú®ÂâçÊúüÂèëÂ±ïÁöÑÊó∂ÂÄôÊäì‰ΩèÊú∫‰ºö„ÄÇ Ë∞®‰ª•ÊäõÁ†ñÂºïÁéâÔºåÊúüÂæÖÊõ¥Â§öÊé¢ËÆ®„ÄÇ Áõ∏ÂÖ≥ËµÑÊñôÔºö [1] https://wiki.mbalib.com/wiki/ËåÉÂºèËΩ¨Êç¢ [2] https://go.forrester.com/blogs/predictions-2018-cloud-computing-accelerates-enterprise-transformation-everywhere/ ÂéüÊñáÈìæÊé•Ôºöhackernoon Êú¨Êñá‰∏∫ CSDN ÁøªËØëÔºåÂ¶ÇÈúÄËΩ¨ËΩΩÔºåËØ∑Ê≥®ÊòéÊù•Ê∫êÂá∫Â§Ñ„ÄÇ","link":"/CSDNnews/"},{"title":"BT ÁßçÂ≠êÂíåÁ£ÅÂäõÈìæÊé•ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºü","text":"ÈìæÊé•ÔºöÂõûÂΩ¢ÈíàPaperClip","link":"/ËµÑËÆØ/BitTorrent/"},{"title":"‰Ω†ÁöÑÁ°¨ÁõòÊòØÂ¶Ç‰ΩïÂ≠òÂÇ®Êï∞ÊçÆÁöÑÔºü","text":"ÈìæÊé•ÔºöÂõûÂΩ¢ÈíàPaperClip","link":"/ËµÑËÆØ/harddisk/"},{"title":"DDoSÔºàÂàÜÂ∏ÉÂºèÊãíÁªùÊúçÂä°ÔºâÊîªÂáªÊòØÊó†Ëß£ÁöÑÂêóÔºü","text":"‚Äú DDOSÔºü ‰∏ÄË®ÄÈöæÂ∞ΩÂïäÔºÅ ‚Äù ÂÖàËØ¥ÁªìËÆ∫ÔºåDDoSÊòØËøëÂπ¥Êù•ÁΩëÁªúÊîªÂáª‰∏≠ÁöÑ‰∏ÄÊ£µ‚ÄúÂ∏∏ÈùíÊ†ë‚ÄùÔºåÁöÑÁ°ÆÂæàÈöæÁº†Ôºå‰ΩÜËØ¥ÂÆÉÊòØÊó†Ëß£ÁöÑÔºåÈÇ£‰πüÊúâÁÇπÂ§™ÁúãÂæóËµ∑ÂÆÉ‰∫Ü„ÄÇËôΩÁÑ∂DDoSÂú®ÂØπÂæàÂ§öÂ§ßÂπ≥Âè∞ÁöÑÊîªÂáª‰∏≠Âá∫Â∞Ω‰∫ÜÈ£éÂ§¥Ôºå‰ΩÜÂú®Áé∞Âú®‰∫íËÅîÁΩëÁöÑËß£ÂÜ≥ÊñπÊ°à‰∏≠ÔºåÂπ∂‰∏çÁº∫‰πèÂ∫îÂØπDDoSÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ ËØ¥Ëµ∑DDoSÊîªÂáªÔºåÊàëËÑëÊµ∑ÈáåËÉΩÂ§üÊÉ≥Âà∞ÁöÑÂÖ®ÈÉΩÊòØ‰∏≠ÂõΩÊ∞ëÈó¥‰øóËØ≠Ôºå‰ªÄ‰πà‚ÄúÂèåÊã≥ÈöæÊïåÂõõÊâãÔºåÂ•ΩÊ±âÊû∂‰∏ç‰Ωè‰∫∫Â§ö‚ÄùÔºå‰ªÄ‰πà‚ÄúÂçÉÊñ§Êã®Âõõ‰∏§‚ÄùÔºå‰ªÄ‰πà‚Äú‰π±Êã≥ÊâìÊ≠ªËÄÅÂ∏àÂÇÖ‚ÄùÁ≠âÁ≠âÁ≠âÁ≠â„ÄÇ ‰πãÂâçÊúâÊúãÂèãË∑ëÊù•ÈóÆÊàëDDoSÊòØ‰∏™‰ªÄ‰πà‰∏úË•øÔºå‰∏∫‰ªÄ‰πàËøô‰πàÂ§ö‰∫íËÅîÁΩëÂ∑®Â§¥ÈÉΩË¢´ÊêûÂæóÊ≤°ÊúâËÑæÊ∞îÔºåÊàëËÆ∞ÂæóÊàëÂΩìÊó∂ÊàëÊòØËøô‰πà‰∏æÁöÑ‰æãÂ≠êÔºö Êàë‰ª¨Ëøô‰∏Ä‰ª£‰∫∫Â∞èÁöÑÊó∂ÂÄôÔºåËá™Âä©È§êÂºÄÂßãÂú®‰∏≠ÂõΩÂÜÖÂú∞È£éË°åÔºåÈÇ£‰ºöÂÑøËøô‰∏™Ë°å‰∏öÈáå‰∏∫‰∫ÜÊâìÂáªÁ´û‰∫âÂØπÊâãÔºåÂØπÊâãÊúÄÊÉØÂ∏∏‰ΩøÁî®ÁöÑÈò¥ÊãõÊòØÈõá‰Ω£ÂæàÂ§ö‰∫îÂ§ß‰∏âÁ≤óÁöÑ‰∫∫ÔºåÁªô‰ªñ‰ª¨Èí±ÂéªÂØπÊñπÁöÑÂ∫óÈáå‰∏ÄÈÄöÁåõÂêÉÔºåÊùØÁõòÁãºËóâ‰πã‰∏ãÔºåÁî®‰∏ç‰∫ÜÂá†Â§©ËøôÂÆ∂Ëá™Âä©È§êÂ∞±ËÉΩÁªôÂêÉÈªÑ‰∫Ü„ÄÇ ËÄåDDoSÊîªÂáªÊØîËøôÁßçËøòÈò¥ÊçüÔºåÂ¶ÇÊûú‰Ω†ÂºÄ‰∫Ü‰∏ÄÂÆ∂È§êÈ¶ÜÔºå‰Ω†ÁöÑÂØπÊâãÂ¶ÇÊûúÊÉ≥Êêû‰Ω†ÔºåÊúÄÂ•ΩÁöÑÂäûÊ≥ïÂ∞±ÊòØÊâæ‰∏ÄÂ†ÜÂú∞ÁóûÊµÅÊ∞ìÂà∞‰Ω†ÁöÑÂ∫óÈáåÂùêÁöÑÊª°Êª°‰∏ÄÂ±ãÂ≠êÔºå‰Ω†Â¶ÇÊûú‰∏äÂâçÈóÆÔºå‰ªñ‰ª¨Â∞±‰∏ÄÁõ¥Ë∑ü‰Ω†ÊâØÊ∑°ÊâæÈ∫ªÁÉ¶ÔºåÂØºËá¥ÁúüÊ≠£ÊÉ≥ÂêÉÈ•≠ÁöÑÈ°æÂÆ¢‰∏ÄÁúãËøô‰∏™ÊÉÖÂΩ¢ÔºåÊéâÂ§¥Â∞±Ëµ∞‰∫Ü„ÄÇ Áî®‰∏ç‰∫ÜÂ§ö‰πÖÔºå‰Ω†ÁöÑÈ§êÈ¶ÜÂ∞±‰ºöÂºÄ‰∏ç‰∏ãÂéªÔºåËÄå‰Ω†ÁöÑÁ´û‰∫âÂØπÊâãÂ∞±‰ºöË∂ÅÊú∫ËöïÈ£üÊéâ‰Ω†ÁöÑÂ∏ÇÂú∫‰ªΩÈ¢ùÔºåËÄåÊîæÂú®ÁΩëÁªúËØ≠Â¢ÉÈáåÔºåËøôÂ∞±ÊòØDDoSÊîªÂáªÁöÑÊúÄÂü∫Êú¨ÂéüÁêÜ„ÄÇ ËÄåËøô‰ª∂‰∫ã‰πãÊâÄ‰ª•ÈöæÁº†Âú®‰∫éÔºå‰∏Ä‰∏§‰∏™Êó†ËµñÊ†πÊú¨Êàê‰∏ç‰∫ÜÊ∞îÂÄôÔºåÊÉ≥Ë¶ÅËÄçÊµÅÊ∞ìÂøÖÈ°ªË¶ÅÊúâÂæàÂ§ö‰∏™Êó†ËµñÈõÜÁªìÂú®‰∏ÄËµ∑„ÄÇÊâÄ‰ª•ÂíåÁé∞ÂÆû‰∏ñÁïå‰∏≠ÁöÑÊó†Ëµñ‰∏ÄÊ†∑ÔºåDDoSÁúüÊ≠£ÁöÑÊùÄÊâãÈîèÂú®‰∫éÂà©Áî®ËÉΩÂ§üÂèëÂä®ÁöÑÊ±πÊ∂åÁöÑÊµÅÈáèÔºåÂèØ‰ª•Áû¨Èó¥ÂÜ≤ÂûÆË¢´ÊîªÂáªÁΩëÁ´ôÁöÑÊúçÂä°Âô®„ÄÇ Â¶ÇÊûúÊàë‰ª¨ÂõûÊ∫Ø‰∏Ä‰∏ãÂéÜÂè≤ÁöÑËØùÔºå‰ºöÂèëÁé∞ÈªëÂÆ¢ÁªÑÁªá‰πãÊâÄ‰ª•‰ºöÊúâÁªÑÁªáÊúâÈ¢ÑË∞ãÁöÑÂèëËµ∑DDoSÊîªÂáªÔºåÂü∫Êú¨‰∏äÈÉΩÊòØÂü∫‰∫é‰ª•‰∏ãÂá†‰∏™ÂéüÂõ†Ôºö Êúâ‰∫õË°å‰∏öÂ¶ÇÊûúÁΩëÁ´ôË¢´ÊÅ∂ÊÑèÊîªÂáªÔºå‰ºöÈÄ†ÊàêÂæàÈöæ‰º∞ÈáèÁöÑÊçüÂ§±ÔºåËøô‰∏™Êó∂ÂÄôÈªëÂÆ¢ÂèëÂä®DDoSÊîªÂáªÁöÑÂàùË°∑‰∏ÄËà¨ÊòØÂá∫‰∫éÊï≤ËØàÂãíÁ¥¢Ôºå‰∏∫‰∫Ü‰øùËØÅ‰ºÅ‰∏öÁöÑÊ≠£Â∏∏ËøêËΩ¨Ôºå‰ªñ‰ª¨ÈÄöÂ∏∏ÊÑøÊÑèÂêëÈªëÂÆ¢‰ªòÈ´òÈ¢ùÁöÑËµéÈáëÔºõ Ë°å‰∏öÂÜÖË°ÄÊµ∑‰∏ÄÁâáÔºåDDoSÊòØÊÅ∂ÊÑèÁ´û‰∫âÁöÑÂ±†ÂàÄ„ÄÇËøô‰∏™Áé∞Ë±°‰ªéÈÄªËæë‰∏äÔºåÂÖ∂ÂÆûÈõá‰Ω£Êó†ËµñÂéªÂç†È¢ÜÂØπÊâãÈ§êÈ¶ÜÁöÑÂéüÁêÜÊòØ‰∏ÄÊØõ‰∏ÄÊ†∑ÁöÑÔºåËÄå‰∏îDDOSÊîªÂáªÊó©Â∑≤‰∫ß‰∏öÂåñÔºåÁé∞Âú®‰∏≠ÂõΩÁöÑDDOSÈªëÂ∏ÇÔºåÂá∫Èí±ËØ∑ÈªëÂÆ¢Êâì1GÁöÑÊµÅÈáèÂà∞‰∏Ä‰∏™ÁΩëÂêßÊàñÁΩëÁ´ôÔºåÂ∏ÇÂú∫‰ª∑Âè™Ë¶Å‰∏çÂà∞50ÂùóÈí±Ôºå‰ΩÜÂØπ‰∫é‰∏Ä‰∏™Âàõ‰∏öÂÖ¨Âè∏ÊàñËÄÖÂπ≤ËÑÜÂ∞±ÊòØ‰∏Ä‰∏™Â∞èÁΩëÂêßÊù•ËØ¥ÔºåËøôÂ∑≤ÁªèÁÆóÊòØÂèØ‰ª•ÁÅ≠È°∂ÁöÑÊó†Â¶Ñ‰πãÁÅæ‰∫Ü„ÄÇ DDoSÊîªÂáªÂæÄÂæÄÊàê‰∏∫Êé©ÁõñÁúüÂÆûÁΩëÁªúÊîªÂáªÁöÑÁÉüÈõæÂºπÔºåÂú®ÈÅ≠ÂèóDDoSÊîªÂáªÁöÑ‰ºÅ‰∏ö‰∏≠ÔºåÈÉ®ÂàÜ‰ºÅ‰∏öËøò‰º¥ÈöèÊï∞ÊçÆ‰∏¢Â§±ÁöÑÁé∞Ë±°ÔºåÈªëÂÆ¢Âà©Áî®DDoSÊîªÂáªÊé©ÁõñÂÖ∂Á™ÉÂèñÁî®Êà∑ÈöêÁßÅÁöÑÁúüÂÆûÁõÆÁöÑÔºåËøôÁßçÊîªÂáªË°å‰∏∫Âú®Á§æ‰∫§ÁΩëÁ´ô„ÄÅÈáëËûçÈ¢ÜÂüüÁ≠âÁî®Êà∑ÈöêÁßÅÈ´ò‰ª∑ÂÄºÁöÑË°å‰∏öÂ∞§‰∏∫È´òÂèë„ÄÇ ÊØîÂ¶ÇËØ¥ÔºåÂéªÂπ¥Âπ¥ÂàùÁöÑÊó∂ÂÄôÔºåËç∑ÂÖ∞Á¨¨‰∏ÄÂ§ßÈì∂Ë°åËç∑ÂÖ∞ÂïÜ‰∏öÈì∂Ë°å‰∫é2018Âπ¥1Êúà28Êó•ÊôöÈó¥ÈÅ≠Âà∞DDoSÊîªÂáªÔºõÁ¨¨‰∫åÂ§ßÈì∂Ë°åËç∑ÂÖ∞Âêà‰ΩúÈì∂Ë°åÁöÑÁΩëÈì∂ÊúçÂä°29Êó•Êó©Êô®ÈÅ≠Âà∞ÊîªÂáªÔºõÁ¨¨‰∏âÂ§ßÈì∂Ë°åËç∑ÂÖ∞Èì∂Ë°åÂú®ÈÇ£‰∏ÄÂë®ÂÜÖÂÖ±ÈÅ≠Âà∞7Ê¨°ÁΩëÁªúÊîªÂáªÔºå‰ªÖÂë®Êú´Â∞±Êúâ3Ê¨°„ÄÇ ‰∏çËøáËøô‰∏ÄÊ¨°ÂèëÁîüÂú®Ëç∑ÂÖ∞ÁöÑÈíàÂØπÈì∂Ë°åÁ≥ªÁªüÁöÑÊîªÂáªÂπ∂Ê≤°ÊúâÈÄ†ÊàêÁî®Êà∑ÈöêÁßÅÁöÑÊ≥ÑÈú≤ÔºåÂéüÂõ†Âú®‰∫éËøô‰ªÖ‰ªÖÊòØ‰∏ÄÊ¨°Êù•Ëá™‰øÑÁΩóÊñØ‰∏Ä‰∏™ÁΩëÁªúÈó¥Ë∞çÁªÑÁªáCozy BearÂØπËç∑ÂÖ∞ÊÉÖÊä•ÁªÑÁªáAIVD‰æµÁäØÂÖ∂ËÆ°ÁÆóÊú∫ÁöÑ‚ÄúÂçïÁ∫Ø‚ÄùÁöÑÊä•Â§çË°å‰∏∫„ÄÇ‰ΩÜÂπ∂‰∏çÊòØÊâÄÊúâÈªëÂÆ¢ÁªÑÁªáÂèëËµ∑ÁöÑDDoSÊîªÂáªÈÉΩÂ¶ÇÊ≠§ÂçïÁ∫Ø„ÄÇ 2018Âπ¥Âπ¥Â∫ïÊó∂‰∏áË±™ÈÖíÂ∫óÂèëÂ∏É‰∫Ü‰∏ÄÂàôÂÖ¨ÂëäÔºåÁß∞ÂÖ∂Êóó‰∏ãÂñúËææÂ±ãÈÖíÂ∫óÁöÑ5‰∫ø‰∫∫Ê¨°ÁöÑ‰ø°ÊÅØË¢´Ê≥ÑÈú≤ÔºåÂÖ±ËÆ°3.27‰∫ø‰∫∫ÔºåÊ≥ÑÈú≤‰ø°ÊÅØÂåÖÊã¨ÂßìÂêç„ÄÅÈÇÆÂØÑÂú∞ÂùÄ„ÄÅÁîµËØùÂè∑Á†Å„ÄÅÁîµÂ≠êÈÇÆ‰ª∂ÊòÇÈù¢Âú∞ÂùÄ„ÄÅÊä§ÁÖßÂè∑Á†Å„ÄÅÂá∫ÁîüÊó•Êúü„ÄÅÊÄßÂà´Á≠âÁ≠âÂÖ•‰Ωè‰ø°ÊÅØÔºåÊõ¥Á≥üÁ≥ïÁöÑÊòØ‰∏áË±™Êó†Ê≥ïÁ°ÆÂÆöÔºå‰æµÂÖ•ÈÖíÂ∫óÁ≥ªÁªüÁöÑÁ¨¨‰∏âÊñπÈªëÂÆ¢ÔºåÂú®Á™ÉÂèñÁöÑ‰ø°ÊÅØ‰∏≠ÊòØÂê¶ÂåÖÂê´ÂÆ¢‰∫∫ÁöÑÈì∂Ë°åÂç°Âè∑ÂíåÂØÜÁ†Å„ÄÇÔºàÊ≠§Ê°à‰æãÂíåDDOSÊîªÂáªÊó†ÂÖ≥ÔºåÂª∫ËÆÆÈááÁî®ÂÖ∂‰ªñÊ°à‰æãÔºåÊØîÂ¶Ç2011Âπ¥4Êúà20Êó•Ëá≥26Êó•ÔºåÁ¥¢Â∞ºÈÅ≠ÂèóDDoSÊîªÂáªÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜÊé©ÁõñÁõóÂèñÁ¥¢Â∞ºPSÁöÑÁî®Êà∑Êï∞ÊçÆ„ÄÇÔºâ ËÄåÊ∏∏ÊàèÈ¢ÜÂüüÔºåÂàôÊòØDDoSÊîªÂáªÁöÑÂè¶‰∏Ä‰∏™ÈáçÁÅæÂå∫Ôºå‰∏çÂÖâÊòØÂàöÊâçÂâçÊñá‰∏≠ÊèêÂà∞ÁöÑÊö¥Èõ™ÔºåÂåÖÊã¨Á¥¢Â∞º„ÄÅÈáëÂ±±„ÄÅÁΩëÊòìÂú®ÂÜÖÁöÑ‰ºóÂ§öÁü•ÂêçÊ∏∏ÊàèÂÖ¨Âè∏ÈÉΩÊõæÊï∞Ê¨°ÈÅ≠ÂèóÊîªÂáªÔºåÂèØ‰ª•ËØ¥DDoSÊîªÂáªÊòØÊ∏∏Êàè‰ºÅ‰∏öÁöÑÂô©Ê¢¶„ÄÇ ËÆ∏Â§öÂàöÂàõ‰∏öÁöÑÊ∏∏ÊàèÂÖ¨Âè∏ÔºåÂèØËÉΩÂàö‰∏äÁ∫øÂ∞±Ë¢´ÊâìÊ≠ªÔºåËÄå‰∏Ä‰∫õÂ§ÑÂú®ËûçËµÑÈò∂ÊÆµÁöÑÊ∏∏ÊàèÂÖ¨Âè∏ÔºåÁî±‰∫éÈÅ≠ÈÅáÊîªÂáªËÄåË¢´Ëø´ÂÅúÊúçÔºåÂàôÂæàÂ§ßÁ®ãÂ∫¶‰∏ä‰ºöË∞É‰ΩéÊäïËµÑ‰∫∫ÁöÑÈ¢ÑÊúüÔºåÁîöËá≥ÂØºËá¥ËûçËµÑÂ§±Ë¥•„ÄÇ ËÄåËøô‰∫õÂõ†Á¥†ÔºåÈÉΩÊòØÁ´ûÂØπÊâìÂéãÊàñËÄÖÊï≤ËØàÂãíÁ¥¢ÁöÑÁªùÂØπËΩØËÇã„ÄÇ ‰ªé‰ª•‰∏äÁöÑÂá†‰∏™Ê°à‰æãÊàë‰ª¨‰∏çÈöæÁúãÂá∫ÔºåÂíåÁé∞ÂÆû‰∏≠ÁöÑËÄçÊµÅÊ∞ìÂíåÊï≤ËØàÂãíÁ¥¢Áõ∏ÊØîÔºåÈÄöËøáÁΩëÁªúÊâãÊÆµËøõË°åÊîªÂáªÁöÑÈ£éÈô©ÂíåÊàêÊú¨Êõ¥‰ΩéÔºåÂùèËõãÁöÑÂò¥ËÑ∏‰πüÊõ¥Á©∑Âá∂ÊûÅÊÅ∂‰∏ÄÁÇπÔºåÊó†ËÆ∫ÊòØÊîøÂ∫úÊú∫ÊûÑËøòÊòØ‰ºÅ‰∏öÂπ≥Âè∞ÔºåÊó†ËÆ∫‰Ω†ÊòØÂ∑®Â§¥ËøòÊòØÂ∞èËöÇËöÅÔºåÂè™Ë¶Å‰Ω†Ë∫´‰∏äÊúâÁæäÊØõÂèØ‰ª•ËñÖÔºå‰Ω†ÈÉΩÊó∂ÂàªÈù¢‰∏¥ÁùÄË¢´Ê¥óÂä´ÁöÑÈ£éÈô© ‰∏çËøáÂàöÂú®ÂºÄÂ§¥Êàë‰πüËÆ≤‰∫ÜÔºåËôΩÁÑ∂DDoSÂæàÈöæÁº†ÂæàËÆ©‰∫∫Â§¥ÁóõÔºå‰ΩÜÊú¨Ë¥®‰∏äÂõæÂπ∂‰∏çÊòØÊó†Ëß£ÁöÑ„ÄÇ ÂõûÂà∞ÊàëÊúÄÂºÄÂßãËÆ≤ÁöÑÈÇ£‰∏™‰æãÂ≠ê„ÄÇ ‰Ω†ÊòØ‰∏Ä‰∏™È§êÈ¶ÜËÄÅÊùøÔºåËøáÂéª‰∏âÂçÅÂπ¥‰∏ÄÁõ¥ÊòØ‰∏™ËÄÅËÄÅÂÆûÂÆûÁöÑÂé®Â≠êÔºåÁ™ÅÁÑ∂Èù¢ÂØπ‰∫îÂçÅ‰∏™Ëá≠ÊµÅÊ∞ìÂà∞‰Ω†Â∫óÈáåËÄçÊó†ËµñÁöÑÊó∂ÂÄôÔºå‰Ω†ÊúÄÂ•ΩÁöÑÂ∫îÂØπÊñπÊ≥ïÔºåÂ∫îËØ•ÊòØ‰ªÄ‰πàÔºü Ëá™Â∑±ÁªÑÂª∫‰∏ÄÊîØ‰∫∫È©¨ÔºåÂíåËøô‰∫õËá≠ÊµÅÊ∞ìÊ≠£Èù¢ÂàöÔºüËøôÊÅêÊÄï‰∏çË°åÔºåÂõ†‰∏∫‰Ω†‰∏çÊòØËá≠ÊµÅÊ∞ìÔºå‰Ω†Ê≤°ÊúâÁõ∏Â∫îÁöÑ‰ΩúÊàòÁªèÈ™å„ÄÇ Êä•Ë≠¶ËØ∑‰∫∫Ê∞ëË≠¶ÂØüÊù•Â∏ÆÂøôÂ§ÑÁêÜÔºüËøôÊÅêÊÄï‰πü‰∏çË°åÔºå‰∫∫ÂÆ∂Âú®‰Ω†Â∫óÈáåÊ≤°ÊúâÊâìÁ†∏Êä¢ÔºåÂè™ÊòØ‚ÄúÊ∏©ÂíåÁöÑ‚ÄùÈùûÊö¥Âäõ‰∏çÂêà‰ΩúÔºåË≠¶ÂØüÊù•‰∫Ü‰πüÂè™ËÉΩÂΩìÊ∞ë‰∫ãË∞ÉËß£ÔºåÂπ∂‰∏î‰∫∫ÂÆ∂È©¨‰ªî‰ºóÂ§öÔºåÊòéÂ§©ÂÜçÊç¢‰∏ÄÊã®Êñ∞Èù¢Â≠îÊù•ÔºåÁé©ÁöÑ‰Ω†‰∏ÄÁÇπËÑæÊ∞îÈÉΩÊ≤°Êúâ„ÄÇ ËøôÂ∞±ÊòØÈù¢ÂØπDDoSÊó∂ÔºåÊó†ËÆ∫ÊòØÂ∑®Â§¥ËøòÊòØÂ∞èËöÇËöÅÔºå‰ªñ‰ª¨ÁöÑÂÆûÂÆûÂú®Âú®ÁöÑÂõ∞Â¢É„ÄÇ ‰ΩÜÊ≠£ÊâÄË∞ì‚ÄúÈÅìÈ´ò‰∏ÄÂ∞∫È≠îÈ´ò‰∏Ä‰∏à‚ÄùÔºå‰Ω†Âú®‰∫ë‰∏äÂíåÊàëËÄçÊµÅÊ∞ìÔºåÈÇ£ÊàëÂ∞±Âú®‰∫ë‰∏äÂõûÂáª„ÄÇ ‚Äú‰∫ë‚ÄùÁöÑ‰∫ãÂÑøÔºå‰∏çÂ¶ÇËøò‰∫§ËøòÁªô‰∫ëÊù•Â§ÑÁêÜ„ÄÇÊàëËÆ§‰∏∫Â∞±ÁõÆÂâçDDoSÁöÑÂú®ÊîªÂáªÈáèÁ∫ß‰∏äÁöÑÁñØÁãÇËøõÂáªÁöÑÂâçÊèê‰∏ãÔºå‰∫ëËÆ°ÁÆóÊúçÂä°ÂéÇÂïÜÊàñËÆ∏ÊòØÁãôÂáªÂÆÉ‰ª¨ÁöÑÊúÄÊúâÊïàÊâãÊÆµ„ÄÇ 2018Âπ¥Âπ¥ÂàùÔºåÂ≥∞ÂÄº1.35TB/ÁßíÁöÑÊµÅÈáèÂÜ≤Âáª‰∫ÜÂºÄÂèëËÄÖÂπ≥Âè∞ GitHub„ÄÇËøôÊòØÁ¨¨‰∏ÄÊ¨°TBÈáèÁ∫ßÁöÑDDoSÊîªÂáª„ÄÇGitHub ÂèóÂà∞ÊîªÂáªÂêéÔºåÊúçÂä°Âô®Êñ≠Êñ≠Áª≠Áª≠ÔºåÊó†Ê≥ïËÆøÈóÆ„ÄÇÊîªÂáªÂèëÁîü 10 ÂàÜÈíüÂêéÔºåGitHub ÂêëCDN ÊúçÂä°ÂïÜ Akamai ËØ∑Ê±ÇÂçèÂä©ÔºåËÆøÈóÆ GitHub ÁöÑÊµÅÈáèÂ∑≤ÁªèÁî±ÂêéËÄÖÊé•ÁÆ°Âπ∂Âú®15ÂàÜÈíü‰πãÂÜÖÂÆåÊàê‰∫ÜÈò≤Âæ°„ÄÇ AkamaiÁöÑÁõ∏ÂÖ≥Ë¥üË¥£‰∫∫Âú®Êé•ÂèóÈááËÆøÊó∂ËØ¥ÔºåÊàë‰ª¨ÊòØÂü∫‰∫éËøÑ‰ªä‰∏∫Ê≠¢ÊúÄÂ§ßËßÑÊ®° DDoS ÊîªÂáª‰∫îÂÄçÁöÑÂ≥∞ÂÄºËÄåÂÅöÁöÑÁõ∏Â∫îÂáÜÂ§áÔºåÊâÄ‰ª• 1.3T ÂØπÊàë‰ª¨Êù•ËØ¥ÊòØÂ∞èÊÑèÊÄù„ÄÇ Âú®ÂÖ≥‰∫éÊµÅÈáèÂ≥∞ÂÄºËøô‰∏ÄÁÇπ‰∏äÔºåÊàëËÆ§‰∏∫È•±ÂèóÂèå11„ÄÅÂèå12„ÄÅ618Á≠âÂÖ®Ê∞ëË¥≠Áâ©ÁãÇÊ¨¢ÁöÑÁîµÂïÜÂ∑®Â§¥‰ª¨Êõ¥ÊúâÂèëË®ÄÊùÉÔºåÂ∞±Êãø‰∫¨‰∏ú‰∏æ‰æãÂ≠êÂ•Ω‰∫Ü„ÄÇ ‰∫¨‰∏ú‰∫ëÂú®‰πãÂâçÂèëÂ∏ÉÁöÑÈ´òÈò≤ÁâàÁöÑDDoSÊúçÂä°‰∏≠ÔºåÂ±ïÁ§∫Âá∫‰∫ÜÈùûÂ∏∏ÊòéÁ°ÆÁöÑ‰ø°ÂøÉÊòØÔºåÂú®Â§öÂπ¥ÁöÑÁîµÂïÜÁãÇÊ¨¢ÊµÅÈáèÂØπÊäó‰∏≠Ôºå‰∫¨‰∏ú‰∫ëÂ∑≤ÁªèÂú®ÂÆûÊàò‰∏≠Âª∫Á´ã‰∫Ü‰∏ÄÂ•óÂÆåÂ§áÁöÑÈò≤Âæ°Êú∫Âà∂ÔºåÊó†ËÆ∫ÊòØÂú®ÊµÅÈáèÂ≥∞ÂÄºÁöÑÂª∫Ê®°‰∏äÔºåËøòÊòØÂú®DDoSÁöÑÈò≤Âæ°ÁÆóÊ≥ï‰∏äÔºåÂÆÉÁöÑÈÉ®ÁΩ≤ÈÉΩËøúËøú‰∏çÊòØÁ∫∏‰∏äË∞àÂÖµÔºåËÄåÊòØÊã≥Êã≥Âà∞ËÇâÁöÑÁªèÂèó‰Ωè‰∫ÜÂÆûÊàòÁöÑÊ¥óÁ§º„ÄÇË¶ÅÁü•ÈÅìÔºåÂÖ®‰∏ñÁïåÊØèÂπ¥ÊúâË∂ÖËøá5ÊàêÁöÑDDoSÊîªÂáªÈÉΩÊù•Ëá™‰∏≠ÂõΩÔºåËÄåÊàë‰ª¨ÁöÑÂõΩÂÆ∂‰πüÊòØÂÖ®‰∏ñÁïåË∂ÖËøáÁæéÂõΩÁöÑÁ¨¨‰∏ÄÂ§ß‚ÄúËÇâÈ∏°‚ÄùÂ∏ÇÂú∫ÔºåÁî±ÁîµÂïÜÂ§ßÊï∞ÊçÆÂä†ÊåÅÊºîÂåñËÄåÊù•ÁöÑ‰∫¨‰∏ú‰∫ëÔºåÂÆÉÂú®‰∫ëÂÆâÂÖ®ÁöÑÁêÜËß£‰∏äÂèØ‰ª•ËØ¥ÊòØÈùûÂ∏∏Ê∑±Âàª‰∫Ü„ÄÇ ÊâÄ‰ª•ËØ¥ÔºåÂ¶ÇÊûúËØ¥‰∏ÄÂÆöË¶ÅÊúâ‰∏Ä‰∏™ÁªìËÆ∫ÔºåÊàëÊÉ≥ËØ¥‚Äú‰∏äÂ∏ùÁöÑÂΩí‰∏äÂ∏ùÔºåËÄå‰∫ë‰∏äÁöÑÂΩí‰∫ë‰∏ä‚ÄùÔºåÂÉè‰∫¨‰∏ú‰∫ëËøôÊ†∑ÁöÑÂü∫‰∫éÁîµÂïÜÂ§ßÊï∞ÊçÆËÄÉÈ™åÁöÑ‰∫ëËÆ°ÁÆóÂπ≥Âè∞ÔºåÊàñËÆ∏ÊâçÊòØÂØπÊäóDDoSÁöÑÊúÄÁªàÁ≠îÊ°à„ÄÇ ÂéüÊñáÈìæÊé•üëá","link":"/ddos/"},{"title":"ËØ∫Âü∫‰∫ö","text":"‚¨áÔ∏è","link":"/ËµÑËÆØ/nokia/"},{"title":"Node.js","text":"‰∏Ä„ÄÅÁÆÄ‰ªãNode.js ÊòØ‰∏Ä‰∏™Âü∫‰∫éGoogle Chrome V8 ÂºïÊìéÁöÑ JavaScript ËøêË°åÁéØÂ¢É„ÄÇNode.js ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™‰∫ã‰ª∂È©±Âä®„ÄÅÈùûÈòªÂ°ûÂºè I/O ÁöÑÊ®°ÂûãÔºå‰ΩøÂÖ∂ËΩªÈáèÂèàÈ´òÊïà„ÄÇNode.js ÁöÑÂåÖÁÆ°ÁêÜÂô® npmÔºåÊòØÂÖ®ÁêÉÊúÄÂ§ßÁöÑÂºÄÊ∫êÂ∫ìÁîüÊÄÅÁ≥ªÁªü„ÄÇ ËÉΩÊñπ‰æøÂú∞Êê≠Âª∫ÂìçÂ∫îÈÄüÂ∫¶Âø´„ÄÅÊòì‰∫éÊâ©Â±ïÁöÑÁΩëÁªúÂ∫îÁî®ÔºåNode.js ‰ΩøÁî®‰∫ã‰ª∂È©±Âä®Ôºå ÈùûÈòªÂ°ûI/O Ê®°ÂûãËÄåÂæó‰ª•ËΩªÈáèÂíåÈ´òÊïàÔºåÈùûÂ∏∏ÈÄÇÂêàÂú®ÂàÜÂ∏ÉÂºèËÆæÂ§á‰∏äËøêË°åÁöÑÊï∞ÊçÆÂØÜÈõÜÂûãÁöÑÂÆûÊó∂Â∫îÁî®„ÄÇ ÂÆòÁΩëÔºöhttps://nodejs.org/en/‰∏≠ÊñáÔºöhttps://cnodejs.org„ÄÅhttps://nodejs.cn ÁÆÄÂçïËØ¥Node.jsÂ∞±ÊòØËøêË°åÂú®ÊúçÂä°Âô®Á´ØÁöÑJavaScriptÔºåÊòØÁé∞Âú®ÊµÅË°åÁöÑËØ≠Ë®Ä‰∏≠ËÉΩÂêåÊó∂ËøêË°åÂú®ÂâçÁ´Ø‰∏éÂêéÂè∞ÁöÑÁ®ãÂ∫èËØ≠Ë®ÄÔºå‰Ω†ÂèØ‰ª•ÊääJavaScriptÊÉ≥ÂÉèÊàêJava‰∏éC#„ÄÇÁõ∏ÂÖ≥ÊäÄÊúØÔºö Êï∞ÊçÆÂ∫ìÔºöMongoDBÔºåÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºåNoSQLÔºàNot only SQLÔºâ MVCÊ°ÜÊû∂ÔºöAngularJS WebÊúçÂä°Âô®ÔºöExpress Ê®°ÊùøÂºïÊìéÔºöjade„ÄÅejs„ÄÅhtmljs„ÄÅswig„ÄÅhogan.js ‰∫å„ÄÅÊê≠Âª∫Node.jsÂºÄÂèëÁéØÂ¢É2.1„ÄÅÂÆâË£ÖNode.jsÂéªÂÆòÁΩë‰∏ã‰∏ãËΩΩÊúÄÊñ∞ÁâàÊú¨ÁöÑNode.js‰∏ÄÊ≠•‰∏ÄÊ≠•ÊåâÊèêÁ§∫ÂÆâË£ÖÂç≥ÂèØÔºåÂ¶ÇÊûúÂÆâË£ÖÂ§±Ë¥•Â∞±ÊâãÂä®ÂÆâË£ÖÔºåÂ∞ÜNode.jsÁöÑÂÆâË£Ö‰ΩçÁΩÆÈÖçÁΩÆÂà∞ÁéØÂ¢ÉÂèòÈáèÁöÑpath‰∏≠„ÄÇ 1brew install node ÂÆâË£ÖÂÆåÊàêÂêéÂêØÂä®ÂëΩ‰ª§Ë°åÔºåÊµãËØïÔºö 1node -v ‰∏â„ÄÅÁ¨¨‰∏Ä‰∏™Node.jsÁ®ãÂ∫èÂú®‰∏äÈù¢ÁöÑÁ§∫‰æã‰∏≠ÔºåÊàë‰ª¨ÊòØÈÄöËøáIDEÂÆåÊàêÁºñËØë‰∏éËøêË°åÁöÑÔºåÂÖ∂ÂÆûÊâãÂä®ËøêË°å‰πüÂèØ‰ª•ÔºåÊØîÂ¶ÇÁºñÂÜô‰∏ÄÊÆµ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö server.js 12345678910111213//‰æùËµñ‰∏Ä‰∏™httpÊ®°ÂùóÔºåÁõ∏ÂΩì‰∫éjava‰∏≠ÁöÑimportÔºå‰∏éC#‰∏≠ÁöÑusingvar http = require(&apos;http&apos;);//ÂàõÂª∫‰∏Ä‰∏™ÊúçÂä°Âô®ÂØπË±°server = http.createServer(function (req, res) {//ËÆæÁΩÆËØ∑Ê±ÇÊàêÂäüÊó∂ÂìçÂ∫îÂ§¥ÈÉ®ÁöÑMIME‰∏∫Á∫ØÊñáÊú¨res.writeHeader(200, {&quot;Content-Type&quot;: &quot;text/plain&quot;});//ÂêëÂÆ¢Êà∑Á´ØËæìÂá∫Â≠óÁ¨¶res.end(&quot;Hello World\\n&quot;);});//ËÆ©ÊúçÂä°Âô®ÁõëÂê¨Êú¨Âú∞8000Á´ØÂè£ÂºÄÂßãËøêË°åserver.listen(8000,&apos;127.0.0.1&apos;);console.log(&quot;server is runing at 127.0.0.1:8000&quot;); Âú®nodeÁéØÂ¢É‰∏ãËß£ÈáäËøêË°åÔºö ËøêË°åÁªìÊûúÔºö ÂºïÂÖ• required Ê®°ÂùóÔºöÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® require Êåá‰ª§Êù•ËΩΩÂÖ• Node.js Ê®°Âùó„ÄÇÂàõÂª∫ÊúçÂä°Âô®ÔºöÊúçÂä°Âô®ÂèØ‰ª•ÁõëÂê¨ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåÁ±ª‰ºº‰∫éTomCat„ÄÅIIS„ÄÅApache „ÄÅNginx Á≠â HTTP ÊúçÂä°Âô®„ÄÇÊé•Êî∂ËØ∑Ê±Ç‰∏éÂìçÂ∫îËØ∑Ê±Ç ÊúçÂä°Âô®ÂæàÂÆπÊòìÂàõÂª∫ÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•‰ΩøÁî®ÊµèËßàÂô®ÊàñÁªàÁ´ØÂèëÈÄÅ HTTP ËØ∑Ê±ÇÔºåÊúçÂä°Âô®Êé•Êî∂ËØ∑Ê±ÇÂêéËøîÂõûÂìçÂ∫îÊï∞ÊçÆ„ÄÇ Á¨¨‰∏ÄË°åËØ∑Ê±ÇÔºàrequireÔºâNode.js Ëá™Â∏¶ÁöÑ http Ê®°ÂùóÔºåÂπ∂‰∏îÊääÂÆÉËµãÂÄºÁªô http ÂèòÈáè„ÄÇÊé•‰∏ãÊù•Êàë‰ª¨Ë∞ÉÁî® http Ê®°ÂùóÊèê‰æõÁöÑÂáΩÊï∞Ôºö createServer „ÄÇËøô‰∏™ÂáΩÊï∞‰ºöËøîÂõû ‰∏Ä‰∏™ÂØπË±°ÔºåËøô‰∏™ÂØπË±°Êúâ‰∏Ä‰∏™Âè´ÂÅö listen ÁöÑÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÊúâ‰∏Ä‰∏™Êï∞ÂÄºÂèÇÊï∞Ôºå ÊåáÂÆöËøô‰∏™ HTTP ÊúçÂä°Âô®ÁõëÂê¨ÁöÑÁ´ØÂè£Âè∑„ÄÇ Âõõ„ÄÅNPMÔºàNode.jsÂåÖÁÆ°ÁêÜÂô®ÔºâNPMÊòØÈöèÂêåNodeJS‰∏ÄËµ∑ÂÆâË£ÖÁöÑÂåÖÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåËÉΩËß£ÂÜ≥NodeJS‰ª£Á†ÅÈÉ®ÁΩ≤‰∏äÁöÑÂæàÂ§öÈóÆÈ¢òÔºåÂ∏∏ËßÅÁöÑ‰ΩøÁî®Âú∫ÊôØÊúâ‰ª•‰∏ãÂá†ÁßçÔºö a)„ÄÅÂÖÅËÆ∏Áî®Êà∑‰ªéNPMÊúçÂä°Âô®‰∏ãËΩΩÂà´‰∫∫ÁºñÂÜôÁöÑÁ¨¨‰∏âÊñπÂåÖÂà∞Êú¨Âú∞‰ΩøÁî®„ÄÇ b)„ÄÅÂÖÅËÆ∏Áî®Êà∑‰ªéNPMÊúçÂä°Âô®‰∏ãËΩΩÂπ∂ÂÆâË£ÖÂà´‰∫∫ÁºñÂÜôÁöÑÂëΩ‰ª§Ë°åÁ®ãÂ∫èÂà∞Êú¨Âú∞‰ΩøÁî®„ÄÇ c)„ÄÅÂÖÅËÆ∏Áî®Êà∑Â∞ÜËá™Â∑±ÁºñÂÜôÁöÑÂåÖÊàñÂëΩ‰ª§Ë°åÁ®ãÂ∫è‰∏ä‰º†Âà∞NPMÊúçÂä°Âô®‰æõÂà´‰∫∫‰ΩøÁî®„ÄÇ ÂÆòÁΩëÔºöhttps://www.npmjs.com/ 4.1„ÄÅÊü•ÁúãnpmÁâàÊú¨Áî±‰∫éÊñ∞ÁâàÁöÑnodejsÂ∑≤ÁªèÈõÜÊàê‰∫ÜnpmÔºåÊâÄ‰ª•‰πãÂâçnpm‰πü‰∏ÄÂπ∂ÂÆâË£ÖÂ•Ω‰∫Ü„ÄÇÂêåÊ†∑ÂèØ‰ª•ÈÄöËøáËæìÂÖ• ‚Äúnpm -v‚Äù Êù•ÊµãËØïÊòØÂê¶ÊàêÂäüÂÆâË£Ö„ÄÇÂëΩ‰ª§Â¶Ç‰∏ãÔºåÂá∫Áé∞ÁâàÊú¨ÊèêÁ§∫Ë°®Á§∫ÂÆâË£ÖÊàêÂäü 4.2„ÄÅÂçáÁ∫ßnpmÂ¶ÇÊûú‰Ω†ÂÆâË£ÖÁöÑÊòØÊóßÁâàÊú¨ÁöÑ npmÔºåÂèØ‰ª•ÂæàÂÆπÊòìÂæóÈÄöËøá npm ÂëΩ‰ª§Êù•ÂçáÁ∫ß 1npm install npm -g 4.3„ÄÅÂÆâË£ÖÊ®°Âùó npm install -ÂèÇÊï∞ Â¶ÇÊûúÂ∏¶ÂèÇÊï∞-gË°®Á§∫ÂÖ®Â±ÄÂÆâË£ÖÔºåÂê¶ÂàôÂè™ÊòØÂÆâË£ÖÂà∞Êüê‰∏™ÁõÆÂΩï‰∏ã„ÄÇ ‰ª•‰∏ãÂÆû‰æãÔºåÊàë‰ª¨‰ΩøÁî® npm ÂëΩ‰ª§ÂÆâË£ÖÂ∏∏Áî®ÁöÑ Node.js webÊ°ÜÊû∂Ê®°Âùó express 1sudo npm install express -g 4.4„ÄÅÂç∏ËΩΩÊ®°ÂùóÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êù•Âç∏ËΩΩ Node.js Ê®°Âùó„ÄÇ sudo npm uninstall Â¶ÇÂÖà‰ΩøÁî®ÂÆâË£ÖÊåá‰ª§ÂÆâË£Öbootstrap: 1npm install bootstrap ÂÜç‰ΩøÁî®Âç∏ËΩΩÊåá‰ª§Âà†Èô§Ê®°ÂùóÔºö 1npm uninstall bootstrap ÂèØ‰ª•Âà∞ /node_modules/ ÁõÆÂΩï‰∏ãÊü•ÁúãÂåÖÊòØÂê¶ËøòÂ≠òÂú® 4.5„ÄÅÊ®°ÂùóÂàóË°®‰ΩøÁî®Ê®°ÂùóÂàóË°®ÂëΩ‰ª§ÂèØ‰ª•Êñπ‰æøÁöÑÁúãÂà∞ÂΩìÂâçÈ°πÁõÆ‰∏≠‰æùËµñÁöÑÂåÖÔºö 1npm ls 4.6„ÄÅÊõ¥Êñ∞Ê®°ÂùóÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êõ¥Êñ∞Ê®°ÂùóÔºönpm updateÊ®°ÂùóÂêçÁß∞npm up -g Ê®°ÂùóÂêçÁß∞ 4.7„ÄÅÊêúÁ¥¢Ê®°Âùónpm searchÊ®°ÂùóÂêçÁß∞ 4.8„ÄÅNPM Â∏∏Áî®ÂëΩ‰ª§Èô§‰∫ÜÊú¨Á´†‰ªãÁªçÁöÑÈÉ®ÂàÜÂ§ñÔºåNPMËøòÊèê‰æõ‰∫ÜÂæàÂ§öÂäüËÉΩÔºåpackage.jsonÈáå‰πüÊúâÂæàÂ§öÂÖ∂ÂÆÉÊúâÁî®ÁöÑÂ≠óÊÆµ„ÄÇÈô§‰∫ÜÂèØ‰ª•Âú®npmjs.org/doc/Êü•ÁúãÂÆòÊñπÊñáÊ°£Â§ñÔºåËøôÈáåÂÜç‰ªãÁªç‰∏Ä‰∫õNPMÂ∏∏Áî®ÂëΩ‰ª§„ÄÇNPMÊèê‰æõ‰∫ÜÂæàÂ§öÂëΩ‰ª§Ôºå‰æãÂ¶ÇinstallÂíåpublishÔºå‰ΩøÁî®npm helpÂèØÊü•ÁúãÊâÄÊúâÂëΩ‰ª§„ÄÇNPMÊèê‰æõ‰∫ÜÂæàÂ§öÂëΩ‰ª§Ôºå‰æãÂ¶ÇinstallÂíåpublishÔºå‰ΩøÁî®npm helpÂèØÊü•ÁúãÊâÄÊúâÂëΩ‰ª§„ÄÇ‰ΩøÁî®npm help ÂèØÊü•ÁúãÊüêÊù°ÂëΩ‰ª§ÁöÑËØ¶ÁªÜÂ∏ÆÂä©Ôºå‰æãÂ¶Çnpm help install„ÄÇÂú®package.jsonÊâÄÂú®ÁõÆÂΩï‰∏ã‰ΩøÁî®npm install . -gÂèØÂÖàÂú®Êú¨Âú∞ÂÆâË£ÖÂΩìÂâçÂëΩ‰ª§Ë°åÁ®ãÂ∫èÔºåÂèØÁî®‰∫éÂèëÂ∏ÉÂâçÁöÑÊú¨Âú∞ÊµãËØï„ÄÇ‰ΩøÁî®npm update ÂèØ‰ª•ÊääÂΩìÂâçÁõÆÂΩï‰∏ãnode_modulesÂ≠êÁõÆÂΩïÈáåËæπÁöÑÂØπÂ∫îÊ®°ÂùóÊõ¥Êñ∞Ëá≥ÊúÄÊñ∞ÁâàÊú¨„ÄÇ‰ΩøÁî®npm update -gÂèØ‰ª•ÊääÂÖ®Â±ÄÂÆâË£ÖÁöÑÂØπÂ∫îÂëΩ‰ª§Ë°åÁ®ãÂ∫èÊõ¥Êñ∞Ëá≥ÊúÄÊñ∞Áâà„ÄÇ‰ΩøÁî®npm cache clearÂèØ‰ª•Ê∏ÖÁ©∫NPMÊú¨Âú∞ÁºìÂ≠òÔºåÁî®‰∫éÂØπ‰ªò‰ΩøÁî®Áõ∏ÂêåÁâàÊú¨Âè∑ÂèëÂ∏ÉÊñ∞ÁâàÊú¨‰ª£Á†ÅÁöÑ‰∫∫„ÄÇ‰ΩøÁî®npm unpublish @ÂèØ‰ª•Êí§ÈîÄÂèëÂ∏ÉËá™Â∑±ÂèëÂ∏ÉËøáÁöÑÊüê‰∏™ÁâàÊú¨‰ª£Á†Å„ÄÇ 4.9„ÄÅÊõ¥Êç¢NPM ÈïúÂÉèÂõ†‰∏∫npmÁöÑÊúçÂä°Âô®Âú®ÂõΩÂ§ñÔºåÂú®ÁΩëÁªúÁä∂ÊÄÅ‰∏çÂ•ΩÁöÑÊÉÖÂÜµ‰∏ãÂºïÂÖ•‰∏Ä‰∏™Ê®°Âùó‰ºöÂõ†‰∏∫ÁΩëÁªúÂª∂ËøüËÄåÂ§±Ë¥•ÔºåÂèØ‰ª•Êõ¥Êç¢ÊàêÂõΩÂÜÖÈÄüÂ∫¶Êõ¥Âø´ÁöÑÈïúÂÉèÊúçÂä°Âô®ÔºåËøôÈáå‰ª•‰ΩøÁî®Ê∑òÂÆù NPM ÈïúÂÉèÔºàhttps://npm.taobao.org/Ôºâ‰∏∫‰æãÔºö 1npm install -g cnpm --registry=https://registry.npm.taobao.org ËøôÊ†∑Â∞±ÂèØ‰ª•‰ΩøÁî® cnpm ÂëΩ‰ª§Êù•ÂÆâË£ÖÊ®°Âùó‰∫ÜÔºö 1ÔºÑ cnpm install [name] ËøôÊòØ‰∏Ä‰∏™ÂÆåÊï¥ npmjs.org ÈïúÂÉèÔºå‰Ω†ÂèØ‰ª•Áî®Ê≠§‰ª£ÊõøÂÆòÊñπÁâàÊú¨(Âè™ËØª)ÔºåÂêåÊ≠•È¢ëÁéáÁõÆÂâç‰∏∫ 10ÂàÜÈíü ‰∏ÄÊ¨°‰ª•‰øùËØÅÂ∞ΩÈáè‰∏éÂÆòÊñπÊúçÂä°ÂêåÊ≠•„ÄÇ Â¶ÇÊòØÂÆâË£ÖÂ§±Ë¥•ÔºåÂèØ‰ª•ËØïËØïÔºö 12345678910alias cnpm=\"npm --registry=https://registry.npm.taobao.org \\--cache=$HOME/.npm/.cache/cnpm \\--disturl=https://npm.taobao.org/dist \\--userconfig=$HOME/.cnpmrc\"# Or alias it in .bashrc or .zshrc$ echo '\\n#alias for cnpm\\nalias cnpm=\"npm --registry=https://registry.npm.taobao.org \\ --cache=$HOME/.npm/.cache/cnpm \\ --disturl=https://npm.taobao.org/dist \\ --userconfig=$HOME/.cnpmrc\"' &gt;&gt; ~/.zshrc &amp;&amp; source ~/.zshrc ‰∫î„ÄÅExpressExpress ÊòØ‰∏Ä‰∏™ÁÆÄÊ¥ÅËÄåÁÅµÊ¥ªÁöÑ node.js WebÂ∫îÁî®Ê°ÜÊû∂, Êèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàóÂº∫Â§ßÁâπÊÄßÂ∏ÆÂä©‰Ω†ÂàõÂª∫ÂêÑÁßç Web Â∫îÁî®ÔºåÂíå‰∏∞ÂØåÁöÑ HTTP Â∑•ÂÖ∑„ÄÇ‰ΩøÁî® Express ÂèØ‰ª•Âø´ÈÄüÂú∞Êê≠Âª∫‰∏Ä‰∏™ÂÆåÊï¥ÂäüËÉΩÁöÑÁΩëÁ´ô„ÄÇ‰ΩøÁî®Node.js‰Ωú‰∏∫AngularJSÂºÄÂèëWebÊúçÂä°Âô®ÁöÑÊúÄ‰Ω≥ÊñπÂºèÊòØ‰ΩøÁî®ExpressÊ®°Âùó„ÄÇ ExpressÂÆòÁΩëÔºö https://expressjs.com/ Express4.x APIÔºöhttps://expressjs.com/zh-cn/4x/api.html 5.2„ÄÅExpressÊ°ÜÊû∂Ê†∏ÂøÉÁâπÊÄßÂèØ‰ª•ËÆæÁΩÆ‰∏≠Èó¥‰ª∂Êù•ÂìçÂ∫î HTTP ËØ∑Ê±Ç„ÄÇ ÂÆö‰πâ‰∫ÜË∑ØÁî±Ë°®Áî®‰∫éÊâßË°å‰∏çÂêåÁöÑ HTTP ËØ∑Ê±ÇÂä®‰Ωú„ÄÇ ÂèØ‰ª•ÈÄöËøáÂêëÊ®°Êùø‰º†ÈÄíÂèÇÊï∞Êù•Âä®ÊÄÅÊ∏≤Êüì HTML È°µÈù¢„ÄÇ ‰∏∞ÂØåÁöÑ HTTP Âø´Êç∑ÊñπÊ≥ïÂíå‰ªªÊÑèÊéíÂàóÁªÑÂêàÁöÑ Connect ‰∏≠Èó¥‰ª∂ÔºåËÆ©‰Ω†ÂàõÂª∫ÂÅ•Â£Æ„ÄÅÂèãÂ•ΩÁöÑ API ÂèòÂæóÊó¢Âø´ÈÄüÂèàÁÆÄÂçï„ÄÇ Express ‰∏çÂØπ Node.js Â∑≤ÊúâÁöÑÁâπÊÄßËøõË°å‰∫åÊ¨°ÊäΩË±°ÔºåÊàë‰ª¨Âè™ÊòØÂú®ÂÆÉ‰πã‰∏äÊâ©Â±ï‰∫Ü Web Â∫îÁî®ÊâÄÈúÄÁöÑÂü∫Êú¨ÂäüËÉΩ„ÄÇ 5.3„ÄÅÂÆâË£Ö ExpressÂÆâË£Ö Express Âπ∂Â∞ÜÂÖ∂‰øùÂ≠òÂà∞‰æùËµñÂàóË°®‰∏≠Ôºö 1npm install express --save ‰ª•‰∏äÂëΩ‰ª§ÂÖ®Â±ÄÂÆâË£Öexpress„ÄÇ‰πüÂèØÂÆâË£ÖÊó∂ÊåáÂÆöÂÆâË£Ö‰∏≠Èó¥‰ª∂„ÄÇ body-parser - node.js ‰∏≠Èó¥‰ª∂ÔºåÁî®‰∫éÂ§ÑÁêÜ JSON, Raw, Text Âíå URL ÁºñÁ†ÅÁöÑÊï∞ÊçÆ„ÄÇ cookie-parser - ËøôÂ∞±ÊòØ‰∏Ä‰∏™Ëß£ÊûêCookieÁöÑÂ∑•ÂÖ∑„ÄÇÈÄöËøáreq.cookiesÂèØ‰ª•ÂèñÂà∞‰º†ËøáÊù•ÁöÑcookieÔºåÂπ∂ÊääÂÆÉ‰ª¨ËΩ¨ÊàêÂØπË±°„ÄÇ multer - node.js ‰∏≠Èó¥‰ª∂ÔºåÁî®‰∫éÂ§ÑÁêÜ enctype=‚Äùmultipart/form-data‚ÄùÔºàËÆæÁΩÆË°®ÂçïÁöÑMIMEÁºñÁ†ÅÔºâÁöÑË°®ÂçïÊï∞ÊçÆ„ÄÇ 123ÔºÑ npm install body-parser --save ÔºÑ npm install cookie-parser --save ÔºÑ npm install multer --save ÈªòËÆ§Ëøô‰∫õÊ®°ÂùóÈÉΩÂ∑≤ÁªèÊ∑ªÂä†„ÄÇ 5.4„ÄÅÁ¨¨‰∏Ä‰∏™ExpressÊ°ÜÊû∂ÂÆû‰æãÊé•‰∏ãÊù•Êàë‰ª¨‰ΩøÁî® Express Ê°ÜÊû∂Êù•ËæìÂá∫ ‚ÄúHello World‚Äù„ÄÇ‰ª•‰∏ãÂÆû‰æã‰∏≠Êàë‰ª¨ÂºïÂÖ•‰∫Ü express Ê®°ÂùóÔºåÂπ∂Âú®ÂÆ¢Êà∑Á´ØÂèëËµ∑ËØ∑Ê±ÇÂêéÔºåÂìçÂ∫î ‚ÄúHello World‚Äù Â≠óÁ¨¶‰∏≤„ÄÇ ÂàõÂª∫‰∏Ä‰∏™ÁõÆÂΩïÔºåÂ¶ÇProjectÔºåËøõÂÖ•ÂëΩ‰ª§Ë°åÔºö ‰ΩøÁî®npm install express ÂØºÂÖ•expressÊ®°Âùó„ÄÇ Âú®ÁõÆÂΩï‰∏ãÂàõÂª∫hello.jsÊñá‰ª∂ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 12345678910111213141516//ÂºïÂÖ•expressÊ®°Âùóvar express = require(&apos;express&apos;);//ÂàõÂª∫‰∏Ä‰∏™appÂØπË±°ÔºåÁ±ª‰ºº‰∏Ä‰∏™web Â∫îÁî®ÔºàÁΩëÁ´ôÔºâvar app = express();//Êé•ÂèóÊåáÂÆöË∑ØÂæÑÁöÑËØ∑Ê±ÇÔºåÊåáÂÆöÂõûË∞ÉÂáΩÊï∞app.get(&apos;/&apos;, function (req, res){res.send(&apos;Hello World&apos;);});//ÂàõÂª∫‰∏Ä‰∏™webÊúçÂä°Âô®ÔºåÂèØ‰ª•ËÆ§‰∏∫Â∞±ÊòØwebÊúçÂä°Âô®ÂØπË±°//ÁõëÂê¨8081Á´ØÂè£ÔºåÂΩìÁõëÂê¨ÊàêÂäüÊó∂ÂõûË∞Évar server = app.listen(8081, function () { var host = server.address().address; //Âú∞ÂùÄ var port = server.address().port; //Á´ØÂè£ console.log(&quot;Â∫îÁî®ÂÆû‰æãÔºåËÆøÈóÆÂú∞ÂùÄ‰∏∫ http://%s:%s&quot;, host, port);});}) 5.5„ÄÅÂºÄÂèëExpressÈ°πÁõÆ ÂàõÂª∫Â•ΩÁöÑÈ°πÁõÆÂ¶Ç‰∏ãÔºö app.jsÊòØÁΩëÁ´ôÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546var express = require(&apos;express&apos;);var path = require(&apos;path&apos;);var favicon = require(&apos;serve-favicon&apos;);var logger = require(&apos;morgan&apos;);var cookieParser = require(&apos;cookie-parser&apos;);var bodyParser = require(&apos;body-parser&apos;);var index = require(&apos;./routes/index&apos;);var users = require(&apos;./routes/users&apos;);var app = express();//ÊåáÂÆöËßÜÂõæÂºïÊìé‰∏∫ejsapp.set(&apos;views&apos;, path.join(__dirname, &apos;views&apos;));app.set(&apos;view engine&apos;, &apos;ejs&apos;);// uncomment after placing your favicon in /public//app.use(favicon(path.join(__dirname, &apos;public&apos;, &apos;favicon.ico&apos;)));app.use(logger(&apos;dev&apos;));app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: false }));app.use(cookieParser());app.use(express.static(path.join(__dirname, &apos;public&apos;)));app.use(&apos;/&apos;, index);app.use(&apos;/users&apos;, users);// catch 404 and forward to error handlerapp.use(function(req, res, next) { var err = new Error(&apos;Not Found&apos;); err.status = 404; next(err);});// error handlerapp.use(function(err, req, res, next) { // set locals, only providing error in development res.locals.message = err.message; res.locals.error = req.app.get(&apos;env&apos;) === &apos;development&apos; ? err : {}; // render the error page res.status(err.status || 500); res.render(&apos;error&apos;);});module.exports = app; bin\\wwwÊòØwebÊúçÂä°Âô®Ôºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889#!/usr/bin/env node/** * ‰æùËµñÊ®°ÂùóÔºåÂØºÂÖ• */var app = require(&apos;../app&apos;);var debug = require(&apos;debug&apos;)(&apos;nodejsexpress:server&apos;);var http = require(&apos;http&apos;);/** * ‰ªé‰∏ä‰∏ãÊñáÁéØÂ¢É‰∏≠Ëé∑ÂæóÁõëÂê¨Á´ØÂè£ÔºåÂ¶ÇÊûúÁ©∫Âàô3000 */var port = normalizePort(process.env.PORT || &apos;3000&apos;);app.set(&apos;port&apos;, port);/** * ÂàõÂª∫WebÊúçÂä°Âô® */var server = http.createServer(app);/** * ÂºÄÂßãÁõëÂê¨ */server.listen(port);server.on(&apos;error&apos;, onError); //ÊåáÂÆöÂèëÁîüÈîôËØØÊó∂ÁöÑ‰∫ã‰ª∂server.on(&apos;listening&apos;, onListening); //ÂΩìÁõëÂê¨ÊàêÂäüÊó∂ÁöÑÂõûË∞É/** * ËßÑËåÉÂåñÁ´ØÂè£ */function normalizePort(val) { var port = parseInt(val, 10); if (isNaN(port)) { // named pipe return val; } if (port &gt;= 0) { // port number return port; } return false;}/** *ÈîôËØØ‰∫ã‰ª∂ÁõëÂê¨ */function onError(error) { if (error.syscall !== &apos;listen&apos;) { throw error; } var bind = typeof port === &apos;string&apos; ? &apos;Pipe &apos; + port : &apos;Port &apos; + port; //ÈîôËØØÂ§ÑÁêÜ switch (error.code) { case &apos;EACCES&apos;: console.error(bind + &apos; requires elevated privileges&apos;); process.exit(1); //ÁªìÊùüÁ®ãÂ∫è break; case &apos;EADDRINUSE&apos;: console.error(bind + &apos; is already in use&apos;); process.exit(1); break; default: throw error; }}/** * ÂΩìÁî®Êà∑ËÆøÈóÆÊúçÂä°Âô®ÊàêÂäüÊó∂ÁöÑÂõûË∞É */function onListening() { var addr = server.address(); var bind = typeof addr === &apos;string&apos; ? &apos;pipe &apos; + addr : &apos;port &apos; + addr.port; debug(&apos;Listening on &apos; + bind);} routers/index.jsË∑ØÁî±ÔºåÊúâÁÇπÁ±ª‰ººÊéßÂà∂Âô®ÊàñServletÔºö 123456789var express = require(&apos;express&apos;);var router = express.Router();/* Ëé∑ÂæóÈ¶ñÈ°µ */router.get(&apos;/&apos;, function(req, res, next) { res.render(&apos;index&apos;, { title: &apos;Express&apos; });});module.exports = router; views/index.ejsÈ¶ñÈ°µËßÜÂõæÔºö 1234567891011&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt; &lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt; &lt;p&gt;Welcome to &lt;%= title %&gt;&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; Âú®www‰∏äÂè≥ÈîÆÈÄâÊã©‚ÄúËøêË°åÊñπÂºè‚Äù-&gt;Run ‚Äò/bin/www‚Äô ËøêË°åÁªìÊûúÔºö 5.5.1„ÄÅrequestÂØπË±°Request ÂØπË±° - request ÂØπË±°Ë°®Á§∫ HTTP ËØ∑Ê±ÇÔºåÂåÖÂê´‰∫ÜËØ∑Ê±ÇÊü•ËØ¢Â≠óÁ¨¶‰∏≤ÔºåÂèÇÊï∞ÔºåÂÜÖÂÆπÔºåHTTP Â§¥ÈÉ®Á≠âÂ±ûÊÄß„ÄÇÂ∏∏ËßÅÂ±ûÊÄßÊúâÔºö req.appÔºöÂΩìcallback‰∏∫Â§ñÈÉ®Êñá‰ª∂Êó∂ÔºåÁî®req.appËÆøÈóÆexpressÁöÑÂÆû‰æã req.baseUrlÔºöËé∑ÂèñË∑ØÁî±ÂΩìÂâçÂÆâË£ÖÁöÑURLË∑ØÂæÑ req.body / req.cookiesÔºöËé∑Âæó„ÄåËØ∑Ê±Ç‰∏ª‰Ωì„Äç/ Cookies req.fresh / req.staleÔºöÂà§Êñ≠ËØ∑Ê±ÇÊòØÂê¶Ëøò„ÄåÊñ∞È≤ú„Äç req.hostname / req.ipÔºöËé∑Âèñ‰∏ªÊú∫ÂêçÂíåIPÂú∞ÂùÄ req.originalUrlÔºöËé∑ÂèñÂéüÂßãËØ∑Ê±ÇURL req.paramsÔºöËé∑ÂèñË∑ØÁî±ÁöÑparameters req.pathÔºöËé∑ÂèñËØ∑Ê±ÇË∑ØÂæÑ req.protocolÔºöËé∑ÂèñÂçèËÆÆÁ±ªÂûã req.queryÔºöËé∑ÂèñURLÁöÑÊü•ËØ¢ÂèÇÊï∞‰∏≤ req.routeÔºöËé∑ÂèñÂΩìÂâçÂåπÈÖçÁöÑË∑ØÁî± req.subdomainsÔºöËé∑ÂèñÂ≠êÂüüÂêç req.accepts()ÔºöÊ£ÄÊü•ÂèØÊé•ÂèóÁöÑËØ∑Ê±ÇÁöÑÊñáÊ°£Á±ªÂûã req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguagesÔºöËøîÂõûÊåáÂÆöÂ≠óÁ¨¶ÈõÜÁöÑÁ¨¨‰∏Ä‰∏™ÂèØÊé•ÂèóÂ≠óÁ¨¶ÁºñÁ†Å req.get()ÔºöËé∑ÂèñÊåáÂÆöÁöÑHTTPËØ∑Ê±ÇÂ§¥ req.is()ÔºöÂà§Êñ≠ËØ∑Ê±ÇÂ§¥Content-TypeÁöÑMIMEÁ±ªÂûã 5.5.2„ÄÅresponseÂØπË±°Response ÂØπË±° - response ÂØπË±°Ë°®Á§∫ HTTP ÂìçÂ∫îÔºåÂç≥Âú®Êé•Êî∂Âà∞ËØ∑Ê±ÇÊó∂ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑ HTTP ÂìçÂ∫îÊï∞ÊçÆ„ÄÇÂ∏∏ËßÅÂ±ûÊÄßÊúâÔºö 123456789101112131415161718res.appÔºöÂêåreq.app‰∏ÄÊ†∑res.append()ÔºöËøΩÂä†ÊåáÂÆöHTTPÂ§¥res.set()Âú®res.append()ÂêéÂ∞ÜÈáçÁΩÆ‰πãÂâçËÆæÁΩÆÁöÑÂ§¥res.cookie(nameÔºåvalue [Ôºåoption])ÔºöËÆæÁΩÆCookieopition: domain / expires / httpOnly / maxAge / path / secure / signedres.clearCookie()ÔºöÊ∏ÖÈô§Cookieres.download()Ôºö‰º†ÈÄÅÊåáÂÆöË∑ØÂæÑÁöÑÊñá‰ª∂res.get()ÔºöËøîÂõûÊåáÂÆöÁöÑHTTPÂ§¥res.json()Ôºö‰º†ÈÄÅJSONÂìçÂ∫îres.jsonp()Ôºö‰º†ÈÄÅJSONPÂìçÂ∫îres.location()ÔºöÂè™ËÆæÁΩÆÂìçÂ∫îÁöÑLocation HTTPÂ§¥Ôºå‰∏çËÆæÁΩÆÁä∂ÊÄÅÁ†ÅÊàñËÄÖclose responseres.redirect()ÔºöËÆæÁΩÆÂìçÂ∫îÁöÑLocation HTTPÂ§¥ÔºåÂπ∂‰∏îËÆæÁΩÆÁä∂ÊÄÅÁ†Å302res.render(view,[locals],callback)ÔºöÊ∏≤Êüì‰∏Ä‰∏™viewÔºåÂêåÊó∂Âêëcallback‰º†ÈÄíÊ∏≤ÊüìÂêéÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂ¶ÇÊûúÂú®Ê∏≤ÊüìËøáÁ®ã‰∏≠ÊúâÈîôËØØÂèëÁîünext(err)Â∞Ü‰ºöË¢´Ëá™Âä®Ë∞ÉÁî®„ÄÇcallbackÂ∞Ü‰ºöË¢´‰º†ÂÖ•‰∏Ä‰∏™ÂèØËÉΩÂèëÁîüÁöÑÈîôËØØ‰ª•ÂèäÊ∏≤ÊüìÂêéÁöÑÈ°µÈù¢ÔºåËøôÊ†∑Â∞±‰∏ç‰ºöËá™Âä®ËæìÂá∫‰∫Ü„ÄÇres.send()Ôºö‰º†ÈÄÅHTTPÂìçÂ∫îres.sendFile(path [Ôºåoptions] [Ôºåfn])Ôºö‰º†ÈÄÅÊåáÂÆöË∑ØÂæÑÁöÑÊñá‰ª∂ -‰ºöËá™Âä®Ê†πÊçÆÊñá‰ª∂extensionËÆæÂÆöContent-Typeres.set()ÔºöËÆæÁΩÆHTTPÂ§¥Ôºå‰º†ÂÖ•objectÂèØ‰ª•‰∏ÄÊ¨°ËÆæÁΩÆÂ§ö‰∏™Â§¥res.status()ÔºöËÆæÁΩÆHTTPÁä∂ÊÄÅÁ†Åres.type()ÔºöËÆæÁΩÆContent-TypeÁöÑMIMEÁ±ªÂûã 5.5.3„ÄÅexpressËé∑ÂèñÂèÇÊï∞Êúâ‰∏âÁßçÊñπÊ≥ïreq.query ÈÄÇÂêà https://localhost:3000/form?num=8888req.body ÈÄÇÂêàhttps://localhost:3000/formÔºåPostËØ∑Ê±Ç‰∏≠ÁöÑÂèÇÊï∞req.params ÈÄÇÂêàËé∑ÂèñformÂêéÁöÑnumÔºöhttps://localhost:3000/form/num Ôºà‰∏ÄÔºâ„ÄÅGET 12var num = req.query.num;res.send(&quot;‰Ω†Ëé∑ÂèñÁöÑgetÊï∞ÊçÆ‰∏∫:&quot; + num); Ôºà‰∫åÔºâ„ÄÅPOST Ëß£ÊûêpostÊï∞ÊçÆÈúÄË¶ÅÁî®Âà∞body-parser 1npm install body-parser --save app.js 1234567891011121314151617181920var express = require(&apos;express&apos;);var app = express();//ÂºïÂÖ•body-parservar bodyParser = require(&apos;body-parser&apos;);app.use(express.static(&apos;public&apos;));//ÈúÄË¶ÅuseÁöÑapp.use(bodyParser.json()); // for parsing application/jsonapp.use(bodyParser.urlencoded({extended: true})); // for parsing application/x-www-form-urlencoded//Ëé∑ÂèñÊï∞ÊçÆapp.post(&apos;/form&apos;, function(req, res) {var num = req.body.num;res.send(&quot;‰Ω†Ëé∑ÂèñÁöÑpostÊï∞ÊçÆ‰∏∫:&quot; + num);});//ËÆæÁΩÆÁõëÂê¨Á´ØÂè£app.listen(3000); public/test.html 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt;&lt;meta charset=\"UTF-8\"&gt;&lt;title&gt;Document&lt;/title&gt;&lt;script src=\"http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=\"box\"&gt;&lt;/div&gt;&lt;form action=\"/form\" method=\"post\"&gt;&lt;input type=\"text\" name=\"num\" value=\"tinyphp\"&gt;&lt;input type=\"submit\" value=\"Êèê‰∫§\"&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; Ôºà‰∏âÔºâ„ÄÅËé∑ÂèñË∑ØÂæÑÂèÇÊï∞ app.js 1234567891011var express = require(&apos;express&apos;);var app = express();//Ëé∑ÂèñÊï∞ÊçÆapp.get(&apos;/form/:num&apos;, function(req, res) {var num = req.params.num;res.send(&quot;‰Ω†Ëé∑ÂèñÂà∞form/ÂêéÁöÑÂèÇÊï∞:&quot; + num);});//ËÆæÁΩÆÁõëÂê¨Á´ØÂè£app.listen(3000); 5.6 ejsÂü∫Á°ÄejsÊòØ‰∏Ä‰∏™Express WebÂ∫îÁî®ÁöÑÊ®°ÊùøÂºïÊìéÔºåÂú®NodeJSÂºÄÂèë‰∏≠ÂèØ‰ª•ÈÄâÊã©ÁöÑÊ®°ÊùøÂºïÊìéÂèØËÉΩÊòØÊâÄÊúâWebÂ∫îÁî®ÂºÄÂèë‰∏≠ËåÉÂõ¥ÊúÄÂπøÁöÑÔºåÂ¶Çjade„ÄÅejs„ÄÅhtmljs„ÄÅswig„ÄÅhogan.jsÔºå‰ΩÜejsÊòØÊúÄÂÆπÊòì‰∏äÊâãÁöÑÔºå‰∏éjsp,asp,phpÁöÑÂéüÂßãÊ®°ÊùøÂºïÊìéÈ£éÊ†ºÂæàÂÉè„ÄÇ ÂÆòÁΩëÔºöhttps://www.embeddedjs.com/ Ê∑ªÂä†‰∏Ä‰∏™product.jsË∑ØÁî±Ôºö 12345678910111213141516var express = require(&apos;express&apos;);var router = express.Router();/* ‰∫ßÂìÅ */router.get(&apos;/&apos;, function(req, res, next) { var products=[]; products.push({name:&quot;ZTE U880&quot;,price:899.8}); products.push({name:&quot;HuWei Ëç£ËÄÄ8&quot;,price:1899.8}); products.push({name:&quot;iPhone 7 Plus 128G&quot;,price:5899.8}); //Â∞ÜproductËßÜÂõæ‰∏éÊåáÂÆöÁöÑÂØπË±°Ê∏≤ÊüìÂêéËæìÂá∫Âà∞ÂÆ¢Êà∑Á´Ø res.render(&apos;product&apos;, { title: &apos;Â§©ÁãóÂïÜÂüé&apos;, pdts:products});});module.exports = router; Âú®viewsÁõÆÂΩï‰∏ãÊ∑ªÂä†product.ejsËßÜÂõæÔºåËøôÈáåÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑMVCÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt; &lt;%= title %&gt; &lt;/title&gt; &lt;link rel='stylesheet' href='/stylesheets/style.css' /&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;%= title %&gt; - ‰∫ßÂìÅÂàóË°®&lt;/h1&gt; &lt;table border=\"1\" width=\"80%\"&gt; &lt;tr&gt; &lt;th&gt;Â∫èÂè∑&lt;/th&gt; &lt;th&gt;ÂêçÁß∞&lt;/th&gt; &lt;th&gt;‰ª∑Ê†º&lt;/th&gt; &lt;/tr&gt; &lt;%pdts.forEach(function(pdt,index){%&gt; &lt;tr&gt; &lt;td&gt; &lt;%=index+1%&gt; &lt;/td&gt; &lt;td&gt; &lt;%=pdt.name%&gt; &lt;/td&gt; &lt;td&gt; &lt;%=pdt.price%&gt; &lt;/td&gt; &lt;/tr&gt; &lt;%});%&gt; &lt;/table&gt; &lt;ul&gt; &lt;% for(var i=0; i&lt;pdts.length; i++) {%&gt; &lt;li&gt; &lt;%=pdts[i].name%&gt; &lt;/li&gt; &lt;% } %&gt; &lt;/body&gt;&lt;/html&gt; ‰øÆÊîπappÔºåÊ≥®ÂÜåÂÆö‰πâÂ•ΩÁöÑÊ®°ÂùóproductÔºö 123456789101112131415161718192021var index = require('./routes/index');var users = require('./routes/users');var pdts = require('./routes/product');var app = express();//ÊåáÂÆöËßÜÂõæÂºïÊìé‰∏∫ejsapp.set('views', path.join(__dirname, 'views'));app.set('view engine', 'ejs');// uncomment after placing your favicon in /public//app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));app.use(logger('dev'));app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: false }));app.use(cookieParser());app.use(express.static(path.join(__dirname, 'public')));app.use('/', index);app.use('/users', users);app.use('/pdt', pdts); ËøêË°åÁªìÊûúÔºö ÂéüÂõ†ÔºöÊ≤°ÊúâÂÆâË£ÖejsÊ®°ÂùóËß£ÂÜ≥ÂäûÊ≥ïÔºöËøõÂÖ•Âà∞È°πÁõÆÁõÆÂΩïÔºåÂÆâË£Öejs 12&gt; npm install --save ejs&gt; ÈáçÊñ∞ËøêË°åÔºö 5.7„ÄÅlodashËøôÊòØ‰∏Ä‰∏™ÂÖ∑Êúâ‰∏ÄËá¥Êé•Âè£„ÄÅÊ®°ÂùóÂåñ„ÄÅÈ´òÊÄßËÉΩÁ≠âÁâπÊÄßÁöÑ JavaScript Â∑•ÂÖ∑Â∫ì„ÄÇÂèØ‰ª•ÈùûÂ∏∏Êñπ‰æøÁöÑÊìç‰Ωújson„ÄÇ ÂÆòÁΩëÔºöhttps://lodashjs.com/ ÂÆâË£ÖÔºö 1npm i -g npm 1npm i --save lodash ÂÆâË£ÖÊó∂ÂÖàÁî®cdÂàáÊç¢Âà∞ÂΩìÂâçÈ°πÁõÆ‰∏ã„ÄÇ Â¶ÇÊûúÊµèËßàÂô®‰ΩøÁî®ÂèØ‰ª•Áõ¥Êé•ÂºïÂÖ•Ôºö Ê∑ªÂä†lodash‰æùËµñÔºö ‰æùËµñÊàêÂäüÂêé‰ºöÂú®package.json‰∏≠Ê∑ªÂä†ÂºïÁî®Ôºö ÂêéÂè∞Node.js‰ΩøÁî®ÔºåÂèØ‰ª•ÂºïÂÖ•Ê®°ÂùóÔºö 123456789101112131415161718192021222324252627282930313233343536373839//ÂØºÂÖ•lodashÊ®°Âùóvar _= require(&apos;lodash&apos;);var products=[];products.push({name:&quot;ZTE U880&quot;,price:899.8});products.push({name:&quot;HuWei Ëç£ËÄÄ8&quot;,price:1899.8});products.push({name:&quot;iPhone 7 Plus 128G&quot;,price:5899.8});//1„ÄÅÂèñÂá∫Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†var obj1=_.first(products);console.log(obj1.name); //ZTE U880//2„ÄÅÂèñÂá∫ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†var obj2=_.last(products);console.log(obj2.name); //iPhone 7 Plus 128G//3„ÄÅÊåáÂÆöÊü•ÊâæÊù°‰ª∂ËøîÂõûÁ¨¶ÂêàÊù°‰ª∂ÁöÑÁ¥¢Âºïvar obj3=_.findIndex(products,function(obj){ return obj.price&gt;=1000&amp;&amp;obj.name.indexOf(&quot;7&quot;)&gt;0;});console.log(obj3); //2//4„ÄÅÊåáÂÆöÊü•ÊâæÊù°‰ª∂ËøîÂõûÊü•ÊâæÂà∞ÁöÑÂØπË±°var obj4=_.find(products,function(obj){ return obj.price&gt;=1000&amp;&amp;obj.name.indexOf(&quot;7&quot;)&gt;0;});console.log(obj4); //{ name: &apos;iPhone 7 Plus 128G&apos;, price: 5899.8 }//5„ÄÅÊéíÂ∫èvar obj5=_.orderBy(products,[&quot;price&quot;,&quot;name&quot;],[&quot;desc&quot;,&quot;asc&quot;]);console.log(obj5);//[ { name: &apos;iPhone 7 Plus 128G&apos;, price: 5899.8 },//{ name: &apos;HuWei Ëç£ËÄÄ8&apos;, price: 1899.8 },//{ name: &apos;ZTE U880&apos;, price: 899.8 } ]//6„ÄÅÊü•Êâæ‰ª∑Ê†º‰∏∫1899.8ÁöÑ‰∫ßÂìÅÁöÑkeyvar obj6=_.findKey(products,{price:1899.8});console.log(obj6); //1 APIÁöÑ‰ΩøÁî®ÈùûÂ∏∏ÁÆÄÂçïÔºå‰ΩÜÈúÄË¶ÅÊ≥®ÊÑèÁâàÊú¨ÔºåÂèØ‰ª•Áé∞Êü•Áé∞Áî®ÔºåAPIÂú∞ÂùÄÔºöhttps://lodash.com/docs/4.17.2 5.8„ÄÅÂèÇÊï∞5.8.1„ÄÅURL‰∏≠ÁöÑÂèÇÊï∞Âç†‰ΩçChecks route params (req.params), ex: /user/:id 127.0.0.1:3000/indexÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰∏∫‰∫ÜÂæóÂà∞indexÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®req.paramsÂæóÂà∞ÔºåÈÄöËøáËøôÁßçÊñπÊ≥ïÊàë‰ª¨Â∞±ÂèØ‰ª•ÂæàÂ•ΩÁöÑÂ§ÑÁêÜNode‰∏≠ÁöÑË∑ØÁî±Â§ÑÁêÜÈóÆÈ¢òÔºåÂêåÊó∂Âà©Áî®ËøôÁÇπÂèØ‰ª•ÈùûÂ∏∏Êñπ‰æøÁöÑÂÆûÁé∞MVCÊ®°ÂºèÔºõ http://127.0.0.1:3000/pdt/9527/phone 1234//Ëé∑Âæó‰∫ßÂìÅÊ†πÊçÆIdrouter.get(&apos;/:id/:category&apos;,function(request,res,next){ res.send(request.params.id+&quot;,&quot;+request.params.category);}); ËøêË°åÁªìÊûúÔºö 5.8.2„ÄÅURL‰∏≠ÁöÑQueryStringChecks query string params (req.query), ex: ?id=12 127.0.0.1:3000/index?id=12ÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËøôÁßçÊñπÂºèÊòØËé∑ÂèñÂÆ¢Êà∑Á´ØgetÊñπÂºè‰º†ÈÄíËøáÊù•ÁöÑÂÄºÔºåÈÄöËøá‰ΩøÁî®req.query.idÂ∞±ÂèØ‰ª•Ëé∑ÂæóÔºåÁ±ª‰ºº‰∫éPHPÁöÑgetÊñπÊ≥ïÔºõ http://127.0.0.1:3000/pdt/9527?name=jobs 123router.get(&apos;/:id&apos;,function(request,res,next){ res.send(&quot;name:&quot;+request.query.name);}); ËøêË°åÁªìÊûúÔºö 5.8.3„ÄÅHTTPÊ≠£Êñá‰∏≠ÁöÑÂèÇÊï∞Âú®postËØ∑Ê±Ç‰∏≠Ëé∑ÂæóË°®Âçï‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ Checks urlencoded body params (req.body), ex: id= 127.0.0.1Ôºö300/indexÔºåÁÑ∂Âêépost‰∫Ü‰∏Ä‰∏™id=2ÁöÑÂÄºÔºåËøôÁßçÊñπÂºèÊòØËé∑ÂèñÂÆ¢Êà∑Á´ØpostËøáÊù•ÁöÑÊï∞ÊçÆÔºåÂèØ‰ª•ÈÄöËøáreq.body.idËé∑ÂèñÔºåÁ±ª‰ºº‰∫éPHPÁöÑpostÊñπÊ≥ïÔºõ È°µÈù¢Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt; &lt;%= title %&gt; &lt;/title&gt; &lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;%= title %&gt; - ‰∫ßÂìÅÂàóË°®&lt;/h1&gt; &lt;table border=&quot;1&quot; width=&quot;80%&quot;&gt; &lt;tr&gt; &lt;th&gt;Â∫èÂè∑&lt;/th&gt; &lt;th&gt;ÂêçÁß∞&lt;/th&gt; &lt;th&gt;‰ª∑Ê†º&lt;/th&gt; &lt;/tr&gt; &lt;%pdts.forEach(function(pdt,index){%&gt; &lt;tr&gt; &lt;td&gt; &lt;%=index+1%&gt; &lt;/td&gt; &lt;td&gt; &lt;%=pdt.name%&gt; &lt;/td&gt; &lt;td&gt; &lt;%=pdt.price%&gt; &lt;/td&gt; &lt;/tr&gt; &lt;%});%&gt; &lt;/table&gt; &lt;ul&gt; &lt;% for(var i=0; i&lt;pdts.length; i++) {%&gt; &lt;li&gt; &lt;%=pdts[i].name%&gt; &lt;/li&gt; &lt;% } %&gt; &lt;/ul&gt;&lt;p&gt; &lt;%if(typeof msg!=&quot;undefined&quot;){%&gt; &lt;%=msg%&gt; &lt;%}%&gt;&lt;/p&gt; &lt;form action=&quot;pdt/add&quot; method=&quot;post&quot;&gt; &lt;p&gt; ÂêçÁß∞Ôºö&lt;input name=&quot;name&quot; /&gt; &lt;/p&gt; &lt;p&gt; ‰ª∑Ê†ºÔºö&lt;input name=&quot;price&quot; /&gt; &lt;/p&gt; &lt;button&gt;Ê∑ªÂä†&lt;/button&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; ‰ª£Á†ÅÔºö 123456router.post(&apos;/add&apos;,function(request,res,next){ var entity={name:request.body.name,price:request.body.price}; products.push(entity); //Â∞ÜproductËßÜÂõæ‰∏éÊåáÂÆöÁöÑÂØπË±°Ê∏≤ÊüìÂêéËæìÂá∫Âà∞ÂÆ¢Êà∑Á´Ø res.render(&apos;product&apos;, { title: &apos;Â§©ÁãóÂïÜÂüé&apos;, pdts:products,msg:&quot;Ê∑ªÂä†ÊàêÂäü&quot;});}); ÁªìÊûúÔºö 5.9„ÄÅJSONÂ¶ÇÊûúÈúÄË¶ÅNode.jsÂêëÂ§ñÊèê‰æõËøîÂõûJSONÁöÑÊé•Âè£ÔºåExpress‰πüÊòØÈùûÂ∏∏Êñπ‰æøÁöÑÔºåÂèØ‰ª•‰ΩøÁî®ÂéüÊù•Âú®ÊµèËßàÂô®‰∏≠‰ΩøÁî®Âà∞ÁöÑJSONÂØπË±°ÔºåËøôÊòØ‰∏Ä‰∏™ÊµèËßàÂô®ÂÜÖÁΩÆÂØπË±°Âú®ÊúçÂä°ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Ôºö Â∞ÜÂØπË±°Â∫èÂàóÂåñÊàêÂ≠óÁ¨¶Ôºö 12345//ÂØπË±°var rose={&quot;name&quot;:&quot;Rose&quot;,&quot;weight&quot;:&quot;65&quot;}; //Â∫èÂàóÂåñÊàêÂ≠óÁ¨¶‰∏≤ var str=JSON.stringify(rose); alert(str); ÁªìÊûúÔºö ÂèçÂ∫èÂàóÂåñÔºåÂ∞ÜÂ≠óÁ¨¶ËΩ¨Êç¢ÊàêÂØπË±°Ôºö 1234//Â∞ÜÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢ÊàêJavaScriptÂØπË±°var markStr=&apos;{&quot;name&quot;:&quot;mark&quot;,&quot;weight&quot;:&quot;188&quot;}&apos;; var mark=JSON.parse(markStr); alert(mark.name+&quot;Ôºå&quot;+mark.weight); ÁªìÊûúÔºö ExpressÂ∑≤ÁªèÂ∞ÅË£Ö‰∫Ü‰∏Ä‰∏™jsonÊñπÊ≥ïÔºåÁõ¥Êé•Ë∞ÉÁî®ËØ•ÊñπÊ≥ïÂ∞±ÂèØ‰ª•Â∫èÂàóÂåñÂØπË±°Ôºö 1234/* ‰∫ßÂìÅ */router.get(&apos;/rest&apos;, function(req, res, next) { res.json(products);}); ÂÖ≠„ÄÅRESTfulÔºàË°®Ëø∞ÊÄßÁä∂ÊÄÅËΩ¨ÁßªÔºâRESTÊòØËã±ÊñáRepresentational State TransferÁöÑÁº©ÂÜôÔºå‰∏≠ÊñáÁß∞‰πã‰∏∫‚ÄúË°®Ëø∞ÊÄßÁä∂ÊÄÅËΩ¨Áßª‚Äù Âü∫‰∫éHTTPÂçèËÆÆÔºåÊòØÂè¶‰∏ÄÁßçÊúçÂä°Êû∂ÊûÑÔºå‰º†ÈÄíÊòØJSON„ÄÅPOXÔºàPlain Old XMLÔºâËÄå‰∏çÊòØSOAPÊ†ºÂºèÁöÑÊï∞ÊçÆÔºåÂÖÖÂàÜÂà©Áî®HTTPË∞ìËØçÔºàVerbÔºâÔºå‰æßÈáçÊï∞ÊçÆÁöÑ‰º†ËæìÔºå‰∏öÂä°ÈÄªËæë‰∫§ÁªôÂÆ¢Êà∑Á´ØËá™Ë°åÂ§ÑÁêÜ RESTÊòØ‰∏ÄÁßçÂàÜÂ∏ÉÂºèÊúçÂä°Êû∂ÊûÑÁöÑÈ£éÊ†ºÁ∫¶ÊùüÔºåÂÉèJava„ÄÅ.NetÔºàWCF„ÄÅWebAPIÔºâÈÉΩÊúâÂØπËØ•Á∫¶ÊùüÁöÑÂÆûÁé∞Ôºå‰ΩøURLÂèòÂæóÊõ¥Âä†ÊúâÊÑè‰πâÔºåÊõ¥Âä†ÁÆÄÊ¥ÅÊòé‰∫ÜÔºåÂ¶ÇÔºö https://www.zhangguo.com/products/1getËØ∑Ê±Ç Ë°®Á§∫Ëé∑ÂæóÊâÄÊúâ‰∫ßÂìÅÁöÑÁ¨¨1‰∏™ https://www.zhangguo.com/products/productpostËØ∑Ê±Ç Ë°®Á§∫Ê∑ªÂä†‰∏Ä‰∏™‰∫ßÂìÅ https://www.zhangguo.com/products/1/pricegetËØ∑Ê±Ç Ë°®Á§∫Ëé∑ÂæóÁ¨¨1‰∏™‰∫ßÂìÅÁöÑ‰ª∑Ê†º https://www.zhangguo.com/products/1deleteËØ∑Ê±Ç Âà†Èô§ÁºñÂè∑‰∏∫1ÁöÑ‰∫ßÂìÅ RESTËÆæËÆ°ÈúÄË¶ÅÈÅµÂæ™ÁöÑÂéüÂàôÁΩëÁªú‰∏äÁöÑÊâÄÊúâ‰∫ãÁâ©ÈÉΩË¢´ÊäΩË±°‰∏∫ËµÑÊ∫êÔºàresourceÔºâÔºõÊØè‰∏™ËµÑÊ∫êÂØπÂ∫î‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑËµÑÊ∫êÊ†áËØÜÁ¨¶Ôºàresource identifierÔºâÔºõÈÄöËøáÈÄöÁî®ÁöÑËøûÊé•Âô®Êé•Âè£Ôºàgeneric connector interfaceÔºâÂØπËµÑÊ∫êËøõË°åÊìç‰ΩúÔºõÂØπËµÑÊ∫êÁöÑÂêÑÁßçÊìç‰Ωú‰∏ç‰ºöÊîπÂèòËµÑÊ∫êÊ†áËØÜÁ¨¶ÔºõÊâÄÊúâÁöÑÊìç‰ΩúÈÉΩÊòØÊó†Áä∂ÊÄÅÁöÑÔºàstatelessÔºâ Ë∞ìËØçGETË°®Á§∫Êü•ËØ¢Êìç‰ΩúÔºåÁõ∏ÂΩì‰∫éRetrieve„ÄÅSelectÊìç‰ΩúPOSTË°®Á§∫ÊèíÂÖ•Êìç‰ΩúÔºåÁõ∏ÂΩì‰∫éCreateÔºåInsertÊìç‰ΩúPUTË°®Á§∫‰øÆÊîπÊìç‰ΩúÔºåÁõ∏ÂΩì‰∫éUpdateÊìç‰ΩúDELETEË°®Á§∫Âà†Èô§Êìç‰ΩúÔºåÁõ∏ÂΩì‰∫éDeleteÊìç‰Ωú ÂÖ∂ÂÆÉËøòÊúâÔºö NodeJS+ExpressÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÂÆûÁé∞REST application/x-www-form-urlencoded multipart/form-data application/json res.setHeader(‚ÄòContent-Type‚Äô, ‚Äòapplication/json;charset=utf-8‚Äô); Á§∫‰æã‰ª£Á†Åcars.jsÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263var express = require(&apos;express&apos;);var router = express.Router();var _= require(&apos;lodash&apos;);var cars=[];cars.push({id:201701,name:&quot;BMW&quot;,price:190,speed:&quot;210km/h&quot;,color:&quot;ÁôΩËâ≤&quot;});cars.push({id:201702,name:&quot;BYD&quot;,price:25,speed:&quot;160km/h&quot;,color:&quot;Á∫¢Ëâ≤&quot;});cars.push({id:201703,name:&quot;Benz&quot;,price:300,speed:&quot;215km/h&quot;,color:&quot;ËìùËâ≤&quot;});cars.push({id:201704,name:&quot;Honda&quot;,price:190,speed:&quot;170km/h&quot;,color:&quot;ÈªëËâ≤&quot;});cars.push({id:201705,name:&quot;QQ&quot;,price:130,speed:&quot;210km/h&quot;,color:&quot;ÁôΩËâ≤&quot;});/* Get *//*Ëé∑ÂæóÊâÄÊúâÊ±ΩËΩ¶*//*url /cars/*/router.get(&apos;/&apos;, function(req, res, next) { res.json(cars);});/*Get*//*Ëé∑ÂæóÊ±ΩËΩ¶ÈÄöËøáid*//*urlÔºö/cars/:id */router.get(&apos;/:id&apos;, function(req, res, next) { //‰ªéË∑ØÂæÑ‰∏≠Êò†Â∞ÑÂèÇÊï∞ÔºåËΩ¨Êç¢ÊàêÊï∞Â≠ó var id=parseInt(req.params.id); var car=_.find(cars,{id:id}); res.json(car);});/*Post*//*Ê∑ªÂä†Ê±ΩËΩ¶*//*urlÔºö/cars/car */router.post(&apos;/car&apos;, function(req, res, next) { var car=req.body; //‰ªéËØ∑Ê±ÇÊ≠£Êñá‰∏≠Ëé∑ÂæójsonÂØπË±° car.id=_.last(cars).id+1; //Â∞ÜÁºñÂè∑‰øÆÊîπ‰∏∫ÊúÄÂêé‰∏ÄËæÜËΩ¶ÁöÑÁºñÂè∑+1 cars.push(car); //Â∞ÜÊ±ΩËΩ¶ÂØπË±°Ê∑ªÂä†Âà∞ÈõÜÂêà‰∏≠ res.json(car); //Â∞ÜÊ∑ªÂä†ÊàêÂäüÁöÑËΩ¶‰ª•jsonÁöÑÂΩ¢ÂºèËøîÂõû});/*Put*//*‰øÆÊîπÊ±ΩËΩ¶*//*urlÔºö/cars/car */router.put(&apos;/car&apos;, function(req, res, next) { var car=req.body; //‰ªéËØ∑Ê±ÇÊ≠£Êñá‰∏≠Ëé∑ÂæójsonÂØπË±° console.log(req.body); var index=_.findIndex(cars,{id:parseInt(car.id)}); //Ê†πÊçÆidËé∑ÂæóËΩ¶Âú®ÈõÜÂêà‰∏≠ÁöÑ‰∏ãÊ†á cars[index]=car; //ÊõøÊç¢ÂéüÂØπË±° //res.json(car); //Â∞Ü‰øÆÊîπÂêéÁöÑËΩ¶‰ª•jsonÁöÑÂΩ¢ÂºèËøîÂõû res.send({status:&quot;success&quot;, message:&quot;Êõ¥Êñ∞ÊàêÂäü!&quot;}); });/*Delete*//*Âà†Èô§Ê±ΩËΩ¶*//*urlÔºö/cars/:id */router.delete(&apos;/id/:id&apos;, function(req, res, next) { //Ëé∑Âæóurl‰∏≠ÁöÑÁºñÂè∑ÂèÇÊï∞ var id=parseInt(req.params.id); var index=_.findIndex(cars,{id:id}); //Ê†πÊçÆidËé∑ÂæóËΩ¶Âú®ÈõÜÂêà‰∏≠ÁöÑ‰∏ãÊ†á cars.splice(index,1); //Âú®carsÊï∞ÁªÑ‰∏≠Âà†Èô§‰∏ãÊ†á‰ªéindexÂºÄÂßãÁöÑ1Êù°Êï∞ÊçÆ res.send({status:&quot;success&quot;, message:&quot;Âà†Èô§ÊàêÂäü!&quot;}); });module.exports = router; Á§∫‰æã‰ª£Á†Åapp.jsÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152var express = require(&apos;express&apos;);var path = require(&apos;path&apos;);var favicon = require(&apos;serve-favicon&apos;);var logger = require(&apos;morgan&apos;);var cookieParser = require(&apos;cookie-parser&apos;);var bodyParser = require(&apos;body-parser&apos;);var index = require(&apos;./routes/index&apos;);var users = require(&apos;./routes/users&apos;);var pdts = require(&apos;./routes/product&apos;);var task = require(&apos;./routes/task&apos;);var cars = require(&apos;./routes/cars&apos;);var app = express();//ÊåáÂÆöËßÜÂõæÂºïÊìé‰∏∫ejsapp.set(&apos;views&apos;, path.join(__dirname, &apos;views&apos;));app.set(&apos;view engine&apos;, &apos;ejs&apos;);// uncomment after placing your favicon in /public//app.use(favicon(path.join(__dirname, &apos;public&apos;, &apos;favicon.ico&apos;)));app.use(logger(&apos;dev&apos;));app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: false }));app.use(cookieParser());app.use(express.static(path.join(__dirname, &apos;public&apos;)));app.use(&apos;/&apos;, index);app.use(&apos;/users&apos;, users);app.use(&apos;/pdt&apos;, pdts);app.use(&quot;/task&quot;,task);app.use(&quot;/cars&quot;,cars);// catch 404 and forward to error handlerapp.use(function(req, res, next) { var err = new Error(&apos;Not Found&apos;); err.status = 404; next(err);});// error handlerapp.use(function(err, req, res, next) { // set locals, only providing error in development res.locals.message = err.message; res.locals.error = req.app.get(&apos;env&apos;) === &apos;development&apos; ? err : {}; // render the error page res.status(err.status || 500); res.render(&apos;error&apos;);});module.exports = app; Get Ëé∑ÂæóÊâÄÊúâÊ±ΩËΩ¶ url /cars/ Get Ëé∑ÂæóÊ±ΩËΩ¶ÈÄöËøáid urlÔºö/cars/:id Post Ê∑ªÂä†Ê±ΩËΩ¶ urlÔºö/cars/car ÂèÇÊï∞‰∏≠ÁöÑjsonÊ†ºÂºè‰∏ÄÂÆöË¶Å‰ΩøÁî®Ê†áÂáÜÊ†ºÂºèÔºåÊ≥®ÊÑèÂºïÂè∑ÔºåÊ≥®ÊÑèContent-TypeÔºåÈªòËÆ§ÁöÑContent-TypeÁ±ªÂûãÊòØÔºöapplication/x-www-form-urlencoded Put ‰øÆÊîπÊ±ΩËΩ¶ urlÔºö/cars/car Delete Âà†Èô§Ê±ΩËΩ¶ urlÔºö/cars/:id node.jsË∑®Âüü ‰øÆÊîπapp.jsÊñá‰ª∂Êã¶Êà™ÊâÄÊúâÁöÑËØ∑Ê±ÇÔºå‰øÆÊîπÂ§¥ÈÉ® 1234567891011121314151617app.use(logger(&apos;dev&apos;));app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: false }));app.use(cookieParser());app.use(express.static(path.join(__dirname, &apos;public&apos;)));app.all(&apos;*&apos;, function(req, res, next) { res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;); res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;content-type&quot;); res.header(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,DELETE,OPTIONS&quot;); res.header(&quot;X-Powered-By&quot;, &apos; 3.2.1&apos;); res.header(&quot;Content-Type&quot;, &quot;application/json;charset=utf-8&quot;); if(req.method == &quot;OPTIONS&quot;) { res.send(&quot;200&quot;); } else { next(); }}); ÁªìÊûúÔºö ‰πù„ÄÅËßÜÈ¢ëFrom: https://www.cnblogs.com/best/p/6204116.html","link":"/ÁºñÁ®ã/JavaScript/node/"},{"title":"FlutterÁöÑÁéØÂ¢ÉÈÖçÁΩÆ for Mac","text":"ÂâçË®ÄÊúÄËøëFlutterÂ∑≤ÁªèÁñØÁãÇÁöÑÂà∑Â±è‰∫ÜÂêÑ‰∏™ÊäÄÊúØÂçöÂÆ¢„ÄÅÊäÄÊúØÁΩëÁ´ôÔºåÂÆåÂÖ®Êúâ‰∏ÄÁªüÂ§©‰∏ãÁöÑÊ∞îÂäø„ÄÇÊâÄ‰ª•ÊúÄËøë‰πüÂÜ≥ÂÆöÂºÄÂßãÂ∞ùÂ∞ùÈ≤úÔºå‰ªéÈõ∂ÂºÄÂßã‰∏ÄÊ≠•Ê≠•ÁöÑÊù•Êé¢Á¥¢FlutterÁöÑ‰∏ñÁïå„ÄÇÂ∞±‰ªéÁéØÂ¢ÉÊê≠Âª∫ÂºÄÂßãÔºåËÆ∞ÂΩï‰∏Ä‰∏ãËá™Â∑±Êé¢Á¥¢FlutterÁöÑËøáÁ®ã„ÄÇ ÂÆâË£ÖFlutterÈ¶ñÂÖàÊàë‰ª¨ÂèØ‰ª•Âú®FlutterÂÆòÁΩë‰∏äÈù¢ÁúãÂà∞‰∏Ä‰∫õÈÖçÁΩÆÁéØÂ¢ÉÁöÑÊ≠•È™§„ÄÇËøôÈáåÂ∞±Áõ¥Êé•ÂºÄÂπ≤‰∫ÜÔºåËµ∞Ëµ∑„ÄÇ 1„ÄÅÈÖçÁΩÆHomeBrewÊàë‰ª¨Âú®ÂéªÈÖçÁΩÆFlutterÁöÑÁéØÂ¢É‰πãÂâçÔºåÈúÄË¶ÅÂÖàÊ£ÄÊü•‰∏Ä‰∏ãHomeBrewÊòØ‰∏çÊòØÊúÄÊñ∞ÁöÑ„ÄÇ 1$ brew update Â¶ÇÊûúÊ≤°ÊúâbrewÁöÑËØùÔºåÂèØ‰ª•ÂéªHomeBrewÂÆòÁΩëËá™Ë°å‰∏ãËΩΩ„ÄÇËøôÈáåÂ∞±‰∏çËµòËø∞‰∫ÜÔºåËøôÈáåÂ¶ÇÊûúÈáçÊñ∞‰∏ãËΩΩÁöÑËØùÔºåÁúãÂà∞‰∏ãÈù¢ÁöÑÊâìÂç∞‰ø°ÊÅØÂ∞±ËØ¥Êòé‰∏ãËΩΩÂÆåÊØï‰∫Ü„ÄÇ 2„ÄÅ‰∏ãËΩΩSDKÊé•‰∏ãÊù•Â∞±ÊòØÂéªÂÆòÁΩë‰∏ãËΩΩSDK‰∫Ü„ÄÇÊ≥®ÊÑèÔºåËøôÈáå‰∏ãËΩΩSDKÊúâ‰∏§ÁßçÊñπÊ≥ïÔºö ‰∏ÄÊòØÁõ¥Êé•git clone -b beta https://github.com/flutter/flutter.git‰∏ãËΩΩ ‰∫åÊòØËá™Â∑±Âú®ÂÆòÁΩë‰∏ãËΩΩ‰∏ãÊù•ÔºåÂ¶Ç‰∏ãÂõæ ËøôÈáåÊàë‰∏§ÁßçÊñπÊ≥ïÈÉΩËØïËøá‰∫Ü‰∏ÄÈÅçÔºåÁ¨¨‰∏ÄÁßçÊñπÊ≥ïÂÆûÂú®ÊòØÂ§™ÊÖ¢‰∫ÜÔºåÂú®ÁªèÂéÜ‰∫ÜËÄóË¥π‰∏Ä‰∏™ÂçäÂ∞èÊó∂‰∏ãËΩΩÂà∞94%ÔºåÊúÄÂêéÊèêÁ§∫Â§±Ë¥•‰∫ÜÁöÑËøáÁ®ã‰πãÂêéÔºåÊàëÂÜ≥ÂÆöËøòÊòØÁî®Á¨¨‰∫åÁßçÊñπÊ≥ïÔºåÊï¥‰∏™ËøáÁ®ãÂè™Áî®‰∫Ü3ÂàÜÈíüÁöÑÊ†∑Â≠êÔºåÁõ∏ÂΩìÊª°ÊÑè„ÄÇ‰∏ãËΩΩÂÆå‰πãÂêéÔºåÊòØ‰∏Ä‰∏™ÂêçÂ≠óÂè´flutter_macos_v1.5.4-hotfix.2-stable.zipÁöÑÂéãÁº©ÂåÖ„ÄÇ ÁÑ∂ÂêéÊàë‰ª¨Ëß£ÂéãËøô‰∏™zipÂåÖÔºåÊääËß£ÂéãÂá∫Êù•ÁöÑflutterÊñá‰ª∂ÊîæÂà∞Ê†πÁõÆÂΩï‰∏ãÂç≥ÂèØ„ÄÇ 3„ÄÅÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèÂõ†‰∏∫FlutterÁöÑSDK‰∏≠ÂåÖÂê´‰∫ÜÂæàÂ§öÁöÑÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑„ÄÇÊàë‰ª¨Â∞±ÈúÄË¶ÅÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáèÔºåÊâÄ‰ª•ÊàëÁõ¥Êé•Â∞±ÂÆâË£ÖÂà∞‰∫ÜÊ†πÁõÆÂΩï‰∏ã‰∫Ü„ÄÇ ÈÖçÁΩÆÈïúÂÉè Âõ†‰∏∫FlutterÂú®ËøêË°åÁöÑÊó∂ÂÄôÔºåÂ∞±ÈúÄË¶ÅÂéªÂÆòÁΩë‰∏ãËΩΩ‰∏Ä‰∫õÈúÄË¶ÅÁöÑËµÑÊ∫êÔºå‰ΩÜÊòØÂõ†‰∏∫Â§©ÂõΩÁâπËâ≤ÁöÑwallÁöÑÂéüÂõ†ÔºåÊàë‰ª¨Â∞±ÈúÄË¶ÅÈïúÂÉèÊúçÂä°Âô®ÔºåËøô‰∏™Âú®ÂÆòÁΩë‰∏äÈù¢ÊúâÂÜôÁöÑÂæàÊòéÁôΩÔºåËÄå‰∏îËøôÊòØ‰∏Ä‰∏™‰∏¥Êó∂ÁöÑÈïúÂÉèÔºåÂêéÈù¢ËøòË¶Å‰ª•ÂÆòÁΩëÁöÑÈïúÂÉèÂú∞ÂùÄ‰∏∫ÂáÜ„ÄÇ Êàë‰ª¨Ë∑≥ËΩ¨Âà∞Ê†πÁõÆÂΩï 1cd ~ Â∞±ËÉΩÊâæÂà∞Ëøô‰∏™.bash_profileÈöêËóèÊñá‰ª∂ÔºåÊàë‰ª¨Áî®vimÊâìÂºÄËøô‰∏™Êñá‰ª∂ 1vim ~/.bash_profile ÁÑ∂ÂêéÈúÄË¶ÅËæìÂÖ•Â∞±ÊääAÈîÆÊåâ‰∏Ä‰∏ãËøõÂÖ•ÁºñËæëÊ®°ÂºèÔºåÊää‰∏ãÈù¢‰∏â‰∏™ÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆËøõÂéª 123export PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cnexport PATH=/Users/xueliheng/flutter/bin:$PATH Ê≥®ÊÑè‰∏ãÔºåÁ¨¨‰∏â‰∏™ÁéØÂ¢ÉÂèòÈáèËøôÈáå/Users/xueliheng/ÊòØÊàëÁöÑÊ†πÁõÆÂΩïÔºåÁÑ∂Âêé/flutter/ÊòØÊàë‰ª¨ÂàöÂàöËß£ÂéãÁöÑÁöÑzipÂåÖÈáåÈù¢ÁöÑflutterÊñá‰ª∂Â§π„ÄÇ‰∏äÈù¢‰∏§‰∏™ÁéØÂ¢ÉÂèòÈáèÊòØ‰∏§‰∏™ÈïúÂÉèÂú∞ÂùÄÔºå‰∏äÊñá‰∏≠‰πüÊúâËØ¥Ëøá„ÄÇ Êé•ÁùÄshift+ÔºöÁÑ∂ÂêéËæìÂÖ•wq‰øùÂ≠òÂπ∂ÈÄÄÂá∫vim„ÄÇËæìÂÖ•Â¶Ç‰∏ãÂëΩ‰ª§Ôºö 1source ~/.bash_profile ÊúÄÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•È™åËØÅ‰∏Ä‰∏ãflutterÁéØÂ¢ÉÊúâÊ≤°ÊúâÈÖçÁΩÆÊàêÂäü‰∫Ü„ÄÇËæìÂÖ•Ôºö 1flutter -h ÁúãÂà∞Â¶Ç‰∏ãÂ¶ÇÁöÑÊâìÂç∞‰ø°ÊÅØÂ∞±ÊòØÈÖçÁΩÆÊàêÂäü‰∫Ü 4„ÄÅÈÖçÁΩÆAndroid StudioÂ¶ÇÊûúÊ≤°Êúâ‰∏ãËΩΩAndroid StudioÁöÑËØùÔºåÂ∞±ÂéªÂÆòÁΩëÂéª‰∏ãËΩΩ‰∏Ä‰∏ã„ÄÇ Êàë‰ª¨Áî®flutter doctorÂëΩ‰ª§ÂéªÊ£ÄÊü•‰∏Ä‰∏ãflutterÁöÑÁéØÂ¢ÉÈÖçÁΩÆÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Â¶Ç‰∏ãÊâìÂç∞ ËøôÈáåÁöÑÊØè‰∏™‚úóÈÉΩÊòØÊàë‰ª¨Ë¶ÅÂéªËß£ÂÜ≥ÁöÑÈóÆÈ¢ò„ÄÇ‰∏çËøá‰ªñÊúâÂëäËØâ‰Ω†Â∫îËØ•ÊÄé‰πàÂÅö„ÄÇÊØîÂ¶ÇÁ¨¨‰∏Ä‰∏™ÊèêÁ§∫Ôºö 12[‚úó] Android toolchain - develop for Android devices ‚úó Unable to locate Android SDK. ËøôÂ∞±ÊòØËÆ©‰Ω†Âéª‰∏ãËΩΩAndroid Studio„ÄÇÊàë‰ª¨Âú®‰∏ãËΩΩÂÆåÊàê‰πãÂêéÔºåÊâìÂºÄASËÆ©‰ªñÂéª‰∏ãËΩΩ‰∏Ä‰∫õÂ∫îËØ•‰∏ãËΩΩÁöÑ‰∏úË•ø„ÄÇ Â¶ÇÊûúËøôÈáåÊúâÊèêÁ§∫‰Ω† 12[‚úó] Android toolchain - develop for Android devices (Android SDK version 24.0.2) ‚úó Flutter requires Android SDK 28 and the Android BuildTools 28.0.3 ËøôÂ∞±ÊòØÂú®ÊèêÁ§∫ËÆ©‰Ω†ÂéªÂçáÁ∫ß‰∏Ä‰∏ãSDKÔºåÁÑ∂ÂêéÂëΩ‰ª§Â¶Ç‰∏ã 1&quot;/Users/xueliheng/Library/Android/sdk/tools/bin/sdkmanager&quot; &quot;platforms;android-28&quot; &quot;build-tools;28.0.3&quot; Ê≥®ÊÑè‰∏Ä‰∏ãÔºåËøô‰∏™Âú∞ÊñπÁöÑÂçáÁ∫ßÊòØÈúÄË¶Å‚ÄùÁßëÂ≠¶‰∏äÁΩë‚ÄúÁöÑÔºåÂ¶ÇÊûúÊúâÁöÑÂ∞è‰ºô‰º¥Ê≤°ÊúâËøô‰∏™Êù°‰ª∂ÁöÑËØùÔºåÊàëËøôËæπÁôæÂ∫¶‰∫ë‰∏äÈù¢ÁªôÂ§ßÂÆ∂ÂáÜÂ§á‰∫Ü‰∏Ä‰∏™ÈìæÊé•ÔºåÊèêÂèñÁ†Å: e48cÔºåÂ§ßÂÆ∂ÂèØ‰ª•‰∏ãËΩΩ‰∏ãÊù•„ÄÇ‰∏ãËΩΩ‰∏ãÊù•‰πãÂêéËß£ÂéãÂà∞/Users/Library/Android/Ëøô‰∏™Êñá‰ª∂Â§π„ÄÇÊääÂéüÂÖàÁöÑSDKÁõ¥Êé•Ë¶ÜÁõñÂ∞±Ë°å‰∫ÜÔºåÂ∞±Â∑≤ÁªèÊòØÊúÄÊñ∞ÁöÑSDK‰∫Ü„ÄÇ Êé•‰∏ãÊù•Êàë‰ª¨ÈÖçÁΩÆ‰∏Ä‰∏ãÂÆâÂçìÁöÑÁéØÂ¢ÉÂèòÈáèÔºåËøòÊòØÂú®Ê†πÁõÆÂΩï‰∏ãÊâæÂà∞.bash_profileÊñá‰ª∂ÔºåÂπ∂Âú®ÂÖ∂‰∏≠Ê∑ªÂä†Âõõ‰∏™ÁéØÂ¢ÉÂèòÈáè 1234export ANDROID_HOME=~/Library/Android/sdkexport PATH=${PATH}:${ANDROID_HOME}/emulatorexport PATH=${PATH}:${ANDROID_HOME}/toolsexport PATH=${PATH}:${ANDROID_HOME}/platform-tools ÂàÜÂà´ÊòØÔºö ÂÆâÂçìsdkÁöÑË∑ØÂæÑ ÂÆâÂçìÁöÑÊ®°ÊãüÂô®Ë∑ØÂæÑ ÂÆâÂçìtoolsË∑ØÂæÑ ÂÆâÂçìÂπ≥Âè∞Â∑•ÂÖ∑ Êé•‰∏ãÊù•Êàë‰ª¨ÂÜçÁî®flutter doctorÊ£ÄÊü•ÁöÑÊó∂ÂÄôÔºåÊòæÁ§∫ÁöÑ‰ø°ÊÅØÂ¶Ç‰∏ãÂõæ ÊÑèÊÄùÂ∞±ÊòØËÆ©Êàë‰ª¨Âéª‰∏ãËΩΩiOSÁöÑÁõ∏ÂÖ≥ÁéØÂ¢ÉÔºåÊàë‰ª¨ÂÖàÊöÇÊó∂ÊîæÊîæÔºå‰∏ãÈù¢ËøòÊúâ‰∏Ä‰∏™ÂÖ≥‰∫éAndroid StudioÁöÑÊ≤°ÊúâËß£ÂÜ≥ÂÆå 12‚úó Flutter plugin not installed; this adds Flutter specific functionality.‚úó Dart plugin not installed; this adds Dart specific functionality. Ëøô‰∏™Â∞±ÊòØÁº∫Â∞ëFlutterÊèí‰ª∂ÁöÑÊÑèÊÄùÔºåÈÇ£‰πàÊàë‰ª¨Â∞±ÂéªASÈáåÈù¢ÂéªÈÖçÁΩÆ‰∏Ä‰∏ãÂ•Ω‰∫Ü„ÄÇÊâìÂºÄASÁöÑPreferencesÔºåÁÇπÂáªPluginsÔºåÂú®ÊêúÁ¥¢Ê†è‰∏≠ËæìÂÖ•flutterÔºåÊâæÂà∞Áõ∏Â∫îÁöÑÊèí‰ª∂ÔºåÁÑ∂ÂêéInstall„ÄÇÂΩìË∑≥Âá∫ÂÆâË£ÖDartÊèí‰ª∂ÁöÑÊèêÁ§∫ÁïåÈù¢Êó∂ÔºåËÆ∞ÂæóÁÇπÂáªYesËøõË°åÂÆâË£Ö„ÄÇÂÆâË£ÖÂÆåÊØï‰πãÂêérestart IDEÈáçÂêØAS„ÄÇ ÈáçÂêØ‰πãÂêéÂ∞±ËÉΩÁúãÂà∞Â§ö‰∫Ü‰∏Ä‰∏™Ëøô‰∏™‰∏úË•ø Êàë‰ª¨ÂÜçÁî®flutter doctorÊ£ÄÊµã‰∏Ä‰∏ã Áé∞Âú®Áªà‰∫éok‰∫Ü„ÄÇÊàë‰ª¨ÁúãÂà∞[‚úì]Android StudioËØ¥ÊòéÔºåÂÆâÂçìÁöÑÁéØÂ¢ÉÂü∫Êú¨‰∏äÈÖçÁΩÆÊàêÂäüÔºåÊé•‰∏ãÊù•Êàë‰ª¨Â∞±ÈÖçÁΩÆ‰∏Ä‰∏ãÂÆâÂçìÁöÑÊ®°ÊãüÂô®Â∞±Â•Ω‰∫Ü„ÄÇ 5„ÄÅÂÆâÂçìÊ®°ÊãüÂô®ÈÖçÁΩÆÂú®AS‰∏≠ÊâæÂà∞Ê®°ÊãüÂô®ÈÖçÁΩÆÂ¶Ç‰∏ãÂõæÂπ∂ÈÄâÊã© Êé•ÁùÄÂ∞±ÂàõÂª∫ËÆæÂ§áÔºåÈÄâÊã©ËÆæÂ§á ÈÄâÊã©Á≥ªÁªü ÊúÄÂêéÁÇπÂáª‰∏ãËΩΩÂ∞±ÂÆåÊàê‰∫Ü„ÄÇ 6„ÄÅÈÖçÁΩÆiOSÁéØÂ¢ÉÊàë‰ª¨ÈÖçÁΩÆÂÆå‰∫ÜÂÆâÂçìÁöÑÁéØÂ¢ÉÔºåÂÜçÊù•flutter doctorÊ£ÄÊµã‰∏Ä‰∏ã„ÄÇ ÊÉÖÂÜµÊòØËøôÊ†∑ÁöÑ„ÄÇÁõÆÂâç1.5.4ÁâàÊú¨ÁöÑFlutterÈúÄË¶ÅÂåπÈÖçÊñ∞ÁâàÊú¨ÁöÑXcode10.2.1„ÄÇÊåâÁÖß‰ªñÊèêÁ§∫ÁöÑÊù•ËØïËØïÔºåÊèêÁ§∫ÊàëXcodeÁâàÊú¨Â§™‰Ωé‰∫ÜÔºåÈúÄË¶ÅÂçáÁ∫ßXcode Êõ¥Êñ∞Âà∞ÊúÄÊñ∞ÁöÑ‰πãÂêéÔºåÁªßÁª≠Ëµ∞‰∏ãÈù¢ÁöÑÊ≠•È™§‰æùÊóß‰ºöÊä•Èîô„ÄÇÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•ËØïËØï‰∏ãÈù¢ÁöÑËøô‰∏™ÂäûÊ≥ïÔºö 123456$ brew link pkg-config$ brew install --HEAD usbmuxd$ brew unlink usbmuxd$ brew link usbmuxd$ brew install --HEAD libimobiledevice$ brew install ideviceinstaller Ëøô‰∫õÊâßË°åÂÆå‰πãÂêéÊâßË°å‰∏Ä‰∏ãflutter doctor ÊúÄÂêéËøòÁúüÊòØÊ≤°ÈîôÔºåÂÖ®ÈÉ®ÈÖçÁΩÆÂÆåÊàê‰∫ÜÔºÅÈÇ£‰πàÊàë‰ª¨Â∞±ÊääiOSÁöÑ‰πüÈÖçÁΩÆÂÆåÊØï‰∫Ü„ÄÇ 7„ÄÅVSCodeÁöÑ‰ΩøÁî®VSCode‰∏äÈù¢‰ΩøÁî®ÁöÑËØùÔºåÂ∞±ÁÆÄÂçïÂ§ö‰∫ÜÔºåËøôÈáåÊàëÂ∞±ÁÆÄÁ≠îÁöÑËµòËø∞‰∏Ä‰∏ã„ÄÇ Âè™ÈúÄË¶ÅÂ∞ÜDartÂíåFlutterÊèí‰ª∂ÈÉΩ‰∏ãËΩΩ‰∏ãÊù• ÁÑ∂Âêécommand+shift+pËæìÂÖ•flutterÔºåÈÄâÊã©FlutterÔºöNew Project ËæìÂÖ•Ë¶ÅÂàõÂª∫ÁöÑÈ°πÁõÆÁöÑÂêçÁß∞ÂíåÂ≠òÊîæÈ°πÁõÆÁöÑÂú∞ÂùÄ„ÄÇÂ¶ÇÊûúÊèêÁ§∫ÈúÄË¶ÅÊåáÊòéflutterÁöÑSDKÁöÑË∑ØÂæÑÔºåÈÇ£Â∞±ÈÄâÊã©Ê†πÁõÆÂΩïÈÇ£‰∏™ÁªèËøáËß£ÂéãÂæóÊù•ÁöÑflutterÁöÑÊñá‰ª∂Â§πÂ∞±Â•Ω‰∫Ü„ÄÇ Êé•‰∏ãÊù•ÊòØËøôÊ†∑‰∏Ä‰∏™ÁïåÈù¢ Êé•‰∏ãÊù•Êàë‰ª¨ÈÄâÊã©View-&gt;Start DebuggingÊù•ËøêË°åÈ°πÁõÆ„ÄÇ ÂΩìÁÑ∂Ëøô‰∏™ËøáÁ®ãÈúÄË¶Å‰Ω†ÊääXcodeÁöÑÊ®°ÊãüÂô®ÊâìÂºÄ„ÄÇËøêË°åÂÆå‰πãÂêéÂ∞±ËÉΩÁúãÂà∞Ëøô‰∏™ÁïåÈù¢Ôºå‰πüÂ∞±ÊòØ‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™FlutterÂ∑•Á®ãÂï¶ÔºÅ 8„ÄÅHot reloadÁöÑ‰ΩøÁî®Êàë‰ª¨ÊâìÂºÄlib/main.dartÊñá‰ª∂ÔºåÁÑ∂ÂêéÂú®ÂÖ∂‰∏≠ÊâæÂà∞ 1You have pushed the button this many times: Âπ∂ÊääËøô‰∏™Êîπ‰∏∫ 1You have clicked the button this many times: ÈÇ£‰πàÊàë‰ª¨Â∞±ËÉΩÁúãÂà∞ÁïåÈù¢‰∏äÂ§ö‰∫Ü‰∏Ä‰∏™Â∞èÈó™Áîµ Êàë‰ª¨Áé∞Âú®Â¶ÇÊûúcommand+s‰øùÂ≠ò‰∏Ä‰∏ãÊõ¥ÊîπÁöÑËØùÔºåÂ∞±ËÉΩÂæàÂø´ÁöÑÂú®Ê®°ÊãüÂô®‰∏äÈù¢ÁúãÂà∞Áõ∏Â∫îÁöÑÊõ¥ÊîπÔºå‰∏çÈúÄË¶ÅÂÜçÈáçÊñ∞ÂéªÁºñËØë‰∏ÄËæπ„ÄÇËøô‰∏ÄÁÇπÁÆÄÁõ¥ÊòØÂ§™Ê£í‰∫ÜÔºÅËß£ÂÜ≥‰∫ÜiOSÂºÄÂèëËÄÖ‰∏Ä‰∏™Â§ßÁóõÁÇπÂïäÔºÅÔºÅÔºÅ ÁªìËØ≠Ëá≥Ê≠§ÔºåflutterÁöÑÁéØÂ¢ÉÊê≠Âª∫Â∑•‰ΩúÂü∫Êú¨‰∏äÂ∞±ËøõË°åÂÆåÊØï‰∫ÜÔºåÊï¥‰∏™ËøáÁ®ãÂ§ßÊ¶ÇËÄóÊó∂Êé•Ëøë2‰∏™Â∞èÊó∂ÔºåËøôÊúüÈó¥ÂåÖÊã¨ÈááÂùë„ÄÅÊü•ËµÑÊñô„ÄÅ‰∏ãËΩΩ„ÄÅÁßëÂ≠¶‰∏äÁΩë‚Ä¶Á≠âÁ≠âÂæàËõãÁñºÁöÑ‰∫ãÊÉÖ„ÄÇÂΩìÁÑ∂ÁΩëÈÄüÂü∫Êú¨‰∏äÊòØÊúÄÂ§ßÁöÑÈöúÁ¢çÔºåÊµ™Ë¥π‰∫ÜÂæàÂ§öÁöÑÊó∂Èó¥„ÄÇÊâÄ‰ª•‰πüÊòØÈúÄË¶Å‰∏ÄÂÆöÁöÑËÄêÂøÉÊù•ÂÆåÊàêÁöÑ„ÄÇ ÂêéÈù¢ÁöÑÊñáÁ´†‰πü‰ºöÊåÅÁª≠ÁöÑÊõ¥Êñ∞ÔºåÊúÄËøëÊúâÁÇπÊáàÊÄ†ÔºåOpenGLÁ≥ªÂàóÁöÑÊñáÁ´†ÊúâÁÇπÊãñÊõ¥ÁöÑËäÇÂ•èÔºåËøô‰∏™ÂêéÈù¢‰ºöË°•Ëµ∑Êù•„ÄÇFlutterÊàë‰πüÊâçÂàöÂàöÊé•ÊâãÔºå‰πüÊòØÊÖ¢ÊÖ¢ÁöÑÊù•ÈááÂùëÔºå‰πü‰ºö‰ª•Ê≠§Êù•ËÆ∞ÂΩïËá™Â∑±ÁöÑÂ≠¶‰π†ÁªèÂéÜÔºå‰πüÂ∏åÊúõËÉΩÂ§öÂ§öË∑üÂ§ßÂÆ∂‰∫§ÊµÅ„ÄÇ ÂÜçÊ¨°ÊàëÈôÑ‰∏äËá™Â∑±ÁöÑÈÇÆÁÆ±coderspr1nghall@gmail.comÊ¨¢ËøéËÆ®ËÆ∫‰∫§ÊµÅ„ÄÇ ÂéüÊñáÈìæÊé•üëá","link":"/flutter/"},{"title":"Nginx","text":"‰ªÄ‰πàÊòØNginx?Nginx (engine x) ÊòØ‰∏ÄÊ¨æËΩªÈáèÁ∫ßÁöÑWeb ÊúçÂä°Âô® „ÄÅÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®ÂèäÁîµÂ≠êÈÇÆ‰ª∂ÔºàIMAP/POP3Ôºâ‰ª£ÁêÜÊúçÂä°Âô®„ÄÇ ‰ªÄ‰πàÊòØÂèçÂêë‰ª£ÁêÜÔºüÂèçÂêë‰ª£ÁêÜÔºàReverse ProxyÔºâÊñπÂºèÊòØÊåá‰ª•‰ª£ÁêÜÊúçÂä°Âô®Êù•Êé•Âèóinternet‰∏äÁöÑËøûÊé•ËØ∑Ê±ÇÔºåÁÑ∂ÂêéÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªôÂÜÖÈÉ®ÁΩëÁªú‰∏äÁöÑÊúçÂä°Âô®ÔºåÂπ∂Â∞Ü‰ªéÊúçÂä°Âô®‰∏äÂæóÂà∞ÁöÑÁªìÊûúËøîÂõûÁªôinternet‰∏äËØ∑Ê±ÇËøûÊé•ÁöÑÂÆ¢Êà∑Á´ØÔºåÊ≠§Êó∂‰ª£ÁêÜÊúçÂä°Âô®ÂØπÂ§ñÂ∞±Ë°®Áé∞‰∏∫‰∏Ä‰∏™ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®„ÄÇ ÂÆâË£Ö‰∏é‰ΩøÁî®ÂÆâË£ÖnginxÂÆòÁΩë‰∏ãËΩΩÂú∞ÂùÄÔºöhttps://nginx.orgÔºåÂèëÂ∏ÉÁâàÊú¨ÂàÜ‰∏∫ Linux Âíå windows ÁâàÊú¨„ÄÇ ‰πüÂèØ‰ª•‰∏ãËΩΩÊ∫êÁ†ÅÔºåÁºñËØëÂêéËøêË°å„ÄÇ ‰ªéÊ∫ê‰ª£Á†ÅÁºñËØë Nginx ÊääÊ∫êÁ†ÅËß£ÂéãÁº©‰πãÂêéÔºåÂú®ÁªàÁ´ØÈáåËøêË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåNginx ‰ºöË¢´ÂÆâË£ÖÂú® /usr/local/nginx„ÄÇÈÄöËøáËÆæÂÆöÁºñËØëÈÄâÈ°πÔºå‰Ω†ÂèØ‰ª•ÊîπÂèòËøô‰∏™ËÆæÂÆö„ÄÇ Windows ÂÆâË£Ö ‰∏∫‰∫ÜÂÆâË£Ö Nginx / Win32ÔºåÈúÄÂÖà‰∏ãËΩΩÂÆÉ„ÄÇÁÑ∂ÂêéËß£Âéã‰πãÔºåÁÑ∂ÂêéËøêË°åÂç≥ÂèØ„ÄÇ‰∏ãÈù¢‰ª• C ÁõòÊ†πÁõÆÂΩï‰∏∫‰æãËØ¥Êòé‰∏ãÔºö Nginx / Win32 ÊòØËøêË°åÂú®‰∏Ä‰∏™ÊéßÂà∂Âè∞Á®ãÂ∫èÔºåËÄåÈùû windows ÊúçÂä°ÊñπÂºèÁöÑ„ÄÇÊúçÂä°Âô®ÊñπÂºèÁõÆÂâçËøòÊòØÂºÄÂèëÂ∞ùËØï‰∏≠„ÄÇ ‰ΩøÁî®nginx ÁöÑ‰ΩøÁî®ÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØÂá†Êù°ÂëΩ‰ª§„ÄÇ Â∏∏Áî®Âà∞ÁöÑÂëΩ‰ª§Â¶Ç‰∏ãÔºö 123456789101112131415nginx -s stop ÔºöÂø´ÈÄüÂÖ≥Èó≠NginxÔºåÂèØËÉΩ‰∏ç‰øùÂ≠òÁõ∏ÂÖ≥‰ø°ÊÅØÔºåÂπ∂ËøÖÈÄüÁªàÊ≠¢webÊúçÂä°„ÄÇnginx -s quit ÔºöÂπ≥Á®≥ÂÖ≥Èó≠NginxÔºå‰øùÂ≠òÁõ∏ÂÖ≥‰ø°ÊÅØÔºåÊúâÂÆâÊéíÁöÑÁªìÊùüwebÊúçÂä°„ÄÇnginx -s reload ÔºöÂõ†ÊîπÂèò‰∫ÜNginxÁõ∏ÂÖ≥ÈÖçÁΩÆÔºåÈúÄË¶ÅÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆËÄåÈáçËΩΩ„ÄÇnginx -s reopen ÔºöÈáçÊñ∞ÊâìÂºÄÊó•ÂøóÊñá‰ª∂„ÄÇnginx -c filename Ôºö‰∏∫ Nginx ÊåáÂÆö‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂ÔºåÊù•‰ª£ÊõøÁº∫ÁúÅÁöÑ„ÄÇnginx -t Ôºö‰∏çËøêË°åÔºåËÄå‰ªÖ‰ªÖÊµãËØïÈÖçÁΩÆÊñá‰ª∂„ÄÇnginx Â∞ÜÊ£ÄÊü•ÈÖçÁΩÆÊñá‰ª∂ÁöÑËØ≠Ê≥ïÁöÑÊ≠£Á°ÆÊÄßÔºåÂπ∂Â∞ùËØïÊâìÂºÄÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊâÄÂºïÁî®Âà∞ÁöÑÊñá‰ª∂„ÄÇnginx -vÔºöÊòæÁ§∫ nginx ÁöÑÁâàÊú¨„ÄÇnginx -VÔºöÊòæÁ§∫ nginx ÁöÑÁâàÊú¨ÔºåÁºñËØëÂô®ÁâàÊú¨ÂíåÈÖçÁΩÆÂèÇÊï∞„ÄÇ Â¶ÇÊûú‰∏çÊÉ≥ÊØèÊ¨°ÈÉΩÊï≤ÂëΩ‰ª§ÔºåÂèØ‰ª•Âú®nginxÂÆâË£ÖÁõÆÂΩï‰∏ãÊñ∞Ê∑ª‰∏Ä‰∏™ÂêØÂä®ÊâπÂ§ÑÁêÜÊñá‰ª∂startup.batÔºåÂèåÂáªÂç≥ÂèØËøêË°å„ÄÇÂÜÖÂÆπÂ¶Ç‰∏ãÔºö Â¶ÇÊûúÊòØËøêË°åÂú® Linux ‰∏ãÔºåÂÜô‰∏Ä‰∏™ shell ËÑöÊú¨ÔºåÂ§ßÂêåÂ∞èÂºÇ„ÄÇ nginx ÈÖçÁΩÆÂÆûÊàòÊàëÂßãÁªàËÆ§‰∏∫ÔºåÂêÑÁßçÂºÄÂèëÂ∑•ÂÖ∑ÁöÑÈÖçÁΩÆËøòÊòØÁªìÂêàÂÆûÊàòÊù•ËÆ≤Ëø∞Ôºå‰ºöËÆ©‰∫∫Êõ¥ÊòìÁêÜËß£„ÄÇ httpÂèçÂêë‰ª£ÁêÜÈÖçÁΩÆ Êàë‰ª¨ÂÖàÂÆûÁé∞‰∏Ä‰∏™Â∞èÁõÆÊ†áÔºö‰∏çËÄÉËôëÂ§çÊùÇÁöÑÈÖçÁΩÆÔºå‰ªÖ‰ªÖÊòØÂÆåÊàê‰∏Ä‰∏™ http ÂèçÂêë‰ª£ÁêÜ„ÄÇ nginx.conf ÈÖçÁΩÆÊñá‰ª∂Â¶Ç‰∏ãÔºö Ê≥®Ôºöconf / nginx.conf ÊòØ nginx ÁöÑÈªòËÆ§ÈÖçÁΩÆÊñá‰ª∂„ÄÇ‰Ω†‰πüÂèØ‰ª•‰ΩøÁî® nginx -c ÊåáÂÆö‰Ω†ÁöÑÈÖçÁΩÆÊñá‰ª∂ Â•Ω‰∫ÜÔºåËÆ©Êàë‰ª¨Êù•ËØïËØïÂêßÔºö ÂêØÂä® webappÔºåÊ≥®ÊÑèÂêØÂä®ÁªëÂÆöÁöÑÁ´ØÂè£Ë¶ÅÂíånginx‰∏≠ÁöÑ upstream ËÆæÁΩÆÁöÑÁ´ØÂè£‰øùÊåÅ‰∏ÄËá¥„ÄÇ Êõ¥Êîπ hostÔºö Âú® C:Windows\\System32\\drivers\\etc ÁõÆÂΩï‰∏ãÁöÑhostÊñá‰ª∂‰∏≠Ê∑ªÂä†‰∏ÄÊù°DNS ËÆ∞ÂΩï127.0.0.1 www.javastack.cn ÂêØÂä®ÂâçÊñá‰∏≠ startup.bat ÁöÑÂëΩ‰ª§ Âú®ÊµèËßàÂô®‰∏≠ËÆøÈóÆ www.javastack.cnÔºå‰∏çÂá∫ÊÑèÂ§ñÔºåÂ∑≤ÁªèÂèØ‰ª•ËÆøÈóÆ‰∫Ü„ÄÇ Ë¥üËΩΩÂùáË°°ÈÖçÁΩÆ ‰∏ä‰∏Ä‰∏™‰æãÂ≠ê‰∏≠Ôºå‰ª£ÁêÜ‰ªÖ‰ªÖÊåáÂêë‰∏Ä‰∏™ÊúçÂä°Âô®„ÄÇ ‰ΩÜÊòØÔºåÁΩëÁ´ôÂú®ÂÆûÈôÖËøêËê•ËøáÁ®ã‰∏≠ÔºåÂ§öÂçäÈÉΩÊòØÊúâÂ§öÂè∞ÊúçÂä°Âô®ËøêË°åÁùÄÂêåÊ†∑ÁöÑappÔºåËøôÊó∂ÈúÄË¶Å‰ΩøÁî®Ë¥üËΩΩÂùáË°°Êù•ÂàÜÊµÅ„ÄÇ nginx‰πüÂèØ‰ª•ÂÆûÁé∞ÁÆÄÂçïÁöÑË¥üËΩΩÂùáË°°ÂäüËÉΩ„ÄÇ ÂÅáËÆæËøôÊ†∑‰∏Ä‰∏™Â∫îÁî®Âú∫ÊôØÔºöÂ∞ÜÂ∫îÁî®ÈÉ®ÁΩ≤Âú® 192.168.1.11:80„ÄÅ192.168.1.12:80„ÄÅ192.168.1.13:80 ‰∏âÂè∞linuxÁéØÂ¢ÉÁöÑÊúçÂä°Âô®‰∏ä„ÄÇÁΩëÁ´ôÂüüÂêçÂè´ www.javastack.cnÔºåÂÖ¨ÁΩëIP‰∏∫ 192.168.1.11„ÄÇÂú®ÂÖ¨ÁΩëIPÊâÄÂú®ÁöÑÊúçÂä°Âô®‰∏äÈÉ®ÁΩ≤ nginxÔºåÂØπÊâÄÊúâËØ∑Ê±ÇÂÅöË¥üËΩΩÂùáË°°Â§ÑÁêÜ„ÄÇ nginx.conf ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö ÁΩëÁ´ôÊúâÂ§ö‰∏™webappÁöÑÈÖçÁΩÆ ÂΩì‰∏Ä‰∏™ÁΩëÁ´ôÂäüËÉΩË∂äÊù•Ë∂ä‰∏∞ÂØåÊó∂ÔºåÂæÄÂæÄÈúÄË¶ÅÂ∞Ü‰∏Ä‰∫õÂäüËÉΩÁõ∏ÂØπÁã¨Á´ãÁöÑÊ®°ÂùóÂâ•Á¶ªÂá∫Êù•ÔºåÁã¨Á´ãÁª¥Êä§„ÄÇËøôÊ†∑ÁöÑËØùÔºåÈÄöÂ∏∏Ôºå‰ºöÊúâÂ§ö‰∏™ webapp„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöÂÅáÂ¶Ç www.javastack.cn Á´ôÁÇπÊúâÂ•ΩÂá†‰∏™webappÔºåfinanceÔºàÈáëËûçÔºâ„ÄÅproductÔºà‰∫ßÂìÅÔºâ„ÄÅadminÔºàÁî®Êà∑‰∏≠ÂøÉÔºâ„ÄÇËÆøÈóÆËøô‰∫õÂ∫îÁî®ÁöÑÊñπÂºèÈÄöËøá‰∏ä‰∏ãÊñá(context)Êù•ËøõË°åÂå∫ÂàÜ: www.javastack.cn/finance/ www.javastack.cnproduct/ www.javastack.cn/admin/ Êàë‰ª¨Áü•ÈÅìÔºåhttpÁöÑÈªòËÆ§Á´ØÂè£Âè∑ÊòØ80ÔºåÂ¶ÇÊûúÂú®‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÂêåÊó∂ÂêØÂä®Ëøô3‰∏™ webapp Â∫îÁî®ÔºåÈÉΩÁî®80Á´ØÂè£ÔºåËÇØÂÆöÊòØ‰∏çÊàêÁöÑ„ÄÇÊâÄ‰ª•ÔºåËøô‰∏â‰∏™Â∫îÁî®ÈúÄË¶ÅÂàÜÂà´ÁªëÂÆö‰∏çÂêåÁöÑÁ´ØÂè£Âè∑„ÄÇ ÈÇ£‰πàÔºåÈóÆÈ¢òÊù•‰∫ÜÔºåÁî®Êà∑Âú®ÂÆûÈôÖËÆøÈóÆ www.javastack.cn Á´ôÁÇπÊó∂ÔºåËÆøÈóÆ‰∏çÂêå webappÔºåÊÄª‰∏ç‰ºöËøòÂ∏¶ÁùÄÂØπÂ∫îÁöÑÁ´ØÂè£Âè∑ÂéªËÆøÈóÆÂêß„ÄÇÊâÄ‰ª•Ôºå‰Ω†ÂÜçÊ¨°ÈúÄË¶ÅÁî®Âà∞ÂèçÂêë‰ª£ÁêÜÊù•ÂÅöÂ§ÑÁêÜ„ÄÇ ÈÖçÁΩÆ‰πü‰∏çÈöæÔºåÊù•ÁúãÁúãÊÄé‰πàÂÅöÂêßÔºöhttpsÂèçÂêë‰ª£ÁêÜÈÖçÁΩÆ ‰∏Ä‰∫õÂØπÂÆâÂÖ®ÊÄßË¶ÅÊ±ÇÊØîËæÉÈ´òÁöÑÁ´ôÁÇπÔºåÂèØËÉΩ‰ºö‰ΩøÁî® HTTPSÔºà‰∏ÄÁßç‰ΩøÁî®sslÈÄö‰ø°Ê†áÂáÜÁöÑÂÆâÂÖ®HTTPÂçèËÆÆÔºâ„ÄÇ ËøôÈáå‰∏çÁßëÊôÆ HTTP ÂçèËÆÆÂíå SSL Ê†áÂáÜ„ÄÇ‰ΩÜÊòØÔºå‰ΩøÁî® nginx ÈÖçÁΩÆ https ÈúÄË¶ÅÁü•ÈÅìÂá†ÁÇπÔºö HTTPS ÁöÑÂõ∫ÂÆöÁ´ØÂè£Âè∑ÊòØ 443Ôºå‰∏çÂêå‰∫é HTTP ÁöÑ 80 Á´ØÂè£ SSL Ê†áÂáÜÈúÄË¶ÅÂºïÂÖ•ÂÆâÂÖ®ËØÅ‰π¶ÔºåÊâÄ‰ª•Âú® nginx.conf ‰∏≠‰Ω†ÈúÄË¶ÅÊåáÂÆöËØÅ‰π¶ÂíåÂÆÉÂØπÂ∫îÁöÑ key ÂÖ∂‰ªñÂíå http ÂèçÂêë‰ª£ÁêÜÂü∫Êú¨‰∏ÄÊ†∑ÔºåÂè™ÊòØÂú® Server ÈÉ®ÂàÜÈÖçÁΩÆÊúâ‰∫õ‰∏çÂêå„ÄÇ ÈùôÊÄÅÁ´ôÁÇπÈÖçÁΩÆ ÊúâÊó∂ÂÄôÔºåÊàë‰ª¨ÈúÄË¶ÅÈÖçÁΩÆÈùôÊÄÅÁ´ôÁÇπ(Âç≥ html Êñá‰ª∂Âíå‰∏ÄÂ†ÜÈùôÊÄÅËµÑÊ∫ê)„ÄÇ ‰∏æ‰æãÊù•ËØ¥ÔºöÂ¶ÇÊûúÊâÄÊúâÁöÑÈùôÊÄÅËµÑÊ∫êÈÉΩÊîæÂú®‰∫Ü /app/dist ÁõÆÂΩï‰∏ãÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂú® nginx.conf ‰∏≠ÊåáÂÆöÈ¶ñÈ°µ‰ª•ÂèäËøô‰∏™Á´ôÁÇπÁöÑ host Âç≥ÂèØ„ÄÇ ÈÖçÁΩÆÂ¶Ç‰∏ãÔºöÁÑ∂ÂêéÔºåÊ∑ªÂä† HOSTÔºö 127.0.0.1 static.zp.cnÔºåÊ≠§Êó∂ÔºåÂú®Êú¨Âú∞ÊµèËßàÂô®ËÆøÈóÆ static.zp.cn ÔºåÂ∞±ÂèØ‰ª•ËÆøÈóÆÈùôÊÄÅÁ´ôÁÇπ‰∫Ü„ÄÇ Ë∑®ÂüüËß£ÂÜ≥ÊñπÊ°à web È¢ÜÂüüÂºÄÂèë‰∏≠ÔºåÁªèÂ∏∏ÈááÁî®ÂâçÂêéÁ´ØÂàÜÁ¶ªÊ®°Âºè„ÄÇËøôÁßçÊ®°Âºè‰∏ãÔºåÂâçÁ´ØÂíåÂêéÁ´ØÂàÜÂà´ÊòØÁã¨Á´ãÁöÑ web Â∫îÁî®Á®ãÂ∫èÔºå‰æãÂ¶ÇÔºöÂêéÁ´ØÊòØ Java Á®ãÂ∫èÔºåÂâçÁ´ØÊòØ React Êàñ Vue Â∫îÁî® ÂêÑËá™Áã¨Á´ãÁöÑ web app Âú®‰∫íÁõ∏ËÆøÈóÆÊó∂ÔºåÂäøÂøÖÂ≠òÂú®Ë∑®ÂüüÈóÆÈ¢ò„ÄÇËß£ÂÜ≥Ë∑®ÂüüÈóÆÈ¢ò‰∏ÄËà¨Êúâ‰∏§ÁßçÊÄùË∑ØÔºö CORS Âú®ÂêéÁ´ØÊúçÂä°Âô®ËÆæÁΩÆ HTTP ÂìçÂ∫îÂ§¥ÔºåÊää‰Ω†ÈúÄË¶ÅËøêË°åËÆøÈóÆÁöÑÂüüÂêçÂä†ÂÖ•Âä†ÂÖ• Access-Control-Allow-Origin ‰∏≠„ÄÇ jsonp ÊääÂêéÁ´ØÊ†πÊçÆËØ∑Ê±ÇÔºåÊûÑÈÄ†jsonÊï∞ÊçÆÔºåÂπ∂ËøîÂõûÔºåÂâçÁ´ØÁî® jsonp Ë∑®Âüü„ÄÇ Ëøô‰∏§ÁßçÊÄùË∑ØÔºåÊú¨Êñá‰∏çÂ±ïÂºÄËÆ®ËÆ∫„ÄÇ ÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºånginx Ê†πÊçÆÁ¨¨‰∏ÄÁßçÊÄùË∑ØÔºå‰πüÊèê‰æõ‰∫Ü‰∏ÄÁßçËß£ÂÜ≥Ë∑®ÂüüÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ ‰∏æ‰æãÔºöwww.javastack.cn ÁΩëÁ´ôÊòØÁî±‰∏Ä‰∏™ÂâçÁ´Ø app Ôºå‰∏Ä‰∏™ÂêéÁ´Ø app ÁªÑÊàêÁöÑ„ÄÇÂâçÁ´ØÁ´ØÂè£Âè∑‰∏∫ 9000Ôºå ÂêéÁ´ØÁ´ØÂè£Âè∑‰∏∫ 8080„ÄÇ ÂâçÁ´ØÂíåÂêéÁ´ØÂ¶ÇÊûú‰ΩøÁî® http ËøõË°å‰∫§‰∫íÊó∂ÔºåËØ∑Ê±Ç‰ºöË¢´ÊãíÁªùÔºåÂõ†‰∏∫Â≠òÂú®Ë∑®ÂüüÈóÆÈ¢ò„ÄÇÊù•ÁúãÁúãÔºånginx ÊòØÊÄé‰πàËß£ÂÜ≥ÁöÑÂêßÔºö È¶ñÂÖàÔºåÂú® enable-cors.conf Êñá‰ª∂‰∏≠ËÆæÁΩÆ cors ÔºöÊé•‰∏ãÊù•ÔºåÂú®‰Ω†ÁöÑÊúçÂä°Âô®‰∏≠ include enable-cors.conf Êù•ÂºïÂÖ•Ë∑®ÂüüÈÖçÁΩÆÔºöÂà∞Ê≠§ÔºåÂ∞±ÂÆåÊàê‰∫Ü„ÄÇ","link":"/ÁºñÁ®ã/Linux/nginx/"},{"title":"centos 6.5 ÁΩëÁ´ôÂª∫ËÆæ","text":"Step 1„ÄÅ‰∏∫centosÈÖçÁΩÆrpmforgeÂèäepelÊ∫ê„ÄÇcentosÂÆòÊñπÁöÑÊ∫êÂÖ∂ÂÆû‰πüÂ§üÁî®Ôºå‰∏çËøáÂÉèphpÁöÑ‰∏Ä‰∫õÊâ©Â±ïÂ¶Ç php-mcryptÂú®ÂÆòÊñπÊ∫ê‰∏≠Âπ∂Ê≤°Êúâ„ÄÇ12rpm -ivh https://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el7.rf.x86_64.rpm 12rpm -ivh https://mirrors.ustc.edu.cn/centos/6.5/extras/x86_64/Packages/epel-release-6-8.noarch.rpm 12rpm -ivh https://mirrors.163.com/centos/7/extras/x86_64/Packages/epel-release-7-2.noarch.rpm Step 2. ÂÆâË£Öphp/mysql/httpdÂÆâË£Öapacheyum -y install httpd httpd-devel ÂÆâË£Ömysqlyum -y install mysql mysql-devel mysql-server mysql-libs ÂÆâË£Öphpyum -y install php ÂÆâË£ÖphpÊâ©Â±ï123yum -y install php-mysql php-gd php-imap php-ldap php-odbc php-mbstring php-devel php-soap php-cli php-pdoyum -y install php-mcrypt php-tidy php-xml php-xmlrpc php-pear ÂÖ∂ÂÆÉ‰∏çÂ∏∏Áî®phpÊâ©Â±ï, www.linuxidc.com ÂèØ‰∏çÁî®ÂÆâË£Öyum -y install php-pecl-memcache php-eaccelerator ÂÆâË£Öphpmyadminyum -y install phpmyadmin ÂÆâË£ÖÂÆåÊàê‰πãÂêéÔºåÂêØÂä®12service httpd startservice mysqld start Step 3.ÈÖçÁΩÆhttpd„ÄÅmysqldÂºÄÊú∫Ëá™ÂêØÂä®12chkconfig mysqld onchkconfig httpd on Step 4.ÈÖçÁΩÆphpmyadmin‰øÆÊîπ/usr/share/phpmyadmin/config.inc.phpÂ∞ÜËøôÈáåabcdeÊñáÂ≠ó‰øÆÊîπ‰∏∫Ëá™Â∑±ÁöÑÂ≠óÁ¨¶ÔºåÂèØ‰ªªÊÑè$cfg['blowfish_secret'] = 'abcde'; Â∏∏ËßÅÈóÆÈ¢ò1. phpmyadminÊèêÁ§∫Êú™ÂºÄÂêØphp-mcrypt,ËøôÊòØÂõ†‰∏∫Ê≤°ÊúâÂÆâË£Öphp-mrcrptÊâ©Â±ï„ÄÇÂú®ÂÆòÊñπÊ∫êÊ≤°Êúâphp-mrcrptÊâ©Â±ïÔºåËØ∑ÂÆâË£ÖepelÊ∫êÂêéÂÜçyum install php-mcrypt 2. phpmyadminÊó†Ê≥ïËÆøÈóÆphpmyadminÈªòËÆ§Âè™ËÉΩ‰ΩøÁî® https://localhost/phpmyadmin Êù•ËÆøÈóÆÔºåÂèØ‰ª•‰øÆÊîπ/etc/httpd/conf.d/phpmyadmin.conf‰∏≠ÂØπÂ∫îÈÉ®ÂàÜ‰∏∫ 12345&lt;Directory &quot;/usr/share/phpmyadmin&quot;&gt;Order Deny,AllowDeny from allAllow from All&lt;/Directory&gt; ‰∏çËøáÂº∫ÁÉà‰∏çÊîØÊåÅËøô‰πàÂÅöÁöÑÔºåÊääphpmyadminÊö¥Èú≤‰∫Ü‰∏çÂÆâÂÖ®Ê≥®ÊÑèÔºöapacheËß£ÊûêphpÔºå‰øÆÊîπhttpd.confÊñá‰ª∂ÔºåÊ∑ªÂä† 12Addtype application/x-httpd-php .php .phtmlAddtype application/x-httpd-php-source .phps myqlÂèØ‰ª•ËøúÁ®ãÁôªÂΩïËÆæÁΩÆmysqlÂØÜÁ†Å 123mysql&gt;; USE mysql;mysql&gt;; UPDATE user SET Password=PASSWORD(&apos;newpassword&apos;) WHERE user=&apos;root&apos;;mysql&gt;; FLUSH PRIVILEGES; 1.2.3 ÂÖÅËÆ∏ËøúÁ®ãÁôªÂΩï 1234mysql -u root -pEnter Password: &lt;your new password&gt;mysql&gt;GRANT ALL PRIVILEGES ON *.* TO &apos;Áî®Êà∑Âêç&apos;@&apos;%&apos; IDENTIFIED BY &apos;ÂØÜÁ†Å&apos; WITHGRANT OPTION; ÂÆåÊàêÂêéÂ∞±ËÉΩÁî®mysql-frontËøúÁ®ãÁÆ°ÁêÜmysql‰∫Ü„ÄÇËÆæ‰∏∫ÂºÄÊú∫ÂêØÂä®chkconfig mysqld on","link":"/ÁºñÁ®ã/Linux/centos/"},{"title":"Linux","text":"","link":"/ÁºñÁ®ã/Linux/linux/"},{"title":"gitÂ¶Ç‰ΩïÂà†Èô§Â∑≤ÁªèÊèê‰∫§ÁöÑÊñá‰ª∂Â§π","text":"Âú®‰∏ä‰º†È°πÁõÆÂà∞githubÊó∂,ÂøòËÆ∞ÂøΩÁï•‰∫ÜÊüê‰∏™Êñá‰ª∂Â§π.idea,Â∞±Áõ¥Êé•push‰∏äÂéª‰∫Ü, ÊúÄÂêéÊÑèËØÜÂà∞‰∫ÜÊ≠§ÈóÆÈ¢ò,ÂÜ≥ÂÆöÂà†Èô§ÊéâËøúÁ®ã‰ªìÂ∫ì‰∏≠ÁöÑ.ideaÊñá‰ª∂Â§π Âú®github‰∏äÂè™ËÉΩÂà†Èô§‰ªìÂ∫ì,Âç¥Êó†Ê≥ïÂà†Èô§Êñá‰ª∂Â§πÊàñÊñá‰ª∂, ÊâÄ‰ª•Âè™ËÉΩÈÄöËøáÂëΩ‰ª§Êù•Ëß£ÂÜ≥ È¶ñÂÖàËøõÂÖ•‰Ω†ÁöÑmasterÊñá‰ª∂Â§π‰∏ã, Git Bash Here ,ÊâìÂºÄÂëΩ‰ª§Á™óÂè£ $ git --help # Â∏ÆÂä©ÂëΩ‰ª§ $ git pull origin master # Â∞ÜËøúÁ®ã‰ªìÂ∫ìÈáåÈù¢ÁöÑÈ°πÁõÆÊãâ‰∏ãÊù• $ ls # Êü•ÁúãÊúâÂì™‰∫õÊñá‰ª∂Â§π $ git rm -r --cached .idea # Âà†Èô§.ideaÊñá‰ª∂Â§π $ git commit -m 'Âà†Èô§.idea' # Êèê‰∫§,Ê∑ªÂä†Êìç‰ΩúËØ¥Êòé $ git push -u origin master # Â∞ÜÊú¨Ê¨°Êõ¥ÊîπÊõ¥Êñ∞Âà∞githubÈ°πÁõÆ‰∏äÂéª ‰ΩúËÄÖÔºö ÁöÆÁöÆ‰ªä","link":"/ÁºñÁ®ã/Git/git-del/"},{"title":"GIT","text":"ÂêåÁîüÊ¥ª‰∏≠ÁöÑËÆ∏Â§ö‰ºüÂ§ß‰∫ã‰ª∂‰∏ÄÊ†∑ÔºåGit ËØûÁîü‰∫é‰∏Ä‰∏™ÊûÅÂØåÁ∫∑‰∫âÂ§ß‰∏æÂàõÊñ∞ÁöÑÂπ¥‰ª£„ÄÇLinux ÂÜÖÊ†∏ÂºÄÊ∫êÈ°πÁõÆÊúâÁùÄ‰∏∫Êï∞‰ºóÂπøÁöÑÂèÇ‰∏éËÄÖ„ÄÇÁªùÂ§ßÂ§öÊï∞ÁöÑ Linux ÂÜÖÊ†∏Áª¥Êä§Â∑•‰ΩúÈÉΩËä±Âú®‰∫ÜÊèê‰∫§Ë°•‰∏ÅÂíå‰øùÂ≠òÂΩíÊ°£ÁöÑÁπÅÁêê‰∫ãÂä°‰∏äÔºà1991Ôºç2002Âπ¥Èó¥Ôºâ„ÄÇ ÂæàÂ§ö‰∫∫ÈÉΩÁü•ÈÅìÔºåLinusÂú®1991Âπ¥ÂàõÂª∫‰∫ÜÂºÄÊ∫êÁöÑLinuxÔºå‰ªéÊ≠§ÔºåLinuxÁ≥ªÁªü‰∏çÊñ≠ÂèëÂ±ïÔºåÂ∑≤ÁªèÊàê‰∏∫ÊúÄÂ§ßÁöÑÊúçÂä°Âô®Á≥ªÁªüËΩØ‰ª∂‰∫Ü„ÄÇ Linus Torvalds ËôΩÁÑ∂ÂàõÂª∫‰∫ÜLinuxÔºå‰ΩÜLinuxÁöÑÂ£ÆÂ§ßÊòØÈù†ÂÖ®‰∏ñÁïåÁÉ≠ÂøÉÁöÑÂøóÊÑøËÄÖÂèÇ‰∏éÁöÑÔºåËøô‰πàÂ§ö‰∫∫Âú®‰∏ñÁïåÂêÑÂú∞‰∏∫LinuxÁºñÂÜô‰ª£Á†ÅÔºåÈÇ£LinuxÁöÑ‰ª£Á†ÅÊòØÂ¶Ç‰ΩïÁÆ°ÁêÜÁöÑÂë¢Ôºü ‰∫ãÂÆûÊòØÔºåÂú®2002Âπ¥‰ª•ÂâçÔºå‰∏ñÁïåÂêÑÂú∞ÁöÑÂøóÊÑøËÄÖÊääÊ∫ê‰ª£Á†ÅÊñá‰ª∂ÈÄöËøádiffÁöÑÊñπÂºèÂèëÁªôLinusÔºåÁÑ∂ÂêéÁî±LinusÊú¨‰∫∫ÈÄöËøáÊâãÂ∑•ÊñπÂºèÂêàÂπ∂‰ª£Á†ÅÔºÅ ‰Ω†‰πüËÆ∏‰ºöÊÉ≥Ôºå‰∏∫‰ªÄ‰πàLinus‰∏çÊääLinux‰ª£Á†ÅÊîæÂà∞ÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÈáåÂë¢Ôºü‰∏çÊòØÊúâCVS„ÄÅSVNËøô‰∫õÂÖçË¥πÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÂêóÔºüÂõ†‰∏∫LinusÂùöÂÆöÂú∞ÂèçÂØπCVSÂíåSVNÔºåËøô‰∫õÈõÜ‰∏≠ÂºèÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªü‰∏ç‰ΩÜÈÄüÂ∫¶ÊÖ¢ÔºåËÄå‰∏îÂøÖÈ°ªËÅîÁΩëÊâçËÉΩ‰ΩøÁî®„ÄÇÊúâ‰∏Ä‰∫õÂïÜÁî®ÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÔºåËôΩÁÑ∂ÊØîCVS„ÄÅSVNÂ•ΩÁî®Ôºå‰ΩÜÈÇ£ÊòØ‰ªòË¥πÁöÑÔºåÂíåLinuxÁöÑÂºÄÊ∫êÁ≤æÁ•û‰∏çÁ¨¶„ÄÇ ‰∏çËøáÔºåÂà∞‰∫Ü2002Âπ¥ÔºåLinuxÁ≥ªÁªüÂ∑≤ÁªèÂèëÂ±ï‰∫ÜÂçÅÂπ¥‰∫ÜÔºå‰ª£Á†ÅÂ∫ì‰πãÂ§ßËÆ©LinusÂæàÈöæÁªßÁª≠ÈÄöËøáÊâãÂ∑•ÊñπÂºèÁÆ°ÁêÜ‰∫ÜÔºåÁ§æÂå∫ÁöÑÂºüÂÖÑ‰ª¨‰πüÂØπËøôÁßçÊñπÂºèË°®Ëææ‰∫ÜÂº∫ÁÉà‰∏çÊª°Ôºå‰∫éÊòØLinusÈÄâÊã©‰∫Ü‰∏Ä‰∏™ÂïÜ‰∏öÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªüBitKeeperÔºåBitKeeperÁöÑ‰∏úÂÆ∂BitMoverÂÖ¨Âè∏Âá∫‰∫é‰∫∫ÈÅì‰∏ª‰πâÁ≤æÁ•ûÔºåÊéàÊùÉLinuxÁ§æÂå∫ÂÖçË¥π‰ΩøÁî®Ëøô‰∏™ÁâàÊú¨ÊéßÂà∂Á≥ªÁªü„ÄÇ ÂÆâÂÆöÂõ¢ÁªìÁöÑÂ§ßÂ•ΩÂ±ÄÈù¢Âú®2005Âπ¥Â∞±Ë¢´ÊâìÁ†¥‰∫ÜÔºåÂéüÂõ†ÊòØLinuxÁ§æÂå∫Áâõ‰∫∫ËÅöÈõÜÔºå‰∏çÂÖçÊ≤æÊüì‰∫Ü‰∏Ä‰∫õÊ¢ÅÂ±±Â•ΩÊ±âÁöÑÊ±üÊπñ‰π†Ê∞î„ÄÇÂºÄÂèëSambaÁöÑAndrewËØïÂõæÁ†¥Ëß£BitKeeperÁöÑÂçèËÆÆÔºàËøô‰πàÂπ≤ÁöÑÂÖ∂ÂÆû‰πü‰∏çÂè™‰ªñ‰∏Ä‰∏™ÔºâÔºåË¢´BitMoverÂÖ¨Âè∏ÂèëÁé∞‰∫ÜÔºàÁõëÊéßÂ∑•‰ΩúÂÅöÂæó‰∏çÈîôÔºÅÔºâÔºå‰∫éÊòØBitMoverÂÖ¨Âè∏ÊÄí‰∫ÜÔºåË¶ÅÊî∂ÂõûLinuxÁ§æÂå∫ÁöÑÂÖçË¥π‰ΩøÁî®ÊùÉ„ÄÇ LinusÂèØ‰ª•ÂêëBitMoverÂÖ¨Âè∏ÈÅì‰∏™Ê≠âÔºå‰øùËØÅ‰ª•Âêé‰∏•Ê†ºÁÆ°ÊïôÂºüÂÖÑ‰ª¨ÔºåÂóØÔºåËøôÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇ ÂºÄÂèë BitKeeper ÁöÑÂïÜ‰∏öÂÖ¨Âè∏Âêå Linux ÂÜÖÊ†∏ÂºÄÊ∫êÁ§æÂå∫ÁöÑÂêà‰ΩúÂÖ≥Á≥ªÁªìÊùüÔºå‰ªñ‰ª¨Êî∂Âõû‰∫ÜÂÖçË¥π‰ΩøÁî® BitKeeper ÁöÑÊùÉÂäõ„ÄÇËøôÂ∞±Ëø´‰Ωø Linux ÂºÄÊ∫êÁ§æÂå∫ÔºàÁâπÂà´ÊòØ Linux ÁöÑÁºîÈÄ†ËÄÖ Linus Torvalds Ôºâ‰∏çÂæó‰∏çÂê∏ÂèñÊïôËÆ≠ÔºåÂè™ÊúâÂºÄÂèë‰∏ÄÂ•óÂ±û‰∫éËá™Â∑±ÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÊâç‰∏çËá≥‰∫éÈáçËπàË¶ÜËæô„ÄÇ‰ªñ‰ª¨ÂØπÊñ∞ÁöÑÁ≥ªÁªüÂà∂ËÆ¢‰∫ÜËã•Âπ≤ÁõÆÊ†áÔºö ÈÄüÂ∫¶ ÁÆÄÂçïÁöÑËÆæËÆ° ÂØπÈùûÁ∫øÊÄßÂºÄÂèëÊ®°ÂºèÁöÑÂº∫ÂäõÊîØÊåÅÔºàÂÖÅËÆ∏‰∏äÂçÉ‰∏™Âπ∂Ë°åÂºÄÂèëÁöÑÂàÜÊîØÔºâ ÂÆåÂÖ®ÂàÜÂ∏ÉÂºè ÊúâËÉΩÂäõÈ´òÊïàÁÆ°ÁêÜÁ±ª‰ºº Linux ÂÜÖÊ†∏‰∏ÄÊ†∑ÁöÑË∂ÖÂ§ßËßÑÊ®°È°πÁõÆÔºàÈÄüÂ∫¶ÂíåÊï∞ÊçÆÈáèÔºâ ÊúÄÂêéÂÆûÈôÖÊÉÖÂÜµÊòØËøôÊ†∑ÁöÑÔºöLinusËä±‰∫Ü‰∏§Âë®Êó∂Èó¥Ëá™Â∑±Áî®CÂÜô‰∫Ü‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÔºåËøôÂ∞±ÊòØGitÔºÅ‰∏Ä‰∏™Êúà‰πãÂÜÖÔºåLinuxÁ≥ªÁªüÁöÑÊ∫êÁ†ÅÂ∑≤ÁªèÁî±GitÁÆ°ÁêÜ‰∫ÜÔºÅÁâõÊòØÊÄé‰πàÂÆö‰πâÁöÑÂë¢ÔºüÂ§ßÂÆ∂ÂèØ‰ª•ÊÑüÂèó‰∏Ä‰∏ã„ÄÇ GitËøÖÈÄüÊàê‰∏∫ÊúÄÊµÅË°åÁöÑÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÔºåÂ∞§ÂÖ∂ÊòØ2008Âπ¥ÔºåGitHubÁΩëÁ´ô‰∏äÁ∫ø‰∫ÜÔºåÂÆÉ‰∏∫ÂºÄÊ∫êÈ°πÁõÆÂÖçË¥πÊèê‰æõGitÂ≠òÂÇ®ÔºåÊó†Êï∞ÂºÄÊ∫êÈ°πÁõÆÂºÄÂßãËøÅÁßªËá≥GitHubÔºåÂåÖÊã¨jQueryÔºåPHPÔºåRubyÁ≠âÁ≠â„ÄÇ ÂéÜÂè≤Â∞±ÊòØËøô‰πàÂÅ∂ÁÑ∂ÔºåÂ¶ÇÊûú‰∏çÊòØÂΩìÂπ¥BitMoverÂÖ¨Âè∏Â®ÅËÉÅLinuxÁ§æÂå∫ÔºåÂèØËÉΩÁé∞Âú®Êàë‰ª¨Â∞±Ê≤°ÊúâÂÖçË¥πËÄåË∂ÖÁ∫ßÂ•ΩÁî®ÁöÑGit‰∫Ü„ÄÇ","link":"/ÁºñÁ®ã/Git/git/"},{"title":"DjangoÁ¨îËÆ∞","text":"DjangoÊòØ‰∏Ä‰∏™ÂºÄÊîæÊ∫ê‰ª£Á†ÅÁöÑWebÂ∫îÁî®Ê°ÜÊû∂ÔºåÁî±PythonÂÜôÊàê„ÄÇÈááÁî®‰∫ÜMTVÁöÑÊ°ÜÊû∂Ê®°ÂºèÔºåÂç≥Ê®°ÂûãMÔºåËßÜÂõæVÂíåÊ®°ÁâàT„ÄÇÂÆÉÊúÄÂàùÊòØË¢´ÂºÄÂèëÊù•Áî®‰∫éÁÆ°ÁêÜÂä≥‰º¶ÊñØÂá∫ÁâàÈõÜÂõ¢Êóó‰∏ãÁöÑ‰∏Ä‰∫õ‰ª•Êñ∞ÈóªÂÜÖÂÆπ‰∏∫‰∏ªÁöÑÁΩëÁ´ôÁöÑÔºåÂç≥ÊòØCMSÔºàÂÜÖÂÆπÁÆ°ÁêÜÁ≥ªÁªüÔºâËΩØ‰ª∂„ÄÇÂπ∂‰∫é2005Âπ¥7ÊúàÂú®BSDËÆ∏ÂèØËØÅ‰∏ãÂèëÂ∏É„ÄÇËøôÂ•óÊ°ÜÊû∂ÊòØ‰ª•ÊØîÂà©Êó∂ÁöÑÂêâÊôÆËµõÁàµÂ£´Âêâ‰ªñÊâãDjango ReinhardtÊù•ÂëΩÂêçÁöÑ„ÄÇ ‰∏Ä. ÁâàÊú¨ÈÄâÊã©Django 2.0.x ÊîØÊåÅ Python 3.4, 3.5 Âíå 3.6 ÔºàÊ≥®ÊÑèÔºå‰∏çÂÜçÊîØÊåÅ Python 2Ôºâ ‰∫å. ÂÆâË£Ö Django2.1. Áî® pip Êù•ÂÆâË£Ö 2.1.1 ÈúÄË¶ÅÂÖàÂÆâË£Öpip (1). Linux, Mac OSX, Windows ‰∏ãÈÉΩÂèØÁî® get-pip.py Êù•ÂÆâË£ÖpipÔºöhttps://pip.pypa.io/en/latest/installing.html ÊàñËÄÖÁõ¥Êé•‰∏ãËΩΩÔºöget-pip.py ÁÑ∂ÂêéËøêË°åÂú®ÁªàÁ´ØËøêË°å python get-pip.py Â∞±ÂèØ‰ª•ÂÆâË£Ö pip„ÄÇ Note: ‰πüÂèØ‰ª•‰∏ãËΩΩ pip Ê∫êÁ†ÅÂåÖÔºåËøêË°å python setup.py install ËøõË°åÂÆâË£Ö 2.1.2 Âà©Áî® pip ÂÆâË£Ö Django Ôºàsudo) pip install Django ÊàñËÄÖ (sudo) pip install Django==1.8.16 ÊàñËÄÖ pip install Django==1.11.8 Â¶ÇÊûúÊÉ≥ÂçáÁ∫ß pip ÂèØ‰ª•Áî®Ôºö (sudo) pip install --upgrade pip2.2. ‰∏ãËΩΩÊ∫êÁ†ÅÂÆâË£Ö https://www.djangoproject.com/download/ Â¶ÇÊûúÊòØÊ∫êÁ†ÅÂåÖ, ÊØîÂ¶Ç django-1.11.8.tar.gz 2.2.1 Linux Êàñ Mac ‰∏ã tar -xvf django-1.11.8.tar.gz cd django-1.11.8 (sudo) python setup.py install‰∏â. Ê£ÄÊü•ÊòØÂê¶ÂÆâË£ÖÊàêÂäüÁªàÁ´Ø‰∏äËæìÂÖ• python ,ÁÇπÂáª EnterÔºåËøõË°å python ÁéØÂ¢É &gt;&gt;&gt; import django &gt;&gt;&gt; django.VERSION (1, 11, 8, &apos;final&apos;, 0) &gt;&gt;&gt; &gt;&gt;&gt; django.get_version() &apos;1.11.8&apos;Â¶ÇÊûúËøêË°åÂêéÁúãÂà∞ÁâàÊú¨Âè∑ÔºåÂ∞±ËØÅÊòéÂÆâË£ÖÊàêÂäü‰∫ÜÔºÅ Âõõ. Êê≠Âª∫Â§ö‰∏™‰∫í‰∏çÂπ≤Êâ∞ÁöÑÂºÄÂèëÁéØÂ¢ÉÔºàÂèØÈÄâÔºâÊàë‰ª¨ÊúâÁöÑÊó∂ÂÄô‰ºöÂèëÁé∞Ôºå‰∏Ä‰∏™ÁîµËÑë‰∏äÊúâÂ§ö‰∏™È°πÁõÆÔºå‰∏Ä‰∏™‰æùËµñ Django 1.8ÔºåÂè¶‰∏Ä‰∏™ÊØîËæÉÊóßÁöÑÈ°πÁõÆÂèàË¶ÅÁî® Django 1.5ÔºåËøôÊó∂ÂÄôÊÄé‰πàÂäûÂë¢Ôºü Êàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™‰æùËµñÂåÖÁÆ°ÁêÜÁöÑÂ∑•ÂÖ∑Êù•Â§ÑÁêÜ‰∏çÂêåÁöÑÁéØÂ¢É„ÄÇ 4.1 ËôöÊãüÁéØÂ¢É‰æùËµñÂÆâË£ÖÂºÄÂèë‰ºöÁî® virtualenv Êù•ÁÆ°ÁêÜÂ§ö‰∏™ÂºÄÂèëÁéØÂ¢É Linux/MacOS ‰∏ã virtualenvwrapper ‰ΩøÂæóvirtualenvÂèòÂæóÊõ¥Â•ΩÁî®ÔºåÊâÄ‰ª•Êàë‰ª¨‰∏ÄËµ∑ÂÆâË£Ö‰∫Ü # ÂÆâË£Ö: (sudo) pip install virtualenv virtualenvwrapper‰øÆÊîπ~/.bash_profileÊàñÂÖ∂ÂÆÉÁéØÂ¢ÉÂèòÈáèÁõ∏ÂÖ≥Êñá‰ª∂(Â¶Ç .bashrc ÊàñÁî® ZSH ‰πãÂêéÁöÑ .zshrc)ÔºåÊ∑ªÂä†‰ª•‰∏ãËØ≠Âè• export WORKON_HOME=$HOME/.virtualenvs export PROJECT_HOME=$HOME/workspace source /usr/local/bin/virtualenvwrapper.sh‰øÆÊîπÂêé‰Ωø‰πãÁ´ãÂç≥ÁîüÊïà(‰πüÂèØ‰ª•ÈáçÂêØÁªàÁ´Ø‰Ωø‰πãÁîüÊïà)Ôºö source ~/.bash_profile4.2 ËôöÊãüÁéØÂ¢É‰ΩøÁî®ÊñπÊ≥ïÔºömkvirtualenv zqxtÔºöÂàõÂª∫ËøêË°åÁéØÂ¢Ézqxt workon zqxt: Â∑•‰ΩúÂú® zqxt ÁéØÂ¢É Êàñ ‰ªéÂÖ∂ÂÆÉÁéØÂ¢ÉÂàáÊç¢Âà∞ zqxt ÁéØÂ¢É deactivate: ÈÄÄÂá∫ÁªàÁ´ØÁéØÂ¢É ÂÖ∂ÂÆÉÁöÑÔºö rmvirtualenv ENVÔºöÂà†Èô§ËøêË°åÁéØÂ¢ÉENV mkproject micÔºöÂàõÂª∫micÈ°πÁõÆÂíåËøêË°åÁéØÂ¢Émic mktmpenvÔºöÂàõÂª∫‰∏¥Êó∂ËøêË°åÁéØÂ¢É lsvirtualenv: ÂàóÂá∫ÂèØÁî®ÁöÑËøêË°åÁéØÂ¢É lssitepackages: ÂàóÂá∫ÂΩìÂâçÁéØÂ¢ÉÂÆâË£Ö‰∫ÜÁöÑÂåÖ ÂàõÂª∫ÁöÑÁéØÂ¢ÉÊòØÁã¨Á´ãÁöÑÔºå‰∫í‰∏çÂπ≤Êâ∞ÔºåÊó†ÈúÄsudoÊùÉÈôêÂç≥ÂèØ‰ΩøÁî® pip Êù•ËøõË°åÂåÖÁöÑÁÆ°ÁêÜ„ÄÇ","link":"/ÁºñÁ®ã/Python/django-bi-ji/"},{"title":"DjangoÈÉ®ÁΩ≤‚Äî‚Äîuwsgi+Nginx","text":"Áî®DjangoÂÜô‰∫Ü‰∏™Â∞èÁΩëÁ´ôÔºåÂè™ËÉΩÂú®Ëá™Â∑±Êú¨Âú∞Ë∑ë‰∏ÄË∑ëÔºÅËøôÊÄé‰πàË°åÔºüÂê¨ËØ¥ÂèØ‰ª•ÈÉ®ÁΩ≤Âú®‰∫ëÊúçÂä°Âô®‰∏äÔºåËøôÊ†∑Âà´‰∫∫Â∞±ÂèØ‰ª•ËÆøÈóÆ‰∫Ü! ÁéØÂ¢ÉÔºö 123python3.6centos 7Django1.11 1„ÄÅÊú¨Âú∞Ë∑ëËµ∑Êù•DjangoËøôÈáå‰∏çËÆ≤DjangoÈ°πÁõÆÂÆûÊñΩËøáÁ®ãÔºåÂÅáËÆæ‰Ω†Â∑≤ÁªèÂÜô‰∫Ü‰∏Ä‰∏™DjangoÈ°πÁõÆÔºåÂπ∂‰∏îÂú®Êú¨Âú∞127.0.0.1:8000ËÉΩÂ§üË∑ëËµ∑Êù•„ÄÇÂñèÔºåÁªô‰Ω†‰∏™ÂèÇËÄÉÔºåÈ°πÁõÆÂ§ßÊ¶ÇÈïøËøôÊ†∑Ôºö kindleÁõÆÂΩï‰∏∫ÊàëÂàõÂª∫ÁöÑDjango App 2„ÄÅ‰øÆÊîπÈ°πÁõÆÈÖçÁΩÆ‰πüÂ∞±ÊòØÈ°πÁõÆÁõÆÂΩï‰∏ãÁöÑsettings.pyÊñá‰ª∂Ôºå‰∏ªË¶ÅÂº∫Ë∞ÉÂá†‰∏™Âú∞ÊñπÔºö ‚ë†ÂÖ≥Èó≠DEBUGÊ®°ÂºèÔºö‚ë°‰øÆÊîπALLOWED_HOSTSÔºö‚ë¢ÈÖçÁΩÆÈùôÊÄÅÊñá‰ª∂Â≠òÊîæË∑ØÂæÑÔºö ‰øÆÊîπÂ•ΩÈÖçÁΩÆ‰πãÂêéÊâßË°å:python manage.py collectstaticÂ∞ÜÈ°πÁõÆÁî®Âà∞ÁöÑÈùôÊÄÅÊñá‰ª∂Â§çÂà∂Âà∞È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÁöÑstaticÊñá‰ª∂‰∏≠ 3„ÄÅÂÆâË£ÖuwsgiÂíåNginxËøô‰∏™Ê≤°‰ªÄ‰πàËØ¥ÁöÑ„ÄÇ„ÄÇ„ÄÇÂú®Ëá™Â∑±ÁöÑ‰∫ëÊúçÂä°Âô®‰∏äË£ÖÂ•ΩËøô‰∏§‰∏™Â∑•ÂÖ∑ÂÆâË£ÖÂ•ΩuwsgiÂêéÊúÄÂ•ΩÈ™åËØÅ‰∏Ä‰∏ãÔºåÈ™åËØÅÊñπÊ≥ïÔºöÂàõÂª∫‰∏Ä‰∏™test.pyÊñá‰ª∂Ôºö 1234def application(env, start_response): start_response(&apos;200 OK&apos;, [(&apos;Content-Type&apos;, &apos;text/html&apos;)]) return [b&apos;Hello world!&apos;] #python3 # return [&apos;Hello world!&apos;] #python2 ÂêØÂä®uwsgiÊúçÂä°Âô®Ôºö 1uwsgi --http :8000 --wsgi-file test.py Â¶ÇÊûúÂèØ‰ª•Ê≠£Â∏∏ÂêØÂä®ËÄå‰∏çÊä•ÈîôÈÇ£Â∞±Â∫îËØ•Ê≤°ÈóÆÈ¢òÔºå‰∏çÊîæÂøÉÁöÑËØùÂÜçÂú®ÁªàÁ´ØÈ™åËØÅ‰∏Ä‰∏ãÔºöwget https://127.0.0.1:8000Áúã‰∏Ä‰∏ãËÉΩÂê¶Ê≠£Á°ÆËé∑ÂèñÂÜÖÂÆπ 4„ÄÅÈÖçÁΩÆÈ°πÁõÆÁöÑuwsgiÂú®È°πÁõÆÊâÄÂú®Êñá‰ª∂Â§π‰∏ãÂàõÂª∫uwsgi.iniÈÖçÁΩÆÊñá‰ª∂Ôºå‰πüÂ∞±ÊòØËøôÈáå:Âú®uwsgi.iniÈáåËøõË°åÂ¶Ç‰∏ãÈÖçÁΩÆÔºö 123456789101112131415161718192021222324252627282930[uwsgi]# Django-related settings # ËøôÈáåÁöÑÁ´ØÂè£ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÈúÄË¶ÅËÆæÂÆösocket = 127.0.0.1:8001 # the base directory (full path)# Ëøô‰∏™ÊòØDjangoÈ°πÁõÆÁöÑÊ†πÁõÆÂΩïÔºå‰πüÂ∞±ÊòØÂåÖÂê´AppÁöÑÈÇ£‰∏™ÁõÆÂΩïÔºå‰ªîÁªÜÂØπÁÖß‰∏äÂõæchdir = /home/python/book2kindle # Django s wsgi file# ËøôÈáåÊòØÈ°πÁõÆÂêç(‰∏çÊòØAppÂêç).wsgimodule = book2kindle.wsgi # process-related settings# mastermaster = true # maximum number of worker processesprocesses = 32 # ... with appropriate permissions - may be needed# chmod-socket = 664# clear environment on exitvacuum = true plugin python = true # Ëøô‰∏™ÊòØÈ°πÁõÆÁöÑËôöÊãüpythonÁéØÂ¢ÉÔºåÂ¶ÇÊûúÊ≤°Áî®ËôöÊãüÁéØÂ¢ÉÔºåÂèØ‰ª•‰∏çËÆæÂÆöhome = /home/python/book2kindle_env 5„ÄÅÈÖçÁΩÆÈ°πÁõÆÁöÑnginxÊâæÂà∞nginxÁöÑÈÖçÁΩÆÊñá‰ª∂Â§πÔºåcentos7ÁöÑnginxÈÖçÁΩÆÊñá‰ª∂Âú®/etc/nginx‰∏ãÔºåËØ•Ë∑ØÂæÑ‰∏ãÊúâ‰∏Ä‰∏™nginx.confÊÄªÈÖçÁΩÆÊñá‰ª∂ÔºåËøòÊúâ‰∏§‰∏™Êñá‰ª∂Â§π./conf.d„ÄÅ./default.dÔºåÊàë‰ª¨Â∞Ünginx.confÂ§çÂà∂‰∏Ä‰ªΩÂà∞conf.dÊñá‰ª∂Â§π‰∏ãÔºåÂëΩÂêç‰∏∫nginx.confÔºàÊàñËÄÖÈ°πÁõÆÂêç.confÔºâËøõË°åÂ¶Ç‰∏ã‰øÆÊîπÔºàÊ†πÊçÆ‰∏≠ÊñáÊ≥®ÈáäËøõË°åÁõ∏Â∫îÈÖçÁΩÆÂç≥ÂèØÔºâÔºö 12345678910111213141516171819202122http { upstream django { # Ê≥®ÊÑèËøôÈáåÁöÑserverË¶ÅÂíåuwsgi.iniÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑsocket‰øùÊåÅ‰∏ÄËá¥ server 127.0.0.1:8002; # for a web port socket } server { listen 80; server_name xxx.com; # ËøôÈáåÂ°´Ëá™Â∑±ÁöÑÂüüÂêçÊàñËÄÖÊúçÂä°Âô®ÁöÑipÔºàÂÜ≥ÂÆö‰Ω†‰ªäÂêéËÆøÈóÆÁΩëÁ´ôÁöÑÊñπÂºèÔºâ charset utf-8; root /usr/share/nginx/html; location / { root /home/python/book2kindle/kindle; # ËøôÊòØDjango AppÁöÑË∑ØÂæÑ uwsgi_pass django; include uwsgi_params; # the uwsgi_params file you installed } location /static { # DjangoÈ°πÁõÆÈùôÊÄÅÊñá‰ª∂ÁöÑË∑ØÂæÑ alias /home/python/book2kindle/static; } } } 6„ÄÅÂêØÂä®uwsgiÂíånginxËøõÂÖ•uwsgi.iniÊñá‰ª∂Â§π‰∏ãÊâßË°åÔºöuwsgi --ini uwsgi.iniÂú®ÁªàÁ´ØÊâßË°åÔºöservice nginx restartÁÑ∂ÂêéÂ∞±ÂèØ‰ª•Ê†πÊçÆÂüüÂêçÔºàÂâçÊèêÊòØË¶ÅÂ∞ÜÂüüÂêçËß£ÊûêÂà∞ÊúçÂä°Âô®ipÂú∞ÂùÄÔºâÊàñËÄÖÊúçÂä°Âô®ipÊù•ËÆøÈóÆÁΩëÁ´ô‰∫ÜÔºÅ OKÔºåÂÆå‰∫ãÔºÅÂ∞±ÊòØËøô‰πàÁÆÄÂçïÔºÅ","link":"/ÁºñÁ®ã/Python/django/"},{"title":"MongoDB","text":"MongoDBÊòØ‰∏Ä‰∏™Ë∑®Âπ≥Âè∞ÔºåÈù¢ÂêëÊñáÊ°£ÁöÑÊï∞ÊçÆÂ∫ìÔºåÊèê‰æõÈ´òÊÄßËÉΩÔºåÈ´òÂèØÁî®ÊÄßÂíåÊòì‰∫éÊâ©Â±ï„ÄÇMongoDBÊòØÂ∑•‰ΩúÂú®ÈõÜÂêàÂíåÊñáÊ°£‰∏ä‰∏ÄÁßçÊ¶ÇÂøµ„ÄÇ Êï∞ÊçÆÂ∫ì Êï∞ÊçÆÂ∫ìÊòØ‰∏Ä‰∏™ÈõÜÂêàÁöÑÁâ©ÁêÜÂÆπÂô®„ÄÇÊØè‰∏™Êï∞ÊçÆÂ∫ìËé∑ÂèñÂÖ∂Ëá™Â∑±ËÆæÂÆöÂú®Êñá‰ª∂Á≥ªÁªü‰∏äÁöÑÊñá‰ª∂„ÄÇ‰∏Ä‰∏™Âçï‰∏ÄÁöÑMongoDBÊúçÂä°Âô®ÈÄöÂ∏∏ÊúâÂ§ö‰∏™Êï∞ÊçÆÂ∫ì„ÄÇ ÈõÜÂêà ÈõÜÂêàÊòØ‰∏ÄÁªÑMongoDBÁöÑÊñá‰ª∂„ÄÇÂÆÉ‰∏é‰∏Ä‰∏™RDBMSË°®ÊòØÁ≠âÊïàÁöÑ„ÄÇ‰∏Ä‰∏™ÈõÜÂêàÂ≠òÂú®‰∫éÊï∞ÊçÆÂ∫ì‰∏≠„ÄÇÈõÜÂêà‰∏çÂº∫Âà∂ÊâßË°åÊ®°Âºè„ÄÇÈõÜÂêà‰∏≠ÁöÑÊñáÊ°£ÂèØ‰ª•Êúâ‰∏çÂêåÁöÑÂ≠óÊÆµ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂú®‰∏Ä‰∏™ÈõÜÂêà‰∏≠ÁöÑÊâÄÊúâÊñá‰ª∂ÈÉΩÊòØÁ±ª‰ººÊàñÁõ∏ÂÖ≥ÁõÆÁöÑ„ÄÇ ÊñáÊ°£ ÊñáÊ°£ÊòØ‰∏ÄÁªÑÈîÆÂÄºÂØπ„ÄÇÊñáÊ°£ÂÖ∑ÊúâÂä®ÊÄÅÊ®°Âºè„ÄÇÂä®ÊÄÅÊ®°ÂºèÊòØÊåáÔºåÂú®Âêå‰∏Ä‰∏™ÈõÜÂêàÁöÑÊñá‰ª∂‰∏çÂøÖÂÖ∑ÊúâÁõ∏Âêå‰∏ÄÁªÑÈõÜÂêàÁöÑÊñáÊ°£Â≠óÊÆµÊàñÁªìÊûÑÔºåÂπ∂‰∏îÁõ∏ÂêåÁöÑÂ≠óÊÆµÂèØ‰ª•‰øùÊåÅ‰∏çÂêåÁ±ªÂûãÁöÑÊï∞ÊçÆ„ÄÇ‰∏ãÈù¢ÁªôÂá∫ÁöÑÁ§∫‰æãÊòæÁ§∫‰∫Ü‰∏Ä‰∏™ÂçöÂÆ¢ÁΩëÁ´ôÔºå‰ªÖ‰ªÖÊòØ‰∏Ä‰∏™ÈÄóÂè∑ÂàÜÈöîÁöÑÈîÆÂÄºÂØπÁöÑÊñáÊ°£ÁªìÊûÑ„ÄÇ 1234567891011121314151617181920212223{ _id: ObjectId(7df78ad8902c) title: &apos;MongoDB Overview&apos;, description: &apos;MongoDB is no sql database&apos;, by: &apos;yiibai tutorial&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 100, comments: [ { user:&apos;user1&apos;, message: &apos;My first comment&apos;, dateCreated: new Date(2011,1,20,2,15), like: 0 }, { user:&apos;user2&apos;, message: &apos;My second comments&apos;, dateCreated: new Date(2011,1,25,7,45), like: 5 } ]} ÂàõÂª∫Êï∞ÊçÆÂ∫ì MongoDB use DATABASE_NAME Áî®‰∫éÂàõÂª∫Êï∞ÊçÆÂ∫ì„ÄÇËØ•ÂëΩ‰ª§Â¶ÇÊûúÊï∞ÊçÆÂ∫ì‰∏çÂ≠òÂú®ÔºåÂ∞ÜÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÂ∫ìÔºå Âê¶ÂàôÂ∞ÜËøîÂõûÁé∞ÊúâÁöÑÊï∞ÊçÆÂ∫ì„ÄÇ ËØ≠Ê≥ïuse DATABASEËØ≠Âè•ÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºöuse DATABASE_NAME ‰æãÂ≠êÔºö12345678910111213141516171819Â¶ÇÊûúÊÉ≥ÂàõÂª∫‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂêçÁß∞‰∏∫ &lt;mydb&gt;, ÈÇ£‰πà use DATABASE ËØ≠Âè•Â∫îËØ•Â¶Ç‰∏ãÔºö&gt;use mydbswitched to db mydbË¶ÅÊ£ÄÊü•ÂΩìÂâçÈÄâÊã©ÁöÑÊï∞ÊçÆÂ∫ì‰ΩøÁî®ÂëΩ‰ª§ db&gt;dbmydbÂ¶ÇÊûúÊÉ≥Êü•ËØ¢Êï∞ÊçÆÂ∫ìÂàóË°®ÔºåÈÇ£‰πà‰ΩøÁî®ÂëΩ‰ª§ show dbs.&gt;show dbslocal 0.78125GBtest 0.23012GBÊâÄÂàõÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÔºàmydbÔºâ‰∏çÂ≠òÂú®‰∫éÂàóË°®‰∏≠„ÄÇË¶ÅÊòæÁ§∫ÁöÑÊï∞ÊçÆÂ∫ìÔºåÈúÄË¶ÅËá≥Â∞ëÊèíÂÖ•‰∏Ä‰∏™ÊñáÊ°£ËøõÂéª„ÄÇ&gt;db.movie.insert({&quot;name&quot;:&quot;yiibai tutorials&quot;})&gt;show dbslocal 0.78125GBmydb 0.23012GBtest 0.23012GB MongoDBÁöÑÈªòËÆ§Êï∞ÊçÆÂ∫ìÊòØtest„ÄÇ Â¶ÇÊûúÊ≤°ÊúâÂàõÂª∫‰ªª‰ΩïÊï∞ÊçÆÂ∫ìÔºåÈÇ£‰πàÈõÜÂêàÂ∞ÜË¢´‰øùÂ≠òÂú®ÊµãËØïÊï∞ÊçÆÂ∫ì„ÄÇ Âà†Èô§Êï∞ÊçÆÂ∫ìMongoDB db.dropDatabase() ÂëΩ‰ª§Áî®‰∫éÂà†Èô§Áé∞ÊúâÁöÑÊï∞ÊçÆÂ∫ì„ÄÇ ËØ≠Ê≥ïdropDatabase()Êåá‰ª§ÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºödb.dropDatabase() ËøôÂ∞ÜÂà†Èô§ÈÄâÂÆöÁöÑÊï∞ÊçÆÂ∫ì„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÈÄâÊã©‰ªª‰ΩïÊï∞ÊçÆÂ∫ìÔºåÈÇ£‰πàÂÆÉ‰ºöÂà†Èô§ÈªòËÆ§ÁöÑ‚Äútest‚ÄùÊï∞ÊçÆÂ∫ì ‰æãÂ≠êÔºöÂ¶ÇÊûúÊÉ≥Âà†Èô§Êñ∞ÁöÑÊï∞ÊçÆÂ∫ì , ÈÇ£‰πà dropDatabase() ÂëΩ‰ª§Â∞ÜÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 12345&gt;use mydbswitched to db mydb&gt;db.dropDatabase()&gt;{ &quot;dropped&quot; : &quot;mydb&quot;, &quot;ok&quot; : 1 }&gt; ÂàõÂª∫ÈõÜÂêàMongoDB ÁöÑ db.createCollection(name, options) Áî®‰∫éÂàõÂª∫ÈõÜÂêà„ÄÇ Âú®ÂëΩ‰ª§‰∏≠, name ÊòØË¶ÅÂàõÂª∫ÈõÜÂêàÁöÑÂêçÁß∞„ÄÇ Options ÊòØ‰∏Ä‰∏™ÊñáÊ°£ÔºåÁî®‰∫éÊåáÂÆöÈõÜÂêàÁöÑÈÖçÁΩÆ ÂèÇÊï∞ Á±ªÂûã ÊèèËø∞ Name String Ë¶ÅÂàõÂª∫ÁöÑÈõÜÂêàÁöÑÂêçÁß∞ Options Document ÔºàÂèØÈÄâÔºâÊåáÂÆöÊúâÂÖ≥ÂÜÖÂ≠òÂ§ßÂ∞èÂíåÁ¥¢ÂºïÈÄâÈ°π ÈÄâÈ°πÂèÇÊï∞ÊòØÂèØÈÄâÁöÑÔºåÊâÄ‰ª•ÈúÄË¶ÅÊåáÂÆöÈõÜÂêàÁöÑÂîØ‰∏ÄÂêçÂ≠ó„ÄÇ ËØ≠Ê≥ïcreateCollection()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã 12345&gt;use testswitched to db test&gt;db.createCollection(&quot;mycollection&quot;){ &quot;ok&quot; : 1 }&gt; ÂèØ‰ª•ÈÄöËøá‰ΩøÁî® show collections ÂëΩ‰ª§Êù•Ê£ÄÊü•ÂàõÂª∫ÁöÑÈõÜÂêà 123&gt;show collectionsmycollectionsystem.indexes ÈÄâÈ°πÂàóË°® Â≠óÊÆµ Á±ªÂûã ÊèèËø∞ capped Boolean ÔºàÂèØÈÄâÔºâÂ¶ÇÊûú‰∏∫trueÔºåÂÆÉÂêØÁî®‰∏äÈôêÈõÜÂêà„ÄÇ‰∏äÈôêÈõÜÂêàÊòØ‰∏Ä‰∏™Âõ∫ÂÆöÂ§ßÂ∞èÁöÑÈõÜÂêàÔºåÂΩìÂÆÉËææÂà∞ÂÖ∂ÊúÄÂ§ßÂ∞∫ÂØ∏‰ºöËá™Âä®Ë¶ÜÁõñÊúÄËÄÅÁöÑÊù°ÁõÆ„ÄÇ Â¶ÇÊûúÊåáÂÆötrueÔºåÂàôËøòÈúÄË¶ÅÊåáÂÆöÂèÇÊï∞ÁöÑÂ§ßÂ∞è„ÄÇ autoIndexID Boolean ÔºàÂèØÈÄâÔºâÂ¶ÇÊûú‰∏∫trueÔºåËá™Âä®ÂàõÂª∫Á¥¢Âºï_idÂ≠óÊÆµ„ÄÇÈªòËÆ§ÁöÑÂÄºÊòØ false. size number ÔºàÂèØÈÄâÔºâÊåáÂÆöÁöÑ‰∏äÈôêÈõÜÂêàÂ≠óËäÇÁöÑÊúÄÂ§ßÂ∞∫ÂØ∏„ÄÇÂ¶ÇÊûúcapped ÊòØtrueÔºåÈÇ£‰πàËøòÈúÄË¶ÅÊåáÂÆöËøô‰∏™Â≠óÊÆµ„ÄÇ max number ÔºàÂèØÈÄâÔºâÊåáÂÆö‰∏äÈôêÈõÜÂêàÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÊñá‰ª∂Êï∞„ÄÇ Â∞ΩÁÆ°ÊèíÂÖ•ÊñáÊ°£ÔºåMongoDBÈ¶ñÂÖàÊ£ÄÊü•Â≠óÊÆµÈõÜÂêàÁöÑ‰∏äÈôêÂ§ßÂ∞èÔºåÈÇ£‰πàÂÆÉ‰ºöÊ£ÄÊü•ÊúÄÂ§ßÂ≠óÊÆµ„ÄÇ ËØ≠Ê≥ï :123&gt;db.createCollection(&quot;mycol&quot;, { capped : true, autoIndexID : true, size : 6142800, max : 10000 } ){ &quot;ok&quot; : 1 }&gt; Âú®MongoDB‰∏≠Âπ∂‰∏çÈúÄË¶ÅÂàõÂª∫ÈõÜÂêà„ÄÇ ÂΩìÊèíÂÖ•‰∏Ä‰∫õÊñáÊ°£ MongoDB ‰ºöËá™Âä®ÂàõÂª∫ÈõÜÂêà„ÄÇ 1234567&gt;db.yiibai.insert({&quot;name&quot; : &quot;yiibai&quot;})&gt;show collectionsmycolmycollectionsystem.indexesyiibai&gt; Âà†Èô§ÈõÜÂêàMongoDB ÁöÑ db.collection.drop() Áî®‰∫é‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Âà†Èô§ÈõÜÂêà„ÄÇ ËØ≠Ê≥ïdrop() ÂëΩ‰ª§ÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ãdb.COLLECTION_NAME.drop() ‰æãÂ≠êÔºö‰∏ãÈù¢ÁªôÂá∫ÁöÑ‰æãÂ≠êÂ∞ÜÂà†Èô§ÁªôÂÆöÂêçÁß∞ÁöÑÈõÜÂêàÔºömycollection 12345&gt;use mydbswitched to db mydb&gt;db.mycollection.drop()true&gt; ÊèíÂÖ•ÊñáÊ°£Â∞ÜÊï∞ÊçÆÊèíÂÖ•Âà∞MongoDBÈõÜÂêàÔºåÈúÄË¶Å‰ΩøÁî®MongoDB ÁöÑ insert() ÊñπÊ≥ï„ÄÇ ËØ≠Ê≥ïinsert()ÂëΩ‰ª§ÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö&gt;db.COLLECTION_NAME.insert(document) ‰æãÂ≠ê123456789&gt;db.mycol.insert({ _id: ObjectId(7df78ad8902c), title: &apos;MongoDB Overview&apos;, description: &apos;MongoDB is no sql database&apos;, by: &apos;yiibai tutorials&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 100}) ËøôÈáå mycol ÊòØÊàë‰ª¨ÁöÑÈõÜÂêàÂêçÁß∞ÔºåÂÆÉÊòØÂú®‰πãÂâçÁöÑÊïôÁ®ã‰∏≠ÂàõÂª∫„ÄÇÂ¶ÇÊûúÈõÜÂêà‰∏çÂ≠òÂú®‰∫éÊï∞ÊçÆÂ∫ì‰∏≠ÔºåÈÇ£‰πàMongoDBÂàõÂª∫Ê≠§ÈõÜÂêàÔºåÁÑ∂ÂêéÊèíÂÖ•ÊñáÊ°£ËøõÂéª„ÄÇ Âú®Â¶ÇÊûúÊàë‰ª¨‰∏çÊåáÂÆö_idÂèÇÊï∞ÊèíÂÖ•ÁöÑÊñáÊ°£ÔºåÈÇ£‰πà MongoDB Â∞Ü‰∏∫ÊñáÊ°£ÂàÜÈÖç‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑObjectId„ÄÇ _id ÊòØ12‰∏™Â≠óËäÇÂçÅÂÖ≠ËøõÂà∂Êï∞Âú®‰∏Ä‰∏™ÈõÜÂêàÁöÑÊØè‰∏™ÊñáÊ°£ÊòØÂîØ‰∏ÄÁöÑ„ÄÇ 12‰∏™Â≠óËäÇË¢´ÂàíÂàÜÂ¶Ç‰∏ãÔºö_id: ObjectId(4 bytes timestamp, 3 bytes machine id, 2 bytes process id, 3 bytes incrementer) Ë¶Å‰ª•Âçï‰∏™Êü•ËØ¢ÊèíÂÖ•Â§ö‰∏™ÊñáÊ°£ÔºåÂèØ‰ª•ÈÄöËøáÊñáÊ°£ insert() ÂëΩ‰ª§ÁöÑÊï∞ÁªÑÊñπÂºè„ÄÇ ‰æãÂ≠ê1234567891011121314151617181920212223242526&gt;db.post.insert([{ title: &apos;MongoDB Overview&apos;, description: &apos;MongoDB is no sql database&apos;, by: &apos;yiibai tutorials&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 100},{ title: &apos;NoSQL Database&apos;, description: &apos;NoSQL database doesn&apos;t have tables&apos;, by: &apos;yiibai tutorials&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 20, comments: [ { user:&apos;user1&apos;, message: &apos;My first comment&apos;, dateCreated: new Date(2013,11,10,2,35), like: 0 } ]}]) Êü•ËØ¢ÊñáÊ°£Ë¶Å‰ªéÈõÜÂêàÊü•ËØ¢MongoDBÊï∞ÊçÆÔºåÈúÄË¶Å‰ΩøÁî®MongoDBÁöÑ find()ÊñπÊ≥ï„ÄÇ ËØ≠Ê≥ïfind()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã&gt;db.COLLECTION_NAME.find()find() ÊñπÊ≥ïÂ∞ÜÂú®ÈùûÁªìÊûÑÂåñÁöÑÊñπÂºèÊòæÁ§∫ÊâÄÊúâÁöÑÊñá‰ª∂„ÄÇ Â¶ÇÊûúÊòæÁ§∫ÁªìÊûúÊòØÊ†ºÂºèÂåñÁöÑÔºåÈÇ£‰πàÂèØ‰ª•Áî®pretty() ÊñπÊ≥ï„ÄÇ ËØ≠Ê≥ï&gt;db.mycol.find().pretty() ‰æãÂ≠ê1234567891011&gt;db.mycol.find().pretty(){ &quot;_id&quot;: ObjectId(7df78ad8902c), &quot;title&quot;: &quot;MongoDB Overview&quot;, &quot;description&quot;: &quot;MongoDB is no sql database&quot;, &quot;by&quot;: &quot;yiibai tutorials&quot;, &quot;url&quot;: &quot;https://www.yiibai.com&quot;, &quot;tags&quot;: [&quot;mongodb&quot;, &quot;database&quot;, &quot;NoSQL&quot;], &quot;likes&quot;: &quot;100&quot;}&gt; Èô§‰∫Üfind()ÊñπÊ≥ïËøòÊúâfindOne()ÊñπÊ≥ïÔºå‰ªÖËøîÂõû‰∏Ä‰∏™ÊñáÊ°£„ÄÇ RDBMS WhereÂ≠êÂè•Á≠âÊïà‰∫éMongoDBÊü•ËØ¢ÊñáÊ°£Âú®‰∏Ä‰∫õÊù°‰ª∂ÁöÑÂü∫Á°Ä‰∏äÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊìç‰Ωú Êìç‰Ωú ËØ≠Ê≥ï Á§∫‰æã RDBMSÁ≠âÊïàËØ≠Âè• Equality {&lt;key&gt;:&lt;value&gt;} db.mycol.find({‚Äúby‚Äù:‚Äùyiibai tutorials‚Äù}).pretty() where by = ‚Äòyiibai tutorials‚Äô Less Than {&lt;key&gt;:{$lt:&lt;value&gt;}} db.mycol.find({‚Äúlikes‚Äù:{$lt:50}}).pretty() where likes &lt; 50 Less Than Equals {&lt;key&gt;:{$lte:&lt;value&gt;}} db.mycol.find({‚Äúlikes‚Äù:{$lte:50}}).pretty() where likes &lt;= 50 Greater Than {&lt;key&gt;:{$gt:&lt;value&gt;}} db.mycol.find({‚Äúlikes‚Äù:{$gt:50}}).pretty() where likes &gt; 50 Greater Than Equals {&lt;key&gt;:{$gte:&lt;value&gt;}} db.mycol.find({‚Äúlikes‚Äù:{$gte:50}}).pretty() where likes &gt;= 50 Not Equals {&lt;key&gt;:{$ne:&lt;value&gt;}} db.mycol.find({‚Äúlikes‚Äù:{$ne:50}}).pretty() where likes != 50 AND Âú® MongoDBËØ≠Ê≥ïÂú® find()ÊñπÊ≥ïÔºåÂ¶ÇÊûúÊÇ®‰º†ÈÄíÂ§ö‰∏™ÈîÆÈÄöËøá‚Äù,‚ÄùÂ∞ÜÂÆÉ‰ª¨ÂàÜÂºÄÔºåÈÇ£‰πàMongoDBÂØπÂæÖÂÆÉÂ∞±Â¶ÇANDÊù°‰ª∂‰∏ÄÊ†∑„ÄÇÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö&gt;db.mycol.find({key1:value1, key2:value2}).pretty() ‰æãÂ≠ê‰∏ãÈù¢ÁªôÂá∫ÁöÑ‰æãÂ≠êÂ∞ÜÊòæÁ§∫ÊâÄÊúâÊïôÁ®ãÂê´‚Äúyiibai tutorials‚ÄùÂíåÂÖ∂Ê†áÈ¢òÊòØ‚ÄúMongoDB Overview‚Äù 1234567891011&gt;db.mycol.find({&quot;by&quot;:&quot;yiibai tutorials&quot;,&quot;title&quot;: &quot;MongoDB Overview&quot;}).pretty(){ &quot;_id&quot;: ObjectId(7df78ad8902c), &quot;title&quot;: &quot;MongoDB Overview&quot;, &quot;description&quot;: &quot;MongoDB is no sql database&quot;, &quot;by&quot;: &quot;yiibai tutorials&quot;, &quot;url&quot;: &quot;https://www.yiibai.com&quot;, &quot;tags&quot;: [&quot;mongodb&quot;, &quot;database&quot;, &quot;NoSQL&quot;], &quot;likes&quot;: &quot;100&quot;}&gt; ÂØπ‰∫é‰∏äÈù¢ÁªôÂá∫ÁöÑ‰æãÂ≠êÁõ∏ÂΩì‰∫éwhereÂ≠êÂè•Ôºö‚Äô where by=‚Äôyiibai tutorials‚Äô AND title=‚ÄôMongoDB Overview‚Äô ‚Äò„ÄÇÂèØ‰ª•‰º†ÈÄí‰ªª‰ΩïÊï∞ÁõÆÁöÑÈîÆ-ÂÄºÂØπÂú®findÂ≠êÂè•„ÄÇ OR Âú® MongoDBËØ≠Ê≥ïË¶ÅÊü•ËØ¢Âü∫‰∫éORÊù°‰ª∂ÁöÑÊñá‰ª∂ÔºåÈúÄË¶Å‰ΩøÁî®$orÂÖ≥ÈîÆÂ≠ó„ÄÇORÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 1234567&gt;db.mycol.find( { $or: [ {key1: value1}, {key2:value2} ] }).pretty() ‰æãÂ≠ê‰∏ãÈù¢ÁªôÂá∫ÁöÑ‰æãÂ≠êÂ∞ÜÊòæÁ§∫ÊâÄÊúâÊí∞ÂÜôÂê´Êúâ ‚Äòyiibai tutorials‚Äô ÊàñÊòØÊ†áÈ¢ò‰∏∫ ‚ÄòMongoDB Overview‚Äô ÁöÑÊïôÁ®ã 1234567891011&gt;db.mycol.find({$or:[{&quot;by&quot;:&quot;tutorials point&quot;},{&quot;title&quot;: &quot;MongoDB Overview&quot;}]}).pretty(){ &quot;_id&quot;: ObjectId(7df78ad8902c), &quot;title&quot;: &quot;MongoDB Overview&quot;, &quot;description&quot;: &quot;MongoDB is no sql database&quot;, &quot;by&quot;: &quot;yiibai tutorials&quot;, &quot;url&quot;: &quot;https://www.yiibai.com&quot;, &quot;tags&quot;: [&quot;mongodb&quot;, &quot;database&quot;, &quot;NoSQL&quot;], &quot;likes&quot;: &quot;100&quot;}&gt; ‰ΩøÁî® AND Âíå OR Âú®‰∏ÄËµ∑‰æãÂ≠ê‰∏ãÈù¢ÁªôÂá∫ÁöÑ‰æãÂ≠êÊòæÁ§∫ÊúâÂñúÊ¨¢Êï∞Â§ß‰∫é100 ÁöÑÊñáÊ°£ÔºåÂÖ∂Ê†áÈ¢òË¶Å‰πàÊòØ ‚ÄòMongoDB Overview‚Äô Êàñ ‚Äòyiibai tutorials‚Äô. Á≠âÊïà‰∫éSQLÁöÑwhereÂ≠êÂè•Ôºö‚Äôwhere likes&gt;10 AND (by = ‚Äòyiibai tutorials‚Äô OR title = ‚ÄòMongoDB Overview‚Äô)‚Äô 1234567891011&gt;db.mycol.find(&quot;likes&quot;: {$gt:10}, $or: [{&quot;by&quot;: &quot;yiibai tutorials&quot;}, {&quot;title&quot;: &quot;MongoDB Overview&quot;}] }).pretty(){ &quot;_id&quot;: ObjectId(7df78ad8902c), &quot;title&quot;: &quot;MongoDB Overview&quot;, &quot;description&quot;: &quot;MongoDB is no sql database&quot;, &quot;by&quot;: &quot;yiibai tutorials&quot;, &quot;url&quot;: &quot;https://www.yiibai.com&quot;, &quot;tags&quot;: [&quot;mongodb&quot;, &quot;database&quot;, &quot;NoSQL&quot;], &quot;likes&quot;: &quot;100&quot;}&gt; Êõ¥Êñ∞ÊñáÊ°£MongoDBÁöÑupdate()Âíåsave()ÊñπÊ≥ïÁî®‰∫éÊõ¥Êñ∞ÊñáÊ°£Âà∞‰∏Ä‰∏™ÈõÜÂêà„ÄÇ update()ÊñπÊ≥ïÂ∞ÜÁé∞ÊúâÁöÑÊñáÊ°£‰∏≠ÁöÑÂÄºÊõ¥Êñ∞ÔºåËÄåsave()ÊñπÊ≥ï‰ΩøÁî®‰º†ÈÄíÂà∞save()ÊñπÊ≥ïÁöÑÊñáÊ°£ÊõøÊç¢Áé∞ÊúâÁöÑÊñáÊ°£„ÄÇ MongoDB Update() ÊñπÊ≥ïËØ≠Ê≥ïupdate()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã 1&gt;db.COLLECTION_NAME.update(SELECTIOIN_CRITERIA, UPDATED_DATA) ‰æãÂ≠êËÄÉËôëmycolÈõÜÂêàÊúâÂ¶Ç‰∏ãÊï∞ÊçÆ„ÄÇ 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞ÜËÆæÁΩÆÂÖ∂Ê†áÈ¢ò‚ÄúMongoDB Overview‚ÄùÁöÑÊñá‰ª∂‰∏∫Êñ∞Ê†áÈ¢ò‰∏∫‚ÄúNew MongoDB Tutorial‚Äù 123456&gt;db.mycol.update({&apos;title&apos;:&apos;MongoDB Overview&apos;},{$set:{&apos;title&apos;:&apos;New MongoDB Tutorial&apos;}})&gt;db.mycol.find(){ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;New MongoDB Tutorial&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Tutorial Overview&quot;}&gt; ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåMongoDBÂ∞ÜÂè™Êõ¥Êñ∞Âçï‰∏ÄÊñá‰ª∂ÔºåÊõ¥Êñ∞Â§öÔºåÈúÄË¶Å‰∏Ä‰∏™ÂèÇÊï∞ ‚Äòmulti‚Äô ËÆæÁΩÆ‰∏∫ true„ÄÇ 1&gt;db.mycol.update({&apos;title&apos;:&apos;MongoDB Overview&apos;},{$set:{&apos;title&apos;:&apos;New MongoDB Tutorial&apos;}},{multi:true}) MongoDB Save() ÊñπÊ≥ïsave() ÊñπÊ≥ïÂèñ‰ª£ÔºåÈÄöËøáÊñ∞ÊñáÊ°£Âà∞ save()ÊñπÊ≥ï ËØ≠Ê≥ïmongodb ÁöÑ save()ÊñπÊ≥ïÂ¶Ç‰∏ãÊâÄÁ§∫ÁöÑÂü∫Êú¨ËØ≠Ê≥ïÔºö&gt;db.COLLECTION_NAME.save({_id:ObjectId(),NEW_DATA}) ‰æãÂ≠ê‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞ÜÊõøÊç¢ËØ•Êñá‰ª∂_id ‚Äò5983548781331adf45ec7‚Äô 12345678910&gt;db.mycol.save( { &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai New Topic&quot;, &quot;by&quot;:&quot;Yiibai Yiibai&quot; })&gt;db.mycol.find(){ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;Yiibai Yiibai New Topic&quot;, &quot;by&quot;:&quot;Yiibai Yiibai&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;}&gt; Âà†Èô§ÊñáÊ°£MongoDB ÁöÑ remove()ÊñπÊ≥ïÁî®‰∫é‰ªéÈõÜÂêà‰∏≠Âà†Èô§ÊñáÊ°£„ÄÇremove()ÊñπÊ≥ïÊé•Âèó‰∏§‰∏™ÂèÇÊï∞„ÄÇ‰∏Ä‰∏™ÊòØÊ†áÂáÜÁº∫Â§±ÔºåÁ¨¨‰∫åÊòØjustOneÊ†áÂøódeletion criteria : Ê†πÊçÆÊñá‰ª∂ÔºàÂèØÈÄâÔºâÂà†Èô§Êù°‰ª∂Â∞ÜË¢´Âà†Èô§„ÄÇjustOne : ÔºàÂèØÈÄâÔºâÂ¶ÇÊûúËÆæÁΩÆ‰∏∫trueÊàñ1ÔºåÁÑ∂ÂêéÂèñÂá∫Âè™Êúâ‰∏Ä‰∏™ÊñáÊ°£„ÄÇ ËØ≠Ê≥ïremove()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã&gt;db.COLLECTION_NAME.remove(DELLETION_CRITTERIA) ‰æãÂ≠êËÄÉËôëmycolÈõÜÂêàÊúâÂ¶Ç‰∏ãÊï∞ÊçÆ„ÄÇ 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞ÜÂà†Èô§ÊâÄÊúâÁöÑÊñá‰ª∂ÔºåÂÖ∂Ê†áÈ¢ò‰∏∫ ‚ÄòMongoDB Overview‚Äô 12345&gt;db.mycol.remove({&apos;title&apos;:&apos;MongoDB Overview&apos;})&gt;db.mycol.find(){ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Toturials Overview&quot;}&gt; Âè™Âà†Èô§‰∏Ä‰∏™Â¶ÇÊûúÊúâÂ§ö‰∏™ËÆ∞ÂΩïÔºåÂπ∂Ë¶ÅÂà†Èô§‰ªÖÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïÔºåÁÑ∂ÂêéÂú® remove()ÊñπÊ≥ïËÆæÁΩÆÂèÇÊï∞ justOne „ÄÇ&gt;db.COLLECTION_NAME.remove(DELETION_CRITERIA,1) Âà†Èô§ÊâÄÊúâÊñá‰ª∂Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂà†Èô§Êù°‰ª∂ÔºåÂàôMongoDBÂ∞Ü‰ªéÈõÜÂêà‰∏≠Âà†Èô§Êï¥‰∏™Êñá‰ª∂„ÄÇËøôÁõ∏ÂΩì‰∫éSQLÁöÑ truncate ÂëΩ‰ª§„ÄÇ 123&gt;db.mycol.remove()&gt;db.mycol.find()&gt; MongoDBÊäïÂΩ±mongodbÊäïÂΩ±ÊÑè‰πâÊòØÂè™ÈÄâÊã©ÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºåËÄå‰∏çÊòØÈÄâÊã©Êï¥‰∏™‰∏Ä‰∏™ÊñáÊ°£ÁöÑÊï∞ÊçÆ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ÊñáÊ°£Êúâ5‰∏™Â≠óÊÆµÔºåÂè™ÈúÄË¶ÅÊòæÁ§∫3‰∏™ÔºåÂè™‰ªé‰∏≠ÈÄâÊã©3‰∏™Â≠óÊÆµ„ÄÇ MongoDBÁöÑfind()ÊñπÊ≥ïÔºåËß£Èáä‰∫ÜMongoDB‰∏≠Êü•ËØ¢ÊñáÊ°£Êé•Êî∂ÁöÑÁ¨¨‰∫å‰∏™ÂèØÈÄâÁöÑÂèÇÊï∞ÊòØË¶ÅÊ£ÄÁ¥¢ÁöÑÂ≠óÊÆµÂàóË°®„ÄÇÂú®MongoDB‰∏≠ÔºåÂΩìÊâßË°åfind()ÊñπÊ≥ïÔºåÈÇ£‰πàÂÆÉ‰ºöÊòæÁ§∫‰∏Ä‰∏™ÊñáÊ°£ÁöÑÊâÄÊúâÂ≠óÊÆµ„ÄÇË¶ÅÈôêÂà∂Ëøô‰∏ÄÁÇπÔºåÈúÄË¶ÅËÆæÁΩÆÂ≠óÊÆµÂàóË°®ÂÄº‰∏∫1Êàñ0„ÄÇ1ÊòØÁî®Êù•ÊòæÁ§∫Â≠óÊÆµÔºåËÄå0Ë¢´Áî®Êù•ÈöêËóèÂ≠óÊÆµ„ÄÇ ËØ≠Ê≥ï find()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã&gt;db.COLLECTION_NAME.find({},{KEY:1}) ‰æãÂ≠ê ËÄÉËôëÈõÜÂêà myycol Êúâ‰∏ãÂàóÊï∞ÊçÆ 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞ÜÊòæÁ§∫ÊñáÊ°£ÁöÑÊ†áÈ¢òÔºåÂú®Êü•ËØ¢ÊñáÊ°£Êó∂„ÄÇ 12345&gt;db.mycol.find({},{&quot;title&quot;:1,_id:0}){&quot;title&quot;:&quot;MongoDB Overview&quot;}{&quot;title&quot;:&quot;NoSQL Overview&quot;}{&quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;}&gt; ËØ∑Ê≥®ÊÑèÂú®ÊâßË°åfind()ÊñπÊ≥ïÊó∂_idÂ≠óÊÆµÂßãÁªàÊòæÁ§∫ÔºåÂ¶ÇÊûú‰∏çÊÉ≥Ë¶ÅÊòæÁ§∫Ëøô‰∏™Â≠óÊÆµÔºåÈÇ£‰πàÈúÄË¶ÅÂ∞ÜÂÖ∂ËÆæÁΩÆ‰∏∫0 ÈôêÂà∂ÊñáÊ°£MongoDB Limit() ÊñπÊ≥ï Ë¶ÅÂú®MongoDB‰∏≠ÈôêÂà∂ËÆ∞ÂΩïÔºåÈúÄË¶Å‰ΩøÁî®limit()ÊñπÊ≥ï„ÄÇ limit() ÊñπÊ≥ïÊé•Âèó‰∏Ä‰∏™Êï∞Â≠óÁ±ªÂûãÁöÑÂèÇÊï∞ÔºåËøôÊòØË¶ÅÊòæÁ§∫ÁöÑÊñáÊ°£Êï∞Èáè„ÄÇ ËØ≠Ê≥ïlimit()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã&gt;db.COLLECTION_NAME.find().limit(NUMBER) ‰æãÂ≠ê ËÄÉËôëÈõÜÂêà myycol Êúâ‰∏ãÂàóÊï∞ÊçÆ 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞ÜÂè™ÊòæÁ§∫2‰∏™ÊñáÊ°£ÔºåÂú®Êü•ËØ¢ÊñáÊ°£Êó∂„ÄÇ 1234&gt;db.mycol.find({},{&quot;title&quot;:1,_id:0}).limit(2){&quot;title&quot;:&quot;MongoDB Overview&quot;}{&quot;title&quot;:&quot;NoSQL Overview&quot;}&gt; Â¶ÇÊûú‰∏çÊåáÂÆö limit()ÊñπÊ≥ïÁöÑÂèÇÊï∞Êï∞ÈáèÔºåÁÑ∂ÂêéÂÆÉ‰ºöÊòæÁ§∫ÈõÜÂêà‰∏≠ÁöÑÊâÄÊúâÊñáÊ°£„ÄÇ MongoDB Skip() ÊñπÊ≥ï Èô§‰∫Ü limit()ÊñπÊ≥ïËøòÊúâ‰∏Ä‰∏™ÊñπÊ≥ï skip()‰πüÊé•ÂèóÊï∞Â≠óÁ±ªÂûãÂèÇÊï∞Âπ∂Áî®‰∫éË∑≥ËøáÊñá‰ª∂Êï∞„ÄÇ ËØ≠Ê≥ï skip() ÊñπÊ≥ïÁöÑÂü∫Á°ÄËØ≠Ê≥ïÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö&gt;db.COLLECTION_NAME.find().limit(NUMBER).skip(NUMBER) ‰æãÂ≠êÔºö ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞Ü‰ªÖÊòæÁ§∫Á¨¨‰∫å‰∏™ÊñáÊ°£„ÄÇ 123&gt;db.mycol.find({},{&quot;title&quot;:1,_id:0}).limit(1).skip(1){&quot;title&quot;:&quot;NoSQL Overview&quot;}&gt; ËØ∑Ê≥®ÊÑèÔºåskip() ÊñπÊ≥ïÁöÑÈªòËÆ§ÂÄºÊòØ 0 ÊñáÊ°£ÊéíÂ∫èË¶ÅÊéíÂ∫èMongoDB‰∏≠ÁöÑÊñáÊ°£ÔºåÈúÄË¶Å‰ΩøÁî® sort()ÊñπÊ≥ï„ÄÇ sort() ÊñπÊ≥ïÊé•Âèó‰∏Ä‰∏™ÂåÖÂê´Â≠óÊÆµÂàóË°®‰ª•ÂèäÊéíÂ∫èÈ°∫Â∫èÁöÑÊñáÊ°£„ÄÇ Ë¶Å‰ΩøÁî®1Âíå-1ÊåáÂÆöÊéíÂ∫èÈ°∫Â∫è„ÄÇ1Áî®‰∫éÂçáÂ∫èÔºåËÄå-1ÊòØÁî®‰∫éÈôçÂ∫è„ÄÇ ËØ≠Ê≥ï sort()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã&gt;db.COLLECTION_NAME.find().sort({KEY:1}) ‰æãÂ≠ê ËÄÉËôëÈõÜÂêà myycol ÊúâÂ¶Ç‰∏ãÊï∞ÊçÆ 123{ &quot;_id&quot; : ObjectId(5983548781331adf45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}{ &quot;_id&quot; : ObjectId(5983548781331adf45ec7), &quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;} ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞ÜÊòæÁ§∫ÁöÑÊñá‰ª∂ÊéíÂ∫èÊåâÊ†áÈ¢òÈôçÂ∫èÊéíÂ∫è„ÄÇ 12345&gt;db.mycol.find({},{&quot;title&quot;:1,_id:0}).sort({&quot;title&quot;:-1}){&quot;title&quot;:&quot;Yiibai Yiibai Overview&quot;}{&quot;title&quot;:&quot;NoSQL Overview&quot;}{&quot;title&quot;:&quot;MongoDB Overview&quot;}&gt; ËØ∑Ê≥®ÊÑèÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÊéíÂ∫èÁ±ªÂûãÔºåÈÇ£‰πà sort() ÊñπÊ≥ïÂ∞Ü‰ª•ÂçáÂ∫èÊéíÂàóÊñáÊ°£„ÄÇ MongoDBÁ¥¢ÂºïÁ¥¢ÂºïÊîØÊåÅÊü•ËØ¢È´òÊïàÁéáÊâßË°å„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÁ¥¢ÂºïÔºåMongoDBÂøÖÈ°ªÊâ´ÊèèÈõÜÂêà‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÊñáÊ°£ÔºåÁÑ∂ÂêéÈÄâÊã©ÈÇ£‰∫õÁ¨¶ÂêàÊü•ËØ¢ËØ≠Âè•ÁöÑÊñáÊ°£„ÄÇËã•ÈúÄË¶Å mongod Êù•Â§ÑÁêÜÂ§ßÈáèÊï∞ÊçÆÔºåÊâ´ÊèèÊòØÈùûÂ∏∏‰ΩéÊïàÁöÑ„ÄÇ Á¥¢ÂºïÊòØÁâπÊÆäÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ≠òÂÇ®Âú®‰∏Ä‰∏™Êòì‰∫éËÆæÁΩÆÈÅçÂéÜÂΩ¢ÂºèÁöÑÊï∞ÊçÆÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜ„ÄÇÁ¥¢ÂºïÂ≠òÂÇ®Âú®Á¥¢Âºï‰∏≠ÊåáÂÆöÁâπÂÆöÂ≠óÊÆµÁöÑÂÄºÊàñ‰∏ÄÁªÑÂ≠óÊÆµÔºåÂπ∂ÊéíÂ∫èÂ≠óÊÆµÁöÑÂÄº„ÄÇ Ë¶ÅÂàõÂª∫Á¥¢ÂºïÔºåÈúÄË¶Å‰ΩøÁî®MongoDBÁöÑensureIndex()ÊñπÊ≥ï„ÄÇ ËØ≠Ê≥ï ensureIndex()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã&gt;db.COLLECTION_NAME.ensureIndex({KEY:1}) ËøôÈáåÈîÆÊòØË¶ÅÂàõÂª∫Á¥¢ÂºïÂ≠óÊÆµÔºå1ÊòØÊåâÂêçÁß∞ÂçáÂ∫èÊéíÂ∫è„ÄÇËã•‰ª•ÊåâÈôçÂ∫èÂàõÂª∫Á¥¢ÂºïÔºåÈúÄË¶Å‰ΩøÁî® -1. ‰æãÂ≠ê 123456&gt;db.mycol.ensureIndex({&quot;title&quot;:1})&gt;Âú® ensureIndex()ÊñπÊ≥ïÔºåÂèØ‰ª•ÈÄöËøáÂ§ö‰∏™Â≠óÊÆµÔºåÊù•ÂàõÂª∫Â§ö‰∏™Â≠óÊÆµÁ¥¢Âºï„ÄÇ&gt;db.mycol.ensureIndex({&quot;title&quot;:1,&quot;description&quot;:-1})&gt; ensureIndex() ÊñπÊ≥ïËøòÊé•ÂèóÈÄâÈ°πÂàóË°®ÔºàËøôÊòØÂèØÈÄâÔºâÔºåÂÖ∂ÂàóË°®Â¶Ç‰∏ãÔºö MongoDB ËÅöÂêàËÅöÂêàÊìç‰ΩúÂ§ÑÁêÜÊï∞ÊçÆËÆ∞ÂΩïÂπ∂ËøîÂõûËÆ°ÁÆóÁªìÊûú„ÄÇ‰ªéÂ§ö‰∏™ÊñáÊ°£ËÅöÂêàÂàÜÁªÑÊìç‰ΩúÊï∞ÂÄºÔºåÂπ∂ÂèØ‰ª•ÊâßË°åÂ§öÁßçÂØπÂàÜÁªÑÊï∞ÊçÆ‰∏öÂä°ËøîÂõû‰∏Ä‰∏™ÁªìÊûú„ÄÇ Âú®SQL‰∏≠ÁöÑcount(*)Ôºå‰ΩøÁî®group by ‰∏émongodbÁöÑËÅöÂêàÊòØÁ≠âÊïàÁöÑ„ÄÇ ÂØπ‰∫éMongoDBÁöÑËÅöÂêàÔºå‰ΩøÁî®ÁöÑÊòØaggregate()ÊñπÊ≥ï„ÄÇ ËØ≠Ê≥ï aggregate()ÊñπÊ≥ïÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ã&gt;db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION) ‰æãÂ≠êÔºö Âú®ÈõÜÂêà‰∏≠Êúâ‰ª•‰∏ãÊï∞ÊçÆÔºö 123456789101112131415161718192021222324252627{ _id: ObjectId(7df78ad8902c) title: &apos;MongoDB Overview&apos;, description: &apos;MongoDB is no sql database&apos;, by_user: &apos;Yiibai Yiibai &apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 100},{ _id: ObjectId(7df78ad8902d) title: &apos;NoSQL Overview&apos;, description: &apos;No sql database is very fast&apos;, by_user: &apos;Yiibai Yiibai&apos;, url: &apos;https://www.yiibai.com&apos;, tags: [&apos;mongodb&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 10},{ _id: ObjectId(7df78ad8902e) title: &apos;Neo4j Overview&apos;, description: &apos;Neo4j is no sql database&apos;, by_user: &apos;Neo4j&apos;, url: &apos;https://www.neo4j.com&apos;, tags: [&apos;neo4j&apos;, &apos;database&apos;, &apos;NoSQL&apos;], likes: 750}, Áé∞Âú®‰ªé‰∏äÈù¢ÁöÑÈõÜÂêàÔºåÂ¶ÇÊûúÊÉ≥Áü•ÈÅìÊØè‰∏Ä‰∏™Áî®Êà∑ÁºñÂÜôÁöÑÊïôÁ®ãÊòØÂ§öÂ∞ëÔºåÈÇ£‰πà‰ΩøÁî®aggregate()ÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÁöÑÂàóË°®Ôºö 123456789101112131415&gt; db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$sum : 1}}}]){ &quot;result&quot; : [ { &quot;_id&quot; : &quot;Yiibai Yiibai&quot;, &quot;num_tutorial&quot; : 2 }, { &quot;_id&quot; : &quot;Neo4j&quot;, &quot;num_tutorial&quot; : 1 } ], &quot;ok&quot; : 1}&gt; Áî®‰∫é‰∏äËø∞Áî®ÈÄîÂ∞ÜÁ≠âÊïà‰∫ésqlÊü•ËØ¢Ôºö select by_user, count(*) from mycol group by by_userÂè¶Â§ñÔºåÂú®‰∏äËø∞‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨Â∑≤Áªè‰ΩøÁî®Â≠óÊÆµby_userËøõË°åÂàÜÁªÑÂπ∂ËÆ°ÁÆóÊÄªÂíåÔºå‰πüÂ∞±ÊòØby_user Âá∫Áé∞ÂêÑ‰∏™Ê¨°Êï∞„ÄÇ‰∏Ä‰∏™ÂàóË°®‰∏≠ÂèØÁî®ÁöÑËÅöÈõÜË°®ËææÂºè„ÄÇ MongoDB Â§çÂà∂Â§çÂà∂ÊòØÂêåÊ≠•Âú®Â§ö‰∏™ÊúçÂä°Âô®‰∏äÁöÑÊï∞ÊçÆËøáÁ®ã„ÄÇÂ§çÂà∂Êèê‰æõ‰∫ÜÂÜó‰ΩôÂíåÊï∞ÊçÆÂú®‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®‰∏äÁöÑÂ§ö‰∏™ÂâØÊú¨ÊèêÈ´òÊï∞ÊçÆÁöÑÂèØÁî®ÊÄßÔºåÂ§çÂà∂Èò≤Ê≠¢Âú®Âçï‰∏™ÊúçÂä°Âô®‰∏ä‰∏¢Â§±Êï∞ÊçÆÂ∫ì„ÄÇ Â§çÂà∂‰πüÂèØ‰ª•‰ªéÁ°¨‰ª∂ÊïÖÈöúÂíåÊúçÂä°‰∏≠Êñ≠‰∏≠ÊÅ¢Â§ç„ÄÇÂ∏¶ÊúâÊï∞ÊçÆÁöÑÂÖ∂‰ªñÂâØÊú¨ÔºåÂèØ‰ª•ÈÄâÊã©ÂÖ∂‰∏≠‰∏Ä‰∏™ÁÅæÈöæÊÅ¢Â§çÔºåÊä•ÂëäÊàñÂ§á‰ªΩ„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅÂ§çÂà∂Ôºü ‰∏∫‰∫ÜËÆ©Êï∞ÊçÆÂÆâÂÖ® Êï∞ÊçÆÁöÑÈ´òÔºà24*7ÔºâÂèØÁî®ÊÄß ÁÅæÈöæÊÅ¢Â§ç Êó†ÂÅúÊú∫Áª¥Êä§ÔºàÂ¶ÇÂ§á‰ªΩÔºåÁ¥¢ÂºïÈáçÂª∫ÔºåÂéãÁº©Ôºâ ËØªÂèñÁº©ÊîæÔºàÈ¢ùÂ§ñÁöÑÂâØÊú¨Êù•ËØªÂèñÔºâ ÂâØÊú¨ÈõÜÊòØÈÄèÊòéÁöÑÂ∫îÁî® MongoDBÂ§çÂà∂ÁöÑÂ∑•‰ΩúÂéüÁêÜMongoDBÈÄöËøá‰ΩøÁî®ÂâØÊú¨ÈõÜÁöÑÂ§çÂà∂Êù•ÂÆûÁé∞„ÄÇÂâØÊú¨ÈõÜÊòØ‰∏ÄÁªÑÊâøËΩΩÂêå‰∏Ä‰∏™Êï∞ÊçÆÈõÜÁöÑmongodÂÆû‰æã„ÄÇÂú®ÂâØÊú¨ÁöÑ‰∏Ä‰∏™ËäÇÁÇπÊòØÊé•Êî∂ÊâÄÊúâÁöÑÂÜôÊìç‰Ωú‰∏ªËäÇÁÇπ„ÄÇÊâÄÊúâÁöÑÂÆû‰æãÔºåÊ¨°Á∫ßÔºåÂ∫îÁî®Êìç‰Ωú‰ªé‰∏ª‰ª•‰æøÂÆÉ‰ª¨ÂÖ∑ÊúâÁõ∏ÂêåÁöÑÊï∞ÊçÆÈõÜ„ÄÇÂâØÊú¨ÈõÜÂè™ËÉΩÊúâ‰∏Ä‰∏™‰∏ªËäÇÁÇπ„ÄÇ ÂâØÊú¨ÈõÜÊòØ‰∏ÄÁªÑ‰∏§‰∏™ÊàñÊõ¥Â§ö‰∏™ËäÇÁÇπÔºàÈÄöÂ∏∏Ëá≥Â∞ë3ËäÇÁÇπÊòØÂøÖÈúÄÁöÑÔºâ„ÄÇ Âú®ÂâØÊú¨ÈõÜ‰∏Ä‰∏™ËäÇÁÇπÊòØ‰∏ªËäÇÁÇπÂíåÂÖ∂‰ΩôÁöÑËäÇÁÇπÈÉΩÊòØÊ¨°Ë¶ÅÁöÑ„ÄÇ ÊâÄÊúâÁöÑÊï∞ÊçÆÂ§çÂà∂ÊòØ‰ªé‰∏ªÂà∞Ê¨°ËäÇÁÇπ„ÄÇ Âú®Ëá™Âä®ÊïÖÈöúËΩ¨ÁßªÊàñÁª¥Êä§Êó∂ÔºåÈÄâÂª∫Á´ã‰∫Ü‰∏ªË¶ÅÂíå‰∏Ä‰∏™Êñ∞ÁöÑ‰∏ªËäÇÁÇπË¢´ÈÄâÊã©„ÄÇ ÊïÖÈöúËäÇÁÇπÁöÑÊÅ¢Â§çÂêéÔºåÂÜçÊ¨°Âä†ÂÖ•ÂâØÊú¨ÈõÜÔºåÂπ∂ÂèØ‰ª•‰Ωú‰∏∫‰∏Ä‰∏™ËæÖÂä©ËäÇÁÇπ„ÄÇ mongodbÂ§çÂà∂ÁöÑÂÖ∏ÂûãÂõæÂ¶Ç‰∏ãÂõæÔºåÂÖ∂‰∏≠ÂÆ¢Êà∑Á´ØÂ∫îÁî®Á®ãÂ∫èÊÄªÊòØ‰∏é‰∏ªËäÇÁÇπÂíå‰∏ªËäÇÁÇπ‰∫§‰∫íÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆÂ§çÂà∂Âà∞ËæÖÂä©ËäÇÁÇπ„ÄÇÂâØÊú¨ÈõÜÁâπÂæÅ N‰∏™ËäÇÁÇπÁöÑÈõÜÁæ§ ‰ªª‰ΩïËäÇÁÇπÂèØ‰∏∫ÂéüÂèë/‰∏ªËäÇÁÇπ ÊâÄÊúâÁöÑÂÜôÊìç‰ΩúËøõÂÖ•Âà∞‰∏ªËäÇÁÇπ Ëá™Âä®ÊïÖÈöúËΩ¨Áßª Ëá™Âä®ÊÅ¢Â§ç","link":"/ÁºñÁ®ã/Python/mongodb/"},{"title":"python3 ‰∏é MySQL ‰πãÈó¥ÁöÑ‰∫§‰∫í","text":"‰ªÄ‰πàÊòØ PyMySQLÔºüPyMySQL ÊòØÂú® Python3.x ÁâàÊú¨‰∏≠Áî®‰∫éËøûÊé• MySQL ÊúçÂä°Âô®ÁöÑ‰∏Ä‰∏™Â∫ìÔºåPython2‰∏≠Âàô‰ΩøÁî®mysqldb„ÄÇ PyMySQL ÈÅµÂæ™ Python Êï∞ÊçÆÂ∫ì API v2.0 ËßÑËåÉÔºåÂπ∂ÂåÖÂê´‰∫Ü pure-Python MySQL ÂÆ¢Êà∑Á´ØÂ∫ì„ÄÇ ÂÆâË£ÖmysqlÊ®°ÂùóÂú®Êñá‰ª∂‰∏≠ÂºïÂÖ•Ê®°Âùó import pymysql 1.ConnectionÂØπË±°‚Ä¢ Áî®‰∫éÂª∫Á´ã‰∏éÊï∞ÊçÆÂ∫ìÁöÑËøûÊé•‚Ä¢ ÂàõÂª∫ÂØπË±°ÔºöË∞ÉÁî®connect()ÊñπÊ≥ïconn=connect(ÂèÇÊï∞ÂàóË°®)‚Ä¢ ÂèÇÊï∞hostÔºöËøûÊé•ÁöÑmysql‰∏ªÊú∫ÔºåÂ¶ÇÊûúÊú¨Êú∫ÊòØ‚Äôlocalhost‚Äô‚Ä¢ ÂèÇÊï∞portÔºöËøûÊé•ÁöÑmysql‰∏ªÊú∫ÁöÑÁ´ØÂè£ÔºåÈªòËÆ§ÊòØ3306‚Ä¢ ÂèÇÊï∞dbÔºöÊï∞ÊçÆÂ∫ìÁöÑÂêçÁß∞‚Ä¢ ÂèÇÊï∞userÔºöËøûÊé•ÁöÑÁî®Êà∑Âêç‚Ä¢ ÂèÇÊï∞passwordÔºöËøûÊé•ÁöÑÂØÜÁ†Å‚Ä¢ ÂèÇÊï∞charsetÔºöÈÄö‰ø°ÈááÁî®ÁöÑÁºñÁ†ÅÊñπÂºèÔºåÈªòËÆ§ÊòØ‚Äôgb2312‚ÄôÔºåË¶ÅÊ±Ç‰∏éÊï∞ÊçÆÂ∫ìÂàõÂª∫Êó∂ÊåáÂÆöÁöÑÁºñÁ†Å‰∏ÄËá¥ÔºåÂê¶Âàô‰∏≠Êñá‰ºö‰π±Á†Å 2.ÂØπË±°ÁöÑÊñπÊ≥ï‚Ä¢ close()ÂÖ≥Èó≠ËøûÊé•‚Ä¢ commit()‰∫ãÂä°ÔºåÊâÄ‰ª•ÈúÄË¶ÅÊèê‰∫§Êâç‰ºöÁîüÊïà‚Ä¢ rollback()‰∫ãÂä°ÔºåÊîæÂºÉ‰πãÂâçÁöÑÊìç‰Ωú‚Ä¢ cursor()ËøîÂõûCursorÂØπË±°ÔºåÁî®‰∫éÊâßË°åsqlËØ≠Âè•Âπ∂Ëé∑ÂæóÁªìÊûú CursorÂØπË±°‚Ä¢ ÊâßË°åsqlËØ≠Âè•‚Ä¢ ÂàõÂª∫ÂØπË±°ÔºöË∞ÉÁî®ConnectionÂØπË±°ÁöÑcursor()ÊñπÊ≥ïcursor1=conn.cursor() ÂØπË±°ÁöÑÊñπÊ≥ï‚Ä¢ close()ÂÖ≥Èó≠‚Ä¢ execute(operation [, parameters ])ÊâßË°åËØ≠Âè•ÔºåËøîÂõûÂèóÂΩ±ÂìçÁöÑË°åÊï∞‚Ä¢ fetchone()ÊâßË°åÊü•ËØ¢ËØ≠Âè•Êó∂ÔºåËé∑ÂèñÊü•ËØ¢ÁªìÊûúÈõÜÁöÑÁ¨¨‰∏Ä‰∏™Ë°åÊï∞ÊçÆÔºåËøîÂõû‰∏Ä‰∏™ÂÖÉÁªÑ‚Ä¢ next()ÊâßË°åÊü•ËØ¢ËØ≠Âè•Êó∂ÔºåËé∑ÂèñÂΩìÂâçË°åÁöÑ‰∏ã‰∏ÄË°å‚Ä¢ fetchall()ÊâßË°åÊü•ËØ¢Êó∂ÔºåËé∑ÂèñÁªìÊûúÈõÜÁöÑÊâÄÊúâË°åÔºå‰∏ÄË°åÊûÑÊàê‰∏Ä‰∏™ÂÖÉÁªÑÔºåÂÜçÂ∞ÜËøô‰∫õÂÖÉÁªÑË£ÖÂÖ•‰∏Ä‰∏™ÂÖÉÁªÑËøîÂõû‚Ä¢ scroll(value[,mode])Â∞ÜË°åÊåáÈíàÁßªÂä®Âà∞Êüê‰∏™‰ΩçÁΩÆ‚Ä¢ modeË°®Á§∫ÁßªÂä®ÁöÑÊñπÂºè‚Ä¢ modeÁöÑÈªòËÆ§ÂÄº‰∏∫relativeÔºåË°®Á§∫Âü∫‰∫éÂΩìÂâçË°åÁßªÂä®Âà∞valueÔºåvalue‰∏∫Ê≠£ÂàôÂêë‰∏ãÁßªÂä®Ôºåvalue‰∏∫Ë¥üÂàôÂêë‰∏äÁßªÂä®„ÄÇÁõ∏ÂØπÁöÑ‚Ä¢ modeÁöÑÂÄº‰∏∫absoluteÔºåË°®Á§∫Âü∫‰∫éÁ¨¨‰∏ÄÊù°Êï∞ÊçÆÁöÑ‰ΩçÁΩÆÔºåÁ¨¨‰∏ÄÊù°Êï∞ÊçÆÁöÑ‰ΩçÁΩÆ‰∏∫0ÔºåÁªùÂØπÁöÑ„ÄÇ ‰∏æ‰∏™‰æãÂ≠ê‰æø‰∫éÁêÜËß£12345678910111213141516171819202122232425262728293031323334353637383940414243444546# ÂØºÂÖ•pythonÊìç‰ΩúmysqlÁöÑÊ®°Âùóimport pymysql# Ëé∑ÂèñËøûÊé•ÂØπË±°conn = pymysql.connect(host='127.0.0.1', user='root', password='123456', database='python01', port=3306, charset='utf8')# Ëé∑ÂèñÊâßË°åÂ∑•ÂÖ∑cur = conn.cursor()# sqlËØ≠Âè•,Â¢ûÂà†Êîπ#sql = 'select birthday from t_user'sql = 'select id,name,pwd,birthday from t_user'# ÊâßË°å,ËøîÂõûÂÄº„ÄÇÂ¶ÇÊûúÊòØÂ¢ûÂà†ÊîπÔºåËøîÂõûÂèóÂΩ±ÂìçÁöÑË°åÊï∞ÔºåÂ¶ÇÊûúÊòØÊü•ËØ¢ÔºåËøîÂõûÊü•ËØ¢ÁöÑË°åÊï∞count = cur.execute(sql)print('Êü•ËØ¢ÁöÑÁªìÊûúÊúâ%sÊù°Êï∞ÊçÆ'%count)#Ëé∑ÂèñÁ¨¨‰∏ÄË°ådateOne = cur.fetchone()print(dateOne)#Âêë‰∏äÁßªÂä®‰∏ÄË°åcur.scroll(-1)#Âêë‰∏ãÁßªÂä®‰∏ÄË°åcur.scroll(1)cur.scroll(1,mode='absolute') ÁªùÂØπÁöÑÔºåËøôÈáåÊåáÁöÑÊòØÁ¨¨‰∏ÄË°åcur.scroll(1,mode='relative') Áõ∏ÂØπÁöÑ#Ëé∑ÂèñÊâÄÊúâË°åÁöÑÊï∞ÊçÆdataAll = cur.fetchall()print(dataAll)for temp in dataAll: print(temp) print(dataAll[-1][2]) #dataAll[-1]ÂæóÂà∞ÁöÑÊòØ‰∏Ä‰∏™Áî®Êà∑ÊâÄÊúâÁöÑ‰ø°ÊÅØÔºådataAll[-1][2]Ëé∑ÂèñÊúÄÂêé‰∏Ä‰∏™‰∫∫ÁöÑÂØÜÁ†Åfor temp in cur: print(temp)s = 'id:%s,name:%s,pwd:%s,birthday:%s'for temp in dataAll: print(s%(temp[0],temp[1],temp[2],temp[3]))# ÂÖ≥Èó≠cur.close()conn.close() 3.ÂØπË±°ÁöÑÂ±ûÊÄß‚Ä¢ rowcountÂè™ËØªÂ±ûÊÄßÔºåË°®Á§∫ÊúÄËøë‰∏ÄÊ¨°execute()ÊâßË°åÂêéÂèóÂΩ±ÂìçÁöÑË°åÊï∞‚Ä¢ connectionËé∑ÂæóÂΩìÂâçËøûÊé•ÂØπË±° 2.Â¢ûÂà†ÊîπÊü•(CRUD)1.Â¢û‚Ä¢ ÂàõÂª∫testInsert.pyÊñá‰ª∂ÔºåÂêëÂ≠¶ÁîüË°®‰∏≠ÊèíÂÖ•‰∏ÄÊù°Êï∞ÊçÆ 123456789101112#encoding=utf-8import pymysqltry: conn=pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;) cs1=conn.cursor() count=cs1.execute(&quot;insert into students(sname) values(&apos;Âº†ËâØ&apos;)&quot;) print(count) conn.commit() cs1.close() conn.close()except Exception,e: print(e) 2.‰øÆÊîπ‚Ä¢ ÂàõÂª∫testUpdate.pyÊñá‰ª∂Ôºå‰øÆÊîπÂ≠¶ÁîüË°®ÁöÑ‰∏ÄÊù°Êï∞ÊçÆ 123456789101112#encoding=utf-8import pymysqltry: conn=pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;) cs1=conn.cursor() count=cs1.execute(&quot;update students set sname=&apos;ÂàòÈÇ¶&apos; where id=6&quot;) print(count) conn.commit() cs1.close() conn.close()except Exception,e: print(e) 3.Âà†Èô§‚Ä¢ ÂàõÂª∫testDelete.pyÊñá‰ª∂ÔºåÂà†Èô§Â≠¶ÁîüË°®ÁöÑ‰∏ÄÊù°Êï∞ÊçÆ 1234567891011#encoding=utf-8 import pymysqltry: conn=pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;) cs1=conn.cursor() count=cs1.execute(&quot;delete from students where id=6&quot;) print(count) conn.commit() cs1.close() conn.close()except Exception as e: print(e) 4.Êü•‚Ä¢ ÂàõÂª∫testSelectOne.pyÊñá‰ª∂ÔºåÊü•ËØ¢‰∏ÄÊù°Â≠¶Áîü‰ø°ÊÅØ 12345678910import Pymysql try:conn=Pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;)cur=conn.cursor()cur.execute(&apos;select * from students where id=7&apos;)result=cur.fetchone()print resultcur.close()conn.close()except Exception as e:print(e) ‚Ä¢ ÂàõÂª∫testSelectMany.pyÊñá‰ª∂ÔºåÊü•ËØ¢ÂÖ®ÈÉ®Â≠¶Áîü‰ø°ÊÅØ 1234567891011#encoding=utf8 import Pymysqltry:conn=Pymysql.connect(host=&apos;localhost&apos;,port=3306,db=&apos;test1&apos;,user=&apos;root&apos;,passwd=&apos;mysql&apos;,charset=&apos;utf8&apos;)cur=conn.cursor()cur.execute(&apos;select * from students&apos;)result=cur.fetchall()print resultcur.close()conn.close()except Exception as e:print(e) ÂÆû‰æã‰∏ÄÔºöÂèÇÊï∞1234567891011121314151617181920212223242526# ÂØºÂÖ•pythonÊìç‰ΩúmysqlÁöÑÊ®°Âùóimport pymysqlimport time# Ëé∑ÂèñËøûÊé•ÂØπË±°conn = pymysql.connect(host=&apos;127.0.0.1&apos;, user=&apos;root&apos;, password=&apos;123456&apos;, database=&apos;python01&apos;, port=3306, charset=&apos;utf8&apos;)# Ëé∑ÂèñÊâßË°åÂ∑•ÂÖ∑cur = conn.cursor()# sqlËØ≠Âè•,Â¢ûÂà†ÊîπÔºåsqlÊ≥®ÂÖ•sql = &apos;insert into t_user(name,pwd,birthday) values(%s,%s,%s)&apos;# ÂèÇÊï∞ÂàóË°®name = input(&apos;ËæìÂÖ•ÂßìÂêç:&apos;)pwd = input(&apos;ËæìÂÖ•ÂØÜÁ†Å:&apos;)birthday = input(&apos;ËæìÂÖ•ÁîüÊó•:&apos;) # 2017Âπ¥10Êúà01Êó•--&gt;Êó•Êúüstruct_time(---&gt;2017-10-01)birthday = time.strptime(birthday,&apos;%YÂπ¥%mÊúà%dÊó•&apos;) #ËøôÈáåÊàë‰ª¨Â∞±Áî®Âà∞‰∫ÜÊó∂Èó¥‰∏éÂ≠óÁ¨¶‰∏≤ÁöÑÁõ∏‰∫íËΩ¨Êç¢(ËØ¶ÊÉÖËßÅMySQLÈ´òÁ∫ß)params = [name,pwd,birthday]# ÊâßË°å,ËøîÂõûÂÄº„ÄÇÂ¶ÇÊûúÊòØÂ¢ûÂà†ÊîπÔºåËøîÂõûÂèóÂΩ±ÂìçÁöÑË°åÊï∞ÔºåÂ¶ÇÊûúÊòØÊü•ËØ¢ÔºåËøîÂõûÊü•ËØ¢ÁöÑË°åÊï∞count = cur.execute(sql,params)#Êèê‰∫§conn.commit()print(&apos;ÂèóÂΩ±ÂìçÁöÑË°åÊï∞:%s&apos;%count)# ÂÖ≥Èó≠cur.close()conn.close() ÂÆû‰æã‰∫åÔºöÊäõÂá∫ÂºÇÂ∏∏12345678910111213141516171819202122232425262728293031323334# ÂØºÂÖ•pythonÊìç‰ΩúmysqlÁöÑÊ®°Âùóimport pymysqltry: conn = None cur = None # Ëé∑ÂèñËøûÊé•ÂØπË±° conn = pymysql.connect(host=&apos;127.0.0.1&apos;, user=&apos;root&apos;, password=&apos;123456&apos;, database=&apos;python01&apos;, port=3306, charset=&apos;utf8&apos;) # Ê®°ÊãüÂºÇÂ∏∏ # a = 1 / 0 # Ëé∑ÂèñÊâßË°åÂ∑•ÂÖ∑ cur = conn.cursor() # sqlËØ≠Âè•,Â¢ûÂà†Êîπ sql = &apos;insert into t_user(name,pwd,birthday) values(&quot;Â∞è‰ºä&quot;,&quot;123456&quot;,str_to_date(&quot;2017Âπ¥10Êúà20Êó•&quot;,&quot;%YÂπ¥%mÊúà%dÊó•&quot;))&apos; # ÊâßË°å,ËøîÂõûÂÄº„ÄÇÂ¶ÇÊûúÊòØÂ¢ûÂà†ÊîπÔºåËøîÂõûÂèóÂΩ±ÂìçÁöÑË°åÊï∞ÔºåÂ¶ÇÊûúÊòØÊü•ËØ¢ÔºåËøîÂõûÊü•ËØ¢ÁöÑË°åÊï∞ count = cur.execute(sql) # Êèê‰∫§ conn.commit() print(&apos;ÂèóÂΩ±ÂìçÁöÑË°åÊï∞:%s&apos; % count)except Exception as ex: # ÊâìÂç∞ÂºÇÂ∏∏‰ø°ÊÅØÔºåÊµãËØïÊó∂ÂÄô‰ΩøÁî®ÔºåÈ°πÁõÆ‰∏äÁ∫øÔºåÂéªÊéâ print(str(ex)) # Â∞ÜÂºÇÂ∏∏ÁªßÁª≠ÊäõÂá∫ # raisefinally: if cur != None: cur.close() if conn != None: conn.close() ÂÆû‰æã‰∏âÔºö12345678910111213141516171819202122232425262728293031# ÂØºÂÖ•pythonÊìç‰ΩúmysqlÁöÑÊ®°Âùóimport pymysql# Ëé∑ÂèñËøûÊé•ÂØπË±°conn = pymysql.connect(host=&apos;127.0.0.1&apos;, user=&apos;root&apos;, password=&apos;123456&apos;, database=&apos;python01&apos;, port=3306, charset=&apos;utf8&apos;)# Ëé∑ÂèñÊâßË°åÂ∑•ÂÖ∑cur = conn.cursor()# sqlËØ≠Âè•,Â¢ûÂà†Êîπ#sql = &apos;select birthday from t_user&apos;sql = &apos;select id,name,pwd,birthday from t_user&apos;# ÊâßË°å,ËøîÂõûÂÄº„ÄÇÂ¶ÇÊûúÊòØÂ¢ûÂà†ÊîπÔºåËøîÂõûÂèóÂΩ±ÂìçÁöÑË°åÊï∞ÔºåÂ¶ÇÊûúÊòØÊü•ËØ¢ÔºåËøîÂõûÊü•ËØ¢ÁöÑË°åÊï∞count = cur.execute(sql)print(&apos;Êü•ËØ¢ÁöÑÁªìÊûúÊúâ%sÊù°Êï∞ÊçÆ&apos;%count)#Ëé∑ÂèñÁ¨¨‰∏ÄË°å# dateOne = cur.fetchone()# print(dateOne)# for temp in cur:# print(temp)s = &apos;id:%s,name:%s,pwd:%s,birthday:%s&apos;for temp in dataAll: print(s%(temp[0],temp[1],temp[2],temp[3]))# ÂÖ≥Èó≠cur.close()conn.close() 3.Â∞ÅË£ÖËøô‰∏™Â∫ìÁöÑÂêçÂ≠óÔºömySqlHelper pythonÊìç‰ΩúmysqlËøõË°åÂ¢ûÂà†ÊîπÊü•ÁöÑÂ∞ÅË£Ö 1„ÄÅÂ¢ûÂà†ÊîπÔºå‰ª£Á†ÅÁ±ª‰ºº 2„ÄÅÊü•ËØ¢ ‰ª£Á†ÅÂàÜÊûê 1„ÄÅËé∑ÂèñËøûÊé•ÂØπË±° 2„ÄÅsqlËØ≠Âè•‰∏çÂêåÔºåÂèÇÊï∞‰∏çÂêå 3„ÄÅËé∑ÂèñÊâßË°åÂØπË±° Â¢ûÂà†Êîπ Êü•ËØ¢ 1„ÄÅfetchone 2„ÄÅfetchall 4„ÄÅÂ§ÑÁêÜÁªìÊûú 5„ÄÅÂÖ≥Èó≠Èù¢ÂêëÂØπË±° Âª∫Á´ãÁ±ªÔºåÂ∞ÅË£ÖÂ±ûÊÄßÂíåÂáΩÊï∞123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123import pymysqlclass MysqlHelper: &apos;&apos;&apos;pythonÊìç‰ΩúmysqlÁöÑÂ¢ûÂà†ÊîπÊü•ÁöÑÂ∞ÅË£Ö&apos;&apos;&apos; def __init__(self, host, user, password, database, port=3306, charset=&apos;utf8&apos;): &apos;&apos;&apos; ÂàùÂßãÂåñÂèÇÊï∞ :param host: ‰∏ªÊú∫ :param user: Áî®Êà∑Âêç :param password: ÂØÜÁ†Å :param database: Êï∞ÊçÆÂ∫ì :param port: Á´ØÂè£Âè∑ÔºåÈªòËÆ§ÊòØ3306 :param charset: ÁºñÁ†ÅÔºåÈªòËÆ§ÊòØutf8 &apos;&apos;&apos; self.host = host self.port = port self.database = database self.user = user self.password = password self.charset = charset def connect(self): &apos;&apos;&apos; Ëé∑ÂèñËøûÊé•ÂØπË±°ÂíåÊâßË°åÂØπË±° :return: &apos;&apos;&apos; self.conn = pymysql.connect(host=self.host, user=self.user, password=self.password, database=self.database, port=self.port, charset=self.charset) self.cur = self.conn.cursor() def fetchone(self, sql, params=None): &apos;&apos;&apos; Ê†πÊçÆsqlÂíåÂèÇÊï∞Ëé∑Âèñ‰∏ÄË°åÊï∞ÊçÆ :param sql: sqlËØ≠Âè• :param params: sqlËØ≠Âè•ÂØπË±°ÁöÑÂèÇÊï∞ÂÖÉÁªÑÔºåÈªòËÆ§ÂÄº‰∏∫None :return: Êü•ËØ¢ÁöÑ‰∏ÄË°åÊï∞ÊçÆ &apos;&apos;&apos; dataOne = None try: count = self.cur.execute(sql, params) if count != 0: dataOne = self.cur.fetchone() except Exception as ex: print(ex) finally: self.close() return dataOne def fetchall(self, sql, params=None): &apos;&apos;&apos; Ê†πÊçÆsqlÂíåÂèÇÊï∞Ëé∑Âèñ‰∏ÄË°åÊï∞ÊçÆ :param sql: sqlËØ≠Âè• :param params: sqlËØ≠Âè•ÂØπË±°ÁöÑÂèÇÊï∞ÂàóË°®ÔºåÈªòËÆ§ÂÄº‰∏∫None :return: Êü•ËØ¢ÁöÑ‰∏ÄË°åÊï∞ÊçÆ &apos;&apos;&apos; dataall = None try: count = self.cur.execute(sql, params) if count != 0: dataall = self.cur.fetchall() except Exception as ex: print(ex) finally: self.close() return dataall def __item(self, sql, params=None): &apos;&apos;&apos; ÊâßË°åÂ¢ûÂà†Êîπ :param sql: sqlËØ≠Âè• :param params: sqlËØ≠Âè•ÂØπË±°ÁöÑÂèÇÊï∞ÂàóË°®ÔºåÈªòËÆ§ÂÄº‰∏∫None :return: ÂèóÂΩ±ÂìçÁöÑË°åÊï∞ &apos;&apos;&apos; count = 0 try: count = self.cur.execute(sql, params) self.conn.commit() except Exception as ex: print(ex) finally: self.close() return count def update(self, sql, params=None): &apos;&apos;&apos; ÊâßË°å‰øÆÊîπ :param sql: sqlËØ≠Âè• :param params: sqlËØ≠Âè•ÂØπË±°ÁöÑÂèÇÊï∞ÂàóË°®ÔºåÈªòËÆ§ÂÄº‰∏∫None :return: ÂèóÂΩ±ÂìçÁöÑË°åÊï∞ &apos;&apos;&apos; return self.__item(sql, params) def insert(self, sql, params=None): &apos;&apos;&apos; ÊâßË°åÊñ∞Â¢û :param sql: sqlËØ≠Âè• :param params: sqlËØ≠Âè•ÂØπË±°ÁöÑÂèÇÊï∞ÂàóË°®ÔºåÈªòËÆ§ÂÄº‰∏∫None :return: ÂèóÂΩ±ÂìçÁöÑË°åÊï∞ &apos;&apos;&apos; return self.__item(sql, params) def delete(self, sql, params=None): &apos;&apos;&apos; ÊâßË°åÂà†Èô§ :param sql: sqlËØ≠Âè• :param params: sqlËØ≠Âè•ÂØπË±°ÁöÑÂèÇÊï∞ÂàóË°®ÔºåÈªòËÆ§ÂÄº‰∏∫None :return: ÂèóÂΩ±ÂìçÁöÑË°åÊï∞ &apos;&apos;&apos; return self.__item(sql, params) def close(self): &apos;&apos;&apos; ÂÖ≥Èó≠ÊâßË°åÂ∑•ÂÖ∑ÂíåËøûÊé•ÂØπË±° &apos;&apos;&apos; if self.cur != None: self.cur.close() if self.conn != None: self.conn.close() 1.ÊµãËØïÊü•ËØ¢Â§öÊù°Êï∞ÊçÆ1234567891011121314151617181920import mysqlHelper# ÂàùÂßãÂåñÂØπË±°helper = mysqlHelper.MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;)# ËøûÊé•helper.connect()# sqlsql = &apos;select * from t_user where name = %s and id &gt; %s&apos;# paramsparams = [&apos;Â∞èËåó&apos;,1]# ÊâßË°ådata = helper.fetchall(sql, params)# Âà§Êñ≠if data: for temp in data: print(temp)else: # None,False,0 print(&apos;Ê≤°ÊúâÊï∞ÊçÆ.&apos;)helper.close() 2.ÊµãËØïÊü•ËØ¢‰∏ÄÊù°Êï∞ÊçÆ12345678910111213141516171819import mysqlHelper# ÂàùÂßãÂåñÂØπË±°helper = mysqlHelper.MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;)# ËøûÊé•helper.connect()# sqlsql = &apos;select * from t_user where id = %s&apos;#sql = &apos;select * from t_user where id = 1&apos;# paramsparams = [2]# ÊâßË°ådata = helper.fetchone(sql, params)#data = helper.fetchone(sql)# Âà§Êñ≠if data: print(data)else: # None,False,0 print(&apos;Ê≤°ÊúâÊï∞ÊçÆ.&apos;) 3.ÊµãËØïÂ¢ûÂà†Êîπ12345678910111213141516171819202122import mysqlHelperimport time# ÂàùÂßãÂåñÂØπË±°helper = mysqlHelper.MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;)# ËøûÊé•helper.connect()# sqlsql = &apos;update t_user set name =%s,pwd=%s,birthday=%s where id=%s&apos;# paramsid = input(&apos;ËæìÂÖ•ÁºñÂè∑:&apos;)name = input(&apos;ËæìÂÖ•ÂßìÂêç:&apos;)pwd = input(&apos;ËæìÂÖ•ÂØÜÁ†Å:&apos;)birthday = time.strptime(input(&apos;ËæìÂÖ•ÁîüÊó•:&apos;), &apos;%YÂπ¥%mÊúà%dÊó•&apos;)params = [name, pwd, birthday,id]# ÊâßË°åcount = helper.update(sql, params)# Âà§Êñ≠if count: print(&apos;Êìç‰ΩúÊàêÂäü.&apos;)else: # None,False,0 print(&apos;Êìç‰ΩúÂ§±Ë¥•.&apos;) 4.ÁôªÂΩïÂíåÊ≥®ÂÜåÁôªÂΩïÂíåÊ≥®ÂÜåÁöÑÊó∂ÂÄôÈúÄË¶ÅÂØπÂØÜÁ†ÅËøõË°åÂä†ÂØÜ Ê≥®ÊÑèÔºö ‚Ä¢ ÈúÄË¶ÅÂØπÂØÜÁ†ÅËøõË°åÂä†ÂØÜ‚Ä¢ Â¶ÇÊûú‰ΩøÁî®md5Âä†ÂØÜÔºåÂàôÂØÜÁ†ÅÂåÖÂê´32‰∏™Â≠óÁ¨¶‚Ä¢ Â¶ÇÊûú‰ΩøÁî®sha1Âä†ÂØÜÔºåÂàôÂØÜÁ†ÅÂåÖÂê´40‰∏™Â≠óÁ¨¶ÔºåËøôÈáå‰ΩøÁî®ËøôÁßçÊñπÂºè 123456789101112131415161718create table userinfos( id int primary key auto_increment, uname varchar(20), upwd char(40), isdelete bit default 0);/*ret = doPwd(&apos;123&apos;)print(ret)ÁªìÊûúÔºö40bd001563085fc35165329ea1ff5c5ecbdbbeef */-- ÊèíÂÖ•Â¶Ç‰∏ãÊï∞ÊçÆÔºåÁî®Êà∑Âêç‰∏∫123,ÂØÜÁ†Å‰∏∫123,ËøôÊòØsha1Âä†ÂØÜÂêéÁöÑÂÄºinsert into userinfos values(1,&apos;123&apos;,&apos;40bd001563085fc35165329ea1ff5c5ecbdbbeef&apos;,0); ÁôªÂΩï‰∏éÊ≥®ÂÜå1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253from mysqlHelper import MysqlHelperimport hashlibdef login(): &apos;&apos;&apos;ÁôªÂΩï&apos;&apos;&apos; name = input(&apos;ËæìÂÖ•Áî®Êà∑Âêç:&apos;) pwd = input(&apos;ËæìÂÖ•ÂØÜÁ†Å:&apos;) #Âä†ÂØÜ pwd = doPwd(pwd) helper = MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;) helper.connect() sql = &apos;select * from t_user where name=%s and pwd=%s&apos; params = [name, pwd] data = helper.fetchone(sql, params) if data: print(&apos;ÁôªÂΩïÊàêÂäü.&apos;) else: # None,False,0 print(&apos;ÁôªÂΩïÂ§±Ë¥•.&apos;)def doPwd(pwd): &apos;&apos;&apos;sha1ÁºñÁ†Å&apos;&apos;&apos; mysha1 = hashlib.sha1() mysha1.update(pwd.encode(&apos;utf-8&apos;)) pwd = mysha1.hexdigest() return pwddef register(): &apos;&apos;&apos;Ê≥®ÂÜå&apos;&apos;&apos; name = input(&apos;ËæìÂÖ•Áî®Êà∑Âêç:&apos;) pwd = input(&apos;ËæìÂÖ•ÂØÜÁ†Å:&apos;) # Âä†ÂØÜ pwd = doPwd(pwd) helper = MysqlHelper(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;123456&apos;, &apos;python01&apos;) helper.connect() sql = &apos;insert into t_user(name,pwd) values(%s,%s)&apos; params = [name, pwd] count = helper.insert(sql, params) if count: print(&apos;Êìç‰ΩúÊàêÂäü.&apos;) else: # None,False,0 print(&apos;Êìç‰ΩúÂ§±Ë¥•.&apos;)if __name__ == &apos;__main__&apos;: #register() login()","link":"/ÁºñÁ®ã/Python/pymysql/"},{"title":"python3 ‰∏é MongoDB ‰πãÈó¥ÁöÑ‰∫§‰∫í","text":"MongoDBÊòØÁî±C++ËØ≠Ë®ÄÁºñÂÜôÁöÑÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºåÊòØ‰∏Ä‰∏™Âü∫‰∫éÂàÜÂ∏ÉÂºèÊñá‰ª∂Â≠òÂÇ®ÁöÑÂºÄÊ∫êÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÔºåÂÖ∂ÂÜÖÂÆπÂ≠òÂÇ®ÂΩ¢ÂºèÁ±ª‰ººJSONÂØπË±°ÔºåÂÆÉÁöÑÂ≠óÊÆµÂÄºÂèØ‰ª•ÂåÖÂê´ÂÖ∂‰ªñÊñáÊ°£„ÄÅÊï∞ÁªÑÂèäÊñáÊ°£Êï∞ÁªÑÔºåÈùûÂ∏∏ÁÅµÊ¥ª„ÄÇÂú®Ëøô‰∏ÄËäÇ‰∏≠ÔºåÊàë‰ª¨Â∞±Êù•ÁúãÁúãPython 3‰∏ãMongoDBÁöÑÂ≠òÂÇ®Êìç‰Ωú„ÄÇ 1. ÂáÜÂ§áÂ∑•‰ΩúÂú®ÂºÄÂßã‰πãÂâçÔºåËØ∑Á°Æ‰øùÂ∑≤ÁªèÂÆâË£ÖÂ•Ω‰∫ÜMongoDBÂπ∂ÂêØÂä®‰∫ÜÂÖ∂ÊúçÂä°ÔºåÂπ∂‰∏îÂÆâË£ÖÂ•Ω‰∫ÜPythonÁöÑPyMongoÂ∫ì„ÄÇ 2. ËøûÊé•MongoDBËøûÊé•MongoDBÊó∂ÔºåÊàë‰ª¨ÈúÄË¶Å‰ΩøÁî®PyMongoÂ∫ìÈáåÈù¢ÁöÑMongoClient„ÄÇ‰∏ÄËà¨Êù•ËØ¥Ôºå‰º†ÂÖ•MongoDBÁöÑIPÂèäÁ´ØÂè£Âç≥ÂèØÔºåÂÖ∂‰∏≠Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫Âú∞ÂùÄhostÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫Á´ØÂè£portÔºàÂ¶ÇÊûú‰∏çÁªôÂÆÉ‰º†ÈÄíÂèÇÊï∞ÔºåÈªòËÆ§ÊòØ27017ÔºâÔºö 12import pymongoclient = pymongo.MongoClient(host=&apos;localhost&apos;, port=27017) ËøôÊ†∑Â∞±ÂèØ‰ª•ÂàõÂª∫MongoDBÁöÑËøûÊé•ÂØπË±°‰∫Ü„ÄÇ Âè¶Â§ñÔºåMongoClientÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞hostËøòÂèØ‰ª•Áõ¥Êé•‰º†ÂÖ•MongoDBÁöÑËøûÊé•Â≠óÁ¨¶‰∏≤ÔºåÂÆÉ‰ª•mongodbÂºÄÂ§¥Ôºå‰æãÂ¶ÇÔºö 1client = MongoClient(&apos;mongodb://localhost:27017/&apos;) Ëøô‰πüÂèØ‰ª•ËææÂà∞ÂêåÊ†∑ÁöÑËøûÊé•ÊïàÊûú„ÄÇ 3. ÊåáÂÆöÊï∞ÊçÆÂ∫ìMongoDB‰∏≠ÂèØ‰ª•Âª∫Á´ãÂ§ö‰∏™Êï∞ÊçÆÂ∫ìÔºåÊé•‰∏ãÊù•Êàë‰ª¨ÈúÄË¶ÅÊåáÂÆöÊìç‰ΩúÂì™‰∏™Êï∞ÊçÆÂ∫ì„ÄÇËøôÈáåÊàë‰ª¨‰ª•testÊï∞ÊçÆÂ∫ì‰∏∫‰æãÊù•ËØ¥ÊòéÔºå‰∏ã‰∏ÄÊ≠•ÈúÄË¶ÅÂú®Á®ãÂ∫è‰∏≠ÊåáÂÆöË¶Å‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∫ìÔºö 1db = client.test ËøôÈáåË∞ÉÁî®clientÁöÑtestÂ±ûÊÄßÂç≥ÂèØËøîÂõûtestÊï∞ÊçÆÂ∫ì„ÄÇÂΩìÁÑ∂ÔºåÊàë‰ª¨‰πüÂèØ‰ª•ËøôÊ†∑ÊåáÂÆöÔºö 1db = client[&apos;test&apos;] Ëøô‰∏§ÁßçÊñπÂºèÊòØÁ≠â‰ª∑ÁöÑ„ÄÇ 4. ÊåáÂÆöÈõÜÂêàMongoDBÁöÑÊØè‰∏™Êï∞ÊçÆÂ∫ìÂèàÂåÖÂê´ËÆ∏Â§öÈõÜÂêàÔºàcollectionÔºâÔºåÂÆÉ‰ª¨Á±ª‰ºº‰∫éÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®„ÄÇ ‰∏ã‰∏ÄÊ≠•ÈúÄË¶ÅÊåáÂÆöË¶ÅÊìç‰ΩúÁöÑÈõÜÂêàÔºåËøôÈáåÊåáÂÆö‰∏Ä‰∏™ÈõÜÂêàÂêçÁß∞‰∏∫students„ÄÇ‰∏éÊåáÂÆöÊï∞ÊçÆÂ∫ìÁ±ª‰ººÔºåÊåáÂÆöÈõÜÂêà‰πüÊúâ‰∏§ÁßçÊñπÂºèÔºöcollection = db.students collection = db['students']ËøôÊ†∑Êàë‰ª¨‰æøÂ£∞Êòé‰∫Ü‰∏Ä‰∏™CollectionÂØπË±°„ÄÇ 5. ÊèíÂÖ•Êï∞ÊçÆÊé•‰∏ãÊù•Ôºå‰æøÂèØ‰ª•ÊèíÂÖ•Êï∞ÊçÆ‰∫Ü„ÄÇÂØπ‰∫éstudentsËøô‰∏™ÈõÜÂêàÔºåÊñ∞Âª∫‰∏ÄÊù°Â≠¶ÁîüÊï∞ÊçÆÔºåËøôÊù°Êï∞ÊçÆ‰ª•Â≠óÂÖ∏ÂΩ¢ÂºèË°®Á§∫Ôºö 123456student = { &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;} ËøôÈáåÊåáÂÆö‰∫ÜÂ≠¶ÁîüÁöÑÂ≠¶Âè∑„ÄÅÂßìÂêç„ÄÅÂπ¥ÈæÑÂíåÊÄßÂà´„ÄÇÊé•‰∏ãÊù•ÔºåÁõ¥Êé•Ë∞ÉÁî®collectionÁöÑinsert()ÊñπÊ≥ïÂç≥ÂèØÊèíÂÖ•Êï∞ÊçÆÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12result = collection.insert(student)print(result) Âú®MongoDB‰∏≠ÔºåÊØèÊù°Êï∞ÊçÆÂÖ∂ÂÆûÈÉΩÊúâ‰∏Ä‰∏™_idÂ±ûÊÄßÊù•ÂîØ‰∏ÄÊ†áËØÜ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊòæÂºèÊåáÊòéËØ•Â±ûÊÄßÔºåMongoDB‰ºöËá™Âä®‰∫ßÁîü‰∏Ä‰∏™ObjectIdÁ±ªÂûãÁöÑ_idÂ±ûÊÄß„ÄÇinsert()ÊñπÊ≥ï‰ºöÂú®ÊâßË°åÂêéËøîÂõû_idÂÄº„ÄÇ ËøêË°åÁªìÊûúÂ¶Ç‰∏ãÔºö 15932a68615c2606814c91f3d ÂΩìÁÑ∂ÔºåÊàë‰ª¨‰πüÂèØ‰ª•ÂêåÊó∂ÊèíÂÖ•Â§öÊù°Êï∞ÊçÆÔºåÂè™ÈúÄË¶Å‰ª•ÂàóË°®ÂΩ¢Âºè‰º†ÈÄíÂç≥ÂèØÔºåÁ§∫‰æãÂ¶Ç‰∏ãÔºö 12345678910111213student1 = { &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}student2 = { &apos;id&apos;: &apos;20170202&apos;, &apos;name&apos;: &apos;Mike&apos;, &apos;age&apos;: 21, &apos;gender&apos;: &apos;male&apos;} 12result = collection.insert([student1, student2])print(result) ËøîÂõûÁªìÊûúÊòØÂØπÂ∫îÁöÑ_idÁöÑÈõÜÂêàÔºö [ObjectId('5932a80115c2606a59e8a048'), ObjectId('5932a80115c2606a59e8a049')]ÂÆûÈôÖ‰∏äÔºåÂú®PyMongo 3.xÁâàÊú¨‰∏≠ÔºåÂÆòÊñπÂ∑≤Áªè‰∏çÊé®Ëçê‰ΩøÁî®insert()ÊñπÊ≥ï‰∫Ü„ÄÇÂΩìÁÑ∂ÔºåÁªßÁª≠‰ΩøÁî®‰πüÊ≤°Êúâ‰ªÄ‰πàÈóÆÈ¢ò„ÄÇÂÆòÊñπÊé®Ëçê‰ΩøÁî®insert_one()Âíåinsert_many()ÊñπÊ≥ïÊù•ÂàÜÂà´ÊèíÂÖ•ÂçïÊù°ËÆ∞ÂΩïÂíåÂ§öÊù°ËÆ∞ÂΩïÔºåÁ§∫‰æãÂ¶Ç‰∏ãÔºö 12345678910student = { &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}result = collection.insert_one(student)print(result)print(result.inserted_id) ËøêË°åÁªìÊûúÂ¶Ç‰∏ãÔºö 12&lt;pymongo.results.InsertOneResult object at 0x10d68b558&gt;5932ab0f15c2606f0c1cf6c5 ‰∏éinsert()ÊñπÊ≥ï‰∏çÂêåÔºåËøôÊ¨°ËøîÂõûÁöÑÊòØInsertOneResultÂØπË±°ÔºåÊàë‰ª¨ÂèØ‰ª•Ë∞ÉÁî®ÂÖ∂inserted_idÂ±ûÊÄßËé∑Âèñ_id„ÄÇ ÂØπ‰∫éinsert_many()ÊñπÊ≥ïÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÊï∞ÊçÆ‰ª•ÂàóË°®ÂΩ¢Âºè‰º†ÈÄíÔºåÁ§∫‰æãÂ¶Ç‰∏ãÔºö 1234567891011121314student1 = { &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}student2 = { &apos;id&apos;: &apos;20170202&apos;, &apos;name&apos;: &apos;Mike&apos;, &apos;age&apos;: 21, &apos;gender&apos;: &apos;male&apos;} 123result = collection.insert_many([student1, student2])print(result)print(result.inserted_ids) ËøêË°åÁªìÊûúÂ¶Ç‰∏ãÔºö 12&lt;pymongo.results.InsertManyResult object at 0x101dea558&gt;[ObjectId(&apos;5932abf415c2607083d3b2ac&apos;), ObjectId(&apos;5932abf415c2607083d3b2ad&apos;)] ËØ•ÊñπÊ≥ïËøîÂõûÁöÑÁ±ªÂûãÊòØInsertManyResultÔºåË∞ÉÁî®inserted_idsÂ±ûÊÄßÂèØ‰ª•Ëé∑ÂèñÊèíÂÖ•Êï∞ÊçÆÁöÑ_idÂàóË°®„ÄÇ 6. Êü•ËØ¢ÊèíÂÖ•Êï∞ÊçÆÂêéÔºåÊàë‰ª¨ÂèØ‰ª•Âà©Áî®find_one()Êàñfind()ÊñπÊ≥ïËøõË°åÊü•ËØ¢ÔºåÂÖ∂‰∏≠find_one()Êü•ËØ¢ÂæóÂà∞ÁöÑÊòØÂçï‰∏™ÁªìÊûúÔºåfind()ÂàôËøîÂõû‰∏Ä‰∏™ÁîüÊàêÂô®ÂØπË±°„ÄÇÁ§∫‰æãÂ¶Ç‰∏ãÔºö 123result = collection.find_one({&apos;name&apos;: &apos;Mike&apos;})print(type(result))print(result) ËøôÈáåÊàë‰ª¨Êü•ËØ¢name‰∏∫MikeÁöÑÊï∞ÊçÆÔºåÂÆÉÁöÑËøîÂõûÁªìÊûúÊòØÂ≠óÂÖ∏Á±ªÂûãÔºåËøêË°åÁªìÊûúÂ¶Ç‰∏ãÔºö 12&lt;class &apos;dict&apos;&gt;{&apos;_id&apos;: ObjectId(&apos;5932a80115c2606a59e8a049&apos;), &apos;id&apos;: &apos;20170202&apos;, &apos;name&apos;: &apos;Mike&apos;, &apos;age&apos;: 21, &apos;gender&apos;: &apos;male&apos;} ÂèØ‰ª•ÂèëÁé∞ÔºåÂÆÉÂ§ö‰∫Ü_idÂ±ûÊÄßÔºåËøôÂ∞±ÊòØMongoDBÂú®ÊèíÂÖ•ËøáÁ®ã‰∏≠Ëá™Âä®Ê∑ªÂä†ÁöÑ„ÄÇ Ê≠§Â§ñÔºåÊàë‰ª¨‰πüÂèØ‰ª•Ê†πÊçÆObjectIdÊù•Êü•ËØ¢ÔºåÊ≠§Êó∂ÈúÄË¶Å‰ΩøÁî®bsonÂ∫ìÈáåÈù¢ÁöÑobjectidÔºö 1234from bson.objectid import ObjectIdresult = collection.find_one({&apos;_id&apos;: ObjectId(&apos;593278c115c2602667ec6bae&apos;)})print(result) ÂÖ∂Êü•ËØ¢ÁªìÊûú‰æùÁÑ∂ÊòØÂ≠óÂÖ∏Á±ªÂûãÔºåÂÖ∑‰ΩìÂ¶Ç‰∏ãÔºö {'_id': ObjectId('593278c115c2602667ec6bae'), 'id': '20170101', 'name': 'Jordan', 'age': 20, 'gender': 'male'}ÂΩìÁÑ∂ÔºåÂ¶ÇÊûúÊü•ËØ¢ÁªìÊûú‰∏çÂ≠òÂú®ÔºåÂàô‰ºöËøîÂõûNone„ÄÇ ÂØπ‰∫éÂ§öÊù°Êï∞ÊçÆÁöÑÊü•ËØ¢ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®find()ÊñπÊ≥ï„ÄÇ‰æãÂ¶ÇÔºåËøôÈáåÊü•ÊâæÂπ¥ÈæÑ‰∏∫20ÁöÑÊï∞ÊçÆÔºåÁ§∫‰æãÂ¶Ç‰∏ãÔºö 1234results = collection.find({&apos;age&apos;: 20})print(results)for result in results: print(result) ËøêË°åÁªìÊûúÂ¶Ç‰∏ãÔºö 1234&lt;pymongo.cursor.Cursor object at 0x1032d5128&gt;{&apos;_id&apos;: ObjectId(&apos;593278c115c2602667ec6bae&apos;), &apos;id&apos;: &apos;20170101&apos;, &apos;name&apos;: &apos;Jordan&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}{&apos;_id&apos;: ObjectId(&apos;593278c815c2602678bb2b8d&apos;), &apos;id&apos;: &apos;20170102&apos;, &apos;name&apos;: &apos;Kevin&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;}{&apos;_id&apos;: ObjectId(&apos;593278d815c260269d7645a8&apos;), &apos;id&apos;: &apos;20170103&apos;, &apos;name&apos;: &apos;Harden&apos;, &apos;age&apos;: 20, &apos;gender&apos;: &apos;male&apos;} ËøîÂõûÁªìÊûúÊòØCursorÁ±ªÂûãÔºåÂÆÉÁõ∏ÂΩì‰∫é‰∏Ä‰∏™ÁîüÊàêÂô®ÔºåÊàë‰ª¨ÈúÄË¶ÅÈÅçÂéÜÂèñÂà∞ÊâÄÊúâÁöÑÁªìÊûúÔºåÂÖ∂‰∏≠ÊØè‰∏™ÁªìÊûúÈÉΩÊòØÂ≠óÂÖ∏Á±ªÂûã„ÄÇ Â¶ÇÊûúË¶ÅÊü•ËØ¢Âπ¥ÈæÑÂ§ß‰∫é20ÁöÑÊï∞ÊçÆÔºåÂàôÂÜôÊ≥ïÂ¶Ç‰∏ãÔºö results = collection.find({'age': {'$gt': 20}})ËøôÈáåÊü•ËØ¢ÁöÑÊù°‰ª∂ÈîÆÂÄºÂ∑≤Áªè‰∏çÊòØÂçïÁ∫ØÁöÑÊï∞Â≠ó‰∫ÜÔºåËÄåÊòØ‰∏Ä‰∏™Â≠óÂÖ∏ÔºåÂÖ∂ÈîÆÂêç‰∏∫ÊØîËæÉÁ¨¶Âè∑$gtÔºåÊÑèÊÄùÊòØÂ§ß‰∫éÔºåÈîÆÂÄº‰∏∫20„ÄÇ ËøôÈáåÂ∞ÜÊØîËæÉÁ¨¶Âè∑ÂΩíÁ∫≥‰∏∫‰∏ãË°®„ÄÇËÖæËÆØ‰∫ëËá™Â™í‰ΩìÂàÜ‰∫´ËÆ°Âàí","link":"/ÁºñÁ®ã/Python/pymongo/"},{"title":"PythonÂà©Áî®openpyxlÊù•Êìç‰ΩúExcel","text":"Ëá™Âä®ÂåñÁöÑÂ∑•‰ΩúÊòØ‰∏∫‰∫Ü‰ªéÁπÅÁêêÈáçÂ§çÁöÑÂä≥Âä®‰∏≠Êå£ËÑ±Âá∫Êù•ÔºåÊääÁ≤æÂäõÁî®Âú®Êï∞ÊçÆÂàÜÊûê‰∏ä„ÄÇËá™Âä®ÂåñÊñπÈù¢pythonÊòØÂú®Â•Ω‰∏çËøá‰∫ÜÔºå‰∏çËøáÊó¢ÁÑ∂Ë¶ÅÊèê‰∫§Êä•Ë°®Ôºå Â∞±‰∏çÂÖçË¶ÅÁæéËßÇ‰ªÄ‰πàÁöÑ„ÄÇpandasËôΩÁÑ∂ÂæàÂº∫Â§ßÔºå‰ΩÜÊòØÊó†Ê≥ïÂØπExcelÂÆåÂÖ®Êìç‰ΩúÔºåÁé∞Â≠¶vbaÊúâÁÇπÊù•‰∏çÂèä„ÄÇ‰∫éÊòØÂ∞±ÊâæÂà∞Ëøô‰∏™openpyxlÂåÖÔºåÁî®pythonÊù•‰øÆÊîπExcel„ÄÇ Â¶Ç‰∏ãÊâÄÁ§∫Ôºö 123456from openpyxl import load_workbookfrom openpyxl.styles import colors, Font, Fill, NamedStylefrom openpyxl.styles import PatternFill, Border, Side, Alignment # Âä†ËΩΩÊñá‰ª∂wb = load_workbook(&apos;./5a.xlsx&apos;) workbookÔºö Â∑•‰ΩúÁ∞øÔºå‰∏Ä‰∏™excelÊñá‰ª∂ÂåÖÂê´Â§ö‰∏™sheet„ÄÇ worksheetÔºöÂ∑•‰ΩúË°®Ôºå‰∏Ä‰∏™workbookÊúâÂ§ö‰∏™ÔºåË°®ÂêçËØÜÂà´ÔºåÂ¶Ç‚Äúsheet1‚Äù,‚Äúsheet2‚ÄùÁ≠â„ÄÇ cellÔºö ÂçïÂÖÉÊ†ºÔºåÂ≠òÂÇ®Êï∞ÊçÆÂØπË±°ÊñáÁ´†ÊâÄÁî®Ë°®Ê†º‰∏∫Ôºö Êìç‰Ωúsheet12345678# ËØªÂèñsheetnameprint(&apos;ËæìÂá∫Êñá‰ª∂ÊâÄÊúâÂ∑•‰ΩúË°®ÂêçÔºö\\n&apos;, wb.sheetnames)ws = wb[&apos;5a&apos;] # ÊàñËÄÖ‰∏çÁü•ÈÅìÂêçÂ≠óÊó∂sheet_names = wb.sheetnames # ËøîÂõû‰∏Ä‰∏™ÂàóË°®ws2 = wb[sheet_names[0]] # index‰∏∫0‰∏∫Á¨¨‰∏ÄÂº†Ë°®print(ws is ws2) # ‰∏§ËÄÖÊòØ‰∏ÄÊ†∑ÁöÑ ËæìÂá∫Êñá‰ª∂ÊâÄÊúâÂ∑•‰ΩúË°®ÂêçÔºö[‚Äò5a‚Äô]True 1234# ‰øÆÊîπsheetname ws.title = &apos;5a_&apos;print(&apos;‰øÆÊîπsheetnameÔºö\\n&apos;, wb.sheetnames) ‰øÆÊîπsheetnameÔºö[‚Äò5a_‚Äô] 12345678# ÂàõÂª∫Êñ∞ÁöÑsheet# ÂàõÂª∫ÁöÑÊñ∞Ë°®ÂøÖÈ°ªË¶ÅËµãÂÄºÁªô‰∏Ä‰∏™ÂØπË±°Ôºå‰∏çÁÑ∂Âè™ÊúâÂêçÂ≠ó‰ΩÜÊòØÊ≤°ÊúâÂÆûÈôÖÁöÑÊñ∞Ë°® ws4 = wb.create_sheet(index=0, title=&apos;newsheet&apos;)# ‰ªÄ‰πàÂèÇÊï∞ÈÉΩ‰∏çÂÜôÁöÑËØùÔºåÈªòËÆ§ÊèíÂÖ•Âà∞ÊúÄÂêé‰∏Ä‰∏™‰ΩçÁΩÆ‰∏îÂêçÂ≠ó‰∏∫sheet,sheet1...ÊåâÁÖßÈ°∫Â∫èÊéíÂàó ws5 = wb.create_sheet()print(&apos;ÂàõÂª∫Êñ∞ÁöÑsheet:\\n&apos;, wb.sheetnames) ÂàõÂª∫Êñ∞ÁöÑsheet:[‚Äònewsheet‚Äô, ‚Äò5a_‚Äô, ‚ÄòSheet‚Äô] 123# Âà†Èô§sheetwb.remove(ws4) # ËøôÈáåÂè™ËÉΩÂÜôworksheetÂØπË±°Ôºå‰∏çËÉΩÂÜôsheetnameprint(&apos;Âà†Èô§sheetÔºö\\n&apos;, wb.sheetnames) Âà†Èô§sheetÔºö[‚Äò5a_‚Äô, ‚ÄòSheet‚Äô] 1234567# ‰øÆÊîπsheetÈÄâÈ°πÂç°ËÉåÊôØËâ≤ÔºåÈªòËÆ§‰∏∫ÁôΩËâ≤ÔºåËÆæÁΩÆ‰∏∫RRGGBBÊ®°Âºèws.sheet_properties.tabColor = &quot;FFA500&quot; # ËØªÂèñÊúâÊïàÂå∫Âüü print(&apos;ÊúÄÂ§ßÂàóÊï∞‰∏∫Ôºö&apos;, ws.max_column)print(&apos;ÊúÄÂ§ßË°åÊï∞‰∏∫Ôºö&apos;, ws.max_row) ÊúÄÂ§ßÂàóÊï∞‰∏∫Ôºö 5ÊúÄÂ§ßË°åÊï∞‰∏∫Ôºö 17 1234567# ÊèíÂÖ•Ë°åÂíåÂàóws.insert_rows(1) # Âú®Á¨¨‰∏ÄË°åÊèíÂÖ•‰∏ÄË°åws.insert_cols(2, 4) # ‰ªéÁ¨¨‰∫åÂàóÂºÄÂßãÊèíÂÖ•ÂõõÂàó # Âà†Èô§Ë°åÂíåÂàóws.delete_cols(6, 3) # ‰ªéÁ¨¨ÂÖ≠ÂàóÔºàFÂàóÔºâÂºÄÂßãÔºåÂà†Èô§3ÂàóÂç≥ÔºàF:HÔºâws.delete_rows(3) # Âà†Èô§Á¨¨‰∏âË°å ÂçïÂÖÉÊ†ºÊìç‰Ωú12345# ËØªÂèñc = ws[&apos;A1&apos;]c1 = ws.cell(row=1, column=2)print(c, c1)print(c.value, c1.value) &lt;Cell ‚Äò5a_‚Äô.A1&gt; &lt;Cell ‚Äò5a_‚Äô.B1&gt;dth_title Province 1234# ‰øÆÊîπws[&apos;A1&apos;] = &apos;ÊôØÂå∫ÂêçÁß∞&apos;ws.cell(1, 2).value = &apos;ÁúÅ‰ªΩ&apos;print(c.value, c1.value) ÊôØÂå∫ÂêçÁß∞ ÁúÅ‰ªΩ 1234567891011# ËØªÂèñÂ§ö‰∏™ÂçïÂÖÉÊ†º cell_range = ws[&apos;A1&apos;:&apos;D5&apos;]colC = ws[&apos;C&apos;]col_range = ws[&apos;C:D&apos;]row10 = ws[10]row_range = ws[5:10]# ÂÖ∂ËøîÂõûÁöÑÁªìÊûúÈÉΩÊòØ‰∏Ä‰∏™ÂåÖÂê´ÂçïÂÖÉÊ†ºÁöÑÂÖÉÁªÑprint(type(cell_range))for i in row10: print(i) # row10Âè™ÊúâÊúâÊïàÂçïÂÖÉÊ†º &lt;class ‚Äòtuple‚Äô&gt;&lt;Cell ‚Äò5a_‚Äô.A10&gt;&lt;Cell ‚Äò5a_‚Äô.B10&gt;&lt;Cell ‚Äò5a_‚Äô.C10&gt;&lt;Cell ‚Äò5a_‚Äô.D10&gt;&lt;Cell ‚Äò5a_‚Äô.E10&gt; 123456# ÊåâÁÖßË°åÂàóÊìç‰Ωúfor row in ws.iter_rows(min_row=1, max_row=3, min_col=1, max_col=2): for cell in row: print(cell)# ‰πüÂèØ‰ª•Áî®worksheet.iter_col(),Áî®Ê≥ïÈÉΩ‰∏ÄÊ†∑ &lt;Cell ‚Äò5a_‚Äô.A1&gt;&lt;Cell ‚Äò5a_‚Äô.B1&gt;&lt;Cell ‚Äò5a_‚Äô.A2&gt;&lt;Cell ‚Äò5a_‚Äô.B2&gt;&lt;Cell ‚Äò5a_‚Äô.A3&gt;&lt;Cell ‚Äò5a_‚Äô.B3&gt; 1234567891011121314# ÂêàÂπ∂ÂçïÂÖÉÊ†ºws.merge_cells(&apos;F1:G1&apos;)ws[&apos;F1&apos;] = &apos;ÂêàÂπ∂‰∏§‰∏™ÂçïÂÖÉÊ†º&apos;# ÊàñËÄÖws.merge_cells(start_row=2, start_column=6, end_row=3, end_column=8)ws.cell(2, 6).value = &apos;ÂêàÂπ∂‰∏â‰∏™ÂçïÂÖÉÊ†º&apos; # ÂèñÊ∂àÂêàÂπ∂ÂçïÂÖÉÊ†ºws.unmerge_cells(&apos;F1:G1&apos;)# ÊàñËÄÖws.unmerge_cells(start_row=2, start_column=6, end_row=3, end_column=8) wb.save(&apos;./5a.xlsx&apos;)# ‰øùÂ≠ò‰πãÂâçÁöÑÊìç‰Ωú,‰øùÂ≠òÊñá‰ª∂Êó∂ÔºåÊñá‰ª∂ÂøÖÈ°ªÊòØÂÖ≥Èó≠ÁöÑÔºÅÔºÅÔºÅ Ê≥®ÊÑèÔºÅÔºÅÔºÅÔºåopenpyxlÂØπExcelÁöÑ‰øÆÊîπÂπ∂‰∏çÂÉèÊòØxlwingsÂåÖ‰∏ÄÊ†∑ÊòØÂÆûÊó∂ÁöÑÔºå‰ªñÁöÑ‰øÆÊîπÊòØÊöÇÊó∂‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÔºåÊâÄ‰ª•ÂΩì ÂêéÈù¢ÁöÑ‰øÆÊîπ‰æãÂ¶ÇÊàëÊé•‰∏ãÊù•Ë¶ÅÂú®Á¨¨‰∏ÄË°åÊèíÂÖ•Êñ∞ÁöÑ‰∏ÄË°åÂÅöÊ†áÈ¢òÔºåÈÇ£‰πàÂΩìÊàëÂØπÊñ∞ÁöÑA1ÂçïÂÖÉÊ†ºÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåËøòÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂéüA1(Áé∞Âú®ÊòØA2)ÁöÑÂçïÂÖÉÊ†º ÂéüÊúâÁöÑ‰øÆÊîπÂ∞±‰ºöË¢´Ë¶ÜÁõñ„ÄÇÊâÄ‰ª•Ë¶ÅÂÖà‰øùÂ≠òÔºåÊàñËÄÖ‰ªé‰∏ÄÂºÄÂßãÂ∞±ËÆ°ÂàíÂ•ΩÊõ¥ÊîπÊìç‰ΩúÈÅøÂÖçËøôÊ†∑ÁöÑ‰∫ãÊÉÖÂèëÁîü„ÄÇ Ê†∑Âºè‰øÆÊîπÂçï‰∏™ÂçïÂÖÉÊ†ºÊ†∑Âºè123456789101112131415161718192021222324252627282930313233343536373839wb = load_workbook(&apos;./5a.xlsx&apos;) # ËØªÂèñ‰øÆÊîπÂêéÁöÑÊñá‰ª∂ws = wb[&apos;5a_&apos;]# Êàë‰ª¨Êù•ËÆæÁΩÆ‰∏Ä‰∏™Ë°®Â§¥ws.insert_rows(1) # Âú®Á¨¨‰∏ÄË°åÊèíÂÖ•Êñ∞ÁöÑ‰∏ÄË°åws.merge_cells(&apos;A1:E1&apos;) # ÂêàÂπ∂ÂçïÂÖÉÊ†ºa1 = ws[&apos;A1&apos;]ws[&apos;A1&apos;] = &apos;5AÁ∫ßÈ£éÊôØÂå∫ÂêçÂçï&apos; # ËÆæÁΩÆÂ≠ó‰Ωìft = Font(name=&apos;ÂæÆËΩØÈõÖÈªë&apos;, color=&apos;000000&apos;, size=15, b=True)&quot;&quot;&quot;name:Â≠ó‰ΩìÂêçÁß∞color:È¢úËâ≤ÈÄöÂ∏∏ÊòØRGBÊàñaRGBÂçÅÂÖ≠ËøõÂà∂ÂÄºb(bold):Âä†Á≤óÔºàboolÔºâi(italic):ÂÄæÊñú(bool)shadowÔºöÈò¥ÂΩ±ÔºàboolÔºâunderlineÔºö‰∏ãÂàíÁ∫øÔºà‚ÄòdoubleAccounting‚Äô, ‚Äòsingle‚Äô, ‚Äòdouble‚Äô, ‚ÄòsingleAccounting‚ÄôÔºâcharset:Â≠óÁ¨¶ÈõÜ(int)strike:Âà†Èô§Á∫ø(bool)&quot;&quot;&quot;a1.font = ft # ËÆæÁΩÆÊñáÊú¨ÂØπÈΩê ali = Alignment(horizontal=&apos;center&apos;, vertical=&apos;center&apos;)&quot;&quot;&quot;horizontal:Ê∞¥Âπ≥ÂØπÈΩê(&apos;centerContinuous&apos;, &apos;general&apos;, &apos;distributed&apos;, &apos;left&apos;, &apos;fill&apos;, &apos;center&apos;, &apos;justify&apos;, &apos;right&apos;)vertical:ÂûÇÁõ¥ÂØπÈΩêÔºà&apos;distributed&apos;, &apos;top&apos;, &apos;center&apos;, &apos;justify&apos;, &apos;bottom&apos;Ôºâ&quot;&quot;&quot;a1.alignment = ali # ËÆæÁΩÆÂõæÊ°àÂ°´ÂÖÖ fill = PatternFill(&apos;solid&apos;, fgColor=&apos;FFA500&apos;)# È¢úËâ≤‰∏ÄËà¨‰ΩøÁî®ÂçÅÂÖ≠ËøõÂà∂RGB# &apos;solid&apos;ÊòØÂõæÊ°àÂ°´ÂÖÖÁ±ªÂûãÔºåËØ¶ÁªÜÂèØÊü•ÈòÖÊñáÊ°£ a1.fill = fill openpyxl.styles.fillsÊ®°ÂùóÂèÇÊï∞ÊñáÊ°£ 123456789101112131415161718192021# ËÆæÁΩÆËæπÊ°Übian = Side(style=&apos;medium&apos;, color=&apos;000000&apos;) # ËÆæÁΩÆËæπÊ°ÜÊ†∑Âºè&quot;&quot;&quot;style:ËæπÊ°ÜÁ∫øÁöÑÈ£éÊ†º{&apos;dotted&apos;,&apos;slantDashDot&apos;,&apos;dashDot&apos;,&apos;hair&apos;,&apos;mediumDashDot&apos;, &apos;dashed&apos;,&apos;mediumDashed&apos;,&apos;thick&apos;,&apos;dashDotDot&apos;,&apos;medium&apos;, &apos;double&apos;,&apos;thin&apos;,&apos;mediumDashDotDot&apos;}&quot;&quot;&quot; border = Border(top=bian, bottom=bian, left=bian, right=bian)&quot;&quot;&quot;topÔºà‰∏äÔºâ,bottomÔºà‰∏ãÔºâ,leftÔºàÂ∑¶Ôºâ,rightÔºàÂè≥Ôºâ:ÂøÖÈ°ªÊòØ SideÁ±ªÂûãdiagonal: ÊñúÁ∫ø sideÁ±ªÂûã diagonalDownd: Âè≥ÊñúÁ∫ø booldiagonalDown: Â∑¶ÊñúÁ∫ø bool&quot;&quot;&quot; # a1.border = borderfor item in ws[&apos;A1:E1&apos;][0]: # ÂéªÂÖÉÁªÑ‰∏≠ÁöÑÊØè‰∏Ä‰∏™cellÊõ¥ÊîπÊ†∑Âºè item.border = border wb.save(&apos;./5a.xlsx&apos;) # ‰øùÂ≠òÊõ¥Êîπ ÂÜçÊ¨°Ê≥®ÊÑèÔºÅÔºÅÔºÅÔºö ‰∏çËÉΩ‰ΩøÁî® a1.border = borderÔºåÂê¶ÂàôÂè™‰ºöÂ¶Ç‰∏ãÂõæÊÉÖÂÜµÔºåB1ÔºöE1ÂçïÂÖÉÊ†ºÊ≤°ÊúâÁ∫ø„ÄÇÊàë‰∏™‰∫∫ËÆ§‰∏∫ÊòØÂõ†‰∏∫Á∫øÊ°ÜÊ∂âÂèäÂà∞Áõ∏ÈÇªÂçïÂÖÉÊ†ºËæπÊ°ÜÁöÑÊîπÂä®ÊâÄ‰ª•ÈúÄË¶ÅÂçïÁã¨ÂØπÊØè‰∏™ÂçïÂÖÉÊ†º‰øÆÊîπÊâçË°å„ÄÇ‰∏çËÉΩ‰ΩøÁî®ws[‚ÄòA1:E1‚Äô].border = border,Áî±ÂâçÈù¢ÁöÑÂÜÖÂÆπÂèØÁü•ÔºåopenpyxlÁöÑÂ§ö‰∏™ÂçïÂÖÉÊ†ºÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™ÂÖÉÁªÑÔºåËÄåÂÖÉÁªÑÊòØÊ≤°ÊúâstyleÁöÑÊñπÊ≥ïÁöÑ,ÊâÄ‰ª•ÂøÖÈ°ª‰∏Ä‰∏™‰∏Ä‰∏™ÊîπÔºÅÔºÅÂÖ∂ÂÆûÂÆòÊñπÊúâÂÖ∂‰ªñÂäûÊ≥ïÔºåÂêéÈù¢ËÆ≤„ÄÇ ÊåâÂàóÊàñË°åËÆæÁΩÆÊ†∑Âºè12345678910111213141516171819202122232425262728293031323334353637383940# Áé∞Âú®Êàë‰ª¨ÂØπÊï¥‰∏™Ë°®ËøõË°åËÆæÁΩÆ # ËØªÂèñwb = load_workbook(&apos;./5a.xlsx&apos;)ws = wb[&apos;5a_&apos;] # ËØªÂèñÊï∞ÊçÆË°®Ê†ºËåÉÂõ¥rows = ws.max_rowcols = ws.max_column # Â≠ó‰Ωìfont1 = Font(name=&apos;ÂæÆËΩØÈõÖÈªë&apos;, size=11, b=True)font2 = Font(name=&apos;ÂæÆËΩØÈõÖÈªë&apos;, size=11) # ËæπÊ°Üline_t = Side(style=&apos;thin&apos;, color=&apos;000000&apos;) # ÁªÜËæπÊ°Üline_m = Side(style=&apos;medium&apos;, color=&apos;000000&apos;) # Á≤óËæπÊ°Üborder1 = Border(top=line_m, bottom=line_t, left=line_t, right=line_t)# ‰∏éÊ†áÈ¢òÁõ∏ÈÇªÁöÑËæπËÆæÁΩÆ‰∏éÊ†áÈ¢ò‰∏ÄÊ†∑border2 = Border(top=line_t, bottom=line_t, left=line_t, right=line_t) # Â°´ÂÖÖfill = PatternFill(&apos;solid&apos;, fgColor=&apos;CFCFCF&apos;) # ÂØπÈΩêalignment = Alignment(horizontal=&apos;center&apos;, vertical=&apos;center&apos;) # Â∞ÜÊ†∑ÂºèÊâìÂåÖÂëΩÂêçsty1 = NamedStyle(name=&apos;sty1&apos;, font=font1, fill=fill, border=border1, alignment=alignment)sty2 = NamedStyle(name=&apos;sty2&apos;, font=font2, border=border2, alignment=alignment) for r in range(2, rows+1): for c in range(1, cols): if r == 2: ws.cell(r, c).style = sty1 else: ws.cell(r, c).style = sty2 wb.save(&apos;./5a.xlsx&apos;) ÊúÄÂêéÔºö","link":"/ÁºñÁ®ã/Python/python-excel/"},{"title":"pythonÊìç‰ΩúexcelÁöÑÂåÖ(openpyxl„ÄÅxlsxwriter)","text":"Áé∞Âú®ÊîØÊåÅpythonÊìç‰ΩúexcelÁöÑÂåÖÊúâ‰∏ãÂàóËøô‰∫õ ÂÆòÁΩë‰∏äÊúÄÊé®ËçêÁöÑÊòØopenpyxlÔºåÂÖ∂‰ªñÂåÖÊîØÊåÅËæÉËÄÅÁöÑexcelÁâàÊú¨„ÄÇ xlsxwriterÊó†Ê≥ïÂØπÊâìÂºÄÁöÑexcelËøõË°åÂÜôÊìç‰ΩúÔºåexcelÂøÖÈ°ªÂ§Ñ‰∫éÂÖ≥Èó≠Áä∂ÊÄÅÊâçËÉΩÂÜôÊàêÂäü„ÄÇ xlswriter Âü∫Êú¨‰ª£Á†ÅÔºö12345678import xlsxwriterworkbook = xlsxwriter.Workbook(&apos;hello.xlsx&apos;)worksheet = workbook.add_worksheet()worksheet.write(&apos;A1&apos;, &apos;Hello world&apos;)workbook.close() openpyxlÂü∫Êú¨‰ª£Á†ÅÔºö1234567891011121314from openpyxl import Workbookwb = Workbook()ws = wb.active#ËÆæÁΩÆÂçïÂÖÉÊ†ºÂÄºws[&apos;A1&apos;] = 42#Âä†ÂÖ•‰∏ÄË°åÊï∞ÊçÆws.append([1, 2, 3])import datetime#python Á±ªÂûãÊï∞ÊçÆ‰ºöË¢´Ëá™Âä®ËΩ¨Êç¢ws[&apos;A2&apos;] = datetime.datetime.now()#‰øùÂ≠ò‰øÆÊîπwb.save(&quot;sample.xlsx&quot;) Êù•Ê∫ê:ËÑöÊú¨‰πãÂÆ∂","link":"/ÁºñÁ®ã/Python/python-writer/"},{"title":"Êï∞ÊçÆÁ±ªÂûãÂíåÂèòÈáè","text":"Python Êï∞ÊçÆÁ±ªÂûãÂíåÂèòÈáè Êï∞ÊçÆÁ±ªÂûãËÆ°ÁÆóÊú∫È°æÂêçÊÄù‰πâÂ∞±ÊòØÂèØ‰ª•ÂÅöÊï∞Â≠¶ËÆ°ÁÆóÁöÑÊú∫Âô®ÔºåÂõ†Ê≠§ÔºåËÆ°ÁÆóÊú∫Á®ãÂ∫èÁêÜÊâÄÂΩìÁÑ∂Âú∞ÂèØ‰ª•Â§ÑÁêÜÂêÑÁßçÊï∞ÂÄº„ÄÇ‰ΩÜÊòØÔºåËÆ°ÁÆóÊú∫ËÉΩÂ§ÑÁêÜÁöÑËøú‰∏çÊ≠¢Êï∞ÂÄºÔºåËøòÂèØ‰ª•Â§ÑÁêÜÊñáÊú¨„ÄÅÂõæÂΩ¢„ÄÅÈü≥È¢ë„ÄÅËßÜÈ¢ë„ÄÅÁΩëÈ°µÁ≠âÂêÑÁßçÂêÑÊ†∑ÁöÑÊï∞ÊçÆÔºå‰∏çÂêåÁöÑÊï∞ÊçÆÔºåÈúÄË¶ÅÂÆö‰πâ‰∏çÂêåÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇÂú®Python‰∏≠ÔºåËÉΩÂ§üÁõ¥Êé•Â§ÑÁêÜÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâ‰ª•‰∏ãÂá†ÁßçÔºö Êï¥Êï∞PythonÂèØ‰ª•Â§ÑÁêÜ‰ªªÊÑèÂ§ßÂ∞èÁöÑÊï¥Êï∞ÔºåÂΩìÁÑ∂ÂåÖÊã¨Ë¥üÊï¥Êï∞ÔºåÂú®Á®ãÂ∫è‰∏≠ÁöÑË°®Á§∫ÊñπÊ≥ïÂíåÊï∞Â≠¶‰∏äÁöÑÂÜôÊ≥ï‰∏ÄÊ®°‰∏ÄÊ†∑Ôºå‰æãÂ¶ÇÔºö1Ôºå100Ôºå-8080Ôºå0ÔºåÁ≠âÁ≠â„ÄÇ ËÆ°ÁÆóÊú∫Áî±‰∫é‰ΩøÁî®‰∫åËøõÂà∂ÔºåÊâÄ‰ª•ÔºåÊúâÊó∂ÂÄôÁî®ÂçÅÂÖ≠ËøõÂà∂Ë°®Á§∫Êï¥Êï∞ÊØîËæÉÊñπ‰æøÔºåÂçÅÂÖ≠ËøõÂà∂Áî®0xÂâçÁºÄÂíå0-9Ôºåa-fË°®Á§∫Ôºå‰æãÂ¶ÇÔºö0xff00Ôºå0xa5b4c3d2ÔºåÁ≠âÁ≠â„ÄÇ ÊµÆÁÇπÊï∞ÊµÆÁÇπÊï∞‰πüÂ∞±ÊòØÂ∞èÊï∞Ôºå‰πãÊâÄ‰ª•Áß∞‰∏∫ÊµÆÁÇπÊï∞ÔºåÊòØÂõ†‰∏∫ÊåâÁÖßÁßëÂ≠¶ËÆ∞Êï∞Ê≥ïË°®Á§∫Êó∂Ôºå‰∏Ä‰∏™ÊµÆÁÇπÊï∞ÁöÑÂ∞èÊï∞ÁÇπ‰ΩçÁΩÆÊòØÂèØÂèòÁöÑÔºåÊØîÂ¶ÇÔºå1.23x109Âíå12.3x108ÊòØÂÆåÂÖ®Áõ∏Á≠âÁöÑ„ÄÇÊµÆÁÇπÊï∞ÂèØ‰ª•Áî®Êï∞Â≠¶ÂÜôÊ≥ïÔºåÂ¶Ç1.23Ôºå3.14Ôºå-9.01ÔºåÁ≠âÁ≠â„ÄÇ‰ΩÜÊòØÂØπ‰∫éÂæàÂ§ßÊàñÂæàÂ∞èÁöÑÊµÆÁÇπÊï∞ÔºåÂ∞±ÂøÖÈ°ªÁî®ÁßëÂ≠¶ËÆ°Êï∞Ê≥ïË°®Á§∫ÔºåÊää10Áî®eÊõø‰ª£Ôºå1.23x109Â∞±ÊòØ1.23e9ÔºåÊàñËÄÖ12.3e8Ôºå0.000012ÂèØ‰ª•ÂÜôÊàê1.2e-5ÔºåÁ≠âÁ≠â„ÄÇ Êï¥Êï∞ÂíåÊµÆÁÇπÊï∞Âú®ËÆ°ÁÆóÊú∫ÂÜÖÈÉ®Â≠òÂÇ®ÁöÑÊñπÂºèÊòØ‰∏çÂêåÁöÑÔºåÊï¥Êï∞ËøêÁÆóÊ∞∏ËøúÊòØÁ≤æÁ°ÆÁöÑÔºàÈô§Ê≥ïÈöæÈÅì‰πüÊòØÁ≤æÁ°ÆÁöÑÔºüÊòØÁöÑÔºÅÔºâÔºåËÄåÊµÆÁÇπÊï∞ËøêÁÆóÂàôÂèØËÉΩ‰ºöÊúâÂõõËàç‰∫îÂÖ•ÁöÑËØØÂ∑Æ„ÄÇ Â≠óÁ¨¶‰∏≤Â≠óÁ¨¶‰∏≤ÊòØ‰ª•ÂçïÂºïÂè∑‚ÄôÊàñÂèåÂºïÂè∑‚ÄùÊã¨Ëµ∑Êù•ÁöÑ‰ªªÊÑèÊñáÊú¨ÔºåÊØîÂ¶Ç‚Äôabc‚ÄôÔºå‚Äùxyz‚ÄùÁ≠âÁ≠â„ÄÇËØ∑Ê≥®ÊÑèÔºå‚Äô‚ÄôÊàñ‚Äù‚ÄùÊú¨Ë∫´Âè™ÊòØ‰∏ÄÁßçË°®Á§∫ÊñπÂºèÔºå‰∏çÊòØÂ≠óÁ¨¶‰∏≤ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂõ†Ê≠§ÔºåÂ≠óÁ¨¶‰∏≤‚Äôabc‚ÄôÂè™ÊúâaÔºåbÔºåcËøô3‰∏™Â≠óÁ¨¶„ÄÇÂ¶ÇÊûú‚ÄôÊú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÈÇ£Â∞±ÂèØ‰ª•Áî®‚Äù‚ÄùÊã¨Ëµ∑Êù•ÔºåÊØîÂ¶Ç‚ÄùI‚Äôm OK‚ÄùÂåÖÂê´ÁöÑÂ≠óÁ¨¶ÊòØIÔºå‚ÄôÔºåmÔºåÁ©∫Ê†ºÔºåOÔºåKËøô6‰∏™Â≠óÁ¨¶„ÄÇ Â¶ÇÊûúÂ≠óÁ¨¶‰∏≤ÂÜÖÈÉ®Êó¢ÂåÖÂê´‚ÄôÂèàÂåÖÂê´‚ÄùÊÄé‰πàÂäûÔºüÂèØ‰ª•Áî®ËΩ¨‰πâÂ≠óÁ¨¶\\Êù•Ê†áËØÜÔºåÊØîÂ¶ÇÔºö 'I\\'m \\&quot;OK\\&quot;!'Ë°®Á§∫ÁöÑÂ≠óÁ¨¶‰∏≤ÂÜÖÂÆπÊòØÔºö I'm &quot;OK&quot;!ËΩ¨‰πâÂ≠óÁ¨¶\\ÂèØ‰ª•ËΩ¨‰πâÂæàÂ§öÂ≠óÁ¨¶ÔºåÊØîÂ¶Ç\\nË°®Á§∫Êç¢Ë°åÔºå\\tË°®Á§∫Âà∂Ë°®Á¨¶ÔºåÂ≠óÁ¨¶\\Êú¨Ë∫´‰πüË¶ÅËΩ¨‰πâÔºåÊâÄ‰ª•\\Ë°®Á§∫ÁöÑÂ≠óÁ¨¶Â∞±ÊòØ\\ÔºåÂèØ‰ª•Âú®PythonÁöÑ‰∫§‰∫íÂºèÂëΩ‰ª§Ë°åÁî®print()ÊâìÂç∞Â≠óÁ¨¶‰∏≤ÁúãÁúãÔºö 12345678910&gt;&gt;&gt; print(&apos;I\\&apos;m ok.&apos;)I&apos;m ok.&gt;&gt;&gt; print(&apos;I\\&apos;m learning\\nPython.&apos;)I&apos;m learningPython.&gt;&gt;&gt; print(&apos;\\\\\\n\\\\&apos;)\\\\ Â¶ÇÊûúÂ≠óÁ¨¶‰∏≤ÈáåÈù¢ÊúâÂæàÂ§öÂ≠óÁ¨¶ÈÉΩÈúÄË¶ÅËΩ¨‰πâÔºåÂ∞±ÈúÄË¶ÅÂä†ÂæàÂ§ö\\Ôºå‰∏∫‰∫ÜÁÆÄÂåñÔºåPythonËøòÂÖÅËÆ∏Áî®r‚Äô‚ÄôË°®Á§∫‚Äô‚ÄôÂÜÖÈÉ®ÁöÑÂ≠óÁ¨¶‰∏≤ÈªòËÆ§‰∏çËΩ¨‰πâÔºåÂèØ‰ª•Ëá™Â∑±ËØïËØïÔºö 1234&gt;&gt;&gt; print(&apos;\\\\\\t\\\\&apos;)\\ \\&gt;&gt;&gt; print(r&apos;\\\\\\t\\\\&apos;)\\\\\\t\\\\ Â¶ÇÊûúÂ≠óÁ¨¶‰∏≤ÂÜÖÈÉ®ÊúâÂæàÂ§öÊç¢Ë°åÔºåÁî®\\nÂÜôÂú®‰∏ÄË°åÈáå‰∏çÂ•ΩÈòÖËØªÔºå‰∏∫‰∫ÜÁÆÄÂåñÔºåPythonÂÖÅËÆ∏Áî®‚Äô‚Äô‚Äô‚Ä¶‚Äô‚Äô‚ÄôÁöÑÊ†ºÂºèË°®Á§∫Â§öË°åÂÜÖÂÆπÔºåÂèØ‰ª•Ëá™Â∑±ËØïËØïÔºö 1234567&gt;&gt;&gt; print(&apos;&apos;&apos;line1... line2... line3&apos;&apos;&apos;)line1line2line3 ‰∏äÈù¢ÊòØÂú®‰∫§‰∫íÂºèÂëΩ‰ª§Ë°åÂÜÖËæìÂÖ•ÔºåÊ≥®ÊÑèÂú®ËæìÂÖ•Â§öË°åÂÜÖÂÆπÊó∂ÔºåÊèêÁ§∫Á¨¶Áî±&gt;&gt;&gt;Âèò‰∏∫‚Ä¶ÔºåÊèêÁ§∫‰Ω†ÂèØ‰ª•Êé•ÁùÄ‰∏ä‰∏ÄË°åËæìÂÖ•ÔºåÊ≥®ÊÑè‚Ä¶ÊòØÊèêÁ§∫Á¨¶Ôºå‰∏çÊòØ‰ª£Á†ÅÁöÑ‰∏ÄÈÉ®ÂàÜÔºö 12345678910111213141516‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇCommand Prompt - python _ ‚ñ° x ‚îÇ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ&gt;&gt;&gt; print(&apos;&apos;&apos;line1 ‚îÇ‚îÇ... line2 ‚îÇ‚îÇ... line3&apos;&apos;&apos;) ‚îÇ‚îÇline1 ‚îÇ‚îÇline2 ‚îÇ‚îÇline3 ‚îÇ‚îÇ ‚îÇ‚îÇ&gt;&gt;&gt; _ ‚îÇ‚îÇ ‚îÇ‚îÇ ‚îÇ‚îÇ ‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ÂΩìËæìÂÖ•ÂÆåÁªìÊùüÁ¨¶12Â¶ÇÊûúÂÜôÊàêÁ®ãÂ∫èÂπ∂Â≠ò‰∏∫.pyÊñá‰ª∂ÔºåÂ∞±ÊòØÔºö print(‚Äò‚Äô‚Äôline1line2line3‚Äô‚Äô‚Äô) 1Â§öË°åÂ≠óÁ¨¶‰∏≤&apos;&apos;&apos;...&apos;&apos;&apos;ËøòÂèØ‰ª•Âú®ÂâçÈù¢Âä†‰∏är‰ΩøÁî®ÔºåËØ∑Ëá™Ë°åÊµãËØïÔºö -- coding: utf-8 --print(r‚Äô‚Äô‚Äôhello,\\nworld‚Äô‚Äô‚Äô) 1234 Run### Â∏ÉÂ∞îÂÄºÂ∏ÉÂ∞îÂÄºÂíåÂ∏ÉÂ∞î‰ª£Êï∞ÁöÑË°®Á§∫ÂÆåÂÖ®‰∏ÄËá¥Ôºå‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÂè™ÊúâTrue„ÄÅFalse‰∏§ÁßçÂÄºÔºåË¶Å‰πàÊòØTrueÔºåË¶Å‰πàÊòØFalseÔºåÂú®Python‰∏≠ÔºåÂèØ‰ª•Áõ¥Êé•Áî®True„ÄÅFalseË°®Á§∫Â∏ÉÂ∞îÂÄºÔºàËØ∑Ê≥®ÊÑèÂ§ßÂ∞èÂÜôÔºâÔºå‰πüÂèØ‰ª•ÈÄöËøáÂ∏ÉÂ∞îËøêÁÆóËÆ°ÁÆóÂá∫Êù•Ôºö TrueTrueFalseFalse3 &gt; 2True3 &gt; 5False 123Â∏ÉÂ∞îÂÄºÂèØ‰ª•Áî®and„ÄÅorÂíånotËøêÁÆó„ÄÇ#### andËøêÁÆóÊòØ‰∏éËøêÁÆóÔºåÂè™ÊúâÊâÄÊúâÈÉΩ‰∏∫TrueÔºåandËøêÁÆóÁªìÊûúÊâçÊòØTrueÔºö True and TrueTrueTrue and FalseFalseFalse and FalseFalse5 &gt; 3 and 3 &gt; 1True 12#### orËøêÁÆóÊòØÊàñËøêÁÆóÔºåÂè™Ë¶ÅÂÖ∂‰∏≠Êúâ‰∏Ä‰∏™‰∏∫TrueÔºåorËøêÁÆóÁªìÊûúÂ∞±ÊòØTrueÔºö True or TrueTrueTrue or FalseTrueFalse or FalseFalse5 &gt; 3 or 1 &gt; 3True 12#### notËøêÁÆóÊòØÈùûËøêÁÆóÔºåÂÆÉÊòØ‰∏Ä‰∏™ÂçïÁõÆËøêÁÆóÁ¨¶ÔºåÊääTrueÂèòÊàêFalseÔºåFalseÂèòÊàêTrueÔºö not TrueFalsenot FalseTruenot 1 &gt; 2True 1Â∏ÉÂ∞îÂÄºÁªèÂ∏∏Áî®Âú®Êù°‰ª∂Âà§Êñ≠‰∏≠ÔºåÊØîÂ¶ÇÔºö if age &gt;= 18: print(‚Äòadult‚Äô)else: print(‚Äòteenager‚Äô) 1234567891011121314151617181920### Á©∫ÂÄºÁ©∫ÂÄºÊòØPythonÈáå‰∏Ä‰∏™ÁâπÊÆäÁöÑÂÄºÔºåÁî®NoneË°®Á§∫„ÄÇNone‰∏çËÉΩÁêÜËß£‰∏∫0ÔºåÂõ†‰∏∫0ÊòØÊúâÊÑè‰πâÁöÑÔºåËÄåNoneÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑÁ©∫ÂÄº„ÄÇÊ≠§Â§ñÔºåPythonËøòÊèê‰æõ‰∫ÜÂàóË°®„ÄÅÂ≠óÂÖ∏Á≠âÂ§öÁßçÊï∞ÊçÆÁ±ªÂûãÔºåËøòÂÖÅËÆ∏ÂàõÂª∫Ëá™ÂÆö‰πâÊï∞ÊçÆÁ±ªÂûãÔºåÊàë‰ª¨ÂêéÈù¢‰ºöÁªßÁª≠ËÆ≤Âà∞„ÄÇ### ÂèòÈáèÂèòÈáèÁöÑÊ¶ÇÂøµÂü∫Êú¨‰∏äÂíåÂàù‰∏≠‰ª£Êï∞ÁöÑÊñπÁ®ãÂèòÈáèÊòØ‰∏ÄËá¥ÁöÑÔºåÂè™ÊòØÂú®ËÆ°ÁÆóÊú∫Á®ãÂ∫è‰∏≠ÔºåÂèòÈáè‰∏ç‰ªÖÂèØ‰ª•ÊòØÊï∞Â≠óÔºåËøòÂèØ‰ª•ÊòØ‰ªªÊÑèÊï∞ÊçÆÁ±ªÂûã„ÄÇÂèòÈáèÂú®Á®ãÂ∫è‰∏≠Â∞±ÊòØÁî®‰∏Ä‰∏™ÂèòÈáèÂêçË°®Á§∫‰∫ÜÔºåÂèòÈáèÂêçÂøÖÈ°ªÊòØÂ§ßÂ∞èÂÜôËã±Êñá„ÄÅÊï∞Â≠óÂíå_ÁöÑÁªÑÂêàÔºå‰∏î‰∏çËÉΩÁî®Êï∞Â≠óÂºÄÂ§¥ÔºåÊØîÂ¶ÇÔºö`a = 1`ÂèòÈáèaÊòØ‰∏Ä‰∏™Êï¥Êï∞„ÄÇ`t_007 = &apos;T007&apos;`ÂèòÈáèt_007ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤„ÄÇ`Answer = True`ÂèòÈáèAnswerÊòØ‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºTrue„ÄÇÂú®Python‰∏≠ÔºåÁ≠âÂè∑=ÊòØËµãÂÄºËØ≠Âè•ÔºåÂèØ‰ª•Êää‰ªªÊÑèÊï∞ÊçÆÁ±ªÂûãËµãÂÄºÁªôÂèòÈáèÔºåÂêå‰∏Ä‰∏™ÂèòÈáèÂèØ‰ª•ÂèçÂ§çËµãÂÄºÔºåËÄå‰∏îÂèØ‰ª•ÊòØ‰∏çÂêåÁ±ªÂûãÁöÑÂèòÈáèÔºå‰æãÂ¶ÇÔºö -- coding: utf-8 --a = 123 # aÊòØÊï¥Êï∞print(a)a = ‚ÄòABC‚Äô # aÂèò‰∏∫Â≠óÁ¨¶‰∏≤print(a) 123 RunËøôÁßçÂèòÈáèÊú¨Ë∫´Á±ªÂûã‰∏çÂõ∫ÂÆöÁöÑËØ≠Ë®ÄÁß∞‰πã‰∏∫Âä®ÊÄÅËØ≠Ë®ÄÔºå‰∏é‰πãÂØπÂ∫îÁöÑÊòØÈùôÊÄÅËØ≠Ë®Ä„ÄÇÈùôÊÄÅËØ≠Ë®ÄÂú®ÂÆö‰πâÂèòÈáèÊó∂ÂøÖÈ°ªÊåáÂÆöÂèòÈáèÁ±ªÂûãÔºåÂ¶ÇÊûúËµãÂÄºÁöÑÊó∂ÂÄôÁ±ªÂûã‰∏çÂåπÈÖçÔºåÂ∞±‰ºöÊä•Èîô„ÄÇ‰æãÂ¶ÇJavaÊòØÈùôÊÄÅËØ≠Ë®ÄÔºåËµãÂÄºËØ≠Âè•Â¶Ç‰∏ãÔºà// Ë°®Á§∫Ê≥®ÈáäÔºâÔºö int a = 123; // aÊòØÊï¥Êï∞Á±ªÂûãÂèòÈáèa = ‚ÄúABC‚Äù; // ÈîôËØØÔºö‰∏çËÉΩÊääÂ≠óÁ¨¶‰∏≤ËµãÁªôÊï¥ÂûãÂèòÈáè 123ÂíåÈùôÊÄÅËØ≠Ë®ÄÁõ∏ÊØîÔºåÂä®ÊÄÅËØ≠Ë®ÄÊõ¥ÁÅµÊ¥ªÔºåÂ∞±ÊòØËøô‰∏™ÂéüÂõ†„ÄÇËØ∑‰∏çË¶ÅÊääËµãÂÄºËØ≠Âè•ÁöÑÁ≠âÂè∑Á≠âÂêå‰∫éÊï∞Â≠¶ÁöÑÁ≠âÂè∑„ÄÇÊØîÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö x = 10x = x + 2 123456789101112Â¶ÇÊûú‰ªéÊï∞Â≠¶‰∏äÁêÜËß£x = x + 2ÈÇ£Êó†ËÆ∫Â¶Ç‰ΩïÊòØ‰∏çÊàêÁ´ãÁöÑÔºåÂú®Á®ãÂ∫è‰∏≠ÔºåËµãÂÄºËØ≠Âè•ÂÖàËÆ°ÁÆóÂè≥‰æßÁöÑË°®ËææÂºèx + 2ÔºåÂæóÂà∞ÁªìÊûú12ÔºåÂÜçËµãÁªôÂèòÈáèx„ÄÇÁî±‰∫éx‰πãÂâçÁöÑÂÄºÊòØ10ÔºåÈáçÊñ∞ËµãÂÄºÂêéÔºåxÁöÑÂÄºÂèòÊàê12„ÄÇÊúÄÂêéÔºåÁêÜËß£ÂèòÈáèÂú®ËÆ°ÁÆóÊú∫ÂÜÖÂ≠ò‰∏≠ÁöÑË°®Á§∫‰πüÈùûÂ∏∏ÈáçË¶Å„ÄÇÂΩìÊàë‰ª¨ÂÜôÔºö`a = &apos;ABC&apos;`Êó∂ÔºåPythonËß£ÈáäÂô®Âπ≤‰∫Ü‰∏§‰ª∂‰∫ãÊÉÖÔºöÂú®ÂÜÖÂ≠ò‰∏≠ÂàõÂª∫‰∫Ü‰∏Ä‰∏™&apos;ABC&apos;ÁöÑÂ≠óÁ¨¶‰∏≤ÔºõÂú®ÂÜÖÂ≠ò‰∏≠ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Âêç‰∏∫aÁöÑÂèòÈáèÔºåÂπ∂ÊääÂÆÉÊåáÂêë&apos;ABC&apos;„ÄÇ‰πüÂèØ‰ª•Êää‰∏Ä‰∏™ÂèòÈáèaËµãÂÄºÁªôÂè¶‰∏Ä‰∏™ÂèòÈáèbÔºåËøô‰∏™Êìç‰ΩúÂÆûÈôÖ‰∏äÊòØÊääÂèòÈáèbÊåáÂêëÂèòÈáèaÊâÄÊåáÂêëÁöÑÊï∞ÊçÆÔºå‰æãÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö -- coding: utf-8 --a = ‚ÄòABC‚Äôb = aa = ‚ÄòXYZ‚Äôprint(b) 12345678910111213141516171819202122232425 RunÊúÄÂêé‰∏ÄË°åÊâìÂç∞Âá∫ÂèòÈáèbÁöÑÂÜÖÂÆπÂà∞Â∫ïÊòØ&apos;ABC&apos;Âë¢ËøòÊòØ&apos;XYZ&apos;ÔºüÂ¶ÇÊûú‰ªéÊï∞Â≠¶ÊÑè‰πâ‰∏äÁêÜËß£ÔºåÂ∞±‰ºöÈîôËØØÂú∞ÂæóÂá∫bÂíåaÁõ∏ÂêåÔºå‰πüÂ∫îËØ•ÊòØ&apos;XYZ&apos;Ôºå‰ΩÜÂÆûÈôÖ‰∏äbÁöÑÂÄºÊòØ&apos;ABC&apos;ÔºåËÆ©Êàë‰ª¨‰∏ÄË°å‰∏ÄË°åÂú∞ÊâßË°å‰ª£Á†ÅÔºåÂ∞±ÂèØ‰ª•ÁúãÂà∞Âà∞Â∫ïÂèëÁîü‰∫Ü‰ªÄ‰πà‰∫ãÔºöÊâßË°åa = &apos;ABC&apos;ÔºåËß£ÈáäÂô®ÂàõÂª∫‰∫ÜÂ≠óÁ¨¶‰∏≤&apos;ABC&apos;ÂíåÂèòÈáèaÔºåÂπ∂ÊääaÊåáÂêë&apos;ABC&apos;Ôºö![](https://www.liaoxuefeng.com/files/attachments/923791878255456/0)ÊâßË°åb = aÔºåËß£ÈáäÂô®ÂàõÂª∫‰∫ÜÂèòÈáèbÔºåÂπ∂ÊääbÊåáÂêëaÊåáÂêëÁöÑÂ≠óÁ¨¶‰∏≤&apos;ABC&apos;Ôºö![](https://www.liaoxuefeng.com/files/attachments/923792058613440/0)ÊâßË°åa = &apos;XYZ&apos;ÔºåËß£ÈáäÂô®ÂàõÂª∫‰∫ÜÂ≠óÁ¨¶‰∏≤&apos;XYZ&apos;ÔºåÂπ∂ÊääaÁöÑÊåáÂêëÊîπ‰∏∫&apos;XYZ&apos;Ôºå‰ΩÜbÂπ∂Ê≤°ÊúâÊõ¥ÊîπÔºö![](https://www.liaoxuefeng.com/files/attachments/923792191637760/0)ÊâÄ‰ª•ÔºåÊúÄÂêéÊâìÂç∞ÂèòÈáèbÁöÑÁªìÊûúËá™ÁÑ∂ÊòØ&apos;ABC&apos;‰∫Ü„ÄÇ### Â∏∏ÈáèÊâÄË∞ìÂ∏∏ÈáèÂ∞±ÊòØ‰∏çËÉΩÂèòÁöÑÂèòÈáèÔºåÊØîÂ¶ÇÂ∏∏Áî®ÁöÑÊï∞Â≠¶Â∏∏Êï∞œÄÂ∞±ÊòØ‰∏Ä‰∏™Â∏∏Èáè„ÄÇÂú®Python‰∏≠ÔºåÈÄöÂ∏∏Áî®ÂÖ®ÈÉ®Â§ßÂÜôÁöÑÂèòÈáèÂêçË°®Á§∫Â∏∏ÈáèÔºö`PI = 3.14159265359`‰ΩÜ‰∫ãÂÆû‰∏äPI‰ªçÁÑ∂ÊòØ‰∏Ä‰∏™ÂèòÈáèÔºåPythonÊ†πÊú¨Ê≤°Êúâ‰ªª‰ΩïÊú∫Âà∂‰øùËØÅPI‰∏ç‰ºöË¢´ÊîπÂèòÔºåÊâÄ‰ª•ÔºåÁî®ÂÖ®ÈÉ®Â§ßÂÜôÁöÑÂèòÈáèÂêçË°®Á§∫Â∏∏ÈáèÂè™ÊòØ‰∏Ä‰∏™‰π†ÊÉØ‰∏äÁöÑÁî®Ê≥ïÔºåÂ¶ÇÊûú‰Ω†‰∏ÄÂÆöË¶ÅÊîπÂèòÂèòÈáèPIÁöÑÂÄºÔºå‰πüÊ≤°‰∫∫ËÉΩÊã¶‰Ωè‰Ω†„ÄÇÊúÄÂêéËß£Èáä‰∏Ä‰∏ãÊï¥Êï∞ÁöÑÈô§Ê≥ï‰∏∫‰ªÄ‰πà‰πüÊòØÁ≤æÁ°ÆÁöÑ„ÄÇÂú®Python‰∏≠ÔºåÊúâ‰∏§ÁßçÈô§Ê≥ïÔºå‰∏ÄÁßçÈô§Ê≥ïÊòØ/Ôºö 10 / 33.3333333333333335 1/Èô§Ê≥ïËÆ°ÁÆóÁªìÊûúÊòØÊµÆÁÇπÊï∞ÔºåÂç≥‰ΩøÊòØ‰∏§‰∏™Êï¥Êï∞ÊÅ∞Â•ΩÊï¥Èô§ÔºåÁªìÊûú‰πüÊòØÊµÆÁÇπÊï∞Ôºö 9 / 33.0 1ËøòÊúâ‰∏ÄÁßçÈô§Ê≥ïÊòØ//ÔºåÁß∞‰∏∫Âú∞ÊùøÈô§Ôºå‰∏§‰∏™Êï¥Êï∞ÁöÑÈô§Ê≥ï‰ªçÁÑ∂ÊòØÊï¥Êï∞Ôºö 10 // 33 123‰Ω†Ê≤°ÊúâÁúãÈîôÔºåÊï¥Êï∞ÁöÑÂú∞ÊùøÈô§//Ê∞∏ËøúÊòØÊï¥Êï∞ÔºåÂç≥‰ΩøÈô§‰∏çÂ∞Ω„ÄÇË¶ÅÂÅöÁ≤æÁ°ÆÁöÑÈô§Ê≥ïÔºå‰ΩøÁî®/Â∞±ÂèØ‰ª•„ÄÇÂõ†‰∏∫//Èô§Ê≥ïÂè™ÂèñÁªìÊûúÁöÑÊï¥Êï∞ÈÉ®ÂàÜÔºåÊâÄ‰ª•PythonËøòÊèê‰æõ‰∏Ä‰∏™‰ΩôÊï∞ËøêÁÆóÔºåÂèØ‰ª•ÂæóÂà∞‰∏§‰∏™Êï¥Êï∞Áõ∏Èô§ÁöÑ‰ΩôÊï∞Ôºö 10 % 31 Êó†ËÆ∫Êï¥Êï∞ÂÅö//Èô§Ê≥ïËøòÊòØÂèñ‰ΩôÊï∞ÔºåÁªìÊûúÊ∞∏ËøúÊòØÊï¥Êï∞ÔºåÊâÄ‰ª•ÔºåÊï¥Êï∞ËøêÁÆóÁªìÊûúÊ∞∏ËøúÊòØÁ≤æÁ°ÆÁöÑ„ÄÇ Â∞èÁªìPythonÊîØÊåÅÂ§öÁßçÊï∞ÊçÆÁ±ªÂûãÔºåÂú®ËÆ°ÁÆóÊú∫ÂÜÖÈÉ®ÔºåÂèØ‰ª•Êää‰ªª‰ΩïÊï∞ÊçÆÈÉΩÁúãÊàê‰∏Ä‰∏™‚ÄúÂØπË±°‚ÄùÔºåËÄåÂèòÈáèÂ∞±ÊòØÂú®Á®ãÂ∫è‰∏≠Áî®Êù•ÊåáÂêëËøô‰∫õÊï∞ÊçÆÂØπË±°ÁöÑÔºåÂØπÂèòÈáèËµãÂÄºÂ∞±ÊòØÊääÊï∞ÊçÆÂíåÂèòÈáèÁªôÂÖ≥ËÅîËµ∑Êù•„ÄÇ ÂØπÂèòÈáèËµãÂÄºx = yÊòØÊääÂèòÈáèxÊåáÂêëÁúüÊ≠£ÁöÑÂØπË±°ÔºåËØ•ÂØπË±°ÊòØÂèòÈáèyÊâÄÊåáÂêëÁöÑ„ÄÇÈöèÂêéÂØπÂèòÈáèyÁöÑËµãÂÄº‰∏çÂΩ±ÂìçÂèòÈáèxÁöÑÊåáÂêë„ÄÇ Ê≥®ÊÑèÔºöPythonÁöÑÊï¥Êï∞Ê≤°ÊúâÂ§ßÂ∞èÈôêÂà∂ÔºåËÄåÊüê‰∫õËØ≠Ë®ÄÁöÑÊï¥Êï∞Ê†πÊçÆÂÖ∂Â≠òÂÇ®ÈïøÂ∫¶ÊòØÊúâÂ§ßÂ∞èÈôêÂà∂ÁöÑÔºå‰æãÂ¶ÇJavaÂØπ32‰ΩçÊï¥Êï∞ÁöÑËåÉÂõ¥ÈôêÂà∂Âú®-2147483648-2147483647„ÄÇPythonÁöÑÊµÆÁÇπÊï∞‰πüÊ≤°ÊúâÂ§ßÂ∞èÈôêÂà∂Ôºå‰ΩÜÊòØË∂ÖÂá∫‰∏ÄÂÆöËåÉÂõ¥Â∞±Áõ¥Êé•Ë°®Á§∫‰∏∫infÔºàÊó†ÈôêÂ§ßÔºâ„ÄÇ","link":"/ÁºñÁ®ã/Python/python-type/"},{"title":"Â≠óÂÖ∏„ÄÅÂàóË°®„ÄÅÊï∞ÁªÑÂíåÂ≠óÁ¨¶‰∏≤","text":"Python Â≠óÂÖ∏„ÄÅÂàóË°®„ÄÅÊï∞ÁªÑÂíåÂ≠óÁ¨¶‰∏≤ Â≠óÂÖ∏ 1234567# -*- coding: UTF-8 -*-dict_1 = {'1': 'a', '2': 'b', '3': 'c'}print(dict_1) # ÊâìÂç∞Â≠óÂÖ∏print(type(dict_1)) # ÊâìÂç∞Êñ∞ËµãÂÄºÁöÑÂ≠óÂÖ∏ÁöÑÁ±ªÂûãprint(str(dict_1), end='Â≠óÁ¨¶‰∏≤\\n') # ÊääÂ≠óÂÖ∏ËΩ¨ÂåñÊàêÂ≠óÁ¨¶‰∏≤ÂêéÊâìÂç∞print(tuple(dict_1), end='ÂÖÉÁªÑ\\n') # ÊääÂ≠óÂÖ∏ËΩ¨Âåñ‰∏∫ÂÖÉÁªÑÂêéÊâìÂç∞print(list(dict_1), end='ÂàóË°®\\n') # ÊääÂ≠óÂÖ∏ËΩ¨Âåñ‰∏∫ÂàóË°®ÂêéÊâìÂç∞ ÂÖÉÁªÑ 123456# -*- coding: UTF-8 -*-tuple_1 = (1, 2, 3, 4, 5)print(tuple_1) # ÊâìÂç∞ÂÖÉÁªÑprint(type(tuple_1)) # ÊâìÂç∞Êñ∞ËµãÂÄºÁöÑÂÖÉÁ•ñÁöÑÁ±ªÂûãprint(str(tuple_1), end='Â≠óÁ¨¶‰∏≤\\n') # ÊääÂÖÉÁªÑËΩ¨ÂåñÊàêÂ≠óÁ¨¶‰∏≤ÂêéÊâìÂç∞print(list(tuple_1), end='ÂàóË°®\\n') # ÊääÂÖÉÁªÑËΩ¨Âåñ‰∏∫ÂàóË°®ÂêéÊâìÂç∞ ÂÖÉÁªÑ‰∏çÂèØËΩ¨Âåñ‰∏∫Â≠óÂÖ∏ÂàóË°® 123456# -*- coding: UTF-8 -*-list_1 = [1, 2, 3, 4, 5]print(list_1) # ÊâìÂç∞ÂàóË°®print(type(list_1)) # ÊâìÂç∞Êñ∞ËµãÂÄºÁöÑÂàóË°®ÁöÑÁ±ªÂûãprint(str(list_1), end='Â≠óÁ¨¶‰∏≤\\n') # ÊääÂàóË°®ËΩ¨ÂåñÊàêÂ≠óÁ¨¶‰∏≤ÂêéÊâìÂç∞print(tuple(list_1), end='ÂÖÉÁªÑ\\n') # ÊääÂàóË°®ËΩ¨Âåñ‰∏∫ÂÖÉÁªÑÂêéÊâìÂç∞ ÂÖÉÁªÑ‰∏çÂèØËΩ¨Âåñ‰∏∫Â≠óÂÖ∏Â≠óÁ¨¶‰∏≤ 123456# -*- coding: UTF-8 -*-string_1 = '(1, 2, 3, 4, 5)'print(string_1) # ÊâìÂç∞Â≠óÁ¨¶‰∏≤print(type(string_1)) # ÊâìÂç∞Êñ∞ËµãÂÄºÁöÑÂ≠óÁ¨¶‰∏≤print(tuple(eval(string_1)), end='ÂÖÉÁªÑ\\n') # ÊääÂ≠óÁ¨¶‰∏≤ËΩ¨ÂåñÊàêÂÖÉÁªÑÂêéËæìÂá∫print(list(eval(string_1)), end='ÂàóË°®\\n') # ÊääÂ≠óÁ¨¶‰∏≤ËΩ¨ÂåñÊàêÂàóË°®ÂêéËæìÂá∫ Âè™ÊúâÁâπÊÆäÂ≠óÁ¨¶‰∏≤ÊâçËÉΩËΩ¨Âåñ‰∏∫Â≠óÂÖ∏1234string_2 = '{\"name\":\"tom\",\"age\":6}'print(string_2) # ÊâìÂç∞Êñ∞ËµãÂÄºÁöÑÂ≠óÁ¨¶‰∏≤print(type(string_2)) # ÊâìÂç∞Êñ∞ËµãÂÄºÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÁ±ªÂûãprint(dict(eval(string_2)), end='Â≠óÂÖ∏\\n') # ÊääÂ≠óÁ¨¶‰∏≤ËΩ¨Âåñ‰∏∫Â≠óÂÖ∏ÂêéÊâìÂç∞","link":"/ÁºñÁ®ã/Python/python/"},{"title":"PythonÁà¨Ëô´","text":"Áé∞Âú®PythonËØ≠Ë®ÄÂ§ßÁÅ´ÔºåÂú®ÁΩëÁªúÁà¨Ëô´„ÄÅ‰∫∫Â∑•Êô∫ËÉΩ„ÄÅÂ§ßÊï∞ÊçÆÁ≠âÈ¢ÜÂüüÈÉΩÊúâÂæàÂ•ΩÁöÑÂ∫îÁî®„ÄÇ‰ªäÂ§©ÊàëÂêëÂ§ßÂÆ∂‰ªãÁªç‰∏Ä‰∏ãPythonÁà¨Ëô´ÁöÑ‰∏Ä‰∫õÁü•ËØÜÂíåÂ∏∏Áî®Á±ªÂ∫ìÁöÑÁî®Ê≥ïÔºåÂ∏åÊúõËÉΩÂØπÂ§ßÂÆ∂ÊúâÊâÄÂ∏ÆÂä©„ÄÇ ÂÖ∂ÂÆûÁà¨Ëô´Ëøô‰∏™Ê¶ÇÂøµÂæàÁÆÄÂçïÔºåÂü∫Êú¨ÂèØ‰ª•ÂàÜÊàê‰ª•‰∏ãÂá†‰∏™Ê≠•È™§Ôºö ÂèëËµ∑ÁΩëÁªúËØ∑Ê±Ç Ëé∑ÂèñÁΩëÈ°µ Ëß£ÊûêÁΩëÈ°µËé∑ÂèñÊï∞ÊçÆ ÂèëËµ∑ÁΩëÁªúËØ∑Ê±ÇËøô‰∏™Ê≠•È™§Â∏∏Áî®ÁöÑÁ±ªÂ∫ìÊúâÊ†áÂáÜÂ∫ìurllib‰ª•ÂèäPython‰∏äÂ∏∏Áî®ÁöÑrequestsÂ∫ì„ÄÇËß£ÊûêÁΩëÈ°µÂ∏∏Áî®ÁöÑÁ±ªÂ∫ìÊúâÁöÑBeautifulSoup„ÄÇÂè¶Â§ñrequestsÁöÑ‰ΩúËÄÖËøòÂºÄÂèë‰∫ÜÂè¶‰∏Ä‰∏™ÂæàÂ•ΩÁî®ÁöÑÂ∫ìrequests-htmlÔºåÊèê‰æõ‰∫ÜÂèëËµ∑ËØ∑Ê±ÇÂíåËß£ÊûêÁΩëÈ°µÁöÑ‰∫åÂêà‰∏ÄÂäüËÉΩÔºåÂºÄÂèëÂ∞èÂûãÁà¨Ëô´ÈùûÂ∏∏Êñπ‰æø„ÄÇÂè¶Â§ñËøòÊúâ‰∏Ä‰∫õ‰∏ì‰∏öÁöÑÁà¨Ëô´Á±ªÂ∫ìÔºåÂÖ∂‰∏≠ÊØîËæÉÂá∫ÂêçÁöÑÂ∞±ÊòØscrapy„ÄÇÊú¨ÊñáÂ∞Ü‰ºöÁÆÄÂçï‰ªãÁªç‰∏Ä‰∏ãËøô‰∫õÁ±ªÂ∫ìÔºå‰πãÂêéËøò‰ºö‰∏ìÈó®ÂÜô‰∏ÄÁØáÊñáÁ´†‰ªãÁªçscrapyÁöÑÁî®Ê≥ï„ÄÇ Ê†áÂáÜÂ∫ìurllibÈ¶ñÂÖàÂÖàÊù•ÁúãÊ†áÂáÜÂ∫ìurllib„ÄÇÊ†áÂáÜÂ∫ìÁöÑ‰ºòÁÇπÊòØPythonËá™Â∏¶ÁöÑÔºå‰∏çÈúÄË¶ÅÂÆâË£Ö‰ªª‰ΩïÁ¨¨‰∏âÊñπÂ∫ìÔºåÁº∫ÁÇπÂ∞±ÊòØurllibÂ±û‰∫éÂÅèÂ∫ïÂ±ÇÁöÑÂ∫ìÔºå‰ΩøÁî®Ëµ∑Êù•ÊØîËæÉÈ∫ªÁÉ¶„ÄÇ‰∏ãÈù¢ÊòØurllibÂèëËµ∑ËØ∑Ê±ÇÁöÑ‰∏Ä‰∏™ÁÆÄÂçï‰æãÂ≠êÔºåÂ§ßÂÆ∂ÁúãÁúãÂ∞±Â•Ω„ÄÇÂèØ‰ª•ÁúãÂà∞‰∏∫‰∫ÜÂèëËµ∑‰∏Ä‰∏™ÁÆÄÂçïÁöÑËØ∑Ê±ÇÔºåÊàë‰ª¨ÈúÄË¶ÅÂàõÂª∫opener„ÄÅrequest„ÄÅProxyHandlerÁ≠âÂ•ΩÂá†‰∏™ÂØπË±°ÔºåÊØîËæÉÈ∫ªÁÉ¶„ÄÇ 1234567891011121314151617181920import urllib.request as requestimport requestsproxies = { 'https': 'https://127.0.0.1:1080', 'http': 'http://127.0.0.1:1080'}headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0'}print('--------------‰ΩøÁî®urllib--------------')url = 'http://www.google.com'opener = request.build_opener(request.ProxyHandler(proxies))request.install_opener(opener)req = request.Request(url, headers=headers)response = request.urlopen(req)print(response.read().decode()) requestsrequestsÊòØKenneth ReitzÂ§ßÁ•ûÁöÑËëóÂêç‰ΩúÂìÅ‰πã‰∏ÄÔºå‰ºòÁÇπÂ∞±ÊòØÊûÅÂ∫¶ÁÆÄÂçïÂíåÂ•ΩÁî®„ÄÇÈ¶ñÂÖàÊù•ÂÆâË£Örequests„ÄÇ 1pip install requests ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºåÂíå‰∏äÈù¢urllibÁ§∫‰æã‰ª£Á†ÅÂÆûÁé∞ÁöÑÂäüËÉΩÁõ∏ÂêåÔºå‰ΩÜÊòØ‰ª£Á†ÅÈáèÂ∞ëÂ§ö‰∫ÜÔºå‰πüÊõ¥ÊòìËØª„ÄÇ 1234print('--------------‰ΩøÁî®requests--------------')response = requests.get('https://www.google.com', headers=headers, proxies=proxies)response.encoding = 'utf8'print(response.text) requestsËøòÂèØ‰ª•Êñπ‰æøÁöÑÂèëÈÄÅË°®ÂçïÊï∞ÊçÆÔºåÊ®°ÊãüÁî®Êà∑ÁôªÂΩï„ÄÇËøîÂõûÁöÑResponseÂØπË±°ËøòÂåÖÂê´‰∫ÜÁä∂ÊÄÅÁ†Å„ÄÅheader„ÄÅraw„ÄÅcookiesÁ≠âÂæàÂ§öÊúâÁî®ÁöÑ‰ø°ÊÅØ„ÄÇ 12345678data = { 'name': 'yitian', 'age': 22, 'friends': ['zhang3', 'li4']}response = requests.post('http://httpbin.org/post', data=data)pprint(response.__dict__)print(response.text) ÂÖ≥‰∫érequestsÊàëÂ∞±‰∏çÂ§öÂÅö‰ªãÁªç‰∫ÜÔºåÂõ†‰∏∫ÂÆÉÊúâ‰∏≠ÊñáÊñáÊ°£ÔºåËôΩÁÑ∂ÊØîÂÆòÊñπËêΩÂêéÂá†‰∏™Â∞èÁâàÊú¨Âè∑Ôºå‰∏çËøáÊó†‰º§Â§ßÈõÖÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÊîæÂøÉÂèÇÈòÖ„ÄÇ 1http://cn.python-requests.org/zh_CN/latest/ beautifulsoupÂà©Áî®ÂâçÈù¢‰ªãÁªçÁöÑrequestsÁ±ªÂ∫ìÔºåÊàë‰ª¨ÂèØ‰ª•ËΩªÊòìÂú∞Ëé∑ÂèñHTML‰ª£Á†ÅÔºå‰ΩÜÊòØ‰∏∫‰∫Ü‰ªéHTML‰∏≠ÊâæÂà∞ÊâÄÈúÄÁöÑÊï∞ÊçÆÔºåÊàë‰ª¨ËøòÈúÄË¶ÅHTML/XMLËß£ÊûêÂ∫ìÔºåBeautifulSoupÂ∞±ÊòØËøô‰πà‰∏Ä‰∏™Â∏∏Áî®ÁöÑÂ∫ì„ÄÇÈ¶ñÂÖàÂÖàÊù•ÂÆâË£ÖÂÆÉÔºö 1pip install beautifulsoup4 ËøôÊ¨°Â∞±Áî®ÊàëÁÆÄ‰π¶‰∏ªÈ°µ‰Ωú‰∏∫‰æãÂ≠êÔºåÁà¨Âèñ‰∏Ä‰∏ãÊàëÁÆÄ‰π¶ÁöÑÊñáÁ´†ÂàóË°®„ÄÇÈ¶ñÂÖàÂÖàÁî®requestsËé∑ÂèñÂà∞ÁΩëÈ°µÂÜÖÂÆπ„ÄÇ 1234567891011from pprint import pprintimport bs4import requestsheaders = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0'}url = 'https://www.jianshu.com/u/7753478e1554'response = requests.get(url, headers=headers) ÁÑ∂ÂêéÂ∞±ÊòØBeautifulSoupÁöÑ‰ª£Á†Å‰∫Ü„ÄÇÂú®‰ΩøÁî®BeautifulSoupÁöÑÊó∂ÂÄôÈ¶ñÂÖàÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™HTMLÊ†ëÔºåÁÑ∂Âêé‰ªéÊ†ë‰∏≠Êü•ÊâæËäÇÁÇπ„ÄÇBeautifulSoup‰∏ªË¶ÅÊúâ‰∏§ÁßçÊü•ÊâæËäÇÁÇπÁöÑÂäûÊ≥ïÔºåÁ¨¨‰∏ÄÁßçÊòØ‰ΩøÁî®findÂíåfind_allÊñπÊ≥ïÔºåÁ¨¨‰∫åÁßçÊñπÊ≥ïÊòØ‰ΩøÁî®selectÊñπÊ≥ïÁî®cssÈÄâÊã©Âô®„ÄÇÊãøÂà∞ËäÇÁÇπ‰πãÂêéÔºåÁî®contentsÂéªËé∑ÂèñÂÆÉÁöÑÂ≠êËäÇÁÇπÔºåÂ¶ÇÊûúÂ≠êËäÇÁÇπÊòØÊñáÊú¨ÔºåÂ∞±‰ºöÊãøÂà∞ÊñáÊú¨ÂÄºÔºåÊ≥®ÊÑèËøô‰∏™Â±ûÊÄßËøîÂõûÁöÑÊòØÂàóË°®ÔºåÊâÄ‰ª•Ë¶ÅÂä†[0]„ÄÇ 123456html = bs4.BeautifulSoup(response.text, features='lxml')note_list = html.find_all('ul', class_='note-list', limit=1)[0]for a in note_list.select('li&gt;div.content&gt;a.title'): title = a.contents[0] link = f'https://www.jianshu.com{a[\"href\"]}' print(f'„Ää{title}„Äã,{link}') BeautifulSoup‰πüÊúâ‰∏≠ÊñáÊñáÊ°£ÔºåÂêåÊ†∑‰πüÊòØÁ®çÂæÆËêΩÂêé‰∏§‰∏™Â∞èÁâàÊú¨ÔºåÂΩ±Âìç‰∏çÂ§ß„ÄÇ 1https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/ requests-htmlËøô‰∏™Á±ªÂ∫ìÊòØrequestsÁöÑÂÖÑÂºüÔºåÂêåÊ†∑‰πüÊòØKenneth ReitzÂ§ßÁ•ûÁöÑ‰ΩúÂìÅ„ÄÇÂÆÉÂ∞ÜËØ∑Ê±ÇÁΩëÈ°µÂíåËß£ÊûêÁΩëÈ°µÁªìÂêàÂà∞‰∫Ü‰∏ÄËµ∑„ÄÇÊú¨Êù•Â¶ÇÊûú‰Ω†Áî®requestsÁöÑËØùÂè™ËÉΩËØ∑Ê±ÇÁΩëÈ°µÔºå‰∏∫‰∫ÜËß£ÊûêÁΩëÈ°µËøòÂæó‰ΩøÁî®BeautifulSoupËøôÊ†∑ÁöÑËß£ÊûêÂ∫ì„ÄÇÁé∞Âú®Âè™ÈúÄË¶Årequests-html‰∏Ä‰∏™Â∫ìÂ∞±ÂèØ‰ª•ÂäûÂà∞„ÄÇÈ¶ñÂÖàÂÖàÊù•ÂÆâË£Ö„ÄÇ 1pip install requests-html ÁÑ∂ÂêéÊàë‰ª¨Êù•ÁúãÁúãÁî®requests-htmlÂ¶Ç‰ΩïÈáçÂÜô‰∏äÈù¢Ëøô‰∏™‰æãÂ≠ê„ÄÇ 123456789101112131415from requests_html import HTMLSessionfrom pprint import pprinturl = 'https://www.jianshu.com/u/7753478e1554'headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0'}session = HTMLSession()r = session.get(url, headers=headers)note_list = r.html.find('ul.note-list', first=True)for a in note_list.find('li&gt;div.content&gt;a.title'): title = a.text link = f'https://www.jianshu.com{a.attrs[\"href\"]}' print(f'„Ää{title}„Äã,{link}') requests-htmlÈô§‰∫ÜÂèØ‰ª•‰ΩøÁî®cssÈÄâÊã©Âô®Êù•ÊêúÁ¥¢‰ª•Â§ñÔºåËøòÂèØ‰ª•‰ΩøÁî®xpathÊù•Êü•Êâæ„ÄÇ 1234for a in r.html.xpath('//ul[@class=\"note-list\"]/li/div[@class=\"content\"]/a[@class=\"title\"]'): title = a.text link = f'https://www.jianshu.com{a.attrs[\"href\"]}' print(f'„Ää{title}„Äã,{link}') requests-htmlËøòÊúâ‰∏Ä‰∏™ÂæàÊúâÁî®ÁöÑÁâπÊÄßÂ∞±ÊòØÊµèËßàÂô®Ê∏≤Êüì„ÄÇÊúâ‰∫õÁΩëÈ°µÊòØÂºÇÊ≠•Âä†ËΩΩÁöÑÔºåÁõ¥Êé•Áî®Áà¨Ëô´ÂéªÁà¨Âè™ËÉΩÂæóÂà∞‰∏Ä‰∏™Á©∫È°µÈù¢ÔºåÂõ†‰∏∫Êï∞ÊçÆÊòØÈù†ÊµèËßàÂô®ËøêË°åJSËÑöÊú¨ÂºÇÊ≠•Âä†ËΩΩÁöÑÔºåËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÊµèËßàÂô®Ê∏≤Êüì‰∫Ü„ÄÇËÄåÊµèËßàÂô®Ê∏≤ÊüìÁî®requests-htmlÂÅöÈùûÂ∏∏ÁÆÄÂçïÔºåÂè™Ë¶ÅÂ§öË∞ÉÁî®‰∏Ä‰∏™renderÂáΩÊï∞Âç≥ÂèØ„ÄÇrenderÂáΩÊï∞Êúâ‰∏§‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÊåáÂÆöÈ°µÈù¢‰∏ãÊªëÊ¨°Êï∞ÂíåÊöÇÂÅúÊó∂Èó¥„ÄÇrenderÂáΩÊï∞Á¨¨‰∏ÄÊ¨°ËøêË°åÁöÑÊó∂ÂÄôÔºårequests-html‰ºö‰∏ãËΩΩ‰∏Ä‰∏™chromiumÊµèËßàÂô®ÔºåÁÑ∂ÂêéÁî®ÂÆÉÊ∏≤ÊüìÈ°µÈù¢„ÄÇÁÆÄ‰π¶ÁöÑ‰∏™‰∫∫ÊñáÁ´†È°µÈù¢‰πüÊòØ‰∏Ä‰∏™ÂºÇÊ≠•Âä†ËΩΩÁöÑ‰æãÂ≠êÔºåÈªòËÆ§Âè™‰ºöÊòæÁ§∫ÊúÄËøëÂá†ÁØáÊñáÁ´†ÔºåÈÄöËøáÊµèËßàÂô®Ê∏≤ÊüìÊ®°ÊãüÈ°µÈù¢‰∏ãÊªëÔºåÊàë‰ª¨ÂèØ‰ª•ÂæóÂà∞ÊâÄÊúâÊñáÁ´†ÂàóË°®„ÄÇ 12345678session = HTMLSession()r = session.get(url, headers=headers)# renderÂáΩÊï∞ÊåáÁ§∫requests-htmlÁî®chromiumÊµèËßàÂô®Ê∏≤ÊüìÈ°µÈù¢r.html.render(scrolldown=50, sleep=0.2)for a in r.html.xpath('//ul[@class=\"note-list\"]/li/div[@class=\"content\"]/a[@class=\"title\"]'): title = a.text link = f'https://www.jianshu.com{a.attrs[\"href\"]}' print(f'„Ää{title}„Äã,{link}') Á±ª‰ººÁöÑÔºå‰ªäÊó•Â§¥Êù°ÁöÑ‰∏™‰∫∫È°µÈù¢‰πüÊòØÂºÇÊ≠•Âä†ËΩΩÁöÑÔºåÊâÄ‰ª•‰πüÂæóË∞ÉÁî®renderÂáΩÊï∞„ÄÇ 1234567891011121314from requests_html import HTMLSessionheaders = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0'}session = HTMLSession()r = session.get('https://www.toutiao.com/c/user/6662330738/#mid=1620400303194116', headers=headers)r.html.render()for i in r.html.find('div.rbox-inner a'): title = i.text link = f'https://www.toutiao.com{i.attrs[\"href\"]}' print(f'„Ää{title}„Äã {link}') ÊúÄÂêéÊòØrequests-htmlÁöÑÂÆòÁΩëÂú∞ÂùÄ‰ª•Âèä‰∏≠ÊñáÊñáÊ°£„ÄÇ 12https://html.python-requests.org/https://cncert.github.io/requests-html-doc-cn/ scrapy‰ª•‰∏ä‰ªãÁªçÁöÑÂá†‰∏™Ê°ÜÊû∂ÈÉΩÊòØÂêÑËá™ÊúâÂêÑËá™ÁöÑ‰ΩúÁî®ÔºåÊääÂÆÉ‰ª¨ÁªìÂêàËµ∑Êù•ÂèØ‰ª•ËææÂà∞ÁºñÂÜôÁà¨Ëô´ÁöÑÁõÆÁöÑÔºå‰ΩÜÊòØË¶ÅËØ¥‰∏ì‰∏öÁöÑÁà¨Ëô´Ê°ÜÊû∂ÔºåËøòÊòØÂæóË∞àË∞àscrapy„ÄÇ‰Ωú‰∏∫‰∏Ä‰∏™ËëóÂêçÁöÑÁà¨Ëô´Ê°ÜÊû∂ÔºåscrapyÂ∞ÜÁà¨Ëô´Ê®°ÂûãÊ°ÜÊû∂ÂåñÂíåÊ®°ÂùóÂåñÔºåÂà©Áî®scrapyÔºåÊàë‰ª¨ÂèØ‰ª•ËøÖÈÄüÁîüÊàêÂäüËÉΩÂº∫Â§ßÁöÑÁà¨Ëô´„ÄÇ‰∏çËøáscrapyÊ¶ÇÂøµ‰ºóÂ§öÔºåË¶Å‰ªîÁªÜËØ¥ËøòÂæó‰∏ìÈó®ÂºÄÁØáÊñáÁ´†ÔºåËøôÈáåÂ∞±Âè™ÁÆÄÂçïÊºîÁ§∫‰∏Ä‰∏ã„ÄÇÈ¶ñÂÖàÂÆâË£ÖscrapyÔºåÂ¶ÇÊûúÊòØWindowsÁ≥ªÁªüÔºåËøòÈúÄË¶ÅÂÆâË£Öpypiwin32„ÄÇ 12pip install scrapy pip install pypiwin32 ÁÑ∂ÂêéÂàõÂª∫scrapyÈ°πÁõÆÂπ∂Ê∑ªÂä†‰∏Ä‰∏™Êñ∞Áà¨Ëô´„ÄÇ 123scrapy startproject myprojectcd myprojectscrapy genspider my jianshu.com ÊâìÂºÄÈÖçÁΩÆÊñá‰ª∂settings.pyÔºåËÆæÁΩÆÁî®Êà∑‰ª£ÁêÜÔºåÂê¶Âàô‰ºöÈÅáÂà∞403ÈîôËØØ„ÄÇ 1USER_AGENT = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0' ÁÑ∂Âêé‰øÆÊîπ‰∏Ä‰∏ãÁà¨Ëô´„ÄÇ 1234567891011121314# -*- coding: utf-8 -*-import scrapyclass JianshuSpider(scrapy.Spider): name = 'jianshu' allowed_domains = ['jianshu.com'] start_urls = ['https://www.jianshu.com/u/7753478e1554'] def parse(self, response): for article in response.css('div.content'): yield { 'title': article.css('a.title::text').get(), 'link': 'https://www.jianshu.com' + article.xpath('a[@class=\"title\"]/@href').get() } ÊúÄÂêéËøêË°å‰∏Ä‰∏ãÁà¨Ëô´„ÄÇ 1scrapy crawl my üëá","link":"/spider/"},{"title":"3D touch","text":"","link":"/ÁºñÁ®ã/Ô£ø/3Dtouch/"},{"title":"Markdown ÁöÑËÆæËÆ°Âì≤Â≠¶","text":"MarkdownÊòØ‰∏ÄÁßçÂèØ‰ª•‰ΩøÁî®ÊôÆÈÄöÊñáÊú¨ÁºñËæëÂô®ÁºñÂÜôÁöÑÊ†áËÆ∞ËØ≠Ë®ÄÔºåÈÄöËøáÁÆÄÂçïÁöÑÊ†áËÆ∞ËØ≠Ê≥ïÔºåÂÆÉÂèØ‰ª•‰ΩøÊôÆÈÄöÊñáÊú¨ÂÜÖÂÆπÂÖ∑Êúâ‰∏ÄÂÆöÁöÑÊ†ºÂºè„ÄÇ ‰∏ªË¶ÅÂÜÖÂÆπ MarkdownÊòØ‰ªÄ‰πàÔºüË∞ÅÂàõÈÄ†‰∫ÜÂÆÉÔºü‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®ÂÆÉÔºüÊÄé‰πà‰ΩøÁî®ÔºüË∞ÅÂú®Áî®ÔºüÂ∞ùËØï‰∏Ä‰∏ã Ê≠£Êñá1. MarkdownÊòØ‰ªÄ‰πàÔºüMarkdownÊòØ‰∏ÄÁßçËΩªÈáèÁ∫ßÊ†áËÆ∞ËØ≠Ë®ÄÔºåÂÆÉ‰ª•Á∫ØÊñáÊú¨ÂΩ¢Âºè(ÊòìËØª„ÄÅÊòìÂÜô„ÄÅÊòìÊõ¥Êîπ)ÁºñÂÜôÊñáÊ°£ÔºåÂπ∂ÊúÄÁªà‰ª•HTMLÊ†ºÂºèÂèëÂ∏É„ÄÇMarkdown‰πüÂèØ‰ª•ÁêÜËß£‰∏∫Â∞Ü‰ª•MARKDOWNËØ≠Ê≥ïÁºñÂÜôÁöÑËØ≠Ë®ÄËΩ¨Êç¢ÊàêHTMLÂÜÖÂÆπÁöÑÂ∑•ÂÖ∑„ÄÇ 2. Ë∞ÅÂàõÈÄ†‰∫ÜÂÆÉÔºüÂÆÉÁî±Aaron SwartzÂíåJohn GruberÂÖ±ÂêåËÆæËÆ°ÔºåAaron SwartzÂ∞±ÊòØÈÇ£‰Ωç‰∫éÔºà2013Âπ¥1Êúà11Êó•ÔºâËá™ÊùÄ,ÊúâÁùÄÂºÄÊåÇ‰∏ÄËà¨‰∫∫ÁîüÁªèÂéÜÁöÑÁ®ãÂ∫èÂëò„ÄÇÁª¥Âü∫ÁôæÁßëÂØπ‰ªñÁöÑ‰ªãÁªçÊòØÔºöËΩØ‰ª∂Â∑•Á®ãÂ∏à„ÄÅ‰ΩúÂÆ∂„ÄÅÊîøÊ≤ªÁªÑÁªáËÄÖ„ÄÅ‰∫íËÅîÁΩëÊ¥ªÂä®ÂÆ∂„ÄÅÁª¥Âü∫ÁôæÁßë‰∫∫„ÄÇ ‰ªñÊúâÁùÄË∂≥‰ª•ËÆ©‰Ω†Ë∑™ÊãúÁöÑ‰∫∫ÁîüÁªèÂéÜÔºö 14Â≤ÅÂèÇ‰∏éRSS 1.0ËßÑÊ†ºÊ†áÂáÜÁöÑÂà∂ËÆ¢„ÄÇ 2004Âπ¥ÂÖ•ËØªÊñØÂù¶Á¶èÔºå‰πãÂêéÈÄÄÂ≠¶„ÄÇ 2005Âπ¥ÂàõÂª∫InfogamiÔºå‰πãÂêé‰∏éRedditÂêàÂπ∂Êàê‰∏∫ÂÖ∂Âêà‰ºô‰∫∫„ÄÇ 2010Âπ¥ÂàõÁ´ãÊ±ÇËøõ‰ºöÔºàDemand ProgressÔºâÔºåÁßØÊûÅÂèÇ‰∏éÁ¶ÅÊ≠¢ÁΩëÁªúÁõóÁâàÊ≥ïÊ°àÔºàSOPAÔºâÊ¥ªÂä®ÔºåÊúÄÁªàËØ•ÊèêÊ°àË¢´Êí§Âõû„ÄÇ 2011Âπ¥7Êúà19Êó•ÔºåÂõ†Ë¢´Êéß‰ªéMITÂíåJSTOR‰∏ãËΩΩ480‰∏áÁØáÂ≠¶ÊúØËÆ∫ÊñáÂπ∂‰ª•ÂÖçË¥πÂΩ¢Âºè‰∏ä‰º†‰∫éÁΩëÁªúË¢´Êçï„ÄÇ 2013Âπ¥1ÊúàËá™ÊùÄË∫´‰∫°„ÄÇ Â§©ÊâçÈÉΩÊúâÊó©ÈÄùÁöÑÂΩíÈÄî„ÄÇ 3. ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®ÂÆÉÔºü ÂÆÉÊòØÊòìËØªÔºàÁúãËµ∑Êù•ËàíÊúçÔºâ„ÄÅÊòìÂÜôÔºàËØ≠Ê≥ïÁÆÄÂçïÔºâ„ÄÅÊòìÊõ¥ÊîπÁ∫ØÊñáÊú¨„ÄÇÂ§ÑÂ§Ñ‰ΩìÁé∞ÁùÄÊûÅÁÆÄ‰∏ª‰πâÁöÑÂΩ±Â≠ê„ÄÇ ÂÖºÂÆπHTMLÔºåÂèØ‰ª•ËΩ¨Êç¢‰∏∫HTMLÊ†ºÂºèÂèëÂ∏É„ÄÇ Ë∑®Âπ≥Âè∞‰ΩøÁî®„ÄÇ Ë∂äÊù•Ë∂äÂ§öÁöÑÁΩëÁ´ôÊîØÊåÅMarkdown„ÄÇ Êõ¥Êñπ‰æøÊ∏ÖÊô∞Âú∞ÁªÑÁªá‰Ω†ÁöÑÁîµÂ≠êÈÇÆ‰ª∂„ÄÇÔºàMarkdown-here, AirmailÔºâ ÊëÜËÑ±WordÔºàÊàë‰∏çÊòØËÆ§ÁúüÁöÑÔºâ„ÄÇ 4. ÊÄé‰πà‰ΩøÁî®ÔºüÂ¶ÇÊûú‰∏çÁÆóÊâ©Â±ïÔºåMarkdownÁöÑËØ≠Ê≥ïÁªùÂØπÁÆÄÂçïÂà∞ËÆ©‰Ω†Áà±‰∏çÈáäÊâã„ÄÇ MarkdownËØ≠Ê≥ï‰∏ªË¶ÅÂàÜ‰∏∫Â¶Ç‰∏ãÂá†Â§ßÈÉ®ÂàÜÔºöÊ†áÈ¢òÔºåÊÆµËêΩÔºåÂå∫ÂùóÂºïÁî®Ôºå‰ª£Á†ÅÂå∫ÂùóÔºåÂº∫Ë∞ÉÔºåÂàóË°®ÔºåÂàÜÂâ≤Á∫øÔºåÈìæÊé•ÔºåÂõæÁâáÔºåÂèçÊñúÊù† \\ÔºåÁ¨¶Âè∑‚Äô`‚Äô„ÄÇ 4.1 Ê†áÈ¢ò‰∏§ÁßçÂΩ¢ÂºèÔºö1Ôºâ‰ΩøÁî®=Âíå-Ê†áËÆ∞‰∏ÄÁ∫ßÂíå‰∫åÁ∫ßÊ†áÈ¢ò„ÄÇ ‰∏ÄÁ∫ßÊ†áÈ¢ò=========‰∫åÁ∫ßÊ†áÈ¢ò--------- ÊïàÊûúÔºö ‰∏ÄÁ∫ßÊ†áÈ¢ò ‰∫åÁ∫ßÊ†áÈ¢ò 2Ôºâ‰ΩøÁî®#ÔºåÂèØË°®Á§∫1-6Á∫ßÊ†áÈ¢ò„ÄÇ # ‰∏ÄÁ∫ßÊ†áÈ¢ò## ‰∫åÁ∫ßÊ†áÈ¢ò### ‰∏âÁ∫ßÊ†áÈ¢ò#### ÂõõÁ∫ßÊ†áÈ¢ò##### ‰∫îÁ∫ßÊ†áÈ¢ò###### ÂÖ≠Á∫ßÊ†áÈ¢ò ÊïàÊûúÔºö ‰∏ÄÁ∫ßÊ†áÈ¢ò‰∫åÁ∫ßÊ†áÈ¢ò‰∏âÁ∫ßÊ†áÈ¢òÂõõÁ∫ßÊ†áÈ¢ò‰∫îÁ∫ßÊ†áÈ¢òÂÖ≠Á∫ßÊ†áÈ¢ò 4.2 ÊÆµËêΩÊÆµËêΩÁöÑÂâçÂêéË¶ÅÊúâÁ©∫Ë°åÔºåÊâÄË∞ìÁöÑÁ©∫Ë°åÊòØÊåáÊ≤°ÊúâÊñáÂ≠óÂÜÖÂÆπ„ÄÇËã•ÊÉ≥Âú®ÊÆµÂÜÖÂº∫Âà∂Êç¢Ë°åÁöÑÊñπÂºèÊòØ‰ΩøÁî®‰∏§‰∏™‰ª•‰∏äÁ©∫Ê†ºÂä†‰∏äÂõûËΩ¶ÔºàÂºïÁî®‰∏≠Êç¢Ë°åÁúÅÁï•ÂõûËΩ¶Ôºâ„ÄÇ 4.3 Âå∫ÂùóÂºïÁî®Âú®ÊÆµËêΩÁöÑÊØèË°åÊàñËÄÖÂè™Âú®Á¨¨‰∏ÄË°å‰ΩøÁî®Á¨¶Âè∑&gt;,ËøòÂèØ‰ΩøÁî®Â§ö‰∏™ÂµåÂ•óÂºïÁî®ÔºåÂ¶ÇÔºö &gt; Âå∫ÂùóÂºïÁî®&gt;&gt; ÂµåÂ•óÂºïÁî® ÊïàÊûúÔºö Âå∫ÂùóÂºïÁî® ÂµåÂ•óÂºïÁî® 4.4 ‰ª£Á†ÅÂå∫Âùó‰ª£Á†ÅÂå∫ÂùóÁöÑÂª∫Á´ãÊòØÂú®ÊØèË°åÂä†‰∏ä4‰∏™Á©∫Ê†ºÊàñËÄÖ‰∏Ä‰∏™Âà∂Ë°®Á¨¶ÔºàÂ¶ÇÂêåÂÜô‰ª£Á†Å‰∏ÄÊ†∑Ôºâ„ÄÇÂ¶ÇÊôÆÈÄöÊÆµËêΩÔºö void main(){ printf(‚ÄúHello, Markdown.‚Äù);} ‰ª£Á†ÅÂå∫ÂùóÔºö void main() { printf(&quot;Hello, Markdown.&quot;); }Ê≥®ÊÑè:ÈúÄË¶ÅÂíåÊôÆÈÄöÊÆµËêΩ‰πãÈó¥Â≠òÂú®Á©∫Ë°å„ÄÇ 4.5 Âº∫Ë∞ÉÂú®Âº∫Ë∞ÉÂÜÖÂÆπ‰∏§‰æßÂàÜÂà´Âä†‰∏ä*ÊàñËÄÖ_ÔºåÂ¶ÇÔºö *Êñú‰Ωì*Ôºå_Êñú‰Ωì_**Á≤ó‰Ωì**Ôºå__Á≤ó‰Ωì__ ÊïàÊûúÔºö Êñú‰ΩìÔºåÊñú‰ΩìÁ≤ó‰ΩìÔºåÁ≤ó‰Ωì 4.6 ÂàóË°®‰ΩøÁî®¬∑„ÄÅ+„ÄÅÊàñ-Ê†áËÆ∞Êó†Â∫èÂàóË°®ÔºåÂ¶ÇÔºö -Ôºà+*Ôºâ Á¨¨‰∏ÄÈ°π-Ôºà+*Ôºâ Á¨¨‰∫åÈ°π- Ôºà+*ÔºâÁ¨¨‰∏âÈ°π Ê≥®ÊÑèÔºöÊ†áËÆ∞ÂêéÈù¢ÊúÄÂ∞ëÊúâ‰∏Ä‰∏™_Á©∫Ê†ºÊàñÂà∂Ë°®Á¨¶_„ÄÇËã•‰∏çÂú®ÂºïÁî®Âå∫Âùó‰∏≠ÔºåÂøÖÈ°ªÂíåÂâçÊñπÊÆµËêΩ‰πãÈó¥Â≠òÂú®Á©∫Ë°å„ÄÇ ÊïàÊûúÔºö Á¨¨‰∏ÄÈ°π Á¨¨‰∫åÈ°π Á¨¨‰∏âÈ°π ÊúâÂ∫èÂàóË°®ÁöÑÊ†áËÆ∞ÊñπÂºèÊòØÂ∞Ü‰∏äËø∞ÁöÑÁ¨¶Âè∑Êç¢ÊàêÊï∞Â≠ó,Âπ∂ËæÖ‰ª•.ÔºåÂ¶ÇÔºö 1 . Á¨¨‰∏ÄÈ°π2 . Á¨¨‰∫åÈ°π3 . Á¨¨‰∏âÈ°π ÊïàÊûúÔºö Á¨¨‰∏ÄÈ°π Á¨¨‰∫åÈ°π Á¨¨‰∏âÈ°π 4.7 ÂàÜÂâ≤Á∫øÂàÜÂâ≤Á∫øÊúÄÂ∏∏‰ΩøÁî®Â∞±ÊòØ‰∏â‰∏™Êàñ‰ª•‰∏ä*ÔºåËøòÂèØ‰ª•‰ΩøÁî®-Âíå_„ÄÇ 4.8 ÈìæÊé•ÈìæÊé•ÂèØ‰ª•Áî±‰∏§ÁßçÂΩ¢ÂºèÁîüÊàêÔºöË°åÂÜÖÂºèÂíåÂèÇËÄÉÂºè„ÄÇË°åÂÜÖÂºèÔºö [younghzÁöÑMarkdownÂ∫ì](https:://github.com/younghz/Markdown ‚ÄúMarkdown‚Äù)„ÄÇ ÊïàÊûúÔºö younghzÁöÑMarkdownÂ∫ì„ÄÇ ÂèÇËÄÉÂºèÔºö [younghzÁöÑMarkdownÂ∫ì1][1][younghzÁöÑMarkdownÂ∫ì2][2][1]:https:://github.com/younghz/Markdown ‚ÄúMarkdown‚Äù[2]:https:://github.com/younghz/Markdown ‚ÄúMarkdown‚Äù ÊïàÊûúÔºö younghzÁöÑMarkdownÂ∫ì1younghzÁöÑMarkdownÂ∫ì2 Ê≥®ÊÑèÔºö‰∏äËø∞ÁöÑ[1]:https:://github.com/younghz/Markdown &quot;Markdown&quot;‰∏çÂá∫Áé∞Âú®Âå∫Âùó‰∏≠„ÄÇ 4.9 ÂõæÁâáÊ∑ªÂä†ÂõæÁâáÁöÑÂΩ¢ÂºèÂíåÈìæÊé•Áõ∏‰ººÔºåÂè™ÈúÄÂú®ÈìæÊé•ÁöÑÂü∫Á°Ä‰∏äÂâçÊñπÂä†‰∏Ä‰∏™ÔºÅ„ÄÇ 4.10 ÂèçÊñúÊù†\\Áõ∏ÂΩì‰∫éÂèçËΩ¨‰πâ‰ΩúÁî®„ÄÇ‰ΩøÁ¨¶Âè∑Êàê‰∏∫ÊôÆÈÄöÁ¨¶Âè∑„ÄÇ 4.11 Á¨¶Âè∑‚Äô`‚ÄôËµ∑Âà∞Ê†áËÆ∞‰ΩúÁî®„ÄÇÂ¶ÇÔºö `ctrl+a` ÊïàÊûúÔºö ctrl+a 5. Ë∞ÅÂú®Áî®ÔºüMarkdownÁöÑ‰ΩøÁî®ËÄÖÔºö GitHub ÁÆÄ‰π¶ Stack Overflow Apollo Moodle Reddit Á≠âÁ≠â 6. Â∞ùËØï‰∏Ä‰∏ã Chrome‰∏ãÁöÑÊèí‰ª∂ËØ∏Â¶Çstackedit‰∏émarkdown-hereÁ≠âÈùûÂ∏∏Êñπ‰æøÔºå‰πü‰∏çÁî®ÊãÖÂøÉÂπ≥Âè∞ÂèóÈôê„ÄÇ Âú®Á∫øÁöÑdillinger.ioËØÑ‰ª∑‰πü‰∏çÈîô Windowns‰∏ãÁöÑMarkdownPad‰πüÁî®ËøáÔºå‰∏çËøáÂÖçË¥πÁâàÁöÑ‰ΩìÈ™å‰∏çÊòØÂæàÂ•Ω„ÄÇ Mac‰∏ãÁöÑMouÊòØÂõΩ‰∫∫Ë¥°ÁåÆÁöÑÔºåÂè£Á¢ëÂæàÂ•Ω„ÄÇ Linux‰∏ãÁöÑReText‰∏çÈîô„ÄÇ ÂΩìÁÑ∂ÔºåÊúÄÁªàÂ¢ÉÁïåÊ∞∏ËøúÈÉΩÊòØÁ¨î‰∏ãÊòØËØ≠Ê≥ïÔºåÂøÉ‰∏≠Ê†ºÂºèÂåñ :)„ÄÇ Ê≥®ÊÑèÔºö‰∏çÂêåÁöÑMarkdownËß£ÈáäÂô®ÊàñÂ∑•ÂÖ∑ÂØπÁõ∏Â∫îËØ≠Ê≥ïÔºàÊâ©Â±ïËØ≠Ê≥ïÔºâÁöÑËß£ÈáäÊïàÊûú‰∏çÂ∞ΩÁõ∏ÂêåÔºåÂÖ∑‰ΩìÂèØÂèÇËßÅÂ∑•ÂÖ∑ÁöÑ‰ΩøÁî®ËØ¥Êòé„ÄÇËôΩÁÑ∂Êúâ‰∫∫ÊÉ≥Âá∫Èù¢Êêû‰∏Ä‰∏™ÊâÄË∞ìÁöÑÊ†áÂáÜÂåñÁöÑMarkdownÔºå[ÂàõÂßã‰∫∫John Gruber](https://blog.codinghorror.com/standard-markdown-is-now-common-markdown/ )„ÄÇ ‰ª•‰∏äÂü∫Êú¨ÊòØÊâÄÊúâtraditonal markdownÁöÑËØ≠Ê≥ï„ÄÇ ÂÖ∂ÂÆÉÔºöÂàóË°®ÁöÑ‰ΩøÁî®(Èùûtraditonal markdown)Ôºö Áî®|Ë°®Á§∫Ë°®Ê†ºÁ∫µÂêëËæπÁïåÔºåË°®Â§¥ÂíåË°®ÂÜÖÂÆπÁî®-ÈöîÂºÄÔºåÂπ∂ÂèØÁî®:ËøõË°åÂØπÈΩêËÆæÁΩÆÔºå‰∏§ËæπÈÉΩÊúâ:ÂàôË°®Á§∫Â±Ö‰∏≠ÔºåËã•‰∏çÂä†:ÂàôÈªòËÆ§Â∑¶ÂØπÈΩê„ÄÇ ‰ª£Á†ÅÂ∫ì ÈìæÊé• MarkDown https://github.com/younghz/Markdown MarkDownCopy https://github.com/younghz/Markdown ËßÜÈ¢ë ÂÖ≥‰∫éÂÖ∂ÂÆÉÊâ©Â±ïËØ≠Ê≥ïÂèØÂèÇËßÅÂÖ∑‰ΩìÂ∑•ÂÖ∑ÁöÑ‰ΩøÁî®ËØ¥Êòé„ÄÇ","link":"/ÁºñÁ®ã/Markdown/markdown/"},{"title":"ÈÅøÂÖç‰ΩøÁî® GCD GlobalÈòüÂàóÂàõÂª∫RunloopÂ∏∏È©ªÁ∫øÁ®ã","text":"Êú¨ÊñáÂØπÂ∫î Demo ‰ª•Âèä Markdown Êñá‰ª∂Âú®‰ªìÂ∫ì‰∏≠ÔºåÊñá‰∏≠ÁöÑÈîôËØØÂèØ‰ª•Êèê PR Âà∞Ëøô‰∏™Êñá‰ª∂ÔºåÊàë‰ºöÂèäÊó∂Êõ¥Êîπ„ÄÇ ÁõÆÂΩï ÈÅøÂÖç‰ΩøÁî® GCD GlobalÈòüÂàóÂàõÂª∫RunloopÂ∏∏È©ªÁ∫øÁ®ã GCD GlobalÈòüÂàóÂàõÂª∫Á∫øÁ®ãËøõË°åËÄóÊó∂Êìç‰ΩúÁöÑÈ£éÈô© ÈÅøÂÖç‰ΩøÁî® GCD Global ÈòüÂàóÂàõÂª∫ Runloop Â∏∏È©ªÁ∫øÁ®ã Âçï‰∏Ä Runloop Â∏∏È©ªÁ∫øÁ®ã Â§ö‰∏™ Runloop Â∏∏È©ªÁ∫øÁ®ã GCD GlobalÈòüÂàóÂàõÂª∫Á∫øÁ®ãËøõË°åËÄóÊó∂Êìç‰ΩúÁöÑÈ£éÈô©ÂÖàÊÄùËÄÉ‰∏ãÂ¶Ç‰∏ãÂá†‰∏™ÈóÆÈ¢òÔºö Êñ∞Âª∫Á∫øÁ®ãÁöÑÊñπÂºèÊúâÂì™‰∫õÔºüÂêÑËá™ÁöÑ‰ºòÁº∫ÁÇπÊòØ‰ªÄ‰πàÔºü dispatch_async ÂáΩÊï∞ÂàÜÂèëÂà∞ÂÖ®Â±ÄÈòüÂàó‰∏ÄÂÆö‰ºöÊñ∞Âª∫Á∫øÁ®ãÊâßË°å‰ªªÂä°‰πàÔºü Â¶ÇÊûúÂÖ®Â±ÄÈòüÂàóÂØπÂ∫îÁöÑÁ∫øÁ®ãÊ±†Â¶ÇÊûúÊª°‰∫ÜÔºåÂêéÁª≠ÁöÑÊ¥æÂèëÁöÑ‰ªªÂä°‰ºöÊÄé‰πàÂ§ÑÁΩÆÔºüÊúâ‰ªÄ‰πàÈ£éÈô©Ôºü Á≠îÊ°àÂ§ßËá¥ÊòØËøôÊ†∑ÁöÑÔºödispatch_async ÂáΩÊï∞ÂàÜÂèëÂà∞ÂÖ®Â±ÄÈòüÂàó‰∏ç‰∏ÄÂÆö‰ºöÊñ∞Âª∫Á∫øÁ®ãÊâßË°å‰ªªÂä°ÔºåÂÖ®Â±ÄÈòüÂàóÂ∫ïÂ±ÇÊúâ‰∏Ä‰∏™ÁöÑÁ∫øÁ®ãÊ±†ÔºåÂ¶ÇÊûúÁ∫øÁ®ãÊ±†Êª°‰∫ÜÔºåÈÇ£‰πàÂêéÁª≠ÁöÑ‰ªªÂä°‰ºöË¢´ block ‰ΩèÔºåÁ≠âÂæÖÂâçÈù¢ÁöÑ‰ªªÂä°ÊâßË°åÂÆåÊàêÔºåÊâç‰ºöÁªßÁª≠ÊâßË°å„ÄÇÂ¶ÇÊûúÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÈïøÊó∂Èó¥‰∏çÁªìÊùüÔºåÂêéÁª≠Â†ÜÁßØÁöÑ‰ªªÂä°‰ºöË∂äÊù•Ë∂äÂ§öÔºåÊ≠§Êó∂Â∞±‰ºöÂ≠òÂú® APP crashÁöÑÈ£éÈô©„ÄÇ ÊØîÂ¶ÇÔºö 12345678910111213- (void)dispatchTest1 { for (NSInteger i = 0; i&lt; 10000 ; i++) {dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ [self dispatchTask:i]; }); }}- (void)dispatchTask:(NSInteger)index { //Ê®°ÊãüËÄóÊó∂Êìç‰ΩúÔºåÊØîÂ¶ÇDB,ÁΩëÁªúÔºåÊñá‰ª∂ËØªÂÜôÁ≠âÁ≠â sleep(30); NSLog(@&quot;----:%ld&quot;,index);} ‰ª•‰∏äÈÄªËæëÁî®ÁúüÊú∫ÊµãËØï‰ºöÊúâÂç°Ê≠ªÁöÑÂá†ÁéáÔºåÂπ∂ÈùûÊØèÊ¨°ÈÉΩ‰ºöÂèëÁîüÔºå‰ΩÜÂ§öÂ∞ùËØïÂá†Ê¨°Â∞±‰ºöÂ§çÁé∞Ôºå‰º¥ÈöèÂâçÂêéÂè∞ÂàáÊç¢ÔºåcrashÂá†ÁéáÂ¢ûÂ§ß„ÄÇ ‰∏ãÈù¢ÂÅö‰∏Ä‰∏ãÂàÜÊûêÔºö ÂèÇÁúã GCD Ê∫êÁ†ÅÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÂÖ®Â±ÄÈòüÂàóÁöÑÁõ∏ÂÖ≥Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586 DISPATCH_NOINLINEstatic void_dispatch_queue_wakeup_global_slow(dispatch_queue_t dq, unsigned int n){ dispatch_root_queue_context_t qc = dq-&gt;do_ctxt; uint32_t i = n; int r; _dispatch_debug_root_queue(dq, __func__); dispatch_once_f(&amp;_dispatch_root_queues_pred, NULL, _dispatch_root_queues_init);#if HAVE_PTHREAD_WORKQUEUES#if DISPATCH_USE_PTHREAD_POOL if (qc-&gt;dgq_kworkqueue != (void*)(~0ul))#endif { _dispatch_root_queue_debug(\"requesting new worker thread for global \" \"queue: %p\", dq);#if DISPATCH_USE_LEGACY_WORKQUEUE_FALLBACK if (qc-&gt;dgq_kworkqueue) { pthread_workitem_handle_t wh; unsigned int gen_cnt; do { r = pthread_workqueue_additem_np(qc-&gt;dgq_kworkqueue, _dispatch_worker_thread4, dq, &amp;wh, &amp;gen_cnt); (void)dispatch_assume_zero(r); } while (--i); return; }#endif // DISPATCH_USE_LEGACY_WORKQUEUE_FALLBACK#if HAVE_PTHREAD_WORKQUEUE_SETDISPATCH_NP if (!dq-&gt;dq_priority) { r = pthread_workqueue_addthreads_np(qc-&gt;dgq_wq_priority, qc-&gt;dgq_wq_options, (int)i); (void)dispatch_assume_zero(r); return; }#endif#if HAVE_PTHREAD_WORKQUEUE_QOS r = _pthread_workqueue_addthreads((int)i, dq-&gt;dq_priority); (void)dispatch_assume_zero(r);#endif return; }#endif // HAVE_PTHREAD_WORKQUEUES#if DISPATCH_USE_PTHREAD_POOL dispatch_pthread_root_queue_context_t pqc = qc-&gt;dgq_ctxt; if (fastpath(pqc-&gt;dpq_thread_mediator.do_vtable)) { while (dispatch_semaphore_signal(&amp;pqc-&gt;dpq_thread_mediator)) { if (!--i) { return; } } } uint32_t j, t_count; // seq_cst with atomic store to tail &lt;rdar://problem/16932833&gt; t_count = dispatch_atomic_load2o(qc, dgq_thread_pool_size, seq_cst); do { if (!t_count) { _dispatch_root_queue_debug(\"pthread pool is full for root queue: \" \"%p\", dq); return; } j = i &gt; t_count ? t_count : i; } while (!dispatch_atomic_cmpxchgvw2o(qc, dgq_thread_pool_size, t_count, t_count - j, &amp;t_count, acquire)); pthread_attr_t *attr = &amp;pqc-&gt;dpq_thread_attr; pthread_t tid, *pthr = &amp;tid;#if DISPATCH_ENABLE_PTHREAD_ROOT_QUEUES if (slowpath(dq == &amp;_dispatch_mgr_root_queue)) { pthr = _dispatch_mgr_root_queue_init(); }#endif do { _dispatch_retain(dq); while ((r = pthread_create(pthr, attr, _dispatch_worker_thread, dq))) { if (r != EAGAIN) { (void)dispatch_assume_zero(r); } _dispatch_temporary_resource_shortage(); } } while (--j);#endif // DISPATCH_USE_PTHREAD_POOL} ÂØπ‰∫éÊâßË°åÁöÑ‰ªªÂä°Êù•ËØ¥ÔºåÊâÄÊâßË°åÁöÑÁ∫øÁ®ãÂÖ∑‰ΩìÊòØÂì™‰∏™Á∫øÁ®ãÔºåÂàôÊòØÈÄöËøá GCD ÁöÑÁ∫øÁ®ãÊ±†ÔºàThread PoolÔºâÊù•ËøõË°åË∞ÉÂ∫¶ÔºåÊ≠£Â¶ÇConcurrent Programming: APIs and ChallengesÊñáÁ´†ÈáåÁªôÁöÑÁ§∫ÊÑèÂõæÊâÄÁ§∫Ôºö ‰∏äÈù¢Ë¥¥ÁöÑÊ∫êÁ†ÅÔºåÊàë‰ª¨ÂÖ≥Ê≥®Â¶Ç‰∏ãÁöÑÈÉ®ÂàÜÔºö ÂÖ∂‰∏≠Êúâ‰∏Ä‰∏™Áî®Êù•ËÆ∞ÂΩïÁ∫øÁ®ãÊ±†Â§ßÂ∞èÁöÑÂ≠óÊÆµ dgq_thread_pool_size„ÄÇËøô‰∏™Â≠óÊÆµÊ†áËÆ∞ÁùÄGCDÁ∫øÁ®ãÊ±†ÁöÑÂ§ßÂ∞è„ÄÇÊëòÂΩï‰∏äÈù¢Ê∫êÁ†ÅÁöÑ‰∏ÄÈÉ®ÂàÜÔºö 123456789101112 uint32_t j, t_count;// seq_cst with atomic store to tail &lt;rdar://problem/16932833&gt;t_count = dispatch_atomic_load2o(qc, dgq_thread_pool_size, seq_cst);do { if (!t_count) { _dispatch_root_queue_debug(\"pthread pool is full for root queue: \" \"%p\", dq); return; } j = i &gt; t_count ? t_count : i;} while (!dispatch_atomic_cmpxchgvw2o(qc, dgq_thread_pool_size, t_count, t_count - j, &amp;t_count, acquire)); ‰ªéÊ∫êÁ†Å‰∏≠Êàë‰ª¨ÂèØ‰ª•ÂØπÂ∫îÂà∞ÂÆòÊñπÊñáÊ°£ ÔºöGetting the Global Concurrent Dispatch QueuesÈáåÁöÑËØ¥Ê≥ïÔºö A concurrent dispatch queue is useful when you have multiple tasks that can run in parallel. A concurrent queue is still a queue in that it dequeues tasks in a first-in, first-out order; however, a concurrent queue may dequeue additional tasks before any previous tasks finish. The actual number of tasks executed by a concurrent queue at any given moment is variable and can change dynamically as conditions in your application change. Many factors affect the number of tasks executed by the concurrent queues, including the number of available cores, the amount of work being done by other processes, and the number and priority of tasks in other serial dispatch queues. ‰πüÂ∞±ÊòØËØ¥Ôºö ÂÖ®Â±ÄÈòüÂàóÁöÑÂ∫ïÂ±ÇÊòØ‰∏Ä‰∏™Á∫øÁ®ãÊ±†ÔºåÂêëÂÖ®Â±ÄÈòüÂàó‰∏≠Êèê‰∫§ÁöÑ blockÔºåÈÉΩ‰ºöË¢´ÊîæÂà∞Ëøô‰∏™Á∫øÁ®ãÊ±†‰∏≠ÊâßË°åÔºåÂ¶ÇÊûúÁ∫øÁ®ãÊ±†Â∑≤Êª°ÔºåÂêéÁª≠ÂÜçÊèê‰∫§ block Â∞±‰∏ç‰ºöÂÜçÈáçÊñ∞ÂàõÂª∫Á∫øÁ®ã„ÄÇËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πà Demo ‰ºöÈÄ†ÊàêÂç°È°øÁîöËá≥ÂÜªÂ±èÁöÑÂéüÂõ†„ÄÇ ÈÅøÂÖç‰ΩøÁî® GCD Global ÈòüÂàóÂàõÂª∫ Runloop Â∏∏È©ªÁ∫øÁ®ãÂú®ÂÅöÁΩëË∑ØËØ∑Ê±ÇÊó∂Êàë‰ª¨Â∏∏Â∏∏ÂàõÂª∫‰∏Ä‰∏™ Runloop Â∏∏È©ªÁ∫øÁ®ãÁî®Êù•Êé•Êî∂„ÄÅÂìçÂ∫îÂêéÁª≠ÁöÑÊúçÂä°Á´ØÂõûÊâßÔºåÊØîÂ¶ÇNSURLConnection„ÄÅAFNetworkingÁ≠âÁ≠âÔºåÊàë‰ª¨ÂèØ‰ª•Áß∞ËøôÁßçÁ∫øÁ®ã‰∏∫ Runloop Â∏∏È©ªÁ∫øÁ®ã„ÄÇ Ê≠£Â¶Ç‰∏äÊñáÊâÄËø∞ÔºåÁî® GCD Global ÈòüÂàóÂàõÂª∫Á∫øÁ®ãËøõË°åËÄóÊó∂Êìç‰ΩúÊòØÂ≠òÂú®È£éÈô©ÁöÑ„ÄÇÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•ËØïÊÉ≥‰∏ãÔºåÂ¶ÇÊûúËøô‰∏™ËÄóÊó∂Êìç‰ΩúÂèòÊàê‰∫Ü runloop Â∏∏È©ªÁ∫øÁ®ãÔºå‰ºöÊòØ‰ªÄ‰πàÁªìÊûúÔºü‰∏ãÈù¢ÂÅö‰∏Ä‰∏ãÂàÜÊûêÔºö ÂÖà‰ªãÁªç‰∏ã Runloop Â∏∏È©ªÁ∫øÁ®ãÁöÑÂéüÁêÜÔºåÂú®ÂºÄÂèë‰∏≠‰∏ÄËà¨Êúâ‰∏§ÁßçÁî®Ê≥ïÔºö Âçï‰∏Ä Runloop Â∏∏È©ªÁ∫øÁ®ãÔºöÂú® APP ÁöÑÁîüÂëΩÂë®Êúü‰∏≠ÂºÄÂêØ‰∫ÜÂîØ‰∏ÄÁöÑÂ∏∏È©ªÁ∫øÁ®ãÊù•ËøõË°åÁΩëÁªúËØ∑Ê±ÇÔºåÂ∏∏Áî®‰∫éÁΩëÁªúÂ∫ìÔºåÊàñËÄÖÊúâÁª¥ÊåÅÈïøËøûÊé•ÈúÄÊ±ÇÁöÑÂ∫ìÔºåÊØîÂ¶ÇÔºö AFNetworking „ÄÅ SocketRocket„ÄÇ Â§ö‰∏™ Runloop Â∏∏È©ªÁ∫øÁ®ãÔºöÊØèËøõË°å‰∏ÄÊ¨°ÁΩëÁªúËØ∑Ê±ÇÂ∞±ÂºÄÂêØ‰∏ÄÊù° Runloop Â∏∏È©ªÁ∫øÁ®ãÔºåËøôÊù°Á∫øÁ®ãÁöÑÁîüÂëΩÂë®ÊúüÁöÑËµ∑ÁÇπÊòØÁΩëÁªúËØ∑Ê±ÇÂºÄÂßãÔºåÁªàÁÇπÊòØÁΩëÁªúËØ∑Ê±ÇÁªìÊùüÔºåÊàñËÄÖÁΩëÁªúËØ∑Ê±ÇË∂ÖÊó∂„ÄÇ Âçï‰∏Ä Runloop Â∏∏È©ªÁ∫øÁ®ãÂÖàËØ¥Á¨¨‰∏ÄÁßçÁî®Ê≥ïÔºö ‰ª• AFNetworking ‰∏∫‰æãÔºåAFURLConnectionOperation Ëøô‰∏™Á±ªÊòØÂü∫‰∫é NSURLConnection ÊûÑÂª∫ÁöÑÔºåÂÖ∂Â∏åÊúõËÉΩÂú®ÂêéÂè∞Á∫øÁ®ãÊé•Êî∂ Delegate ÂõûË∞É„ÄÇ‰∏∫Ê≠§ AFNetworking ÂçïÁã¨ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Á∫øÁ®ãÔºåÂπ∂Âú®Ëøô‰∏™Á∫øÁ®ã‰∏≠ÂêØÂä®‰∫Ü‰∏Ä‰∏™ RunLoopÔºö 123456789101112131415161718+ (void)networkRequestThreadEntryPoint:(id)__unused object { @autoreleasepool { [[NSThread currentThread] setName:@&quot;AFNetworking&quot;]; NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; [runLoop run]; }} + (NSThread *)networkRequestThread { static NSThread *_networkRequestThread = nil; static dispatch_once_t oncePredicate; dispatch_once(&amp;oncePredicate, ^{ _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil]; [_networkRequestThread start]; }); return _networkRequestThread;} Â§ö‰∏™ Runloop Â∏∏È©ªÁ∫øÁ®ãÁ¨¨‰∫åÁßçÁî®Ê≥ïÔºåÊàëÂÜô‰∫Ü‰∏Ä‰∏™Â∞è Demo Êù•Ê®°ÊãüËøôÁßçÂú∫ÊôØÔºå Êàë‰ª¨Ê®°Êãü‰∫Ü‰∏Ä‰∏™Âú∫ÊôØÔºöÂÅáËÆæÊâÄÊúâÁöÑÁΩëÁªúËØ∑Ê±ÇÂÖ®ÈÉ®Ë∂ÖÊó∂ÔºåÊàñËÄÖÊúçÂä°Á´ØÊ†πÊú¨‰∏çÂìçÂ∫îÔºåÁÑ∂ÂêéÁΩëÁªúÂ∫ìË∂ÖÊó∂Ê£ÄÊµãÊú∫Âà∂ÁöÑÂÅöÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#import &quot;Foo.h&quot;@interface Foo() { NSRunLoop *_runloop; NSTimer *_timeoutTimer; NSTimeInterval _timeoutInterval; dispatch_semaphore_t _sem;}@end@implementation Foo- (instancetype)init { if (!(self = [super init])) { return nil; } _timeoutInterval = 1 ; _sem = dispatch_semaphore_create(0); // Do any additional setup after loading the view, typically from a nib. return self;}- (id)test { // Á¨¨‰∏ÄÁßçÊñπÂºèÔºö // NSThread *networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint0:) object:nil]; // [networkRequestThread start]; //Á¨¨‰∫åÁßçÊñπÂºè: dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) { [self networkRequestThreadEntryPoint0:nil]; }); dispatch_semaphore_wait(_sem, DISPATCH_TIME_FOREVER); return @(YES);}- (void)networkRequestThreadEntryPoint0:(id)__unused object { @autoreleasepool { [[NSThread currentThread] setName:@&quot;CYLTest&quot;]; _runloop = [NSRunLoop currentRunLoop]; [_runloop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; _timeoutTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(stopLoop) userInfo:nil repeats:NO]; [_runloop addTimer:_timeoutTimer forMode:NSRunLoopCommonModes]; [_runloop run];//Âú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÊúÄÂ•Ω‰ΩøÁî®ËøôÁßçÊñπÂºèÊù•Á°Æ‰øùËÉΩrunloopÈÄÄÂá∫ÔºåÂÅöÂèåÈáçÁöÑ‰øùÈöú[runloop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:(timeoutInterval+5)]]; }}- (void)stopLoop { CFRunLoopStop([_runloop getCFRunLoop]); dispatch_semaphore_signal(_sem);}@end Â¶ÇÊûú 123456for (int i = 0; i &lt; 300 ; i++) { dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) { [[Foo new] test]; NSLog(@&quot;üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö%@ÔºàÂú®Á¨¨%@Ë°åÔºâÔºåÊèèËø∞Ôºö%@&quot;, @(__PRETTY_FUNCTION__), @(__LINE__), @&quot;&quot;); }); } ‰ª•‰∏äÈÄªËæëÁî®ÁúüÊú∫ÊµãËØï‰ºöÊúâÂç°Ê≠ªÁöÑÂá†ÁéáÔºåÂπ∂ÈùûÊØèÊ¨°ÈÉΩ‰ºöÂèëÁîüÔºå‰ΩÜÂ§öÂ∞ùËØïÂá†Ê¨°Â∞±‰ºöÂ§çÁé∞Ôºå‰º¥ÈöèÂâçÂêéÂè∞ÂàáÊç¢ÔºåcrashÂá†ÁéáÂ¢ûÂ§ß„ÄÇ ÂÖ∂‰∏≠Êàë‰ª¨ÈááÁî®‰∫Ü GCD ÂÖ®Â±ÄÈòüÂàóÁöÑÊñπÂºèÊù•ÂàõÂª∫Â∏∏È©ªÁ∫øÁ®ãÔºåÂõ†‰∏∫Âú®ÂàõÂª∫Êó∂ÂèØËÉΩÂ∑≤ÁªèÂá∫Áé∞‰∫ÜÂÖ®Â±ÄÈòüÂàóÁöÑÁ∫øÁ®ãÊ±†Êª°‰∫ÜÁöÑÊÉÖÂÜµÔºåÊâÄ‰ª• GCD Ê¥æÂèëÁöÑ‰ªªÂä°ÔºåÊó†Ê≥ïÊâßË°åÔºåËÄå‰∏îÊàë‰ª¨ÊääË∂ÖÊó∂Ê£ÄÊµãÁöÑÈÄªËæëÊîæËøõ‰∫ÜËøô‰∏™‰ªªÂä°‰∏≠ÔºåÊâÄ‰ª•ÂØºËá¥ÁöÑÊÉÖÂÜµÂ∞±ÊòØÔºåÊúâÂæàÂ§ö‰ªªÂä°ÁöÑË∂ÖÊó∂Ê£ÄÊµãÂäüËÉΩÂ§±Êïà‰∫Ü„ÄÇÊ≠§Êó∂Â∞±Âè™ËÉΩ‰æùËµñ‰∫éÊúçÂä°Á´ØÂìçÂ∫îÊù•ÁªìÊùüËØ•‰ªªÂä°ÔºàÊúçÂä°Á´ØÂìçÂ∫îËÉΩÁªìÊùüËØ•‰ªªÂä°ÁöÑÈÄªËæëÂú® Demo ‰∏≠Êú™ÁªôÂá∫ÔºâÔºå‰ΩÜÊòØÂ¶ÇÊûúÂÜçÂä†‰πãÊúçÂä°Á´Ø‰∏çÂìçÂ∫îÔºåÈÇ£‰πà‰ªªÂä°Â∞±Ê∞∏Ëøú‰∏ç‰ºöÁªìÊùü„ÄÇÂêéÁª≠ÁöÑÁΩëÁªúËØ∑Ê±Ç‰πü‰ºöÂ∞±Ê≠§ block ‰ΩèÔºåÈÄ†Êàê crash„ÄÇ Â¶ÇÊûúÊàë‰ª¨Êää GCD ÂÖ®Â±ÄÈòüÂàóÊç¢Êàê NSThread ÁöÑÊñπÂºèÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•‰øùËØÅÊØèÊ¨°ÈÉΩ‰ºöÂàõÂª∫Êñ∞ÁöÑÁ∫øÁ®ã„ÄÇ Ê≥®ÊÑèÔºöÊñáÁ´†‰∏≠Âè™ÊºîÁ§∫ÁöÑÊòØË∂ÖÊó∂ cancel runloop ÁöÑÊìç‰ΩúÔºåÂÆûÈôÖÈ°πÁõÆ‰∏≠‰∏ÄÂÆöÊúâÂÖ∂‰ªñ‰∏ªÂä® cancel runloop ÁöÑÊìç‰ΩúÔºåÂ∞±ÊØîÂ¶ÇÁΩëÁªúËØ∑Ê±ÇÊàêÂäüÊàñÂ§±Ë¥•ÂêéÈúÄË¶ÅËøõË°åcancelÊìç‰Ωú„ÄÇ‰ª£Á†Å‰∏≠Ê≤°ÊúâÂ±ïÁ§∫ÁΩëÁªúËØ∑Ê±ÇÊàêÂäüÊàñÂ§±Ë¥•ÂêéÁöÑ cancel Êìç‰Ωú„ÄÇ Demo ÁöÑËøôÁßçÊ®°ÊãüÂèØËÉΩÊØîËæÉÊûÅÁ´ØÔºå‰ΩÜÊòØÂ¶ÇÊûú‰Ω†Áª¥Êä§ÁöÑÊòØ‰∏Ä‰∏™ÂÉè AFNetworking ËøôÊ†∑ÁöÑ‰∏Ä‰∏™ÁΩëÁªúÂ∫ìÔºå‰Ω†‰ºöÊîæÂøÉÊääÂàõÂª∫Â∏∏È©ªÁ∫øÁ®ãËøôÊ†∑ÁöÑÊìç‰Ωú‰∫§Áªô GCD ÂÖ®Â±ÄÈòüÂàóÂêóÔºüÂõ†‰∏∫Êï¥‰∏™ APP ÊòØÂú®ÂÖ±‰∫´‰∏Ä‰∏™ÂÖ®Â±ÄÈòüÂàóÁöÑÁ∫øÁ®ãÊ±†ÔºåÈÇ£‰πàÂ¶ÇÊûú APP ÊääÁ∫øÁ®ãÊ±†Ê≤æÊª°‰∫ÜÔºåÁîöËá≥Á∫øÁ®ãÊ±†ÈïøÊó∂Èó¥Âç†Êª°‰∏î‰∏çÁªìÊùüÔºåÈÇ£‰πà AFNetworking Â∞±Ëá™ÁÑ∂‰∏çËÉΩÂÜçÊâßË°å‰ªªÂä°‰∫ÜÔºåÊâÄ‰ª•Êàë‰ª¨ÁúãÂà∞ÔºåÂç≥‰ΩøÊòØÂè™‰ºöÂàõÂª∫‰∏ÄÊù°Â∏∏È©ªÁ∫øÁ®ãÔºå AFNetworking ‰æùÁÑ∂ÈááÁî®‰∫Ü NSThread ÁöÑÊñπÂºèËÄåÈùû GCD ÂÖ®Â±ÄÈòüÂàóËøôÁßçÊñπÂºè„ÄÇ Ê≥®ÈáäÔºö‰ª•‰∏ãÊñπÊ≥ïÂ≠òÂú®‰∫éËÄÅÁâàÊú¨AFN 2.x ‰∏≠„ÄÇ 123456789101112131415161718+ (void)networkRequestThreadEntryPoint:(id)__unused object { @autoreleasepool { [[NSThread currentThread] setName:@&quot;AFNetworking&quot;]; NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; [runLoop run]; }} + (NSThread *)networkRequestThread { static NSThread *_networkRequestThread = nil; static dispatch_once_t oncePredicate; dispatch_once(&amp;oncePredicate, ^{ _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil]; [_networkRequestThread start]; }); return _networkRequestThread;} Ê≠£Â¶Ç‰Ω†ÊâÄÁúãÂà∞ÁöÑÔºåÊ≤°Êúâ‰ªª‰Ωï‰∏Ä‰∏™Â∫ì‰ºöÁî® GCD ÂÖ®Â±ÄÈòüÂàóÊù•ÂàõÂª∫Â∏∏È©ªÁ∫øÁ®ãÔºåËÄå‰Ω†‰πüÂ∫îËØ• ÈÅøÂÖç‰ΩøÁî® GCD Global ÈòüÂàóÊù•ÂàõÂª∫ Runloop Â∏∏È©ªÁ∫øÁ®ã„ÄÇ Posted by ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÂéüÂàõÊñáÁ´†ÔºåÁâàÊùÉÂ£∞ÊòéÔºöËá™Áî±ËΩ¨ËΩΩ-ÈùûÂïÜÁî®-ÈùûË°çÁîü-‰øùÊåÅÁΩ≤Âêç | Creative Commons BY-NC-ND 3.0","link":"/ÁºñÁ®ã/Ô£ø/GCD-Global/"},{"title":"ÁªÜËØ¥GCDÔºàGrand Central DispatchÔºâÂ¶Ç‰ΩïÁî®","text":"Êñá‰∏≠ËæÉËØ¶ÁªÜ‰ªãÁªçGCDÈòüÂàóÔºåÂêÑÁßçGCD‰ΩøÁî®ÊñπÊ≥ïÔºåÂÆû‰æãÂ¶Ç‰Ωï‰ΩøÁî®Dispatch SourceÁõëÂê¨Á≥ªÁªüÂ∫ïÂ±ÇÂØπË±°ÔºåÂàÜÊûê‰∏çÂêåÈîÅÁöÑÊÄßËÉΩÂØπÊØîÔºåÂÆû‰æãGCDÊ≠ªÈîÅÊÉÖÂÜµ„ÄÇÊñá‰∏≠ÁöÑDemoÂú®ËøôÈáå https://github.com/ming1016/GCDDemo ÂØπÁùÄÊñáÁ´†ËØïÁùÄÊù•Ë∞Édemo‰Ωì‰ºöÊõ¥Ê∑±Âì¶ÔºåÁªÜÁªÜÂöºÊ∂àÂåñÂ•Ω:) GCDÔºàGrand Central DispatchÔºâ ‰ªãÁªçGCDÂ±û‰∫éÁ≥ªÁªüÁ∫ßÁöÑÁ∫øÁ®ãÁÆ°ÁêÜÔºåÂú®Dispatch queue‰∏≠ÊâßË°åÈúÄË¶ÅÊâßË°åÁöÑ‰ªªÂä°ÊÄßËÉΩÈùûÂ∏∏ÁöÑÈ´ò„ÄÇGCDËøôÂùóÂ∑≤ÁªèÂºÄÊ∫êÔºåÂú∞ÂùÄhttps://libdispatch.macosforge.org„ÄÇGCD‰∏≠ÁöÑFIFOÈòüÂàóÁß∞‰∏∫dispatch queueÔºåÁî®Êù•‰øùËØÅÂÖàËøõÊù•ÁöÑ‰ªªÂä°ÂÖàÂæóÂà∞ÊâßË°å„ÄÇ GCDÊ¶ÇË¶Å Âíåoperation queue‰∏ÄÊ†∑ÈÉΩÊòØÂü∫‰∫éÈòüÂàóÁöÑÂπ∂ÂèëÁºñÁ®ãAPIÔºå‰ªñ‰ª¨ÈÄöËøáÈõÜ‰∏≠ÁÆ°ÁêÜÂ§ßÂÆ∂ÂçèÂêå‰ΩøÁî®ÁöÑÁ∫øÁ®ãÊ±†„ÄÇ ÂÖ¨ÂºÄÁöÑ5‰∏™‰∏çÂêåÈòüÂàóÔºöËøêË°åÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÁöÑmain queueÔºå3‰∏™‰∏çÂêå‰ºòÂÖàÁ∫ßÁöÑÂêéÂè∞ÈòüÂàóÔºàHigh Priority QueueÔºåDefault Priority QueueÔºåLow Priority QueueÔºâÔºå‰ª•Âèä‰∏Ä‰∏™‰ºòÂÖàÁ∫ßÊõ¥‰ΩéÁöÑÂêéÂè∞ÈòüÂàóBackground Priority QueueÔºàÁî®‰∫éI/OÔºâ ÂèØÂàõÂª∫Ëá™ÂÆö‰πâÈòüÂàóÔºö‰∏≤Ë°åÊàñÂπ∂ÂàóÈòüÂàó„ÄÇËá™ÂÆö‰πâ‰∏ÄËà¨ÊîæÂú®Default Priority QueueÂíåMain QueueÈáå„ÄÇ Êìç‰ΩúÊòØÂú®Â§öÁ∫øÁ®ã‰∏äËøòÊòØÂçïÁ∫øÁ®ã‰∏ªË¶ÅÊòØÁúãÈòüÂàóÁöÑÁ±ªÂûãÂíåÊâßË°åÊñπÊ≥ïÔºåÂπ∂Ë°åÈòüÂàóÂºÇÊ≠•ÊâßË°åÊâçËÉΩÂú®Â§öÁ∫øÁ®ãÔºåÂπ∂Ë°åÈòüÂàóÂêåÊ≠•ÊâßË°åÂ∞±Âè™‰ºöÂú®Ëøô‰∏™Âπ∂Ë°åÈòüÂàóÂú®ÈòüÂàó‰∏≠Ë¢´ÂàÜÈÖçÁöÑÈÇ£‰∏™Á∫øÁ®ãÊâßË°å„ÄÇÔºàTorchLennon ÊåáÂá∫ÂÖàÂâçÊñá‰∏≠Ê≠§Âè•‰∏ÄÂ§ÑÈîôËØØÔºâ Âü∫Êú¨Ê¶ÇÂøµ Á≥ªÁªüÊ†áÂáÜ‰∏§‰∏™ÈòüÂàó 1234//ÂÖ®Â±ÄÈòüÂàóÔºå‰∏Ä‰∏™Âπ∂Ë°åÁöÑÈòüÂàódispatch_get_global_queue//‰∏ªÈòüÂàóÔºå‰∏ªÁ∫øÁ®ã‰∏≠ÁöÑÂîØ‰∏ÄÈòüÂàóÔºå‰∏Ä‰∏™‰∏≤Ë°åÈòüÂàódispatch_get_main_queue Ëá™ÂÆö‰πâÈòüÂàó 1234//‰∏≤Ë°åÈòüÂàódispatch_queue_create(&quot;com.starming.serialqueue&quot;, DISPATCH_QUEUE_SERIAL)//Âπ∂Ë°åÈòüÂàódispatch_queue_create(&quot;com.starming.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT) ÂêåÊ≠•ÂºÇÊ≠•Á∫øÁ®ãÂàõÂª∫ 1234//ÂêåÊ≠•Á∫øÁ®ãdispatch_sync(..., ^(block))//ÂºÇÊ≠•Á∫øÁ®ãdispatch_async(..., ^(block)) ÈòüÂàóÔºàdispatch queueÔºâ SerialÔºöÂèàÂè´private dispatch queuesÔºåÂêåÊó∂Âè™ÊâßË°å‰∏Ä‰∏™‰ªªÂä°„ÄÇSerial queueÂ∏∏Áî®‰∫éÂêåÊ≠•ËÆøÈóÆÁâπÂÆöÁöÑËµÑÊ∫êÊàñÊï∞ÊçÆ„ÄÇÂΩì‰Ω†ÂàõÂª∫Â§ö‰∏™Serial queueÊó∂ÔºåËôΩÁÑ∂ÂêÑËá™ÊòØÂêåÊ≠•Ôºå‰ΩÜserial queue‰πãÈó¥ÊòØÂπ∂ÂèëÊâßË°å„ÄÇ Main dispatch queueÔºöÂÖ®Â±ÄÂèØÁî®ÁöÑserial queueÔºåÂú®Â∫îÁî®Á®ãÂ∫è‰∏ªÁ∫øÁ®ã‰∏äÊâßË°å‰ªªÂä°„ÄÇ ConcurrentÔºöÂèàÂè´global dispatch queueÔºåÂèØ‰ª•Âπ∂ÂèëÁöÑÊâßË°åÂ§ö‰∏™‰ªªÂä°Ôºå‰ΩÜÊâßË°åÂÆåÊàêÈ°∫Â∫èÊòØÈöèÊú∫ÁöÑ„ÄÇÁ≥ªÁªüÊèê‰æõÂõõ‰∏™ÂÖ®Â±ÄÂπ∂ÂèëÈòüÂàóÔºåËøôÂõõ‰∏™ÈòüÂàóÊúâËøôÂØπÂ∫îÁöÑ‰ºòÂÖàÁ∫ßÔºåÁî®Êà∑ÊòØ‰∏çËÉΩÂ§üÂàõÂª∫ÂÖ®Â±ÄÈòüÂàóÁöÑÔºåÂè™ËÉΩËé∑Âèñ„ÄÇ 12dipatch_queue_t queue;queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0); user create queueÔºöÂàõÂª∫Ëá™Â∑±ÂÆö‰πâÁöÑÈòüÂàóÔºåÂèØ‰ª•Áî®dispatch_queue_createÂáΩÊï∞ÔºåÂáΩÊï∞Êúâ‰∏§‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑÈòüÂàóÂêçÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÈòüÂàóÁ±ªÂûãÔºåÈªòËÆ§NULLÊàñËÄÖDISPATCH_QUEUE_SERIALÁöÑÊòØ‰∏≤Ë°åÔºåÂèÇÊï∞‰∏∫DISPATCH_QUEUE_CONCURRENT‰∏∫Âπ∂Ë°åÈòüÂàó„ÄÇ 12dispatch_queue_t queuequeue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT); Ëá™ÂÆö‰πâÈòüÂàóÁöÑ‰ºòÂÖàÁ∫ßÔºöÂèØ‰ª•ÈÄöËøádipatch_queue_attr_make_with_qos_classÊàñdispatch_set_target_queueÊñπÊ≥ïËÆæÁΩÆÈòüÂàóÁöÑ‰ºòÂÖàÁ∫ß 12345678//dipatch_queue_attr_make_with_qos_classdispatch_queue_attr_t attr = dispatch_queue_attr_make_with_qos_class(DISPATCH_QUEUE_SERIAL, QOS_CLASS_UTILITY, -1);dispatch_queue_t queue = dispatch_queue_create(&quot;com.starming.gcddemo.qosqueue&quot;, attr);//dispatch_set_target_queuedispatch_queue_t queue = dispatch_queue_create(&quot;com.starming.gcddemo.settargetqueue&quot;,NULL); //ÈúÄË¶ÅËÆæÁΩÆ‰ºòÂÖàÁ∫ßÁöÑqueuedispatch_queue_t referQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0); //ÂèÇËÄÉ‰ºòÂÖàÁ∫ßdispatch_set_target_queue(queue, referQueue); //ËÆæÁΩÆqueueÂíåreferQueueÁöÑ‰ºòÂÖàÁ∫ß‰∏ÄÊ†∑ dispatch_set_target_queueÔºöÂèØ‰ª•ËÆæÁΩÆ‰ºòÂÖàÁ∫ßÔºå‰πüÂèØ‰ª•ËÆæÁΩÆÈòüÂàóÂ±ÇÁ∫ß‰ΩìÁ≥ªÔºåÊØîÂ¶ÇËÆ©Â§ö‰∏™‰∏≤Ë°åÂíåÂπ∂Ë°åÈòüÂàóÂú®Áªü‰∏Ä‰∏Ä‰∏™‰∏≤Ë°åÈòüÂàóÈáå‰∏≤Ë°åÊâßË°åÔºåÂ¶Ç‰∏ã 12345678910111213141516171819dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL);dispatch_queue_t firstQueue = dispatch_queue_create(&quot;com.starming.gcddemo.firstqueue&quot;, DISPATCH_QUEUE_SERIAL);dispatch_queue_t secondQueue = dispatch_queue_create(&quot;com.starming.gcddemo.secondqueue&quot;, DISPATCH_QUEUE_CONCURRENT);dispatch_set_target_queue(firstQueue, serialQueue);dispatch_set_target_queue(secondQueue, serialQueue);dispatch_async(firstQueue, ^{ NSLog(@&quot;1&quot;); [NSThread sleepForTimeInterval:3.f];});dispatch_async(secondQueue, ^{ NSLog(@&quot;2&quot;); [NSThread sleepForTimeInterval:2.f];});dispatch_async(secondQueue, ^{ NSLog(@&quot;3&quot;); [NSThread sleepForTimeInterval:1.f];}); ÈòüÂàóÁ±ªÂûãÈòüÂàóÈªòËÆ§ÊòØ‰∏≤Ë°åÁöÑÔºåÂ¶ÇÊûúËÆæÁΩÆÊîπÂèÇÊï∞‰∏∫NULL‰ºöÊåâ‰∏≤Ë°åÂ§ÑÁêÜÔºåÂè™ËÉΩÊâßË°å‰∏Ä‰∏™ÂçïÁã¨ÁöÑblockÔºåÈòüÂàó‰πüÂèØ‰ª•ÊòØÂπ∂Ë°åÁöÑÔºåÂêå‰∏ÄÊó∂Èó¥ÊâßË°åÂ§ö‰∏™block 123456789101112- (id)init;{ self = [super init]; if (self != nil) { NSString *label = [NSString stringWithFormat:@&quot;%@.isolation.%p&quot;, [self class], self]; self.isolationQueue = dispatch_queue_create([label UTF8String], 0); label = [NSString stringWithFormat:@&quot;%@.work.%p&quot;, [self class], self]; self.workQueue = dispatch_queue_create([label UTF8String], 0); } return self;} 5ÁßçÈòüÂàóÔºå‰∏ªÈòüÂàóÔºàmain queueÔºâ,ÂõõÁßçÈÄöÁî®Ë∞ÉÂ∫¶ÈòüÂàóÔºåËá™Â∑±ÂÆöÂà∂ÁöÑÈòüÂàó„ÄÇÂõõÁßçÈÄöÁî®Ë∞ÉÂ∫¶ÈòüÂàó‰∏∫ QOS_CLASS_USER_INTERACTIVEÔºöuser interactiveÁ≠âÁ∫ßË°®Á§∫‰ªªÂä°ÈúÄË¶ÅË¢´Á´ãÂç≥ÊâßË°åÊèê‰æõÂ•ΩÁöÑ‰ΩìÈ™åÔºåÁî®Êù•Êõ¥Êñ∞UIÔºåÂìçÂ∫î‰∫ã‰ª∂Á≠â„ÄÇËøô‰∏™Á≠âÁ∫ßÊúÄÂ•Ω‰øùÊåÅÂ∞èËßÑÊ®°„ÄÇ QOS_CLASS_USER_INITIATEDÔºöuser initiatedÁ≠âÁ∫ßË°®Á§∫‰ªªÂä°Áî±UIÂèëËµ∑ÂºÇÊ≠•ÊâßË°å„ÄÇÈÄÇÁî®Âú∫ÊôØÊòØÈúÄË¶ÅÂèäÊó∂ÁªìÊûúÂêåÊó∂ÂèàÂèØ‰ª•ÁªßÁª≠‰∫§‰∫íÁöÑÊó∂ÂÄô„ÄÇ QOS_CLASS_UTILITYÔºöutilityÁ≠âÁ∫ßË°®Á§∫ÈúÄË¶ÅÈïøÊó∂Èó¥ËøêË°åÁöÑ‰ªªÂä°Ôºå‰º¥ÊúâÁî®Êà∑ÂèØËßÅËøõÂ∫¶ÊåáÁ§∫Âô®„ÄÇÁªèÂ∏∏‰ºöÁî®Êù•ÂÅöËÆ°ÁÆóÔºåI/OÔºåÁΩëÁªúÔºåÊåÅÁª≠ÁöÑÊï∞ÊçÆÂ°´ÂÖÖÁ≠â‰ªªÂä°„ÄÇËøô‰∏™‰ªªÂä°ËäÇËÉΩ„ÄÇ QOS_CLASS_BACKGROUNDÔºöbackgroundÁ≠âÁ∫ßË°®Á§∫Áî®Êà∑‰∏ç‰ºöÂØüËßâÁöÑ‰ªªÂä°Ôºå‰ΩøÁî®ÂÆÉÊù•Â§ÑÁêÜÈ¢ÑÂä†ËΩΩÔºåÊàñËÄÖ‰∏çÈúÄË¶ÅÁî®Êà∑‰∫§‰∫íÂíåÂØπÊó∂Èó¥‰∏çÊïèÊÑüÁöÑ‰ªªÂä°„ÄÇ Á§∫‰æãÔºöÂêéÂè∞Âä†ËΩΩÊòæÁ§∫ÂõæÁâá 12345678910override func viewDidLoad() { super.viewDidLoad() dispatch_async(dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)) { // Â∞ÜÂ∑•‰Ωú‰ªé‰∏ªÁ∫øÁ®ãËΩ¨ÁßªÂà∞ÂÖ®Â±ÄÈòüÂàó‰∏≠ÔºåËøôÊòØdispatch_asyncË∞ÉÁî®ÔºåÂºÇÊ≠•Êèê‰∫§‰øùËØÅË∞ÉÁî®Á∫øÁ®ã‰ºöÁªßÁª≠ÊâßË°å‰∏ãÂéªÔºåËøôÊ†∑viewDidLoadÂú®‰∏ªÁ∫øÁ®ã‰∏äËÉΩÂ§üÊõ¥Êó©ÂÆåÊàêÔºå let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(dispatch_get_main_queue()) { // Êñ∞ÂõæÂÆåÊàêÔºåÊää‰∏Ä‰∏™Èó≠ÂåÖÂä†ÂÖ•‰∏ªÁ∫øÁ®ãÁî®Êù•Êõ¥Êñ∞UIImageViewÔºåÂè™ÊúâÂú®‰∏ªÁ∫øÁ®ãËÉΩÊìç‰ΩúUIKit„ÄÇ self.fadeInNewImage(overlayImage) // Êõ¥Êñ∞UI } }} ‰ΩïÊó∂‰ΩøÁî®‰ΩïÁßçÈòüÂàóÁ±ªÂûã ‰∏ªÈòüÂàóÔºàÈ°∫Â∫èÔºâÔºöÈòüÂàó‰∏≠Êúâ‰ªªÂä°ÂÆåÊàêÈúÄË¶ÅÊõ¥Êñ∞UIÊó∂Ôºådispatch_afterÂú®ËøôÁßçÁ±ªÂûã‰∏≠‰ΩøÁî®„ÄÇ Âπ∂ÂèëÈòüÂàóÔºöÁî®Êù•ÊâßË°å‰∏éUIÊó†ÂÖ≥ÁöÑÂêéÂè∞‰ªªÂä°Ôºådispatch_syncÊîæÂú®ËøôÈáåÔºåÊñπ‰æøÁ≠âÂæÖ‰ªªÂä°ÂÆåÊàêËøõË°åÂêéÁª≠Â§ÑÁêÜÊàñÂíådispatch barrierÂêåÊ≠•„ÄÇdispatch groupsÊîæÂú®ËøôÈáå‰πü‰∏çÈîô„ÄÇ Ëá™ÂÆö‰πâÈ°∫Â∫èÈòüÂàóÔºöÈ°∫Â∫èÊâßË°åÂêéÂè∞‰ªªÂä°Âπ∂ËøΩË∏™ÂÆÉÊó∂„ÄÇËøôÊ†∑ÂÅöÂêåÊó∂Âè™Êúâ‰∏Ä‰∏™‰ªªÂä°Âú®ÊâßË°åÂèØ‰ª•Èò≤Ê≠¢ËµÑÊ∫êÁ´û‰∫â„ÄÇdipatch barriersËß£ÂÜ≥ËØªÂÜôÈîÅÈóÆÈ¢òÁöÑÊîæÂú®ËøôÈáåÂ§ÑÁêÜ„ÄÇdispatch groups‰πüÊòØÊîæÂú®ËøôÈáå„ÄÇ ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊñπÊ≥ïÁÆÄÂåñQoSÁ≠âÁ∫ßÂèÇÊï∞ÁöÑÂÜôÊ≥ï 1234567891011121314151617181920212223var GlobalMainQueue: dispatch_queue_t { return dispatch_get_main_queue()}var GlobalUserInteractiveQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_USER_INTERACTIVE.value), 0)}var GlobalUserInitiatedQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)}var GlobalUtilityQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_UTILITY.value), 0)}var GlobalBackgroundQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_BACKGROUND.value), 0)}//‰ΩøÁî®Ëµ∑Êù•Â∞±ÊòØËøôÊ†∑ÔºåÊòìËØªËÄå‰∏îÂÆπÊòìÁúãÂá∫Âú®‰ΩøÁî®Âì™‰∏™ÈòüÂàódispatch_async(GlobalUserInitiatedQueue) { let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(GlobalMainQueue) { self.fadeInNewImage(overlayImage) }} dispatch_onceÁî®Ê≥ïdispatch_once_tË¶ÅÊòØÂÖ®Â±ÄÊàñstaticÂèòÈáèÔºå‰øùËØÅdispatch_once_tÂè™Êúâ‰∏Ä‰ªΩÂÆû‰æã 12345678910+ (UIColor *)boringColor;{ static UIColor *color; //Âè™ËøêË°å‰∏ÄÊ¨° static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ color = [UIColor colorWithRed:0.380f green:0.376f blue:0.376f alpha:1.000f]; }); return color;} dispatch_asyncËÆæËÆ°‰∏Ä‰∏™ÂºÇÊ≠•ÁöÑAPIË∞ÉÁî®dispatch_async()ÔºåËøô‰∏™Ë∞ÉÁî®ÊîæÂú®APIÁöÑÊñπÊ≥ïÊàñÂáΩÊï∞‰∏≠ÂÅö„ÄÇËÆ©APIÁöÑ‰ΩøÁî®ËÄÖËÆæÁΩÆ‰∏Ä‰∏™ÂõûË∞ÉÂ§ÑÁêÜÈòüÂàó 123456789- (void)processImage:(UIImage *)image completionHandler:(void(^)(BOOL success))handler;{ dispatch_async(self.isolationQueue, ^(void){ // do actual processing here dispatch_async(self.resultQueue, ^(void){ handler(YES); }); });} ÂèØ‰ª•ÈÅøÂÖçÁïåÈù¢‰ºöË¢´‰∏Ä‰∫õËÄóÊó∂ÁöÑÊìç‰ΩúÂç°Ê≠ªÔºåÊØîÂ¶ÇËØªÂèñÁΩëÁªúÊï∞ÊçÆÔºåÂ§ßÊï∞ÊçÆIOÔºåËøòÊúâÂ§ßÈáèÊï∞ÊçÆÁöÑÊï∞ÊçÆÂ∫ìËØªÂÜôÔºåËøôÊó∂ÈúÄË¶ÅÂú®Âè¶‰∏Ä‰∏™Á∫øÁ®ã‰∏≠Â§ÑÁêÜÔºåÁÑ∂ÂêéÈÄöÁü•‰∏ªÁ∫øÁ®ãÊõ¥Êñ∞ÁïåÈù¢ÔºåGCD‰ΩøÁî®Ëµ∑Êù•ÊØîNSThreadÂíåNSOperationÊñπÊ≥ïË¶ÅÁÆÄÂçïÊñπ‰æø„ÄÇ 12345678910111213141516171819//‰ª£Á†ÅÊ°ÜÊû∂dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ // ËÄóÊó∂ÁöÑÊìç‰Ωú dispatch_async(dispatch_get_main_queue(), ^{ // Êõ¥Êñ∞ÁïåÈù¢ });});//‰∏ãËΩΩÂõæÁâáÁöÑÁ§∫‰æãdispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ NSURL * url = [NSURL URLWithString:@&quot;https://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;]; NSData * data = [[NSData alloc]initWithContentsOfURL:url]; UIImage *image = [[UIImage alloc]initWithData:data]; if (data != nil) { dispatch_async(dispatch_get_main_queue(), ^{ self.imageView.image = image; }); }}); dispatch_afterÂª∂ÂêéÊâßË°ådispatch_afterÂè™ÊòØÂª∂Êó∂Êèê‰∫§blockÔºå‰∏çÊòØÂª∂Êó∂Á´ãÂàªÊâßË°å„ÄÇ 12345678- (void)foo{ double delayInSeconds = 2.0; dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t) (delayInSeconds * NSEC_PER_SEC)); dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ [self bar]; });} ËåÉ‰æãÔºåÂÆûÁé∞‰∏Ä‰∏™Êé®ËøüÂá∫Áé∞ÂºπÂá∫Ê°ÜÊèêÁ§∫ÔºåÊØîÂ¶ÇËØ¥ÊèêÁ§∫Áî®Êà∑ËØÑ‰ª∑Á≠âÂäüËÉΩ„ÄÇ 12345678910111213func showOrHideNavPrompt() { let delayInSeconds = 1.0 let popTime = dispatch_time(DISPATCH_TIME_NOW, Int64(delayInSeconds * Double(NSEC_PER_SEC))) // Âú®ËøôÈáåÂ£∞ÊòéÊé®ËøüÁöÑÊó∂Èó¥ dispatch_after(popTime, GlobalMainQueue) { // Á≠âÂæÖdelayInSecondsÂ∞ÜÈó≠ÂåÖÂºÇÊ≠•Âà∞‰∏ªÈòüÂàó let count = PhotoManager.sharedManager.photos.count if count &gt; 0 { self.navigationItem.prompt = nil } else { self.navigationItem.prompt = &quot;Add photos with faces to Googlyify them!&quot; } }} ‰æãÂ≠ê‰∏≠ÁöÑdispatch timeÁöÑÂèÇÊï∞ÔºåÂèØ‰ª•ÂÖàÁúãÁúãÂáΩÊï∞ÂéüÂûã 1dispatch_time_t dispatch_time ( dispatch_time_t when, int64_t delta ); Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫DISPATCH_TIME_NOWË°®Á§∫ÂΩìÂâç„ÄÇÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÁöÑdeltaË°®Á§∫Á∫≥ÁßíÔºå‰∏ÄÁßíÂØπÂ∫îÁöÑÁ∫≥Áßí‰∏∫1000000000ÔºåÁ≥ªÁªüÊèê‰æõ‰∫Ü‰∏Ä‰∫õÂÆèÊù•ÁÆÄÂåñ 123#define NSEC_PER_SEC 1000000000ull //ÊØèÁßíÊúâÂ§öÂ∞ëÁ∫≥Áßí#define USEC_PER_SEC 1000000ull //ÊØèÁßíÊúâÂ§öÂ∞ëÊØ´Áßí#define NSEC_PER_USEC 1000ull //ÊØèÊØ´ÁßíÊúâÂ§öÂ∞ëÁ∫≥Áßí ËøôÊ†∑Â¶ÇÊûúË¶ÅË°®Á§∫‰∏ÄÁßíÂ∞±ÂèØ‰ª•ËøôÊ†∑ÂÜô 123dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);dispatch_time(DISPATCH_TIME_NOW, 1000 * USEC_PER_SEC);dispatch_time(DISPATCH_TIME_NOW, USEC_PER_SEC * NSEC_PER_USEC); dispatch_barrier_async‰ΩøÁî®Barrier TaskÊñπÊ≥ïDispatch BarrierËß£ÂÜ≥Â§öÁ∫øÁ®ãÂπ∂ÂèëËØªÂÜôÂêå‰∏Ä‰∏™ËµÑÊ∫êÂèëÁîüÊ≠ªÈîÅDispatch BarrierÁ°Æ‰øùÊèê‰∫§ÁöÑÈó≠ÂåÖÊòØÊåáÂÆöÈòüÂàó‰∏≠Âú®ÁâπÂÆöÊó∂ÊÆµÂîØ‰∏ÄÂú®ÊâßË°åÁöÑ‰∏Ä‰∏™„ÄÇÂú®ÊâÄÊúâÂÖà‰∫éDispatch BarrierÁöÑ‰ªªÂä°ÈÉΩÂÆåÊàêÁöÑÊÉÖÂÜµ‰∏ãËøô‰∏™Èó≠ÂåÖÊâçÂºÄÂßãÊâßË°å„ÄÇËΩÆÂà∞Ëøô‰∏™Èó≠ÂåÖÊó∂barrier‰ºöÊâßË°åËøô‰∏™Èó≠ÂåÖÂπ∂‰∏îÁ°Æ‰øùÈòüÂàóÂú®Ê≠§ËøáÁ®ã‰∏ç‰ºöÊâßË°åÂÖ∂ÂÆÉ‰ªªÂä°„ÄÇÈó≠ÂåÖÂÆåÊàêÂêéÈòüÂàóÊÅ¢Â§ç„ÄÇÈúÄË¶ÅÊ≥®ÊÑèdispatch_barrier_asyncÂè™Âú®Ëá™Â∑±ÂàõÂª∫ÁöÑÈòüÂàó‰∏äÊúâËøôÁßç‰ΩúÁî®ÔºåÂú®ÂÖ®Â±ÄÂπ∂ÂèëÈòüÂàóÂíå‰∏≤Ë°åÈòüÂàó‰∏äÔºåÊïàÊûúÂíådispatch_sync‰∏ÄÊ†∑ 1234567891011121314151617181920212223242526272829303132333435363738//ÂàõÂª∫ÈòüÂàóself.isolationQueue = dispatch_queue_create([label UTF8String], DISPATCH_QUEUE_CONCURRENT);//ÊîπÂèòsetter- (void)setCount:(NSUInteger)count forKey:(NSString *)key{ key = [key copy]; //Á°Æ‰øùÊâÄÊúâbarrierÈÉΩÊòØasyncÂºÇÊ≠•ÁöÑ dispatch_barrier_async(self.isolationQueue, ^(){ if (count == 0) { [self.counts removeObjectForKey:key]; } else { self.counts[key] = @(count); } });}- (void)dispatchBarrierAsyncDemo { //Èò≤Ê≠¢Êñá‰ª∂ËØªÂÜôÂÜ≤Á™ÅÔºåÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™‰∏≤Ë°åÈòüÂàóÔºåÊìç‰ΩúÈÉΩÂú®Ëøô‰∏™ÈòüÂàó‰∏≠ËøõË°åÔºåÊ≤°ÊúâÊõ¥Êñ∞Êï∞ÊçÆËØªÁî®Âπ∂Ë°åÔºåÂÜôÁî®‰∏≤Ë°å„ÄÇ dispatch_queue_t dataQueue = dispatch_queue_create(&quot;com.starming.gcddemo.dataqueue&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_async(dataQueue, ^{ [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;read data 1&quot;); }); dispatch_async(dataQueue, ^{ NSLog(@&quot;read data 2&quot;); }); //Á≠âÂæÖÂâçÈù¢ÁöÑÈÉΩÂÆåÊàêÔºåÂú®ÊâßË°åbarrierÂêéÈù¢ÁöÑ dispatch_barrier_async(dataQueue, ^{ NSLog(@&quot;write data 1&quot;); [NSThread sleepForTimeInterval:1]; }); dispatch_async(dataQueue, ^{ [NSThread sleepForTimeInterval:1.f]; NSLog(@&quot;read data 3&quot;); }); dispatch_async(dataQueue, ^{ NSLog(@&quot;read data 4&quot;); });} swiftÁ§∫‰æã 12345678910111213141516171819202122//‰ΩøÁî®dispatch_queue_createÂàùÂßãÂåñ‰∏Ä‰∏™Âπ∂ÂèëÈòüÂàó„ÄÇÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÈÅµÂæ™ÂèçÂêëDNSÂëΩÂêç‰π†ÊÉØÔºåÊñπ‰æøÊèèËø∞ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÊåáÂá∫ÊòØÂπ∂ÂèëËøòÊòØÈ°∫Â∫è„ÄÇprivate let concurrentPhotoQueue = dispatch_queue_create(&quot;com.raywenderlich.GooglyPuff.photoQueue&quot;, DISPATCH_QUEUE_CONCURRENT)func addPhoto(photo: Photo) { dispatch_barrier_async(concurrentPhotoQueue) { // Â∞ÜÂÜôÊìç‰ΩúÂä†ÂÖ•Âà∞Ëá™ÂÆö‰πâÁöÑÈòüÂàó„ÄÇÂºÄÂßãÊâßË°åÊó∂Ëøô‰∏™Â∞±ÊòØÈòüÂàó‰∏≠ÂîØ‰∏ÄÁöÑ‰∏Ä‰∏™Âú®ÊâßË°åÁöÑ‰ªªÂä°„ÄÇ self._photos.append(photo) // barrierËÉΩÂ§ü‰øùÈöú‰∏ç‰ºöÂíåÂÖ∂‰ªñ‰ªªÂä°ÂêåÊó∂ËøõË°å„ÄÇ dispatch_async(GlobalMainQueue) { // Ê∂âÂèäÂà∞UIÊâÄ‰ª•Ëøô‰∏™ÈÄöÁü•Â∫îËØ•Âú®‰∏ªÁ∫øÁ®ã‰∏≠ÔºåÊâÄ‰ª•ÂàÜÊ¥æÂè¶‰∏Ä‰∏™ÂºÇÊ≠•‰ªªÂä°Âà∞‰∏ªÈòüÂàó‰∏≠„ÄÇ self.postContentAddedNotification() } }}//‰∏äÈù¢ÊòØËß£ÂÜ≥‰∫ÜÂÜôÂèØËÉΩÂèëÁîüÊ≠ªÈîÅÔºå‰∏ãÈù¢ÊòØ‰ΩøÁî®dispatch_syncËß£ÂÜ≥ËØªÊó∂ÂèØËÉΩ‰ºöÂèëÁîüÁöÑÊ≠ªÈîÅ„ÄÇvar photos: [Photo] { var photosCopy: [Photo]! dispatch_sync(concurrentPhotoQueue) { // ÂêåÊ≠•Ë∞ÉÂ∫¶Âà∞concurrentPhotoQueueÈòüÂàóÊâßË°åËØªÊìç‰Ωú photosCopy = self._photos // ‰øùÂ≠ò } return photosCopy}//ËøôÊ†∑ËØªÂÜôÈóÆÈ¢òÈÉΩËß£ÂÜ≥‰∫Ü„ÄÇ ÈÉΩÁî®ÂºÇÊ≠•Â§ÑÁêÜÈÅøÂÖçÊ≠ªÈîÅÔºåÂºÇÊ≠•ÁöÑÁº∫ÁÇπÂú®‰∫éË∞ÉËØï‰∏çÊñπ‰æøÔºå‰ΩÜÊòØÊØîËµ∑ÂêåÊ≠•ÂÆπÊòì‰∫ßÁîüÊ≠ªÈîÅËøô‰∏™ÂâØ‰ΩúÁî®ËøòÁÆóÂ∞èÁöÑ„ÄÇ dispatch_applyËøõË°åÂø´ÈÄüËø≠‰ª£Á±ª‰ººforÂæ™ÁéØÔºå‰ΩÜÊòØÂú®Âπ∂ÂèëÈòüÂàóÁöÑÊÉÖÂÜµ‰∏ãdispatch_apply‰ºöÂπ∂ÂèëÊâßË°åblock‰ªªÂä°„ÄÇ 12345678910111213for (size_t y = 0; y &lt; height; ++y) { for (size_t x = 0; x &lt; width; ++x) { // Do something with x and y here }}//Âõ†‰∏∫ÂèØ‰ª•Âπ∂Ë°åÊâßË°åÔºåÊâÄ‰ª•‰ΩøÁî®dispatch_applyÂèØ‰ª•ËøêË°åÁöÑÊõ¥Âø´- (void)dispatchApplyDemo { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_apply(10, concurrentQueue, ^(size_t i) { NSLog(@&quot;%zu&quot;,i); }); NSLog(@&quot;The end&quot;); //ËøôÈáåÊúâ‰∏™ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºådispatch_applyËøô‰∏™ÊòØ‰ºöÈòªÂ°û‰∏ªÁ∫øÁ®ãÁöÑ„ÄÇËøô‰∏™logÊâìÂç∞‰ºöÂú®dispatch_applyÈÉΩÁªìÊùüÂêéÊâçÂºÄÂßãÊâßË°å} dispatch_applyËÉΩÈÅøÂÖçÁ∫øÁ®ãÁàÜÁÇ∏ÔºåÂõ†‰∏∫GCD‰ºöÁÆ°ÁêÜÂπ∂Âèë 123456789101112131415161718- (void)dealWiththreadWithMaybeExplode:(BOOL)explode { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); if (explode) { //ÊúâÈóÆÈ¢òÁöÑÊÉÖÂÜµÔºåÂèØËÉΩ‰ºöÊ≠ªÈîÅ for (int i = 0; i &lt; 999 ; i++) { dispatch_async(concurrentQueue, ^{ NSLog(@&quot;wrong %d&quot;,i); //do something hard }); } } else { //‰ºö‰ºòÂåñÂæàÂ§öÔºåËÉΩÂ§üÂà©Áî®GCDÁÆ°ÁêÜ dispatch_apply(999, concurrentQueue, ^(size_t i){ NSLog(@&quot;correct %zu&quot;,i); //do something hard }); }} Á§∫‰æãÔºö 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { var storedError: NSError! var downloadGroup = dispatch_group_create() let addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] dispatch_apply(UInt(addresses.count), GlobalUserInitiatedQueue) { i in let index = Int(i) let address = addresses[index] let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_notify(downloadGroup, GlobalMainQueue) { if let completion = completion { completion(error: storedError) } }} BlockÁªÑÂêàDispatch_groupsdispatch groupsÊòØ‰∏ìÈó®Áî®Êù•ÁõëËßÜÂ§ö‰∏™ÂºÇÊ≠•‰ªªÂä°„ÄÇdispatch_group_tÂÆû‰æãÁî®Êù•ËøΩË∏™‰∏çÂêåÈòüÂàó‰∏≠ÁöÑ‰∏çÂêå‰ªªÂä°„ÄÇ ÂΩìgroupÈáåÊâÄÊúâ‰∫ã‰ª∂ÈÉΩÂÆåÊàêGCD APIÊúâ‰∏§ÁßçÊñπÂºèÂèëÈÄÅÈÄöÁü•ÔºåÁ¨¨‰∏ÄÁßçÊòØdispatch_group_waitÔºå‰ºöÈòªÂ°ûÂΩìÂâçËøõÁ®ãÔºåÁ≠âÊâÄÊúâ‰ªªÂä°ÈÉΩÂÆåÊàêÊàñÁ≠âÂæÖË∂ÖÊó∂„ÄÇÁ¨¨‰∫åÁßçÊñπÊ≥ïÊòØ‰ΩøÁî®dispatch_group_notifyÔºåÂºÇÊ≠•ÊâßË°åÈó≠ÂåÖÔºå‰∏ç‰ºöÈòªÂ°û„ÄÇ Á¨¨‰∏ÄÁßç‰ΩøÁî®dispatch_group_waitÁöÑswiftÁöÑ‰æãÂ≠êÔºö 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { dispatch_async(GlobalUserInitiatedQueue) { // Âõ†‰∏∫dispatch_group_wait‰ºöÁßüÂ°ûÂΩìÂâçËøõÁ®ãÔºåÊâÄ‰ª•Ë¶Å‰ΩøÁî®dispatch_asyncÂ∞ÜÊï¥‰∏™ÊñπÊ≥ïË¶ÅÊîæÂà∞ÂêéÂè∞ÈòüÂàóÊâçËÉΩÂ§ü‰øùËØÅ‰∏ªÁ∫øÁ®ã‰∏çË¢´ÈòªÂ°û var storedError: NSError! var downloadGroup = dispatch_group_create() // ÂàõÂª∫‰∏Ä‰∏™dispatch group for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] { let url = NSURL(string: address) dispatch_group_enter(downloadGroup) // dispatch_group_enterÊòØÈÄöÁü•dispatch group‰ªªÂä°ÂºÄÂßã‰∫ÜÔºådispatch_group_enterÂíådispatch_group_leaveÊòØÊàêÂØπË∞ÉÁî®Ôºå‰∏çÁÑ∂Á®ãÂ∫èÂ∞±Â¥©Ê∫É‰∫Ü„ÄÇ let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) // ‰øùÊåÅÂíådispatch_group_enterÈÖçÂØπ„ÄÇÈÄöÁü•‰ªªÂä°Â∑≤ÁªèÂÆåÊàê } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER) // dispatch_group_waitÁ≠âÂæÖÊâÄÊúâ‰ªªÂä°ÈÉΩÂÆåÊàêÁõ¥Âà∞Ë∂ÖÊó∂„ÄÇÂ¶ÇÊûú‰ªªÂä°ÂÆåÊàêÂâçÂ∞±Ë∂ÖÊó∂‰∫ÜÔºåÂáΩÊï∞‰ºöËøîÂõû‰∏Ä‰∏™ÈùûÈõ∂ÂÄºÔºåÂèØ‰ª•ÈÄöËøáËøîÂõûÂÄºÂà§Êñ≠ÊòØÂê¶Ë∂ÖÊó∂„ÄÇ‰πüÂèØ‰ª•Áî®DISPATCH_TIME_FOREVERË°®Á§∫‰∏ÄÁõ¥Á≠â„ÄÇ dispatch_async(GlobalMainQueue) { // ËøôÈáåÂèØ‰ª•‰øùËØÅÊâÄÊúâÂõæÁâá‰ªªÂä°ÈÉΩÂÆåÊàêÔºåÁÑ∂ÂêéÂú®main queueÈáåÂä†ÂÖ•ÂÆåÊàêÂêéË¶ÅÂ§ÑÁêÜÁöÑÈó≠ÂåÖÔºå‰ºöÂú®main queueÈáåÊâßË°å„ÄÇ if let completion = completion { // ÊâßË°åÈó≠ÂåÖÂÜÖÂÆπ completion(error: storedError) } } }} oc‰æãÂ≠ê 1234567891011121314- (void)dispatchGroupWaitDemo { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); //Âú®group‰∏≠Ê∑ªÂä†ÈòüÂàóÁöÑblock dispatch_group_async(group, concurrentQueue, ^{ [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;1&quot;); }); dispatch_group_async(group, concurrentQueue, ^{ NSLog(@&quot;2&quot;); }); dispatch_group_wait(group, DISPATCH_TIME_FOREVER); NSLog(@&quot;go on&quot;);} Á¨¨‰∫åÁßç‰ΩøÁî®dispatch_group_notifyÁöÑswiftÁöÑ‰æãÂ≠êÔºö 123456789101112131415161718192021222324252627func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { // ‰∏çÁî®Âä†dispatch_asyncÔºåÂõ†‰∏∫Ê≤°ÊúâÈòªÂ°û‰∏ªËøõÁ®ã var storedError: NSError! var downloadGroup = dispatch_group_create() for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] { let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_notify(downloadGroup, GlobalMainQueue) { // dispatch_group_notifyÂíådispatch_group_waitÁöÑÂå∫Âà´Â∞±ÊòØÊòØÂºÇÊ≠•ÊâßË°åÈó≠ÂåÖÁöÑÔºåÂΩìdispatch groups‰∏≠Ê≤°ÊúâÂâ©‰ΩôÁöÑ‰ªªÂä°Êó∂Èó≠ÂåÖÊâçÊâßË°å„ÄÇËøôÈáåÊòØÊåáÊòéÂú®‰∏ªÈòüÂàó‰∏≠ÊâßË°å„ÄÇ if let completion = completion { completion(error: storedError) } }} oc‰æãÂ≠ê 1234567891011121314151617181920212223242526272829303132//dispatch_group_notify- (void)dispatchGroupNotifyDemo { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); dispatch_group_async(group, concurrentQueue, ^{ NSLog(@&quot;1&quot;); }); dispatch_group_async(group, concurrentQueue, ^{ NSLog(@&quot;2&quot;); }); dispatch_group_notify(group, dispatch_get_main_queue(), ^{ NSLog(@&quot;end&quot;); }); NSLog(@&quot;can continue&quot;);}//dispatch_group_wait- (void)dispatchGroupWaitDemo { dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_group_t group = dispatch_group_create(); //Âú®group‰∏≠Ê∑ªÂä†ÈòüÂàóÁöÑblock dispatch_group_async(group, concurrentQueue, ^{ [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;1&quot;); }); dispatch_group_async(group, concurrentQueue, ^{ NSLog(@&quot;2&quot;); }); dispatch_group_wait(group, DISPATCH_TIME_FOREVER); NSLog(@&quot;can continue&quot;);} Â¶Ç‰ΩïÂØπÁé∞ÊúâAPI‰ΩøÁî®dispatch_group_t 12345678910111213141516171819202122232425262728293031323334//ÁªôCore DataÁöÑ-performBlock:Ê∑ªÂä†groups„ÄÇÁªÑÂêàÂÆåÊàê‰ªªÂä°Âêé‰ΩøÁî®dispatch_group_notifyÊù•ËøêË°å‰∏Ä‰∏™blockÂç≥ÂèØ„ÄÇ- (void)withGroup:(dispatch_group_t)group performBlock:(dispatch_block_t)block{ if (group == NULL) { [self performBlock:block]; } else { dispatch_group_enter(group); [self performBlock:^(){ block(); dispatch_group_leave(group); }]; }}//NSURLConnection‰πüÂèØ‰ª•ËøôÊ†∑ÂÅö+ (void)withGroup:(dispatch_group_t)group sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler{ if (group == NULL) { [self sendAsynchronousRequest:request queue:queue completionHandler:handler]; } else { dispatch_group_enter(group); [self sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){ handler(response, data, error); dispatch_group_leave(group); }]; }} Ê≥®ÊÑè‰∫ãÈ°π dispatch_group_asyncÁ≠â‰ª∑‰∫édispatch_group_enter() Âíå dispatch_group_leave()ÁöÑÁªÑÂêà„ÄÇ dispatch_group_enter() ÂøÖÈ°ªËøêË°åÂú® dispatch_group_leave() ‰πãÂâç„ÄÇ dispatch_group_enter() Âíå dispatch_group_leave() ÈúÄË¶ÅÊàêÂØπÂá∫Áé∞ÁöÑ Dispatch BlockÈòüÂàóÊâßË°å‰ªªÂä°ÈÉΩÊòØblockÁöÑÊñπÂºèÔºå ÂàõÂª∫block 1234567891011121314- (void)createDispatchBlock { //normal way dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT); dispatch_block_t block = dispatch_block_create(0, ^{ NSLog(@&quot;run block&quot;); }); dispatch_async(concurrentQueue, block); //QOS way dispatch_block_t qosBlock = dispatch_block_create_with_qos_class(0, QOS_CLASS_USER_INITIATED, -1, ^{ NSLog(@&quot;run qos block&quot;); }); dispatch_async(concurrentQueue, qosBlock);} dispatch_block_waitÔºöÂèØ‰ª•Ê†πÊçÆdispatch blockÊù•ËÆæÁΩÆÁ≠âÂæÖÊó∂Èó¥ÔºåÂèÇÊï∞DISPATCH_TIME_FOREVER‰ºö‰∏ÄÁõ¥Á≠âÂæÖblockÁªìÊùü 123456789101112- (void)dispatchBlockWaitDemo { dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t block = dispatch_block_create(0, ^{ NSLog(@&quot;star&quot;); [NSThread sleepForTimeInterval:5.f]; NSLog(@&quot;end&quot;); }); dispatch_async(serialQueue, block); //ËÆæÁΩÆDISPATCH_TIME_FOREVER‰ºö‰∏ÄÁõ¥Á≠âÂà∞ÂâçÈù¢‰ªªÂä°ÈÉΩÂÆåÊàê dispatch_block_wait(block, DISPATCH_TIME_FOREVER); NSLog(@&quot;ok, now can go on&quot;);} dispatch_block_notifyÔºöÂèØ‰ª•ÁõëËßÜÊåáÂÆödispatch blockÁªìÊùüÔºåÁÑ∂ÂêéÂÜçÂä†ÂÖ•‰∏Ä‰∏™blockÂà∞ÈòüÂàó‰∏≠„ÄÇ‰∏â‰∏™ÂèÇÊï∞ÂàÜÂà´‰∏∫ÔºåÁ¨¨‰∏Ä‰∏™ÊòØÈúÄË¶ÅÁõëËßÜÁöÑblockÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÈúÄË¶ÅÊèê‰∫§ÊâßË°åÁöÑÈòüÂàóÔºåÁ¨¨‰∏â‰∏™ÊòØÂæÖÂä†ÂÖ•Âà∞ÈòüÂàó‰∏≠ÁöÑblock 1234567891011121314- (void)dispatchBlockNotifyDemo { dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t firstBlock = dispatch_block_create(0, ^{ NSLog(@&quot;first block start&quot;); [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;first block end&quot;); }); dispatch_async(serialQueue, firstBlock); dispatch_block_t secondBlock = dispatch_block_create(0, ^{ NSLog(@&quot;second block run&quot;); }); //first blockÊâßË°åÂÆåÊâçÂú®serial queue‰∏≠ÊâßË°åsecond block dispatch_block_notify(firstBlock, serialQueue, secondBlock);} dispatch_block_cancelÔºöiOS8ÂêéGCDÊîØÊåÅÂØπdispatch blockÁöÑÂèñÊ∂à 123456789101112131415- (void)dispatchBlockCancelDemo { dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); dispatch_block_t firstBlock = dispatch_block_create(0, ^{ NSLog(@&quot;first block start&quot;); [NSThread sleepForTimeInterval:2.f]; NSLog(@&quot;first block end&quot;); }); dispatch_block_t secondBlock = dispatch_block_create(0, ^{ NSLog(@&quot;second block run&quot;); }); dispatch_async(serialQueue, firstBlock); dispatch_async(serialQueue, secondBlock); //ÂèñÊ∂àsecondBlock dispatch_block_cancel(secondBlock);} ‰ΩøÁî®dispatch block objectÔºàË∞ÉÂ∫¶ÂùóÔºâÂú®‰ªªÂä°ÊâßË°åÂâçËøõË°åÂèñÊ∂àdispatch block objectÂèØ‰ª•‰∏∫ÈòüÂàó‰∏≠ÁöÑÂØπË±°ËÆæÁΩÆÁ§∫‰æãÔºå‰∏ãËΩΩÂõæÁâá‰∏≠ÈÄîËøõË°åÂèñÊ∂à 123456789101112131415161718192021222324252627282930313233343536373839404142func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { var storedError: NSError! let downloadGroup = dispatch_group_create() var addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] addresses += addresses + addresses // Êâ©Â±ïaddressÊï∞ÁªÑÔºåÂ§çÂà∂3‰ªΩ var blocks: [dispatch_block_t] = [] // ‰∏Ä‰∏™‰øùÂ≠òblockÁöÑÊï∞ÁªÑ for i in 0 ..&lt; addresses.count { dispatch_group_enter(downloadGroup) let block = dispatch_block_create(DISPATCH_BLOCK_INHERIT_QOS_CLASS) { // ÂàõÂª∫‰∏Ä‰∏™blockÔºåblockÁöÑÊ†áÂøóÊòØDISPATCH_BLOCK_INHERIT_QOS_CLASS let index = Int(i) let address = addresses[index] let url = NSURL(string: address) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } blocks.append(block) dispatch_async(GlobalMainQueue, block) // ÊääËøô‰∏™blockÊîæÂà∞GlobalMainQueue‰∏äÂºÇÊ≠•Ë∞ÉÁî®„ÄÇÂõ†‰∏∫ÂÖ®Â±ÄÈòüÂàóÊòØ‰∏Ä‰∏™È°∫Â∫èÈòüÂàóÊâÄ‰ª•Êñπ‰æøÂèñÊ∂àÂØπË±°blockÔºåÂêåÊó∂ÂèØ‰ª•‰øùËØÅ‰∏ãËΩΩ‰ªªÂä°Âú®downloadPhotosWithCompletionËøîÂõûÂêéÊâçÂºÄÂßãÊâßË°å„ÄÇ } for block in blocks[3 ..&lt; blocks.count] { let cancel = arc4random_uniform(2) // ÈöèÊú∫ËøîÂõû‰∏Ä‰∏™Êï¥Êï∞Ôºå‰ºöËøîÂõû0Êàñ1 if cancel == 1 { dispatch_block_cancel(block) // Â¶ÇÊûúÊòØ1Â∞±ÂèñÊ∂àblockÔºåËøô‰∏™Âè™ËÉΩÂèëÁîüÂú®blockËøòÂú®ÈòüÂàó‰∏≠Âπ∂Ê≤°ÊúâÂºÄÂßãÁöÑÊÉÖÂÜµ‰∏ã„ÄÇÂõ†‰∏∫ÊääblockÂ∑≤ÁªèÊîæÂà∞‰∫ÜGlobalMainQueue‰∏≠ÔºåÊâÄ‰ª•Ëøô‰∏™Âú∞Êñπ‰ºöÂÖàÊâßË°åÔºåÊâßË°åÂÆå‰∫ÜÊâç‰ºöÊâßË°åblock„ÄÇ dispatch_group_leave(downloadGroup) // Âõ†‰∏∫Â∑≤Áªèdispatch_group_enter‰∫ÜÔºåÊâÄ‰ª•ÂèñÊ∂àÊó∂‰πüË¶ÅÂ∞ÜÂÖ∂ÈÉΩleaveÊéâ„ÄÇ } } dispatch_group_notify(downloadGroup, GlobalMainQueue) { if let completion = completion { completion(error: storedError) } }} Dispatch IO Êñá‰ª∂Êìç‰Ωúdispatch ioËØªÂèñÊñá‰ª∂ÁöÑÊñπÂºèÁ±ª‰ºº‰∫é‰∏ãÈù¢ÁöÑÊñπÂºèÔºåÂ§ö‰∏™Á∫øÁ®ãÂéªËØªÂèñÊñá‰ª∂ÁöÑÂàáÁâáÊï∞ÊçÆÔºåÂØπ‰∫éÂ§ßÁöÑÊï∞ÊçÆÊñá‰ª∂ËøôÊ†∑‰ºöÊØîÂçïÁ∫øÁ®ãË¶ÅÂø´ÂæàÂ§ö„ÄÇ 123dispatch_async(queue,^{/*read 0-99 bytes*/});dispatch_async(queue,^{/*read 100-199 bytes*/});dispatch_async(queue,^{/*read 200-299 bytes*/}); dispatch_io_createÔºöÂàõÂª∫dispatch io dispatch_io_set_low_waterÔºöÊåáÂÆöÂàáÂâ≤Êñá‰ª∂Â§ßÂ∞è dispatch_io_readÔºöËØªÂèñÂàáÂâ≤ÁöÑÊñá‰ª∂ÁÑ∂ÂêéÂêàÂπ∂„ÄÇ ËãπÊûúÁ≥ªÁªüÊó•ÂøóAPIÈáåÁî®Âà∞‰∫ÜËøô‰∏™ÊäÄÊúØÔºåÂèØ‰ª•Âú®ËøôÈáåÊü•ÁúãÔºöhttps://github.com/Apple-FOSS-Mirror/Libc/blob/2ca2ae74647714acfc18674c3114b1a5d3325d7d/gen/asl.c 12345678910111213141516171819202122232425262728293031323334353637383940pipe_q = dispatch_queue_create(&quot;PipeQ&quot;, NULL);//ÂàõÂª∫pipe_channel = dispatch_io_create(DISPATCH_IO_STREAM, fd, pipe_q, ^(int err){ close(fd);});*out_fd = fdpair[1];//ËÆæÁΩÆÂàáÂâ≤Â§ßÂ∞èdispatch_io_set_low_water(pipe_channel, SIZE_MAX);dispatch_io_read(pipe_channel, 0, SIZE_MAX, pipe_q, ^(bool done, dispatch_data_t pipedata, int err){ if (err == 0) { size_t len = dispatch_data_get_size(pipedata); if (len &gt; 0) { //ÂØπÊØèÊ¨°ÂàáÂùóÊï∞ÊçÆÁöÑÂ§ÑÁêÜ const char *bytes = NULL; char *encoded; uint32_t eval; dispatch_data_t md = dispatch_data_create_map(pipedata, (const void **)&amp;bytes, &amp;len); encoded = asl_core_encode_buffer(bytes, len); asl_msg_set_key_val(aux, ASL_KEY_AUX_DATA, encoded); free(encoded); eval = _asl_evaluate_send(NULL, (aslmsg)aux, -1); _asl_send_message(NULL, eval, aux, NULL); asl_msg_release(aux); dispatch_release(md); } } if (done) { //semaphore +1‰ΩøÂæó‰∏çÈúÄË¶ÅÂÜçÁ≠âÂæÖÁªßÁª≠ÊâßË°å‰∏ãÂéª„ÄÇ dispatch_semaphore_signal(sem); dispatch_release(pipe_channel); dispatch_release(pipe_q); }}); Dispatch Source Áî®GCDÁõëËßÜËøõÁ®ãDispatch SourceÁî®‰∫éÁõëÂê¨Á≥ªÁªüÁöÑÂ∫ïÂ±ÇÂØπË±°ÔºåÊØîÂ¶ÇÊñá‰ª∂ÊèèËø∞Á¨¶ÔºåMachÁ´ØÂè£Ôºå‰ø°Âè∑ÈáèÁ≠â„ÄÇ‰∏ªË¶ÅÂ§ÑÁêÜÁöÑ‰∫ã‰ª∂Â¶Ç‰∏ãË°® ÊñπÊ≥ï ËØ¥Êòé DISPATCH_SOURCE_TYPE_DATA_ADD Êï∞ÊçÆÂ¢ûÂä† DISPATCH_SOURCE_TYPE_DATA_OR Êï∞ÊçÆOR DISPATCH_SOURCE_TYPE_MACH_SEND MachÁ´ØÂè£ÂèëÈÄÅ DISPATCH_SOURCE_TYPE_MACH_RECV MachÁ´ØÂè£Êé•Êî∂ DISPATCH_SOURCE_TYPE_MEMORYPRESSURE ÂÜÖÂ≠òÊÉÖÂÜµ DISPATCH_SOURCE_TYPE_PROC ËøõÁ®ã‰∫ã‰ª∂ DISPATCH_SOURCE_TYPE_READ ËØªÊï∞ÊçÆ DISPATCH_SOURCE_TYPE_SIGNAL ‰ø°Âè∑ DISPATCH_SOURCE_TYPE_TIMER ÂÆöÊó∂Âô® DISPATCH_SOURCE_TYPE_VNODE Êñá‰ª∂Á≥ªÁªüÂèòÂåñ DISPATCH_SOURCE_TYPE_WRITE Êñá‰ª∂ÂÜôÂÖ• ÊñπÊ≥ï dispatch_source_createÔºöÂàõÂª∫dispatch sourceÔºåÂàõÂª∫Âêé‰ºöÂ§Ñ‰∫éÊåÇËµ∑Áä∂ÊÄÅËøõË°å‰∫ã‰ª∂Êé•Êî∂ÔºåÈúÄË¶ÅËÆæÁΩÆ‰∫ã‰ª∂Â§ÑÁêÜhandlerËøõË°å‰∫ã‰ª∂Â§ÑÁêÜ„ÄÇ dispatch_source_set_event_handlerÔºöËÆæÁΩÆ‰∫ã‰ª∂Â§ÑÁêÜhandler dispatch_source_set_cancel_handlerÔºö‰∫ã‰ª∂ÂèñÊ∂àhandlerÔºåÂ∞±ÊòØÂú®dispatch sourceÈáäÊîæÂâçÂÅö‰∫õÊ∏ÖÁêÜÁöÑ‰∫ã„ÄÇ dispatch_source_cancelÔºöÂÖ≥Èó≠dispatch sourceÔºåËÆæÁΩÆÁöÑ‰∫ã‰ª∂Â§ÑÁêÜhandler‰∏ç‰ºöË¢´ÊâßË°åÔºåÂ∑≤ÁªèÊâßË°åÁöÑ‰∫ã‰ª∂handler‰∏ç‰ºöÂèñÊ∂à„ÄÇ 1234567891011NSRunningApplication *mail = [NSRunningApplication runningApplicationsWithBundleIdentifier:@&quot;com.apple.mail&quot;];if (mail == nil) { return;}pid_t const pid = mail.processIdentifier;self.source = dispatch_source_create(DISPATCH_SOURCE_TYPE_PROC, pid, DISPATCH_PROC_EXIT, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(self.source, ^(){ NSLog(@&quot;Mail quit.&quot;);});//Âú®‰∫ã‰ª∂Ê∫ê‰º†Âà∞‰Ω†ÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂâçÈúÄË¶ÅË∞ÉÁî®dispatch_resume()Ëøô‰∏™ÊñπÊ≥ïdispatch_resume(self.source); ÁõëËßÜÊñá‰ª∂Â§πÂÜÖÊñá‰ª∂ÂèòÂåñ 12345678910111213141516171819202122232425NSURL *directoryURL; // assume this is set to a directoryint const fd = open([[directoryURL path] fileSystemRepresentation], O_EVTONLY);if (fd &lt; 0) { char buffer[80]; strerror_r(errno, buffer, sizeof(buffer)); NSLog(@&quot;Unable to open \\&quot;%@\\&quot;: %s (%d)&quot;, [directoryURL path], buffer, errno); return;}dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, fd,DISPATCH_VNODE_WRITE | DISPATCH_VNODE_DELETE, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^(){ unsigned long const data = dispatch_source_get_data(source); if (data &amp; DISPATCH_VNODE_WRITE) { NSLog(@&quot;The directory changed.&quot;); } if (data &amp; DISPATCH_VNODE_DELETE) { NSLog(@&quot;The directory has been deleted.&quot;); }});dispatch_source_set_cancel_handler(source, ^(){ close(fd);});self.source = source;dispatch_resume(self.source);//ËøòË¶ÅÊ≥®ÊÑèÈúÄË¶ÅÁî®DISPATCH_VNODE_DELETE ÂéªÊ£ÄÊü•ÁõëËßÜÁöÑÊñá‰ª∂ÊàñÊñá‰ª∂Â§πÊòØÂê¶Ë¢´Âà†Èô§ÔºåÂ¶ÇÊûúÂà†Èô§‰∫ÜÂ∞±ÂÅúÊ≠¢ÁõëÂê¨ NSTimerÂú®‰∏ªÁ∫øÁ®ãÁöÑrunloopÈáå‰ºöÂú®runloopÂàáÊç¢ÂÖ∂ÂÆÉÊ®°ÂºèÊó∂ÂÅúÊ≠¢ÔºåËøôÊó∂Â∞±ÈúÄË¶ÅÊâãÂä®Âú®Â≠êÁ∫øÁ®ãÂºÄÂêØ‰∏Ä‰∏™Ê®°Âºè‰∏∫NSRunLoopCommonModesÁöÑrunloopÔºåÂ¶ÇÊûú‰∏çÊÉ≥ÂºÄÂêØ‰∏Ä‰∏™Êñ∞ÁöÑrunloopÂèØ‰ª•Áî®‰∏çË∑ürunloopÂÖ≥ËÅîÁöÑdispatch source timerÔºåÂ¶Ç‰∏ã„ÄÇ 12345678dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,0, 0, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^(){ NSLog(@&quot;Time flies.&quot;);});dispatch_time_t startdispatch_source_set_timer(source, DISPATCH_TIME_NOW, 5ull * NSEC_PER_SEC,100ull * NSEC_PER_MSEC);self.source = source;dispatch_resume(self.source); Dispatch SemaphoreÂíåÁöÑ‰ªãÁªçÂè¶Â§ñ‰∏ÄÁßç‰øùËØÅÂêåÊ≠•ÁöÑÊñπÊ≥ï„ÄÇ‰ΩøÁî®dispatch_semaphore_signalÂä†1dispatch_semaphore_waitÂáè1Ôºå‰∏∫0Êó∂Á≠âÂæÖÁöÑËÆæÁΩÆÊñπÂºèÊù•ËææÂà∞Á∫øÁ®ãÂêåÊ≠•ÁöÑÁõÆÁöÑÂíåÂêåÊ≠•ÈîÅ‰∏ÄÊ†∑ËÉΩÂ§üËß£ÂÜ≥ËµÑÊ∫êÊä¢Âç†ÁöÑÈóÆÈ¢ò„ÄÇ 12345678910111213//dispatch semaphore- (void)dispatchSemaphoreDemo { //ÂàõÂª∫semaphore dispatch_semaphore_t semaphore = dispatch_semaphore_create(0); dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ NSLog(@&quot;start&quot;); [NSThread sleepForTimeInterval:1.f]; NSLog(@&quot;semaphore +1&quot;); dispatch_semaphore_signal(semaphore); //+1 semaphore }); dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); NSLog(@&quot;continue&quot;);} ÈîÅËøôÈáåÁÆÄÂçï‰ªãÁªç‰∏ãiOS‰∏≠Â∏∏Áî®ÁöÑÂêÑÁßçÈîÅÂíå‰ªñ‰ª¨ÁöÑÊÄßËÉΩ„ÄÇ NSRecursiveLockÔºöÈÄíÂΩíÈîÅÔºåÂèØ‰ª•Âú®‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÂèçÂ§çËé∑ÂèñÈîÅ‰∏ç‰ºöÈÄ†ÊàêÊ≠ªÈîÅÔºåËøô‰∏™ËøáÁ®ã‰ºöËÆ∞ÂΩïËé∑ÂèñÈîÅÂíåÈáäÊîæÈîÅÁöÑÊ¨°Êï∞Êù•ËææÂà∞‰ΩïÊó∂ÈáäÊîæÁöÑ‰ΩúÁî®„ÄÇ NSDistributedLockÔºöÂàÜÂ∏ÉÈîÅÔºåÂü∫‰∫éÊñá‰ª∂ÊñπÂºèÁöÑÈîÅÊú∫Âà∂ÔºåÂèØ‰ª•Ë∑®ËøõÁ®ãËÆøÈóÆ„ÄÇ NSConditionLockÔºöÊù°‰ª∂ÈîÅÔºåÁî®Êà∑ÂÆö‰πâÊù°‰ª∂ÔºåÁ°Æ‰øù‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•Ëé∑ÂèñÊª°Ë∂≥‰∏ÄÂÆöÊù°‰ª∂ÁöÑÈîÅ„ÄÇÂõ†‰∏∫Á∫øÁ®ãÈó¥Á´û‰∫â‰ºöÊ∂âÂèäÂà∞Êù°‰ª∂ÈîÅÊ£ÄÊµãÔºåÁ≥ªÁªüË∞ÉÁî®‰∏ä‰∏ãÂàáÊç¢È¢ëÁπÅÂØºËá¥ËÄóÊó∂ÊòØÂá†‰∏™ÈîÅÈáåÊúÄÈïøÁöÑ„ÄÇ OSSpinLockÔºöËá™ÊóãÈîÅÔºå‰∏çËøõÂÖ•ÂÜÖÊ†∏ÔºåÂáèÂ∞ë‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåÊÄßËÉΩÊúÄÈ´òÔºå‰ΩÜÊä¢Âç†Â§öÊó∂‰ºöÂç†Áî®ËæÉÂ§öcpuÔºåÂ•ΩÁÇπÂ§öÔºåËøôÊó∂‰ΩøÁî®pthread_mutexËæÉÂ•Ω„ÄÇ pthread_mutex_tÔºöÂêåÊ≠•ÈîÅÂü∫‰∫éCËØ≠Ë®ÄÔºåÂ∫ïÂ±ÇapiÊÄßËÉΩÈ´òÔºå‰ΩøÁî®ÊñπÊ≥ïÂíåÂÖ∂ÂÆÉÁöÑÁ±ª‰ºº„ÄÇ @synchronizedÔºöÊõ¥Âä†ÁÆÄÂçï„ÄÇ dispatch_suspendÂíådispatch_resumeÊåÇËµ∑ÂíåÊÅ¢Â§çÈòüÂàódispatch_suspendËøôÈáåÊåÇËµ∑‰∏ç‰ºöÊöÇÂÅúÊ≠£Âú®ÊâßË°åÁöÑblockÔºåÂè™ÊòØËÉΩÂ§üÊöÇÂÅúËøòÊ≤°ÊâßË°åÁöÑblock„ÄÇ dispatch_set_contextÂíådispatch_get_contextGCDÊ∑±ÂÖ•Êìç‰Ωú ÁºìÂÜ≤Âå∫Ôºödispatch_data_tÂü∫‰∫éÈõ∂Á¢éÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºå‰ΩøÁî®dispatch_data_applyÊù•ÈÅçÂéÜÔºåËøòÂèØ‰ª•Áî®dispatch_data_create_subrangeÊù•ÂàõÂª∫‰∏Ä‰∏™‰∏çÂÅö‰ªª‰ΩïÊã∑Ë¥ùÁöÑÂ≠êÂå∫Âüü I/OË∞ÉÂ∫¶Ôºö‰ΩøÁî®GCDÊèê‰æõÁöÑdispatch_io_readÔºådispatch_io_writeÂíådispatch_io_close ÊµãËØïÔºö‰ΩøÁî®dispatch_benchmarkÂ∞èÂ∑•ÂÖ∑ ÂéüÂ≠êÊìç‰ΩúÔºö libkern/OSAtomic.hÈáåÂèØ‰ª•Êü•ÁúãÈÇ£‰∫õÂáΩÊï∞ÔºåÁî®‰∫éÂ∫ïÂ±ÇÂ§öÁ∫øÁ®ãÁºñÁ®ã„ÄÇ GCDÊ≠ªÈîÅÂΩìÂâç‰∏≤Ë°åÈòüÂàóÈáåÈù¢ÂêåÊ≠•ÊâßË°åÂΩìÂâç‰∏≤Ë°åÈòüÂàóÂ∞±‰ºöÊ≠ªÈîÅÔºåËß£ÂÜ≥ÁöÑÊñπÊ≥ïÂ∞±ÊòØÂ∞ÜÂêåÊ≠•ÁöÑ‰∏≤Ë°åÈòüÂàóÊîæÂà∞Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÂ∞±ËÉΩÂ§üËß£ÂÜ≥„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556- (void)deadLockCase1 { NSLog(@&quot;1&quot;); //‰∏ªÈòüÂàóÁöÑÂêåÊ≠•Á∫øÁ®ãÔºåÊåâÁÖßFIFOÁöÑÂéüÂàôÔºàÂÖàÂÖ•ÂÖàÂá∫ÔºâÔºå2ÊéíÂú®3ÂêéÈù¢‰ºöÁ≠â3ÊâßË°åÂÆåÔºå‰ΩÜÂõ†‰∏∫ÂêåÊ≠•Á∫øÁ®ãÔºå3ÂèàË¶ÅÁ≠â2ÊâßË°åÂÆåÔºåÁõ∏‰∫íÁ≠âÂæÖÊàê‰∏∫Ê≠ªÈîÅ„ÄÇ dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;);}- (void)deadLockCase2 { NSLog(@&quot;1&quot;); //3‰ºöÁ≠â2ÔºåÂõ†‰∏∫2Âú®ÂÖ®Â±ÄÂπ∂Ë°åÈòüÂàóÈáåÔºå‰∏çÈúÄË¶ÅÁ≠âÂæÖ3ÔºåËøôÊ†∑2ÊâßË°åÂÆåÂõûÂà∞‰∏ªÈòüÂàóÔºå3Â∞±ÂºÄÂßãÊâßË°å dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;);}- (void)deadLockCase3 { dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL); NSLog(@&quot;1&quot;); dispatch_async(serialQueue, ^{ NSLog(@&quot;2&quot;); //‰∏≤Ë°åÈòüÂàóÈáåÈù¢ÂêåÊ≠•‰∏Ä‰∏™‰∏≤Ë°åÈòüÂàóÂ∞±‰ºöÊ≠ªÈîÅ dispatch_sync(serialQueue, ^{ NSLog(@&quot;3&quot;); }); NSLog(@&quot;4&quot;); }); NSLog(@&quot;5&quot;);}- (void)deadLockCase4 { NSLog(@&quot;1&quot;); dispatch_async(dispatch_get_global_queue(0, 0), ^{ NSLog(@&quot;2&quot;); //Â∞ÜÂêåÊ≠•ÁöÑ‰∏≤Ë°åÈòüÂàóÊîæÂà∞Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÂ∞±ËÉΩÂ§üËß£ÂÜ≥ dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;3&quot;); }); NSLog(@&quot;4&quot;); }); NSLog(@&quot;5&quot;);}- (void)deadLockCase5 { dispatch_async(dispatch_get_global_queue(0, 0), ^{ NSLog(@&quot;1&quot;); //ÂõûÂà∞‰∏ªÁ∫øÁ®ãÂèëÁé∞Ê≠ªÂæ™ÁéØÂêéÈù¢Â∞±Ê≤°Ê≥ïÊâßË°å‰∫Ü dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;); }); NSLog(@&quot;4&quot;); //Ê≠ªÂæ™ÁéØ while (1) { // }} GCDÂÆûÈôÖ‰ΩøÁî®FMDBÂ¶Ç‰Ωï‰ΩøÁî®dispatch_queue_set_specificÂíådispatch_get_specificÊù•Èò≤Ê≠¢Ê≠ªÈîÅ‰ΩúÁî®Á±ª‰ººobjc_setAssociatedObjectË∑üobjc_getAssociatedObject 1234567891011static const void * const kDispatchQueueSpecificKey = &amp;kDispatchQueueSpecificKey;//ÂàõÂª∫‰∏≤Ë°åÈòüÂàóÔºåÊâÄÊúâÊï∞ÊçÆÂ∫ìÁöÑÊìç‰ΩúÈÉΩÂú®Ëøô‰∏™ÈòüÂàóÈáå_queue = dispatch_queue_create([[NSString stringWithFormat:@&quot;fmdb.%@&quot;, self] UTF8String], NULL);//Ê†áËÆ∞ÈòüÂàódispatch_queue_set_specific(_queue, kDispatchQueueSpecificKey, (__bridge void *)self, NULL);//Ê£ÄÊü•ÊòØÂê¶ÊòØÂêå‰∏Ä‰∏™ÈòüÂàóÊù•ÈÅøÂÖçÊ≠ªÈîÅÁöÑÊñπÊ≥ï- (void)inDatabase:(void (^)(FMDatabase *db))block { FMDatabaseQueue *currentSyncQueue = (__bridge id)dispatch_get_specific(kDispatchQueueSpecificKey); assert(currentSyncQueue != self &amp;&amp; &quot;inDatabase: was called reentrantly on the same queue, which would lead to a deadlock&quot;);} DTCoreText‰ΩøÁî®GCDÂä†Âø´Ëß£ÊûêÈÄüÂ∫¶DTCoreTextÈááÁî®ÁöÑÊòØSAXËß£ÊûêÔºåiOSËá™Â∏¶‰∫ÜXML/HTMLÁöÑËß£ÊûêÂºïÊìélibxmlÔºåÊèê‰æõ‰∫Ü‰∏§‰∏™Ëß£ÊûêÊé•Âè£ÔºåDOMËß£ÊûêÂíåSAXËß£ÊûêÔºåÂâçËÄÖ‰ΩøÁî®ÁÆÄÂçï‰ΩÜÊòØÂç†Áî®ÂÜÖÂ≠òÂ§öÔºåSAXËß£ÊûêÁî±‰∫é‰∏ç‰ºöËøîÂõû‰∏Ä‰∏™domÊ†ëÔºåÈááÁî®ÁöÑÊòØÊü•Âà∞‰∏Ä‰∏™Ê†áÁ≠æÊØîÂ¶ÇÂõûË∞ÉstartElementÊñπÊ≥ïÁ¢∞Âà∞ÂÜÖÂÆπÂ∞±ÂõûË∞É_charactersÁ¢∞Âà∞Á±ª‰ººÂ∞±ÂõûË∞ÉendElementËøôÊ†∑ÁöÑÊñπÂºè„ÄÇ Ê†πÊçÆËøôÁßçËß£ÊûêÊñπÂºèDTCoreText‰ΩøÁî®Â§öÁ∫øÁ®ãËß£ÊûêËÉΩÂ§üÊõ¥Âø´ÁöÑËß£ÊûêÔºåDTHTMLAttributedStringBuilder‰ΩøÁî®‰∏â‰∏™dispatch_queue _dataParsingQueueÔºöËß£ÊûêhtmlÁöÑ _treeBuildingQueueÔºöÁîüÊàêdomÊ†ëÁöÑ _stringAssemblyQueueÔºöÁªÑË£ÖNSAttributeStringÁöÑËé∑Âèñ‰∏â‰∏™ÈòüÂàóÂÖ®ÈÉ®ÂÆåÊàêÈááÁî®‰∫Üdispatch_groupÁöÑdispatch_group_waitËøôÁßçÈòªÂ°ûÂêåÊ≠•ÊñπÂºèÊù•ËøîÂõûÁªìÊûú„ÄÇ iOSÁ≥ªÁªüÁâàÊú¨Êñ∞ÁâπÊÄßiOS8iOS8Êñ∞Âä†‰∫Ü‰∏Ä‰∏™ÂäüËÉΩÂè´Quality of Service(QoS)ÔºåÈáåÈù¢Êèê‰æõ‰∫Ü‰∏Ä‰∏ãÂá†‰∏™Êõ¥ÂÆπÊòìÁêÜËß£ÁöÑÊûö‰∏æÂêçÊù•‰ΩøÁî®user interactiveÔºåuser initiatedÔºåutilityÂíåbackground„ÄÇ‰∏ãÈù¢ÁöÑË°®ÂÅö‰∫ÜÂØπÊØî Global queue Corresponding QoS class ËØ¥Êòé Main thread NSQualityOfServiceUserInteractive UIÁõ∏ÂÖ≥Ôºå‰∫§‰∫íÁ≠â DISPATCH_QUEUE_PRIORITY_HIGH NSQualityOfServiceUserInitiated Áî®Êà∑ÂèëËµ∑ÈúÄË¶ÅÈ©¨‰∏äÂæóÂà∞ÁªìÊûúËøõË°åÂêéÁª≠‰ªªÂä° DISPATCH_QUEUE_PRIORITY_DEFAULT NSQualityOfServiceDefault ÈªòËÆ§ÁöÑ‰∏çÂ∫îËØ•‰ΩøÁî®Ëøô‰∏™ËÆæÁΩÆ‰ªªÂä° DISPATCH_QUEUE_PRIORITY_LOW NSQualityOfServiceUtility Ëä±Ë¥πÊó∂Èó¥Á®çÂ§öÊØîÂ¶Ç‰∏ãËΩΩÔºåÈúÄË¶ÅÂá†ÁßíÊàñÂá†ÂàÜÈíüÁöÑ DISPATCH_QUEUE_PRIORITY_BACKGROUND NSQualityOfServiceBackground ‰∏çÂèØËßÅÂú®ÂêéÂè∞ÁöÑÊìç‰ΩúÂèØËÉΩÈúÄË¶ÅÂ•ΩÂá†ÂàÜÈíüÁîöËá≥Âá†Â∞èÊó∂ÁöÑ ÂèÇËÄÉËµÑÊñôWWDC Building Responsive and Efficient Apps with GCDÔºöhttps://developer.apple.com/videos/play/wwdc2015-718/ ÊñáÊ°£ ÂÆòÊñπÊñáÊ°£Ôºöhttps://developer.apple.com/library/prerelease/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/","link":"/ÁºñÁ®ã/Ô£ø/GCD/"},{"title":"UIMenuController","text":"","link":"/ÁºñÁ®ã/Ô£ø/UIMenuController/"},{"title":"KVO crash Ëá™‰øÆÂ§çÊäÄÊúØÂÆûÁé∞‰∏éÂéüÁêÜËß£Êûê","text":"ÂâçË®Ä „ÄêÂâçË®Ä„ÄëKVO APIËÆæËÆ°ÈùûÂ∏∏‰∏çÂêàÁêÜÔºå‰∫éÊòØÊúâÂæàÂ§öÁöÑKVO‰∏âÊñπÂ∫ìÔºåÊØîÂ¶Ç KVOController Áî®Êõ¥‰ºòÁöÑAPIÊù•ËßÑÈÅøËøô‰∫õcrashÔºå‰ΩÜÊòØ‰æµÂÖ•ÊÄßÊØîËæÉÂ§ßÔºåÂøÖÈ°ªÁºñÁ†ÅËßÑËåÉÊù•Á∫¶ÊùüÊâÄÊúâ‰∫∫ÈÉΩË¶Å‰ΩøÁî®ËØ•ÊñπÂºè„ÄÇÊúâÊ≤°Êúâ‰ªÄ‰πàÊõ¥‰ºòÈõÖÔºåÊó†ÊÑüÁü•ÁöÑÊé•ÂÖ•ÊñπÂºèÔºü ÁÆÄ‰ªã KVO crash ‰πüÊòØÈùûÂ∏∏Â∏∏ËßÅÁöÑ Crash Á±ªÂûãÔºåÂú®Êé¢ËÆ® KVO crash ÂéüÂõ†ÂâçÔºåÊàë‰ª¨ÂÖàÊù•Áúã‰∏Ä‰∏ã‰º†ÁªüÁöÑKVOÂÜôÂèëÔºö 12345678910111213141516171819202122232425262728#warning move this to top of .m file//#define MyKVOContext(A) static void * const A = (void*)&amp;A;static void * const MyContext = (void*)&amp;MyContext;#warning move this to viewdidload or init method // KVOÊ≥®ÂÜåÁõëÂê¨: // _A ÁõëÂê¨ _B ÁöÑ @&quot;keyPath&quot; Â±ûÊÄß //[self.B addObserver: self.A forKeyPath:@&quot;keyPath&quot; options:NSKeyValueObservingOptionNew context:MyContext];- (void)dealloc { // KVOÂèçÊ≥®ÂÜå [_B removeObserver:_A forKeyPath:@&quot;keyPath&quot;];}// KVOÁõëÂê¨ÊâßË°å #warning ‚Äî please move this method to the class of _A - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context { if(context != MyContext) { [super observeValueForKeyPath:keyPath ofObject:object change:change context:context]; return; } if(context == MyContext) { //if ([keyPath isEqualToString:@&quot;keyPath&quot;]) { id newKey = change[NSKeyValueChangeNewKey]; BOOL boolValue = [newKey boolValue]; }} ÁúãÂà∞Â¶Ç‰∏äÁöÑÂÜôÂèëÔºåÂ§ßÊ¶ÇÊàë‰ª¨Â∞±ÊòéÁôΩ‰∫Ü API ËÆæËÆ°‰∏çÂêàÁêÜÁöÑÂú∞ÊñπÔºö B ÈúÄË¶ÅÂÅöÁöÑÂ∑•‰ΩúÂ§™Â§öÔºåBÂèØËÉΩÂºïËµ∑CrashÁöÑÁÇπ‰πüÂ§™Â§öÔºö B ÈúÄË¶Å‰∏ªÂä®ÁßªÈô§ÁõëÂê¨ËÄÖÁöÑÊó∂Êú∫ÔºåÂê¶ÂàôÂ∞±crashÔºö B Âú®ÈáäÊîæÂèò‰∏∫nilÂêéÔºåhook deallocÊó∂Êú∫ A Âú®ÈáäÊîæÂèò‰∏∫nilÂêé Âê¶ÂàôÊä•Èîô Objective-C Thread 1: EXC_BAD_ACCESS (code=EXC_I386_GPFLT) KVOÁöÑË¢´ËßÇÂØüËÄÖdeallocÊó∂‰ªçÁÑ∂Ê≥®ÂÜåÁùÄKVOÂØºËá¥ÁöÑcrash B ‰∏çËÉΩÁßªÈô§ÁõëÂê¨ËÄÖAÁöÑÊó∂Êú∫ÔºåÂê¶ÂàôÂ∞±crashÔºö BÊ≤°ÊúâË¢´AÁõëÂê¨ BÂ∑≤ÁªèÁßªÈô§AÁöÑÁõëÂê¨„ÄÇ Ê∑ªÂä†KVOÈáçÂ§çÊ∑ªÂä†ËßÇÂØüËÄÖÊàñÈáçÂ§çÁßªÈô§ËßÇÂØüËÄÖÔºàKVO Ê≥®ÂÜåËßÇÂØüËÄÖ‰∏éÁßªÈô§ËßÇÂØüËÄÖ‰∏çÂåπÈÖçÔºâÂØºËá¥ÁöÑcrash„ÄÇ ÈááÂèñÁöÑÊé™ÊñΩÔºö BÊ∑ªÂä†AÁõëÂê¨ÁöÑÊó∂ÂÄôÔºåÈÅøÂÖçÈáçÂ§çÊ∑ªÂä†ÔºåÁßªÈô§ÁöÑÊó∂ÂÄôÈÅøÂÖçÈáçÂ§çÁßªÈô§„ÄÇ B deallocÊó∂ÂèäÊó∂ÁßªÈô§ A A deallocÊó∂ÔºåËÆ© B ÁßªÈô§A„ÄÇ ÈÅøÂÖçÈáçÂ§çÊ∑ªÂä†ÔºåÈÅøÂÖçÈáçÂ§çÁßªÈô§„ÄÇ Êä•Èîô‰ø°ÊÅØ‰∏ÄËßàÔºö 12018-01-24 16:08:54.100667+0800 BootingProtection[63487:29487624] *** Terminating app due to uncaught exception &apos;NSInternalInconsistencyException&apos;, reason: &apos;&lt;CYLObserverView: 0x7fb287002fb0; frame = (0 0; 207 368); layer = &lt;CALayer: 0x604000039360&gt;&gt;: An -observeValueForKeyPath:ofObject:change:context: message was received but not handled. ÂÖ∂‰ªñÊÉÖÂÜµÁöÑcrash 1234567891011121314151617181920212223242526272829*** Terminating app due to uncaught exception &apos;NSInternalInconsistencyException&apos;, reason: &apos;An instance 0x7f8827d21d20 of class XXXX was deallocated while key value observers were still registered with it. Current observation info: &lt;NSKeyValueObservationInfo 0x61000003db00&gt; (&lt;NSKeyValueObservance 0x61000025ae80: Observer: 0x7f882890b4c0, Key path: dataSource, Options: &lt;New: YES, Old: NO, Prior: NO&gt; Context: 0x10dfe7730, Property: 0x61000025b810&gt;)&apos;*** First throw call stack:( 0 CoreFoundation 0x00000001102b0b0b __exceptionPreprocess + 171 1 libobjc.A.dylib 0x00000001167eb141 objc_exception_throw + 48 2 CoreFoundation 0x0000000110319625 +[NSException raise:format:] + 197 3 Foundation 0x0000000111322b53 NSKVODeallocate + 294 4 UIKit 0x00000001138ec544 __destroy_helper_block_.125 + 80 5 libsystem_blocks.dylib 0x00000001185a999d _Block_release + 111 6 UIKit 0x00000001139bd187 -[UIViewAnimationBlockDelegate .cxx_destruct] + 43 7 libobjc.A.dylib 0x00000001167e99bc _ZL27object_cxxDestructFromClassP11objc_objectP10objc_class + 127 8 libobjc.A.dylib 0x00000001167f5d34 objc_destructInstance + 129 9 libobjc.A.dylib 0x00000001167f5d66 object_dispose + 22 10 libobjc.A.dylib 0x00000001167ffb8e _ZN11objc_object17sidetable_releaseEb + 202 11 CoreFoundation 0x000000011021952d -[__NSDictionaryI dealloc] + 125 12 libobjc.A.dylib 0x00000001167ffb8e _ZN11objc_object17sidetable_releaseEb + 202 13 libobjc.A.dylib 0x00000001168002fa _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv + 866 14 CoreFoundation 0x00000001101ffe96 _CFAutoreleasePoolPop + 22 15 CoreFoundation 0x000000011023baec __CFRunLoopRun + 2172 16 CoreFoundation 0x000000011023b016 CFRunLoopRunSpecific + 406 17 GraphicsServices 0x0000000118f1ea24 GSEventRunModal + 62 18 UIKit 0x0000000113904134 UIApplicationMain + 159 19 HaiDiLao 0x000000010d50b5ef main + 111 20 libdyld.dylib 0x000000011856265d start + 1 21 ??? 0x0000000000000001 0x0 + 1)libc++abi.dylib: terminating with uncaught exception of type NSException Èò≤crashÊé™ÊñΩ‰∫éÊòØÊúâÂæàÂ§öÁöÑKVO‰∏âÊñπÂ∫ìÔºåÊØîÂ¶Ç KVOController Áî®Êõ¥‰ºòÁöÑAPIÊù•ËßÑÈÅøËøô‰∫õcrashÔºå‰ΩÜÊòØ‰æµÂÖ•ÊÄßÊØîËæÉÂ§ßÔºåÂøÖÈ°ªÁºñÁ†ÅËßÑËåÉÊù•Á∫¶ÊùüÊâÄÊúâ‰∫∫ÈÉΩË¶Å‰ΩøÁî®ËØ•ÊñπÂºè„ÄÇÊúâÊ≤°Êúâ‰ªÄ‰πàÊõ¥‰ºòÈõÖÔºåÊó†ÊÑüÁü•ÁöÑÊé•ÂÖ•ÊñπÂºèÔºü ÈÇ£‰æøÊòØÊàë‰ª¨‰∏ãÈù¢Ë¶ÅËÆ≤ÁöÑ KVO crash Èò≤Êä§Êú∫Âà∂„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÂØπÊØî‰∏ãÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õKVOÈò≤Êä§ÊñπÊ°àÔºö ÁΩëÁªú‰∏äÊúâ‰∏Ä‰∫õÁ±ª‰ººÁöÑÊñπÊ°àÔºå‚ÄúÂ§ßÁôΩÂÅ•Â∫∑Á≥ªÁªü‚ÄùÊñπÊ°àÂ§ßËá¥Â¶Ç‰∏ãÔºö KVOÁöÑË¢´ËßÇÂØüËÄÖdeallocÊó∂‰ªçÁÑ∂Ê≥®ÂÜåÁùÄKVOÂØºËá¥ÁöÑcrash ÁöÑÊÉÖÂÜµÔºåÂèØ‰ª•Â∞ÜNSObjectÁöÑdealloc swizzleÔºå Âú®object deallocÁöÑÊó∂ÂÄôËá™Âä®Â∞ÜÂÖ∂ÂØπÂ∫îÁöÑkvodelegateÊâÄÊúâÂíåkvoÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊ∏ÖÁ©∫ÔºåÁÑ∂ÂêéÂ∞Ükvodelegate‰πüÁΩÆÁ©∫„ÄÇÈÅøÂÖçÂá∫Áé∞KVOÁöÑË¢´ËßÇÂØüËÄÖdeallocÊó∂‰ªçÁÑ∂Ê≥®ÂÜåÁùÄKVOËÄå‰∫ßÁîüÁöÑcrash ËøôÊ†∑Êú™ÂÖçÂ§™ËøáÈ∫ªÁÉ¶ÔºåÊàë‰ª¨ÂèØ‰ª•ÂÄüÂä©Á¨¨‰∏âÊñπÂ∫ì CYLDeallocBlockExecutor hook ‰ªªÊÑè‰∏Ä‰∏™ÂØπË±°ÁöÑ dealloc Êó∂Êú∫ÔºåÁÑ∂ÂêéÂú® dealloc ÂâçËøõË°åÊàë‰ª¨ÈúÄË¶ÅËøõË°åÁöÑÊìç‰ΩúÔºåÂõ†Ê≠§‰πüÂ∞±‰∏çÈúÄË¶Å‰∏∫ NSObject Âä† flag Êù•ËøõË°åÂÖ®Â±ÄÁöÑÁ≠õÈÄâ„ÄÇflag ÊïàÁéáÈùûÂ∏∏Â∫ïÔºåÂΩ±Âìç app ÊÄßËÉΩ„ÄÇ ‚ÄúÂ§ßÁôΩÂÅ•Â∫∑Á≥ªÁªü‚ÄùÊÄùË∑ØÊòØÂª∫Á´ã‰∏Ä‰∏™delegateÔºåËßÇÂØüËÄÖÂíåË¢´ËßÇÂØüËÄÖÈÄöËøádelegateÈó¥Êé•Âª∫Á´ãËÅîÁ≥ªÔºåÁî±‰∫éÊ≤°ÊúâdemoÊ∫êÁ†ÅÔºåËøôÁßçÊñπÊ°àÊØîËæÉÁπÅÁêê„ÄÇÂèØ‰ª•ËÄÉËôëÂª∫Á´ã‰∏Ä‰∏™ÂìàÂ∏åË°®ÔºåÁî®Êù•‰øùÂ≠òËßÇÂØüËÄÖ„ÄÅkeyPathÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÊûúÂìàÂ∏åË°®ÈáåÂ∑≤ÁªèÊúâ‰∫ÜÁõ∏ÂÖ≥ÁöÑËßÇÂØüËÄÖÔºåkeyPath‰ø°ÊÅØÔºåÈÇ£‰πàÁªßÁª≠Ê∑ªÂä†ËßÇÂØüËÄÖÁöÑËØùÔºåÂ∞±‰∏çËΩΩËøõË°åÊ∑ªÂä†ÔºåÂêåÊ†∑ÁßªÈô§ËßÇÂØüÁöÑÊó∂ÂÄôÔºå‰πüÁé∞Âú®ÂìàÂ∏åË°®‰∏≠ËøõË°åÊü•ÊâæÔºåÂ¶ÇÊûúÂ≠òÂú®ËßÇÂØüËÄÖÔºåkeypath‰ø°ÊÅØÔºåÈÇ£‰πàÁßªÈô§ÔºåÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÂ∞±‰∏çÊâßË°åÁõ∏ÂÖ≥ÁöÑÁßªÈô§Êìç‰Ωú„ÄÇË¶ÅÂÆûÁé∞ËøôÊ†∑ÁöÑÊÄùË∑ØÂ∞±ÈúÄË¶ÅÁî®Âà∞methodSwizzleÊù•ËøõË°åÊñπÊ≥ï‰∫§Êç¢„ÄÇÊàëËøôÈÄöËøáÂÜô‰∫Ü‰∏Ä‰∏™NSObjectÁöÑcagegoryÊù•ËøõË°åÊñπÊ≥ï‰∫§Êç¢„ÄÇÁ§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö‰∏ãÈù¢ÊòØÊ†∏ÂøÉÁöÑswizzleÊñπÊ≥ïÔºö ÂéüÂáΩÊï∞ swizzleÂêéÁöÑÂáΩÊï∞ addObserver:forKeyPath:options:context: cyl_crashProtectaddObserver:forKeyPath:options:context: removeObserver:forKeyPath: cyl_crashProtectremoveObserver:forKeyPath: removeObserver:forKeyPath:context: cyl_crashProtectremoveObserver:forKeyPath:context 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354- (void)cyl_crashProtectaddObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath options:(NSKeyValueObservingOptions)options context:(nullable void *)context{ if (!observer || !keyPath || keyPath.length == 0) { return; } @synchronized (self) { NSInteger kvoHash = [self _cyl_crashProtectHash:observer :keyPath]; if (!self.KVOHashTable) { self.KVOHashTable = [NSHashTable hashTableWithOptions:NSPointerFunctionsStrongMemory]; } if (![self.KVOHashTable containsObject:@(kvoHash)]) { [self.KVOHashTable addObject:@(kvoHash)]; [self cyl_crashProtectaddObserver:observer forKeyPath:keyPath options:options context:context]; [self cyl_willDeallocWithSelfCallback:^(__unsafe_unretained id observedOwner, NSUInteger identifier) { [observedOwner cyl_crashProtectremoveObserver:observer forKeyPath:keyPath context:context]; }]; __unsafe_unretained typeof(self) unsafeUnretainedSelf = self; [observer cyl_willDeallocWithSelfCallback:^(__unsafe_unretained id observerOwner, NSUInteger identifier) { [unsafeUnretainedSelf cyl_crashProtectremoveObserver:observerOwner forKeyPath:keyPath context:context]; }]; } }}- (void)cyl_crashProtectremoveObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath context:(void *)context { //TODO: Âä†‰∏ä context ÈôêÂà∂ÔºåÈò≤Ê≠¢Áà∂Á±ª„ÄÅÂ≠êÁ±ª‰ΩøÁî®Âêå‰∏Ä‰∏™keyPath„ÄÇ [self cyl_crashProtectremoveObserver:observer forKeyPath:keyPath];}- (void)cyl_crashProtectremoveObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath{ //TODO: white list if (!observer || !keyPath || keyPath.length == 0) { return; } @synchronized (self) { if (!observer) { return; } NSInteger kvoHash = [self _cyl_crashProtectHash:observer :keyPath]; NSHashTable *hashTable = [self KVOHashTable]; if (!hashTable) { return; } if ([hashTable containsObject:@(kvoHash)]) { [self cyl_crashProtectremoveObserver:observer forKeyPath:keyPath]; [hashTable removeObject:@(kvoHash)]; } }} ‰πãÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•Ê®°Êãüdealloc‰∏≠‰∏çÂÜôremoveObserverÔºåÂêåÊó∂‰πüÂèØ‰ª•ÂÜôÔºåÂêåÊó∂‰πüÂèØ‰ª•Â§öÊ¨° addObserver„ÄÅremoveObserver ËøôÊ†∑Â∞±ÂÆåÂÖ®‰∏çÂπ≤Êâ∞Êàë‰ª¨Âπ≥Êó∂ÁöÑ‰ª£Á†Å‰π¶ÂÜôÈÄªËæë‰∫Ü„ÄÇ Posted by ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÂéüÂàõÊñáÁ´†ÔºåÁâàÊùÉÂ£∞ÊòéÔºöËá™Áî±ËΩ¨ËΩΩ-ÈùûÂïÜÁî®-ÈùûË°çÁîü-‰øùÊåÅÁΩ≤Âêç | Creative Commons BY-NC-ND 3.0","link":"/ÁºñÁ®ã/Ô£ø/KVOcrash/"},{"title":"‰ªÄ‰πàÊòØRxSwift","text":"Áõ∏‰ø°Â§ßÂÆ∂ÂæàÊó©Â∞±Âê¨ËØ¥ËøáÂáΩÊï∞ÂºèÂìçÂ∫îÁºñÁ®ãÊ¶ÇÂøµÔºåÊàëÊòØÂéªÂπ¥Èù¢ËØïÁöÑÊó∂ÂÄôÊé•Ëß¶Âà∞ÂáΩÊï∞ÂºèÂìçÂ∫îÁºñÁ®ãÁöÑÔºåÂΩìÊó∂‰πüÊòØÁ¨¨‰∏ÄÊ¨°Êé•Ëß¶Âà∞MVVMËøô‰∏™Ê¶ÇÂøµÔºåËΩ¨ÁúºÈÉΩ‰∏ÄÂπ¥ËøáÂéª‰∫ÜÔºåÊàëÂç¥Ê≤°ÊúâÂú®ÂáΩÊï∞ÂºèÁºñÁ®ã‰∏äÂÅöÊ∑±ÂÖ•ÁöÑÁ†îÁ©∂ÔºåËØ¥Êù•ËøòÁúüÊòØÊÉ≠ÊÑß„ÄÇ‰∏çËøáÊúÄËøëÁî±‰∫éÊÉ≥Ë¶Å‰ΩøÁî®RxSwiftÔºåÊâÄ‰ª•Ë∂ÅËøô‰∏™Êó∂ÂÄôÂ•ΩÂ•ΩÊé•Ëß¶ÂíåÁ†îÁ©∂‰∏Ä‰∏ã‰º†ËØ¥‰∏≠ÁöÑÂáΩÊï∞ÂºèÁºñÁ®ãÔºåÁî±‰∫éÁΩë‰∏äÂÖ≥‰∫éRxSwiftÁöÑÊïôÁ®ãËµÑÊñôÂæàÂ∞ëÔºåËøôÁØáÊñáÁ´†ÂÖ∂ÂÆûÂ∞±ÊòØÊúÄRxSwiftÂÆòÊñπÊñáÊ°£Âíå‰∏Ä‰∫õÊ¶ÇÂøµÂÅö‰∏Ä‰∫õËß£ËØª„ÄÇÁÆóÊòØÂ§ßÂÆ∂Â≠¶‰π†ÁöÑÂèÇËÄÉÊñáÁ´†ÂêßÔºÅ ÂÖàÊåñ‰∏™ÂùëÔºåËøôÂèØËÉΩ‰ºöÊòØ‰∏Ä‰∏™RxSwiftÁ≥ªÂàóÔºåÂ∏åÊúõÂ§ßÂÆ∂Âú®Â≠¶‰π†ÁöÑÊó∂ÂÄôÊúâÊâÄÂèÇËÄÉ„ÄÇ RxSwiftÊòØ‰ªÄ‰πàRxSwifÊòØReactiveXÁöÑSwiftÁâàÊú¨Ôºå‰πüÂ∞±ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÂºèÂìçÂ∫îÁºñÁ®ãÁöÑÊ°ÜÊû∂„ÄÇÂØπÔºåÂ∞±Ëøô‰∏ÄÂè•ËØù„ÄÇÊÉ≥Ë¶ÅÁü•ÈÅì‰ªñÂÅö‰ªÄ‰πàÁöÑÔºåÊàë‰ª¨ÂÖàÊù•‰∫ÜËß£‰∏Ä‰∏ãËßÇÂØüËÄÖÊ®°Âºè„ÄÇ ËßÇÂØüËÄÖÊ®°ÂºèÂÖ≥‰∫éËßÇÂØüËÄÖÊ®°ÂºèÊàëÊÉ≥Â§ß‰ºôÂ∫îËØ•ÈÉΩÂæà‰∫ÜËß£‰∫ÜÂêßÔºå‰ªÄ‰πàKVOÔºåÈÄöÁü•Á≠âÈÉΩÊòØËßÇÂØüËÄÖÊ®°ÂºèÔºåÂú®ËÆæËÆ°Ê®°Âºè‰∏≠‰ªñÂèØÊòØ‰∏Ä‰∏™Èáç‰∏≠‰πãÈáçÁöÑËÆæËÆ°Ê®°ÂºèÂïäÔºÅÊØîÂ¶Ç‰∏Ä‰∏™ÂÆùÂÆùÂú®Áù°ËßâÔºåÁà∏Áà∏Â¶àÂ¶àÔºåÁà∑Áà∑Â•∂Â•∂ÊÄª‰∏çËÉΩÂú®ÈÇ£Ëæπ‰∏ÄÂè™ÁúãÁùÄÂêßÔºüÈÇ£Ê†∑Â≠êÂ§™Á¥Ø‰∫Ü„ÄÇ‰ªñ‰ª¨ËØ•ÂÅöÂï•‰∫ãÂ∞±ÂÅöÂï•‰∫ãÂëóÔºåÂè™Ë¶ÅÂê¨Âà∞ÂÆùÂÆùÁöÑÂì≠Â£∞Ôºå‰ªñ‰ª¨Â∞±ÁªôÂÆùÂÆùÂñÇÂ•∂Â∞±Ë°å‰∫Ü„ÄÇËøôÂ∞±ÊòØ‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑËßÇÂØüËÄÖÊ®°Âºè„ÄÇÂÆùÂÆùÊòØË¢´ËßÇÂØüËÄÖÔºåÁà∏Áà∏Â¶àÂ¶àÁ≠âÊòØËßÇÂØüËÄÖ‰πüÁß∞‰ΩúËÆ¢ÈòÖËÄÖÔºåÂè™Ë¶ÅË¢´ËßÇÂØüËÄÖÂèëÂá∫‰∫ÜÊüê‰∫õ‰∫ã‰ª∂ÊØîÂ¶ÇÂÆùÂÆùÂì≠Â£∞„ÄÅÂè´Â£∞ÈÉΩÊòØ‰∏Ä‰∏™‰∫ã‰ª∂ÔºåÈÄöÁü•Âà∞ËÆ¢ÈòÖËÄÖÔºåËÆ¢ÈòÖËÄÖ‰ª¨Â∞±ÂèØ‰ª•ÂÅöÁõ∏Â∫îÁöÑÂ§ÑÁêÜÂ∑•‰Ωú„ÄÇÂìàÂìàÔºåËßÇÂØüËÄÖÊ®°ÂºèÂæàÁÆÄÂçïÂêßÔºü RxSwiftÂÅö‰∫Ü‰ªÄ‰πàRxSwiftÊääÊàë‰ª¨Á®ãÂ∫è‰∏≠ÊØè‰∏Ä‰∏™Êìç‰ΩúÈÉΩÁúãÊàê‰∏Ä‰∏™‰∫ã‰ª∂ÔºåÊØîÂ¶Ç‰∏Ä‰∏™TextField‰∏≠ÁöÑÊñáÊú¨ÊîπÂèòÔºå‰∏Ä‰∏™ÊåâÈíÆË¢´ÁÇπÂáªÔºåÊàñËÄÖ‰∏Ä‰∏™ÁΩëÁªúËØ∑Ê±ÇÁªìÊùüÁ≠âÔºåÊØè‰∏Ä‰∏™‰∫ã‰ª∂Ê∫êÂ∞±ÂèØ‰ª•ÁúãÊàê‰∏Ä‰∏™ÁÆ°ÈÅìÔºå‰πüÂ∞±ÊòØsequenceÔºåÊØîÂ¶ÇTextFieldÔºåÂΩìÊàë‰ª¨ÊîπÂèòÈáåÈù¢ÁöÑÊñáÊú¨ÁöÑÊó∂ÂÄôÔºåËøô‰∏™TextFieldÂ∞±‰ºö‰∏çÊñ≠ÁöÑÂèëÂá∫‰∫ã‰ª∂Ôºå‰ªé‰ªñÁöÑËøô‰∏™sequence‰∏≠‰∏çÊñ≠ÁöÑÊµÅÂá∫ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÁõëÂê¨Ëøô‰∏™sequenceÔºåÊØèÊµÅÂá∫‰∏Ä‰∏™‰∫ã‰ª∂Â∞±ÂÅöÁõ∏Â∫îÁöÑÂ§ÑÁêÜ„ÄÇÂêåÁêÜÔºåButton‰πüÊòØ‰∏Ä‰∏™sequenceÔºåÊØèÁÇπÂáª‰∏ÄÊ¨°Â∞±ÊµÅÂá∫‰∏Ä‰∏™‰∫ã‰ª∂„ÄÇ‰πüÂ∞±ÊòØÊàë‰ª¨ÊääÊØè‰∏ÄÊ≠•ÈÉΩÊÉ≥ÊàêÊòØ‰∏Ä‰∏™‰∫ã‰ª∂Â∞±Â•ΩÂéªÁêÜËß£RxSwift‰∫Ü„ÄÇÁúã‰∏ãÂõæÊòØ‰∏çÊòØÂæàÂ•ΩÁêÜËß£‰∫ÜÔºü ObservableÂíåObserverÁêÜËß£‰∫ÜËßÇÂØüËÄÖÊ®°ÂºèËøô‰∏§‰∏™Ê¶ÇÂøµÂ∞±ÂæàÂ•ΩÁêÜËß£‰∫ÜÔºåObservableÂ∞±ÊòØÂèØË¢´ËßÇÂØüÁöÑÔºå‰πüÂ∞±ÊòØÊàë‰ª¨ËØ¥ÁöÑÂÆùÂÆùÔºå‰ªñ‰πüÊòØ‰∫ã‰ª∂Ê∫ê„ÄÇËÄåObserverÂ∞±ÊòØÊàë‰ª¨ÁöÑËßÇÂØüËÄÖÔºå‰πüÂ∞±ÊòØÂΩìÊî∂Âà∞‰∫ã‰ª∂ÁöÑÊó∂ÂÄôÂéªÂÅöÊüê‰∫õÂ§ÑÁêÜÁöÑÁà∏Áà∏Â¶àÂ¶à„ÄÇËßÇÂØüËÄÖÈúÄË¶ÅÂéªËÆ¢ÈòÖ(subscribe)Ë¢´ËßÇÂØüËÄÖÔºåÊâçËÉΩÊî∂Âà∞ObservableÁöÑ‰∫ã‰ª∂ÈÄöÁü•Ê∂àÊÅØ„ÄÇ‰∏ãÈù¢ÂºÄÂßã‰∏Ä‰∫õÂü∫Êú¨Ê¶ÇÂøµËß£ËØªÔºåÈÄöËØª‰∏ÄÈÅç‰Ω†‰ºöÂØπRxSwiftÊúâÈùûÂ∏∏Ê∑±ÂàªÁöÑËÆ§ËØÜ‰∫ÜÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØÂØπÊï¥ÁêÜ‰∫Ü‰∏Ä‰∏ãÂÆòÊñπÊñáÊ°£ÂíåÂä†‰∏äËá™Â∑±ÁöÑ‰∏Ä‰∫õÁêÜËß£ ÂàõÂª∫ÂíåËÆ¢ÈòÖË¢´ËßÇÂØüËÄÖ‰∏ãÈù¢ÂàõÂª∫Ë¢´ËßÇÂØüËÄÖÂÖ∂ÂÆûÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™ObserableÁöÑsequenceÔºåÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™ÊµÅÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•Ë¢´ËÆ¢ÈòÖsubscribeÔºåËøôÊ†∑Ë¢´ËßÇÂØüËÄÖÂèëÂá∫Êó∂Èó¥Ê∂àÂ§±ÔºåÊàë‰ª¨Â∞±ËÉΩÂÅöÁõ∏Â∫îÁöÑÂ§ÑÁêÜ DisposeBagDisposeBagÂÖ∂ÂÆûÂ∞±Áõ∏ÂΩì‰∫éiOS‰∏≠ÁöÑARC‰ººÂæóÔºå‰ºöÂú®ÈÄÇÂΩìÁöÑÊó∂ÂÄôÈîÄÊØÅËßÇÂØüËÄÖÔºåÁõ∏ÂΩì‰∫éÂÜÖÂ≠òÁÆ°ÁêÜËÄÖÂêß„ÄÇ subscribesubscribeÊòØËÆ¢ÈòÖsequenceÂèëÂá∫ÁöÑ‰∫ã‰ª∂ÔºåÊØîÂ¶Çnext‰∫ã‰ª∂Ôºåerror‰∫ã‰ª∂Á≠â„ÄÇËÄåsubscribe(onNext:)ÊòØÁõëÂê¨sequenceÂèëÂá∫ÁöÑnext‰∫ã‰ª∂‰∏≠ÁöÑelementËøõË°åÂ§ÑÁêÜÔºå‰ªñ‰ºöÂøΩÁï•errorÂíåcompleted‰∫ã‰ª∂„ÄÇÁõ∏ÂØπÂ∫îÁöÑËøòÊúâsubscribe(onError:) Âíå subscribe(onCompleted:) neverneverÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™sequenceÔºå‰ΩÜÊòØ‰∏çÂèëÂá∫‰ªª‰Ωï‰∫ã‰ª∂‰ø°Âè∑„ÄÇ 1234567let disposeBag = DisposeBag()let neverSequence = Observable.never() let neverSequenceSubscription = neverSequence .subscribe { _ in print(&quot;This will never be printed&quot;)}.addDisposableTo(disposeBag) ÁªìÊûúÊòØ‰ªÄ‰πàÈÉΩ‰∏çÊâìÂç∞ emptyemptyÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™Á©∫ÁöÑsequence,Âè™ËÉΩÂèëÂá∫‰∏Ä‰∏™completed‰∫ã‰ª∂ 12345678let disposeBag = DisposeBag() Observable.empty() .subscribe { event in print(event) } .addDisposableTo(disposeBag) completed justjustÊòØÂàõÂª∫‰∏Ä‰∏™sequenceÂè™ËÉΩÂèëÂá∫‰∏ÄÁßçÁâπÂÆöÁöÑ‰∫ã‰ª∂ÔºåËÉΩÊ≠£Â∏∏ÁªìÊùü 1234567let disposeBag = DisposeBag() Observable.just(&quot;&quot;) .subscribe { event in print(event) } .addDisposableTo(disposeBag) 12next()completed ofofÊòØÂàõÂª∫‰∏Ä‰∏™sequenceËÉΩÂèëÂá∫ÂæàÂ§öÁßç‰∫ã‰ª∂‰ø°Âè∑ 12345678let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .subscribe(onNext: { element in print(element) }) .addDisposableTo(disposeBag) Â¶ÇÊûúÊää‰∏äÈù¢ÁöÑonNext:ÂéªÊéâÁöÑËØùÔºåÁªìÊûú‰ºöÊòØËøôÊ†∑Â≠êÔºå‰πüÊ≠£Â•ΩÂØπÂ∫î‰∫ÜÊàë‰ª¨subscribe‰∏≠ÔºåsubscribeÂè™ÁõëÂê¨‰∫ã‰ª∂„ÄÇ 12345next()next()next()next()completed fromfromÂ∞±ÊòØ‰ªéÈõÜÂêà‰∏≠ÂàõÂª∫sequenceÔºå‰æãÂ¶ÇÊï∞ÁªÑÔºåÂ≠óÂÖ∏ÊàñËÄÖSet 12345let disposeBag = DisposeBag() Observable.from([&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) createÊàë‰ª¨‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÂèØËßÇÂØüÁöÑsequenceÔºåÈÇ£Â∞±ÊòØ‰ΩøÁî®createcreateÊìç‰ΩúÁ¨¶‰º†ÂÖ•‰∏Ä‰∏™ËßÇÂØüËÄÖobserverÔºåÁÑ∂ÂêéË∞ÉÁî®observerÁöÑonNextÔºåonCompletedÂíåonErrorÊñπÊ≥ï„ÄÇËøîÂõû‰∏Ä‰∏™ÂèØËßÇÂØüÁöÑobserableÂ∫èÂàó„ÄÇ 1234567891011121314let disposeBag = DisposeBag() let myJust = { (element: String) -&gt; Observable in return Observable.create { observer in observer.on(.next(element)) observer.on(.completed) return Disposables.create() }} myJust(&quot;&quot;) .subscribe { print($0) } .addDisposableTo(disposeBag) 123next()completed rangerangeÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™sequenceÔºå‰ªñ‰ºöÂèëÂá∫Ëøô‰∏™ËåÉÂõ¥‰∏≠ÁöÑ‰ªéÂºÄÂßãÂà∞ÁªìÊùüÁöÑÊâÄÊúâ‰∫ã‰ª∂ 12345let disposeBag = DisposeBag() Observable.range(start: 1, count: 10) .subscribe { print($0) } .addDisposableTo(disposeBag) 123456789101112next(1)next(2)next(3)next(4)next(5)next(6)next(7)next(8)next(9)next(10)completed repeatElementÂàõÂª∫‰∏Ä‰∏™sequenceÔºåÂèëÂá∫ÁâπÂÆöÁöÑ‰∫ã‰ª∂nÊ¨° 123456let disposeBag = DisposeBag() Observable.repeatElement(&quot;&quot;) .take(3) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) generategenerateÊòØÂàõÂª∫‰∏Ä‰∏™ÂèØËßÇÂØüsequenceÔºåÂΩìÂàùÂßãÂåñÁöÑÊù°‰ª∂‰∏∫trueÁöÑÊó∂ÂÄôÔºå‰ªñÂ∞±‰ºöÂèëÂá∫ÊâÄÂØπÂ∫îÁöÑ‰∫ã‰ª∂ 12345let disposeBag = DisposeBag() Observable.generate( initialState: 0, condition: { $0 123012 deferreddeferred‰ºö‰∏∫ÊØè‰∏Ä‰∏∫ËÆ¢ÈòÖËÄÖobserverÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂèØËßÇÂØüÂ∫èÂàó‰∏ãÈù¢‰æãÂ≠ê‰∏≠ÊØèÊ¨°ËøõË°åsubscribeÁöÑÊó∂ÂÄôÈÉΩ‰ºöÂéªÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑdeferredSequenceÔºåÊâÄ‰ª•Emitting‰ºöÊâìÂç∞‰∏§ÈÅç„ÄÇ 1234567891011121314151617181920212223let disposeBag = DisposeBag()var count = 1 let deferredSequence = Observable.deferred { print(&quot;Creating \\(count)&quot;) count += 1 return Observable.create { observer in print(&quot;Emitting...&quot;) observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) return Disposables.create() }} deferredSequence .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) deferredSequence .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 12345678Creating 1Emitting... Creating 2Emitting... errorÂàõÂª∫‰∏Ä‰∏™ÂèØËßÇÂØüÂ∫èÂàóÔºå‰ΩÜ‰∏çÂèëÂá∫‰ªª‰ΩïÊ≠£Â∏∏ÁöÑ‰∫ã‰ª∂ÔºåÂè™ÂèëÂá∫error‰∫ã‰ª∂Âπ∂ÁªìÊùü 12345let disposeBag = DisposeBag() Observable.error(TestError.test) .subscribe { print($0) } .addDisposableTo(disposeBag) error(test) doOndoOnÊàëÊÑüËßâÂ∞±ÊòØÂú®Áõ¥Êé•onNextÂ§ÑÁêÜÊó∂ÂÄôÔºåÂÖàÊâßË°åÊüê‰∏™ÊñπÊ≥ïÔºådoOnNext( :)ÊñπÊ≥ïÂ∞±ÊòØÂú®subscribe(onNext:)ÂâçË∞ÉÁî®ÔºådoOnCompleted(:)Â∞±ÊòØÂú®subscribe(onCompleted:)ÂâçÈù¢Ë∞ÉÁî®ÁöÑ„ÄÇ 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .do(onNext: { print(&quot;Intercepted:&quot;, $0) }, onError: { print(&quot;Intercepted error:&quot;, $0) }, onCompleted: { print(&quot;Completed&quot;) }) .subscribe(onNext: { print($0) },onCompleted: { print(&quot;ÁªìÊùü&quot;) }) .addDisposableTo(disposeBag) 1234567891011Intercepted: Intercepted: Intercepted: Intercepted: CompletedÁªìÊùü Â≠¶‰ºö‰ΩøÁî®SubjectsSubjetÊòØobservableÂíåObserver‰πãÈó¥ÁöÑÊ°•Ê¢ÅÔºå‰∏Ä‰∏™SubjectÊó¢ÊòØ‰∏Ä‰∏™Obserable‰πüÊòØ‰∏Ä‰∏™ObserverÔºå‰ªñÊó¢ÂèØ‰ª•ÂèëÂá∫‰∫ã‰ª∂Ôºå‰πüÂèØ‰ª•ÁõëÂê¨‰∫ã‰ª∂„ÄÇ PublishSubjectÂΩì‰Ω†ËÆ¢ÈòÖPublishSubjectÁöÑÊó∂ÂÄôÔºå‰Ω†Âè™ËÉΩÊé•Êî∂Âà∞ËÆ¢ÈòÖ‰ªñ‰πãÂêéÂèëÁîüÁöÑ‰∫ã‰ª∂„ÄÇsubject.onNext()ÂèëÂá∫onNext‰∫ã‰ª∂ÔºåÂØπÂ∫îÁöÑËøòÊúâonError()ÂíåonCompleted()‰∫ã‰ª∂ 12345678910let disposeBag = DisposeBag()let subject = PublishSubject() subject.addObserver(&quot;1&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;&quot;)subject.onNext(&quot;&quot;) subject.addObserver(&quot;2&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;Ô∏è&quot;)subject.onNext(&quot;Ô∏è&quot;) 1234567Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 1 Event: next(Ô∏è)Subscription: 2 Event: next(Ô∏è)Subscription: 1 Event: next(Ô∏è)Subscription: 2 Event: next(Ô∏è) ReplaySubjectÂΩì‰Ω†ËÆ¢ÈòÖReplaySubjectÁöÑÊó∂ÂÄôÔºå‰Ω†ÂèØ‰ª•Êé•Êî∂Âà∞ËÆ¢ÈòÖ‰ªñ‰πãÂêéÁöÑ‰∫ã‰ª∂Ôºå‰ΩÜ‰πüÂèØ‰ª•Êé•ÂèóËÆ¢ÈòÖ‰ªñ‰πãÂâçÂèëÂá∫ÁöÑ‰∫ã‰ª∂ÔºåÊé•ÂèóÂá†‰∏™‰∫ã‰ª∂ÂèñÂÜ≥‰∏ébufferSizeÁöÑÂ§ßÂ∞è 12345678910let disposeBag = DisposeBag()let subject = ReplaySubject.create(bufferSize: 1) subject.addObserver(&quot;1&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;&quot;)subject.onNext(&quot;&quot;) subject.addObserver(&quot;2&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;Ô∏è&quot;)subject.onNext(&quot;Ô∏è&quot;) 12345678Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 2 Event: next() //ËÆ¢ÈòÖ‰πãÂêéËøòÂèØ‰ª•Êé•Âèó‰∏ÄÊ¨°ÂâçÈù¢ÂèëÂá∫ÁöÑ‰∫ã‰ª∂Subscription: 1 Event: next(Ô∏è)Subscription: 2 Event: next(Ô∏è)Subscription: 1 Event: next(Ô∏è)Subscription: 2 Event: next(Ô∏è) BehaviorSubjectÂΩì‰Ω†ËÆ¢ÈòÖ‰∫ÜBehaviorSubjectÔºå‰Ω†‰ºöÊé•ÂèóÂà∞ËÆ¢ÈòÖ‰πãÂâçÁöÑÊúÄÂêé‰∏Ä‰∏™‰∫ã‰ª∂„ÄÇ 1234567891011121314let disposeBag = DisposeBag()let subject = BehaviorSubject(value: &quot;&quot;) subject.addObserver(&quot;1&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;&quot;)subject.onNext(&quot;&quot;) subject.addObserver(&quot;2&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;Ô∏è&quot;)subject.onNext(&quot;Ô∏è&quot;) subject.addObserver(&quot;3&quot;).addDisposableTo(disposeBag)subject.onNext(&quot;&quot;)subject.onNext(&quot;&quot;) 12345678910111213141516Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 2 Event: next() //ËÆ¢ÈòÖ‰πãÂâçÁöÑÊúÄÂêé‰∏Ä‰∏™‰∫ã‰ª∂Subscription: 1 Event: next(Ô∏è)Subscription: 2 Event: next(Ô∏è)Subscription: 1 Event: next(Ô∏è)Subscription: 2 Event: next(Ô∏è)Subscription: 3 Event: next(Ô∏è) //ËÆ¢ÈòÖ‰πãÂâçÁöÑÊúÄÂêé‰∏Ä‰∏™‰∫ã‰ª∂Subscription: 1 Event: next()Subscription: 3 Event: next()Subscription: 2 Event: next()Subscription: 1 Event: next()Subscription: 3 Event: next()Subscription: 2 Event: next() PublishSubject, ReplaySubjectÂíåBehaviorSubjectÊòØ‰∏ç‰ºöËá™Âä®ÂèëÂá∫completed‰∫ã‰ª∂ÁöÑ„ÄÇ VariableVariableÊòØBehaviorSubject‰∏Ä‰∏™ÂåÖË£ÖÁÆ±ÔºåÂ∞±ÂÉèÊòØ‰∏Ä‰∏™ÁÆ±Â≠ê‰∏ÄÊ†∑Ôºå‰ΩøÁî®ÁöÑÊó∂ÂÄôÈúÄË¶ÅË∞ÉÁî®asObservable()ÊãÜÁÆ±ÔºåÈáåÈù¢ÁöÑvalueÊòØ‰∏Ä‰∏™BehaviorSubjectÔºå‰ªñ‰∏ç‰ºöÂèëÂá∫error‰∫ã‰ª∂Ôºå‰ΩÜÊòØ‰ºöËá™Âä®ÂèëÂá∫completed‰∫ã‰ª∂„ÄÇ 1234567891011let disposeBag = DisposeBag()let variable = Variable(&quot;&quot;) variable.asObservable().addObserver(&quot;1&quot;).addDisposableTo(disposeBag)variable.value = &quot;&quot;variable.value = &quot;&quot; variable.asObservable().addObserver(&quot;2&quot;).addDisposableTo(disposeBag)variable.value = &quot;Ô∏è&quot;variable.value = &quot;Ô∏è&quot; 1234567891011Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 1 Event: next()Subscription: 2 Event: next()Subscription: 1 Event: next(Ô∏è)Subscription: 2 Event: next(Ô∏è)Subscription: 1 Event: next(Ô∏è)Subscription: 2 Event: next(Ô∏è)Subscription: 1 Event: completedSubscription: 2 Event: completed ËÅîÂêàÊìç‰ΩúËÅîÂêàÊìç‰ΩúÂ∞±ÊòØÊääÂ§ö‰∏™ObservableÊµÅÂêàÊàêÂçï‰∏™ObservableÊµÅ startWithÂú®ÂèëÂá∫‰∫ã‰ª∂Ê∂àÊÅØ‰πãÂâçÔºåÂÖàÂèëÂá∫Êüê‰∏™ÁâπÂÆöÁöÑ‰∫ã‰ª∂Ê∂àÊÅØ„ÄÇÊØîÂ¶ÇÂèëÂá∫‰∫ã‰ª∂2 Ôºå3ÁÑ∂ÂêéÊàëstartWith(1)ÔºåÈÇ£‰πàÂ∞±‰ºöÂÖàÂèëÂá∫1ÔºåÁÑ∂Âêé2 Ôºå3. 123456let disposeBag = DisposeBag() Observable.of(&quot;2&quot;, &quot;3&quot;) .startWith(&quot;1&quot;) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) mergeÂêàÂπ∂‰∏§‰∏™ObservableÊµÅÂêàÊàêÂçï‰∏™ObservableÊµÅÔºåÊ†πÊçÆÊó∂Èó¥ËΩ¥ÂèëÂá∫ÂØπÂ∫îÁöÑ‰∫ã‰ª∂ 123456789101112131415161718192021let disposeBag = DisposeBag() let subject1 = PublishSubject()let subject2 = PublishSubject() Observable.of(subject1, subject2) .merge() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) subject1.onNext(&quot;Ô∏è&quot;) subject1.onNext(&quot;Ô∏è&quot;) subject2.onNext(&quot;‚ë†&quot;) subject2.onNext(&quot;‚ë°&quot;) subject1.onNext(&quot;&quot;) subject2.onNext(&quot;‚ë¢&quot;) 12345‚ë†‚ë° ‚ë¢ zipÁªëÂÆöË∂ÖËøáÊúÄÂ§ö‰∏çË∂ÖËøá8‰∏™ÁöÑObservableÊµÅÔºåÁªìÂêàÂú®‰∏ÄËµ∑Â§ÑÁêÜ„ÄÇÊ≥®ÊÑèZipÊòØ‰∏Ä‰∏™‰∫ã‰ª∂ÂØπÂ∫îÂè¶‰∏Ä‰∏™ÊµÅ‰∏Ä‰∏™‰∫ã‰ª∂„ÄÇ 1234567891011121314151617181920let disposeBag = DisposeBag() let stringSubject = PublishSubject()let intSubject = PublishSubject() Observable.zip(stringSubject, intSubject) { stringElement, intElement in &quot;\\(stringElement) \\(intElement)&quot; } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) stringSubject.onNext(&quot;Ô∏è&quot;)stringSubject.onNext(&quot;Ô∏è&quot;) intSubject.onNext(1) intSubject.onNext(2) stringSubject.onNext(&quot;&quot;)intSubject.onNext(3) 1234Ô∏è 1 Â∞ÜstringSubjectÂíåintSubjectÂéãÁº©Âà∞‰∏ÄËµ∑ÂÖ±ÂêåÂ§ÑÁêÜÔ∏è 23 combineLatestÁªëÂÆöË∂ÖËøáÊúÄÂ§ö‰∏çË∂ÖËøá8‰∏™ÁöÑObservableÊµÅÔºåÁªìÂêàÂú®‰∏ÄËµ∑Â§ÑÁêÜ„ÄÇÂíåZip‰∏çÂêåÁöÑÊòØcombineLatestÊòØ‰∏Ä‰∏™ÊµÅÁöÑ‰∫ã‰ª∂ÂØπÂ∫îÂè¶‰∏Ä‰∏™ÊµÅÁöÑÊúÄÊñ∞ÁöÑ‰∫ã‰ª∂Ôºå‰∏§‰∏™‰∫ã‰ª∂ÈÉΩ‰ºöÊòØÊúÄÊñ∞ÁöÑ‰∫ã‰ª∂ÔºåÂèØÂ∞Ü‰∏ãÂõæ‰∏éZipÁöÑÂõæËøõË°åÂØπÊØî„ÄÇ 12345678910111213141516171819let disposeBag = DisposeBag() let stringSubject = PublishSubject()let intSubject = PublishSubject() Observable.combineLatest(stringSubject, intSubject) { stringElement, intElement in &quot;\\(stringElement) \\(intElement)&quot; } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) stringSubject.onNext(&quot;Ô∏è&quot;) stringSubject.onNext(&quot;Ô∏è&quot;)intSubject.onNext(1) intSubject.onNext(2) stringSubject.onNext(&quot;&quot;) 1234Ô∏è 1Ô∏è 22 switchLatestswitchLatestÂèØ‰ª•ÂØπ‰∫ã‰ª∂ÊµÅËøõË°åËΩ¨Êç¢ÔºåÊú¨Êù•ÁõëÂê¨ÁöÑsubject1ÔºåÊàëÂèØ‰ª•ÈÄöËøáÊõ¥ÊîπvariableÈáåÈù¢ÁöÑvalueÊõ¥Êç¢‰∫ã‰ª∂Ê∫ê„ÄÇÂèòÊàêÁõëÂê¨subject2‰∫Ü 1234567891011121314151617181920212223let disposeBag = DisposeBag() let subject1 = BehaviorSubject(value: &quot;‚öΩÔ∏è&quot;)let subject2 = BehaviorSubject(value: &quot;&quot;) let variable = Variable(subject1) variable.asObservable() .switchLatest() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) subject1.onNext(&quot;&quot;)subject1.onNext(&quot;&quot;) variable.value = subject2 subject1.onNext(&quot;‚öæÔ∏è&quot;) subject2.onNext(&quot;&quot;)variable.value = subject1subject2.onNext(‚ÄúXX&quot;)subject1.onNext(‚ÄúXX&quot;) 12345678‚öΩÔ∏è ‚öæÔ∏èXX ÂèòÊç¢Êìç‰ΩúmapÈÄöËøá‰º†ÂÖ•‰∏Ä‰∏™ÂáΩÊï∞Èó≠ÂåÖÊääÂéüÊù•ÁöÑsequenceËΩ¨Âèò‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑsequenceÁöÑÊìç‰Ωú 12345let disposeBag = DisposeBag()Observable.of(1, 2, 3) .map { $0 * $0 } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 12341 ÊØè‰∏Ä‰∏™ÂÖÉÁ¥†Ëá™Â∑±Áõ∏‰πò49 flatMapÂ∞Ü‰∏Ä‰∏™sequenceËΩ¨Êç¢‰∏∫‰∏Ä‰∏™sequencesÔºåÂΩì‰Ω†Êé•Êî∂‰∏Ä‰∏™sequenceÁöÑ‰∫ã‰ª∂Ôºå‰Ω†ËøòÊÉ≥Êé•Êî∂ÂÖ∂‰ªñsequenceÂèëÂá∫ÁöÑ‰∫ã‰ª∂ÁöÑËØùÂèØ‰ª•‰ΩøÁî®flatMapÔºåÂ•π‰ºöÂ∞ÜÊØè‰∏Ä‰∏™sequence‰∫ã‰ª∂ËøõË°åÂ§ÑÁêÜ‰ª•ÂêéÔºåÁÑ∂ÂêéÂÜç‰ª•‰∏Ä‰∏™sequenceÂΩ¢ÂºèÂèëÂá∫‰∫ã‰ª∂„ÄÇËÄå‰∏îflatMapÊúâ‰∏ÄÊ¨°ÊãÜÂåÖÂä®‰ΩúÔºåËØ∑Áúã‰ª£Á†ÅËß£Êûê„ÄÇ 1234567891011121314151617181920212223242526let disposeBag = DisposeBag() struct Player { var score: Variable //ÈáåÈù¢ÊòØ‰∏Ä‰∏™Variable} let = Player(score: Variable(80)) let = Player(score: Variable(90))let = Player(score: Variable(550)) let player = Variable() //Â∞ÜplayerËΩ¨‰∏∫Variable player.asObservable() //ÊãÜÁÆ±ËΩ¨ÊàêÂèØË¢´ÁõëÂê¨ÁöÑsequence .flatMap { $0.score.asObservable() } // flatMapÊúâ‰∏ÄÊ¨°ÊãÜÂåÖÂä®‰ΩúÔºå$0Êú¨Êù•Â∫îËØ•ÊòØ‰∏Ä‰∏™BehaviorSubjectÁ±ªÂûãÔºå‰ΩÜÊòØÁõ¥Êé•ËÆøÈóÆ‰∫Üscore„ÄÇÊâÄ‰ª•ÁåúÊÉ≥flatMapÂØπbehaviorSubjectËøõË°å‰∫ÜonNextÊãÜÂåÖÂèñÊï∞ÊçÆ .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) .score.value = 85 player.value = //Êõ¥Êç¢‰∫ÜvalueÔºåÁõ∏ÂΩì‰∫éÂèàÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™sequenceÔºå‰∏§‰∏™sequenceÈÉΩÂèØ‰ª•Êé•Êî∂ .score.value = 95.score.value = 222player.value = .score.value = 100 1234567880859095222550100 flatMapLatestflatMapLatestÂè™‰ºöÊé•Êî∂ÊúÄÊñ∞ÁöÑvalue‰∫ã‰ª∂ÔºåÂ∞Ü‰∏ä‰æãÊîπ‰∏∫flatMapLatest„ÄÇÁªìÊûú‰∏∫ 12345808590550 scanscanÂ∞±ÊòØÁªô‰∏Ä‰∏™ÂàùÂßãÂåñÁöÑÊï∞ÔºåÁÑ∂Âêé‰∏çÊñ≠ÁöÑÊãøÂâç‰∏Ä‰∏™ÁªìÊûúÂíåÊúÄÊñ∞ÁöÑÂÄºËøõË°åÂ§ÑÁêÜÊìç‰Ωú„ÄÇ 123456789let disposeBag = DisposeBag() Observable.of(10, 100, 1000) .scan(1) { aggregateValue, newValue in aggregateValue + newValue } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 1234111111111 ËøáÊª§ÂíåÁ∫¶ÊùüfilterfilterÂæàÂ•ΩÁêÜËß£ÔºåÂ∞±ÊòØËøáÊª§ÊéâÊüê‰∫õ‰∏çÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑ‰∫ã‰ª∂ 123456789101112let disposeBag = DisposeBag() Observable.of( &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .filter { $0 == &quot;&quot; } .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) distinctUntilChangeddistinctUntilChangedÂ∞±ÊòØÂΩì‰∏ã‰∏Ä‰∏™‰∫ã‰ª∂‰∏éÂâç‰∏Ä‰∏™‰∫ã‰ª∂ÊòØ‰∏çÂêå‰∫ã‰ª∂ÁöÑ‰∫ã‰ª∂ÊâçËøõË°åÂ§ÑÁêÜÊìç‰Ωú 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .distinctUntilChanged() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) elementAtÂè™Â§ÑÁêÜÂú®ÊåáÂÆö‰ΩçÁΩÆÁöÑ‰∫ã‰ª∂ 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .elementAt(3) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) singleÊâæÂá∫Âú®sequenceÂè™ÂèëÂá∫‰∏ÄÊ¨°ÁöÑ‰∫ã‰ª∂ÔºåÂ¶ÇÊûúË∂ÖËøá‰∏Ä‰∏™Â∞±‰ºöÂèëÂá∫errorÈîôËØØ 12345Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .single() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 123 //Âçï‰∏Ä‰ø°Âè∑Ë∂ÖËøá‰∫Ü‰∏Ä‰∏™Received unhandled error: /var/folders/hz/v15ld5mj0nqf83d21j13y0tw0000gn/T/./lldb/7229/playground107.swift:69:__lldb_expr_107 -&gt; Sequence contains more than one element. 12345Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .single { $0 == &quot;&quot; } //ÈùíËõôÂè™Êúâ‰∏Ä‰∏™Ôºåcompleted .subscribe { print($0) } .addDisposableTo(disposeBag) 12345Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .single { $0 == &quot;&quot; } //ÂÖîÂ≠êÊúâ‰∏§‰∏™Ôºå‰ºöÂèëÂá∫error .subscribe { print($0) } .addDisposableTo(disposeBag) 12345Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .single { $0 == &quot;&quot; } //Ê≤°ÊúâËìùËâ≤ÁêÉÔºå‰ºöÂèëÂá∫error .subscribe { print($0) } .addDisposableTo(disposeBag) takeÂè™Â§ÑÁêÜÂâçÂá†‰∏™‰∫ã‰ª∂‰ø°Âè∑, 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .take(3) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) takeLastÂè™Â§ÑÁêÜÂêéÂá†‰∏™‰∫ã‰ª∂‰ø°Âè∑ 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .takeLast(3) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) takeWhileÂΩìÊù°‰ª∂Êª°Ë∂≥ÁöÑÊó∂ÂÄôËøõË°åÂ§ÑÁêÜ 1234let disposeBag = DisposeBag() Observable.of(1, 2, 3, 4, 5, 6) .takeWhile { $0 takeUntilÊé•Êî∂‰∫ã‰ª∂Ê∂àÊÅØÔºåÁõ¥Âà∞Âè¶‰∏Ä‰∏™sequenceÂèëÂá∫‰∫ã‰ª∂Ê∂àÊÅØÁöÑÊó∂ÂÄô„ÄÇ 1234567891011121314151617181920let disposeBag = DisposeBag() let sourceSequence = PublishSubject()let referenceSequence = PublishSubject() sourceSequence .takeUntil(referenceSequence) .subscribe { print($0) } .addDisposableTo(disposeBag) sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;) referenceSequence.onNext(&quot;&quot;) //ÂÅúÊ≠¢Êé•Êî∂Ê∂àÊÅØ sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;) 12345next()next()next()completed skipÂèñÊ∂àÂâçÂá†‰∏™‰∫ã‰ª∂ 1234567let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .skip(2) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) skipWhileÊª°Ë∂≥Êù°‰ª∂ÁöÑ‰∫ã‰ª∂Ê∂àÊÅØÈÉΩÂèñÊ∂à 12345let disposeBag = DisposeBag() Observable.of(1, 2, 3, 4, 5, 6) .skipWhile { $0 skipWhileWithIndexÊª°Ë∂≥Êù°‰ª∂ÁöÑÈÉΩË¢´ÂèñÊ∂àÔºå‰º†ÂÖ•ÁöÑÈó≠ÂåÖÂêåskipWhileÊúâÁÇπÂå∫Âà´ËÄåÂ∑≤ 12345let disposeBag = DisposeBag() Observable.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) .skipWhileWithIndex { element, index in index skipUntilÁõ¥Âà∞Êüê‰∏™sequenceÂèëÂá∫‰∫Ü‰∫ã‰ª∂Ê∂àÊÅØÔºåÊâçÂºÄÂßãÊé•Êî∂ÂΩìÂâçsequenceÂèëÂá∫ÁöÑ‰∫ã‰ª∂Ê∂àÊÅØ 123456789101112131415161718192021let disposeBag = DisposeBag() let sourceSequence = PublishSubject()let referenceSequence = PublishSubject() sourceSequence .skipUntil(referenceSequence) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;) referenceSequence.onNext(&quot;&quot;) sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)sourceSequence.onNext(&quot;&quot;)} Êï∞Â≠¶Êìç‰ΩútoArrayÂ∞ÜsequenceËΩ¨Êç¢Êàê‰∏Ä‰∏™arrayÔºåÂπ∂ËΩ¨Êç¢ÊàêÂçï‰∏Ä‰∫ã‰ª∂‰ø°Âè∑ÔºåÁÑ∂ÂêéÁªìÊùü 1234567let disposeBag = DisposeBag() Observable.range(start: 1, count: 10) .toArray() .subscribe { print($0) } .addDisposableTo(disposeBag) 123next([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])completed reduceÁî®‰∏Ä‰∏™ÂàùÂßãÂÄºÔºåÂØπ‰∫ã‰ª∂Êï∞ÊçÆËøõË°åÁ¥ØËÆ°Êìç‰Ωú„ÄÇreduceÊé•Âèó‰∏Ä‰∏™ÂàùÂßãÂÄºÔºåÂíå‰∏Ä‰∏™Êìç‰ΩúÁ¨¶Âè∑ 1234567let disposeBag = DisposeBag() Observable.of(10, 100, 1000) .reduce(1, accumulator: +) .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) 1231111concat concat‰ºöÊääÂ§ö‰∏™sequenceÂíåÂπ∂‰∏∫‰∏Ä‰∏™sequenceÔºåÂπ∂‰∏îÂΩìÂâçÈù¢‰∏Ä‰∏™sequenceÂèëÂá∫‰∫Ücompleted‰∫ã‰ª∂ÔºåÊâç‰ºöÂºÄÂßã‰∏ã‰∏Ä‰∏™sequenceÁöÑ‰∫ã‰ª∂„ÄÇÂú®Á¨¨‰∏ÄsequenceÂÆåÊàê‰πãÂâçÔºåÁ¨¨‰∫å‰∏™sequenceÂèëÂá∫ÁöÑ‰∫ã‰ª∂ÈÉΩ‰ºöË¢´ÂøΩÁï•Ôºå‰ΩÜ‰ºöÊé•Êî∂‰∏ÄÂÆåÊàê‰πãÂâçÁöÑ‰∫åÂèëÂá∫ÁöÑÊúÄÂêé‰∏Ä‰∏™‰∫ã‰ª∂„ÄÇ‰∏çÂ•ΩËß£ÈáäÔºåÁúã‰æãÂ≠êËØ¥Êòé 1234567891011121314151617181920212223242526let disposeBag = DisposeBag() let subject1 = BehaviorSubject(value: &quot;&quot;)let subject2 = BehaviorSubject(value: &quot;&quot;) let variable = Variable(subject1) variable.asObservable() .concat() .subscribe { print($0) } .addDisposableTo(disposeBag) subject1.onNext(&quot;&quot;)subject1.onNext(&quot;&quot;) variable.value = subject2 subject2.onNext(&quot;&quot;) //1ÂÆåÊàêÂâçÔºå‰ºöË¢´ÂøΩÁï•subject2.onNext(&quot;teng&quot;) //1ÂÆåÊàêÂâçÔºå‰ºöË¢´ÂøΩÁï•subject2.onNext(&quot;fei&quot;) //1ÂÆåÊàêÂâçÁöÑÊúÄÂêé‰∏Ä‰∏™Ôºå‰ºöË¢´Êé•Êî∂ subject1.onCompleted() subject2.onNext(&quot;&quot;) 123456next()next()next()next(fei)next() ËøûÊé•ÊÄßÊìç‰ΩúConnectable ObservableÊúâËÆ¢ÈòÖÊó∂‰∏çÂºÄÂßãÂèëÂ∞Ñ‰∫ã‰ª∂Ê∂àÊÅØÔºåËÄåÊòØ‰ªÖÂΩìË∞ÉÁî®ÂÆÉ‰ª¨ÁöÑconnectÔºàÔºâÊñπÊ≥ïÊó∂„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•Á≠âÂæÖÊâÄÊúâÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑËÆ¢ÈòÖËÄÖÈÉΩÂ∑≤ÁªèËÆ¢ÈòÖ‰∫Ü‰ª•ÂêéÔºåÂÜçÂºÄÂßãÂèëÂá∫‰∫ã‰ª∂Ê∂àÊÅØÔºåËøôÊ†∑ËÉΩ‰øùËØÅÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÊâÄÊúâËÆ¢ÈòÖËÄÖÈÉΩËÉΩÊé•Êî∂Âà∞‰∫ã‰ª∂Ê∂àÊÅØ„ÄÇÂÖ∂ÂÆû‰πüÂ∞±ÊòØÁ≠âÂ§ßÂÆ∂ÈÉΩÂ∞±‰Ωç‰ª•ÂêéÔºåÂºÄÂßãÂèëÂá∫Ê∂àÊÅØ„ÄÇ publishÂ∞Ü‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑsequenceËΩ¨Êç¢Êàê‰∏Ä‰∏™connectable sequence 123456789101112131415161718let intSequence = Observable.interval(1, scheduler: MainScheduler.instance) .publish() _ = intSequence .subscribe(onNext: { print(&quot;Subscription 1:, Event: \\($0)&quot;) }) delay(2) { _ = intSequence.connect() } //Áõ∏ÂΩì‰∫éÊää‰∫ã‰ª∂Ê∂àÊÅØÊé®Ëøü‰∫Ü‰∏§Áßí delay(4) { _ = intSequence .subscribe(onNext: { print(&quot;Subscription 2:, Event: \\($0)&quot;) })} delay(6) { _ = intSequence .subscribe(onNext: { print(&quot;Subscription 3:, Event: \\($0)&quot;) })} 1234567891011Subscription 1:, Event: 0Subscription 1:, Event: 1Subscription 2:, Event: 1Subscription 1:, Event: 2Subscription 2:, Event: 2Subscription 1:, Event: 3Subscription 3:, Event: 3Subscription 2:, Event: 3Subscription 1:, Event: 4Subscription 3:, Event: 4 replayÂ∞Ü‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑsequenceËΩ¨Êç¢Êàê‰∏Ä‰∏™connectable sequenceÔºåÁÑ∂ÂêéÂíåreplaySubjectÁõ∏‰ººÔºåËÉΩÊé•Êî∂Âà∞ËÆ¢ÈòÖ‰πãÂâçÁöÑ‰∫ã‰ª∂Ê∂àÊÅØ„ÄÇ 123456789101112131415161718let intSequence = Observable.interval(1, scheduler: MainScheduler.instance) .replay(5) //Êé•Êî∂Âà∞ËÆ¢ÈòÖ‰πãÂâçÁöÑ5Êù°‰∫ã‰ª∂Ê∂àÊÅØ _ = intSequence .subscribe(onNext: { print(&quot;Subscription 1:, Event: \\($0)&quot;) }) delay(2) { _ = intSequence.connect() } delay(4) { _ = intSequence .subscribe(onNext: { print(&quot;Subscription 2:, Event: \\($0)&quot;) })} delay(8) { _ = intSequence .subscribe(onNext: { print(&quot;Subscription 3:, Event: \\($0)&quot;) })} multicastÂ∞Ü‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑsequenceËΩ¨Êç¢Êàê‰∏Ä‰∏™connectable sequenceÔºåÂπ∂‰∏îÈÄöËøáÁâπÊÄßÁöÑsubjectÂèëÈÄÅÂá∫ÂéªÔºåÊØîÂ¶ÇPublishSubjectÔºåÊàñËÄÖreplaySubjectÔºåbehaviorSubjectÁ≠â„ÄÇ‰∏çÂêåÁöÑSubject‰ºöÊúâ‰∏çÂêåÁöÑÁªìÊûú„ÄÇ 123456789101112131415161718let subject = PublishSubject() _ = subject .subscribe(onNext: { print(&quot;Subject: \\($0)&quot;) }) let intSequence = Observable.interval(1, scheduler: MainScheduler.instance) .multicast(subject) _ = intSequence .subscribe(onNext: { print(&quot;\\tSubscription 1:, Event: \\($0)&quot;) }) delay(2) { _ = intSequence.connect() } delay(4) { _ = intSequence .subscribe(onNext: { print(&quot;\\tSubscription 2:, Event: \\($0)&quot;) })} ÈîôËØØÂ§ÑÁêÜcatchErrorJustReturnÈÅáÂà∞error‰∫ã‰ª∂ÁöÑÊó∂ÂÄôÔºåÂ∞±return‰∏Ä‰∏™ÂÄºÔºåÁÑ∂ÂêéÁªìÊùü 123456789101112131415let disposeBag = DisposeBag() let sequenceThatFails = PublishSubject() sequenceThatFails .catchErrorJustReturn(&quot;&quot;) .subscribe { print($0) } .addDisposableTo(disposeBag) sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onError(TestError.test) 1234567next()next()next()next()next()completed catchErrorÊçïËé∑errorËøõË°åÂ§ÑÁêÜÔºåÂèØ‰ª•ËøîÂõûÂè¶‰∏Ä‰∏™sequenceËøõË°åËÆ¢ÈòÖ 123456789101112131415161718192021let disposeBag = DisposeBag() let sequenceThatFails = PublishSubject()let recoverySequence = PublishSubject() sequenceThatFails .catchError { print(&quot;Error:&quot;, $0) return recoverySequence } .subscribe { print($0) } .addDisposableTo(disposeBag) sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onNext(&quot;&quot;)sequenceThatFails.onError(TestError.test) recoverySequence.onNext(&quot;&quot;) 1234567next()next()next()next()Error: testnext() retryÈÅáËßÅerror‰∫ã‰ª∂ÂèØ‰ª•ËøõË°åÈáçËØïÔºåÊØîÂ¶ÇÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•ÔºåÂèØ‰ª•ËøõË°åÈáçÊñ∞ËøûÊé• 123456789101112131415161718192021222324252627let disposeBag = DisposeBag()var count = 1 let sequenceThatErrors = Observable.create { observer in observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) if count == 1 { observer.onError(TestError.test) print(&quot;Error encountered&quot;) count += 1 } observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) observer.onNext(&quot;&quot;) observer.onCompleted() return Disposables.create()} sequenceThatErrors .retry(3) //‰∏ç‰º†ÂÖ•Êï∞Â≠óÁöÑËØùÔºåÂè™‰ºöÈáçËØï‰∏ÄÊ¨° .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) debugdebugÊâìÂç∞ÊâÄÊúâÁöÑËÆ¢ÈòÖ, ‰∫ã‰ª∂Âíådisposals 123456sequenceThatErrors .retry(3) .debug() .subscribe(onNext: { print($0) }) .addDisposableTo(disposeBag) RxSwift.Resources.totalÊü•ÁúãRxSwiftÊâÄÊúâËµÑÊ∫êÁöÑÂç†Áî® 12print(RxSwift.Resources.total) ÂïäÔºåÊñáÁ´†Áªà‰∫éÁªìÊùüÔºåËøôÁØáÊñáÁ´†ÊØîËæÉÈïøÔºåÂü∫Êú¨‰∏äÊ∂µÁõñ‰∫ÜÂÆòÊñπÊñáÊ°£ÊâÄÊúâÁöÑÊ¶ÇÂøµÔºåÂ∏åÊúõËÉΩÂú®‰Ω†Â≠¶‰π†RxSwiftÁöÑÊó∂ÂÄôËÉΩÊúâ‰∏Ä‰∫õÂèÇËÄÉ‰ª∑ÂÄºÂêßÔºÅÔºÅÔºÅ Á¨îËÆ∞Êï¥ÁêÜÔºöEdisonËÅîÁ≥ªÊñπÂºèÔºöQQÔºö277593 ÔºàÁ¨îËÆ∞ÊÑèËßÅÂª∫ËÆÆÂèØÂä†Ê≠§QÔºå‰∏ì‰∫∫Êõ¥Êñ∞Ê≠§Á¨îËÆ∞ÔºâÔºõ","link":"/ÁºñÁ®ã/Ô£ø/RxSwift/"},{"title":"Êúâ‰∏ÄÁßç Block Âè´ CallbackÔºåÊúâ‰∏ÄÁßç Callback Âè´ CompletionHandler","text":"iOS10Êé®ÈÄÅÈÉ®ÂàÜÁöÑAPIÔºåÂ§ßÈáè‰ΩøÁî®‰∫Ü CompletionHandler ËøôÁßçÂëΩÂêçÊñπÂºèÔºåÈÇ£‰πàÊú¨ÊñáÊàë‰ª¨Â∞ÜÂØπÊØî‰∏ãËøôÁßç Block ÁöÑÁâπÊÆäÊÄßÔºå‰ª•‰æøÊõ¥Â•ΩÁöÑÁêÜËß£ÂíåÂú®Ëá™Â∑±ÁöÑÈ°πÁõÆ‰∏≠ÂÆûË∑µ CompletionHandler Ê†∑ÂºèÁöÑ Blcok„ÄÇ Êàë‰ª¨‰Ωú‰∏∫ÂºÄÂèëËÄÖÂéªÈõÜÊàê‰∏Ä‰∏™ Lib Ôºà‰πüÂèØ‰ª•Âè´ËΩÆÂ≠ê„ÄÅSDK„ÄÅ‰∏ãÊñáÁªü‰∏ÄÂè´ LibÔºâÊó∂ÔºåÊàë‰ª¨‰ºöÂèëÁé∞Êàë‰ª¨ÈÅáÂà∞ÁöÑ BlockÔºå ÊåâÁÖßÂäüËÉΩÁöÑËßíÂ∫¶ÂàíÂàÜÔºåÂÖ∂ÂÆûÂèØ‰ª•ÂàÜ‰∏∫ËøôÂá†ÁßçÔºö Lib ÈÄöÁü•ÂºÄÂèëËÄÖÔºåLibÊìç‰ΩúÂ∑≤ÁªèÂÆåÊàê„ÄÇ‰∏ÄËà¨ÂëΩÂêç‰∏∫ Callback ÂºÄÂèëËÄÖÈÄöÁü• LibÔºåÂºÄÂèëËÄÖÁöÑÊìç‰ΩúÂ∑≤ÁªèÂÆåÊàê„ÄÇ‰∏ÄËà¨ÂèØ‰ª•ÂëΩÂêç‰∏∫ CompletionHandler„ÄÇ Ëøô‰∏§Â§ÑÁöÑÂå∫Âà´Ôºö ÂâçËÄÖÊòØ ‚ÄúBlock ÁöÑÊâßË°å‚ÄùÔºåÂêéËÄÖÊòØ ‚ÄúBlock ÁöÑÂ°´ÂÖÖ‚Äù„ÄÇ Callback vs CompletionHandler ÂëΩÂêç‰∏éÂäüËÉΩÁöÑÂ∑ÆÂà´ÔºåApple ‰πüÊ≤°ÊúâÊòéÁ°ÆÁöÑÁºñÁ†ÅËßÑËåÉÊåáÂá∫ËøáÔºåÂè™‰∏çËøáÂ¶ÇÊûúÊåâÁÖß‚ÄúÊâßË°å‰∏éÂ°´ÂÖÖ‚ÄùÁöÑÂäüËÉΩÂàíÂàÜÁöÑËØùÔºåcallback‰∏é completionHandler ÁöÑÂëΩÂêçÂèØ‰ª•Âå∫ÂàÜÂºÄÊù•ÂØπÂæÖ„ÄÇÂêåÊó∂‰πüÊñπ‰æøË∞ÉÁî®ËÄÖÁêÜËß£ block ÁöÑÂäüËÉΩ„ÄÇ‰ΩÜÊÄª‰ΩìÊù•ËØ¥ÔºåApple ÂÆòÊñπÁöÑÂëΩÂêç‰∏≠Ôºå‚ÄúBlock Â°´ÂÖÖ‚ÄúËøô‰∏™ÂäüËÉΩ‰∏ÄËà¨ÈÉΩ‰ºöÂëΩÂêç‰∏∫ ‚ÄúcompletionHandler‚ÄùÔºå‚ÄúBlock ÊâßË°å‚ÄùËøô‰∏™ÂäüËÉΩÂ§ßÂ§öÂëΩÂêç‰∏∫‰∫Ü‚Äúcallback‚Äù Ôºå‰πüÊúâÂ∞ëÈÉ®ÂàÜÂëΩÂêç‰∏∫‰∫Ü ‚ÄúcompletionHandler‚Äù„ÄÇ ÊØîÂ¶ÇÔºö NSURLSession ‰∏≠Ôºå‰∏ãÈù¢ÁöÑÂáΩÊï∞Â∞Ü ‚Äúcallback‚Äù ÂëΩÂêç‰∏∫‰∫Ü ‚ÄúcompletionHandler‚ÄùÔºö 1- (NSURLSessionDataTask *)dataTaskWithURL:(NSURL *)url completionHandler:(void (^)(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error))completionHandler; Êàë‰ª¨Â∏∏Â∏∏ËßÅÂà∞ CompletionHandler Ë¢´Áî®Âà∞‰∫ÜÁ¨¨‰∏ÄÁßçÂú∫ÊôØÔºåËÄåÁ¨¨‰∏ÄÁßçÂú∫ÊôØ‚ÄúBlock ÊâßË°å‚ÄùÂëΩÂêç‰∏∫ Callback ÂàôÊõ¥ÂêàÈÄÇ„ÄÇ ‰∏çÊòØÊâÄÊúâ Block ÈÉΩÈÄÇÂêàÂè´ÂÅö CompletionHandler ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåCompletionHandler ÁöÑËÆæËÆ°ÂæÄÂæÄËÄÉËôëÂà∞Â§öÁ∫øÁ®ãÊìç‰ΩúÔºå‰∫éÊòØÔºå‰Ω†Â∞±ÂÆåÂÖ®ÂèØ‰ª•ÂºÇÊ≠•Êìç‰ΩúÔºåÁÑ∂ÂêéÂú®Á∫øÁ®ãÁªìÊùüÊó∂ÊâßË°åËØ• CompletionHandlerÔºå‰∏ãÊñáÁöÑ‰æãÂ≠ê‰∏≠‰ºöËÆ≤Ëø∞‰∏ã CompletionHandler ÊñπÂºèÂú®Â§öÁ∫øÁ®ãÂú∫ÊôØ‰∏ãÁöÑ‰∏Ä‰∫õ‰ºòÂäø„ÄÇ CompletionHandler + Delegate ÁªÑÂêàÂú® iOS10 ‰∏≠Êñ∞Â¢ûÂä†ÁöÑ UserNotificaitons ‰∏≠Â§ßÈáè‰ΩøÁî®‰∫ÜËøôÁßç BlockÔºåÊØîÂ¶ÇÔºö 123- (void)userNotificationCenter:(UNUserNotificationCenter *)center didReceiveNotificationResponse:(UNNotificationResponse *)response withCompletionHandler:(void (^)(void))completionHandler; ÊñáÊ°£ ÂØπ completionHandler ÁöÑÊ≥®ÈáäÊòØËøôÊ†∑ÁöÑÔºö 1The block to execute when you have finished processing the user‚Äôs response. You must execute this block from your method and should call it as quickly as possible. The block has no return value or parameters. ÂêåÊ†∑Âú®ËøôÈáå‰πüÊúâÂ∫îÁî®Ôºö 123- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)taskdidReceiveChallenge:(NSURLAuthenticationChallenge *)challengecompletionHandler:(void (^)(NSURLSessionAuthChallengeDisposition disposition, NSURLCredential * __nullable credential))completionHandler; ËøòÊúâÂè¶Â§ñ‰∏Ä‰∏™‰πüÈùûÂ∏∏ÊôÆÈÅçÁöÑ‰æãÂ≠êÔºàDelegate ÊñπÂºè‰ΩøÁî®URLSession Êó∂ÂÄôÂøÖ‰∏çÂèØÂ∞ëÁöÑ 4‰∏™‰ª£ÁêÜÂáΩÊï∞‰πã‰∏Ä Ôºâ 123- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition disposition))completionHandler; Âú®‰ª£ÁêÜÊñπÊ≥ïÂÆûÁé∞‰ª£Á†ÅÈáåÈù¢ÔºåËã•ÊòØ‰∏çÊâßË°å completionHandler(NSURLSessionResponseAllow) ËØùÔºåhttpËØ∑Ê±ÇÂ∞±ÁªàÊ≠¢‰∫Ü„ÄÇ CompletionHandler + Block ÁªÑÂêàÂáΩÊï∞‰∏≠Â∞ÜÂáΩÊï∞‰Ωú‰∏∫ÂèÇÊï∞ÊàñËÄÖËøîÂõûÂÄºÔºåÂ∞±Âè´ÂÅöÈ´òÈò∂ÂáΩÊï∞„ÄÇ ÊåâÁÖßËøôÁßçÂÆö‰πâÔºåBlock ‰∏≠Â∞Ü Block ‰Ωú‰∏∫ÂèÇÊï∞ÔºåËøô‰πüÂ∞±ÊòØÈ´òÈò∂ÂáΩÊï∞„ÄÇ ÁªìÂêàÂÆûÈôÖÁöÑÂ∫îÁî®Âú∫ÊôØÊù•Áúã‰∏Ä‰∏™‰æãÂ≠êÔºö Â¶ÇÊûúÊúâËøôÊ†∑‰∏Ä‰∏™ÈúÄÊ±ÇÔºö ÊãøÊàë‰πãÂâçÁöÑ‰∏Ä‰∏™ IM È°πÁõÆ ChatKit-OC ÔºàÂºÄÊ∫êÁöÑÔºå‰∏ãÈù¢ÁÆÄÁß∞ ChatKitÔºâ‰∏∫‰æãÔºåÂΩì‰Ω†ÁöÑÂ∫îÁî®ÊÉ≥Ë¶ÅÈõÜÊàê‰∏Ä‰∏™ IM ÊúçÂä°Êó∂ÔºåÂèØËÉΩËøôÊó∂ÂÄôÔºå‰Ω†ÁöÑ APP Â∑≤Áªè‰∏äÊû∂‰∫ÜÔºåÂ∑≤ÁªèÊúâËá™Â∑±ÁöÑÊ≥®ÂÜå„ÄÅÁôªÂΩïÁ≠âÊµÅÁ®ã‰∫Ü„ÄÇÁî® ChatKit ËøõË°åËÅäÂ§©ÂæàÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÁªô ChatKit ‰∏Ä‰∏™ id Â∞±Â§ü‰∫Ü„ÄÇËÅäÂ§©ÊòØÊ≠£Â∏∏‰∫ÜÔºå‰ΩÜÊòØÂèåÊñπÂè™ËÉΩÁúãÂà∞‰∏Ä‰∏™idÔºåËøôÊ†∑‰ΩìÈ™åÂæà‰∏çÂ•Ω„ÄÇ‰ΩÜÊòØÂ¶Ç‰ΩïÂ±ïÁ§∫Â§¥ÂÉè„ÄÅÊòµÁß∞Âë¢Ôºü‰∫éÊòØÂ∞±ËÆæËÆ°‰∫ÜËøôÊ†∑‰∏Ä‰∏™Êé•Âè£Ôºå-setFetchProfilesBlock: „ÄÇ ËøôÊòØ‰∏äÂ±ÇÔºàAPPÔºâÊèê‰æõÁî®Êà∑‰ø°ÊÅØÁöÑ BlockÔºåÁî±‰∫é ChatKit Âπ∂‰∏çÂÖ≥ÂøÉ‰∏öÂä°ÈÄªËæë‰ø°ÊÅØÔºåÊØîÂ¶ÇÁî®Êà∑ÊòµÁß∞ÔºåÁî®Êà∑Â§¥ÂÉèÁ≠â„ÄÇÁî®Êà∑ÂèØ‰ª•ÈÄöËøá ChatKit Âçï‰æãÂêë ChatKit Ê≥®ÂÖ•‰∏Ä‰∏™Áî®Êà∑‰ø°ÊÅØÂÜÖÂÆπÊèê‰æõ BlockÔºåÈÄöËøáËøô‰∏™Áî®Êà∑‰ø°ÊÅØÊèê‰æõ BlockÔºåChatKit ÊâçËÉΩÂ§üÊ≠£Á°ÆÁöÑËøõË°å‰∏öÂä°ÈÄªËæëÊï∞ÊçÆÁöÑÁªòÂà∂„ÄÇ Á§∫ÊÑèÂõæÂ¶Ç‰∏ãÔºö ÂÖ∑‰ΩìÂÆûÁé∞Â¶Ç‰∏ãÔºö ÊñπÊ≥ïÂÆö‰πâÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021/*!* @brief The block to execute with the users&apos; information for the userIds. Always execute this block at some point when fetching profiles completes on main thread. Specify users&apos; information how you want ChatKit to show.* @attention If you fetch users fails, you should reture nil, meanwhile, give the error reason.*/typedef void(^LCCKFetchProfilesCompletionHandler)(NSArray&lt;id&lt;LCCKUserDelegate&gt;&gt; *users, NSError *error);/*!* @brief When LeanCloudChatKit wants to fetch profiles, this block will be invoked.* @param userIds User ids* @param completionHandler The block to execute with the users&apos; information for the userIds. Always execute this block at some point during your implementation of this method on main thread. Specify users&apos; information how you want ChatKit to show.*/typedef void(^LCCKFetchProfilesBlock)(NSArray&lt;NSString *&gt; *userIds, LCCKFetchProfilesCompletionHandler completionHandler);@property (nonatomic, copy) LCCKFetchProfilesBlock fetchProfilesBlock;/*!* @brief Add the ablitity to fetch profiles.* @attention You must get peer information by peer id with a synchronous implementation.* If implemeted, this block will be invoked automatically by LeanCloudChatKit for fetching peer profile.*/- (void)setFetchProfilesBlock:(LCCKFetchProfilesBlock)fetchProfilesBlock; Áî®Ê≥ïÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#warning Ê≥®ÊÑèÔºösetFetchProfilesBlock ÊñπÊ≥ïÂøÖÈ°ªÂÆûÁé∞ÔºåÂ¶ÇÊûú‰∏çÂÆûÁé∞ÔºåChatKitÂ∞ÜÊó†Ê≥ïÊòæÁ§∫Áî®Êà∑Â§¥ÂÉè„ÄÅÁî®Êà∑ÊòµÁß∞„ÄÇ‰ª•‰∏ãÊñπÊ≥ïÂæ™ÁéØÊ®°Êãü‰∫ÜÈÄöËøá userIds ÂêåÊ≠•Êü•ËØ¢ users ‰ø°ÊÅØÁöÑËøáÁ®ãÔºåËøôÈáåÈúÄË¶ÅÊõøÊç¢‰∏∫ App ÁöÑ API ÂêåÊ≠•Êü•ËØ¢ [[LCChatKit sharedInstance] setFetchProfilesBlock:^(NSArray&lt;NSString *&gt; *userIds, LCCKFetchProfilesCompletionHandler completionHandler) { if (userIds.count == 0) { NSInteger code = 0; NSString *errorReasonText = @&quot;User ids is nil&quot;; NSDictionary *errorInfo = @{ @&quot;code&quot;:@(code), NSLocalizedDescriptionKey : errorReasonText, }; NSError *error = [NSError errorWithDomain:NSStringFromClass([self class]) code:code userInfo:errorInfo]; !completionHandler ?: completionHandler(nil, error); return; } NSMutableArray *users = [NSMutableArray arrayWithCapacity:userIds.count];#warning Ê≥®ÊÑèÔºö‰ª•‰∏ãÊñπÊ≥ïÂæ™ÁéØÊ®°Êãü‰∫ÜÈÄöËøá userIds ÂêåÊ≠•Êü•ËØ¢ users ‰ø°ÊÅØÁöÑËøáÁ®ãÔºåËøôÈáåÈúÄË¶ÅÊõøÊç¢‰∏∫ App ÁöÑ API ÂêåÊ≠•Êü•ËØ¢ [userIds enumerateObjectsUsingBlock:^(NSString *_Nonnull clientId, NSUInteger idx, BOOL *_Nonnull stop) { NSPredicate *predicate = [NSPredicate predicateWithFormat:@&quot;peerId like %@&quot;, clientId]; //ËøôÈáåÁöÑLCCKContactProfilesÔºåLCCKProfileKeyPeerIdÈÉΩ‰∏∫‰∫ãÂÖàÁöÑÂÆèÂÆö‰πâÔºå NSArray *searchedUsers = [LCCKContactProfiles filteredArrayUsingPredicate:predicate]; if (searchedUsers.count &gt; 0) { NSDictionary *user = searchedUsers[0]; NSURL *avatarURL = [NSURL URLWithString:user[LCCKProfileKeyAvatarURL]]; LCCKUser *user_ = [LCCKUser userWithUserId:user[LCCKProfileKeyPeerId] name:user[LCCKProfileKeyName] avatarURL:avatarURL clientId:clientId]; [users addObject:user_]; } else { //Ê≥®ÊÑèÔºöÂ¶ÇÊûúÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•ÔºåËØ∑Ëá≥Â∞ëÊèê‰æõ ClientIdÔºÅ LCCKUser *user_ = [LCCKUser userWithClientId:clientId]; [users addObject:user_]; } }]; // Ê®°ÊãüÁΩëÁªúÂª∂Êó∂Ôºå3Áßí // sleep(3); #warning ÈáçË¶ÅÔºöcompletionHandler Ëøô‰∏™ Bock ÂøÖÈ°ªÊâßË°åÔºåÈúÄË¶ÅÂú®‰Ω†**Ëé∑ÂèñÂà∞Áî®Êà∑‰ø°ÊÅØÁªìÊùü**ÂêéÔºåÂ∞Ü‰ø°ÊÅØ‰º†ÁªôËØ•BlockÔºÅ !completionHandler ?: completionHandler([users copy], nil); }]; ÂØπ‰∫é‰ª•‰∏ä Fetch ÊñπÊ≥ïÁöÑËøôÁßçÂ∫îÁî®Âú∫ÊôØÔºåÂÖ∂ÂÆûÁî®ÊñπÊ≥ïÁöÑËøîÂõûÂÄº‰πüÂèØ‰ª•ÂÆûÁé∞Ôºå‰ΩÜÊòØ‰∏é CompletionHandler Áõ∏ÊØîÔºåÊó†Ê≥ïËá™Áî±ÂàáÊç¢Á∫øÁ®ãÊòØ‰∏™ÂºäÁ´Ø„ÄÇ Posted by ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÂéüÂàõÊñáÁ´†ÔºåÁâàÊùÉÂ£∞ÊòéÔºöËá™Áî±ËΩ¨ËΩΩ-ÈùûÂïÜÁî®-ÈùûË°çÁîü-‰øùÊåÅÁΩ≤Âêç | Creative Commons BY-NC-ND 3.0","link":"/ÁºñÁ®ã/Ô£ø/block-callback/"},{"title":"Block","text":"ÁÆÄ‰ªãblockÂèØ‰ª•ÂΩìÂÅöÂåøÂêçÂáΩÊï∞ÔºåÂèØ‰ª•Âú®‰∏§‰∏™ÂØπË±°Èó¥Â∞ÜËØ≠Âè•ÂΩìÂÅöÊï∞ÊçÆÊù•ËøõË°å‰º†ÈÄí„ÄÇÂÖ∑ÊúâÂ∞ÅÈó≠ÊÄßclosureÔºåÊñπ‰æøÂèñÂæó‰∏ä‰∏ãÊñáÁõ∏ÂÖ≥Áä∂ÊÄÅ‰ø°ÊÅØ„ÄÇ BlockÁöÑÂàõÂª∫ ÂèØ‰ª•Â¶ÇÂ£∞ÊòéÂáΩÊï∞ÈÇ£Ê†∑Â£∞Êòé‰∏Ä‰∏™blockÂèòÈáè ÂÆö‰πâÂáΩÊï∞ÁöÑÊñπÊ≥ïÂÆö‰πâblock ÊääblockÂΩìÂÅö‰∏Ä‰∏™ÂáΩÊï∞Êù•Ë∞ÉÁî®1234567891011121314151617int main(int argc, const char * argv[]) { @autoreleasepool { // Declare the block variable double (^distanceFromRateAndTime)(double rate, double time); // Create and assign the block distanceFromRateAndTime = ^double(double rate, double time) { return rate * time; }; // Call the block double dx = distanceFromRateAndTime(35, 1.5); NSLog(@&quot;A car driving 35 mph will travel &quot; @&quot;%.2f miles in 1.5 hours.&quot;, dx); } return 0;} ‰∏çÂ∏¶ÂèÇÊï∞ÁöÑBlockblockÂèØ‰ª•ÁÆÄÂÜô‰∏∫^ { ‚Ä¶ } 1234double (^randomPercent)(void) = ^ { return (double)arc4random() / 4294967295;};NSLog(@&quot;Gas tank is %.1f%% full‚Äù, randomPercent() * 100); BlockÁöÑÈó≠ÂåÖÔºàclosureÔºâblockÂÜÖÈÉ®ÂèØ‰ª•ËÆøÈóÆÂÆö‰πâÂú®blockÂ§ñÈÉ®ÁöÑÈùûÂ±ÄÈÉ®ÂèòÈáè„ÄÇÈùûÂ±ÄÈÉ®ÂèòÈáè‰ºö‰ª•Êã∑Ë¥ùÂΩ¢ÂºèÂ≠òÂÇ®Âà∞block‰∏≠„ÄÇ 123456789NSString *make = @&quot;Honda&quot;;NSString *(^getFullCarName)(NSString *) = ^(NSString *model) { return [make stringByAppendingFormat:@&quot; %@&quot;, model];};NSLog(@&quot;%@&quot;, getFullCarName(@&quot;Accord&quot;)); // Honda Accord// Try changing the non-local variable (it won&apos;t change the block)make = @&quot;Porsche&quot;;NSLog(@&quot;%@&quot;, getFullCarName(@&quot;911 Turbo&quot;)); // Honda 911 Turbo ‰øÆÊîπÈùûÂ±ÄÈÉ®ÂèòÈáèÁî®__blockÂ≠òÂÇ®‰øÆÈ•∞Á¨¶Âè∑Ôºàstorage modifierÔºâÂ£∞ÊòéÈùûÂ±ÄÈÉ®ÂèòÈáè 12345678__block int i = 0;int (^count)(void) = ^ { i += 1; return i;};NSLog(@&quot;%d&quot;, count()); // 1NSLog(@&quot;%d&quot;, count()); // 2NSLog(@&quot;%d&quot;, count()); // 3 Block‰Ωú‰∏∫ÂáΩÊï∞ÁöÑÂèÇÊï∞123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// Car.h#import@interface Car : NSObject@property double odometer;- (void)driveForDuration:(double)duration withVariableSpeed:(double (^)(double time))speedFunction steps:(int)numSteps;@end//Ë∞ÉÁî®block// Car.m#import &quot;Car.h&quot;@implementation Car@synthesize odometer = _odometer;- (void)driveForDuration:(double)duration withVariableSpeed:(double (^)(double time))speedFunction steps:(int)numSteps { double dt = duration / numSteps; for (int i=1; i&amp;lt;=numSteps; i++) { _odometer += speedFunction(i*dt) * dt; }}@end//Âú®mainÂáΩÊï∞‰∏≠blockÂÆö‰πâÂú®Âè¶‰∏Ä‰∏™ÂáΩÊï∞ÁöÑË∞ÉÁî®ËøáÁ®ã‰∏≠„ÄÇ// main.m#import#import &quot;Car.h&quot;int main(int argc, const char * argv[]) { @autoreleasepool { Car *theCar = [[Car alloc] init]; // Drive for awhile with constant speed of 5.0 m/s [theCar driveForDuration:10.0 withVariableSpeed:^(double time) { return 5.0; } steps:100]; NSLog(@&quot;The car has now driven %.2f meters&quot;, theCar.odometer); // Start accelerating at a rate of 1.0 m/s^2 [theCar driveForDuration:10.0 withVariableSpeed:^(double time) { return time + 5.0; } steps:100]; NSLog(@&quot;The car has now driven %.2f meters&quot;, theCar.odometer); } return 0;} ÂÆö‰πâBlockÁ±ªÂûã123456789101112131415// Car.h#import// Define a new type for the blocktypedef double (^SpeedFunction)(double);@interface Car : NSObject@property double odometer;- (void)driveForDuration:(double)duration withVariableSpeed:(SpeedFunction)speedFunction steps:(int)numSteps;@end È£éÈô©block‰ºöÂ≠òÂú®ÂØºËá¥retain cyclesÁöÑÈ£éÈô©ÔºåÂ¶ÇÊûúÂèëÈÄÅËÄÖÈúÄË¶Å retain block ‰ΩÜÂèà‰∏çËÉΩÁ°Æ‰øùÂºïÁî®Âú®‰ªÄ‰πàÊó∂ÂÄôË¢´ËµãÂÄº‰∏∫ nilÔºå ÈÇ£‰πàÊâÄÊúâÂú® block ÂÜÖÂØπ self ÁöÑÂºïÁî®Â∞±‰ºöÂèëÁîüÊΩúÂú®ÁöÑ retain ÁéØ„ÄÇNSOperation ÊòØ‰ΩøÁî® block ÁöÑ‰∏Ä‰∏™Â•ΩËåÉ‰æã„ÄÇÂõ†‰∏∫ÂÆÉÂú®‰∏ÄÂÆöÁöÑÂú∞ÊñπÊâìÁ†¥‰∫Ü retain ÁéØÔºåËß£ÂÜ≥‰∫Ü‰∏äËø∞ÁöÑÈóÆÈ¢ò„ÄÇ 123456self.queue = [[NSOperationQueue alloc] init];MyOperation *operation = [[MyOperation alloc] init];operation.completionBlock = ^{ [self finishedOperation];};[self.queue addOperation:operation]; Âè¶‰∏Ä‰∏™Ëß£ÂÜ≥ÊñπÊ≥ï 1234567891011121314151617181920@interface Encoder ()@property (nonatomic, copy) void (^completionHandler)();@end@implementation Encoder- (void)encodeWithCompletionHandler:(void (^)())handler{ self.completionHandler = handler; // ËøõË°åÂºÇÊ≠•Â§ÑÁêÜ...}// Ëøô‰∏™ÊñπÊ≥ï‰ºöÂú®ÂÆåÊàêÂêéË¢´Ë∞ÉÁî®‰∏ÄÊ¨°- (void)finishedEncoding{ self.completionHandler(); self.completionHandler = nil; //‰∏ÄÊó¶‰ªªÂä°ÂÆåÊàêÂ∞±ËÆæÁΩÆ‰∏∫nil}@end","link":"/ÁºñÁ®ã/Ô£ø/block/"},{"title":"CFRunLoop ","text":"ÁÆÄ‰ªãÁÆÄÂçïÁöÑËØ¥run loopÊòØ‰∫ã‰ª∂È©±Âä®ÁöÑ‰∏Ä‰∏™Â§ßÂæ™ÁéØÔºåÂ¶Ç‰∏ã‰ª£Á†ÅÊâÄÁ§∫123456789101112int main(int argc, char * argv[]) { //Á®ãÂ∫è‰∏ÄÁõ¥ËøêË°åÁä∂ÊÄÅ while (AppIsRunning) { //Áù°Áú†Áä∂ÊÄÅÔºåÁ≠âÂæÖÂî§ÈÜí‰∫ã‰ª∂ id whoWakesMe = SleepForWakingUp(); //ÂæóÂà∞Âî§ÈÜí‰∫ã‰ª∂ id event = GetEvent(whoWakesMe); //ÂºÄÂßãÂ§ÑÁêÜ‰∫ã‰ª∂ HandleEvent(event); } return 0;} Cocoa‰ºöÊ∂âÂèäÂà∞Run LoopsÁöÑ Á≥ªÁªüÁ∫ßÔºöGCDÔºåmach kernelÔºåblockÔºåpthread Â∫îÁî®Â±ÇÔºöNSTimerÔºåUIEventÔºåAutoreleaseÔºåNSObject(NSDelayedPerforming)ÔºåNSObject(NSThreadPerformAddition)ÔºåCADisplayLinkÔºåCATransitionÔºåCAAnimationÔºådispatch_get_main_queue()ÔºàGCD‰∏≠dispatchÂà∞main queueÁöÑblock‰ºöË¢´dispatchÂà∞main RunLoopÊâßË°åÔºâÔºåNSPortÔºåNSURLConnectionÔºåAFNetworking(Ëøô‰∏™Á¨¨‰∏âÊñπÁΩëÁªúËØ∑Ê±ÇÊ°ÜÊû∂‰ΩøÁî®Âú®ÂºÄÂêØÊñ∞Á∫øÁ®ã‰∏≠Ê∑ªÂä†Ëá™Â∑±ÁöÑrun loopÁõëÂê¨‰∫ã‰ª∂) Âú®Main threadÂ†ÜÊ†à‰∏≠ÊâÄÂ§Ñ‰ΩçÁΩÆÂ†ÜÊ†àÊúÄÂ∫ïÂ±ÇÊòØstart(dyld)ÔºåÂæÄ‰∏ä‰æùÊ¨°ÊòØmainÔºåUIApplication(main.m) -&gt; GSEventRunModal(Graphic Services) -&gt; RunLoop(ÂåÖÂê´CFRunLoopRunSpecificÔºåCFRunLoopRunÔºåCFRunLoopDoSouces0ÔºåCFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION) -&gt; Handle Touch Event RunLoopÂéüÁêÜCFRunLoopÂºÄÊ∫ê‰ª£Á†ÅÔºöhttps://opensource.apple.com/source/CF/CF-855.17/ ÊâßË°åÈ°∫Â∫èÁöÑ‰º™‰ª£Á†Å123456789101112131415161718192021222324252627SetupThisRunLoopRunTimeoutTimer(); // by GCD timerdo { __CFRunLoopDoObservers(kCFRunLoopBeforeTimers); __CFRunLoopDoObservers(kCFRunLoopBeforeSources); __CFRunLoopDoBlocks(); __CFRunLoopDoSource0(); CheckIfExistMessagesInMainDispatchQueue(); // GCD __CFRunLoopDoObservers(kCFRunLoopBeforeWaiting); var wakeUpPort = SleepAndWaitForWakingUpPorts(); // mach_msg_trap // Zzz... // Received mach_msg, wake up __CFRunLoopDoObservers(kCFRunLoopAfterWaiting); // Handle msgs if (wakeUpPort == timerPort) { __CFRunLoopDoTimers(); } else if (wakeUpPort == mainDispatchQueuePort) { // GCD __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__() } else { __CFRunLoopDoSource1(); } __CFRunLoopDoBlocks();} while (!stop &amp;&amp; !timeout); ÊûÑÊàêThreadÂåÖÂê´‰∏Ä‰∏™CFRunLoopÔºå‰∏Ä‰∏™CFRunLoopÂåÖÂê´‰∏ÄÁßçCFRunLoopModeÔºåmodeÂåÖÂê´CFRunLoopSourceÔºåCFRunLoopTimerÂíåCFRunLoopObserver„ÄÇ CFRunLoopModeRunLoopÂè™ËÉΩËøêË°åÂú®‰∏ÄÁßçmode‰∏ãÔºåÂ¶ÇÊûúË¶ÅÊç¢modeÂΩìÂâçÁöÑloop‰πüÈúÄË¶ÅÂÅú‰∏ãÈáçÂêØÊàêÊñ∞ÁöÑ„ÄÇÂà©Áî®Ëøô‰∏™Êú∫Âà∂ÔºåScrollViewËøáÁ®ã‰∏≠NSDefaultRunLoopModeÁöÑmode‰ºöÂàáÊç¢UITrackingRunLoopModeÊù•‰øùËØÅScrollViewÁöÑÊµÅÁïÖÊªëÂä®‰∏çÂèóÂè™ËÉΩÂú®NSDefaultRunLoopModeÊó∂Â§ÑÁêÜÁöÑ‰∫ã‰ª∂ÂΩ±ÂìçÊªëÂä®„ÄÇÂêåÊó∂modeËøòÊòØÂèØÂÆöÂà∂ÁöÑ„ÄÇ NSDefaultRunLoopModeÔºöÈªòËÆ§ÔºåÁ©∫Èó≤Áä∂ÊÄÅ UITrackingRunLoopModeÔºöScrollViewÊªëÂä®Êó∂ UIInitializationRunLoopModeÔºöÂêØÂä®Êó∂ NSRunLoopCommonModesÔºöModeÈõÜÂêàTimerËÆ°Êó∂‰ºöË¢´scrollViewÁöÑÊªëÂä®ÂΩ±ÂìçÁöÑÈóÆÈ¢òÂèØ‰ª•ÈÄöËøáÂ∞ÜtimerÊ∑ªÂä†Âà∞NSRunLoopCommonModesÊù•Ëß£ÂÜ≥12345678910111213//Â∞ÜtimerÊ∑ªÂä†Âà∞NSDefaultRunLoopMode‰∏≠[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];//ÁÑ∂ÂêéÂÜçÊ∑ªÂä†Âà∞NSRunLoopCommonModesÈáåNSTimer *timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; CFRunLoopTimerNSTimerÊòØÂØπRunLoopTimerÁöÑÂ∞ÅË£Ö 1234567+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti invocation:(NSInvocation *)invocation repeats:(BOOL)yesOrNo;+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti invocation:(NSInvocation *)invocation repeats:(BOOL)yesOrNo;- (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay inModes:(NSArray *)modes;+ (CADisplayLink *)displayLinkWithTarget:(id)target selector:(SEL)sel;- (void)addToRunLoop:(NSRunLoop *)runloop forMode:(NSString *)mode; CFRunLoopSource source0ÔºöÂ§ÑÁêÜÂ¶ÇUIEventÔºåCFSocketËøôÊ†∑ÁöÑ‰∫ã‰ª∂ source1ÔºöMach portÈ©±Âä®ÔºåCFMachportÔºåCFMessagePort CFRunLoopObserverCocoaÊ°ÜÊû∂‰∏≠ÂæàÂ§öÊú∫Âà∂ÊØîÂ¶ÇCAAnimationÁ≠âÈÉΩÊòØÁî±RunLoopObserverËß¶ÂèëÁöÑ„ÄÇobserverÂà∞ÂΩìÂâçÁä∂ÊÄÅÁöÑÂèòÂåñËøõË°åÈÄöÁü•„ÄÇ 123456789typedef CF_OPTIONS(CFOptionFlags, CFRunLoopActivity) { kCFRunLoopEntry = (1UL &lt;&lt; 0), kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1), kCFRunLoopBeforeSources = (1UL &lt;&lt; 2), kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5), kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6), kCFRunLoopExit = (1UL &lt;&lt; 7), kCFRunLoopAllActivities = 0x0FFFFFFFU}; ‰ΩøÁî®RunLoopÁöÑÊ°à‰æãAFNetworking‰ΩøÁî®NSOperation+NSURLConnectionÂπ∂ÂèëÊ®°ÂûãÈÉΩ‰ºöÈù¢‰∏¥NSURLConnection‰∏ãËΩΩÂÆåÊàêÂâçÁ∫øÁ®ãÈÄÄÂá∫ÂØºËá¥NSOperationÂØπË±°Êé•Êî∂‰∏çÂà∞ÂõûË∞ÉÁöÑÈóÆÈ¢ò„ÄÇAFNetWorkingËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÁöÑÊñπÊ≥ïÊòØÊåâÁÖßÂÆòÊñπÁöÑguidhttps://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLConnection/initWithRequest:delegate:startImmediately:‰∏äÂÜôÁöÑNSURLConnectionÁöÑdelegateÊñπÊ≥ïÈúÄË¶ÅÂú®connectionÂèëËµ∑ÁöÑÁ∫øÁ®ãrunloop‰∏≠Ë∞ÉÁî®Ôºå‰∫éÊòØAFNetWorkingÁõ¥Êé•ÂÄüÈâ¥‰∫ÜAppleËá™Â∑±ÁöÑ‰∏Ä‰∏™Demohttps://developer.apple.com/LIBRARY/IOS/samplecode/MVCNetworking/Introduction/Intro.htmlÁöÑÂÆûÁé∞ÊñπÊ≥ïÂçïÁã¨Ëµ∑‰∏Ä‰∏™global threadÔºåÂÜÖÁΩÆ‰∏Ä‰∏™runloopÔºåÊâÄÊúâÁöÑconnectionÈÉΩÁî±Ëøô‰∏™runloopÂèëËµ∑ÔºåÂõûË∞É‰πüÊòØÂÆÉÊé•Êî∂Ôºå‰∏çÂç†Áî®‰∏ªÁ∫øÁ®ãÔºå‰πü‰∏çËÄóCPUËµÑÊ∫ê„ÄÇ 1234567891011121314151617181920212223+ (void)networkRequestThreadEntryPoint:(id)__unused object { @autoreleasepool { [[NSThread currentThread] setName:@&quot;AFNetworking&quot;]; NSRunLoop *runLoop = [NSRunLoop currentRunLoop]; [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]; [runLoop run]; }}+ (NSThread *)networkRequestThread { static NSThread *_networkRequestThread = nil; static dispatch_once_t oncePredicate; dispatch_once(&amp;oncePredicate, ^{ _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil]; [_networkRequestThread start]; }); return _networkRequestThread;} Á±ª‰ººÁöÑÂèØ‰ª•Áî®Ëøô‰∏™ÊñπÊ≥ïÂàõÂª∫‰∏Ä‰∏™Â∏∏È©ªÊúçÂä°ÁöÑÁ∫øÁ®ã„ÄÇ TableView‰∏≠ÂÆûÁé∞Âπ≥ÊªëÊªöÂä®Âª∂ËøüÂä†ËΩΩÂõæÁâáÂà©Áî®CFRunLoopModeÁöÑÁâπÊÄßÔºåÂèØ‰ª•Â∞ÜÂõæÁâáÁöÑÂä†ËΩΩÊîæÂà∞NSDefaultRunLoopModeÁöÑmodeÈáåÔºåËøôÊ†∑Âú®ÊªöÂä®UITrackingRunLoopModeËøô‰∏™modeÊó∂‰∏ç‰ºöË¢´Âä†ËΩΩËÄåÂΩ±ÂìçÂà∞„ÄÇ 12345UIImage *downloadedImage = ...;[self.avatarImageView performSelector:@selector(setImage:) withObject:downloadedImage afterDelay:0 inModes:@[NSDefaultRunLoopMode]]; Êé•Âà∞Á®ãÂ∫èÂ¥©Ê∫ÉÊó∂ÁöÑ‰ø°Âè∑ËøõË°åËá™‰∏ªÂ§ÑÁêÜ‰æãÂ¶ÇÂºπÂá∫ÊèêÁ§∫Á≠â1234567CFRunLoopRef runLoop = CFRunLoopGetCurrent();NSArray *allModes = CFBridgingRelease(CFRunLoopCopyAllModes(runLoop));while (1) { for (NSString *mode in allModes) { CFRunLoopRunInMode((CFStringRef)mode, 0.001, false); }} ÂºÇÊ≠•ÊµãËØï12345678910111213141516171819202122- (BOOL)runUntilBlock:(BOOL(^)())block timeout:(NSTimeInterval)timeout{ __block Boolean fulfilled = NO; void (^beforeWaiting) (CFRunLoopObserverRef observer, CFRunLoopActivity activity) = ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) { fulfilled = block(); if (fulfilled) { CFRunLoopStop(CFRunLoopGetCurrent()); } }; CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(NULL, kCFRunLoopBeforeWaiting, true, 0, beforeWaiting); CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopDefaultMode); // Run! CFRunLoopRunInMode(kCFRunLoopDefaultMode, timeout, false); CFRunLoopRemoveObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopDefaultMode); CFRelease(observer); return fulfilled;} ming1016","link":"/ÁºñÁ®ã/Ô£ø/cfrunloop/"},{"title":"Camera","text":"Áõ∏Êú∫ÂéüÁêÜÊÑüÂÖâÂ∫¶(ISO)ISO‰πüÂè´ËÉ∂Âç∑ÈÄüÂ∫¶ÔºåË°°ÈáèÂõæÂÉè‰º†ÊÑüÂô®ÂØπÂÖâÁöÑÊïèÊÑüÁ®ãÂ∫¶„ÄÇ‰∫ÆÁöÑÊó∂ÂÄôÈúÄË¶ÅÁöÑISOÂ∞±Ë∂äÂ∞èÔºåÊöóÁöÑÊó∂ÂÄôÁõ∏ÂèçISOÂ∞±È´òÂô™ÁÇπ‰ºöÂ§ö„ÄÇ ÂÖâÂúàÂÖâÂúàÁî®Êù•Ë°°ÈáèÂà∞ËææÂõæÂÉèÊÑüÂ∫îÂô®ÁöÑÂÖâÊâÄÈÄöËøáÁöÑÈÄöÂ≠îÂ§ßÂ∞è„ÄÇiPhone6ÁöÑÂÖâÂúàÂÄºÊòØf/2.2Ôºå2.2Â∞±ÊòØË°®Á§∫ÈïúÂ§¥ÁÑ¶Ë∑ùÂíåÂÖâÂúàÁöÑÊúâÊïàÁõ¥ÂæÑÊØî‰æã„ÄÇ ÂØπÁÑ¶Â∞ÜÁ¶ªÁõ∏Êú∫‰∏ÄÂÆöËåÉÂõ¥ÂÜÖÁâ©‰ΩìÊ∏≤ÊüìÊ∏ÖÊô∞ÔºåÂ§™ËøëÂ§™Ëøú‰ºöÊ®°Á≥äËøôÁßçÊÉÖÂÜµÂè´ÂÅöÂ§±ÁÑ¶„ÄÇ ‰øùÂ≠òËé∑ÂèñÊñá‰ª∂ÂÖ≥‰∫éCore ImageÂ§ÑÁêÜRAWÊ†ºÂºèÂèØ‰ª•ÂèÇËÄÉCoreImage/CIRAWFilter.hÔºå‰ª•ÂèäWWDC‰∏äÁöÑËÆ≤Â∫ßWWDC 2014 session 514 https://developer.apple.com/videos/wwdc/2014/#514 Â¶Ç‰ΩïÂ§ÑÁêÜÂõæÂÉèÊï∞ÊçÆÂ§ÑÁêÜ‰ΩçÂõæÁöÑÁ±ªÊòØUIImageÔºåCGImage(Core Graphics)ÂíåCIImage(Core Image)„ÄÇ‰ªéNSDataÂæóÂà∞UIImage‰ΩøÁî®imageWithContentsOfFiles:ÊñπÊ≥ï„ÄÇ ‰ªéÁõ∏Êú∫ÊçïÊçâÂõæÂÉè Áõ∏ÊØîËæÉUIImagePickerController‰ΩøÁî®AVFoundationËÉΩÂ§üÁõ¥Êé•ËÆøÈóÆÁõ∏Êú∫ÔºåÊèê‰æõÂÆåÂÖ®ÁöÑÊìç‰ΩúÊùÉÔºåÊØîÂ¶ÇÁî®ÁºñÁ®ãÊñπÂºèÊõ¥ÊîπÁ°¨‰ª∂ÂèÇÊï∞ÔºåÊàñËÄÖÊìçÁ∫µÂÆûÊó∂È¢ÑËßàÂõæ„ÄÇ ÂÖàÂàõÂª∫AVCaptureStillImageOutputÂØπË±°Ôºå‰ΩøÁî®captureStillImageAsynchronouslyFromConnection: completionHandler: ÊñπÊ≥ï„ÄÇ ‰ΩøÁî®AVCaptureStillImageOutput‰∏≠ÁöÑÁ±ªÊñπÊ≥ïjpegStillImageNSDataRepresentation:Â∞ÜÂÖ∂ËΩ¨Êç¢ÊàêNSDataÂØπË±°ÔºåÊé•ÁùÄÁî®imageWithData:ÂæóÂà∞‰∏Ä‰∏™UIImage ËøáÁ®ã‰∏≠ÂèØ‰ª•Ë∞ÉËäÇÂæàÂ§öÂèÇÊï∞‰æãÂ¶ÇÊõùÂÖâÔºåËÅöÁÑ¶ÔºåÂÖâË°•ÂÅøÔºåÈó™ÂÖâÁÅØÔºåISOÁ≠â„ÄÇÊâÄÊúâËøô‰∫õËÆæÁΩÆÈÉΩ‰ºöË¢´Â∫îÁî®Âà∞‰∏Ä‰∏™AVCaptureDeviceÈáå„ÄÇ AVFoundationÁõ∏ÂÖ≥Á±ªÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÁ±ªËÆøÈóÆÊù•Ëá™Áõ∏Êú∫ËÆæÂ§áÂéüÂßãÊï∞ÊçÆÂπ∂ÊéßÂà∂‰ªñ‰ª¨ÁöÑÁªÑ‰ª∂„ÄÇ AVCaptureDeviceÔºöÊéßÂà∂Á°¨‰ª∂ÁâπÊÄßÔºåÊØîÂ¶ÇÈïúÂ§¥‰ΩçÁΩÆÔºåÊõùÂÖâÔºåÈó™ÂÖâÁÅØ AVCaptureDeviceInputÔºöËÆæÂ§áÊï∞ÊçÆ AVCaptureOutputÔºöÊäΩË±°Á±ªÂåÖÊã¨‰∫Ü‰∏âÁßçÈùôÊÄÅÂõæÁâáÊçïÊçâÁ±ª AVCaptureStillImageOutputÔºöÁî®‰∫éÊçïÊçâÈùôÊÄÅÂõæÁâá AVCaptureMetadataOutputÔºöÂêØÁî®Ê£ÄÊµã‰∫∫ËÑ∏Âíå‰∫åÁª¥Á†Å AVCaptureVideoOutputÔºöÂÆûÊó∂È¢ÑËßàÂõæÊèê‰æõÂéüÂßãÂ∏ß AVCaptureSessionÔºöÁÆ°ÁêÜËæìÂÖ•ËæìÂá∫‰πãÈó¥Êï∞ÊçÆÊµÅÔºå‰ª•ÂèäÂú®Âá∫Áé∞ÈóÆÈ¢òÊó∂ÁîüÊàêËøêË°åÊó∂ÈîôËØØ„ÄÇ AVCaptureVideoPreviewLayerÔºöCALayerÁöÑÂ≠êÁ±ªÔºåÁî®‰∫éËá™Âä®ÊòæÁ§∫Áõ∏Êú∫‰∫ßÁîüÁöÑÂÆûÊó∂ÂõæÂÉèÔºå ÊçïÊçâËÆæÁΩÆ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081//ÂÖàÈúÄË¶Å‰∏Ä‰∏™AVCaptureSessionÂØπË±°let session = AVCaptureSession()//Êé•ÁùÄÈÅçÂéÜÊâÄËÉΩÊèê‰æõËßÜÈ¢ëÊï∞ÊçÆËÆæÂ§áÂπ∂Ê£ÄÊü•positionÂ±ûÊÄß„ÄÇlet availableCameraDevices = AVCaptureDevice.devicesWithMediaType(AVMediaTypeVideo)for device in availableCameraDevices as [AVCaptureDevice] { if device.position == .Back { backCameraDevice = device } else if device.position == .Front { frontCameraDevice = device }}//ÂèëÁé∞ÂêàÈÄÇÁöÑÁõ∏Êú∫ËÆæÂ§áÔºåÂ∞±ÂèØ‰ª•Ëé∑ÂæóÁõ∏ÂÖ≥ÁöÑAVCaptureDeviceInputÂØπË±°„ÄÇÂ∞ÜÂÆÉËÆæÁΩÆ‰∏∫sessionËæìÂÖ•Ôºövar error:NSError?let possibleCameraInput: AnyObject? = AVCaptureDeviceInput.deviceInputWithDevice(backCameraDevice, error: &amp;error)if let backCameraInput = possibleCameraInput as? AVCaptureDeviceInput { if self.session.canAddInput(backCameraInput) { self.session.addInput(backCameraInput) }}//Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî®AVCaptureDeviceInput.deviceInputWithDevice()‰ºöÂá∫ÂèëÁ≥ªÁªüÊèêÁ§∫ÔºåÂêëÁî®Êà∑ËØ∑Ê±ÇËÆøÈóÆÁõ∏Êú∫„ÄÇlet authorizationStatus = AVCaptureDevice.authorizationStatusForMediaType(AVMediaTypeVideo)switch authorizationStatus {case .NotDetermined: // ËÆ∏ÂèØÂØπËØùÊ≤°ÊúâÂá∫Áé∞ÔºåÂèëËµ∑ÊéàÊùÉËÆ∏ÂèØ AVCaptureDevice.requestAccessForMediaType(AVMediaTypeVideo, completionHandler: { (granted:Bool) -&gt; Void in if granted { // ÁªßÁª≠ } else { // Áî®Êà∑ÊãíÁªùÔºåÊó†Ê≥ïÁªßÁª≠ } })case .Authorized: // ÁªßÁª≠case .Denied, .Restricted: // Áî®Êà∑ÊòéÁ°ÆÂú∞ÊãíÁªùÊéàÊùÉÔºåÊàñËÄÖÁõ∏Êú∫ËÆæÂ§áÊó†Ê≥ïËÆøÈóÆ}//ÂÖÅËÆ∏ËÆøÈóÆÂêéÁöÑÂ§ÑÁêÜÔºåÊúâ‰∏§ÁßçÊñπÊ≥ïÊòæÁ§∫Êù•Ëá™Áõ∏Êú∫ÁöÑÂõæÂÉèÊµÅ„ÄÇ//Á¨¨‰∏ÄÁßçÔºåÁîüÊàê‰∏Ä‰∏™Â∏¶ÊúâAVCaptureVideoPreviewLayerÁöÑview„ÄÇÁî®capture sessionÂÅöÂàùÂßãÂèÇÊï∞„ÄÇAVCaptureVideoPreviewLayer‰ºöËá™Âä®ÁöÑÊòæÁ§∫Êù•Ëá™Áõ∏Êú∫ËæìÂá∫previewLayer = AVCaptureVideoPreviewLayer.layerWithSession(session) as AVCaptureVideoPreviewLayerpreviewLayer.frame = view.boundsview.layer.addSublayer(previewLayer)//Á¨¨‰∫åÁßçÔºå‰ªéËæìÂá∫Êï∞ÊçÆÊµÅÊçïÊçâÂçï‰∏ÄÂõæÂÉèÂ∏ßÔºå‰ΩøÁî®OpenGLÊâãÂä®ÊòæÁ§∫Âú®view‰∏ä„ÄÇËøôÁßçÊñπÊ≥ïÈÄÇÁî®‰∫éÊÉ≥ÂÆûÊó∂È¢ÑËßàÊª§ÈïúÊïàÊûúÁöÑÊÉÖÂÜµ„ÄÇglContext = EAGLContext(API: .OpenGLES2) //glView = GLKView(frame: viewFrame, context: glContext)ciContext = CIContext(EAGLContext: glContext)//AVCaptureVideoOutputvideoOutput = AVCaptureVideoDataOutput()videoOutput.setSampleBufferDelegate(self, queue: dispatch_queue_create(&quot;sample buffer delegate&quot;, DISPATCH_QUEUE_SERIAL))if session.canAddOutput(self.videoOutput) {session.addOutput(self.videoOutput)}//ÂàõÂª∫ÂÆåAVCaptureVideoDataOutputÂêéÈúÄË¶ÅÈÄöËøá‰ª£ÁêÜcaptureOutput(_:didOutputSampleBuffer:fromConnection:)Ëé∑ÂæóÊâÄÊúâÂõæÂÉèÂ∏ßÔºåÂ∞Ü‰ªñ‰ª¨ÁªòÂà∂Âú®GLKView‰∏≠„ÄÇfunc captureOutput(captureOutput: AVCaptureOutput!, didOutputSampleBuffer sampleBuffer: CMSampleBuffer!, fromConnection connection: AVCaptureConnection!) { let pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer) let image = CIImage(CVPixelBuffer: pixelBuffer) if glContext != EAGLContext.currentContext() { EAGLContext.setCurrentContext(glContext) } glView.bindDrawable() ciContext.drawImage(image, inRect:image.extent(), fromRect: image.extent()) glView.display()}//Ê≥®ÊÑèÁöÑÈóÆÈ¢òÔºå AVCaptureVideoPreviewLayer‰ºöËá™Âä®Â§ÑÁêÜÊ†∑Êú¨ÊóãËΩ¨90Â∫¶ÁöÑÊÉÖÂÜµ„ÄÇ//‰ΩøÁî®AVCaptureStillImageOutputÊçïÊçâÈùôÊÄÅÂõæÁâá„ÄÇstillCameraOutput = AVCaptureStillImageOutput()if self.session.canAddOutput(self.stillCameraOutput) { self.session.addOutput(self.stillCameraOutput)}//ÈÖçÁΩÆÔºå‰∏∫ÂØπË±°ÊâæÊúÄÂêàÈÄÇÁöÑÈÖçÁΩÆ„ÄÇÊúâ‰∏§‰∏™ÊñπÊ≥ïÔºåÁÆÄÂçïÁöÑÊñπÊ≥ïÊòØ‰ΩøÁî®session presetsession.sessionPreset = AVCaptureSessionPresetPhoto //AVCaptureSessionPresetPhoto‰ºö‰∏∫ÁÖßÁâáÊçïÊçâÈÄâÊã©ÊúÄÂêàÈÄÇÁöÑÈÖçÁΩÆÔºåÂÖÅËÆ∏‰ΩøÁî®ÊúÄÈ´òÁöÑÊÑüÂÖâÂ∫¶ÔºàISOÔºâÂíåÊõùÂÖâÊó∂Èó¥„ÄÇÂü∫‰∫éÁõ∏‰ΩçÊ£ÄÊµãÔºàphase detectionÔºâÁöÑËá™Âä®ÂØπÁÑ¶Ôºå‰ª•ÂèäËæìÂá∫ÂÖ®ÂàÜËæ®ÁéáÁöÑJPEGÊ†ºÂºèÂéãÁº©ÁöÑÈùôÊÄÅÂõæÁâá„ÄÇ‰ΩøÁî®AVCaptureDeviceFormatËøô‰∏™Á±ªÂèØ‰ª•ÊúâÊõ¥Â§öÁöÑÊìçÊéßÔºåÊØîÂ¶ÇÈùôÊÄÅÂàÜËæ®ÁéáÔºåËßÜÈ¢ëÈ¢ÑËßàÂàÜËæ®ÁéáÔºåËá™Âä®ÂØπÁÑ¶Á±ªÂûãÔºåÊÑüÂÖâÂ∫¶ÂíåÊõùÂÖâÊó∂Èó¥ÈôêÂà∂ÔºåÊîØÊåÅÊ†ºÂºèÈÉΩÂú®AVCaptureDevice.formats‰∏≠ÔºåÂèØ‰ª•ËµãÂÄºÁªôAVCaptureDeviceÁöÑactiveFormat„ÄÇ Êìç‰ΩúÁõ∏Êú∫Âà∞‰∫ÜiOS8ÂêéÂèØ‰ª•ÂØπÊâÄÊúâÂèÇÊï∞ËøõË°åÊâãÂä®Ë∞ÉÊï¥‰∫Ü„ÄÇÂåÖÊã¨ÈïúÂ§¥ÂÖâÂúà„ÄÇ 123456789101112131415//ÂÖàÂêØÂä®Áõ∏Êú∫sessionQueue = dispatch_queue_create(&quot;com.example.camera.capture_session&quot;, DISPATCH_QUEUE_SERIAL)dispatch_async(sessionQueue) { () -&gt; Void in self.session.startRunning()}//Âª∫ËÆÆÂ∞ÜÊâÄÊúâblockË∞ÉÁî®Êìç‰ΩúÂíåÈÖçÁΩÆÂàÜÈÖçÂà∞ÂêéÂè∞‰∏≤Ë°åÈòüÂàó‰∏≠„ÄÇÂú®Áõ∏Êú∫ËÆæÂ§áÊîπÂèò‰∏Ä‰∫õÂèÇÊï∞ÂâçÂÖàÈîÅÂÆöÔºåÊîπÂÆåÂÜçËß£ÈîÅvar error:NSError?if currentDevice.lockForConfiguration(&amp;error) { // ÈîÅÂÆöÊàêÂäüÔºåÁªßÁª≠ÈÖçÁΩÆ // currentDevice.unlockForConfiguration()}else { // Âá∫ÈîôÔºåÁõ∏Êú∫ÂèØËÉΩÂ∑≤ÁªèË¢´ÈîÅ} ÂØπÁÑ¶AVCaptureFocusModeÊûö‰∏æÊèèËø∞ÂèØÁî®ÂØπÁÑ¶Ê®°Âºè lockedÔºöÈïúÁâáÂõ∫ÂÆö‰ΩçÁΩÆ AutoFocusÔºöÂÖàËá™Âä®ÂØπÁÑ¶‰∏ÄÊ¨°Â∞±Â§Ñ‰∫éLockedÊ®°Âºè ContinuousAutoFocusÔºöÂú∫ÊôØÊîπÂèòËá™Âä®ÈáçÊñ∞ÂØπÁÑ¶Âà∞ÁîªÈù¢‰∏≠ÂøÉÁÇπ ÂØπÁÑ¶ÂèØ‰ª•‰ΩøÁî®UISliderËÆæÁΩÆÔºåÁ±ª‰ººÂçïÂèçÂØπÁÑ¶ÁéØ„ÄÇÊâãÂä®ÂØπÁÑ¶Êúâ‰∏™ËæÖÂä©Ê†áËØÜÊåáÂêëÊ∏ÖÊô∞Âå∫ÂüüÔºåÂèØ‰ª•ÈÄöËøáÂØπÁÑ¶Â≥∞ÂÄºÔºàfocus peakingÔºâÂ∞ÜÂØπÁÑ¶Âå∫ÂüüÈ´ò‰∫ÆÊòæÁ§∫ÁöÑÊñπÂºèÔºåÊñπÊ≥ïÊòØ‰ΩøÁî®ÈòàÂÄºËæπÁºòÔºàthreshold edgeÔºâÊª§ÈïúÔºåËá™ÂÆö‰πâCIFilterÊàñGPUImageThresholdEdgeDetectionFilterÔºåÂπ∂Ë∞ÉÁî®AVCaptureAudioDataOutputSampleBufferDelegate‰∏ãÁöÑcaptureOutput(_:didOutputSampleBuffer:fromConnection:)ÊñπÊ≥ïÂ∞ÜÂÆÉË¶ÜÁõñÂà∞ÂÆûÊó∂È¢ÑËßàÂõæ‰∏ä„ÄÇ 1234567891011121314151617181920212223242526//ËÆæÁΩÆÂØπÁÑ¶Ê®°ÂºèÈúÄË¶ÅÂú®ÈîÅÂÆöÂêélet focusMode:AVCaptureFocusMode = ...if currentCameraDevice.isFocusModeSupported(focusMode) { ... // ÈîÅÂÆö‰ª•ËøõË°åÈÖçÁΩÆ currentCameraDevice.focusMode = focusMode ... // Ëß£ÈîÅ}//AutoFocus‰ºöËÆ©Â±èÂπï‰∏≠ÂøÉ‰∏∫Ê∏ÖÊô∞Âå∫Ôºå‰πüÂèØ‰ª•ÈÄöËøáÈ¢ÑËßàÂõæ‰∏äÁÇπÂáªÊâãÂäøÊîπÂèòËøô‰∏™Âå∫Âüü„ÄÇvar pointInPreview = focusTapGR.locationInView(focusTapGR.view)var pointInCamera = previewLayer.captureDevicePointOfInterestForPoint(pointInPreview)...// ÈîÅÂÆöÔºåÈÖçÁΩÆ// ËÆæÁΩÆÊÑüÂÖ¥Ë∂£ÁöÑÁÇπcurrentCameraDevice.focusPointOfInterest = pointInCamera// Âú®ËÆæÁΩÆÁöÑÁÇπ‰∏äÂàáÊç¢ÊàêËá™Âä®ÂØπÁÑ¶currentCameraDevice.focusMode = .AutoFocus...// Ëß£ÈîÅ//iOS8‰∏≠ÂèØ‰ª•ÈÄöËøáÈÄâÈ°πÁßªÂä®ÈïúÁâáÁöÑ‰ΩçÁΩÆ... // ÈîÅÂÆöÔºåÈÖçÁΩÆvar lensPosition:Float = ... // 0.0 Âà∞ 1.0ÁöÑfloatcurrentCameraDevice.setFocusModeLockedWithLensPosition(lensPosition) { (timestamp:CMTime) -&gt; Void in // timestamp ÂØπÂ∫î‰∫éÂ∫îÁî®‰∫ÜÈïúÁâá‰ΩçÁΩÆÁöÑÁ¨¨‰∏ÄÂº†ÂõæÂÉèÁºìÂ≠òÂå∫}... // Ëß£ÈîÅ ÊõùÂÖâÊõùÂÖâÊ°£Êï∞ËåÉÂõ¥Âú®minExposureTargetBiasÂíåmaxExposureTargetBias‰πãÈó¥„ÄÇ0‰∏∫ÈªòËÆ§Ê≤°ÊúâË°•ÂÅø 12345678910111213141516var exposureBias:Float = ... // Âú® minExposureTargetBias Âíå maxExposureTargetBias ‰πãÈó¥ÁöÑÂÄº... // ÈîÅÂÆöÔºåÈÖçÁΩÆcurrentDevice.setExposureTargetBias(exposureBias) { (time:CMTime) -&gt; Void in}... // Ëß£ÈîÅ//ËÆæÁΩÆISOÂíåÊõùÂÖâÊó∂Èó¥var activeFormat = currentDevice.activeFormatvar duration:CTime = ... //Âú®activeFormat.minExposureDuration Âíå activeFormat.maxExposureDuration ‰πãÈó¥ÁöÑÂÄºÔºåÊàñÁî® AVCaptureExposureDurationCurrent Ë°®Á§∫‰∏çÂèòvar iso:Float = ... // Âú® activeFormat.minISO Âíå activeFormat.maxISO ‰πãÈó¥ÁöÑÂÄºÔºåÊàñÁî® AVCaptureISOCurrent Ë°®Á§∫‰∏çÂèò... // ÈîÅÂÆöÔºåÈÖçÁΩÆcurrentDevice.setExposureModeCustomWithDuration(duration, ISO: iso) { (time:CMTime) -&gt; Void in}... // Ëß£ÈîÅ//Ê£ÄÈ™åÊõùÂÖâÊòØÂê¶ÂáÜÁ°ÆÂèØ‰ª•ÈÄöËøáKVOËßÇÂØüAVCaptureDeviceÁöÑexposureTargetOffsetÂ±ûÊÄß„ÄÇ ÁôΩÂπ≥Ë°°iOS8ÂèØ‰ª•ÊâãÂä®ÊéßÂà∂ÁôΩÂπ≥Ë°°„ÄÇÂèØ‰ª•ÈÄöËøáÂºÄÂ∞îÊñáÊâÄË°®Á§∫ÁöÑÊ∏©Â∫¶Êù•Ë∞ÉËäÇËâ≤Ê∏©ÂíåËâ≤ÂΩ©„ÄÇÂÖ∏ÂûãËâ≤Ê∏©ÂÄºÂú®2000-3000KÔºàÁ±ª‰ººËú°ÁÉõÊàñÁÅØÊ≥°ÁöÑÊöñÂÖâÊ∫êÔºâÂà∞8000KÔºàÁ∫ØÂáÄÁöÑËìùËâ≤Â§©Á©∫Ôºâ‰πãÈó¥„ÄÇËâ≤ÂΩ©ËåÉÂõ¥‰ªéÊúÄÂ∞èÁöÑ-150ÔºàÂÅèÁªøÔºâÂà∞150ÔºàÂÅèÂìÅÁ∫¢Ôºâ„ÄÇ 12345678910var incandescentLightCompensation = 3_000var tint = 0 // ‰∏çË∞ÉËäÇlet temperatureAndTintValues = AVCaptureWhiteBalanceTemperatureAndTintValues(temperature: incandescentLightCompensation, tint: tint)var deviceGains = currentCameraDevice.deviceWhiteBalanceGainsForTemperatureAndTintValues(temperatureAndTintValues)... // ÈîÅÂÆöÔºåÈÖçÁΩÆcurrentCameraDevice.setWhiteBalanceModeLockedWithDeviceWhiteBalanceGains(deviceGains) { (timestamp:CMTime) -&gt; Void in }}... // Ëß£ÈîÅ ÂÆûÊó∂‰∫∫ËÑ∏Ê£ÄÊµã‰ΩøÁî®AVCaptureMetadataOutputÂèØ‰ª•Ê£ÄÊµã‰∫∫ËÑ∏Âíå‰∫åÁª¥Á†Å„ÄÇ 1234567891011121314var metadataOutput = AVCaptureMetadataOutput()metadataOutput.setMetadataObjectsDelegate(self, queue: self.sessionQueue)if session.canAddOutput(metadataOutput) { session.addOutput(metadataOutput)}metadataOutput.metadataObjectTypes = [AVMetadataObjectTypeFace]func captureOutput(captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [AnyObject]!, fromConnection connection: AVCaptureConnection!) { for metadataObject in metadataObjects as [AVMetadataObject] { if metadataObject.type == AVMetadataObjectTypeFace { var transformedMetadataObject = previewLayer.transformedMetadataObjectForMetadataObject(metadataObject) } }} ÊçïÊçâÈùôÊÄÅÂõæÁâáÊçïÊçâÈ´òÂàÜËæ®ÁéáÂõæÂÉèË∞ÉÁî®captureStillImageAsynchronouslyFromConnection(connection, completionHandler)„ÄÇÂú®ËßÜËßâ‰∏äÂèçÂ∫îÂõæÁâáÊçïÊçâ‰ΩïÊó∂ÂºÄÂßã‰ª•Âèä‰ΩïÊó∂ÁªìÊùüÂèØ‰ª•‰ΩøÁî®KVOÊù•ËßÇÂØüAVCaptureStillImageOutputÁöÑisCapturingStillImageÂ±ûÊÄß„ÄÇ 12345678910111213141516171819202122232425262728293031dispatch_async(sessionQueue) { () -&gt; Void in let connection = self.stillCameraOutput.connectionWithMediaType(AVMediaTypeVideo) // Â∞ÜËßÜÈ¢ëÁöÑÊóãËΩ¨‰∏éËÆæÂ§áÂêåÊ≠• connection.videoOrientation = AVCaptureVideoOrientation(rawValue: UIDevice.currentDevice().orientation.rawValue)! self.stillCameraOutput.captureStillImageAsynchronouslyFromConnection(connection) { (imageDataSampleBuffer, error) -&gt; Void in if error == nil { // Â¶ÇÊûú‰ΩøÁî® session .Photo È¢ÑËÆæÔºåÊàñËÄÖÂú®ËÆæÂ§áËæìÂá∫ËÆæÁΩÆ‰∏≠ÊòéÁ°ÆËøõË°å‰∫ÜËÆæÁΩÆ // Êàë‰ª¨Â∞±ËÉΩËé∑ÂæóÂ∑≤ÁªèÂéãÁº©‰∏∫JPEGÁöÑÊï∞ÊçÆ let imageData = AVCaptureStillImageOutput.jpegStillImageNSDataRepresentation(imageDataSampleBuffer) // Ê†∑Êú¨ÁºìÂÜ≤Âå∫‰πüÂåÖÂê´ÂÖÉÊï∞ÊçÆÔºåÊàë‰ª¨ÁîöËá≥ÂèØ‰ª•ÊåâÈúÄ‰øÆÊîπÂÆÉ let metadata:NSDictionary = CMCopyDictionaryOfAttachments(nil, imageDataSampleBuffer, CMAttachmentMode(kCMAttachmentMode_ShouldPropagate)).takeUnretainedValue() if let image = UIImage(data: imageData) { // ‰øùÂ≠òÂõæÁâáÔºåÊàñËÄÖÂÅö‰∫õÂÖ∂‰ªñÊÉ≥ÂÅöÁöÑ‰∫ãÊÉÖ ... } } else { NSLog(&quot;error while capturing still image: \\(error)&quot;) } }} ÂàÜÁ∫ßÊçïÊçâÈÄöËøáËÆæÂÆö-1Ôºå0Ôºå-1‰∏â‰∏™‰∏çÂêåÊõùÂÖâÊ°£Êï∞Áî®HDRÁÆóÊ≥ïÂêàÂπ∂Êàê‰∏ÄÂº†„ÄÇ 12345678910111213141516171819202122dispatch_async(sessionQueue) { () -&gt; Void in let connection = self.stillCameraOutput.connectionWithMediaType(AVMediaTypeVideo) connection.videoOrientation = AVCaptureVideoOrientation(rawValue: UIDevice.currentDevice().orientation.rawValue)! var settings = [-1.0, 0.0, 1.0].map {(bias:Float) -&gt; AVCaptureAutoExposureBracketedStillImageSettings in AVCaptureAutoExposureBracketedStillImageSettings.autoExposureSettingsWithExposureTargetBias(bias) } var counter = settings.count self.stillCameraOutput.captureStillImageBracketAsynchronouslyFromConnection(connection, withSettingsArray: settings) {(sampleBuffer, settings, error) -&gt; Void in ... // ‰øùÂ≠ò sampleBuffer(s) // ÂΩìËÆ°Êï∞‰∏∫0ÔºåÊçïÊçâÂÆåÊàê counter-- }} Êìç‰ΩúÂõæÂÉè1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556//Â∞Ü‰∏§‰∏™ÂõæÁâáÊãºÊé•ÔºåÂπ∂Âú®ÂõæÁâá‰∏äÂä†‰∏™Âå∫ÂüüÂº∫Ë∞É-(UIImage*)composeStereogramLeft:(UIImage *)leftImage right:(UIImage *)rightImage{ float w = leftImage.size.width; float h = leftImage.size.height; UIGraphicsBeginImageContext(CGSizeMake(w * 2.0, h + 32.0)); [leftImage drawAtPoint:CGPointMake(0.0, 32.0)]; [rightImage drawAtPoint:CGPointMake(w, 32.0)]; float leftCircleX = (w / 2.0) - 8.0; float rightCircleX = leftCircleX + w; float circleY = 8.0; [[UIColor blackColor] setFill]; UIRectFill(CGRectMake(0.0, 0.0, w * 2.0, 32.0)); [[UIColor whiteColor] setFill]; CGRect leftRect = CGRectMake(leftCircleX, circleY, 16.0, 16.0); CGRect rightRect = CGRectMake(rightCircleX, circleY, 16.0, 16.0); UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:leftRect]; [path appendPath:[UIBezierPath bezierPathWithOvalInRect:rightRect]]; [path fill]; UIImage *savedImg = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return savedImg;}//‰ΩøÁî®CGBitmapContextCreateÂàõÂª∫‰ΩçÂõæÁªòÂà∂ÁéØÂ¢ÉÔºåÁÑ∂ÂêéÂèØ‰ª•ÈÅçÂéÜ‰ΩçÂõæËé∑ÂæóÂêÑ‰∏™È¢úËâ≤ÈÄöÈÅìÂÄºÔºåÁª¥ÊåÅ‰∏ÄÂº†ÂõæÁâá‰∏≠ÁöÑÁªøËâ≤ÂíåËìùËâ≤ÁöÑÂéüÂÄºÔºåÁÑ∂ÂêéÂ∞ÜËìùËâ≤ÂíåÁªøËâ≤ÁöÑÂÄºÊåâ‰∏ÄÂÆöÊñπÂºèËÆ°ÁÆóÂêéËµãÂÄºÁªôÂè¶‰∏ÄÂº†ÂõæÁâáÁöÑÁ∫¢Ëâ≤ÂÄº„ÄÇ//ÂèØ‰ª•ËÆøÈóÆÂÆûÈôÖÂÉèÁ¥†ÁöÑÊâÄÊúâ‰ø°ÊÅØÔºåÂÅö‰ªª‰ΩïÂ§ÑÁêÜÔºå‰∏çËøáCore Image‰πü‰ºöÊèê‰æõ‰∏Ä‰∫õÊª§ÈïúÊñπ‰æø‰ΩøÁî®„ÄÇUInt8 *rightPtr = rightBitmap;UInt8 *leftPtr = leftBitmap;UInt8 r1, g1, b1;UInt8 r2, g2, b2;UInt8 ra, ga, ba;for (NSUInteger idx = 0; idx &lt; bitmapByteCount; idx += 4) { r1 = rightPtr[0]; g1 = rightPtr[1]; b1 = rightPtr[2]; r2 = leftPtr[0]; g2 = leftPtr[1]; b2 = leftPtr[2]; // r1/g1/b1 Âè≥‰æßÂõæÂÉèÔºåÁî®‰∫éËÆ°ÁÆóÂêàÂπ∂ÂÄº // r2/g2/b2 Â∑¶‰æßÂõæÂÉèÔºåÁî®‰∫éË¢´ÂêàÂπ∂ÂÄºËµãÂÄº // ra/ga/ba ÂêàÂπ∂ÂêéÁöÑÂÉèÁ¥† ra = 0.7 * g1 + 0.3 * b1; ga = b2; ba = b2; leftPtr[0] = ra; leftPtr[1] = ga; leftPtr[2] = ba; rightPtr += 4; // ÊåáÂêë‰∏ã‰∏Ä‰∏™ÂÉèÁ¥† (4Â≠óËäÇ, ÂåÖÊã¨ÈÄèÊòéÂ∫¶ alpha ÂÄº) leftPtr += 4;}CGImageRef composedImage = CGBitmapContextCreateImage(_leftContext);UIImage *retval = [UIImage imageWithCGImage:composedImage];CGImageRelease(composedImage);return retval; ÂÖÉÊï∞ÊçÆÂ≠òÂÇ®ÂõæÂÉè‰ø°ÊÅØÁöÑÊ†áÂáÜÊ†ºÂºèÊòØExifÔºàÂèØ‰∫§Êç¢ÂõæÂÉèÊñá‰ª∂Ê†ºÂºèÔºâ„ÄÇÈÄöÂ∏∏‰ºö‰øùÂ≠òÁÖßÁõ∏Êó∂Èó¥Êó•ÊúüÔºåÂø´Èó®ÈÄüÂ∫¶ÂíåÂÖâÂúàÔºåËÆæÂ§áÊîØÊåÅËøò‰ºöÂåÖÊã¨GPSÂùêÊ†á„ÄÇÂèØ‰ª•‰ΩøÁî®CGImageSourceCopyPropertiesAtIndexÊñπÊ≥ïËÆøÈóÆExif‰ø°ÊÅØ„ÄÇ","link":"/ÁºñÁ®ã/Ô£ø/camera/"},{"title":"ËøûÁª≠ÂêØÂä® crash Ëá™‰øÆÂ§çÊäÄÊúØÂÆûÁé∞‰∏éÂéüÁêÜËß£Êûê","text":"ÂâçË®Ä ÂÆûÁé∞ÂéüÁêÜ ‰ºòÂåñÔºöÈôç‰Ωé50%‰ª•‰∏äËØØÊä•Êú∫Áéá ÂØπÂéüÊúâAPIËÆæËÆ°ÁöÑÂá†ÁÇπ‰ºòÂåñÊÑèËßÅ Êú∫Âà∂Áä∂ÊÄÅÂ∫îÂΩìÁî®Êûö‰∏æÊù•ÂÅö‰∏∫APIÈÄèÂá∫ ÂÖ≥ÈîÆÊï∞ÂÄºÂ∫îÂΩìÂÅö‰∏∫ÂàùÂßãÂåñÂèÇÊï∞‰æõÁî®Êà∑ËÆæÁΩÆ ‰øÆÂ§ç„ÄÅ‰∏äÊä•ÈÄªËæëÂ∫îÂΩìÊîØÊåÅÁî®Êà∑ÂºÇÊ≠•Êìç‰Ωú ‰ªÄ‰πàÊó∂ÂÄô‰ºöÂá∫Áé∞ËØ•ÂºÇÂ∏∏Ôºü ËøûÁª≠ÂêØÂä® crash Ëá™‰øÆÂ§çÊäÄÊúØÂÆûÁé∞‰∏éÂéüÁêÜËß£Êûê ÂâçË®Ä Â¶ÇÊûú app ËøûÁª≠ crash ‰∏§Ê¨°Êó†Ê≥ïÂêØÂä®ÔºåÁî®Êà∑ÂæÄÂæÄ‰ºöÈÄâÊã©Âç∏ËΩΩ„ÄÇ ËøûÁª≠ÂêØÂä® crash Â∫îËØ•ÊòØ crash Á±ªÂûã‰∏≠ÊúÄ‰∏•ÈáçÁöÑ‰∏ÄÁ±ªÔºåËØ•ÈóÆÈ¢òÂ∏∏Â∏∏‰∏éÊï∞ÊçÆÂ∫ìÊìç‰ΩúÊúâÂÖ≥ÔºåÊØîÂ¶ÇÔºöÊï∞ÊçÆÂ∫ìÊçüÂùè„ÄÅÊúçÂä°Á´ØËøîÂõûÊï∞ÊçÆÈîôËØØÔºåÂ≠òÂÖ•Êï∞ÊçÆÂ∫ìÔºåapp ËØªÂèñÊó∂‰∫ßÁîüÊï∞ÁªÑË∂äÁïå„ÄÅÊâæ‰∏çÂà∞ÊñπÊ≥ï„ÄÇ ÈÇ£‰πàÈô§‰∫ÜÁÉ≠‰øÆÂ§çÔºåËÉΩÂê¶‚ÄúËá™‰øÆÂ§ç‚ÄùËØ•ÈóÆÈ¢òÂë¢Ôºü Âú®ÂæÆ‰ø°ËØª‰π¶Âõ¢ÈòüÂèëÂ∏ÉÁöÑ„ÄäiOS ÂêØÂä®ËøûÁª≠Èó™ÈÄÄ‰øùÊä§ÊñπÊ°à„Äã ‰∏ÄÊñá‰∏≠ÔºåÁªôÂá∫‰∫ÜËøûÁª≠ÂêØÂä®crashÁöÑËá™‰øÆÂ§çÊäÄÊúØÁöÑÊÄùË∑ØËÆ≤Ëß£ÔºåÂπ∂Âú®GitHub‰∏äÁªôÂá∫‰∫ÜÊäÄÊúØÂÆûÁé∞ÔºåÂπ∂ÂºÄÊ∫ê‰∫Ü GYBootingProtection„ÄÇÊñπÊ°àÊÄùË∑ØÂæàÂ•ΩÔºåÂæàËΩªÈáèÁ∫ß„ÄÇ ÂÆûÁé∞ÂéüÁêÜ Âú®ÂæÆ‰ø°ËØª‰π¶Âõ¢ÈòüÁªôÂá∫ÁöÑÊñáÁ´†‰∏≠Â∑≤ÁªèÊúâÊØîËæÉËØ¶ÁªÜÁöÑÈòêËø∞ÔºåÂú®Ê≠§‰∏çÂÅöËµòËø∞ÔºåÂÆûÁé∞ÁöÑÊµÅÁ®ãÂõæÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö‰ΩÜÊúâ‰∏™ÂÆûÁé∞‰∏äÂèØ‰ª•‰ºòÂåñ‰∏ãÔºåÂèØ‰ª•Èôç‰Ωé50%‰ª•‰∏äËØØÊä•Êú∫ÁéáÔºåÁõëÂê¨Áî®Êà∑ÊâãÂä®ÂàíÊéâ APP Ëøô‰∏™‰∫ã‰ª∂ÔºåÂÖ∂‰∏≠‰∏Ä‰∫õÁâπÂÆöÂú∫ÊôØÔºåÊòØÂèØ‰ª•Ëé∑ÂèñÁöÑ„ÄÇÂè¶Â§ñÂú®ËøôÈáå‰πüÁªôÂá∫ÂØπÂÖ∂ API ËÆæËÆ°ÁöÑÂª∫ËÆÆ„ÄÇÊúÄÂêéÁªôÂá∫‰ºòÂåñÂêéÁöÑÂÆûÁé∞„ÄÇ ‰ºòÂåñÔºöÈôç‰Ωé50%‰ª•‰∏äËØØÊä•Êú∫Áéá Áî®Êà∑‰∏ªÂä® kill Êéâ APP ÂàÜ‰∏∫‰∏§ÁßçÊÉÖÂÜµÔºö AppÂú®ÂâçÂè∞Êó∂Áî®Êà∑ÊâãÂä®ÂàíÊéâAPPÁöÑÊó∂ÂÄô APPÂú®ÂêéÂè∞Êó∂ÂàíÊéâAPP Á¨¨‰∏ÄÁßçÂú∫ÊôØÊõ¥‰∏∫Â∏∏ËßÅÔºåÂèØ‰ª•ÈÄöËøáÁõëÂê¨ UIApplicationWillTerminateNotification Êù•ÊçïËé∑ËØ•Âä®‰ΩúÔºåÊçïËé∑ÂêéÊÅ¢Â§çËÆ°Êï∞„ÄÇÁ¨¨‰∫åÁßçÊÉÖÂÜµÔºåÊó†Ê≥ïÁõëÂê¨Âà∞„ÄÇ‰ΩÜ‰πüË∂≥‰ª•Èôç‰Ωé 50% ‰ª•‰∏äÁöÑËØØÊä•Êú∫Áéá„ÄÇ ÂØπÂéüÊúâAPIËÆæËÆ°ÁöÑÂá†ÁÇπ‰ºòÂåñÊÑèËßÅ1. Êú∫Âà∂Áä∂ÊÄÅÂ∫îÂΩìÁî®Êûö‰∏æÊù•ÂÅö‰∏∫APIÈÄèÂá∫ËØ•Êú∫Âà∂ÂΩìÂâçÊâÄÂ§ÑÁöÑÁä∂ÊÄÅÔºåÊØîÂ¶ÇÔºöNeedFix „ÄÅisFixingÔºåÂª∫ËÆÆÁî®Êûö‰∏æÊù•ÂÅö‰∏∫APIÈÄèÂá∫„ÄÇÊØîÂ¶ÇÔºö APP ÂêØÂä®Ê≠£Â∏∏ Ê≠£Âú®Ê£ÄÊµãÊòØÂê¶‰ºöÂú®ÁâπÂÆöÊó∂Èó¥ÂÜÖÊòØÂê¶‰ºö CrashÔºåÊ≥®ÊÑèÔºöÊ£ÄÊµãÁä∂ÊÄÅ‰∏ã‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞Â∞è‰∫éÊàñÁ≠â‰∫é‰∏äÈôêÂÄº APP Âá∫Áé∞ËøûÁª≠ÂêØÂä® CrashÔºåÈúÄË¶ÅÈááÂèñ‰øÆÂ§çÊé™ÊñΩ APP Âá∫Áé∞ËøûÁª≠ÂêØÂä® CrashÔºåÊ≠£Âú®‰øÆÂ§ç‰∏≠ 2. ÂÖ≥ÈîÆÊï∞ÂÄºÂ∫îÂΩìÂÅö‰∏∫ÂàùÂßãÂåñÂèÇÊï∞‰æõÁî®Êà∑ËÆæÁΩÆ ÂΩìÂâçÂêØÂä®CrashÁöÑÁä∂ÊÄÅ ËææÂà∞ÈúÄË¶ÅÊâßË°å‰∏äÊä•Êìç‰ΩúÁöÑ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞„ÄÇ ËææÂà∞ÈúÄË¶ÅÊâßË°å‰øÆÂ§çÊìç‰ΩúÁöÑ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞„ÄÇ APP ÂêØÂä®ÂêéÁªèËøáÂ§öÂ∞ëÁßíÔºåÂèØ‰ª•Â∞Ü‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚ÄùÊ∏ÖÈõ∂ 3. ‰øÆÂ§ç„ÄÅ‰∏äÊä•ÈÄªËæëÂ∫îÂΩìÊîØÊåÅÁî®Êà∑ÂºÇÊ≠•Êìç‰ΩúreportBlock ‰∏äÊä•ÈÄªËæëÔºårepairtBlock ‰øÆÂ§çÈÄªËæë ÊØîÂ¶ÇÔºö 12typedef void (^BoolCompletionHandler)(BOOL succeeded, NSError *error);typedef void (^RepairBlock)(ABSBoolCompletionHandler completionHandler); Áî®Êà∑ÊâßË°å BoolCompletionHandler ÂêéÂç≥ÂèØÁü•ÈÅìÊòØÂê¶ÊâßË°åÂÆåÊØïÔºåÂπ∂‰∏îÊîØÊåÅÂºÇÊ≠•Êìç‰Ωú„ÄÇ ÂºÇÊ≠•Êìç‰ΩúÂ∏¶Êù•ÁöÑÈóÆÈ¢òÔºåÂèØ‰ª•ÈÄöËøáÂâçÈù¢ÊèêÂà∞ÁöÑÊûö‰∏æAPIÊù•ÂÆûÊó∂ÁõëÊµãÁä∂ÊÄÅÔºåÊù•ÂÜ≥ÂÆöÂêÑÁßçÂÖ∂‰ªñÊìç‰Ωú„ÄÇ ‰ªÄ‰πàÊó∂ÂÄô‰ºöÂá∫Áé∞ËØ•ÂºÇÂ∏∏ÔºüËøûÁª≠ÂêØÂä® crash Ëá™‰øÆÂ§çÊäÄÊúØÂÆûÁé∞‰∏éÂéüÁêÜËß£Êûê‰∏ãÈù¢ÁªôÂá∫‰ºòÂåñÂêéÁöÑ‰ª£Á†ÅÂÆûÁé∞Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788//// CYLBootingProtection.h// //// Created by ChenYilong on 18/01/10.// Copyright ¬© 2018Âπ¥ ChenYilong. All rights reserved.//#import &lt;Foundation/Foundation.h&gt;typedef void (^ABSBoolCompletionHandler)(BOOL succeeded, NSError *error);typedef void (^ABSRepairBlock)(ABSBoolCompletionHandler completionHandler);typedef void (^ABSReportBlock)(NSUInteger crashCounts);typedef NS_ENUM(NSInteger, BootingProtectionStatus) { BootingProtectionStatusNormal, /**&lt; APP ÂêØÂä®Ê≠£Â∏∏ */ BootingProtectionStatusNormalChecking, /**&lt; Ê≠£Âú®Ê£ÄÊµãÊòØÂê¶‰ºöÂú®ÁâπÂÆöÊó∂Èó¥ÂÜÖÊòØÂê¶‰ºö CrashÔºåÊ≥®ÊÑèÔºöÊ£ÄÊµãÁä∂ÊÄÅ‰∏ã‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞Â∞è‰∫éÊàñÁ≠â‰∫é‰∏äÈôêÂÄº */ BootingProtectionStatusNeedFix, /**&lt; APP Âá∫Áé∞ËøûÁª≠ÂêØÂä® CrashÔºåÈúÄË¶ÅÈááÂèñ‰øÆÂ§çÊé™ÊñΩ */ BootingProtectionStatusFixing, /**&lt; APP Âá∫Áé∞ËøûÁª≠ÂêØÂä® CrashÔºåÊ≠£Âú®‰øÆÂ§ç‰∏≠... */};/*** ÂêØÂä®ËøûÁª≠ crash ‰øùÊä§„ÄÇ* ÂêØÂä®Âêé `_crashOnLaunchTimeIntervalThreshold` ÁßíÂÜÖ crashÔºåÂèçÂ§çË∂ÖËøá `_continuousCrashOnLaunchNeedToReport` Ê¨°Âàô‰∏äÊä•Êó•ÂøóÔºåË∂ÖËøá `_continuousCrashOnLaunchNeedToFix` ÂàôÂêØÂä®‰øÆÂ§çÊìç‰Ωú„ÄÇ*/@interface CYLBootingProtection : NSObject/*** ÂêØÂä®ËøûÁª≠ crash ‰øùÊä§ÊñπÊ≥ï„ÄÇ* ÂâçÁΩÆÊù°‰ª∂ÔºöÂú® App ÂêØÂä®Êó∂Ê≥®ÂÜå crash Â§ÑÁêÜÂáΩÊï∞ÔºåÂú® crash Êó∂Ë∞ÉÁî®[CYLBootingProtection addCrashCountIfNeeded]„ÄÇ* ÂêØÂä®Âêé‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÔºà`crashOnLaunchTimeIntervalThreshold`ÁßíÂÜÖÔºâcrashÔºåÂèçÂ§çË∂ÖËøá‰∏ÄÂÆöÊ¨°Êï∞Ôºà`continuousCrashOnLaunchNeedToReport`Ê¨°ÔºâÂàô‰∏äÊä•Êó•ÂøóÔºåË∂ÖËøá‰∏ÄÂÆöÊ¨°Êï∞Ôºà`continuousCrashOnLaunchNeedToFix`Ê¨°ÔºâÂàôÂêØÂä®‰øÆÂ§çÁ®ãÂ∫èÔºõÂú®‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÔºà`crashOnLaunchTimeIntervalThreshold`ÁßíÔºâ ÁßíÂêéËã•Ê≤°Êúâ crash Â∞Ü‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚ÄùËÆ°Êï∞ÁΩÆÈõ∂„ÄÇ `reportBlock` ‰∏äÊä•ÈÄªËæëÔºå `repairtBlock` ‰øÆÂ§çÈÄªËæëÔºåÂÆåÊàêÂêéÊâßË°å `[self setCrashCount:0]`*/- (void)launchContinuousCrashProtect;/*!* ÂΩìÂâçÂêØÂä®CrashÁöÑÁä∂ÊÄÅ*/@property (nonatomic, assign, readonly) BootingProtectionStatus bootingProtectionStatus;/*!* ËææÂà∞ÈúÄË¶ÅÊâßË°å‰∏äÊä•Êìç‰ΩúÁöÑ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞„ÄÇ*/@property (nonatomic, assign, readonly) NSUInteger continuousCrashOnLaunchNeedToReport;/*!* ËææÂà∞ÈúÄË¶ÅÊâßË°å‰øÆÂ§çÊìç‰ΩúÁöÑ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞„ÄÇ*/@property (nonatomic, assign, readonly) NSUInteger continuousCrashOnLaunchNeedToFix;/*!* APP ÂêØÂä®ÂêéÁªèËøáÂ§öÂ∞ëÁßíÔºåÂèØ‰ª•Â∞Ü‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚ÄùÊ∏ÖÈõ∂*/@property (nonatomic, assign, readonly) NSTimeInterval crashOnLaunchTimeIntervalThreshold;/*!* ÂÄüÂä© context ÂèØ‰ª•ËÆ©Â§ö‰∏™Ê®°ÂùóÊ≥®ÂÜå‰∫ã‰ª∂ÔºåÂπ∂‰∏î‰∫ã‰ª∂ block ËÉΩÁã¨Á´ãÊâßË°åÔºå‰∫í‰∏çÂπ≤Êâ∞„ÄÇ*/@property (nonatomic, copy, readonly) NSString *context;/*!* @details ÂêØÂä®ÂêékCrashOnLaunchTimeIntervalThresholdÁßíÂÜÖcrashÔºåÂèçÂ§çË∂ÖËøácontinuousCrashOnLaunchNeedToReportÊ¨°Âàô‰∏äÊä•Êó•ÂøóÔºåË∂ÖËøácontinuousCrashOnLaunchNeedToFixÂàôÂêØÂä®‰øÆÂ§çÁ®ãÂ∫èÔºõÂΩìÊâÄÊúâÊìç‰ΩúÂÆåÊàêÂêéÔºåÊâßË°å completion„ÄÇÂú® crashOnLaunchTimeIntervalThreshold ÁßíÂêéËã•Ê≤°Êúâ crash Â∞Ü kContinuousCrashOnLaunchCounterKey ËÆ°Êï∞ÁΩÆÈõ∂„ÄÇ* @param context ÂÄüÂä© context ÂèØ‰ª•ËÆ©Â§ö‰∏™Ê®°ÂùóÊ≥®ÂÜå‰∫ã‰ª∂ÔºåÂπ∂‰∏î‰∫ã‰ª∂ block ËÉΩÁã¨Á´ãÊâßË°åÔºå‰∫í‰∏çÂπ≤Êâ∞„ÄÇ*/- (instancetype)initWithContinuousCrashOnLaunchNeedToReport:(NSUInteger)continuousCrashOnLaunchNeedToReport continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix crashOnLaunchTimeIntervalThreshold:(NSTimeInterval)crashOnLaunchTimeIntervalThreshold context:(NSString *)context;/*!* ÂΩìÂâç‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫É‚ÄúÁöÑÁä∂ÊÄÅ*/+ (BootingProtectionStatus)bootingProtectionStatusWithContext:(NSString *)context continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix;/*!* ËÆæÁΩÆ‰∏äÊä•ÈÄªËæëÔºåÂèÇÊï∞ crashCounts ‰∏∫ÂêØÂä®ËøûÁª≠ crash Ê¨°Êï∞*/- (void)setReportBlock:(ABSReportBlock)reportBlock;/*!* ËÆæÁΩÆ‰øÆÂ§çÈÄªËæë*/- (void)setRepairBlock:(ABSRepairBlock)repairtBlock;+ (void)setLogger:(void (^)(NSString *))logger;@end 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376//// CYLBootingProtection.m////// Created by ChenYilong on 18/01/10.// Copyright ¬© 2018Âπ¥ ChenYilong. All rights reserved.//#import &quot;CYLBootingProtection.h&quot;#import &lt;UIKit/UIKit.h&gt;static dispatch_queue_t _exceptionOperationQueue = 0;void (^Logger)(NSString *log);@interface CYLBootingProtection ()@property (nonatomic, assign) NSUInteger continuousCrashOnLaunchNeedToReport;@property (nonatomic, assign) NSUInteger continuousCrashOnLaunchNeedToFix;@property (nonatomic, assign) NSTimeInterval crashOnLaunchTimeIntervalThreshold;@property (nonatomic, copy) NSString *context;@property (nonatomic, copy) ABSReportBlock reportBlock;@property (nonatomic, copy) ABSRepairBlock repairBlock;/*!* ËÆæÁΩÆ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞*/- (void)setCrashCount:(NSInteger)count;/*!* ËÆæÁΩÆ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞*/+ (void)setCrashCount:(NSUInteger)count context:(NSString *)context;/*!* ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞*/- (NSUInteger)crashCount;/*!* ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞*/+ (NSUInteger)crashCountWithContext:(NSString *)context;@end@implementation CYLBootingProtection+ (void)initialize { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _exceptionOperationQueue = dispatch_queue_create(&quot;com.ChenYilong.CYLBootingProtection.fileCacheQueue&quot;, DISPATCH_QUEUE_SERIAL); });}- (instancetype)initWithContinuousCrashOnLaunchNeedToReport:(NSUInteger)continuousCrashOnLaunchNeedToReport continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix crashOnLaunchTimeIntervalThreshold:(NSTimeInterval)crashOnLaunchTimeIntervalThreshold context:(NSString *)context { if (!(self = [super init])) { return nil; } _continuousCrashOnLaunchNeedToReport = continuousCrashOnLaunchNeedToReport; _continuousCrashOnLaunchNeedToFix = continuousCrashOnLaunchNeedToFix; _crashOnLaunchTimeIntervalThreshold = crashOnLaunchTimeIntervalThreshold; _context = [context copy]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillTerminate:) name:UIApplicationWillTerminateNotification object:[UIApplication sharedApplication]]; return self;}/*!* AppÂú®ÂâçÂè∞Êó∂Áî®Êà∑ÊâãÂä®ÂàíÊéâAPPÁöÑÊó∂ÂÄôÔºå‰∏çËÆ°ÂÖ•Ê£ÄÊµã„ÄÇ* ‰ΩÜÊòØAPPÂú®ÂêéÂè∞Êó∂ÂàíÊéâAPPÔºåÊó†Ê≥ïÊ£ÄÊµãÂá∫Êù•„ÄÇ* ËßÅÔºöhttps://stackoverflow.com/a/35041565/3395008*/- (void)applicationWillTerminate:(NSNotification *)note { BOOL isNormalChecking = [self isNormalChecking]; if (isNormalChecking) { [self decreaseCrashCount]; }}- (void)dealloc { [[NSNotificationCenter defaultCenter] removeObserver:self];}/*ÊîØÊåÅÂêåÊ≠•‰øÆÂ§ç„ÄÅÂºÇÊ≠•‰øÆÂ§çÔºå‰∏§Áßç‰øÆÂ§çÊñπÂºè- ÂºÇÊ≠•‰øÆÂ§çÔºå‰∏çÂç°È°ø‰∏ªUIÔºå‰ΩÜÊúâ‰øÆÂ§çÊú™ÂÆåÊàêÂ∞±Ë¢´ÂÜçÊ¨°Ëß¶Âèëcrash„ÄÅÊàñËÄÖÁî®Êà∑killÊéâÁöÑÂèØËÉΩ„ÄÇÈúÄË¶ÅÁî®Êà∑ÊâãÂä®Ê†πÊçÆ‰øÆÂ§çÁä∂ÊÄÅÔºåÊù•ÈÄâÊã©ÊÄßÂú∞ËøõË°åÊìç‰ΩúÔºåÂ∫îËØ•ÊúâÂõûÊéâ„ÄÇ- ÂêåÊ≠•‰øÆÂ§çÔºåÊúÄÁÆÄÂçïÁõ¥ËßÇÔºåÂú®‰∏ªÁ∫øÁ®ãÂà†Èô§ÊàñËÄÖ‰∏ãËΩΩ‰øÆÂ§çÂåÖ„ÄÇ*/- (void)launchContinuousCrashProtect { NSAssert(_repairBlock, @&quot;_repairBlock is nil!&quot;); [[self class] Logger:@&quot;CYLBootingProtection: Launch continuous crash report&quot;]; [self resetBootingProtectionStatus]; NSUInteger launchCrashes = [self crashCount]; // ‰∏äÊä• if (launchCrashes &gt;= self.continuousCrashOnLaunchNeedToReport) { NSString *logString = [NSString stringWithFormat:@&quot;CYLBootingProtection: App has continuously crashed for %@ times. Now synchronize uploading crash report and begin fixing procedure.&quot;, @(launchCrashes)]; [[self class] Logger:logString]; if (_reportBlock) { dispatch_async(dispatch_get_main_queue(),^{ _reportBlock(launchCrashes); }); } } // ‰øÆÂ§ç if ([self isUpToBootingProtectionCount]) { [[self class] Logger:@&quot;need to repair&quot;]; [self setIsFixing:YES]; if (_repairBlock) { ABSBoolCompletionHandler completionHandler = ^(BOOL succeeded, NSError *__nullable error){ if (succeeded) { [self resetCrashCount]; } else { [[self class] Logger:error.description]; } }; dispatch_async(dispatch_get_main_queue(),^{ _repairBlock(completionHandler); }); } } else { [self increaseCrashCount:launchCrashes]; // Ê≠£Â∏∏ÊµÅÁ®ãÔºåÊó†ÈúÄ‰øÆÂ§ç [[self class] Logger:@&quot;need no repair&quot;]; // ËÆ∞ÂΩïÂêØÂä®Êó∂ÂàªÔºåÁî®‰∫éËÆ°ÁÆóÂêØÂä®ËøûÁª≠ crash // ÈáçÁΩÆÂêØÂä® crash ËÆ°Êï∞ dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(self.crashOnLaunchTimeIntervalThreshold * NSEC_PER_SEC)), dispatch_get_main_queue(), ^(void){ // APPÊ¥ªËøá‰∫ÜÈòàÂÄºÊó∂Èó¥ÔºåÈáçÁΩÆÂ¥©Ê∫ÉËÆ°Êï∞ NSString *logString = [NSString stringWithFormat:@&quot;CYLBootingProtection: long live the app ( more than %@ seconds ), now reset crash counts&quot;, @(self.crashOnLaunchTimeIntervalThreshold)]; [[self class] Logger:logString]; [self resetCrashCount]; }); }}//ÂáèÂ∞ëËÆ°Êï∞ÁöÑÊó∂Êú∫ÔºöÁî®Êà∑ÊâãÂä®ÂàíÊéâAPP- (void)decreaseCrashCount { NSUInteger oldCrashCount = [self crashCount]; [self decreaseCrashCountWithOldCrashCount:oldCrashCount];}- (void)decreaseCrashCountWithOldCrashCount:(NSUInteger)oldCrashCount { dispatch_sync(_exceptionOperationQueue, ^{ if (oldCrashCount &gt; 0) { [self setCrashCount:oldCrashCount-1]; } [self resetBootingProtectionStatus]; });}//ÈáçÂà∂ËÆ°Êï∞ÁöÑÊó∂Êú∫Ôºö‰øÆÂ§çÂÆåÊàê„ÄÅÊàñËÄÖÁî®Êà∑ÊâãÂä®ÂàíÊéâAPP- (void)resetCrashCount { [self setCrashCount:0]; [self resetBootingProtectionStatus];}//Âè™Âú®Êú™ËææÂà∞ËÆ°Êï∞‰∏äÈôêÊó∂Êâç‰ºöÂ¢ûÂä†ËÆ°Êï∞- (void)increaseCrashCount:(NSUInteger)oldCrashCount { dispatch_sync(_exceptionOperationQueue, ^{ [self setIsNormalChecking:YES]; [self setCrashCount:oldCrashCount+1]; });}- (void)resetBootingProtectionStatus { [self setIsNormalChecking:NO]; [self setIsFixing:NO];}- (BootingProtectionStatus)bootingProtectionStatus { return [[self class] bootingProtectionStatusWithContext:_context continuousCrashOnLaunchNeedToFix:_continuousCrashOnLaunchNeedToFix];}/*!*@attention Ê≥®ÊÑè‰πãÊâÄ‰ª•Ë¶ÅÊ£ÄÊü• `BootingProtectionStatusNormalChecking` ÂéüÂõ†Â¶Ç‰∏ãÔºö`-launchContinuousCrashProtect` ÊñπÊ≥ï‰∏é `-bootingProtectionStatus` ÊñπÊ≥ïÔºåÂ¶ÇÊûú `-launchContinuousCrashProtect` ÂÖàÊâßË°åÔºåÈÇ£‰πà‰ºöÈÄ†ÊàêÂ¶Ç‰∏ãÈóÆÈ¢òÔºöÂÅáËÆæn‰∏∫‰∏äÈôêÔºå‰ΩÜcrashÔºàn-1ÔºâÊ¨°Ôºå‰ΩÜÊòØÁî® `-bootingProtectionStatus` Âà§Êñ≠Âá∫Êù•ÔºåÂΩìÂâçÂ∑≤ÁªèÂ§Ñ‰∫énÊ¨°‰∫Ü„ÄÇÂéüÂõ†Â¶Ç‰∏ãÔºöcrashÔºàn-1ÔºâÊ¨°ÔºåÊ≠£Â∏∏ÊµÅÁ®ãÔºåËÆ°Êï∞+1ÔºåÂèòÊàênÊ¨°ÔºåÈöèÂêéÂú®Ê£ÄÊü• `-bootingProtectionStatus` Êó∂ÔºåÂèëÁé∞Â∑≤ÁªèÂ§Ñ‰∫éÂºÇÂ∏∏Áä∂ÊÄÅ‰∫ÜÔºåÂÆûÈôÖÊòØÊ≠£Â∏∏Áä∂ÊÄÅ„ÄÇÊâÄ‰ª•ÈúÄË¶Å‰ΩøÁî®`BootingProtectionStatusNormalChecking` Êù•ËøõË°åÂå∫ÂàÜ„ÄÇ*/+ (BootingProtectionStatus)bootingProtectionStatusWithContext:(NSString *)context continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix { BOOL isNormalChecking = [self isNormalCheckingWithContext:context]; if (isNormalChecking) { return BootingProtectionStatusNormalChecking; } BOOL isUpToBootingProtectionCount = [self isUpToBootingProtectionCountWithContext:context continuousCrashOnLaunchNeedToFix:continuousCrashOnLaunchNeedToFix]; if (!isUpToBootingProtectionCount) { return BootingProtectionStatusNormal; } BootingProtectionStatus type; BOOL isFixingCrash = [self isFixingCrashWithContext:context]; if (isFixingCrash) { type = BootingProtectionStatusFixing; } else { type = BootingProtectionStatusNeedFix; } return type;}- (NSUInteger)crashCount { return [[self class] crashCountWithContext:_context];}- (void)setCrashCount:(NSInteger)count { if (count &gt;=0) { [[self class] setCrashCount:count context:_context]; }}- (void)setIsFixing:(BOOL)isFixingCrash { [[self class] setIsFixing:isFixingCrash context:_context];}/*!* ÊòØÂê¶Ê≠£Âú®‰øÆÂ§ç*/- (BOOL)isFixingCrash { return [[self class] isFixingCrashWithContext:_context];}- (void)setIsNormalChecking:(BOOL)isNormalChecking { [[self class] setIsNormalChecking:isNormalChecking context:_context];}/*!* ÊòØÂê¶Ê≠£Âú®Ê£ÄÊü•*/- (BOOL)isNormalChecking { return [[self class] isNormalCheckingWithContext:_context];}+ (NSUInteger)crashCountWithContext:(NSString *)context { NSString *continuousCrashOnLaunchCounterKey = [self continuousCrashOnLaunchCounterKeyWithContext:context]; NSUInteger crashCount = [[NSUserDefaults standardUserDefaults] integerForKey:continuousCrashOnLaunchCounterKey]; NSString *logString = [NSString stringWithFormat:@&quot;crashCount:%@&quot;, @(crashCount)]; [[self class] Logger:logString]; return crashCount;}+ (void)setCrashCount:(NSUInteger)count context:(NSString *)context { NSString *continuousCrashOnLaunchCounterKey = [self continuousCrashOnLaunchCounterKeyWithContext:context]; NSString *logString = [NSString stringWithFormat:@&quot;setCrashCount:%@&quot;, @(count)]; [[self class] Logger:logString]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setInteger:count forKey:continuousCrashOnLaunchCounterKey]; [defaults synchronize];}+ (void)setIsFixing:(BOOL)isFixingCrash context:(NSString *)context { NSString *continuousCrashFixingKey = [[self class] continuousCrashFixingKeyWithContext:context]; NSString *logString = [NSString stringWithFormat:@&quot;setisFixingCrash:{%@}&quot;, @(isFixingCrash)]; [[self class] Logger:logString]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setBool:isFixingCrash forKey:continuousCrashFixingKey]; [defaults synchronize];}+ (BOOL)isFixingCrashWithContext:(NSString *)context { NSString *continuousCrashFixingKey = [[self class] continuousCrashFixingKeyWithContext:context]; BOOL isFixingCrash = [[NSUserDefaults standardUserDefaults] boolForKey:continuousCrashFixingKey]; NSString *logString = [NSString stringWithFormat:@&quot;isFixingCrash:%@&quot;, @(isFixingCrash)]; [[self class] Logger:logString]; return isFixingCrash;}+ (void)setIsNormalChecking:(BOOL)isNormalChecking context:(NSString *)context { NSString *continuousCrashNormalCheckingKey = [[self class] continuousCrashNormalCheckingKeyWithContext:context]; NSString *logString = [NSString stringWithFormat:@&quot;setIsNormalChecking:{%@}&quot;, @(isNormalChecking)]; [[self class] Logger:logString]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setBool:isNormalChecking forKey:continuousCrashNormalCheckingKey]; [defaults synchronize];}+ (BOOL)isNormalCheckingWithContext:(NSString *)context { NSString *continuousCrashFixingKey = [[self class] continuousCrashNormalCheckingKeyWithContext:context]; BOOL isFixingCrash = [[NSUserDefaults standardUserDefaults] boolForKey:continuousCrashFixingKey]; NSString *logString = [NSString stringWithFormat:@&quot;isIsNormalChecking:%@&quot;, @(isFixingCrash)]; [[self class] Logger:logString]; return isFixingCrash;}- (BOOL)isUpToBootingProtectionCount { return [[self class] isUpToBootingProtectionCountWithContext:_context continuousCrashOnLaunchNeedToFix:_continuousCrashOnLaunchNeedToFix];}+ (BOOL)isUpToBootingProtectionCountWithContext:(NSString *)context continuousCrashOnLaunchNeedToFix:(NSUInteger)continuousCrashOnLaunchNeedToFix { BOOL isUpToCount = [self crashCountWithContext:context] &gt;= continuousCrashOnLaunchNeedToFix; if (isUpToCount) { return YES; } return NO;}- (void)setReportBlock:(ABSReportBlock)block { _reportBlock = block;}- (void)setRepairBlock:(ABSRepairBlock)block { _repairBlock = block;}/*!* ‚ÄúËøûÁª≠ÂêØÂä®Â¥©Ê∫ÉËÆ°Êï∞‚Äù‰∏™Êï∞ÔºåÂØπÂ∫îÁöÑKey* ÈªòËÆ§‰∏∫ &quot;_CONTINUOUS_CRASH_COUNTER_KEY&quot;*/+ (NSString *)continuousCrashOnLaunchCounterKeyWithContext:(NSString *)context { BOOL isValid = [[self class] isValidString:context]; NSString *validContext = isValid ? context : @&quot;&quot;; NSString *continuousCrashOnLaunchCounterKey = [NSString stringWithFormat:@&quot;%@_CONTINUOUS_CRASH_COUNTER_KEY&quot;, validContext]; return continuousCrashOnLaunchCounterKey;}/*!* ÊòØÂê¶Ê≠£Âú®‰øÆÂ§çËÆ∞ÂΩïÔºåÂØπÂ∫îÁöÑKey* ÈªòËÆ§‰∏∫ &quot;_CONTINUOUS_CRASH_FIXING_KEY&quot;*/+ (NSString *)continuousCrashFixingKeyWithContext:(NSString *)context { BOOL isValid = [[self class] isValidString:context]; NSString *validContext = isValid ? context : @&quot;&quot;; NSString *continuousCrashFixingKey = [NSString stringWithFormat:@&quot;%@_CONTINUOUS_CRASH_FIXING_KEY&quot;, validContext]; return continuousCrashFixingKey;}/*!* ÊòØÂê¶Ê≠£Âú®Ê£ÄÊü•ÊòØÂê¶Âú®ÁâπÂÆöÊó∂Èó¥ÂÜÖ‰ºöCrashÔºåÂØπÂ∫îÁöÑKey* ÈªòËÆ§‰∏∫ &quot;_CONTINUOUS_CRASH_CHECKING_KEY&quot;*/+ (NSString *)continuousCrashNormalCheckingKeyWithContext:(NSString *)context { BOOL isValid = [[self class] isValidString:context]; NSString *validContext = isValid ? context : @&quot;&quot;; NSString *continuousCrashFixingKey = [NSString stringWithFormat:@&quot;%@_CONTINUOUS_CRASH_CHECKING_KEY&quot;, validContext]; return continuousCrashFixingKey;}#pragma mark -#pragma mark - log and util Methods+ (void)setLogger:(void (^)(NSString *))logger { Logger = [logger copy];}+ (void)Logger:(NSString *)log { if (Logger) Logger(log);}+ (BOOL)isValidString:(id)notValidString { if (!notValidString) { return NO; } if (![notValidString isKindOfClass:[NSString class]]) { return NO; } NSInteger stringLength = 0; @try { stringLength = [notValidString length]; } @catch (NSException *exception) {} if (stringLength == 0) { return NO; } return YES;}@end ‰∏ãÈù¢ÊòØÁõ∏Â∫îÁöÑÈ™åËØÅÊ≠•È™§Ôºö Á≠âÂæÖ15Áßí‰ºöÊúâÂØπÂ∫îËÆ°Êï∞Ê∏ÖÈõ∂ÁöÑÊìç‰ΩúÊó•ÂøóËæìÂá∫Ôºö 1234567891011121314152018-01-18 16:25:37.162980+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºöCYLBootingProtection: Launch continuous crash report2018-01-18 16:25:37.163140+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºösetIsNormalChecking:{0}2018-01-18 16:25:37.165738+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºösetisFixingCrash:{0}2018-01-18 16:25:37.166883+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºöcrashCount:02018-01-18 16:25:37.167102+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºöcrashCount:02018-01-18 16:25:37.167253+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºösetIsNormalChecking:{1}2018-01-18 16:25:37.167938+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºösetCrashCount:12018-01-18 16:25:37.168806+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞Ôºöneed no repair2018-01-18 16:25:52.225197+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºöCYLBootingProtection: long live the app ( more than 15 seconds ), now reset crash counts2018-01-18 16:25:52.225378+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºösetCrashCount:02018-01-18 16:25:52.226234+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºösetIsNormalChecking:{0}2018-01-18 16:25:52.226595+0800 BootingProtection[89773:15553277] üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[AppDelegate onBeforeBootingProtection]_block_invokeÔºàÂú®Á¨¨45Ë°åÔºâÔºåÊèèËø∞ÔºösetisFixingCrash:{0} Posted by ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÂéüÂàõÊñáÁ´†ÔºåÁâàÊùÉÂ£∞ÊòéÔºöËá™Áî±ËΩ¨ËΩΩ-ÈùûÂïÜÁî®-ÈùûË°çÁîü-‰øùÊåÅÁΩ≤Âêç | Creative Commons BY-NC-ND 3.0","link":"/ÁºñÁ®ã/Ô£ø/crash/"},{"title":"iOS-Âà∂‰ΩúFramework","text":"ÂâçË®Ä‰πãÂâçÊúâÂæàÂ§öÁöÑÂ§ßÁ•û‰ª¨Â∑≤ÁªèÂÜôËøáframeworkÁöÑÂà∂‰ΩúÔºå‰ΩÜÊúÄËøëÁî±‰∫éXcode7ÁöÑÂá∫Áé∞ÔºåÂæàÂ§ö‰πãÂâçÁöÑÊïôÁ®ãÂÜÖÂÆπÂ∑≤Áªè‰∏çÁ¨¶ÔºåÂØπ‰∫éÂàùÂ≠¶ËÄÖÊù•ËØ¥ÔºåÊâæÂà∞‰∏ÄÁØáËÉΩÂ§üÁõ¥Êé•Êòé‰∫ÜÔºåÁÆÄÂçïÊòìÂ≠¶ÁöÑÂà∂‰ΩúframeworkÁöÑÊñáÁ´†ÊØîËæÉÂõ∞Èöæ„ÄÇÊú¨ÊñáÂ∞ÜÂü∫‰∫éXcode7ÂàõÂª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂ∑•Á®ãÔºåÈÄöËøá‰∏§ÁßçÊñπÊ≥ïÊù•ÊïôÂ§ßÂÆ∂Â¶Ç‰ΩïÂà∂‰Ωú‰∏Ä‰∏™Ëá™Â∑±ÁöÑframework„ÄÇ ÁÆÄ‰ªãMac OS XÊâ©Â±ï‰∫ÜframeworkÁöÑÂäüËÉΩÔºåËÆ©Êàë‰ª¨ËÉΩÂ§üÂà©Áî®ÂÆÉÊù•ÂÖ±‰∫´‰ª£Á†ÅÂíåËµÑÊ∫ê„ÄÇÈÄöËøáframeworkÊàë‰ª¨ÂèØ‰ª•ÂÖ±‰∫´ÊâÄÊúâÂΩ¢ÂºèÁöÑËµÑÊ∫êÔºåÂ¶ÇÂä®ÊÄÅÂÖ±‰∫´Â∫ìÔºånibÊñá‰ª∂ÔºåÂõæÂÉèÂ≠óÁ¨¶ËµÑÊ∫ê‰ª•ÂèäÊñáÊ°£Á≠â„ÄÇÁ≥ªÁªü‰ºöÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂ∞ÜframeworkËΩΩÂÖ•ÂÜÖÂ≠ò‰∏≠ÔºåÂ§ö‰∏™Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•ÂêåÊó∂‰ΩøÁî®Âêå‰∏Ä‰∏™framework„ÄÇËøôÁßçÊñπÊ≥ïÂèØ‰ª•‰ΩøÂæó‰Ω†ÁöÑ‰ª£Á†ÅÊòìÂàÜ‰∫´ÔºåÂú®Â§ö‰∏™Â∑•Á®ã‰∏≠Â§çÁî®ÔºåÂπ∂‰∏îÂèØ‰ª•ÈöêËóèÂÆûÁé∞ÁªÜËäÇÔºåÊéßÂà∂ÂÖ¨ÂºÄÁöÑÂ§¥Êñá‰ª∂„ÄÇ Âà∂‰ΩúÊ≠•È™§ ÊâìÂºÄXcodeÔºåÂàõÂª∫Êñ∞Â∑•Á®ã„ÄÇÊâã‰∏ãÁïôÊÉÖÔºåËØ∑ÂÖàÁúãÂõæÔºÅ ÂàõÂª∫ÂäüËÉΩÁ±ª„ÄÇËøôÈáåÊàëÂàõÂª∫‰∏Ä‰∏™ÁªßÊâøËá™NSObjectÁöÑSayHelloÁ±ªÂú®Êñ∞ÂàõÂª∫ÁöÑÁ±ªÈáåÈù¢Â£∞ÊòéÊñπÊ≥ïÂπ∂ÂÆûÁé∞„ÄÇËøôÈáåÊàëÂÜô‰∏Ä‰∏™sayHelloÁöÑÊñπÊ≥ïÔºå‰ª•‰æøÂêéÈù¢ÊµãËØï‰ΩøÁî®„ÄÇ SayHello.h 1234#import &lt;Foundation/Foundation.h&gt;@interface SayHello : NSObject-(void)sayHello;@end SayHello.m 1234567 #import &quot;SayHello.h&quot;@implementation SayHello-(void)sayHello { NSLog(@&quot;‰Ω†Â•ΩÔºåÁ¨¨‰∏ÄÊ¨°ËßÅÈù¢ÔºåËØ∑Â§öÂÖ≥ÁÖß&quot;); } @end Âú®TARGETS‰∏ãÈÄâ‰∏≠Â∑•Á®ãÔºåÂú®Build Settings‰∏ãÊõ¥ÊîπÂá†‰∏™ÂèÇÊï∞„ÄÇ Âú®Architectures‰∏ãÂ¢ûÂä†armv7sÔºåÂπ∂ÈÄâ‰∏≠„ÄÇÂ∞ÜBuild Active Architecture Only ËÆæÁΩÆ‰∏∫NO„ÄÇ ËÆæÁΩÆHeadersÂ∞Ü‰Ω†Ë¶ÅÂÖ¨ÂºÄÁöÑÂ§¥Êñá‰ª∂ÁßªÂä®Âà∞Public‰∏ãÔºåË¶ÅÈöêËóèÁöÑÊîæÂú®PrivateÊàñËÄÖProject‰∏ãÔºåÂΩìÁÑ∂ÔºåÈöêËóèÁöÑÂ§¥Êñá‰ª∂Â∞±Êó†Ê≥ïÂÜçË¢´ÂºïÁî®„ÄÇ ÁÑ∂ÂêéÈúÄË¶ÅÂú®Test.hÔºàÂøÖÈ°ªÊòØÂÖ¨ÂºÄÁöÑÔºåÂê¶ÂàôÊó†Ê≥ïÂºïÁî®Ôºâ‰∏≠Â∞Ü‰Ω†ÊâÄÊúâË¶ÅÂÖ¨ÂºÄÁöÑ.hÂºïÂÖ•„ÄÇÊâìÂåÖframework ÊñπÊ≥ï‰∏Ä ÈÄâ‰∏≠Ê®°ÊãüÂô®ÔºåÁºñËØëÁ®ãÂ∫è ÈÄâ‰∏≠ÊµãËØïÊú∫ÔºåÁºñËØëÁ®ãÂ∫è Âú®finder‰∏≠ÊâæÂà∞frameworkÊñá‰ª∂ ÈÄâ‰∏≠Âõæ‰∏≠ÊâÄÊ†áÁ§∫ÁöÑframeworkÔºåÁÑ∂ÂêéÂè≥ÈîÆshow in finder„ÄÇÊâæÂà∞‰∏ãÂõæ‰∏≠ÊâÄÁ§∫ÁöÑTestÊñá‰ª∂Ôºå‰∏Ä‰∏™ÊòØDebug-iphoneosÔºàÁúüÊú∫Ôºâ‰∏ãÁöÑÔºå‰∏Ä‰∏™ÊòØDebug-iphonesimulator(Ê®°ÊãüÂô®)‰∏ãÁöÑ„ÄÇ 4.ÈÄöËøáÁªàÁ´ØÂëΩ‰ª§Â∞Ü‰∏§‰∏™frameworkÂêà‰∏∫‰∏Ä‰∏™Ê®°ÊãüÂô®ÂíåÁúüÊú∫ÈÉΩÂèØ‰ΩøÁî®ÁöÑframework„ÄÇ ÊâìÂºÄÊéßÂà∂Âè∞ËæìÂÖ• lipo -create iphoneos‰∏ãframeworkTestÁöÑË∑ØÂæÑ simulator‰∏ãframeworkTestÁöÑË∑ØÂæÑ -output Êñ∞ÁöÑË∑ØÂæÑÔºåËøôÊ†∑Â∞±ÂÆåÊàê‰∫ÜÊ®°ÊãüÂô®ÂíåÁúüÊú∫ÁâàÊú¨ÁöÑÂêàÂπ∂ÔºåÊñ∞Ë∑ØÂæÑ‰∏ãÁöÑframeworkTestÂ∞±ÊòØ‰Ω†ÂêàÂπ∂ÂêéÁöÑÊñá‰ª∂ÔºåÂ∞ÜËøô‰∏™Êñá‰ª∂ÂêçÂ≠óÊîπÊàêÂíå‰Ω†Êú™ÂêàÂπ∂‰πãÂâçÁöÑTest‰∏ÄÊ†∑ÁöÑÂêçÂ≠óÔºåÊîæÂà∞frameworkÊñá‰ª∂Â§π‰∏ãÔºåÊõøÊç¢ÊéâÂéüÊù•ÁöÑframeworkTestÊñá‰ª∂„ÄÇ ‰∏äÈù¢ËøôÊÆµÂëΩ‰ª§Â∞±ÊòØÊääÁúüÊú∫ÂíåÊ®°ÊãüÂô®ÁöÑframeworkTestÂêàÂπ∂Êàê‰∏Ä‰∏™MyNewFrameworktestÊñá‰ª∂Âπ∂Â≠òÊîæÂú®Ê°åÈù¢‰∏äÁöÑNewÊñá‰ª∂Â§π‰∏ã„ÄÇ 5.Â∞Ü‰øÆÊîπÂêéÁöÑframeworkÊã∑Ë¥ùÂá∫Êù•‰øùÂ≠òÔºåËøôÂ∞±ÊòØÊàë‰ª¨ÊúÄÁªàÂà∂‰ΩúÁöÑframework„ÄÇ ÊñπÊ≥ï‰∫å 1.ÈÄâ‰∏≠TARGETS‰∏ãÁöÑÂ∑•Á®ãÔºåÁÇπÂáª‰∏äÊñπÁöÑEditor,ÈÄâÊã©Add TargetÂàõÂª∫‰∏Ä‰∏™Aggregate. ÈÄâÊã©Other‰∏ãÁöÑAggregateÔºåÁÇπÂáªNextÂàõÂª∫„ÄÇ 2.ÂµåÂÖ•ËÑöÊú¨„ÄÇÈÄâ‰∏≠ÂàöÂàöÂàõÂª∫ÁöÑAggregate,ÁÑ∂ÂêéÈÄâ‰∏≠Âè≥‰æßÁöÑBuild Phases,ÁÇπÂáªÂ∑¶‰∏ãÊñπÂä†Âè∑ÔºåÈÄâÊã©New Run Script Phase Â∞ÜËøôÊÆµËÑöÊú¨Â§çÂà∂ËøõÂéª„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041# Sets the target folders and the final framework product.# Â¶ÇÊûúÂ∑•Á®ãÂêçÁß∞ÂíåFrameworkÁöÑTargetÂêçÁß∞‰∏ç‰∏ÄÊ†∑ÁöÑ ËØùÔºåË¶ÅËá™ÂÆö‰πâFMKNAME# ‰æãÂ¶Ç: FMK_NAME = &quot;MyFramework&quot;FMK_NAME=${PROJECT_NAME}# Install dir will be the final output to the framework.# The following line create it in the root folder of the current project.INSTALL_DIR=${SRCROOT}/Products/$ {FMK_NAME}.framework# Working dir will be deleted after the framework creation.WRK_DIR=buildDEVICE_DIR=${WRK_DIR}/Release-iphoneos/$ {FMK_NAME}.frameworkSIMULATOR_DIR=${WRK_DIR}/Release-iphonesimulator/${FMK_NAME}.framework# -configuration ${CONFIGURATION}# Clean and Building both architectures.xcodebuild -configuration &quot;Release&quot; -target &quot;${FMK_NAME}&quot; -sdk iphoneos clean buildxcodebuild -configuration &quot;Release&quot; -target &quot;${FMK_NAME}&quot; -sdk iphonesimulator clean build# Cleaning the oldest.if [ -d &quot;${INSTALL_DIR}&quot; ]thenrm -rf &quot;${INSTALL_DIR}&quot; fi mkdir -p &quot;${INSTALL_DIR}&quot;cp -R &quot;${DEVICE_DIR}/&quot; &quot;${INSTALL_DIR}/&quot;# Uses the Lipo Tool to merge both binary files (i386 + armv6/armv7) into one Universal final product.lipo -create &quot;${DEVICE_DIR}/${FMK_NAME}&quot; &quot;${SIMULATOR_DIR}/${FMK_NAME}&quot; -output &quot;$ {INSTALL_DIR}/${FMK_NAME}&quot;rm -r &quot;${WRK_DIR}&quot;open &quot;${INSTALL_DIR}&quot; 3.ÁºñËØë„ÄÇÂ¶ÇÂõæÊâÄÁ§∫Ôºåcommand+BÁºñËØë„ÄÇ 4.Âú®finder‰∏≠ÊâæÂà∞frameworkÔºåÊã∑Ë¥ùÂá∫Êù•„ÄÇ ‰ΩøÁî®Âà∂‰ΩúÂÆåÊàêÁöÑframeworkÁõ¥Êé•Â∞Ü‰Ω†Âà∂‰ΩúÂá∫Êù•ÁöÑframeworkÊ∑ªÂä†Âà∞Ë¶Å‰ΩøÁî®ÁöÑÂ∑•Á®ãÈáåÔºåÂú®ÈúÄË¶Å‰ΩøÁî®ÁöÑÊñá‰ª∂ÈáåÂºïÂÖ•Â§¥Êñá‰ª∂Ôºå‰ΩøÁî®framework‰∏≠ÁöÑÂäüËÉΩÁ±ª„ÄÇÂ¶Ç‰∏ãÂõæ ÊèêÈÜí Âú®Âà∂‰ΩúframeworkÊàñËÄÖlibÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûú‰ΩøÁî®‰∫ÜcategoryÔºåÂàô‰ΩøÁî®ÊîπFMWKÁöÑÁ®ãÂ∫èËøêË°åÊó∂‰ºöcrashÔºåÊ≠§Êó∂ÈúÄË¶ÅÂú®ËØ•Â∑•Á®ã‰∏≠ other linker flagsÊ∑ªÂä†‰∏§‰∏™ÂèÇÊï∞ -ObjC -all_load. Â∏¶ÊúâÂõæÁâáËµÑÊ∫êÁöÑÈúÄË¶ÅÊääÂõæÁâáÊâìÂåÖÊàêBundleÊñá‰ª∂ÔºåÂíåframework‰∏ÄËµ∑Êã∑Ë¥ùÂà∞Áõ∏Â∫îÁöÑÈ°πÁõÆ‰∏≠„ÄÇ ÂÖ¨ÂºÄÁöÑÁ±ª‰∏≠Â¶ÇÊûúÂºïÁî®ÁöÑprivateÁöÑÁ±ªÔºåÊâìÂåÖ‰ª•ÂêéÂØπÂ§ñ‰ºöÊä•ÈîôÔºåÊâæ‰∏çÂà∞ÈÇ£‰∏™privateÁöÑÁ±ªÔºåÂèØ‰ª•ÊääÈÇ£‰∏™privateÁöÑ.hÊîæÂà∞ ÁªìË®ÄÁé∞Âú®ÔºåÁõ∏‰ø°‰Ω†Â∑≤ÁªèÂèØ‰ª•ÊåâÁÖßÊñáÊ°£Ê≠•È™§Âà∂‰ΩúÂá∫‰∏Ä‰∏™frameworkÔºåÁõ∏‰ø°ËøáÁ®ã‰∏≠ÂèØËÉΩËøò‰ºöÈÅáÂà∞‰∏Ä‰∫õÈóÆÈ¢òÔºåÂ∏åÊúõÂ§ßÂÆ∂ËÉΩÂ§üÊääËøô‰∫õÈóÆÈ¢òËÆ∞ÂΩïÂπ∂Êï¥ÁêÜÔºåÂ∞ÜËøô‰∫õÁªèÈ™åÂàÜ‰∫´Âá∫Êù•„ÄÇ‰πüÊ¨¢ËøéÂ§ßÂÆ∂ËÅîÁ≥ª„ÄÅËÆ®ËÆ∫„ÄÇÊúÄÂêéÔºåÂ∏åÊúõÂ§ßÂÆ∂ËÉΩÂÆåÊàêÂ∏¶ÊúâÂõæÁâáËµÑÊ∫êÁöÑBundleÁöÑÂà∂‰Ωú„ÄÇ Try your best!","link":"/ÁºñÁ®ã/Ô£ø/framework/"},{"title":"ÊûÑÂª∫iOSÁ®≥ÂÆöÂ∫îÁî®Êû∂ÊûÑÊó∂ÊñπÊ°àÈÄâÊã©ÁöÑÊÄùËÄÉ","text":"Â∑•Á®ãÁªìÊûÑÊû∂ÊûÑÔºåÂáèÂ∞ëËÄ¶ÂêàÊ∑∑‰π±‰ª•ÂèäÈò≤Ê≤ªÈúÄÊ±ÇÂ§ßÊîπÈÄ†ÊàêÁªìÊûÑÈáçÊûÑÔºåÂ¶Ç‰ΩïÊûÑÂª∫Á®≥ÂÆöÂèØÊâ©Â±ïÂèØÂèòÊç¢ÁöÑÂ∑•Á®ãÁªìÊûÑÁöÑÊÄùËÄÉ ÊàëÊâìÁÆóÈááÁî®Information flowÁöÑÊñπÂºèËá™‰∏äËÄå‰∏ãÔºå‰∏§Â§ßÂ±ÇÂàÜ‰∏∫Âü∫Á°ÄÂ±ÇÂíåÂ±ïÁé∞Â±ÇÁöÑÁªìÊûÑ„ÄÇÂü∫Á°ÄÂ±ÇÂàÜ‰∏∫Â§öÂ±ÇÔºåÂ±ïÁé∞Â±Ç‰πüÂèØÂàÜ‰∏∫Â§öÂ±Ç„ÄÇ‰∏ªË¶ÅÊÄùÊÉ≥ÊòØÂ∞ÜÂü∫Á°ÄÂ±ÇÁöÑÊúÄ‰∏ã‰∏ÄÂ±ÇÂΩìÂÅöÈõ∂ÈÉ®‰ª∂ÔºåÂ∞Ü‰∏öÂä°Â±ÇÊúÄ‰∏ãÂ±ÇÂΩìÂÅöÁªÑË£ÖÂ§ßÈÉ®‰ª∂ÔºåÈÄöËøáÊµÅÁ®ã‰∏≤Ëµ∑Êù•ÂΩ¢Êàê‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ‰∫ßÂìÅÔºåÂÅöÈõ∂‰ª∂Êó∂ÊåâÁÖßÂÅöÂá∫‰∏Ä‰∏™Â∞±ÊâîËøõÂØπÂ∫îÂü∫Á°ÄÂ±ÇÁöÑÁØÆÂ≠êÈáåÊÄùË∑ØÊù•ÔºåÁõÆÂΩïÁªìÊûÑ‰πüÂèØ‰ª•ÊåâÁÖßËøôÁßçÊù•ËøõË°å„ÄÇËøô‰∏§Â§ßÂ±ÇÁöÑÊúÄ‰∏ãÂ±ÇÊåâÁÖßÈõ∂‰ª∂ÊãÜÂæóË∂äÂ∞èË∂äÂÆπÊòìÂ∫îÂØπÈúÄÊ±ÇÂèòÂåñË∂äÂÆπÊòì‰øùÊä§Â∑©Âõ∫‰∏äÂ±ÇÁöÑÊÄùË∑ØÊù•Â∞±Â•Ω„ÄÇÊãøÂæÆ‰ø°Ëøô‰∏™Â§ßÂÆ∂ÈÉΩÁÜüÊÇâÁöÑ‰∫ßÂìÅÁöÑÂá†‰∏™ÂäüËÉΩÊù•ÁÆÄÂçïÁ§∫‰æãËØ¥Êòé‰∏ãËøô‰∏™ÊÄùË∑ØÊûÑÂª∫ÂêéÁöÑÁªìÊûÑÔºåÊ®°ÂùóÊØîËæÉÂ§öÔºå‰∏Ä‰∫õÊ®°ÂùóÂ∞±‰∏çÊ∑±ÂÖ•Âà∞ÊúÄÂ∫ïÂ±ÇÂàÜÊûê‰∫ÜÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556Âü∫Á°ÄÂ±ÇÔºç ÁΩëÁªúÔºçÔºç Êî∂ÂèëÊï∞ÊçÆÔºçÔºçÔºçÂçï‰æãÔºàÊåÅÁª≠‰ΩøÁî®Êï∞ÊçÆÔºâÔºçÔºçÔºçÊú¨Âú∞ÔºàÁºìÂ≠òÂíåÊåÅÁª≠ÂåñÂ≠òÂÇ®Êï∞ÊçÆÂØπ‰∏öÂä°ÁöÑÂ∞ÅË£ÖËæìÂá∫ÔºâÔºçÔºçÔºçÂçïÊ¨°‰ΩøÁî®ÔºàAPIÊé•Âè£ModelÂ∞ÅË£ÖËæìÂá∫Âíå‰∏öÂä°ÈÄªËæëÂ∞ÅË£ÖÁöÑViewModelÔºåÂ∞ÜËøô‰∫õÂÅö‰∏∫‰∏öÂä°Èõ∂‰ª∂ÔºâÔºç Â≠òÂÇ®ÔºçÔºçÔºç NSUserDefaultÔºàÂØπËΩªÈáèÈúÄË¶ÅÂ≠òÂÇ®ÁöÑÊ∑ªÂä†‰∏ã‰∏ÄÂ±Ç‰∏öÂä°Èõ∂‰ª∂Â∞ÅË£ÖÔºâÔºçÔºçÔºç keychainÔºàÂØπÂÆâÂÖ®Á∫ßÂà´ËæÉÈ´òÈúÄË¶ÅÂ≠òÂÇ®ÁöÑÊ∑ªÂä†‰∏ã‰∏ÄÂ±Ç‰∏öÂä°Èõ∂‰ª∂Â∞ÅË£ÖÔºâÔºçÔºçÔºç Êñá‰ª∂Â≠òÂÇ®ÔºàÂØπÊó∂ÊïàÈúÄÊ±ÇÁü≠ÁöÑÈúÄË¶ÅÂ≠òÂÇ®ÁöÑÊ∑ªÂä†‰∏ã‰∏ÄÂ±Ç‰∏öÂä°Èõ∂‰ª∂Â∞ÅË£ÖÔºâÔºçÔºçÔºç Êï∞ÊçÆÂ∫ìÂ≠òÂÇ®ÔºàÂØπÊï∞ÊçÆÈáèÂ§ßÁöÑÈúÄË¶ÅÂ≠òÂÇ®ÁöÑÊ∑ªÂä†‰∏ã‰∏ÄÂ±Ç‰∏öÂä°Èõ∂‰ª∂Â∞ÅË£ÖÔºå‰∏öÂä°Â±Ç‰∏ä‰∏ÄÂ±ÇÂä†‰∏ÄÂ±ÇÂ∞ÅË£ÖCoreDataÊàñSQLiteÊñπ‰æøÊó•ÂêéÂàáÊç¢Êï∞ÊçÆÂ∫ìÁî®ÔºâÔºç Âä®ÁîªÔºà‰∏ãÂ±ÇÂ∞ÜÂä®ÁîªÊ°ÜÊû∂ËæìÂá∫ÊàêÂêÑ‰∏™ÂèØ‰ª•Â§çÁî®ÁöÑÂä®ÁîªÂäüËÉΩÂ∞èÈõ∂‰ª∂ÔºâÔºç ËßÜÂõæÈ£éÊ†ºÔºç ÂàóË°®Êéß‰ª∂ÔºçÔºç ‰∏äÊãâÂä†ËΩΩÊõ¥Â§öÔºçÔºç ‰∏ãÊãâÂà∑Êñ∞ÔºçÔºç GuideViewÔºç WebViewÊéß‰ª∂Ôºç AlertViewÔºç iOSÁ≥ªÁªüÁ©∫Èó¥Â∞ÅË£ÖÔºçÔºç ÊãçÁÖßÊéß‰ª∂ÔºçÔºç ÈÄöËÆØÂΩïÔºç ‰∫åÁª¥Á†ÅÔºç ËØ≠Èü≥Ôºç ÂÆâÂÖ®Ôºç ÊîØ‰ªòÔºç ÁªüËÆ°Ôºç Êó•ÂøóÂ±ïÁé∞Â±ÇÔºç È¶ñÈ°µÔºçÔºç ËÆ¢ÈòÖÔºçÔºç Êâ´Êèè‰∫åÁª¥Á†ÅÔºçÔºç ÂèëÂ∏ÉËßÜÈ¢ëÔºç ÂàóË°®ÔºçÔºç Êó∂Èó¥ËΩ¥ÂàóË°®ÔºçÔºçÔºç ListviewÂ§¥ÈÉ®Â∞ÅÈù¢ÔºçÔºçÔºç Â§ñÈìæÊÉÖÂÜµCellÔºçÔºçÔºç ÂõæÁâáCellÔºçÔºçÔºç ÂπøÂëäÊèíÂÖ•CellÔºçÔºçÔºç ÁïôË®ÄËØÑËÆ∫ÔºçÔºçÔºç ËµûÂå∫ÂüüÔºçÔºç ÊàëÁöÑÂàóË°®ÔºçÔºç ËÆ¢ÈòÖÂàóË°®ÔºçÔºç ÊñáÁ´†ÂàóË°®Ôºç ËØ¶ÁªÜÈ°µÔºçÔºç ÂàÜ‰∫´ÔºçÔºç ÂÜÖÂÆπÂå∫ÔºçÔºç ËØÑËÆ∫Ôºç ÁôªÂΩïÔºçÔºç Ê≥®ÂÜåÔºçÔºç ÁôªÂΩïÔºçÔºç ÂøòËÆ∞ÂØÜÁ†ÅÔºçÔºç Êù°Ê¨æÔºçÔºç ‰∏ä‰º†Â§¥ÂÉèÔºçÔºç ‰∏™‰∫∫‰ø°ÊÅØ‰øÆÊîπ Âü∫Á°ÄÂ±Ç‰∏≠ÂêÑ‰∏™Ê®°Âùó‰∏äÂ±ÇÂèØ‰ª•‰ΩøÁî®Á±ª‰ººCocoaPodÊàñCathageÊñπÂºèÔºå‰∏ã‰∏ÄÂ±ÇÂÜçÂØπÂÖ∂ÂºïÁî®ËøõË°å‰∏öÂä°Â∞ÅË£Ö„ÄÇ ËøôÈáåÊ≥®ÊÑèÊúÄ‰∏ãÂ±ÇÈúÄË¶ÅÊãÜÁöÑÁ≤íÂ∫¶Ë∂äÁªÜË∂äÂ•Ω„ÄÇÂáèÂ∞ëÊ®™Âêë‰æùËµñ„ÄÇÁ±ª‰ººCommonËøôÊ†∑ÁöÑ‰∏úË•øÂèØ‰ª•ÊãÜÂà∞Âü∫Á°ÄÂ±ÇÁöÑÂØπÂ∫îÊ®°ÂùóÈáåÔºåÊØîÂ¶ÇËØ¥ÈÖçÁΩÆÊñá‰ª∂ÈáåÂíåÁªüËÆ°Áõ∏ÂÖ≥ÁöÑÊîæÂà∞Âü∫Á°ÄÂ±ÇÁöÑÁªüËÆ°ÈáåÔºåÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÊîæÂà∞ÁΩëÁªúÈáåÔºåÈ¢úËâ≤Â≠ó‰ΩìÊîæÂà∞ËßÜÂõæÈ£éÊ†ºÈáåÔºå‰∏çË¶ÅÈÉΩÂ†ÜÂú®‰∏Ä‰∏™Êñá‰ª∂Èáå„ÄÇÂÜçÊàñËÄÖÊòØÂêÑÁßçÁ¨¨‰∏âÊñπÁöÑCategory‰πüÊîæÂà∞ÂØπÂ∫îÁöÑÁªÑÈáåÔºåÊØîÂ¶ÇËØ¥UIView+AdditionsÂíåUIColor+ExpandedÂ∞±ÊîæÂà∞ËßÜÂõæÈ£éÊ†ºËøô‰∏™Ê®°Âùó‰∏≠Ôºå‰∏çË¶Å‰∏ìÈó®Êêû‰∏™CategoryÊîæÊâÄÊúâÁöÑCategory„ÄÇ Êï∞ÊçÆÊµÅÊéßÂà∂Ê®°ÂºèMVCÂíåMVCS/MVVM/VIPERÁöÑÈÄâÊã©ÂÖ∂ÂÆûËøô‰∫õÈÉΩÊòØÂØπMVCÁöÑÊâ©Â±ïÔºåÂè™ÊòØÊâ©Â±ïÁöÑÊñπÂêë‰∏çÂêåËÄåÂ∑≤„ÄÇVIPERÊääËßÜÂõæÂíåÊï∞ÊçÆÊãÜÂæóËøáÁªÜÂèòÁõ∏Â¢ûÂä†‰∫ÜÂ§çÊùÇÂ∫¶ÂæàÂ§ö‰∫∫‰πüÈÉΩ‰∏çÁÜü‰πüÊ≤°ÊúâÊÑèÊÑøÂéª‰∫ÜËß£ÂÆÉÁöÑÂÆûÁé∞Ôºå‰ΩÜÊòØÊ®°ÂùóÂ§çÁî®Âç¥ËææÂà∞‰∫ÜÊúÄ‰ºòÔºåMVCSÊòØËøôÂá†‰∏™ÈáåÂØπMVC‰ºòÂåñÊúÄÁÆÄÂçïÁöÑÂè™ÊòØÊääÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÊãÜÂºÄ‰∫Ü„ÄÇMVVMÊ≠£Â•Ω‰ªã‰∫éVIPERÂíåMVCS‰πãÈó¥Ôºå‰ªéViewControllerÈáåÊãÜÂá∫Êù•ÁöÑViewModelËÉΩÂ§üÂ∞ÜÊï∞ÊçÆÁªèËøáÈÄªËæëÂ§ÑÁêÜÁî®‰∫éViewÁöÑÊòæÁ§∫ÔºåViewÊúâÊìç‰ΩúÁî®ËøáReactiveCocoaÂ∞Ü‰ø°Âè∑‰º†ÁªôViewModelÊù•Â§ÑÁêÜ„ÄÇ Â¶ÇÊûúÊòØÊàë‰∏™‰∫∫ÈÄâÊã©Êàë‰ºöÈÄâÊã©VIPERÔºåÂõ†‰∏∫ÂÆÉÊõ¥Á¨¶ÂêàÁªÜÁ≤íÂ∫¶Ê®°ÂùóÂàíÂàÜÁöÑÊÄùÊÉ≥„ÄÇ‰ΩÜÊòØÁî®Âú®Âõ¢ÈòüÂ§ö‰∫∫ÂºÄÂèë‰∏äÔºåËøòÊòØÂÅèÂêëMVVMËøôÁßçÊäò‰∏≠ÊñπÊ°à„ÄÇMVVMÊåâÁÖßÂÖàÂâçÂØπÂ∫îÁî®ÁöÑÁªìÊûÑÂàÜÂ±ÇÔºå‰ºöÂ∞ÜViewÂíåViewControllerÊîæÂà∞Â±ïÁé∞Â±ÇÁöÑÊúÄ‰∏ãÈù¢ÁöÑ‰∏§Â±ÇÈáåÔºåÂ∞ÜViewModelÂíåModelÊîæÂà∞Âü∫Á°ÄÂ±ÇÂØπÂ∫îÊ®°ÂùóÁöÑÊúÄ‰∏ãÈù¢‰∏ÄÂ±Ç‰∏≠„ÄÇÊúÄÂêéË¶ÅËØ¥ÁöÑÊòØÊó†ËÆ∫ÈÄâÊã©Âì™ÁßçÔºåÂè™Ë¶ÅÊòØÊåâÁÖßÂáèÂ∞ëViewControllerÂ§ßÂ∞èÔºåÂ∞ÜÊîπËÉñÁöÑÂú∞ÊñπÊîæÂà∞ModelÊàñViewÈÉΩÊòØÂèØ‰ª•ÁöÑÔºåÊãõÂºèÂ≠¶Â§öÂêéÊúÄÈ´òÂ¢ÉÁïåÂ∞±ÊòØÊó†ÊãõËÉúÊúâÊãõÂòõÔºåÊúâÊó∂‰πü‰∏çÈúÄË¶ÅÂàªÊùøÁöÑÂú®‰∏Ä‰∏™È°πÁõÆ‰∏≠Â∞ÜÊâÄÊúâÁöÑÊ®°ÂùóÈÉΩÊåâÁÖßÁªü‰∏ÄÁöÑÊÄùË∑ØÁªôÊ°ÜÊ≠ªÔºåÊØîÂ¶ÇËØ¥‰∏Ä‰∏™Ê®°ÂùóÂæàÁÆÄÂçïÂ∞±Áî®MVCÔºå‰∏ÄËà¨Â§çÊùÇÂ∞±Áî®MVVMÔºåË¶ÅÊòØÈ°πÁõÆÊú¨Ë∫´‰∏öÂä°ÈùûÂ∏∏Â∫ûÂ§ßÂèØ‰ª•Êï¥‰ΩìÈááÁî®VIPERÊù•ËøõË°åViewControllerÁöÑÂÆåÂÖ®ÊãÜÂàÜ„ÄÇ ÂèØ‰ª•ÈÄöËøá‰∏ãÂàóÂõæË°®ÁúãÂÖ∂‰∏≠ÁöÑ‰∏çÂêåÔºö ÂêçÁß∞ ÈÄªËæëÂíåËßÜÂõæ Êï∞ÊçÆ MVC View + ViewController + Model MVCS View + ViewController + Store + Model MVVM View + ViewController + ViewModel + Model VIPER View + ViewController + Wireframe + Presenter + Interactor + Data Manager + Entity(Model) ‰ª£Á†ÅËßÑËåÉËøôÂùóÊúÄÊúâÊùÉÂ®ÅÁöÑÂ∫îËØ•ÊòØËãπÊûúËá™Â∑±ÊèêÂá∫ÁöÑhttps://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.htmlÔºåÊåâÁÖßËøôÂ•óÊù•ËÇØÂÆöÊòØÊ≤°ÈóÆÈ¢òÁöÑÔºåËÄå‰∏îÈ¶ñÂÖàÂ∫îËØ•ÈÅµÂÆà„ÄÇ‰ª£Á†ÅÁªìÊûÑ‰∏ªË¶ÅÊ†πÊçÆ‰∏çÂêåÂõ¢ÈòüÁöÑÁªèÈ™åÊù•ÂÅö„ÄÇ‰∏ãÈù¢‰∏æ‰∏™ÊàëÂ∏∏Áî®ÁöÑ‰ª£Á†ÅÁªìÊûÑ 123456789101112131415161718@property...#pragma mark - Life cycleÁîüÂëΩÂë®ÊúüÔºåÁ±ª‰ººaddSubviewÂíåNotificationÁöÑÁõëÂê¨ÂíåÈîÄÊØÅÈÉΩÊîæÂú®ËøôÈáå#pragma mark - InterfaceÊé•Âè£#pragma mark - Event response#pragma mark - Private methodÂ¶ÇÊûúÊòØViewControllerÔºåËøô‰∏™Âú∞ÊñπÂ∞±ÊòØÁò¶Ë∫´ÁöÑÂÖ≥ÈîÆÔºå‰∏öÂä°ÂíåÈÄªËæëÂäüËÉΩÁõ∏ÂÖ≥ÁöÑÂ∞±ÊîæÂà∞ViewModelÈáå„ÄÇ#pragma mark - Delegate‰ª£ÁêÜ#pragma mark - Getters and SettersÂª∫ËÆÆÊâÄÊúâÁöÑPropertyÈÉΩËÆæÁΩÆÔºåËøôÊ†∑‰øÆÊîπÈÖçÁΩÆ‰ºöÊØîËæÉÊñπ‰æøÔºåÁúãËµ∑Êù•‰∏ç‰ºöÂæàÊ∑∑‰π± ming1016","link":"/ÁºñÁ®ã/Ô£ø/gou-jian/"},{"title":"iOS Background Tasks","text":"‰∏âÁßçÊñπÂºè‰ΩøÂæóiOSÁ®ãÂ∫èÂç≥‰ΩøÂú®ÂÖ≥Èó≠ÊàñÂ¥©Ê∫ÉÁöÑÊÉÖÂÜµ‰∏ã‰πüËÉΩÂ§üÂú®ÂêéÂè∞ÊåÅÁª≠ËøõË°å‰∏Ä‰∫õ‰ªªÂä°ÔºåÊØîÂ¶ÇÊõ¥Êñ∞Á®ãÂ∫èÁïåÈù¢Âø´ÁÖßÔºå‰∏ãËΩΩÊñá‰ª∂Á≠â„ÄÇËøô‰∏â‰∏™ÊñπÊ≥ïÂàÜÂà´ÊòØBackground FetchÔºåRemote NotificationÂíåNSURLSessionÁöÑbackgroundSessionConfiguration Background FetchÂºÄÂêØÈ¶ñÂÖàÂú®info plistÊñá‰ª∂‰∏≠ÂºÄÂêØUIBackgroundModesÁöÑBackground fetch„ÄÇÊàñËÄÖÊâãÂä®ÁºñËæëËøô‰∏™ÂÄº1234&lt;key&gt;UIBackgroundModes&lt;/key&gt;&lt;array&gt; &lt;string&gt;fetch&lt;/string&gt;&lt;/array&gt; iOSÈªòËÆ§‰∏çËøõË°åbackground fetchÔºåÈúÄË¶ÅËÆæÁΩÆ‰∏Ä‰∏™Êó∂Èó¥ÁöÑÈó¥Èöî 123456- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ //UIApplicationBackgroundFetchIntervalMinimumË°®Á§∫Â∞ΩÂèØËÉΩÈ¢ëÁπÅÂéªËé∑ÂèñÔºåÂ¶ÇÊûúÈúÄË¶ÅÊåáÂÆöËá≥Â∞ëÂ§öÂ∞ëÊó∂Èó¥Êõ¥Êñ∞‰∏ÄÊ¨°Â∞±ÈúÄË¶ÅÁªôÂÆö‰∏Ä‰∏™Êó∂Èó¥ÂÄº [application setMinimumBackgroundFetchInterval:UIApplicationBackgroundFetchIntervalMinimum]; return YES;} ÊúÄÂêéÂú®App DelegateÈáåÂÆûÁé∞‰∏ãÈù¢ÁöÑÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÂè™ËÉΩÂú®30ÁßíÂÜÖÂÆåÊàê„ÄÇ 123456789101112131415161718192021222324252627- (void) application:(UIApplication *)applicationperformFetchWithCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler{ NSURLSessionConfiguration *sessionConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration]; NSURLSession *session = [NSURLSession sessionWithConfiguration:sessionConfiguration]; NSURL *url = [[NSURL alloc] initWithString:@&quot;https://yourserver.com/data.json&quot;]; NSURLSessionDataTask *task = [session dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) { if (error) { completionHandler(UIBackgroundFetchResultFailed); return; } // Ëß£ÊûêÂìçÂ∫î/Êï∞ÊçÆ‰ª•ÂÜ≥ÂÆöÊñ∞ÂÜÖÂÆπÊòØÂê¶ÂèØÁî® BOOL hasNewData = ... if (hasNewData) { completionHandler(UIBackgroundFetchResultNewData); } else { completionHandler(UIBackgroundFetchResultNoData); } }]; // ÂºÄÂßã‰ªªÂä° [task resume];} ÊµãËØï ÈÄöËøáÊü•ÁúãUIApplicationÁöÑapplicationState123456- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ NSLog(@&quot;Launched in background %d&quot;, UIApplicationStateBackground == application.applicationState); return YES;} Remote NotificationÂú®ÊôÆÈÄöÁöÑËøúÁ®ãÈÄöÁü•ÈáåÂ∏¶‰∏äcontent-availableÊ†áÂøóÂ∞±ÂèØ‰ª•Âú®ÈÄöÁü•Áî®Êà∑ÂêåÊó∂Âú®ÂêéÂè∞ËøõË°åÊõ¥Êñ∞„ÄÇÈÄöÁü•ÁªìÊûÑÂ¶Ç‰∏ã 123456{ &quot;aps&quot; : { &quot;content-available&quot; : 1 }, &quot;content-id&quot; : 42} Êé•Êî∂‰∏ÄÊù°Â∏¶Êúâcontent-availableÁöÑÈÄöÁü•‰ºöË∞ÉÁî®‰∏ãÈù¢ÁöÑÊñπÊ≥ï 12345678910- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler{ NSLog(@&quot;Remote Notification userInfo is %@&quot;, userInfo); NSNumber *contentID = userInfo[@&quot;content-id&quot;]; // Ê†πÊçÆ content ID ËøõË°åÊìç‰Ωú completionHandler(UIBackgroundFetchResultNewData);} Âà©Áî®NSURLSessionËøõË°åbackground transfer task‰ΩøÁî®[NSURLSessionConfiguration backgroundSessionConfiguration]ÂàõÂª∫‰∏Ä‰∏™ÂêéÂè∞‰ªªÂä°ÔºåÂΩìÂ∫îÁî®ÈÄÄÂá∫ÂêéÔºåÂ¥©Ê∫ÉÊàñËøõÁ®ãË¢´ÂÖ≥ÊéâÈÉΩËøòÊòØ‰ºöËøêË°å„ÄÇ ËåÉ‰æãÔºåÂÖàÂ§ÑÁêÜ‰∏ÄÊù°ËøúÁ®ãÈÄöÁü•ÔºåÂπ∂Â∞ÜNSURLSessionDownloadTaskÊ∑ªÂä†Âà∞ÂêéÂè∞‰º†ËæìÊúçÂä°ÈòüÂàó„ÄÇ 123456789101112131415161718192021222324252627282930313233- (NSURLSession *)backgroundURLSession{ static NSURLSession *session = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ NSString *identifier = @&quot;io.objc.backgroundTransferExample&quot;; NSURLSessionConfiguration* sessionConfig = [NSURLSessionConfiguration backgroundSessionConfiguration:identifier]; session = [NSURLSession sessionWithConfiguration:sessionConfig delegate:self delegateQueue:[NSOperationQueue mainQueue]]; }); return session;}- (void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler{ NSLog(@&quot;Received remote notification with userInfo %@&quot;, userInfo); NSNumber *contentID = userInfo[@&quot;content-id&quot;]; NSString *downloadURLString = [NSString stringWithFormat:@&quot;https://yourserver.com/downloads/%d.mp3&quot;, [contentID intValue]]; NSURL* downloadURL = [NSURL URLWithString:downloadURLString]; NSURLRequest *request = [NSURLRequest requestWithURL:downloadURL]; NSURLSessionDownloadTask *task = [[self backgroundURLSession] downloadTaskWithRequest:request]; task.taskDescription = [NSString stringWithFormat:@&quot;Podcast Episode %d&quot;, [contentID intValue]]; //ÊâßË°åresume‰øùËØÅÂºÄÂßã‰∫Ü‰ªªÂä° [task resume]; completionHandler(UIBackgroundFetchResultNewData);} ‰∏ãËΩΩÂÆåÊàêÂêéË∞ÉÁî®NSURLSessionDownloadDelegateÁöÑÂßîÊâòÊñπÊ≥ïÔºåËøô‰∫õÂßîÊâòÊñπÊ≥ïÂÖ®ÈÉ®ÊòØÂøÖÈ°ªÂÆûÁé∞ÁöÑ„ÄÇ‰∫ÜËß£ÊâÄÊúâÁ±ªÂûãsession taskÁöÑÁîüÂëΩÂë®ÊúüÂèØ‰ª•ÂèÇËÄÉÂÆòÊñπÊñáÊ°£Ôºöhttps://developer.apple.com/library/ios/documentation/cocoa/Conceptual/URLLoadingSystem/NSURLSessionConcepts/NSURLSessionConcepts.html#//apple_ref/doc/uid/10000165i-CH2-SW42 123456789101112131415161718192021222324252627#Pragma Mark - NSURLSessionDownloadDelegate- (void) URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didFinishDownloadingToURL:(NSURL *)location{ NSLog(@&quot;downloadTask:%@ didFinishDownloadingToURL:%@&quot;, downloadTask.taskDescription, location); // ÂøÖÈ°ªÁî® NSFileManager Â∞ÜÊñá‰ª∂Â§çÂà∂Âà∞Â∫îÁî®ÁöÑÂ≠òÂÇ®‰∏≠ÔºåÂõ†‰∏∫‰∏¥Êó∂Êñá‰ª∂Âú®ÊñπÊ≥ïËøîÂõûÂêé‰ºöË¢´Âà†Èô§ // ... // ÈÄöÁü• UI Âà∑Êñ∞}- (void) URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTaskdidResumeAtOffset:(int64_t)fileOffset expectedTotalBytes:(int64_t)expectedTotalBytes{}- (void) URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite{} ÂêéÂè∞ÁöÑ‰ªªÂä°ÂÆåÊàêÂêéÂ¶ÇÊûúÂ∫îÁî®Ê≤°ÊúâÂú®ÂâçÂè∞ËøêË°åÔºåÈúÄË¶ÅÂÆûÁé∞UIApplicationÁöÑ‰∏§‰∏™delegateËÆ©Á≥ªÁªüÂî§ÈÜíÂ∫îÁî® 1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void) application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier completionHandler:(void (^)())completionHandler{ // ‰Ω†ÂøÖÈ°ªÈáçÊñ∞Âª∫Á´ã‰∏Ä‰∏™ÂêéÂè∞ seesiong ÁöÑÂèÇÁÖß // Âê¶Âàô NSURLSessionDownloadDelegate Âíå NSURLSessionDelegate ÊñπÊ≥ï‰ºöÂõ†‰∏∫ // Ê≤°Êúâ ÂØπ session ÁöÑ delegate ËÆæÂÆöËÄå‰∏ç‰ºöË¢´Ë∞ÉÁî®„ÄÇÂèÇËßÅ‰∏äÈù¢ÁöÑ backgroundURLSession NSURLSession *backgroundSession = [self backgroundURLSession]; NSLog(@&quot;Rejoining session with identifier %@ %@&quot;, identifier, backgroundSession); // ‰øùÂ≠ò completion handler ‰ª•Âú®Â§ÑÁêÜ session ‰∫ã‰ª∂ÂêéÊõ¥Êñ∞ UI [self addCompletionHandler:completionHandler forSession:identifier];}- (void)URLSessionDidFinishEventsForBackgroundURLSession:(NSURLSession *)session{ NSLog(@&quot;Background URL session %@ finished events.\\n&quot;, session); if (session.configuration.identifier) { // Ë∞ÉÁî®Âú® -application:handleEventsForBackgroundURLSession: ‰∏≠‰øùÂ≠òÁöÑ handler [self callCompletionHandlerForSession:session.configuration.identifier]; }}- (void)addCompletionHandler:(CompletionHandlerType)handler forSession:(NSString *)identifier{ if ([self.completionHandlerDictionary objectForKey:identifier]) { NSLog(@&quot;Error: Got multiple handlers for a single session identifier. This should not happen.\\n&quot;); } [self.completionHandlerDictionary setObject:handler forKey:identifier];}- (void)callCompletionHandlerForSession: (NSString *)identifier{ CompletionHandlerType handler = [self.completionHandlerDictionary objectForKey: identifier]; if (handler) { [self.completionHandlerDictionary removeObjectForKey: identifier]; NSLog(@&quot;Calling completion handler for session %@&quot;, identifier); handler(); }} ming1016","link":"/ÁºñÁ®ã/Ô£ø/ios-background-tasks/"},{"title":"GPUÂ§ÑÁêÜÂõæÂÉè","text":"ShaderÁùÄËâ≤Âô®ShaderÂá∫Áé∞Âú®OpenGL ES 2.0‰∏≠ÔºåÂÖÅËÆ∏ÂàõÂª∫Ëá™Â∑±ÁöÑShader„ÄÇÂøÖÈ°ªÂêåÊó∂ÂàõÂª∫‰∏§‰∏™ShaderÔºåÂàÜÂà´ÊòØVertex shaderÂíåFragment shader. ShaderÂ∑•ÂÖ∑Shader‰ºöÊúâÂæàÂ§öÂùëÔºå‰∏çËøá‰∏Ä‰∫õÂ∑•ÂÖ∑ËÉΩÂ§üÂ∏ÆÂä©‰Ω†Ë∑≥ËøáËøô‰∫õÂùë GPUImageÔºöhttps://github.com/BradLarson/GPUImage ShaderToyÔºöhttps://www.shadertoy.com/ ShaderificÔºöhttps://www.shaderific.com/ Quartz ComposerÔºöÂÆòÊñπÂ∑•ÂÖ∑ Shader‰ΩøÁî®ËåÉ‰æãVertex shader12345678attribute vec4 position;attribute vec4 inputTextureCoordinateÔºõvarying vec2 textureCoordinate;void main(){ gl_position = position; textureCoordinate = inputTextureCoordinate.xy;} Fragment shaderÁõ¥ÈÄöÊª§Èïú 123456varying highp vec2 textureCoordinate; //highpÂ±ûÊÄßË¥üË¥£ÂèòÈáèÁ≤æÂ∫¶ÔºåËøô‰∏™Ë¢´Âä†ÂÖ•ÂèØ‰ª•ÊèêÈ´òÊïàÁéáuniform sampler2D inputImageTexture; //Êé•Êî∂‰∏Ä‰∏™ÂõæÁâáÁöÑÂºïÁî®ÔºåÂΩìÂÅö2DÁöÑÁ∫πÁêÜÔºåËøô‰∏™Êï∞ÊçÆÁ±ªÂûãÂ∞±ÊòØsmpler2D„ÄÇvoid main(){ gl_FragColor = texture2D(inputImageTexture, textureCoordinate); //textureÊòØGLSLÔºàÁùÄËâ≤ËØ≠Ë®ÄÔºâÁâπÊúâÁöÑÊñπÊ≥ï} GLSLÁùÄËâ≤ËØ≠Ë®ÄGLSLÁöÑÂÆòÊñπÂø´ÈÄüÂÖ•Èó®ÊåáÂØº OpenGL ESÔºöhttps://www.khronos.org/opengles/sdk/docs/reference_cards/OpenGL-ES-2_0-Reference-card.pdf OpenGLÔºöhttps://www.khronos.org/files/opengl-quick-reference-card.pdf ÂèòÈáèËµãÂÄº‰∏â‰∏™ÂèØ‰ª•ËµãÂÄºÁªôÊàë‰ª¨ÁöÑÂèòÈáèÁöÑÊ†áÁ≠æ UniformsÔºöÂú®Ê∏≤ÊüìÂæ™ÁéØÈáå‰Ωú‰∏∫‰∏çÂèòÁöÑËæìÂÖ•ÂÄº AttributesÔºöÈöèÈ°∂ÁÇπ‰ΩçÁΩÆ‰∏çÂêå‰ºöÂèòÁöÑËæìÂÖ•ÂÄº VaryingsÔºöÁî®Êù•Âú®Vertex shaderÂíåFragment shader‰πãÈó¥‰º†ÈÄí‰ø°ÊÅØÁöÑÔºåÊØîÂ¶ÇÂú®Vertex shader‰∏≠ÂÜôÂÖ•varyingÂÄºÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•Âú®Fragment shader‰∏≠ËØªÂèñÂíåÂ§ÑÁêÜ ÂêëÈáèÊúâÂæàÂ§öÁßçÂêëÈáèÔºå‰ΩÜÊòØÊúâ‰∏âÁßç‰ºöÁªèÂ∏∏ÁúãÂà∞ vec2Ôºö‰∏§‰∏™ÊµÆÁÇπÊï∞ÔºåÈÄÇÂêàÂú®Fragment shader‰∏≠‰øùÂ≠òXÂíåYÂùêÊ†áÁöÑÊÉÖÂÜµ vec3Ôºö‰∏â‰∏™ÊµÆÁÇπÊï∞ vec4ÔºöÂõõ‰∏™ÊµÆÁÇπÊï∞ÔºåÂú®ÂõæÂÉèÂ§ÑÁêÜ‰∏≠ÊåÅÁª≠ËøΩË∏™ÊØè‰∏™ÂÉèÁ¥†ÁöÑR,G,V,AËøôÂõõ‰∏™ÂÄº„ÄÇ Áü©ÈòµÊòØÊµÆÁÇπÊï∞ÁªÑÁöÑÊï∞ÁªÑ„ÄÇ‰∏â‰∏™ÁªèÂ∏∏Â§ÑÁêÜÁöÑÁü©ÈòµÂØπË±° mat2ÔºöÁõ∏ÂΩì‰∫é‰øùÂ≠ò‰∫Ü‰∏§‰∏™vec2ÂØπË±°ÁöÑÂÄºÊàñÂõõ‰∏™ÊµÆÁÇπÊï∞„ÄÇ mat3 mat4 ÂêëÈáèÂíåÁü©ÈòµËøêÁÆóÁ∫øÊÄß‰ª£Êï∞ÂèëÊå•‰ΩúÁî®ÁöÑÂú∞Êñπ„ÄÇÊÉ≥Áü•ÈÅìÁ∫øÊÄß‰ª£Êï∞Â¶Ç‰ΩïÂ∑•‰ΩúÂèØ‰ª•ÁúãËøô‰∏™ËµÑÊ∫êÁ´ôÔºöhttps://betterexplained.com/articles/linear-algebra-guide/ Á∫øÊÄß‰ª£Êï∞ÂèØ‰ª•‰∏ÄÊ¨°Âú®ÂæàÂ§öÂÄº‰∏äËøõË°åÂπ∂Ë°åÊìç‰ΩúÔºåsoÔºåÊ≠£Â•ΩÈÄÇÂêàÈúÄÊ±ÇÔºåGLSLÂÜÖÂª∫‰∫ÜÂæàÂ§öÂáΩÊï∞ÂèØ‰ª•Â§ÑÁêÜÂ∫ûÂ§ßÁöÑËÆ°ÁÆóËΩ¨Êç¢ GLSLÁâπÊúâÂáΩÊï∞GLSLÂÜÖÂª∫ÁöÑÂáΩÊï∞ÂèØ‰ª•Âú®ShaderificÁΩëÁ´ô‰∏äÊâæÂà∞Ôºöhttps://www.shaderific.com/glsl-functions„ÄÇÂæàÂ§öCËØ≠Ë®ÄÊï∞Â≠¶Â∫ìÂü∫Êú¨Êï∞Â≠¶ËøêÁÆóÈÉΩÊúâÂØπÂ∫îÁöÑÂáΩÊï∞„ÄÇ step()ÔºöGPUÂ§ÑÁêÜÊù°‰ª∂ÈÄªËæë‰∏çÊòØÂæàÂ•Ω„ÄÇstep()ÂÖÅËÆ∏Âú®‰∏ç‰∫ßÁîüÂàÜÊîØÁöÑÂâçÊèê‰∏ãÂÆûÁé∞Êù°‰ª∂ÈÄªËæë„ÄÇ‰º†ÂÖ•step()ÂáΩÊï∞ÁöÑÂÄºÂ∞è‰∫éÈòàÂÄºÂ∞±ËøîÂõû0.0ÔºåÂ§ß‰∫éÁ≠â‰∫éÈòàÂÄºÂ∞±ËøîÂõû1.0„ÄÇ mix()ÔºöÂ∞Ü‰∏§‰∏™È¢úËâ≤ÂÄºÊ∑∑Âêà‰∏∫‰∏Ä‰∏™„ÄÇ clamp()ÔºöÂèØ‰ª•Á°Æ‰øùÂÄºÂú®‰∏Ä‰∏™Âå∫Èó¥ÂÜÖ„ÄÇ Â§çÊùÇÁöÑShaderÁöÑ‰æãÂ≠ê‰∏Ä‰∏™È•±ÂíåÂ∫¶Ë∞ÉËäÇÁöÑFragment shaderÁöÑ‰æãÂ≠êÔºåÂá∫Ëá™„ÄäÂõæÂΩ¢ÁùÄËâ≤Âô®ÔºöÁêÜËÆ∫ÂíåÂÆûË∑µ„ÄãËøôÊú¨‰π¶„ÄÇ 1234567891011121314varying highp vec2 textureCoordinate; //uniform sampler2D inputImageTexture;uniform lowp float saturation;const mediump vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721); //ÂÖâ‰∫ÆÂ∫¶Èáå‰∏â‰∏™ÂÄºÁõ∏Âä†Ë¶Å‰∏∫1ÔºåÂêÑ‰∏™ÂÄº‰ª£Ë°®ÁùÄÈ¢úËâ≤ÁöÑÁôæÂàÜÊØîÔºå‰∏≠Èó¥ÊòØÁªøËâ≤ÁöÑÂÄºÔºå70%ÁöÑÊØîÈáç‰ºöËÆ©ÊïàÊûúÊõ¥Â•ΩÁÇπ„ÄÇvoid main(){ lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate); //Ê†πÊçÆÂùêÊ†áÂèñÊ†∑ÂõæÁâáÈ¢úËâ≤‰ø°ÊÅØ lowp float luminance = dot(textureColor.rgb, luminanceWeighting); //GLSL‰∏≠ÁöÑÁÇπ‰πòËøêÁÆóÔºåÁ∫øÊÄß‰ª£Êï∞ÁöÑÁÇπËøêÁÆóÁ¨¶Áõ∏‰πò‰∏§‰∏™Êï∞Â≠ó„ÄÇÁÇπ‰πòËÆ°ÁÆóÈúÄË¶ÅÂ∞ÜÁ∫πÁêÜÈ¢úËâ≤‰ø°ÊÅØÂíåÁõ∏ÂØπÂ∫îÁöÑ‰∫ÆÂ∫¶ÊùÉÈáçÁõ∏‰πò„ÄÇÁÑ∂ÂêéÂèñÂá∫ÊâÄÊúâÁöÑ‰∏â‰∏™ÂÄºÁõ∏Âä†Âà∞‰∏ÄËµ∑ËÆ°ÁÆóÂæóÂà∞Ëøô‰∏™ÂÉèÁ¥†ÁöÑ‰∏≠Âíå‰∫ÆÂ∫¶ÂÄº„ÄÇ lowp vec3 greyScaleColor = vec3(luminance); //ÂàõÂª∫‰∏Ä‰∏™‰∏â‰∏™ÂÄºÈÉΩÊòØ‰∫ÆÂ∫¶‰ø°ÊÅØÁöÑvec3ÔºåÂ¶ÇÊûúÂè™ÊåáÂÆö‰∏Ä‰∏™ÂÄºÔºåÁºñËØëÂô®‰ºöÂ∞ÜÂÖ∂ÂÆÉÁöÑÈÉΩËÆæÁΩÆÊàêËøô‰∏™ÂÄº gl_FragColor = vec4(mix(greyScaleColor, textureColor.rgb, saturation), textureColor.w); //Áî®mixÂáΩÊï∞ÊääËÆ°ÁÆóÁöÑÁÅ∞Â∫¶ÂÄºÔºåÂàùËØÜÁöÑÁ∫πÁêÜÈ¢úËâ≤ÂíåÂæóÂà∞ÁöÑÈ•±ÂíåÂ∫¶‰ø°ÊÅØÁªìÂêàËµ∑Êù•„ÄÇ} ÁêÉÂΩ¢Êª§ÈïúÁ§∫‰æã123456789101112131415161718192021222324varying highp vec2 textureCoordinate;uniform sampler2D inputImageTexture;uniform highp vec2 center;uniform highp float radius;uniform highp float aspectRatio;uniform highp float refractiveIndex;void main(){ highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y * aspectRatio + 0.5 - 0.5 * aspectRatio)); //ÂΩí‰∏ÄÂåñÂùêÊ†áÁ©∫Èó¥ÈúÄË¶ÅËÄÉËôëÂ±èÂπïÊòØ‰∏Ä‰∏™Âçï‰ΩçÂÆΩÂíå‰∏Ä‰∏™Âçï‰ΩçÈïø„ÄÇ highp float distanceFromCenter = distance(center, textureCoordinateToUse); //ËÆ°ÁÆóÁâπÂÆöÂÉèÁ¥†ÁÇπË∑ùÁ¶ªÁêÉÂΩ¢ÁöÑ‰∏≠ÂøÉÊúâÂ§öËøú„ÄÇ‰ΩøÁî®GLSLÂÜÖÂª∫ÁöÑdistance()ÂáΩÊï∞ÔºåÁî®ÂãæËÇ°ÂÆöÂæãËÆ°ÁÆóÂá∫‰∏≠ÂøÉÂùêÊ†áÂíåÈïøÂÆΩÊØîÁü´Ê≠£ËøáÁöÑÁ∫πÁêÜÂùêÊ†áÁöÑË∑ùÁ¶ª lowp float checkForPresenceWithinSphere = step(distanceFromCenter, radius); //ËÆ°ÁÆóÁâáÊÆµÊòØÂê¶Âú®ÁêÉ‰ΩìÂÜÖ„ÄÇ distanceFromCenter = distanceFromCenter / radius; //Ê†áÂáÜÂåñÂà∞ÁêÉÂøÉÁöÑË∑ùÁ¶ªÔºåÈáçÊñ∞ËÆæÁΩÆdistanceFromCenter highp float normalizedDepth = radius * sqrt(1.0 - distanceFromCenter * distanceFromCenter); //Ê®°Êãü‰∏Ä‰∏™ÁéªÁíÉÁêÉÔºåÈúÄË¶ÅËÆ°ÁÆóÁêÉÁöÑ‚ÄúÊ∑±Â∫¶‚ÄùÊòØÂ§öÂ∞ë„ÄÇ highp vec3 sphereNormal = normalize(vec3(textureCoordinateToUse - center, normalizedDepth)); //ÂΩí‰∏ÄÂåñ highp vec3 refractedVector = refract(vec3(0.0, 0.0, -1.0), sphereNormal, refractiveIndex); //GLSLÁöÑrefract()ÂáΩÊï∞‰ª•ÂàöÊâçÂàõÂª∫ÁöÑÁêÉÊ≥ïÁ∫øÂíåÊäòÂ∞ÑÁéáÊù•ËÆ°ÁÆóÂΩìÂÖâÁ∫øÈÄöËøáÁêÉÊó∂‰ªé‰ªªÊÑè‰∏Ä‰∏™ÁÇπÁúãËµ∑Êù•Â¶Ç‰Ωï„ÄÇ gl_FragColor = texture2D(inputImageTexture, (refractedVector.xy + 1.0) * 0.5) * checkForPresenceWithinSphere; //ÊúÄÂêéÂáëÈΩêÊâÄÊúâËÆ°ÁÆóÈúÄË¶ÅÁöÑÈ¢úËâ≤‰ø°ÊÅØ„ÄÇ} Ë∞ÉËØïShader‰ΩøÁî®gl_FragColorË∞ÉËØï‰ª£Á†Å„ÄÇGPUImageÊòØ‰∏™ÂºÄÊ∫êÁöÑËµÑÊ∫êÊúâ‰∫õÂæàÈÖ∑ÁöÑshaderÔºåÈùûÂ∏∏Â•ΩÁöÑÂ≠¶‰π†shaderÁöÑÊñπÂºèÔºåÂèØ‰ª•Êãø‰∏Ä‰∏™‰Ω†ËßâÂæóÂæàÊúâÊÑèÊÄùÁöÑshaderÂØπÁùÄÊ∫êÁ†Å‰∏ÄÁÇπÁÇπÁúã‰∏ãÂéª„ÄÇGPUImageËøòÊúâ‰∏Ä‰∏™shaderËÆæËÆ°Âô®https://github.com/BradLarson/GPUImage/tree/master/examples/Mac/ShaderDesigner ÁöÑMacÂ∫îÁî®ÔºåÂèØ‰ª•ÊµãËØïshaderËÄå‰∏çÁî®ÂáÜÂ§áOpenGL‰ª£Á†Å„ÄÇ ÊÄßËÉΩË∞É‰ºòÁÆÄÂçïÁöÑÊñπÊ≥ïËææÂà∞Ë∞É‰ºòÁõÆÁöÑÔºåÂèØ‰ª•Áî®‰∏ãËΩΩImagination Technologies PowerVR SDKhttps://community.imgtec.com/developers/powervr/Ëøô‰∏™Â∑•ÂÖ∑Â∏ÆÂä©ÂàÜÊûêshader Ê∂àÈô§Êù°‰ª∂ÈÄªËæëÔºö‰ΩøÁî®step()ËøôÊ†∑ÁöÑÂáΩÊï∞ ÂáèÂ∞ë‰æùËµñÁ∫πÁêÜÁöÑËØªÂèñÔºöÂ¶ÇÊûúÂ∏åÊúõ‰ªéÈôÑËøëÂÉèÁ¥†ÂèñÊ†∑ËÄå‰∏çÊòØËÆ°ÁÆóFragment shaderÁõ∏ÈÇªÂÉèÁ¥†ÁöÑÂÅèÂ∑ÆÔºåÊúÄÂ•ΩÂú®Vertex shader‰∏≠ËÆ°ÁÆóÁÑ∂ÂêéÊääÁªìÊûú‰ª•varyingÁöÑÊñπÂºè‰º†ÂÖ•Fragment shaderÈáå„ÄÇ ËÆ°ÁÆóÂ∞ΩÈáèÁÆÄÂçïÔºöËÉΩÂ§üÂæóÂà∞‰∏Ä‰∏™Ëøë‰ººÂÄºÂ∞±Â∞ΩÈáèÁî®Ôºå‰∏çË¶ÅÁî®Á±ª‰ººsin()Ôºåcos()Ôºåtan()ÁöÑÊØîËæÉÊ∂àËÄóÁöÑÊìç‰Ωú„ÄÇ Â∞ΩÂèØËÉΩÁöÑÂ∞ÜËÆ°ÁÆóÊîæÂà∞Vertex‰∏äÔºöÂ¶ÇÊûúËÆ°ÁÆóÂú®ÂõæÁâá‰∏ä‰ºöÊúâÁõ∏ÂêåÁöÑÁªìÊûúÊàñÁ∫øÊÄßÂèòÂåñÊúÄÂ•ΩËøôÊ†∑ÂÅö„ÄÇÂõ†‰∏∫Vertex shaderÂØπÊØè‰∏™È°∂ÁÇπËøêË°å‰∏ÄÊ¨°ÔºåËÄåFragment shader‰ºöÂú®ÊØè‰∏™ÂÉèÁ¥†‰∏äËøêË°å‰∏ÄÊ¨°„ÄÇ ÁßªÂä®ËÆæÂ§á‰ΩøÁî®ÂêàÈÄÇÁöÑÁ≤æÂ∫¶ÔºöÂú®ÂêëÈáè‰∏ä‰ΩøÁî®‰ΩéÁ≤æÂ∫¶ÁöÑÂÄº‰ºöÂèòÂæóÊõ¥Âø´„ÄÇ‰∏§‰∏™lowp vec4Áõ∏Âä†ÂèØ‰ª•Âú®‰∏Ä‰∏™Êó∂ÈíüÂë®ÊúüÂÜÖÂÆåÊàêÔºå‰∏§‰∏™highp vec4Áõ∏Âä†ÂàôÈúÄË¶ÅÂõõ‰∏™Êó∂ÈíüÂë®Êúü„ÄÇ ËæπÁïåÊé¢ÊµãÂü∫‰∫éOpenCVÂ∫ìÔºå‰∏çËøáËøô‰∫õÊ≠•È™§Âú®GPUImage‰∏≠ÈÉΩÊúâÂÆåÊï¥ÁöÑÂÆûÁé∞ SobelËæπÁïåÊé¢ÊµãËøôÁßçÊìç‰ΩúÂú®Êª§ÈïúÊñπÈù¢ÊØîÊú∫Âô®ËßÜËßâÊñπÈù¢Â§ö„ÄÇSobelËæπÁïåÊé¢ÊµãÁî®‰∫éÊé¢ÊµãËæπÁïåÁöÑÂá∫Áé∞‰ΩçÁΩÆÔºåËæπÁïåÊòØÁî±ÊòéÂèòÊöóÊàñËÄÖÁî±ÊöóÂèòÊòéÁöÑÂå∫Âüü„ÄÇÂú®Ë¢´Â§ÑÁêÜÁöÑÂõæÁâá‰∏≠‰∏Ä‰∏™ÂÉèÁ¥†ÁöÑ‰∫ÆÂ∫¶ÂèçÊò†‰∫ÜËøô‰∏™ÂÉèÁ¥†Âë®Âõ¥ËæπÁïåÁöÑÂº∫Â∫¶„ÄÇ Á¨¨‰∏ÄÊ≠•ÔºåÂ∞ÜÂΩ©Ëâ≤ÂõæÁâáÂºÑÊàêÁÅ∞Èò∂ÂõæÔºåËøô‰∏™ËøáÁ®ãÂ∞±ÊòØÂ∞ÜÊØè‰∏™ÂÉèÁ¥†ÁöÑÁ∫¢ÁªøËìùÈÉ®ÂàÜÂêà‰∏Ä‰ª£Ë°®‰∫ÆÂ∫¶ÁöÑÂÄº„ÄÇÂ¶ÇÊòØÊûúYUVËÄå‰∏çÊòØRGBÊ†ºÂºèÁöÑÂèØ‰ª•ÁúÅÁï•ËøôÊ≠•ÔºåÂõ†‰∏∫YUVÊòØÂ∞Ü‰∫ÆÂ∫¶‰ø°ÊÅØÂíåËâ≤Â∫¶‰ø°ÊÅØÂàÜÂºÄÁöÑ„ÄÇÂ¶ÇÊûúÁÆÄÂåñÂà∞Âè™Ââ©‰∫ÆÂ∫¶ÁöÑËØù‰∏Ä‰∏™ÂÉèÁ¥†Âë®Âõ¥ÁöÑËæπÁïåÂº∫Â∫¶Â∞±ÂèØ‰ª•Áî±Âë®Âõ¥3*3‰∏™‰∏¥ËøëÂÉèÁ¥†ËÆ°ÁÆóÂæóÂà∞„ÄÇËøô‰∏™ËÆ°ÁÆóÊ∂âÂèäConvolution MatrixÔºàÂç∑ÁßØÁü©ÈòµÔºâÔºåÊØè‰∏™ÂÉèÁ¥†ÈÉΩË¶Å‰∏éËøô‰∏™Áü©ÈòµËÆ°ÁÆóÂá∫‰∏Ä‰∏™Êï∞ÂÄºÔºåÂõ†‰∏∫Ê≤°ÊúâÈ°∫Â∫èË¶ÅÊ±ÇÊâÄ‰ª•ÂèØ‰ª•ÈááÂèñÂπ∂Ë°åËøêÁÆó„ÄÇ SobelÁöÑÊ∞¥Âπ≥Â§ÑÁêÜÁü©Èòµ -1 0 +1-2 0 +2-1 0 +1 SobelÁöÑÂûÇÁõ¥Áü©Èòµ -1 -2 -10 0 0+1 +2 +1 ÂíåSobelÁ±ª‰ººÁöÑÂèò‰ΩìÔºåPrewittËæπÁïåÊé¢Êµã„ÄÇËøô‰∏™Âèò‰Ωì‰ºöÂú®Ê®™ÂêëÁ´ñÂêëÁü©Èòµ‰∏≠Áî®‰∏çÂêåÁöÑÁü©ÈòµÔºå‰ΩÜÊòØËøê‰ΩúËøáÁ®ãÂ∑Æ‰∏çÂ§ö„ÄÇ OpenGL ES‰ª£Á†Å1234567891011121314151617181920212223242526272829303132333435precision mediump float;//varyingÁöÑÈÉΩÊòØÂú®Vertex shader‰∏äÂÆö‰πâ‰∫Üvarying vec2 textureCoordinate;varying vec2 leftTextureCoordinate;varying vec2 rightTextureCoordinate;varying vec2 topTextureCoordinate;varying vec2 topLeftTextureCoordinate;varying vec2 topRightTextureCoordinate;varying vec2 bottomTextureCoordinate;varying vec2 bottomLeftTextureCoordinate;varying vec2 bottomRightTextureCoordinate;uniform sampler2D inputImageTexture;void main(){ float bottomLeftIntensity = texture2D(inputImageTexture, bottomLeftTextureCoordinate).r; float topRightIntensity = texture2D(inputImageTexture, topRightTextureCoordinate).r; float topLeftIntensity = texture2D(inputImageTexture, topLeftTextureCoordinate).r; float bottomRightIntensity = texture2D(inputImageTexture, bottomRightTextureCoordinate).r; float leftIntensity = texture2D(inputImageTexture, leftTextureCoordinate).r; float rightIntensity = texture2D(inputImageTexture, rightTextureCoordinate).r; float bottomIntensity = texture2D(inputImageTexture, bottomTextureCoordinate).r; float topIntensity = texture2D(inputImageTexture, topTextureCoordinate).r; float h = -bottomLeftIntensity - 2.0 * leftIntensity - topLeftIntensity + bottomRightIntensity + 2.0 * rightIntensity + topRightIntensity; float v = -topLeftIntensity - 2.0 * topIntensity - topRightIntensity + bottomLeftIntensity + 2.0 * bottomIntensity + bottomRightIntensity; float mag = length(vec2(h, v)); //length()ÂáΩÊï∞ËÆ°ÁÆóÂá∫Ê∞¥Âπ≥ÂíåÂûÇÁõ¥Áü©ÈòµËΩ¨ÂåñÂêéÂÄºÁöÑÂπ≥ÊñπÂíåÁöÑÂπ≥ÊñπÊ†πÁöÑÂÄºÔºåËøô‰∏™ÂÄº‰ºöË¢´Êã∑Ë¥ùËøõËæìÂá∫ÂÉèÁ¥†ÁöÑÁ∫¢ÁªøËìùÈÄöÈÅì‰∏≠ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Êù•‰ª£Ë°®ËæπÁïåÁöÑÊòéÊòæÁ®ãÂ∫¶‰∫Ü„ÄÇ gl_FragColor = vec4(vec3(mag), 1.0);} CannyËæπÁïåÊé¢ÊµãCannyÊé¢Êµã‰ºöÊØîSobelÂ§çÊùÇ‰∫õÔºåËøôÊ†∑ÂÅö‰ºöÂæóÂà∞‰∏ÄÊù°Áâ©‰ΩìËæπÁïåÁöÑÂπ≤ÂáÄÁ∫øÊù°„ÄÇ Êé¢ÊµãËøáÁ®ãÔºö ÂÖàÁî®SobelÁü©ÈòµÂæóÂà∞ËæπÁïåÊ¢ØÂ∫¶ÁöÑÂº∫Â∫¶„ÄÇËøô‰∏™ÂíåSobelÊØîÂ∞±ÊòØÊúÄÂêé‰∏Ä‰∏™ËÆ°ÁÆóÊúâ‰∫õ‰∏çÂêå 12345678910vec2 gradientDirection;gradientDirection.x = -bottomLeftIntensity - 2.0 * leftIntensity - topLeftIntensity + bottomRightIntensity + 2.0 * rightIntensity + topRightIntensity;gradientDirection.y = -topLeftIntensity - 2.0 * topIntensity - topRightIntensity + bottomLeftIntensity + 2.0 * bottomIntensity + bottomRightIntensity;float gradientMagnitude = length(gradientDirection);vec2 normalizedDirection = normalize(gradientDirection);normalizedDirection = sign(normalizedDirection) * floor(abs(normalizedDirection) + 0.617316); // Offset by 1-sin(pi/8) to set to 0 if near axis, 1 if awaynormalizedDirection = (normalizedDirection + 1.0) * 0.5; // Place -1.0 - 1.0 within 0 - 1.0gl_FragColor = vec4(gradientMagnitude, normalizedDirection.x, normalizedDirection.y, 1.0); ÁùÄËâ≤Âô®Ê≠•È™§ 1234567891011121314151617181920212223242526precision mediump float;varying highp vec2 textureCoordinate;uniform sampler2D inputImageTexture;uniform highp float texelWidth; //Ë¶ÅÂ§ÑÁêÜÁöÑÂõæÁâá‰∏≠‰∏¥ËøëÂÉèÁ¥†‰πãÈó¥ÁöÑË∑ùÁ¶ª„ÄÇuniform highp float texelHeight; //Âêå‰∏äuniform mediump float upperThreshold; //È¢ÑÊúüËæπÁïåÂº∫Â∫¶‰∏ä‰∏ãÈôêuniform mediump float lowerThreshold; void main(){ vec3 currentGradientAndDirection = texture2D(inputImageTexture, textureCoordinate).rgb; vec2 gradientDirection = ((currentGradientAndDirection.gb * 2.0) - 1.0) * vec2(texelWidth, texelHeight); float firstSampledGradientMagnitude = texture2D(inputImageTexture, textureCoordinate + gradientDirection).r; float secondSampledGradientMagnitude = texture2D(inputImageTexture, textureCoordinate - gradientDirection).r; float multiplier = step(firstSampledGradientMagnitude, currentGradientAndDirection.r); multiplier = multiplier * step(secondSampledGradientMagnitude, currentGradientAndDirection.r); float thresholdCompliance = smoothstep(lowerThreshold, upperThreshold, currentGradientAndDirection.r); multiplier = multiplier * thresholdCompliance; gl_FragColor = vec4(multiplier, multiplier, multiplier, 1.0);} HarrisËæπËßíÊé¢ÊµãÂ§öÊ≠•È™§ÁöÑÊñπÊ≥ïÊù•Êé¢ÊµãÂú∫ÊôØ‰∏≠ÁöÑËæπËßí„ÄÇ ÂÖàÂºÑÂæóÂè™Êúâ‰∫ÆÂ∫¶‰ø°ÊÅØÔºåÂÜçÈÄöËøáSobelÁü©ÈòµÔºåÊôÆÈáåÁª¥ÁâπÁü©ÈòµÊàñËÄÖÂÖ∂ÂÆÉÁõ∏ÂÖ≥ÁöÑÁü©ÈòµËÆ°ÁÆóÂá∫‰∏Ä‰∏™ÂÉèÁ¥†XÂíåYÊñπÂêëÁöÑÊ¢ØÂ∫¶ÂÄºÔºåËÆ°ÁÆóÁöÑÁªìÊûú‰ºöÂ∞ÜXÊ¢ØÂ∫¶‰º†ÂÖ•Á∫¢Ëâ≤ÈÉ®ÂàÜÔºåYÊ¢ØÂ∫¶‰º†ÂÖ•ÁªøËâ≤ÈÉ®ÂàÜÔºåX‰∏éYÊ¢ØÂ∫¶ÁöÑ‰πòÁßØ‰º†ÂÖ•ËìùËâ≤ÈÉ®ÂàÜ„ÄÇ ÂØπËÆ°ÁÆóÁöÑÁªìÊûúËøõË°åÈ´òÊñØÊ®°Á≥ä„ÄÇÂ∞ÜÊ®°Á≥äÂêéÂõæ‰∏≠ÂèñÂá∫Á∫¢ÁªøËìùÁºñÁ†ÅÁöÑÂÄºÂ∏¶Âà∞ËÆ°ÁÆóËæπËßíÁÇπÂèØËÉΩÊÄßÂÖ¨ÂºèÔºö R = Ix2 √ó Iy2 ‚àí Ixy √ó Ixy ‚àí k √ó (Ix2 + Iy2)2 #ËµÑÊñô Áõ∏ÂÖ≥Êï∞Â≠¶ 3D Math Primer for Graphics and Game Development https://www.amazon.com/Math-Primer-Graphics-Game-Development/dp/1568817231/ref=sr_1_1?ie=UTF8&amp;qid=1422837187&amp;sr=8-1&amp;keywords=3d+math+primer+for+graphics+and+game+development The Nature of Code https://natureofcode.com/ The Computational Beauty of Nature https://www.amazon.com/Computational-Beauty-Nature-Explorations-Adaptation/dp/0262561271/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1422837256&amp;sr=1-1&amp;keywords=computational+beauty+of+nature Áõ∏ÂÖ≥GLSL Graphic Shaders: Theory and Practice https://www.amazon.com/Graphics-Shaders-Theory-Practice-Second/dp/1568814348/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1422837351&amp;sr=1-1&amp;keywords=graphics+shaders+theory+and+practice The OpenGL Shading Language https://www.amazon.com/OpenGL-Shading-Language-Randi-Rost/dp/0321637631/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1422896457&amp;sr=1-1&amp;keywords=opengl+shading+language OpenGL 4 Shading Language Cookbook https://www.amazon.com/OpenGL-Shading-Language-Cookbook-Second/dp/1782167021/ref=sr_1_2?s=books&amp;ie=UTF8&amp;qid=1422896457&amp;sr=1-2&amp;keywords=opengl+shading+language GPU Gems https://http.developer.nvidia.com/GPUGems/gpugems_part01.html GPU Pro: Advanced Rendering Techniques https://www.amazon.com/GPU-Pro-Advanced-Rendering-Techniques/dp/1568814720/ref=sr_1_4?s=books&amp;ie=UTF8&amp;qid=1422837427&amp;sr=1-4&amp;keywords=gpu+pro ming1016","link":"/ÁºñÁ®ã/Ô£ø/gpu/"},{"title":"iOSÂπ∂ÂèëÁºñÁ®ã","text":"Á∫øÁ®ã‰ΩøÁî®InstrumentsÁöÑCPU strategy viewÊü•Áúã‰ª£Á†ÅÂ¶Ç‰ΩïÂú®Â§öÊ†∏CPU‰∏≠ÊâßË°å„ÄÇÂàõÂª∫Á∫øÁ®ãÂèØ‰ª•‰ΩøÁî®POSIX Á∫øÁ®ãAPIÔºåÊàñËÄÖNSThreadÔºàÂ∞ÅË£ÖPOSIX Á∫øÁ®ãAPIÔºâ„ÄÇ‰∏ãÈù¢ÊòØÂπ∂Âèë4‰∏™Á∫øÁ®ãÂú®‰∏ÄÁôæ‰∏á‰∏™Êï∞Â≠ó‰∏≠ÊâæÊúÄÂ∞èÂÄºÂíåÊúÄÂ§ßÂÄºÁöÑpthread‰æãÂ≠êÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970#import &lt;pthread.h&gt;struct threadInfo { uint32_t * inputValues; size_t count;};struct threadResult { uint32_t min; uint32_t max;};void * findMinAndMax(void *arg){ struct threadInfo const * const info = (struct threadInfo *) arg; uint32_t min = UINT32_MAX; uint32_t max = 0; for (size_t i = 0; i &lt; info-&gt;count; ++i) { uint32_t v = info-&gt;inputValues[i]; min = MIN(min, v); max = MAX(max, v); } free(arg); struct threadResult * const result = (struct threadResult *) malloc(sizeof(*result)); result-&gt;min = min; result-&gt;max = max; return result;}int main(int argc, const char * argv[]){ size_t const count = 1000000; uint32_t inputValues[count]; // ‰ΩøÁî®ÈöèÊú∫Êï∞Â≠óÂ°´ÂÖÖ inputValues for (size_t i = 0; i &lt; count; ++i) { inputValues[i] = arc4random(); } // ÂºÄÂßã4‰∏™ÂØªÊâæÊúÄÂ∞èÂÄºÂíåÊúÄÂ§ßÂÄºÁöÑÁ∫øÁ®ã size_t const threadCount = 4; pthread_t tid[threadCount]; for (size_t i = 0; i &lt; threadCount; ++i) { struct threadInfo * const info = (struct threadInfo *) malloc(sizeof(*info)); size_t offset = (count / threadCount) * i; info-&gt;inputValues = inputValues + offset; info-&gt;count = MIN(count - offset, count / threadCount); int err = pthread_create(tid + i, NULL, &amp;findMinAndMax, info); NSCAssert(err == 0, @&quot;pthread_create() failed: %d&quot;, err); } // Á≠âÂæÖÁ∫øÁ®ãÈÄÄÂá∫ struct threadResult * results[threadCount]; for (size_t i = 0; i &lt; threadCount; ++i) { int err = pthread_join(tid[i], (void **) &amp;(results[i])); NSCAssert(err == 0, @&quot;pthread_join() failed: %d&quot;, err); } // ÂØªÊâæ min Âíå max uint32_t min = UINT32_MAX; uint32_t max = 0; for (size_t i = 0; i &lt; threadCount; ++i) { min = MIN(min, results[i]-&gt;min); max = MAX(max, results[i]-&gt;max); free(results[i]); results[i] = NULL; } NSLog(@&quot;min = %u&quot;, min); NSLog(@&quot;max = %u&quot;, max); return 0;} ‰ΩøÁî®NSThreadÊù•ÂÜô 123456789101112131415161718192021222324252627282930313233343536373839404142@interface FindMinMaxThread : NSThread@property (nonatomic) NSUInteger min;@property (nonatomic) NSUInteger max;- (instancetype)initWithNumbers:(NSArray *)numbers;@end@implementation FindMinMaxThread { NSArray *_numbers;}- (instancetype)initWithNumbers:(NSArray *)numbers{ self = [super init]; if (self) { _numbers = numbers; } return self;}- (void)main{ NSUInteger min; NSUInteger max; // ËøõË°åÁõ∏ÂÖ≥Êï∞ÊçÆÁöÑÂ§ÑÁêÜ self.min = min; self.max = max;}@end//ÂêØÂä®‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ãÔºåÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÂØπË±°NSMutableSet *threads = [NSMutableSet set];NSUInteger numberCount = self.numbers.count;NSUInteger threadCount = 4;for (NSUInteger i = 0; i &lt; threadCount; i++) { NSUInteger offset = (count / threadCount) * i; NSUInteger count = MIN(numberCount - offset, numberCount / threadCount); NSRange range = NSMakeRange(offset, count); NSArray *subset = [self.numbers subarrayWithRange:range]; FindMinMaxThread *thread = [[FindMinMaxThread alloc] initWithNumbers:subset]; [threads addObject:thread]; [thread start];} Grand Central DispatchGCD‰∏≠ÁöÑFIFOÈòüÂàóÁß∞‰∏∫dispatch queueÔºåÁî®Êù•‰øùËØÅÂÖàËøõÊù•ÁöÑ‰ªªÂä°ÂÖàÂæóÂà∞ÊâßË°å„ÄÇ dispatch queueÂàÜ‰∏âÁßç SerialÔºöÂèàÂè´private dispatch queuesÔºåÂêåÊó∂Âè™ÊâßË°å‰∏Ä‰∏™‰ªªÂä°„ÄÇSerial queueÂ∏∏Áî®‰∫éÂêåÊ≠•ËÆøÈóÆÁâπÂÆöÁöÑËµÑÊ∫êÊàñÊï∞ÊçÆ„ÄÇÂΩì‰Ω†ÂàõÂª∫Â§ö‰∏™Serial queueÊó∂ÔºåËôΩÁÑ∂ÂêÑËá™ÊòØÂêåÊ≠•Ôºå‰ΩÜserial queue‰πãÈó¥ÊòØÂπ∂ÂèëÊâßË°å„ÄÇ ConcurrentÔºöÂèàÂè´global dispatch queueÔºåÂèØ‰ª•Âπ∂ÂèëÁöÑÊâßË°åÂ§ö‰∏™‰ªªÂä°Ôºå‰ΩÜÊâßË°åÂÆåÊàêÈ°∫Â∫èÊòØÈöèÊú∫ÁöÑ„ÄÇ Main dispatch queueÔºöÂÖ®Â±ÄÂèØÁî®ÁöÑserial queueÔºåÂú®Â∫îÁî®Á®ãÂ∫è‰∏ªÁ∫øÁ®ã‰∏äÊâßË°å‰ªªÂä°„ÄÇ GCDÊ¶ÇË¶Å Âíåoperation queue‰∏ÄÊ†∑ÈÉΩÊòØÂü∫‰∫éÈòüÂàóÁöÑÂπ∂ÂèëÁºñÁ®ãAPIÔºå‰ªñ‰ª¨ÈÄöËøáÈõÜ‰∏≠ÁÆ°ÁêÜÂ§ßÂÆ∂ÂçèÂêå‰ΩøÁî®ÁöÑÁ∫øÁ®ãÊ±†„ÄÇ ÂÖ¨ÂºÄÁöÑ5‰∏™‰∏çÂêåÈòüÂàóÔºöËøêË°åÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÁöÑmain queueÔºå3‰∏™‰∏çÂêå‰ºòÂÖàÁ∫ßÁöÑÂêéÂè∞ÈòüÂàóÔºàHigh Priority QueueÔºåDefault Priority QueueÔºåLow Priority QueueÔºâÔºå‰ª•Âèä‰∏Ä‰∏™‰ºòÂÖàÁ∫ßÊõ¥‰ΩéÁöÑÂêéÂè∞ÈòüÂàóBackground Priority QueueÔºàÁî®‰∫éI/OÔºâ ÂèØÂàõÂª∫Ëá™ÂÆö‰πâÈòüÂàóÔºö‰∏≤Ë°åÊàñÂπ∂ÂàóÈòüÂàó„ÄÇËá™ÂÆö‰πâ‰∏ÄËà¨ÊîæÂú®Default Priority QueueÂíåMain QueueÈáå„ÄÇ dispatch_onceÁî®Ê≥ï12345678910+ (UIColor *)boringColor;{ static UIColor *color; //Âè™ËøêË°å‰∏ÄÊ¨° static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ color = [UIColor colorWithRed:0.380f green:0.376f blue:0.376f alpha:1.000f]; }); return color;} dispatch_asyncÔºàËæÉÂ∏∏Áî®ÔºâÂèØ‰ª•ÈÅøÂÖçÁïåÈù¢‰ºöË¢´‰∏Ä‰∫õËÄóÊó∂ÁöÑÊìç‰ΩúÂç°Ê≠ªÔºåÊØîÂ¶ÇËØªÂèñÁΩëÁªúÊï∞ÊçÆÔºåÂ§ßÊï∞ÊçÆIOÔºåËøòÊúâÂ§ßÈáèÊï∞ÊçÆÁöÑÊï∞ÊçÆÂ∫ìËØªÂÜôÔºåËøôÊó∂ÈúÄË¶ÅÂú®Âè¶‰∏Ä‰∏™Á∫øÁ®ã‰∏≠Â§ÑÁêÜÔºåÁÑ∂ÂêéÈÄöÁü•‰∏ªÁ∫øÁ®ãÊõ¥Êñ∞ÁïåÈù¢ÔºåGCD‰ΩøÁî®Ëµ∑Êù•ÊØîNSThreadÂíåNSOperationÊñπÊ≥ïË¶ÅÁÆÄÂçïÊñπ‰æø„ÄÇ 12345678910111213141516171819//‰ª£Á†ÅÊ°ÜÊû∂dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ // ËÄóÊó∂ÁöÑÊìç‰Ωú dispatch_async(dispatch_get_main_queue(), ^{ // Êõ¥Êñ∞ÁïåÈù¢ });});//‰∏ãËΩΩÂõæÁâáÁöÑÁ§∫‰æãdispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ NSURL * url = [NSURL URLWithString:@&quot;https://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;]; NSData * data = [[NSData alloc]initWithContentsOfURL:url]; UIImage *image = [[UIImage alloc]initWithData:data]; if (data != nil) { dispatch_async(dispatch_get_main_queue(), ^{ self.imageView.image = image; }); }}); dispatch_afterÂª∂ÂêéÊâßË°å12345678- (void)foo{ double delayInSeconds = 2.0; dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t) (delayInSeconds * NSEC_PER_SEC)); dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ [self bar]; });} ËåÉ‰æãÔºåÂÆûÁé∞‰∏Ä‰∏™Êé®ËøüÂá∫Áé∞ÂºπÂá∫Ê°ÜÊèêÁ§∫ÔºåÊØîÂ¶ÇËØ¥ÊèêÁ§∫Áî®Êà∑ËØÑ‰ª∑Á≠âÂäüËÉΩ„ÄÇ 12345678910111213func showOrHideNavPrompt() { let delayInSeconds = 1.0 let popTime = dispatch_time(DISPATCH_TIME_NOW, Int64(delayInSeconds * Double(NSEC_PER_SEC))) // Âú®ËøôÈáåÂ£∞ÊòéÊé®ËøüÁöÑÊó∂Èó¥ dispatch_after(popTime, GlobalMainQueue) { // Á≠âÂæÖdelayInSecondsÂ∞ÜÈó≠ÂåÖÂºÇÊ≠•Âà∞‰∏ªÈòüÂàó let count = PhotoManager.sharedManager.photos.count if count &gt; 0 { self.navigationItem.prompt = nil } else { self.navigationItem.prompt = &quot;Add photos with faces to Googlyify them!&quot; } }} GCDÈòüÂàóÈòüÂàóÈªòËÆ§ÊòØ‰∏≤Ë°åÁöÑÔºåÂè™ËÉΩÊâßË°å‰∏Ä‰∏™ÂçïÁã¨ÁöÑblockÔºåÈòüÂàó‰πüÂèØ‰ª•ÊòØÂπ∂Ë°åÁöÑÔºåÂêå‰∏ÄÊó∂Èó¥ÊâßË°åÂ§ö‰∏™block 123456789101112- (id)init;{ self = [super init]; if (self != nil) { NSString *label = [NSString stringWithFormat:@&quot;%@.isolation.%p&quot;, [self class], self]; self.isolationQueue = dispatch_queue_create([label UTF8String], 0); label = [NSString stringWithFormat:@&quot;%@.work.%p&quot;, [self class], self]; self.workQueue = dispatch_queue_create([label UTF8String], 0); } return self;} 5ÁßçÈòüÂàóÔºå‰∏ªÈòüÂàóÔºàmain queueÔºâ,ÂõõÁßçÈÄöÁî®Ë∞ÉÂ∫¶ÈòüÂàóÔºåËá™Â∑±ÂÆöÂà∂ÁöÑÈòüÂàó„ÄÇÂõõÁßçÈÄöÁî®Ë∞ÉÂ∫¶ÈòüÂàó‰∏∫ QOS_CLASS_USER_INTERACTIVEÔºöuser interactiveÁ≠âÁ∫ßË°®Á§∫‰ªªÂä°ÈúÄË¶ÅË¢´Á´ãÂç≥ÊâßË°åÊèê‰æõÂ•ΩÁöÑ‰ΩìÈ™åÔºåÁî®Êù•Êõ¥Êñ∞UIÔºåÂìçÂ∫î‰∫ã‰ª∂Á≠â„ÄÇËøô‰∏™Á≠âÁ∫ßÊúÄÂ•Ω‰øùÊåÅÂ∞èËßÑÊ®°„ÄÇ QOS_CLASS_USER_INITIATEDÔºöuser initiatedÁ≠âÁ∫ßË°®Á§∫‰ªªÂä°Áî±UIÂèëËµ∑ÂºÇÊ≠•ÊâßË°å„ÄÇÈÄÇÁî®Âú∫ÊôØÊòØÈúÄË¶ÅÂèäÊó∂ÁªìÊûúÂêåÊó∂ÂèàÂèØ‰ª•ÁªßÁª≠‰∫§‰∫íÁöÑÊó∂ÂÄô„ÄÇ QOS_CLASS_UTILITYÔºöutilityÁ≠âÁ∫ßË°®Á§∫ÈúÄË¶ÅÈïøÊó∂Èó¥ËøêË°åÁöÑ‰ªªÂä°Ôºå‰º¥ÊúâÁî®Êà∑ÂèØËßÅËøõÂ∫¶ÊåáÁ§∫Âô®„ÄÇÁªèÂ∏∏‰ºöÁî®Êù•ÂÅöËÆ°ÁÆóÔºåI/OÔºåÁΩëÁªúÔºåÊåÅÁª≠ÁöÑÊï∞ÊçÆÂ°´ÂÖÖÁ≠â‰ªªÂä°„ÄÇËøô‰∏™‰ªªÂä°ËäÇËÉΩ„ÄÇ QOS_CLASS_BACKGROUNDÔºöbackgroundÁ≠âÁ∫ßË°®Á§∫Áî®Êà∑‰∏ç‰ºöÂØüËßâÁöÑ‰ªªÂä°Ôºå‰ΩøÁî®ÂÆÉÊù•Â§ÑÁêÜÈ¢ÑÂä†ËΩΩÔºåÊàñËÄÖ‰∏çÈúÄË¶ÅÁî®Êà∑‰∫§‰∫íÂíåÂØπÊó∂Èó¥‰∏çÊïèÊÑüÁöÑ‰ªªÂä°„ÄÇ Á§∫‰æãÔºöÂêéÂè∞Âä†ËΩΩÊòæÁ§∫ÂõæÁâá 12345678910override func viewDidLoad() { super.viewDidLoad() dispatch_async(dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)) { // Â∞ÜÂ∑•‰Ωú‰ªé‰∏ªÁ∫øÁ®ãËΩ¨ÁßªÂà∞ÂÖ®Â±ÄÈòüÂàó‰∏≠ÔºåËøôÊòØdispatch_asyncË∞ÉÁî®ÔºåÂºÇÊ≠•Êèê‰∫§‰øùËØÅË∞ÉÁî®Á∫øÁ®ã‰ºöÁªßÁª≠ÊâßË°å‰∏ãÂéªÔºåËøôÊ†∑viewDidLoadÂú®‰∏ªÁ∫øÁ®ã‰∏äËÉΩÂ§üÊõ¥Êó©ÂÆåÊàêÔºå let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(dispatch_get_main_queue()) { // Êñ∞ÂõæÂÆåÊàêÔºåÊää‰∏Ä‰∏™Èó≠ÂåÖÂä†ÂÖ•‰∏ªÁ∫øÁ®ãÁî®Êù•Êõ¥Êñ∞UIImageViewÔºåÂè™ÊúâÂú®‰∏ªÁ∫øÁ®ãËÉΩÊìç‰ΩúUIKit„ÄÇ self.fadeInNewImage(overlayImage) // Êõ¥Êñ∞UI } }} ‰ΩïÊó∂‰ΩøÁî®‰ΩïÁßçÈòüÂàóÁ±ªÂûã ‰∏ªÈòüÂàóÔºàÈ°∫Â∫èÔºâÔºöÈòüÂàó‰∏≠Êúâ‰ªªÂä°ÂÆåÊàêÈúÄË¶ÅÊõ¥Êñ∞UIÊó∂Ôºådispatch_afterÂú®ËøôÁßçÁ±ªÂûã‰∏≠‰ΩøÁî®„ÄÇ Âπ∂ÂèëÈòüÂàóÔºöÁî®Êù•ÊâßË°å‰∏éUIÊó†ÂÖ≥ÁöÑÂêéÂè∞‰ªªÂä°Ôºådispatch_syncÊîæÂú®ËøôÈáåÔºåÊñπ‰æøÁ≠âÂæÖ‰ªªÂä°ÂÆåÊàêËøõË°åÂêéÁª≠Â§ÑÁêÜÊàñÂíådispatch barrierÂêåÊ≠•„ÄÇdispatch groupsÊîæÂú®ËøôÈáå‰πü‰∏çÈîô„ÄÇ Ëá™ÂÆö‰πâÈ°∫Â∫èÈòüÂàóÔºöÈ°∫Â∫èÊâßË°åÂêéÂè∞‰ªªÂä°Âπ∂ËøΩË∏™ÂÆÉÊó∂„ÄÇËøôÊ†∑ÂÅöÂêåÊó∂Âè™Êúâ‰∏Ä‰∏™‰ªªÂä°Âú®ÊâßË°åÂèØ‰ª•Èò≤Ê≠¢ËµÑÊ∫êÁ´û‰∫â„ÄÇdipatch barriersËß£ÂÜ≥ËØªÂÜôÈîÅÈóÆÈ¢òÁöÑÊîæÂú®ËøôÈáåÂ§ÑÁêÜ„ÄÇdispatch groups‰πüÊòØÊîæÂú®ËøôÈáå„ÄÇ ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊñπÊ≥ïÁÆÄÂåñQoSÁ≠âÁ∫ßÂèÇÊï∞ÁöÑÂÜôÊ≥ï 1234567891011121314151617181920212223var GlobalMainQueue: dispatch_queue_t { return dispatch_get_main_queue()}var GlobalUserInteractiveQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_USER_INTERACTIVE.value), 0)}var GlobalUserInitiatedQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_USER_INITIATED.value), 0)}var GlobalUtilityQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_UTILITY.value), 0)}var GlobalBackgroundQueue: dispatch_queue_t { return dispatch_get_global_queue(Int(QOS_CLASS_BACKGROUND.value), 0)}//‰ΩøÁî®Ëµ∑Êù•Â∞±ÊòØËøôÊ†∑ÔºåÊòìËØªËÄå‰∏îÂÆπÊòìÁúãÂá∫Âú®‰ΩøÁî®Âì™‰∏™ÈòüÂàódispatch_async(GlobalUserInitiatedQueue) { let overlayImage = self.faceOverlayImageFromImage(self.image) dispatch_async(GlobalMainQueue) { self.fadeInNewImage(overlayImage) }} ‰ΩøÁî®Barrier TaskÊñπÊ≥ïDispatch BarrierËß£ÂÜ≥Â§öÁ∫øÁ®ãÂπ∂ÂèëËØªÂÜôÂêå‰∏Ä‰∏™ËµÑÊ∫êÂèëÁîüÊ≠ªÈîÅDispatch BarrierÁ°Æ‰øùÊèê‰∫§ÁöÑÈó≠ÂåÖÊòØÊåáÂÆöÈòüÂàó‰∏≠Âú®ÁâπÂÆöÊó∂ÊÆµÂîØ‰∏ÄÂú®ÊâßË°åÁöÑ‰∏Ä‰∏™„ÄÇÂú®ÊâÄÊúâÂÖà‰∫éDispatch BarrierÁöÑ‰ªªÂä°ÈÉΩÂÆåÊàêÁöÑÊÉÖÂÜµ‰∏ãËøô‰∏™Èó≠ÂåÖÊâçÂºÄÂßãÊâßË°å„ÄÇËΩÆÂà∞Ëøô‰∏™Èó≠ÂåÖÊó∂barrier‰ºöÊâßË°åËøô‰∏™Èó≠ÂåÖÂπ∂‰∏îÁ°Æ‰øùÈòüÂàóÂú®Ê≠§ËøáÁ®ã‰∏ç‰ºöÊâßË°åÂÖ∂ÂÆÉ‰ªªÂä°„ÄÇÈó≠ÂåÖÂÆåÊàêÂêéÈòüÂàóÊÅ¢Â§ç„ÄÇ 123456789101112131415//ÂàõÂª∫ÈòüÂàóself.isolationQueue = dispatch_queue_create([label UTF8String], DISPATCH_QUEUE_CONCURRENT);//ÊîπÂèòsetter- (void)setCount:(NSUInteger)count forKey:(NSString *)key{ key = [key copy]; //Á°Æ‰øùÊâÄÊúâbarrierÈÉΩÊòØasyncÂºÇÊ≠•ÁöÑ dispatch_barrier_async(self.isolationQueue, ^(){ if (count == 0) { [self.counts removeObjectForKey:key]; } else { self.counts[key] = @(count); } });} swiftÁ§∫‰æã 12345678910111213141516171819202122//‰ΩøÁî®dispatch_queue_createÂàùÂßãÂåñ‰∏Ä‰∏™Âπ∂ÂèëÈòüÂàó„ÄÇÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÈÅµÂæ™ÂèçÂêëDNSÂëΩÂêç‰π†ÊÉØÔºåÊñπ‰æøÊèèËø∞ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÊåáÂá∫ÊòØÂπ∂ÂèëËøòÊòØÈ°∫Â∫è„ÄÇprivate let concurrentPhotoQueue = dispatch_queue_create(&quot;com.raywenderlich.GooglyPuff.photoQueue&quot;, DISPATCH_QUEUE_CONCURRENT)func addPhoto(photo: Photo) { dispatch_barrier_async(concurrentPhotoQueue) { // Â∞ÜÂÜôÊìç‰ΩúÂä†ÂÖ•Âà∞Ëá™ÂÆö‰πâÁöÑÈòüÂàó„ÄÇÂºÄÂßãÊâßË°åÊó∂Ëøô‰∏™Â∞±ÊòØÈòüÂàó‰∏≠ÂîØ‰∏ÄÁöÑ‰∏Ä‰∏™Âú®ÊâßË°åÁöÑ‰ªªÂä°„ÄÇ self._photos.append(photo) // barrierËÉΩÂ§ü‰øùÈöú‰∏ç‰ºöÂíåÂÖ∂‰ªñ‰ªªÂä°ÂêåÊó∂ËøõË°å„ÄÇ dispatch_async(GlobalMainQueue) { // Ê∂âÂèäÂà∞UIÊâÄ‰ª•Ëøô‰∏™ÈÄöÁü•Â∫îËØ•Âú®‰∏ªÁ∫øÁ®ã‰∏≠ÔºåÊâÄ‰ª•ÂàÜÊ¥æÂè¶‰∏Ä‰∏™ÂºÇÊ≠•‰ªªÂä°Âà∞‰∏ªÈòüÂàó‰∏≠„ÄÇ self.postContentAddedNotification() } }}//‰∏äÈù¢ÊòØËß£ÂÜ≥‰∫ÜÂÜôÂèØËÉΩÂèëÁîüÊ≠ªÈîÅÔºå‰∏ãÈù¢ÊòØ‰ΩøÁî®dispatch_syncËß£ÂÜ≥ËØªÊó∂ÂèØËÉΩ‰ºöÂèëÁîüÁöÑÊ≠ªÈîÅ„ÄÇvar photos: [Photo] { var photosCopy: [Photo]! dispatch_sync(concurrentPhotoQueue) { // ÂêåÊ≠•Ë∞ÉÂ∫¶Âà∞concurrentPhotoQueueÈòüÂàóÊâßË°åËØªÊìç‰Ωú photosCopy = self._photos // ‰øùÂ≠ò } return photosCopy}//ËøôÊ†∑ËØªÂÜôÈóÆÈ¢òÈÉΩËß£ÂÜ≥‰∫Ü„ÄÇ ÈÉΩÁî®ÂºÇÊ≠•Â§ÑÁêÜÈÅøÂÖçÊ≠ªÈîÅÔºåÂºÇÊ≠•ÁöÑÁº∫ÁÇπÂú®‰∫éË∞ÉËØï‰∏çÊñπ‰æøÔºå‰ΩÜÊòØÊØîËµ∑ÂêåÊ≠•ÂÆπÊòì‰∫ßÁîüÊ≠ªÈîÅËøô‰∏™ÂâØ‰ΩúÁî®ËøòÁÆóÂ∞èÁöÑ„ÄÇ ÂºÇÊ≠•APIÂÜôÊ≥ïËÆæËÆ°‰∏Ä‰∏™ÂºÇÊ≠•ÁöÑAPIË∞ÉÁî®dispatch_async()ÔºåËøô‰∏™Ë∞ÉÁî®ÊîæÂú®APIÁöÑÊñπÊ≥ïÊàñÂáΩÊï∞‰∏≠ÂÅö„ÄÇËÆ©APIÁöÑ‰ΩøÁî®ËÄÖËÆæÁΩÆ‰∏Ä‰∏™ÂõûË∞ÉÂ§ÑÁêÜÈòüÂàó 123456789- (void)processImage:(UIImage *)image completionHandler:(void(^)(BOOL success))handler;{ dispatch_async(self.isolationQueue, ^(void){ // do actual processing here dispatch_async(self.resultQueue, ^(void){ handler(YES); }); });} dispatch_applyËøõË°åÂø´ÈÄüËø≠‰ª£1234567891011for (size_t y = 0; y &lt; height; ++y) { for (size_t x = 0; x &lt; width; ++x) { // Do something with x and y here }}//‰ΩøÁî®dispatch_applyÂèØ‰ª•ËøêË°åÁöÑÊõ¥Âø´dispatch_apply(height, dispatch_get_global_queue(0, 0), ^(size_t y) { for (size_t x = 0; x &lt; width; x += 2) { // Do something with x and y here }}); Á§∫‰æãÔºö 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { var storedError: NSError! var downloadGroup = dispatch_group_create() let addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] dispatch_apply(UInt(addresses.count), GlobalUserInitiatedQueue) { i in let index = Int(i) let address = addresses[index] let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_notify(downloadGroup, GlobalMainQueue) { if let completion = completion { completion(error: storedError) } }} BlockÁªÑÂêàDispatch_groupsdispatch groupsÊòØ‰∏ìÈó®Áî®Êù•ÁõëËßÜÂ§ö‰∏™ÂºÇÊ≠•‰ªªÂä°„ÄÇdispatch_group_tÂÆû‰æãÁî®Êù•ËøΩË∏™‰∏çÂêåÈòüÂàó‰∏≠ÁöÑ‰∏çÂêå‰ªªÂä°„ÄÇ ÂΩìgroupÈáåÊâÄÊúâ‰∫ã‰ª∂ÈÉΩÂÆåÊàêGCD APIÊúâ‰∏§ÁßçÊñπÂºèÂèëÈÄÅÈÄöÁü•ÔºåÁ¨¨‰∏ÄÁßçÊòØdispatch_group_waitÔºå‰ºöÈòªÂ°ûÂΩìÂâçËøõÁ®ãÔºåÁ≠âÊâÄÊúâ‰ªªÂä°ÈÉΩÂÆåÊàêÊàñÁ≠âÂæÖË∂ÖÊó∂„ÄÇÁ¨¨‰∫åÁßçÊñπÊ≥ïÊòØ‰ΩøÁî®dispatch_group_notifyÔºåÂºÇÊ≠•ÊâßË°åÈó≠ÂåÖÔºå‰∏ç‰ºöÈòªÂ°û„ÄÇ Á¨¨‰∏ÄÁßç‰ΩøÁî®dispatch_group_waitÁöÑswiftÁöÑ‰æãÂ≠êÔºö 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { dispatch_async(GlobalUserInitiatedQueue) { // Âõ†‰∏∫dispatch_group_wait‰ºöÁßüÂ°ûÂΩìÂâçËøõÁ®ãÔºåÊâÄ‰ª•Ë¶Å‰ΩøÁî®dispatch_asyncÂ∞ÜÊï¥‰∏™ÊñπÊ≥ïË¶ÅÊîæÂà∞ÂêéÂè∞ÈòüÂàóÊâçËÉΩÂ§ü‰øùËØÅ‰∏ªÁ∫øÁ®ã‰∏çË¢´ÈòªÂ°û var storedError: NSError! var downloadGroup = dispatch_group_create() // ÂàõÂª∫‰∏Ä‰∏™dispatch group for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] { let url = NSURL(string: address) dispatch_group_enter(downloadGroup) // dispatch_group_enterÊòØÈÄöÁü•dispatch group‰ªªÂä°ÂºÄÂßã‰∫ÜÔºådispatch_group_enterÂíådispatch_group_leaveÊòØÊàêÂØπË∞ÉÁî®Ôºå‰∏çÁÑ∂Á®ãÂ∫èÂ∞±Â¥©Ê∫É‰∫Ü„ÄÇ let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) // ‰øùÊåÅÂíådispatch_group_enterÈÖçÂØπ„ÄÇÈÄöÁü•‰ªªÂä°Â∑≤ÁªèÂÆåÊàê } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER) // dispatch_group_waitÁ≠âÂæÖÊâÄÊúâ‰ªªÂä°ÈÉΩÂÆåÊàêÁõ¥Âà∞Ë∂ÖÊó∂„ÄÇÂ¶ÇÊûú‰ªªÂä°ÂÆåÊàêÂâçÂ∞±Ë∂ÖÊó∂‰∫ÜÔºåÂáΩÊï∞‰ºöËøîÂõû‰∏Ä‰∏™ÈùûÈõ∂ÂÄºÔºåÂèØ‰ª•ÈÄöËøáËøîÂõûÂÄºÂà§Êñ≠ÊòØÂê¶Ë∂ÖÊó∂„ÄÇ‰πüÂèØ‰ª•Áî®DISPATCH_TIME_FOREVERË°®Á§∫‰∏ÄÁõ¥Á≠â„ÄÇ dispatch_async(GlobalMainQueue) { // ËøôÈáåÂèØ‰ª•‰øùËØÅÊâÄÊúâÂõæÁâá‰ªªÂä°ÈÉΩÂÆåÊàêÔºåÁÑ∂ÂêéÂú®main queueÈáåÂä†ÂÖ•ÂÆåÊàêÂêéË¶ÅÂ§ÑÁêÜÁöÑÈó≠ÂåÖÔºå‰ºöÂú®main queueÈáåÊâßË°å„ÄÇ if let completion = completion { // ÊâßË°åÈó≠ÂåÖÂÜÖÂÆπ completion(error: storedError) } } }} Á¨¨‰∫åÁßç‰ΩøÁî®dispatch_group_notifyÁöÑswiftÁöÑ‰æãÂ≠êÔºö 123456789101112131415161718192021222324252627func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { // ‰∏çÁî®Âä†dispatch_asyncÔºåÂõ†‰∏∫Ê≤°ÊúâÈòªÂ°û‰∏ªËøõÁ®ã var storedError: NSError! var downloadGroup = dispatch_group_create() for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] { let url = NSURL(string: address) dispatch_group_enter(downloadGroup) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } dispatch_group_notify(downloadGroup, GlobalMainQueue) { // dispatch_group_notifyÂíådispatch_group_waitÁöÑÂå∫Âà´Â∞±ÊòØÊòØÂºÇÊ≠•ÊâßË°åÈó≠ÂåÖÁöÑÔºåÂΩìdispatch groups‰∏≠Ê≤°ÊúâÂâ©‰ΩôÁöÑ‰ªªÂä°Êó∂Èó≠ÂåÖÊâçÊâßË°å„ÄÇËøôÈáåÊòØÊåáÊòéÂú®‰∏ªÈòüÂàó‰∏≠ÊâßË°å„ÄÇ if let completion = completion { completion(error: storedError) } }} 1234567891011121314151617181920212223dispatch_group_t group = dispatch_group_create();dispatch_queue_t queue = dispatch_get_global_queue(0, 0);dispatch_group_async(group, queue, ^(){ // ‰ºöÂ§ÑÁêÜ‰∏Ä‰ºö [self doSomeFoo]; dispatch_group_async(group, dispatch_get_main_queue(), ^(){ self.foo = 42; });});dispatch_group_async(group, queue, ^(){ // Â§ÑÁêÜ‰∏Ä‰ºöÂÑø [self doSomeBar]; dispatch_group_async(group, dispatch_get_main_queue(), ^(){ self.bar = 1; });});// ‰∏äÈù¢ÁöÑÈÉΩÊêûÂÆöÂêéËøôÈáå‰ºöÊâßË°å‰∏ÄÊ¨°dispatch_group_notify(group, dispatch_get_main_queue(), ^(){ NSLog(@&quot;foo: %d&quot;, self.foo); NSLog(@&quot;bar: %d&quot;, self.bar);}); Â¶Ç‰ΩïÂØπÁé∞ÊúâAPI‰ΩøÁî®dispatch_group_t 12345678910111213141516171819202122232425262728293031323334//ÁªôCore DataÁöÑ-performBlock:Ê∑ªÂä†groups„ÄÇÁªÑÂêàÂÆåÊàê‰ªªÂä°Âêé‰ΩøÁî®dispatch_group_notifyÊù•ËøêË°å‰∏Ä‰∏™blockÂç≥ÂèØ„ÄÇ- (void)withGroup:(dispatch_group_t)group performBlock:(dispatch_block_t)block{ if (group == NULL) { [self performBlock:block]; } else { dispatch_group_enter(group); [self performBlock:^(){ block(); dispatch_group_leave(group); }]; }}//NSURLConnection‰πüÂèØ‰ª•ËøôÊ†∑ÂÅö+ (void)withGroup:(dispatch_group_t)group sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler{ if (group == NULL) { [self sendAsynchronousRequest:request queue:queue completionHandler:handler]; } else { dispatch_group_enter(group); [self sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){ handler(response, data, error); dispatch_group_leave(group); }]; }} Ê≥®ÊÑè‰∫ãÈ°π dispatch_group_enter() ÂøÖÈ°ªËøêË°åÂú® dispatch_group_leave() ‰πãÂâç„ÄÇ dispatch_group_enter() Âíå dispatch_group_leave() ÈúÄË¶ÅÊàêÂØπÂá∫Áé∞ÁöÑ ‰ΩøÁî®dispatch block objectÔºàË∞ÉÂ∫¶ÂùóÔºâÂú®‰ªªÂä°ÊâßË°åÂâçËøõË°åÂèñÊ∂àdispatch block objectÂèØ‰ª•‰∏∫ÈòüÂàó‰∏≠ÁöÑÂØπË±°ËÆæÁΩÆÁ§∫‰æãÔºå‰∏ãËΩΩÂõæÁâá‰∏≠ÈÄîËøõË°åÂèñÊ∂à 123456789101112131415161718192021222324252627282930313233343536373839404142func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) { var storedError: NSError! let downloadGroup = dispatch_group_create() var addresses = [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] addresses += addresses + addresses // Êâ©Â±ïaddressÊï∞ÁªÑÔºåÂ§çÂà∂3‰ªΩ var blocks: [dispatch_block_t] = [] // ‰∏Ä‰∏™‰øùÂ≠òblockÁöÑÊï∞ÁªÑ for i in 0 ..&lt; addresses.count { dispatch_group_enter(downloadGroup) let block = dispatch_block_create(DISPATCH_BLOCK_INHERIT_QOS_CLASS) { // ÂàõÂª∫‰∏Ä‰∏™blockÔºåblockÁöÑÊ†áÂøóÊòØDISPATCH_BLOCK_INHERIT_QOS_CLASS let index = Int(i) let address = addresses[index] let url = NSURL(string: address) let photo = DownloadPhoto(url: url!) { image, error in if let error = error { storedError = error } dispatch_group_leave(downloadGroup) } PhotoManager.sharedManager.addPhoto(photo) } blocks.append(block) dispatch_async(GlobalMainQueue, block) // ÊääËøô‰∏™blockÊîæÂà∞GlobalMainQueue‰∏äÂºÇÊ≠•Ë∞ÉÁî®„ÄÇÂõ†‰∏∫ÂÖ®Â±ÄÈòüÂàóÊòØ‰∏Ä‰∏™È°∫Â∫èÈòüÂàóÊâÄ‰ª•Êñπ‰æøÂèñÊ∂àÂØπË±°blockÔºåÂêåÊó∂ÂèØ‰ª•‰øùËØÅ‰∏ãËΩΩ‰ªªÂä°Âú®downloadPhotosWithCompletionËøîÂõûÂêéÊâçÂºÄÂßãÊâßË°å„ÄÇ } for block in blocks[3 ..&lt; blocks.count] { let cancel = arc4random_uniform(2) // ÈöèÊú∫ËøîÂõû‰∏Ä‰∏™Êï¥Êï∞Ôºå‰ºöËøîÂõû0Êàñ1 if cancel == 1 { dispatch_block_cancel(block) // Â¶ÇÊûúÊòØ1Â∞±ÂèñÊ∂àblockÔºåËøô‰∏™Âè™ËÉΩÂèëÁîüÂú®blockËøòÂú®ÈòüÂàó‰∏≠Âπ∂Ê≤°ÊúâÂºÄÂßãÁöÑÊÉÖÂÜµ‰∏ã„ÄÇÂõ†‰∏∫ÊääblockÂ∑≤ÁªèÊîæÂà∞‰∫ÜGlobalMainQueue‰∏≠ÔºåÊâÄ‰ª•Ëøô‰∏™Âú∞Êñπ‰ºöÂÖàÊâßË°åÔºåÊâßË°åÂÆå‰∫ÜÊâç‰ºöÊâßË°åblock„ÄÇ dispatch_group_leave(downloadGroup) // Âõ†‰∏∫Â∑≤Áªèdispatch_group_enter‰∫ÜÔºåÊâÄ‰ª•ÂèñÊ∂àÊó∂‰πüË¶ÅÂ∞ÜÂÖ∂ÈÉΩleaveÊéâ„ÄÇ } } dispatch_group_notify(downloadGroup, GlobalMainQueue) { if let completion = completion { completion(error: storedError) } }} Áî®GCDÁõëËßÜËøõÁ®ã1234567891011NSRunningApplication *mail = [NSRunningApplication runningApplicationsWithBundleIdentifier:@&quot;com.apple.mail&quot;];if (mail == nil) { return;}pid_t const pid = mail.processIdentifier;self.source = dispatch_source_create(DISPATCH_SOURCE_TYPE_PROC, pid, DISPATCH_PROC_EXIT, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(self.source, ^(){ NSLog(@&quot;Mail quit.&quot;);});//Âú®‰∫ã‰ª∂Ê∫ê‰º†Âà∞‰Ω†ÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂâçÈúÄË¶ÅË∞ÉÁî®dispatch_resume()Ëøô‰∏™ÊñπÊ≥ïdispatch_resume(self.source); ÁõëËßÜÊñá‰ª∂Â§πÂÜÖÊñá‰ª∂ÂèòÂåñ12345678910111213141516171819202122232425NSURL *directoryURL; // assume this is set to a directoryint const fd = open([[directoryURL path] fileSystemRepresentation], O_EVTONLY);if (fd &lt; 0) { char buffer[80]; strerror_r(errno, buffer, sizeof(buffer)); NSLog(@&quot;Unable to open \\&quot;%@\\&quot;: %s (%d)&quot;, [directoryURL path], buffer, errno); return;}dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, fd,DISPATCH_VNODE_WRITE | DISPATCH_VNODE_DELETE, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^(){ unsigned long const data = dispatch_source_get_data(source); if (data &amp; DISPATCH_VNODE_WRITE) { NSLog(@&quot;The directory changed.&quot;); } if (data &amp; DISPATCH_VNODE_DELETE) { NSLog(@&quot;The directory has been deleted.&quot;); }});dispatch_source_set_cancel_handler(source, ^(){ close(fd);});self.source = source;dispatch_resume(self.source);//ËøòË¶ÅÊ≥®ÊÑèÈúÄË¶ÅÁî®DISPATCH_VNODE_DELETE ÂéªÊ£ÄÊü•ÁõëËßÜÁöÑÊñá‰ª∂ÊàñÊñá‰ª∂Â§πÊòØÂê¶Ë¢´Âà†Èô§ÔºåÂ¶ÇÊûúÂà†Èô§‰∫ÜÂ∞±ÂÅúÊ≠¢ÁõëÂê¨ GCDÁâàÂÆöÊó∂Âô®12345678dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,0, 0, DISPATCH_TARGET_QUEUE_DEFAULT);dispatch_source_set_event_handler(source, ^(){ NSLog(@&quot;Time flies.&quot;);});dispatch_time_t startdispatch_source_set_timer(source, DISPATCH_TIME_NOW, 5ull * NSEC_PER_SEC,100ull * NSEC_PER_MSEC);self.source = source;dispatch_resume(self.source); GCDÊ∑±ÂÖ•Êìç‰Ωú ÁºìÂÜ≤Âå∫Ôºödispatch_data_tÂü∫‰∫éÈõ∂Á¢éÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºå‰ΩøÁî®dispatch_data_applyÊù•ÈÅçÂéÜÔºåËøòÂèØ‰ª•Áî®dispatch_data_create_subrangeÊù•ÂàõÂª∫‰∏Ä‰∏™‰∏çÂÅö‰ªª‰ΩïÊã∑Ë¥ùÁöÑÂ≠êÂå∫Âüü I/OË∞ÉÂ∫¶Ôºö‰ΩøÁî®GCDÊèê‰æõÁöÑdispatch_io_readÔºådispatch_io_writeÂíådispatch_io_close ÊµãËØïÔºö‰ΩøÁî®dispatch_benchmarkÂ∞èÂ∑•ÂÖ∑ ÂéüÂ≠êÊìç‰ΩúÔºö libkern/OSAtomic.hÈáåÂèØ‰ª•Êü•ÁúãÈÇ£‰∫õÂáΩÊï∞ÔºåÁî®‰∫éÂ∫ïÂ±ÇÂ§öÁ∫øÁ®ãÁºñÁ®ã„ÄÇ Cocoa NSOperation‰ΩøÁî®NSOperationÁöÑ‰∏§ÁßçÊñπÂºè„ÄÇ‰∏ÄÁßçÁî®ÂÆö‰πâÂ•ΩÁöÑ‰∏§‰∏™Â≠êÁ±ªNSInvocationOperationÂíåNSBlockOperationÔºåÂè¶‰∏Ä‰∏™ÊòØÁªßÊâøNSOperation„ÄÇ NSOperationÊòØËÆæËÆ°Áî®Êù•Êâ©Â±ïÁöÑÔºåÂè™ÈúÄÁªßÊâøÈáçÂÜôNSOperationÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïmainÔºåÁÑ∂ÂêéÊääNSOperationÂ≠êÁ±ªÁöÑÂØπË±°ÊîæÂÖ•NSOperationQueueÈòüÂàó‰∏≠ÔºåËØ•ÈòüÂàóÂ∞±‰ºöÂêØÂä®Âπ∂ÂºÄÂßãÂ§ÑÁêÜÂÆÉ„ÄÇ NSInvocationOperation‰æãÂ≠ê 1234567891011121314151617181920212223242526272829#import &quot;ViewController.h&quot;#define kURL @&quot;https://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;@interface ViewController ()@end@implementation ViewController- (void)viewDidLoad{ [super viewDidLoad]; NSInvocationOperation *operation = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(downloadImage:) object:kURL]; NSOperationQueue *queue = [[NSOperationQueue alloc]init]; [queue addOperation:operation]; //ÊîæËøõÂéªÂ∞±ÂºÄÂßã‰∫Ü // Do any additional setup after loading the view, typically from a nib.}-(void)downloadImage:(NSString *)url{ NSLog(@&quot;url:%@&quot;, url); NSURL *nsUrl = [NSURL URLWithString:url]; NSData *data = [[NSData alloc]initWithContentsOfURL:nsUrl]; UIImage * image = [[UIImage alloc]initWithData:data]; [self performSelectorOnMainThread:@selector(updateUI:) withObject:image waitUntilDone:YES];}-(void)updateUI:(UIImage*) image{ self.imageView.image = image;} Operation QueueÊòØÂú®GCD‰∏äÂÆûÁé∞‰∫Ü‰∏Ä‰∫õÊñπ‰æøÁöÑÂäüËÉΩ„ÄÇ‰ºòÁÇπÊòØ‰∏çÈúÄË¶ÅÂÖ≥ÂøÉÁ∫øÁ®ãÁÆ°ÁêÜÔºåÊï∞ÊçÆÂêåÊ≠•„ÄÇCocoa operationÁõ∏ÂÖ≥ÁöÑÁ±ªÊòØNSOperationÔºåNSOperationQueue„ÄÇ NSOperationQueueÊúâ‰∏ªÈòüÂàóÂíåËá™ÂÆö‰πâÈòüÂàó‰∏§ÁßçÁ±ªÂûãÈòüÂàó„ÄÇ‰∏ªÈòüÂàóÂú®‰∏ªÁ∫øÁ®ã‰∏äËøêË°åÔºåËá™ÂÆö‰πâÈòüÂàóÂú®ÂêéÂè∞„ÄÇ ÈáçÂÜômainÊñπÊ≥ïËá™ÂÆö‰πâËá™Â∑±ÁöÑoperations„ÄÇËæÉÁÆÄÂçïÔºå‰∏çÈúÄË¶ÅÁÆ°ÁêÜisExecutingÂíåisFinishedÔºåmainËøîÂõûÊó∂operationÂ∞±ÁªìÊùü‰∫Ü„ÄÇ 123456@implementation YourOperation - (void)main { // ËøõË°åÂ§ÑÁêÜ ... }@end ÈáçÂÜôstartÊñπÊ≥ïËÉΩÂ§üËé∑ÂæóÊõ¥Â§öÁöÑÊéßÂà∂ÊùÉÔºåËøòÂèØ‰ª•Âú®‰∏Ä‰∏™Êìç‰Ωú‰∏≠ÊâßË°åÂºÇÊ≠•‰ªªÂä° 123456789101112131415161718192021@implementation YourOperation - (void)start { self.isExecuting = YES; self.isFinished = NO; // ÂºÄÂßãÂ§ÑÁêÜÔºåÂú®ÁªìÊùüÊó∂Â∫îËØ•Ë∞ÉÁî® finished ... } - (void)finished { self.isExecuting = NO; self.isFinished = YES; }@end//‰ΩøÊìç‰ΩúÈòüÂàóÊúâÂèñÊ∂àÂäüËÉΩÔºåÈúÄË¶Å‰∏çÊñ≠Ê£ÄÊü•isCancelledÂ±ûÊÄß- (void)main{ while (notDone &amp;&amp; !self.isCancelled) { // ËøõË°åÂ§ÑÁêÜ }} ÂÆö‰πâÂ•ΩoperationÁ±ª‰ª•ÂêéÔºåÂ∞Ü‰∏Ä‰∏™operationÂä†Âà∞ÈòüÂàóÈáåÔºö 123NSOperationQueue *queue = [[NSOperationQueue alloc] init];YourOperation *operation = [[YourOperation alloc] init];[queue addOperation:operation]; Â¶ÇÊûúÊòØÂú®‰∏ªÈòüÂàó‰∏≠ËøõË°å‰∏Ä‰∏™‰∏ÄÊ¨°ÊÄß‰ªªÂä°ÔºåÂèØ‰ª•Â∞ÜblockÂä†Âà∞Êìç‰ΩúÈòüÂàó 123[[NSOperationQueue mainQueue] addOperationWithBlock:^{ // ‰ª£Á†Å...}]; ÈÄöËøámaxConcurrentOperationCountÂ±ûÊÄßÊéßÂà∂‰∏Ä‰∏™ÁâπÂÆöÈòüÂàó‰∏≠Âπ∂ÂèëÊâßË°åÊìç‰ΩúÁöÑÊï∞Èáè„ÄÇËÆæÁΩÆ‰∏∫1Â∞±ÊòØ‰∏≤Ë°åÈòüÂàó„ÄÇ ÂØπoperation‰ºòÂÖàÁ∫ßÊéíÂ∫èÔºåÊåáÂÆöoperation‰πãÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ª„ÄÇ 1234//Á°Æ‰øùoperation1Âíåoperation2ÊòØÂú®intermediateOperationÂíåfinishOperation‰πãÂâçÊâßË°å[intermediateOperation addDependency:operation1];[intermediateOperation addDependency:operation2];[finishedOperation addDependency:intermediateOperation]; NSThreadNSThreadÊäΩË±°Â∫¶ÊúÄÈ´òÔºå‰πüÊòØAppleÊâÄÊé®ËçêÁöÑ„ÄÇÁº∫ÁÇπÊòØÈúÄË¶ÅËá™Â∑±ÁÆ°ÁêÜÁ∫øÁ®ãÁöÑÁîüÂëΩÂë®ÊúüÔºåÁ∫øÁ®ãÂêåÊ≠•„ÄÇÁ∫øÁ®ãÂêåÊ≠•ÂØπÊï∞ÊçÆÂä†ÈîÅ‰ºöÊúâ‰∏ÄÂÆöÁ≥ªÁªüÂºÄÈîÄ„ÄÇNSThreadÂÆûÁé∞ÁöÑÊäÄÊúØÊúâ‰∏âÁßç Cocoa threads POSIX threads Multiprocessing Services ÂàõÂª∫ÊñπÂºè123456789101112- (id)initWithTarget:(id)target selector:(SEL)selector object:(id)argument //ÂÆû‰æãÊñπÊ≥ï+ (void)detachNewThreadSelector:(SEL)aSelector toTarget:(id)aTarget withObject:(id)anArgument //Á±ªÊñπÊ≥ï//Áõ¥Êé•ÂàõÂª∫Á∫øÁ®ãÂπ∂‰∏îËøêË°å1„ÄÅ[NSThread detachNewThreadSelector:@selector(doSomething:) toTarget:self withObject:nil];//ÂÖàÂàõÂª∫Á∫øÁ®ãÂØπË±°ÔºåÂÜçËøêË°åÁ∫øÁ®ãÊìç‰ΩúÔºåËøêË°åÂâçÂèØ‰ª•ËÆæÁΩÆÁ∫øÁ®ã‰ºòÂÖàÁ∫ßÁ≠âÁ∫øÁ®ã‰ø°ÊÅØ„ÄÇ2„ÄÅNSThread* myThread = [[NSThread alloc] initWithTarget:selfselector:@selector(doSomething:)object:nil];[myThread start];//‰∏çÊòæÂºèÂàõÂª∫Á∫øÁ®ãÁöÑÊñπÊ≥ïÔºå‰ΩøÁî®NSObjectÁöÑÁ±ªÊñπÊ≥ïÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ã3„ÄÅ[Obj performSelectorInBackground:@selector(doSomething) withObject:nil]; Á§∫‰æã 12345678910111213141516171819202122232425262728293031#import &quot;ViewController.h&quot;#define kURL @&quot;https://avatar.csdn.net/2/C/D/1_totogo2010.jpg&quot;@interface ViewController ()@end@implementation ViewController-(void)downloadImage:(NSString *) url{ NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]]; UIImage *image = [[UIImage alloc]initWithData:data]; if(image == nil){ }else{ //Êõ¥Êñ∞‰∏ªÁ∫øÁ®ãÂ§ñÁöÑÊï∞ÊçÆ‰ΩøÁî®performSelector:onThread:withObject:waitUntilDone: [self performSelectorOnMainThread:@selector(updateUI:) withObject:image waitUntilDone:YES]; }}-(void)updateUI:(UIImage*) image{ self.imageView.image = image;}- (void)viewDidLoad{ [super viewDidLoad];// [NSThread detachNewThreadSelector:@selector(downloadImage:) toTarget:self withObject:kURL]; NSThread *thread = [[NSThread alloc]initWithTarget:self selector:@selector(downloadImage:) object:kURL]; [thread start];}@end NSThreadÁöÑÁ∫øÁ®ãÂêåÊ≠•Ôºå‰ΩøÁî®NSLockÂçñÁ•®ÁöÑ‰æãÂ≠ê 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#import &lt;UIKit/UIKit.h&gt;@class ViewController;@interface AppDelegate : UIResponder &lt;UIApplicationDelegate&gt;{ int tickets; int count; NSThread* ticketsThreadone; NSThread* ticketsThreadtwo; NSCondition* ticketsCondition; NSLock *theLock;}@property (strong, nonatomic) UIWindow *window;@property (strong, nonatomic) ViewController *viewController;@end- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ tickets = 100; count = 0; theLock = [[NSLock alloc] init]; // ÈîÅÂØπË±° ticketsCondition = [[NSCondition alloc] init]; ticketsThreadone = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [ticketsThreadone setName:@&quot;Thread-1&quot;]; [ticketsThreadone start]; ticketsThreadtwo = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [ticketsThreadtwo setName:@&quot;Thread-2&quot;]; [ticketsThreadtwo start]; self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; // Override point for customization after application launch. self.viewController = [[ViewController alloc] initWithNibName:@&quot;ViewController&quot; bundle:nil]; self.window.rootViewController = self.viewController; [self.window makeKeyAndVisible]; return YES;}- (void)run{ while (TRUE) { // ‰∏äÈîÅ // [ticketsCondition lock]; [theLock lock]; if(tickets &gt;= 0){ [NSThread sleepForTimeInterval:0.09]; count = 100 - tickets; NSLog(@&quot;ÂΩìÂâçÁ•®Êï∞ÊòØ:%d,ÂîÆÂá∫:%d,Á∫øÁ®ãÂêç:%@&quot;,tickets,count,[[NSThread currentThread] name]); tickets--; }else{ break; } [theLock unlock]; // [ticketsCondition unlock]; }} Ê≤°ÊúâÁ∫øÁ®ãÂêåÊ≠•lock,ÂçñÁ•®Êï∞ÂèØËÉΩ‰ºöÊòØ-1.Âä†‰∏äËÉΩÂ§ü‰øùËØÅÊï∞ÊçÆÁöÑÊ≠£Á°Æ„ÄÇ NSThreadÁ∫øÁ®ãÁöÑÈ°∫Â∫èÊâßË°åÂêåÊ≠•ÂèØ‰ª•ÈÄöËøá[NSCondition signal]ÁöÑÊñπÂºèÂèëÈÄÅ‰ø°Âè∑ÔºåÂú®‰∏Ä‰∏™Á∫øÁ®ãÂî§ÈÜíÂè¶‰∏Ä‰∏™Á∫øÁ®ãÁ≠âÂæÖ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#import &quot;AppDelegate.h&quot;#import &quot;ViewController.h&quot;@implementation AppDelegate- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ tickets = 100; count = 0; theLock = [[NSLock alloc] init]; // ÈîÅÂØπË±° ticketsCondition = [[NSCondition alloc] init]; ticketsThreadone = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [ticketsThreadone setName:@&quot;Thread-1&quot;]; [ticketsThreadone start]; ticketsThreadtwo = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil]; [ticketsThreadtwo setName:@&quot;Thread-2&quot;]; [ticketsThreadtwo start]; NSThread *ticketsThreadthree = [[NSThread alloc] initWithTarget:self selector:@selector(run3) object:nil]; [ticketsThreadthree setName:@&quot;Thread-3&quot;]; [ticketsThreadthree start]; self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; // Override point for customization after application launch. self.viewController = [[ViewController alloc] initWithNibName:@&quot;ViewController&quot; bundle:nil]; self.window.rootViewController = self.viewController; [self.window makeKeyAndVisible]; return YES;}-(void)run3{ while (YES) { [ticketsCondition lock]; [NSThread sleepForTimeInterval:3]; [ticketsCondition signal]; [ticketsCondition unlock]; }}- (void)run{ while (TRUE) { // ‰∏äÈîÅ [ticketsCondition lock]; [ticketsCondition wait]; [theLock lock]; if(tickets &gt;= 0){ [NSThread sleepForTimeInterval:0.09]; count = 100 - tickets; NSLog(@&quot;ÂΩìÂâçÁ•®Êï∞ÊòØ:%d,ÂîÆÂá∫:%d,Á∫øÁ®ãÂêç:%@&quot;,tickets,count,[[NSThread currentThread] name]); tickets--; }else{ break; } [theLock unlock]; [ticketsCondition unlock]; }} waitÊòØÁ≠âÂæÖÔºåÂÅáÂïä‰∏Ä‰∏™Á∫øÁ®ã3ÂéªÂî§ÈÜíÂÖ∂ÂÆÉ‰∏§‰∏™Á∫øÁ®ãÈîÅ‰∏≠ÁöÑwait ÂÖ∂ÂÆÉÂêåÊ≠•ÂèØ‰ª•‰ΩøÁî®@synchronizedÊù•ÁÆÄÂåñNSLock‰ΩøÁî®ÔºåËøôÊ†∑Â∞±‰∏çÂøÖÊòæÁ§∫ÁºñÂÜôÂàõÂª∫NSLockÂä†ÈîÅÂπ∂Ëß£ÈîÅÁõ∏ÂÖ≥‰ª£Á†Å„ÄÇ 1234567- (void)doSomeThing:(id)anObj{ @synchronized(anObj) { // Everything between the braces is protected by the @synchronized directive. }} ËøòÊúâ‰∫õÂÖ∂ÂÆÉÁöÑÈîÅÂØπË±°ÔºåÊØîÂ¶ÇÂæ™ÁéØÈîÅNSRecursiveLockÔºåÊù°‰ª∂ÈîÅNSConditionLockÔºåÂàÜÂ∏ÉÂºèÈîÅNSDistributedLockÁ≠âÔºåÂèØÊü•ÈòÖÂÆòÊñπÊñáÊ°£„ÄÇ Run Loops Run loopÊØîGCDÂíåÊìç‰ΩúÈòüÂàóË¶ÅÂÆπÊòìÔºå‰∏çÂøÖÂ§ÑÁêÜÂπ∂Âèë‰∏≠Â§çÊùÇÊÉÖÂÜµÂ∞±ËÉΩÂºÇÊ≠•ÊâßË°å„ÄÇ ‰∏ªÁ∫øÁ®ãÈÖçÁΩÆmain run loopÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãÈªòËÆ§ÈÉΩÊ≤°ÊúâÈÖçÁΩÆrun loop„ÄÇ‰∏ÄËà¨ÈÉΩÂú®‰∏ªÁ∫øÁ®ã‰∏≠Ë∞ÉÁî®ÂêéÂàÜÈÖçÁªôÂÖ∂ÂÆÉÈòüÂàó„ÄÇÂ¶ÇÊûúË¶ÅÂú®ÂÖ∂ÂÆÉÁ∫øÁ®ãÊ∑ªÂä†run loopËá≥Â∞ëÊ∑ªÂä†‰∏Ä‰∏™input sourceÔºå‰∏çÁÑ∂‰∏ÄËøêË°åÂ∞±‰ºöÈÄÄÂá∫„ÄÇ Âú®ÂêéÂè∞Êìç‰ΩúUI‰ΩøÁî®Êìç‰ΩúÈòüÂàóÂ§ÑÁêÜ123456789//weakÂºïÁî®ÂèÇÁÖßselfÈÅøÂÖçÂæ™ÁéØÂºïÁî®ÔºåÂèäblockÊåÅÊúâselfÔºåoperationQueue retain‰∫ÜblockÔºåËÄåselfÊúâretain‰∫ÜoperationQueue„ÄÇ__weak id weakSelf = self;[self.operationQueue addOperationWithBlock:^{ NSNumber* result = findLargestMersennePrime(); [[NSOperationQueue mainQueue] addOperationWithBlock:^{ MyClass* strongSelf = weakSelf; strongSelf.textLabel.text = [result stringValue]; }];}]; drawRectÂú®ÂêéÂè∞ÁªòÂà∂drawRect:ÊñπÊ≥ï‰ºöÂΩ±ÂìçÊÄßËÉΩÔºåÊâÄ‰ª•ÂèØ‰ª•ÊîæÂà∞ÂêéÂè∞ÊâßË°å„ÄÇ 123456//‰ΩøÁî®UIGraphicsBeginImageContextWithOptionsÂèñ‰ª£UIGraphicsGetCurrentContext:ÊñπÊ≥ïUIGraphicsBeginImageContextWithOptions(size, NO, 0);// drawing code hereUIImage *i = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return i; ÂèØ‰ª•ÊääËøô‰∏™ÊñπÊ≥ïËøêÁî®Âà∞table view‰∏≠Ôºå‰Ωøtable viewÁöÑcellÂú®ÊªöÂá∫ËæπÁïåÊó∂ËÉΩÂú®didEndDisplayingCellÂßîÊâòÊñπÊ≥ï‰∏≠ÂèñÊ∂à„ÄÇWWDC‰∏≠ÊúâËÆ≤Ëß£ÔºöSession 211 ‚Äì Building Concurrent User Interfaces on iOS https://developer.apple.com/videos/wwdc/2012/ ËøòÊúâ‰∏™‰ΩøÁî®CALayerÈáådrawsAsynchronouslyÂ±ûÊÄßÁöÑÊñπÊ≥ï„ÄÇ‰∏çËøáÊúâÊó∂workÔºåÊúâÊó∂‰∏ç‰∏ÄÂÆö„ÄÇ ÁΩëÁªúÂºÇÊ≠•ËØ∑Ê±ÇÁΩëÁªúÈÉΩË¶Å‰ΩøÁî®ÂºÇÊ≠•ÊñπÂºèÔºå‰ΩÜÊòØ‰∏çË¶ÅÁõ¥Êé•‰ΩøÁî®dispatch_asyncÔºåËøôÊ†∑Ê≤°Ê≥ïÂèñÊ∂àËøô‰∏™ÁΩëÁªúËØ∑Ê±Ç„ÄÇdataWithContentsOfURL:ÁöÑË∂ÖÊó∂ÊòØ30ÁßíÔºåÈÇ£‰πàËøô‰∏™Á∫øÁ®ãÈúÄË¶ÅÂπ≤Á≠âÂà∞Ë∂ÖÊó∂ÂÆå„ÄÇËß£ÂÜ≥ÂäûÊ≥ïÂ∞±ÊòØ‰ΩøÁî®NSURLConnectionÁöÑÂºÇÊ≠•ÊñπÊ≥ïÔºåÊääÊâÄÊúâÊìç‰ΩúËΩ¨ÂåñÊàêoperationÊù•ÊâßË°å„ÄÇNSURLConnectionÊòØÈÄöËøárun loopÊù•ÂèëÈÄÅ‰∫ã‰ª∂ÁöÑ„ÄÇAFNetworkingÊòØÂª∫Á´ã‰∏Ä‰∏™Áã¨Á´ãÁöÑÁ∫øÁ®ãËÆæÁΩÆ‰∏Ä‰∏™Èùûmain run loop„ÄÇ‰∏ãÈù¢ÊòØÂ§ÑÁêÜURLËøûÊé•ÈáçÂÜôËá™ÂÆö‰πâoperationÂ≠êÁ±ªÈáåÁöÑstartÊñπÊ≥ï 1234567891011- (void)start{ NSURLRequest* request = [NSURLRequest requestWithURL:self.url]; self.isExecuting = YES; self.isFinished = NO; [[NSOperationQueue mainQueue] addOperationWithBlock:^ { self.connection = [NSURLConnectionconnectionWithRequest:request delegate:self]; }];} ÈáçÂÜôstartÊñπÊ≥ïÈúÄË¶ÅÁÆ°ÁêÜisExecutingÂíåisFinishedÁä∂ÊÄÅ„ÄÇ‰∏ãÈù¢ÊòØÂèñÊ∂àÊìç‰ΩúÁöÑÊñπÊ≥ï 123456789101112131415- (void)cancel{ [super cancel]; [self.connection cancel]; self.isFinished = YES; self.isExecuting = NO;}//ËøûÊé•ÂÆåÊàêÂèëÈÄÅÂõûË∞É- (void)connectionDidFinishLoading:(NSURLConnection *)connection{ self.data = self.buffer; self.buffer = nil; self.isExecuting = NO; self.isFinished = YES;} ÂêéÂè∞Â§ÑÁêÜI/OÂºÇÊ≠•Â§ÑÁêÜÊñá‰ª∂ÂèØ‰ª•‰ΩøÁî®NSInputStream„ÄÇÂÆòÊñπÊñáÊ°£Ôºöhttps://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/TechniquesforReadingandWritingCustomFiles/TechniquesforReadingandWritingCustomFiles.html ÂÆû‰æãÔºöhttps://github.com/objcio/issue-2-background-file-io 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364@interface Reader : NSObject- (void)enumerateLines:(void (^)(NSString*))block completion:(void (^)())completion;- (id)initWithFileAtPath:(NSString*)path;//ÈááÁî®main run loopÁöÑ‰∫ã‰ª∂Â∞ÜÊï∞ÊçÆÂèëÂà∞ÂêéÂè∞Êìç‰ΩúÁ∫øÁ®ãÂéªÂ§ÑÁêÜ- (void)enumerateLines:(void (^)(NSString*))blockcompletion:(void (^)())completion{ if (self.queue == nil) { self.queue = [[NSOperationQueue alloc] init]; self.queue.maxConcurrentOperationCount = 1; } self.callback = block; self.completion = completion; self.inputStream = [NSInputStream inputStreamWithURL:self.fileURL]; self.inputStream.delegate = self; [self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; [self.inputStream open]; }@end//input streamÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÂèëÈÄÅ‰ª£ÁêÜÊ∂àÊÅØÔºåÊé•ÁùÄÂ∞±ÂèØ‰ª•Âú®Êìç‰ΩúÈòüÂàóÂä†ÂÖ•blockÊìç‰Ωú- (void)stream:(NSStream*)stream handleEvent:(NSStreamEvent)eventCode{ switch (eventCode) { ... case NSStreamEventHasBytesAvailable: { NSMutableData *buffer = [NSMutableData dataWithLength:4 * 1024]; NSUInteger length = [self.inputStream read:[buffer mutableBytes] maxLength:[buffer length]]; if (0 &lt; length) { [buffer setLength:length]; __weak id weakSelf = self; [self.queue addOperationWithBlock:^{ [weakSelf processDataChunk:buffer]; }]; } break; } ... }}//Â§ÑÁêÜÊï∞ÊçÆchunkÔºåÂéüÁêÜÂ∞±ÊòØÊääÊï∞ÊçÆÂàáÊàêÂæàÂ§öÂ∞èÂùóÔºåÁÑ∂Âêé‰∏çÊñ≠Êõ¥Êñ∞ÂíåÂ§ÑÁêÜbufferÁºìÂÜ≤Âå∫ÔºåÈÄêÂùóËØªÂèñÂíåÂ≠òÂÖ•ÊñπÂºèÊù•Â§ÑÁêÜÂ§ßÊñá‰ª∂ÂìçÂ∫îÂø´ËÄå‰∏îÂÜÖÂ≠òÂºÄÈîÄ‰πüÂ∞è„ÄÇ- (void)processDataChunk:(NSMutableData *)buffer;{ if (self.remainder != nil) { [self.remainder appendData:buffer]; } else { self.remainder = buffer; } [self.remainder obj_enumerateComponentsSeparatedBy:self.delimiter usingBlock:^(NSData* component, BOOL last) { if (!last) { [self emitLineWithData:component]; } else if (0 &lt; [component length]) { self.remainder = [component mutableCopy]; } else { self.remainder = nil; } }];} Âπ∂ÂèëÂºÄÂèë‰ºöÈÅáÂà∞ÁöÑÂõ∞ÈöæÈóÆÈ¢òÂ§ö‰∏™Á∫øÁ®ãËÆøÈóÆÂÖ±‰∫´ËµÑÊ∫êÊØîÂ¶Ç‰∏§‰∏™Á∫øÁ®ãÈÉΩ‰ºöÊääËÆ°ÁÆóÁªìÊûúÂÜôÂà∞‰∏Ä‰∏™Êï¥ÂûãÊï∞‰∏≠„ÄÇ‰∏∫‰∫ÜÈò≤Ê≠¢ÔºåÈúÄË¶Å‰∏ÄÁßç‰∫íÊñ•Êú∫Âà∂Êù•ËÆøÈóÆÂÖ±‰∫´ËµÑÊ∫ê ‰∫íÊñ•ÈîÅÂêå‰∏ÄÊó∂ÂàªÂè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÊüê‰∏™ËµÑÊ∫ê„ÄÇÊüêÁ∫øÁ®ãË¶ÅËÆøÈóÆÊüê‰∏™ÂÖ±‰∫´ËµÑÊ∫êÂÖàËé∑ÂæóÂÖ±‰∫´ËµÑÊ∫êÁöÑ‰∫íÊñ•ÈîÅÔºåÂÆåÊàêÊìç‰ΩúÂÜçÈáäÊîæËøô‰∏™‰∫íÊñ•ÈîÅÔºåÁÑ∂ÂêéÂÖ∂ÂÆÉÁ∫øÁ®ãÂ∞±ËÉΩËÆøÈóÆËøô‰∏™ÂÖ±‰∫´ËµÑÊ∫ê„ÄÇ ËøòÊúâÈúÄË¶ÅËß£ÂÜ≥Êó†Â∫èÊâßË°åÈóÆÈ¢òÔºåËøôÊó∂Â∞±ÈúÄË¶ÅÂºïÂÖ•ÂÜÖÂ≠òÂ±èÈöú„ÄÇ Âú®Objective-C‰∏≠Â¶ÇÊûúÂ±ûÊÄßÂ£∞Êòé‰∏∫atomicÂ∞±ËÉΩÂ§üÊîØÊåÅ‰∫íÊñ•ÈîÅÔºå‰ΩÜÊòØÂõ†‰∏∫Âä†Ëß£ÈîÅ‰ºöÊúâÊÄßËÉΩ‰ª£‰ª∑ÔºåÊâÄ‰ª•‰∏ÄËà¨ÊòØÂ£∞ÊòénoatomicÁöÑ„ÄÇ Ê≠ªÈîÅÂΩìÂ§ö‰∏™Á∫øÁ®ãÂú®Áõ∏‰∫íÁ≠âÂæÖÂØπÊñπÈîÅÁªìÊùüÊó∂Â∞±‰ºöÂèëÁîüÊ≠ªÈîÅÔºåÁ®ãÂ∫èÂèØËÉΩ‰ºöÂç°‰Ωè„ÄÇ 1234567891011121314void swap(A, B){ lock(lockA); lock(lockB); int a = A; int b = B; A = b; B = a; unlock(lockB); unlock(lockA);}//‰∏ÄËà¨Ê≤°ÈóÆÈ¢òÔºå‰ΩÜÊòØÂ¶ÇÊûú‰∏§‰∏™Á∫øÁ®ã‰ΩøÁî®Áõ∏ÂèçÁöÑÂÄºÂêåÊó∂Ë∞ÉÁî®‰∏äÈù¢Ëøô‰∏™ÊñπÊ≥ïÂ∞±ÂèØËÉΩ‰ºöÊ≠ªÈîÅ„ÄÇÁ∫øÁ®ã1Ëé∑ÂæóXÁöÑ‰∏Ä‰∏™ÈîÅÔºåÁ∫øÁ®ã2Ëé∑ÂæóYÁöÑ‰∏Ä‰∏™ÈîÅÔºåÂÆÉ‰ª¨‰ºöÂêåÊó∂Á≠âÂæÖÂè¶‰∏Ä‰∏™ÈîÅÁöÑÈáäÊîæÔºå‰ΩÜÊòØÂç¥ÊòØÊ≤°Ê≥ïÁ≠âÂà∞ÁöÑ„ÄÇswap(X, Y); // Á∫øÁ®ã 1swap(Y, X); // Á∫øÁ®ã 2 ‰∏∫‰∫ÜÈò≤Ê≠¢Ê≠ªÈîÅÔºåÈúÄË¶Å‰ΩøÁî®ÊØîÁÆÄÂçïËØªÂÜôÈîÅÊõ¥Â•ΩÁöÑÂäûÊ≥ïÔºåÊØîÂ¶Çwrite preferencehttps://en.wikipedia.org/wiki/Readers%E2%80%93writer_lockÔºåÊàñread-copy-updateÁÆóÊ≥ïhttps://en.wikipedia.org/wiki/Read-copy-update ‰ºòÂÖàÁ∫ßÂèçËΩ¨ËøêË°åÊó∂‰Ωé‰ºòÂÖàÁ∫ß‰ªªÂä°Áî±‰∫éÂÖàÂèñÂæó‰∫ÜÈáäÊîæ‰∫ÜÈîÅÁöÑÂÖ±‰∫´ËµÑÊ∫êËÄåÈòªÂ°û‰∫ÜÈ´ò‰ºòÂÖàÁ∫ß‰ªªÂä°ÔºåËøôÁßçÊÉÖÂÜµÂè´ÂÅö‰ºòÂÖàÁ∫ßÂèçËΩ¨ ÊúÄ‰Ω≥ÂÆâÂÖ®ÂÆûË∑µÈÅøÂÖçÈóÆÈ¢òÁöÑÊñπÊ≥ï‰ªé‰∏ªÁ∫øÁ®ã‰∏≠ÂèñÂà∞Êï∞ÊçÆÔºåÂà©Áî®‰∏Ä‰∏™Êìç‰ΩúÈòüÂàóÂú®ÂêéÂè∞Â§ÑÁêÜÊï∞ÊçÆÔºåÂÆåÂêéËøîÂõûÂêéÂè∞ÈòüÂàó‰∏≠ÂæóÂà∞ÁöÑÊï∞ÊçÆÂà∞‰∏ªÈòüÂàó‰∏≠„ÄÇËøôÊ†∑ÁöÑÊìç‰Ωú‰∏ç‰ºöÊúâ‰ªª‰ΩïÈîÅÊìç‰Ωú„ÄÇ Âπ∂ÂèëÊµãËØï ‰ΩøÁî®SenTestingKitÊ°ÜÊû∂ÊµãËØïÔºöhttps://github.com/nxtbgthng/SenTestingKitAsync kiwiÔºöhttps://github.com/allending/Kiwi GHunitÔºöhttps://github.com/gabriel/gh-unit/ming1016","link":"/ÁºñÁ®ã/Ô£ø/ios-bing-fa/"},{"title":"iOSËÆæËÆ°Ê®°Âºè","text":"iOS ËÆæËÆ°Ê®°Âºè MVC ModelÔºöÊ®°Âûã ViewÔºöËßÜÂõæ ControllerÔºöÊéßÂà∂Âô® Âçï‰æãÂçï‰æã‰ΩøÁî®ÊáíÂä†ËΩΩÊñπÂºèÂú®Á¨¨‰∏ÄÊ¨°ÂÆû‰æãÊó∂ÂàõÂª∫ÔºåÂ¶Ç[NSUserDefaults standardUserDefaults]Ôºå[UIApplication sharedApplication]Ôºå[UIScreen mainScreen]Ôºå[NSFileManager defaultManager] Á≥ªÁªüÁöÑÂçï‰æãÁ±ª UIApplication NSNotificationCenter NSFileManager NSUserDefaults NSURLCache NSHTTPCookieStorage123456789101112131415161718@interfaceLibraryAPI : NSObject + (LibraryAPI*)sharedInstance; @end+ (LibraryAPI*)sharedInstance { // Â£∞Êòé‰∏Ä‰∏™ÈùôÊÄÅÂèòÈáèÂéª‰øùÂ≠òÁ±ªÁöÑÂÆû‰æãÔºåÁ°Æ‰øùÂÆÉÂú®Á±ª‰∏≠ÁöÑÂÖ®Â±ÄÂèØÁî® static LibraryAPI *_sharedInstance = nil; // dispatch_once_tÁ°Æ‰øùÂàùÂßãÂåñÂô®Âè™ÊâßË°å‰∏ÄÊ¨° static dispatch_once_t oncePredicate; // Âçï‰æãÁöÑÂÖ≥ÈîÆÔºå‰∏ÄÊó¶Á±ªË¢´ÂàùÂßãÂåñÔºåÂàùÂßãÂåñÂô®‰∏ç‰ºöÂÜçË¢´Ë∞ÉÁî® dispatch_once(&amp;oncePredicate, ^{ _sharedInstance = [[LibraryAPI alloc] init]; }); return _sharedInstance; } 12345678910111213141516171819202122232425262728293031323334353637@implementation XNShareTool /** Ê≠•È™§: 1.‰∏Ä‰∏™ÈùôÊÄÅÂèòÈáè_inastance 2.ÈáçÂÜôallocWithZone, Âú®ÈáåÈù¢Áî®dispatch_once, Âπ∂Ë∞ÉÁî®super allocWithZone 3.Ëá™ÂÆö‰πâ‰∏Ä‰∏™sharedXX, Áî®Êù•Ëé∑ÂèñÂçï‰æã. Âú®ÈáåÈù¢‰πüË∞ÉÁî®dispatch_once, ÂÆû‰æãÂåñ_instance -----------ÂèØÈÄâ------------ 4.Â¶ÇÊûúË¶ÅÊîØÊåÅcopy. Âàô(ÂÖàÈÅµÂÆàNSCopyingÂçèËÆÆ)ÈáçÂÜôcopyWithZone, Áõ¥Êé•ËøîÂõû_instanceÂç≥ÂèØ. */ /**Á¨¨1Ê≠•: Â≠òÂÇ®ÂîØ‰∏ÄÂÆû‰æã*/ static XNShareTool *_instance; /**Á¨¨2Ê≠•: ÂàÜÈÖçÂÜÖÂ≠òÂ≠îÂÆ∂Êó∂ÈÉΩ‰ºöË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï. ‰øùËØÅÂàÜÈÖçÂÜÖÂ≠òallocÊó∂ÈÉΩÁõ∏Âêå*/ +(id)allocWithZone:(struct _NSZone *)zone{ //Ë∞ÉÁî®dispatch_once‰øùËØÅÂú®Â§öÁ∫øÁ®ã‰∏≠‰πüÂè™Ë¢´ÂÆû‰æãÂåñ‰∏ÄÊ¨° static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _instance = [super allocWithZone:zone]; }); return _instance; } /**Á¨¨3Ê≠•: ‰øùËØÅinitÂàùÂßãÂåñÊó∂ÈÉΩÁõ∏Âêå*/ +(instancetype)sharedTool{ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _instance = [[XNShareTool alloc] init]; }); return _instance; } /**Á¨¨4Ê≠•: ‰øùËØÅcopyÊó∂ÈÉΩÁõ∏Âêå*/ -(id)copyWithZone:(NSZone *)zone{ return _instance; } @end Èó®Èù¢Ê®°ÂºèFacadeÊö¥Èú≤Êé•Âè£ Ë£ÖÈ•∞Âô®Ê®°ÂºèDecoratorÂ∏∏ËßÅÁöÑÂÆûÁé∞ÊòØCategoryÂíåDelegationÔºå ÈÄÇÈÖçÂô®Ê®°ÂºèAdapterÂåÖË£Ö‰∏Ä‰∏™ÂØπË±°Êö¥Èú≤‰∏Ä‰∏™Ê†áÂáÜÁöÑÊé•Âè£„ÄÇÂèØ‰ª•‰ΩøÁî®ÂçèËÆÆÁöÑÊñπÂºèÂÆûÁé∞ÔºåÊØîÂ¶ÇUITableViewDelegateÔºåUIScrollViewDelegateÔºåNSCodingÂíåNSCopyingÂçèËÆÆ„ÄÇ ËßÇÂØüËÄÖÊ®°ÂºèObserverNotificationsÂíåKey-Value Observing(KVO)ÈÉΩÊòØËøô‰∏™ËÆæËÆ°Ê®°Âºè Â§áÂøòÂΩïÊ®°ÂºèMementoÊØîÂ¶ÇNSUserDefaultsÔºåÊàñËÄÖÁî®Á±ª‰ººÁöÑÊñπÂºèËøõË°åÁä∂ÊÄÅ‰øùÂ≠ò‰ΩøÂæóÂÜçÊ¨°ËøõÂÖ•Êó∂ËÉΩÂ§üÂíåÁ¶ªÂºÄÊó∂‰∏ÄÊ†∑„ÄÇÂèØ‰ª•‰ΩøÁî®UIApplicationDidEnterBackgroundNotification Ëøô‰∏™ÈÄöÁü•Âéª‰øùÂ≠òÁä∂ÊÄÅ„ÄÇ ÂëΩ‰ª§Ê®°ÂºèÈÄöËøáTarget-ActionÊú∫Âà∂ÂíåInvocationÂÆûÁé∞ÂëΩ‰ª§Ê®°Âºè ming1016","link":"/ÁºñÁ®ã/Ô£ø/ios-design-pattern/"},{"title":"HTTPÁä∂ÊÄÅÁ†ÅÊ±áÊÄª","text":"HTTPÁä∂ÊÄÅÁ†Å HTTPÁä∂ÊÄÅÁ†ÅÔºàËã±ËØ≠ÔºöHTTP Status CodeÔºâÊòØÁî®‰ª•Ë°®Á§∫ÁΩëÈ°µÊúçÂä°Âô®Ë∂ÖÊñáÊú¨‰º†ËæìÂçèËÆÆÂìçÂ∫îÁä∂ÊÄÅÁöÑ3‰ΩçÊï∞Â≠ó‰ª£Á†Å„ÄÇÂÆÉÁî± RFC 2616 ËßÑËåÉÂÆö‰πâÁöÑÔºåÂπ∂ÂæóÂà∞ RFC 2518„ÄÅRFC 2817„ÄÅRFC 2295„ÄÅRFC 2774 ‰∏é RFC 4918 Á≠âËßÑËåÉÊâ©Â±ï„ÄÇÊâÄÊúâÁä∂ÊÄÅÁ†ÅÁöÑÁ¨¨‰∏Ä‰∏™Êï∞Â≠ó‰ª£Ë°®‰∫ÜÂìçÂ∫îÁöÑ‰∫îÁßçÁä∂ÊÄÅ‰πã‰∏Ä„ÄÇÊâÄÁ§∫ÁöÑÊ∂àÊÅØÁü≠ËØ≠ÊòØÂÖ∏ÂûãÁöÑÔºå‰ΩÜÊòØÂèØ‰ª•Êèê‰æõ‰ªª‰ΩïÂèØËØªÂèñÁöÑÊõø‰ª£ÊñπÊ°à„ÄÇ Èô§ÈùûÂè¶ÊúâËØ¥ÊòéÔºåÁä∂ÊÄÅÁ†ÅÊòØHTTP / 1.1Ê†áÂáÜÔºàRFC 7231ÔºâÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ HTTPÁä∂ÊÄÅÁ†ÅÁöÑÂÆòÊñπÊ≥®ÂÜåË°®Áî±‰∫íËÅîÁΩëÂè∑Á†ÅÂàÜÈÖçÂ±ÄÔºàInternet Assigned Numbers AuthorityÔºâÁª¥Êä§„ÄÇ ÂæÆËΩØ‰∫íËÅîÁΩë‰ø°ÊÅØÊúçÂä° ÔºàMicrosoft Internet Information ServicesÔºâÊúâÊó∂‰ºö‰ΩøÁî®È¢ùÂ§ñÁöÑÂçÅËøõÂà∂Â≠ê‰ª£Á†ÅÊù•Ëé∑ÂèñÊõ¥Â§öÂÖ∑‰Ωì‰ø°ÊÅØÔºå‰ΩÜÊòØËøô‰∫õÂ≠ê‰ª£Á†Å‰ªÖÂá∫Áé∞Âú®ÂìçÂ∫îÊúâÊïàÂÜÖÂÆπÂíåÊñáÊ°£‰∏≠ÔºåËÄå‰∏çÊòØ‰ª£ÊõøÂÆûÈôÖÁöÑHTTPÁä∂ÊÄÅ‰ª£Á†Å„ÄÇ ÁºñÂè∑ ÂêçÁß∞ Ëß£Èáä 1Ô∏è‚É£‚ùå‚ùå üî¥üî¥üî¥ 1xxÊ∂àÊÅØ Ëøô‰∏ÄÁ±ªÂûãÁöÑÁä∂ÊÄÅÁ†ÅÔºå‰ª£Ë°®ËØ∑Ê±ÇÂ∑≤Ë¢´Êé•ÂèóÔºåÈúÄË¶ÅÁªßÁª≠Â§ÑÁêÜ„ÄÇËøôÁ±ªÂìçÂ∫îÊòØ‰∏¥Êó∂ÂìçÂ∫îÔºåÂè™ÂåÖÂê´Áä∂ÊÄÅË°åÂíåÊüê‰∫õÂèØÈÄâÁöÑÂìçÂ∫îÂ§¥‰ø°ÊÅØÔºåÂπ∂‰ª•Á©∫Ë°åÁªìÊùü„ÄÇÁî±‰∫éHTTP/1.0ÂçèËÆÆ‰∏≠Ê≤°ÊúâÂÆö‰πâ‰ªª‰Ωï1xxÁä∂ÊÄÅÁ†ÅÔºåÊâÄ‰ª•Èô§ÈùûÂú®Êüê‰∫õËØïÈ™åÊù°‰ª∂‰∏ãÔºåÊúçÂä°Âô®Á¶ÅÊ≠¢ÂêëÊ≠§Á±ªÂÆ¢Êà∑Á´ØÂèëÈÄÅ1xxÂìçÂ∫î„ÄÇ Ëøô‰∫õÁä∂ÊÄÅÁ†Å‰ª£Ë°®ÁöÑÂìçÂ∫îÈÉΩÊòØ‰ø°ÊÅØÊÄßÁöÑÔºåÊ†áÁ§∫ÂÆ¢Êà∑Â∫îËØ•ÈááÂèñÁöÑÂÖ∂‰ªñË°åÂä®„ÄÇ 100 Continue ÂÆ¢Êà∑Á´ØÂ∫îÂΩìÁªßÁª≠ÂèëÈÄÅËØ∑Ê±Ç„ÄÇËøô‰∏™‰∏¥Êó∂ÂìçÂ∫îÊòØÁî®Êù•ÈÄöÁü•ÂÆ¢Êà∑Á´ØÂÆÉÁöÑÈÉ®ÂàÜËØ∑Ê±ÇÂ∑≤ÁªèË¢´ÊúçÂä°Âô®Êé•Êî∂Ôºå‰∏î‰ªçÊú™Ë¢´ÊãíÁªù„ÄÇÂÆ¢Êà∑Á´ØÂ∫îÂΩìÁªßÁª≠ÂèëÈÄÅËØ∑Ê±ÇÁöÑÂâ©‰ΩôÈÉ®ÂàÜÔºåÊàñËÄÖÂ¶ÇÊûúËØ∑Ê±ÇÂ∑≤ÁªèÂÆåÊàêÔºåÂøΩÁï•Ëøô‰∏™ÂìçÂ∫î„ÄÇÊúçÂä°Âô®ÂøÖÈ°ªÂú®ËØ∑Ê±ÇÂÆåÊàêÂêéÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∏Ä‰∏™ÊúÄÁªàÂìçÂ∫î„ÄÇ 101 Switching Protocols ÊúçÂä°Âô®Â∑≤ÁªèÁêÜËß£‰∫ÜÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåÂπ∂Â∞ÜÈÄöËøáUpgradeÊ∂àÊÅØÂ§¥ÈÄöÁü•ÂÆ¢Êà∑Á´ØÈááÁî®‰∏çÂêåÁöÑÂçèËÆÆÊù•ÂÆåÊàêËøô‰∏™ËØ∑Ê±Ç„ÄÇÂú®ÂèëÈÄÅÂÆåËøô‰∏™ÂìçÂ∫îÊúÄÂêéÁöÑÁ©∫Ë°åÂêéÔºåÊúçÂä°Âô®Â∞Ü‰ºöÂàáÊç¢Âà∞Âú®UpgradeÊ∂àÊÅØÂ§¥‰∏≠ÂÆö‰πâÁöÑÈÇ£‰∫õÂçèËÆÆ„ÄÇ: Âè™ÊúâÂú®ÂàáÊç¢Êñ∞ÁöÑÂçèËÆÆÊõ¥ÊúâÂ•ΩÂ§ÑÁöÑÊó∂ÂÄôÊâçÂ∫îËØ•ÈááÂèñÁ±ª‰ººÊé™ÊñΩ„ÄÇ‰æãÂ¶ÇÔºåÂàáÊç¢Âà∞Êñ∞ÁöÑHTTPÁâàÊú¨ÊØîÊóßÁâàÊú¨Êõ¥Êúâ‰ºòÂäøÔºåÊàñËÄÖÂàáÊç¢Âà∞‰∏Ä‰∏™ÂÆûÊó∂‰∏îÂêåÊ≠•ÁöÑÂçèËÆÆ‰ª•‰º†ÈÄÅÂà©Áî®Ê≠§Á±ªÁâπÊÄßÁöÑËµÑÊ∫ê„ÄÇ 102 Processing Áî±WebDAVÔºàRFC 2518ÔºâÊâ©Â±ïÁöÑÁä∂ÊÄÅÁ†ÅÔºå‰ª£Ë°®Â§ÑÁêÜÂ∞ÜË¢´ÁªßÁª≠ÊâßË°å„ÄÇ 2Ô∏è‚É£‚ùå‚ùå üî¥üî¥üî¥ 2xxÊàêÂäü Ëøô‰∏ÄÁ±ªÂûãÁöÑÁä∂ÊÄÅÁ†ÅÔºå‰ª£Ë°®ËØ∑Ê±ÇÂ∑≤ÊàêÂäüË¢´ÊúçÂä°Âô®Êé•Êî∂„ÄÅÁêÜËß£„ÄÅÂπ∂Êé•Âèó„ÄÇ 200 OK ËØ∑Ê±ÇÂ∑≤ÊàêÂäüÔºåËØ∑Ê±ÇÊâÄÂ∏åÊúõÁöÑÂìçÂ∫îÂ§¥ÊàñÊï∞ÊçÆ‰ΩìÂ∞ÜÈöèÊ≠§ÂìçÂ∫îËøîÂõû„ÄÇ 201 Created ËØ∑Ê±ÇÂ∑≤ÁªèË¢´ÂÆûÁé∞ÔºåËÄå‰∏îÊúâ‰∏Ä‰∏™Êñ∞ÁöÑËµÑÊ∫êÂ∑≤Áªè‰æùÊçÆËØ∑Ê±ÇÁöÑÈúÄË¶ÅËÄåÂàõÂª∫Ôºå‰∏îÂÖ∂URIÂ∑≤ÁªèÈöèLocationÂ§¥‰ø°ÊÅØËøîÂõû„ÄÇÂÅáÂ¶ÇÈúÄË¶ÅÁöÑËµÑÊ∫êÊó†Ê≥ïÂèäÊó∂ÂàõÂª∫ÁöÑËØùÔºåÂ∫îÂΩìËøîÂõû‚Äô202 Accepted‚Äô„ÄÇ 202 Accepted ÊúçÂä°Âô®Â∑≤Êé•ÂèóËØ∑Ê±ÇÔºå‰ΩÜÂ∞öÊú™Â§ÑÁêÜ„ÄÇÊ≠£Â¶ÇÂÆÉÂèØËÉΩË¢´ÊãíÁªù‰∏ÄÊ†∑ÔºåÊúÄÁªàËØ•ËØ∑Ê±ÇÂèØËÉΩ‰ºö‰πüÂèØËÉΩ‰∏ç‰ºöË¢´ÊâßË°å„ÄÇÂú®ÂºÇÊ≠•Êìç‰ΩúÁöÑÂú∫Âêà‰∏ãÔºåÊ≤°ÊúâÊØîÂèëÈÄÅËøô‰∏™Áä∂ÊÄÅÁ†ÅÊõ¥Êñπ‰æøÁöÑÂÅöÊ≥ï‰∫Ü„ÄÇ:ËøîÂõû202Áä∂ÊÄÅÁ†ÅÁöÑÂìçÂ∫îÁöÑÁõÆÁöÑÊòØÂÖÅËÆ∏ÊúçÂä°Âô®Êé•ÂèóÂÖ∂‰ªñËøáÁ®ãÁöÑËØ∑Ê±ÇÔºà‰æãÂ¶ÇÊüê‰∏™ÊØèÂ§©Âè™ÊâßË°å‰∏ÄÊ¨°ÁöÑÂü∫‰∫éÊâπÂ§ÑÁêÜÁöÑÊìç‰ΩúÔºâÔºåËÄå‰∏çÂøÖËÆ©ÂÆ¢Êà∑Á´Ø‰∏ÄÁõ¥‰øùÊåÅ‰∏éÊúçÂä°Âô®ÁöÑËøûÊé•Áõ¥Âà∞ÊâπÂ§ÑÁêÜÊìç‰ΩúÂÖ®ÈÉ®ÂÆåÊàê„ÄÇÂú®Êé•ÂèóËØ∑Ê±ÇÂ§ÑÁêÜÂπ∂ËøîÂõû202Áä∂ÊÄÅÁ†ÅÁöÑÂìçÂ∫îÂ∫îÂΩìÂú®ËøîÂõûÁöÑÂÆû‰Ωì‰∏≠ÂåÖÂê´‰∏Ä‰∫õÊåáÁ§∫Â§ÑÁêÜÂΩìÂâçÁä∂ÊÄÅÁöÑ‰ø°ÊÅØÔºå‰ª•ÂèäÊåáÂêëÂ§ÑÁêÜÁä∂ÊÄÅÁõëËßÜÂô®ÊàñÁä∂ÊÄÅÈ¢ÑÊµãÁöÑÊåáÈíàÔºå‰ª•‰æøÁî®Êà∑ËÉΩÂ§ü‰º∞ËÆ°Êìç‰ΩúÊòØÂê¶Â∑≤ÁªèÂÆåÊàê„ÄÇ 203 Non-Authoritative Information ÊúçÂä°Âô®Â∑≤ÊàêÂäüÂ§ÑÁêÜ‰∫ÜËØ∑Ê±ÇÔºå‰ΩÜËøîÂõûÁöÑÂÆû‰ΩìÂ§¥ÈÉ®ÂÖÉ‰ø°ÊÅØ‰∏çÊòØÂú®ÂéüÂßãÊúçÂä°Âô®‰∏äÊúâÊïàÁöÑÁ°ÆÂÆöÈõÜÂêàÔºåËÄåÊòØÊù•Ëá™Êú¨Âú∞ÊàñËÄÖÁ¨¨‰∏âÊñπÁöÑÊã∑Ë¥ù„ÄÇÂΩìÂâçÁöÑ‰ø°ÊÅØÂèØËÉΩÊòØÂéüÂßãÁâàÊú¨ÁöÑÂ≠êÈõÜÊàñËÄÖË∂ÖÈõÜ„ÄÇ‰æãÂ¶ÇÔºåÂåÖÂê´ËµÑÊ∫êÁöÑÂÖÉÊï∞ÊçÆÂèØËÉΩÂØºËá¥ÂéüÂßãÊúçÂä°Âô®Áü•ÈÅìÂÖÉ‰ø°ÊÅØÁöÑË∂ÖÈõÜ„ÄÇ‰ΩøÁî®Ê≠§Áä∂ÊÄÅÁ†Å‰∏çÊòØÂøÖÈ°ªÁöÑÔºåËÄå‰∏îÂè™ÊúâÂú®ÂìçÂ∫î‰∏ç‰ΩøÁî®Ê≠§Áä∂ÊÄÅÁ†Å‰æø‰ºöËøîÂõû200 OKÁöÑÊÉÖÂÜµ‰∏ãÊâçÊòØÂêàÈÄÇÁöÑ„ÄÇ 204 No Content ÊúçÂä°Âô®ÊàêÂäüÂ§ÑÁêÜ‰∫ÜËØ∑Ê±ÇÔºå‰ΩÜ‰∏çÈúÄË¶ÅËøîÂõû‰ªª‰ΩïÂÆû‰ΩìÂÜÖÂÆπÔºåÂπ∂‰∏îÂ∏åÊúõËøîÂõûÊõ¥Êñ∞‰∫ÜÁöÑÂÖÉ‰ø°ÊÅØ„ÄÇÂìçÂ∫îÂèØËÉΩÈÄöËøáÂÆû‰ΩìÂ§¥ÈÉ®ÁöÑÂΩ¢ÂºèÔºåËøîÂõûÊñ∞ÁöÑÊàñÊõ¥Êñ∞ÂêéÁöÑÂÖÉ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúÂ≠òÂú®Ëøô‰∫õÂ§¥ÈÉ®‰ø°ÊÅØÔºåÂàôÂ∫îÂΩì‰∏éÊâÄËØ∑Ê±ÇÁöÑÂèòÈáèÁõ∏ÂëºÂ∫î„ÄÇ Â¶ÇÊûúÂÆ¢Êà∑Á´ØÊòØÊµèËßàÂô®ÁöÑËØùÔºåÈÇ£‰πàÁî®Êà∑ÊµèËßàÂô®Â∫î‰øùÁïôÂèëÈÄÅ‰∫ÜËØ•ËØ∑Ê±ÇÁöÑÈ°µÈù¢ÔºåËÄå‰∏ç‰∫ßÁîü‰ªª‰ΩïÊñáÊ°£ËßÜÂõæ‰∏äÁöÑÂèòÂåñÔºåÂç≥‰ΩøÊåâÁÖßËßÑËåÉÊñ∞ÁöÑÊàñÊõ¥Êñ∞ÂêéÁöÑÂÖÉ‰ø°ÊÅØÂ∫îÂΩìË¢´Â∫îÁî®Âà∞Áî®Êà∑ÊµèËßàÂô®Ê¥ªÂä®ËßÜÂõæ‰∏≠ÁöÑÊñáÊ°£„ÄÇ Áî±‰∫é204ÂìçÂ∫îË¢´Á¶ÅÊ≠¢ÂåÖÂê´‰ªª‰ΩïÊ∂àÊÅØ‰ΩìÔºåÂõ†Ê≠§ÂÆÉÂßãÁªà‰ª•Ê∂àÊÅØÂ§¥ÂêéÁöÑÁ¨¨‰∏Ä‰∏™Á©∫Ë°åÁªìÂ∞æ„ÄÇ 205 Reset Content ÊúçÂä°Âô®ÊàêÂäüÂ§ÑÁêÜ‰∫ÜËØ∑Ê±ÇÔºå‰∏îÊ≤°ÊúâËøîÂõû‰ªª‰ΩïÂÜÖÂÆπ„ÄÇ‰ΩÜÊòØ‰∏é204ÂìçÂ∫î‰∏çÂêåÔºåËøîÂõûÊ≠§Áä∂ÊÄÅÁ†ÅÁöÑÂìçÂ∫îË¶ÅÊ±ÇËØ∑Ê±ÇËÄÖÈáçÁΩÆÊñáÊ°£ËßÜÂõæ„ÄÇËØ•ÂìçÂ∫î‰∏ªË¶ÅÊòØË¢´Áî®‰∫éÊé•ÂèóÁî®Êà∑ËæìÂÖ•ÂêéÔºåÁ´ãÂç≥ÈáçÁΩÆË°®ÂçïÔºå‰ª•‰æøÁî®Êà∑ËÉΩÂ§üËΩªÊùæÂú∞ÂºÄÂßãÂè¶‰∏ÄÊ¨°ËæìÂÖ•„ÄÇ ‰∏é204ÂìçÂ∫î‰∏ÄÊ†∑ÔºåËØ•ÂìçÂ∫î‰πüË¢´Á¶ÅÊ≠¢ÂåÖÂê´‰ªª‰ΩïÊ∂àÊÅØ‰ΩìÔºå‰∏î‰ª•Ê∂àÊÅØÂ§¥ÂêéÁöÑÁ¨¨‰∏Ä‰∏™Á©∫Ë°åÁªìÊùü„ÄÇ 206 Partial Content ÊúçÂä°Âô®Â∑≤ÁªèÊàêÂäüÂ§ÑÁêÜ‰∫ÜÈÉ®ÂàÜGETËØ∑Ê±Ç„ÄÇÁ±ª‰ºº‰∫éFlashGetÊàñËÄÖËøÖÈõ∑ËøôÁ±ªÁöÑHTTP ‰∏ãËΩΩÂ∑•ÂÖ∑ÈÉΩÊòØ‰ΩøÁî®Ê≠§Á±ªÂìçÂ∫îÂÆûÁé∞Êñ≠ÁÇπÁª≠‰º†ÊàñËÄÖÂ∞Ü‰∏Ä‰∏™Â§ßÊñáÊ°£ÂàÜËß£‰∏∫Â§ö‰∏™‰∏ãËΩΩÊÆµÂêåÊó∂‰∏ãËΩΩ„ÄÇ ËØ•ËØ∑Ê±ÇÂøÖÈ°ªÂåÖÂê´RangeÂ§¥‰ø°ÊÅØÊù•ÊåáÁ§∫ÂÆ¢Êà∑Á´ØÂ∏åÊúõÂæóÂà∞ÁöÑÂÜÖÂÆπËåÉÂõ¥ÔºåÂπ∂‰∏îÂèØËÉΩÂåÖÂê´If-RangeÊù•‰Ωú‰∏∫ËØ∑Ê±ÇÊù°‰ª∂„ÄÇ ÂìçÂ∫îÂøÖÈ°ªÂåÖÂê´Â¶Ç‰∏ãÁöÑÂ§¥ÈÉ®ÂüüÔºö Content-RangeÁî®‰ª•ÊåáÁ§∫Êú¨Ê¨°ÂìçÂ∫î‰∏≠ËøîÂõûÁöÑÂÜÖÂÆπÁöÑËåÉÂõ¥ÔºõÂ¶ÇÊûúÊòØContent-Type‰∏∫multipart/byterangesÁöÑÂ§öÊÆµ‰∏ãËΩΩÔºåÂàôÊØè‰∏ÄmultipartÊÆµ‰∏≠ÈÉΩÂ∫îÂåÖÂê´Content-RangeÂüüÁî®‰ª•ÊåáÁ§∫Êú¨ÊÆµÁöÑÂÜÖÂÆπËåÉÂõ¥„ÄÇÂÅáÂ¶ÇÂìçÂ∫î‰∏≠ÂåÖÂê´Content-LengthÔºåÈÇ£‰πàÂÆÉÁöÑÊï∞ÂÄºÂøÖÈ°ªÂåπÈÖçÂÆÉËøîÂõûÁöÑÂÜÖÂÆπËåÉÂõ¥ÁöÑÁúüÂÆûÂ≠óËäÇÊï∞„ÄÇ Date ETagÂíåÔºèÊàñContent-LocationÔºåÂÅáÂ¶ÇÂêåÊ†∑ÁöÑËØ∑Ê±ÇÊú¨Â∫îËØ•ËøîÂõû200ÂìçÂ∫î„ÄÇ Expires, Cache-ControlÔºåÂíåÔºèÊàñVaryÔºåÂÅáÂ¶ÇÂÖ∂ÂÄºÂèØËÉΩ‰∏é‰πãÂâçÁõ∏ÂêåÂèòÈáèÁöÑÂÖ∂‰ªñÂìçÂ∫îÂØπÂ∫îÁöÑÂÄº‰∏çÂêåÁöÑËØù„ÄÇ ÂÅáÂ¶ÇÊú¨ÂìçÂ∫îËØ∑Ê±Ç‰ΩøÁî®‰∫ÜIf-RangeÂº∫ÁºìÂ≠òÈ™åËØÅÔºåÈÇ£‰πàÊú¨Ê¨°ÂìçÂ∫î‰∏çÂ∫îËØ•ÂåÖÂê´ÂÖ∂‰ªñÂÆû‰ΩìÂ§¥ÔºõÂÅáÂ¶ÇÊú¨ÂìçÂ∫îÁöÑËØ∑Ê±Ç‰ΩøÁî®‰∫ÜIf-RangeÂº±ÁºìÂ≠òÈ™åËØÅÔºåÈÇ£‰πàÊú¨Ê¨°ÂìçÂ∫îÁ¶ÅÊ≠¢ÂåÖÂê´ÂÖ∂‰ªñÂÆû‰ΩìÂ§¥ÔºõËøôÈÅøÂÖç‰∫ÜÁºìÂ≠òÁöÑÂÆû‰ΩìÂÜÖÂÆπÂíåÊõ¥Êñ∞‰∫ÜÁöÑÂÆû‰ΩìÂ§¥‰ø°ÊÅØ‰πãÈó¥ÁöÑ‰∏ç‰∏ÄËá¥„ÄÇÂê¶ÂàôÔºåÊú¨ÂìçÂ∫îÂ∞±Â∫îÂΩìÂåÖÂê´ÊâÄÊúâÊú¨Â∫îËØ•ËøîÂõû200ÂìçÂ∫î‰∏≠Â∫îÂΩìËøîÂõûÁöÑÊâÄÊúâÂÆû‰ΩìÂ§¥ÈÉ®Âüü„ÄÇ ÂÅáÂ¶ÇETagÊàñLast-ModifiedÂ§¥ÈÉ®‰∏çËÉΩÁ≤æÁ°ÆÂåπÈÖçÁöÑËØùÔºåÂàôÂÆ¢Êà∑Á´ØÁºìÂ≠òÂ∫îÁ¶ÅÊ≠¢Â∞Ü206ÂìçÂ∫îËøîÂõûÁöÑÂÜÖÂÆπ‰∏é‰πãÂâç‰ªª‰ΩïÁºìÂ≠òËøáÁöÑÂÜÖÂÆπÁªÑÂêàÂú®‰∏ÄËµ∑„ÄÇ ‰ªª‰Ωï‰∏çÊîØÊåÅRange‰ª•ÂèäContent-RangeÂ§¥ÁöÑÁºìÂ≠òÈÉΩÁ¶ÅÊ≠¢ÁºìÂ≠ò206ÂìçÂ∫îËøîÂõûÁöÑÂÜÖÂÆπ„ÄÇ 207 Multi-Status Áî±WebDAV(RFC 2518)Êâ©Â±ïÁöÑÁä∂ÊÄÅÁ†ÅÔºå‰ª£Ë°®‰πãÂêéÁöÑÊ∂àÊÅØ‰ΩìÂ∞ÜÊòØ‰∏Ä‰∏™XMLÊ∂àÊÅØÔºåÂπ∂‰∏îÂèØËÉΩ‰æùÁÖß‰πãÂâçÂ≠êËØ∑Ê±ÇÊï∞ÈáèÁöÑ‰∏çÂêåÔºåÂåÖÂê´‰∏ÄÁ≥ªÂàóÁã¨Á´ãÁöÑÂìçÂ∫î‰ª£Á†Å„ÄÇ 3Ô∏è‚É£‚ùå‚ùå üî¥üî¥üî¥ 3xxÈáçÂÆöÂêë ËøôÁ±ªÁä∂ÊÄÅÁ†Å‰ª£Ë°®ÈúÄË¶ÅÂÆ¢Êà∑Á´ØÈááÂèñËøõ‰∏ÄÊ≠•ÁöÑÊìç‰ΩúÊâçËÉΩÂÆåÊàêËØ∑Ê±Ç„ÄÇÈÄöÂ∏∏ÔºåËøô‰∫õÁä∂ÊÄÅÁ†ÅÁî®Êù•ÈáçÂÆöÂêëÔºåÂêéÁª≠ÁöÑËØ∑Ê±ÇÂú∞ÂùÄÔºàÈáçÂÆöÂêëÁõÆÊ†áÔºâÂú®Êú¨Ê¨°ÂìçÂ∫îÁöÑLocationÂüü‰∏≠ÊåáÊòé„ÄÇÂΩì‰∏î‰ªÖÂΩìÂêéÁª≠ÁöÑËØ∑Ê±ÇÊâÄ‰ΩøÁî®ÁöÑÊñπÊ≥ïÊòØGETÊàñËÄÖHEADÊó∂ÔºåÁî®Êà∑ÊµèËßàÂô®ÊâçÂèØ‰ª•Âú®Ê≤°ÊúâÁî®Êà∑‰ªãÂÖ•ÁöÑÊÉÖÂÜµ‰∏ãËá™Âä®Êèê‰∫§ÊâÄÈúÄË¶ÅÁöÑÂêéÁª≠ËØ∑Ê±Ç„ÄÇÂÆ¢Êà∑Á´ØÂ∫îÂΩìËá™Âä®ÁõëÊµãÊó†ÈôêÂæ™ÁéØÈáçÂÆöÂêëÔºà‰æãÂ¶ÇÔºöA‚ÜíB‚ÜíC‚Üí‚Ä¶‚Ä¶‚ÜíAÊàñA‚ÜíAÔºâÔºåÂõ†‰∏∫Ëøô‰ºöÂØºËá¥ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÂ§ßÈáè‰∏çÂøÖË¶ÅÁöÑËµÑÊ∫êÊ∂àËÄó„ÄÇÊåâÁÖßHTTP/1.0ÁâàËßÑËåÉÁöÑÂª∫ËÆÆÔºåÊµèËßàÂô®‰∏çÂ∫îËá™Âä®ËÆøÈóÆË∂ÖËøá5Ê¨°ÁöÑÈáçÂÆöÂêë„ÄÇ 300 Multiple Choices Ë¢´ËØ∑Ê±ÇÁöÑËµÑÊ∫êÊúâ‰∏ÄÁ≥ªÂàóÂèØ‰æõÈÄâÊã©ÁöÑÂõûÈ¶à‰ø°ÊÅØÔºåÊØè‰∏™ÈÉΩÊúâËá™Â∑±ÁâπÂÆöÁöÑÂú∞ÂùÄÂíåÊµèËßàÂô®È©±Âä®ÁöÑÂïÜËÆÆ‰ø°ÊÅØ„ÄÇÁî®Êà∑ÊàñÊµèËßàÂô®ËÉΩÂ§üËá™Ë°åÈÄâÊã©‰∏Ä‰∏™È¶ñÈÄâÁöÑÂú∞ÂùÄËøõË°åÈáçÂÆöÂêë„ÄÇ Èô§ÈùûËøôÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåÂê¶ÂàôËØ•ÂìçÂ∫îÂ∫îÂΩìÂåÖÊã¨‰∏Ä‰∏™ËµÑÊ∫êÁâπÊÄßÂèäÂú∞ÂùÄÁöÑÂàóË°®ÁöÑÂÆû‰ΩìÔºå‰ª•‰æøÁî®Êà∑ÊàñÊµèËßàÂô®‰ªé‰∏≠ÈÄâÊã©ÊúÄÂêàÈÄÇÁöÑÈáçÂÆöÂêëÂú∞ÂùÄ„ÄÇËøô‰∏™ÂÆû‰ΩìÁöÑÊ†ºÂºèÁî±Content-TypeÂÆö‰πâÁöÑÊ†ºÂºèÊâÄÂÜ≥ÂÆö„ÄÇÊµèËßàÂô®ÂèØËÉΩÊ†πÊçÆÂìçÂ∫îÁöÑÊ†ºÂºè‰ª•ÂèäÊµèËßàÂô®Ëá™Ë∫´ËÉΩÂäõÔºåËá™Âä®‰ΩúÂá∫ÊúÄÂêàÈÄÇÁöÑÈÄâÊã©„ÄÇÂΩìÁÑ∂ÔºåRFC 2616ËßÑËåÉÂπ∂Ê≤°ÊúâËßÑÂÆöËøôÊ†∑ÁöÑËá™Âä®ÈÄâÊã©ËØ•Â¶Ç‰ΩïËøõË°å„ÄÇ Â¶ÇÊûúÊúçÂä°Âô®Êú¨Ë∫´Â∑≤ÁªèÊúâ‰∫ÜÈ¶ñÈÄâÁöÑÂõûÈ¶àÈÄâÊã©ÔºåÈÇ£‰πàÂú®Location‰∏≠Â∫îÂΩìÊåáÊòéËøô‰∏™ÂõûÈ¶àÁöÑURIÔºõÊµèËßàÂô®ÂèØËÉΩ‰ºöÂ∞ÜËøô‰∏™LocationÂÄº‰Ωú‰∏∫Ëá™Âä®ÈáçÂÆöÂêëÁöÑÂú∞ÂùÄ„ÄÇÊ≠§Â§ñÔºåÈô§ÈùûÈ¢ùÂ§ñÊåáÂÆöÔºåÂê¶ÂàôËøô‰∏™ÂìçÂ∫î‰πüÊòØÂèØÁºìÂ≠òÁöÑ„ÄÇ 301 Moved Permanently Ë¢´ËØ∑Ê±ÇÁöÑËµÑÊ∫êÂ∑≤Ê∞∏‰πÖÁßªÂä®Âà∞Êñ∞‰ΩçÁΩÆÔºåÂπ∂‰∏îÂ∞ÜÊù•‰ªª‰ΩïÂØπÊ≠§ËµÑÊ∫êÁöÑÂºïÁî®ÈÉΩÂ∫îËØ•‰ΩøÁî®Êú¨ÂìçÂ∫îËøîÂõûÁöÑËã•Âπ≤‰∏™URI‰πã‰∏Ä„ÄÇÂ¶ÇÊûúÂèØËÉΩÔºåÊã•ÊúâÈìæÊé•ÁºñËæëÂäüËÉΩÁöÑÂÆ¢Êà∑Á´ØÂ∫îÂΩìËá™Âä®ÊääËØ∑Ê±ÇÁöÑÂú∞ÂùÄ‰øÆÊîπ‰∏∫‰ªéÊúçÂä°Âô®ÂèçÈ¶àÂõûÊù•ÁöÑÂú∞ÂùÄ„ÄÇÈô§ÈùûÈ¢ùÂ§ñÊåáÂÆöÔºåÂê¶ÂàôËøô‰∏™ÂìçÂ∫î‰πüÊòØÂèØÁºìÂ≠òÁöÑ„ÄÇ Êñ∞ÁöÑÊ∞∏‰πÖÊÄßÁöÑURIÂ∫îÂΩìÂú®ÂìçÂ∫îÁöÑLocationÂüü‰∏≠ËøîÂõû„ÄÇÈô§ÈùûËøôÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåÂê¶ÂàôÂìçÂ∫îÁöÑÂÆû‰Ωì‰∏≠Â∫îÂΩìÂåÖÂê´ÊåáÂêëÊñ∞ÁöÑURIÁöÑË∂ÖÈìæÊé•ÂèäÁÆÄÁü≠ËØ¥Êòé„ÄÇ Â¶ÇÊûúËøô‰∏çÊòØ‰∏Ä‰∏™GETÊàñËÄÖHEADËØ∑Ê±ÇÔºåÂõ†Ê≠§ÊµèËßàÂô®Á¶ÅÊ≠¢Ëá™Âä®ËøõË°åÈáçÂÆöÂêëÔºåÈô§ÈùûÂæóÂà∞Áî®Êà∑ÁöÑÁ°ÆËÆ§ÔºåÂõ†‰∏∫ËØ∑Ê±ÇÁöÑÊù°‰ª∂ÂèØËÉΩÂõ†Ê≠§ÂèëÁîüÂèòÂåñ„ÄÇ Ê≥®ÊÑèÔºöÂØπ‰∫éÊüê‰∫õ‰ΩøÁî®HTTP/1.0ÂçèËÆÆÁöÑÊµèËßàÂô®ÔºåÂΩìÂÆÉ‰ª¨ÂèëÈÄÅÁöÑPOSTËØ∑Ê±ÇÂæóÂà∞‰∫Ü‰∏Ä‰∏™301ÂìçÂ∫îÁöÑËØùÔºåÊé•‰∏ãÊù•ÁöÑÈáçÂÆöÂêëËØ∑Ê±ÇÂ∞Ü‰ºöÂèòÊàêGETÊñπÂºè„ÄÇ 302 Found ËØ∑Ê±ÇÁöÑËµÑÊ∫êÁé∞Âú®‰∏¥Êó∂‰ªé‰∏çÂêåÁöÑURIÂìçÂ∫îËØ∑Ê±Ç„ÄÇÁî±‰∫éËøôÊ†∑ÁöÑÈáçÂÆöÂêëÊòØ‰∏¥Êó∂ÁöÑÔºåÂÆ¢Êà∑Á´ØÂ∫îÂΩìÁªßÁª≠ÂêëÂéüÊúâÂú∞ÂùÄÂèëÈÄÅ‰ª•ÂêéÁöÑËØ∑Ê±Ç„ÄÇÂè™ÊúâÂú®Cache-ControlÊàñExpires‰∏≠ËøõË°å‰∫ÜÊåáÂÆöÁöÑÊÉÖÂÜµ‰∏ãÔºåËøô‰∏™ÂìçÂ∫îÊâçÊòØÂèØÁºìÂ≠òÁöÑ„ÄÇ Êñ∞ÁöÑ‰∏¥Êó∂ÊÄßÁöÑURIÂ∫îÂΩìÂú®ÂìçÂ∫îÁöÑLocationÂüü‰∏≠ËøîÂõû„ÄÇÈô§ÈùûËøôÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåÂê¶ÂàôÂìçÂ∫îÁöÑÂÆû‰Ωì‰∏≠Â∫îÂΩìÂåÖÂê´ÊåáÂêëÊñ∞ÁöÑURIÁöÑË∂ÖÈìæÊé•ÂèäÁÆÄÁü≠ËØ¥Êòé„ÄÇ Â¶ÇÊûúËøô‰∏çÊòØ‰∏Ä‰∏™GETÊàñËÄÖHEADËØ∑Ê±ÇÔºåÈÇ£‰πàÊµèËßàÂô®Á¶ÅÊ≠¢Ëá™Âä®ËøõË°åÈáçÂÆöÂêëÔºåÈô§ÈùûÂæóÂà∞Áî®Êà∑ÁöÑÁ°ÆËÆ§ÔºåÂõ†‰∏∫ËØ∑Ê±ÇÁöÑÊù°‰ª∂ÂèØËÉΩÂõ†Ê≠§ÂèëÁîüÂèòÂåñ„ÄÇ Ê≥®ÊÑèÔºöËôΩÁÑ∂RFC 1945ÂíåRFC 2068ËßÑËåÉ‰∏çÂÖÅËÆ∏ÂÆ¢Êà∑Á´ØÂú®ÈáçÂÆöÂêëÊó∂ÊîπÂèòËØ∑Ê±ÇÁöÑÊñπÊ≥ïÔºå‰ΩÜÊòØÂæàÂ§öÁé∞Â≠òÁöÑÊµèËßàÂô®Â∞Ü302ÂìçÂ∫îËßÜ‰Ωú‰∏∫303ÂìçÂ∫îÔºåÂπ∂‰∏î‰ΩøÁî®GETÊñπÂºèËÆøÈóÆÂú®Location‰∏≠ËßÑÂÆöÁöÑURIÔºåËÄåÊó†ËßÜÂéüÂÖàËØ∑Ê±ÇÁöÑÊñπÊ≥ï„ÄÇÁä∂ÊÄÅÁ†Å303Âíå307Ë¢´Ê∑ªÂä†‰∫ÜËøõÊù•ÔºåÁî®‰ª•ÊòéÁ°ÆÊúçÂä°Âô®ÊúüÂæÖÂÆ¢Êà∑Á´ØËøõË°å‰ΩïÁßçÂèçÂ∫î„ÄÇ 303 See Other ÂØπÂ∫îÂΩìÂâçËØ∑Ê±ÇÁöÑÂìçÂ∫îÂèØ‰ª•Âú®Âè¶‰∏Ä‰∏™URI‰∏äË¢´ÊâæÂà∞ÔºåËÄå‰∏îÂÆ¢Êà∑Á´ØÂ∫îÂΩìÈááÁî®GETÁöÑÊñπÂºèËÆøÈóÆÈÇ£‰∏™ËµÑÊ∫ê„ÄÇËøô‰∏™ÊñπÊ≥ïÁöÑÂ≠òÂú®‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂÖÅËÆ∏Áî±ËÑöÊú¨ÊøÄÊ¥ªÁöÑPOSTËØ∑Ê±ÇËæìÂá∫ÈáçÂÆöÂêëÂà∞‰∏Ä‰∏™Êñ∞ÁöÑËµÑÊ∫ê„ÄÇËøô‰∏™Êñ∞ÁöÑURI‰∏çÊòØÂéüÂßãËµÑÊ∫êÁöÑÊõø‰ª£ÂºïÁî®„ÄÇÂêåÊó∂Ôºå303ÂìçÂ∫îÁ¶ÅÊ≠¢Ë¢´ÁºìÂ≠ò„ÄÇÂΩìÁÑ∂ÔºåÁ¨¨‰∫å‰∏™ËØ∑Ê±ÇÔºàÈáçÂÆöÂêëÔºâÂèØËÉΩË¢´ÁºìÂ≠ò„ÄÇ Êñ∞ÁöÑURIÂ∫îÂΩìÂú®ÂìçÂ∫îÁöÑLocationÂüü‰∏≠ËøîÂõû„ÄÇÈô§ÈùûËøôÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåÂê¶ÂàôÂìçÂ∫îÁöÑÂÆû‰Ωì‰∏≠Â∫îÂΩìÂåÖÂê´ÊåáÂêëÊñ∞ÁöÑURIÁöÑË∂ÖÈìæÊé•ÂèäÁÆÄÁü≠ËØ¥Êòé„ÄÇ Ê≥®ÊÑèÔºöËÆ∏Â§öHTTP/1.1Áâà‰ª•ÂâçÁöÑÊµèËßàÂô®‰∏çËÉΩÊ≠£Á°ÆÁêÜËß£303Áä∂ÊÄÅ„ÄÇÂ¶ÇÊûúÈúÄË¶ÅËÄÉËôë‰∏éËøô‰∫õÊµèËßàÂô®‰πãÈó¥ÁöÑ‰∫íÂä®Ôºå302Áä∂ÊÄÅÁ†ÅÂ∫îËØ•ÂèØ‰ª•ËÉú‰ªªÔºåÂõ†‰∏∫Â§ßÂ§öÊï∞ÁöÑÊµèËßàÂô®Â§ÑÁêÜ302ÂìçÂ∫îÊó∂ÁöÑÊñπÂºèÊÅ∞ÊÅ∞Â∞±ÊòØ‰∏äËø∞ËßÑËåÉË¶ÅÊ±ÇÂÆ¢Êà∑Á´ØÂ§ÑÁêÜ303ÂìçÂ∫îÊó∂Â∫îÂΩìÂÅöÁöÑ„ÄÇ 304 Not Modified Â¶ÇÊûúÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∫Ü‰∏Ä‰∏™Â∏¶Êù°‰ª∂ÁöÑGETËØ∑Ê±Ç‰∏îËØ•ËØ∑Ê±ÇÂ∑≤Ë¢´ÂÖÅËÆ∏ÔºåËÄåÊñáÊ°£ÁöÑÂÜÖÂÆπÔºàËá™‰∏äÊ¨°ËÆøÈóÆ‰ª•Êù•ÊàñËÄÖÊ†πÊçÆËØ∑Ê±ÇÁöÑÊù°‰ª∂ÔºâÂπ∂Ê≤°ÊúâÊîπÂèòÔºåÂàôÊúçÂä°Âô®Â∫îÂΩìËøîÂõûËøô‰∏™Áä∂ÊÄÅÁ†Å„ÄÇ304ÂìçÂ∫îÁ¶ÅÊ≠¢ÂåÖÂê´Ê∂àÊÅØ‰ΩìÔºåÂõ†Ê≠§ÂßãÁªà‰ª•Ê∂àÊÅØÂ§¥ÂêéÁöÑÁ¨¨‰∏Ä‰∏™Á©∫Ë°åÁªìÂ∞æ„ÄÇ ËØ•ÂìçÂ∫îÂøÖÈ°ªÂåÖÂê´‰ª•‰∏ãÁöÑÂ§¥‰ø°ÊÅØÔºö DateÔºåÈô§ÈùûËøô‰∏™ÊúçÂä°Âô®Ê≤°ÊúâÊó∂Èíü„ÄÇÂÅáÂ¶ÇÊ≤°ÊúâÊó∂ÈíüÁöÑÊúçÂä°Âô®‰πüÈÅµÂÆàËøô‰∫õËßÑÂàôÔºåÈÇ£‰πà‰ª£ÁêÜÊúçÂä°Âô®‰ª•ÂèäÂÆ¢Êà∑Á´ØÂèØ‰ª•Ëá™Ë°åÂ∞ÜDateÂ≠óÊÆµÊ∑ªÂä†Âà∞Êé•Êî∂Âà∞ÁöÑÂìçÂ∫îÂ§¥‰∏≠ÂéªÔºàÊ≠£Â¶ÇRFC 2068‰∏≠ËßÑÂÆöÁöÑ‰∏ÄÊ†∑ÔºâÔºåÁºìÂ≠òÊú∫Âà∂Â∞Ü‰ºöÊ≠£Â∏∏Â∑•‰Ωú„ÄÇ ETagÂíåÔºèÊàñContent-LocationÔºåÂÅáÂ¶ÇÂêåÊ†∑ÁöÑËØ∑Ê±ÇÊú¨Â∫îËøîÂõû200ÂìçÂ∫î„ÄÇ Expires, Cache-ControlÔºåÂíåÔºèÊàñVaryÔºåÂÅáÂ¶ÇÂÖ∂ÂÄºÂèØËÉΩ‰∏é‰πãÂâçÁõ∏ÂêåÂèòÈáèÁöÑÂÖ∂‰ªñÂìçÂ∫îÂØπÂ∫îÁöÑÂÄº‰∏çÂêåÁöÑËØù„ÄÇ ÂÅáÂ¶ÇÊú¨ÂìçÂ∫îËØ∑Ê±Ç‰ΩøÁî®‰∫ÜÂº∫ÁºìÂ≠òÈ™åËØÅÔºåÈÇ£‰πàÊú¨Ê¨°ÂìçÂ∫î‰∏çÂ∫îËØ•ÂåÖÂê´ÂÖ∂‰ªñÂÆû‰ΩìÂ§¥ÔºõÂê¶ÂàôÔºà‰æãÂ¶ÇÔºåÊüê‰∏™Â∏¶Êù°‰ª∂ÁöÑGETËØ∑Ê±Ç‰ΩøÁî®‰∫ÜÂº±ÁºìÂ≠òÈ™åËØÅÔºâÔºåÊú¨Ê¨°ÂìçÂ∫îÁ¶ÅÊ≠¢ÂåÖÂê´ÂÖ∂‰ªñÂÆû‰ΩìÂ§¥ÔºõËøôÈÅøÂÖç‰∫ÜÁºìÂ≠ò‰∫ÜÁöÑÂÆû‰ΩìÂÜÖÂÆπÂíåÊõ¥Êñ∞‰∫ÜÁöÑÂÆû‰ΩìÂ§¥‰ø°ÊÅØ‰πãÈó¥ÁöÑ‰∏ç‰∏ÄËá¥„ÄÇ ÂÅáÂ¶ÇÊüê‰∏™304ÂìçÂ∫îÊåáÊòé‰∫ÜÂΩìÂâçÊüê‰∏™ÂÆû‰ΩìÊ≤°ÊúâÁºìÂ≠òÔºåÈÇ£‰πàÁºìÂ≠òÁ≥ªÁªüÂøÖÈ°ªÂøΩËßÜËøô‰∏™ÂìçÂ∫îÔºåÂπ∂‰∏îÈáçÂ§çÂèëÈÄÅ‰∏çÂåÖÂê´ÈôêÂà∂Êù°‰ª∂ÁöÑËØ∑Ê±Ç„ÄÇ ÂÅáÂ¶ÇÊé•Êî∂Âà∞‰∏Ä‰∏™Ë¶ÅÊ±ÇÊõ¥Êñ∞Êüê‰∏™ÁºìÂ≠òÊù°ÁõÆÁöÑ304ÂìçÂ∫îÔºåÈÇ£‰πàÁºìÂ≠òÁ≥ªÁªüÂøÖÈ°ªÊõ¥Êñ∞Êï¥‰∏™Êù°ÁõÆ‰ª•ÂèçÊò†ÊâÄÊúâÂú®ÂìçÂ∫î‰∏≠Ë¢´Êõ¥Êñ∞ÁöÑÂ≠óÊÆµÁöÑÂÄº„ÄÇ 305 Use Proxy Ë¢´ËØ∑Ê±ÇÁöÑËµÑÊ∫êÂøÖÈ°ªÈÄöËøáÊåáÂÆöÁöÑ‰ª£ÁêÜÊâçËÉΩË¢´ËÆøÈóÆ„ÄÇLocationÂüü‰∏≠Â∞ÜÁªôÂá∫ÊåáÂÆöÁöÑ‰ª£ÁêÜÊâÄÂú®ÁöÑURI‰ø°ÊÅØÔºåÊé•Êî∂ËÄÖÈúÄË¶ÅÈáçÂ§çÂèëÈÄÅ‰∏Ä‰∏™ÂçïÁã¨ÁöÑËØ∑Ê±ÇÔºåÈÄöËøáËøô‰∏™‰ª£ÁêÜÊâçËÉΩËÆøÈóÆÁõ∏Â∫îËµÑÊ∫ê„ÄÇÂè™ÊúâÂéüÂßãÊúçÂä°Âô®ÊâçËÉΩÂàõÂª∫305ÂìçÂ∫î„ÄÇ Ê≥®ÊÑèÔºöRFC 2068‰∏≠Ê≤°ÊúâÊòéÁ°Æ305ÂìçÂ∫îÊòØ‰∏∫‰∫ÜÈáçÂÆöÂêë‰∏Ä‰∏™ÂçïÁã¨ÁöÑËØ∑Ê±ÇÔºåËÄå‰∏îÂè™ËÉΩË¢´ÂéüÂßãÊúçÂä°Âô®ÂàõÂª∫„ÄÇÂøΩËßÜËøô‰∫õÈôêÂà∂ÂèØËÉΩÂØºËá¥‰∏•ÈáçÁöÑÂÆâÂÖ®ÂêéÊûú„ÄÇ 306 Switch Proxy Âú®ÊúÄÊñ∞ÁâàÁöÑËßÑËåÉ‰∏≠Ôºå306Áä∂ÊÄÅÁ†ÅÂ∑≤Áªè‰∏çÂÜçË¢´‰ΩøÁî®„ÄÇ 307 Temporary Redirect ËØ∑Ê±ÇÁöÑËµÑÊ∫êÁé∞Âú®‰∏¥Êó∂‰ªé‰∏çÂêåÁöÑURIÂìçÂ∫îËØ∑Ê±Ç„ÄÇÁî±‰∫éËøôÊ†∑ÁöÑÈáçÂÆöÂêëÊòØ‰∏¥Êó∂ÁöÑÔºåÂÆ¢Êà∑Á´ØÂ∫îÂΩìÁªßÁª≠ÂêëÂéüÊúâÂú∞ÂùÄÂèëÈÄÅ‰ª•ÂêéÁöÑËØ∑Ê±Ç„ÄÇÂè™ÊúâÂú®Cache-ControlÊàñExpires‰∏≠ËøõË°å‰∫ÜÊåáÂÆöÁöÑÊÉÖÂÜµ‰∏ãÔºåËøô‰∏™ÂìçÂ∫îÊâçÊòØÂèØÁºìÂ≠òÁöÑ„ÄÇ Êñ∞ÁöÑ‰∏¥Êó∂ÊÄßÁöÑURIÂ∫îÂΩìÂú®ÂìçÂ∫îÁöÑLocationÂüü‰∏≠ËøîÂõû„ÄÇÈô§ÈùûËøôÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåÂê¶ÂàôÂìçÂ∫îÁöÑÂÆû‰Ωì‰∏≠Â∫îÂΩìÂåÖÂê´ÊåáÂêëÊñ∞ÁöÑURIÁöÑË∂ÖÈìæÊé•ÂèäÁÆÄÁü≠ËØ¥Êòé„ÄÇÂõ†‰∏∫ÈÉ®ÂàÜÊµèËßàÂô®‰∏çËÉΩËØÜÂà´307ÂìçÂ∫îÔºåÂõ†Ê≠§ÈúÄË¶ÅÊ∑ªÂä†‰∏äËø∞ÂøÖË¶Å‰ø°ÊÅØ‰ª•‰æøÁî®Êà∑ËÉΩÂ§üÁêÜËß£Âπ∂ÂêëÊñ∞ÁöÑURIÂèëÂá∫ËÆøÈóÆËØ∑Ê±Ç„ÄÇ Â¶ÇÊûúËøô‰∏çÊòØ‰∏Ä‰∏™GETÊàñËÄÖHEADËØ∑Ê±ÇÔºåÈÇ£‰πàÊµèËßàÂô®Á¶ÅÊ≠¢Ëá™Âä®ËøõË°åÈáçÂÆöÂêëÔºåÈô§ÈùûÂæóÂà∞Áî®Êà∑ÁöÑÁ°ÆËÆ§ÔºåÂõ†‰∏∫ËØ∑Ê±ÇÁöÑÊù°‰ª∂ÂèØËÉΩÂõ†Ê≠§ÂèëÁîüÂèòÂåñ„ÄÇ 4Ô∏è‚É£‚ùå‚ùå üî¥üî¥üî¥ 4xxÂÆ¢Êà∑Á´ØÈîôËØØËøôÁ±ªÁöÑÁä∂ÊÄÅÁ†Å‰ª£Ë°®‰∫ÜÂÆ¢Êà∑Á´ØÁúãËµ∑Êù•ÂèØËÉΩÂèëÁîü‰∫ÜÈîôËØØÔºåÂ¶®Á¢ç‰∫ÜÊúçÂä°Âô®ÁöÑÂ§ÑÁêÜ„ÄÇÈô§ÈùûÂìçÂ∫îÁöÑÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåÂê¶ÂàôÊúçÂä°Âô®Â∞±Â∫îËØ•ËøîÂõû‰∏Ä‰∏™Ëß£ÈáäÂΩìÂâçÈîôËØØÁä∂ÂÜµÁöÑÂÆû‰ΩìÔºå‰ª•ÂèäËøôÊòØ‰∏¥Êó∂ÁöÑËøòÊòØÊ∞∏‰πÖÊÄßÁöÑÁä∂ÂÜµ„ÄÇËøô‰∫õÁä∂ÊÄÅÁ†ÅÈÄÇÁî®‰∫é‰ªª‰ΩïËØ∑Ê±ÇÊñπÊ≥ï„ÄÇÊµèËßàÂô®Â∫îÂΩìÂêëÁî®Êà∑ÊòæÁ§∫‰ªª‰ΩïÂåÖÂê´Âú®Ê≠§Á±ªÈîôËØØÂìçÂ∫î‰∏≠ÁöÑÂÆû‰ΩìÂÜÖÂÆπ„ÄÇÂ¶ÇÊûúÈîôËØØÂèëÁîüÊó∂ÂÆ¢Êà∑Á´ØÊ≠£Âú®‰º†ÈÄÅÊï∞ÊçÆÔºåÈÇ£‰πà‰ΩøÁî®TCPÁöÑÊúçÂä°Âô®ÂÆûÁé∞Â∫îÂΩì‰ªîÁªÜÁ°Æ‰øùÂú®ÂÖ≥Èó≠ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®‰πãÈó¥ÁöÑËøûÊé•‰πãÂâçÔºåÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÊî∂Âà∞‰∫ÜÂåÖÂê´ÈîôËØØ‰ø°ÊÅØÁöÑÊï∞ÊçÆÂåÖ„ÄÇÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÂú®Êî∂Âà∞ÈîôËØØ‰ø°ÊÅØÂêéÁªßÁª≠ÂêëÊúçÂä°Âô®ÂèëÈÄÅÊï∞ÊçÆÔºåÊúçÂä°Âô®ÁöÑTCPÊ†àÂ∞ÜÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∏Ä‰∏™ÈáçÁΩÆÊï∞ÊçÆÂåÖÔºå‰ª•Ê∏ÖÈô§ËØ•ÂÆ¢Êà∑Á´ØÊâÄÊúâËøòÊú™ËØÜÂà´ÁöÑËæìÂÖ•ÁºìÂÜ≤Ôºå‰ª•ÂÖçËøô‰∫õÊï∞ÊçÆË¢´ÊúçÂä°Âô®‰∏äÁöÑÂ∫îÁî®Á®ãÂ∫èËØªÂèñÂπ∂Âπ≤Êâ∞ÂêéËÄÖ„ÄÇ 400 Bad Request Áî±‰∫éÂåÖÂê´ËØ≠Ê≥ïÈîôËØØÔºåÂΩìÂâçËØ∑Ê±ÇÊó†Ê≥ïË¢´ÊúçÂä°Âô®ÁêÜËß£„ÄÇÈô§ÈùûËøõË°å‰øÆÊîπÔºåÂê¶ÂàôÂÆ¢Êà∑Á´Ø‰∏çÂ∫îËØ•ÈáçÂ§çÊèê‰∫§Ëøô‰∏™ËØ∑Ê±Ç„ÄÇ 401 Unauthorized ÂΩìÂâçËØ∑Ê±ÇÈúÄË¶ÅÁî®Êà∑È™åËØÅ„ÄÇËØ•ÂìçÂ∫îÂøÖÈ°ªÂåÖÂê´‰∏Ä‰∏™ÈÄÇÁî®‰∫éË¢´ËØ∑Ê±ÇËµÑÊ∫êÁöÑWWW-Authenticate‰ø°ÊÅØÂ§¥Áî®‰ª•ËØ¢ÈóÆÁî®Êà∑‰ø°ÊÅØ„ÄÇÂÆ¢Êà∑Á´ØÂèØ‰ª•ÈáçÂ§çÊèê‰∫§‰∏Ä‰∏™ÂåÖÂê´ÊÅ∞ÂΩìÁöÑAuthorizationÂ§¥‰ø°ÊÅØÁöÑËØ∑Ê±Ç„ÄÇÂ¶ÇÊûúÂΩìÂâçËØ∑Ê±ÇÂ∑≤ÁªèÂåÖÂê´‰∫ÜAuthorizationËØÅ‰π¶ÔºåÈÇ£‰πà401ÂìçÂ∫î‰ª£Ë°®ÁùÄÊúçÂä°Âô®È™åËØÅÂ∑≤ÁªèÊãíÁªù‰∫ÜÈÇ£‰∫õËØÅ‰π¶„ÄÇÂ¶ÇÊûú401ÂìçÂ∫îÂåÖÂê´‰∫Ü‰∏éÂâç‰∏Ä‰∏™ÂìçÂ∫îÁõ∏ÂêåÁöÑË∫´‰ªΩÈ™åËØÅËØ¢ÈóÆÔºå‰∏îÊµèËßàÂô®Â∑≤ÁªèËá≥Â∞ëÂ∞ùËØï‰∫Ü‰∏ÄÊ¨°È™åËØÅÔºåÈÇ£‰πàÊµèËßàÂô®Â∫îÂΩìÂêëÁî®Êà∑Â±ïÁ§∫ÂìçÂ∫î‰∏≠ÂåÖÂê´ÁöÑÂÆû‰Ωì‰ø°ÊÅØÔºåÂõ†‰∏∫Ëøô‰∏™ÂÆû‰Ωì‰ø°ÊÅØ‰∏≠ÂèØËÉΩÂåÖÂê´‰∫ÜÁõ∏ÂÖ≥ËØäÊñ≠‰ø°ÊÅØ„ÄÇÂèÇËßÅRFC 2617„ÄÇ 402 Payment Required ËØ•Áä∂ÊÄÅÁ†ÅÊòØ‰∏∫‰∫ÜÂ∞ÜÊù•ÂèØËÉΩÁöÑÈúÄÊ±ÇËÄåÈ¢ÑÁïôÁöÑ„ÄÇ 403 Forbidden ÊúçÂä°Âô®Â∑≤ÁªèÁêÜËß£ËØ∑Ê±ÇÔºå‰ΩÜÊòØÊãíÁªùÊâßË°åÂÆÉ„ÄÇ‰∏é401ÂìçÂ∫î‰∏çÂêåÁöÑÊòØÔºåË∫´‰ªΩÈ™åËØÅÂπ∂‰∏çËÉΩÊèê‰æõ‰ªª‰ΩïÂ∏ÆÂä©ÔºåËÄå‰∏îËøô‰∏™ËØ∑Ê±Ç‰πü‰∏çÂ∫îËØ•Ë¢´ÈáçÂ§çÊèê‰∫§„ÄÇÂ¶ÇÊûúËøô‰∏çÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåËÄå‰∏îÊúçÂä°Âô®Â∏åÊúõËÉΩÂ§üËÆ≤Ê∏ÖÊ•ö‰∏∫‰ΩïËØ∑Ê±Ç‰∏çËÉΩË¢´ÊâßË°åÔºåÈÇ£‰πàÂ∞±Â∫îËØ•Âú®ÂÆû‰ΩìÂÜÖÊèèËø∞ÊãíÁªùÁöÑÂéüÂõ†„ÄÇÂΩìÁÑ∂ÊúçÂä°Âô®‰πüÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™404ÂìçÂ∫îÔºåÂÅáÂ¶ÇÂÆÉ‰∏çÂ∏åÊúõËÆ©ÂÆ¢Êà∑Á´ØËé∑Âæó‰ªª‰Ωï‰ø°ÊÅØ„ÄÇ 404 Not Found ËØ∑Ê±ÇÂ§±Ë¥•ÔºåËØ∑Ê±ÇÊâÄÂ∏åÊúõÂæóÂà∞ÁöÑËµÑÊ∫êÊú™Ë¢´Âú®ÊúçÂä°Âô®‰∏äÂèëÁé∞„ÄÇÊ≤°Êúâ‰ø°ÊÅØËÉΩÂ§üÂëäËØâÁî®Êà∑Ëøô‰∏™Áä∂ÂÜµÂà∞Â∫ïÊòØÊöÇÊó∂ÁöÑËøòÊòØÊ∞∏‰πÖÁöÑ„ÄÇÂÅáÂ¶ÇÊúçÂä°Âô®Áü•ÈÅìÊÉÖÂÜµÁöÑËØùÔºåÂ∫îÂΩì‰ΩøÁî®410Áä∂ÊÄÅÁ†ÅÊù•ÂëäÁü•ÊóßËµÑÊ∫êÂõ†‰∏∫Êüê‰∫õÂÜÖÈÉ®ÁöÑÈÖçÁΩÆÊú∫Âà∂ÈóÆÈ¢òÔºåÂ∑≤ÁªèÊ∞∏‰πÖÁöÑ‰∏çÂèØÁî®ÔºåËÄå‰∏îÊ≤°Êúâ‰ªª‰ΩïÂèØ‰ª•Ë∑≥ËΩ¨ÁöÑÂú∞ÂùÄ„ÄÇ404Ëøô‰∏™Áä∂ÊÄÅÁ†ÅË¢´ÂπøÊ≥õÂ∫îÁî®‰∫éÂΩìÊúçÂä°Âô®‰∏çÊÉ≥Êè≠Á§∫Âà∞Â∫ï‰∏∫‰ΩïËØ∑Ê±ÇË¢´ÊãíÁªùÊàñËÄÖÊ≤°ÊúâÂÖ∂‰ªñÈÄÇÂêàÁöÑÂìçÂ∫îÂèØÁî®ÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ 405 Method Not Allowed ËØ∑Ê±ÇË°å‰∏≠ÊåáÂÆöÁöÑËØ∑Ê±ÇÊñπÊ≥ï‰∏çËÉΩË¢´Áî®‰∫éËØ∑Ê±ÇÁõ∏Â∫îÁöÑËµÑÊ∫ê„ÄÇËØ•ÂìçÂ∫îÂøÖÈ°ªËøîÂõû‰∏Ä‰∏™AllowÂ§¥‰ø°ÊÅØÁî®‰ª•Ë°®Á§∫Âá∫ÂΩìÂâçËµÑÊ∫êËÉΩÂ§üÊé•ÂèóÁöÑËØ∑Ê±ÇÊñπÊ≥ïÁöÑÂàóË°®„ÄÇ Èâ¥‰∫éPUTÔºåDELETEÊñπÊ≥ï‰ºöÂØπÊúçÂä°Âô®‰∏äÁöÑËµÑÊ∫êËøõË°åÂÜôÊìç‰ΩúÔºåÂõ†ËÄåÁªùÂ§ßÈÉ®ÂàÜÁöÑÁΩëÈ°µÊúçÂä°Âô®ÈÉΩ‰∏çÊîØÊåÅÊàñËÄÖÂú®ÈªòËÆ§ÈÖçÁΩÆ‰∏ã‰∏çÂÖÅËÆ∏‰∏äËø∞ËØ∑Ê±ÇÊñπÊ≥ïÔºåÂØπ‰∫éÊ≠§Á±ªËØ∑Ê±ÇÂùá‰ºöËøîÂõû405ÈîôËØØ„ÄÇ 406 Not Acceptable ËØ∑Ê±ÇÁöÑËµÑÊ∫êÁöÑÂÜÖÂÆπÁâπÊÄßÊó†Ê≥ïÊª°Ë∂≥ËØ∑Ê±ÇÂ§¥‰∏≠ÁöÑÊù°‰ª∂ÔºåÂõ†ËÄåÊó†Ê≥ïÁîüÊàêÂìçÂ∫îÂÆû‰Ωì„ÄÇ Èô§ÈùûËøôÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåÂê¶ÂàôËØ•ÂìçÂ∫îÂ∞±Â∫îÂΩìËøîÂõû‰∏Ä‰∏™ÂåÖÂê´ÂèØ‰ª•ËÆ©Áî®Êà∑ÊàñËÄÖÊµèËßàÂô®‰ªé‰∏≠ÈÄâÊã©ÊúÄÂêàÈÄÇÁöÑÂÆû‰ΩìÁâπÊÄß‰ª•ÂèäÂú∞ÂùÄÂàóË°®ÁöÑÂÆû‰Ωì„ÄÇÂÆû‰ΩìÁöÑÊ†ºÂºèÁî±Content-TypeÂ§¥‰∏≠ÂÆö‰πâÁöÑÂ™í‰ΩìÁ±ªÂûãÂÜ≥ÂÆö„ÄÇÊµèËßàÂô®ÂèØ‰ª•Ê†πÊçÆÊ†ºÂºèÂèäËá™Ë∫´ËÉΩÂäõËá™Ë°å‰ΩúÂá∫ÊúÄ‰Ω≥ÈÄâÊã©„ÄÇ‰ΩÜÊòØÔºåËßÑËåÉ‰∏≠Âπ∂Ê≤°ÊúâÂÆö‰πâ‰ªª‰Ωï‰ΩúÂá∫Ê≠§Á±ªËá™Âä®ÈÄâÊã©ÁöÑÊ†áÂáÜ„ÄÇ 407 Proxy Authentication Required ‰∏é401ÂìçÂ∫îÁ±ª‰ººÔºåÂè™‰∏çËøáÂÆ¢Êà∑Á´ØÂøÖÈ°ªÂú®‰ª£ÁêÜÊúçÂä°Âô®‰∏äËøõË°åË∫´‰ªΩÈ™åËØÅ„ÄÇ‰ª£ÁêÜÊúçÂä°Âô®ÂøÖÈ°ªËøîÂõû‰∏Ä‰∏™Proxy-AuthenticateÁî®‰ª•ËøõË°åË∫´‰ªΩËØ¢ÈóÆ„ÄÇÂÆ¢Êà∑Á´ØÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™Proxy-Authorization‰ø°ÊÅØÂ§¥Áî®‰ª•È™åËØÅ„ÄÇÂèÇËßÅRFC 2617„ÄÇ 408 Request Timeout ËØ∑Ê±ÇË∂ÖÊó∂„ÄÇÂÆ¢Êà∑Á´ØÊ≤°ÊúâÂú®ÊúçÂä°Âô®È¢ÑÂ§áÁ≠âÂæÖÁöÑÊó∂Èó¥ÂÜÖÂÆåÊàê‰∏Ä‰∏™ËØ∑Ê±ÇÁöÑÂèëÈÄÅ„ÄÇÂÆ¢Êà∑Á´ØÂèØ‰ª•ÈöèÊó∂ÂÜçÊ¨°Êèê‰∫§Ëøô‰∏ÄËØ∑Ê±ÇËÄåÊó†ÈúÄËøõË°å‰ªª‰ΩïÊõ¥Êîπ„ÄÇ 409 Conflict Áî±‰∫éÂíåË¢´ËØ∑Ê±ÇÁöÑËµÑÊ∫êÁöÑÂΩìÂâçÁä∂ÊÄÅ‰πãÈó¥Â≠òÂú®ÂÜ≤Á™ÅÔºåËØ∑Ê±ÇÊó†Ê≥ïÂÆåÊàê„ÄÇËøô‰∏™‰ª£Á†ÅÂè™ÂÖÅËÆ∏Áî®Âú®ËøôÊ†∑ÁöÑÊÉÖÂÜµ‰∏ãÊâçËÉΩË¢´‰ΩøÁî®ÔºöÁî®Êà∑Ë¢´ËÆ§‰∏∫ËÉΩÂ§üËß£ÂÜ≥ÂÜ≤Á™ÅÔºåÂπ∂‰∏î‰ºöÈáçÊñ∞Êèê‰∫§Êñ∞ÁöÑËØ∑Ê±Ç„ÄÇËØ•ÂìçÂ∫îÂ∫îÂΩìÂåÖÂê´Ë∂≥Â§üÁöÑ‰ø°ÊÅØ‰ª•‰æøÁî®Êà∑ÂèëÁé∞ÂÜ≤Á™ÅÁöÑÊ∫êÂ§¥„ÄÇ ÂÜ≤Á™ÅÈÄöÂ∏∏ÂèëÁîü‰∫éÂØπPUTËØ∑Ê±ÇÁöÑÂ§ÑÁêÜ‰∏≠„ÄÇ‰æãÂ¶ÇÔºåÂú®ÈááÁî®ÁâàÊú¨Ê£ÄÊü•ÁöÑÁéØÂ¢É‰∏ãÔºåÊüêÊ¨°PUTÊèê‰∫§ÁöÑÂØπÁâπÂÆöËµÑÊ∫êÁöÑ‰øÆÊîπËØ∑Ê±ÇÊâÄÈôÑÂ∏¶ÁöÑÁâàÊú¨‰ø°ÊÅØ‰∏é‰πãÂâçÁöÑÊüê‰∏™ÔºàÁ¨¨‰∏âÊñπÔºâËØ∑Ê±ÇÂêëÂÜ≤Á™ÅÔºåÈÇ£‰πàÊ≠§Êó∂ÊúçÂä°Âô®Â∞±Â∫îËØ•ËøîÂõû‰∏Ä‰∏™409ÈîôËØØÔºåÂëäÁü•Áî®Êà∑ËØ∑Ê±ÇÊó†Ê≥ïÂÆåÊàê„ÄÇÊ≠§Êó∂ÔºåÂìçÂ∫îÂÆû‰Ωì‰∏≠ÂæàÂèØËÉΩ‰ºöÂåÖÂê´‰∏§‰∏™ÂÜ≤Á™ÅÁâàÊú¨‰πãÈó¥ÁöÑÂ∑ÆÂºÇÊØîËæÉÔºå‰ª•‰æøÁî®Êà∑ÈáçÊñ∞Êèê‰∫§ÂΩíÂπ∂‰ª•ÂêéÁöÑÊñ∞ÁâàÊú¨„ÄÇ 410 Gone Ë¢´ËØ∑Ê±ÇÁöÑËµÑÊ∫êÂú®ÊúçÂä°Âô®‰∏äÂ∑≤Áªè‰∏çÂÜçÂèØÁî®ÔºåËÄå‰∏îÊ≤°Êúâ‰ªª‰ΩïÂ∑≤Áü•ÁöÑËΩ¨ÂèëÂú∞ÂùÄ„ÄÇËøôÊ†∑ÁöÑÁä∂ÂÜµÂ∫îÂΩìË¢´ËÆ§‰∏∫ÊòØÊ∞∏‰πÖÊÄßÁöÑ„ÄÇÂ¶ÇÊûúÂèØËÉΩÔºåÊã•ÊúâÈìæÊé•ÁºñËæëÂäüËÉΩÁöÑÂÆ¢Êà∑Á´ØÂ∫îÂΩìÂú®Ëé∑ÂæóÁî®Êà∑ËÆ∏ÂèØÂêéÂà†Èô§ÊâÄÊúâÊåáÂêëËøô‰∏™Âú∞ÂùÄÁöÑÂºïÁî®„ÄÇÂ¶ÇÊûúÊúçÂä°Âô®‰∏çÁü•ÈÅìÊàñËÄÖÊó†Ê≥ïÁ°ÆÂÆöËøô‰∏™Áä∂ÂÜµÊòØÂê¶ÊòØÊ∞∏‰πÖÁöÑÔºåÈÇ£‰πàÂ∞±Â∫îËØ•‰ΩøÁî®404Áä∂ÊÄÅÁ†Å„ÄÇÈô§ÈùûÈ¢ùÂ§ñËØ¥ÊòéÔºåÂê¶ÂàôËøô‰∏™ÂìçÂ∫îÊòØÂèØÁºìÂ≠òÁöÑ„ÄÇ 410ÂìçÂ∫îÁöÑÁõÆÁöÑ‰∏ªË¶ÅÊòØÂ∏ÆÂä©ÁΩëÁ´ôÁÆ°ÁêÜÂëòÁª¥Êä§ÁΩëÁ´ôÔºåÈÄöÁü•Áî®Êà∑ËØ•ËµÑÊ∫êÂ∑≤Áªè‰∏çÂÜçÂèØÁî®ÔºåÂπ∂‰∏îÊúçÂä°Âô®Êã•ÊúâËÄÖÂ∏åÊúõÊâÄÊúâÊåáÂêëËøô‰∏™ËµÑÊ∫êÁöÑËøúÁ´ØËøûÊé•‰πüË¢´Âà†Èô§„ÄÇËøôÁ±ª‰∫ã‰ª∂Âú®ÈôêÊó∂„ÄÅÂ¢ûÂÄºÊúçÂä°‰∏≠ÂæàÊôÆÈÅç„ÄÇÂêåÊ†∑Ôºå410ÂìçÂ∫î‰πüË¢´Áî®‰∫éÈÄöÁü•ÂÆ¢Êà∑Á´ØÂú®ÂΩìÂâçÊúçÂä°Âô®Á´ôÁÇπ‰∏äÔºåÂéüÊú¨Â±û‰∫éÊüê‰∏™‰∏™‰∫∫ÁöÑËµÑÊ∫êÂ∑≤Áªè‰∏çÂÜçÂèØÁî®„ÄÇÂΩìÁÑ∂ÔºåÊòØÂê¶ÈúÄË¶ÅÊääÊâÄÊúâÊ∞∏‰πÖ‰∏çÂèØÁî®ÁöÑËµÑÊ∫êÊ†áËÆ∞‰∏∫‚Äô410 Gone‚ÄôÔºå‰ª•ÂèäÊòØÂê¶ÈúÄË¶Å‰øùÊåÅÊ≠§Ê†áËÆ∞Â§öÈïøÊó∂Èó¥ÔºåÂÆåÂÖ®ÂèñÂÜ≥‰∫éÊúçÂä°Âô®Êã•ÊúâËÄÖ„ÄÇ 411 Length Required ÊúçÂä°Âô®ÊãíÁªùÂú®Ê≤°ÊúâÂÆö‰πâContent-LengthÂ§¥ÁöÑÊÉÖÂÜµ‰∏ãÊé•ÂèóËØ∑Ê±Ç„ÄÇÂú®Ê∑ªÂä†‰∫ÜË°®ÊòéËØ∑Ê±ÇÊ∂àÊÅØ‰ΩìÈïøÂ∫¶ÁöÑÊúâÊïàContent-LengthÂ§¥‰πãÂêéÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•ÂÜçÊ¨°Êèê‰∫§ËØ•ËØ∑Ê±Ç„ÄÇ 412 Precondition Failed ÊúçÂä°Âô®Âú®È™åËØÅÂú®ËØ∑Ê±ÇÁöÑÂ§¥Â≠óÊÆµ‰∏≠ÁªôÂá∫ÂÖàÂÜ≥Êù°‰ª∂Êó∂ÔºåÊ≤°ËÉΩÊª°Ë∂≥ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™„ÄÇËøô‰∏™Áä∂ÊÄÅÁ†ÅÂÖÅËÆ∏ÂÆ¢Êà∑Á´ØÂú®Ëé∑ÂèñËµÑÊ∫êÊó∂Âú®ËØ∑Ê±ÇÁöÑÂÖÉ‰ø°ÊÅØÔºàËØ∑Ê±ÇÂ§¥Â≠óÊÆµÊï∞ÊçÆÔºâ‰∏≠ËÆæÁΩÆÂÖàÂÜ≥Êù°‰ª∂Ôºå‰ª•Ê≠§ÈÅøÂÖçËØ•ËØ∑Ê±ÇÊñπÊ≥ïË¢´Â∫îÁî®Âà∞ÂÖ∂Â∏åÊúõÁöÑÂÜÖÂÆπ‰ª•Â§ñÁöÑËµÑÊ∫ê‰∏ä„ÄÇ 413 Request Entity Too Large ÊúçÂä°Âô®ÊãíÁªùÂ§ÑÁêÜÂΩìÂâçËØ∑Ê±ÇÔºåÂõ†‰∏∫ËØ•ËØ∑Ê±ÇÊèê‰∫§ÁöÑÂÆû‰ΩìÊï∞ÊçÆÂ§ßÂ∞èË∂ÖËøá‰∫ÜÊúçÂä°Âô®ÊÑøÊÑèÊàñËÄÖËÉΩÂ§üÂ§ÑÁêÜÁöÑËåÉÂõ¥„ÄÇÊ≠§ÁßçÊÉÖÂÜµ‰∏ãÔºåÊúçÂä°Âô®ÂèØ‰ª•ÂÖ≥Èó≠ËøûÊé•‰ª•ÂÖçÂÆ¢Êà∑Á´ØÁªßÁª≠ÂèëÈÄÅÊ≠§ËØ∑Ê±Ç„ÄÇ Â¶ÇÊûúËøô‰∏™Áä∂ÂÜµÊòØ‰∏¥Êó∂ÁöÑÔºåÊúçÂä°Âô®Â∫îÂΩìËøîÂõû‰∏Ä‰∏™Retry-AfterÁöÑÂìçÂ∫îÂ§¥Ôºå‰ª•ÂëäÁü•ÂÆ¢Êà∑Á´ØÂèØ‰ª•Âú®Â§öÂ∞ëÊó∂Èó¥‰ª•ÂêéÈáçÊñ∞Â∞ùËØï„ÄÇ 414 Request-URI Too Long ËØ∑Ê±ÇÁöÑURIÈïøÂ∫¶Ë∂ÖËøá‰∫ÜÊúçÂä°Âô®ËÉΩÂ§üËß£ÈáäÁöÑÈïøÂ∫¶ÔºåÂõ†Ê≠§ÊúçÂä°Âô®ÊãíÁªùÂØπËØ•ËØ∑Ê±ÇÊèê‰æõÊúçÂä°„ÄÇËøôÊØîËæÉÂ∞ëËßÅÔºåÈÄöÂ∏∏ÁöÑÊÉÖÂÜµÂåÖÊã¨Ôºö Êú¨Â∫î‰ΩøÁî®POSTÊñπÊ≥ïÁöÑË°®ÂçïÊèê‰∫§ÂèòÊàê‰∫ÜGETÊñπÊ≥ïÔºåÂØºËá¥Êü•ËØ¢Â≠óÁ¨¶‰∏≤ÔºàQuery StringÔºâËøáÈïø„ÄÇ ÈáçÂÆöÂêëURI‚ÄúÈªëÊ¥û‚ÄùÔºå‰æãÂ¶ÇÊØèÊ¨°ÈáçÂÆöÂêëÊääÊóßÁöÑURI‰Ωú‰∏∫Êñ∞ÁöÑURIÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂØºËá¥Âú®Ëã•Âπ≤Ê¨°ÈáçÂÆöÂêëÂêéURIË∂ÖÈïø„ÄÇ ÂÆ¢Êà∑Á´ØÊ≠£Âú®Â∞ùËØïÂà©Áî®Êüê‰∫õÊúçÂä°Âô®‰∏≠Â≠òÂú®ÁöÑÂÆâÂÖ®ÊºèÊ¥ûÊîªÂáªÊúçÂä°Âô®„ÄÇËøôÁ±ªÊúçÂä°Âô®‰ΩøÁî®Âõ∫ÂÆöÈïøÂ∫¶ÁöÑÁºìÂÜ≤ËØªÂèñÊàñÊìç‰ΩúËØ∑Ê±ÇÁöÑURIÔºåÂΩìGETÂêéÁöÑÂèÇÊï∞Ë∂ÖËøáÊüê‰∏™Êï∞ÂÄºÂêéÔºåÂèØËÉΩ‰ºö‰∫ßÁîüÁºìÂÜ≤Âå∫Ê∫¢Âá∫ÔºåÂØºËá¥‰ªªÊÑè‰ª£Á†ÅË¢´ÊâßË°å[1]„ÄÇÊ≤°ÊúâÊ≠§Á±ªÊºèÊ¥ûÁöÑÊúçÂä°Âô®ÔºåÂ∫îÂΩìËøîÂõû414Áä∂ÊÄÅÁ†Å„ÄÇ 415 Unsupported Media Type ÂØπ‰∫éÂΩìÂâçËØ∑Ê±ÇÁöÑÊñπÊ≥ïÂíåÊâÄËØ∑Ê±ÇÁöÑËµÑÊ∫êÔºåËØ∑Ê±Ç‰∏≠Êèê‰∫§ÁöÑÂÆû‰ΩìÂπ∂‰∏çÊòØÊúçÂä°Âô®‰∏≠ÊâÄÊîØÊåÅÁöÑÊ†ºÂºèÔºåÂõ†Ê≠§ËØ∑Ê±ÇË¢´ÊãíÁªù„ÄÇ 416 Requested Range Not Satisfiable Â¶ÇÊûúËØ∑Ê±Ç‰∏≠ÂåÖÂê´‰∫ÜRangeËØ∑Ê±ÇÂ§¥ÔºåÂπ∂‰∏îRange‰∏≠ÊåáÂÆöÁöÑ‰ªª‰ΩïÊï∞ÊçÆËåÉÂõ¥ÈÉΩ‰∏éÂΩìÂâçËµÑÊ∫êÁöÑÂèØÁî®ËåÉÂõ¥‰∏çÈáçÂêàÔºåÂêåÊó∂ËØ∑Ê±Ç‰∏≠ÂèàÊ≤°ÊúâÂÆö‰πâIf-RangeËØ∑Ê±ÇÂ§¥ÔºåÈÇ£‰πàÊúçÂä°Âô®Â∞±Â∫îÂΩìËøîÂõû416Áä∂ÊÄÅÁ†Å„ÄÇ ÂÅáÂ¶ÇRange‰ΩøÁî®ÁöÑÊòØÂ≠óËäÇËåÉÂõ¥ÔºåÈÇ£‰πàËøôÁßçÊÉÖÂÜµÂ∞±ÊòØÊåáËØ∑Ê±ÇÊåáÂÆöÁöÑÊâÄÊúâÊï∞ÊçÆËåÉÂõ¥ÁöÑÈ¶ñÂ≠óËäÇ‰ΩçÁΩÆÈÉΩË∂ÖËøá‰∫ÜÂΩìÂâçËµÑÊ∫êÁöÑÈïøÂ∫¶„ÄÇÊúçÂä°Âô®‰πüÂ∫îÂΩìÂú®ËøîÂõû416Áä∂ÊÄÅÁ†ÅÁöÑÂêåÊó∂ÔºåÂåÖÂê´‰∏Ä‰∏™Content-RangeÂÆû‰ΩìÂ§¥ÔºåÁî®‰ª•ÊåáÊòéÂΩìÂâçËµÑÊ∫êÁöÑÈïøÂ∫¶„ÄÇËøô‰∏™ÂìçÂ∫î‰πüË¢´Á¶ÅÊ≠¢‰ΩøÁî®multipart/byteranges‰Ωú‰∏∫ÂÖ∂Content-Type„ÄÇ 417 Expectation Failed Âú®ËØ∑Ê±ÇÂ§¥Expect‰∏≠ÊåáÂÆöÁöÑÈ¢ÑÊúüÂÜÖÂÆπÊó†Ê≥ïË¢´ÊúçÂä°Âô®Êª°Ë∂≥ÔºåÊàñËÄÖËøô‰∏™ÊúçÂä°Âô®ÊòØ‰∏Ä‰∏™‰ª£ÁêÜÊúçÂä°Âô®ÔºåÂÆÉÊúâÊòéÊòæÁöÑËØÅÊçÆËØÅÊòéÂú®ÂΩìÂâçË∑ØÁî±ÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ‰∏äÔºåExpectÁöÑÂÜÖÂÆπÊó†Ê≥ïË¢´Êª°Ë∂≥„ÄÇ 418 I‚Äôm a teapot Êú¨Êìç‰ΩúÁ†ÅÊòØÂú®1998Âπ¥‰Ωú‰∏∫IETFÁöÑ‰º†ÁªüÊÑö‰∫∫ËäÇÁ¨ëËØù, Âú®RFC 2324 Ë∂ÖÊñáÊú¨ÂíñÂï°Â£∂ÊéßÂà∂ÂçèËÆÆ‰∏≠ÂÆö‰πâÁöÑÔºåÂπ∂‰∏çÈúÄË¶ÅÂú®ÁúüÂÆûÁöÑHTTPÊúçÂä°Âô®‰∏≠ÂÆö‰πâ„ÄÇ 421 There are too many connections from your internet address ‰ªéÂΩìÂâçÂÆ¢Êà∑Á´ØÊâÄÂú®ÁöÑIPÂú∞ÂùÄÂà∞ÊúçÂä°Âô®ÁöÑËøûÊé•Êï∞Ë∂ÖËøá‰∫ÜÊúçÂä°Âô®ËÆ∏ÂèØÁöÑÊúÄÂ§ßËåÉÂõ¥„ÄÇÈÄöÂ∏∏ÔºåËøôÈáåÁöÑIPÂú∞ÂùÄÊåáÁöÑÊòØ‰ªéÊúçÂä°Âô®‰∏äÁúãÂà∞ÁöÑÂÆ¢Êà∑Á´ØÂú∞ÂùÄÔºàÊØîÂ¶ÇÁî®Êà∑ÁöÑÁΩëÂÖ≥ÊàñËÄÖ‰ª£ÁêÜÊúçÂä°Âô®Âú∞ÂùÄÔºâ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËøûÊé•Êï∞ÁöÑËÆ°ÁÆóÂèØËÉΩÊ∂âÂèäÂà∞‰∏çÊ≠¢‰∏Ä‰∏™ÁªàÁ´ØÁî®Êà∑„ÄÇ 422 Unprocessable Entity ËØ∑Ê±ÇÊ†ºÂºèÊ≠£Á°ÆÔºå‰ΩÜÊòØÁî±‰∫éÂê´ÊúâËØ≠‰πâÈîôËØØÔºåÊó†Ê≥ïÂìçÂ∫î„ÄÇÔºàRFC 4918 WebDAVÔºâ 423 Locked ÂΩìÂâçËµÑÊ∫êË¢´ÈîÅÂÆö„ÄÇÔºàRFC 4918 WebDAVÔºâ 424 Failed Dependency Áî±‰∫é‰πãÂâçÁöÑÊüê‰∏™ËØ∑Ê±ÇÂèëÁîüÁöÑÈîôËØØÔºåÂØºËá¥ÂΩìÂâçËØ∑Ê±ÇÂ§±Ë¥•Ôºå‰æãÂ¶ÇPROPPATCH„ÄÇÔºàRFC 4918 WebDAVÔºâ 425 Unordered Collection Âú®WebDav Advanced CollectionsËçâÊ°à‰∏≠ÂÆö‰πâÔºå‰ΩÜÊòØÊú™Âá∫Áé∞Âú®„ÄäWebDAVÈ°∫Â∫èÈõÜÂçèËÆÆ„ÄãÔºàRFC 3658Ôºâ‰∏≠„ÄÇ 426 Upgrade Required ÂÆ¢Êà∑Á´ØÂ∫îÂΩìÂàáÊç¢Âà∞TLS/1.0„ÄÇÔºàRFC 2817Ôºâ 449 Retry With Áî±ÂæÆËΩØÊâ©Â±ïÔºå‰ª£Ë°®ËØ∑Ê±ÇÂ∫îÂΩìÂú®ÊâßË°åÂÆåÈÄÇÂΩìÁöÑÊìç‰ΩúÂêéËøõË°åÈáçËØï„ÄÇ 5Ô∏è‚É£‚ùå‚ùå üî¥üî¥üî¥ 5xxÊúçÂä°Âô®ÈîôËØØ ËøôÁ±ªÁä∂ÊÄÅÁ†Å‰ª£Ë°®‰∫ÜÊúçÂä°Âô®Âú®Â§ÑÁêÜËØ∑Ê±ÇÁöÑËøáÁ®ã‰∏≠ÊúâÈîôËØØÊàñËÄÖÂºÇÂ∏∏Áä∂ÊÄÅÂèëÁîüÔºå‰πüÊúâÂèØËÉΩÊòØÊúçÂä°Âô®ÊÑèËØÜÂà∞‰ª•ÂΩìÂâçÁöÑËΩØÁ°¨‰ª∂ËµÑÊ∫êÊó†Ê≥ïÂÆåÊàêÂØπËØ∑Ê±ÇÁöÑÂ§ÑÁêÜ„ÄÇÈô§ÈùûËøôÊòØ‰∏Ä‰∏™HEADËØ∑Ê±ÇÔºåÂê¶ÂàôÊúçÂä°Âô®Â∫îÂΩìÂåÖÂê´‰∏Ä‰∏™Ëß£ÈáäÂΩìÂâçÈîôËØØÁä∂ÊÄÅ‰ª•ÂèäËøô‰∏™Áä∂ÂÜµÊòØ‰∏¥Êó∂ÁöÑËøòÊòØÊ∞∏‰πÖÁöÑËß£Èáä‰ø°ÊÅØÂÆû‰Ωì„ÄÇÊµèËßàÂô®Â∫îÂΩìÂêëÁî®Êà∑Â±ïÁ§∫‰ªª‰ΩïÂú®ÂΩìÂâçÂìçÂ∫î‰∏≠Ë¢´ÂåÖÂê´ÁöÑÂÆû‰Ωì„ÄÇËøô‰∫õÁä∂ÊÄÅÁ†ÅÈÄÇÁî®‰∫é‰ªª‰ΩïÂìçÂ∫îÊñπÊ≥ï„ÄÇ 500 Internal Server Error ÊúçÂä°Âô®ÈÅáÂà∞‰∫Ü‰∏Ä‰∏™Êú™ÊõæÈ¢ÑÊñôÁöÑÁä∂ÂÜµÔºåÂØºËá¥‰∫ÜÂÆÉÊó†Ê≥ïÂÆåÊàêÂØπËØ∑Ê±ÇÁöÑÂ§ÑÁêÜ„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåËøô‰∏™ÈóÆÈ¢òÈÉΩ‰ºöÂú®ÊúçÂä°Âô®ÁöÑÁ®ãÂ∫èÁ†ÅÂá∫ÈîôÊó∂Âá∫Áé∞„ÄÇ 501 Not Implemented ÊúçÂä°Âô®‰∏çÊîØÊåÅÂΩìÂâçËØ∑Ê±ÇÊâÄÈúÄË¶ÅÁöÑÊüê‰∏™ÂäüËÉΩ„ÄÇÂΩìÊúçÂä°Âô®Êó†Ê≥ïËØÜÂà´ËØ∑Ê±ÇÁöÑÊñπÊ≥ïÔºåÂπ∂‰∏îÊó†Ê≥ïÊîØÊåÅÂÖ∂ÂØπ‰ªª‰ΩïËµÑÊ∫êÁöÑËØ∑Ê±Ç„ÄÇ 502 Bad Gateway ‰Ωú‰∏∫ÁΩëÂÖ≥ÊàñËÄÖ‰ª£ÁêÜÂ∑•‰ΩúÁöÑÊúçÂä°Âô®Â∞ùËØïÊâßË°åËØ∑Ê±ÇÊó∂Ôºå‰ªé‰∏äÊ∏∏ÊúçÂä°Âô®Êé•Êî∂Âà∞Êó†ÊïàÁöÑÂìçÂ∫î„ÄÇ 503 Service Unavailable Áî±‰∫é‰∏¥Êó∂ÁöÑÊúçÂä°Âô®Áª¥Êä§ÊàñËÄÖËøáËΩΩÔºåÊúçÂä°Âô®ÂΩìÂâçÊó†Ê≥ïÂ§ÑÁêÜËØ∑Ê±Ç„ÄÇËøô‰∏™Áä∂ÂÜµÊòØ‰∏¥Êó∂ÁöÑÔºåÂπ∂‰∏îÂ∞ÜÂú®‰∏ÄÊÆµÊó∂Èó¥‰ª•ÂêéÊÅ¢Â§ç„ÄÇÂ¶ÇÊûúËÉΩÂ§üÈ¢ÑËÆ°Âª∂ËøüÊó∂Èó¥ÔºåÈÇ£‰πàÂìçÂ∫î‰∏≠ÂèØ‰ª•ÂåÖÂê´‰∏Ä‰∏™Retry-AfterÂ§¥Áî®‰ª•Ê†áÊòéËøô‰∏™Âª∂ËøüÊó∂Èó¥„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÁªôÂá∫Ëøô‰∏™Retry-After‰ø°ÊÅØÔºåÈÇ£‰πàÂÆ¢Êà∑Á´ØÂ∫îÂΩì‰ª•Â§ÑÁêÜ500ÂìçÂ∫îÁöÑÊñπÂºèÂ§ÑÁêÜÂÆÉ„ÄÇ 504 Gateway Timeout ‰Ωú‰∏∫ÁΩëÂÖ≥ÊàñËÄÖ‰ª£ÁêÜÂ∑•‰ΩúÁöÑÊúçÂä°Âô®Â∞ùËØïÊâßË°åËØ∑Ê±ÇÊó∂ÔºåÊú™ËÉΩÂèäÊó∂‰ªé‰∏äÊ∏∏ÊúçÂä°Âô®ÔºàURIÊ†áËØÜÂá∫ÁöÑÊúçÂä°Âô®Ôºå‰æãÂ¶ÇHTTP„ÄÅFTP„ÄÅLDAPÔºâÊàñËÄÖËæÖÂä©ÊúçÂä°Âô®Ôºà‰æãÂ¶ÇDNSÔºâÊî∂Âà∞ÂìçÂ∫î„ÄÇ Ê≥®ÊÑèÔºöÊüê‰∫õ‰ª£ÁêÜÊúçÂä°Âô®Âú®DNSÊü•ËØ¢Ë∂ÖÊó∂Êó∂‰ºöËøîÂõû400ÊàñËÄÖ500ÈîôËØØ 505 HTTP Version Not Supported ÊúçÂä°Âô®‰∏çÊîØÊåÅÔºåÊàñËÄÖÊãíÁªùÊîØÊåÅÂú®ËØ∑Ê±Ç‰∏≠‰ΩøÁî®ÁöÑHTTPÁâàÊú¨„ÄÇËøôÊöóÁ§∫ÁùÄÊúçÂä°Âô®‰∏çËÉΩÊàñ‰∏çÊÑø‰ΩøÁî®‰∏éÂÆ¢Êà∑Á´ØÁõ∏ÂêåÁöÑÁâàÊú¨„ÄÇÂìçÂ∫î‰∏≠Â∫îÂΩìÂåÖÂê´‰∏Ä‰∏™ÊèèËø∞‰∫Ü‰∏∫‰ΩïÁâàÊú¨‰∏çË¢´ÊîØÊåÅ‰ª•ÂèäÊúçÂä°Âô®ÊîØÊåÅÂì™‰∫õÂçèËÆÆÁöÑÂÆû‰Ωì„ÄÇ 506 Variant Also Negotiates Áî±„ÄäÈÄèÊòéÂÜÖÂÆπÂçèÂïÜÂçèËÆÆ„ÄãÔºàRFC 2295ÔºâÊâ©Â±ïÔºå‰ª£Ë°®ÊúçÂä°Âô®Â≠òÂú®ÂÜÖÈÉ®ÈÖçÁΩÆÈîôËØØÔºöË¢´ËØ∑Ê±ÇÁöÑÂçèÂïÜÂèòÂÖÉËµÑÊ∫êË¢´ÈÖçÁΩÆ‰∏∫Âú®ÈÄèÊòéÂÜÖÂÆπÂçèÂïÜ‰∏≠‰ΩøÁî®Ëá™Â∑±ÔºåÂõ†Ê≠§Âú®‰∏Ä‰∏™ÂçèÂïÜÂ§ÑÁêÜ‰∏≠‰∏çÊòØ‰∏Ä‰∏™ÂêàÈÄÇÁöÑÈáçÁÇπ„ÄÇ 507 Insufficient Storage ÊúçÂä°Âô®Êó†Ê≥ïÂ≠òÂÇ®ÂÆåÊàêËØ∑Ê±ÇÊâÄÂøÖÈ°ªÁöÑÂÜÖÂÆπ„ÄÇËøô‰∏™Áä∂ÂÜµË¢´ËÆ§‰∏∫ÊòØ‰∏¥Êó∂ÁöÑ„ÄÇWebDAVÔºàRFC 4918Ôºâ 509 Bandwidth Limit Exceeded ÊúçÂä°Âô®ËææÂà∞Â∏¶ÂÆΩÈôêÂà∂„ÄÇËøô‰∏çÊòØ‰∏Ä‰∏™ÂÆòÊñπÁöÑÁä∂ÊÄÅÁ†ÅÔºå‰ΩÜÊòØ‰ªçË¢´ÂπøÊ≥õ‰ΩøÁî®„ÄÇ 510 Not Extended Ëé∑ÂèñËµÑÊ∫êÊâÄÈúÄË¶ÅÁöÑÁ≠ñÁï•Âπ∂Ê≤°ÊúâÊ≤°Êª°Ë∂≥„ÄÇ Posted by ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÂéüÂàõÊñáÁ´†ÔºåÁâàÊùÉÂ£∞ÊòéÔºöËá™Áî±ËΩ¨ËΩΩ-ÈùûÂïÜÁî®-ÈùûË°çÁîü-‰øùÊåÅÁΩ≤Âêç | Creative Commons BY-NC-ND 3.0","link":"/ÁºñÁ®ã/Ô£ø/http/"},{"title":"iOSÂáΩÊï∞ÂìçÂ∫îÂºèÁºñÁ®ã‰ª•ÂèäReactiveCocoaÁöÑ‰ΩøÁî®","text":"ÊâìÁÆóÂú®È°πÁõÆ‰∏≠Â§ßÈù¢ÁßØ‰ΩøÁî®RACÊù•ÂºÄÂèëÔºåÊâÄ‰ª•Êï¥ÁêÜ‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÂÆûË∑µËåÉ‰æãÂíåÊØîËæÉÂÆåÊï¥ÁöÑapiËØ¥ÊòéÊñπ‰æøÂºÄÂèëÊó∂ÈöèÊó∂Êü•ÈòÖ Â£∞ÊòéÂºèÁºñÁ®ãÊ≥õÂûãDeclarative programmingÂáΩÊï∞ÂèçÂ∫îÂºèÁºñÁ®ãÊòØÂ£∞ÊòéÂºèÁºñÁ®ãÁöÑÂ≠êÁºñÁ®ãËåÉÂºè‰πã‰∏Ä È´òÈò∂ÂáΩÊï∞ÈúÄË¶ÅÊª°Ë∂≥‰∏§‰∏™Êù°‰ª∂ ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÂáΩÊï∞‰Ωú‰∏∫ËæìÂÖ•„ÄÇ Êúâ‰∏î‰ªÖÊúâ‰∏Ä‰∏™ÂáΩÊï∞ËæìÂá∫„ÄÇ Objective-cÈáå‰ΩøÁî®block‰Ωú‰∏∫ÂáΩÊï∞ 1234[array enumerateObjectsUsingBlock:^(NSNumber *number, NSUInteger idx, BOOL *stop){ NSLog(@&quot;%@&quot;,number);}]; Êò†Â∞Ñmap123NSArray * mappedArray = [array rx_mapWithBlock:^id(id each){ return @(pow([each integerValue],2));}]; ËøáÊª§filter123NSArray *filteredArray = [array rx_filterWithBlock:^BOOL(id each){ return ([each integerValue] % 2 == 0);}] ÊäòÂè†fold12345[[array rx_mapWithBlock:^id (id each){ return [each stringValue]; }] rx_foldInitialValue:@&quot;&quot; block:^id (id memo , id each){ return [memo stringByAppendingString:each];}]; CurryingÁî®ÂáΩÊï∞ÁîüÊàêÂè¶‰∏Ä‰∏™ÂáΩÊï∞ 12345678910func filterGenerator(lastnameCondition: String) -&gt; (Staff) -&gt; (Bool) { return {staff in return staff.lastname == lastnameCondition }}let filterWang = filterGenerator(&quot;Wang&quot;) let filterHu = filterGenerator(&quot;Hu&quot;)staffs.filter(filterHu) RAC‰∏≠‰ΩøÁî®È´òÈò∂ÂáΩÊï∞Êò†Â∞Ñ12345678910111213NSArray *array = @[ @1, @2, @3 ];RACSequence * stream = [array rac_sequence];//RACSequenceÊòØ‰∏Ä‰∏™RACStreamÁöÑÂ≠êÁ±ª„ÄÇ[stream map:^id (id value){ return @(pow([value integerValue], 2));}];//RACSequenceÊúâ‰∏Ä‰∏™ÊñπÊ≥ïËøîÂõûÊï∞ÁªÑ:arrayNSLog(@&quot;%@&quot;,[stream array]);//ÈÅøÂÖçÊ±°ÊüìÂèòÈáèÁöÑ‰ΩúÁî®ÂüüNSLog(@&quot;%@&quot;,[[[array rac_sequence] map:^id (id value){ return @(pow([value integerValue], 2)); }] array]); ËøáÊª§123NSLog(@&quot;%@&quot;, [[[array rac_sequence] filter:^BOOL (id value){ return [value integerValue] % 2 == 0; }] array]); ÊäòÂè†12345NSLog(@&quot;%@&quot;,[[[array rac_sequence] map:^id (id value){ return [value stringValue]; }] foldLeftWithStart:@&quot;&quot; reduce:^id (id accumulator, id value){ return [accumulator stringByAppendingString:value]; }]); ÁªëÂÆöÈîÆÂÄº12345678910111213RACSignal * validEmailSignal = [self.textField.rac_textSignal map:^id (NSString *value){ return @([value rangeOfString:@&quot;@&quot;].location != NSNotFound);}];RAC(self.button, enabled) = validEmailSignal;RAC(self.textField, textColor) = [validEmailSignal map: ^id (id value){ if([value boolValue]){ return [UIColor greenColor]; }else{ return [UIColor redColor]; }}]; ÂÆûË∑µÊØîËæÉÂ•ΩÁöÑ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑRACÂÆûË∑µÁöÑ‰æãÂ≠êÔºöhttps://github.com/ashfurrow/FunctionalReactivePixels ÁΩëÁªúËØ∑Ê±ÇÁîüÊàêÂØπÂ∫îmodel12345678910111213141516171819202122232425262728+ (RACSignal *)importPhotos{ RACReplaySubject * subject = [RACReplaySubject subject]; NSURLRequest * request = [self popularURLRequest]; [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError){ if (data) { id results = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil]; [subject sendNext:[[[results[@&quot;photos&quot;] rac_sequence] map:^id(NSDictionary *photoDictionary){ FRPPhotoModel * model = [FRPPhotoModel new]; [self configurePhotoModel:model withDictionary:photoDictionary]; [self downloadThumbnailForPhotoModel:model]; return model; }] array]]; [subject sendCompleted]; } else{ [subject sendError:connectionError]; } }]; return subject;} ËøáÊª§Áõ∏ÂêåÂ§ßÂ∞èÁöÑÂõæÁâáÔºåÂèñÂá∫‰ªñ‰ª¨ÁöÑurlÔºåËøîÂõûÁ¨¨‰∏Ä‰∏™1234567+ (NSString *)urlForImageSize:(NSInteger)size inDictionary:(NSArray *)array{ return [[[[[array rac_sequence] filter:^ BOOL (NSDictionary * value){ return [value[@&quot;size&quot;] integerValue] == size; }] map:^id (id value){ return value[@&quot;url&quot;]; }] array] firstObject];} ËßÇÂØümodelÈáåÁöÑÂõæÁâáÊï∞ÊçÆÔºåËøõË°å‰∏∫Á©∫ËøáÊª§Âà§Êñ≠ÔºåÂ∞ÜdataËΩ¨‰∏∫UIImageÔºåÂÜçÊääÁªëÂÆöÊñ∞‰ø°Âè∑ÁöÑÂÄºÁªôÂØπË±°ÁöÑÂÖ≥ÈîÆË∑ØÂæÑ12345678- (void)setPhotoModel:(FRPPhotoModel *)photoModel{ self.subscription = [[[RACObserver(photoModel, thumbnailData) filter:^ BOOL (id value){ return value != nil; }] map:^id (id value){ return [UIImage imageWithData:value]; }] setKeyPath:@keypath(self.imageView, image) onObject:self.imageView];} UITableViewCellÂ§çÁî®Êó∂ÈúÄË¶ÅÂèñÊ∂àcell‰∏äÂêÑ‰∏™ÁªÑ‰ª∂ÁöÑËÆ¢ÈòÖ1234- (void)perpareForReuse { [super prepareForReuse]; [self.subscription dispose], self.subscription = nil;} DelegateÁöÑ‰ΩøÁî®123456789101112131415161718192021222324252627//Ê≥®ÊÑèÔºö‰Ω†ÂøÖÈ°ªretainËøô‰∏™delegateÂØπË±°ÔºåÂê¶Âàô‰ªñ‰ª¨Â∞Ü‰ºöË¢´ÈáäÊîæÔºå‰Ω†Â∞Ü‰ºöÂæóÂà∞‰∏Ä‰∏™EXC_BAD_ACCESSÂºÇÂ∏∏„ÄÇÊ∑ªÂä†‰∏ãÂàóÁßÅÊúâÂ±ûÊÄßÂà∞ÁîªÂªäËßÜÂõæÊéßÂà∂Âô®Ôºö@property (nonatomic, strong) id collectionViewDelegate;//ÂêåÊó∂‰Ω†‰πüÈúÄË¶ÅÂØºÂÖ•RACDelegateProxy.hÔºåÂõ†‰∏∫‰ªñ‰∏çÊòØReactiveCocoaÁöÑÊ†∏ÂøÉÈÉ®ÂàÜÔºå‰∏çÂåÖÂê´Âú®ReactiveCocoa.h‰∏≠„ÄÇRACDelegateProxy *viewControllerDelegate = [[RACDelegateProxy alloc] initWithProtocol:@protocol(FRPFullSizePhotoViewControllerDelegate)];[[viewControllerDelegate rac_signalForSelector:@selector(userDidScroll:toPhotoAtIndex:) fromProtocol:@protocol(FRPFullSizePhotoViewControllerDelegate)] subscribeNext:^(RACTuple *value){ @strongify(self); [self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:[value.second integerValue] inSection:0] atScrollPosition:UICollectionViewScrollPositionCenteredVertically animated:NO]; }];self.collectionViewDelegate = [[RACDelegateProxy alloc] initWithProtocol:@protocol(UICollectionViewDelegate)];[[self.collectionViewDelegate rac_signalForSelector:@selector(collectionView:didSelectItemAtIndexPath:)] subscribeNext:^(RACTuple *arguments) { @strongify(self); FRPFullSizePhotoViewController *viewController = [[FRPFullSizePhotoViewController alloc] initWithPhotoModels:self.photosArray currentPhotoIndex:[(NSIndexPath *)arguments.second item]]; viewController.delegate = (id&lt;FRPFullSizePhotoViewControllerDelegate&gt;)viewControllerDelegate; [self.navigationController pushViewController:viewController animated:YES]; }]; Â§ÑÁêÜÂºÇÂ∏∏ÔºåÂÆåÊàêÊâßË°åÂà∑Êñ∞Êìç‰ΩúÔºåÂºÇÂ∏∏ÊâìÂç∞Êó•ÂøóÔºåÊâßË°åÂØπÂ∫îÊñπÊ≥ï12345RAC(self, photosArray) = [[[[FRPPhotoImporter importPhotos] doCompleted:^{ @strongify(self); [self.collectionView reloadData]; }] logError] catchTo:[RACSignal empty]]; ÁΩëÁªúËØ∑Ê±ÇÂ§ÑÁêÜÊï∞ÊçÆÔºåËé∑ÂèñÊï∞ÊçÆËøîÂõû‰∏ªÁ∫øÁ®ã123456789101112131415161718192021+ (RACSignal *)importPhotos { NSURLRequest *request = [self popularURLRequest]; return [[[[[[NSURLConnection rac_sendAsynchronousRequest:request] reduceEach:^id(NSURLResponse *response , NSData *data){ //Ê≥®ÊÑèÔºöÊàë‰ª¨ÂèØ‰ª•Áî®‰∏ãÈù¢ÁöÑreduceEach:Êõø‰ª£‰ΩøÁî®RACTupleÁöÑÁ¨¨‰∏Ä‰∏™map:Ôºå‰ª•‰æøÊèê‰æõÁºñËØëÊó∂Ê£ÄÊü•„ÄÇ return data; }] deliverOn:[RACScheduler mainThreadScheduler]] map:^id (NSData *data) { id results = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil]; return [[[results[@&quot;photo&quot;] rac_sequence] map:^id (NSDictionary *photoDictionary) { FRPPhotoModel *model = [FRPPhotoModel new]; [self configurePhotoModel:model withDictionary:photoDictionary]; [self downloadThumbnailForPhotoModel:model]; return model; }] array]; }] publish] autoconnect]; //‰ø°Âè∑ÈìæÊù°ÊúÄÊú´Á´ØÁöÑ‰ø°Âè∑Êìç‰Ωúpublish. publishËøîÂõû‰∏Ä‰∏™RACMulitcastConnection,ÂΩì‰ø°Âè∑ËøûÊé•‰∏äÊó∂Ôºå‰ªñÂ∞ÜËÆ¢ÈòÖËØ•Êé•Êî∂‰ø°Âè∑„ÄÇautoconnect‰∏∫Êàë‰ª¨ÂÅöÁöÑÊòØÔºöÂΩìÂÆÉËøîÂõûÁöÑ‰ø°Âè∑Ë¢´ËÆ¢ÈòÖÔºåËøûÊé•Âà∞ ËØ•(ËÆ¢ÈòÖËÉåÂêéÁöÑ)‰ø°Âè∑Ôºàunderly signalÔºâ„ÄÇ} ‰ø°Âè∑ÁöÑ‰ø°Âè∑Signal of signalsÔºå‰∏Ä‰∏™Â§ñÈÉ®‰ø°Âè∑ÂåÖÂê´‰∏Ä‰∏™ÂÜÖÈÉ®‰ø°Âè∑ÔºåÂú®ËæìÂá∫‰ø°Âè∑ÁöÑsubscribeNext:Âùó‰∏≠ËÆ¢ÈòÖÂÜÖÈÉ®‰ø°Âè∑Ôºå‰ºöÂºïËµ∑ÂµåÂ•óÈ∫ªÁÉ¶„ÄÇ‰ΩøÁî®flattenMapÂêé‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ‰ø°Âè∑ÔºåÂíåÂÖàÂâç‰ø°Âè∑Âπ≥Á∫ßÔºåËÆ¢ÈòÖ‰ºöËÆ¢ÈòÖÂà∞ËøîÂõûÁöÑÊñ∞‰ø°Âè∑ÈáåÁöÑÂÄº„ÄÇmapÊñπÊ≥ï‰πüÊòØÂàõÂª∫‰∏Ä‰∏™Êñ∞‰ø°Âè∑Ôºå‰ΩÜÊòØ‰ºöÂ∞ÜËøîÂõûÁöÑ‰ø°Âè∑‰πüÂΩìÂÅöÂÄºÔºåËøôÊ†∑Â∞±Âæó‰∏çÂà∞ÁúüÊ≠£ÈúÄË¶ÅÁöÑÂÄº‰∫Ü„ÄÇ123456[[[self.signInButton rac_signalForControlEvents:UIControlEventTouchUpInside] flattenMap:^RACStream *(id value) { return [self signInSignal];}] subscribeNext:^(id x) { //x NSLog(@&quot;Sign in result: %@&quot;, x);}]; ‰∏çÂêå‰ø°Âè∑È°∫Â∫èÈìæÊé•ÔºåÁ®ãÂ∫èÈúÄË¶ÅÁ≠âÂæÖÂâç‰∏Ä‰∏™‰ø°Âè∑ÂèëÂá∫ÂÆåÊàê‰∫ã‰ª∂ÔºàsendCompletedÔºâÔºåÁÑ∂ÂêéÂÜçËÆ¢ÈòÖ‰∏ã‰∏Ä‰∏™‰ø°Âè∑ÔºàthenÔºâ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687- (RACSignal *)requestAccessToTwitterSignal{ // ÂÆö‰πâ‰∏Ä‰∏™ÈîôËØØÔºåÂ¶ÇÊûúÁî®Êà∑ÊãíÁªùËÆøÈóÆÂàôÂèëÈÄÅ NSError *accessError = [NSError errorWithDomain:RWTwitterInstantDomain code:RWTwitterInstantErrorAccessDenied userInfo:nil]; // ÂàõÂª∫Âπ∂ËøîÂõû‰ø°Âè∑ @weakify(self) return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { // ËØ∑Ê±ÇËÆøÈóÆtwitter @strongify(self) [self.accountStore requestAccessToAccountsWithType:self.twitterAccountType options:nil completion:^(BOOL granted, NSError *error) { // Â§ÑÁêÜÂìçÂ∫î if (!granted) { [subscriber sendError:accessError]; } else { [subscriber sendNext:nil]; [subscriber sendCompleted]; } }]; return nil; }];}//throttleÂèØ‰ª•ÈÅøÂÖçËøûÁª≠ËæìÂÖ•ÈÄ†ÊàêÁöÑ‰∏çÂøÖË¶ÅÁöÑËØ∑Ê±ÇÔºåthen‰ºöÂøΩÁï•Ââç‰∏Ä‰∏™‰ø°Âè∑ÁöÑÂÄºÔºåÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÊòØÂÖàËøáÊª§‰πãÂâç‰ø°Âè∑ÂèëÁöÑÂÄºÔºåÂÜç‰ΩøÁî®concatËøûÊé•thenËøîÂõûÁöÑ‰ø°Âè∑„ÄÇ[[[[[[[self requestAccessToTwitterSignal] then:^RACSignal *{ @strongify(self) return self.searchText.rac_textSignal; }] filter:^BOOL(NSString *text) { @strongify(self) return [self isValidSearchText:text]; }] throttle:0.5] flattenMap:^RACStream *(NSString *text) { @strongify(self) //flattenMapÊù•Â∞ÜÊØè‰∏™next‰∫ã‰ª∂Êò†Â∞ÑÂà∞‰∏Ä‰∏™Êñ∞ÁöÑË¢´ËÆ¢ÈòÖÁöÑ‰ø°Âè∑ return [self signalForSearchWithText:text]; }] deliverOn:[RACScheduler mainThreadScheduler]] subscribeNext:^(NSDictionary *jsonSearchResult) { NSArray *statuses = jsonSearchResult[@&quot;statuses&quot;]; NSArray *tweets = [statuses linq_select:^id(id tweet) { return [RWTweet tweetWithStatus:tweet]; }]; [self.resultsViewController displayTweets:tweets]; } error:^(NSError *error) { NSLog(@&quot;An error occurred: %@&quot;, error); }]; - (RACSignal *)signalForSearchWithText:(NSString *)text { // 1 - define the errors NSError *noAccountsError = [NSError errorWithDomain:RWTwitterInstantDomain code:RWTwitterInstantErrorNoTwitterAccounts userInfo:nil]; NSError *invalidResponseError = [NSError errorWithDomain:RWTwitterInstantDomain code:RWTwitterInstantErrorInvalidResponse userInfo:nil]; @weakify(self) return [RACSignal createSignal:^RACDisposable *(id subscriber) { @strongify(self); SLRequest *request = [self requestforTwitterSearchWithText:text]; NSArray *twitterAccounts = [self.accountStore accountsWithAccountType:self.twitterAccountType]; if (twitterAccounts.count == 0) { [subscriber sendError:noAccountsError]; } else { [request setAccount:[twitterAccounts lastObject]]; [request performRequestWithHandler: ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) { if (urlResponse.statusCode == 200) { NSDictionary *timelineData = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingAllowFragments error:nil]; [subscriber sendNext:timelineData]; [subscriber sendCompleted]; } else { [subscriber sendError:invalidResponseError]; } }]; } return nil; }];} ÂºÇÊ≠•Âä†ËΩΩÂõæÁâá1234567891011121314151617181920-(RACSignal *)signalForLoadingImage:(NSString *)imageUrl { RACScheduler *scheduler = [RACScheduler schedulerWithPriority:RACSchedulerPriorityBackground]; return [[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrl]]; UIImage *image = [UIImage imageWithData:data]; [subscriber sendNext:image]; [subscriber sendCompleted]; return nil; }] subscribeOn:scheduler];}cell.twitterAvatarView.image = nil;[[[self signalForLoadingImage:tweet.profileImageUrl] deliverOn:[RACScheduler mainThreadScheduler]] subscribeNext:^(UIImage *image) { cell.twitterAvatarView.image = image; }]; ËßÇÂØüviewModelÈáåÁöÑtableViewÁöÑÊï∞ÊçÆÈîÆÂÄºÂíåÂÖ®ÈÉ®ËØªÂèñÈîÆÂÄºÔºåÂè™Ë¶ÅÊúâ‰∏Ä‰∏™ÊúâÊñ∞ÂÄºÂ∞±‰ºöË∞ÉÁî®123456789@weakify(self);[[[RACSignal merge: @[RACObserve(self.viewModel, tweets), RACObserve(self.viewModel, allTweetsLoaded)]] bufferWithTime: 0 onScheduler: [RACScheduler mainThreadScheduler]] subscribeNext: ^(id value) { @strongify(self); [self.tableView reloadData]; }];//bufferWithTimeËÆæÁΩÆ‰∏∫0ÊòØ‰∏∫‰∫ÜÈÅøÂÖçÂêå‰∏ÄÊó∂Âàª‰∏§‰∏™ÂÄºË¢´ÂêåÊó∂ËÆæÁΩÆÊñ∞ÂÄº‰∫ßÁîü‰∫ÜtableËøõË°å‰∫Ü‰∏§Ê¨°reloadData Â∞ÅË£ÖhookÊñπÊ≥ïÔºåÊüê‰∏™selectorË¢´Ë∞ÉÁî®Êó∂ÔºåÂÜçÊâßË°å‰∏ÄÊÆµÊåáÂÆö‰ª£Á†ÅÂíåhook‰∏ÄÊ†∑„ÄÇ12345@weakify(self);[[tableView rac_signalForSelector:@selector(layoutSubviews)]subscribeNext:^(id x) { @strongify(self); [self doSomethingBeforeTableViewLayoutSubviews];}]; ‰ΩøÁî®RACCommandÊù•ÂÆûÁé∞ÊåâÈíÆÁöÑÁä∂ÊÄÅÊ†πÊçÆËæìÂÖ•ÈÇÆÁÆ±Âà§Êñ≠ÈÇÆÁÆ±ÊòØÂê¶ÈùûÊ≥ïËøòÊúâÊèê‰∫§Âà∞ÊúçÂä°Âô®ÂêéÂá∫ÈîôÂ§ÑÁêÜÁ≠âDemoÁöÑgithubÂú∞ÂùÄÔºöhttps://github.com/olegam/RACCommandExample 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980- (void)bindWithViewModel { RAC(self.viewModel, email) =self.emailTextField.rac_textSignal; self.subscribeButton.rac_command = self.viewModel.subscribeCommand; RAC(self.statusLabel, text) =RACObserve(self.viewModel, statusMessage); }@interface SubscribeViewModel :NSObject @property(nonatomic, strong)RACCommand *subscribeCommand; // writeto this property @property(nonatomic, strong) NSString *email; // read from this property @property(nonatomic, strong) NSString *statusMessage; @end #import &quot;SubscribeViewModel.h&quot; #import &quot;AFHTTPRequestOperationManager+RACSupport.h&quot; #import&quot;NSString+EmailAdditions.h&quot; static NSString *const kSubscribeURL =@&quot;https://reactivetest.apiary.io/subscribers&quot;; @interface SubscribeViewModel () @property(nonatomic, strong) RACSignal*emailValidSignal; @end @implementation SubscribeViewModel - (id)init { self= [super init]; if(self) { [self mapSubscribeCommandStateToStatusMessage]; } returnself; } -(void)mapSubscribeCommandStateToStatusMessage { RACSignal *startedMessageSource = [self.subscribeCommand.executionSignals map:^id(RACSignal *subscribeSignal) { return NSLocalizedString(@&quot;Sending request...&quot;, nil); }]; RACSignal *completedMessageSource = [self.subscribeCommand.executionSignals flattenMap:^RACStream *(RACSignal *subscribeSignal) { return[[[subscribeSignal materialize] filter:^BOOL(RACEvent *event) { return event.eventType == RACEventTypeCompleted; }] map:^id(id value) { return NSLocalizedString(@&quot;Thanks&quot;, nil); }]; }]; RACSignal*failedMessageSource = [[self.subscribeCommand.errors subscribeOn:[RACSchedulermainThreadScheduler]] map:^id(NSError *error) { return NSLocalizedString(@&quot;Error :(&quot;, nil); }]; RAC(self,statusMessage) = [RACSignal merge:@[startedMessageSource, completedMessageSource, failedMessageSource]]; } - (RACCommand *)subscribeCommand { if(!_subscribeCommand) { @weakify(self); _subscribeCommand = [[RACCommand alloc] initWithEnabled:self.emailValidSignal signalBlock:^RACSignal *(id input) { @strongify(self); return [SubscribeViewModel postEmail:self.email]; }]; } return _subscribeCommand; } + (RACSignal *)postEmail:(NSString *)email{ AFHTTPRequestOperationManager*manager = [AFHTTPRequestOperationManager manager]; manager.requestSerializer= [AFJSONRequestSerializer new]; NSDictionary*body = @{@&quot;email&quot;: email ?: @&quot;&quot;}; return [[[manager rac_POST:kSubscribeURL parameters:body] logError] replayLazily]; } - (RACSignal *)emailValidSignal { if(!_emailValidSignal) { _emailValidSignal= [RACObserve(self, email) map:^id(NSString *email) { return@([email isValidEmail]); }]; } return _emailValidSignal; } @end ÊõøÊç¢DelegateÔºåÁõ¥Êé•‰ΩøÁî®RACSubjectRACÂÜÖÂ≠òÁÆ°ÁêÜRAC‰ºöÁª¥Êä§‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑ‰ø°Âè∑ÈõÜÂêàÔºå‰∏Ä‰∏™ÊàñÂ§ö‰∫é‰∏Ä‰∏™ËÆ¢ÈòÖËÄÖÂ∞±ÂèØÁî®ÔºåÊâÄÊúâËÆ¢ÈòÖËÄÖÈÉΩË¢´ÁßªÈô§‰∫ÜÔºå‰ø°Âè∑Â∞±Ë¢´ÈáäÊîæ‰∫Ü„ÄÇ RACÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂÜÖÂ≠òÈóÆÈ¢òÂÆèÂÆö‰πâ12345678910111213141516- (void)viewDidLoad{ [super viewDidLoad]; RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { //1 MTModel *model = [[MTModel alloc] init]; // MTModelÊúâ‰∏Ä‰∏™Âêç‰∏∫ÁöÑtitleÁöÑÂ±ûÊÄß [subscriber sendNext:model]; [subscriber sendCompleted]; return nil; }]; self.flattenMapSignal = [signal flattenMap:^RACStream *(MTModel *model) { //2 return RACObserve(model, title); }]; [self.flattenMapSignal subscribeNext:^(id x) { //3 NSLog(@&quot;subscribeNext - %@&quot;, x); }];} ‰∏äÈù¢ÁöÑRACObserve‰ºöÂºïËµ∑ÂºïÁî®‰∏çÈáäÊîæÁöÑÈóÆÈ¢òÔºåÈÄöËøáRACObserveÁöÑÂÆö‰πâÊù•ÁúãÁúãÔºåÈáåÈù¢‰ºöÂØπselfËøõË°åÊåÅÊúâ„ÄÇ 12345678#define RACObserve(TARGET, KEYPATH) \\ ({ \\ _Pragma(&quot;clang diagnostic push&quot;) \\ _Pragma(&quot;clang diagnostic ignored \\&quot;-Wreceiver-is-weak\\&quot;&quot;) \\ __weak id target_ = (TARGET); \\ [target_ rac_valuesForKeyPath:@keypath(TARGET, KEYPATH) observer:self]; \\ _Pragma(&quot;clang diagnostic pop&quot;) \\ }) SubjectÂØπsubjectËøõË°åmapËøôÊ†∑ÁöÑÊìç‰ΩúÔºåËøôÊó∂Â∞±ÈúÄË¶ÅsendCompleted 1234567891011121314- (void)viewDidLoad { [super viewDidLoad]; RACSubject *subject = [RACSubject subject]; [subject.rac_willDeallocSignal subscribeCompleted:^{ NSLog(@&quot;subject dealloc&quot;); }]; [[subject map:^id(NSNumber *value) { return @([value integerValue] * 3); }] subscribeNext:^(id x) { NSLog(@&quot;next = %@&quot;, x); }]; [subject sendNext:@1]; } ‰ΩÜÊòØ‰∏∫‰ªÄ‰πàsignalËøõË°åmapÊìç‰ΩúÔºå‰∏çsendCompletedËÄå‰∏ç‰ºöÂÜÖÂ≠òÊ≥ÑÊºèÂë¢„ÄÇÂõ†‰∏∫Ë∞ÉÂà∞bindÁöÑÊØîÂ¶Çmap„ÄÅfilter„ÄÅmerge„ÄÅcombineLatest„ÄÅflattenMapÁ≠âÊìç‰ΩúÂ¶ÇÊûúÊòØRACSubjectËøôÊ†∑‰ºöÊåÅÊúâËÆ¢ÈòÖËÄÖÁöÑ‰ø°Âè∑‰ºö‰∫ßÁîüÂÜÖÂ≠òÊ≥ÑÊºèÈúÄË¶ÅsendCompleted„ÄÇÂèØ‰ª•ÂÖàÁúãÁúãbindÁöÑÂÆûÁé∞ 1234567891011121314151617181920- (RACSignal *)bind:(RACStreamBindBlock (^)(void))block { NSCParameterAssert(block != NULL); /* * -bind: should: * * 1. Subscribe to the original signal of values. * 2. Any time the original signal sends a value, transform it using the binding block. * 3. If the binding block returns a signal, subscribe to it, and pass all of its values through to the subscriber as they&apos;re received. * 4. If the binding block asks the bind to terminate, complete the _original_ signal. * 5. When _all_ signals complete, send completed to the subscriber. * * If any signal sends an error at any point, send that to the subscriber. */ return [[RACSignal createSignal:^(id&lt;RACSubscriber&gt; subscriber) { RACStreamBindBlock bindingBlock = block(); NSMutableArray *signals = [NSMutableArray arrayWithObject:self]; // Ê≠§Â§ÑÁúÅÁï•‰∫Ü80Ë°å‰ª£Á†Å // ... }] setNameWithFormat:@&quot;[%@] -bind:&quot;, self.name];} didSubscribeÁöÑÂºÄÂ§¥ÔºåÂ∞±ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑsignalsÔºåÂπ∂‰∏îÊåÅÊúâ‰∫ÜselfÔºå‰πüÂ∞±ÊòØÊ∫ê‰ø°Âè∑Ôºå‰πüÂ∞±ÊòØËÆ¢ÈòÖËÄÖÊåÅÊúâ‰∫Ü‰ø°Âè∑ÔºåÂ¶ÇÊûúÊòØSubjectÈÇ£‰πàËøôÁßç‰ø°Âè∑Âèà‰ºöÊåÅÊúâËÆ¢ÈòÖËÄÖÔºåËøôÊ†∑Â∞±ÂΩ¢Êàê‰∫ÜÂæ™ÁéØÂºïÁî®„ÄÇ ‰∏ãÈù¢ÁúãÁúãsendCompletedÂ¶Ç‰Ωï‰øÆÂ§çÁöÑÂÜÖÂ≠òÊ≥ÑÊºè 12345678910111213void (^completeSignal)(RACSignal *, RACDisposable *) = ^(RACSignal *signal, RACDisposable *finishedDisposable) { BOOL removeDisposable = NO; @synchronized (signals) { [signals removeObject:signal]; //1 if (signals.count == 0) { [subscriber sendCompleted]; //2 [compoundDisposable dispose]; //3 } else { removeDisposable = YES; } } if (removeDisposable) [compoundDisposable removeDisposable:finishedDisposable]; //4}; ‰ªésignalsËøô‰∏™Êï∞ÁªÑ‰∏≠ÁßªÈô§‰º†ÂÖ•ÁöÑsignalÔºå‰πüÂ∞±ÊòØËÆ©ËÆ¢ÈòÖÁöÑsignal‰∏ç‰ºöÊåÅÊúâsubjectËøôÁßç‰ø°Âè∑„ÄÇ ËøòÊúâreplayËøôÊ†∑ÁöÑÊìç‰ΩúÔºåÂõ†‰∏∫Ëøô‰∏™ÊñπÊ≥ïËøîÂõûÁöÑÊòØ‰∏Ä‰∏™RACReplaySubject 12345678910111213RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { [subscriber sendNext:@1]; [subscriber sendCompleted]; // ‰øùËØÅÊ∫ê‰ø°Âè∑ÂèëÈÄÅÂÆåÊàê return nil;}];RACSignal *replaySignal = [signal replay]; // ËøôÈáåËøîÂõûÁöÑÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™RACReplaySubject[[replaySignal map:^id(NSNumber *value) { return @([value integerValue] * 3);}] subscribeNext:^(id x) { NSLog(@&quot;subscribeNext - %@&quot;, x);}]; ÁÉ≠‰ø°Âè∑ÂÜ∑‰ø°Âè∑ ÁÉ≠‰ø°Âè∑ÊòØ‰∏ªÂä®ÁöÑÔºå‰∏çËÆ¢ÈòÖ‰πüËÉΩÂ§üÊåâÊó∂ÂèëÈÄÅ„ÄÇÂÜ∑‰ø°Âè∑ÊòØË¢´Âä®ÁöÑÔºåÂè™ÊúâËÆ¢ÈòÖÊâç‰ºöÂèëÈÄÅ„ÄÇ ÁÉ≠‰ø°Âè∑ÂèØ‰ª•ÊúâÂ§ö‰∏™ËÆ¢ÈòÖËÄÖ„ÄÇÂÜ∑‰ø°Âè∑Âè™ËÉΩÂ§ü‰∏ÄÂØπ‰∏ÄÔºåÊúâ‰∏çÂêåËÆ¢ÈòÖËÄÖÔºåÊ∂àÊÅØ‰ºö‰ªéÊñ∞ÂÆåÊï¥ÂèëÈÄÅ„ÄÇ RACÁöÑAPIÊâãÂÜåÂ∏∏ËßÅÁ±ªRACSiganl ‰ø°Âè∑Á±ª„ÄÇ RACEmptySignal ÔºöÁ©∫‰ø°Âè∑ÔºåÁî®Êù•ÂÆûÁé∞ RACSignal ÁöÑ +empty ÊñπÊ≥ïÔºõ RACReturnSignal Ôºö‰∏ÄÂÖÉ‰ø°Âè∑ÔºåÁî®Êù•ÂÆûÁé∞ RACSignal ÁöÑ +return: ÊñπÊ≥ïÔºõ RACDynamicSignal ÔºöÂä®ÊÄÅ‰ø°Âè∑Ôºå‰ΩøÁî®‰∏Ä‰∏™ block - Êù•ÂÆûÁé∞ËÆ¢ÈòÖË°å‰∏∫ÔºåÊàë‰ª¨Âú®‰ΩøÁî® RACSignal ÁöÑ +createSignal: ÊñπÊ≥ïÊó∂ÂàõÂª∫ÁöÑÂ∞±ÊòØËØ•Á±ªÁöÑÂÆû‰æãÔºõ RACErrorSignal ÔºöÈîôËØØ‰ø°Âè∑ÔºåÁî®Êù•ÂÆûÁé∞ RACSignal ÁöÑ +error: ÊñπÊ≥ïÔºõ RACChannelTerminal ÔºöÈÄöÈÅìÁªàÁ´ØÔºå‰ª£Ë°® RACChannel ÁöÑ‰∏Ä‰∏™ÁªàÁ´ØÔºåÁî®Êù•ÂÆûÁé∞ÂèåÂêëÁªëÂÆö„ÄÇ RACSubscriber ËÆ¢ÈòÖËÄÖRACDisposable Áî®‰∫éÂèñÊ∂àËÆ¢ÈòÖÊàñËÄÖÊ∏ÖÁêÜËµÑÊ∫êÔºåÂΩì‰ø°Âè∑ÂèëÈÄÅÂÆåÊàêÊàñËÄÖÂèëÈÄÅÈîôËØØÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöËá™Âä®Ëß¶ÂèëÂÆÉ„ÄÇ RACSerialDisposable Ôºö‰Ωú‰∏∫ disposable ÁöÑÂÆπÂô®‰ΩøÁî®ÔºåÂèØ‰ª•ÂåÖÂê´‰∏Ä‰∏™ disposable ÂØπË±°ÔºåÂπ∂‰∏îÂÖÅËÆ∏Â∞ÜËøô‰∏™ disposable ÂØπË±°ÈÄöËøáÂéüÂ≠êÊìç‰Ωú‰∫§Êç¢Âá∫Êù•Ôºõ RACKVOTrampoline Ôºö‰ª£Ë°®‰∏ÄÊ¨° KVO ËßÇÂØüÔºåÂπ∂‰∏îÂèØ‰ª•Áî®Êù•ÂÅúÊ≠¢ËßÇÂØüÔºõ RACCompoundDisposable ÔºöÂÆÉÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™ disposable ÂØπË±°ÔºåÂπ∂‰∏îÊîØÊåÅÊâãÂä®Ê∑ªÂä†ÂíåÁßªÈô§ disposable ÂØπË±° RACScopedDisposable ÔºöÂΩìÂÆÉË¢´ dealloc ÁöÑÊó∂ÂÄôË∞ÉÁî®Êú¨Ë∫´ÁöÑ -dispose ÊñπÊ≥ï„ÄÇ RACSubject ‰ø°Âè∑Êèê‰æõËÄÖÔºåËá™Â∑±ÂèØ‰ª•ÂÖÖÂΩì‰ø°Âè∑ÔºåÂèàËÉΩÂèëÈÄÅ‰ø°Âè∑„ÄÇËÆ¢ÈòÖÂêéÂèëÈÄÅ RACGroupedSignal ÔºöÂàÜÁªÑ‰ø°Âè∑ÔºåÁî®Êù•ÂÆûÁé∞ RACSignal ÁöÑÂàÜÁªÑÂäüËÉΩÔºõ RACBehaviorSubject ÔºöÈáçÊºîÊúÄÂêéÂÄºÁöÑ‰ø°Âè∑ÔºåÂΩìË¢´ËÆ¢ÈòÖÊó∂Ôºå‰ºöÂêëËÆ¢ÈòÖËÄÖÂèëÈÄÅÂÆÉÊúÄÂêéÊé•Êî∂Âà∞ÁöÑÂÄºÔºõ RACReplaySubject ÔºöÈáçÊºî‰ø°Âè∑Ôºå‰øùÂ≠òÂèëÈÄÅËøáÁöÑÂÄºÔºåÂΩìË¢´ËÆ¢ÈòÖÊó∂Ôºå‰ºöÂêëËÆ¢ÈòÖËÄÖÈáçÊñ∞ÂèëÈÄÅËøô‰∫õÂÄº„ÄÇÂèØ‰ª•ÂÖàÂèëÈÄÅÂêéËÆ¢ÈòÖ RACTuple ÂÖÉÁªÑÁ±ª,Á±ª‰ººNSArray,Áî®Êù•ÂåÖË£ÖÂÄº.RACSequence RAC‰∏≠ÁöÑÈõÜÂêàÁ±ªRACCommand RAC‰∏≠Áî®‰∫éÂ§ÑÁêÜ‰∫ã‰ª∂ÁöÑÁ±ªÔºåÂèØ‰ª•Êää‰∫ã‰ª∂Â¶Ç‰ΩïÂ§ÑÁêÜ,‰∫ã‰ª∂‰∏≠ÁöÑÊï∞ÊçÆÂ¶Ç‰Ωï‰º†ÈÄíÔºåÂåÖË£ÖÂà∞Ëøô‰∏™Á±ª‰∏≠Ôºå‰ªñÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÁõëÊéß‰∫ã‰ª∂ÁöÑÊâßË°åËøáÁ®ã„ÄÇRACMulticastConnection Áî®‰∫éÂΩì‰∏Ä‰∏™‰ø°Âè∑ÔºåË¢´Â§öÊ¨°ËÆ¢ÈòÖÊó∂Ôºå‰∏∫‰∫Ü‰øùËØÅÂàõÂª∫‰ø°Âè∑Êó∂ÔºåÈÅøÂÖçÂ§öÊ¨°Ë∞ÉÁî®ÂàõÂª∫‰ø°Âè∑‰∏≠ÁöÑblockÔºåÈÄ†ÊàêÂâØ‰ΩúÁî®ÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™Á±ªÂ§ÑÁêÜ„ÄÇRACScheduler RAC‰∏≠ÁöÑÈòüÂàóÔºåÁî®GCDÂ∞ÅË£ÖÁöÑ„ÄÇ RACImmediateScheduler ÔºöÁ´ãÂç≥ÊâßË°åË∞ÉÂ∫¶ÁöÑ‰ªªÂä°ÔºåËøôÊòØÂîØ‰∏Ä‰∏Ä‰∏™ÊîØÊåÅÂêåÊ≠•ÊâßË°åÁöÑË∞ÉÂ∫¶Âô®Ôºõ RACQueueScheduler Ôºö‰∏Ä‰∏™ÊäΩË±°ÁöÑÈòüÂàóË∞ÉÂ∫¶Âô®ÔºåÂú®‰∏Ä‰∏™ GCD ‰∏≤Ë°åÂàóÈòü‰∏≠ÂºÇÊ≠•Ë∞ÉÂ∫¶ÊâÄÊúâ‰ªªÂä°Ôºõ RACTargetQueueScheduler ÔºöÁªßÊâøËá™ RACQueueScheduler ÔºåÂú®‰∏Ä‰∏™‰ª•‰∏Ä‰∏™‰ªªÊÑèÁöÑ GCD ÈòüÂàó‰∏∫ target ÁöÑ‰∏≤Ë°åÈòüÂàó‰∏≠ÂºÇÊ≠•Ë∞ÉÂ∫¶ÊâÄÊúâ‰ªªÂä°Ôºõ RACSubscriptionScheduler Ôºö‰∏Ä‰∏™Âè™Áî®Êù•Ë∞ÉÂ∫¶ËÆ¢ÈòÖÁöÑË∞ÉÂ∫¶Âô®„ÄÇ Â∏∏ËßÅÁî®Ê≥ï rac_signalForSelector : ‰ª£Êõø‰ª£ÁêÜ rac_valuesAndChangesForKeyPath: KVO rac_signalForControlEvents:ÁõëÂê¨‰∫ã‰ª∂ rac_addObserverForName ‰ª£ÊõøÈÄöÁü• rac_textSignalÔºöÁõëÂê¨ÊñáÊú¨Ê°ÜÊñáÂ≠óÊîπÂèò rac_liftSelector:withSignalsFromArray:Signals:ÂΩì‰º†ÂÖ•ÁöÑSignals(‰ø°Âè∑Êï∞ÁªÑ)ÔºåÊØè‰∏Ä‰∏™signalÈÉΩËá≥Â∞ësendNextËøá‰∏ÄÊ¨°ÔºåÂ∞±‰ºöÂéªËß¶ÂèëÁ¨¨‰∏Ä‰∏™selectorÂèÇÊï∞ÁöÑÊñπÊ≥ï„ÄÇ Â∏∏ËßÅÂÆè RAC(TARGET, [KEYPATH, [NIL_VALUE]])ÔºöÁî®‰∫éÁªôÊüê‰∏™ÂØπË±°ÁöÑÊüê‰∏™Â±ûÊÄßÁªëÂÆö RACObserve(self, name) ÔºöÁõëÂê¨Êüê‰∏™ÂØπË±°ÁöÑÊüê‰∏™Â±ûÊÄß,ËøîÂõûÁöÑÊòØ‰ø°Âè∑„ÄÇ @weakify(Obj)Âíå@strongify(Obj) RACTuplePack ÔºöÊääÊï∞ÊçÆÂåÖË£ÖÊàêRACTupleÔºàÂÖÉÁªÑÁ±ªÔºâ RACTupleUnpackÔºöÊääRACTupleÔºàÂÖÉÁªÑÁ±ªÔºâËß£ÂåÖÊàêÂØπÂ∫îÁöÑÊï∞ÊçÆ RACChannelTo Áî®‰∫éÂèåÂêëÁªëÂÆöÁöÑ‰∏Ä‰∏™ÁªàÁ´Ø Â∏∏Áî®Êìç‰ΩúÊñπÊ≥ï flattenMap map Áî®‰∫éÊääÊ∫ê‰ø°Âè∑ÂÜÖÂÆπÊò†Â∞ÑÊàêÊñ∞ÁöÑÂÜÖÂÆπ„ÄÇ concat ÁªÑÂêà Êåâ‰∏ÄÂÆöÈ°∫Â∫èÊãºÊé•‰ø°Âè∑ÔºåÂΩìÂ§ö‰∏™‰ø°Âè∑ÂèëÂá∫ÁöÑÊó∂ÂÄôÔºåÊúâÈ°∫Â∫èÁöÑÊé•Êî∂‰ø°Âè∑ then Áî®‰∫éËøûÊé•‰∏§‰∏™‰ø°Âè∑ÔºåÂΩìÁ¨¨‰∏Ä‰∏™‰ø°Âè∑ÂÆåÊàêÔºåÊâç‰ºöËøûÊé•thenËøîÂõûÁöÑ‰ø°Âè∑„ÄÇ merge ÊääÂ§ö‰∏™‰ø°Âè∑ÂêàÂπ∂‰∏∫‰∏Ä‰∏™‰ø°Âè∑Ôºå‰ªª‰Ωï‰∏Ä‰∏™‰ø°Âè∑ÊúâÊñ∞ÂÄºÁöÑÊó∂ÂÄôÂ∞±‰ºöË∞ÉÁî® zipWith Êää‰∏§‰∏™‰ø°Âè∑ÂéãÁº©Êàê‰∏Ä‰∏™‰ø°Âè∑ÔºåÂè™ÊúâÂΩì‰∏§‰∏™‰ø°Âè∑ÂêåÊó∂ÂèëÂá∫‰ø°Âè∑ÂÜÖÂÆπÊó∂ÔºåÂπ∂‰∏îÊää‰∏§‰∏™‰ø°Âè∑ÁöÑÂÜÖÂÆπÂêàÂπ∂Êàê‰∏Ä‰∏™ÂÖÉÁªÑÔºåÊâç‰ºöËß¶ÂèëÂéãÁº©ÊµÅÁöÑnext‰∫ã‰ª∂„ÄÇ combineLatest:Â∞ÜÂ§ö‰∏™‰ø°Âè∑ÂêàÂπ∂Ëµ∑Êù•ÔºåÂπ∂‰∏îÊãøÂà∞ÂêÑ‰∏™‰ø°Âè∑ÁöÑÊúÄÊñ∞ÁöÑÂÄº,ÂøÖÈ°ªÊØè‰∏™ÂêàÂπ∂ÁöÑsignalËá≥Â∞ëÈÉΩÊúâËøá‰∏ÄÊ¨°sendNextÔºåÊâç‰ºöËß¶ÂèëÂêàÂπ∂ÁöÑ‰ø°Âè∑„ÄÇ reduceËÅöÂêà:Áî®‰∫é‰ø°Âè∑ÂèëÂá∫ÁöÑÂÜÖÂÆπÊòØÂÖÉÁªÑÔºåÊää‰ø°Âè∑ÂèëÂá∫ÂÖÉÁªÑÁöÑÂÄºËÅöÂêàÊàê‰∏Ä‰∏™ÂÄº filter:ËøáÊª§‰ø°Âè∑Ôºå‰ΩøÁî®ÂÆÉÂèØ‰ª•Ëé∑ÂèñÊª°Ë∂≥Êù°‰ª∂ÁöÑ‰ø°Âè∑. ignore:ÂøΩÁï•ÂÆåÊüê‰∫õÂÄºÁöÑ‰ø°Âè∑. distinctUntilChanged:ÂΩì‰∏ä‰∏ÄÊ¨°ÁöÑÂÄºÂíåÂΩìÂâçÁöÑÂÄºÊúâÊòéÊòæÁöÑÂèòÂåñÂ∞±‰ºöÂèëÂá∫‰ø°Âè∑ÔºåÂê¶Âàô‰ºöË¢´ÂøΩÁï•Êéâ„ÄÇ take:‰ªéÂºÄÂßã‰∏ÄÂÖ±ÂèñNÊ¨°ÁöÑ‰ø°Âè∑ takeLast:ÂèñÊúÄÂêéNÊ¨°ÁöÑ‰ø°Âè∑,ÂâçÊèêÊù°‰ª∂ÔºåËÆ¢ÈòÖËÄÖÂøÖÈ°ªË∞ÉÁî®ÂÆåÊàêÔºåÂõ†‰∏∫Âè™ÊúâÂÆåÊàêÔºåÂ∞±Áü•ÈÅìÊÄªÂÖ±ÊúâÂ§öÂ∞ë‰ø°Âè∑. takeUntil:(RACSignal *):Ëé∑Âèñ‰ø°Âè∑Áõ¥Âà∞Êüê‰∏™‰ø°Âè∑ÊâßË°åÂÆåÊàê skip:(NSUInteger):Ë∑≥ËøáÂá†‰∏™‰ø°Âè∑,‰∏çÊé•Âèó„ÄÇ switchToLatest:Áî®‰∫ésignalOfSignalsÔºà‰ø°Âè∑ÁöÑ‰ø°Âè∑ÔºâÔºåÊúâÊó∂ÂÄô‰ø°Âè∑‰πü‰ºöÂèëÂá∫‰ø°Âè∑Ôºå‰ºöÂú®signalOfSignals‰∏≠ÔºåËé∑ÂèñsignalOfSignalsÂèëÈÄÅÁöÑÊúÄÊñ∞‰ø°Âè∑„ÄÇ doNext: ÊâßË°åNext‰πãÂâçÔºå‰ºöÂÖàÊâßË°åËøô‰∏™Block doCompleted: ÊâßË°åsendCompleted‰πãÂâçÔºå‰ºöÂÖàÊâßË°åËøô‰∏™Block timeoutÔºöË∂ÖÊó∂ÔºåÂèØ‰ª•ËÆ©‰∏Ä‰∏™‰ø°Âè∑Âú®‰∏ÄÂÆöÁöÑÊó∂Èó¥ÂêéÔºåËá™Âä®Êä•Èîô„ÄÇ interval ÂÆöÊó∂ÔºöÊØèÈöî‰∏ÄÊÆµÊó∂Èó¥ÂèëÂá∫‰ø°Âè∑ delay Âª∂ËøüÂèëÈÄÅnext„ÄÇ retryÈáçËØï ÔºöÂè™Ë¶ÅÂ§±Ë¥•ÔºåÂ∞±‰ºöÈáçÊñ∞ÊâßË°åÂàõÂª∫‰ø°Âè∑‰∏≠ÁöÑblock,Áõ¥Âà∞ÊàêÂäü. replayÈáçÊîæÔºöÂΩì‰∏Ä‰∏™‰ø°Âè∑Ë¢´Â§öÊ¨°ËÆ¢ÈòÖ,ÂèçÂ§çÊí≠ÊîæÂÜÖÂÆπ throttleËäÇÊµÅ:ÂΩìÊüê‰∏™‰ø°Âè∑ÂèëÈÄÅÊØîËæÉÈ¢ëÁπÅÊó∂ÔºåÂèØ‰ª•‰ΩøÁî®ËäÇÊµÅÔºåÂú®Êüê‰∏ÄÊÆµÊó∂Èó¥‰∏çÂèëÈÄÅ‰ø°Âè∑ÂÜÖÂÆπÔºåËøá‰∫Ü‰∏ÄÊÆµÊó∂Èó¥Ëé∑Âèñ‰ø°Âè∑ÁöÑÊúÄÊñ∞ÂÜÖÂÆπÂèëÂá∫„ÄÇ UI - CategoryÔºàÂ∏∏Áî®Ê±áÊÄªÔºârac_prepareForReuseSignalÔºö ÈúÄË¶ÅÂ§çÁî®Êó∂Áî® Áõ∏ÂÖ≥UI: MKAnnotationView„ÄÅUICollectionReusableView„ÄÅUITableViewCell„ÄÅUITableViewHeaderFooterView rac_buttonClickedSignalÔºöÁÇπÂáª‰∫ã‰ª∂Ëß¶Âèë‰ø°Âè∑ Áõ∏ÂÖ≥UIÔºöUIActionSheet„ÄÅUIAlertView rac_commandÔºöbuttonÁ±ª„ÄÅÂà∑Êñ∞Á±ªÁõ∏ÂÖ≥ÂëΩ‰ª§ÊõøÊç¢ Áõ∏ÂÖ≥UIÔºöUIBarButtonItem„ÄÅUIButton„ÄÅUIRefreshControl rac_signalForControlEvents: control event Ëß¶Âèë Áõ∏ÂÖ≥UIÔºöUIControl rac_gestureSignal UIGestureRecognizer ‰∫ã‰ª∂Â§ÑÁêÜ‰ø°Âè∑ Áõ∏ÂÖ≥UIÔºöUIGestureRecognizer rac_imageSelectedSignal ÈÄâÊã©ÂõæÁâáÁöÑ‰ø°Âè∑ Áõ∏ÂÖ≥UIÔºöUIImagePickerController rac_textSignal Áõ∏ÂÖ≥UIÔºöUITextField„ÄÅUITextView ÂèØÂÆûÁé∞ÂèåÂêëÁªëÂÆöÁöÑÁõ∏ÂÖ≥API rac_channelForControlEvents: key: nilValue: Áõ∏ÂÖ≥UIÔºöUIControlÁ±ª rac_newDateChannelWithNilValue: Áõ∏ÂÖ≥UIÔºöUIDatePicker rac_newSelectedSegmentIndexChannelWithNilValue: Áõ∏ÂÖ≥UIÔºöUISegmentedControl rac_newValueChannelWithNilValue: Áõ∏ÂÖ≥UIÔºöUISlider„ÄÅUIStepper rac_newOnChannel Áõ∏ÂÖ≥UIÔºöUISwitch rac_newTextChannel Áõ∏ÂÖ≥UIÔºöUITextField Foundation - Category ÔºàÂ∏∏Áî®Ê±áÊÄªÔºâNSData rac_readContentsOfURL: options: scheduler: ÊØîocÂ§öÂá∫Á∫øÁ®ãËÆæÁΩÆ NSDictionary rac_sequence rac_keySequence key ÈõÜÂêà rac_valueSequence value ÈõÜÂêà NSArray rac_sequence ‰ø°Âè∑ÈõÜÂêà NSFileHandle rac_readInBackground ÂêéÂè∞Á∫øÁ®ãËØªÂèñ NSInvocation rac_setArgument: atIndex: ËÆæÁΩÆÂèÇÊï∞ rac_argumentAtIndex ÂèñÊüê‰∏™ÂèÇÊï∞ rac_returnValue ÊâÄÂÖ≥ËÅîÊñπÊ≥ïÁöÑËøîÂõûÂÄº NSNotificationCenter rac_addObserverForName: object:Ê≥®ÂÜåÈÄöÁü• NSObject rac_willDeallocSignal ÂØπË±°ÈîÄÊØÅÊó∂ÂèëÂä®ÁöÑ‰ø°Âè∑ rac_description debugÁî® rac_observeKeyPath: options: observer: block:ÁõëÂê¨Êüê‰∏™‰∫ã‰ª∂ rac_liftSelector: withSignals: ÂÖ®ÈÉ®‰ø°Âè∑ÈÉΩnextÂú®ÊâßË°å rac_signalForSelector: ‰ª£ÊõøÊüê‰∏™ÊñπÊ≥ï rac_signalForSelector:(SEL)selector fromProtocol:‰ª£Êõø‰ª£ÁêÜ NSString rac_keyPathComponents Ëé∑Âèñ‰∏Ä‰∏™Ë∑ØÂæÑÊâÄÊúâÁöÑÈÉ®ÂàÜ rac_keyPathByDeletingLastKeyPathComponent Âà†Èô§Ë∑ØÂæÑÊúÄÂêé‰∏ÄÈÉ®ÂàÜ rac_keyPathByDeletingFirstKeyPathComponent Âà†Èô§Ë∑ØÂæÑÁ¨¨‰∏ÄÈÉ®ÂàÜ rac_readContentsOfURL: usedEncoding: scheduler: ÊØî‰πãOCÂ§öÁ∫øÁ®ãË∞ÉÁî® rac_sequence NSURLConnection rac_sendAsynchronousRequest ÂèëËµ∑ÂºÇÊ≠•ËØ∑Ê±Ç NSUserDefaults rac_channelTerminalForKey Áî®‰∫éÂèåÂêëÁªëÂÆöÔºåÊ≠§‰πÉ‰∏Ä NSEnumerator rac_sequence NSIndexSet rac_sequence NSOrderedSet rac_sequence NSSet rac_sequence RACÂõæÁâáÁâàÁöÑAPIÊâãÂÜåReactiveCocoa Objective-C ReactiveCocoa Swift RXSwift Êú¨ÊñáÂèÇËÄÉÊï¥ÁêÜËá™ ReactiveCocoa Tutorial ‚Äì The Definitive Introduction: Part 1/2 https://www.raywenderlich.com/62699/reactivecocoa-tutorial-pt1 ReactiveCocoa Tutorial ‚Äì The Definitive Introduction: Part 2/2 https://www.raywenderlich.com/62796/reactivecocoa-tutorial-pt2 iOSÁöÑÂáΩÊï∞ÂìçÂ∫îÂûãÁºñÁ®ã https://www.gitbook.com/book/kevinhm/functionalreactiveprogrammingonios/details ReactiveCocoa Essentials: Understanding and Using RACCommand https://codeblog.shape.dk/blog/2013/12/05/reactivecocoa-essentials-understanding-and-using-raccommand/ iOS ReactiveCocoa ÊúÄÂÖ®Â∏∏Áî®APIÊï¥ÁêÜÔºàÂèØÂÅö‰∏∫ÊâãÂÜåÊü•ËØ¢Ôºâhttps://www.cocoachina.com/ios/20160729/17236.html ReactiveCocoaÂíåRXSwiftÈÄüÊü•Ë°® https://valiantcat.com/2016/07/22/ReactiveCocoaÂíåRXSwiftÈÄüÊü•Ë°®/ ReactiveCocoa‰∏≠ÊΩúÂú®ÁöÑÂÜÖÂ≠òÊ≥ÑÊºèÂèäËß£ÂÜ≥ÊñπÊ°àhttps://tech.meituan.com/potential-memory-leak-in-reactivecocoa.html?from=timeline&amp;isappinstalled=0 ming1016","link":"/ÁºñÁ®ã/Ô£ø/ios-han/"},{"title":"iOSÁïåÈù¢ÂÖÉÁ¥†ÊåáÂçó","text":"","link":"/ÁºñÁ®ã/Ô£ø/ios-zhinan/"},{"title":"iOSËÆ°ÁÆóAppÁºìÂ≠òÁöÑÂ§ßÂ∞è‰ª•ÂèäÊ∏ÖÁêÜ","text":"‰∏Ä„ÄÅËÆ°ÁÆóÁºìÂ≠ò1234567891011121314151617181920212223// ÁºìÂ≠òÂ§ßÂ∞è- (CGFloat)folderSize{ CGFloat folderSize; //Ëé∑ÂèñË∑ØÂæÑ NSString *cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask,YES)firstObject]; //Ëé∑ÂèñÊâÄÊúâÊñá‰ª∂ÁöÑÊï∞ÁªÑ NSArray *files = [[NSFileManager defaultManager] subpathsAtPath:cachePath]; NSLog(@&quot;Êñá‰ª∂Êï∞Ôºö%ld&quot;,files.count); for(NSString *path in files) { NSString*filePath = [cachePath stringByAppendingString:[NSString stringWithFormat:@&quot;/%@&quot;,path]]; //Á¥ØÂä† folderSize += [[NSFileManager defaultManager]attributesOfItemAtPath:filePath error:nil].fileSize; } //ËΩ¨Êç¢‰∏∫M‰∏∫Âçï‰Ωç CGFloat sizeM = folderSize /1024.0/1024.0; return sizeM;} ‰∫å„ÄÅÊ∏ÖÈô§ÁºìÂ≠ò12345678910111213141516171819202122232425262728- (void)removeCache{ //===============Ê∏ÖÈô§ÁºìÂ≠ò============== //Ëé∑ÂèñË∑ØÂæÑ NSString*cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask,YES)objectAtIndex:0]; //ËøîÂõûË∑ØÂæÑ‰∏≠ÁöÑÊñá‰ª∂Êï∞ÁªÑ NSArray*files = [[NSFileManager defaultManager]subpathsAtPath:cachePath]; NSLog(@&quot;Êñá‰ª∂Êï∞Ôºö%ld&quot;,[files count]); for(NSString *p in files){ NSError*error; NSString*path = [cachePath stringByAppendingString:[NSString stringWithFormat:@&quot;/%@&quot;,p]]; if([[NSFileManager defaultManager]fileExistsAtPath:path]) { BOOL isRemove = [[NSFileManager defaultManager]removeItemAtPath:path error:&amp;error]; if(isRemove) { NSLog(@&quot;Ê∏ÖÈô§ÊàêÂäü&quot;); //ËøôÈáåÂèëÈÄÅ‰∏Ä‰∏™ÈÄöÁü•ÁªôÂ§ñÁïåÔºåÂ§ñÁïåÊé•Êî∂ÈÄöÁü•ÔºåÂèØ‰ª•ÂÅö‰∏Ä‰∫õÊìç‰ΩúÔºàÊØîÂ¶ÇUIAlertViewControllerÔºâ }else{ NSLog(@&quot;Ê∏ÖÈô§Â§±Ë¥•&quot;); } } }}","link":"/ÁºñÁ®ã/Ô£ø/ioshuancun/"},{"title":"iOSÂ≠óÁ¨¶‰∏≤ ","text":"ÊêúÁ¥¢Âú®‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤‰∏≠ÊêúÁ¥¢Â≠êÂ≠óÁ¨¶‰∏≤ ÊúÄÁÅµÊ¥ªÁöÑÊñπÊ≥ï 1- (NSRange)rangeOfString:(NSString *)aString options:(NSStringCompareOptions)mask range:(NSRange)searchRange locale:(NSLocale *)locale Ê†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤ 3‰∏™ÊñπÊ≥ï 123-initWithFormat:-initWithFormat:arguments:+stringWithFormat: Êï¥Êï∞ ÂèØ‰ª•ÂêåÊó∂Â∑•‰ΩúÂú®32‰ΩçÂíå64‰ΩçÁöÑ 123uint64_t p = 2305843009213693951;NSString *s = [NSString stringWithFormat:@&quot;The ninth Mersenne prime is %llu&quot;, (unsigned long long) p];// &quot;The ninth Mersenne prime is 2305843009213693951&quot; Modifier d, i o, u, x, X hh signed char unsigned char h short unsigned short (none) int unsigned int l(ell) long unsigned long j intmax_t uintmax_t t ptrdiff_t z size_t * ËΩ¨Êç¢ËßÑÂàô 12345int m = -150004021;uint n = 150004021U;NSString *s = [NSString stringWithFormat:@&quot;d:%d i:%i o:%o u:%u x:%x X:%X&quot;, m, m, n, n, n, n];// &quot;d:-150004021 i:-150004021 o:1074160465 u:150004021 x:8f0e135 X:8F0E135&quot;//oÊòØÂÖ´ËøõÂà∂ ËÆæÁΩÆÊúÄÂ∞èÂ≠óÊÆµÂÆΩÂ∫¶ÂíåÊúÄÂ∞èÊï∞Â≠ó‰ΩçÊï∞ 123456int m = 42;NSString *s = [NSString stringWithFormat:@&quot;&apos;%4d&apos; &apos;%-4d&apos; &apos;%+4d&apos; &apos;%4.3d&apos; &apos;%04d&apos;&quot;, m, m, m, m, m];// &quot;[ 42] [42 ] [ +42] [ 042] [0042]&quot;m = -42;NSString *s = [NSString stringWithFormat:@&quot;&apos;%4d&apos; &apos;%-4d&apos; &apos;%+4d&apos; &apos;%4.3d&apos; &apos;%04d&apos;&quot;, m, m, m, m, m];// &quot;[ -42] [-42 ] [ -42] [-042] [-042]&quot; %pÂèØÊâìÂç∞ÊåáÈíàÔºåÂíå%#x‰∏çÂêåÁöÑÊòØÂÆÉÂèØ‰ª•ÂêåÊó∂Âú®32‰ΩçÂíå64‰ΩçÊâßË°å ÊµÆÁÇπÊï∞ ‰ΩøÁî®%fÂíå%g 12345double v[5] = {12345, 12, 0.12, 0.12345678901234, 0.0000012345678901234};NSString *s = [NSString stringWithFormat:@&quot;%g %g %g %g %g&quot;, v[0], v[1], v[2], v[3], v[4]];// &quot;12345 12 0.12 0.123457 1.23457e-06&quot;NSString *s = [NSString stringWithFormat:@&quot;%f %f %f %f %f&quot;, v[0], v[1], v[2], v[3], v[4]];// &quot;12345.000000 12.000000 0.120000 0.123457 0.000001&quot; Â§öË°åÊñáÂ≠ó ‰ΩøÁî®\\nÊù• 12345NSString *limerick = @&quot;A lively young damsel named Menzies\\n&quot;@&quot;Inquired: ¬´Do you know what this thenzies?¬ª\\n&quot;@&quot;Her aunt, with a gasp,\\n&quot;@&quot;Replied: &quot;It&apos;s a wasp,\\n&quot;@&quot;And you&apos;re holding the end where the stenzies.\\n&quot;; Á≠â‰ª∑ÂÜôÊ≥ï 1NSString *limerick = @&quot;A lively young damsel named Menzies\\nInquired: ¬´Do you know what this thenzies?¬ª\\nHer aunt, with a gasp,\\nReplied: &quot;It&apos;s a wasp,\\nAnd you&apos;re holding the end where the stenzies.\\n&quot;; Êõ¥ÁÆÄÊ¥ÅÁöÑÊñπÊ≥ï 1NSString * string = @&quot;The man &quot; @&quot;who knows everything &quot; @&quot;learns nothing&quot; @&quot;.&quot;; ÊõøÊç¢Â≠óÁ¨¶‰∏≤ NSMutableStringÁöÑÂõõ‰∏™ÊñπÊ≥ï 1234-deleteCharactersInRange:-insertString:atIndex:-replaceCharactersInRange:withString:-replaceOccurrencesOfString:withString:options:range: NSStringÁöÑÊñπÊ≥ï 123-stringByReplacingOccurrencesOfString:withString:-stringByReplacingOccurrencesOfString:withString:options:range:-stringByReplacingCharactersInRange:withString: NSMutableString‰∏ç‰ºöÂàõÂª∫Êñ∞Â≠óÁ¨¶‰∏≤ÔºåÊÄßËÉΩ‰ºöÂ•ΩÁÇπ 1234567NSMutableString *string; // ÂÅáËÆæÊàë‰ª¨Â∑≤ÁªèÊúâ‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ string ÁöÑÂ≠óÁ¨¶‰∏≤// Áé∞Âú®Ë¶ÅÂéªÊéâÂÆÉÁöÑ‰∏Ä‰∏™ÂâçÁºÄÔºåÂÅöÊ≥ïÂ¶Ç‰∏ã:NSString *prefix = @&quot;WeDon‚ÄôtWantThisPrefix&quot;NSRange r = [string rangeOfString:prefix options:NSAnchoredSearch range:NSMakeRange(0, string.length) locale:nil];if (r.location != NSNotFound) { [string deleteCharactersInRange:r];} ËøûÊé•Â≠óÁ¨¶‰∏≤12NSArray *names = @[&quot;Hildr&quot;, @&quot;Heidrun&quot;, @&quot;Gerd&quot;, @&quot;Gu√∞r√∫n&quot;, @&quot;Freya&quot;, @&quot;Nanna&quot;, @&quot;Siv&quot;, @&quot;Ska√∞i&quot;, @&quot;Gr√≥a&quot;];NSString *result = [names componentsJoinedByString:@&quot;, &quot;]; Â≠óÁ¨¶‰∏≤Ëß£ÊûêÊ≠£ÂàôË°®ËææÂºè12345678910NSError *error = nil;NSString *pattern = @&quot;(\\\\w+) = #(\\\\p{Hex_Digit}{6})&quot;;NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:patternoptions:0error:&amp;error];NSTextCheckingResult *result = [expression firstMatchInString:stringoptions:0range:NSMakeRange(0, string.length)];NSString *key = [string substringWithRange:[result rangeAtIndex:1]];NSString *value = [string substringWithRange:[result rangeAtIndex:2]]; Â∞ÜÂ≠óÁ¨¶‰∏≤ÂàÜËß£ÊàêÊï∞ÁªÑÔºå‰ΩøÁî®componentsSeparatedByString:Ëøô‰∏™ÊñπÊ≥ïÔºåÊàñËÄÖenumerateSubstringsInRange:options:usingBlock:„ÄÇÂ¶ÇÊûúÊòØÊåâÁÖßË°åÊù•ËøõË°åÂàÜËß£ÂèØ‰ª•‰ΩøÁî®optionËøô‰∏™ÂèÇÊï∞‰º†NSStringEnumerationByLines 12345678910111213141516171819NSString *input = @‚ÄúbackgroundColor = #ff0000textColor = #0000ff&quot;NSString *pattern = @&quot;(\\\\w+) = #([\\\\da-f]{6})&quot;;NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:patternoptions:0error:NULL];NSArray *lines = [input componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];NSMutableDictionary *result = [NSMutableDictionary dictionary];for (NSString *line in lines) { NSTextCheckingResult *textCheckingResult = [expression firstMatchInString:line options:0 range:NSMakeRange(0, line.length)]; NSString* key = [line substringWithRange:[textCheckingResult rangeAtIndex:1]]; NSString* value = [line substringWithRange:[textCheckingResult rangeAtIndex:2]]; result[key] = value;}return result; Êâ´Êèè NSScanner 12345678910111213141516171819202122NSScanner *scanner = [NSScanner scannerWithString:string];//ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊâ´ÊèèÂô®‰ºöË∑≥ËøáÊâÄÊúâÁ©∫Ê†ºÁ¨¶ÂíåÊç¢Ë°åÁ¨¶„ÄÇ‰ΩÜËøôÈáåÊàë‰ª¨Âè™Â∏åÊúõË∑≥ËøáÁ©∫Ê†ºÁ¨¶scanner.charactersToBeSkipped = [NSCharacterSet whitespaceCharacterSet];//ÂÆö‰πâ‰∏Ä‰∏™ÂçÅÂÖ≠ËøõÂà∂Â≠óÁ¨¶ÈõÜNSCharacterSet *hexadecimalCharacterSet =[NSCharacterSet characterSetWithCharactersInString:@&quot;0123456789abcdefABCDEF&quot;];NSMutableDictionary *result = [NSMutableDictionary dictionary];while (!scanner.isAtEnd) { NSString *key = nil; NSString *value = nil; NSCharacterSet *letters = [NSCharacterSet letterCharacterSet]; BOOL didScan = [scanner scanCharactersFromSet:letters intoString:&amp;key] &amp;&amp; [scanner scanString:@&quot;=&quot; intoString:NULL] &amp;&amp; [scanner scanString:@&quot;#&quot; intoString:NULL] &amp;&amp; [scanner scanCharactersFromSet:hexadecimalCharacterSet intoString:&amp;value] &amp;&amp; value.length == 6; result[key] = value; [scanner scanCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:NULL]; // ÁªßÁª≠Êâ´Êèè‰∏ã‰∏ÄË°å}return result; Ëß£ÊûêÂô® ËÆæËÆ°‰∏Ä‰∏™ËÉΩÂ§üÁî®(100,0,255)ÊàñËÄÖ#ff0000ËøôÊ†∑ÁöÑÂ≠óÁ¨¶Êù•ÂÆö‰πâÈ¢úËâ≤ÁöÑÊñπÊ≥ï„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960- (NSDictionary *)parse:(NSString *)string error:(NSError **)error{ self.scanner = [NSScanner scannerWithString:string]; self.scanner.charactersToBeSkipped = [NSCharacterSet whitespaceCharacterSet]; NSMutableDictionary *result = [NSMutableDictionary dictionary]; NSCharacterSet *letters = [NSCharacterSet letterCharacterSet] while (!self.scanner.isAtEnd) { NSString *key = nil; UIColor *value = nil; BOOL didScan = [self.scanner scanCharactersFromSet:letters intoString:&amp;key] &amp;&amp; [self.scanner scanString:@&quot;=&quot; intoString:NULL] &amp;&amp; [self scanColor:&amp;value]; result[key] = value; [self.scanner scanCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:NULL]; // ÁªßÁª≠Êâ´Êèè‰∏ã‰∏ÄË°å }}- (BOOL)scanColor:(UIColor **)out{ return [self scanHexColorIntoColor:out] || [self scanTupleColorIntoColor:out];}//Êâ´ÊèèËÆæÁΩÆ#ff0000ËøôÊ†∑ÁöÑ- (BOOL)scanHexColorIntoColor:(UIColor **)out{ NSCharacterSet *hexadecimalCharacterSet = [NSCharacterSet characterSetWithCharactersInString:@&quot;0123456789abcdefABCDEF&quot;]; NSString *colorString = NULL; if ([self.scanner scanString:@&quot;#&quot; intoString:NULL] &amp;&amp; [self.scanner scanCharactersFromSet:hexadecimalCharacterSet intoString:&amp;colorString] &amp;&amp; colorString.length == 6) { *out = [UIColor colorWithHexString:colorString]; return YES; } return NO;}- (BOOL)scanTupleColorIntoColor:(UIColor **)out{ NSInteger red, green, blue = 0; BOOL didScan = [self.scanner scanString:@&quot;(&quot; intoString:NULL] &amp;&amp; [self.scanner scanInteger:&amp;red] &amp;&amp; [self.scanner scanString:@&quot;,&quot; intoString:NULL] &amp;&amp; [self.scanner scanInteger:&amp;green] &amp;&amp; [self.scanner scanString:@&quot;,&quot; intoString:NULL] &amp;&amp; [self.scanner scanInteger:&amp;blue] &amp;&amp; [self.scanner scanString:@&quot;)&quot; intoString:NULL]; if (didScan) { *out = [UIColor colorWithRed:(CGFloat)red/255. green:(CGFloat)green/255. blue:(CGFloat)blue/255. alpha:1]; return YES; } else { return NO; }} Á¨¶Âè∑ÂåñÂ§ÑÁêÜÂÖàËøõÊòüÊâ´ÊèèÔºå‰ΩøÁî®NSScannerÊù•Ëß£ÊûêËøô‰∏™Ë°®ËææÂºè 12myView.left = otherView.right * 2 + 10viewController.view.centerX + myConstant &lt;= self.view.centerX 1234567891011121314151617181920212223242526272829303132NSScanner *scanner = [NSScanner scannerWithString:contents];NSMutableArray *tokens = [NSMutableArray array];while (![scanner isAtEnd]) { for (NSString *operator in @[@&quot;=&quot;, @&quot;+&quot;, @&quot;*&quot;, @&quot;&gt;=&quot;, @&quot;&lt;=&quot;, @&quot;.&quot;]) { if ([scanner scanString:operator intoString:NULL]) { [tokens addObject:operator]; } }}//Êé•‰∏ãÊù•ËØÜÂà´ÈùûÁ¨¶Âè∑ÁöÑÂè™ÂåÖÂê´Â≠óÊØçÁöÑstringNSString *result = nil;if ([scanner scanCharactersFromSet:[NSCharacterSet letterCharacterSet] intoString:&amp;result]) { [tokens addObject:result];}//NSScannerÊúâscanDouble:Êù•Êâ´Êèèdoubledouble doubleResult = 0;if ([scanner scanDouble:&amp;doubleResult]) { [tokens addObject:@(doubleResult)];}//ÂÆåÊàêÂêéÁî®Â∞ÜÈúÄË¶ÅËß£ÊûêÁöÑË°®ËææÂºèÊîæÂÖ•ËØïËØïNSString* example = @&quot;myConstant = 100\\n&quot; @&quot;\\nmyView.left = otherView.right * 2 + 10\\n&quot; @&quot;viewController.view.centerX + myConstant &lt;= self.view.centerX&quot;;NSArray *result = [self.scanner tokenize:example];NSArray *expected = @[@&quot;myConstant&quot;, @&quot;=&quot;, @100, @&quot;myView&quot;, @&quot;.&quot;, @&quot;left&quot;, @&quot;=&quot;, @&quot;otherView&quot;, @&quot;.&quot;, @&quot;right&quot;, @&quot;*&quot;, @2, @&quot;+&quot;, @10, @&quot;viewController&quot;, @&quot;.&quot;, @&quot;view&quot;, @&quot;.&quot;, @&quot;centerX&quot;, @&quot;+&quot;, @&quot;myConstant&quot;, @&quot;&lt;=&quot;, @&quot;self&quot;, @&quot;.&quot;, @&quot;view&quot;, @&quot;.&quot;, @&quot;centerX&quot;];XCTAssertEqualObjects(result, expected); ËøõË°åËØ≠Ê≥ïËß£ÊûêÔºåÈúÄË¶ÅËØ≠Ê≥ïÂàÜÊûêÂ∫ìÊèèËø∞Êàë‰ª¨ÁöÑËØ≠Ë®Ä„ÄÇ‰∏ãÈù¢‰ª£Á†ÅÂ∞±ÊòØ‰∏∫ÈÇ£‰∏™Â∏ÉÂ±ÄÁ∫¶ÊùüËØ≠Ë®ÄÂÜôÁöÑËß£ÊûêËØ≠Ê≥ïÔºåÁî®ÁöÑÊâ©Â±ïÁöÑÂ∑¥ÁßëÊñØËåÉÂºèEBNFÂÜôÊ≥ïÔºö 12345678constraint = expression comparator expressioncomparator = &quot;=&quot; | &quot;&gt;=&quot; | &quot;&lt;=&quot;expression = keyPath &quot;.&quot; attribute addMultiplier addConstantkeyPath = identifier | identifier &quot;.&quot; keyPathattribute = &quot;left&quot; | &quot;right&quot; | &quot;top&quot; | &quot;bottom&quot; | &quot;leading&quot; | &quot;trailing&quot; | &quot;width&quot; | &quot;height&quot; | &quot;centerX&quot; | &quot;centerY&quot; | &quot;baseline&quot;addMultiplier = &quot;*&quot; atomaddConstant = &quot;+&quot; atomatom = number | identifier ËøòÊúâÂæàÂ§öObjective-CÁöÑËØ≠Ê≥ïËß£ÊûêÔºåÊõ¥Â§öÁöÑÂèØ‰ª•Âú®CocoaPods‰∏äÊâæÂà∞Ôºöhttps://cocoapods.org/?q=parse„ÄÇÊØîËæÉÂ•ΩÁöÑÂ∞±ÊòØCoreParseÔºåÂú∞ÂùÄÔºöhttps://github.com/beelsebob/CoreParseÔºå‰ΩÜÊòØÈúÄË¶Å‰ΩøÁî®ÂÆÉÊîØÊåÅÁöÑËØ≠Ê≥ï„ÄÇ‰∏ãÈù¢Â∞±ÊòØCoreParseÊîØÊåÅÁöÑÊ†ºÂºèÔºö 12345678910111213NSString* grammarString = [@[ @&quot;Atom ::= num@&apos;Number&apos; | ident@&apos;Identifier&apos;;&quot;, @&quot;Constant ::= name@&apos;Identifier&apos; &apos;=&apos; value@&lt;Atom&gt;;&quot;, @&quot;Relation ::= &apos;=&apos; | &apos;&gt;=&apos; | &apos;&lt;=&apos;;&quot;, @&quot;Attribute ::= &apos;left&apos; | &apos;right&apos; | &apos;top&apos; | &apos;bottom&apos; | &apos;leading&apos; | &apos;trailing&apos; | &apos;width&apos; | &apos;height&apos; | &apos;centerX&apos; | &apos;centerY&apos; | &apos;baseline&apos;;&quot;, @&quot;Multiplier ::= &apos;*&apos; num@&apos;Number&apos;;&quot;, @&quot;AddConstant ::= &apos;+&apos; num@&apos;Number&apos;;&quot;, @&quot;KeypathAndAttribute ::= &apos;Identifier&apos; &apos;.&apos; &lt;AttributeOrRest&gt;;&quot;, @&quot;AttributeOrRest ::= att@&lt;Attribute&gt; | &apos;Identifier&apos; &apos;.&apos; &lt;AttributeOrRest&gt;;&quot;, @&quot;Expression ::= &lt;KeypathAndAttribute&gt; &lt;Multiplier&gt;? &lt;AddConstant&gt;?;&quot;, @&quot;LayoutConstraint ::= lhs@&lt;Expression&gt; rel@&lt;Relation&gt; rhs@&lt;Expression&gt;;&quot;, @&quot;Rule ::= &lt;Atom&gt; | &lt;LayoutConstraint&gt;;&quot;,] componentsJoinedByString:@&quot;\\n&quot;]; ‰∏Ä‰∏™ËßÑÂàôÂåπÈÖçÂêéËß£ÊûêÂô®Â∞±ÊâæÂà∞ÂêåÊ†∑ÂêçÁß∞ÁöÑÁ±ª 1234567- (id)parser:(CPParser *)parser didProduceSyntaxTree:(CPSyntaxTree *)syntaxTree NSString *ruleName = syntaxTree.rule.name; if ([ruleName isEqualToString:@&quot;Attribute&quot;]) { return self.layoutAttributes[[[syntaxTree childAtIndex:0] keyword]]; }...} ÂÆåÊï¥ÁöÑËß£ÊûêÂô®‰ª£Á†ÅÂú®Ôºöhttps://github.com/objcio/issue-9-string-parsing„ÄÇÈáåÈù¢Êúâ‰∏™Ëß£ÊûêÁ±ªÂèØ‰ª•Áî®Êù•Ëß£ÊûêÂ§çÊùÇÁöÑÂ∏ÉÂ±ÄÁ∫¶ÊùüÔºåÂ¶Ç‰∏ãÔºö 1viewController.view.centerX + 20 &lt;= self.view.centerX * 0.5 ÂèØ‰ª•ÂæóÂà∞Â¶Ç‰∏ãÁªìÊûúÔºåÊñπ‰æøËΩ¨Êç¢ÊàêNSLayoutConstraintÂØπË±° 123456789(&lt;Expression: self.keyPath=(viewController, view), self.attribute=9, self.multiplier=1, self.constant=20&gt;-1&lt;Expression: self.keyPath=(self, view), self.attribute=9, self.multiplier=0.5, self.constant=0&gt;) Â≠óÁ¨¶‰∏≤ÁöÑÊ∏≤ÊüìUILabel labelÈªòËÆ§ÊòæÁ§∫‰∏ÄË°åÔºåÂ¶ÇÊûúËÆæÁΩÆnumberOfLines‰∏∫Â§ß‰∫é1ÁöÑËØùÂèØ‰ª•ÊòæÁ§∫ÊåáÂÆöË°åÊï∞ÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∏∫0ÔºåÂàôÂ§öÂ∞ëË°åÈÉΩÊòæÁ§∫ attributedTextÂ±ûÊÄßÂèØ‰ª•ÊòæÁ§∫ÂØåÊñáÊú¨ labelÁöÑfont,textColor,textAlignment,shadowColorÂíåshadowOffsetÂ±ûÊÄßÂèØ‰ª•ÊîπÂèòÂ§ñËßÇ„ÄÇ ÊîπÂèòÁ®ãÂ∫èÂÜÖÊâÄÊúâLabelÁöÑÈ£éÊ†ºÔºåÂèØ‰ª•‰ΩøÁî®[UILabel appearance]ÊñπÊ≥ï UITextField text fieldÂè™Èôê‰∫éÂçïË°å UITextfieldÂÆûÁé∞‰∫ÜUITextInputTraitsÂçèËÆÆÔºåËøô‰∏™ÂçèËÆÆÈúÄË¶ÅÊåáÂÆöÈîÆÁõòÂ§ñËßÇÂíåÊìç‰ΩúÁ≠âÁªÜËäÇ„ÄÇÊØîÂ¶ÇÊòæÁ§∫‰ªÄ‰πàÈîÆÁõòÂíåËøîÂõûÊåâÈîÆÂìçÂ∫îÁ≠â ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆÂ∑¶Âè≥ËæÖÂä©ËßÜÂõæÔºåÊàñËÄÖËÆæÁΩÆËÉåÊôØÊù•Ëá™ÂÆö‰πâËæìÂÖ•Ê°ÜÈ£éÊ†º‰∫Ü„ÄÇ UITextView Áõ∏ÊØîËæÉUITextFieldÔºåÂÆÉËÉΩÂ§üÂ§ÑÁêÜÂ§öË°åÊñáÊú¨ ÂèØ‰ª•‰ΩøÁî®ÂÆöÂà∂Text KitÔºåÂÆòÊñπÊñáÊ°£Ôºöhttps://developer.apple.com/Library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/CustomTextProcessing/CustomTextProcessing.html ÂèØ‰ª•‰∏∫layout managerÔºåtext containerÊàñtext storageËá™ÂÆö‰πâË°å‰∏∫ÊàñÊõøÊç¢Ëá™ÂÆö‰πâÂ≠êÁ±ª„ÄÇ Âú®iOS7‰πãÂâçÊòØÂü∫‰∫éWebKitÁöÑÂäüËÉΩÂ∞ëÔºå‰πãÂêé‰ºöÊúâÂæàÂ§ö‰∏çÂêåÂÖ∑‰ΩìÂèØ‰ª•ÂèÇËÄÉËøô‰∏§ÁØáÊñáÁ´†ÔºöPeterÁöÑhttps://petersteinberger.com/blog/2014/fixing-uitextview-on-ios-7/ÔºåBrentÁöÑhttps://inessential.com/2014/01/07/uitextview_the_solution TableView‰∏≠ÊòæÁ§∫Âä®ÊÄÅÊñáÊú¨Table viewÁöÑDelegateÊúâ‰∏™ÊñπÊ≥ïÁî®Êù•ËÆ°ÁÆóÈ´òÂ∫¶ÔºötableView:heightForRowAtIndexPath:„ÄÇËá™ÂÆö‰πâ‰∏Ä‰∏™UITableViewCellÁöÑÂ≠êÁ±ª 1234567- (void)layoutSubviews{ [super layoutSubviews]; self.textLabel.frame = CGRectInset(self.bounds, MyTableViewCellInset, MyTableViewCellInset);} ËÆ°ÁÆóÁúüÂÆûÈ´òÂ∫¶ÈúÄË¶Å‰ΩøÁî®boundingRectWithSize:options:context: Ëøô‰∏™ÊñπÊ≥ï 123456789101112- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{ CGFloat labelWidth = self.tableView.bounds.size.width - MyTableViewCellInset*2; NSAttributedString *text = [self attributedBodyTextAtIndexPath:indexPath]; NSStringDrawingOptions options = NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingUsesFontLeading; CGRect boundingRect = [text boundingRectWithSize:CGSizeMake(labelWidth, CGFLOAT_MAX) options:options context:nil]; return (CGFloat) (ceil(boundingRect.size.height) + MyTableViewCellInset*2);} ‰ΩøÁî®Text KitÂíåNSAttributedStringËøõË°åÂ∏ÉÂ±ÄÂÖàËÆæÁΩÆattributes 123456789101112CGFloat const fontSize = 15;NSMutableDictionary *body1stAttributes = [NSMutableDictionary dictionary];body1stAttributes[NSFontAttributeName] = [UIFont fontWithName:@&quot;BodoniSvtyTwoITCTT-Book&quot;size:fontSize];NSMutableParagraphStyle *body1stParagraph = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];body1stParagraph.alignment = NSTextAlignmentJustified;body1stParagraph.minimumLineHeight = fontSize + 3;body1stParagraph.maximumLineHeight = body1stParagraph.minimumLineHeight;body1stParagraph.hyphenationFactor = 0.97;body1stAttributes[NSParagraphStyleAttributeName] = body1stParagraph; ËøôÈáåÂ≠ó‰Ωì‰∏∫BodoniSvtyTwoITCTTÔºåÂ¶ÇÊûúÈúÄË¶ÅÊü•ÁúãÊõ¥Â§öÂ≠ó‰ΩìÂèØ‰ª•‰ΩøÁî® +[UIFont familyNames]Ëøô‰∏™ÊñπÊ≥ï„ÄÇ‰∏∫‰∫ÜÂæóÂà∞Â≠ó‰ΩìÁöÑÂêçÂ≠óÔºåÂèØ‰ª•‰ΩøÁî® +[UIFont fontNamesForFamilyName:]„ÄÇÊé•‰∏ãÊù•ÂàõÂª∫ÊÆµËêΩÁöÑÂ±ûÊÄß 12345NSMutableDictionary *bodyAttributes = [body1stAttributes mutableCopy];NSMutableParagraphStyle *bodyParagraph = [bodyAttributes[NSParagraphStyleAttributeName] mutableCopy];bodyParagraph.firstLineHeadIndent = fontSize;bodyAttributes[NSParagraphStyleAttributeName] = bodyParagraph; Ë£ÖÈ•∞ÊÆµËêΩÈ£éÊ†ºÔºå‰ΩøÁî®Ë£ÖÈ•∞Â≠ó‰ΩìÂ∞ÜÊñáÊú¨Â±Ö‰∏≠ÂØπÈΩêÔºåË£ÖÈ•∞Â≠óÁ¨¶ÁöÑÂâçÂêéÂä†‰∏äÁ©∫ÁôΩÊÆµËêΩ 12345678NSMutableDictionary *ornamentAttributes = [NSMutableDictionary dictionary];ornamentAttributes[NSFontAttributeName] = [UIFont fontWithName:@&quot;BodoniOrnamentsITCTT&quot; size:36];NSMutableParagraphStyle *ornamentParagraph = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];ornamentParagraph.alignment = NSTextAlignmentCenter;ornamentParagraph.paragraphSpacingBefore = fontSize;ornamentParagraph.paragraphSpacing = fontSize;ornamentAttributes[NSParagraphStyleAttributeName] = ornamentParagraph; ÊòæÁ§∫Êï∞Â≠óË°®Ê†ºtableÔºåË°®Ê†ºÂ∏ÉÂ±ÄÁ§∫‰æã 123456789101112NSCharacterSet *decimalTerminator = [NSCharacterSet characterSetWithCharactersInString:decimalFormatter.decimalSeparator];NSTextTab *decimalTab = [[NSTextTab alloc] initWithTextAlignment:NSTextAlignmentCenter location:100 options:@{NSTabColumnTerminatorsAttributeName:decimalTerminator}];NSTextTab *percentTab = [[NSTextTab alloc] initWithTextAlignment:NSTextAlignmentRight location:200 options:nil];NSMutableParagraphStyle *tableParagraphStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];tableParagraphStyle.tabStops = @[decimalTab, percentTab]; ÊòæÁ§∫ÂàóË°®ÁöÑÂ±ûÊÄßËÆæÁΩÆÂ¶Ç‰∏ã 12345678910NSMutableDictionary *listAttributes = [bodyAttributes mutableCopy];NSMutableParagraphStyle *listParagraph = [listAttributes[NSParagraphStyleAttributeName] mutableCopy];listParagraph.headIndent = fontSize * 3;listParagraph.firstLineHeadIndent = fontSize;NSTextTab *listTab = [[NSTextTab alloc] initWithTextAlignment:NSTextAlignmentNatural location:fontSize * 3 options:nil];listParagraph.tabStops = @[listTab];listAttributes[NSParagraphStyleAttributeName] = listParagraph; Â≠óÁ¨¶‰∏≤Êú¨Âú∞Âåñ ‰ΩøÁî®NSLocalizedStringÔºåÂèØÊü•ÁúãÊñáÁ´†„ÄäÂ≠óÁ¨¶‰∏≤Êú¨Âú∞Âåñ„ÄãÔºöÔºà‰∏≠ÊñáÔºâÔºàËã±ÊñáÔºâ ming1016","link":"/ÁºñÁ®ã/Ô£ø/ios-string/"},{"title":"iOSÂºÄÂèëÂÜÖÂ≠òÊ≥ÑÈú≤‰øÆÂ§ç","text":"‰∏ÄÔºöÂÜôÂú®ÂâçÈù¢ËØ∑‰ΩøÁî®ARCÔºÅÔºÅÔºÅ Â¶ÇÊûú‰ΩøÁî®ÁöÑÁ¨¨‰∏âÊñπÂ∫ì‰∏çÊîØÊåÅARCÊú∫Âà∂ÔºåÂèØ‰ª•Âú®target-&gt;build phase-&gt;compile sources‰∏≠ÈÄâÊã©ÂØπÂ∫îÁöÑÊ∫êÁ†ÅÊñá‰ª∂Âπ∂Âú®Ê∞îÂÄôÂä†ÂÖ•-fno-objc-arcÊ†áÁ§∫ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºöÂ¶ÇÊûú‰Ω†ÁöÑÂ∫îÁî®ÂØπÂÜÖÂ≠òÊ≥ÑÈú≤ÊØîËæÉÊïèÊÑü(ÈïøÊó∂Èó¥ËøêË°åÊàñËÄÖËÄóË¥πËæÉÂ§öÂÜÖÂ≠ò),ÊàñËÄÖ‰Ω†ÂØπ‰ª£Á†ÅÊúâÊ¥ÅÁôñÊó†Ê≥ïÂøçÂèóÂçäÁÇπÂÜÖÂ≠òÊ≥ÑÈú≤ÔºåËÄå‰Ω†ÂèàÊ≤°ÊúâÂ§ßÊääÁöÑÊó∂Èó¥ÂíåÁ≤æÂäõÂèñ‰øÆÂ§çÈÇ£‰∫õËôöÊó†Áº•ÁºàÁöÑÊ≥ÑÊºèÁÇπÔºåÈÇ£‰πàARCÂ∞ÜÊòØ‰Ω†ÊúÄÂ•ΩÁöÑÈÄâÊã©ÔºåÂõ†‰∏∫‰øÆÂ§çÊ≥ÑÈú≤bugÂÆûÂú®ÊòØÂ§™ÂùëÁàπ‰∫Ü‚Ä¶Â¶ÇÊûú‰Ω†‰∏ç‰π†ÊÉØARCÔºåÂèàÊàñËÄÖ‰Ω†‰ΩøÁî®ÁöÑSDKÁâàÊú¨Ê†πÊú¨‰∏çÊîØÊåÅARCÔºåÈÇ£‰πàÔºåËØ∑Áúã‰∏ãÊñá„ÄÇ ‰∫åÔºö‰øÆÂ§çÊñπÊ≥ïÂ•ΩÔºåË®ÄÂΩíÊ≠£‰º†„ÄÇ ÊåâÊàë‰∏™‰∫∫ÁêÜËß£Ôºå‰øÆÂ§çÂÜÖÂ≠òÊ≥ÑÈú≤ÂèØÂàÜ‰∏∫‰∏â‰∏™Èò∂ÊÆµÔºö Á¨¨‰∏ÄÈò∂ÊÆµÔºöÁºñÁ†ÅÂ•ΩÁöÑÁºñÁ†Å‰π†ÊÉØÂèØ‰ª•ÊùúÁªùÂ§ßÈÉ®ÂàÜÁöÑÂÜÖÂ≠òÊ≥ÑÈú≤ÔºåÂÖ∑‰ΩìÊìç‰ΩúËßÑËåÉÂèØÂèÇËßÅÊàëÁöÑÂè¶‰∏ÄÁØáÂçöÂÆ¢iOSÁºñÁ®ãÂÜÖÂ≠òÁÆ°ÁêÜÂ∞èÁªìÔºåËøô‰πüÊòØÊùúÁªùÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑÊúÄÂÖ≥ÈîÆÈò∂ÊÆµ„ÄÇÂú®Êú¨Èò∂ÊÆµÂ§öËä±‰∏Ä‰∫õÂäõÊ∞îÊîæÂú®Á≤æÁ°ÆÁöÑÂÜÖÂ≠òÁÆ°ÁêÜ‰∏äÔºå‰Ω†Â∞Ü‰ºöÂú®Ë∞ÉËØïÈò∂ÊÆµËäÇÁúÅ‰∏ãÂ§ßÊääÁöÑÁî®‰∫é‰øÆÂ§çÊ≥ÑÈú≤ÁöÑÊó∂Èó¥‰∏éÁ≤æÂäõ„ÄÇÊâÄË∞ìÔºöÁ£®ÂàÄ‰∏çËØØÁ†çÊü¥Â∑•ÔºÅ Á¨¨‰∫åÈò∂ÊÆµÔºöÈùôÊÄÅÂàÜÊûêËØ¥ÁôΩ‰∫ÜÔºåÈùôÊÄÅÂàÜÊûêÂ∞±ÊòØ‰ΩøÁî®XcodeËá™Â∏¶ÁöÑAnalyzeÂäüËÉΩÔºàProduct-&gt; AnalyzeÔºâÔºåÂØπ‰ª£Á†ÅËøõË°åÈùôÊÄÅÂàÜÊûêÔºåÂØπ‰∫éÂÜÖÂ≠òÊ≥ÑÈú≤ÔºàPotential Memory LeakÔºâ, Êú™‰ΩøÁî®Â±ÄÈÉ®ÂèòÈáè(dead store)ÔºåÈÄªËæëÈîôËØØ(Logic Flaws)‰ª•ÂèäAPI‰ΩøÁî®ÈóÆÈ¢ò(API-usage)Á≠âÊòéÁ°ÆÁöÑÂ±ïÁ§∫Âá∫Êù•ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºödead storeÊØîËæÉÂ•ΩÂ§ÑÁêÜÔºåÂ∞Ü‰ªéÊú™‰ΩøÁî®ÁöÑÂèòÈáèÂà†ÊéâÂç≥ÂèØ„ÄÇ Memory LeakÁöÑÊèêÁ§∫ÂÖ∂ÂÆû‰πüÊØîËæÉÂ•ΩÂäûÔºåÂõ†‰∏∫ÂÖ∂ÊèêÁ§∫Â∑≤ÁªèË∂≥Â§üËØ¶ÁªÜÔºåÂÖ∑‰ΩìÂà∞‰∫ÜÂÖ∑‰ΩìÊ≥ÑÈú≤ÁöÑ‰ª£Á†ÅË°å„ÄÇÊâæÂà∞ÈóÆÈ¢òÂØπÁóá‰∏ãËçØÂç≥ÂèØ, ÂøòËÆ∞release ÁöÑÂä†‰∏äreleaseÔºåËØ•ÊîæautoreleaseÁöÑÂú∞ÊñπÂä†‰∏äauto release„ÄÇÊúâ‰∏Ä‰∏™ÊÉÖÂÜµÈúÄË¶ÅÁâπÂà´ËØ¥Êòé‰∏Ä‰∏ãÔºåËßÅ‰∏ãÈù¢ÊâÄÁ§∫‰ª£Á†ÅÔºö 1234567891011[cpp] view plaincopy&lt;span style=&quot;font-size:12px;&quot;&gt;if Ôºàself.dataMember == nil) { self.dataMember = [[NSArray alloc] init]; }&lt;/span&gt; ``` ËøôÊÆµ‰ª£Á†ÅÂú®AnalyzeÁöÑÊó∂ÂÄô‰πüÊèêÁ§∫ÊúâÂÜÖÂ≠òÊ≥ÑÈú≤ÔºåÂºÄÂßãÊàëÊ≤°ÁúãÂá∫Êù•ÔºåÂêéÊù•ÊâçÂèëÁé∞ÔºåÁ≠âÂè∑Âè≥ËæπÁöÑ‰∏¥Êó∂ÂèòÈáèÂç¥ÊòØÊòØÊ≥ÑÈú≤‰∫ÜÁöÑ„ÄÇÊ≠£Á°ÆÁöÑÂÜôÊ≥ïÂ∫îËØ•Â¶Ç‰∏ãÊâÄÁ§∫Ôºö [cpp] view plaincopy if (self.dataMember == nil) { self.dataMember = [[[NSArray alloc] init] autorelease]; 12//ÊàñËÄÖ NSArray* temp = [[NSArray alloc] init]; self.dataMember = temp; [temp release]; } ÊàëÊØîËæÉÂÄæÂêë‰∫éÁ¨¨‰∫åÁßçÂÜôÊ≥ïÔºåÂà∞Â§ÑautoreleaseÂØπÂÜÖÂ≠òÂç†Áî®ÂíåÊÄßËÉΩËÇØÂÆö‰ºöÊúâÂ§öÂ§öÂ∞ëÂ∞ëÁöÑÂΩ±ÂìçÁöÑ„ÄÇ ‰ΩøÁî®AnalyzeÊâæÂà∞ÁöÑÂÜÖÂ≠òÊ≥ÑÈú≤ÁÇπÂü∫Êú¨ËøòÊòØÂáÜÁ°ÆÁöÑÔºå‰ΩÜÊØîËæÉÂùë‰∫∫ÁöÑÊòØAnayzeÂπ∂‰∏çËÉΩÊâæÂá∫ÊâÄÁî®ÁöÑÊ≥ÑÈú≤ÁÇπÔºåÂç≥‰ΩøÊüê‰∫õÊûÅ‰∏∫ÊòéÊòæÁöÑÊ≥ÑÈú≤ÁÇπ‰ΩøÁî®Analyze‰πüÊó†Ê≥ïÂàÜÊûêÂá∫Êù•„ÄÇËøôÊó∂Â∞±ÈúÄË¶ÅÁªàÊûÅÂ§ßÊùÄÂô®ÔºöInstrumentsÁôªÂú∫‰∫Ü„ÄÇ ### Á¨¨‰∏âÈò∂ÊÆµÔºöÂä®ÊÄÅÂàÜÊûê InstrumentsÊòØXcodeËá™Â∏¶ÁöÑ‰∏Ä‰∏™Âº∫Â§ßÁöÑÂ∫îÁî®ÂàÜÊûêÂ∑•ÂÖ∑ÔºåÂÖ∂ÂäüËÉΩÂπ∂‰∏çÂ±ÄÈôê‰∫éÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑÂàÜÊûê‰∏äÔºåÂÜÖÂ≠òÂç†Áî®„ÄÅCPU‰ΩøÁî®ÁéáÁ≠âÈÉΩÊòØÂÖ∂ÂàÜÊûêÁöÑÂØπË±°ÔºåÊúâÂÖ¥Ë∂£ÁöÑÁ≠íÂ≠êÂèØ‰ª•‰ªîÁªÜÁ†îÁ©∂Á†îÁ©∂ÔºåÂØπÊèêÈ´òÂ∫îÁî®ÁöÑË¥®ÈáèÂ§ßÊúâÁõäÂ§Ñ„ÄÇ ‰ΩøÁî®InstrumentsÂàÜÊûêÂÜÖÂ≠òÊ≥ÑÈú≤Êó∂ÔºåÊúÄÂ•Ω‰ΩøÁî®ÁúüÊú∫ËøõË°åË∞ÉËØïÔºåÁ¨îËÄÖÂ∞±Á¢∞Âà∞ËøáÂêå‰∏Ä‰ªΩ‰ª£Á†ÅÂú®Ê®°ÊãüÂô®‰∏äÂàÜÊûêÊúâÊ≥ÑÈú≤ËÄåÂÆû‰ΩìÊú∫‰∏äÂ∞±Ê≤°ÊúâÁöÑÊÉÖÂÜµÔºåÁúãÊù•‰∏çÂêåÁöÑCPUÊû∂ÊûÑ(x86 vs ARM)ÂØπÂÜÖÂ≠òÁöÑÁÆ°ÁêÜËøòÊòØÊúâ‰∏ÄÂÆöÂΩ±ÂìçÁöÑ„ÄÇ ËøûÊé•ÂÆû‰ΩìÊú∫Âà∞ÂºÄÂèëÊú∫ÔºåÈÄâÊã©ÈÄâÊã©ËøêË°åËÆæÂ§á‰∏∫ËÆæÂ§áÔºåÁÇπÂáªProducts-&gt; ProfileÔºåÁªèËøáÁºñËØëÂêéÔºå‰ºöÂºπÂá∫Â¶Ç‰∏ãÂØπËØùÊ°ÜÔºö ![](/post-images/1560760181109.png) ÂèåÂáªLeak, ËøõÂÖ•Â¶Ç‰∏ãÁïåÈù¢Ôºö ![](/post-images/1560760207240.png) ‰∏äÈù¢ÁöÑËìùËâ≤Êù°Áä∂ÈÉ®ÂàÜÊòØÂÜÖÂ≠òÂç†Áî®ÊÉÖÂÜµÔºåËÄå‰∏ãÈù¢ÁöÑ‰æøÊòØÂÜÖÂ≠òÊ≥ÑÈú≤ÊÉÖÂÜµÔºåÂΩì‰∏ãÈù¢ÁöÑÁä∂ÊÄÅÊ†èÂá∫Áé∞Á≤âËâ≤Êù°Áä∂Áâ©‰ΩìÊó∂ÔºåÊÅ≠Âñú‰Ω†ÔºåÊ≥ÑÈú≤Âá∫Áé∞‰∫Ü... ![](/post-images/1560760246640.png) Â¶ÇÊûúËøêÊ∞îÊØîËæÉÂ•ΩÁöÑËØùÔºå‰∏ãÈù¢ÁöÑÊèêÁ§∫Âå∫Âüü‰ºöÊòéÁ°ÆÁöÑÂëäËØâ‰Ω†ÈÇ£‰∏™Êñá‰ª∂Âì™‰∏™ÂáΩÊï∞ÊúâÊ≥ÑÈú≤Âá∫Áé∞Ôºå‰ΩÜ...ÂæàÂ§öÊÉÖÂÜµ‰∏ãÔºåÂá∫Áé∞ÁöÑÂè™ÊòØ‰∏ãÈù¢ËøôÁßçÊó†ÂéòÂ§¥ÁöÑÊèêÁ§∫Ôºö ![](/post-images/1560760276890.png) ËøôÊòØË¶ÅÈóπÈÇ£Ê†∑... ÂΩìÁÑ∂Ôºå‰∏äÈù¢Âõæ‰∏≠ÊâÄÁ§∫ÁöÑ‰∏∫5.1.1Á≥ªÁªü‰∏≠ÁöÑ‰∏Ä‰∏™bugÔºåÂú®tableviewÊªöÂä®ÁöÑËøáÁ®ã‰∏≠‰ºöÂá∫Áé∞‰∏Ä‰∫õËé´ÂêçÂÖ∂Â¶ôÁöÑÊ≥ÑÈú≤ÁÇπÔºåÂêåÊ†∑ÁöÑ‰ª£Á†ÅÂú®5.0.1‰∏≠Âπ∂‰∏ç‰ºöÂá∫Áé∞‰∏äÈù¢ÁöÑÊ≥ÑÈú≤ÈóÆÈ¢ò„ÄÇ ‰ΩÜËøôÁßçÂæàÈöæÊâæÂà∞Ê≥ÑÈú≤Ê†πÊ∫êÁöÑÈóÆÈ¢ò‰ºöÂæàÂ§öÔºåÂØªÊâæËøô‰∫õÈóÆÈ¢òÈúÄË¶ÅËÄóË¥πÂ§ßÈáèÁöÑÊó∂Èó¥‰∏éÁ≤æÂäõ„ÄÇ ‰øÆÂ§çÊ≥ÑÈú≤Êúâ‰∏ãÈù¢‰∏§ÁßçÂ§ÑÁêÜÊñπÊ≥ïÔºö A: ÂØπ‰∫éÈÇ£‰∫õÈùûÂ∏∏ÊòéÊòæÁöÑÊèêÁ§∫ÔºåÂæàÁÆÄÂçïÔºåÊåâÂõæÁ¥¢È™•ÔºåÊ†πÊçÆÊèêÁ§∫ÁöÑ‰ª£Á†ÅÊñá‰ª∂ÂáΩÊï∞ÂíåÊ≥ÑÈú≤ÁöÑÂØπË±°Á±ªÂûãÂà§Êñ≠Ê≥ÑÈú≤Á±ªÂûãËøõË°å‰øÆÂ§ç„ÄÇ B: ÂØπ‰∫éÈÇ£‰∫õ‰∏çÊòØÂæàÊòéÊòæÁöÑÊèêÁ§∫Ôºå‰æãÂ¶ÇÊèêÁ§∫ÁöÑÊ≥ÑÊºèÁÇπÊòØ‰∏Ä‰∏™Á¨¨‰∏âÊñπÁöÑÂ∫ìÊàñËÄÖÊüê‰∏™libÔºåÈÇ£‰πàËøôÊó∂Â∞±ÈúÄË¶ÅÂõûÂøÜ‰∏Ä‰∏ãÂàöÊâç‰ªÄ‰πàÊìç‰Ωú‰πãÂêéÂØºËá¥‰∫ÜÊ≥ÑÈú≤ÔºåÁÑ∂ÂêéÊâæÂà∞‰∏éÂàöÂàöÁöÑÊìç‰ΩúÁõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÔºåÂú®ÂàÜÊûêÊ≥ÑÈú≤ÁöÑÁ±ªÂûãÔºå‰æãÂ¶ÇÊòØNSStringÊàñËÄÖNSArrayÔºåÊ†πÊçÆÊ≥ÑÈú≤ÁöÑÊï∞ÊçÆÁ±ªÂûãÊù•Êé®ÊµãÂÖ∑‰ΩìÊ≥ÑÈú≤ÁöÑ‰ª£Á†ÅÊÆµ„ÄÇËøôÈúÄË¶ÅÈÇ£‰πà‰∏ÄÁÇπÁÇπÁöÑÁÅµÊÑüÂíåËøêÊ∞î... ## ‰∏âÔºöÊÄªÁªì ‰ª•Êàë‰∫≤Ë∫´Á≤æÂäõÊù•ËØ¥ÔºåË∞ÉÊ≥ÑÈú≤ÊòØÂæàÁÉ¶ÁöÑ‰∏Ä‰ª∂‰∫ãÔºåËä±Âú®‰∏äÈù¢ÁöÑÊó∂Èó¥ÂèØËÉΩË¶ÅÊØî‰Ω†È¢ÑÊÉ≥ÁöÑÂ§öÂæóÂ§ö„ÄÇ ÊâÄ‰ª•ÔºåÊ≠£Â¶ÇÂâçÈù¢ÊèêÂà∞ÁöÑÔºåË¶Å‰πàÂú®ÁºñÁ†ÅËøáÁ®ã‰∏≠ÊèêÈ´òÂÜÖÂ≠òÊéßÂà∂ÁöÑÁ≤æÁ°ÆÊÄßÔºåË¶Å‰πàÂ∞±‰∏ÄÂä≥Ê∞∏ÈÄ∏ÔºåÁõ¥Êé•‰ΩøÁî®ARCÔºåË¶ÅÊ≥ÑÈú≤ÂéªÂ±éÂêßÔºÅ","link":"/ÁºñÁ®ã/Ô£ø/ios-neicun/"},{"title":"iOS ÂèãÁõüÂàÜ‰∫´Á¨îËÆ∞","text":"1.‰∏ãËΩΩÂèãÁõüÂàÜ‰∫´SDK2.Â∞Ü UMSocial Êñá‰ª∂ÊãñÂÖ•Â∑•Á®ã (Ê≥®:Ê†πÊçÆ‰Ω†ÈúÄË¶ÅÂàÜ‰∫´ÁöÑÂπ≥Âè∞Êù•Ê∑ªÂä†ÔºåUMSocial -&gt; SocialLibraries Âà†Èô§‰Ω†‰∏çÈúÄË¶ÅÁöÑÂπ≥Âè∞ÔºåÂê¶ÂàôÂæàÂç†ÂåÖ‰ΩìÁßØ,ÊØîÂ¶ÇÊàëÂè™ÈúÄË¶Å QQÔºåSinaÔºåWeChat)3.Ê∑ªÂä†ÈÖçÁΩÆÈ°πÁõÆ Build Setting -&gt; Lingking -&gt; Other Linker Flags -ObjC ÔºÅÔºÅÔºÅÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÔºåÊâÄÊúâÁéØÂ¢ÉÈÖçÁΩÆÂ•Ω‰πãÂêéÔºåÁÇπÂáªÂàÜ‰∫´ÔºåUMShareUI ÂºπÂá∫ÁöÑÂ∞ÜÊ≤°ÊúâÂπ≥Âè∞Â§¥ÂÉèÈÖçÁΩÆ‰æùËµñÂ∫ì 1234561) SystemConfiguration.framework CoreTelephony.framework ImageIO.framework libsqlite3.tbd libz.tbd libc++.tbd 4.ËÆæÁΩÆATS ÊâæÂà∞Info.plist Âè≥ÈîÆÔºåOpenAs SourceCode Ê∑ªÂä†‰∏Ä‰∏ã(ÂàÜÂà´ÊòØÔºåQQÔºåÂæÆ‰ø°ÔºåÂæÆÂçö)12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&lt;key&gt;NSAppTransportSecurity&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSExceptionDomains&lt;/key&gt; &lt;dict&gt; &lt;key&gt;renren.com&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;sina.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt; &lt;string&gt;TLSv1.0&lt;/string&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;sina.com.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;sinaimg.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;sinajs.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;weibo.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt; &lt;string&gt;TLSv1.0&lt;/string&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;weibo.com&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt; &lt;string&gt;TLSv1.0&lt;/string&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;/dict&gt; &lt;/dict&gt; 5.ËÆæÁΩÆURLType ÊâæÂà∞Info.plist Âè≥ÈîÆÔºåOpenAs SourceCode Ê∑ªÂä†‰∏Ä‰∏ã(ÂàÜÂà´ÊòØÔºåQQÔºåÂæÆ‰ø°ÔºåÂæÆÂçö) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;key&gt;CFBundleURLTypes&lt;/key&gt; &lt;array&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLName&lt;/key&gt; &lt;string&gt;&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;wb3921700954&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLName&lt;/key&gt; &lt;string&gt;weixin&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;wxdc1e388c3822c80b&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;tencent1105860513&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;QQ0x41EA17A1&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeRole&lt;/key&gt; &lt;string&gt;Editor&lt;/string&gt; &lt;key&gt;CFBundleURLSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;wendu.dsbridgedemo&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;/array&gt; 6.ËÆæÁΩÆURLType ÊâæÂà∞Info.plist Âè≥ÈîÆÔºåOpenAs SourceCode Ê∑ªÂä†‰∏Ä‰∏ã 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt; &lt;array&gt; &lt;string&gt;linkedin&lt;/string&gt; &lt;string&gt;linkedin-sdk2&lt;/string&gt; &lt;string&gt;linkedin-sdk&lt;/string&gt; &lt;string&gt;wechat&lt;/string&gt; &lt;string&gt;weixin&lt;/string&gt; &lt;string&gt;sinaweibohd&lt;/string&gt; &lt;string&gt;sinaweibo&lt;/string&gt; &lt;string&gt;sinaweibosso&lt;/string&gt; &lt;string&gt;weibosdk&lt;/string&gt; &lt;string&gt;weibosdk2.5&lt;/string&gt; &lt;string&gt;mqqapi&lt;/string&gt; &lt;string&gt;mqq&lt;/string&gt; &lt;string&gt;mqqOpensdkSSoLogin&lt;/string&gt; &lt;string&gt;mqqconnect&lt;/string&gt; &lt;string&gt;mqqopensdkdataline&lt;/string&gt; &lt;string&gt;mqqopensdkgrouptribeshare&lt;/string&gt; &lt;string&gt;mqqopensdkfriend&lt;/string&gt; &lt;string&gt;mqqopensdkapi&lt;/string&gt; &lt;string&gt;mqqopensdkapiV2&lt;/string&gt; &lt;string&gt;mqqopensdkapiV3&lt;/string&gt; &lt;string&gt;mqqopensdkapiV4&lt;/string&gt; &lt;string&gt;mqzoneopensdk&lt;/string&gt; &lt;string&gt;wtloginmqq&lt;/string&gt; &lt;string&gt;wtloginmqq2&lt;/string&gt; &lt;string&gt;mqqwpa&lt;/string&gt; &lt;string&gt;mqzone&lt;/string&gt; &lt;string&gt;mqzonev2&lt;/string&gt; &lt;string&gt;mqzoneshare&lt;/string&gt; &lt;string&gt;wtloginqzone&lt;/string&gt; &lt;string&gt;mqzonewx&lt;/string&gt; &lt;string&gt;mqzoneopensdkapiV2&lt;/string&gt; &lt;string&gt;mqzoneopensdkapi19&lt;/string&gt; &lt;string&gt;mqzoneopensdkapi&lt;/string&gt; &lt;string&gt;mqqbrowser&lt;/string&gt; &lt;string&gt;mttbrowser&lt;/string&gt; &lt;string&gt;TencentWeibo&lt;/string&gt; &lt;string&gt;tencentweiboSdkv2&lt;/string&gt; &lt;string&gt;alipay&lt;/string&gt; &lt;string&gt;alipayshare&lt;/string&gt; &lt;string&gt;renrenios&lt;/string&gt; &lt;string&gt;renrenapi&lt;/string&gt; &lt;string&gt;renren&lt;/string&gt; &lt;string&gt;renreniphone&lt;/string&gt; &lt;string&gt;laiwangsso&lt;/string&gt; &lt;string&gt;yixin&lt;/string&gt; &lt;string&gt;yixinopenapi&lt;/string&gt; &lt;string&gt;yixinoauth&lt;/string&gt; &lt;string&gt;yixinfav&lt;/string&gt; &lt;string&gt;laiwangsso&lt;/string&gt; &lt;string&gt;instagram&lt;/string&gt; &lt;string&gt;whatsapp&lt;/string&gt; &lt;string&gt;line&lt;/string&gt; &lt;string&gt;tumblr&lt;/string&gt; &lt;string&gt;fbapi&lt;/string&gt; &lt;string&gt;fb-messenger-api&lt;/string&gt; &lt;string&gt;fbauth2&lt;/string&gt; &lt;string&gt;fbshareextension&lt;/string&gt; &lt;string&gt;kakao6d5e4ca98ba3b944020c2c90953318e9&lt;/string&gt; &lt;string&gt;kakaokompassauth&lt;/string&gt; &lt;string&gt;storykompassauth&lt;/string&gt; &lt;string&gt;kakaolink&lt;/string&gt; &lt;string&gt;kakaotalk-4.5.0&lt;/string&gt; &lt;string&gt;kakaostory-2.9.0&lt;/string&gt; &lt;string&gt;pinterestsdk.v1&lt;/string&gt; &lt;string&gt;dingtalk&lt;/string&gt; &lt;string&gt;dingtalk-open&lt;/string&gt; &lt;string&gt;evernote&lt;/string&gt; &lt;string&gt;en&lt;/string&gt; &lt;string&gt;enx&lt;/string&gt; &lt;string&gt;evernotecid&lt;/string&gt; &lt;string&gt;evernotemsg&lt;/string&gt; &lt;string&gt;youdaonote&lt;/string&gt; &lt;string&gt;ynotedictfav&lt;/string&gt; &lt;string&gt;com.youdao.note.todayViewNote&lt;/string&gt; &lt;string&gt;ynotesharesdk&lt;/string&gt; &lt;string&gt;gplus&lt;/string&gt; &lt;string&gt;pocket&lt;/string&gt; &lt;string&gt;readitlater&lt;/string&gt; &lt;string&gt;pocket-oauth-v1&lt;/string&gt; &lt;string&gt;fb131450656879143&lt;/string&gt; &lt;string&gt;en-readitlater-5776&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterPro3&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterPro&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterProAlpha&lt;/string&gt; &lt;string&gt;com.ideashower.ReadItLaterProEnterprise&lt;/string&gt; &lt;string&gt;vk&lt;/string&gt; &lt;string&gt;vk-share&lt;/string&gt; &lt;string&gt;vkauthorize&lt;/string&gt; &lt;/array&gt; Êé•‰∏ãÊù•ÂèØ‰ª•Âø´‰πêÁöÑcommond + b ‰∫ÜÂàùÂßãÂåñ Âú®Appdelegate.m‰∏≠ ÔºåÂØºÂÖ•Â§¥Êñá‰ª∂#import &lt;UMSocialCore/UMSocialCore.h&gt; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556//Âª∫ËÆÆÊäΩÊàê‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñπÊ≥ïÔºåÂà´Âú®‰∏Ä‰∏™ÂáΩÊï∞ÈáåÈù¢ÊâßË°åÂ§™Â§öÁöÑ‰∏úË•ø- (void)initUMShareSdk{ //ÊâìÂºÄÊó•Âøó [[UMSocialManager defaultManager] openLog:YES]; // ÊâìÂºÄÂõæÁâáÊ∞¥Âç∞ //[UMSocialGlobal shareInstance].isUsingWaterMark = YES; // Ëé∑ÂèñÂèãÁõüsocialÁâàÊú¨Âè∑ UMSocialLogInfo(@&quot;UMeng social version: %@&quot;, [UMSocialGlobal umSocialSDKVersion]); //ËÆæÁΩÆÂèãÁõüappkey [[UMSocialManager defaultManager] setUmSocialAppkey:@‚Äúyour UMKey‚Äù]; //ËÆæÁΩÆÂæÆ‰ø°ÁöÑappKeyÂíåappSecret [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_WechatSession appKey:@&quot;wxdc1e388c3822c80b&quot; appSecret:@&quot;3baf1193c85774b3fd9d18447d76cab0&quot; redirectURL:@&quot;https://zhonfan.com&quot;]; /* * Ê∑ªÂä†Êüê‰∏ÄÂπ≥Âè∞‰ºöÂä†ÂÖ•Âπ≥Âè∞‰∏ãÊâÄÊúâÂàÜ‰∫´Ê∏†ÈÅìÔºåÂ¶ÇÂæÆ‰ø°ÔºöÂ•ΩÂèã„ÄÅÊúãÂèãÂúà„ÄÅÊî∂ËóèÔºåQQÔºöQQÂíåQQÁ©∫Èó¥ * ‰ª•‰∏ãÊé•Âè£ÂèØÁßªÈô§Áõ∏Â∫îÂπ≥Âè∞Á±ªÂûãÁöÑÂàÜ‰∫´ÔºåÂ¶ÇÂæÆ‰ø°Êî∂ËóèÔºåÂØπÂ∫îÁ±ªÂûãÂèØÂú®Êûö‰∏æ‰∏≠Êü•Êâæ */ //[[UMSocialManager defaultManager] removePlatformProviderWithPlatformTypes:@[@(UMSocialPlatformType_WechatFavorite)]]; // ËÆæÁΩÆÂàÜ‰∫´Âà∞QQ‰∫íËÅîÁöÑappID // U-Share SDK‰∏∫‰∫ÜÂÖºÂÆπÂ§ßÈÉ®ÂàÜÂπ≥Âè∞ÂëΩÂêçÔºåÁªü‰∏ÄÁî®appKeyÂíåappSecretËøõË°åÂèÇÊï∞ËÆæÁΩÆÔºåËÄåQQÂπ≥Âè∞‰ªÖÈúÄÂ∞ÜappID‰Ωú‰∏∫U-ShareÁöÑappKeyÂèÇÊï∞‰º†ËøõÂç≥ÂèØ„ÄÇ [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_QQ appKey:@&quot;1105860513&quot;/*ËÆæÁΩÆQQÂπ≥Âè∞ÁöÑappID*/ appSecret:nil redirectURL:@&quot;https://zhonfan.com&quot;]; //ËÆæÁΩÆÊñ∞Êµ™ÁöÑappKeyÂíåappSecret [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_Sina appKey:@&quot;3921700954&quot; appSecret:@&quot;04b48b094faeb16683c32669824ebdad&quot; redirectURL:@&quot;https://zhonfan.com&quot;];}//#define __IPHONE_10_0 100000#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt; 100000- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;UIApplicationOpenURLOptionsKey, id&gt; *)options{ BOOL result = [[UMSocialManager defaultManager] handleOpenURL:url]; if (!result) { // ÂÖ∂‰ªñÂ¶ÇÊîØ‰ªòÁ≠âSDKÁöÑÂõûË∞É } return result;}#endif- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation{ BOOL result = [[UMSocialManager defaultManager] handleOpenURL:url]; if (!result) { // ÂÖ∂‰ªñÂ¶ÇÊîØ‰ªòÁ≠âSDKÁöÑÂõûË∞É } return result;}- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url{ BOOL result = [[UMSocialManager defaultManager] handleOpenURL:url]; if (!result) { // ÂÖ∂‰ªñÂ¶ÇÊîØ‰ªòÁ≠âSDKÁöÑÂõûË∞É } return result;} OK AppDelegateËÆæÁΩÆÂÆåÊàêÔºåÊé•‰∏ãÊù•ÊòØÂ¶Ç‰ΩïË∞ÉÁî®12345/** ÂàÜ‰∫´ @param obj obj ÂèØ‰∏∫Êú¨Âú∞ÂõæÁâá(UIImageÁ±ªÂûã),ÁΩëÁªúÂõæÁâá,(NSStringÁ±ªÂûã,Âõ†‰∏∫Âè™ËÉΩ‰∏ä‰º†httpsÁöÑÂõæÁâáÔºåÊâÄ‰ª•ÂÜÖÈÉ®‰ΩøÁî®SDWebImageManagerÔºåSDWebImageÁ¨¨‰∏âÊñπÂ∫ìÁöÑ‰∏Ä‰∏™Á±ªÔºå‰ΩøÁî®ËøôÁ±ªËøõË°åÂõæÁâá‰∏ãËΩΩÂ§ÑÁêÜ) */- (void)shareWithObj:(id)obj; ‰ΩøÁî®Ëøô‰∏™ÂàÜÁ±ªËøõË°åÂ§ÑÁêÜÔºåÂª∫ËÆÆ‰ª•ÂêéÈÅáÂà∞Á±ª‰ººÁöÑÔºåÁªßÊâøÊàñËÄÖÂàÜÁ±ªÔºåÈöîÁ¶ª‰∏Ä‰∏ã","link":"/ÁºñÁ®ã/Ô£ø/iosyoumeng/"},{"title":"ÁßªÂä®Á´ØÁΩëÁªúËØ∑Ê±Ç‰ºòÂåñ‰πã IP ÊµãÈÄüÊéíÂ∫èÊñπÊ°à","text":"IP ÊµãÈÄüÊéíÂ∫èÊñπÊ°à 1. IP ÊµãÈÄüÊéíÂ∫èÊñπÊ°àÁöÑÁõÆÁöÑÊó†ËÆ∫ÊòØ‰ªé Local DNS Ëß£ÊûêÂüüÂêçÔºåËé∑ÂèñÂà∞ IP ÂàóË°®ÔºåËøòÊòØ‰ªéÁ¨¨‰∏âÊñπÁöÑ DNS Ëß£ÊûêÊúçÂä°‰∏≠ÔºåËé∑ÂèñÂà∞ÂüüÂêçÂØπÂ∫îÁöÑ IP ÂàóË°®„ÄÇÊàë‰ª¨Ëé∑ÂæóÂ§ö‰∏™ IP ÂêéÔºåÊÄªÊòØÊÉ≥ÈÄâÂèñ‰∏Ä‰∏™ÊúÄ‰ºòÁöÑ IP ‰ΩøÁî®ÔºåÊú¨Êñá‰∏ªË¶ÅÊé¢ËÆ®Â¶Ç‰ΩïÂú®ÂÆ¢Êà∑Á´ØÊé¢Êµã IP ÁöÑËøûÊé•ÊÄß‰ª•ÂèäËøûÊé•ÈÄüÂ∫¶Ôºå‰øùËØÅËøîÂõûÂèØÁî®ÊÄßÊúÄÂ•ΩÁöÑIPÔºå‰ª•ËææÂà∞‚ÄúIP‰ºòÈÄâ‚ÄùÁöÑÁõÆÁöÑ„ÄÇ 2. Êñ∞Êµ™ÂºÄÊ∫êÁöÑ httpdns ÁöÑ sdk ÈáåÁöÑÊµãÈÄüÈÄªËæëÊñ∞Êµ™ÂºÄÊ∫ê‰∏Ä‰∏™ HTTPDNSLib ÔºåÈáåÈù¢ÂåÖÂê´‰∫ÜÊµãÈÄüÈÄªËæëÔºåGitHubÂú∞ÂùÄÂ¶Ç‰∏ãÔºö „ÄäHTTPDNSLib-for-iOS„Äã „ÄäHTTPDNSLib„Äã 3. IP ÊµãËØïÂÆûÁé∞ÂéüÁêÜ‰ΩøÁî® linux socket connect Âíå select ÂáΩÊï∞ÂÆûÁé∞ÁöÑ„ÄÇ Âü∫‰∫é‰ª•‰∏ãÂéüÁêÜÔºö Âç≥‰ΩøÂ•óÊé•Âè£ÊòØÈùûÈòªÂ°ûÁöÑ„ÄÇÂ¶ÇÊûúËøûÊé•ÁöÑÊúçÂä°Âô®Âú®Âêå‰∏ÄÂè∞‰∏ªÊú∫‰∏äÔºåÈÇ£‰πàÂú®Ë∞ÉÁî®connect Âª∫Á´ãËøûÊé•Êó∂ÔºåËøûÊé•ÈÄöÂ∏∏‰ºöÁ´ãÂç≥Âª∫Á´ãÊàêÂäüÔºåÊàë‰ª¨ÂøÖÈ°ªÂ§ÑÁêÜËøôÁßçÊÉÖÂÜµ„ÄÇ Ê∫êËá™BerkeleyÁöÑÂÆûÁé∞(ÂíåPosix.1g)Êúâ‰∏§Êù°‰∏éselect ÂíåÈùûÈòªÂ°ûIOÁõ∏ÂÖ≥ÁöÑËßÑÂàôÔºöA. ÂΩìËøûÊé•Âª∫Á´ãÊàêÂäüÊó∂ÔºåÂ•óÊé•Âè£ÊèèËø∞Á¨¶ÂèòÊàêÂèØÂÜôÔºõB. ÂΩìËøûÊé•Âá∫ÈîôÊó∂ÔºåÂ•óÊé•Âè£ÊèèËø∞Á¨¶ÂèòÊàêÊó¢ÂèØËØªÂèàÂèØÂÜô„ÄÇ ËØ¶ÁªÜÁöÑÊµãÈÄüÂÆûÁé∞Â¶Ç‰∏ãÔºåÂéüÁêÜÂèÇËÄÉÊ≥®ÈáäÔºö ‰ª• iOS ÂÆûÁé∞‰∏∫‰æãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889//#define CYL_SOCKET_CONNECT_TIMEOUT 10 //Âçï‰ΩçÁßí//#define CYL_SOCKET_CONNECT_TIMEOUT_RTT 600000//10ÂàÜÈíü Âçï‰ΩçÊØ´Áßí- (int)testSpeedOf:(NSString *)ip port:(int16_t)port { NSString *oldIp = ip; //request time out float rtt = 0.0; //sockÔºöÂ∞ÜË¶ÅË¢´ËÆæÁΩÆÊàñËÄÖËé∑ÂèñÈÄâÈ°πÁöÑÂ•óÊé•Â≠ó„ÄÇ int s = 0; struct sockaddr_in saddr; saddr.sin_family = AF_INET; // MARK: - ËÆæÁΩÆÁ´ØÂè£ÔºåËøôÈáåÈúÄË¶ÅÊ†πÊçÆÈúÄË¶ÅËá™ÂÆö‰πâÔºåÈªòËÆ§ÊòØ80Á´ØÂè£„ÄÇ saddr.sin_port = htons(port); saddr.sin_addr.s_addr = inet_addr([ip UTF8String]); //saddr.sin_addr.s_addr = inet_addr(&quot;1.1.1.123&quot;); if( (s=socket(AF_INET, SOCK_STREAM, 0)) &lt; 0) { NSLog(@&quot;ERROR:%s:%d, create socket failed.&quot;,__FUNCTION__,__LINE__); return 0; } NSDate *startTime = [NSDate date]; NSDate *endTime; //‰∏∫‰∫ÜËÆæÁΩÆconnectË∂ÖÊó∂ ÊääsocketËÆæÁΩÆÁß∞‰∏∫ÈùûÈòªÂ°û int flags = fcntl(s, F_GETFL,0); fcntl(s,F_SETFL, flags | O_NONBLOCK); //ÂØπ‰∫éÈòªÂ°ûÂºèÂ•óÊé•Â≠óÔºåË∞ÉÁî®connectÂáΩÊï∞Â∞ÜÊøÄÂèëTCPÁöÑ‰∏âÊ¨°Êè°ÊâãËøáÁ®ãÔºåËÄå‰∏î‰ªÖÂú®ËøûÊé•Âª∫Á´ãÊàêÂäüÊàñËÄÖÂá∫ÈîôÊó∂ÊâçËøîÂõûÔºõ //ÂØπ‰∫éÈùûÈòªÂ°ûÂºèÂ•óÊé•Â≠óÔºåÂ¶ÇÊûúË∞ÉÁî®connectÂáΩÊï∞‰ºö‰πãÈó¥ËøîÂõû-1ÔºàË°®Á§∫Âá∫ÈîôÔºâÔºå‰∏îÈîôËØØ‰∏∫EINPROGRESSÔºåË°®Á§∫ËøûÊé•Âª∫Á´ãÔºåÂª∫Á´ãÂêØÂä®‰ΩÜÊòØÂ∞öÊú™ÂÆåÊàêÔºõ //Â¶ÇÊûúËøîÂõû0ÔºåÂàôË°®Á§∫ËøûÊé•Â∑≤ÁªèÂª∫Á´ãÔºåËøôÈÄöÂ∏∏ÊòØÂú®ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Âú®Âêå‰∏ÄÂè∞‰∏ªÊú∫‰∏äÊó∂ÂèëÁîü„ÄÇ int i = connect(s,(struct sockaddr*)&amp;saddr, sizeof(saddr)); if(i == 0) { //Âª∫Á´ãËøûÊé•ÊàêÂäüÔºåËøîÂõûrttÊó∂Èó¥„ÄÇ Âõ†‰∏∫connectÊòØÈùûÈòªÂ°ûÔºåÊâÄ‰ª•Ëøô‰∏™Êó∂Èó¥Â∞±ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊâßË°åÁöÑÊó∂Èó¥ÔºåÊØ´ÁßíÁ∫ßÔºåÊ≤°ÂøÖË¶ÅÂÜçÊµãÈÄü‰∫Ü„ÄÇ close(s); return 1; } struct timeval tv; int valopt; socklen_t lon; tv.tv_sec = CYL_SOCKET_CONNECT_TIMEOUT; tv.tv_usec = 0; fd_set myset; FD_ZERO(&amp;myset); FD_SET(s, &amp;myset); // MARK: - ‰ΩøÁî®selectÂáΩÊï∞ÔºåÂØπÂ•óÊé•Â≠óÁöÑIOÊìç‰ΩúËÆæÁΩÆË∂ÖÊó∂„ÄÇ /** selectÂáΩÊï∞ selectÊòØ‰∏ÄÁßçIOÂ§öË∑ØÂ§çÁî®Êú∫Âà∂ÔºåÂÆÉÂÖÅËÆ∏ËøõÁ®ãÊåáÁ§∫ÂÜÖÊ†∏Á≠âÂæÖÂ§ö‰∏™‰∫ã‰ª∂ÁöÑ‰ªª‰Ωï‰∏Ä‰∏™ÂèëÁîüÔºåÂπ∂‰∏îÂú®Êúâ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™‰∫ã‰ª∂ÂèëÁîüÊàñËÄÖÁªèÂéÜ‰∏ÄÊÆµÊåáÂÆöÁöÑÊó∂Èó¥ÂêéÊâçÂî§ÈÜíÂÆÉ„ÄÇ connectÊú¨Ë∫´Âπ∂‰∏çÂÖ∑ÊúâËÆæÁΩÆË∂ÖÊó∂ÂäüËÉΩÔºåÂ¶ÇÊûúÊÉ≥ÂØπÂ•óÊé•Â≠óÁöÑIOÊìç‰ΩúËÆæÁΩÆË∂ÖÊó∂ÔºåÂèØ‰ΩøÁî®selectÂáΩÊï∞„ÄÇ **/ int maxfdp = s+1; int j = select(maxfdp, NULL, &amp;myset, NULL, &amp;tv); if (j == 0) { NSLog(@&quot;INFO:%s:%d, test rtt of (%@) timeout.&quot;,__FUNCTION__,__LINE__, oldIp); rtt = CYL_SOCKET_CONNECT_TIMEOUT_RTT; close(s); return rtt; } if (j &lt; 0) { NSLog(@&quot;ERROR:%s:%d, select function error.&quot;,__FUNCTION__,__LINE__); rtt = 0; close(s); return rtt; } /** ÂØπ‰∫éselectÂíåÈùûÈòªÂ°ûconnectÔºåÊ≥®ÊÑè‰∏§ÁÇπÔºö [1] ÂΩìËøûÊé•ÊàêÂäüÂª∫Á´ãÊó∂ÔºåÊèèËø∞Á¨¶ÂèòÊàêÂèØÂÜôÔºõ [2] ÂΩìËøûÊé•Âª∫Á´ãÈÅáÂà∞ÈîôËØØÊó∂ÔºåÊèèËø∞Á¨¶Âèò‰∏∫Âç≥ÂèØËØªÔºå‰πüÂèØÂÜôÔºåÈÅáÂà∞ËøôÁßçÊÉÖÂÜµÔºåÂèØË∞ÉÁî®getsockoptÂáΩÊï∞„ÄÇ **/ lon = sizeof(int); //valopt Ë°®Á§∫ÈîôËØØ‰ø°ÊÅØ„ÄÇ // MARK: - ÊµãËØïÊ†∏ÂøÉÈÄªËæëÔºåËøûÊé•ÂêéÔºåËé∑ÂèñÈîôËØØ‰ø°ÊÅØÔºåÂ¶ÇÊûúÊ≤°ÊúâÈîôËØØ‰ø°ÊÅØÂ∞±ÊòØËÆøÈóÆÊàêÂäü /*! * //getsockoptÂáΩÊï∞ÂèØËé∑ÂèñÂΩ±ÂìçÂ•óÊé•Â≠óÁöÑÈÄâÈ°πÔºåÊØîÂ¶ÇSOCKETÁöÑÂá∫Èîô‰ø°ÊÅØ * (get socket option) */ getsockopt(s, SOL_SOCKET, SO_ERROR, (void*)(&amp;valopt), &amp;lon); //Â¶ÇÊûúÊúâÈîôËØØ‰ø°ÊÅØÔºö if (valopt) { NSLog(@&quot;ERROR:%s:%d, select function error.&quot;,__FUNCTION__,__LINE__); rtt = 0; } else { endTime = [NSDate date]; rtt = [endTime timeIntervalSinceDate:startTime] * 1000; } close(s); return rtt;} Ê≥®ÊÑèÔºöÂΩìÂá∫Áé∞ÈîôËØØÁöÑÊó∂ÂÄôÊµãËØïÁªìÊûúÊòØÈÄüÂ∫¶ÊòØ0ÔºåÊâÄ‰ª•ÊéíÂ∫èÊó∂‰∏çËÉΩÁÆÄÂçïÂú∞ÊåâÁÖßÂÄºÂ§ßÂ∞èÊéíÂ∫èÔºåÂèØ‰ª•ÂÖàÂà†Èô§ÈÄüÂ∫¶‰∏∫0ÁöÑÁªìÊûúÔºåÊàñËÄÖÂ∞ÜÈÄüÂ∫¶‰∏∫Èõ∂ÈáçÁΩÆ‰∏∫Ë∂ÖÊó∂Êó∂Èó¥ÔºåÊØîÂ¶Ç‰∏äÈù¢ÁöÑ CYL_SOCKET_CONNECT_TIMEOUT_RTT „ÄÇÈÅøÂÖçÈîôËØØIP‰∏∫0ÔºåÁªìÊûúÊéíÂ∫èÂêéÊéíÂú®ÂâçÈù¢„ÄÇ Posted by ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÂéüÂàõÊñáÁ´†ÔºåÁâàÊùÉÂ£∞ÊòéÔºöËá™Áî±ËΩ¨ËΩΩ-ÈùûÂïÜÁî®-ÈùûË°çÁîü-‰øùÊåÅÁΩ≤Âêç | Creative Commons BY-NC-ND 3.0","link":"/ÁºñÁ®ã/Ô£ø/ip/"},{"title":"iPhoneÂºÄÂèëËÄÖÈÄâÈ°π","text":"iOS‰∏äÁöÑÂºÄÂèëËÄÖÈÄâÈ°πÔºåËøô‰∏™ÂäüËÉΩ‰ªéiOSÁ≥ªÁªüÂàöÂºÄÂßãÊó∂Â∞±Â∑≤ÁªèÂ≠òÂú®‰∫Ü„ÄÇÊÉ≥Ë¶ÅÊâìÂºÄËøô‰∏™ÂäüËÉΩÔºåÊàë‰ª¨ÈúÄË¶ÅÊª°Ë∂≥‰∏ÄÂÆöÁöÑÊù°‰ª∂ÔºåÈ¶ñÂÖà‰Ω†ÈúÄË¶ÅÂ∞ÜiPhoneÂíå‰∏ÄÂè∞MacÁîµËÑëÁõ∏ËøûÊé•ÔºåÁÑ∂ÂêéÂú®Mac‰∏äÊâìÂºÄXcodeÂºÄÂèëÂ∑•ÂÖ∑ÔºåÊ≠§Êó∂‰Ω†iPhoneÁöÑËÆæÁΩÆÈáåÂ∞±‰ºöÂá∫Áé∞‚ÄúÂºÄÂèëËÄÖ‚ÄùËøô‰∏™ÈÄâÈ°π‰∫Ü„ÄÇ Ê≠•È™§Ôºö 1„ÄÅÁî®Êï∞ÊçÆÁ∫øËøûÊé•iPhoneÂíåmac2„ÄÅÊâìÂºÄxcodeÔºåÈÄâÊã©Xcode -&gt; Windows-&gt;Devices ,Â¶ÇÂõæÔºö3„ÄÅÈÄâÊã©Ëá™Â∑±ÁöÑÊâãÊú∫ÔºåÂè≥ÈîÆÂçïÂáªÈÄâÊã©Show Provisioning Profiles‚Ä¶ÔºåÂ¶ÇÂõæÔºö4„ÄÅÂú®ÂºπÁ™ó‰∏≠ÁöÑÂàóË°®‰∏≠Êü•ÁúãÔºåÊòØÂê¶ÊúâÂºÄÂèëËÄÖËØÅ‰π¶ÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±ÁÇπÂáª‚Äú+‚ÄùÔºåÊ∑ªÂä†ÂºÄÂèëËÄÖËØÅ‰π¶ÔºåÂÆåÊàêÂêéÁÇπÂáª‚ÄúDone‚Äù„ÄÇÂ¶ÇÂõæÔºö 5„ÄÅÂÖ≥Èó≠Á™óÂè£ÔºåÊü•ÁúãÊâãÊú∫‚ÄúËÆæÁΩÆ‚Äù‰∏≠Ôºå‚ÄúÂºÄÂèëËÄÖ‚ÄùÂ∑≤ÁªèÈªòÈªòÁöÑË∫∫Âú®ÈÇ£Èáå‰∫Ü„ÄÇ„ÄÇ„ÄÇ iOS‰∏äÁöÑÂºÄÂèëËÄÖÈÄâÈ°πÂÆåÂÖ®ÊòØ‰∏∫ËΩØ‰ª∂ÂºÄÂèëËÄÖÊúçÂä°ÁöÑ InstrumentsÂèØ‰ª•ÁêÜËß£‰∏∫ÊòØ‰∏Ä‰∏™Êó•ÂøóËÆ∞ÂΩïÂ∑•ÂÖ∑ÔºåÂèØ‰ª•ËÆ∞ÂΩï‰∏ãÁîµÈáèÂíåÁΩëÁªúÁöÑ‰ΩøÁî®ÊÉÖÂÜµÔºåÂà©Áî®XcodeÂèØ‰ª•ÂØºÂá∫Ëøô‰∫õÊó•Âøó„ÄÇ Network Link ConditionerÊòØÊ®°ÊãüÁΩëÁªúÔºåÂèØ‰ª•ËÆ©Áî®Êà∑Ê®°Êãü‰∏çÂêåÁöÑÁΩëÁªúËøûÊé•ÂíåÂ∏¶ÂÆΩÔºåÂèØ‰æõMacÂíåiOSÂºÄÂèëËÄÖÊµãËØïËá™Â∑±ÁöÑÁ®ãÂ∫èÂú®‰∏çÂêåÁΩëÁªúÁéØÂ¢É‰∏ãÁöÑË°®Áé∞„ÄÇ ËøòÊúâÂÖ∂‰ªñÈÄâÈ°πÂÉèÊòØIDAÂπøÂëäÊµãËØï„ÄÅÂπøÂëäÂà∑Êñ∞ÁéáÊµãËØï„ÄÅÂ™í‰ΩìÊúçÂä°ÊµãËØï„ÄÅÊ¨ßÁõüÈü≥ÈáèÈôêÂà∂ÊµãËØïÁ≠âÂÜÖÂÆπ„ÄÇ Êè¥Âºï iPhone iOS9Á≥ªÁªü‰∏≠ ËÆæÁΩÆÔºç&gt;ÂºÄÂèëËÄÖ ÂØπÂ∫îÁöÑÁøªËØë iPhone‰∏≠Â¶Ç‰ΩïÊâìÂºÄ‚ÄúÂºÄÂèëËÄÖ‚ÄùÈÄâÈ°π","link":"/ÁºñÁ®ã/Ô£ø/iphone/"},{"title":"Ê∑±ÂÖ•ÂâñÊûê-JavaScriptCore","text":"ÂâçË®ÄÊúÄËøëÂºÄÂßãÊ∂âÂèä JS ÁöÑËß£ÊûêÂíåÂ§ÑÁêÜÂ∑•‰ΩúÔºåÊâÄ‰ª•‰∏ìÈó®Á†îÁ©∂‰∫Ü‰∏ãËøôÂùó„ÄÇÁâπÂà´ÊòØÂä®ÊÄÅÁ±ªÂûãÁöÑÂ§ÑÁêÜ‰ª•Âèä‰∏çÂêåÂºïÊìéÂØπ‰∫éÂπ≥Âè∞Êó†ÂÖ≥ÁöÑÂ≠óËäÇÁ†ÅÁöÑËÆæËÆ°ÂíåÂ§ÑÁêÜ‰ºöÊúâÂæàÂ§ßÁöÑÂ∏ÆÂä©„ÄÇ JavaScriptCore ‰ªãÁªçJavaScriptCore ÊòØ JavaScript ÂºïÊìéÔºåÈÄöÂ∏∏‰ºöË¢´Âè´ÂÅöËôöÊãüÊú∫Ôºå‰∏ìÈó®ËÆæËÆ°Êù•Ëß£ÈáäÂíåÊâßË°å JavaScript ‰ª£Á†Å„ÄÇÊúÄÂºÄÂßãÁöÑ JavaScriptCore ÊòØ‰ªé KJSÔºàKDE ÁöÑ JavaScript ÂºïÊìéÔºâ‰ª•Âèä PCRE Ê≠£ÂàôË°®ËææÂºèÁöÑÂü∫Á°Ä‰∏äÂºÄÂèëÁöÑÔºåÊòØÂü∫‰∫éÊäΩË±°ËØ≠Ê≥ïÊ†ëÁöÑËß£ÈáäÂô®„ÄÇ2008 Âπ¥ÈáçÂÜô‰∫ÜÔºåÂè´ÂÅö SquirrelFishÔºåÂêéÊù•ÊòØ SquirrelFish ExtremeÔºåÂèàÂè´ Nitro„ÄÇÁõÆÂâç JavaScript ÂºïÊìéËøòÊúâ Google ÁöÑ V8 ÔºåMozilla ÁöÑ SpiderMonkey„ÄÇ JavaScriptCore ËøòËÉΩÂ§üÂú® Objective-C Á®ãÂ∫è‰∏≠Êù•ÊâßË°å JavaScript ÁöÑ‰ª£Á†ÅÔºå‰πüÂèØ‰ª•Âú® JavaScript ÁéØÂ¢É‰∏≠ÊèíÂÖ•Ëá™ÂÆö‰πâÂØπË±°„ÄÇ JavaScriptCore ÂÖ®Ë≤å‰∏ãÈù¢ÊòØËß£Êûê JavaScript Ê∫êÁ†ÅËß£ÊûêÁºñËØëÁöÑËØ¶ÁªÜÊµÅÁ®ãÂõæÔºö ‰∏ªË¶ÅÊ®°Âùó LexerÔºöËØçÊ≥ïÂàÜÊûêÂô®ÔºåÁîüÊàê tokensÔºåÂ§ßÈÉ®ÂàÜ‰ª£Á†ÅÈÉΩÂú® parser/Lexer.cpp Èáå„ÄÇ ParserÔºöËØ≠Ê≥ïÂàÜÊûêÔºåÂü∫‰∫é Lexer ÁöÑ tokens ÁîüÊàêËØ≠Ê≥ïÊ†ë„ÄÇÊâãÂÜô‰∫Ü‰∏™ recusive descent parser ÈÄíÂΩí‰∏ãÈôçËß£ÊûêÂô®Ôºå‰ª£Á†Å‰∏ªË¶ÅÂú® parser/Parser.cpp Èáå„ÄÇ LLIntÔºöLow Level Interpreter ÊâßË°å Parser ÁîüÊàêÁöÑ Byte code„ÄÇ‰ª£Á†ÅÂú® llint/ ÈáåÔºå‰ΩøÁî®Ê±áÁºñÔºåÂú® offlineasm/ ÈáåÔºåÂèØ‰ª•ÁºñËØë‰∏∫ x86 Âíå ARMv7 ÁöÑÊ±áÁºñÂíå C ‰ª£Á†Å„ÄÇLLInt Â∏åÊúõËææÊàêÈô§‰∫ÜËØçÊ≥ïÂíåËØ≠Ê≥ïÂàÜÊûêÂ§ñÈõ∂ÂêØÂä®Ê∂àËÄóÔºåÂêåÊó∂ÈÅµÂÆàÁî® JIT Âú®Ë∞ÉÁî®ÔºåÂ†ÜÊ†àÂíåËµ∑Â≠òÂô®ÁöÑÁ∫¶ÂÆö„ÄÇ Baseline JITÔºöÂÆûÊó∂ÁºñËØëÔºåÊÄßËÉΩ‰∏çÂ•ΩÁî®Ëøô‰∏™„ÄÇÂú®ÂáΩÊï∞Ë∞ÉÁî®‰∫Ü 6 Ê¨°ÔºåÊàñËÄÖÊüêÊÆµ‰ª£Á†ÅÂæ™ÁéØ‰∫ÜÂ§ß‰∫é100Ê¨°‰ºöË¢´Ëß¶Âèë„ÄÇBaseLine JIT ÁöÑ‰ª£Á†ÅÂú® jit/ Èáå„ÄÇBaseLine JIT ËøòÂØπÂá†‰πéÊâÄÊúâÂ†ÜÁöÑËÆøÈóÆÊâßË°å‰∫ÜÂ§çÊùÇÁöÑÂ§öÊÄÅÂÜÖËÅîÈ´òÈÄüÁºìÂ≠òÔºàPolymorphic inline cachesÔºâ„ÄÇÂ§öÊÄÅÂÜÖËÅîÁºìÂ≠òÊòØ Smalltalk Á§æÂå∫‰ºòÂåñÂä®ÊÄÅÂàÜÂèëÁöÑ‰∏Ä‰∏™ÁªèÂÖ∏ÊäÄÊúØ„ÄÇ DFG JITÔºö‰ΩéÂª∂Ëøü‰ºòÂåñ JITÔºåÊõ¥Â∑ÆÊÄßËÉΩÂ∞±Áî®Ëøô‰∏™ÁîüÊàêÊõ¥‰ºòÂåñÁöÑÊú∫Âô®Á†ÅÊù•ÊâßË°å„ÄÇÂú®ÂáΩÊï∞Ë¢´Ë∞ÉÁî®‰∫Ü60Ê¨°ÊàñËÄÖ‰ª£Á†ÅÂæ™ÁéØ‰∫Ü1000Ê¨°‰ºöËß¶Âèë„ÄÇÂú® LLInt Âíå Baseline JIT ‰∏≠‰ºöÊî∂ÈõÜ‰∏Ä‰∫õÂåÖÊã¨ÊúÄËøëÂèÇÊï∞ÔºåÂ†Ü‰ª•ÂèäËøîÂõûÂÄº‰∏≠ÁöÑÊï∞ÊçÆÁ≠âËΩªÈáèÁ∫ßÁöÑÊÄßËÉΩ‰ø°ÊÅØÔºåÊñπ‰æø DFG ËøõË°åÁ±ªÂûãÂà§Êñ≠„ÄÇÂÖàËé∑ÂèñÁ±ªÂûã‰ø°ÊÅØÂèØ‰ª•ÂáèÂ∞ëÂ§ßÈáèÁöÑÁ±ªÂûãÊ£ÄÊü•ÔºåÊé®ÊµãÂ§±Ë¥• DFG ‰ºöÂèñÊ∂à‰ºòÂåñÔºå‰πüÂè´ OSR exit„ÄÇÂèñÊ∂àÂèØ‰ª•ÊòØÂêåÊ≠•ÁöÑ‰πüÂèØ‰ª•ÊòØÂºÇÊ≠•ÁöÑ„ÄÇÂèñÊ∂àÂêé‰ºöÂõûÂà∞ Baseline JITÔºåÈÄÄÂõû‰∏ÄÂÆöÊ¨°Êï∞‰ºöËøõË°åÈáçÊñ∞‰ºòÂåñÔºåÊî∂ÈõÜÊõ¥Â§öÁªüËÆ°‰ø°ÊÅØÔºåÁúãÊÉÖÂÜµÂÜçÊ¨°Ë∞ÉÁî® DFG„ÄÇÈáçÊñ∞‰ºòÂåñ‰ΩøÁî®ÁöÑÊòØÊåáÊï∞ÂºèÂõûÈÄÄÁ≠ñÁï•Â∫îÂØπ‰∏Ä‰∫õÊÄ™ÂºÇÁöÑ‰ª£Á†Å„ÄÇDFG ‰ª£Á†ÅÂú® dfg/ Èáå„ÄÇ FTLÔºöÈ´òÂêûÂêêÈáè‰ºòÂåñ JITÔºåÂÖ®Áß∞ Faster Than LightÔºåDFG È´òÂ±Ç‰ºòÂåñÈÖçÂêà B3 Â∫ïÂ±Ç‰ºòÂåñ„ÄÇ‰ª•ÂâçÂÖ®Áß∞ÊòØ Fourth Tier LLVM Â∫ïÂ±Ç‰ºòÂåñ‰ΩøÁî®ÁöÑÊòØ LLVM„ÄÇB3 ÂØπ LLVM ÂÅö‰∫ÜË£ÅÂâ™ÔºåÂØπ JavaScriptCore ÂÅö‰∫ÜÁâπÊÄßÂ§ÑÁêÜÔºåB3 IR ÁöÑÊé•Âè£Âíå LLVM IR ÂæàÁ±ª‰ºº„ÄÇB3 ÂØπ LLVM ÁöÑÊõøÊç¢‰∏ªË¶ÅÊòØËÄÉËôëÂáèÂ∞ëÂÜÖÂ≠òÂºÄÈîÄÔºåLLVM ‰∏ªË¶ÅÊòØÈíàÂØπÁºñËØëÂô®ÔºåÁºñËØëÂô®Âú®ËøôÊñπÈù¢‰ºòÂåñÂä®ÂäõÂøÖÁÑ∂Ê≤°Êúâ JIT ÈúÄÊ±ÇÈ´ò„ÄÇB3 IR Â∞ÜÊåáÈíàÊîπÊàê‰∫ÜÊõ¥Á¥ßÂáëÁöÑÊï¥Êï∞Êù•Ë°®Á§∫ÂºïÁî®ÂÖ≥Á≥ª„ÄÇ‰∏çÂèØÂèòÁöÑÂ∏∏Áî®ÁöÑ‰ø°ÊÅØ‰ΩøÁî®Âõ∫ÂÆöÂ§ßÂ∞èÁöÑÁªìÊûÑÊù•Ë°®Á§∫ÔºåÂÖ∂ÂÆÉÁöÑÈÉΩÊîæÂà∞Âè¶Â§ñÁöÑÂú∞Êñπ„ÄÇÁ¥ßÂáëÁöÑÊï∞ÊçÆÊîæÂà∞Êï∞ÁªÑ‰∏≠ÔºåÊõ¥Â§öÁöÑÊï∞ÁªÑÊõ¥Â∞ëÁöÑÈìæË°®„ÄÇËøôÊ†∑ÂΩ¢ÊàêÁöÑ IR Êõ¥ÁúÅÂÜÖÂ≠ò„ÄÇFilip Pizlo ‰∏ªÂØºÁöÑËøô‰∏™ÊîπÂä®ÔºåDFG JIT ‰πüÊòØ‰ªñÂºÑÁöÑÔºå‰∏∫‰∫ÜËÉΩÂ§üÊõ¥Â§öÁöÑÂáèÂ∞ëÂÜÖÂ≠ò‰∏äÁöÑÂºÄÈîÄÔºå‰ªñÂà©Áî®Âú® DFG ÈáåÂ∑≤ÁªèÂÅöÁöÑ InsertionSet Â∞Ü LLVM IR ÈáåÁöÑ def-use Âπ≤Êéâ‰∫ÜÔºåÂ§ßÊ¶ÇÊÄùË∑ØÊòØÊääÂçïÂêëÈìæË°®ÈáåÊâπÈáèÊèíÂÖ•Êñ∞ IR ËäÇÁÇπÂÖàÊîæÂà∞ InsertionSet ÈáåÔºåÂú®‰∏ãÊ¨°ÈÅçÂéÜ IR Êó∂ÂÜçÊâπÈáèÊèíÂÖ•„ÄÇFilip Pizlo ËøòÊää DFG ÈáåÁöÑ UpsilonValue Êõø‰ª£ LLVM SSA ÁªÑÊàêÈÉ®ÂàÜ„ÄÇB3 ÂêéÈù¢‰ºöÊää LLVM ÁöÑÂØÑÂ≠òÂô®ÂàÜÈÖçÁÆóÊ≥ï Greedy ‰∏ÄÁõ¥Âà∞ B3 ‰∏≠„ÄÇ ÊâßË°åÈÄüÂ∫¶ÁöÑÂØπÊØîÔºöÁõ∏ÂØπÈÄüÂ∫¶ÔºåË∂äÈ´òË°®Á§∫Ë∂äÂ•Ω„ÄÇ Êõ¥Â§öÁöÑËØ¥ÊòéÂèØ‰ª•ÂèÇÁúã WebKit ÂÆòÁΩë JavaScriptCore ÁöÑ Wiki È¶ñÈ°µÈÉ®ÂàÜÔºöhttps://trac.webkit.org/wiki/JavaScriptCore ‰∏ªË¶ÅÁöÑÊ∫êÁ†ÅÁõÆÂΩïÁªìÊûÑ APIÔºöJavaScriptCore ÂØπÂ§ñÁöÑÊé•Âè£Á±ª assemblerÔºö‰∏çÂêå CPU ÁöÑÊ±áÁºñÁîüÊàêÔºåÊØîÂ¶Ç ARM Âíå X86 b3Ôºöftl ÈáåÁöÑ Backend bytecodeÔºöÂ≠óËäÇÁ†ÅÁöÑÂÜÖÂÆπÔºåÊØîÂ¶ÇÁ±ªÂûãÂíåËÆ°ÁÆóËøáÁ®ã bytecompilerÔºöÁºñËØëÂ≠óËäÇÁ†Å ConfigurationsÔºöXcode ÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ DebuggerÔºöÁî®‰∫éÊµãËØïËÑöÊú¨ÁöÑÁ®ãÂ∫è dfgÔºöDFG JIT ÁºñËØëÂô® disassemblerÔºöÂèçÊ±áÁºñ heapÔºöËøêË°åÊó∂ÁöÑÂ†ÜÂíåÂûÉÂúæÂõûÊî∂Êú∫Âà∂ ftlÔºöÁ¨¨ÂõõÂ±ÇÁºñËØë interpreterÔºöËß£ÈáäÂô®ÔºåË¥üË¥£Ëß£ÊûêÊâßË°å ByteCode jitÔºöÂú®ËøêË°åÊó∂Â∞Ü ByteCode ËΩ¨ÊàêÊú∫Âô®Á†ÅÔºåÂä®ÊÄÅÂèäÊó∂ÁºñËØë„ÄÇ llintÔºöLow Level InterpreterÔºåÁºñËØëÂõõÂ±ÇÈáåÁöÑÁ¨¨‰∏ÄÂ±ÇÔºåË¥üË¥£Ëß£ÈáäÊâßË°å‰ΩéÊïàÂ≠óËäÇÁ†Å parserÔºöËØçÊ≥ïËØ≠Ê≥ïÂàÜÊûêÔºåÊûÑÂª∫ËØ≠Ê≥ïÊ†ë profilerÔºö‰ø°ÊÅØÊî∂ÈõÜÔºåËÉΩÊî∂ÈõÜÂáΩÊï∞Ë∞ÉÁî®È¢ëÁéáÂíåÊ∂àËÄóÊó∂Èó¥„ÄÇ runtimeÔºöËøêË°åÊó∂ÂØπ‰∫é js ÁöÑÂÖ®Â•óÊìç‰Ωú„ÄÇ wasmÔºöÂØπ WebAssembly ÁöÑÂÆûÁé∞„ÄÇ yarrÔºöYet Another Regex RuntimeÔºåËøêË°åÊó∂Ê≠£ÂàôË°®ËææÂºèÁöÑËß£Êûê JavaScriptCore ‰∏é WebCoreScriptController ‰ºöË∞ÉÁî® JavaScriptCore ÁöÑ evaluate Âíå checkSyntax ‰∏§‰∏™Êé•Âè£„ÄÇDOM ËäÇÁÇπÁöÑ JSBindings ÈÄöËøáÂõûÊ∫ØÂà∞ JSC::JSNonFinalObject ÂÆûÁé∞Âíå JavaScriptCore ÁöÑÁªëÂÆö„ÄÇ VM ÊòØ JavaScript ÁöÑ Runtime ÁéØÂ¢É„ÄÇGlobalObject ÊòØÂÖ®ÂâßÂØπË±°ÔºåË¥üË¥£ÁÆ°ÁêÜÊâßË°åÁéØÂ¢ÉÂíå Object ÁöÑ„ÄÇExecState ÊòØÊâßË°åËÑöÊú¨ÁöÑÂØπË±°ÔºåÁî± GlobalObject ÁÆ°ÁêÜÁöÑÔºåË¥üË¥£ËÆ∞ÂΩïËÑöÊú¨ÊâßË°å‰∏ä‰∏ãÊñá„ÄÇ Êé•Âè£ÊâßË°åËÑöÊú¨ÔºåÂàõÂª∫‰∏Ä‰∏™ ProgramExecutable ÂØπË±°Êù•Ë°®Á§∫Ë¶ÅÊâßË°åÁöÑËÑöÊú¨Ë¥üË¥£ÁºñËØëÊàê ByteCodeÔºåË∞ÉÁî® Interpreter ÊâßË°åËøô‰∏™ ByteCode„ÄÇ Binding ÊòØ WebCore ‰∏∫ JavaScriptCore Êèê‰æõÁöÑÂ∞ÅË£ÖÂ±Ç„ÄÇËøô‰∏ÄÂ±ÇÁöÑÂÆö‰πâÂèØ‰ª•Âú®ËøôÈáåÊâæÂà∞Ôºöhttps://trac.webkit.org/wiki/WebKitIDL„ÄÇWebKit ÂèÇÁÖßÁöÑÊòØ W3C Web IDL https://www.w3.org/TR/WebIDL-1/„ÄÇ ‰ΩøÁî® IDL ÂÆö‰πâÊé•Âè£ËßÑËåÉÔºåWebKit ‰ΩøÁî®‰∏ÄÁªÑ perl ËÑöÊú¨Êù•ËΩ¨Êç¢ IDLÔºåÂàùÂßãËÑöÊú¨ÊòØ generate-binding.pl„ÄÇÁîüÊàêÊé•Âè£‰∏é DOM ÁªÑ‰ª∂ÂÖ≥ËÅîÊòØÈÄöËøá JSNode Êù•ÁöÑ„ÄÇÊâßË°åËÑöÊú¨Âíå Frame ÁöÑ setDocument ‰ºöÊõ¥Êñ∞ document ÂØπË±°Âà∞ JavaScriptCoreÔºåÈÄöËøá JSDomWindowBase::updateDocument Êõ¥Êñ∞Âà∞ JSC::Heap Èáå„ÄÇ ËØçÊ≥ïËØ≠Ê≥ïÂàÜÊûêËØçÊ≥ïÂíåËØ≠Ê≥ïÂàÜÊûêÁ®ãÂ∫è JavaScriptCore ÊòØËá™Â∑±ÁºñÂÜôÁöÑ„ÄÇËØçÊ≥ïÂàÜÊûê‰ºöÊääÊñáÊú¨ÁêÜËß£ÊàêÂæàÂ§ö tokenÔºåÊØîÂ¶Ç a = 5; Â∞±‰ºöË¢´ËØÜÂà´Êàê‰∏ãÈù¢Ëøô‰∫õ tokenÔºåVARIABLE EQUAL CONSTANT END„ÄÇÁÑ∂ÂêéÈÄöËøáËØ≠Ê≥ïÂàÜÊûêÔºåËæìÂá∫ËØ≠Ê≥ïÊ†ë„ÄÇ ÈúÄË¶ÅÂÖàËÆæËÆ°Â•Ω NodeÔºåNode ÁöÑÁ±ªÂÖ≥Á≥ªÂõæÂ¶Ç‰∏ãÔºö‰∏æ‰∏™ÂåÖÂê´Âä†Âíå‰πòÁöÑ statement ÊòØÂ¶Ç‰ΩïÁªÑÊàê AST ÁöÑ 1o.x * o.x + o.y * o.y heap ‰ª£Ë°®ÁöÑÊòØÂèØËßÅÊï∞ÊçÆÔºåpure ‰ª£Ë°®ÁöÑÊòØÊäΩË±°ËØ¥Êòé„ÄÇ ‰∏ãÈù¢ÁúãÁúã Object ÁöÑÊûÑÈÄ† 1234var o = new Object();o.f = 1;o.g = 2;o.h = 3; Êé•‰∏ãÊù•ÁúãÁúã function ÁöÑ 123456function foo(o) { if (o.f &amp;&amp; o.f() == 42) print(&quot;hello&quot;); if (o.g &amp;&amp; o.g() == 63) print(&quot;bye&quot;);} ËøòÊúâ‰∫õÂÖ∂ÂÆÉÁöÑ parser ÊØîÂ¶Ç Esprima Êèê‰æõ‰∫Ü‰∏Ä‰∏™Âú®Á∫ø demo ÂèØ‰ª•Âú®Á∫ø Parser„ÄÇÂÆûÁé∞ÁöÑ‰ª£Á†ÅÂú®ËøôÈáåÔºöhttps://github.com/jquery/esprima/tree/master/src ‰∏ªË¶Å‰ΩøÁî®ÁöÑÊòØÈÄíÂΩí‰∏ãÈôçÂíåËøêÁÆóÁ¨¶‰ºòÂÖàÁ∫ßÊ∑∑ÂêàÂºèÊù•ÂÅöÁöÑ parser„ÄÇ ÊàëÂú® HTN Ôºàhttps://github.com/ming1016/HTNÔºâÈ°πÁõÆ‰∏≠ÂÅö‰∫Ü‰∏™ js ÁöÑ AST ÁöÑ builderÔºöhttps://github.com/ming1016/HTN/tree/master/Sources/Core/JavaScript ÂàÜËØçÂíåËØ≠Ê≥ïÊ†ëÁîüÊàê‰ΩøÁî®ÁöÑÊòØÁä∂ÊÄÅÊú∫Â§ÑÁêÜÈÄíÂΩí‰∏ãÈôç„ÄÇ WebKit ÁöÑÊÄßËÉΩÁõÆÂΩïÈáåÊúâÁî® ES6 Ê†áÂáÜÂÆûÁé∞ÁöÑ ECMA-55 BASIC Ëøô‰∏™ËØçÊ≥ïËØ≠Ê≥ïÂàÜÊûêÁöÑÊµãËØï„ÄÇ‰ª£Á†ÅÂú®Ôºöhttps://trac.webkit.org/browser/trunk/PerformanceTests/ARES-6/Basic?rev=211697 Á®ãÂ∫è‰ºöË¢´Ë°®Á§∫ÊàêÊ†ëÔºåÊØè‰∏™ËäÇÁÇπÈÉΩÊúâ‰∏éÂÖ∂Áõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÔºåËøô‰∫õ‰ª£Á†ÅÈÉΩÂèØ‰ª•ÈÄíÂΩíÁöÑË∞ÉÁî®Ê†ë‰∏≠ÁöÑÂ≠êËäÇÁÇπ„ÄÇBasic ÁöÑËäÇÁÇπÁöÑÁªìÊûÑÊòØËøôÊ†∑Â≠êÁöÑÔºö 1{evaluate: Basic.NumberPow, left: primary, right: parsePrimary()} Basic ÊòØ‰ª•‰∏çÈÇ£‰πàÂ∏∏ËßÅÁöÑÊñπÂºè‰ΩøÁî®ÁîüÊàêÂô®ÁöÑÔºåÊØîÂ¶ÇÂ§ö‰∏™ÁîüÊàêÂô®ÂáΩÊï∞ÔºåÂæàÂ§ö yield points ÂíåÈÄíÂΩíÁîüÊàêÂô®Ë∞ÉÁî®„ÄÇBasic ‰πüÊúâ for-ofÔºåÁ±ªÔºåMap Âíå WeakMap„ÄÇÊâÄ‰ª•‰∏äÁöÑÊµãËØï ES6 Á®ãÂ∫èÈÄöËøá js ÂÜôÁöÑÁ®ãÂ∫èÂ∏ÆÂä©ÁêÜËß£ ES6 ÁöÑËß£ÊûêËøáÁ®ã„ÄÇ ‰ª£Á†ÅÂà∞ JIT ÁöÑËøáÁ®ãProgramExecutable ÁöÑÂàùÂßãÂåñ‰ºöÁîüÊàê LexerÔºåParser ÂíåÂ≠óËäÇÁ†Å„ÄÇÂÖ•Âè£ÊòØ‰ªé JS Binding ÈÇ£Â±ÇÈáåË∞ÉÁî® ScriptController::evaluateInWorld ËøõÊù•ÔºåËøô‰∏™ÊñπÊ≥ïÈáåÁöÑÂèÇÊï∞ sourceCode Â∞±ÊòØ js ÁöÑ‰ª£Á†ÅÁöÑÊù•Ê∫êÔºåÊñπÊ≥ïÂÜÖÈÄöËøáË∞ÉÁî® runtime/Completion.cpp ÈáåÁöÑÊñπÊ≥ï evaluate Êù•ËøõÂÖ• executeProgram ÊñπÊ≥ïÁöÑ„ÄÇÊÄªÁöÑÊù•ËØ¥ ProgramExecutable ‰∏ªË¶ÅÊòØÊää‰ª£Á†ÅÁºñÊàêÂ≠óËäÇÁ†ÅÔºåInterpreter ÊòØÊù•ÊâßË°åÂ≠óËäÇÁ†ÅÁöÑ„ÄÇ 1JSValue result = vm.interpreter-&gt;executeProgram(source, exec, thisObj); executeProgram ÊñπÊ≥ïÂ∞ÜÊ∫êÁ†ÅÁîüÊàê ProgramExecutable Ëøô‰∏™ÂØπË±°„ÄÇ 1ProgramExecutable* program = ProgramExecutable::create(callFrame, source); Ëøô‰∏™ÂØπË±°ÈáåÊúâ StringView ÂØπË±°Ôºåprogram-&gt;source().view() ËøôÊ†∑Â∞±ÂèØ‰ª•ÂØπÊ∫êÁ†ÅËøõË°åÊìç‰Ωú‰∫Ü„ÄÇÂú®ÈÇ£‰πãÂâç‰ºöÂÖàÂà§Êñ≠‰∏ãÊòØÂê¶ËøôÊÆµ js ‰ª£Á†Å‰ªÖ‰ªÖÂè™ÊòØ‰∏Ä‰∏™ JSON ÂØπË±°ÔºåÂ¶ÇÊûúÊòØÂ∞±Âú∞ÊåâÁÖß JSON ÂØπË±°Â§ÑÁêÜÔºå‰∏çÁÑ∂Â∞±ÊåâÁÖßÊôÆÈÄöÁöÑ js ‰ª£Á†ÅÊù•Â§ÑÁêÜ„ÄÇ ÊôÆÈÄöÂ§ÑÁêÜ‰ºöÂÖàÁºñËØëÊàêÂ≠óËäÇÁ†ÅÔºåËøáÁ®ãÊòØÂÖàÂàùÂßãÂåñÂÖ®Â±ÄÂ±ûÊÄßÔºö 1JSObject* error = program-&gt;initializeGlobalProperties(vm, callFrame, scope); Â§ÑÁêÜÁöÑÁªìÊûúÈÉΩ‰ºöËÆ∞ÂΩïÂú® callFrame Èáå„ÄÇ‰∏ªË¶ÅÊòØÈÄöËøá JSGlobalObject Ëøô‰∏™ÂØπË±°ÁöÑ addFunction Âíå addVar ÊñπÊ≥ïËÆ∞ÂΩï Parser Âá∫ÈÇ£‰∫õÂú®ÂÖ®Â±ÄÁ©∫Èó¥ÁöÑÈÇ£‰∫õ letÔºåconst Âíå class ÁöÑÂÖ®Â±ÄÂ±ûÊÄßÔºåÊàñËÄÖ varÔºålet Âíå const ÁöÑÂÖ®Â±ÄÂèòÈáè„ÄÇ Êé•‰∏ãÊù•‰ºöÂàõÂª∫‰∏Ä‰∏™ codeBlockÔºö 123456789ProgramCodeBlock* codeBlock; { CodeBlock* tempCodeBlock; JSObject* error = program-&gt;prepareForExecution&lt;ProgramExecutable&gt;(vm, nullptr, scope, CodeForCall, tempCodeBlock); EXCEPTION_ASSERT(throwScope.exception() == reinterpret_cast&lt;Exception*&gt;(error)); if (UNLIKELY(error)) return checkedReturn(error); codeBlock = jsCast&lt;ProgramCodeBlock*&gt;(tempCodeBlock); } ËøôÈáå ProgramExecutable ‰ºöÈÄöËøá prepareForExecution ÊñπÊ≥ïÈáåË∞ÉÁî® prepareForExecutionImpl Êù•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ CodeBlock„ÄÇ 123456789101112131415CodeBlock* codeBlock = newCodeBlockFor(kind, function, scope, exception);resultCodeBlock = codeBlock;EXCEPTION_ASSERT(!!throwScope.exception() == !codeBlock);if (UNLIKELY(!codeBlock)) return exception;if (Options::validateBytecode()) codeBlock-&gt;validate();if (Options::useLLInt()) setupLLInt(vm, codeBlock);else setupJIT(vm, codeBlock);installCode(vm, codeBlock, codeBlock-&gt;codeType(), codeBlock-&gt;specializationKind()); ËøôÈáåÁúãÂà∞ÔºåÂ¶ÇÊûú Options ÊòØÊåáÂÆö LLInt ÁöÑËØùÂ∞±‰ºöË∞É setupLLInt ÊñπÊ≥ïÂéªËÆæÁΩÆËøô‰∏™ codeBlockÔºå‰∏çÁÑ∂Â∞±ÈÄöËøá JIT Êù•„ÄÇLLInt Âú® LLIntSlowPaths.cpp ÈáåÈÄöËøá C ÂáΩÊï∞Â∞ÅË£Ö‰∫Ü LowLevelInterpreter.asm ÈáåÁöÑÊâßË°åÊåá‰ª§ÁöÑÊ±áÁºñ„ÄÇËß¶Âèë JIT ‰ºòÂåñÊòØÈÄöËøáÁÉ≠ÁÇπÊé¢ÊµãÊñπÊ≥ïÔºåLLInt ‰ºöÂú®Â≠óËäÇÁ†ÅÁöÑ loop_hint Âæ™ÁéØËÆ°Êï∞Âíå ret ÂáΩÊï∞ËøîÂõûÊåá‰ª§ÁöÑÊó∂ÂÄôËøõË°åÁªüËÆ°ÔºåÁªìÊûú‰øùÂ≠òÂú® ExcutionCounter Èáå„ÄÇÂΩìÂáΩÊï∞ÊàñÂæ™ÁéØ‰ΩìÊâßË°å‰∏ÄÂÆöÊ¨°Êï∞Êó∂ÔºåÈÄöËøá checkIfThresholdCrossedAndSet ÊñπÊ≥ïÂæóÂà∞Â∏ÉÂ∞îÂÄºÁªìÊûúÊù•ÂÜ≥ÂÆöÊòØÂê¶Áî® JIT ÁºñËØë„ÄÇ CodeBlock Êúâ GlobalCodeÔºåEvalCodeÔºåFunctionCodeÔºåModuleCode Ëøô‰∫õÁ±ªÂûãÔºåÁî®‰∫é LLInt Âíå JIT„ÄÇÁºñËØëÂêéÁöÑ ByteCode ‰ºöÂ≠òÂú® UnlinkedCodeBlock Èáå„ÄÇ ÂàÜÂ±ÇÁºñËØëÊÄªÁöÑÊù•ËØ¥ JavaScriptCore ÊòØÈááÁî®‰∫ÜÁ±ªÂûãÊé®ÊµãÂíåÂàÜÂ±ÇÁºñËØëÁöÑÊÄùÊÉ≥ÔºåËß£ÊûêÊàêÂ≠óËäÇÁ†ÅÂêé LLInt ÁöÑ‰ΩúÁî®Â∞±ÊòØËÆ© js ‰ª£Á†ÅËÉΩÂ§üÊó©ÁÇπÊâßË°åÔºåÁî±‰∫éËß£ÈáäÁöÑÊïàÁéá‰∏çÈ´òÔºåÊâÄ‰ª•ËææÂà∞‰∏ÄÂÆöÊù°‰ª∂ÂèØ‰ª•Âπ∂Ë°åÁöÑÈÄöËøá Baseline JIT ÁºñËØëÊàêÊõ¥È´òÊïàÁöÑÂ≠óËäÇÁ†ÅÊù•Ëß£ÈáäÔºåÂ¶ÇÊûúÂà∞‰∫ÜÊõ¥Âä†ÂÆπÊòì‰ΩøÂæó LLInt Ëß£ÈáäÊïàÁéáÂ∑ÆÁöÑÊÉÖÂÜµÂ∞±‰ºöÂπ∂Ë°å‰ΩøÁî® DFG JIT ÔºåDFG ÁºñËØëÁöÑÁªìÊûú‰πüÊúâ‰ª£Ë°® On stack replacement ÁöÑ osrExitSites Êï∞ÁªÑÔºåËøôÊ†∑ÁöÑÂ≠óËäÇÁ†ÅÁöÑËß£ÈáäÊÄßËÉΩ‰ºöÊõ¥Â•ΩÔºåÂ¶ÇÊûúÂÅáËÆæËß£ÈáäÂ§±Ë¥•ËøòÂèØ‰ª•ÂÜçÂõûÂà∞ BaselineÔºå‰πü‰∏ç‰ºöÊúâ‰ªÄ‰πàÈóÆÈ¢ò„ÄÇÂêØÁî® FTL ÁöÑÊù°‰ª∂Â∞±Êõ¥È´ò‰∫ÜÔºåÂèØËÉΩÂáΩÊï∞Ë∞ÉÁî®‰∫ÜÂ•ΩÂá†‰∏áÊ¨°‰πüÈÉΩ‰∏ç‰ºöÂºÄÂêØ„ÄÇ ÂàÜÂ±ÇÁºñËØëÁöÑ‰∏ªË¶ÅÊÄùÊÉ≥ÊòØÂÖàÊääÊ∫êÁ†ÅËß£ÈáäÊàê‰∏ÄÁßçÂÜÖÈÉ®ÁöÑË°®Á§∫‰πüÂ∞±ÊòØÂ≠óËäÇÁ†ÅÔºåÂ∞ÜÂÖ∂‰∏≠‰ΩøÁî®ÁéáÈ´òÁöÑÂ≠óËäÇÁ†ÅËΩ¨ÊàêÊ±áÁºñ‰ª£Á†ÅÔºåÊ±áÁºñ‰ª£Á†ÅÂèØ‰ª•Áî± CPU Áõ¥Êé•ÊâßË°åÊù•ÊúÄÂ§ßÁ®ãÂ∫¶ÁöÑÊèêÈ´òÊÄßËÉΩ„ÄÇ LLIntÔºåBaseline JIT Âíå DFG ‰∏âËÄÖ‰ºöÂêåÊó∂ËøêË°å„ÄÇÂèØ‰ª•Âú® jsc.cpp ÈáåÊ∑ªÂä†Êó•ÂøóËßÇÂØü‰ªñ‰ª¨ÁöÑÂ∑•‰ΩúÁä∂ÊÄÅ ÁÆ≠Â§¥ÊåáÁ§∫ÁöÑÊòØÂ†ÜÊ†àÊõøÊç¢ on-stack replacementÔºåÁÆÄÁß∞ OSR„ÄÇËøô‰∏™ÊäÄÊúØÂèØ‰ª•Â∞ÜÊâßË°åËΩ¨ÁßªÂà∞‰ªª‰Ωï statement ÁöÑÂú∞Êñπ„ÄÇOSR ÂèØ‰ª•‰∏çÁÆ°ÊâßË°åÂºïÊìéÊòØ‰ªÄ‰πàÈÉΩÂú®ÂéªËß£ÊûêÂ≠óËäÇÁ†ÅÁä∂ÊÄÅÔºåÂπ∂‰∏îËÉΩÂ§üÈáçÊûÑÂÆÉÂéªËÆ©ÂÖ∂ÂÆÉÂºïÊìéÁªßÁª≠ÊâßË°åÔºåOSR entry ÊòØËøõÂÖ•Êõ¥È´òÂ±Ç‰ºòÂåñÔºåOSR exit ÊòØÈôçËá≥‰ΩéÂ±Ç„ÄÇLLInt Âà∞ Baseline JIT Êó∂ OSR Âè™ÈúÄË¶ÅË∑≥ËΩ¨Âà∞Áõ∏Â∫îÁöÑÊú∫Âô®‰ª£Á†ÅÂú∞ÂùÄÂ∞±Ë°åÔºåÂõ†‰∏∫ Baseline JIT ÊØè‰∏™Êåá‰ª§ËæπÁïå‰∏äÁöÑÊâÄÊúâÂèòÈáèÁöÑË°®Á§∫Âíå LLInt ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇËøõÂÖ• DFG JIT Â∞±‰ºöÂ§çÊùÇ‰∫õÔºåDFG ÈÄöËøáÂ∞ÜÂáΩÊï∞ÊéßÂà∂ÊµÅÂõæÂΩì‰ΩúÂ§ö‰∏™ËøõÂÖ•ÁÇπÔºå‰∏Ä‰∏™ÊòØÂáΩÊï∞ÂáΩÊï∞ÂêØÂä®ÂÖ•Âè£‰∏Ä‰∏™ÊòØÂæ™ÁéØÁöÑÂÖ•Âè£„ÄÇ Â¶ÇÊûúÊØè‰∏™ÂáΩÊï∞ÈÉΩÁî®ÂÉè DFG JIT Êù•‰ºòÂåñÈÇ£‰πàÊ∂àËÄóÂ§™Â§ßÔºåËøôÂ∞±Á±ª‰ººÊØèÊ¨°ËøêË°åÂ∞±Êù•‰∏™ÂÆåÊï¥ÁöÑÊ∫êÁ†ÅÁºñËØëÊàêÊú¨Âú∞Â∫îÁî®ÈÇ£Ê†∑„ÄÇÂ¶ÇÊûúÊØè‰∏™ËØ≠Âè•ÈÉΩÂè™ÊâßË°å‰∏ÄÊ¨°ÔºåÈÇ£‰πà JIT ÁºñËØëÂ∞±‰ºöÊØî LLInt ÊòØÊó∂Èó¥Ë¶ÅÈïøÔºåÂ¶ÇÊûúÊâßË°åÁöÑÊ¨°Êï∞Ë∂äÂ§öÔºåÈÇ£‰πà LLInt ËøôÁßçËß£ÈáäÊñπÂºèÂ∞±‰ºöÊØîÁºñËØëÊñπÂºèË¶ÅÂ∑ÆÔºåLLInt ÁöÑÂ§ßÈÉ®ÂàÜÊó∂Èó¥ÈÉΩÊ∂àËÄóÂú®ÂàÜÊ¥æ‰∏ã‰∏™Â≠óËäÇÁ†ÅÊåá‰ª§ÁöÑÊìç‰Ωú‰∏ä‰∫Ü„ÄÇ DFG JITÂÖ®Áß∞ data flow graph JIT Êï∞ÊçÆÊµÅÂõæ JIT„ÄÇÊòØ‰∏ÄÁßçÊé®Êµã‰ºòÂåñÁöÑÊäÄÊúØ„ÄÇ‰ºöÂºÄÂßãÂØπ‰∏Ä‰∏™Á±ªÂûãÂÅöÂá∫‰∏Ä‰∏™ËÉΩÂ§üÂØπÊÄßËÉΩÂ•ΩÁöÑÂÅáËÆæÔºåÂÖàÁºñËØë‰∏Ä‰∏™ÁâàÊú¨ÔºåÂ¶ÇÊûúÂêéÈù¢ÂèëÁé∞ÂÅáËÆæ‰∏çÂØπÂ∞±‰ºöË∑≥ËΩ¨ÂõûÂéüÂÖà‰ª£Á†ÅÔºåÁß∞‰∏∫ Speculation failure„ÄÇDFG ÊòØÂπ∂ÂèëÁºñËØëÂô®ÔºåDFG pipeline ÁöÑÊØè‰∏™ÈÉ®ÂàÜÈÉΩÊòØÂêåÊó∂ËøêË°åÁöÑÔºåÂåÖÊã¨Â≠óËäÇÁ†ÅËß£ÊûêÂíåÂàÜÊûê„ÄÇ ‰∏äÂõæÊòØ DFG JIT ÁöÑ‰ºòÂåñ pipeline„ÄÇÂºÄÂßã DFG ‰ºöÊääÂ≠óËäÇÁ†ÅËΩ¨Êàê DFG CPS Ê†ºÂºèÔºåËøô‰∏™Ê†ºÂºè‰ºöÊèèËø∞ÂèòÈáèÂíå‰∏¥Êó∂Êï∞ÊçÆ‰πãÈó¥ÁöÑÊï∞ÊçÆÊµÅÂÖ≥Á≥ª„ÄÇÂÜçÁî®ÂàÜÊûê‰ø°ÊÅØÊù•Êé®ÊµãÁ±ªÂûãÔºåÈÄöËøáÊé®ÊµãÁöÑÁ±ªÂûãÂáèÂ∞ëÁ±ªÂûãÁöÑÊ£ÄÊü•„ÄÇÊé•ÁùÄËøõË°å‰º†ÁªüÁöÑÁºñËØëÂô®ÊñπÈù¢ÁöÑ‰ºòÂåñÔºåÊúÄÂêéÁºñËØëÂô®ÈÄöËøá DFG CPS Ê†ºÂºèÁõ¥Êé•ÁîüÊàêÊú∫Âô®Á†Å„ÄÇ DFG JIT ‰ºöÂ∞ÜÂ≠óËäÇÁ†ÅËß£ÊûêÊàê SSA ÂΩ¢ÂºèÔºåÊåâÊâßË°åË∑ØÂæÑÊî∂ÈõÜÁ±ªÂûã‰ø°ÊÅØ„ÄÇ‰ºö‰ΩøÁî® inlining Âíå value profiling Á≠â‰∏Ä‰∫õÈùôÊÄÅÂàÜÊûêÊäÄÊúØ„ÄÇÁ±ªÂûãÊé®ÂØºÊää value profile ÈáåÁöÑÂ∏∏Áî®ÁöÑÁ±ªÂûã‰Ωú‰∏∫ÂêéÈù¢Áî®ÁöÑÁ±ªÂûãÊù•È¢ÑÊµãÔºåÂú® SpeculatedType.h ÈáåÂÆö‰πâÈáå‰∏Ä‰∫õÊï∞ÊçÆÁ±ªÂûãÔºåÁ¨¶Âêà Data-flow analysis ËßÑËåÉÔºåÂÖ∑‰ΩìÂÆûÁé∞Âú® DFGPredictionPropagationPhase.cpp Èáå„ÄÇBaseline JIT Ê¨°Êï∞Ë∂ÖËøá‰∏ÄÂÆöÊï∞ÈáèÂ∞±‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂûãÔºåÂèØËÉΩ‰ºöËß¶Âèë DFG ‰πüÂèØËÉΩ‰ºöËÆ© Baseline JIT ÂÜçÊâßË°åÂá†Ê¨°„ÄÇ DFG ÁöÑ register allocator ‰∏≠Ê±áÁºñÁ®ãÂ∫è‰ΩøÁî®ÁöÑÊòØ‰∫åÂú∞ÂùÄÔºå‰∏çÁî® op dest, src1, src2 ËøôÊ†∑‰∏âÂú∞ÂùÄÂΩ¢ÂºèÔºåÂè™ÈúÄË¶Å op src1, src2 ËøôÊ†∑ÁöÑ‰∫åÂú∞ÂùÄÂΩ¢ÂºèÔºåÁªìÊûúÂ≠òÂú®Á¨¨‰∏Ä‰∏™Êìç‰ΩúÊï∞Èáå„ÄÇ DFG JIT Â∞Ü‰ΩéÊïàÂ≠óËäÇÁ†ÅËΩ¨ÊàêÊõ¥‰ºòÂåñÁöÑÈ´òÊïàÂΩ¢Âºè„ÄÇDFG ÁªìÂêà‰º†ÁªüÁºñËØëÂô®ÁöÑ‰ºòÂåñÔºåÊØîÂ¶ÇÂØÑÂ≠òÂô®ÁöÑÂàÜÈÖçÔºåÊéßÂà∂ÊµÅÂõæÁöÑÁÆÄÂåñÔºåÂÖ¨ÂÖ±Â≠êË°®ËææÂºèÊ∂àÈô§ÔºåÊ≠ª‰ª£Á†ÅÊ∂àÈô§ÂíåÁ®ÄÁñèÊù°‰ª∂Â∏∏Èáè‰º†Êí≠Á≠â„ÄÇ‰ΩÜÊòØÊ≠£ÂÑøÂÖ´ÁªèÁöÑÁºñËØëÂô®ÊòØÈúÄË¶ÅÁü•ÈÅìÂèòÈáèÁ±ªÂûãÂíåÂ†ÜÈáåÈù¢ÁöÑÂØπË±°ÁöÑÁªìÊûÑÁöÑÔºåËøôÊ†∑ÊâçËÉΩÊõ¥Â•ΩÁöÑ‰ºòÂåñ„ÄÇDFG JIT ‰ΩøÁî®ÁöÑÊòØ LLInt Âíå Baseline JIT ÈáåÂàÜÊûêÂá∫ÁöÑÂèòÈáèÁ±ªÂûãÊù•Êé®Êñ≠ÁöÑ„ÄÇÊØîÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠ê 123function plusThe(x) { return x + 1; } ËøôÈáåÁöÑ x ‰ªé‰ª£Á†Å‰∏äÁúãÊòØÁúã‰∏çÂá∫Á±ªÂûãÁöÑÔºåÂÆÉÂèØËÉΩÊòØÂ≠óÁ¨¶‰∏≤‰πüÂèØËÉΩÊòØ integer ÊàñËÄÖ double„ÄÇLLInt Âíå Baseline JIT ‰ºö‰ªéÂáΩÊï∞ÂèÇÊï∞ÊàñËÄÖÊù•Ëá™Â†ÜÁöÑËØªÂèñÊù•Êî∂ÈõÜÊØè‰∏™ÂèòÈáèÁöÑÂÄº‰ø°ÊÅØ„ÄÇDFG ‰∏ç‰ºö‰∏ÄÂºÄÂßãÂ∞±ÁºñËØë plusThe Ëøô‰∏™ÂáΩÊï∞ÔºåÂÆÉ‰ºöÁ≠âÂà∞Ëøô‰∏™ÂáΩÊï∞Ë¢´ÊâßË°å‰∫ÜÂæàÂ§öÊ¨°ÔºåËÆ© LLInt Âíå Baseline JIT Â∞ΩÂèØËÉΩÁöÑÊääÁ±ªÂûã‰ø°ÊÅØÊî∂ÈõÜÂÖ®„ÄÇÊ†πÊçÆËøô‰∫õ‰ø°ÊÅØÊù•ÂÅáËÆæ‰∏Ä‰∏™Á±ªÂûãÔºå‰∏Ä‰∏™Á°ÆÂÆöÁöÑÁ±ªÂûã‰ºöËäÇÁúÅÁ©∫Èó¥ÂíåÊâßË°åÊó∂Èó¥„ÄÇÂ¶ÇÊûúÂÅáËÆæÁöÑÊ£ÄÊü•Â§±Ë¥•ÔºåÂ∞±ÈÄöËøá OSR ÊääÊâßË°åËΩ¨ÁßªÂà∞ Baseline JIT ‰∏ä„ÄÇ FTL JITDFG JIT ÂèØ‰ª•‰ºòÂåñ long-running ËøêË°åÁöÑ‰ª£Á†ÅÊÄßËÉΩÔºå‰ΩÜÊòØ‰ºöÂΩ±Âìç short-running ÁöÑÁ®ãÂ∫èÔºåDFG ÁºñËØëÁöÑÊó∂Èó¥Âíå DFG ÁîüÊàê‰ª£Á†ÅÁöÑË¥®ÈáèÁõ∏ÊØîËæÉÊù•ËØ¥ËøòÊòØËøáÂ§ß„ÄÇÊÉ≥ËÆ© DFG ÁîüÊàêÊõ¥Â•ΩÁöÑ‰ª£Á†ÅÈÉΩ‰ºöÈôç‰Ωé‰ª£Á†ÅÈÄüÂ∫¶ÔºåËøò‰ºöÂ¢ûÂä† shorter-running ‰ª£Á†ÅÁöÑÂª∂Ëøü„ÄÇDFG ‰∏çÂèØËÉΩÂêåÊó∂Êàê‰∏∫‰ΩéÂª∂Ëøü‰ºòÂåñÂíå high-throughput ‰ª£Á†ÅÁºñËØëÂô®„ÄÇËøôÊó∂Â∞±ÈúÄË¶ÅÂÜçÂ§ö‰∏ÄÂ±ÇÊù•ÂÅöËæÉÈáçÁöÑ‰ºòÂåñÔºåÂêåÊó∂ËÆ© DFG ‰øùÊåÅËá™Â∑±ÁöÑËΩª‰ΩìÈáçÔºå‰ΩøÂæó longer-running Âíå shorter-running ‰ª£Á†ÅËÉΩÂ§ü‰øùÊåÅÂπ≥Ë°°„ÄÇÊñ∞ÁöÑ‰∏ÄÂ±Ç FTL ÂÆûÈôÖ‰∏äÊòØ DFG Backend ÁöÑÊõøÊç¢„ÄÇ‰ºöÂÖàÂú® DFG ÁöÑ JavaScript ÂáΩÊï∞Ë°®Á§∫ËΩ¨Êç¢‰∏∫ÈùôÊÄÅÂçï‰∏ÄÊåáÊ¥æÔºàSSAÔºâ Ê†ºÂºè‰∏äÂÅö‰∫õ JavaScript ÁâπÊÄßÁöÑ‰ºòÂåñ„ÄÇÊé•ÁùÄÊää DFG IR ËΩ¨Êç¢Êàê FTL ÈáåÁî®Âà∞ÁöÑ B3 ÁöÑ IR„ÄÇÊúÄÂêéÁîüÊàêÊú∫Âô®Á†Å„ÄÇ DFG ÁöÑÊú∫Âô®‰ª£Á†ÅÁîüÊàêÂô®ÂæàÂø´Ôºå‰ΩÜÊ≤°Êúâ‰ΩéÁ∫ß‰ºòÂåñ„ÄÇÂØπËøôÂùóÁöÑ‰ºòÂåñÈááÁî®ÂÖàËΩ¨Êàê SSA ÂΩ¢ÂºèÔºåÊâßË°åÊØîÂ¶ÇËá™Âä®ÊâßË°åÂæ™ÁéØ‰∏çÂèòÈáè‰ª£Á†ÅÊù•ÊèêÈ´òÊâßË°åÈÄüÁéáÁöÑÂæ™ÁéØ‰∏çÂèòÈáè‰ª£Á†ÅÁßªÂä®Ôºàloop-invariant code motionÔºâÁöÑ‰ºòÂåñÊäÄÊúØÔºåËøô‰∫õ‰ºòÂåñÂÆåÊàêÂêéÂ∞±ÂèØ‰ª• straight-forward linear Âíå ‰∏ÄÂØπÂ§öÔºàDFG SSA ÁöÑÊØè‰∏™Êåá‰ª§ÈÉΩÂèØ‰ª•‰∫ßÁîüÔºâÁöÑËΩ¨Êç¢‰∏∫‰πüÂü∫‰∫é SSA ÁöÑÊ≤°Êúâ JavaScript ËØ≠Ë®ÄÁâπÊÄßÁöÑ B3 ÁöÑ IR„ÄÇÊÄªÁöÑÊù•ËØ¥ËøáÁ®ãÂ∞±ÊòØÊääÊ∫êÁ†ÅÁîüÊàêÂ≠óËäÇÁ†ÅÔºåÊé•ÁùÄÂèòÊàê DFG CPS IRÔºåÂÜçÂ∞±ÊòØ DFG SSA IRÔºåÊúÄÂêéÊàê B3 ÁöÑ IRÔºåJavaScript ÁöÑÂä®ÊÄÅÊÄßÂ∞±ÊòØÂú®Ëøô‰∫õËøáÁ®ã‰∏≠‰∏ÄÊ≠•Ê≠•Ë¢´Ê∂àÈô§ÊéâÁöÑ„ÄÇ ‰ª£Á†ÅÂú® LLIntÔºåBaseline JIT Âíå DFG JIT ËøêË°å‰∏ÄÊÆµÊó∂Èó¥Êâç‰ºöË∞ÉÁî® FTL„ÄÇFTL Âú®Âπ∂ÂèëÁ∫øÁ®ã‰∏≠‰ºö‰ªéÂÆÉ‰ª¨ÈÇ£Êî∂ÈõÜÂàÜÊûê‰ø°ÊÅØ„ÄÇshort-running ‰ª£Á†ÅÊòØ‰∏ç‰ºöÂØºËá¥ FTL ÁºñËØëÁöÑÔºå‰∏ÄËà¨Ë∂ÖËøá10ÊØ´ÁßíÁöÑÂáΩÊï∞‰ºöËß¶Âèë FTL ÁºñËØë„ÄÇ FTL ÈÄöËøáÂπ∂ÂèëÁºñËØëÂáèÂ∞èÂØπÂêØÂä®ÈÄüÂ∫¶ÁöÑÂΩ±Âìç„ÄÇ FTL Backend B3B3 ÁöÑÂÖ®Áß∞ Bare Bones BackendÔºåÂÆûÁé∞‰∫ÜÂ§ßÂêûÂêêÈáèÂêåÊó∂Áº©Áü≠ÊÄª‰Ωì FTL ÁºñËØëÊó∂Èó¥„ÄÇB3 ÁöÑ IR ÊòØ‰∏Ä‰∏™‰ΩéÁ∫ßÂà´ÁöÑ‰∏≠Èó¥Ë°®Á§∫Ôºå‰ΩéÁ∫ßÂà´ÊÑèÂë≥ÁùÄÈúÄË¶ÅÂ§ßÈáèÂÜÖÂ≠òÂéªË°®Á§∫ÊØè‰∏™ÂáΩÊï∞ÔºåÂ§ßÈáèÁöÑÂÜÖÂ≠òÊÑèÂë≥ÁùÄÁºñËØëÂô®Âú®ÂàÜÊûêÂáΩÊï∞Êó∂ÈúÄË¶ÅÊâ´ÊèèÂ§ßÈáèÂÜÖÂ≠ò„ÄÇB3 Êúâ‰∏§‰∏™ IRÔºå‰∏Ä‰∏™Âè´ B3 IR Âè¶‰∏Ä‰∏™Êú∫Âô®Á∫ßÂà´ÁöÑÂè´ Assembly IRÔºåÁÆÄÁß∞ Air„ÄÇËøô‰∏§‰∏™ IR ÁöÑÁõÆÊ†áÊòØ‰ª£Ë°®‰ΩéÁ∫ßÊìç‰ΩúÔºåÂêåÊó∂ËÉΩÊúÄÂ§ßÈôêÂ∫¶ÁöÑÂáèÂ∞ëÂàÜÊûê‰ª£Á†ÅÊâÄÈúÄË¶ÅÁöÑÂÜÖÂ≠òËÆøÈóÆ„ÄÇËææÂà∞Ëøô‰∏™ÁõÆÊ†áÈúÄË¶ÅÂáèÂ∞ë IR ÂØπË±°Êï¥‰ΩìÂ§ßÂ∞èÔºåÂáèÂ∞ëË°®Á§∫ÂÖ∏ÂûãÊìç‰ΩúÁöÑ IR ÂØπË±°Êï∞ÈáèÔºåÂáèÂ∞ë IR ÁöÑ pointer chasingÔºåÊúÄÂêéÊó∂ÂáèÂ∞ë IR ÁöÑÊÄªÊï∞„ÄÇ B3 ËΩ¨Êç¢Êàê Air ‰ºöÈÄöËøáÊâßË°åÂèçÂêëË¥™Â©™Ê®°ÂºèÂåπÈÖçÊù•Â∑ßÂ¶ôÂú∞ÈíàÂØπÊØè‰∏™ B3 Êìç‰ΩúÈÄâÊã©Ê≠£Á°ÆÁöÑ Air Â∫èÂàó„ÄÇÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÂèØ‰ª•ÂèÇÁúã B3LowerToAir.cpp ÁöÑ‰ª£Á†Å„ÄÇ ‰∏ãÈù¢Êù•ÁúãÁúã B3 IR ÁöÑÊâÄÂÅöÁöÑ‰ºòÂåñ„ÄÇ Strength reductionÔºö‰∏ªË¶ÅÂåÖÊã¨ÊéßÂà∂ÊµÅÁ®ãÂõæÁöÑÁÆÄÂåñÔºåÂ∏∏ÈáèÂêàÂπ∂ÔºåÊ∂àÈô§Ê≠ª‰ª£Á†ÅÔºåÂâ™Èô§Êï¥Êï∞Ê∫¢Âá∫ÁöÑÊ£ÄÊü•ÔºåËøòÊúâÂÖ∂ÂÆÉÁÆÄÂåñËßÑÂàô„ÄÇÂÆûÁé∞Êñá‰ª∂ÊòØ B3ReduceStrength.cpp„ÄÇ Flow-sensitive Â∏∏ÈáèÂêàÂπ∂ÔºöÂú® B3FoldPathConstants.cpp Êñá‰ª∂Èáå„ÄÇ ÂÖ®Â±ÄÂÖ±Áî®Â≠êË°®ËææÂºèÊ∂àÈô§ÔºöÂÆûÁé∞Êñá‰ª∂ B3EliminateCommonSubexpressions.cpp„ÄÇ Tail duplicationÔºöB3DuplicateTails.cpp SSA ‰øÆÊ≠£ÔºöB3FixSSA.cpp ‰ºòÂåñÂ∏∏ÈáèÂÆûÈôÖÁöÑ‰ΩçÁΩÆÔºöB3MoveConstants.cpp Air ÈáåÂÅöÁöÑ‰ºòÂåñÂåÖÊã¨ÂéªÈô§Ê≠ª‰ª£Á†ÅÔºåÊéßÂà∂ÊµÅÂõæÁöÑÁÆÄÂåñ‰ª•Âèä‰øÆÊ≠£ÈÉ®ÂàÜÂØÑÂ≠òÂô® stalls ÂíåÊ∫¢Âá∫‰ª£Á†ÅÁóáÁä∂„ÄÇAir ÊúÄÈáçË¶ÅÁöÑ‰ºòÂåñÊòØÂØÑÂ≠òÂô®ÂàÜÈÖç„ÄÇ B3 ÁöÑÂä®ÊÄÅËØ≠Ë®ÄÊîØÊåÅÈù†ÁöÑÊòØ PatchpointsÔºåËøòÊúâ‰∏ÄÂçäÂäüÂä≥ÊòØÊìç‰ΩúÁ†ÅÁöÑ Check familyÔºåÁî®Êù•ÂÆûÁé∞Ê†à‰∏äÊõøÊç¢ÔºåÂç≥ OSR„ÄÇJavaScript ÊòØÁßçÂä®ÊÄÅËØ≠Ë®ÄÔºåÊ≤°ÊúâÂèØ‰ª•Âø´ÈÄüÊâßË°åÁöÑÁ±ªÂûãÂíåÊìç‰ΩúÔºåFTL JIT Â∞±‰ΩøÁî®Êé®ÊµãË°å‰∏∫ÊñπÂºèÊääËøô‰∫õÊìç‰ΩúËΩ¨Êç¢ÊàêÂø´ÈÄü‰ª£Á†Å„ÄÇ Air Âú®ÂØÑÂ≠òÂô®ÂàÜÈÖçÂô®ÁöÑÈÄâÊã©‰∏ä‰ΩøÁî®‰∫ÜÁªèÂÖ∏ÁöÑÂõæÂΩ¢ÁùÄËâ≤ÂØÑÂ≠òÂô®ÂàÜÈÖçÂô®ÔºåÂè´Ëø≠‰ª£ÂØÑÂ≠òÂô®ÂêàÂπ∂ÔºåÁÆÄÁß∞ IRC„ÄÇ Á±ªÂûãÂàÜÊûêWeb Inspector Â∑•ÂÖ∑ÊòØ WebKit ÈáåÊèê‰æõÁöÑË∞ÉËØïÂ∑•ÂÖ∑ÔºåÈÄöËøáËøô‰∏™Â∑•ÂÖ∑ÂèØ‰ª•ÂæàÂ•ΩÁöÑËßÇÂØüÂì™‰∫õÂáΩÊï∞ÁîöËá≥Âì™‰∫õÊù°‰ª∂ÊâßË°å‰∫ÜÊàñËÄÖÊ≤°ÊúâÊâßË°å„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÂèØ‰ª•Áõ¥ËßÇÁöÑËßÇÂØüÂèòÈáèÁ±ªÂûãÔºåËøòËÉΩÂ§üË∑üË∏™ÂÄºÁöÑÁªßÊâøÈìæ„ÄÇJavaScript ÊòØÂä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÔºå‰ªª‰ΩïÂèòÈáèÈÉΩÂèØ‰ª•ÊòØ‰ªª‰ΩïÁ±ªÂûãÔºåË°®ËææÂºèÂèØ‰ª•Êúâ‰ªª‰ΩïÁ±ªÂûãÔºåÂáΩÊï∞ÂèØ‰ª•ËøîÂõû‰ªª‰ΩïÁ±ªÂûãÁ≠âÁ≠â„ÄÇÁî±‰∫é‰∏çËÉΩÁ´ãÂàªÂæóÂà∞Á±ªÂûãÂ∞±Ê≤°Ê≥ïÁ°ÆÂÆöÂú∞ÂùÄÂ≠óËäÇÂ§ßÂ∞èÔºåÈúÄË¶ÅÂú®ËøêË°åÊó∂ÂéªÂèçÂ§çÊé®Êñ≠„ÄÇÈùôÊÄÅËØ≠Ë®ÄÂ∞±‰∏ç‰∏ÄÊ†∑Ôºå‰∏ÄÂºÄÂßãÊòéÁ°Æ‰∫ÜÁ±ªÂûãÔºåÊØîÂ¶ÇÁõÆÊ†áÂπ≥Âè∞ int Á±ªÂûãÂç†Áî®4‰∏™Â≠óËäÇÔºåÂÆÉÂØπÂ∫îÁöÑÂØπË±°ÊòØ‰∏™Âú∞ÂùÄÔºåÂÅèÁßªÈáèÊòØ0ÔºåËÆøÈóÆ int Êó∂ÈúÄË¶ÅÂ∞ÜÂØπË±°Âú∞ÂùÄÂä†‰∏ä4‰∏™Â≠óËäÇ„ÄÇÊâÄ‰ª•ËØ≠Ë®ÄËß£ÈáäÁ≥ªÁªüÂè™Ë¶ÅÁî®Êï∞ÁªÑÂíå‰ΩçÁßªÊù•Â≠òÂèòÈáèÂíåÊñπÊ≥ïÂú∞ÂùÄÂ∞±Ë°å‰∫ÜÔºåËøôÊ†∑Âá†‰∏™Êú∫Âô®ËØ≠Ë®ÄÁöÑÊåá‰ª§Â∞±ÂèØ‰ª•ÂØπÂÖ∂ÊâßË°åÂêÑÁßçÊìç‰Ωú„ÄÇ ‰∏ãÈù¢Êù•‰∏™‰æãÂ≠êÔºö 123456789let x = 3;print(x);x = [&quot;These&quot;, &quot;is&quot;, &quot;array with string&quot;];print(x);const justReturn = (x) =&gt; { return x; };justReturn(10);justReturn([1, 2, 3]);justReturn(&quot;I am bad!&quot;); JavaScript Ê≤°ÊúâÁ±ªÂûãÈôêÂà∂ÔºåËØ≠Ê≥ï‰∏çÈîôÂ∞±Ê≤°ÈóÆÈ¢òÔºåÂ¶ÇÊûúÊòØÈùôÊÄÅÁ±ªÂûãËØ≠Ë®ÄÁöÑËØùÂ∞±Ê≤°Ê≥ïÂÉè‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏ÄÊ†∑ÊääÊï∞ÁªÑËµãÁªôÊï∞Â≠óÁ±ªÂûãÁöÑÂèòÈáè„ÄÇÂú® Type Profiler ‰∏≠‰ºöÊòæÁ§∫Á±ªÂûãÂêç‰∏∫ String? Âíå Integer? ËøôÊ†∑ÂêéÈù¢Ë∑üÁùÄÈóÆÂè∑Á¨¶Âè∑ÁöÑË°®Á§∫ÔºåËøôÊòØÂú®ÊúâÂ§ö‰∏™‰∏çÂêåÁ±ªÂûãË¢´ÂàÜÈÖçÁªôÁõ∏ÂêåÂèòÈáèÔºåÂáΩÊï∞ÂèÇÊï∞‰º†ÈÄíÂíåÂáΩÊï∞ËøîÂõûÊó∂ÂèëÁîüÁöÑ„ÄÇÊü•ÁúãÊó∂ÂèØ‰ª•ÁúãÂà∞ÊâÄÊúâËøô‰∫õË¢´Êî∂ÈõÜÁöÑÁ±ªÂûãÁöÑ‰ø°ÊÅØ„ÄÇ ÈÇ£‰πà JavaScriptCore ÊòØÂ¶Ç‰ΩïÂàÜÊûêÂèòÈáèÁ±ªÂûãÁöÑÂë¢ÔºüÂÖàÁúãÊÆµ js ‰ª£Á†ÅÔºö 123function add(x, y) { return x + y;} ÂØπÂ∫îÁöÑÂ≠óËäÇÁ†ÅÔºö 12345function add: 10 m_instructions; 3 parameter(s); 1 variable(s)[ 0] enter [ 1] get_scope loc0[ 3] add loc1, arg1, arg2[ 8] ret loc1 ‰∏ãÈù¢ÁúãÁúãÂºÄÂêØ‰∫Ü Type Profiler ÂêéÁöÑÂ≠óËäÇÁ†ÅÊòØ‰ªÄ‰πàÊ†∑ÁöÑÔºö 12345678910111213141516function add: 40 m_instructions; 3 parameter(s); 1 variable(s)[ 0] enter [ 1] get_scope loc0// ÂàÜÊûêÂáΩÊï∞ÂèÇÊï∞[ 3] op_profile_type arg1 [ 9] op_profile_type arg2// ÂàÜÊûê add Ë°®ËææÂºèÁöÑÊìç‰ΩúÊï∞[15] op_profile_type arg1[21] op_profile_type arg2[27] add loc1, arg1, arg2// ÂàÜÊûêËøîÂõûËØ≠Âè•ÔºåÊî∂ÈõÜËøô‰∏™ÂáΩÊï∞ÁöÑËøîÂõûÁ±ªÂûã‰ø°ÊÅØ[32] op_profile_type loc1[38] ret loc1 ‰∏ãÈù¢ÊòØËøõÂÖ• DFG Êó∂ËΩ¨Êç¢Êàê DFG IR ÁöÑ‰ª£Á†ÅÔºö 1234567891011121314151617181920210: SetArgument(this)1: SetArgument(arg1)2: SetArgument(arg2)3: JSConstant(JS|PureInt, Undefined)4: MovHint(@3, loc0)5: SetLocal(@3, loc0)6: JSConstant(JS|PureInt, Weak:Cell: 0x10f458ca0 Function)7: JSConstant(JS|PureInt, Weak:Cell: 0x10f443800 GlobalScopeObject)8: MovHint(@7, loc0)9: SetLocal(@7, loc0)10: GetLocal(JS|MustGen|PureInt, arg1)11: ProfileType(@10)12: GetLocal(JS|MustGen|PureInt, arg2)13: ProfileType(@12)14: ProfileType(@10)15: ProfileType(@12)16: ValueAdd(@10, @12, JS|MustGen|PureInt)17: MovHint(@16, loc1)18: SetLocal(@16, loc1)19: ProfileType(@16)20: Return(@16) Áé∞Âú®ËøòÊúâÂæàÂ§ö ProfileTypeÔºåËøô‰∫õÊìç‰Ωú‰ºöÊúâÂæàÂ§ßÁöÑÊ∂àËÄóÔºåDFG ‰ºöÊé®ÊµãÂèÇÊï∞Á±ªÂûãÊòØÊï¥Êï∞ÔºåÊé•‰∏ãÊù•‰ºöÂú®Ëøô‰∏™ÂÅáËÆæ‰∏ãÂ∞Ü ProfileType ÁöÑÈÇ£‰∫õÊìç‰ΩúÁßªÈô§Êéâ„ÄÇ 12345678910111: SetArgument(arg1)2: SetArgument(arg2)3: JSConstant(JS|PureInt, Undefined)4: MovHint(@3, loc0)7: JSConstant(JS|PureInt, Weak:Cell: 0x10f443800 GlobalScopeObject)8: MovHint(@7, loc0)10: GetLocal(@1, arg1)12: GetLocal(@2, arg2)16: ArithAdd(Int32:@10, Int32:@12)17: MovHint(@16, loc1)20: Return(@16) Âú®ÂØπÁ±ªÂûãÁöÑÂ§ÑÁêÜ‰∏ä V8 ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÁªìÂêà C++ ‰ΩøÁî®Á±ªÂíåÂÅèÁßª‰ΩçÁΩÆÊÄùÊÉ≥ÁöÑÈöêËóèÁ±ªÊù•Ëß£ÂÜ≥ÈÄöËøáÂ≠óÁ¨¶‰∏≤ÂåπÈÖçÊâæÂ±ûÊÄßÁöÑÁÆóÊ≥ï„ÄÇÂÅöÊ≥ïÊòØÂ∞ÜÊúâÁõ∏ÂêåÂ±ûÊÄßÂêçÂíåÂ±ûÊÄßÂÄºÁöÑÂØπË±°‰øùÂ≠òÂú®Âêå‰∏Ä‰∏™ÁªÑÁöÑÈöêËóèÁ±ªÈáåÔºåËøô‰∫õÂ±ûÊÄßÂú®ÈöêËóèÁ±ªÈáåÊúâÁùÄÂêåÊ†∑ÁöÑÂÅèÁßªÂÄºÔºåËøôÊ†∑Ëøô‰∏™ÁªÑÈáåÁöÑÂØπË±°ËÉΩÂ§üÂÖ±Áî®Ëøô‰∏™ÈöêËóèÁ±ªÁöÑ‰ø°ÊÅØ„ÄÇËÆøÈóÆÂ±ûÊÄßÁöÑËøáÁ®ãÊòØÂæóÂà∞ÈöêËóèÁ±ªÁöÑÂú∞ÂùÄÔºåÊ†πÊçÆÂ±ûÊÄßÂêçÂæóÂà∞ÂÅèÁßªÂÄºÔºåÈÄöËøáÂÅèÁßªÂÄºÂíåÈöêËóèÁ±ªÂú∞ÂùÄÂæóÂà∞Â±ûÊÄßÂú∞ÂùÄ„ÄÇÈÇ£‰πàËøô‰∏™ËøáÁ®ãÊòØÂê¶ÂèØ‰ª•Âä†ÈÄüÂë¢ÔºüÁ≠îÊ°àÊòØËÇØÂÆöÁöÑÔºåÈÄöËøá Inline Cache ÁºìÂ≠ò‰πãÂâçÊü•ÊâæÁªìÊûúÊù•ÂáèÂ∞ëÊñπÊ≥ïÂíåÂ±ûÊÄßÁöÑÂìàÂ∏åË°®Êü•ÊâæÊó∂Èó¥„ÄÇÂΩì‰∏Ä‰∏™ÂØπË±°ÊàñÂ±ûÊÄßÁ±ªÂûãÂá∫Áé∞Â§öÁßçÊó∂ÁºìÂ≠òÂ∞±‰ºö‰∏çÊñ≠Êõ¥Êñ∞ÔºåV8 Â∞±‰ºöÈÄÄÂà∞ÂÖàÂâçÊåâÁÖßÂìàÂ∏åË°®Êü•ÊâæÁöÑÊñπÂºèÊù•„ÄÇ Êåá‰ª§ÈõÜÊû∂ÊûÑJavaScriptCore ÊòØÂü∫‰∫éÂØÑÂ≠òÂô®ÁöÑËôöÊãüÊú∫ register-based VM„ÄÇËøôÁßçÂÆûÁé∞ÊñπÂºè‰∏çÁî®È¢ëÁπÅÂÖ•Ê†àÔºåÂá∫Ê†àÂíå‰∏âÂú∞ÂùÄÁöÑÊåá‰ª§ÈõÜÔºåÊâÄ‰ª•ÊïàÁéáÈ´òÔºå‰ΩÜÁßªÊ§çÊÄßÂº±ÁÇπ„ÄÇ Âü∫‰∫éÂØÑÂ≠òÂô®Êåá‰ª§ÈõÜÊû∂ÊûÑ‰∏âÂú∞ÂùÄÂíå‰∫åÂú∞ÂùÄÁöÑÊåá‰ª§ÈõÜÔºåÂü∫Êú¨ÈÉΩÊòØ‰ΩøÁî®Âü∫‰∫éÂØÑÂ≠òÂô®ÁöÑÊû∂ÊûÑÊù•ÂÆûÁé∞ÁöÑÔºåË¶ÅÊ±ÇÈô§‰∫Ü load Âíå store Â§ñÁöÑËøêÁÆóÊåá‰ª§ÁöÑÊ∫êÈÉΩË¶ÅÊòØÂØÑÂ≠òÂô®„ÄÇ ‰∏ãÈù¢ÁöÑ‰ª£Á†Å 1i = a + b; ‰∏äÈù¢ËøôÂè•ËΩ¨Êç¢ÊàêÊú∫Âô®Êåá‰ª§Ê†∑Â≠ê 1add i, a, b ËøôÊ†∑ÁöÑÂΩ¢ÂºèÂ∞±ÊòØ‰∏âÂú∞ÂùÄÊåá‰ª§ÔºåÂæàÂ§öÁöÑ‰ª£Á†ÅÈÉΩÊòØËøôÊ†∑ÁöÑ‰∫åÂÖÉËøêÁÆóÁÑ∂ÂêéÂÜçËµãÂÄºÔºå‰∏âÂú∞ÂùÄÊ≠£Â•ΩÂèØ‰ª•ÂàÜÈÖç‰∏§Âú∞ÂùÄÁªô‰∫åÂÖÉËøêÁÆóÁöÑ‰∏§‰∏™Ê∫êÔºåÂâ©‰∏ã‰∏Ä‰∏™Âú∞ÂùÄÁªôËµãÂÄºÁõÆÊ†á„ÄÇARM Â§ÑÁêÜÂô®ÁöÑ‰∏ªË¶ÅÊåá‰ª§ÈõÜÂ∞±ÊòØ‰∏âÂú∞ÂùÄÁöÑ„ÄÇÈÇ£‰πà‰∫åÂú∞ÂùÄÊòØÊÄé‰πàÂ§ÑÁêÜÁöÑÂë¢ÔºüÂ∞Ü‰∏äÈù¢ÁöÑ‰ª£Á†ÅÊç¢Êàê‰∏ãÈù¢ÁöÑÊ†∑Â≠êÔºö 12i += a;i += b; Êú∫Âô®Êåá‰ª§ÂΩ¢ÂºèÂ∞±ÂèòÊàê 12add i, aadd i, b ËøôÊ†∑‰∏Ä‰∏™Ê∫êÂêåÊó∂‰πü‰Ωú‰∏∫ËµãÂÄºÁõÆÊ†áÔºåX86 Á≥ªÂàóÁöÑÂ§ÑÁêÜÂô®Â∞±ÊòØÈááÁî®ÁöÑ‰∫åÂú∞ÂùÄ„ÄÇ Êúâ‰∫Ü‰∫åÂú∞ÂùÄÂíå‰∏âÂú∞ÂùÄÔºåÈÇ£‰πàÊúâ‰∏ÄÂú∞ÂùÄ‰πà„ÄÇ 12add aadd b ËøôÂ∞±ÊòØ‰∏ÄÂú∞ÂùÄÔºåÂè™ÊúâÊìç‰ΩúÊ∫êÔºåÈÇ£‰πàÁõÆÊ†áÂë¢ÔºüÁõÆÊ†á i ÊòØÈöêËóèÁõÆÊ†áÔºåËøôÁßçËøêÁÆóÁöÑÁõÆÊ†áÁß∞‰∏∫Á¥ØÂä†Âô®ÁöÑ‰∏ìÁî®ÂØÑÂ≠òÂô®ÔºåËøêÁÆóÈÉΩÊòØ‰æùËµñÊõ¥Êñ∞Á¥ØÂä†Âô®ÁöÑÁä∂ÊÄÅÊù•ÂÆåÊàê„ÄÇ Âü∫‰∫éÊ†àÊåá‰ª§ÈõÜÊû∂ÊûÑÈÇ£‰πàÈõ∂Âú∞ÂùÄÂë¢ÔºüJVM Â∞±ÊòØÈááÁî®ÁöÑËøôÁßç„ÄÇÈÇ£‰πàÂ∞±ÂÖàÁúã‰∏ã‰∏ÄÊÆµ JAVA ‰ª£Á†ÅÔºö 12345678class QuickCalculate { byte onePlusOne() { byte x = 1; byte y = 1; byte z = (byte) (x + y); return z; } } ËΩ¨Êç¢ÊàêÂ≠óËäÇÁ†ÅÔºö 1234567891011iconst_1 // Push Êï¥Êï∞Â∏∏Èáè1istore_1 // Pop Âà∞Â±ÄÈÉ®ÂèòÈáè1ÔºåÁõ∏ÂΩì‰∫é byte x = 1; ËøôÂè•iconst_1 // ÂÜç Push Êï¥Êï∞Â∏∏Èáè1 istore_2 // Pop Âà∞Â±ÄÈÉ®ÂèòÈáè2ÔºåÁõ∏ÂΩì‰∫é byte y = 1; ËøôÂè•iload_1 // Push xÔºåËøôÊó∂ x Â∑≤Áªè‰Ωú‰∏∫Êï¥Êï∞Â≠òÂú®Â±ÄÈÉ®ÂèòÈáè1Èáå„ÄÇiload_2 // Push yÔºåËøôÊó∂ y Â∑≤Áªè‰Ωú‰∏∫Êï¥Êï∞Â≠òÂú®Â±ÄÈÉ®ÂèòÈáè1Èáå„ÄÇiadd // ÊâßË°åÂä†Êìç‰ΩúÔºåÊ†àÈ°∂Â∞±ÂèòÊàê‰∫Ü x + yÔºåÁªìÊûú‰∏∫‰∏Ä‰∏™Êï¥Êï∞int2byte // Â∞ÜÊï¥Êï∞ËΩ¨ÂåñÊàêÂ≠óËäÇÔºåÁªìÊûúËøòÊòØÂç†32‰Ωçistore_3 // Pop Âà∞Â±ÄÈÉ®ÂèòÈáè3ÈáåÔºåbyte z = (byte)(x + y)iload_3 // Push z ÁöÑÂÄº‰Ωø‰πãÂèØ‰ª•Ë¢´ËøîÂõûireturn // ËøîÂõûÁªìÊûúÔºåreturn z Êï¥‰∏™ËøáÁ®ãÊàëÊîæÂà∞‰∫ÜÊ≥®ÈáäÈáå„ÄÇÂèØ‰ª•ÁúãÂà∞Èõ∂Âú∞ÂùÄÂΩ¢ÂºèÁöÑÊåá‰ª§ÈõÜÂ∞±ÊòØÂü∫‰∫éÊ†àÊû∂ÊûÑÁöÑ„ÄÇËøôÁßçÊû∂ÊûÑÁöÑ‰ºòÂäøÊòØÂèØ‰ª•Áî®Êõ¥Â∞ëÁöÑÁ©∫Èó¥Â≠òÊõ¥Â§öÁöÑÊåá‰ª§ÔºåÊâÄ‰ª•Á©∫Èó¥‰∏çÊòØÂæàÂØåË∂≥Êó∂ËøôÁßçÊû∂ÊûÑÊòØÂèØÂèñÁöÑÔºå‰∏çËøáÈõ∂Âú∞ÂùÄË¶ÅÂÆåÊàê‰∏Ä‰ª∂‰∫ã‰ºöÊØîÂü∫‰∫éÂØÑÂ≠òÂô®Êåá‰ª§Êû∂ÊûÑÁöÑ‰∫åÂú∞ÂùÄÔºå‰∏âÂú∞ÂùÄÊåá‰ª§Ë¶ÅÂ§öÂæàÂ§öÊåá‰ª§ÔºåÊâßË°åÊïàÁéáËøò‰ºö‰Ωé„ÄÇ Êåá‰ª§ÈõÜÊû∂ÊûÑÊºîÂåñÂíåÊØîËæÉJavaScriptCore ÈááÁî® SquirrleFish ‰πãÂâçÁöÑËß£ÈáäÂô®‰ªñ‰ª¨ÈÉΩÊòØÊ†ëÈÅçÂéÜÂºèÁöÑÔºåËß£ÈáäÂô®‰ºöÈÄíÂΩíÈÅçÂéÜÊ†ëÔºåÂú®ÈÅçÂéÜÊ†ë‰∏äÁöÑÊØè‰∏™ËäÇÁÇπÁöÑÊìç‰ΩúÈÉΩÊòØÊ†πÊçÆËß£ÈáäÂÖ∂ÊØè‰∏™Â≠óËäÇÁÇπËøîÂõûÁöÑÂÄºÊù•ÁöÑ„ÄÇËøôÁßçÊìç‰ΩúÂç≥‰∏çÊòØÂü∫‰∫éÊ†à‰πü‰∏çÊòØÂü∫‰∫éÂØÑÂ≠òÂô®„ÄÇ‰∏æ‰∏™‰æãÂ≠ê 1i = x + y * z Êåâ AST ÁöÑÂêéÂ∫èÈÅçÂéÜÔºåÊúÄ‰∏äÈù¢ÁöÑ = Á¨¶Âè∑‰æùËµñÂ≠êËäÇÁÇπ + Á¨¶Âè∑ËäÇÁÇπËøîÂõûÁöÑÂÄºÔºå+ Á¨¶Âè∑‰æùËµñ x ËäÇÁÇπÂíå * Á¨¶Âè∑ËäÇÁÇπÁöÑÂÄºÔºå‰æùÊ≠§ÈÄíÂΩí‰∏ãÂéªÔºåËøôÊ†∑ÊúÄÂºÄÂßãËé∑ÂèñÂà∞ÂÄºÁöÑÂ∞±ÊòØÊúÄ‰Ωé‰∏ÄÁ∫ßÁöÑËøêÁÆóÔºåÂú®Ëøô‰∏™‰æãÂ≠êÈáåÂ∞±ÊòØ y Âíå z ÁöÑËøêÁÆóÁöÑÁªìÊûúËøîÂõûÁªô * Á¨¶Âè∑ËäÇÁÇπ„ÄÇËøôÁßçÂ∞±ÊòØÂÖ∏ÂûãÁöÑÂêéÂ∫èÈÅçÂéÜ„ÄÇCRuby 1.9 ‰πãÂâç‰πüÊòØÁî®ÁöÑËøôÁßçÊñπÂºèËß£ÈáäÊâßË°åÁöÑ„ÄÇ ËµãÂÄºÁ¨¶Âè∑ = Á¨¶Âè∑ÁöÑÂ∑¶‰æßÂè´ÂÅöÂ∑¶ÂÄºÔºåÂè≥‰æßÁöÑÂÄºÂè´ÂÅöÂè≥ÂÄº„ÄÇÂ∑¶ÂÄº‰πüÂèØËÉΩÊòØÂ§çÊùÇÁöÑË°®ËææÂºèÔºåÊØîÂ¶ÇÊï∞ÁªÑÊàñËÄÖÁªìÊûÑ‰Ωì„ÄÇÊ†πÊçÆÊ±ÇÂÄºÈ°∫Â∫èÔºåÂØπ‰∫é‰∫åÂÖÉËøêÁÆóÁöÑËäÇÁÇπÔºåÊòØÂÖàÈÅçÂéÜÂ∑¶Â≠êËäÇÁÇπÁöÑ„ÄÇÊâÄ‰ª•ÂΩìÂ∑¶ÂÄºÊòØÂ§çÊùÇË°®ËææÂºèÈúÄË¶ÅËÆ°ÁÆóÊó∂ÊòØ‰ºö‰ºòÂÖàËøõË°åËÆ°ÁÆóÁöÑ„ÄÇÂÜçÁúã‰∏™Â∑¶ÂÄºÊòØÊï∞ÁªÑÁöÑ‰æãÂ≠êÔºö 12345678public class LeftFirstTest { public static void main(String[] args) { int[] arr = new int[1]; int x = 3; int y = 5; arr[0] = x + y; }} arr[0] = x + y; ÂØπÂ∫îÁöÑÂ≠óËäÇÁ†ÅÔºö 12345678910// Â∑¶ÂÄºÔºåÊï∞ÁªÑ‰∏ãÊ†áaload_1 iconst_0 // Âè≥ÂÄºiload_2 // xiload_3 // yiadd iastore // ËµãÂÄºÁ¨¶Âè∑ËäÇÁÇπËøõË°åËµãÂÄº ÂèØ‰ª•ÁúãÂà∞Â∑¶ÂÄºÊòØÂÖàËÆ°ÁÆóÁöÑ„ÄÇ ‰ªéÊ†ëÈÅçÂéÜÂà∞Âü∫‰∫éÊ†àÁöÑËß£ÈáäÔºåÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™Â∞Ü AST Ê†ëÊâìÂπ≥ÁöÑËøáÁ®ã„ÄÇÊñπÊ≥ïÊòØÂêéÂ∫èÈÅçÂéÜ AST Êó∂‰ΩøÁî® Reverse Polish Notation ËøôÁßçÂêéÁºÄËÆ∞Ê≥ïÁîüÊàê‰∏Ä‰∏™Â∫èÂàóÔºåÊàê‰∏∫‰∏Ä‰∏™Á∫øÊÄßÁªìÊûÑÔºåÂêéÈù¢ÂÜçËß£ÈáäÊâßË°åËøô‰∏™Êìç‰ΩúÂ∫èÂàó„ÄÇ JVM ÊòØ Java ËØ≠Ë®ÄÁöÑËôöÊú∫„ÄÇAndroid ‰πüÊòØÁî®ÁöÑ Java ËØ≠Ë®ÄÔºåÈÇ£‰πàÂÆÉÁöÑËôöÊú∫‰πüÊòØ JVM ÂêóÔºüÁ≠îÊ°àÊòØÂê¶ÂÆöÁöÑÔºåAndroid ‰ΩøÁî®ÁöÑËôöÊú∫Âè´ Dalvik VMÔºåËøôÊ¨æËôöÊú∫Âú®ÂæàÂ§öËÆæËÆ°‰∏äÈÉΩ‰∏é JVM ÂÖºÂÆπÔºåÂ≠óËäÇÁ†ÅÊòØ‰∫åÂú∞ÂùÄÂíå‰∏âÂú∞ÂùÄÂπ∂Áî®ÁöÑÊñπÂºèÔºåÊòØÂü∫‰∫éÂØÑÂ≠òÂô®ÁöÑÊû∂ÊûÑ„ÄÇDalvik VM Áî®Âú®ÁßªÂä®Á´Ø‰∏∫‰∫ÜËÉΩÂ§üÊõ¥Âä†È´òÊïàÔºåÂºÄÂßãÂ∞±Ê≤°ÊúâÈ°æÂèäÂ§™Â§öÂèØÁßªÊ§çÊÄßÔºåËøôÊ†∑Âü∫‰∫éÂØÑÂ≠òÂô®Êû∂ÊûÑÁöÑ‰ºòÂäøÂ∞±ËÉΩÂ§üÊõ¥Â•ΩÁöÑÂèëÊå•Âá∫Êù•‰∫Ü„ÄÇÊÉ≥Êõ¥Â§ö‰∫ÜËß£ Dalvik VM ÂèØ‰ª•ÈÄöËøá Dan Bornstein ÂÅöÁöÑ‰∏Ä‰∏™ Dalvik ÁöÑÂÆûÁé∞ÂéüÁêÜÁöÑÊºîËÆ≤ Dalvik VM Internals„ÄÇ JVM Âíå Dalvik VM ÁöÑ‰∏ªË¶ÅÂå∫Âà´ÊòØÂêéËÄÖÂ≠óËäÇÁ†ÅÊåá‰ª§Êï∞ÈáèÂíåÂÜÖÂ≠òÊõ¥Â∞ë„ÄÇJVM ÊØè‰∏™Á∫øÁ®ãÊúâ‰∏Ä‰∏™ Java Ê†àÁî®Êù•ËÆ∞ÂΩïÊñπÊ≥ïË∞ÉÁî®ÁöÑ activation recordÔºåÊØèË∞ÉÁî®‰∏Ä‰∏™ÊñπÊ≥ïÂ∞±‰ºöÂàÜÈÖç‰∏Ä‰∏™Êñ∞Ê†àÂ∏ßÔºåÊñπÊ≥ïËøîÂõûÂ∞± Pop Âá∫Ê†àÂ∏ß„ÄÇÊØè‰∏™Ê†àÂ∏ß‰ºöÊúâÂ±ÄÈÉ®ÂèòÈáèÂå∫Ôºåistore ËøôÊ†∑ÁöÑÊåá‰ª§Áî®Êù•ÁßªÂä®Â±ÄÈÉ®ÂèòÈáèÂíåÂèÇÊï∞Âà∞Â±ÄÈÉ®ÂèòÈáèÂå∫„ÄÇÊØè‰∏™Ê†àÂ∏ßËøò‰ºöÊúâÊ±ÇÂÄºÊ†àÔºåËøô‰∏™Ê†àÁî®Êù•Â≠òÂÇ®Ê±ÇÂÄºÁöÑ‰∏≠Èó¥ÁªìÊûúÂíåË∞ÉÁî®ÂÖ∂‰ªñÊñπÊ≥ïÁöÑÂèÇÊï∞Á≠âÔºå‰ΩøÁî® iconst ËøôÊ†∑ÁöÑÊåá‰ª§Êù•ËøõË°åÊï∞ÊçÆÁöÑÁßªÂä®ÔºåËøòÂèØ‰ª•ÈÄöËøá iaddÔºåimul ËøôÊ†∑ÁöÑÊåá‰ª§Âú®Ê±ÇÂÄºÊ†à‰∏≠ Pop Âá∫ÂÄºËøõË°åÊ±ÇÂÄºÔºåÁÑ∂ÂêéÂÜçÊääÁªìÊûú Push Âà∞Ê†àÈáå„ÄÇ Dalvik VM ÁöÑÊØè‰∏™Á∫øÁ®ãÊúâÁ®ãÂ∫èËÆ°Êï∞Âô®ÂíåË∞ÉÁî®Ê†àÔºåÊñπÊ≥ïÁöÑË∞ÉÁî®Âíå JVM ‰∏ÄÊ†∑ÊòØ‰ºöÂàÜÈÖç‰∏Ä‰∏™Êñ∞ÁöÑÂ∏ßÔºå‰∏çÂêåÁöÑÊòØ Dalvik VM ‰ΩøÁî®ÁöÑÊòØËôöÊãüÂØÑÂ≠òÂô®Êù•Êõø‰ª£ JVM ÈáåÁöÑÂ±ÄÈÉ®ÂèòÈáèÂå∫ÂíåÊ±ÇÂÄºÊ†à„ÄÇÊñπÊ≥ïË∞ÉÁî®‰ºöÊúâ‰∏ÄÁªÑËá™Â∑±ÁöÑËôöÊãüÂØÑÂ≠òÂô®ÔºåÂ∏∏Áî®ÁöÑÊòØ v0 - v15ÔºåÊúâ‰∫õÊåá‰ª§ÂèØ‰ª•‰ΩøÁî® v0 - v255„ÄÇÂè™Âú®ËôöÊãüÂØÑÂ≠òÂô®‰∏≠ËøõË°åÊåá‰ª§Êìç‰ΩúÔºåÊï∞ÊçÆÁßªÂä®Â∞ëÂ§ö‰∫ÜÔºå‰øùÂ≠òÂ±ÄÈÉ®ÂèòÈáèÁöÑÂ≠òÂÇ®ÂçïÂÖÉ‰πü‰ºöÂ∞ëÂæàÂ§ö„ÄÇDalvik VM ÁöÑÂØÑÂ≠òÂô®ÊØèÊ¨°ÊñπÊ≥ïË∞ÉÁî®‰ºö‰∏ÄÁªÑËá™Â∑±ÁöÑÔºå‰∏çËøáÂú® X86 Êû∂ÊûÑ‰∏≠ÂØÑÂ≠òÂô®ÊòØÂÖ®Â±ÄÁöÑÔºåËøôÊ†∑ X86 ÈúÄË¶ÅËÄÉËôë calling converntionÔºåÂ∞±ÊòØÈúÄË¶Å‰øùÊä§‰∏Ä‰∫õÂØÑÂ≠òÂô®ÁöÑÁä∂ÊÄÅÔºåÂú®Ë∞ÉÁî®Êó∂ÈúÄË¶ÅÂ§ÑÁêÜËøô‰∫õÔºåËÄå Dalvik VM Ë∞ÉÁî®ÂÆåÊñπÊ≥ïÂêéÔºåÈÇ£‰∫õÂØÑÂ≠òÂô®ÂÄº‰ºöÊÅ¢Â§çÊàêË∞ÉÁî®ÂâçÁöÑÂèØ‰ª•ÂæàÂ•ΩÁöÑÈÅøÂÖçËøôÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇ V8 Ê≤°Êúâ‰∏≠Èó¥ÁöÑÂ≠óËäÇÁ†ÅÔºåËÄåÊòØÁõ¥Êé•ÁºñËØë JavaScript ÁîüÊàêÊú∫Âô®Á†Å„ÄÇ‰∏çËøáÂú®ÂÜÖÈÉ®‰πüÁî®‰∫ÜË°®ËææÂºèÊ†àÊù•ÁÆÄÂåñ‰ª£Á†ÅÁîüÊàêÔºåÂú®ÁºñËØëËøáÁ®ã‰∏≠‰ΩøÁî®ËôöÊãüÊ†àÂ∏ßÊù•ËÆ∞ÂΩïÂ±ÄÈÉ®ÂèòÈáèÂíåÊ†àÁöÑÁä∂ÊÄÅ„ÄÇÁîüÊàê‰ª£Á†ÅÁöÑËøáÁ®ã‰∏≠‰ºöÊúâÁ™•Â≠î‰ºòÂåñÁî®Êù•ÂéªÈô§Â§ö‰ΩôÁöÑÂÖ•Ê†àÂíåÂá∫Ê†àÔºåÊääÊ†àÊìç‰ΩúËΩ¨ÊàêÂØÑÂ≠òÂô®Êìç‰ΩúÔºåÁîüÊàêÁöÑ‰ª£Á†ÅÁúãËµ∑Êù•Â∞±ÂíåÂü∫‰∫éÂØÑÂ≠òÂô®ÁöÑ‰ª£Á†ÅÁ±ª‰ºº‰∫Ü„ÄÇ ËøôÂ∞±Êúâ‰∏™ÁñëÈóÆ‰∫ÜÔºåÈõ∂Âú∞ÂùÄË¶ÅÂÅöÂ§öÊ¨°ÂÖ•Ê†àÂíåÂá∫Ê†àÊìç‰ΩúÔºåÊâßË°åÊïàÁéá‰ΩéÔºåÈÇ£‰πà‰∏∫‰ªÄ‰πàËøò‰ºöÊúâËôöÊãüÊú∫ÊØîÂ¶Ç JVM Â≠óËäÇÁ†ÅËøòË¶ÅÁî®Èõ∂Âú∞ÂùÄÂΩ¢ÂºèÂë¢Ôºü ÂÉè X86 ÂàöÂºÄÂßãÊó∂ÁöÑÂØÑÂ≠òÂô®ÂæàÂ§ö‰∏çÊòØÈÄöÁî®ÂØÑÂ≠òÂô®ÔºåÁî±‰∫éËÆ©ÁºñËØëÂô®ÂéªÂÜ≥ÂÆöÁ®ãÂ∫èÈáåÈÇ£‰πàÂ§öÁöÑÂèòÈáèËØ•ÊÄé‰πàË£ÖÂà∞ÂØÑÂ≠òÂô®ÈáåÔºåÈÇ£‰∫õÂ∫îËØ•Â∫îËØ•Êò†Â∞ÑÂà∞‰∏Ä‰∏™ÂØÑÂ≠òÂô®ÔºåÂì™‰∫õÂ∫îËØ•Êç¢Âá∫ÔºåËøôÂπ∂‰∏çÂÆπÊòìÔºåJVM ÈááÁî®Èõ∂Êåá‰ª§ËøôÁßçÂ†ÜÊ†àÁªìÊûÑÁöÑÂéüÂõ†Â∞±ÊòØ‰∏ç‰ø°‰ªªÁºñËØëÂô®ÁöÑÂØÑÂ≠òÂô®ÂàÜÈÖçÔºåÊâÄ‰ª•‰ΩøÁî®Â†ÜÊ†àÁªìÊûÑÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈÅøÂºÄÂØÑÂ≠òÂô®ÂàÜÈÖçËøôÊ†∑ÁöÑÈöæÈ¢ò„ÄÇ‰∏çËøáÂêéÊù• IBM ÂÖ¨ÂºÄ‰∫Ü‰ªñ‰ª¨ÁöÑÂõæÊüìËâ≤ÂØÑÂ≠òÂô®ÂàÜÈÖçÁÆóÊ≥ïÔºåËøôÊ†∑ÁºñËØëÂô®ÁöÑÂàÜÈÖçËÉΩÂäõÂæóÂà∞‰∫ÜÂæàÂ§ßÁöÑËøõÊ≠•ÔºåÊâÄ‰ª•Áé∞Âú®ÈÉΩÊòØÁºñËØëÂô®Êù•‰∏ªÂØºÂØÑÂ≠òÂô®ÂàÜÈÖç„ÄÇ ÂæàÂ§ö‰∏ªÊµÅÈ´òÁ∫ßËØ≠Ë®ÄËôöÊãüÊú∫Ôºàhigh-level language virtual machineÔºåÁÆÄÁß∞ HLL VMÔºâÊØîÂ¶Ç JVMÔºåCPython ÈÉΩÈááÁî®ÁöÑÂü∫‰∫éÊ†àÁöÑÊû∂ÊûÑ„ÄÇËøôÊ†∑ÂÅö‰∏ªË¶ÅÊòØÂõ†‰∏∫‰∏çÁî®ËÄÉËôë‰∏¥Êó∂ÂèòÈáèÂàÜÈÖçÁ©∫Èó¥ÔºåÂè™ÈúÄË¶ÅÊ±ÇÂÄºÊ†àÊù•ÂÅöÔºåËøôÊ†∑ÁöÑÁºñËØëÂô®Êõ¥ÂÆπÊòìÂÆûÁé∞„ÄÇËøòÊúâÂ∞±ÊòØÂèØ‰ª•Êõ¥ÂÆπÊòìÂú®Á°¨‰ª∂ËæÉÂ∑ÆÁöÑÊú∫Âô®‰∏äËøêË°åÔºåÂâçÈù¢‰πüËÆ≤Âà∞Âü∫‰∫éÊ†àËøôÁßçÊû∂ÊûÑÊåá‰ª§ÂØπ‰∫éÂ≠òÂÇ®Á©∫Èó¥ÁöÑË¶ÅÊ±ÇÊõ¥Â∞ë„ÄÇÊúÄÂêéÂ∞±ÊòØËÄÉËôëÁßªÊ§çÔºåÂ§çÊùÇÊåá‰ª§ËÆ°ÁÆóÊú∫ÔºàComplex Instruction Set ComputerÔºåÁÆÄÁß∞ CISCÔºâÁöÑÈÄöÁî®ÂØÑÂ≠òÂô®ÊØîËæÉÂ∞ëÔºå32‰ΩçÂè™Êúâ8‰∏™32‰ΩçÈÄöÁî®ÂØÑÂ≠òÂô®„ÄÇÁ≤æÁÆÄÊåá‰ª§ÈõÜËÆ°ÁÆóÊú∫ÔºàReduced Instruction Set ComputerÔºåÁÆÄÁß∞ RISCÔºâÈÄöÁî®ÂØÑÂ≠òÂô®Êï∞Èáè‰ºöÂ§ö‰∫õÔºå32‰ΩçÊúâ16‰∏™ÂØÑÂ≠òÂô®„ÄÇÊ∫êÊû∂ÊûÑÂØÑÂ≠òÂô®Êï∞ÈáèÈÄöÂ∏∏ÂíåÂÆûÈôÖÊú∫Âô®ÈÄöÁî®ÂØÑÂ≠òÂô®Êï∞Èáè‰∏ç‰∏ÄËá¥ËÄåÂÆûÁé∞Êò†Â∞ÑÈ∫ªÁÉ¶ÔºåÂü∫‰∫éÊ†àÊû∂ÊûÑÈáåÊòØÊ≤°ÊúâÈÄöÁî®ÂØÑÂ≠òÂô®ÁöÑÔºåÂÆûÁé∞ËôöÊú∫Êó∂ÂèØ‰ª•Â∞±ÂèØ‰ª•ÂæàÂÆπÊòìËá™Áî±ÁöÑÂàÜÈÖçÂÆûÈôÖÊú∫Âô®ÂØÑÂ≠òÂô®ÔºåÁßªÊ§çËµ∑Êù•Ëá™ÁÑ∂‰πüÂ∞±ÂÆπÊòìÂ§ö‰∫Ü„ÄÇ Â§ÑÁêÜÂô®Êù•ËØ¥Â§öÊòØÂü∫‰∫éÂØÑÂ≠òÂô®Êû∂ÊûÑÁöÑÔºå‰ΩÜÊòØÂØπ‰∫éËôöÊú∫Êù•ËØ¥ÔºåÁî±‰∫éÂü∫‰∫éÊ†àÊû∂ÊûÑÈúÄË¶ÅÊâßË°åÊõ¥Â§öÁöÑ load Êàñ store ËøôÊ†∑ÁöÑÊåá‰ª§ÔºåËøôÊ†∑ Instruction dispatch ÁöÑÊ¨°Êï∞ÂíåÂÜÖÂ≠òËÆøÈóÆÁöÑÊ¨°Êï∞‰ºöÊõ¥Â§öÔºåÊâÄ‰ª•Âü∫‰∫éÂØÑÂ≠òÂô®ÁöÑÊû∂ÊûÑÂú®ËôöÊú∫ÈáåÂêåÊ†∑‰πüÊõ¥‰ºò‰∫õÔºåËøô‰πüÊòØ‰∏∫‰ªÄ‰πàÂØπ‰∫éÈó≠ÁéØÁöÑËãπÊûúÊù•ËØ¥‰ºöÂú® JavaScriptCore ÁöÑËôöÊú∫ÈáåÈááÁî®ÊÄßËÉΩÊõ¥Â•ΩÁöÑÂü∫‰∫éÂØÑÂ≠òÂô®ÁöÑÊû∂ÊûÑÔºåËÄå‰∏çÂéªÈ°æÂèäÁßªÊ§çÊÄß„ÄÇ JavaScriptÂêÑÂ§ßÂºïÊìéÁöÑ‰ªãÁªçÂêÑ‰∏™ JavaScript ÂºïÊìé‰ªãÁªçÔºö SpiderMonkeyÔºöÁî®‰∫é Mozilla FirefoxÔºåÊòØÊúÄÊó©ÁöÑ JavaScript ÂºïÊìéÔºåÂü∫‰∫éÊ†àÁöÑÂ≠óËäÇÁ†Å„ÄÇParser ‰ΩøÁî®ÁöÑÊâãÂÜôÁ∫ØÈÄíÂΩí‰∏ãÈôçÂºè„ÄÇ KJSÔºöKDE ÁöÑÂºïÊìéÔºåÁî®‰∫é Konqueror ÊµèËßàÂô®„ÄÇÊ†ëÈÅçÂéÜËß£ÈáäÂô®„ÄÇParser ‰ΩøÁî®ÁöÑÊòØ bison„ÄÇ RhinoÔºö‰ΩøÁî® JavaÁºñÂÜôÔºåÂºÄÂèëÊ∫êÁ†ÅÔºå‰πüÊòØ Mozilla ÁöÑÔºåÁõ∏ÂΩì‰∫é Java ÁâàÁöÑ SpiderMonkeyÔºåÂΩìÊó∂ÁöÑÊÉ≥Ê≥ïÊòØÊÉ≥Êää JavaScript ÂÅöÊàêÊúçÂä°Á´ØÁöÑËÑöÊú¨ËØ≠Ë®ÄÊù•Áî®„ÄÇParser ÊòØÊâãÂÜôÁöÑÁ∫ØÈÄíÂΩí‰∏ãÈôçÂºè rhino/src/org/mozilla/javascript/Parser.java „ÄÇ ChakraÔºö‰πüÂè´ JScript ÂæÆËΩØÁöÑ Internet Explorer Âíå Microsoft Edge Âú®‰ΩøÁî®„ÄÇ JavaScriptCoreÔºöËãπÊûúÂºÄÂèëÁöÑÂºÄÊ∫ê JavaScript ÂºïÊìéÔºåÁî®Âú® Safari Á≠âÊµèËßàÂô®‰∏≠„ÄÇSafari ÊòØÂ∏¶Êúâ JIT ÁöÑ JavaScriptCore ÁöÑÔºåËÄå UIWebView ÊòØÊ≤°ÊúâÁöÑ„ÄÇ V8ÔºöGoogle ÂºÄÂèëÁöÑÂºÄÊ∫êÂºïÊìéÔºåÁî®‰∫é Chrome„ÄÇParser ‰ΩøÁî®ÁöÑÊòØÊâãÂÜôÁ∫ØÈÄíÂΩí‰∏ãÈôçÂä†ËøêÁÆóÁ¨¶‰ºòÂÖàÁ∫ßÊ∑∑ÂêàÂºè„ÄÇV8 ‰ΩøÁî®‰∫Ü 2-passÔºå‰ºöÂÖàÊî∂ÈõÜ‰∏Ä‰∫õ‰∏ä‰∏ãÊñá‰ø°ÊÅØÂ¢ûÂä†È¢ÑÊµãÁöÑÂáÜÁ°ÆÊÄß„ÄÇV8 ÂºÄÂßãÊó∂ÊòØ‰∏çÁî®Â≠óËäÇÁ†Å‰ºöÁõ¥Êé•ÁºñËØëÊàêÊú∫Âô®Á†ÅÔºåDart VM ‰πüÊòØËøôÊ†∑ËÆæËÆ°ÁöÑÔºå‰ªñ‰ª¨‰∏Ä‰∏™ÈóÆÈ¢òÁöÑÂõûÁ≠î Why didn‚Äôt Google build a bytecode VM targetable by multiple languages including Dart? ÂêåÊ†∑ÈÄÇÁî®‰∫é V8„ÄÇ‰∏çËøá V8 5.9 ÂêØÁî®‰∫Ü Ignition Â≠óËäÇÁ†ÅËß£ÈáäÂô®ÔºåËá™Ê≠§Âá†Â§ß JS ÂºïÊìéÈÉΩÁî®‰∫ÜÂ≠óËäÇÁ†Å„ÄÇÂêØÁî®Â≠óËäÇÁ†ÅÁöÑËÄÉËôë‰∏ªË¶ÅÊòØÂ∏åÊúõËÉΩÂ§üÂáèÂ∞ëÊú∫Âô®Á†ÅÂØπÂÜÖÂ≠òÁ©∫Èó¥ÁöÑÂç†Áî®„ÄÇÁî±‰∫éÊú∫Âô®Á†ÅÂç†Áî®ÁöÑÁ©∫Èó¥‰πüÂæàÂ§ßÔºåÊâÄ‰ª•‰∏çÂ•ΩÈÉΩÁºìÂ≠ò‰∏ãÊù•Ôºå‰∏çÁÑ∂ÂÜÖÂ≠òÂíåÁ£ÅÁõòÈÉΩÂêÉ‰∏çÊ∂àÔºåÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÊó∂Èó¥ÈÉΩÂ§™ÈïøÔºåËøôÊ†∑ÊØèÊ¨°ÁºñËØëÁöÑÊú∫Âô®Á†ÅÈÉΩ‰∏çÊòØÂÆåÊï¥ÁöÑÂè™‰ºöÁºìÂ≠òÊúÄÂ§ñÁöÑ‰∏ÄÂ±ÇÔºåÂ¶ÇÊûú‰ª£Á†ÅÊúÄÂ§ñÂ±ÇÂåÖ‰∫Ü‰∏ÄÂ±ÇÔºåÂêØÂä®‰ª£Á†ÅÊØèÊ¨°ÈÉΩÊòØ‰∏çÂêåÁöÑË∞ÉÁî®Â∞±‰ºöÊØèÊ¨°ÈÉΩÁºñËØëÔºå‰ºöÂØºËá¥ÁºìÂ≠òÊ≤°Êúâ‰ΩúÁî®„ÄÇÁî±‰∫éÂ≠óËäÇÁ†ÅÈÄöËøáÊØîËæÉÂ•ΩÁöÑËÆæËÆ°ÂêéËÉΩÂ§üÂÅöÂà∞ÊØîÊú∫Âô®Á†ÅÁ¥ßÂáëÔºåËøôÊ†∑ÂºïÂÖ• Ignition ÂêéÂÜÖÂ≠òÊòéÊòæÁöÑ‰∏ãÈôç‰∫Ü„ÄÇTurboFan ÂÜçÂØπ Ignition Â≠óËäÇÁ†ÅÊù•ËøõË°åËß£Èáä„ÄÇ ÂêÑ‰∏™ÂºïÊìé‰πãÈó¥ÈÄöÁî®ÊäÄÊúØÊ†πÊçÆ‰∏ãÈù¢ÂÖ≥ÈîÆÂ≠êÂéªÊü•ÊâæÔºåÂèØ‰ª•‰∫ÜËß£Êõ¥Â§öÁöÑÁõ∏ÂÖ≥ÁöÑËôöÊú∫ÊäÄÊúØ„ÄÇ Ê∫êÁ†ÅÂà∞‰∏≠Èó¥‰ª£Á†Å Recusive-descent parserÔºöÈÄíÂΩí‰∏ãÈôçÂºè parser Operator precedence parserÔºöËøêÁÆóÁ¨¶‰ºòÂÖàÁ∫ß parser Deferred parserÔºöÂª∂Ëøü parser ‰∏≠Èó¥‰ª£Á†ÅÂà∞ÁõÆÊ†á‰ª£Á†Å Tiered compilationÔºöÂ§öÂ±ÇÁºñËØë Background compilationÔºöÂêéÂè∞ÁºñËØë Type feedbackÔºöÁ±ªÂûãÂèçÈ¶à Type specializationÔºöÁ±ªÂûãÁâπÂåñ SSA-form IRÔºöÈùôÊÄÅÂçïËµãÂÄºÂΩ¢Âºè ming1016","link":"/ÁºñÁ®ã/Ô£ø/javascriptcore/"},{"title":"iOSÂü∫Á°ÄÈõÜÂêàÁ±ª","text":"NSArray##ÊéíÂ∫è ÈÄÜÂ∫èÔºåarray.reverseObjectEnumerator.allObjects Êï∞ÁªÑ‰∏≠ÊòØÂ≠óÁ¨¶‰∏≤ÂØπË±°ÊéíÂ∫èÈ¶ñÈÄâsortedArrayUsingSelector: 12NSArray *array = @[@&quot;John Appleseed&quot;, @&quot;Tim Cook&quot;, @&quot;Hair Force One&quot;, @&quot;Michael Jurewitz&quot;];NSArray *sortedArray = [array sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; Â≠òÂÇ®ÂÜÖÂÆπÊòØÊï∞Â≠ó 12NSArray *numbers = @[@9, @5, @11, @3, @1];NSArray *sortedNumbers = [numbers sortedArrayUsingSelector:@selector(compare:)]; ‰ΩøÁî®ÂáΩÊï∞ÊåáÈíàsortedArrayHintÊéíÂ∫è 12345- (NSData *)sortedArrayHint;- (NSArray *)sortedArrayUsingFunction:(NSInteger (*)(id, id, void *))comparator context:(void *)context;- (NSArray *)sortedArrayUsingFunction:(NSInteger (*)(id, id, void *))comparator context:(void *)context hint:(NSData *)hint; Âü∫‰∫éblockÁöÑÊéíÂ∫èÊñπÊ≥ï 123- (NSArray *)sortedArrayUsingComparator:(NSComparator)cmptr;- (NSArray *)sortedArrayWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr; ÊÄßËÉΩÊØîËæÉselectorÊúÄÂø´ 1Sorting 1000000 elements. selector: 4947.90[ms] function: 5618.93[ms] block: 5082.98[ms]. Êõ¥Âø´ÁöÑ‰∫åÂàÜÊü•Êâæ 123456789101112typedef NS_OPTIONS(NSUInteger, NSBinarySearchingOptions) { NSBinarySearchingFirstEqual = (1UL &lt;&lt; 8), NSBinarySearchingLastEqual = (1UL &lt;&lt; 9), NSBinarySearchingInsertionIndex = (1UL &lt;&lt; 10),};- (NSUInteger)indexOfObject:(id)obj inSortedRange:(NSRange)r options:(NSBinarySearchingOptions)opts usingComparator:(NSComparator)cmp;//Time to search for 1000 entries within 1000000 objects. Linear: 54130.38[ms]. Binary: 7.62[ms] Êûö‰∏æ ‰ΩøÁî®indexesOfObjectsWithOptions:passingTest: 12345NSIndexSet *indexes = [randomArray indexesOfObjectsWithOptions:NSEnumerationConcurrent passingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) { return testObj(obj);}];NSArray *filteredArray = [randomArray objectsAtIndexes:indexes]; ‰º†ÁªüÁöÑÊûö‰∏æ 123456NSMutableArray *mutableArray = [NSMutableArray array];for (id obj in randomArray) { if (testObj(obj)) { [mutableArray addObject:obj]; }} blockÊñπÂºèÊûö‰∏æ 123456NSMutableArray *mutableArray = [NSMutableArray array];[randomArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) { if (testObj(obj)) { [mutableArray addObject:obj]; }}]; ÈÄöËøá‰∏ãÊ†áobjectAtIndex: 1234567NSMutableArray *mutableArray = [NSMutableArray array];for (NSUInteger idx = 0; idx &lt; randomArray.count; idx++) { id obj = randomArray[idx]; if (testObj(obj)) { [mutableArray addObject:obj]; }} ‰ΩøÁî®ÊØîËæÉ‰º†ÁªüÁöÑÂ≠¶Èô¢Ê¥æNSEnumerator 12345678NSMutableArray *mutableArray = [NSMutableArray array];NSEnumerator *enumerator = [randomArray objectEnumerator];id obj = nil;while ((obj = [enumerator nextObject]) != nil) { if (testObj(obj)) { [mutableArray addObject:obj]; }} ‰ΩøÁî®predicate 123NSArray *filteredArray2 = [randomArray filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id obj, NSDictionary *bindings) { return testObj(obj);}]]; ÂêÑ‰∏™ÊñπÊ≥ïÊûö‰∏æÊó∂Èó¥ÂèÇËÄÉÔºåindexesOfObjectsWithOptionsÂú®ÂºÄÂêØ‰∫ÜÂπ∂ÂèëÊûö‰∏æÁöÑÊÉÖÂÜµ‰∏ãÊØîNSFastEnumerationÂø´‰∏ÄÂÄç„ÄÇ Êûö‰∏æÊñπÊ≥ï / Êó∂Èó¥ [ms] 10.000.000 elements 10.000 elements indexesOfObjects:, concurrent 1844.73 2.25 NSFastEnumeration (for in) 3223.45 3.21 indexesOfObjects: 4221.23 3.36 enumerateObjectsUsingBlock: 5459.43 5.43 objectAtIndex: 5282.67 5.53 NSEnumerator 5566.92 5.75 filteredArrayUsingPredicate: 6466.95 6.31 NSDictionaryÊÄßËÉΩÂêåÊ†∑Êï∞ÁõÆÁöÑÂÄºÔºåNSDictionaryÊØîNSArrayË¶ÅËä±Ë¥πÂ§öÂæóÂ§öÁöÑÂÜÖÂ≠òÁ©∫Èó¥ ÊéíÂ∫è‰ΩøÁî®NSArrayÁöÑÊéíÂ∫èÊñπÊ≥ïÂ∞ÜÈîÆÊï∞ÁªÑÊéíÂ∫è‰∏∫Êñ∞ÁöÑÂØπË±° 1234- (NSArray *)keysSortedByValueUsingSelector:(SEL)comparator;- (NSArray *)keysSortedByValueUsingComparator:(NSComparator)cmptr;- (NSArray *)keysSortedByValueWithOptions:(NSSortOptions)opts usingComparator:(NSComparator)cmptr; Êûö‰∏æ keysOfEntriesWithOptions:passingTest:ÔºåÂèØÂπ∂Ë°å 123456789NSSet *matchingKeys = [randomDict keysOfEntriesWithOptions:NSEnumerationConcurrentpassingTest:^BOOL(id key, id obj, BOOL *stop){ return testObj(obj);}];NSArray *keys = matchingKeys.allObjects;NSArray *values = [randomDict objectsForKeys:keys notFoundMarker:NSNull.null];__unused NSDictionary *filteredDictionary = [NSDictionary dictionaryWithObjects:values forKeys:keys]; getObjects:andKeys: Êûö‰∏æÔºåÂü∫‰∫écÊï∞ÁªÑ 1234567891011NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionary];id __unsafe_unretained objects[numberOfEntries];id __unsafe_unretained keys[numberOfEntries];[randomDict getObjects:objects andKeys:keys];for (int i = 0; i &lt; numberOfEntries; i++) { id obj = objects[i]; id key = keys[i]; if (testObj(obj)) { mutableDictionary[key] = obj; }} blockÊûö‰∏æ 123456NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionary];[randomDict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) { if (testObj(obj)) { mutableDictionary[key] = obj; }}]; NSFastEnumeration 1234567NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionary];for (id key in randomDict) { id obj = randomDict[key]; if (testObj(obj)) { mutableDictionary[key] = obj; }} NSEnumeration 123456789NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionary];NSEnumerator *enumerator = [randomDict keyEnumerator];id key = nil;while ((key = [enumerator nextObject]) != nil) { id obj = randomDict[key]; if (testObj(obj)) { mutableDictionary[key] = obj; }} ÂêÑ‰∏™ÊñπÊ≥ïÊûö‰∏æÊó∂Èó¥ÂèÇËÄÉ Êûö‰∏æÊñπÊ≥ï / Êó∂Èó¥ [ms] 50.000 elements 1.000.000 elements keysOfEntriesWithOptions:, concurrent 16.65 425.24 getObjects:andKeys: 30.33 798.49 keysOfEntriesWithOptions: 30.59 856.93 enumerateKeysAndObjectsUsingBlock: 36.33 882.93 NSFastEnumeration 41.20 1043.42 NSEnumeration 42.21 1113.08 ming1016","link":"/ÁºñÁ®ã/Ô£ø/ji-chu-ji-he-lei/"},{"title":"iOSÂºÄÂèë‰πãÁî®Êà∑ÁôªÈôÜ‰ø°ÊÅØÂ≠òÂÇ®","text":"Êàë‰ª¨ÂºÄÂèëAppÁöÑÊó∂ÂÄô,Â∏∏Â∏∏Ê∂âÂèäÂà∞Áî®Êà∑ÁôªÈôÜ,ÈÇ£‰πàÂ∞±‰ºöÊ∂âÂèäÂà∞Áî®Êà∑‰ø°ÊÅØÁöÑÂ≠òÂÇ®ÂíåÁî®Êà∑ÁöÑÁôªÈôÜÁä∂ÊÄÅ Â§ßËá¥‰ø°ÊÅØÂ≠òÂÇ®ÂàÜ‰∏∫‰∏âÁßçÊñπÂºè ‰∏Ä.Âçï‰æãÊ®°ÂºèÔºåÁôªÈôÜÂêéÊääÁî®Êà∑Êï∞ÊçÆÂ≠òÂÇ®Âú®Âçï‰æãÂØπË±°ÊàëÈÄöÂ∏∏ÊòØÂ≠òÂú®AppDelegate,Â≠òÂú®ËøôÈáåÁöÑÂ•ΩÂ§ÑÊòØ,Áî®Êà∑Êï∞ÊçÆÁöÑÁîüÂëΩÂë®Êúü‰∏éappËøêË°åÂë®ÊúüÁõ∏Âêå,Â¶ÇÊûúappÂÖ≥Èó≠ÊàñËÄÖÈó™ÈÄÄ,‰∏ãÊ¨°ÂºÄÂêØappÂ∞±ÊòØÊú™ÁôªÈôÜÁä∂ÊÄÅ,‰ª•‰∏ãÊòØÈÉ®ÂàÜÂÖ≥ÈîÆ‰ª£Á†Å 12345678910111213//AppDelegate.hÊñá‰ª∂#import &quot;User.h&quot;@interface AppDelegate : UIResponder &lt;UIApplicationDelegate&gt;@property (strong, nonatomic) User *user;+(AppDelegate*)APP;@end//AppDelegate.mÊñá‰ª∂ ËøôÈáåÂè™ÊòØÂ¢ûÂä†‰∫Ü‰∏™Êñπ‰æøÁöÑÁ±ªÊñπÊ≥ïËÄå@implementation AppDelegate+(AppDelegate*)APP{ return (AppDelegate*)[[UIApplication sharedApplication] delegate];}- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions User ÂÆû‰Ωì123456789101112131415161718192021#import &quot;BaseModel.h&quot;@interface User : BaseModel@property (strong, nonatomic) NSString *userID;@property (strong, nonatomic) NSString *userName;@property (strong, nonatomic) NSString *passdword;@property (strong, nonatomic) NSString *cellPhone;+ (NSURLSessionDataTask *)login:(NSDictionary *)paramDic Success:(void (^)(NSDictionary *result))success Failure:(void (^)(NSError *error))failue;@end- (void)viewDidAppear:(BOOL)animated{ [super viewDidAppear:animated]; if (![AppDelegate APP].user) { LoginViewController *login = [[LoginViewController alloc]init]; [self presentViewController:login animated:YES completion:nil]; } } Âú®RootViewController(‰∏ÄËà¨ÈÉΩÊòØappÁöÑÁ¨¨‰∏Ä‰∏™ÁïåÈù¢Âç≥ÂèØ)‰∏≠Âà§Êñ≠ÊòØÂê¶Â≠òÂú®userÂØπË±°,Â¶ÇÊûúÂ≠òÂú®Âç≥ÁôªÈôÜ,ÂèØ‰ª•Ëé∑ÂèñuserÂÆû‰Ωì‰∏≠ÁöÑÂêÑÁßç‰ø°ÊÅØ,Â¶ÇÊûú‰∏çÂ≠òÂú®Âç≥Êú™ÁôªÈôÜ,ÂºπÂá∫ÁôªÂΩïÊ°Ü,ÁôªÈôÜÂêéËµãÂÄºuserÂØπË±° 12345678910- (void)viewDidAppear:(BOOL)animated{ [super viewDidAppear:animated]; if (![AppDelegate APP].user) { LoginViewController *login = [[LoginViewController alloc]init]; [self presentViewController:login animated:YES completion:nil]; } } ÁôªÈôÜÁïåÈù¢,ÁôªÈôÜÊàêÂäüËµãÂÄºuserÂØπË±°12345678910111213- (IBAction)loginTouched:(id)sender {//ÁΩëÁªúËØ∑Ê±Ç... [User login:@{@&quot;password&quot;:self.password.text, @&quot;cellphone&quot;:self.username.text} Success:^(NSDictionary *result) { [AppDelegate APP].user = [[User alloc]init]; [AppDelegate APP].user.cellphone = self.username.text; [AppDelegate APP].user.password = self.password.text;//Â¶ÇÊûúÁôªÈôÜÂêéÂèçÂõûÁöÑresultÊòØÈúÄË¶ÅÂ≠òÁöÑÊï∞ÊçÆ,Á°Æ‰øùUser model‰∏≠ÊúâÂØπÂ∫îÁöÑÁªìÊûÑ,‰πãÂêéÂà©Áî®JsonModel(https://github.com/icanzilb/JSONModel)Á≠âÊ°ÜÊû∂Áõ¥Êé•ËøõË°åËΩ¨Êç¢ÊØîÂ¶Ç [AppDelegate APP].user = [[User alloc] initWithDictionary:result error:nil]; } Failure:^(NSError *error) { }];} ËøôÊ†∑Â∞±ÂèØ‰ª•Âú®‰ªªÊÑèÁ±ª‰∏≠[AppDelegate APP].user.cellphone ÂèñÁ±ª‰ººÊï∞ÊçÆ‰∫Ü ‰∫å. NSUserDefaults .Êï∞ÊçÆÂ≠òÂÇ®ÂêéÂèØ‰ª•ÂÖ≥Èó≠appÂêé‰æùÁÑ∂Â≠òÂú®,Âè™ÊúâÂç∏ËΩΩApp ÊàñËÄÖÊâãÂä®Âà†Èô§, Êï∞ÊçÆÊâç‰ºöÊ∂àÂ§±(Ê≥®:NSUserDefaultsÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂÖ∂ÂÆûÂ∞±ÊòØÂ≠òÂÇ®Âú®‰∫Ü‰∏Ä‰∏™.plistÊñá‰ª∂‰∏≠,‰ªª‰Ωï‰∫∫ÊääËÆæÂ§áËøûÊé•ÁîµËÑëÂêéÈÉΩÂèØ‰ª•ÊâæÂà∞ÂØπÂ∫îÊñá‰ª∂ÁúãËßÅÂ≠òÂÇ®ÁöÑÂéüÊñáÂÜÖÂÆπ,Èô§Èùû‰Ω†Â≠òÁöÑÊó∂ÂÄôÂä†‰∫ÜÂØÜ,ÊâÄ‰ª•NSUserDefaults‰πãÁî®Êù•Â≠òÂÇ®‰∏çÊòØÂæàÈáçË¶ÅÁöÑÊï∞ÊçÆ,ÊØîÂ¶ÇÁî®Êà∑ÂêçÁ≠â) Êé•ÁùÄÁ¨¨‰∏ÄÁßçÊñπÊ≥ïÁôªÈôÜÁöÑËøáÁ®ã,Â¶ÇÊûúÊàëÊÉ≥ÁôªÈôÜ‰∏ÄÊ¨°ÂêéËÆ∞ÂΩïÁî®Êà∑ÁöÑÁî®Êà∑Âêç,Âπ∂‰∏îÂÖ∂‰ªñÊï∞ÊçÆËøòÊòØÈöèÁùÄappÁîüÂëΩÂë®Êúü,ÈÇ£‰πàÂè™ÈúÄÂÜôÂÖ•NSUserDefaultsÂç≥ÂèØ,ËÆ∞Âæó‰∏çË¶ÅÂøò‰∫Ü[userDefaults synchronize] 123456789101112131415161718- (IBAction)loginTouched:(id)sender {//ÁΩëÁªúËØ∑Ê±Ç... [User login:@{@&quot;password&quot;:self.password.text, @&quot;cellphone&quot;:self.username.text} Success:^(NSDictionary *result) { [AppDelegate APP].user = [[User alloc]init]; [AppDelegate APP].user.cellphone = self.username.text; [AppDelegate APP].user.password = self.password.text;//Â¶ÇÊûúÁôªÈôÜÂêéÂèçÂõûÁöÑresultÊòØÈúÄË¶ÅÂ≠òÁöÑÊï∞ÊçÆ,Á°Æ‰øùUser model‰∏≠ÊúâÂØπÂ∫îÁöÑÁªìÊûÑ,‰πãÂêéÂà©Áî®JsonModel(https://github.com/icanzilb/JSONModel)Á≠âÊ°ÜÊû∂Áõ¥Êé•ËøõË°åËΩ¨Êç¢ÊØîÂ¶Ç [AppDelegate APP].user = [[User alloc] initWithDictionary:result error:nil]; NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; [userDefaults setObject:self.username.text forKey:@&quot;KEY_USER_NAME&quot;]; [userDefaults synchronize]; } Failure:^(NSError *error) { }];} ÂÖ≥Èó≠appÂêé,‰ªéÊñ∞ËøõÂÖ•app,ÊÉ≥ËØªÂèñËøô‰∏™Êï∞ÊçÆÂè™ÈúÄË¶Å‰ªªÊÑèÁ±ª‰∏≠,Âç≥ÂèØËé∑ÂæóÂ≠ò‰∏ãÁöÑÊï∞ÊçÆ 12NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];NSString *username = [userDefaults objectForKey:@&quot;KEY_USER_NAME&quot;]; ‰∏â.Èí•Âåô‰∏≤ÔºåÊï∞ÊçÆÂèØ‰ª•Âà†Èô§appÂêé‰æùÁÑ∂Â≠òÂú®,Èí•Âåô‰∏≤Áî±Êìç‰ΩúÁ≥ªÁªü‰øùÊä§Âπ∂‰∏îÂ≠òÂÇ®ÂêéÁöÑÊï∞ÊçÆÊòØÊØîËæÉÂÆâÂÖ®ÁöÑ,ÈïøÁî®Êù•Â≠òÂÇ®‰∏Ä‰∫õÂØÜÁ†Å,ÁßÅÈí•Â¶ÇÊûúÊÉ≥Â≠òÂÇ®Áî®Êà∑ÁöÑÂØÜÁ†Å,ÂΩìÁÑ∂ÂèØ‰ª•Â≠òÂú®NSUserDefaults‰∏≠,‰ΩÜÊòØÁõ¥Êé•Â≠òÂà∞ plist ÈáåÊòæÁÑ∂ÊòØ‰∏çË¥üË¥£‰ªªÁöÑ Áî®iosÁöÑ Security.framework Â∞±ÂèØ‰ª•ÂÆûÁé∞Èí•Âåô‰∏≤ÁöÑËÆøÈóÆ„ÄÅËØªÂÜô ËøôÈáåÊàëÂÄüÂä©Á¨¨‰∏âÊñπÂºÄÊ∫êÂ∫ìSSKeychain(https://github.com/soffes/sskeychain)‰∏éNSUserDefaultsÈÖçÂêà‰ΩøÁî®ËøõË°åÁ§∫‰æã,Â¶ÇÊûúÊÉ≥Áî®ÂéüÁîüÊñπÊ≥ïËá™Ë°åÂ≠¶‰π† ‰ª•‰∏ãÊòØUserÂÆû‰ΩìÊñ∞Â¢ûÁöÑ‰∏â‰∏™Á±ªÊñπÊ≥ï Áî®‰∫éÊìç‰Ωú‰ø°ÊÅØ 12345678910111213141516171819202122//Ê∏ÖÈô§Êï∞ÊçÆ+ (void)logoutAccount{ NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; NSString *username = [userDefaults objectForKey:@&quot;KEY_USER_NAME&quot;]; [SSKeychain deletePasswordForService:@&quot;KEY_KEYCHAIN_SERVICE&quot; account:username]; [userDefaults removeObjectForKey:@&quot;KEY_USER_NAME&quot;]; [userDefaults synchronize];}//Ëé∑Âèñ ‰ªªÊÑè‰ΩçÁΩÆË∞ÉÁî®+ (void)getAccount:(void (^)(NSString *username,NSString *password))block{ NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; NSString *username = [userDefaults objectForKey:@&quot;KEY_USER_NAME&quot;]; NSString *password = [SSKeychain passwordForService:@&quot;KEY_KEYCHAIN_SERVICE&quot; account:username]; block(username?:@&quot;&quot;,password?:@&quot;&quot;);}//‰øùÂ≠òÊñπÊ≥ï ÁôªÈôÜÊàêÂäüÂêéË∞ÉÁî®+ (void)saveAccount:(NSString *)name andPassword:(NSString *)password { NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; [userDefaults setObject:name forKey:@&quot;KEY_USER_NAME&quot;]; [userDefaults synchronize]; [SSKeychain setPassword:password forService:@&quot;KEY_KEYCHAIN_SERVICE&quot; account:name];} ËøòÊòØÁôªÈôÜÁöÑ‰æãÂ≠ê 1234567891011- (IBAction)loginTouched:(id)sender {//ÁΩëÁªúËØ∑Ê±Ç... [User login:@{@&quot;password&quot;:self.password.text, @&quot;cellphone&quot;:self.username.text} Success:^(NSDictionary *result) { [User saveAccount:self.username.text andPassword:self.password.text]; } Failure:^(NSError *error) { }];} Âõõ. Cookie ÁªìÂêà NSUserDefaultsÂΩì‰Ω†ËÆøÈóÆ‰∏Ä‰∏™ÁΩëÁ´ôÊó∂ÔºåNSURLRequestÈÉΩ‰ºöÂ∏Æ‰Ω†‰∏ªÂä®ËÆ∞ÂΩï‰∏ãÊù•‰Ω†ËÆøÈóÆÁöÑÁ´ôÁÇπËÆæÁΩÆÁöÑCookieÔºåÂ¶ÇÊûú Cookie Â≠òÂú®ÁöÑËØùÔºå‰ºöÊääËøô‰∫õ‰ø°ÊÅØÊîæÂú® NSHTTPCookieStorage ÂÆπÂô®‰∏≠ÂÖ±‰∫´ÔºåÂΩì‰Ω†‰∏ãÊ¨°ÂÜçËÆøÈóÆËøô‰∏™Á´ôÁÇπÊó∂ÔºåNSURLRequest‰ºöÊãøÁùÄ‰∏äÊ¨°‰øùÂ≠ò‰∏ãÊù•‰∫ÜÁöÑCookieÁªßÁª≠ÂéªËØ∑Ê±Ç 1.Â¶ÇÊûúÊúçÂä°Âô®ËÆæÁΩÆ‰∫ÜÂ§±ÊïàÊó∂Èó¥Cookie ‰ºöË¢´ÊåÅ‰πÖÂåñÂà∞Êñá‰ª∂‰∏≠ÔºåkillÊéâÂêéÁ≥ªÁªüËá™Âä®‰øùÂ≠òÔºå‰∏ãÊ¨°ÂêØÂä®app‰ºöËá™Âä®Âä†ËΩΩ.binarycookies‰∏≠ÁöÑCookiesÔºå‰ª•‰∏ãÊòØ‰∏ÄÊù°CookieËæìÂá∫1&lt;NSHTTPCookie version:0 name:&quot;TestCookie&quot; value:&quot;my+cookie+value&quot; expiresDate:2016-04-08 09:31:09 +0000 created:2016-04-08 09:30:49 +0000 sessionOnly:FALSE domain:&quot;api.skyfox.org&quot; path:&quot;/&quot; isSecure:FALSE&gt; 2.Â¶ÇÊûúÊ≤°ËÆæÁΩÆCookieÂ§±ÊïàÊó∂Èó¥Âπ∂‰∏îÔºåÔºåkillÊéâÂêéÁ≥ªÁªü‰∏ç‰ºöËá™Âä®‰øùÂ≠òCookieÔºåÂ¶ÇÊûúÊÉ≥ÊåÅ‰πÖÂåñCookie Ê®°‰ªøÊµèËßàÂô®Â≠ò‰ΩèCookieÔºå‰ΩøÁî®NSUserDefaultsÂ≠ò‰∏ãÂç≥ÂèØ,‰ª•‰∏ãÊòØ‰∏ÄÊù°CookieËæìÂá∫1&lt;NSHTTPCookie version:0 name:&quot;TestCookie&quot; value:&quot;my+cookie+value&quot; expiresDate:(null) created:2016-04-08 09:33:34 +0000 sessionOnly:TRUE domain:&quot;api.skyfox.org&quot; path:&quot;/&quot; isSecure:FALSE&gt; ‰ª•‰∏ãÊòØÂÖ≥ÈîÆ‰ª£Á†Å 123456789101112131415//ÂêàÈÄÇÁöÑÊó∂Êú∫‰øùÂ≠òCookie- (void)saveCookies{ NSData *cookiesData = [NSKeyedArchiver archivedDataWithRootObject: [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setObject: cookiesData forKey: @&quot;org.skyfox.cookie&quot;]; [defaults synchronize];}//ÂêàÈÄÇÁöÑÊó∂Êú∫Âä†ËΩΩCookie ‰∏ÄËà¨ÈÉΩÊòØappÂàöÂàöÂêØÂä®ÁöÑÊó∂ÂÄô- (void)loadCookies{ NSArray *cookies = [NSKeyedUnarchiver unarchiveObjectWithData: [[NSUserDefaults standardUserDefaults] objectForKey: @&quot;org.skyfox.cookie&quot;]]; NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (NSHTTPCookie *cookie in cookies){ [cookieStorage setCookie: cookie]; }} CookieËØ¶Ëß£Ôºöios htttpÁΩëÁªúËØ∑Ê±ÇcookieÁöÑËØªÂèñ‰∏éÂÜôÂÖ•(NSHTTPCookieStorage)ÂÜôÂú®ÊúÄÂêéËá≥‰∫éËøòÊúâ‰ªÄ‰πàÂÜôÊñá‰ª∂ÔºåNSCoderÂΩíÊ°£Á≠âÊñπÂºèÂ∞±‰∏çËØ¥‰∫ÜÔºå‰∏çÊÄé‰πàÂ∏∏Áî®ÂíåÂÆûÁî® Â§©ÁãêÂçöÂÆ¢","link":"/ÁºñÁ®ã/Ô£ø/login/"},{"title":"Ê£ÄÊµãiOSÁöÑAPPÊÄßËÉΩÁöÑ‰∏Ä‰∫õÊñπÊ≥ï","text":"È¶ñÂÖàÂ¶ÇÊûúÈÅáÂà∞Â∫îÁî®Âç°È°øÊàñËÄÖÂõ†‰∏∫ÂÜÖÂ≠òÂç†Áî®ËøáÂ§öÊó∂‰∏ÄËà¨‰ΩøÁî®InstrumentsÈáåÁöÑÊù•ËøõË°åÊ£ÄÊµã„ÄÇ‰ΩÜÂØπ‰∫éÂ§çÊùÇÊÉÖÂÜµÂèØËÉΩÂ∞±ÈúÄË¶ÅÁî®Âà∞Â≠êÁ∫øÁ®ãÁõëÊéß‰∏ªÁ∫øÁ®ãÁöÑÊñπÂºèÊù•‰∫ÜÔºå‰∏ãÈù¢ÊàëÂØπËøô‰∫õÊñπÊ≥ïÂÅö‰∫õ‰ªãÁªçÔºö Time ProfilerÂèØ‰ª•Êü•ÁúãÂ§ö‰∏™Á∫øÁ®ãÈáåÈÇ£‰∫õÊñπÊ≥ïË¥πÊó∂ËøáÂ§öÁöÑÊñπÊ≥ï„ÄÇÂÖàÂ∞ÜÂè≥‰æßHide System LibrariesÊâì‰∏äÂãæÔºåËøôÊ†∑ËÉΩÂ§üËøáÊª§‰ø°ÊÅØ„ÄÇÁÑ∂ÂêéÂú®Call Tree‰∏ä‰ºöÈªòËÆ§ÊåâÁÖßË¥πÊó∂ÁöÑÁ∫øÁ®ãËøõË°åÊéíÂ∫èÔºåÂçï‰∏™Á∫øÁ®ã‰∏≠‰ºö‰πü‰ºöÊåâÁÖßÂØπÂ∫îÁöÑË¥πÊó∂ÊñπÊ≥ïÊéíÂ∫èÔºåÈÄâÊã©ÊñπÊ≥ïÂêéËÉΩÂ§üÈÄöËøáÂè≥‰æßHeaviest Stack TraceÈáåÂèåÂáªÊü•ÁúãÂà∞ÂÖ∑‰ΩìÁöÑË¥πÊó∂Êìç‰Ωú‰ª£Á†ÅÔºå‰ªéËÄåËÉΩÂ§üÊúâÈíàÂØπÊÄßÁöÑ‰ºòÂåñÔºåËÄå‰∏çÈúÄË¶ÅÂú®‰∏Ä‰∫õÊú¨Êù•Â∞±‰∏ç‰ºöÊÄé‰πàÂΩ±ÂìçÊÄßËÉΩÁöÑÂú∞ÊñπËøáÂ∫¶‰ºòÂåñ„ÄÇ AllocationsËøôÈáåÂèØ‰ª•ÂØπÊØè‰∏™Âä®‰ΩúÁöÑÂâçÂêéËøõË°åGenerationsÔºåÂØπÊØîÂÜÖÂ≠òÁöÑÂ¢ûÂä†ÔºåÊü•Áúã‰ΩøÂÜÖÂ≠òÂ¢ûÂä†ÁöÑÂÖ∑‰ΩìÁöÑÊñπÊ≥ïÂíå‰ª£Á†ÅÊâÄÂú®‰ΩçÁΩÆ„ÄÇÂÖ∑‰ΩìÊìç‰ΩúÊòØÂú®Âè≥‰æßGeneration AnalysisÈáåÁÇπÂáªMark GenerationÔºåËøôÊ†∑‰ºö‰∫ßÁîü‰∏Ä‰∏™GenerationÔºåÂàáÊç¢Âà∞ÂÖ∂‰ªñÈ°µÈù¢Êàñ‰∏ÄÊÆµÊó∂Èó¥‰∫ßÁîü‰∫ÜÂè¶Â§ñ‰∏Ä‰∏™‰∫ã‰ª∂Êó∂ÂÜçÁÇπMark GenerationÊù•‰∫ßÁîü‰∏Ä‰∏™Êñ∞ÁöÑGenerationÔºåËøôÊ†∑ÂèçÂ§çÔºåÁîüÊàêÂ§ö‰∏™GenerationÔºåÊü•ÁúãËøôÂá†‰∏™Generation‰ºöÁúãÂà∞GrowthÁöÑÂ§ßÂ∞èÔºåÂ¶ÇÊûúÂ§™Â§ßÂèØ‰ª•ÁÇπËøõÂéªÊü•ÁúãÁõ∏Â∫îÂç†Áî®ËæÉÂ§ßÁöÑÁ∫øÁ®ãÈáåÂè≥‰æßHeaviest Stack TraceÈáåÊü•ÁúãÂØπÂ∫îÁöÑ‰ª£Á†ÅÂùóÔºåÁÑ∂ÂêéËøõË°åÁõ∏Â∫îÁöÑÂ§ÑÁêÜ„ÄÇ LeakÂèØ‰ª•Âú®‰∏äÈù¢Âå∫ÂüüÁöÑLeaksÈÉ®ÂàÜÁúãÂà∞ÂØπÂ∫îÁöÑÊó∂Èó¥ÁÇπ‰∫ßÁîüÁöÑÊ∫¢Âá∫ÔºåÈÄâÊã©ÂêéÂú®‰∏ãÈù¢Âå∫ÂüüÁöÑStatistics&gt;Allocation SummaryËÉΩÂ§üÁúãÂà∞Ê≥ÑÊºèÁöÑÂØπË±°ÔºåÂêåÊ†∑ÂèØ‰ª•ÈÄöËøáStack TraceÊü•ÁúãÂà∞ÂÖ∑‰ΩìÂØπÂ∫îÁöÑ‰ª£Á†ÅÂå∫Âüü„ÄÇ ÂºÄÂèëÊó∂ÈúÄË¶ÅÊ≥®ÊÑèÂ¶Ç‰ΩïÈÅøÂÖç‰∏Ä‰∫õÊÄßËÉΩÈóÆÈ¢òNSDateFormatterÈÄöËøáInstrumentsÁöÑÊ£ÄÊµã‰ºöÂèëÁé∞ÂàõÂª∫NSDateFormatterÊàñËÄÖËÆæÁΩÆNSDateFormatterÁöÑÂ±ûÊÄßÁöÑËÄóÊó∂ÊÄªÊòØÊéíÂú®ÂâçÈù¢ÔºåÂ¶Ç‰ΩïÂ§ÑÁêÜËøô‰∏™ÈóÆÈ¢òÂë¢ÔºåÊØîËæÉÊé®ËçêÁöÑÊòØÊ∑ªÂä†Â±ûÊÄßÊàñËÄÖÂàõÂª∫ÈùôÊÄÅÂèòÈáèÔºåËøôÊ†∑ËÉΩÂ§ü‰ΩøÂæóÂàõÂª∫ÂàùÂßãÂåñËøô‰∏™Ê¨°Êï∞ÈôçÂà∞ÊúÄ‰Ωé„ÄÇËøòÊúâÂ∞±ÊòØÂèØ‰ª•Áõ¥Êé•Áî®CÔºåÊàñËÄÖËøô‰∏™NSDataÁöÑCategoryÊù•Ëß£ÂÜ≥https://github.com/samsoffes/sstoolkit/blob/master/SSToolkit/NSData%2BSSToolkitAdditions.m UIImageËøôÈáåË¶Å‰∏ªË¶ÅÊòØ‰ºöÂΩ±ÂìçÂÜÖÂ≠òÁöÑÂºÄÈîÄÔºåÈúÄË¶ÅÊùÉË°°‰∏ãimagedNamedÂíåimageWithContentsOfFileÔºå‰∫ÜËß£‰∏§ËÄÖÁâπÊÄßÂêéÔºåÂú®Âè™ÈúÄË¶ÅÊòæÁ§∫‰∏ÄÊ¨°ÁöÑÂõæÁâáÁî®ÂêéËÄÖÔºåËøôÊ†∑‰ºöÂáèÂ∞ëÂÜÖÂ≠òÁöÑÊ∂àËÄóÔºå‰ΩÜÊòØÈ°µÈù¢ÊòæÁ§∫‰ºöÂ¢ûÂä†Image IOÁöÑÊ∂àËÄóÔºåËøô‰∏™ÈúÄË¶ÅÊ≥®ÊÑè‰∏ã„ÄÇÁî±‰∫éimageWithContentsOfFile‰∏çÁºìÂ≠òÔºåÊâÄ‰ª•ÈúÄË¶ÅÂú®ÊØèÊ¨°È°µÈù¢ÊòæÁ§∫ÂâçÂä†ËΩΩ‰∏ÄÊ¨°ÔºåËøô‰∏™IOÁöÑÊìç‰Ωú‰πüÊòØÈúÄË¶ÅËÄÉËôëÊùÉË°°ÁöÑ‰∏Ä‰∏™ÁÇπ„ÄÇ È°µÈù¢Âä†ËΩΩÂ¶ÇÊûú‰∏Ä‰∏™È°µÈù¢ÂÜÖÂÆπËøáÂ§öÔºåviewËøáÂ§öÔºåËøôÊ†∑Â∞ÜÈïøÈ°µÈù¢‰∏≠ÁöÑÈúÄË¶ÅÊªöÂä®ÊâçËÉΩÁúãÂà∞ÁöÑÈÇ£‰∏™ÈÉ®ÂàÜËßÜÂõæÂÜÖÂÆπÈÄöËøáÂºÄÂêØÊñ∞ÁöÑÁ∫øÁ®ãÂêåÊ≠•ÁöÑÂä†ËΩΩ„ÄÇ ‰ºòÂåñÈ¶ñÊ¨°Âä†ËΩΩÊó∂Èó¥ÈÄöËøáTime ProfierÂèØ‰ª•Êü•ÁúãÂà∞ÂêØÂä®ÊâÄÂç†Áî®ÁöÑÊó∂Èó¥ÔºåÂ¶ÇÊûúÂ§™ÈïøÂèØ‰ª•ÈÄöËøáHeaviest Stack TraceÊâæÂà∞Ë¥πÊó∂ÁöÑÊñπÊ≥ïËøõË°åÊîπÈÄ†„ÄÇ ÁõëÊéßÂç°È°øÁöÑÊñπÊ≥ïËøòÊúâÁßçÊñπÊ≥ïÊòØÂú®Á®ãÂ∫èÈáåÂéªÁõëÊéßÊÄßËÉΩÈóÆÈ¢ò„ÄÇÂèØ‰ª•ÂÖàÁúãÁúãËøô‰∏™DemoÔºåÂú∞ÂùÄhttps://github.com/ming1016/DecoupleDemo„ÄÇ ËøôÊ†∑Âú®‰∏äÁ∫øÂêéÂèØ‰ª•ÈÄöËøáËøô‰∏™Á®ãÂ∫èÂ∞ÜÁî®Êà∑ÁöÑÂç°È°øÊìç‰ΩúËÆ∞ÂΩï‰∏ãÊù•ÔºåÂÆöÊó∂ÂèëÂà∞Ëá™Â∑±ÁöÑÊúçÂä°Âô®‰∏äÔºåËøôÊ†∑ËÉΩÂ§üÊõ¥Â§ßËåÉÂõ¥ÁöÑÊî∂ÈõÜÊÄßËÉΩÈóÆÈ¢ò„ÄÇ‰ºóÊâÄÂë®Áü•ÔºåÁî®Êà∑Â±ÇÈù¢ÊÑüÁü•ÁöÑÂç°È°øÈÉΩÊòØÊù•Ëá™Â§ÑÁêÜÊâÄÊúâUIÁöÑ‰∏ªÁ∫øÁ®ã‰∏äÔºåÂåÖÊã¨Âú®‰∏ªÁ∫øÁ®ã‰∏äËøõË°åÁöÑÂ§ßËÆ°ÁÆóÔºåÂ§ßÈáèÁöÑIOÊìç‰ΩúÔºåÊàñËÄÖÊØîËæÉÈáçÁöÑÁªòÂà∂Â∑•‰Ωú„ÄÇÂ¶Ç‰ΩïÁõëÊéß‰∏ªÁ∫øÁ®ãÂë¢ÔºåÈ¶ñÂÖàÈúÄË¶ÅÁü•ÈÅìÁöÑÊòØ‰∏ªÁ∫øÁ®ãÂíåÂÖ∂ÂÆÉÁ∫øÁ®ã‰∏ÄÊ†∑ÈÉΩÊòØÈù†NSRunLoopÊù•È©±Âä®ÁöÑ„ÄÇÂèØ‰ª•ÂÖàÁúãÁúãCFRunLoopRunÁöÑÂ§ßÊ¶ÇÁöÑÈÄªËæë 123456789101112131415161718192021222324252627282930313233343536373839404142434445int32_t __CFRunLoopRun(){ __CFRunLoopDoObservers(KCFRunLoopEntry); do { __CFRunLoopDoObservers(kCFRunLoopBeforeTimers); __CFRunLoopDoObservers(kCFRunLoopBeforeSources); //ËøôÈáåÂºÄÂßãÂà∞kCFRunLoopBeforeWaiting‰πãÈó¥Â§ÑÁêÜÊó∂Èó¥ÊòØÊÑüÁü•Âç°È°øÁöÑÂÖ≥ÈîÆÂú∞Êñπ __CFRunLoopDoBlocks(); __CFRunLoopDoSource0(); //Â§ÑÁêÜUI‰∫ã‰ª∂ //GCD dispatch main queue CheckIfExistMessagesInMainDispatchQueue(); //‰ºëÁú†Ââç __CFRunLoopDoObservers(kCFRunLoopBeforeWaiting); //Á≠âÂæÖmsg mach_port_t wakeUpPort = SleepAndWaitForWakingUpPorts(); //Á≠âÂæÖ‰∏≠ //‰ºëÁú†ÂêéÔºåÂî§ÈÜí __CFRunLoopDoObservers(kCFRunLoopAfterWaiting); //ÂÆöÊó∂Âô®Âî§ÈÜí if (wakeUpPort == timerPort) __CFRunLoopDoTimers(); //ÂºÇÊ≠•Â§ÑÁêÜ else if (wakeUpPort == mainDispatchQueuePort) __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__() //UIÔºåÂä®Áîª else __CFRunLoopDoSource1(); //Á°Æ‰øùÂêåÊ≠• __CFRunLoopDoBlocks(); } while (!stop &amp;&amp; !timeout); //ÈÄÄÂá∫RunLoop __CFRunLoopDoObservers(CFRunLoopExit);} Ê†πÊçÆËøô‰∏™RunLoopÊàë‰ª¨ËÉΩÂ§üÈÄöËøáCFRunLoopObserverRefÊù•Â∫¶Èáè„ÄÇÁî®GCDÈáåÁöÑdispatch_semaphore_tÂºÄÂêØ‰∏Ä‰∏™Êñ∞Á∫øÁ®ãÔºåËÆæÁΩÆ‰∏Ä‰∏™ÊûÅÈôêÂÄºÂíåÂá∫Áé∞Ê¨°Êï∞ÁöÑÂÄºÔºåÁÑ∂ÂêéËé∑Âèñ‰∏ªÁ∫øÁ®ã‰∏äÂú®kCFRunLoopBeforeSourcesÂà∞kCFRunLoopBeforeWaitingÂÜçÂà∞kCFRunLoopAfterWaiting‰∏§‰∏™Áä∂ÊÄÅ‰πãÈó¥ÁöÑË∂ÖËøá‰∫ÜÊûÅÈôêÂÄºÂíåÂá∫Áé∞Ê¨°Êï∞ÁöÑÂú∫ÊôØÔºåÂ∞ÜÂ†ÜÊ†àdump‰∏ãÊù•ÔºåÊúÄÂêéÂèëÂà∞ÊúçÂä°Âô®ÂÅöÊî∂ÈõÜÔºåÈÄöËøáÂ†ÜÊ†àËÉΩÂ§üÊâæÂà∞ÂØπÂ∫îÂá∫ÈóÆÈ¢òÁöÑÈÇ£‰∏™ÊñπÊ≥ï„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667static void runLoopObserverCallBack(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info){ MyClass *object = (__bridge MyClass*)info; object-&gt;activity = activity;}static void runLoopObserverCallBack(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info){ SMLagMonitor *lagMonitor = (__bridge SMLagMonitor*)info; lagMonitor-&gt;runLoopActivity = activity; dispatch_semaphore_t semaphore = lagMonitor-&gt;dispatchSemaphore; dispatch_semaphore_signal(semaphore);}- (void)endMonitor { if (!runLoopObserver) { return; } CFRunLoopRemoveObserver(CFRunLoopGetMain(), runLoopObserver, kCFRunLoopCommonModes); CFRelease(runLoopObserver); runLoopObserver = NULL;}- (void)beginMonitor { if (runLoopObserver) { return; } dispatchSemaphore = dispatch_semaphore_create(0); //Dispatch Semaphore‰øùËØÅÂêåÊ≠• //ÂàõÂª∫‰∏Ä‰∏™ËßÇÂØüËÄÖ CFRunLoopObserverContext context = {0,(__bridge void*)self,NULL,NULL}; runLoopObserver = CFRunLoopObserverCreate(kCFAllocatorDefault, kCFRunLoopAllActivities, YES, 0, &amp;runLoopObserverCallBack, &amp;context); //Â∞ÜËßÇÂØüËÄÖÊ∑ªÂä†Âà∞‰∏ªÁ∫øÁ®ãrunloopÁöÑcommonÊ®°Âºè‰∏ãÁöÑËßÇÂØü‰∏≠ CFRunLoopAddObserver(CFRunLoopGetMain(), runLoopObserver, kCFRunLoopCommonModes); //ÂàõÂª∫Â≠êÁ∫øÁ®ãÁõëÊéß dispatch_async(dispatch_get_global_queue(0, 0), ^{ //Â≠êÁ∫øÁ®ãÂºÄÂêØ‰∏Ä‰∏™ÊåÅÁª≠ÁöÑloopÁî®Êù•ËøõË°åÁõëÊéß while (YES) { long semaphoreWait = dispatch_semaphore_wait(dispatchSemaphore, dispatch_time(DISPATCH_TIME_NOW, 30*NSEC_PER_MSEC)); if (semaphoreWait != 0) { if (!runLoopObserver) { timeoutCount = 0; dispatchSemaphore = 0; runLoopActivity = 0; return; } //‰∏§‰∏™runloopÁöÑÁä∂ÊÄÅÔºåBeforeSourcesÂíåAfterWaitingËøô‰∏§‰∏™Áä∂ÊÄÅÂå∫Èó¥Êó∂Èó¥ËÉΩÂ§üÊ£ÄÊµãÂà∞ÊòØÂê¶Âç°È°ø if (runLoopActivity == kCFRunLoopBeforeSources || runLoopActivity == kCFRunLoopAfterWaiting) { //Âá∫Áé∞‰∏âÊ¨°Âá∫ÁªìÊûú if (++timeoutCount &lt; 3) { continue; } //Â∞ÜÂ†ÜÊ†à‰ø°ÊÅØ‰∏äÊä•ÊúçÂä°Âô®ÁöÑ‰ª£Á†ÅÊîæÂà∞ËøôÈáå } //end activity }// end semaphore wait timeoutCount = 0; }// end while }); } ÊúâÊó∂ÂÄôÈÄ†ÊàêÂç°È°øÊòØÂõ†‰∏∫Êï∞ÊçÆÂºÇÂ∏∏ÔºåËøáÂ§öÔºåÊàñËÄÖËøáÂ§ßÈÄ†ÊàêÁöÑÔºå‰∫¶ÊàñËÄÖÊòØÊìç‰ΩúÁöÑÂºÇÂ∏∏Âá∫Áé∞ÁöÑÔºåËøôÊ†∑ÁöÑÊÉÖÂÜµÂèØËÉΩÂú®Âπ≥Êó∂Êó•Â∏∏ÂºÄÂèëÊµãËØï‰∏≠Èöæ‰ª•ÈÅáÂà∞Ôºå‰ΩÜÊòØÂú®ÁúüÂÆûÁöÑÁâπÂà´ÊòØÁî®Êà∑Âèó‰ºóÂπøÁöÑÊÉÖÂÜµ‰∏ã‰ºöÊúâ‰∫∫Âá∫Áé∞ÔºåËøôÊ†∑ËøôÁßçÊî∂ÈõÜÂç°È°øÁöÑÊñπÂºèËøòÊòØÊúâ‰ª∑ÂÄºÁöÑ„ÄÇ Â†ÜÊ†àdumpÁöÑÊñπÊ≥ïÁ¨¨‰∏ÄÁßçÊòØÁõ¥Êé•Ë∞ÉÁî®Á≥ªÁªüÂáΩÊï∞Ëé∑ÂèñÊ†à‰ø°ÊÅØÔºåËøôÁßçÊñπÊ≥ïÂè™ËÉΩÂ§üËé∑ÂæóÁÆÄÂçïÁöÑ‰ø°ÊÅØÔºåÊ≤°Ê≥ïÈÖçÂêàdSYMËé∑ÂæóÂÖ∑‰ΩìÂì™Ë°å‰ª£Á†ÅÂá∫‰∫ÜÈóÆÈ¢òÔºåÁ±ªÂûã‰πüÊúâÈôê„ÄÇËøôÁßçÊñπÊ≥ïÁöÑ‰∏ªË¶ÅÊÄùË∑ØÊòØsignalËøõË°åÈîôËØØ‰ø°Âè∑ÁöÑËé∑Âèñ„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ã 12345678910111213141516171819202122232425262728293031323334353637383940static int s_fatal_signals[] = { SIGABRT, SIGBUS, SIGFPE, SIGILL, SIGSEGV, SIGTRAP, SIGTERM, SIGKILL,};static int s_fatal_signal_num = sizeof(s_fatal_signals) / sizeof(s_fatal_signals[0]);void UncaughtExceptionHandler(NSException *exception) { NSArray *exceptionArray = [exception callStackSymbols]; //ÂæóÂà∞ÂΩìÂâçË∞ÉÁî®Ê†à‰ø°ÊÅØ NSString *exceptionReason = [exception reason]; //ÈùûÂ∏∏ÈáçË¶ÅÔºåÂ∞±ÊòØÂ¥©Ê∫ÉÁöÑÂéüÂõ† NSString *exceptionName = [exception name]; //ÂºÇÂ∏∏Á±ªÂûã}void SignalHandler(int code){ NSLog(@&quot;signal handler = %d&quot;,code);}void InitCrashReport(){ //Á≥ªÁªüÈîôËØØ‰ø°Âè∑ÊçïËé∑ for (int i = 0; i &lt; s_fatal_signal_num; ++i) { signal(s_fatal_signals[i], SignalHandler); } //ocÊú™ÊçïËé∑ÂºÇÂ∏∏ÁöÑÊçïËé∑ NSSetUncaughtExceptionHandler(&amp;UncaughtExceptionHandler);}int main(int argc, char * argv[]) { @autoreleasepool { InitCrashReport(); return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); }} ‰ΩøÁî®PLCrashReporterÁöÑËØùÂá∫ÁöÑÊä•ÂëäÁúãËµ∑Êù•ËÉΩÂ§üÂÆö‰ΩçÂà∞ÈóÆÈ¢ò‰ª£Á†ÅÁöÑÂÖ∑‰Ωì‰ΩçÁΩÆ‰∫Ü„ÄÇ 123456NSData *lagData = [[[PLCrashReporter alloc] initWithConfiguration:[[PLCrashReporterConfig alloc] initWithSignalHandlerType:PLCrashReporterSignalHandlerTypeBSD symbolicationStrategy:PLCrashReporterSymbolicationStrategyAll]] generateLiveReport];PLCrashReport *lagReport = [[PLCrashReport alloc] initWithData:lagData error:NULL];NSString *lagReportString = [PLCrashReportTextFormatter stringValueForCrashReport:lagReport withTextFormat:PLCrashReportTextFormatiOS];//Â∞ÜÂ≠óÁ¨¶‰∏≤‰∏ä‰º†ÊúçÂä°Âô®NSLog(@&quot;lag happen, detail below: \\n %@&quot;,lagReportString); ‰∏ãÈù¢ÊòØÊµãËØïDemoÈáåÂ†ÜÊ†àÈáåÁöÑÂÜÖÂÆπ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722016-03-28 14:59:26.922 HomePageTest[4803:201212] INFO: Reveal Server started (Protocol Version 25).2016-03-28 14:59:27.134 HomePageTest[4803:201212] Ë¥πÊó∂ÊµãËØï2016-03-28 14:59:29.262 HomePageTest[4803:201212] Ë¥πÊó∂ÊµãËØï2016-03-28 14:59:30.865 HomePageTest[4803:201212] Ë¥πÊó∂ÊµãËØï2016-03-28 14:59:32.115 HomePageTest[4803:201212] Ë¥πÊó∂ÊµãËØï2016-03-28 14:59:33.369 HomePageTest[4803:201212] Ë¥πÊó∂ÊµãËØï2016-03-28 14:59:34.832 HomePageTest[4803:201212] Ë¥πÊó∂ÊµãËØï2016-03-28 14:59:34.836 HomePageTest[4803:201615] lag happen, detail below: Incident Identifier: 73BEF9D2-EBE3-49DF-B95B-7392635631A3CrashReporter Key: TODOHardware Model: x86_64Process: HomePageTest [4803]Path: /Users/daiming/Library/Developer/CoreSimulator/Devices/444AAB95-C393-45CC-B5DC-0FB8611068F9/data/Containers/Bundle/Application/9CEE3A3A-9469-44F5-8112-FF0550ED8009/HomePageTest.app/HomePageTestIdentifier: com.xiaojukeji.HomePageTestVersion: 1.0 (1)Code Type: X86-64Parent Process: debugserver [4805]Date/Time: 2016-03-28 06:59:34 +0000OS Version: Mac OS X 9.2 (15D21)Report Version: 104Exception Type: SIGTRAPException Codes: TRAP_TRACE at 0x10aee6f79Crashed Thread: 2Thread 0:0 libsystem_kernel.dylib 0x000000010ec6b206 __semwait_signal + 101 libsystem_c.dylib 0x000000010e9f2b9e usleep + 542 HomePageTest 0x000000010aedf934 -[TestTableView configCell] + 8203 HomePageTest 0x000000010aee5c89 -[testTableViewController observeValueForKeyPath:ofObject:change:context:] + 6014 Foundation 0x000000010b9c2564 NSKeyValueNotifyObserver + 3475 Foundation 0x000000010b9c178f NSKeyValueDidChange + 4666 Foundation 0x000000010b9bf003 -[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:key:key:usingBlock:] + 11767 Foundation 0x000000010ba1d35f _NSSetObjectValueAndNotify + 2618 HomePageTest 0x000000010aec9c26 -[DCTableView tableView:cellForRowAtIndexPath:] + 2629 UIKit 0x000000010c872e43 -[UITableView _createPreparedCellForGlobalRow:withIndexPath:willDisplay:] + 76610 UIKit 0x000000010c872f7b -[UITableView _createPreparedCellForGlobalRow:willDisplay:] + 7411 UIKit 0x000000010c847a39 -[UITableView _updateVisibleCellsNow:isRecursive:] + 299612 UIKit 0x000000010c87c01c -[UITableView _performWithCachedTraitCollection:] + 9213 UIKit 0x000000010c862edc -[UITableView layoutSubviews] + 22414 UIKit 0x000000010c7d04a3 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 70315 QuartzCore 0x000000010c49a59a -[CALayer layoutSublayers] + 14616 QuartzCore 0x000000010c48ee70 _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 36617 QuartzCore 0x000000010c48ecee _ZN2CA5Layer28layout_and_display_if_neededEPNS_11TransactionE + 2418 QuartzCore 0x000000010c483475 _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 27719 QuartzCore 0x000000010c4b0c0a _ZN2CA11Transaction6commitEv + 48620 QuartzCore 0x000000010c4bf9f4 _ZN2CA7Display11DisplayLink14dispatch_itemsEyyy + 57621 CoreFoundation 0x000000010e123c84 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 2022 CoreFoundation 0x000000010e123831 __CFRunLoopDoTimer + 108923 CoreFoundation 0x000000010e0e5241 __CFRunLoopRun + 193724 CoreFoundation 0x000000010e0e4828 CFRunLoopRunSpecific + 48825 GraphicsServices 0x0000000110479ad2 GSEventRunModal + 16126 UIKit 0x000000010c719610 UIApplicationMain + 17127 HomePageTest 0x000000010aee0fdf main + 11128 libdyld.dylib 0x000000010e92b92d start + 1Thread 1:0 libsystem_kernel.dylib 0x000000010ec6bfde kevent64 + 101 libdispatch.dylib 0x000000010e8e6262 _dispatch_mgr_init + 0Thread 2 Crashed:0 HomePageTest 0x000000010b04a445 -[PLCrashReporter generateLiveReportWithThread:error:] + 6321 HomePageTest 0x000000010aee6f79 __28-[SMLagMonitor beginMonitor]_block_invoke + 4252 libdispatch.dylib 0x000000010e8d6e5d _dispatch_call_block_and_release + 123 libdispatch.dylib 0x000000010e8f749b _dispatch_client_callout + 84 libdispatch.dylib 0x000000010e8dfbef _dispatch_root_queue_drain + 18295 libdispatch.dylib 0x000000010e8df4c5 _dispatch_worker_thread3 + 1116 libsystem_pthread.dylib 0x000000010ec2f68f _pthread_wqthread + 11297 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 3:0 libsystem_kernel.dylib 0x000000010ec6b6de __workq_kernreturn + 101 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 4:0 libsystem_kernel.dylib 0x000000010ec65386 mach_msg_trap + 101 CoreFoundation 0x000000010e0e5b64 __CFRunLoopServiceMachPort + 2122 CoreFoundation 0x000000010e0e4fbf __CFRunLoopRun + 12953 CoreFoundation 0x000000010e0e4828 CFRunLoopRunSpecific + 4884 WebCore 0x0000000113408f65 _ZL12RunWebThreadPv + 4695 libsystem_pthread.dylib 0x000000010ec2fc13 _pthread_body + 1316 libsystem_pthread.dylib 0x000000010ec2fb90 _pthread_body + 07 libsystem_pthread.dylib 0x000000010ec2d375 thread_start + 13Thread 5:0 libsystem_kernel.dylib 0x000000010ec6b6de __workq_kernreturn + 101 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 6:0 libsystem_kernel.dylib 0x000000010ec6b6de __workq_kernreturn + 101 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 7:0 libsystem_kernel.dylib 0x000000010ec6b6de __workq_kernreturn + 101 libsystem_pthread.dylib 0x000000010ec2d365 start_wqthread + 13Thread 2 crashed with X86-64 Thread State: rip: 0x000000010b04a445 rbp: 0x0000700000093da0 rsp: 0x0000700000093b10 rax: 0x0000700000093b70 rbx: 0x0000700000093cb0 rcx: 0x0000000000001003 rdx: 0x0000000000000000 rdi: 0x000000010b04a5ca rsi: 0x0000700000093b40 r8: 0x0000000000000014 r9: 0x0000000000000000 r10: 0x000000010ec65362 r11: 0x0000000000000246 r12: 0x00007fdaf5800940 r13: 0x0000000000000000 r14: 0x0000000000000009 r15: 0x0000700000093b90 rflags: 0x0000000000000202 cs: 0x000000000000002b fs: 0x0000000000000000 gs: 0x0000000000000000 Binary Images: 0x10aebb000 - 0x10b0a5fff +HomePageTest x86_64 &lt;13a9b9abded0364fb42e65847b3acbbb&gt; /Users/daiming/Library/Developer/CoreSimulator/Devices/444AAB95-C393-45CC-B5DC-0FB8611068F9/data/Containers/Bundle/Application/9CEE3A3A-9469-44F5-8112-FF0550ED8009/HomePageTest.app/HomePageTest 0x10b2a1000 - 0x10b2c8fff dyld_sim x86_64 &lt;0bf161d7efa93cbeae2b84f9a70fc853&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/dyld_sim 0x10b30d000 - 0x10b314fff libBacktraceRecording.dylib x86_64 &lt;604a2e49cf2f39f7883b37336adb402e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libBacktraceRecording.dylib 0x10b31b000 - 0x10b31ffff libViewDebuggerSupport.dylib x86_64 &lt;3d54d318b67735e5874c72a20317b523&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator9.2.sdk/Developer/Library/PrivateFrameworks/DTDDISupport.framework/libViewDebuggerSupport.dylib 0x10b326000 - 0x10b337fff libz.1.dylib x86_64 &lt;a603371a88ff3f8e86de61d7443888a9&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libz.1.dylib 0x10b33d000 - 0x10b5b9fff CFNetwork x86_64 &lt;cda8332f7c2836df98f216a6802a990a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CFNetwork.framework/CFNetwork 0x10b791000 - 0x10b93dfff CoreGraphics x86_64 &lt;291e992b6a4e3362823863313d3850b4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics 0x10b9b9000 - 0x10bc35fff Foundation x86_64 &lt;0bbf69fb34a63fa3a540ec4ce375212c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Foundation.framework/Foundation 0x10be29000 - 0x10c173fff ImageIO x86_64 &lt;28325a1c347230ada3e8c4dc833ef05a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/ImageIO.framework/ImageIO 0x10c23c000 - 0x10c300fff MobileCoreServices x86_64 &lt;40a78b7dfb1e31fc85d0d98657f979c6&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices 0x10c382000 - 0x10c4fdfff QuartzCore x86_64 &lt;b9ff29d64f6e306ea01703ae4cd10f29&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/QuartzCore.framework/QuartzCore 0x10c5b9000 - 0x10c625fff Security x86_64 &lt;5c3df729a91c365ba314108c0b668df6&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Security.framework/Security 0x10c67b000 - 0x10c6c4fff SystemConfiguration x86_64 &lt;cfa2c5a5c2123d80a230892aedce7ece&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration 0x10c6f4000 - 0x10d3ccfff UIKit x86_64 &lt;b5c879e5e265364da6b695d7bb4ef462&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/UIKit 0x10dc38000 - 0x10df9afff libobjc.A.dylib x86_64 &lt;1643ada50eaa3d938654df70ddca4045&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libobjc.A.dylib 0x10e075000 - 0x10e076fff libSystem.dylib x86_64 &lt;3deb27f2e0b5314abf0a8880e3d52560&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libSystem.dylib 0x10e07c000 - 0x10e3e2fff CoreFoundation x86_64 &lt;f47aa9b1fe6e3472928e6622ec331f1f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 0x10e54b000 - 0x10e6e3fff MapKit x86_64 &lt;2acdf735086f3e5897a4520417957aab&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/MapKit.framework/MapKit 0x10e807000 - 0x10e80bfff libcache.dylib x86_64 &lt;8fe45f989f2e3ccaaf0b2a5fdb2d0177&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcache.dylib 0x10e810000 - 0x10e81bfff libcommonCrypto.dylib x86_64 &lt;45b23c8e43993a6b93f9ba749105bed3&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcommonCrypto.dylib 0x10e828000 - 0x10e82ffff libcompiler_rt.dylib x86_64 &lt;c4852a1cdd6736168b91a75b50f2b65e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcompiler_rt.dylib 0x10e837000 - 0x10e83efff libcopyfile.dylib x86_64 &lt;4be0e6ca0b3a313c97901d33d3ea75a8&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcopyfile.dylib 0x10e845000 - 0x10e8bcfff libcorecrypto.dylib x86_64 &lt;34495822e7913cdbbb141c083740b04e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libcorecrypto.dylib 0x10e8d5000 - 0x10e902fff libdispatch.dylib x86_64 &lt;04d9590852903114af8e9de07daac6d4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/introspection/libdispatch.dylib 0x10e929000 - 0x10e92bfff libdyld.dylib x86_64 &lt;236c574a79e73e1abf19e1cbc04ac582&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libdyld.dylib 0x10e932000 - 0x10e932fff liblaunch.dylib x86_64 &lt;6fa06587ed1a3b5d99234a093f8d5b7e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/liblaunch.dylib 0x10e938000 - 0x10e93dfff libmacho.dylib x86_64 &lt;1e351755db163b5c82fdb47b354fcb51&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libmacho.dylib 0x10e943000 - 0x10e944fff libremovefile.dylib x86_64 &lt;a69be47eef3f35aebbd6eb19688a9dfa&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libremovefile.dylib 0x10e949000 - 0x10e960fff libsystem_asl.dylib x86_64 &lt;34369616ac8339a8b4ee9d1a7df0ba0f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_asl.dylib 0x10e96d000 - 0x10e96efff libsystem_blocks.dylib x86_64 &lt;61456881d96432178fff58643863c59e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_blocks.dylib 0x10e974000 - 0x10e9fcfff libsystem_c.dylib x86_64 &lt;fc0dde24a78d39ca848ac937d5903386&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_c.dylib 0x10ea24000 - 0x10ea26fff libsystem_configuration.dylib x86_64 &lt;c09c551d48d0371daaf79132e6c7ab73&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_configuration.dylib 0x10ea2d000 - 0x10ea2ffff libsystem_containermanager.dylib x86_64 &lt;e0dc470e6ba2349097410f280fe09ed4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_containermanager.dylib 0x10ea34000 - 0x10ea35fff libsystem_coreservices.dylib x86_64 &lt;40b277d390db3e7ea6b50de8a9279786&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_coreservices.dylib 0x10ea3b000 - 0x10ea51fff libsystem_coretls.dylib x86_64 &lt;55dc52c450e83eb5b4d26dbe24018539&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_coretls.dylib 0x10ea5d000 - 0x10ea65fff libsystem_dnssd.dylib x86_64 &lt;d5c0910695913a799ffffb6cf4653c00&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_dnssd.dylib 0x10ea6c000 - 0x10ea8ffff libsystem_info.dylib x86_64 &lt;f3ab2fc36ae332ab86398880e4325938&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_info.dylib 0x10eaa2000 - 0x10eaa3fff libsystem_sim_kernel.dylib x86_64 &lt;3402a54a835033c997e9fc27db24d85b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_sim_kernel.dylib 0x10eaa9000 - 0x10ead6fff libsystem_m.dylib x86_64 &lt;67570d2171683e96b77aeeda269b8bcb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_m.dylib 0x10eade000 - 0x10eafafff libsystem_malloc.dylib x86_64 &lt;bd202b02a72d329999d6307a1aa14482&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_malloc.dylib 0x10eb04000 - 0x10eb5efff libsystem_network.dylib x86_64 &lt;a850352b5da23be89939b2652af84160&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_network.dylib 0x10eb92000 - 0x10eb9cfff libsystem_notify.dylib x86_64 &lt;d55e395a67f9350f9058866e3c7665f0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_notify.dylib 0x10eba5000 - 0x10eba7fff libsystem_sim_platform.dylib x86_64 &lt;3fe0d2367d073f7088330d74f4e48829&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_sim_platform.dylib 0x10ebad000 - 0x10ebadfff libsystem_sim_pthread.dylib x86_64 &lt;1e18f800d5ed31dcb0746cabc31ab297&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_sim_pthread.dylib 0x10ebb2000 - 0x10ebb5fff libsystem_sandbox.dylib x86_64 &lt;6ccd8c991b093603b0c721dbc3536f5b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_sandbox.dylib 0x10ebbc000 - 0x10ebccfff libsystem_trace.dylib x86_64 &lt;75d0d4effb95381db5dd2d32a54da7fe&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libsystem_trace.dylib 0x10ebdb000 - 0x10ebe1fff libunwind.dylib x86_64 &lt;072cea349492300fb68c39c751845ede&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libunwind.dylib 0x10ebe8000 - 0x10ec0efff libxpc.dylib x86_64 &lt;3e9ae1639a9535d3ba2c2e7144498580&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/system/libxpc.dylib 0x10ec2c000 - 0x10ec35fff libsystem_pthread.dylib x86_64 &lt;327cecd0b88131538fcc4fd4818b7f16&gt; /usr/lib/system/libsystem_pthread.dylib 0x10ec43000 - 0x10ec4bfff libsystem_platform.dylib x86_64 &lt;d3a27e107f083603acc87a92b2c04bab&gt; /usr/lib/system/libsystem_platform.dylib 0x10ec54000 - 0x10ec72fff libsystem_kernel.dylib x86_64 &lt;9ceb6c3b1caf3c32a9fd93bc72cbcea1&gt; /usr/lib/system/libsystem_kernel.dylib 0x10ec88000 - 0x10ecb1fff libc++abi.dylib x86_64 &lt;81525def7b933f8296838959fa4ce98d&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libc++abi.dylib 0x10ecc0000 - 0x10ed13fff libc++.1.dylib x86_64 &lt;889b6cbf910536c89fae86374f07e767&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libc++.1.dylib 0x10ed67000 - 0x10ed7cfff libMobileGestalt.dylib x86_64 &lt;05d34bd9e19d306c885605aecafe9893&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libMobileGestalt.dylib 0x10edb3000 - 0x10ee0efff IOKit x86_64 &lt;853021f275723ee4b9fc0684bbee030b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit 0x10ee40000 - 0x10ef3afff libsqlite3.dylib x86_64 &lt;22bfc8d7f5f632919b01fdc883e24d26&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libsqlite3.dylib 0x10ef52000 - 0x10f041fff libxml2.2.dylib x86_64 &lt;cbe1fcf1d9b63516b8fa96cb45841d40&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libxml2.2.dylib 0x10f077000 - 0x10f27efff libicucore.A.dylib x86_64 &lt;5c7ce20d3b0f3cd2b19e2c8d4cae9147&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libicucore.A.dylib 0x10f341000 - 0x10f351fff libbsm.0.dylib x86_64 &lt;7f09d0545ae037119f611768227b64b3&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libbsm.0.dylib 0x10f359000 - 0x10f359fff Accelerate x86_64 &lt;1b1483eeaea537a09ee40b3b8faf8acb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Accelerate 0x10f35c000 - 0x10f81afff vImage x86_64 &lt;00f092dc41ec3f8e852efd7ce1efb1e2&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage 0x10f875000 - 0x10f875fff vecLib x86_64 &lt;cdfef7cd1b45390e81e561db4c07b35f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib 0x10f878000 - 0x10f981fff libvDSP.dylib x86_64 &lt;ddafe8e5e10e33389a7a08c67895c980&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib 0x10f98e000 - 0x10fd90fff libLAPACK.dylib x86_64 &lt;39f724015fda3ef298579cd38168b4e0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib 0x10fdc0000 - 0x10ff80fff libBLAS.dylib x86_64 &lt;3d2d6842f59035d795247d6bf77503ca&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib 0x10ff9f000 - 0x11003afff libvMisc.dylib x86_64 &lt;6716692bfaaf33a29d95873d7c93e570&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib 0x110044000 - 0x11005afff libLinearAlgebra.dylib x86_64 &lt;6880200dcd1d3e53a92e388887919970&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLinearAlgebra.dylib 0x110063000 - 0x110073fff libSparseBLAS.dylib x86_64 &lt;e8069ab282f0344780f5286fc2b9e2c4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libSparseBLAS.dylib 0x11007b000 - 0x110099fff libextension.dylib x86_64 &lt;9f870091398d38fa8138b45d528cc7f2&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libextension.dylib 0x1100ba000 - 0x1100e5fff libarchive.2.dylib x86_64 &lt;6349fcc5aa9d3103b49c8813f0c14f4b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libarchive.2.dylib 0x1100f0000 - 0x11010bfff libCRFSuite.dylib x86_64 &lt;512e912e804033d980f0141de864a82a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libCRFSuite.dylib 0x110116000 - 0x110117fff liblangid.dylib x86_64 &lt;31a81762a91b36d2a3210ca0bf929fa4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/liblangid.dylib 0x11011c000 - 0x11012afff libbz2.1.0.dylib x86_64 &lt;dc78bdfa5cb0386e97b09dedeeb048f8&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libbz2.1.0.dylib 0x110130000 - 0x11014afff liblzma.5.dylib x86_64 &lt;7a19c9a4e7b930b7a32c9ab778b9bcd4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/liblzma.5.dylib 0x110152000 - 0x1101dffff AppleJPEG x86_64 &lt;e0884d4cdfd63a3b91f54a9c5b5e0b8d&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/AppleJPEG.framework/AppleJPEG 0x11023f000 - 0x110379fff CoreText x86_64 &lt;c28657f25ac837b4ab950f78e41e5d90&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreText.framework/CoreText 0x11041f000 - 0x110438fff CoreVideo x86_64 &lt;1869a884854b346bbd06dfafaf765470&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreVideo.framework/CoreVideo 0x11044f000 - 0x11045bfff OpenGLES x86_64 &lt;2e82c1d6cd293127b14be85f3f78c983&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/OpenGLES 0x110468000 - 0x110468fff FontServices x86_64 &lt;d57462a3c6c83a47850e8b5c208b54cc&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FontServices.framework/FontServices 0x11046d000 - 0x110481fff GraphicsServices x86_64 &lt;c351fe76be413e44a3b13d3160497f31&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices 0x110499000 - 0x11057bfff libFontParser.dylib x86_64 &lt;b506fe2b071c3a32bb95aa79ad96eb01&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FontServices.framework/libFontParser.dylib 0x110634000 - 0x11063efff libGFXShared.dylib x86_64 &lt;dad95c8768613142bf18ce4551145a6e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib 0x110646000 - 0x11068bfff libGLImage.dylib x86_64 &lt;cfe342e9fad03b839d345841c94f3b7b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib 0x110695000 - 0x110697fff libCVMSPluginSupport.dylib x86_64 &lt;3927944c0d263f9aaa026dcc0d5e38e0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib 0x11069d000 - 0x1106a5fff libCoreVMClient.dylib x86_64 &lt;ef6b47d7dda13f92945569e78548a759&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib 0x1106ae000 - 0x111371fff libLLVMContainer.dylib x86_64 &lt;15f2b50ec12c3b5eaf42159df72376df&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/OpenGLES.framework/libLLVMContainer.dylib 0x1116b8000 - 0x11179cfff UIFoundation x86_64 &lt;b2d0e3aedc8c3c66a901b7dafeaa1e2f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation 0x111810000 - 0x11181afff UserNotificationServices x86_64 &lt;bdff2d68e1bc3f3ab83e6516f3b34c6c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/UserNotificationServices.framework/UserNotificationServices 0x11182c000 - 0x111862fff FrontBoardServices x86_64 &lt;236f3bdbd0eb3e48b084acea42cb321f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FrontBoardServices.framework/FrontBoardServices 0x1118af000 - 0x1118f7fff BaseBoard x86_64 &lt;1a7979a63f5f30678004145f1c1fed0a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/BaseBoard.framework/BaseBoard 0x111948000 - 0x111a05fff CoreUI x86_64 &lt;ae1a6a3eb7ef3da0803688d9d2bdafa8&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CoreUI.framework/CoreUI 0x111afd000 - 0x111decfff VideoToolbox x86_64 &lt;d818deb4d5b036f795eeeaf3bdf58617&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/VideoToolbox.framework/VideoToolbox 0x111e6a000 - 0x111e78fff MobileAsset x86_64 &lt;1c6c8a87693839d3918dd9e78d72e26e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset 0x111e88000 - 0x111ea7fff BackBoardServices x86_64 &lt;6db39b59eb313174836d9e7906fdb212&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices 0x111ed0000 - 0x1120a4fff CoreImage x86_64 &lt;7271d38b9e593543a956c13c5de5da6a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreImage.framework/CoreImage 0x1121f6000 - 0x11221bfff DictionaryServices x86_64 &lt;e317ebfeb1a734b3979053d75e497fad&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices 0x11223f000 - 0x112263fff SpringBoardServices x86_64 &lt;cc1a9a762b8b35faa95392b3e4622d4d&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices 0x112292000 - 0x1122d9fff AppSupport x86_64 &lt;b9622cb94ded38e08a59224510d859cb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/AppSupport.framework/AppSupport 0x112315000 - 0x112345fff TextInput x86_64 &lt;07de88f839b330af910590041812bb64&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/TextInput.framework/TextInput 0x112384000 - 0x112469fff WebKitLegacy x86_64 &lt;0c79980d94183ccb93144bc9eabcb6ae&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/WebKitLegacy.framework/WebKitLegacy 0x112529000 - 0x1135f4fff WebCore x86_64 &lt;67d6527a7ceb3c8fa85ce85c2bf38119&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/WebCore.framework/WebCore 0x113eec000 - 0x113fc6fff ProofReader x86_64 &lt;53554e5080083c5ea16438704ba83695&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ProofReader.framework/ProofReader 0x113ffc000 - 0x114006fff libAccessibility.dylib x86_64 &lt;17a037a4c93b3bb8ae12e830128e6d99&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libAccessibility.dylib 0x114019000 - 0x114070fff PhysicsKit x86_64 &lt;f93aa95b8d5133219d236f0a02b9b038&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/PhysicsKit.framework/PhysicsKit 0x11409c000 - 0x1140a6fff AssertionServices x86_64 &lt;3a58c83f614530a59403e96edba2b0e6&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/AssertionServices.framework/AssertionServices 0x1140b9000 - 0x1144f0fff FaceCore x86_64 &lt;7971b628d43231a08f14ea7c4e2138b0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FaceCore.framework/FaceCore 0x114708000 - 0x11478dfff CoreMedia x86_64 &lt;dd9a55e018b8319d92fe4b2b0c9bd52f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreMedia.framework/CoreMedia 0x1147f7000 - 0x114850fff ColorSync x86_64 &lt;0681057f0a74363fa8d20aa7862c1e7b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ColorSync.framework/ColorSync 0x114872000 - 0x114874fff SimulatorClient x86_64 &lt;c2f2a63c1b7e384982099a98992c7721&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/SimulatorClient.framework/SimulatorClient 0x11487b000 - 0x1148c8fff CoreAudio x86_64 &lt;794b0ba43f1a3790b617f3fb253debeb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreAudio.framework/CoreAudio 0x1148ec000 - 0x1148f0fff AggregateDictionary x86_64 &lt;b1bee24fe8e838d389075db856f7702b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary 0x1148f8000 - 0x114921fff libxslt.1.dylib x86_64 &lt;6c42a533a8703a36ad402b99fbf0f73c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libxslt.1.dylib 0x11492e000 - 0x114945fff libmarisa.dylib x86_64 &lt;e3ddc2ae594e3eb894dd994528a10deb&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libmarisa.dylib 0x114952000 - 0x114f13fff JavaScriptCore x86_64 &lt;c5c9fbe108973d42ad1ea2015d805490&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/JavaScriptCore.framework/JavaScriptCore 0x115091000 - 0x11537cfff AudioToolbox x86_64 &lt;28b1b9057fdf37dcb669386be1820c5c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AudioToolbox.framework/AudioToolbox 0x1154b2000 - 0x1154b7fff TCC x86_64 &lt;7a73d618505938a6a1fadda3aaf0f88c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/TCC.framework/TCC 0x1154c0000 - 0x11554efff LanguageModeling x86_64 &lt;6fd4f9ff9e393b1a87ab68a9df224e8d&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/LanguageModeling.framework/LanguageModeling 0x115564000 - 0x115575fff libcmph.dylib x86_64 &lt;a056b047f15a3df085065ed5f0368f16&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libcmph.dylib 0x11557e000 - 0x115670fff libiconv.2.dylib x86_64 &lt;192bd7fdc2943f0ea17b88dbdbc3329b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libiconv.2.dylib 0x115680000 - 0x115685fff MediaAccessibility x86_64 &lt;6e41f0c55b703cb2825e200350469a58&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/MediaAccessibility.framework/MediaAccessibility 0x115691000 - 0x115769fff AddressBookUI x86_64 &lt;58a5a1b2d8b63e62bc4671df5cec5596&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AddressBookUI.framework/AddressBookUI 0x11583e000 - 0x115f69fff VectorKit x86_64 &lt;36ef06e69448347b973f84f4486ecac2&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/VectorKit.framework/VectorKit 0x1161f1000 - 0x116268fff AddressBook x86_64 &lt;d4d77496b2443bcc9b8476c7c6a9cc79&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AddressBook.framework/AddressBook 0x1162bf000 - 0x11631ffff CoreLocation x86_64 &lt;a099137b2feb30ad82864ccda12993f2&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreLocation.framework/CoreLocation 0x116342000 - 0x1167a0fff GeoServices x86_64 &lt;ef3a5a767f7c3c81b7653763382ae25b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/GeoServices.framework/GeoServices 0x116aeb000 - 0x116afbfff ProtocolBuffer x86_64 &lt;e840436419f43a6b8cc22daff981f66e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer 0x116b0d000 - 0x116b93fff Contacts x86_64 &lt;7e411c617cb53ad1b43f91e18de6fcb0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Contacts.framework/Contacts 0x116c4c000 - 0x116d4ffff ContactsUI x86_64 &lt;425fe9f6c9463295991786b39850b851&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/ContactsUI.framework/ContactsUI 0x116e35000 - 0x116e41fff IntlPreferences x86_64 &lt;b71be9b2f9e33eafab9a301e47a8e6fa&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/IntlPreferences.framework/IntlPreferences 0x116e4f000 - 0x116e6afff PlugInKit x86_64 &lt;c3066f229d413a048da42f603c2e9b43&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/PlugInKit.framework/PlugInKit 0x116e85000 - 0x116ebbfff Accounts x86_64 &lt;1f649ba6d7a33bc6b8b2eb93799ab4ee&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/Accounts.framework/Accounts 0x116eed000 - 0x117069fff AVFoundation x86_64 &lt;904190b56923390191dea51a838bd14f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AVFoundation.framework/AVFoundation 0x1171ef000 - 0x1171f3fff CommunicationsFilter x86_64 &lt;ff85c618e7e63fada07316f1b9c8d1fc&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CommunicationsFilter.framework/CommunicationsFilter 0x1171f9000 - 0x11721efff DataAccessExpress x86_64 &lt;e3eb7c5fb6b13a95810d4cfcdead074a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress 0x117242000 - 0x117300fff ManagedConfiguration x86_64 &lt;b66ed9c2ab553fd981e95750598ba938&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration 0x117399000 - 0x1173d3fff CoreSpotlight x86_64 &lt;98bf6cfb785735eebf190db4b1c3ae64&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreSpotlight.framework/CoreSpotlight 0x117416000 - 0x117434fff vCard x86_64 &lt;9055c75785e4395d8996060255c1631b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/vCard.framework/vCard 0x117463000 - 0x11748cfff ContactsFoundation x86_64 &lt;63f515588ea93a06a063e73787d7d15c&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ContactsFoundation.framework/ContactsFoundation 0x1174cb000 - 0x117735fff CoreData x86_64 &lt;e358a02dacfd3e31a9992b6b7ea9e7c5&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreData.framework/CoreData 0x117854000 - 0x117856fff OAuth x86_64 &lt;732d326fd0983422aa6a09ea1938e7d7&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/OAuth.framework/OAuth 0x11785c000 - 0x117875fff libcompression.dylib x86_64 &lt;1823f7e097263ccd8b713df4f4788903&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libcompression.dylib 0x11787d000 - 0x1179c1fff MobileSpotlightIndex x86_64 &lt;6c81b940503b3f7e9a0bfd40658b5fdf&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/MobileSpotlightIndex.framework/MobileSpotlightIndex 0x117a0b000 - 0x117a0ffff ParsecSubscriptionServiceSupport x86_64 &lt;dcfd384db24a3ab5991d224a4824301f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ParsecSubscriptionServiceSupport.framework/ParsecSubscriptionServiceSupport 0x117a18000 - 0x117cabfff libmecabra.dylib x86_64 &lt;9f9feceeace7387aaa81ec59d0c3f9b1&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libmecabra.dylib 0x117d33000 - 0x117d38fff ConstantClasses x86_64 &lt;2f5266d656843f3c822dc0d2fd6aaa8e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/ConstantClasses.framework/ConstantClasses 0x117d41000 - 0x117d4cfff libChineseTokenizer.dylib x86_64 &lt;8d393ad002733693a63608ded180c4c4&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libChineseTokenizer.dylib 0x117d5b000 - 0x117dcdfff libAVFAudio.dylib x86_64 &lt;97ad418fb598389fb2c4115f634a61c7&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/AVFoundation.framework/libAVFAudio.dylib 0x117e29000 - 0x1180e3fff MediaToolbox x86_64 &lt;5587701cabc23ff0b1fd6d81d0309789&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/MediaToolbox.framework/MediaToolbox 0x1181ef000 - 0x118223fff Celestial x86_64 &lt;4cd1941e81a43e3e9ef4bee37a0ee762&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/Celestial.framework/Celestial 0x118274000 - 0x118275fff BTLEAudioController x86_64 &lt;a629490c2a8d3f48ba051bc19ee1d3da&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/BTLEAudioController.framework/BTLEAudioController 0x11827b000 - 0x1182dffff IMFoundation x86_64 &lt;5243547afc7834479cb6434788543d2f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation 0x11832a000 - 0x118336fff CommonUtilities x86_64 &lt;13c0b53f0c9d37a2915f0793fe809a9f&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities 0x118343000 - 0x118374fff libtidy.A.dylib x86_64 &lt;0e2291591e4b3f25881e6c4a98bb38e0&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libtidy.A.dylib 0x118385000 - 0x118394fff CacheDelete x86_64 &lt;e35e427c786c35429fac8b60b27650a7&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CacheDelete.framework/CacheDelete 0x1183a2000 - 0x1183c4fff PersistentConnection x86_64 &lt;e9fd98bc5ac739bfb4f4979f159fc2cd&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection 0x1183ea000 - 0x1183f1fff DataMigration x86_64 &lt;e0a5b78e95763ff9874c17198d2ab6f7&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/DataMigration.framework/DataMigration 0x1183fd000 - 0x118471fff CoreTelephony x86_64 &lt;4cb6c821e0da3386848cdf10650ba48a&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony 0x1184d9000 - 0x1184dffff libcupolicy.dylib x86_64 &lt;3b9f4709f1b139adb3630698596f4755&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libcupolicy.dylib 0x1184e9000 - 0x118520fff libTelephonyUtilDynamic.dylib x86_64 &lt;bdfdb334207d3deba45c9f2ceafd28fe&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libTelephonyUtilDynamic.dylib 0x11855e000 - 0x11857efff CoreBluetooth x86_64 &lt;5cb697ee9e803be689662c722d23792b&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreBluetooth.framework/CoreBluetooth 0x11ac19000 - 0x11ac21fff libMobileGestaltExtensions.dylib x86_64 &lt;f9379481b6703400a6affe719472b1e1&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libMobileGestaltExtensions.dylib 0x11ac7e000 - 0x11ac80fff libCGXType.A.dylib x86_64 &lt;a9d3ce5c71e1342b8837a140f26d1dcc&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreGraphics.framework/Resources/libCGXType.A.dylib 0x11ac8c000 - 0x11acb3fff libRIP.A.dylib x86_64 &lt;4fa5309d6dea38f1af4b8d1b3f33654e&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib 0x11ae05000 - 0x11ae10fff libGSFontCache.dylib x86_64 &lt;f24b9a1cdbe43bcfae632fc165171473&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/FontServices.framework/libGSFontCache.dylib 0x11bf53000 - 0x11bf7afff CoreServicesInternal x86_64 &lt;3f769739c15c3968a37853f346b0a862&gt; /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal2016-03-28 14:59:35.586 HomePageTest[4803:201212] Ë¥πÊó∂ÊµãËØï ming1016","link":"/ÁºñÁ®ã/Ô£ø/jian-ce/"},{"title":"Objc Runtime ","text":"Ê¶ÇËø∞Objc Runtime‰ΩøÂæóCÂÖ∑Êúâ‰∫ÜÈù¢ÂêëÂØπË±°ËÉΩÂäõÔºåÂú®Á®ãÂ∫èËøêË°åÊó∂ÂàõÂª∫ÔºåÊ£ÄÊü•Ôºå‰øÆÊîπÁ±ª„ÄÅÂØπË±°ÂíåÂÆÉ‰ª¨ÁöÑÊñπÊ≥ï„ÄÇRuntimeÊòØCÂíåÊ±áÁºñÁºñÂÜôÁöÑÔºåËøôÈáåhttps://www.opensource.apple.com/source/objc4/ÂèØ‰ª•‰∏ãÂà∞ËãπÊûúÁª¥Êä§ÁöÑÂºÄÊ∫ê‰ª£Á†ÅÔºåGNU‰πüÊúâ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑruntimeÁâàÊú¨Ôºå‰ªñ‰ª¨ÈÉΩÂä™ÂäõÁöÑ‰øùÊåÅ‰∏ÄËá¥„ÄÇËãπÊûúÂÆòÊñπÁöÑRuntimeÁºñÁ®ãÊåáÂçó RuntimeÂáΩÊï∞RuntimeÁ≥ªÁªüÊòØÁî±‰∏ÄÁ≥ªÂàóÁöÑÂáΩÊï∞ÂíåÊï∞ÊçÆÁªìÊûÑÁªÑÊàêÁöÑÂÖ¨ÂÖ±Êé•Âè£Âä®ÊÄÅÂÖ±‰∫´Â∫ìÔºåÂú®/usr/include/objcÁõÆÂΩï‰∏ãÂèØ‰ª•ÁúãÂà∞Â§¥Êñá‰ª∂ÔºåÂèØ‰ª•Áî®ÂÖ∂‰∏≠‰∏Ä‰∫õÂáΩÊï∞ÈÄöËøáCËØ≠Ë®ÄÂÆûÁé∞Objective-C‰∏≠‰∏ÄÊ†∑ÁöÑÂäüËÉΩ„ÄÇËãπÊûúÂÆòÊñπÊñáÊ°£https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/index.html ÈáåÊúâËØ¶ÁªÜÁöÑRuntimeÂáΩÊï∞ÊñáÊ°£„ÄÇ ClassÂíåObjectÂü∫Á°ÄÊï∞ÊçÆÁªìÊûÑClassobjc/runtime.h‰∏≠objc_classÁªìÊûÑ‰ΩìÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 12345678910111213141516struct objc_class {Class isa OBJC_ISA_AVAILABILITY; //isaÊåáÈíàÊåáÂêëMeta ClassÔºåÂõ†‰∏∫ObjcÁöÑÁ±ªÁöÑÊú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™ObjectÔºå‰∏∫‰∫ÜÂ§ÑÁêÜËøô‰∏™ÂÖ≥Á≥ªÔºåruntimeÂ∞±ÂàõÈÄ†‰∫ÜMeta ClassÔºåÂΩìÁªôÁ±ªÂèëÈÄÅ[NSObject alloc]ËøôÊ†∑Ê∂àÊÅØÊó∂ÔºåÂÆûÈôÖ‰∏äÊòØÊääËøô‰∏™Ê∂àÊÅØÂèëÁªô‰∫ÜClass Object#if !__OBJC2__Class super_class OBJC2_UNAVAILABLE; // Áà∂Á±ªconst char *name OBJC2_UNAVAILABLE; // Á±ªÂêçlong version OBJC2_UNAVAILABLE; // Á±ªÁöÑÁâàÊú¨‰ø°ÊÅØÔºåÈªòËÆ§‰∏∫0long info OBJC2_UNAVAILABLE; // Á±ª‰ø°ÊÅØÔºå‰æõËøêË°åÊúü‰ΩøÁî®ÁöÑ‰∏Ä‰∫õ‰ΩçÊ†áËØÜlong instance_size OBJC2_UNAVAILABLE; // ËØ•Á±ªÁöÑÂÆû‰æãÂèòÈáèÂ§ßÂ∞èstruct objc_ivar_list *ivars OBJC2_UNAVAILABLE; // ËØ•Á±ªÁöÑÊàêÂëòÂèòÈáèÈìæË°®struct objc_method_list **methodLists OBJC2_UNAVAILABLE; // ÊñπÊ≥ïÂÆö‰πâÁöÑÈìæË°®struct objc_cache *cache OBJC2_UNAVAILABLE; // ÊñπÊ≥ïÁºìÂ≠òÔºåÂØπË±°Êé•Âà∞‰∏Ä‰∏™Ê∂àÊÅØ‰ºöÊ†πÊçÆisaÊåáÈíàÊü•ÊâæÊ∂àÊÅØÂØπË±°ÔºåËøôÊó∂‰ºöÂú®methodLists‰∏≠ÈÅçÂéÜÔºåÂ¶ÇÊûúcache‰∫ÜÔºåÂ∏∏Áî®ÁöÑÊñπÊ≥ïË∞ÉÁî®Êó∂Â∞±ËÉΩÂ§üÊèêÈ´òË∞ÉÁî®ÁöÑÊïàÁéá„ÄÇstruct objc_protocol_list *protocols OBJC2_UNAVAILABLE; // ÂçèËÆÆÈìæË°®#endif} OBJC2_UNAVAILABLE; objc_ivar_listÂíåobjc_method_listÁöÑÂÆö‰πâ 1234567891011121314151617181920//objc_ivar_listÁªìÊûÑ‰ΩìÂ≠òÂÇ®objc_ivarÊï∞ÁªÑÂàóË°®struct objc_ivar_list { int ivar_count OBJC2_UNAVAILABLE;#ifdef __LP64__ int space OBJC2_UNAVAILABLE;#endif /* variable length structure */ struct objc_ivar ivar_list[1] OBJC2_UNAVAILABLE;} OBJC2_UNAVAILABLE;//objc_method_listÁªìÊûÑ‰ΩìÂ≠òÂÇ®ÁùÄobjc_methodÁöÑÊï∞ÁªÑÂàóË°®struct objc_method_list { struct objc_method_list *obsolete OBJC2_UNAVAILABLE; int method_count OBJC2_UNAVAILABLE;#ifdef __LP64__ int space OBJC2_UNAVAILABLE;#endif /* variable length structure */ struct objc_method method_list[1] OBJC2_UNAVAILABLE;} objc_object‰∏éidobjc_objectÊòØ‰∏Ä‰∏™Á±ªÁöÑÂÆû‰æãÁªìÊûÑ‰ΩìÔºåobjc/objc.h‰∏≠objc_objectÊòØ‰∏Ä‰∏™Á±ªÁöÑÂÆû‰æãÁªìÊûÑ‰ΩìÂÆö‰πâÂ¶Ç‰∏ãÔºö 12345struct objc_object {Class isa OBJC_ISA_AVAILABILITY;};typedef struct objc_object *id; ÂêëobjectÂèëÈÄÅÊ∂àÊÅØÊó∂ÔºåRuntimeÂ∫ì‰ºöÊ†πÊçÆobjectÁöÑisaÊåáÈíàÊâæÂà∞Ëøô‰∏™ÂÆû‰æãobjectÊâÄÂ±û‰∫éÁöÑÁ±ªÔºåÁÑ∂ÂêéÂú®Á±ªÁöÑÊñπÊ≥ïÂàóË°®‰ª•ÂèäÁà∂Á±ªÊñπÊ≥ïÂàóË°®ÂØªÊâæÂØπÂ∫îÁöÑÊñπÊ≥ïËøêË°å„ÄÇidÊòØ‰∏Ä‰∏™objc_objectÁªìÊûÑÁ±ªÂûãÁöÑÊåáÈíàÔºåËøô‰∏™Á±ªÂûãÁöÑÂØπË±°ËÉΩÂ§üËΩ¨Êç¢Êàê‰ªª‰Ωï‰∏ÄÁßçÂØπË±°„ÄÇ objc_cacheobjc_classÁªìÊûÑ‰Ωì‰∏≠ÁöÑcacheÂ≠óÊÆµÁî®‰∫éÁºìÂ≠òË∞ÉÁî®ËøáÁöÑmethod„ÄÇcacheÊåáÈíàÊåáÂêëobjc_cacheÁªìÊûÑ‰ΩìÔºåËøô‰∏™ÁªìÊûÑ‰ΩìÁöÑÂÆö‰πâÂ¶Ç‰∏ã 12345struct objc_cache {unsigned int mask /* total = mask + 1 */ OBJC2_UNAVAILABLE; //ÊåáÂÆöÂàÜÈÖçÁºìÂ≠òbucketÁöÑÊÄªÊï∞„ÄÇruntime‰ΩøÁî®Ëøô‰∏™Â≠óÊÆµÁ°ÆÂÆöÁ∫øÊÄßÊü•ÊâæÊï∞ÁªÑÁöÑÁ¥¢Âºï‰ΩçÁΩÆunsigned int occupied OBJC2_UNAVAILABLE; //ÂÆûÈôÖÂç†Áî®ÁºìÂ≠òbucketÊÄªÊï∞Method buckets[1] OBJC2_UNAVAILABLE; //ÊåáÂêëMethodÊï∞ÊçÆÁªìÊûÑÊåáÈíàÁöÑÊï∞ÁªÑÔºåËøô‰∏™Êï∞ÁªÑÁöÑÊÄªÊï∞‰∏çËÉΩË∂ÖËøámask+1Ôºå‰ΩÜÊòØÊåáÈíàÊòØÂèØËÉΩ‰∏∫Á©∫ÁöÑÔºåËøôÂ∞±Ë°®Á§∫ÁºìÂ≠òbucketÊ≤°ÊúâË¢´Âç†Áî®ÔºåÊï∞ÁªÑ‰ºöÈöèÁùÄÊó∂Èó¥Â¢ûÈïø„ÄÇ}; Meta Classmeta classÊòØ‰∏Ä‰∏™Á±ªÂØπË±°ÁöÑÁ±ªÔºåÂΩìÂêëÂØπË±°ÂèëÊ∂àÊÅØÔºåruntime‰ºöÂú®Ëøô‰∏™ÂØπË±°ÊâÄÂ±ûÁ±ªÊñπÊ≥ïÂàóË°®‰∏≠Êü•ÊâæÂèëÈÄÅÊ∂àÊÅØÂØπÂ∫îÁöÑÊñπÊ≥ïÔºå‰ΩÜÂΩìÂêëÁ±ªÂèëÈÄÅÊ∂àÊÅØÊó∂ÔºåruntimeÂ∞±‰ºöÂú®Ëøô‰∏™Á±ªÁöÑmeta classÊñπÊ≥ïÂàóË°®ÈáåÊü•Êâæ„ÄÇÊâÄÊúâÁöÑmeta classÔºåÂåÖÊã¨Root classÔºåSuperclassÔºåSubclassÁöÑisaÈÉΩÊåáÂêëRoot classÁöÑmeta classÔºåËøôÊ†∑ËÉΩÂ§üÂΩ¢Êàê‰∏Ä‰∏™Èó≠ÁéØ„ÄÇ 12345678910111213141516171819202122232425262728void TestMetaClass(id self, SEL _cmd) { NSLog(@&quot;This objcet is %p&quot;, self); NSLog(@&quot;Class is %@, super class is %@&quot;, [self class], [self superclass]); Class currentClass = [self class]; // for (int i = 0; i &lt; 4; i++) { NSLog(@&quot;Following the isa pointer %d times gives %p&quot;, i, currentClass); //ÈÄöËøáobjc_getClassËé∑ÂæóÂØπË±°isaÔºåËøôÊ†∑ÂèØ‰ª•ÂõûÊ∫ØÂà∞Root classÂèäNSObjectÁöÑmeta classÔºåÂèØ‰ª•ÁúãÂà∞ÊúÄÂêéÊåáÈíàÊåáÂêëÁöÑÊòØ0x0ÂíåNSObjectÁöÑmeta classÁ±ªÂú∞ÂùÄ‰∏ÄÊ†∑„ÄÇ currentClass = objc_getClass((__bridge void *)currentClass); } NSLog(@&quot;NSObject&apos;s class is %p&quot;, [NSObject class]); NSLog(@&quot;NSObject&apos;s meta class is %p&quot;, objc_getClass((__bridge void *)[NSObject class]));}@implementation Test- (void)ex_registerClassPair { Class newClass = objc_allocateClassPair([NSError class], &quot;TestClass&quot;, 0); class_addMethod(newClass, @selector(testMetaClass), (IMP)TestMetaClass, &quot;v@:&quot;); objc_registerClassPair(newClass); id instance = [[newClass alloc] initWithDomain:@&quot;some domain&quot; code:0 userInfo:nil]; [instance performSelector:@selector(testMetaClass)];}@end ËøêË°åÁªìÊûú 123456782014-10-20 22:57:07.352 mountain[1303:41490] This objcet is 0x7a6e22b02014-10-20 22:57:07.353 mountain[1303:41490] Class is TestStringClass, super class is NSError2014-10-20 22:57:07.353 mountain[1303:41490] Following the isa pointer 0 times gives 0x7a6e21b02014-10-20 22:57:07.353 mountain[1303:41490] Following the isa pointer 1 times gives 0x02014-10-20 22:57:07.353 mountain[1303:41490] Following the isa pointer 2 times gives 0x02014-10-20 22:57:07.353 mountain[1303:41490] Following the isa pointer 3 times gives 0x02014-10-20 22:57:07.353 mountain[1303:41490] NSObject&apos;s class is 0xe100002014-10-20 22:57:07.354 mountain[1303:41490] NSObject&apos;s meta class is 0x0 ‰∏æ‰∏™‰æãÂ≠ê 1234567891011121314151617@interface Sark : NSObject@end@implementation Sark@endint main(int argc, const char * argv[]) { @autoreleasepool { BOOL res1 = [(id)[NSObject class] isKindOfClass:[NSObject class]]; BOOL res2 = [(id)[NSObject class] isMemberOfClass:[NSObject class]]; BOOL res3 = [(id)[Sark class] isKindOfClass:[Sark class]]; BOOL res4 = [(id)[Sark class] isMemberOfClass:[Sark class]]; NSLog(@&quot;%d %d %d %d&quot;, res1, res2, res3, res4); } return 0;}//ËæìÂá∫2014-11-05 14:45:08.474 Test[9412:721945] 1 0 0 0 ÂÖàÁúãÁúãisKindOfClassÂíåisMemberOfClassÂú®Object.mm‰∏≠ÁöÑÂÆûÁé∞ 12345678910111213- (BOOL)isKindOf:aClass{ Class cls; for (cls = isa; cls; cls = cls-&gt;superclass) if (cls == (Class)aClass) return YES; return NO;}- (BOOL)isMemberOf:aClass{ return isa == (Class)aClass;} res1‰∏≠ÔºåÂèØ‰ª•‰ªéisKindOfClassÁúãÂá∫NSObject classÁöÑisaÁ¨¨‰∏ÄÊ¨°‰ºöÊåáÂêëNSObjectÁöÑMeta ClassÔºåÊé•ÁùÄSuper classÊó∂‰ºöNSObjectÁöÑMeta ClassÊ†πÊçÆÂâçÈù¢ËÆ≤ÁöÑÈó≠ÁéØÂèØ‰ª•Áü•ÈÅìÊòØ‰ºöÊåáÂà∞NSObject classÔºåËøôÊ†∑res1ÁöÑboolÂÄºÂ∞±ÊòØÁúü‰∫Ü„ÄÇ res2ÁöÑËØùÂõ†‰∏∫ÊòØisMemberOfÂ∞±Âè™Êúâ‰∏ÄÊ¨°ÔºåÈÇ£‰πàÊòØNSObjectÁöÑMeta ClassÂíåNSObject class‰∏çÂêåËøîÂõûÁöÑboolÂÄºÂ∞±ÊòØfalse‰∫Ü„ÄÇ res3Á¨¨‰∏ÄÊ¨°ÊòØSark Meta ClassÔºåÁ¨¨‰∫åÊ¨°super class ÂêéÂ∞±ÊòØNSObject Meta Class‰∫ÜÔºåËøîÂõû‰πüÊòØfalse res4ÊòØSark Meta ClassÔºåÊâÄ‰ª•ËøîÂõû‰πüÊòØfalse Á±ª‰∏éÂØπË±°Êìç‰ΩúÂáΩÊï∞runtimeÊúâÂæàÂ§öÁöÑÂáΩÊï∞ÂèØ‰ª•Êìç‰ΩúÁ±ªÂíåÂØπË±°„ÄÇÁ±ªÁõ∏ÂÖ≥ÁöÑÊòØclass‰∏∫ÂâçÁºÄÔºåÂØπË±°Áõ∏ÂÖ≥Êìç‰ΩúÊòØobjcÊàñobject_‰∏∫ÂâçÁºÄ„ÄÇ Á±ªÁõ∏ÂÖ≥Êìç‰ΩúÂáΩÊï∞name12// Ëé∑ÂèñÁ±ªÁöÑÁ±ªÂêçconst char * class_getName ( Class cls ); super_classÂíåmeta-class12345// Ëé∑ÂèñÁ±ªÁöÑÁà∂Á±ªClass class_getSuperclass ( Class cls );// Âà§Êñ≠ÁªôÂÆöÁöÑClassÊòØÂê¶ÊòØ‰∏Ä‰∏™meta classBOOL class_isMetaClass ( Class cls ); instance_size12// Ëé∑ÂèñÂÆû‰æãÂ§ßÂ∞èsize_t class_getInstanceSize ( Class cls ); ÊàêÂëòÂèòÈáè(ivars)ÂèäÂ±ûÊÄß12345678910111213141516171819202122232425//ÊàêÂëòÂèòÈáèÊìç‰ΩúÂáΩÊï∞// Ëé∑ÂèñÁ±ª‰∏≠ÊåáÂÆöÂêçÁß∞ÂÆû‰æãÊàêÂëòÂèòÈáèÁöÑ‰ø°ÊÅØIvar class_getInstanceVariable ( Class cls, const char *name );// Ëé∑ÂèñÁ±ªÊàêÂëòÂèòÈáèÁöÑ‰ø°ÊÅØIvar class_getClassVariable ( Class cls, const char *name );// Ê∑ªÂä†ÊàêÂëòÂèòÈáèBOOL class_addIvar ( Class cls, const char *name, size_t size, uint8_t alignment, const char *types ); //Ëøô‰∏™Âè™ËÉΩÂ§üÂêëÂú®runtimeÊó∂ÂàõÂª∫ÁöÑÁ±ªÊ∑ªÂä†ÊàêÂëòÂèòÈáè// Ëé∑ÂèñÊï¥‰∏™ÊàêÂëòÂèòÈáèÂàóË°®Ivar * class_copyIvarList ( Class cls, unsigned int *outCount ); //ÂøÖÈ°ª‰ΩøÁî®free()Êù•ÈáäÊîæËøô‰∏™Êï∞ÁªÑ//Â±ûÊÄßÊìç‰ΩúÂáΩÊï∞// Ëé∑ÂèñÁ±ª‰∏≠ÊåáÂÆöÂêçÁß∞ÂÆû‰æãÊàêÂëòÂèòÈáèÁöÑ‰ø°ÊÅØIvar class_getInstanceVariable ( Class cls, const char *name );// Ëé∑ÂèñÁ±ªÊàêÂëòÂèòÈáèÁöÑ‰ø°ÊÅØIvar class_getClassVariable ( Class cls, const char *name );// Ê∑ªÂä†ÊàêÂëòÂèòÈáèBOOL class_addIvar ( Class cls, const char *name, size_t size, uint8_t alignment, const char *types );// Ëé∑ÂèñÊï¥‰∏™ÊàêÂëòÂèòÈáèÂàóË°®Ivar * class_copyIvarList ( Class cls, unsigned int *outCount ); methodLists123456789101112131415161718192021// Ê∑ªÂä†ÊñπÊ≥ïBOOL class_addMethod ( Class cls, SEL name, IMP imp, const char *types ); //ÂíåÊàêÂëòÂèòÈáè‰∏çÂêåÁöÑÊòØÂèØ‰ª•‰∏∫Á±ªÂä®ÊÄÅÊ∑ªÂä†ÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÊúâÂêåÂêç‰ºöËøîÂõûNOÔºå‰øÆÊîπÁöÑËØùÈúÄË¶Å‰ΩøÁî®method_setImplementation// Ëé∑ÂèñÂÆû‰æãÊñπÊ≥ïMethod class_getInstanceMethod ( Class cls, SEL name );// Ëé∑ÂèñÁ±ªÊñπÊ≥ïMethod class_getClassMethod ( Class cls, SEL name );// Ëé∑ÂèñÊâÄÊúâÊñπÊ≥ïÁöÑÊï∞ÁªÑMethod * class_copyMethodList ( Class cls, unsigned int *outCount );// Êõø‰ª£ÊñπÊ≥ïÁöÑÂÆûÁé∞IMP class_replaceMethod ( Class cls, SEL name, IMP imp, const char *types );// ËøîÂõûÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞IMP class_getMethodImplementation ( Class cls, SEL name );IMP class_getMethodImplementation_stret ( Class cls, SEL name );// Á±ªÂÆû‰æãÊòØÂê¶ÂìçÂ∫îÊåáÂÆöÁöÑselectorBOOL class_respondsToSelector ( Class cls, SEL sel ); objc_protocol_list12345678// Ê∑ªÂä†ÂçèËÆÆBOOL class_addProtocol ( Class cls, Protocol *protocol );// ËøîÂõûÁ±ªÊòØÂê¶ÂÆûÁé∞ÊåáÂÆöÁöÑÂçèËÆÆBOOL class_conformsToProtocol ( Class cls, Protocol *protocol );// ËøîÂõûÁ±ªÂÆûÁé∞ÁöÑÂçèËÆÆÂàóË°®Protocol * class_copyProtocolList ( Class cls, unsigned int *outCount ); version12345// Ëé∑ÂèñÁâàÊú¨Âè∑int class_getVersion ( Class cls );// ËÆæÁΩÆÁâàÊú¨Âè∑void class_setVersion ( Class cls, int version ); ÂÆû‰æãÈÄöËøáÂÆû‰æãÊù•Ê∂àÂåñ‰∏ã‰∏äÈù¢ÁöÑÈÇ£‰∫õÂáΩÊï∞ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142//-----------------------------------------------------------// MyClass.h@interface MyClass : NSObject &lt;NSCopying, NSCoding&gt;@property (nonatomic, strong) NSArray *array;@property (nonatomic, copy) NSString *string;- (void)method1;- (void)method2;+ (void)classMethod1;@end//-----------------------------------------------------------// MyClass.m#import &quot;MyClass.h&quot;@interface MyClass () {NSInteger _instance1;NSString * _instance2;}@property (nonatomic, assign) NSUInteger integer;- (void)method3WithArg1:(NSInteger)arg1 arg2:(NSString *)arg2;@end@implementation MyClass+ (void)classMethod1 {}- (void)method1 { NSLog(@&quot;call method method1&quot;);}- (void)method2 {}- (void)method3WithArg1:(NSInteger)arg1 arg2:(NSString *)arg2 { NSLog(@&quot;arg1 : %ld, arg2 : %@&quot;, arg1, arg2);}@end//-----------------------------------------------------------// main.h#import &quot;MyClass.h&quot;#import &quot;MySubClass.h&quot;#import &lt;objc/runtime.h&gt;int main(int argc, const char * argv[]) { @autoreleasepool { MyClass *myClass = [[MyClass alloc] init]; unsigned int outCount = 0; Class cls = myClass.class; // Á±ªÂêç NSLog(@&quot;class name: %s&quot;, class_getName(cls)); NSLog(@&quot;==========================================================&quot;); // Áà∂Á±ª NSLog(@&quot;super class name: %s&quot;, class_getName(class_getSuperclass(cls))); NSLog(@&quot;==========================================================&quot;); // ÊòØÂê¶ÊòØÂÖÉÁ±ª NSLog(@&quot;MyClass is %@ a meta-class&quot;, (class_isMetaClass(cls) ? @&quot;&quot; : @&quot;not&quot;)); NSLog(@&quot;==========================================================&quot;); Class meta_class = objc_getMetaClass(class_getName(cls)); NSLog(@&quot;%s&apos;s meta-class is %s&quot;, class_getName(cls), class_getName(meta_class)); NSLog(@&quot;==========================================================&quot;); // ÂèòÈáèÂÆû‰æãÂ§ßÂ∞è NSLog(@&quot;instance size: %zu&quot;, class_getInstanceSize(cls)); NSLog(@&quot;==========================================================&quot;); // ÊàêÂëòÂèòÈáè Ivar *ivars = class_copyIvarList(cls, &amp;outCount); for (int i = 0; i &lt; outCount; i++) { Ivar ivar = ivars[i]; NSLog(@&quot;instance variable&apos;s name: %s at index: %d&quot;, ivar_getName(ivar), i); } free(ivars); Ivar string = class_getInstanceVariable(cls, &quot;_string&quot;); if (string != NULL) { NSLog(@&quot;instace variable %s&quot;, ivar_getName(string)); } NSLog(@&quot;==========================================================&quot;); // Â±ûÊÄßÊìç‰Ωú objc_property_t * properties = class_copyPropertyList(cls, &amp;outCount); for (int i = 0; i &lt; outCount; i++) { objc_property_t property = properties[i]; NSLog(@&quot;property&apos;s name: %s&quot;, property_getName(property)); } free(properties); objc_property_t array = class_getProperty(cls, &quot;array&quot;); if (array != NULL) { NSLog(@&quot;property %s&quot;, property_getName(array)); } NSLog(@&quot;==========================================================&quot;); // ÊñπÊ≥ïÊìç‰Ωú Method *methods = class_copyMethodList(cls, &amp;outCount); for (int i = 0; i &lt; outCount; i++) { Method method = methods[i]; NSLog(@&quot;method&apos;s signature: %s&quot;, method_getName(method)); } free(methods); Method method1 = class_getInstanceMethod(cls, @selector(method1)); if (method1 != NULL) { NSLog(@&quot;method %s&quot;, method_getName(method1)); } Method classMethod = class_getClassMethod(cls, @selector(classMethod1)); if (classMethod != NULL) { NSLog(@&quot;class method : %s&quot;, method_getName(classMethod)); } NSLog(@&quot;MyClass is%@ responsd to selector: method3WithArg1:arg2:&quot;, class_respondsToSelector(cls, @selector(method3WithArg1:arg2:)) ? @&quot;&quot; : @&quot; not&quot;); IMP imp = class_getMethodImplementation(cls, @selector(method1)); imp(); NSLog(@&quot;==========================================================&quot;); // ÂçèËÆÆ Protocol * __unsafe_unretained * protocols = class_copyProtocolList(cls, &amp;outCount); Protocol * protocol; for (int i = 0; i &lt; outCount; i++) { protocol = protocols[i]; NSLog(@&quot;protocol name: %s&quot;, protocol_getName(protocol)); } NSLog(@&quot;MyClass is%@ responsed to protocol %s&quot;, class_conformsToProtocol(cls, protocol) ? @&quot;&quot; : @&quot; not&quot;, protocol_getName(protocol)); NSLog(@&quot;==========================================================&quot;); } return 0;} ËæìÂá∫ÁªìÊûú 12345678910111213141516171819202122232425262728293031323334353637383940412014-10-22 19:41:37.452 RuntimeTest[3189:156810] class name: MyClass2014-10-22 19:41:37.453 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.454 RuntimeTest[3189:156810] super class name: NSObject2014-10-22 19:41:37.454 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.454 RuntimeTest[3189:156810] MyClass is not a meta-class2014-10-22 19:41:37.454 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.454 RuntimeTest[3189:156810] MyClass&apos;s meta-class is MyClass2014-10-22 19:41:37.455 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance size: 482014-10-22 19:41:37.455 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance variable&apos;s name: _instance1 at index: 02014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance variable&apos;s name: _instance2 at index: 12014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance variable&apos;s name: _array at index: 22014-10-22 19:41:37.455 RuntimeTest[3189:156810] instance variable&apos;s name: _string at index: 32014-10-22 19:41:37.463 RuntimeTest[3189:156810] instance variable&apos;s name: _integer at index: 42014-10-22 19:41:37.463 RuntimeTest[3189:156810] instace variable _string2014-10-22 19:41:37.463 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.463 RuntimeTest[3189:156810] property&apos;s name: array2014-10-22 19:41:37.463 RuntimeTest[3189:156810] property&apos;s name: string2014-10-22 19:41:37.464 RuntimeTest[3189:156810] property&apos;s name: integer2014-10-22 19:41:37.464 RuntimeTest[3189:156810] property array2014-10-22 19:41:37.464 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.464 RuntimeTest[3189:156810] method&apos;s signature: method12014-10-22 19:41:37.464 RuntimeTest[3189:156810] method&apos;s signature: method22014-10-22 19:41:37.464 RuntimeTest[3189:156810] method&apos;s signature: method3WithArg1:arg2:2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: integer2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: setInteger:2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: array2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: string2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: setString:2014-10-22 19:41:37.465 RuntimeTest[3189:156810] method&apos;s signature: setArray:2014-10-22 19:41:37.466 RuntimeTest[3189:156810] method&apos;s signature: .cxx_destruct2014-10-22 19:41:37.466 RuntimeTest[3189:156810] method method12014-10-22 19:41:37.466 RuntimeTest[3189:156810] class method : classMethod12014-10-22 19:41:37.466 RuntimeTest[3189:156810] MyClass is responsd to selector: method3WithArg1:arg2:2014-10-22 19:41:37.467 RuntimeTest[3189:156810] call method method12014-10-22 19:41:37.467 RuntimeTest[3189:156810] ==========================================================2014-10-22 19:41:37.467 RuntimeTest[3189:156810] protocol name: NSCopying2014-10-22 19:41:37.467 RuntimeTest[3189:156810] protocol name: NSCoding2014-10-22 19:41:37.467 RuntimeTest[3189:156810] MyClass is responsed to protocol NSCoding2014-10-22 19:41:37.468 RuntimeTest[3189:156810] ====================================== Âä®ÊÄÅÂàõÂª∫Á±ªÂíåÂØπË±°Âä®ÊÄÅÂàõÂª∫Á±ª12345678// ÂàõÂª∫‰∏Ä‰∏™Êñ∞Á±ªÂíåÂÖÉÁ±ªClass objc_allocateClassPair ( Class superclass, const char *name, size_t extraBytes ); //Â¶ÇÊûúÂàõÂª∫ÁöÑÊòØroot classÔºåÂàôsuperclass‰∏∫Nil„ÄÇextraBytesÈÄöÂ∏∏‰∏∫0// ÈîÄÊØÅ‰∏Ä‰∏™Á±ªÂèäÂÖ∂Áõ∏ÂÖ≥ËÅîÁöÑÁ±ªvoid objc_disposeClassPair ( Class cls ); //Âú®ËøêË°å‰∏≠ËøòÂ≠òÂú®ÊàñÂ≠òÂú®Â≠êÁ±ªÂÆû‰æãÔºåÂ∞±‰∏çËÉΩÂ§üË∞ÉÁî®Ëøô‰∏™„ÄÇ// Âú®Â∫îÁî®‰∏≠Ê≥®ÂÜåÁî±objc_allocateClassPairÂàõÂª∫ÁöÑÁ±ªvoid objc_registerClassPair ( Class cls ); //ÂàõÂª∫‰∫ÜÊñ∞Á±ªÂêéÔºåÁÑ∂Âêé‰ΩøÁî®class_addMethodÔºåclass_addIvarÂáΩÊï∞‰∏∫Êñ∞Á±ªÊ∑ªÂä†ÊñπÊ≥ïÔºåÂÆû‰æãÂèòÈáèÂíåÂ±ûÊÄßÂêéÂÜçË∞ÉÁî®Ëøô‰∏™Êù•Ê≥®ÂÜåÁ±ªÔºåÂÜç‰πãÂêéÂ∞±ËÉΩÂ§üÁî®‰∫Ü„ÄÇ ‰ΩøÁî®ÂÆû‰æã 12345678910111213141516Class cls = objc_allocateClassPair(MyClass.class, &quot;MySubClass&quot;, 0);class_addMethod(cls, @selector(submethod1), (IMP)imp_submethod1, &quot;v@:&quot;);class_replaceMethod(cls, @selector(method1), (IMP)imp_submethod1, &quot;v@:&quot;);class_addIvar(cls, &quot;_ivar1&quot;, sizeof(NSString *), log(sizeof(NSString *)), &quot;i&quot;);objc_property_attribute_t type = {&quot;T&quot;, &quot;@\\&quot;NSString\\&quot;&quot;};objc_property_attribute_t ownership = { &quot;C&quot;, &quot;&quot; };objc_property_attribute_t backingivar = { &quot;V&quot;, &quot;_ivar1&quot;};objc_property_attribute_t attrs[] = {type, ownership, backingivar};class_addProperty(cls, &quot;property2&quot;, attrs, 3);objc_registerClassPair(cls);id instance = [[cls alloc] init];[instance performSelector:@selector(submethod1)];[instance performSelector:@selector(method1)]; ËæìÂá∫ 122014-10-23 11:35:31.006 RuntimeTest[3800:66152] run sub method 12014-10-23 11:35:31.006 RuntimeTest[3800:66152] run sub method 1 Âä®ÊÄÅÂàõÂª∫ÂØπË±°12345678// ÂàõÂª∫Á±ªÂÆû‰æãid class_createInstance ( Class cls, size_t extraBytes ); //‰ºöÂú®heapÈáåÁªôÁ±ªÂàÜÈÖçÂÜÖÂ≠ò„ÄÇËøô‰∏™ÊñπÊ≥ïÂíå+allocÊñπÊ≥ïÁ±ª‰ºº„ÄÇ// Âú®ÊåáÂÆö‰ΩçÁΩÆÂàõÂª∫Á±ªÂÆû‰æãid objc_constructInstance ( Class cls, void *bytes ); // ÈîÄÊØÅÁ±ªÂÆû‰æãvoid * objc_destructInstance ( id obj ); //‰∏ç‰ºöÈáäÊîæÁßªÈô§‰ªª‰ΩïÁõ∏ÂÖ≥ÂºïÁî® ÊµãËØï‰∏ãÊïàÊûú 123456//ÂèØ‰ª•ÁúãÂá∫class_createInstanceÂíåallocÁöÑ‰∏çÂêåid theObject = class_createInstance(NSString.class, sizeof(unsigned));id str1 = [theObject init];NSLog(@&quot;%@&quot;, [str1 class]);id str2 = [[NSString alloc] initWithString:@&quot;test&quot;];NSLog(@&quot;%@&quot;, [str2 class]); ËæìÂá∫ÁªìÊûú 122014-10-23 12:46:50.781 RuntimeTest[4039:89088] NSString2014-10-23 12:46:50.781 RuntimeTest[4039:89088] __NSCFConstantString ÂÆû‰æãÊìç‰ΩúÂáΩÊï∞Ëøô‰∫õÂáΩÊï∞ÊòØÈíàÂØπÂàõÂª∫ÁöÑÂÆû‰æãÂØπË±°ÁöÑ‰∏ÄÁ≥ªÂàóÊìç‰ΩúÂáΩÊï∞„ÄÇ Êï¥‰∏™ÂØπË±°Êìç‰ΩúÁöÑÂáΩÊï∞1234// ËøîÂõûÊåáÂÆöÂØπË±°ÁöÑ‰∏Ä‰ªΩÊã∑Ë¥ùid object_copy ( id obj, size_t size );// ÈáäÊîæÊåáÂÆöÂØπË±°Âç†Áî®ÁöÑÂÜÖÂ≠òid object_dispose ( id obj ); Â∫îÁî®Âú∫ÊôØ 12345//ÊääaËΩ¨Êç¢ÊàêÂç†Áî®Êõ¥Â§öÁ©∫Èó¥ÁöÑÂ≠êÁ±ªbNSObject *a = [[NSObject alloc] init];id newB = object_copy(a, class_getInstanceSize(MyClass.class));object_setClass(newB, MyClass.class);object_dispose(a); ÂØπË±°ÂÆû‰æãÂèòÈáèËøõË°åÊìç‰ΩúÁöÑÂáΩÊï∞12345678910// ‰øÆÊîπÁ±ªÂÆû‰æãÁöÑÂÆû‰æãÂèòÈáèÁöÑÂÄºIvar object_setInstanceVariable ( id obj, const char *name, void *value );// Ëé∑ÂèñÂØπË±°ÂÆû‰æãÂèòÈáèÁöÑÂÄºIvar object_getInstanceVariable ( id obj, const char *name, void **outValue );// ËøîÂõûÊåáÂêëÁªôÂÆöÂØπË±°ÂàÜÈÖçÁöÑ‰ªª‰ΩïÈ¢ùÂ§ñÂ≠óËäÇÁöÑÊåáÈíàvoid * object_getIndexedIvars ( id obj );// ËøîÂõûÂØπË±°‰∏≠ÂÆû‰æãÂèòÈáèÁöÑÂÄºid object_getIvar ( id obj, Ivar ivar );// ËÆæÁΩÆÂØπË±°‰∏≠ÂÆû‰æãÂèòÈáèÁöÑÂÄºvoid object_setIvar ( id obj, Ivar ivar, id value ); ÂØπÂØπË±°Á±ªÊìç‰Ωú123456// ËøîÂõûÁªôÂÆöÂØπË±°ÁöÑÁ±ªÂêçconst char * object_getClassName ( id obj );// ËøîÂõûÂØπË±°ÁöÑÁ±ªClass object_getClass ( id obj );// ËÆæÁΩÆÂØπË±°ÁöÑÁ±ªClass object_setClass ( id obj, Class cls ); Ëé∑ÂèñÁ±ªÂÆö‰πâ12345678910111213// Ëé∑ÂèñÂ∑≤Ê≥®ÂÜåÁöÑÁ±ªÂÆö‰πâÁöÑÂàóË°®int objc_getClassList ( Class *buffer, int bufferCount );// ÂàõÂª∫Âπ∂ËøîÂõû‰∏Ä‰∏™ÊåáÂêëÊâÄÊúâÂ∑≤Ê≥®ÂÜåÁ±ªÁöÑÊåáÈíàÂàóË°®Class * objc_copyClassList ( unsigned int *outCount );// ËøîÂõûÊåáÂÆöÁ±ªÁöÑÁ±ªÂÆö‰πâClass objc_lookUpClass ( const char *name );Class objc_getClass ( const char *name );Class objc_getRequiredClass ( const char *name );// ËøîÂõûÊåáÂÆöÁ±ªÁöÑÂÖÉÁ±ªClass objc_getMetaClass ( const char *name ); ÊºîÁ§∫Â¶Ç‰Ωï‰ΩøÁî® 123456789101112131415int numClasses;Class * classes = NULL;numClasses = objc_getClassList(NULL, 0);if (numClasses &gt; 0) { classes = malloc(sizeof(Class) * numClasses); numClasses = objc_getClassList(classes, numClasses); NSLog(@&quot;number of classes: %d&quot;, numClasses); for (int i = 0; i &lt; numClasses; i++) { Class cls = classes[i]; NSLog(@&quot;class name: %s&quot;, class_getName(cls)); } free(classes);} ÁªìÊûúÂ¶Ç‰∏ãÔºö 1234567891011122014-10-23 16:20:52.589 RuntimeTest[8437:188589] number of classes: 12822014-10-23 16:20:52.589 RuntimeTest[8437:188589] class name: DDTokenRegexp2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: _NSMostCommonKoreanCharsKeySet2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: OS_xpc_dictionary2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: NSFileCoordinator2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: NSAssertionHandler2014-10-23 16:20:52.590 RuntimeTest[8437:188589] class name: PFUbiquityTransactionLogMigrator2014-10-23 16:20:52.591 RuntimeTest[8437:188589] class name: NSNotification2014-10-23 16:20:52.591 RuntimeTest[8437:188589] class name: NSKeyValueNilSetEnumerator2014-10-23 16:20:52.591 RuntimeTest[8437:188589] class name: OS_tcp_connection_tls_session2014-10-23 16:20:52.591 RuntimeTest[8437:188589] class name: _PFRoutines......ËøòÊúâÂ§ßÈáèËæìÂá∫ ÊàêÂëòÂèòÈáè‰∏éÂ±ûÊÄßÂü∫Á°ÄÊï∞ÊçÆÁ±ªÂûãIvarÂÆû‰æãÂèòÈáèÁ±ªÂûãÔºåÊåáÂêëobjc_ivarÁªìÊûÑ‰ΩìÁöÑÊåáÈíàÔºåivarÊåáÈíàÂú∞ÂùÄÊòØÊ†πÊçÆclassÁªìÊûÑ‰ΩìÁöÑÂú∞ÂùÄÂä†‰∏äÂü∫Âú∞ÂùÄÂÅèÁßªÂ≠óËäÇÂæóÂà∞ÁöÑ„ÄÇ 12345678910typedef struct objc_ivar *Ivar;struct objc_ivar {char *ivar_name OBJC2_UNAVAILABLE; // ÂèòÈáèÂêçchar *ivar_type OBJC2_UNAVAILABLE; // ÂèòÈáèÁ±ªÂûãint ivar_offset OBJC2_UNAVAILABLE; // Âü∫Âú∞ÂùÄÂÅèÁßªÂ≠óËäÇ#ifdef __LP64__int space OBJC2_UNAVAILABLE;#endif} objc_property_tÂ±ûÊÄßÁ±ªÂûãÔºåÊåáÂêëobjc_propertyÁªìÊûÑ‰Ωì 1typedef struct objc_property *objc_property_t; ÈÄöËøáclass_copyPropertyListÂíåprotocol_copyPropertyListÊñπÊ≥ïËé∑ÂèñÁ±ªÂíåÂçèËÆÆÁöÑÂ±ûÊÄß 12objc_property_t *class_copyPropertyList(Class cls, unsigned int *outCount)objc_property_t *protocol_copyPropertyList(Protocol *proto, unsigned int *outCount) Á§∫‰æã 1234567891011121314151617181920212223242526272829@interface Lender : NSObject { float alone;}@property float alone;@end//Ëé∑ÂèñÂ±ûÊÄßÂàóË°®id LenderClass = objc_getClass(&quot;Lender&quot;);unsigned int outCount;objc_property_t *properties = class_copyPropertyList(LenderClass, &amp;outCount);//Êü•ÊâæÂ±ûÊÄßÂêçÁß∞const char *property_getName(objc_property_t property)//ÈÄöËøáÁªôÂá∫ÁöÑÂêçÁß∞Êù•Âú®Á±ªÂíåÂçèËÆÆ‰∏≠Ëé∑ÂèñÂ±ûÊÄßÁöÑÂºïÁî®objc_property_t class_getProperty(Class cls, const char *name)objc_property_t protocol_getProperty(Protocol *proto, const char *name, BOOL isRequiredProperty, BOOL isInstanceProperty)//ÂèëÊéòÂ±ûÊÄßÂêçÁß∞Âíå@encodeÁ±ªÂûãÂ≠óÁ¨¶‰∏≤const char *property_getAttributes(objc_property_t property)//‰ªé‰∏Ä‰∏™Á±ª‰∏≠Ëé∑ÂèñÂÆÉÁöÑÂ±ûÊÄßid LenderClass = objc_getClass(&quot;Lender&quot;);unsigned int outCount, i;objc_property_t *properties = class_copyPropertyList(LenderClass, &amp;outCount);for (i = 0; i &lt; outCount; i++) { objc_property_t property = properties[i]; fprintf(stdout, &quot;%s %s\\n&quot;, property_getName(property), property_getAttributes(property));} objc_property_attribute_t‰πüÊòØÁªìÊûÑ‰ΩìÔºåÂÆö‰πâÂ±ûÊÄßÁöÑattribute 1234typedef struct { const char *name; // ÁâπÊÄßÂêç const char *value; // ÁâπÊÄßÂÄº} objc_property_attribute_t; Á§∫‰æã‰∏ãÈù¢‰ª£Á†Å‰ºöÁºñËØëÂá∫ÈîôÔºåRuntime CrashËøòÊòØÊ≠£Â∏∏ËæìÂá∫ 1234567891011121314151617181920212223242526272829303132@interface Sark : NSObject@property (nonatomic, copy) NSString *name;@end@implementation Sark- (void)speak{ NSLog(@&quot;my name is %@&quot;, self.name);}@end@interface Test : NSObject@end@implementation Test- (instancetype)init{ self = [super init]; if (self) { id cls = [Sark class]; void *obj = &amp;cls; [(__bridge id)obj speak]; } return self;}@endint main(int argc, const char * argv[]) { @autoreleasepool { [[Test alloc] init]; } return 0;}//ÁªìÊûúÊ≠£Â∏∏ËæìÂá∫2014-11-07 14:08:25.698 Test[1097:57255] my name is obj‰∏∫ÊåáÂêëSark ClassÁöÑÊåáÈíàÔºåÁõ∏ÂΩì‰∫éSarkÁöÑÂÆû‰æãÂØπË±°‰ΩÜÊòØËøòÊòØ‰∏ç‰∏ÄÊ†∑ÔºåÊ†πÊçÆobjc_msgSendÊµÅÁ®ãÔºåobjÊåáÈíàËÉΩÂ§üÂú®ÊñπÊ≥ïÂàóË°®‰∏≠ÊâæÂà∞speakÊñπÊ≥ïÔºåÊâÄ‰ª•ËøêË°åÊ≠£Â∏∏„ÄÇ ‰∏∫‰∫ÜÂæóÂà∞self.nameËÉΩÂ§üËæìÂá∫ÁöÑÂéüÂõ†ÔºåÂèØ‰ª•Âä†ÂÖ•Ë∞ÉËØï‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536- (void)speak{ unsigned int numberOfIvars = 0; Ivar *ivars = class_copyIvarList([self class], &amp;numberOfIvars); for(const Ivar *p = ivars; p &lt; ivars+numberOfIvars; p++) { Ivar const ivar = *p; ptrdiff_t offset = ivar_getOffset(ivar); const char *name = ivar_getName(ivar); NSLog(@&quot;Sark ivar name = %s, offset = %td&quot;, name, offset); } NSLog(@&quot;my name is %p&quot;, &amp;_name); NSLog(@&quot;my name is %@&quot;, *(&amp;_name));}@implementation Test- (instancetype)init{ self = [super init]; if (self) { NSLog(@&quot;Test instance = %@&quot;, self); void *self2 = (__bridge void *)self; NSLog(@&quot;Test instance pointer = %p&quot;, &amp;self2); id cls = [Sark class]; NSLog(@&quot;Class instance address = %p&quot;, cls); void *obj = &amp;cls; NSLog(@&quot;Void *obj = %@&quot;, obj); [(__bridge id)obj speak]; } return self;}@end//ËæìÂá∫2014-11-11 00:56:02.464 Test[10475:1071029] Test instance = 2014-11-11 00:56:02.464 Test[10475:1071029] Test instance pointer = 0x7fff5fbff7c82014-11-11 00:56:02.465 Test[10475:1071029] Class instance address = 0x1000023c82014-11-11 00:56:02.465 Test[10475:1071029] Void *obj = 2014-11-11 00:56:02.465 Test[10475:1071029] Sark ivar name = _name, offset = 82014-11-11 00:56:02.465 Test[10475:1071029] my name is 0x7fff5fbff7c82014-11-11 00:56:02.465 Test[10475:1071029] my name is Sark‰∏≠Propertyname‰ºöË¢´ËΩ¨Êç¢ÊàêivarÂà∞Á±ªÁöÑÁªìÊûÑÈáåÔºåruntime‰ºöËÆ°ÁÆóivarÁöÑÂú∞ÂùÄÂÅèÁßªÊù•ÊâæivarÁöÑÊúÄÁªàÂú∞ÂùÄÔºåÊ†πÊçÆËæìÂá∫ÂèØ‰ª•ÁúãÂá∫Sark classÁöÑÊåáÈíàÂú∞ÂùÄÂä†‰∏äivarÁöÑÂÅèÁßªÈáèÊ≠£Â•ΩË∑üTestÂØπË±°ÊåáÈíàÂú∞ÂùÄ„ÄÇ ÂÖ≥ËÅîÂØπË±°ÂÖ≥ËÅîÂØπË±°ÊòØÂú®ËøêË°åÊó∂Ê∑ªÂä†ÁöÑÁ±ª‰ººÊàêÂëò„ÄÇ 123456//Â∞Ü‰∏Ä‰∏™ÂØπË±°ËøûÊé•Âà∞ÂÖ∂ÂÆÉÂØπË±°static char myKey;objc_setAssociatedObject(self, &amp;myKey, anObject, OBJC_ASSOCIATION_RETAIN);//Ëé∑Âèñ‰∏Ä‰∏™Êñ∞ÁöÑÂÖ≥ËÅîÁöÑÂØπË±°id anObject = objc_getAssociatedObject(self, &amp;myKey);//‰ΩøÁî®objc_removeAssociatedObjectsÂáΩÊï∞ÁßªÈô§‰∏Ä‰∏™ÂÖ≥ËÅîÂØπË±° ÂÆû‰æãÊºîÁ§∫ÂÖ≥ËÅîÂØπË±°‰ΩøÁî® 1234567891011121314151617181920212223242526272829//Âä®ÊÄÅÁöÑÂ∞Ü‰∏Ä‰∏™TapÊâãÂäøÊìç‰ΩúËøûÊé•Âà∞‰ªª‰ΩïUIView‰∏≠„ÄÇ- (void)setTapActionWithBlock:(void (^)(void))block{ UITapGestureRecognizer *gesture = objc_getAssociatedObject(self, &amp;kDTActionHandlerTapGestureKey); if (!gesture) { gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(__handleActionForTapGesture:)]; [self addGestureRecognizer:gesture]; //Â∞ÜÂàõÂª∫ÁöÑÊâãÂäøÂØπË±°Âíåblock‰Ωú‰∏∫ÂÖ≥ËÅîÂØπË±° objc_setAssociatedObject(self, &amp;kDTActionHandlerTapGestureKey, gesture, OBJC_ASSOCIATION_RETAIN); } objc_setAssociatedObject(self, &amp;kDTActionHandlerTapBlockKey, block, OBJC_ASSOCIATION_COPY);}//ÊâãÂäøËØÜÂà´ÂØπË±°ÁöÑtargetÂíåaction- (void)__handleActionForTapGesture:(UITapGestureRecognizer *)gesture{ if (gesture.state == UIGestureRecognizerStateRecognized) { void(^action)(void) = objc_getAssociatedObject(self, &amp;kDTActionHandlerTapBlockKey); if (action) { action(); } }} ÊàêÂëòÂèòÈáèÂíåÂ±ûÊÄßÁöÑÊìç‰ΩúÊñπÊ≥ïÊàêÂëòÂèòÈáè123456// Ëé∑ÂèñÊàêÂëòÂèòÈáèÂêçconst char * ivar_getName ( Ivar v );// Ëé∑ÂèñÊàêÂëòÂèòÈáèÁ±ªÂûãÁºñÁ†Åconst char * ivar_getTypeEncoding ( Ivar v );// Ëé∑ÂèñÊàêÂëòÂèòÈáèÁöÑÂÅèÁßªÈáèptrdiff_t ivar_getOffset ( Ivar v ); Associated Objects123456789101112131415// ËÆæÁΩÆÂÖ≥ËÅîÂØπË±°void objc_setAssociatedObject ( id object, const void *key, id value, objc_AssociationPolicy policy );// Ëé∑ÂèñÂÖ≥ËÅîÂØπË±°id objc_getAssociatedObject ( id object, const void *key );// ÁßªÈô§ÂÖ≥ËÅîÂØπË±°void objc_removeAssociatedObjects ( id object );//‰∏äÈù¢ÊñπÊ≥ï‰ª•ÈîÆÂÄºÂØπÁöÑÂΩ¢ÂºèÂä®ÊÄÅÁöÑÂêëÂØπË±°Ê∑ªÂä†ÔºåËé∑ÂèñÊàñËÄÖÂà†Èô§ÂÖ≥ËÅîÂÄº„ÄÇÂÖ∂‰∏≠ÂÖ≥ËÅîÊîøÁ≠ñÊòØ‰∏ÄÁªÑÊûö‰∏æÂ∏∏Èáè„ÄÇËøô‰∫õÂ∏∏ÈáèÂØπÂ∫îÁùÄÂºïÁî®ÂÖ≥ËÅîÂÄºÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØObjcÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÂºïÁî®ËÆ°Êï∞Êú∫Âà∂„ÄÇenum { OBJC_ASSOCIATION_ASSIGN = 0, OBJC_ASSOCIATION_RETAIN_NONATOMIC = 1, OBJC_ASSOCIATION_COPY_NONATOMIC = 3, OBJC_ASSOCIATION_RETAIN = 01401, OBJC_ASSOCIATION_COPY = 01403}; Â±ûÊÄß12345678// Ëé∑ÂèñÂ±ûÊÄßÂêçconst char * property_getName ( objc_property_t property );// Ëé∑ÂèñÂ±ûÊÄßÁâπÊÄßÊèèËø∞Â≠óÁ¨¶‰∏≤const char * property_getAttributes ( objc_property_t property );// Ëé∑ÂèñÂ±ûÊÄß‰∏≠ÊåáÂÆöÁöÑÁâπÊÄßchar * property_copyAttributeValue ( objc_property_t property, const char *attributeName );// Ëé∑ÂèñÂ±ûÊÄßÁöÑÁâπÊÄßÂàóË°®objc_property_attribute_t * property_copyAttributeList ( objc_property_t property, unsigned int *outCount ); ÂÆû‰æã‰∏§‰∏™Êé•Âè£ÂêåÊ†∑Êï∞ÊçÆ‰∏çÂêåÁöÑÂ≠óÊÆµÂêçÂ§ÑÁêÜ 1234567891011121314151617181920212223242526272829303132333435363738394041424344@interface MyObject: NSObject@property (nonatomic, copy) NSString * name;@property (nonatomic, copy) NSString * status;@end//ËøîÂõûÂ≠óÂÖ∏Êï∞ÊçÆÊúâ‰∏çÂêåÁöÑÂ≠óÊÆµÂêçÔºå‰∏ÄËà¨ÊòØÂÜô‰∏§‰∏™ÊñπÊ≥ïÔºå‰ΩÜÊòØÂ¶ÇÊûúÁÅµÊ¥ªÁî®runtimeÂè™Áî®ÂÜô‰∏Ä‰∏™ÊñπÊ≥ï@{@&quot;name1&quot;: &quot;Âº†‰∏â&quot;, @&quot;status1&quot;: @&quot;start&quot;}@{@&quot;name2&quot;: &quot;Âº†‰∏â&quot;, @&quot;status2&quot;: @&quot;end&quot;}//ÂÆö‰πâ‰∏Ä‰∏™Êò†Â∞ÑÂ≠óÂÖ∏ÔºàÂÖ®Â±ÄÔºâstatic NSMutableDictionary *map = nil;@implementation MyObject+ (void)load{map = [NSMutableDictionary dictionary];map[@&quot;name1&quot;] = @&quot;name&quot;;map[@&quot;status1&quot;] = @&quot;status&quot;;map[@&quot;name2&quot;] = @&quot;name&quot;;map[@&quot;status2&quot;] = @&quot;status&quot;;}@end//‰∏çÂêåÂ≠óÊÆµÊò†Â∞ÑÂà∞MyObjectÁõ∏ÂêåÂ±ûÊÄß‰∏ä- (void)setDataWithDic:(NSDictionary *)dic{ [dic enumerateKeysAndObjectsUsingBlock:^(NSString *key, id obj, BOOL *stop) { NSString *propertyKey = [self propertyForKey:key]; if (propertyKey) { objc_property_t property = class_getProperty([self class], [propertyKey UTF8String]); // TODO: ÈíàÂØπÁâπÊÆäÊï∞ÊçÆÁ±ªÂûãÂÅöÂ§ÑÁêÜ NSString *attributeString = [NSString stringWithCString:property_getAttributes(property) encoding:NSUTF8StringEncoding]; ... [self setValue:obj forKey:propertyKey]; } }];} MethodÂíåÊ∂àÊÅØMethodÂíåÊ∂àÊÅØÁöÑÂü∫Á°ÄÊï∞ÊçÆÁ±ªÂûãSELÈÄâÊã©Âô®Ë°®Á§∫‰∏Ä‰∏™ÊñπÊ≥ïÁöÑselectorÁöÑÊåáÈíàÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Method‰∏≠ÁöÑIDÁ±ªÂûã 123456typedef struct objc_selector *SEL;//objc_selectorÁºñËØëÊó∂‰ºöÊ†πÊçÆÊØè‰∏™ÊñπÊ≥ïÂêçÂ≠óÂèÇÊï∞Â∫èÂàóÁîüÊàêÂîØ‰∏ÄÊ†áËØÜSEL sel1 = @selector(method1);NSLog(@&quot;sel : %p&quot;, sel1);ËæìÂá∫2014-10-30 18:40:07.518 RuntimeTest[52734:466626] sel : 0x100002d72 Ëé∑ÂèñSELÁöÑ‰∏â‰∏™ÊñπÊ≥ïÔºö sel_registerNameÂáΩÊï∞ Objective-CÁºñËØëÂô®Êèê‰æõÁöÑ@selector() NSSelectorFromString()ÊñπÊ≥ï IMPÊòØÂáΩÊï∞ÊåáÈíàÔºåÊåáÂêëÊñπÊ≥ïÁöÑÈ¶ñÂú∞ÂùÄÔºåÈÄöËøáSELÂø´ÈÄüÂæóÂà∞ÂØπÂ∫îIMPÔºåËøôÊó∂ÂèØ‰ª•Ë∑≥ËøáRuntimeÊ∂àÊÅØ‰º†ÈÄíÊú∫Âà∂Áõ¥Êé•ÊâßË°åÂáΩÊï∞ÔºåÊØîÁõ¥Êé•ÂêëÂØπË±°ÂèëÊ∂àÊÅØÈ´òÊïà„ÄÇÂÆö‰πâÂ¶Ç‰∏ã 1id (*IMP)(id, SEL, ...) MethodÁî®‰∫éË°®Á§∫Á±ªÂÆö‰πâ‰∏≠ÁöÑÊñπÊ≥ï 1234567typedef struct objc_method *Method;struct objc_method { SEL method_name OBJC2_UNAVAILABLE; // ÊñπÊ≥ïÂêç char *method_types OBJC2_UNAVAILABLE; //ÊòØ‰∏™charÊåáÈíàÔºåÂ≠òÂÇ®ÁùÄÊñπÊ≥ïÁöÑÂèÇÊï∞Á±ªÂûãÂíåËøîÂõûÂÄºÁ±ªÂûã IMP method_imp OBJC2_UNAVAILABLE; // ÊñπÊ≥ïÂÆûÁé∞ÔºåÂáΩÊï∞ÊåáÈíà} MethodÁõ∏ÂÖ≥Êìç‰ΩúÂáΩÊï∞Method1234567891011121314151617181920212223242526// Ë∞ÉÁî®ÊåáÂÆöÊñπÊ≥ïÁöÑÂÆûÁé∞ÔºåËøîÂõûÁöÑÊòØÊñπÊ≥ïÂÆûÁé∞Êó∂ÁöÑËøîÂõûÔºåÂèÇÊï∞receiver‰∏çËÉΩ‰∏∫Á©∫ÔºåËøô‰∏™ÊØîmethod_getImplementationÂíåmethod_getNameÂø´id method_invoke ( id receiver, Method m, ... );// Ë∞ÉÁî®ËøîÂõû‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑÁöÑÊñπÊ≥ïÁöÑÂÆûÁé∞void method_invoke_stret ( id receiver, Method m, ... );// Ëé∑ÂèñÊñπÊ≥ïÂêçÔºåÂ∏åÊúõËé∑ÂæóÊñπÊ≥ïÊòéÁöÑCÂ≠óÁ¨¶‰∏≤Ôºå‰ΩøÁî®sel_getName(method_getName(method))SEL method_getName ( Method m );// ËøîÂõûÊñπÊ≥ïÁöÑÂÆûÁé∞IMP method_getImplementation ( Method m );// Ëé∑ÂèñÊèèËø∞ÊñπÊ≥ïÂèÇÊï∞ÂíåËøîÂõûÂÄºÁ±ªÂûãÁöÑÂ≠óÁ¨¶‰∏≤const char * method_getTypeEncoding ( Method m );// Ëé∑ÂèñÊñπÊ≥ïÁöÑËøîÂõûÂÄºÁ±ªÂûãÁöÑÂ≠óÁ¨¶‰∏≤char * method_copyReturnType ( Method m );// Ëé∑ÂèñÊñπÊ≥ïÁöÑÊåáÂÆö‰ΩçÁΩÆÂèÇÊï∞ÁöÑÁ±ªÂûãÂ≠óÁ¨¶‰∏≤char * method_copyArgumentType ( Method m, unsigned int index );// ÈÄöËøáÂºïÁî®ËøîÂõûÊñπÊ≥ïÁöÑËøîÂõûÂÄºÁ±ªÂûãÂ≠óÁ¨¶‰∏≤void method_getReturnType ( Method m, char *dst, size_t dst_len );// ËøîÂõûÊñπÊ≥ïÁöÑÂèÇÊï∞ÁöÑ‰∏™Êï∞unsigned int method_getNumberOfArguments ( Method m );// ÈÄöËøáÂºïÁî®ËøîÂõûÊñπÊ≥ïÊåáÂÆö‰ΩçÁΩÆÂèÇÊï∞ÁöÑÁ±ªÂûãÂ≠óÁ¨¶‰∏≤void method_getArgumentType ( Method m, unsigned int index, char *dst, size_t dst_len );// ËøîÂõûÊåáÂÆöÊñπÊ≥ïÁöÑÊñπÊ≥ïÊèèËø∞ÁªìÊûÑ‰Ωìstruct objc_method_description * method_getDescription ( Method m );// ËÆæÁΩÆÊñπÊ≥ïÁöÑÂÆûÁé∞IMP method_setImplementation ( Method m, IMP imp );// ‰∫§Êç¢‰∏§‰∏™ÊñπÊ≥ïÁöÑÂÆûÁé∞void method_exchangeImplementations ( Method m1, Method m2 ); MethodÁöÑSEL12345678// ËøîÂõûÁªôÂÆöÈÄâÊã©Âô®ÊåáÂÆöÁöÑÊñπÊ≥ïÁöÑÂêçÁß∞const char * sel_getName ( SEL sel );// Âú®Objective-C RuntimeÁ≥ªÁªü‰∏≠Ê≥®ÂÜå‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂ∞ÜÊñπÊ≥ïÂêçÊò†Â∞ÑÂà∞‰∏Ä‰∏™ÈÄâÊã©Âô®ÔºåÂπ∂ËøîÂõûËøô‰∏™ÈÄâÊã©Âô®SEL sel_registerName ( const char *str );// Âú®Objective-C RuntimeÁ≥ªÁªü‰∏≠Ê≥®ÂÜå‰∏Ä‰∏™ÊñπÊ≥ïSEL sel_getUid ( const char *str );// ÊØîËæÉ‰∏§‰∏™ÈÄâÊã©Âô®BOOL sel_isEqual ( SEL lhs, SEL rhs ); MethodË∞ÉÁî®ÊµÅÁ®ãÊ∂àÊÅØÂáΩÊï∞ÔºåObjc‰∏≠ÂèëÈÄÅÊ∂àÊÅØÊòØÁî®‰∏≠Êã¨Âè∑ÊääÊé•Êî∂ËÄÖÂíåÊ∂àÊÅØÊã¨Ëµ∑Êù•ÔºåÂè™Âà∞ËøêË°åÊó∂Êâç‰ºöÊääÊ∂àÊÅØÂíåÊñπÊ≥ïÂÆûÁé∞ÁªëÂÆö„ÄÇ 12//Ëøô‰∏™ÂáΩÊï∞Â∞ÜÊ∂àÊÅØÊé•Êî∂ËÄÖÂíåÊñπÊ≥ïÂêç‰Ωú‰∏∫Âü∫Á°ÄÂèÇÊï∞„ÄÇÊ∂àÊÅØÂèëÈÄÅÁªô‰∏Ä‰∏™ÂØπË±°Êó∂Ôºåobjc_msgSendÈÄöËøáÂØπË±°ÁöÑisaÊåáÈíàËé∑ÂæóÁ±ªÁöÑÁªìÊûÑ‰ΩìÔºåÂÖàÂú®CacheÈáåÊâæÔºåÊâæÂà∞Â∞±ÊâßË°åÔºåÊ≤°ÊâæÂà∞Â∞±Âú®ÂàÜÂèëÂàóË°®ÈáåÊü•ÊâæÊñπÊ≥ïÁöÑselectorÔºåÊ≤°ÊâæÂà∞Â∞±ÈÄöËøáobjc_msgSendÁªìÊûÑ‰Ωì‰∏≠ÊåáÂêëÁà∂Á±ªÁöÑÊåáÈíàÊâæÂà∞Áà∂Á±ªÔºåÁÑ∂ÂêéÂú®Áà∂Á±ªÂàÜÂèëÂàóË°®ÊâæÔºåÁõ¥Âà∞root classÔºàNSObjectÔºâ„ÄÇobjc_msgSend(receiver, selector, arg1, arg2, ...) ÁºñËØëÂô®‰ºöÊ†πÊçÆÊÉÖÂÜµÂú®objc_msgSendÔºåobjc_msgSend_stretÔºåobjc_msgSendSuperÔºåÊàñobjc_msgSendSuper_stretÂõõ‰∏™ÊñπÊ≥ï‰∏≠ÈÄâ‰∏Ä‰∏™Ë∞ÉÁî®„ÄÇÂ¶ÇÊûúÊòØ‰º†ÈÄíÁªôË∂ÖÁ±ªÂ∞±‰ºöË∞ÉÁî®Â∏¶superÁöÑÂáΩÊï∞ÔºåÂ¶ÇÊûúËøîÂõûÊòØÊï∞ÊçÆÁªìÊûÑËÄå‰∏çÊòØ‰∏Ä‰∏™ÂÄºÂ∞±‰ºöË∞ÉÁî®Â∏¶stretÁöÑÂáΩÊï∞„ÄÇÂú®i386Âπ≥Âè∞ËøîÂõûÁ±ªÂûã‰∏∫ÊµÆÁÇπÊ∂àÊÅØ‰ºöË∞ÉÁî®objc_msgSend_fpretÂáΩÊï∞„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºåNSStringFromClass([self class])ÂíåNSStringFromClass([super class])ËæìÂá∫ÈÉΩÊòØselfÁöÑÁ±ªÂêç„ÄÇÂéüÂõ†Â¶Ç‰∏ã Ë∞ÉÁî®[self class]ÁöÑÊó∂ÂÄôÂÖàË∞ÉÁî®objc_msgSendÔºåÂèëÁé∞selfÊ≤°ÊúâclassËøô‰∏™ÊñπÊ≥ïÔºåÁÑ∂ÂêéÁî®objc_msgSendSuperÂ∞±ÂéªÁà∂Á±ªÊâæÔºåËøòÊòØÊ≤°ÊúâÔºåÁªßÁª≠Áî®objc_msgSendSuperÂà∞NSObjectÈáåÊâæÔºåÁªìÊûúÊâæÂà∞‰∫ÜÔºåÊü•ÊâæNSObject‰∏≠classÊñπÊ≥ïÁöÑruntimeÊ∫êÁ†Å‰ºöÂèëÁé∞ÂÆÉ‰ºöËøîÂõûselfÔºåÊâÄ‰ª•[self class]‰ºöËøîÂõûselfÊú¨Ë∫´„ÄÇÂêåÁêÜ[super class]Áõ∏ÂØπÂâçËÄÖÂ∞±ÊòØÂ∞ë‰∫Üobjc_msgSendËøô‰∏ÄÊ≠•ÔºåÊúÄÂêé‰πü‰ºöÊâæÂà∞NSObjectÊ†πÁ±ªÈáåÁöÑclassÊñπÊ≥ïÔºåËá™ÁÑ∂ÁªìÊûú‰πüÊòØËøîÂõû‰∫Üself„ÄÇ Method‰∏≠ÁöÑÊé•Êî∂Ê∂àÊÅØÂØπË±°ÂèÇÊï∞ÂíåÊñπÊ≥ïÈÄâÊã©Âô®ÂèÇÊï∞Âú®Method‰∏≠‰ΩøÁî®selfÂÖ≥ÈîÆÂ≠óÊù•ÂºïÁî®ÂÆû‰æãÊú¨Ë∫´ÔºåselfÁöÑÂÜÖÂÆπÂç≥Êé•Êî∂Ê∂àÊÅØÁöÑÂØπË±°ÊòØÂú®MethodËøêË°åÊó∂Ë¢´‰º†ÂÖ•ÁöÑÂêåÊó∂ËøòÊúâÊñπÊ≥ïÈÄâÊã©Âô®„ÄÇ Ëé∑ÂèñMethodÂú∞ÂùÄ‰ΩøÁî®NSObjectÊèê‰æõÁöÑmethodForSelector:ÊñπÊ≥ïÂèØ‰ª•Ëé∑ÂæóMethodÁöÑÊåáÈíàÔºåÈÄöËøáÊåáÈíàË∞ÉÁî®ÂÆûÁé∞‰ª£Á†Å„ÄÇ 123456void (*setter)(id, SEL, BOOL);int i;setter = (void (*)(id, SEL, BOOL))[target methodForSelector:@selector(setFilled:)];for ( i = 0 ; i &lt; 1000 ; i++ ) setter(targetList[i], @selector(setFilled:), YES); MethodËΩ¨ÂèëÂ¶ÇÊûú‰ΩøÁî®[object message]Ë∞ÉÁî®ÊñπÊ≥ïÔºåobjectÊó†Ê≥ïÂìçÂ∫îmessageÊó∂Â∞±‰ºöÊä•Èîô„ÄÇÁî®performSelector‚Ä¶Ë∞ÉÁî®Â∞±Ë¶ÅÁ≠âÂà∞ËøêË°åÊó∂ÊâçÁ°ÆÂÆöÊòØÂê¶ËÉΩÊé•ÂèóÔºå‰∏çËÉΩÊâçÂ¥©Ê∫É„ÄÇ 1234//ÂÖàË∞ÉÁî®respondsToSelector:Êù•Âà§Êñ≠‰∏Ä‰∏ãif ([self respondsToSelector:@selector(method)]) { [self performSelector:@selector(method)];} MethodËΩ¨ÂèëÊú∫Âà∂ÂàÜ‰∏∫‰∏âÊ≠•Ôºö Âä®ÊÄÅÊñπÊ≥ïËß£Êûê1234567891011void functionForMethod1(id self, SEL _cmd) { NSLog(@&quot;%@, %p&quot;, self, _cmd);}+ (BOOL)resolveInstanceMethod:(SEL)sel { NSString *selectorString = NSStringFromSelector(sel); if ([selectorString isEqualToString:@&quot;method1&quot;]) { class_addMethod(self.class, @selector(method1), (IMP)functionForMethod1, &quot;@:&quot;); } return [super resolveInstanceMethod:sel];} ÂèØ‰ª•Âä®ÊÄÅÁöÑÊèê‰æõ‰∏Ä‰∏™ÊñπÊ≥ïÁöÑÂÆûÁé∞„ÄÇ‰æãÂ¶ÇÂèØ‰ª•Áî®@dynamicÂÖ≥ÈîÆÂ≠óÂú®Á±ªÁöÑÂÆûÁé∞Êñá‰ª∂‰∏≠ÂÜô‰∏™Â±ûÊÄß 123456789101112131415161718//Ëøô‰∏™Ë°®Êòé‰ºö‰∏∫Ëøô‰∏™Â±ûÊÄßÂä®ÊÄÅÊèê‰æõset getÊñπÊ≥ïÔºåÂ∞±ÊòØÁºñËØëÂô®ÊòØ‰∏ç‰ºöÈªòËÆ§ÁîüÊàêsetPropertyName:ÂíåpropertyNameÊñπÊ≥ïÔºåÈúÄË¶ÅÂä®ÊÄÅÊèê‰æõ„ÄÇÂèØ‰ª•ÈÄöËøáÈáçËΩΩresolveInstanceMethod:ÂíåresolveClassMethod:ÊñπÊ≥ïÂàÜÂà´Ê∑ªÂä†ÂÆû‰æãÊñπÊ≥ïÂíåÁ±ªÊñπÊ≥ïÂÆûÁé∞„ÄÇÊúÄÂêéÁî®class_addMethodÂÆåÊàêÊ∑ªÂä†ÁâπÂÆöÊñπÊ≥ïÂÆûÁé∞ÁöÑÊìç‰Ωú@dynamic propertyName;//void dynamicMethodIMP(id self, SEL _cmd) { // implementation ....}@implementation MyClass+ (BOOL)resolveInstanceMethod:(SEL)aSEL{ if (aSEL == @selector(resolveThisMethodDynamically)) { //v@:Ë°®Á§∫ËøîÂõûÂÄºÂíåÂèÇÊï∞ÔºåÂèØ‰ª•Âú®ËãπÊûúÂÆòÁΩëÊü•ÁúãType EncodingÁõ∏ÂÖ≥ÊñáÊ°£ https://developer.apple.com/library/mac/DOCUMENTATION/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html class_addMethod([self class], aSEL, (IMP) dynamicMethodIMP, &quot;v@:&quot;); return YES; } return [super resolveInstanceMethod:aSEL];}@end ÈáçÂÆöÂêëÊé•Êî∂ËÄÖÂ¶ÇÊûúÊó†Ê≥ïÂ§ÑÁêÜÊ∂àÊÅØ‰ºöÁªßÁª≠Ë∞ÉÁî®‰∏ãÈù¢ÁöÑÊñπÊ≥ïÔºåÂêåÊó∂Âú®ËøôÈáåRuntimeÁ≥ªÁªüÂÆûÈôÖ‰∏äÊòØÁªô‰∫Ü‰∏Ä‰∏™ÊõøÊç¢Ê∂àÊÅØÊé•Êî∂ËÄÖÁöÑÊú∫‰ºöÔºå‰ΩÜÊòØÊõøÊç¢ÁöÑÂØπË±°ÂçÉ‰∏á‰∏çË¶ÅÊòØselfÔºåÈÇ£Ê†∑‰ºöËøõÂÖ•Ê≠ªÂæ™ÁéØ„ÄÇ 1234567- (id)forwardingTargetForSelector:(SEL)aSelector{ if(aSelector == @selector(mysteriousMethod:)){ return alternateObject; } return [super forwardingTargetForSelector:aSelector];} ‰ΩøÁî®Ëøô‰∏™ÊñπÊ≥ïÈÄöÂ∏∏Âú®ÂØπË±°ÂÜÖÈÉ®ÔºåÂ¶Ç‰∏ã 1234567891011121314151617181920212223242526272829303132333435363738394041424344@interface SUTRuntimeMethodHelper : NSObject- (void)method2;@end@implementation SUTRuntimeMethodHelper- (void)method2 { NSLog(@&quot;%@, %p&quot;, self, _cmd);}@end#pragma mark -@interface SUTRuntimeMethod () { SUTRuntimeMethodHelper *_helper;}@end@implementation SUTRuntimeMethod+ (instancetype)object { return [[self alloc] init];}- (instancetype)init { self = [super init]; if (self != nil) { _helper = [[SUTRuntimeMethodHelper alloc] init]; } return self;}- (void)test { [self performSelector:@selector(method2)];}- (id)forwardingTargetForSelector:(SEL)aSelector { NSLog(@&quot;forwardingTargetForSelector&quot;); NSString *selectorString = NSStringFromSelector(aSelector); // Â∞ÜÊ∂àÊÅØËΩ¨ÂèëÁªô_helperÊù•Â§ÑÁêÜ if ([selectorString isEqualToString:@&quot;method2&quot;]) { return _helper; } return [super forwardingTargetForSelector:aSelector];}@end ÊúÄÂêéËøõË°åËΩ¨ÂèëÂ¶ÇÊûú‰ª•‰∏ä‰∏§ÁßçÈÉΩÊ≤°Ê≥ïÂ§ÑÁêÜÊú™Áü•Ê∂àÊÅØÂ∞±ÈúÄË¶ÅÂÆåÊï¥Ê∂àÊÅØËΩ¨Âèë‰∫Ü„ÄÇË∞ÉÁî®Â¶Ç‰∏ãÊñπÊ≥ï 1234//Ëøô‰∏ÄÊ≠•ÊòØÊúÄÂêéÊú∫‰ºöÂ∞ÜÊ∂àÊÅØËΩ¨ÂèëÁªôÂÖ∂ÂÆÉÂØπË±°ÔºåÂØπË±°‰ºöÂ∞ÜÊú™Â§ÑÁêÜÁöÑÊ∂àÊÅØÁõ∏ÂÖ≥ÁöÑselectorÔºåtargetÂíåÂèÇÊï∞ÈÉΩÂ∞ÅË£ÖÂú®anInvocation‰∏≠„ÄÇforwardInvocation:ÂÉèÊú™Áü•Ê∂àÊÅØÂàÜÂèë‰∏≠ÂøÉÔºåÂ∞ÜÊú™Áü•Ê∂àÊÅØËΩ¨ÂèëÁªôÂÖ∂ÂÆÉÂØπË±°„ÄÇÊ≥®ÊÑèÁöÑÊòØforwardInvocation:ÊñπÊ≥ïÂè™ÊúâÂú®Ê∂àÊÅØÊé•Êî∂ÂØπË±°Êó†Ê≥ïÊ≠£Â∏∏ÂìçÂ∫îÊ∂àÊÅØÊó∂ÊâçË¢´Ë∞ÉÁî®„ÄÇ- (void)forwardInvocation:(NSInvocation *)anInvocation//ÂøÖÈ°ªÈáçÂÜôËøô‰∏™ÊñπÊ≥ïÔºåÊ∂àÊÅØËΩ¨Âèë‰ΩøÁî®Ëøô‰∏™ÊñπÊ≥ïËé∑ÂæóÁöÑ‰ø°ÊÅØÂàõÂª∫NSInvocationÂØπË±°„ÄÇ- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector ËåÉ‰æã 12345678910111213141516- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector { NSMethodSignature *signature = [super methodSignatureForSelector:aSelector]; if (!signature) { if ([SUTRuntimeMethodHelper instancesRespondToSelector:aSelector]) { signature = [SUTRuntimeMethodHelper instanceMethodSignatureForSelector:aSelector]; } } return signature;}- (void)forwardInvocation:(NSInvocation *)anInvocation { if ([SUTRuntimeMethodHelper instancesRespondToSelector:anInvocation.selector]) { [anInvocation invokeWithTarget:_helper]; }} ËΩ¨ÂèëÂíåÂ§öÁªßÊâøËΩ¨ÂèëÂíåÁªßÊâøÁõ∏‰ººÔºå‰∏Ä‰∏™ObjectÊääÊ∂àÊÅØËΩ¨ÂèëÂá∫ÂéªÂ∞±Â•ΩÂÉèÂÆÉÁªßÊâø‰∫ÜÂè¶‰∏Ä‰∏™ObjectÁöÑÊñπÊ≥ï‰∏ÄÊ†∑„ÄÇ MessageÊ∂àÊÅØÁöÑÂèÇËÄÉÊñáÁ´† Message forwarding https://mikeash.com/pyblog/friday-qa-2009-03-27-objective-c-message-forwarding.html Objective-c messaging https://www.mikeash.com/pyblog/friday-qa-2009-03-20-objective-c-messaging.html The faster objc_msgSend https://www.mulle-kybernetik.com/artikel/Optimization/opti-9.html Method SwizzlingÊòØÊîπÂèò‰∏Ä‰∏™selectorÂÆûÈôÖÂÆûÁé∞ÁöÑÊäÄÊúØÔºåÂèØ‰ª•Âú®ËøêË°åÊó∂‰øÆÊîπselectorÂØπÂ∫îÁöÑÂáΩÊï∞Êù•‰øÆÊîπMethodÁöÑÂÆûÁé∞„ÄÇÂâçÈù¢ÁöÑÊ∂àÊÅØËΩ¨ÂèëÂæàÂº∫Â§ßÔºå‰ΩÜÊòØÈúÄË¶ÅËÉΩÂ§ü‰øÆÊîπÂØπÂ∫îÁ±ªÁöÑÊ∫êÁ†ÅÔºå‰ΩÜÊòØÂØπ‰∫éÊúâ‰∫õÁ±ªÊó†Ê≥ï‰øÆÊîπÂÖ∂Ê∫êÁ†ÅÊó∂ÂèàË¶ÅÊõ¥ÊîπÂÖ∂ÊñπÊ≥ïÂÆûÁé∞Êó∂ÂèØ‰ª•‰ΩøÁî®Method SwizzlingÔºåÈÄöËøáÈáçÊñ∞Êò†Â∞ÑÊñπÊ≥ïÊù•ËææÂà∞ÁõÆÁöÑÔºå‰ΩÜÊòØË∑üÊ∂àÊÅØËΩ¨ÂèëÊØîËµ∑Êù•Ë∞ÉËØï‰ºöÂõ∞Èöæ„ÄÇ ‰ΩøÁî®method swizzlingÈúÄË¶ÅÊ≥®ÊÑèÁöÑÈóÆÈ¢ò SwizzlingÂ∫îËØ•ÊÄªÂú®+load‰∏≠ÊâßË°åÔºöObjective-CÂú®ËøêË°åÊó∂‰ºöËá™Âä®Ë∞ÉÁî®Á±ªÁöÑ‰∏§‰∏™ÊñπÊ≥ï+loadÂíå+initialize„ÄÇ+load‰ºöÂú®Á±ªÂàùÂßãÂä†ËΩΩÊó∂Ë∞ÉÁî®ÔºåÂíå+initializeÊØîËæÉ+loadËÉΩ‰øùËØÅÂú®Á±ªÁöÑÂàùÂßãÂåñËøáÁ®ã‰∏≠Ë¢´Âä†ËΩΩ SwizzlingÂ∫îËØ•ÊÄªÊòØÂú®dispatch_once‰∏≠ÊâßË°åÔºöswizzling‰ºöÊîπÂèòÂÖ®Â±ÄÁä∂ÊÄÅÔºåÊâÄ‰ª•Âú®ËøêË°åÊó∂ÈááÂèñ‰∏Ä‰∫õÈ¢ÑÈò≤Êé™ÊñΩÔºå‰ΩøÁî®dispatch_onceÂ∞±ËÉΩÂ§üÁ°Æ‰øù‰ª£Á†Å‰∏çÁÆ°ÊúâÂ§öÂ∞ëÁ∫øÁ®ãÈÉΩÂè™Ë¢´ÊâßË°å‰∏ÄÊ¨°„ÄÇËøôÂ∞ÜÊàê‰∏∫method swizzlingÁöÑÊúÄ‰Ω≥ÂÆûË∑µ„ÄÇ SelectorÔºåMethodÂíåImplementationÔºöËøôÂá†‰∏™‰πãÈó¥ÂÖ≥Á≥ªÂèØ‰ª•ËøôÊ†∑ÁêÜËß£Ôºå‰∏Ä‰∏™Á±ªÁª¥Êä§‰∏Ä‰∏™ËøêË°åÊó∂ÂèØÊé•Êî∂ÁöÑÊ∂àÊÅØÂàÜÂèëË°®ÔºåÂàÜÂèëË°®‰∏≠ÊØè‰∏™ÂÖ•Âè£ÊòØ‰∏Ä‰∏™MethodÔºåÂÖ∂‰∏≠keyÊòØ‰∏Ä‰∏™ÁâπÂÆöÁöÑÂêçÁß∞ÔºåÂèäSELÔºå‰∏éÂÖ∂ÂØπÂ∫îÁöÑÂÆûÁé∞ÊòØIMPÂç≥ÊåáÂêëÂ∫ïÂ±ÇCÂáΩÊï∞ÁöÑÊåáÈíà„ÄÇ ‰∏æ‰æãËØ¥ÊòéÂ¶Ç‰Ωï‰ΩøÁî®Method SwizzlingÂØπ‰∏Ä‰∏™Á±ª‰∏≠Ê≥®ÂÖ•‰∏Ä‰∫õÊàë‰ª¨ÁöÑÊñ∞ÁöÑÊìç‰Ωú„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142#import &lt;objc/runtime.h&gt;@implementation UIViewController (Tracking)+ (void)load { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ Class class = [self class]; // When swizzling a class method, use the following: // Class class = object_getClass((id)self); //ÈÄöËøámethod swizzling‰øÆÊîπ‰∫ÜUIViewControllerÁöÑ@selector(viewWillAppear:)ÁöÑÊåáÈíà‰ΩøÂÖ∂ÊåáÂêë‰∫ÜËá™ÂÆö‰πâÁöÑxxx_viewWillAppear SEL originalSelector = @selector(viewWillAppear:); SEL swizzledSelector = @selector(xxx_viewWillAppear:); Method originalMethod = class_getInstanceMethod(class, originalSelector); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); //Â¶ÇÊûúÁ±ª‰∏≠‰∏çÂ≠òÂú®Ë¶ÅÊõøÊç¢ÁöÑÊñπÊ≥ïÔºåÂ∞±ÂÖàÁî®class_addMethodÂíåclass_replaceMethodÂáΩÊï∞Ê∑ªÂä†ÂíåÊõøÊç¢‰∏§‰∏™ÊñπÊ≥ïÂÆûÁé∞„ÄÇ‰ΩÜÂ¶ÇÊûúÂ∑≤ÁªèÊúâ‰∫ÜË¶ÅÊõøÊç¢ÁöÑÊñπÊ≥ïÔºåÂ∞±Ë∞ÉÁî®method_exchangeImplementationsÂáΩÊï∞‰∫§Êç¢‰∏§‰∏™ÊñπÊ≥ïÁöÑImplementation„ÄÇ if (didAddMethod) { class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); } else { method_exchangeImplementations(originalMethod, swizzledMethod); } });}#pragma mark - Method Swizzling- (void)xxx_viewWillAppear:(BOOL)animated { [self xxx_viewWillAppear:animated]; NSLog(@&quot;viewWillAppear: %@&quot;, self);}@end method_exchangeImplementationsÂÅöÁöÑ‰∫ãÊÉÖÂíåÂ¶Ç‰∏ã‰ª£Á†ÅÊòØ‰∏ÄÊ†∑ÁöÑ 1234IMP imp1 = method_getImplementation(m1);IMP imp2 = method_getImplementation(m2);method_setImplementation(m1, imp2);method_setImplementation(m2, imp1); Âè¶‰∏ÄÁßçMethod SwizzlingÁöÑÂÆûÁé∞ 123456789101112131415- (void)replacementReceiveMessage:(const struct BInstantMessage *)arg1 { NSLog(@&quot;arg1 is %@&quot;, arg1); [self replacementReceiveMessage:arg1];}+ (void)load { SEL originalSelector = @selector(ReceiveMessage:); SEL overrideSelector = @selector(replacementReceiveMessage:); Method originalMethod = class_getInstanceMethod(self, originalSelector); Method overrideMethod = class_getInstanceMethod(self, overrideSelector); if (class_addMethod(self, originalSelector, method_getImplementation(overrideMethod), method_getTypeEncoding(overrideMethod))) { class_replaceMethod(self, overrideSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); } else { method_exchangeImplementations(originalMethod, overrideMethod); }} ËøôÈáåÊúâÂá†‰∏™ÂÖ≥‰∫éMethod SwizzlingÁöÑËµÑÊ∫êÂèØ‰ª•ÂèÇËÄÉ How do I implement method swizzling? https://stackoverflow.com/questions/5371601/how-do-i-implement-method-swizzling Method Swizzling https://nshipster.com/method-swizzling/ What are the Dangers of Method Swizzling in Objective C? https://stackoverflow.com/questions/5339276/what-are-the-dangers-of-method-swizzling-in-objective-c JRSwizzle https://github.com/rentzsch/jrswizzle ProtocolÂíåCategoryÂü∫Á°ÄÊï∞ÊçÆÁ±ªÂûãCategoryÊåáÂêëÂàÜÁ±ªÁöÑÁªìÊûÑ‰ΩìÁöÑÊåáÈíà 123456789typedef struct objc_category *Category;struct objc_category { char *category_name OBJC2_UNAVAILABLE; // ÂàÜÁ±ªÂêç char *class_name OBJC2_UNAVAILABLE; // ÂàÜÁ±ªÊâÄÂ±ûÁöÑÁ±ªÂêç struct objc_method_list *instance_methods OBJC2_UNAVAILABLE; // ÂÆû‰æãÊñπÊ≥ïÂàóË°® struct objc_method_list *class_methods OBJC2_UNAVAILABLE; // Á±ªÊñπÊ≥ïÂàóË°®ÔºåMeta ClassÊñπÊ≥ïÂàóË°®ÁöÑÂ≠êÈõÜ struct objc_protocol_list *protocols OBJC2_UNAVAILABLE; // ÂàÜÁ±ªÊâÄÂÆûÁé∞ÁöÑÂçèËÆÆÂàóË°®} CategoryÈáåÈù¢ÁöÑÊñπÊ≥ïÂä†ËΩΩËøáÁ®ãÔºåobjcÊ∫êÁ†Å‰∏≠ÊâæÂà∞objc-os.mmÔºåÂáΩÊï∞_objc_initÂ∞±ÊòØruntimeÁöÑÂä†ËΩΩÂÖ•Âè£Áî±libSystemË∞ÉÁî®ÔºåÂºÄÂßãÂàùÂßãÂåñÔºå‰πãÂêéobjc-runtime-new.mmÈáåÁöÑmap_images‰ºöÂä†ËΩΩmapÂà∞ÂÜÖÂ≠òÔºå_read_imagesÂºÄÂßãÂàùÂßãÂåñËøô‰∏™mapÔºåËøôÊó∂‰ºöloadÊâÄÊúâClassÔºåProtocolÂíåCategoryÔºåNSObjectÁöÑ+loadÊñπÊ≥ïÂ∞±ÊòØËøô‰∏™Êó∂ÂÄôË∞ÉÁî®ÁöÑ„ÄÇ‰∏ãÈù¢ÊòØÂä†ËΩΩ‰ª£Á†Å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172// Discover categories.for (EACH_HEADER) { category_t **catlist = _getObjc2CategoryList(hi, &amp;count); for (i = 0; i &lt; count; i++) { category_t *cat = catlist[i]; Class cls = remapClass(cat-&gt;cls); if (!cls) { // Category&apos;s target class is missing (probably weak-linked). // Disavow any knowledge of this category. catlist[i] = nil; if (PrintConnecting) { _objc_inform(&quot;CLASS: IGNORING category \\?\\?\\?(%s) %p with &quot; &quot;missing weak-linked target class&quot;, cat-&gt;name, cat); } continue; } // Process this category. // First, register the category with its target class. // Then, rebuild the class&apos;s method lists (etc) if // the class is realized. BOOL classExists = NO; if (cat-&gt;instanceMethods || cat-&gt;protocols || cat-&gt;instanceProperties) { addUnattachedCategoryForClass(cat, cls, hi); if (cls-&gt;isRealized()) { remethodizeClass(cls); classExists = YES; } if (PrintConnecting) { _objc_inform(&quot;CLASS: found category -%s(%s) %s&quot;, cls-&gt;nameForLogging(), cat-&gt;name, classExists ? &quot;on existing class&quot; : &quot;&quot;); } } if (cat-&gt;classMethods || cat-&gt;protocols /* || cat-&gt;classProperties */) { addUnattachedCategoryForClass(cat, cls-&gt;ISA(), hi); if (cls-&gt;ISA()-&gt;isRealized()) { remethodizeClass(cls-&gt;ISA()); } if (PrintConnecting) { _objc_inform(&quot;CLASS: found category +%s(%s)&quot;, cls-&gt;nameForLogging(), cat-&gt;name); } } }}//Ë∞ÉÁî®remethodizeClassÊñπÊ≥ïÔºåÂú®ÂÖ∂ÂÆûÁé∞ÈáåË∞ÉÁî®attachCategoryMethodsstatic voidattachCategoryMethods(Class cls, category_list *cats, bool flushCaches){ if (!cats) return; if (PrintReplacedMethods) printReplacements(cls, cats); bool isMeta = cls-&gt;isMetaClass(); method_list_t **mlists = (method_list_t **) _malloc_internal(cats-&gt;count * sizeof(*mlists)); // Count backwards through cats to get newest categories first int mcount = 0; int i = cats-&gt;count; BOOL fromBundle = NO; while (i--) { method_list_t *mlist = cat_method_list(cats-&gt;list[i].cat, isMeta); if (mlist) { mlists[mcount++] = mlist; fromBundle |= cats-&gt;list[i].fromBundle; } } attachMethodLists(cls, mlists, mcount, NO, fromBundle, flushCaches); _free_internal(mlists);} Á§∫‰æãÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†Å‰ºöÁºñËØëÈîôËØØÔºåRuntime CrashËøòÊòØ‰ºöÊ≠£Â∏∏ËæìÂá∫ 12345678910111213141516171819@interface NSObject (Sark)+ (void)foo;@end@implementation NSObject (Sark)- (void)foo{ NSLog(@&quot;IMP: -[NSObject(Sark) foo]&quot;);}@endint main(int argc, const char * argv[]) { @autoreleasepool { [NSObject foo]; [[NSObject new] foo]; } return 0;}//ÁªìÊûúÔºåÊ≠£Â∏∏ËæìÂá∫ÁªìÊûúÂ¶Ç‰∏ã2014-11-06 13:11:46.694 Test[14872:1110786] IMP: -[NSObject(Sark) foo]2014-11-06 13:11:46.695 Test[14872:1110786] IMP: -[NSObject(Sark) foo] objc runtimeÂä†ËΩΩÂêéNSObjectÁöÑSark CategoryË¢´Âä†ËΩΩÔºåÂ§¥Êñá‰ª∂+(void)fooÊ≤°ÊúâIMPÔºåÂè™‰ºöÂá∫Áé∞‰∏Ä‰∏™warning„ÄÇË¢´Âä†Âà∞ClassÁöÑMethod listÈáåÁöÑÊñπÊ≥ïÂè™Êúâ-(void)fooÔºåMeta ClassÁöÑÊñπÊ≥ïÂàóË°®ÈáåÊ≤°Êúâ„ÄÇ ÊâßË°å[NSObject foo]Êó∂Ôºå‰ºöÂú®Meta ClassÁöÑMethod listÈáåÊâæÔºåÊâæ‰∏çÁùÄÂ∞±ÁªßÁª≠ÂæÄsuper classÈáåÊâæÔºåNSObject Meta ClasÁöÑsuper classÊòØNSObjectÊú¨Ë∫´ÔºåËøôÊó∂Âú®NSObjectÁöÑMethod listÈáåÂ∞±ÊúâfooËøô‰∏™ÊñπÊ≥ï‰∫ÜÔºåËÉΩÂ§üÊ≠£Â∏∏ËæìÂá∫„ÄÇ ÊâßË°å[[NSObject new] foo]Â∞±ÁÆÄÂçïÁöÑÂ§ö‰∫ÜÔºå[NSObject new]ÁîüÊàê‰∏Ä‰∏™ÂÆû‰æãÔºåÂÆû‰æãÁöÑMethod listÊòØÊúâfooÊñπÊ≥ïÁöÑÔºå‰∫éÊòØÊ≠£Â∏∏ËæìÂá∫„ÄÇ ProtocolProtocolÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™ÂØπË±°ÁªìÊûÑ‰Ωì 1typedef struct objc_object Protocol; Êìç‰ΩúÂáΩÊï∞CategoryÊìç‰ΩúÂáΩÊï∞‰ø°ÊÅØÈÉΩÂåÖÂê´Âú®objc_class‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáobjc_classÁöÑÊìç‰ΩúÂáΩÊï∞Êù•Ëé∑ÂèñÂàÜÁ±ªÁöÑÊìç‰ΩúÂáΩÊï∞‰ø°ÊÅØ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142@interface RuntimeCategoryClass : NSObject- (void)method1;@end@interface RuntimeCategoryClass (Category)- (void)method2;@end@implementation RuntimeCategoryClass- (void)method1 {}@end@implementation RuntimeCategoryClass (Category)- (void)method2 {}@end#pragma mark -NSLog(@&quot;ÊµãËØïobjc_class‰∏≠ÁöÑÊñπÊ≥ïÂàóË°®ÊòØÂê¶ÂåÖÂê´ÂàÜÁ±ª‰∏≠ÁöÑÊñπÊ≥ï&quot;);unsigned int outCount = 0;Method *methodList = class_copyMethodList(RuntimeCategoryClass.class, &amp;outCount);for (int i = 0; i &lt; outCount; i++) { Method method = methodList[i]; const char *name = sel_getName(method_getName(method)); NSLog(@&quot;RuntimeCategoryClass&apos;s method: %s&quot;, name); if (strcmp(name, sel_getName(@selector(method2)))) { NSLog(@&quot;ÂàÜÁ±ªÊñπÊ≥ïmethod2Âú®objc_classÁöÑÊñπÊ≥ïÂàóË°®‰∏≠&quot;); }}//ËæìÂá∫2014-11-08 10:36:39.213 [561:151847] ÊµãËØïobjc_class‰∏≠ÁöÑÊñπÊ≥ïÂàóË°®ÊòØÂê¶ÂåÖÂê´ÂàÜÁ±ª‰∏≠ÁöÑÊñπÊ≥ï2014-11-08 10:36:39.215 [561:151847] RuntimeCategoryClass&apos;s method: method22014-11-08 10:36:39.215 [561:151847] RuntimeCategoryClass&apos;s method: method12014-11-08 10:36:39.215 [561:151847] ÂàÜÁ±ªÊñπÊ≥ïmethod2Âú®objc_classÁöÑÊñπÊ≥ïÂàóË°®‰∏≠ RuntimeÊèê‰æõ‰∫ÜProtocolÁöÑ‰∏ÄÁ≥ªÂàóÂáΩÊï∞Êìç‰ΩúÔºåÂáΩÊï∞ÂåÖÊã¨ 123456789101112131415161718192021222324252627282930// ËøîÂõûÊåáÂÆöÁöÑÂçèËÆÆProtocol * objc_getProtocol ( const char *name );// Ëé∑ÂèñËøêË°åÊó∂ÊâÄÁü•ÈÅìÁöÑÊâÄÊúâÂçèËÆÆÁöÑÊï∞ÁªÑProtocol ** objc_copyProtocolList ( unsigned int *outCount );// ÂàõÂª∫Êñ∞ÁöÑÂçèËÆÆÂÆû‰æãProtocol * objc_allocateProtocol ( const char *name );// Âú®ËøêË°åÊó∂‰∏≠Ê≥®ÂÜåÊñ∞ÂàõÂª∫ÁöÑÂçèËÆÆvoid objc_registerProtocol ( Protocol *proto ); //ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂçèËÆÆÂêéÂøÖÈ°ª‰ΩøÁî®Ëøô‰∏™ËøõË°åÊ≥®ÂÜåËøô‰∏™Êñ∞ÂçèËÆÆÔºå‰ΩÜÊòØÊ≥®ÂÜåÂêé‰∏çËÉΩÂ§üÂÜç‰øÆÊîπÂíåÊ∑ªÂä†Êñ∞ÊñπÊ≥ï„ÄÇ// ‰∏∫ÂçèËÆÆÊ∑ªÂä†ÊñπÊ≥ïvoid protocol_addMethodDescription ( Protocol *proto, SEL name, const char *types, BOOL isRequiredMethod, BOOL isInstanceMethod );// Ê∑ªÂä†‰∏Ä‰∏™Â∑≤Ê≥®ÂÜåÁöÑÂçèËÆÆÂà∞ÂçèËÆÆ‰∏≠void protocol_addProtocol ( Protocol *proto, Protocol *addition );// ‰∏∫ÂçèËÆÆÊ∑ªÂä†Â±ûÊÄßvoid protocol_addProperty ( Protocol *proto, const char *name, const objc_property_attribute_t *attributes, unsigned int attributeCount, BOOL isRequiredProperty, BOOL isInstanceProperty );// ËøîÂõûÂçèËÆÆÂêçconst char * protocol_getName ( Protocol *p );// ÊµãËØï‰∏§‰∏™ÂçèËÆÆÊòØÂê¶Áõ∏Á≠âBOOL protocol_isEqual ( Protocol *proto, Protocol *other );// Ëé∑ÂèñÂçèËÆÆ‰∏≠ÊåáÂÆöÊù°‰ª∂ÁöÑÊñπÊ≥ïÁöÑÊñπÊ≥ïÊèèËø∞Êï∞ÁªÑstruct objc_method_description * protocol_copyMethodDescriptionList ( Protocol *p, BOOL isRequiredMethod, BOOL isInstanceMethod, unsigned int *outCount );// Ëé∑ÂèñÂçèËÆÆ‰∏≠ÊåáÂÆöÊñπÊ≥ïÁöÑÊñπÊ≥ïÊèèËø∞struct objc_method_description protocol_getMethodDescription ( Protocol *p, SEL aSel, BOOL isRequiredMethod, BOOL isInstanceMethod );// Ëé∑ÂèñÂçèËÆÆ‰∏≠ÁöÑÂ±ûÊÄßÂàóË°®objc_property_t * protocol_copyPropertyList ( Protocol *proto, unsigned int *outCount );// Ëé∑ÂèñÂçèËÆÆÁöÑÊåáÂÆöÂ±ûÊÄßobjc_property_t protocol_getProperty ( Protocol *proto, const char *name, BOOL isRequiredProperty, BOOL isInstanceProperty );// Ëé∑ÂèñÂçèËÆÆÈááÁî®ÁöÑÂçèËÆÆProtocol ** protocol_copyProtocolList ( Protocol *proto, unsigned int *outCount );// Êü•ÁúãÂçèËÆÆÊòØÂê¶ÈááÁî®‰∫ÜÂè¶‰∏Ä‰∏™ÂçèËÆÆBOOL protocol_conformsToProtocol ( Protocol *proto, Protocol *other ); Blockruntime‰∏≠‰∏Ä‰∫õÊîØÊåÅblockÊìç‰ΩúÁöÑÂáΩÊï∞ 12345678// ÂàõÂª∫‰∏Ä‰∏™ÊåáÈíàÂáΩÊï∞ÁöÑÊåáÈíàÔºåËØ•ÂáΩÊï∞Ë∞ÉÁî®Êó∂‰ºöË∞ÉÁî®ÁâπÂÆöÁöÑblockIMP imp_implementationWithBlock ( id block );// ËøîÂõû‰∏éIMP(‰ΩøÁî®imp_implementationWithBlockÂàõÂª∫ÁöÑ)Áõ∏ÂÖ≥ÁöÑblockid imp_getBlock ( IMP anImp );// Ëß£Èô§block‰∏éIMP(‰ΩøÁî®imp_implementationWithBlockÂàõÂª∫ÁöÑ)ÁöÑÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÂπ∂ÈáäÊîæblockÁöÑÊã∑Ë¥ùBOOL imp_removeBlock ( IMP anImp ); ÊµãËØï‰ª£Á†Å 1234567891011121314151617@interface MyRuntimeBlock : NSObject@end@implementation MyRuntimeBlock@endIMP imp = imp_implementationWithBlock(^(id obj, NSString *str) { NSLog(@&quot;%@&quot;, str);});class_addMethod(MyRuntimeBlock.class, @selector(testBlock:), imp, &quot;v@:@&quot;);MyRuntimeBlock *runtime = [[MyRuntimeBlock alloc] init];[runtime performSelector:@selector(testBlock:) withObject:@&quot;hello world!&quot;];//ÁªìÊûú2014-11-09 14:03:19.779 [1172:395446] hello world! RuntimeÁöÑÂ∫îÁî®Ëé∑ÂèñÁ≥ªÁªüÊèê‰æõÁöÑÂ∫ìÁõ∏ÂÖ≥‰ø°ÊÅØ‰∏ªË¶ÅÂáΩÊï∞ 12345678// Ëé∑ÂèñÊâÄÊúâÂä†ËΩΩÁöÑObjective-CÊ°ÜÊû∂ÂíåÂä®ÊÄÅÂ∫ìÁöÑÂêçÁß∞const char ** objc_copyImageNames ( unsigned int *outCount );// Ëé∑ÂèñÊåáÂÆöÁ±ªÊâÄÂú®Âä®ÊÄÅÂ∫ìconst char * class_getImageName ( Class cls );// Ëé∑ÂèñÊåáÂÆöÂ∫ìÊàñÊ°ÜÊû∂‰∏≠ÊâÄÊúâÁ±ªÁöÑÁ±ªÂêçconst char ** objc_copyClassNamesForImage ( const char *image, unsigned int *outCount ); ÈÄöËøáËøô‰∫õÂáΩÊï∞Â∞±ËÉΩÂ§üËé∑ÂèñÊüê‰∏™Á±ªÊâÄÊúâÁöÑÂ∫ìÔºå‰ª•ÂèäÊüê‰∏™Â∫ì‰∏≠ÂåÖÂê´Âì™‰∫õÁ±ª 123456789101112131415161718192021NSLog(@&quot;Ëé∑ÂèñÊåáÂÆöÁ±ªÊâÄÂú®Âä®ÊÄÅÂ∫ì&quot;);NSLog(@&quot;UIView&apos;s Framework: %s&quot;, class_getImageName(NSClassFromString(@&quot;UIView&quot;)));NSLog(@&quot;Ëé∑ÂèñÊåáÂÆöÂ∫ìÊàñÊ°ÜÊû∂‰∏≠ÊâÄÊúâÁ±ªÁöÑÁ±ªÂêç&quot;);const char ** classes = objc_copyClassNamesForImage(class_getImageName(NSClassFromString(@&quot;UIView&quot;)), &amp;outCount);for (int i = 0; i &lt; outCount; i++) { NSLog(@&quot;class name: %s&quot;, classes[i]);}//ÁªìÊûú2014-11-08 12:57:32.689 [747:184013] Ëé∑ÂèñÊåáÂÆöÁ±ªÊâÄÂú®Âä®ÊÄÅÂ∫ì2014-11-08 12:57:32.690 [747:184013] UIView&apos;s Framework: /System/Library/Frameworks/UIKit.framework/UIKit2014-11-08 12:57:32.690 [747:184013] Ëé∑ÂèñÊåáÂÆöÂ∫ìÊàñÊ°ÜÊû∂‰∏≠ÊâÄÊúâÁ±ªÁöÑÁ±ªÂêç2014-11-08 12:57:32.691 [747:184013] class name: UIKeyboardPredictiveSettings2014-11-08 12:57:32.691 [747:184013] class name: _UIPickerViewTopFrame2014-11-08 12:57:32.691 [747:184013] class name: _UIOnePartImageView2014-11-08 12:57:32.692 [747:184013] class name: _UIPickerViewSelectionBar2014-11-08 12:57:32.692 [747:184013] class name: _UIPickerWheelView2014-11-08 12:57:32.692 [747:184013] class name: _UIPickerViewTestParameters...... ÂØπAppÁöÑÁî®Êà∑Ë°å‰∏∫ËøõË°åËøΩË∏™Â∞±ÊòØÁî®Êà∑ÁÇπÂáªÊó∂Êää‰∫ã‰ª∂ËÆ∞ÂΩï‰∏ãÊù•„ÄÇ‰∏ÄËà¨ÊØîËæÉÂÅöÊ≥ïÂ∞±ÊòØÂú®viewDidAppearÈáåËÆ∞ÂΩï‰∫ã‰ª∂ÔºåËøôÊ†∑‰ºöËÆ©ËøôÊ†∑ËÆ∞ÂΩï‰∫ã‰ª∂ÁöÑ‰ª£Á†ÅÈÅçÂ∏ÉÊï¥‰∏™È°πÁõÆ‰∏≠„ÄÇÁªßÊâøÊàñÁ±ªÂà´‰πü‰ºöÊúâÈóÆÈ¢ò„ÄÇËøôÊó∂Âà©Áî®Method SwizzlingÊää‰∏Ä‰∏™ÊñπÊ≥ïÁöÑÂÆûÁé∞ÂíåÂè¶‰∏Ä‰∏™ÊñπÊ≥ïÁöÑÂÆûÁé∞ËøõË°åÊõøÊç¢„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738//ÂÖàÂÆö‰πâ‰∏Ä‰∏™Á±ªÂà´ÔºåÊ∑ªÂä†Ë¶ÅSwizzledÁöÑÊñπÊ≥ï@implementation UIViewController (Logging)- (void)swizzled_viewDidAppear:(BOOL)animated{ // call original implementation [self swizzled_viewDidAppear:animated]; // Logging [Logging logWithEventName:NSStringFromClass([self class])];}//Êé•‰∏ãÊù•ÂÆûÁé∞swizzleÊñπÊ≥ï@implementation UIViewController (Logging)void swizzleMethod(Class class, SEL originalSelector, SEL swizzledSelector) { // the method might not exist in the class, but in its superclass Method originalMethod = class_getInstanceMethod(class, originalSelector); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); // class_addMethod will fail if original method already exists BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); // the method doesn‚Äôt exist and we just added one if (didAddMethod) { class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); } else { method_exchangeImplementations(originalMethod, swizzledMethod); }}//ÊúÄÂêéË¶ÅÁ°Æ‰øùÂú®Á®ãÂ∫èÂêØÂä®ÁöÑÊó∂ÂÄôË∞ÉÁî®swizzleMethodÊñπÊ≥ïÂú®‰πãÂâçÁöÑUIViewControllerÁöÑLoggingÁ±ªÂà´ÈáåÊ∑ªÂä†+load:ÊñπÊ≥ïÔºåÁÑ∂ÂêéÂú®+load:ÈáåÊääviewDidAppearÊõøÊç¢Êéâ@implementation UIViewController (Logging)+ (void)load{ swizzleMethod([self class], @selector(viewDidAppear:), @selector(swizzled_viewDidAppear:));}//Êõ¥ÁÆÄÂåñÁõ¥Êé•Áî®Êñ∞ÁöÑIMPÂèñ‰ª£ÂéüIMPÔºå‰∏çÊòØÊõøÊç¢ÔºåÂè™ÈúÄË¶ÅÊúâÂÖ®Â±ÄÁöÑÂáΩÊï∞ÊåáÈíàÊåáÂêëÂéüIMPÂç≥ÂèØ„ÄÇvoid (gOriginalViewDidAppear)(id, SEL, BOOL);void newViewDidAppear(UIViewController *self, SEL _cmd, BOOL animated){ // call original implementation gOriginalViewDidAppear(self, _cmd, animated); // Logging [Logging logWithEventName:NSStringFromClass([self class])];}+ (void)load{ Method originalMethod = class_getInstanceMethod(self, @selector(viewDidAppear:)); gOriginalViewDidAppear = (void *)method_getImplementation(originalMethod); if(!class_addMethod(self, @selector(viewDidAppear:), (IMP) newViewDidAppear, method_getTypeEncoding(originalMethod))) { method_setImplementation(originalMethod, (IMP) newViewDidAppear); }} ÈÄöËøáMethod SwizzlingÂèØ‰ª•Êää‰∫ã‰ª∂‰ª£Á†ÅÊàñLoggingÔºåAuthenticationÔºåCachingÁ≠âË∑ü‰∏ªË¶Å‰∏öÂä°ÈÄªËæë‰ª£Á†ÅËß£ËÄ¶„ÄÇËøôÁßçÂ§ÑÁêÜÊñπÂºèÂè´ÂÅöCross Cutting Concernshttps://en.wikipedia.org/wiki/Cross-cutting_concern Áî®Method SwizzlingÂä®ÊÄÅÁªôÊåáÂÆöÁöÑÊñπÊ≥ïÊ∑ªÂä†‰ª£Á†ÅËß£ÂÜ≥Cross Cutting ConcernsÁöÑÁºñÁ®ãÊñπÂºèÂè´Aspect Oriented Programming https://en.wikipedia.org/wiki/Aspect-oriented_programming ÁõÆÂâçÊúâ‰∫õÁ¨¨‰∏âÊñπÂ∫ìÂèØ‰ª•ÂæàÊñπ‰æøÁöÑ‰ΩøÁî®AOPÔºåÊØîÂ¶ÇAspects https://github.com/steipete/Aspects ËøôÈáåÊòØ‰ΩøÁî®AspectsÁöÑËåÉ‰æãhttps://github.com/okcomp/AspectsDemoming1016","link":"/ÁºñÁ®ã/Ô£ø/objc-runtime/"},{"title":"Â§ßËØùSocket","text":"Ë¶Å‰∫ÜËß£SocketÈ¶ñÂÖàË¶Å‰∫ÜËß£ TCPÔºå‰ªñ‰ª¨‰∏§‰∏™ÁöÑÂÖ≥Á≥ªÂèØ‰ª•ËØ¥ÊòØÔºö Socket ÊòØÊäΩË±°Âá∫Êù•ÁöÑ‰ΩøÁî® TCP/UDP ÁöÑÊ¶ÇÂøµÊ®°ÂûãÔºåÂ±èËîΩÊéâ‰∫ÜÊô¶Ê∂©ÁöÑÂ∫ïÂ±ÇÂçèËÆÆÁöÑÂÆûÁé∞ÔºåÊòØ‰∏Ä‰∏™Êé•Âè£„ÄÇ ÊúÄËøëÁúãÂà∞‰∫Ü‰∏ÄÂº†Â¶ÇÊ≠§ËØ¶ÁªÜÁöÑ TCP ‰∏âÊ¨°Êè°ÊâãÂíåÂõõÊ¨°Êå•ÊâãÔºåÊâìÂç∞‰∏ÄÂº†ÊîæÂ∑•‰ΩçÔºÅÊëòËá™„ÄäÂõæËß£ÁΩëÁªúÁ°¨‰ª∂„Äã249È°µ Âõæ5-11 „ÄäTCPÁöÑ‰∏âÊ¨°Êè°Êâã„ÄãÊâÄË∞ìÁöÑX„ÄÅX+1„ÄÅY„ÄÅY+1ÂØπÂ∫î‰∫é‰Ω†Êî∂Âà∞‰∫ÜÊ≤°„ÄÅÊàëÊî∂Âà∞‰∫Ü„ÄÅ‰Ω†Êî∂Âà∞‚ÄôÊàëÊî∂Âà∞‚ÄôÊ≤°„ÄÅÊàëÊî∂Âà∞‰∫Ü‰∏çÁî®Âõû‰∫Ü,‰∏∫‰ªÄ‰πàÁî®+1Ë°®Á§∫Âë¢ÔºüÈÇ£ÊòØÂõ†‰∏∫Ââç‰∏§‰∏™ÊåáÁöÑÊòØ‰∏Ä‰∏™‰∫∫ÔºåÂêé‰∏§‰∏™ÊåáÁöÑÊòØ‰∏Ä‰∏™‰∫∫„ÄÇÂõõÁªÑÊòØ‰∏â‰∏™ËøûÊé•ÔºåÊØè‰∏™ËøûÊé•ÁöÑÂ∫èÂè∑‰æùÊ¨°ÊòØX„ÄÅY„ÄÅZ„ÄÇ TCPÁöÑËøûÊé•ËøáÁ®ãÂ∞±ÂÉè‰∏§‰∏™‰∫∫ÁöÑÂØπËØùÔºö ÊÉ≥Ë±°‰∏Ä‰∏ãÔºåÊØèÊ¨°Ëøô‰ø©ÂÑø‰∫∫ËÅäÂ§©ÔºåÈÉΩË¶ÅÂÉè‰∏ãÈù¢ËøôÊ†∑‰∏ÄÊù•‰∏ÄÂõû‰∏âÊ¨°ÔºåÊé•‰∏ãÊù•‰ªñ‰ª¨ÊâçËÉΩ„ÄêÂ•ΩÂ•ΩËÅäÂ§©‰∫Ü„ÄÇ„ÄÇ„ÄÇ„ÄëÁúüÊòØÊúâÁÇπ‚Äú‰Ωú‚Äù„ÄÇ„ÄÇ„ÄÇ ÊàëÊòØÂÆ¢Êà∑Á´ØÔºåÊ†ëÊáíÊòØÊúçÂä°Á´ØÔºåÊºîÁ§∫‰∏âÊ¨°Êè°Êâã„ÄÅÊï∞ÊçÆ‰º†ËæìÊ≠•È™§ÂÖ∂ÂÆûÊúâ‰∏™ÈóÆÈ¢òÔºå‰∏∫‰ªÄ‰πàËøûÊé•ÁöÑÊó∂ÂÄôÊòØ‰∏âÊ¨°Êè°ÊâãÔºåÂÖ≥Èó≠ÁöÑÊó∂ÂÄôÂç¥ÊòØÂõõÊ¨°Êå•ÊâãÔºü Âõ†‰∏∫ÂΩìServerÁ´ØÊî∂Âà∞ClientÁ´ØÁöÑSYNËøûÊé•ËØ∑Ê±ÇÊä•ÊñáÂêéÔºåÂèØ‰ª•Áõ¥Êé•ÂèëÈÄÅSYN+ACKÊä•Êñá„ÄÇÂÖ∂‰∏≠ACKÊä•ÊñáÊòØÁî®Êù•Â∫îÁ≠îÁöÑÔºåSYNÊä•ÊñáÊòØÁî®Êù•ÂêåÊ≠•ÁöÑ„ÄÇ‰ΩÜÊòØÂÖ≥Èó≠ËøûÊé•Êó∂ÔºåÂΩìServerÁ´ØÊî∂Âà∞FINÊä•ÊñáÊó∂ÔºåÂæàÂèØËÉΩÂπ∂‰∏ç‰ºöÁ´ãÂç≥ÂÖ≥Èó≠SOCKETÔºåÊâÄ‰ª•Âè™ËÉΩÂÖàÂõûÂ§ç‰∏Ä‰∏™ACKÊä•ÊñáÔºåÂëäËØâClientÁ´ØÔºå‚Äù‰Ω†ÂèëÁöÑFINÊä•ÊñáÊàëÊî∂Âà∞‰∫Ü‚Äù„ÄÇÂè™ÊúâÁ≠âÂà∞ÊàëServerÁ´ØÊâÄÊúâÁöÑÊä•ÊñáÈÉΩÂèëÈÄÅÂÆå‰∫ÜÔºåÊàëÊâçËÉΩÂèëÈÄÅFINÊä•ÊñáÔºåÂõ†Ê≠§‰∏çËÉΩ‰∏ÄËµ∑ÂèëÈÄÅ„ÄÇÊïÖÈúÄË¶ÅÂõõÊ≠•Êè°Êâã„ÄÇ ËÄåËøô‰∏ÄËÆæËÆ°Ôºå‰∏ªË¶ÅÊòØÂõ†‰∏∫‚ÄúÊúçÂä°Âô®‰∏çÊòØ‰Ω†ÊÉ≥ÂÖ≥Â∞±ËÉΩÂÖ≥‚Äù„ÄÇ„ÄÇ„ÄÇ ÊØîÂ¶ÇËØ¥‰∏§‰∏™ÁÉ≠ÊÅã‰∏≠ÁöÑ‰∫∫Ê≠£Âú®QQ‰∏äÂèëÈÄÅ‰∏Ä‰∏™‰º†mp4Ê†ºÂºèÁöÑÊñá‰ª∂Ôºå AËØ¥ÔºåÊàëË¶Å‰∏ãQQ‰∫ÜÔºå BËØ¥ÔºöÊàëÁü•ÈÅì‰∫ÜÔºå‰Ω†‰∏ãÂêß„ÄÇ AËØ¥ÔºåÈÇ£ÊàëÂÖ≥‰∫ÜÔºåÔºàÊÉ≥ÂÖ≥Ôºâ ‰ΩÜÊòØÂΩìAÂ∞ùËØïÂÖ≥Èó≠QQÁöÑÊó∂ÂÄôÔºåQQÂºπÁ™óËØ¥‚ÄúÊ≠£Âú®‰º†ËæìÊñá‰ª∂Ôºå‰º†ËæìÂÆåÊàêÂêéËá™Âä®ÂÖ≥Èó≠QQÔºü‚Äù ËøôÊó∂ÂÄôAÂØπBËØ¥ÔºåÂëÄÔºåÊ≠£Âú®‰º†‰∏úË•øÔºåÁ≠â‰º†ÂÆå‰∫ÜÔºåÊàëÂ∞±ÂÖ≥Âêß„ÄÇÔºà‰∏çËÉΩÂÖ≥Ôºâ BËØ¥ÔºöË°å„ÄÇÊó¢ÁÑ∂ÂÖ≥‰∏çÊéâÔºå‰∏çË°åÂÜçËÅä‰ºöÂÑøÂëóÔºü AÔºöËÅäÂêß„ÄÇ„ÄÇ„ÄÇ‰º†ÂÆå‰∫ÜÂïäÔºå‰∏ã‰∫ÜÂïäÔºà‰º†ËæìÁªìÊùü‰∫Ü‚ÄìËÉΩÂÖ≥Ôºâ BÔºö‰∏ãÂêß„ÄÇÊàë‰πü‰∏ã‰∫Ü„ÄÇ„ÄÇ„ÄÇ Â∞±ÊòØÂ§ö‰∫Ü‰∏Ä‰∏™FinishÊä•Êñá„ÄÇ ÊàñËÄÖÁÆÄÂçïÁÇπË°®Á§∫ÊòØËøôÊ†∑ÁöÑÔºöÂõæÁâáÊºîÁ§∫‰∫ÜÂõõÊ¨°Êå•ÊâãÔºå‰∏é‰∏âÊ¨°Êè°ÊâãÁõ∏ÊØîÔºåÂè™Â§ö‰∫Ü‰∏Ä‰∏™Ë¢´Âä®ÊñπÁ°ÆËÆ§Ëá™Ë∫´‰ªªÂä°FinishÁöÑÂä®‰Ωú„ÄÇÊÄªÁªì‰∏ãÁõ∏ÂÖ≥ÁöÑÂáΩÊï∞Ôºö ÂàõÂª∫Â•óÊé•Â≠ó 1Socket(af,type,protocol) Âª∫Á´ãÂú∞ÂùÄÂíåÂ•óÊé•Â≠óÁöÑËÅîÁ≥ª 1bind(sockid, local addr, addrlen) ÊúçÂä°Âô®Á´Ø‰æ¶Âê¨ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±Ç 1listen( Sockid ,quenlen) Âª∫Á´ãÊúçÂä°Âô®/ÂÆ¢Êà∑Á´ØÁöÑËøûÊé• (Èù¢ÂêëËøûÊé•TCPÔºâ ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇËøûÊé• 1Connect(sockid, destaddr, addrlen) ÊúçÂä°Âô®Á´ØÁ≠âÂæÖ‰ªéÁºñÂè∑‰∏∫SockidÁöÑSocket‰∏äÊé•Êî∂ÂÆ¢Êà∑ËøûÊé•ËØ∑Ê±Ç 1newsockid=accept(SockidÔºåClientaddr, paddrlen) ÂèëÈÄÅ/Êé•Êî∂Êï∞ÊçÆ Èù¢ÂêëËøûÊé•Ôºö 12send(sockid, buff, bufflen) recv( ) Èù¢ÂêëÊó†ËøûÊé•Ôºö 12sendto(sockid,buff,‚Ä¶,addrlen) recvfrom( ) ÈáäÊîæÂ•óÊé•Â≠ó 1close(sockid) Ëá≥‰∫é‰∏∫‰ªÄ‰πàÊòØ‰∏âÊ¨°Êè°ÊâãÔºåËÄå‰∏çÊòØ‰∫åÊ¨°Êè°ÊâãÔºåËøòÊúâÂõõÊ¨°Êè°ÊâãÔºåÂèØ‰ª•ÁúãÁúã‰∏ãÈù¢ÁöÑÁ±ªÊØîÔºö ‰∏âÊ¨°Êè°Êâã ‰∫åÊ¨°Êè°Êâã ÂõõÊ¨°Êè°Êâã ÂèÇËÄÉÔºöÁü•‰πé ‰∏âÊ¨°Êè°ÊâãÁöÑÂØπËØùÔºå‰πüÊå∫ÂÉèËøô‰∏™ÁöÑÔºåÂìàÂìàÔºö A: How are you? B: I‚Äôm fine, thanks,and you? A: I‚Äôm fine too. Posted by ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÂéüÂàõÊñáÁ´†ÔºåÁâàÊùÉÂ£∞ÊòéÔºöËá™Áî±ËΩ¨ËΩΩ-ÈùûÂïÜÁî®-ÈùûË°çÁîü-‰øùÊåÅÁΩ≤Âêç | Creative Commons BY-NC-ND 3.0","link":"/ÁºñÁ®ã/Ô£ø/socket/"},{"title":"UICollectionView","text":"Layout Objects‰ΩøÁî®UICollectionViewFlowLayoutÁ±ªËøõË°åÂÖ∑‰ΩìÁöÑÂ∏ÉÂ±ÄÂÆûÁé∞ÔºåÁ±ªÁöÑÂÆòÊñπÊñáÊ°£ËØ¥ÊòéÔºöhttps://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewFlowLayout_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionViewFlowLayout,Ëøõ‰∏ÄÊ≠•ÂÆöÂà∂ÂèØÂèÇËÄÉÂÆòÊñπËøô‰∏™ÊñáÊ°£Ôºöhttps://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/UsingtheFlowLayout/UsingtheFlowLayout.html#//apple_ref/doc/uid/TP40012334-CH3-SW4 CellsÂíåÂÖ∂ÂÆÉViewcollection viewÁÆ°ÁêÜËÄÖcellsÔºåsupplementary viewsÂíådecoration views cellsÔºöÂíåtableviewÁöÑcellÁ±ª‰ºº„ÄÇ Supplementary viewsÔºöÁõ∏ÂΩì‰∫étableviewÁöÑsection headerÂíåfooter viewsÔºå‰∏çÂêåÁöÑÊòØÊï∞ÈáèÂíå‰ΩçÁΩÆÁî±Â∏ÉÂ±ÄÊéßÂà∂ Decoration viewsÔºöË£ÖÈ•∞Áî® Âü∫‰∫éÂÜÖÂÆπÁöÑÂ∏ÉÂ±ÄËÆ°ÁÆóËá™ÂÆö‰πâÂ∏ÉÂ±ÄÂ≠êÁ±ªÈáçÂÜôÁöÑÊñπÊ≥ïÂèØ‰ª•ÂèÇËÄÉÂÆòÊñπÊñáÊ°£Ôºöhttps://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewLayout_class/Reference/Reference.html collectionViewContentSize1234567891011- (CGSize)collectionViewContentSize{ //‰∏çËÉΩÊ∞¥Âπ≥ÊªöÂä® CGFloat contentWidth = self.collectionView.bounds.size.width; //ÂûÇÁõ¥ÊªöÂä®ÊòæÁ§∫ÂÆåÊï¥Êï∞ÊçÆ CGFloat contentHeight = DayHeaderHeight + (HeightPerHour * HoursPerDay); CGSize contentSize = CGSizeMake(contentWidth, contentHeight); return contentSize;} Â∏ÉÂ±Ä‰∏≠ÊúÄÈáçË¶ÅÁöÑÊñπÊ≥ïlayoutAttributesForElementsInRect:12345678910111213141516171819202122232425262728293031- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect{ NSMutableArray *layoutAttributes = [NSMutableArray array]; // Cells // We call a custom helper method -indexPathsOfItemsInRect: here // which computes the index paths of the cells that should be included // in rect. NSArray *visibleIndexPaths = [self indexPathsOfItemsInRect:rect]; for (NSIndexPath *indexPath in visibleIndexPaths) { UICollectionViewLayoutAttributes *attributes = [self layoutAttributesForItemAtIndexPath:indexPath]; [layoutAttributes addObject:attributes]; } // Supplementary views NSArray *dayHeaderViewIndexPaths = [self indexPathsOfDayHeaderViewsInRect:rect]; for (NSIndexPath *indexPath in dayHeaderViewIndexPaths) { UICollectionViewLayoutAttributes *attributes = [self layoutAttributesForSupplementaryViewOfKind:@‚ÄúDayHeaderView&quot; atIndexPath:indexPath]; [layoutAttributes addObject:attributes]; } NSArray *hourHeaderViewIndexPaths = [self indexPathsOfHourHeaderViewsInRect:rect]; for (NSIndexPath *indexPath in hourHeaderViewIndexPaths) { UICollectionViewLayoutAttributes *attributes = [self layoutAttributesForSupplementaryViewOfKind:@&quot;HourHeaderView&quot;atIndexPath:indexPath]; [layoutAttributes addObject:attributes]; } return layoutAttributes;} layoutAttributesForItemAtIndexPath:123456789- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath{ CalendarDataSource *dataSource = self.collectionView.dataSource; id event = [dataSource eventAtIndexPath:indexPath]; UICollectionViewLayoutAttributes *attributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath]; attributes.frame = [self frameForEvent:event]; return attributes;} shouldInvalidateLayoutForBoundsChange:12345678- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds{ CGRect oldBounds = self.collectionView.bounds; if (CGRectGetWidth(newBounds) != CGRectGetWidth(oldBounds)) { return YES; } return NO;} ÊèíÂÖ•ÔºåÂà†Èô§ÂíåÂ∏ÉÂ±ÄÈó¥ÂàáÊç¢ÁöÑÂä®ÁîªÊèíÂÖ•ÔºåÂà†Èô§ initialLayoutAttributesForAppearingItemAtIndexPath: initialLayoutAttributesForAppearingSupplementaryElementOfKind:atIndexPath: initialLayoutAttributesForAppearingDecorationElementOfKind:atIndexPath: finalLayoutAttributesForDisappearingItemAtIndexPath: finalLayoutAttributesForDisappearingSupplementaryElementOfKind:atIndexPath: finalLayoutAttributesForDisappearingDecorationElementOfKind:atIndexPath:ÂèëÈÄÅsetCollectionViewLayout:animated:Ê∂àÊÅØÔºåcollection view‰ºö‰∏∫cellsÂú®Êñ∞Â∏ÉÂ±ÄÂèÇÊï∞ÔºåÂä®ÊÄÅÂ∞ÜÊØè‰∏™cell‰ªéÊóßÂèòÂà∞Êñ∞„ÄÇ ËåÉ‰æã Ëá™ÂÆö‰πâÂ∏ÉÂ±ÄËåÉ‰æãÔºöhttps://github.com/objcio/issue-3-collection-view-layouts","link":"/ÁºñÁ®ã/Ô£ø/uicollectionview/"},{"title":"Ê∑±ÂÖ•ÂâñÊûê iOS ÊÄßËÉΩ‰ºòÂåñ","text":"ÈóÆÈ¢òÁßçÁ±ªÊó∂Èó¥Â§çÊùÇÂ∫¶Âú®ÈõÜÂêàÈáåÊï∞ÊçÆÈáèÂ∞èÁöÑÊÉÖÂÜµ‰∏ãÊó∂Èó¥Â§çÊùÇÂ∫¶ÂØπ‰∫éÊÄßËÉΩÁöÑÂΩ±ÂìçÁúãËµ∑Êù•ÂæÆ‰πéÂÖ∂ÂæÆ„ÄÇ‰ΩÜÂ¶ÇÊûúÊüê‰∏™ÂºÄÂèëÁöÑÂäüËÉΩÊòØ‰∏Ä‰∏™ÂÖ¨ÂÖ±ÂäüËÉΩÔºåÊó†Ê≥ïÈ¢ÑÊñôË∞ÉÁî®ËÄÖ‰º†ÂÖ•Êï∞ÊçÆÁöÑÈáèÊó∂ÔºåËøô‰∏™Â§çÊùÇÂ∫¶ÁöÑ‰ºòÂåñÊòæÂæóÈùûÂ∏∏ÈáçË¶Å‰∫Ü„ÄÇ ‰∏äÂõæÂàóÂá∫‰∫ÜÂêÑÁßçÊÉÖÂÜµÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºåÊØîÂ¶ÇÈ´òÊïàÁöÑÊéíÂ∫èÁÆóÊ≥ï‰∏ÄËà¨ÈÉΩÊòØ O(n log n)„ÄÇÊé•‰∏ãÊù•ÁúãÁúã‰∏ãÂõæÔºö Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫ O(n) ÊòØ‰∏™ÂàÜÊ∞¥Â≤≠ÔºåÂ§ß‰∫éÂÆÉÂØπ‰∫éÊÄßËÉΩÂ∞±ÂÖ∑ÊúâÂæàÂ§ßÁöÑÊΩúÂú®ÂΩ±ÂìçÔºåÂ¶ÇÊûúÊòØ‰∏™ÂÖ¨ÂÖ±ÁöÑÊé•Âè£‰∏ÄÂÆöË¶ÅÂä†‰∏äËØ¥ÊòéÔºåËá™Â∑±Ë∞ÉÁî®‰πüË¶ÅÂÅöÂà∞ÂøÉ‰∏≠ÊúâÊï∞„ÄÇÂΩìÁÑ∂ÊúÄÂ•ΩÊòØÈÄöËøáÁÆóÊ≥ï‰ºòÂåñÊàñËÄÖ‰ΩøÁî®ÂêàÈÄÇÁöÑÁ≥ªÁªüÊé•Âè£ÊñπÊ≥ïÔºåÊùÉË°°ÂÜÖÂ≠òÊ∂àËÄó‰∫âÂèñÈÄöËøáÁ©∫Èó¥Êù•Êç¢ÂèñÊó∂Èó¥„ÄÇ ‰∏ãÈù¢ÈÄöËøáÈõÜÂêàÈáåÊòØÂê¶ÊúâÊüê‰∏™ÂÄºÊù•‰∏æ‰∏™‰æãÂ≠êÔºö 1234567891011121314151617181920//O(1)return array[idx] == value;//O(n)for (int i = 0; i &lt; count; i++) { if (array[i] == value) { return YES; }}return NO;//O(n2) ÊâæÈáçÂ§çÁöÑÂÄºfor (int i = 0; i &lt; count; i++) { for (int j = 0; j &lt; count; j++) { if ( i != j &amp;&amp; array[i] == array[j]) { return YES; } }}return NO; ÈÇ£‰πà OC ÈáåÂá†ÁßçÂ∏∏Áî®ÈõÜÂêàÂØπË±°Êèê‰æõÁöÑÊé•Âè£ÊñπÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØÊÄé‰πàÊ†∑ÁöÑ„ÄÇ NSArray / NSMutableArrayÈ¶ñÂÖàÊàë‰ª¨ÂèëÁé∞‰ªñ‰ª¨ÊòØÊúâÊéíÂ∫èÔºåÂπ∂ÂÖÅËÆ∏ÈáçÂ§çÂÖÉÁ¥†Â≠òÂú®ÁöÑÔºåÈÇ£‰πàËøô‰πàËÆæËÆ°Â∞±Ë°®Êòé‰∫ÜÈõÜÂêàÂ≠òÂÇ®Ê≤°Ê≥ï‰ΩøÁî®ÈáåÈù¢ÁöÑÂÖÉÁ¥†ÂÅö hash table ÁöÑ key ËøõË°åÁõ∏ÂÖ≥ÁöÑÂø´ÈÄüÊìç‰ΩúÔºå„ÄÇÊâÄ‰ª•‰∏çÂêåÂäüËÉΩÊé•Âè£ÊñπÊ≥ïÊÄßËÉΩÊòØ‰ºöÊúâÂæàÂ§ßÁöÑÂ∑ÆÂºÇ„ÄÇ containsObject:ÔºåcontainsObject:ÔºåindexOfObject*ÔºåremoveObject: ‰ºöÈÅçÂéÜÈáåÈù¢ÂÖÉÁ¥†Êü•ÁúãÊòØÂê¶‰∏é‰πãÂåπÂØπÔºåÊâÄ‰ª•Â§çÊùÇÂ∫¶Á≠â‰∫éÊàñÂ§ß‰∫é O(n) objectAtIndex:ÔºåfirstObject:ÔºålastObject:ÔºåaddObject:ÔºåremoveLastObject: Ëøô‰∫õÂè™ÈíàÂØπÊ†àÈ°∂Ê†àÂ∫ïÊìç‰ΩúÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩÊòØ O(1) indexOfObject:inSortedRange:options:usingComparator: ‰ΩøÁî®ÁöÑÊòØ‰∫åÂàÜÊü•ÊâæÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(log n) NSSet / NSMutableSet / NSCountedSetËøô‰∫õÈõÜÂêàÁ±ªÂûãÊòØÊó†Â∫èÊ≤°ÊúâÈáçÂ§çÂÖÉÁ¥†„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•ÈÄöËøá hash table ËøõË°åÂø´ÈÄüÁöÑÊìç‰Ωú„ÄÇÊØîÂ¶Ç addObject:, removeObject:, containsObject: ÈÉΩÊòØÊåâÁÖß O(1) Êù•ÁöÑ„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÂ∞ÜÊï∞ÁªÑËΩ¨Êàê Set Êó∂‰ºöÂ∞ÜÈáçÂ§çÂÖÉÁ¥†ÂêàÊàê‰∏Ä‰∏™ÔºåÂêåÊó∂Â§±ÂéªÊéíÂ∫è„ÄÇ NSDictionary / NSMutableDictionaryÂíå Set Â∑Æ‰∏çÂ§öÔºåÂ§ö‰∫ÜÈîÆÂÄºÂØπÂ∫î„ÄÇÊ∑ªÂä†Âà†Èô§ÂíåÊü•ÊâæÈÉΩÊòØ O(1) ÁöÑ„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØ Keys ÂøÖÈ°ªÊòØÁ¨¶Âêà NSCopying„ÄÇ containsObject ÊñπÊ≥ïÂú®Êï∞ÁªÑÂíå Set Èáå‰∏çÂêåÁöÑÂÆûÁé∞Âú®Êï∞ÁªÑ‰∏≠ÁöÑÂÆûÁé∞ 123456789101112131415161718192021- (BOOL) containsObject: (id)anObject{ return ([self indexOfObject: anObject] != NSNotFound);}- (NSUInteger) indexOfObject: (id)anObject{ unsigned c = [self count]; if (c &gt; 0 &amp;&amp; anObject != nil) { unsigned i; IMP get = [self methodForSelector: oaiSel]; BOOL (*eq)(id, SEL, id) = (BOOL (*)(id, SEL, id))[anObject methodForSelector: eqSel]; for (i = 0; i &lt; c; i++) if ((*eq)(anObject, eqSel, (*get)(self, oaiSel, i)) == YES) return i; } return NSNotFound;} ÂèØ‰ª•ÁúãÂà∞‰ºöÈÅçÂéÜÊâÄÊúâÂÖÉÁ¥†Âú®Êü•ÊâæÂà∞ÂêéÊâçËøõË°åËøîÂõû. Êé•‰∏ãÊù•ÂèØ‰ª•ÁúãÁúã containsObject Âú® Set ÈáåÁöÑÂÆûÁé∞Ôºö 1234567891011121314151617- (BOOL) containsObject: (id)anObject{ return (([self member: anObject]) ? YES : NO);}//Âú® GSSet,m ÈáåÊúâÂØπ member ÁöÑÂÆûÁé∞- (id) member: (id)anObject{ if (anObject != nil) { GSIMapNode node = GSIMapNodeForKey(&amp;map, (GSIMapKey)anObject); if (node != 0) { return node-&gt;key.obj; } } return nil;} ÊâæÂÖÉÁ¥†Êó∂ÊòØÈÄöËøáÈîÆÂÄºÊñπÂºè‰ªé map Êò†Â∞ÑË°®ÈáåÂèñÂá∫ÔºåÂõ†‰∏∫ Set ÈáåÂÖÉÁ¥†ÊòØÂîØ‰∏ÄÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª• hash ÂÖÉÁ¥†ÂØπË±°‰Ωú‰∏∫ key ËææÂà∞Âø´ÈÄüËé∑ÂèñÂÄºÁöÑÁõÆÁöÑ„ÄÇ Áî® GCD Êù•ÂÅö‰ºòÂåñÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá GCD Êèê‰æõÁöÑÊñπÊ≥ïÊù•Â∞Ü‰∏Ä‰∫õÈúÄË¶ÅËÄóÊó∂Êìç‰ΩúÊîæÂà∞Èùû‰∏ªÁ∫øÁ®ã‰∏äÂÅöÔºå‰ΩøÂæó App ËÉΩÂ§üËøêË°åÁöÑÊõ¥Âä†ÊµÅÁïÖÂìçÂ∫îÊõ¥Âø´„ÄÇ‰ΩÜÊòØ‰ΩøÁî® GCD Êó∂ÈúÄË¶ÅÊ≥®ÊÑèÈÅøÂÖçÂèØËÉΩÂºïËµ∑Á∫øÁ®ãÁàÜÁÇ∏ÂíåÊ≠ªÈîÅÁöÑÊÉÖÂÜµÔºåËøòÊúâÈùû‰∏ªÁ∫øÁ®ãÂ§ÑÁêÜ‰ªªÂä°‰πü‰∏çÊòØ‰∏áËÉΩÁöÑÔºåÂ¶ÇÊûú‰∏Ä‰∏™Â§ÑÁêÜÈúÄË¶ÅÊ∂àËÄóÂ§ßÈáèÂÜÖÂ≠òÊàñËÄÖÂ§ßÈáèCPUÊìç‰Ωú GCD ‰πüÊ≤°Ê≥ïÂ∏Æ‰Ω†ÔºåÂè™ËÉΩÈÄöËøáÂ∞ÜÂ§ÑÁêÜËøõË°åÊãÜËß£ÂàÜÊ≠•È™§ÂàÜÊó∂Èó¥ËøõË°åÂ§ÑÁêÜÊâçÊØîËæÉÂ¶•ÂΩì„ÄÇ ÂºÇÊ≠•Â§ÑÁêÜ‰∫ã‰ª∂ ‰∏äÂõæÊòØÊúÄÂÖ∏ÂûãÁöÑÂºÇÊ≠•Â§ÑÁêÜ‰∫ã‰ª∂ÁöÑÊñπÊ≥ï ÈúÄË¶ÅËÄóÊó∂ÈïøÁöÑ‰ªªÂä° Â∞Ü GCD ÁöÑ block ÈÄöËøá dispatch_block_create_with_qos_class ÊñπÊ≥ïÊåáÂÆöÈòüÂàóÁöÑ QoS ‰∏∫ QOS_CLASS_UTILITY„ÄÇËøôÁßç QoS Á≥ªÁªü‰ºöÈíàÂØπÂ§ßÁöÑËÆ°ÁÆóÔºåI/OÔºåÁΩëÁªú‰ª•ÂèäÂ§çÊùÇÊï∞ÊçÆÂ§ÑÁêÜÂÅöÁîµÈáè‰ºòÂåñ„ÄÇ ÈÅøÂÖçÁ∫øÁ®ãÁàÜÁÇ∏ ‰ΩøÁî®‰∏≤Ë°åÈòüÂàó ‰ΩøÁî® NSOperationQueues ÁöÑÂπ∂ÂèëÈôêÂà∂ÊñπÊ≥ï NSOperationQueue.maxConcurrentOperationCount ‰∏æ‰∏™‰æãÂ≠êÔºå‰∏ãÈù¢ÁöÑÂÜôÊ≥ïÂ∞±ÊØîËæÉÂç±Èô©ÔºåÂèØËÉΩ‰ºöÈÄ†ÊàêÁ∫øÁ®ãÁàÜÁÇ∏ÂíåÊ≠ªÈîÅ 1234for (int i = 0; i &lt; 999; i++) { dispatch_async(q, ^{...});}dispatch_barrier_sync(q, ^{}); ÈÇ£‰πàÊÄé‰πàËÉΩÂ§üÈÅøÂÖçÂë¢ÔºüÈ¶ñÂÖàÂèØ‰ª•‰ΩøÁî® dispatch_apply 1dispatch_apply(999, q, ^(size_t i){...}); ÊàñËÄÖ‰ΩøÁî® dispatch_semaphore 1#define CONCURRENT_TASKS 4sema = dispatch_semaphore_create(CONCURRENT_TASKS);for (int i = 0; i &lt; 999; i++){ dispatch_async(q, ^{ dispatch_semaphore_signal(sema); }); dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);} GCD Áõ∏ÂÖ≥ Crash Êó•ÂøóÁÆ°ÁêÜÁ∫øÁ®ãÈóÆÈ¢ò 1234Thread 1:: Dispatch queue: com.apple.libdispatch-manager0 libsystem_kernel.dylib 0x00007fff8967e08a kevent_qos + 101 libdispatch.dylib 0x00007fff8be05811 _dispatch_mgr_invoke + 2512 libdispatch.dylib 0x00007fff8be05465 _dispatch_mgr_thread + 52 Á∫øÁ®ãÈó≤ÁΩÆÊó∂ 1234Thread 6:0 libsystem_kernel.dylib 0x00007fff8967d772 __workq_kernreturn + 101 libsystem_pthread.dylib 0x00007fff8fd317d9 _pthread_wqthread + 12832 libsystem_pthread.dylib 0x00007fff8fd2ed95 start_wqthread + 13 Á∫øÁ®ãÊ¥ªË∑ÉÊó∂ 12345678910Thread 3 Crashed:: Dispatch queue: &lt;queue name&gt;&lt;my code&gt;7 libdispatch.dylib 0x07fff8fcfd323 _dispatch_call_block_and_release8 libdispatch.dylib 0x07fff8fcf8c13 _dispatch_client_callout + 89 libdispatch.dylib 0x07fff8fcfc365 _dispatch_queue_drain + 110010 libdispatch.dylib 0x07fff8fcfdecc _dispatch_queue_invoke + 20211 libdispatch.dylib 0x07fff8fcfb6b7 _dispatch_root_queue_drain + 46312 libdispatch.dylib 0x07fff8fd09fe4 _dispatch_worker_thread3 + 9113 libsystem_pthread.dylib 0x07fff93c17637 _pthread_wqthread + 72914 libsystem_pthread.dylib 0x07fff93c1540d start_wqthread + 13 ‰∏ªÁ∫øÁ®ãÈó≤ÁΩÆÊó∂ 12345678910Thread 0 Crashed:: Dispatch queue: com.apple.main-thread0 libsystem_kernel.dylib 0x00007fff906614de mach_msg_trap + 101 libsystem_kernel.dylib 0x00007fff9066064f mach_msg + 552 com.apple.CoreFoundation 0x00007fff9a8c1eb4 __CFRunLoopServiceMachPort3 com.apple.CoreFoundation 0x00007fff9a8c137b __CFRunLoopRun + 13714 com.apple.CoreFoundation 0x00007fff9a8c0bd8 CFRunLoopRunSpecific + 296...10 com.apple.AppKit 0x00007fff8e823c03 -[NSApplication run] + 59411 com.apple.AppKit 0x00007fff8e7a0354 NSApplicationMain + 183212 com.example 0x00000001000013b4 start + 52 ‰∏ªÈòüÂàó 123456789101112131415Thread 0 Crashed:: Dispatch queue: com.apple.main-thread&lt;my code&gt;12 com.apple.Foundation 0x00007fff931157e8 __NSBLOCKOPERATION_IS_CALLING_OUT_TO_A_BLOCK__ + 713 com.apple.Foundation 0x00007fff931155b5 -[NSBlockOperation main] + 914 com.apple.Foundation 0x00007fff93114a6c -[__NSOperationInternal _start:] + 65315 com.apple.Foundation 0x00007fff93114543 __NSOQSchedule_f + 18416 libdispatch.dylib 0x00007fff935d6c13 _dispatch_client_callout + 817 libdispatch.dylib 0x00007fff935e2cbf _dispatch_main_queue_callback_4CF + 86118 com.apple.CoreFoundation 0x00007fff8d9223f9 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__19 com.apple.CoreFoundation 0x00007fff8d8dd68f __CFRunLoopRun + 215920 com.apple.CoreFoundation 0x00007fff8d8dcbd8 CFRunLoopRunSpecific + 296...26 com.apple.AppKit 0x00007fff999a1bd3 -[NSApplication run] + 59427 com.apple.AppKit 0x00007fff9991e324 NSApplicationMain + 183228 libdyld.dylib 0x00007fff9480f5c9 start + 1 I/O ÊÄßËÉΩ‰ºòÂåñI/O ÊòØÊÄßËÉΩÊ∂àËÄóÂ§ßÊà∑Ôºå‰ªª‰ΩïÁöÑ I/O Êìç‰ΩúÈÉΩ‰ºö‰Ωø‰ΩéÂäüËÄóÁä∂ÊÄÅË¢´ÊâìÁ†¥ÔºåÊâÄ‰ª•ÂáèÂ∞ë I/O Ê¨°Êï∞ÊòØËøô‰∏™ÊÄßËÉΩ‰ºòÂåñÁöÑÂÖ≥ÈîÆÁÇπÔºå‰∏∫‰∫ÜËææÊàêËøô‰∏™ÁõÆ‰∏ãÈù¢ÂàóÂá∫‰∏Ä‰∫õÊñπÊ≥ï„ÄÇ Â∞ÜÈõ∂Á¢éÁöÑÂÜÖÂÆπ‰Ωú‰∏∫‰∏Ä‰∏™Êï¥‰ΩìËøõË°åÂÜôÂÖ• ‰ΩøÁî®ÂêàÈÄÇÁöÑ I/O Êìç‰Ωú API ‰ΩøÁî®ÂêàÈÄÇÁöÑÁ∫øÁ®ã ‰ΩøÁî® NSCache ÂÅöÁºìÂ≠òËÉΩÂ§üÂáèÂ∞ë I/O NSCache ËææÂà∞Â¶ÇÂõæÁöÑÁõÆÁöÑ‰∏∫‰Ωï‰∏çÁõ¥Êé•Áî®Â≠óÂÖ∏Êù•ÂÅöÂë¢ÔºüNSCache ÂÖ∑ÊúâÂ≠óÂÖ∏ÁöÑÊâÄÊúâÂäüËÉΩÔºåÂêåÊó∂ËøòÊúâÂ¶Ç‰∏ãÁöÑÁâπÊÄßÔºö Ëá™Âä®Ê∏ÖÁêÜÁ≥ªÁªüÂç†Áî®ÂÜÖÂ≠ò NSCache ÊòØÁ∫øÁ®ãÂÆâÂÖ® -(void)cache:(NSCache *)cache willEvictObject:(id)obj; ÁºìÂ≠òÂØπË±°Â∞ÜË¢´Ê∏ÖÁêÜÊó∂ÁöÑÂõûË∞É evictsObjectsWithDiscardedContent ÂèØ‰ª•ÊéßÂà∂ÊòØÂê¶Ê∏ÖÁêÜ ÈÇ£‰πà NSCacheÊòØÂ¶Ç‰ΩïÂÅöÂà∞Ëøô‰∫õÁâπÊÄßÁöÑÂë¢Ôºü Êé•‰∏ãÊù•Â≠¶‰π†‰∏ã NSCache ÊòØÂ¶Ç‰ΩïÂÅöÁöÑ„ÄÇÈ¶ñÂÖà NSCache ÊòØ‰ºöÊåÅÊúâ‰∏Ä‰∏™ NSMutableDictionary„ÄÇ 1234567891011@implementation NSCache- (id) init{ if (nil == (self = [super init])) { return nil; } _objects = [NSMutableDictionary new]; _accesses = [NSMutableArray new]; return self;} ÈúÄË¶ÅËÆæËÆ°‰∏Ä‰∏™ Cached ÂØπË±°ÁªìÊûÑÊù•‰øùÂ≠ò‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØ 12345678910@interface _GSCachedObject : NSObject{ @public id object; //cache ÁöÑÂÄº NSString *key; //ËÆæÁΩÆ cache ÁöÑ key int accessCount; //‰øùÂ≠òËÆøÈóÆÊ¨°Êï∞ÔºåÁî®‰∫éËá™Âä®Ê∏ÖÁêÜ NSUInteger cost; //setObject:forKey:cost: BOOL isEvictable; //Á∫øÁ®ãÂÆâÂÖ®}@end Âú® Cache ËØªÂèñÁöÑÊó∂ÂÄô‰ºöÂØπ _accesses Êï∞ÁªÑÁöÑÊ∑ªÂä†Âà†Èô§ÈÄöËøá isEvictable Â∏ÉÂ∞îÂÄºÊù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®Êìç‰Ωú„ÄÇ‰ΩøÁî® Cached ÂØπË±°ÈáåÁöÑ accessCount Â±ûÊÄßËøõË°å +1 Êìç‰Ωú‰∏∫ÂêéÈù¢Ëá™Âä®Ê∏ÖÁêÜÁöÑÊù°‰ª∂Âà§Êñ≠ÂÅöÂáÜÂ§á„ÄÇÂÖ∑‰ΩìÂÆûÁé∞Â¶Ç‰∏ãÔºö 1234567891011121314151617- (id) objectForKey: (id)key{ _GSCachedObject *obj = [_objects objectForKey: key]; if (nil == obj) { return nil; } if (obj-&gt;isEvictable) //‰øùËØÅÊ∑ªÂä†Âà†Èô§Êìç‰ΩúÁ∫øÁ®ãÂÆâÂÖ® { // Â∞Ü obj ÁßªÂà∞ access list Êú´Á´Ø [_accesses removeObjectIdenticalTo: obj]; [_accesses addObject: obj]; } obj-&gt;accessCount++; _totalAccesses++; return obj-&gt;object;} Âú®ÊØèÊ¨° Cache Ê∑ªÂä†Êó∂‰ºöÂÖàÂéªÊ£ÄÊü•ÊòØÂê¶Ëá™Âä®Ê∏ÖÁêÜÔºå‰ºöÂàõÂª∫‰∏Ä‰∏™ Cached ÂØπË±°Â∞Ü keyÔºåobjectÔºåcost Á≠â‰ø°ÊÅØËÆ∞ÂΩï‰∏ãÊ∑ªÂä†Âà∞ _accesses Êï∞ÁªÑÂíå _objects Â≠óÂÖ∏Èáå„ÄÇ 123456789101112131415161718192021222324- (void) setObject: (id)obj forKey: (id)key cost: (NSUInteger)num{ _GSCachedObject *oldObject = [_objects objectForKey: key]; _GSCachedObject *newObject; if (nil != oldObject) { [self removeObjectForKey: oldObject-&gt;key]; } [self _evictObjectsToMakeSpaceForObjectWithCost: num]; newObject = [_GSCachedObject new]; // Retained here, released when obj is dealloc&apos;d newObject-&gt;object = RETAIN(obj); newObject-&gt;key = RETAIN(key); newObject-&gt;cost = num; if ([obj conformsToProtocol: @protocol(NSDiscardableContent)]) { newObject-&gt;isEvictable = YES; [_accesses addObject: newObject]; } [_objects setObject: newObject forKey: key]; RELEASE(newObject); _totalCost += num;} ÈÇ£‰πà‰∏äÈù¢ÊèêÂà∞ÁöÑËá™Âä®Ê∏ÖÁêÜÂÜÖÂ≠òÁöÑÊñπÊ≥ïÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢ÔºüÊó¢ÁÑ∂ÊòØËá™Âä®Ê∏ÖÁêÜÂøÖÂÆöÈúÄË¶ÅÊúâËß¶ÂèëÊó∂Êú∫ÂíåËøõÂÖ•Ê∏ÖÁêÜÁöÑÊù°‰ª∂Âà§Êñ≠ÔºåËß¶ÂèëÊó∂Êú∫‰∏Ä‰∏™ÊòØÂèëÁîüÂú®Ê∑ªÂä† Cache ÂÜÖÂÆπÊó∂Ôºå‰∏Ä‰∏™ÊòØÂèëÁîüÂú®ÂÜÖÂ≠òË≠¶ÂëäÊó∂„ÄÇÊù°‰ª∂Âà§Êñ≠‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678// cost Âú®Ê∑ªÂä†Êñ∞ cache ÂÄºÊó∂ÊåáÂÆöÁöÑ cost// _costLimit ÊòØ totalCostLimit Â±ûÊÄßÂÄºif (_costLimit &gt; 0 &amp;&amp; _totalCost + cost &gt; _costLimit){ spaceNeeded = _totalCost + cost - _costLimit;}// Âè™ÊúâÂΩì cost Â§ß‰∫é‰∫∫Â∑•ÈôêÂà∂Êó∂Êâç‰ºöÊ∏ÖÁêÜ// ÊàñËÄÖ cost ËÆæÁΩÆ‰∏∫0‰∏çËøõË°å‰∫∫Â∑•Âπ≤È¢Ñif (count &gt; 0 &amp;&amp; (spaceNeeded &gt; 0 || count &gt;= _countLimit)) ÊâÄ‰ª• NSCache ÁöÑ totalCostLimit ÁöÑÂÄº‰ºöÂíåÊØèÊ¨° Cache Ê∑ªÂä†ÁöÑ cost ‰πãÂíåÂØπÊØîÔºåË∂ÖÂá∫ÈôêÂà∂ÂøÖÁÑ∂Ëß¶ÂèëÂÜÖÂ≠òÊ∏ÖÁêÜ„ÄÇ Ê∏ÖÁêÜÊó∂‰ºöÂØπÁªèÂ∏∏ËÆøÈóÆÁöÑ objects ‰∏çÊ∏ÖÁêÜÔºå‰∏ªË¶ÅÊòØÈÄöËøá _totalAccesses ÂíåÊÄªÊï∞Ëé∑ÂæóÂπ≥ÂùáËÆøÈóÆÈ¢ëÁéáÔºåÂ¶ÇÊûúÈÇ£‰∏™ÂØπË±°ÁöÑËÆøÈóÆÊ¨°Êï∞ÊòØÂ∞è‰∫éÂπ≥ÂùáÂÄºÁöÑÊâçÈúÄË¶ÅÊ∏ÖÁêÜ„ÄÇ 1234//_totalAccesses ÊâÄÊúâÁöÑÂÄºÁöÑËÆøÈóÆÈÉΩ‰ºö +1NSUInteger averageAccesses = (_totalAccesses / count * 0.2) + 1;//accessCount ÊØèÊ¨° obj ÂèñÂÄºÊó∂‰ºö +1if (obj-&gt;accessCount &lt; averageAccesses &amp;&amp; obj-&gt;isEvictable) Âú®Ê∏ÖÁêÜ‰πãÂâçËøòÈúÄË¶Å‰∏Ä‰∫õÂáÜÂ§áÂ∑•‰ΩúÔºåÂåÖÊã¨Ê†áËÆ∞ Cached ÂØπË±°ÁöÑ isEvictable Èò≤Ê≠¢ÂêéÈù¢Êúâ‰∏çÂÆâÂÖ®ÁöÑÁ∫øÁ®ãÊìç‰Ωú„ÄÇÂ∞ÜÊª°Ë∂≥Êù°‰ª∂ÁöÑÊ∏ÖÁêÜ objects ÊîæÂà∞Ê∏ÖÁêÜÊï∞ÁªÑÈáåÔºåÂ¶ÇÊûúÁ©∫Èó¥ÈáäÊîæË∂≥Â§üÂ∞±‰∏çÁî®ÂÜçÊääÊõ¥Â§öÁöÑ objects Âä†Âà∞Ê∏ÖÁêÜÊï∞ÁªÑÈáå‰∫ÜÔºåÊúÄÂêéÈÅçÂéÜÊ∏ÖÁêÜÊï∞ÁªÑËøõË°åÈÄê‰∏™Ê∏ÖÁêÜÂç≥ÂèØ„ÄÇ 12345678910111213141516NSUInteger cost = obj-&gt;cost;obj-&gt;cost = 0;// ‰∏ç‰ºöË¢´ÂÜçÊ¨°Ê∏ÖÈô§obj-&gt;isEvictable = NO;// Ê∑ªÂä†Âà∞ remove list Èáåif (_evictsObjectsWithDiscardedContent){ [evictedKeys addObject: obj-&gt;key];}_totalCost -= cost;// Â¶ÇÊûúÂ∑≤ÁªèÈáäÊîæ‰∫ÜË∂≥Â§üÁ©∫Èó¥Â∞±‰∏çÁî®ÂêéÈù¢Êìç‰Ωú‰∫Üif (cost &gt; spaceNeeded){ break;}spaceNeeded -= cost; Âú®Ê∏ÖÁêÜÊó∂‰ºöÊâßË°åÂõûË∞ÉÂÜÖÂÆπÔºåËøôÊ†∑Â¶ÇÊûúÊúâ‰∫õÁºìÂ≠òÊï∞ÊçÆÈúÄË¶ÅÊåÅÁª≠ÂåñÂ≠òÂÇ®ÂèØ‰ª•Âú®ÂõûË∞ÉÈáåËøõË°åÂ§ÑÁêÜ„ÄÇ 123456789101112- (void) removeObjectForKey: (id)key{ _GSCachedObject *obj = [_objects objectForKey: key]; if (nil != obj) { [_delegate cache: self willEvictObject: obj-&gt;object]; _totalAccesses -= obj-&gt;accessCount; [_objects removeObjectForKey: key]; [_accesses removeObjectIdenticalTo: obj]; }} ÂÆåÊï¥ÁöÑÂÆûÁé∞ÂèØ‰ª•Êü•Áúã GNUstep Base ÁöÑ NSCache.m Êñá‰ª∂„ÄÇ ‰∏ãÈù¢ÂèØ‰ª•ÁúãÁúã NSCache Âú® SDWebImage ÁöÑËøêÁî®ÊòØÊÄé‰πàÊ†∑ÁöÑÔºö 1234567891011121314151617- (UIImage *)imageFromMemoryCacheForKey:(NSString *)key { return [self.memCache objectForKey:key];}- (UIImage *)imageFromDiskCacheForKey:(NSString *)key { // Ê£ÄÊü• NSCache ÈáåÊòØÂê¶Êúâ UIImage *image = [self imageFromMemoryCacheForKey:key]; if (image) { return image; } // ‰ªéÁ£ÅÁõòÈáåËØª UIImage *diskImage = [self diskImageForKey:key]; if (diskImage &amp;&amp; self.shouldCacheImagesInMemory) { NSUInteger cost = SDCacheCostForImage(diskImage); [self.memCache setObject:diskImage forKey:key cost:cost]; } return diskImage;} ÂèØ‰ª•ÁúãÂá∫Âà©Áî® NSCache Ëá™Âä®ÈáäÊîæÂÜÖÂ≠òÁöÑÁâπÁÇπÂ∞ÜÂõæÁâáÈÉΩÊîæÂà∞ NSCache ÈáåËøôÊ†∑Âú®ÂÜÖÂ≠ò‰∏çÂ§üÁî®Êó∂ÂèØ‰ª•Ëá™Âä®Ê∏ÖÁêÜÊéâ‰∏çÂ∏∏Áî®ÁöÑÈÇ£‰∫õÂõæÁâáÔºåÂú®ËØªÂèñ Cache ÈáåÂÜÖÂÆπÊó∂Â¶ÇÊûúÊ≤°ÊúâË¢´Ê∏ÖÁêÜ‰ºöÁõ¥Êé•ËøîÂõûÂõæÁâáÊï∞ÊçÆÔºåÊ∏ÖÁêÜ‰∫ÜÁöÑËØùÊâç‰ºöÊâßË°å I/O ‰ªéÁ£ÅÁõòËØªÂèñÂõæÁâáÔºåÈÄöËøáËøôÁßçÊñπÂºèËÉΩÂ§üÂà©Áî®Á©∫Èó¥ÂáèÂ∞ëÁ£ÅÁõòÊìç‰ΩúÔºåÁ©∫Èó¥‰πüËÉΩÂ§üÊõ¥Âä†ÊúâÊïàÁöÑÊéßÂà∂ÈáäÊîæ„ÄÇ ÊéßÂà∂ App ÁöÑ Wake Ê¨°Êï∞ÈÄöÁü•ÔºåVoIPÔºåÂÆö‰ΩçÔºåËìùÁâôÁ≠âÈÉΩ‰ºö‰ΩøËÆæÂ§á‰ªé Standby Áä∂ÊÄÅÂî§Ëµ∑„ÄÇÂî§Ëµ∑Ëøô‰∏™ËøáÁ®ã‰ºöÊúâÊØîËæÉÂ§ßÁöÑÊ∂àËÄóÔºåÂ∫îËØ•ÈÅøÂÖçÈ¢ëÁπÅÂèëÁîü„ÄÇÈÄöÁü•ÊñπÈù¢‰∏ªË¶ÅË¶ÅÂú®‰∫ßÂìÅÂ±ÇÈù¢Â§öÂÅöËÄÉËôë„ÄÇÂÆö‰ΩçÊñπÈù¢Ôºå‰∏ãÈù¢ÂèØ‰ª•ÁúãÁúãÂÆö‰ΩçÁöÑ‰∏Ä‰∫õ API ÁúãÁúãÂÆÉ‰ª¨ÂØπÊÄßËÉΩÁöÑ‰∏çÂêåÂΩ±ÂìçÔºå‰æø‰∫éËÄÉËôëÈááÁî®ÂêàÈÄÇÁöÑÊé•Âè£„ÄÇ ËøûÁª≠ÁöÑ‰ΩçÁΩÆÊõ¥Êñ∞ 1[locationManager startUpdatingLocation] Ëøô‰∏™ÊñπÊ≥ï‰ºöÊó∂ËÆæÂ§á‰∏ÄÁõ¥Â§Ñ‰∫éÊ¥ªË∑ÉÁä∂ÊÄÅ„ÄÇ Âª∂Êó∂ÊúâÊïàÂÆö‰Ωç 1[locationManager allowDeferredLocationUpdatesUntilTraveled: timeout:] È´òÊïàËäÇËÉΩÁöÑÂÆö‰ΩçÊñπÂºèÔºåÊï∞ÊçÆ‰ºöÁºìÂ≠òÂú®‰ΩçÁΩÆÁ°¨‰ª∂‰∏ä„ÄÇÈÄÇÂêà‰∫éË∑ëÊ≠•Â∫îÁî®Â∫îËØ•ÈÉΩÈááÁî®ËøôÁßçÊñπÂºè„ÄÇ ÈáçÂ§ß‰ΩçÁΩÆÂèòÂåñ 1[locationManager startMonitoringSignificantLocationChanges] ‰ºöÊõ¥ËäÇËÉΩÔºåÂØπ‰∫éÈÇ£‰∫õÂè™ÊúâÂú®‰ΩçÁΩÆÊúâÂæàÂ§ßÂèòÂåñÁöÑÊâçÈúÄË¶ÅÂõûË∞ÉÁöÑÂ∫îÁî®ÂèØ‰ª•ÈááÁî®ËøôÁßçÔºåÊØîÂ¶ÇÂ§©Ê∞îÂ∫îÁî®„ÄÇ Âå∫ÂüüÁõëÊµã 1[locationManager startMonitoringForRegion:(CLRegion *)] ‰πüÊòØ‰∏ÄÁßçËäÇËÉΩÁöÑÂÆö‰ΩçÊñπÂºèÔºåÊØîÂ¶ÇÂú®ÂçöÁâ©È¶ÜÈáåÊåâÁÖß‰∏çÂêåÂå∫ÂüüÁõëÊµãÂ±ïÁ§∫‰∏çÂêå‰ø°ÊÅØ‰πãÁ±ªÁöÑÂ∫îÁî®ÊØîËæÉÈÄÇÂêàËøôÁßçÂÆö‰Ωç„ÄÇ ÁªèÂ∏∏ËÆøÈóÆÁöÑÂú∞Êñπ 1// Start monitoringlocationManager.startMonitoringVisits()// Stop monitoring when no longer neededlocationManager.stopMonitoringVisits() ÊÄªÁöÑÊù•ËØ¥Ôºå‰∏çË¶ÅËΩªÊòì‰ΩøÁî® startUpdatingLocation() Èô§Èùû‰∏á‰∏çÂæóÂ∑≤ÔºåÂ∞ΩÂø´ÁöÑ‰ΩøÁî® stopUpdatingLocation() Êù•ÁªìÊùüÂÆö‰ΩçËøòÁî®Êà∑‰∏Ä‰∏™ËäÇËÉΩËÆæÂ§á„ÄÇ ÂÜÖÂ≠òÂØπ‰∫éÊÄßËÉΩÁöÑÂΩ±ÂìçÈ¶ñÂÖà Reclaiming ÂÜÖÂ≠òÊòØÈúÄË¶ÅÊó∂Èó¥ÁöÑÔºåÁ™ÅÁÑ∂ÁöÑÂ§ßÈáèÂÜÖÂ≠òÈúÄÊ±ÇÊòØ‰ºöÂΩ±ÂìçÂìçÂ∫îÁöÑ„ÄÇ Â¶Ç‰ΩïÈ¢ÑÈò≤Ëøô‰∫õÊÄßËÉΩÈóÆÈ¢òÔºåÈúÄË¶ÅÂàªÊÑèÈ¢ÑÈò≤‰πàÂùöÊåÅ‰∏ãÈù¢Âá†‰∏™ÂéüÂàô‰∫âÂèñÂú®ÁºñÁ†ÅÈò∂ÊÆµÈÅøÂÖç‰∏Ä‰∫õÊÄßËÉΩÈóÆÈ¢ò„ÄÇ ‰ºòÂåñËÆ°ÁÆóÁöÑÂ§çÊùÇÂ∫¶‰ªéËÄåÂáèÂ∞ë CPU ÁöÑ‰ΩøÁî® Âú®Â∫îÁî®ÂìçÂ∫î‰∫§‰∫íÁöÑÊó∂ÂÄôÂÅúÊ≠¢Ê≤°ÂøÖË¶ÅÁöÑ‰ªªÂä°Â§ÑÁêÜ ËÆæÁΩÆÂêàÈÄÇÁöÑ QoS Â∞ÜÂÆöÊó∂Âô®‰ªªÂä°ÂêàÂπ∂ÔºåËÆ© CPU Êõ¥Â§öÊó∂ÂÄôÂ§Ñ‰∫é idle Áä∂ÊÄÅ ÈÇ£‰πàÂ¶ÇÊûúÂÜôÈúÄÊ±ÇÊó∂Êù•‰∏çÂèäÊ≥®ÊÑèËøô‰∫õÈóÆÈ¢òÂÅö‰∏çÂà∞È¢ÑÈò≤ÁöÑËØùÔºåÂèØ‰ª•ÈÄöËøáËá™Âä®Âåñ‰ª£Á†ÅÊ£ÄÊü•ÁöÑÊñπÂºèÊù•ÈÅøÂÖçËøô‰∫õÈóÆÈ¢òÂêóÔºü Â¶Ç‰ΩïÊ£ÄÊü•Ê†πÊçÆËøô‰∫õÈóÆÈ¢òÂú®‰ª£Á†ÅÈáåÊü•ÔºåÂÜôÂ∑•ÂÖ∑ÊàñÁî®Â∑•ÂÖ∑Ëá™Âä®ÂåñÊü•ÔºüËôΩÁÑ∂ÂèØ‰ª•Ôºå‰ΩÜÊòØÈúÄË¶ÅËÄÉËôëÁöÑÊÉÖÂÜµÂ§™Â§öÔºåÁé∞ÊúâÂ∑•ÂÖ∑ÊîØÊåÅ‰∏çÂ•ΩÔºåËá™Â∑±ÂÜôÈúÄË¶ÅËÄÉËôëÁöÑÁÇπÂ§™Â§öÈúÄË¶ÅËä±Ë¥πÂ§™ÈïøÁöÑÊó∂Èó¥ÔºåÈÇ£‰πà‰ªÄ‰πàÊñπÂºè‰ºöÊØîËæÉÂ•ΩÂë¢Ôºü ÈÄöËøáÁõëÂê¨‰∏ªÁ∫øÁ®ãÊñπÂºèÊù•ÁõëÂØüÈ¶ñÂÖàÁî® CFRunLoopObserverCreate ÂàõÂª∫‰∏Ä‰∏™ËßÇÂØüËÄÖÈáåÈù¢Êé•Âèó CFRunLoopActivity ÁöÑÂõûË∞ÉÔºåÁÑ∂ÂêéÁî® CFRunLoopAddObserver Â∞ÜËßÇÂØüËÄÖÊ∑ªÂä†Âà∞ CFRunLoopGetMain() ‰∏ªÁ∫øÁ®ã Runloop ÁöÑ kCFRunLoopCommonModes Ê®°Âºè‰∏ãËøõË°åËßÇÂØü„ÄÇ Êé•‰∏ãÊù•ÂàõÂª∫‰∏Ä‰∏™Â≠êÁ∫øÁ®ãÊù•ËøõË°åÁõëÊéßÔºå‰ΩøÁî® dispatch_semaphore_wait ÂÆö‰πâÂå∫Èó¥Êó∂Èó¥ÔºåÊ†áÂáÜÊòØ 16 Êàñ 20 ÂæÆÁßí‰∏ÄÊ¨°ÁõëÊéßÁöÑËØùÂü∫Êú¨ÂèØ‰ª•ÊääÂΩ±ÂìçÂìçÂ∫îÁöÑÈÉΩÊâæÂá∫Êù•„ÄÇÁõëÊéßÁªìÊûúÁöÑÊ†áÂáÜÊòØÊ†πÊçÆ‰∏§‰∏™ Runloop ÁöÑÁä∂ÊÄÅ BeforeSources Âíå AfterWaiting Âú®Âå∫Èó¥Êó∂Èó¥ÊòØÂê¶ËÉΩÊ£ÄÊµãÂà∞Êù•Âà§Êñ≠ÊòØÂê¶Âç°È°ø„ÄÇ Â¶Ç‰ΩïÊâìÂç∞Â†ÜÊ†à‰ø°ÊÅØÔºå‰øùÂ≠òÁé∞Âú∫ÊâìÂç∞Â†ÜÊ†àÊï¥‰ΩìÊÄùË∑ØÊòØËé∑ÂèñÁ∫øÁ®ãÁöÑ‰ø°ÊÅØÂæóÂà∞Á∫øÁ®ãÁöÑ state ‰ªéËÄåÂæóÂà∞Á∫øÁ®ãÈáåÊâÄÊúâÊ†àÁöÑÊåáÈíàÔºåÊ†πÊçÆËøô‰∫õÊåáÈíàÂú® Á¨¶Âè∑Ë°®ÈáåÊâæÂà∞ÂØπÂ∫îÁöÑÊèèËø∞Âç≥Á¨¶Âè∑ÂåñËß£ÊûêÔºåËøôÊ†∑Â∞±ËÉΩÂ§üÂ±ïÁ§∫Âá∫ÂèØËØªÁöÑÂ†ÜÊ†à‰ø°ÊÅØ„ÄÇÂÖ∑‰ΩìÂÆûÁé∞ÊòØÊÄéÊ†∑ÁöÑÂë¢Ôºü‰∏ãÈù¢ËØ¶ÁªÜËØ¥ËØ¥Ôºö Ëé∑ÂèñÁ∫øÁ®ãÁöÑ‰ø°ÊÅØËøôÈáåÈ¶ñÂÖàÊòØË¶ÅÈÄöËøá task_threads ÂèñÂà∞ÊâÄÊúâÁöÑÁ∫øÁ®ãÔºå 12345thread_act_array_t threads; //int ÁªÑÊàêÁöÑÊï∞ÁªÑÊØîÂ¶Ç thread[1] = 5635mach_msg_type_number_t thread_count = 0; //mach_msg_type_number_t ÊòØ int Á±ªÂûãconst task_t this_task = mach_task_self(); //int//Ê†πÊçÆÂΩìÂâç task Ëé∑ÂèñÊâÄÊúâÁ∫øÁ®ãkern_return_t kr = task_threads(this_task, &amp;threads, &amp;thread_count); ÈÅçÂéÜÊó∂ÈÄöËøá thread_info Ëé∑ÂèñÂêÑ‰∏™Á∫øÁ®ãÁöÑËØ¶ÁªÜ‰ø°ÊÅØ 12345678910111213141516SMThreadInfoStruct threadInfoSt = {0};thread_info_data_t threadInfo;thread_basic_info_t threadBasicInfo;mach_msg_type_number_t threadInfoCount = THREAD_INFO_MAX;if (thread_info((thread_act_t)thread, THREAD_BASIC_INFO, (thread_info_t)threadInfo, &amp;threadInfoCount) == KERN_SUCCESS) { threadBasicInfo = (thread_basic_info_t)threadInfo; if (!(threadBasicInfo-&gt;flags &amp; TH_FLAGS_IDLE)) { threadInfoSt.cpuUsage = threadBasicInfo-&gt;cpu_usage / 10; threadInfoSt.userTime = threadBasicInfo-&gt;system_time.microseconds; }}uintptr_t buffer[100];int i = 0;NSMutableString *reStr = [NSMutableString stringWithFormat:@&quot;Stack of thread: %u:\\n CPU used: %.1f percent\\n user time: %d second\\n&quot;, thread, threadInfoSt.cpuUsage, threadInfoSt.userTime]; Ëé∑ÂèñÁ∫øÁ®ãÈáåÊâÄÊúâÊ†àÁöÑ‰ø°ÊÅØÂèØ‰ª•ÈÄöËøá thread_get_state ÂæóÂà∞ machine context ÈáåÈù¢ÂåÖÂê´‰∫ÜÁ∫øÁ®ãÊ†àÈáåÊâÄÊúâÁöÑÊ†àÊåáÈíà„ÄÇ 1234_STRUCT_MCONTEXT machineContext; //Á∫øÁ®ãÊ†àÈáåÊâÄÊúâÁöÑÊ†àÊåáÈíà//ÈÄöËøá thread_get_state Ëé∑ÂèñÂÆåÊï¥ÁöÑ machineContext ‰ø°ÊÅØÔºåÂåÖÂê´ thread Áä∂ÊÄÅ‰ø°ÊÅØmach_msg_type_number_t state_count = smThreadStateCountByCPU();kern_return_t kr = thread_get_state(thread, smThreadStateByCPU(), (thread_state_t)&amp;machineContext.__ss, &amp;state_count); ÂàõÂª∫‰∏Ä‰∏™Ê†àÁªìÊûÑ‰ΩìÁî®Êù•‰øùÂ≠òÊ†àÁöÑÊï∞ÊçÆ 123456789101112131415161718//‰∏∫ÈÄöÁî®ÂõûÊ∫ØËÆæËÆ°ÁªìÊûÑÊîØÊåÅÊ†àÂú∞ÂùÄÁî±Â∞èÂà∞Â§ßÔºåÂú∞ÂùÄÈáåÂ≠òÂÇ®‰∏ä‰∏™Ê†àÊåáÈíàÁöÑÂú∞ÂùÄtypedef struct SMStackFrame { const struct SMStackFrame *const previous; const uintptr_t return_address;} SMStackFrame;SMStackFrame stackFrame = {0};//ÈÄöËøáÊ†àÂü∫ÂùÄÊåáÈíàËé∑ÂèñÂΩìÂâçÊ†àÂ∏ßÂú∞ÂùÄconst uintptr_t framePointer = smMachStackBasePointerByCPU(&amp;machineContext);if (framePointer == 0 || smMemCopySafely((void *)framePointer, &amp;stackFrame, sizeof(stackFrame)) != KERN_SUCCESS) { return @&quot;Fail frame pointer&quot;;}for (; i &lt; 32; i++) { buffer[i] = stackFrame.return_address; if (buffer[i] == 0 || stackFrame.previous == 0 || smMemCopySafely(stackFrame.previous, &amp;stackFrame, sizeof(stackFrame)) != KERN_SUCCESS) { break; }} Á¨¶Âè∑ÂåñÁ¨¶Âè∑Âåñ‰∏ªË¶ÅÊÄùÊÉ≥Â∞±ÊòØÈÄöËøáÊ†àÊåáÈíàÂú∞ÂùÄÂáèÂéª Slide Âú∞ÂùÄÂæóÂà∞ ASLR ÂÅèÁßªÈáèÔºåÈÄöËøáËøô‰∏™ÂÅèÁßªÈáèÂèØ‰ª•Âú® __LINKEDIT segment Êü•ÊâæÂà∞Â≠óÁ¨¶‰∏≤ÂíåÁ¨¶Âè∑Ë°®ÁöÑ‰ΩçÁΩÆ„ÄÇÂÖ∑‰Ωì‰ª£Á†ÅÂÆûÁé∞Â¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394info-&gt;dli_fname = NULL;info-&gt;dli_fbase = NULL;info-&gt;dli_sname = NULL;info-&gt;dli_saddr = NULL;//Ê†πÊçÆÂú∞ÂùÄËé∑ÂèñÊòØÂì™‰∏™ imageconst uint32_t idx = smDyldImageIndexFromAddress(address);if (idx == UINT_MAX) { return false;}/* Header ------------------ Load commands Segment command 1 -------------| Segment command 2 | ------------------ | Data | Section 1 data |segment 1 &lt;----| Section 2 data | &lt;----| Section 3 data | &lt;----| Section 4 data |segment 2 Section 5 data | ... | Section n data | *//*----------Mach Header---------*///Ê†πÊçÆ image ÁöÑÂ∫èÂè∑Ëé∑Âèñ mach_headerconst struct mach_header* machHeader = _dyld_get_image_header(idx);//ËøîÂõû image_index Á¥¢ÂºïÁöÑ image ÁöÑËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄ slide ÁöÑÊï∞ÈáèÔºåÂ¶ÇÊûú image_index Ë∂ÖÂá∫ËåÉÂõ¥ËøîÂõû0//Âä®ÊÄÅÈìæÊé•Âô®Âä†ËΩΩ image Êó∂Ôºåimage ÂøÖÈ°ªÊò†Â∞ÑÂà∞Êú™Âç†Áî®Âú∞ÂùÄÁöÑËøõÁ®ãÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥„ÄÇÂä®ÊÄÅÈìæÊé•Âô®ÈÄöËøáÊ∑ªÂä†‰∏Ä‰∏™ÂÄºÂà∞ image ÁöÑÂü∫Âú∞ÂùÄÊù•ÂÆûÁé∞ÔºåËøô‰∏™ÂÄºÊòØËôöÊãüÂÜÖÂ≠ò slide Êï∞Èáèconst uintptr_t imageVMAddressSlide = (uintptr_t)_dyld_get_image_vmaddr_slide(idx);/*-----------ASLR ÁöÑÂÅèÁßªÈáè---------*///https://en.wikipedia.org/wiki/Address_space_layout_randomizationconst uintptr_t addressWithSlide = address - imageVMAddressSlide;//Ê†πÊçÆ Image ÁöÑ Index Êù•Ëé∑Âèñ segment ÁöÑÂü∫Âú∞ÂùÄ//ÊÆµÂÆö‰πâMach-OÊñá‰ª∂‰∏≠ÁöÑÂ≠óËäÇËåÉÂõ¥‰ª•ÂèäÂä®ÊÄÅÈìæÊé•Âô®Âä†ËΩΩÂ∫îÁî®Á®ãÂ∫èÊó∂Ëøô‰∫õÂ≠óËäÇÊò†Â∞ÑÂà∞ËôöÊãüÂÜÖÂ≠ò‰∏≠ÁöÑÂú∞ÂùÄÂíåÂÜÖÂ≠ò‰øùÊä§Â±ûÊÄß„ÄÇ Âõ†Ê≠§ÔºåÊÆµÊÄªÊòØËôöÊãüÂÜÖÂ≠òÈ°µÂØπÈΩê„ÄÇ ÁâáÊÆµÂåÖÂê´Èõ∂‰∏™ÊàñÂ§ö‰∏™ËäÇ„ÄÇconst uintptr_t segmentBase = smSegmentBaseOfImageIndex(idx) + imageVMAddressSlide;if (segmentBase == 0) { return false;}//info-&gt;dli_fname = _dyld_get_image_name(idx);info-&gt;dli_fbase = (void*)machHeader;/*--------------Mach Segment-------------*///Âú∞ÂùÄÊúÄÂåπÈÖçÁöÑsymbolconst nlistByCPU* bestMatch = NULL;uintptr_t bestDistance = ULONG_MAX;uintptr_t cmdPointer = smCmdFirstPointerFromMachHeader(machHeader);if (cmdPointer == 0) { return false;}//ÈÅçÂéÜÊØè‰∏™ segment Âà§Êñ≠ÁõÆÊ†áÂú∞ÂùÄÊòØÂê¶ËêΩÂú®ËØ• segment ÂåÖÂê´ÁöÑËåÉÂõ¥Èáåfor (uint32_t iCmd = 0; iCmd &lt; machHeader-&gt;ncmds; iCmd++) { const struct load_command* loadCmd = (struct load_command*)cmdPointer; /*----------ÁõÆÊ†á Image ÁöÑÁ¨¶Âè∑Ë°®----------*/ //Segment Èô§‰∫Ü __TEXT Âíå __DATA Â§ñËøòÊúâ __LINKEDIT segmentÔºåÂÆÉÈáåÈù¢ÂåÖÂê´Âä®ÊÄÅÈìæÊé•Âô®ÁöÑ‰ΩøÁî®ÁöÑÂéüÂßãÊï∞ÊçÆÔºåÊØîÂ¶ÇÁ¨¶Âè∑ÔºåÂ≠óÁ¨¶‰∏≤ÂíåÈáçÂÆö‰ΩçË°®È°π„ÄÇ //LC_SYMTAB ÊèèËø∞‰∫Ü __LINKEDIT segment ÂÜÖÊü•ÊâæÂ≠óÁ¨¶‰∏≤ÂíåÁ¨¶Âè∑Ë°®ÁöÑ‰ΩçÁΩÆ if (loadCmd-&gt;cmd == LC_SYMTAB) { //Ëé∑ÂèñÂ≠óÁ¨¶‰∏≤ÂíåÁ¨¶Âè∑Ë°®ÁöÑËôöÊãüÂÜÖÂ≠òÂÅèÁßªÈáè„ÄÇ const struct symtab_command* symtabCmd = (struct symtab_command*)cmdPointer; const nlistByCPU* symbolTable = (nlistByCPU*)(segmentBase + symtabCmd-&gt;symoff); const uintptr_t stringTable = segmentBase + symtabCmd-&gt;stroff; for (uint32_t iSym = 0; iSym &lt; symtabCmd-&gt;nsyms; iSym++) { //Â¶ÇÊûú n_value ÊòØ0Ôºåsymbol ÊåáÂêëÂ§ñÈÉ®ÂØπË±° if (symbolTable[iSym].n_value != 0) { //ÁªôÂÆöÁöÑÂÅèÁßªÈáèÊòØÊñá‰ª∂ÂÅèÁßªÈáèÔºåÂáèÂéª __LINKEDIT segment ÁöÑÊñá‰ª∂ÂÅèÁßªÈáèËé∑ÂæóÂ≠óÁ¨¶‰∏≤ÂíåÁ¨¶Âè∑Ë°®ÁöÑËôöÊãüÂÜÖÂ≠òÂÅèÁßªÈáè uintptr_t symbolBase = symbolTable[iSym].n_value; uintptr_t currentDistance = addressWithSlide - symbolBase; //ÂØªÊâæÊúÄÂ∞èÁöÑË∑ùÁ¶ª bestDistanceÔºåÂõ†‰∏∫ addressWithSlide ÊòØÊüê‰∏™ÊñπÊ≥ïÁöÑÊåá‰ª§Âú∞ÂùÄÔºåË¶ÅÂ§ß‰∫éËøô‰∏™ÊñπÊ≥ïÁöÑÂÖ•Âè£„ÄÇ //Á¶ª addressWithSlide Ë∂äËøëÁöÑÂáΩÊï∞ÂÖ•Âè£Ë∂äÂåπÈÖç if ((addressWithSlide &gt;= symbolBase) &amp;&amp; (currentDistance &lt;= bestDistance)) { bestMatch = symbolTable + iSym; bestDistance = currentDistance; } } } if (bestMatch != NULL) { //Â∞ÜËôöÊãüÂÜÖÂ≠òÂÅèÁßªÈáèÊ∑ªÂä†Âà∞ __LINKEDIT segment ÁöÑËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄÂèØ‰ª•Êèê‰æõÂ≠óÁ¨¶‰∏≤ÂíåÁ¨¶Âè∑Ë°®ÁöÑÂÜÖÂ≠ò address„ÄÇ info-&gt;dli_saddr = (void*)(bestMatch-&gt;n_value + imageVMAddressSlide); info-&gt;dli_sname = (char*)((intptr_t)stringTable + (intptr_t)bestMatch-&gt;n_un.n_strx); if (*info-&gt;dli_sname == &apos;_&apos;) { info-&gt;dli_sname++; } //ÊâÄÊúâÁöÑ symbols ÁöÑÂ∑≤ÁªèË¢´Â§ÑÁêÜÂ•Ω‰∫Ü if (info-&gt;dli_saddr == info-&gt;dli_fbase &amp;&amp; bestMatch-&gt;n_type == 3) { info-&gt;dli_sname = NULL; } break; } } cmdPointer += loadCmd-&gt;cmdsize;} ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂú∞ÊñπÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØËøô‰∏™Á®ãÂ∫èÊúâÊ∂àËÄóÊÄßËÉΩÁöÑÂú∞Êñπ thread get state„ÄÇËøô‰∏™‰πü‰ºöË¢´ÁõëÊéßÊ£ÄÊü•Âá∫ÔºåÊâÄ‰ª•ÂèØ‰ª•ËøáÊª§ÊéâËøôÊ†∑ÁöÑÂ†ÜÊ†à‰ø°ÊÅØ„ÄÇ Â§üËé∑ÂèñÊõ¥Â§ö‰ø°ÊÅØÁöÑÊñπÊ≥ïËé∑ÂèñÊõ¥Â§ö‰ø°ÊÅØÊØîÂ¶ÇÂÖ®Â±ÇÁ∫ßÊñπÊ≥ïË∞ÉÁî®ÂíåÊØè‰∏™ÊñπÊ≥ïÊ∂àËÄóÁöÑÊó∂Èó¥ÔºåÈÇ£‰πàËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂú®Âì™Âë¢Ôºü ÂèØ‰ª•Êõ¥ÁªÜÂåñÁöÑÊµãÈáèÊó∂Èó¥Ê∂àËÄóÔºåÊâæÂà∞ËÄóÊó∂ÊñπÊ≥ïÔºåÊõ¥Âø´ÁöÑ‰∫§‰∫íÊìç‰ΩúËÉΩ‰ΩøÁî®Êà∑‰ΩìÈ™åÊõ¥Â•ΩÔºå‰∏ãÈù¢ÊòØ‰∏Ä‰∫õÂèØ‰ª•ÂéªË°°ÈáèÁöÑÂú∫ÊôØÔºö ÂìçÂ∫îËÉΩÂäõ ÊåâÈíÆÁÇπÂáª ÊâãÂäøÊìç‰Ωú Tab ÂàáÊç¢ vc ÁöÑÂàáÊç¢ÂíåËΩ¨Âú∫ ÂèØ‰ª•Áªô‰ºòÂåñÂÆö‰∏™ÁõÆÊ†áÔºåÊØîÂ¶ÇÊªöÂä®ÂíåÂä®ÁîªËææÂà∞ 60fpsÔºåÂìçÂ∫îÁî®Êà∑Êìç‰ΩúÂú® 100ms ÂÜÖÂÆåÊàê„ÄÇÁÑ∂ÂêéÈÄê‰∏™Ê£ÄÊµãÂá∫Êù• fix Êéâ„ÄÇ Â¶Ç‰ΩïËé∑ÂèñÂà∞Êõ¥Â§ö‰ø°ÊÅØÂë¢Ôºü ÈÄöËøá hook objc_msgSend ÊñπÊ≥ïËÉΩÂ§üËé∑ÂèñÊâÄÊúâË¢´Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÔºåËÆ∞ÂΩïÊ∑±Â∫¶Â∞±ËÉΩÂ§üÂæóÂà∞ÊñπÊ≥ïË∞ÉÁî®ÁöÑÊ†ëÁä∂ÁªìÊûÑÔºåÈÄöËøáÊâßË°åÂâçÂêéÊó∂Èó¥ÁöÑËÆ∞ÂΩïËÉΩÂ§üÂæóÂà∞ÊØè‰∏™ÊñπÊ≥ïÁöÑËÄóÊó∂ÔºåËøôÊ†∑Â∞±ËÉΩËé∑Âèñ‰∏Ä‰ªΩÂÆåÊï¥ÁöÑÊÄßËÉΩÊ∂àËÄó‰ø°ÊÅØ‰∫Ü„ÄÇ hook c ÂáΩÊï∞ÂèØ‰ª•‰ΩøÁî® facebook ÁöÑ fishhookÔºå Ëé∑ÂèñÊñπÊ≥ïË∞ÉÁî®Ê†ëÁä∂ÁªìÊûÑÂèØ‰ª•‰ΩøÁî® InspectiveCÔºå‰∏ãÈù¢ÂØπ‰∫é‰ªñ‰ª¨ÁöÑÂÆûÁé∞ËØ¶ÁªÜ‰ªãÁªç‰∏Ä‰∏ãÔºö Ëé∑ÂèñÊñπÊ≥ïË∞ÉÁî®Ê†ëÁªìÊûÑÈ¶ñÂÖàËÆæËÆ°‰∏§‰∏™ÁªìÊûÑ‰ΩìÔºåCallRecord ËÆ∞ÂΩïË∞ÉÁî®ÊñπÊ≥ïËØ¶ÁªÜ‰ø°ÊÅØÔºåÂåÖÊã¨ obj Âíå SEL Á≠âÔºåThreadCallStack ÈáåÈù¢ÈúÄË¶ÅÁî® index ËÆ∞ÂΩïÂΩìÂâçË∞ÉÁî®ÊñπÊ≥ïÊ†ëÁöÑÊ∑±Â∫¶„ÄÇÊúâ‰∫Ü SEL ÂÜçÈÄöËøá NSStringFromSelector Â∞±ËÉΩÂ§üÂèñÂæóÊñπÊ≥ïÂêçÔºåÊúâ‰∫Ü obj ÈÄöËøá object_getClass ËÉΩÂ§üÂæóÂà∞ Class ÂÜçÁî® NSStringFromClass Â∞±ËÉΩÂ§üËé∑ÂæóÁ±ªÂêç„ÄÇ 123456789101112131415161718192021// Shared structures.typedef struct CallRecord_ { id obj; //ÈÄöËøá object_getClass ËÉΩÂ§üÂæóÂà∞ Class ÂÜçÈÄöËøá NSStringFromClass ËÉΩÂ§üÂæóÂà∞Á±ªÂêç SEL _cmd; //ÈÄöËøá NSStringFromSelector ÊñπÊ≥ïËÉΩÂ§üÂæóÂà∞ÊñπÊ≥ïÂêç uintptr_t lr; int prevHitIndex; char isWatchHit;} CallRecord;typedef struct ThreadCallStack_ { FILE *file; char *spacesStr; CallRecord *stack; int allocatedLength; int index; int numWatchHits; int lastPrintedIndex; int lastHitIndex; char isLoggingEnabled; char isCompleteLoggingEnabled;} ThreadCallStack; Â≠òÂÇ®ËØªÂèñ ThreadCallStackpthread_setspecific() ÂèØ‰ª•Â∞ÜÁßÅÊúâÊï∞ÊçÆËÆæÁΩÆÂú®ÊåáÂÆöÁ∫øÁ®ã‰∏äÔºåpthread_getspecific() Áî®Êù•ËØªÂèñËøô‰∏™ÁßÅÊúâÊï∞ÊçÆÔºåÂà©Áî®Ëøô‰∏™ÁâπÊÄßÂèØ‰ª•Â∞±ÂèØ‰ª•Â∞Ü ThreadCallStack ÁöÑÊï∞ÊçÆÂíåËØ•Á∫øÁ®ãÁªëÂÆöÂú®‰∏ÄËµ∑ÔºåÈöèÊó∂ËøõË°åÊï∞ÊçÆÁöÑÂ≠òÂèñ„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122static inline ThreadCallStack * getThreadCallStack() { ThreadCallStack *cs = (ThreadCallStack *)pthread_getspecific(threadKey); //ËØªÂèñ if (cs == NULL) { cs = (ThreadCallStack *)malloc(sizeof(ThreadCallStack));#ifdef MAIN_THREAD_ONLY cs-&gt;file = (pthread_main_np()) ? newFileForThread() : NULL;#else cs-&gt;file = newFileForThread();#endif cs-&gt;isLoggingEnabled = (cs-&gt;file != NULL); cs-&gt;isCompleteLoggingEnabled = 0; cs-&gt;spacesStr = (char *)malloc(DEFAULT_CALLSTACK_DEPTH + 1); memset(cs-&gt;spacesStr, &apos; &apos;, DEFAULT_CALLSTACK_DEPTH); cs-&gt;spacesStr[DEFAULT_CALLSTACK_DEPTH] = &apos;\\0&apos;; cs-&gt;stack = (CallRecord *)calloc(DEFAULT_CALLSTACK_DEPTH, sizeof(CallRecord)); //ÂàÜÈÖç CallRecord ÈªòËÆ§Á©∫Èó¥ cs-&gt;allocatedLength = DEFAULT_CALLSTACK_DEPTH; cs-&gt;index = cs-&gt;lastPrintedIndex = cs-&gt;lastHitIndex = -1; cs-&gt;numWatchHits = 0; pthread_setspecific(threadKey, cs); //‰øùÂ≠òÊï∞ÊçÆ } return cs;} ËÆ∞ÂΩïÊñπÊ≥ïË∞ÉÁî®Ê∑±Â∫¶Âõ†‰∏∫Ë¶ÅËÆ∞ÂΩïÊ∑±Â∫¶ÔºåËÄå‰∏Ä‰∏™ÊñπÊ≥ïÁöÑË∞ÉÁî®Èáå‰ºöÊúâÊõ¥Â§öÁöÑÊñπÊ≥ïË∞ÉÁî®ÔºåÊâÄ‰ª•ÊñπÊ≥ïÁöÑË∞ÉÁî®ÂÜô‰∏§‰∏™ÊñπÊ≥ïÂàÜÂà´ËÆ∞ÂΩïÂºÄÂßã pushCallRecord ÂíåËÆ∞ÂΩïÁªìÊùüÁöÑÊó∂Âàª popCallRecordÔºåËøôÊ†∑ÊâçËÉΩÂ§üÈÄöËøáÂú®ÂºÄÂßãÊó∂ÂØπÊ∑±Â∫¶Âä†‰∏ÄÂú®ÁªìÊùüÊó∂Âáè‰∏Ä„ÄÇ 1234567891011121314151617181920//ÂºÄÂßãÊó∂static inline void pushCallRecord(id obj, uintptr_t lr, SEL _cmd, ThreadCallStack *cs) { int nextIndex = (++cs-&gt;index); //Â¢ûÂä†Ê∑±Â∫¶ if (nextIndex &gt;= cs-&gt;allocatedLength) { cs-&gt;allocatedLength += CALLSTACK_DEPTH_INCREMENT; cs-&gt;stack = (CallRecord *)realloc(cs-&gt;stack, cs-&gt;allocatedLength * sizeof(CallRecord)); cs-&gt;spacesStr = (char *)realloc(cs-&gt;spacesStr, cs-&gt;allocatedLength + 1); memset(cs-&gt;spacesStr, &apos; &apos;, cs-&gt;allocatedLength); cs-&gt;spacesStr[cs-&gt;allocatedLength] = &apos;\\0&apos;; } CallRecord *newRecord = &amp;cs-&gt;stack[nextIndex]; newRecord-&gt;obj = obj; newRecord-&gt;_cmd = _cmd; newRecord-&gt;lr = lr; newRecord-&gt;isWatchHit = 0;}//ÁªìÊùüÊó∂static inline CallRecord * popCallRecord(ThreadCallStack *cs) { return &amp;cs-&gt;stack[cs-&gt;index--]; //ÂáèÂ∞ëÊ∑±Â∫¶} Âú® objc_msgSend ÂâçÂêéÊèíÂÖ•ÊâßË°åÊñπÊ≥ïÊúÄÂêéÊòØ hook objc_msgSend ÈúÄË¶ÅÂú®Ë∞ÉÁî®ÂâçÂíåË∞ÉÁî®ÂêéÂàÜÂà´Âä†ÂÖ• pushCallRecord Âíå popCallRecord„ÄÇÂõ†‰∏∫ÈúÄË¶ÅÂú®Ë∞ÉÁî®ÂêéËøô‰∏™Êó∂Êú∫ÊèíÂÖ•‰∏Ä‰∏™ÊñπÊ≥ïÔºåËÄå‰∏î‰∏çÂèØËÉΩÁºñÂÜô‰∏Ä‰∏™‰øùÁïôÊú™Áü•ÂèÇÊï∞Âπ∂Ë∑≥ËΩ¨Âà∞ c ‰∏≠‰ªªÊÑèÂáΩÊï∞ÊåáÈíàÁöÑÂáΩÊï∞ÔºåÈÇ£‰πàËøôÂ∞±ÈúÄË¶ÅÁî®Âà∞Ê±áÁºñÊù•ÂÅöÂà∞„ÄÇ ‰∏ãÈù¢ÈíàÂØπ arm64 ËøõË°åÂàÜÊûêÔºåarm64 Êúâ31‰∏™64 bit ÁöÑÊï¥Êï∞ÂûãÂØÑÂ≠òÂô®ÔºåÁî® x0 Âà∞ x30 Ë°®Á§∫Ôºå‰∏ªË¶ÅÊÄùË∑ØÂ∞±ÊòØÂÖàÂÖ•Ê†àÂèÇÊï∞ÔºåÂèÇÊï∞ÂØÑÂ≠òÂô®ÊòØ x0 - x7ÔºåÂØπ‰∫éobjc_msgSendÊñπÊ≥ïÊù•ËØ¥ x0 Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰º†ÂÖ•ÂØπË±°Ôºåx1 Á¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÈÄâÊã©Âô® _cmd„ÄÇ syscall ÁöÑ number ‰ºöÊîæÂà∞ x8 Èáå„ÄÇÁÑ∂Âêé‰∫§Êç¢ÂØÑÂ≠òÂô®‰∏≠ÔºåÂ∞ÜÁî®‰∫éËøîÂõûÁöÑÂØÑÂ≠òÂô® lr ÁßªÂà∞ x1 Èáå„ÄÇÂÖàËÆ© pushCallRecord ËÉΩÂ§üÊâßË°åÔºåÂÜçÊâßË°åÂéüÂßãÁöÑ objc_msgSendÔºå‰øùÂ≠òËøîÂõûÂÄºÔºåÊúÄÂêéËÆ© popCallRecord ËÉΩÊâßË°å„ÄÇÂÖ∑‰Ωì‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768static void replacementObjc_msgSend() { __asm__ volatile ( // sp ÊòØÂ†ÜÊ†àÂØÑÂ≠òÂô®ÔºåÂ≠òÊîæÊ†àÁöÑÂÅèÁßªÂú∞ÂùÄÔºåÊØèÊ¨°ÈÉΩÊåáÂêëÊ†àÈ°∂„ÄÇ // ‰øùÂ≠ò {q0-q7} ÂÅèÁßªÂú∞ÂùÄÂà∞ sp ÂØÑÂ≠òÂô® &quot;stp q6, q7, [sp, #-32]!\\n&quot; &quot;stp q4, q5, [sp, #-32]!\\n&quot; &quot;stp q2, q3, [sp, #-32]!\\n&quot; &quot;stp q0, q1, [sp, #-32]!\\n&quot; // ‰øùÂ≠ò {x0-x8, lr} &quot;stp x8, lr, [sp, #-16]!\\n&quot; &quot;stp x6, x7, [sp, #-16]!\\n&quot; &quot;stp x4, x5, [sp, #-16]!\\n&quot; &quot;stp x2, x3, [sp, #-16]!\\n&quot; &quot;stp x0, x1, [sp, #-16]!\\n&quot; // ‰∫§Êç¢ÂèÇÊï∞. &quot;mov x2, x1\\n&quot; &quot;mov x1, lr\\n&quot; &quot;mov x3, sp\\n&quot; // Ë∞ÉÁî® preObjc_msgSendÔºå‰ΩøÁî® bl label ËØ≠Ê≥ï„ÄÇbl ÊâßË°å‰∏Ä‰∏™ÂàÜÊîØÈìæÊé•Êìç‰ΩúÔºålabel ÊòØÊó†Êù°‰ª∂ÂàÜÊîØÁöÑÔºåÊòØÂíåÊú¨Êåá‰ª§ÁöÑÂú∞ÂùÄÂÅèÁßªÔºåËåÉÂõ¥ÊòØ -128MB Âà∞ +128MB &quot;bl __Z15preObjc_msgSendP11objc_objectmP13objc_selectorP9RegState_\\n&quot; &quot;mov x9, x0\\n&quot; &quot;mov x10, x1\\n&quot; &quot;tst x10, x10\\n&quot; // ËØªÂèñ {x0-x8, lr} ‰ªé‰øùÂ≠òÂà∞ sp Ê†àÈ°∂ÁöÑÂÅèÁßªÂú∞ÂùÄËØªËµ∑ &quot;ldp x0, x1, [sp], #16\\n&quot; &quot;ldp x2, x3, [sp], #16\\n&quot; &quot;ldp x4, x5, [sp], #16\\n&quot; &quot;ldp x6, x7, [sp], #16\\n&quot; &quot;ldp x8, lr, [sp], #16\\n&quot; // ËØªÂèñ {q0-q7} &quot;ldp q0, q1, [sp], #32\\n&quot; &quot;ldp q2, q3, [sp], #32\\n&quot; &quot;ldp q4, q5, [sp], #32\\n&quot; &quot;ldp q6, q7, [sp], #32\\n&quot; &quot;b.eq Lpassthrough\\n&quot; // Ë∞ÉÁî®ÂéüÂßã objc_msgSend„ÄÇ‰ΩøÁî® blr xn ËØ≠Ê≥ï„ÄÇblr Èô§‰∫Ü‰ªéÊåáÂÆöÂØÑÂ≠òÂô®ËØªÂèñÊñ∞ÁöÑ PC ÂÄºÂ§ñÊïàÊûúÂíå bl ‰∏ÄÊ†∑„ÄÇxn ÊòØÈÄöÁî®ÂØÑÂ≠òÂô®ÁöÑ64‰ΩçÂêçÁß∞ÂàÜÊîØÂú∞ÂùÄÔºåËåÉÂõ¥0Âà∞31 &quot;blr x9\\n&quot; // ‰øùÂ≠ò {x0-x9} &quot;stp x0, x1, [sp, #-16]!\\n&quot; &quot;stp x2, x3, [sp, #-16]!\\n&quot; &quot;stp x4, x5, [sp, #-16]!\\n&quot; &quot;stp x6, x7, [sp, #-16]!\\n&quot; &quot;stp x8, x9, [sp, #-16]!\\n&quot; // ‰øùÂ≠ò {q0-q7} &quot;stp q0, q1, [sp, #-32]!\\n&quot; &quot;stp q2, q3, [sp, #-32]!\\n&quot; &quot;stp q4, q5, [sp, #-32]!\\n&quot; &quot;stp q6, q7, [sp, #-32]!\\n&quot; // Ë∞ÉÁî® postObjc_msgSend hook. &quot;bl __Z16postObjc_msgSendv\\n&quot; &quot;mov lr, x0\\n&quot; // ËØªÂèñ {q0-q7} &quot;ldp q6, q7, [sp], #32\\n&quot; &quot;ldp q4, q5, [sp], #32\\n&quot; &quot;ldp q2, q3, [sp], #32\\n&quot; &quot;ldp q0, q1, [sp], #32\\n&quot; // ËØªÂèñ {x0-x9} &quot;ldp x8, x9, [sp], #16\\n&quot; &quot;ldp x6, x7, [sp], #16\\n&quot; &quot;ldp x4, x5, [sp], #16\\n&quot; &quot;ldp x2, x3, [sp], #16\\n&quot; &quot;ldp x0, x1, [sp], #16\\n&quot; &quot;ret\\n&quot; &quot;Lpassthrough:\\n&quot; // br Êó†Êù°‰ª∂ÂàÜÊîØÂà∞ÂØÑÂ≠òÂô®‰∏≠ÁöÑÂú∞ÂùÄ &quot;br x9&quot; );} ËÆ∞ÂΩïÊó∂Èó¥ÁöÑÊñπÊ≥ï‰∏∫‰∫ÜËÆ∞ÂΩïËÄóÊó∂ÔºåËøôÊ†∑Â∞±ÈúÄË¶ÅÂú® pushCallRecord Âíå popCallRecord ÈáåËÆ∞ÂΩï‰∏ãÊó∂Èó¥„ÄÇ‰∏ãÈù¢ÂàóÂá∫‰∏Ä‰∫õËÆ°ÁÆó‰∏ÄÊÆµ‰ª£Á†ÅÂºÄÂßãÂà∞ÁªìÊùüÁöÑÊó∂Èó¥ÁöÑÊñπÊ≥ï Á¨¨‰∏ÄÁßçÔºö NSDate ÂæÆÁßí 1234NSDate* tmpStartData = [NSDate date];//some code need caculatedouble deltaTime = [[NSDate date] timeIntervalSinceDate:tmpStartData];NSLog(@&quot;cost time: %f s&quot;, deltaTime); Á¨¨‰∫åÁßçÔºöclock_t ÂæÆÁßíclock_tËÆ°Êó∂ÊâÄË°®Á§∫ÁöÑÊòØÂç†Áî®CPUÁöÑÊó∂ÈíüÂçïÂÖÉ 1234clock_t start = clock();//some code need caculateclock_t end = clock();NSLog(@&quot;cost time: %f s&quot;, (double)(end - start)/CLOCKS_PER_SEC); Á¨¨‰∏âÁßçÔºöCFAbsoluteTime ÂæÆÁßí 1234CFAbsoluteTime start = CFAbsoluteTimeGetCurrent();//some code need caculateCFAbsoluteTime end = CFAbsoluteTimeGetCurrent();NSLog(@&quot;cost time = %f s&quot;, end - start); //s Á¨¨ÂõõÁßçÔºöCFTimeInterval Á∫≥Áßí 12345678910CFTimeInterval start = CACurrentMediaTime();//some code need caculateCFTimeInterval end = CACurrentMediaTime();NSLog(@&quot;cost time: %f s&quot;, end - start);```Á¨¨‰∫îÁßçÔºömach_absolute_time Á∫≥Áßí```objcuint64_t start = mach_absolute_time ();//some code need caculateuint64_t end = mach_absolute_time ();uint64_t elapsed = 1e-9 *(end - start); ÊúÄÂêé‰∏§ÁßçÂèØÁî®ÔºåÊú¨Ë¥®Âå∫Âà´NSDate Êàñ CFAbsoluteTimeGetCurrent() ËøîÂõûÁöÑÊó∂ÈíüÊó∂Èó¥Â∞Ü‰ºö‰ºöÁΩëÁªúÊó∂Èó¥ÂêåÊ≠•Ôºå‰ªéÊó∂Èíü ÂÅèÁßªÈáèÁöÑËßíÂ∫¶„ÄÇmach_absolute_time() Âíå CACurrentMediaTime() ÊòØÂü∫‰∫éÂÜÖÂª∫Êó∂ÈíüÁöÑ„ÄÇÈÄâÊã©‰∏ÄÁßçÔºåÂä†Âà∞ pushCallRecord Âíå popCallRecord ÈáåÔºåÁõ∏ÂáèÂ∞±ËÉΩÂ§üËé∑ÂæóËÄóÊó∂„ÄÇ Â¶Ç‰Ωï hook msgsend ÊñπÊ≥ïÈÇ£‰πà objc_msgSend Ëøô‰∏™ c ÊñπÊ≥ïÊòØÂ¶Ç‰Ωï hook Âà∞ÁöÑÂë¢„ÄÇÈ¶ñÂÖà‰∫ÜËß£‰∏ã dyld ÊòØÈÄöËøáÊõ¥Êñ∞ Mach-O ‰∫åËøõÂà∂ÁöÑ __DATA segment ÁâπÂÆöÁöÑÈÉ®ÂàÜ‰∏≠ÁöÑÊåáÈíàÊù•ÈÇ¶ÂÆö lazy Âíå non-lazy Á¨¶Âè∑ÔºåÈÄöËøáÁ°ÆËÆ§‰º†ÈÄíÁªô rebind_symbol ÈáåÊØè‰∏™Á¨¶Âè∑ÂêçÁß∞Êõ¥Êñ∞ÁöÑ‰ΩçÁΩÆÂ∞±ÂèØ‰ª•ÊâæÂá∫ÂØπÂ∫îÊõøÊç¢Êù•ÈáçÊñ∞ÁªëÂÆöËøô‰∫õÁ¨¶Âè∑„ÄÇ‰∏ãÈù¢ÈíàÂØπÂÖ≥ÈîÆ‰ª£Á†ÅËøõË°åÂàÜÊûêÔºö ÈÅçÂéÜ dyldÈ¶ñÂÖàÊòØÈÅçÂéÜ dyld ÈáåÁöÑÊâÄÊúâÁöÑ imageÔºåÂèñÂá∫ image header Âíå slide„ÄÇÊ≥®ÊÑèÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®Êó∂‰∏ªË¶ÅÊ≥®ÂÜå callback„ÄÇ 12345678if (!_rebindings_head-&gt;next) { _dyld_register_func_for_add_image(_rebind_symbols_for_image);} else { uint32_t c = _dyld_image_count(); for (uint32_t i = 0; i &lt; c; i++) { _rebind_symbols_for_image(_dyld_get_image_header(i), _dyld_get_image_vmaddr_slide(i)); }} ÊâæÂá∫Á¨¶Âè∑Ë°®Áõ∏ÂÖ≥ CommandÊé•‰∏ãÊù•ÈúÄË¶ÅÊâæÂà∞Á¨¶Âè∑Ë°®Áõ∏ÂÖ≥ÁöÑ commandÔºåÂåÖÊã¨ linkedit segment commandÔºåsymtab command Âíå dysymtab command„ÄÇÊñπÊ≥ïÂ¶Ç‰∏ãÔºö 123456789101112131415161718segment_command_t *cur_seg_cmd;segment_command_t *linkedit_segment = NULL;struct symtab_command* symtab_cmd = NULL;struct dysymtab_command* dysymtab_cmd = NULL;uintptr_t cur = (uintptr_t)header + sizeof(mach_header_t);for (uint i = 0; i &lt; header-&gt;ncmds; i++, cur += cur_seg_cmd-&gt;cmdsize) { cur_seg_cmd = (segment_command_t *)cur; if (cur_seg_cmd-&gt;cmd == LC_SEGMENT_ARCH_DEPENDENT) { if (strcmp(cur_seg_cmd-&gt;segname, SEG_LINKEDIT) == 0) { linkedit_segment = cur_seg_cmd; } } else if (cur_seg_cmd-&gt;cmd == LC_SYMTAB) { symtab_cmd = (struct symtab_command*)cur_seg_cmd; } else if (cur_seg_cmd-&gt;cmd == LC_DYSYMTAB) { dysymtab_cmd = (struct dysymtab_command*)cur_seg_cmd; }} Ëé∑Âæó base Âíå indirect Á¨¶Âè∑Ë°®1234567// Find base symbol/string table addressesuintptr_t linkedit_base = (uintptr_t)slide + linkedit_segment-&gt;vmaddr - linkedit_segment-&gt;fileoff;nlist_t *symtab = (nlist_t *)(linkedit_base + symtab_cmd-&gt;symoff);char *strtab = (char *)(linkedit_base + symtab_cmd-&gt;stroff);// Get indirect symbol table (array of uint32_t indices into symbol table)uint32_t *indirect_symtab = (uint32_t *)(linkedit_base + dysymtab_cmd-&gt;indirectsymoff); ËøõË°åÊñπÊ≥ïÊõøÊç¢Êúâ‰∫ÜÁ¨¶Âè∑Ë°®Âíå‰º†ÂÖ•ÁöÑÊñπÊ≥ïÊõøÊç¢Êï∞ÁªÑÂ∞±ÂèØ‰ª•ËøõË°åÁ¨¶Âè∑Ë°®ËÆøÈóÆÊåáÈíàÂú∞ÂùÄÁöÑÊõøÊç¢ÔºåÂÖ∑‰ΩìÂÆûÁé∞Â¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728uint32_t *indirect_symbol_indices = indirect_symtab + section-&gt;reserved1;void **indirect_symbol_bindings = (void **)((uintptr_t)slide + section-&gt;addr);for (uint i = 0; i &lt; section-&gt;size / sizeof(void *); i++) { uint32_t symtab_index = indirect_symbol_indices[i]; if (symtab_index == INDIRECT_SYMBOL_ABS || symtab_index == INDIRECT_SYMBOL_LOCAL || symtab_index == (INDIRECT_SYMBOL_LOCAL | INDIRECT_SYMBOL_ABS)) { continue; } uint32_t strtab_offset = symtab[symtab_index].n_un.n_strx; char *symbol_name = strtab + strtab_offset; if (strnlen(symbol_name, 2) &lt; 2) { continue; } struct rebindings_entry *cur = rebindings; while (cur) { for (uint j = 0; j &lt; cur-&gt;rebindings_nel; j++) { if (strcmp(&amp;symbol_name[1], cur-&gt;rebindings[j].name) == 0) { if (cur-&gt;rebindings[j].replaced != NULL &amp;&amp; indirect_symbol_bindings[i] != cur-&gt;rebindings[j].replacement) { *(cur-&gt;rebindings[j].replaced) = indirect_symbol_bindings[i]; } indirect_symbol_bindings[i] = cur-&gt;rebindings[j].replacement; goto symbol_loop; } } cur = cur-&gt;next; }symbol_loop:; ÁªüËÆ°ÊñπÊ≥ïË∞ÉÁî®È¢ëÊ¨°Âú®‰∏Ä‰∫õÂ∫îÁî®Âú∫ÊôØ‰ºöÊúâ‰∏Ä‰∫õÈ¢ëÁπÅÁöÑÊñπÊ≥ïË∞ÉÁî®ÔºåÊúâ‰∫õÊñπÊ≥ïÁöÑË∞ÉÁî®ÂÆûÈôÖ‰∏äÊòØÊ≤°ÊúâÂøÖË¶ÅÁöÑÔºå‰ΩÜÊòØÈ¶ñÂÖàÊòØÈúÄË¶ÅÂ∞ÜÈÇ£‰∫õÈ¢ëÁπÅË∞ÉÁî®ÁöÑÊñπÊ≥ïÊâæÂá∫Êù•ËøôÊ†∑ÊâçËÉΩÂ§üÊõ¥Â•ΩÁöÑÂÆö‰ΩçÂà∞ÊΩúÂú®ÁöÑ‰ºöÈÄ†ÊàêÊÄßËÉΩÊµ™Ë¥πÁöÑÊñπÊ≥ï‰ΩøÁî®„ÄÇËøô‰∫õÈ¢ëÁπÅË∞ÉÁî®ÁöÑÊñπÊ≥ïË¶ÅÊÄé‰πàÊâæÂë¢Ôºü Â§ßËá¥ÁöÑÊÄùË∑ØÊòØËøôÊ†∑ÔºåÂü∫‰∫é‰∏äÈù¢Á´†ËäÇÊèêÂà∞ÁöÑËÆ∞ÂΩïÊñπÊ≥ïË∞ÉÁî®Ê∑±Â∫¶ÁöÑÊñπÊ°àÔºåÂ∞ÜÊØè‰∏™Ë∞ÉÁî®ÊñπÊ≥ïÁöÑË∑ØÂæÑ‰øùÂ≠ò‰ΩèÔºåË∞ÉÁî®Áõ∏ÂêåË∑ØÂæÑÁöÑÁõ∏ÂêåÊñπÊ≥ïË∞ÉÁî®‰∏ÄÊ¨°Âä†‰∏ÄËÆ∞ÂΩïÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÊúÄÂêéÂÅö‰∏Ä‰∏™ËßÜÂõæÊåâÁÖßË∞ÉÁî®Ê¨°Êï∞ÁöÑÊéíÂ∫èÂç≥ÂèØÊâæÂà∞Ë∞ÉÁî®È¢ëÁπÅÁöÑÈÇ£‰∫õÊñπÊ≥ï„ÄÇ‰∏ãÂõæÊòØÂÆåÊàêÂêéÂ±ïÁ§∫ÁöÑÊïàÊûúÔºö Êé•‰∏ãÊù•ÁúãÁúãÂÖ∑‰ΩìÂÆûÁé∞ÊñπÂºè ËÆæËÆ°ÊñπÊ≥ïË∞ÉÁî®È¢ëÊ¨°ËÆ∞ÂΩïÁöÑÁªìÊûÑÂú®ÂÖàÂâçÊó∂Èó¥Ê∂àËÄóÁöÑ model Âü∫Á°Ä‰∏äÂ¢ûÂä†Ë∑ØÂæÑÔºåÈ¢ëÊ¨°Á≠â‰ø°ÊÅØ 123456789@property (nonatomic, strong) NSString *className; //Á±ªÂêç@property (nonatomic, strong) NSString *methodName; //ÊñπÊ≥ïÂêç@property (nonatomic, assign) BOOL isClassMethod; //ÊòØÂê¶ÊòØÁ±ªÊñπÊ≥ï@property (nonatomic, assign) NSTimeInterval timeCost; //Êó∂Èó¥Ê∂àËÄó@property (nonatomic, assign) NSUInteger callDepth; //Call Â±ÇÁ∫ß@property (nonatomic, copy) NSString *path; //Ë∑ØÂæÑ@property (nonatomic, assign) BOOL lastCall; //ÊòØÂê¶ÊòØÊúÄÂêé‰∏Ä‰∏™ Call@property (nonatomic, assign) NSUInteger frequency; //ËÆøÈóÆÈ¢ëÊ¨°@property (nonatomic, strong) NSArray &lt;SMCallTraceTimeCostModel *&gt; *subCosts; ÊãºË£ÖÊñπÊ≥ïË∑ØÂæÑÂú®ÈÅçÂéÜ SMCallTrace ËÆ∞ÂΩïÁöÑÊñπÊ≥ï model Âíå ÈÅçÂéÜÊñπÊ≥ïÂ≠êÊñπÊ≥ïÊó∂Â∞ÜË∑ØÂæÑÊãºË£ÖÂ•ΩÔºåËÆ∞ÂΩïÂà∞Êï∞ÊçÆÂ∫ì‰∏≠ 12345678910111213141516171819for (SMCallTraceTimeCostModel *model in arr) { //ËÆ∞ÂΩïÊñπÊ≥ïË∑ØÂæÑ model.path = [NSString stringWithFormat:@&quot;[%@ %@]&quot;,model.className,model.methodName]; [self appendRecord:model to:mStr];}+ (void)appendRecord:(SMCallTraceTimeCostModel *)cost to:(NSMutableString *)mStr { [mStr appendFormat:@&quot;%@\\n path%@\\n&quot;,[cost des],cost.path]; if (cost.subCosts.count &lt; 1) { cost.lastCall = YES; } //ËÆ∞ÂΩïÂà∞Êï∞ÊçÆÂ∫ì‰∏≠ [[[SMLagDB shareInstance] increaseWithClsCallModel:cost] subscribeNext:^(id x) {}]; for (SMCallTraceTimeCostModel *model in cost.subCosts) { //ËÆ∞ÂΩïÊñπÊ≥ïÁöÑÂ≠êÊñπÊ≥ïÁöÑË∑ØÂæÑ model.path = [NSString stringWithFormat:@&quot;%@ - [%@ %@]&quot;,cost.path,model.className,model.methodName]; [self appendRecord:model to:mStr]; }} ËÆ∞ÂΩïÊñπÊ≥ïË∞ÉÁî®È¢ëÊ¨°Êï∞ÊçÆÂ∫ìÂàõÂª∫Êï∞ÊçÆÂ∫ìËøôÈáåÁöÑ lastcall ÊòØËÆ∞ÂΩïÊòØÂê¶ÊòØÊúÄÂêé‰∏Ä‰∏™ÊñπÊ≥ïÁöÑË∞ÉÁî®ÔºåÂ±ïÁ§∫Êó∂Âè™ÂèñÊúÄÂêé‰∏Ä‰∏™ÊñπÊ≥ïÂç≥ÂèØÔºåÂõ†‰∏∫‰πü‰ºöÊúâÂÆåÊï¥Ë∑ØÂæÑÂèØ‰ª•Áü•ÈÅìÁà∂ÊñπÊ≥ïÂíåÊù•Ê∫êÊñπÊ≥ï„ÄÇ 12345678910111213141516171819_clsCallDBPath = [PATH_OF_DOCUMENT stringByAppendingPathComponent:@&quot;clsCall.sqlite&quot;];if ([[NSFileManager defaultManager] fileExistsAtPath:_clsCallDBPath] == NO) { FMDatabase *db = [FMDatabase databaseWithPath:_clsCallDBPath]; if ([db open]) { /* cid: ‰∏ªid fid: Áà∂id ÊöÇÊó∂‰∏çÁî® cls: Á±ªÂêç mtd: ÊñπÊ≥ïÂêç path: ÂÆåÊï¥Ë∑ØÂæÑÊ†áËØÜ timecost: ÊñπÊ≥ïÊ∂àËÄóÊó∂Èïø calldepth: Â±ÇÁ∫ß frequency: Ë∞ÉÁî®Ê¨°Êï∞ lastcall: ÊòØÂê¶ÊòØÊúÄÂêé‰∏Ä‰∏™ call */ NSString *createSql = @&quot;create table clscall (cid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, fid integer, cls text, mtd text, path text, timecost integer, calldepth integer, frequency integer, lastcall integer)&quot;; [db executeUpdate:createSql]; }} Ê∑ªÂä†ËÆ∞ÂΩïÊ∑ªÂä†ËÆ∞ÂΩïÊó∂ÈúÄË¶ÅÂÖàÊ£ÄÊü•Êï∞ÊçÆÂ∫ìÈáåÊòØÂê¶ÊúâÁõ∏ÂêåË∑ØÂæÑÁöÑÂêå‰∏Ä‰∏™ÊñπÊ≥ïË∞ÉÁî®ÔºåËøôÊ†∑ÂèØ‰ª•Áªô frequency Â≠óÊÆµÂä†‰∏ÄÂ∑≤ËææÂà∞ËÆ∞ÂΩïÈ¢ëÊ¨°ÁöÑÁõÆÁöÑ„ÄÇ 12345678910111213141516FMResultSet *rsl = [db executeQuery:@&quot;select cid,frequency from clscall where path = ?&quot;, model.path];if ([rsl next]) { //ÊúâÁõ∏ÂêåË∑ØÂæÑÂ∞±Êõ¥Êñ∞Ë∑ØÂæÑËÆøÈóÆÈ¢ëÁéá int fq = [rsl intForColumn:@&quot;frequency&quot;] + 1; int cid = [rsl intForColumn:@&quot;cid&quot;]; [db executeUpdate:@&quot;update clscall set frequency = ? where cid = ?&quot;, @(fq), @(cid)];} else { //Ê≤°ÊúâÂ∞±Ê∑ªÂä†‰∏ÄÊù°ËÆ∞ÂΩï NSNumber *lastCall = @0; if (model.lastCall) { lastCall = @1; } [db executeUpdate:@&quot;insert into clscall (cls, mtd, path, timecost, calldepth, frequency, lastcall) values (?, ?, ?, ?, ?, ?, ?)&quot;, model.className, model.methodName, model.path, @(model.timeCost), @(model.callDepth), @1, lastCall];}[db close];[subscriber sendCompleted]; Ê£ÄÁ¥¢ËÆ∞ÂΩïÊ£ÄÁ¥¢Êó∂Ê≥®ÊÑèÊåâÁÖßË∞ÉÁî®È¢ëÊ¨°Â≠óÊÆµËøõË°åÊéíÂ∫èÂç≥ÂèØ„ÄÇ 123456789101112131415FMResultSet *rs = [db executeQuery:@&quot;select * from clscall where lastcall=? order by frequency desc limit ?, 50&quot;,@1, @(page * 50)];NSUInteger count = 0;NSMutableArray *arr = [NSMutableArray array];while ([rs next]) { SMCallTraceTimeCostModel *model = [self clsCallModelFromResultSet:rs]; [arr addObject:model]; count ++;}if (count &gt; 0) { [subscriber sendNext:arr];} else { [subscriber sendError:nil];}[subscriber sendCompleted];[db close]; ÊâæÂá∫ CPU ‰ΩøÁî®Â§ßÁöÑÁ∫øÁ®ãÂ†ÜÊ†àÂú®ÂâçÈù¢Ê£ÄÊµãÂç°È°øÊâìÂç∞ÁöÑÂ†ÜÊ†àÈáåÊèêÂà∞‰ΩøÁî® thread_info ËÉΩÂ§üËé∑ÂèñÂà∞ÂêÑ‰∏™Á∫øÁ®ãÁöÑ cpu Ê∂àËÄóÔºå‰ΩÜÊòØ cpu ‰∏çÂú®‰∏ªÁ∫øÁ®ãÂç≥‰ΩøÊ∂àËÄóÂæàÂ§ß‰πü‰∏ç‰∏ÄÂÆö‰ºöÈÄ†ÊàêÂç°È°øÂØºËá¥Âç°È°øÊ£ÄÊµãÊó†Ê≥ïÊ£ÄÊµãÂá∫Êõ¥Â§ö cpu Ê∂àËÄóÁöÑÊÉÖÂÜµÔºåÊâÄ‰ª•Âè™ËÉΩÈÄöËøáËΩÆËØ¢ÁõëÊéßÂêÑÁ∫øÁ®ãÈáåÁöÑ cpu ‰ΩøÁî®ÊÉÖÂÜµÔºåÂØπ‰∫éË∂ÖËøáÊ†áÂáÜÂÄºÊØîÂ¶Ç70%ÁöÑËøõË°åËÆ∞ÂΩïÊù•Ë∑üË∏™ÂÆö‰ΩçÂá∫ËÄóÁîµÁöÑÈÇ£‰∫õÊñπÊ≥ï„ÄÇ‰∏ãÂõæÊòØÂàóÂá∫ cpu ËøáËΩΩÊó∂ÁöÑÂ†ÜÊ†àËÆ∞ÂΩïÁöÑÂ±ïÁ§∫ÊïàÊûúÔºö Êúâ‰∫ÜÂâçÈù¢ÁöÑÂü∫Á°ÄÔºåÂÆûÁé∞Ëµ∑Êù•ËΩªÊùæÂ§ö‰∫Ü 12345678910111213141516171819202122232425262728//ËΩÆËØ¢Ê£ÄÊü•Â§ö‰∏™Á∫øÁ®ã cpu ÊÉÖÂÜµ+ (void)updateCPU { thread_act_array_t threads; mach_msg_type_number_t threadCount = 0; const task_t thisTask = mach_task_self(); kern_return_t kr = task_threads(thisTask, &amp;threads, &amp;threadCount); if (kr != KERN_SUCCESS) { return; } for (int i = 0; i &lt; threadCount; i++) { thread_info_data_t threadInfo; thread_basic_info_t threadBaseInfo; mach_msg_type_number_t threadInfoCount = THREAD_INFO_MAX; if (thread_info((thread_act_t)threads[i], THREAD_BASIC_INFO, (thread_info_t)threadInfo, &amp;threadInfoCount) == KERN_SUCCESS) { threadBaseInfo = (thread_basic_info_t)threadInfo; if (!(threadBaseInfo-&gt;flags &amp; TH_FLAGS_IDLE)) { integer_t cpuUsage = threadBaseInfo-&gt;cpu_usage / 10; if (cpuUsage &gt; 70) { //cup Ê∂àËÄóÂ§ß‰∫é 70 Êó∂ÊâìÂç∞ÂíåËÆ∞ÂΩïÂ†ÜÊ†à NSString *reStr = smStackOfThread(threads[i]); //ËÆ∞ÂΩïÊï∞ÊçÆÂ∫ì‰∏≠ [[[SMLagDB shareInstance] increaseWithStackString:reStr] subscribeNext:^(id x) {}]; NSLog(@&quot;CPU useage overload thread stackÔºö\\n%@&quot;,reStr); } } } }} DemoÂ∑•ÂÖ∑Â∑≤Êï¥ÂêàÂà∞ÂÖàÂâçÂÅöÁöÑ GCDFetchFeed Èáå„ÄÇ Â≠êÁ∫øÁ®ãÊ£ÄÊµã‰∏ªÁ∫øÁ®ãÂç°È°ø‰ΩøÁî®ÁöÑËØùÂú®ÈúÄË¶ÅÂºÄÂßãÊ£ÄÊµãÁöÑÂú∞ÊñπÊ∑ªÂä† [[SMLagMonitor shareInstance] beginMonitor]; Âç≥ÂèØ„ÄÇ ÈúÄË¶ÅÊ£ÄÊµãÊâÄÊúâÊñπÊ≥ïË∞ÉÁî®ÁöÑÁî®Ê≥ïÂ∞±ÊòØÂú®ÈúÄË¶ÅÊ£ÄÊµãÁöÑÂú∞ÊñπË∞ÉÁî® [SMCallTrace start]; Â∞±ÂèØ‰ª•‰∫ÜÔºå‰∏çÊ£ÄÊµãÊâìÂç∞Âá∫ÁªìÊûúÁöÑËØùË∞ÉÁî® stop Âíå save Â∞±Â•Ω‰∫Ü„ÄÇËøôÈáåËøòÂèØ‰ª•ËÆæÁΩÆÊúÄÂ§ßÊ∑±Â∫¶ÂíåÊúÄÂ∞èËÄóÊó∂Ê£ÄÊµãÊù•ËøáÊª§‰∏çÈúÄË¶ÅÁúãÂà∞ÁöÑ‰ø°ÊÅØ„ÄÇ ÊñπÊ≥ïË∞ÉÁî®È¢ëÊ¨°‰ΩøÁî®ÂèØ‰ª•Âú®ÈúÄË¶ÅÂºÄÂßãÁªüËÆ°ÁöÑÂú∞ÊñπÂä†‰∏ä [SMCallTrace startWithMaxDepth:3]; ËÆ∞ÂΩïÊó∂‰ΩøÁî® [SMCallTrace stopSaveAndClean]; ËÆ∞ÂΩïÂà∞Âà∞Êï∞ÊçÆÂ∫ì‰∏≠ÂêåÊó∂Ê∏ÖÁêÜÂÜÖÂ≠òÁöÑÂç†Áî®„ÄÇÂèØ‰ª• hook VC ÁöÑ viewWillAppear Âíå viewWillDisappearÔºåÂú® appear Êó∂ÂºÄÂßãËÆ∞ÂΩïÔºåÂú® disappear Êó∂ËÆ∞ÂΩïÂà∞Êï∞ÊçÆÂ∫ìÂêåÊó∂Ê∏ÖÁêÜ‰∏ÄÊ¨°„ÄÇÁªìÊûúÂ±ïÁ§∫ÁöÑ view controller ÊòØ SMClsCallViewControllerÔºåpush Âá∫Êù•Â∞±ËÉΩÂ§üÁúãÂà∞ÂàóË°®ÁªìÊûú„ÄÇ ËµÑÊñôWWDC WWDC 2013 224 Designing Code for Performance WWDC 2013 408 Optimizing Your Code Using LLVM WWDC 2013 712 Energy Best Practices WWDC 2014 710 writing energy efficient code part 1 WWDC 2014 710 writing energy efficient code part 2 WWDC 2015 230 performance on ios and watchos WWDC 2015 707 achieving allday battery life WWDC 2015 708 debugging energy issues WWDC 2015 718 building responsive and efficient apps with gcd WWDC 2016 406 optimizing app startup time WWDC 2016 719 optimizing io for performance and battery life WWDC 2017 238 writing energy efficient apps WWDC 2017 706 modernizing grand central dispatch usage","link":"/ÁºñÁ®ã/Ô£ø/pou-xi/"},{"title":"UIView","text":"ËßÜÂõæÂ±ÇÁ∫ßUIViewÊúâ‰∏â‰∏™Âü∫Á±ªÔºöUIResponderÔºåUIViewÂíåUIControl„ÄÇ UIResponderÔºöÊòØUIViewÁöÑÁà∂Á±ª„ÄÇresponderÂ§ÑÁêÜËß¶Êë∏ÔºåÊâãÂäøÔºåËøúÁ®ãÊéßÂà∂‰∫ã‰ª∂„ÄÇUIApplicationÂíåUIViewController‰πüÊòØUIResponderÁöÑÂ≠êÁ±ª„ÄÇ UIViewÔºöÂ§ÑÁêÜÁªòÂà∂ÂíåËß¶Êë∏Êó∂Èó¥„ÄÇ UIControlÔºöÊúâtarget/actionÊ®°Âºè„ÄÇbuttonÔºåDate pickersÔºåÊñáÊú¨Ê°ÜÈÉΩÊòØ„ÄÇ Ê∏≤ÊüìÈÅøÂÖç‰ΩøÁî®drawRect:Âú®CPU‰∏äÂÅöÊ∏≤ÊüìÔºåÂ¶ÇÊûúÂ∏åÊúõ‰ΩøÁî®GPUÊ∏≤ÊüìÂ∞±‰ΩøÁî®Áé∞ÊúâÁöÑËßÜÂõæÊûÑÂª∫Ëá™ÂÆö‰πâËßÜÂõæ„ÄÇÂ¶ÇÊûúË¶ÅÂÆûÁé∞‰∏Ä‰∏™Â∏¶ËæπÊ°ÜÁöÑÂúÜÂΩ¢Â§¥ÂÉè 1234567- (void)setupView{ self.clipsToBounds = YES; self.layer.cornerRadius = self.bounds.size.width / 2; self.layer.borderWidth = 3; self.layer.borderColor = [UIColor darkGrayColor].CGColor;} Ê∏≤ÊüìÈÄüÂ∫¶ÊØîËæÉ OpenGL -&gt; Core Image -&gt; Core Graphics Ëá™ÂÆö‰πâ‰∫§‰∫íÂìçÂ∫îËß¶Êë∏ÔºåÂèØ‰ª•‰ΩøÁî®ÈáçÂÜôÊõ¥Âä†Â∫ïÂ±ÇÁöÑtouchesBeganÔºåtouchesMovedÂíåtouchesEndedÊñπÊ≥ï„ÄÇËøòÂèØ‰ª•‰ΩøÁî®ÂÖ∂ÂÆÉ‰∏çÂêåÁöÑÊñπÊ≥ïÊù•Ëß£ÂÜ≥ÊØîÂ¶Çtarget actionÔºå‰ª£ÁêÜÔºåblockÔºåKVOÊàñÈÄöÁü• Target actionÔºöÊúÄÊñπ‰æøÁöÑÂÅöÊ≥ïÔºå‰πüÊòØÊúÄÂ≠¶Èô¢Ê¥æÁöÑ„ÄÇ 1234567891011121314[self sendActionsForControlEvents:UIControlEventValueChanged];//Â¶ÇÊûú‰∏Ä‰∏™view controllerÁÆ°ÁêÜËøô‰∏™ËßÜÂõæ- (void)setupPieChart{ [self.pieChart addTarget:self action:@selector(updateSelection:) forControlEvents:UIControlEventValueChanged];}- (void)updateSelection:(id)sender{ NSLog(@&quot;%@&quot;, self.pieChart.selectedSector);} ‰ΩøÁî®‰ª£ÁêÜ12345678910111213141516[self.delegate pieChart:self didSelectSector:self.selectedSector];//Âú®view controller‰∏≠‰ª£Á†Å@interface MyViewController &lt;PieChartDelegate&gt;...- (void)setupPieChart{ self.pieChart.delegate = self;}- (void)pieChart:(PieChart*)pieChart didSelectSector:(PieChartSector*)sector{ // Â§ÑÁêÜÂå∫Âùó} ‰ΩøÁî®Block12345678910111213141516171819202122232425@interface PieChart : UIControl@property (nonatomic,copy) void(^selectionHandler)(PieChartSection* selectedSection);@end//Âú®ÊâßË°å‰πãÂâçÊ£ÄÊü•‰∏ãblockÊòØÂê¶Ë¢´ËµãÂÄºÔºåÊú™Ë¢´ËµãÂÄºÁöÑblock‰ºöÂ¥©if (self.selectionHandler != NULL) { self.selectionHandler(self.selectedSection);}//ÂèØ‰ª•ÊääÁõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÊï¥ÂêàÂú®view controller‰∏≠- (void)setupPieChart{ self.pieChart.selectionHandler = ^(PieChartSection* section) { // Â§ÑÁêÜÂå∫Âùó }}//ÈÅøÂÖçÂºïÁî®Âæ™ÁéØ__weak id weakSelf = self;self.pieChart.selectionHandler = ^(PieChartSection* section) { MyViewController* strongSelf = weakSelf; [strongSelf handleSectionChange:section];} ‰ΩøÁî®KVO12345678910111213self.selectedSegment = theNewSelectedSegment;- (void)setupPieChart{ [self.pieChart addObserver:self forKeyPath:@&quot;selectedSegment&quot; options:0 context:NULL];}- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{ if(object == self.pieChart &amp;&amp; [keyPath isEqualToString:@&quot;selectedSegment&quot;]) { // Â§ÑÁêÜÊîπÂèò }}//Âú®viewWillDisappearÔºöÊàñdealloc‰∏≠ÁßªÈô§ËßÇÂØüËÄÖ„ÄÇ ‰ΩøÁî®ÈÄöÁü•1234567891011121314151617181920212223242526//Â§¥Êñá‰ª∂‰∏≠extern NSString* const SelectedSegmentChangedNotification;//ÂÆûÁé∞ÁöÑÊñá‰ª∂‰∏≠NSString* const SelectedSegmentChangedNotification = @&quot;selectedSegmentChangedNotification&quot;;...- (void)notifyAboutChanges{ [[NSNotificationCenter defaultCenter] postNotificationName:SelectedSegmentChangedNotification object:self];}//Áé∞Âú®ËÆ¢ÈòÖÈÄöÁü•ÔºåÂú®view controller‰∏≠ÂÆûÁé∞- (void)setupPieChart{ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(segmentChanged:) name:SelectedSegmentChangedNotification object:self.pieChart];}...- (void)segmentChanged:(NSNotification*)note{}//Ê≥®ÊÑèÂú®ÂêàÈÄÇÁöÑÂú∞ÊñπÈÄÄËÆ¢ÈÄöÁü• ming1016","link":"/ÁºñÁ®ã/Ô£ø/uiview/"},{"title":"Ê∑±ÂÖ•ÂâñÊûê-iOS-ÁºñËØë-Clang---LLVM","text":"ÂâçË®Ä2000Âπ¥Ôºå‰ºäÂà©ËØ∫‰ºäÂ§ßÂ≠¶ÂéÑÂ∑¥Á∫≥ÔºçÈ¶ôÊßüÂàÜÊ†°ÔºàUniversity of Illinois at Urbana-Champaign ÁÆÄÁß∞UIUCÔºâËøôÊâÄ‰∫´Êúâ‰∏ñÁïåÂ£∞ÊúõÁöÑ‰∏ÄÊµÅÂÖ¨Á´ãÁ†îÁ©∂ÂûãÂ§ßÂ≠¶ÁöÑ Chris LattnerÔºà‰ªñÁöÑ twitter @clattner_llvm Ôºâ ÂºÄÂèë‰∫Ü‰∏Ä‰∏™Âè´‰Ωú Low Level Virtual Machine ÁöÑÁºñËØëÂô®ÂºÄÂèëÂ∑•ÂÖ∑Â•ó‰ª∂ÔºåÂêéÊù•Ê∂âÂèäËåÉÂõ¥Ë∂äÊù•Ë∂äÂ§ßÔºåÂèØ‰ª•Áî®‰∫éÂ∏∏ËßÑÁºñËØëÂô®ÔºåJITÁºñËØëÂô®ÔºåÊ±áÁºñÂô®ÔºåË∞ÉËØïÂô®ÔºåÈùôÊÄÅÂàÜÊûêÂ∑•ÂÖ∑Á≠â‰∏ÄÁ≥ªÂàóË∑üÁºñÁ®ãËØ≠Ë®ÄÁõ∏ÂÖ≥ÁöÑÂ∑•‰ΩúÔºå‰∫éÊòØÂ∞±ÊääÁÆÄÁß∞ LLVM Ëøô‰∏™ÁÆÄÁß∞‰Ωú‰∏∫‰∫ÜÊ≠£ÂºèÁöÑÂêçÂ≠ó„ÄÇChris Lattner ÂêéÊù•ÂèàÂºÄÂèë‰∫Ü ClangÔºå‰ΩøÂæó LLVM Áõ¥Êé•ÊåëÊàò GCC ÁöÑÂú∞‰Ωç„ÄÇ2012Âπ¥ÔºåLLVM Ëé∑ÂæóÁæéÂõΩËÆ°ÁÆóÊú∫Â≠¶‰ºö ACM ÁöÑËΩØ‰ª∂Á≥ªÁªüÂ§ßÂ•ñÔºåÂíå UNIXÔºåWWWÔºåTCP/IPÔºåTexÔºåJAVA Á≠âÈΩêÂêç„ÄÇ Chris Lattner Áîü‰∫é 1978 Âπ¥Ôºå2005Âπ¥Âä†ÂÖ•ËãπÊûúÔºåÂ∞ÜËãπÊûú‰ΩøÁî®ÁöÑ GCC ÂÖ®Èù¢ËΩ¨‰∏∫ LLVM„ÄÇ2010Âπ¥ÂºÄÂßã‰∏ªÂØºÂºÄÂèë Swift ËØ≠Ë®Ä„ÄÇ iOS ÂºÄÂèë‰∏≠ Objective-C ÊòØ Clang / LLVM Êù•ÁºñËØëÁöÑ„ÄÇ swift ÊòØ Swift / LLVMÔºåÂÖ∂‰∏≠ Swift ÂâçÁ´Ø‰ºöÂ§öÂá∫ SIL optimizerÔºåÂÆÉ‰ºöÊää .swift ÁîüÊàêÁöÑ‰∏≠Èó¥‰ª£Á†Å .sil Â±û‰∫é High-Level IRÔºå Âõ†‰∏∫ swift Âú®ÁºñËØëÊó∂Â∞±ÂÆåÊàê‰∫ÜÊñπÊ≥ïÁªëÂÆöÁõ¥Êé•ÈÄöËøáÂú∞ÂùÄË∞ÉÁî®Â±û‰∫éÂº∫Á±ªÂûãËØ≠Ë®ÄÔºåÊñπÊ≥ïË∞ÉÁî®‰∏çÂÜçÊòØÂÉèOCÈÇ£Ê†∑ÁöÑÊ∂àÊÅØÂèëÈÄÅÔºåËøôÊ†∑ÁºñËØëÂ∞±ÂèØ‰ª•Ëé∑ÂæóÊõ¥Â§öÁöÑ‰ø°ÊÅØÁî®Âú®ÂêéÈù¢ÁöÑÂêéÁ´Ø‰ºòÂåñ‰∏ä„ÄÇ LLVMÊòØ‰∏Ä‰∏™Ê®°ÂùóÂåñÂíåÂèØÈáçÁî®ÁöÑÁºñËØëÂô®ÂíåÂ∑•ÂÖ∑ÈìæÊäÄÊúØÁöÑÈõÜÂêàÔºåClang ÊòØ LLVM ÁöÑÂ≠êÈ°πÁõÆÔºåÊòØ CÔºåC++ Âíå Objective-C ÁºñËØëÂô®ÔºåÁõÆÁöÑÊòØÊèê‰æõÊÉä‰∫∫ÁöÑÂø´ÈÄüÁºñËØëÔºåÊØî GCC Âø´3ÂÄçÔºåÂÖ∂‰∏≠ÁöÑ clang static analyzer ‰∏ªË¶ÅÊòØËøõË°åËØ≠Ê≥ïÂàÜÊûêÔºåËØ≠‰πâÂàÜÊûêÂíåÁîüÊàê‰∏≠Èó¥‰ª£Á†ÅÔºåÂΩìÁÑ∂Ëøô‰∏™ËøáÁ®ã‰ºöÂØπ‰ª£Á†ÅËøõË°åÊ£ÄÊü•ÔºåÂá∫ÈîôÁöÑÂíåÈúÄË¶ÅË≠¶ÂëäÁöÑ‰ºöÊ†áÊ≥®Âá∫Êù•„ÄÇLLVM Ê†∏ÂøÉÂ∫ìÊèê‰æõ‰∏Ä‰∏™‰ºòÂåñÂô®ÔºåÂØπÊµÅË°åÁöÑ CPU ÂÅö‰ª£Á†ÅÁîüÊàêÊîØÊåÅ„ÄÇlld ÊòØ Clang / LLVM ÁöÑÂÜÖÁΩÆÈìæÊé•Âô®Ôºåclang ÂøÖÈ°ªË∞ÉÁî®ÈìæÊé•Âô®Êù•‰∫ßÁîüÂèØÊâßË°åÊñá‰ª∂„ÄÇ LLVM ÊØîËæÉÊúâÁâπËâ≤ÁöÑ‰∏ÄÁÇπÊòØÂÆÉËÉΩÊèê‰æõ‰∏ÄÁßç‰ª£Á†ÅÁºñÂÜôËâØÂ•ΩÁöÑ‰∏≠Èó¥Ë°®Á§∫ IRÔºåËøôÊÑèÂë≥ÁùÄÂÆÉÂèØ‰ª•‰Ωú‰∏∫Â§öÁßçËØ≠Ë®ÄÁöÑÂêéÁ´ØÔºåËøôÊ†∑Â∞±ËÉΩÂ§üÊèê‰æõËØ≠Ë®ÄÊó†ÂÖ≥ÁöÑ‰ºòÂåñÂêåÊó∂ËøòËÉΩÂ§üÊñπ‰æøÁöÑÈíàÂØπÂ§öÁßç CPU ÁöÑ‰ª£Á†ÅÁîüÊàê„ÄÇ LLVM ËøòÁî®Âú® Gallium3D ‰∏≠ËøõË°å JIT ‰ºòÂåñÔºåXorg ‰∏≠ÁöÑ pixman ‰πüÊúâËÄÉËôë‰ΩøÁî® LLVM ‰ºòÂåñÊâßË°åÈÄüÂ∫¶Ôºå LLVM-Lua Áî®LLVM Êù•ÁºñËØë lua ‰ª£Á†ÅÔºå gpuocelot ‰ΩøÁî® LLVM ÂèØ‰ª•ËÆ© CUDA Á®ãÂ∫èÊó†ÈúÄÈáçÊñ∞ÁºñËØëÂ∞±ËÉΩÂ§üÂú®Â§öÁßç CPU Êú∫Âô®‰∏äË∑ë„ÄÇ ËøôÈáåÊòØ Clang ÂÆòÊñπËØ¶ÁªÜÊñáÊ°£Ôºö Welcome to Clang‚Äôs documentation! ‚Äî Clang 4.0 documentation ËøôÁØáÊòØÂØπ LLVM Êû∂ÊûÑÁöÑ‰∏Ä‰∏™Ê¶ÇËø∞Ôºö The Architecture of Open Source Applications Â∞ÜÁºñËØëÂô®‰πãÂâçÂØπ‰∫éÁºñËØëÁöÑÂâç‰∏ñ‰ªäÁîü‰πüÊòØÈúÄË¶Å‰∫ÜËß£ÁöÑÔºåÊØîÂ¶ÇÂõûÁ≠î‰∏ãËøô‰∏™ÈóÆÈ¢òÔºåÁºñËØëÂô®Á®ãÂ∫èÊòØÁî®‰ªÄ‰πàÁºñËØëÁöÑÔºüÁúãÁúã „Äälinkers and loaders„Äã ËøôÊú¨‰π¶Â∞±Áü•ÈÅì‰∫Ü„ÄÇ ÁºñËØëÊµÅÁ®ãÂú®ÂàóÂá∫ÂÆåÊï¥Ê≠•È™§‰πãÂâçÂèØ‰ª•ÂÖàÁúã‰∏™ÁÆÄÂçï‰æãÂ≠ê„ÄÇÁúãÁúãÊòØÂ¶Ç‰ΩïÂÆåÊàê‰∏ÄÊ¨°ÁºñËØëÁöÑ„ÄÇ 12345678910111213#import &lt;Foundation/Foundation.h&gt;#define DEFINEEight 8int main(){ @autoreleasepool { int eight = DEFINEEight; int six = 6; NSString* site = [[NSString alloc] initWithUTF8String:‚Äùstarming‚Äù]; int rank = eight + six; NSLog(@‚Äú%@ rank %d‚Äù, site, rank); } return 0;} Âú®ÂëΩ‰ª§Ë°åËæìÂÖ• 1clang -ccc-print-phases main.m ÂèØ‰ª•ÁúãÂà∞ÁºñËØëÊ∫êÊñá‰ª∂ÈúÄË¶ÅÁöÑÂá†‰∏™‰∏çÂêåÁöÑÈò∂ÊÆµ 12345670: input, ‚Äúmain.m‚Äù, objective-c1: preprocessor, {0}, objective-c-cpp-output2: compiler, {1}, ir3: backend, {2}, assembler4: assembler, {3}, object5: linker, {4}, image6: bind-arch, ‚Äúx86_64‚Äù, {5}, image ËøôÊ†∑ËÉΩÂ§ü‰∫ÜËß£Âà∞ËøáÁ®ãÂíåÈáçË¶ÅÁöÑ‰ø°ÊÅØ„ÄÇÊü•ÁúãocÁöÑcÂÆûÁé∞ÂèØ‰ª•‰ΩøÁî®Â¶Ç‰∏ãÂëΩ‰ª§ 1clang -rewrite-objc main.m Êü•ÁúãÊìç‰ΩúÂÜÖÈÉ®ÂëΩ‰ª§ÔºåÂèØ‰ª•‰ΩøÁî® -### ÂëΩ‰ª§ 1clang -### main.m -o main ÊÉ≥ÁúãÊ∏ÖclangÁöÑÂÖ®ÈÉ®ËøáÁ®ãÔºåÂèØ‰ª•ÂÖàÈÄöËøá-EÊü•ÁúãclangÂú®È¢ÑÁºñËØëÂ§ÑÁêÜËøôÊ≠•ÂÅö‰∫Ü‰ªÄ‰πà„ÄÇ 1clang -E main.m ÊâßË°åÂÆåÂêéÂèØ‰ª•ÁúãÂà∞Êñá‰ª∂ 1234567891011121314# 1 ‚Äú/System/Library/Frameworks/Foundation.framework/Headers/FoundationLegacySwiftCompatibility.h‚Äù 1 3# 185 ‚Äú/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h‚Äù 2 3# 2 ‚Äúmain.m‚Äù 2int main(){ @autoreleasepool { int eight = 8; int six = 6; NSString* site = [[NSString alloc] initWithUTF8String:‚Äùstarming‚Äù]; int rank = eight + six; NSLog(@‚Äú%@ rank %d‚Äù, site, rank); } return 0;} Ëøô‰∏™ËøáÁ®ãÁöÑÂ§ÑÁêÜÂåÖÊã¨ÂÆèÁöÑÊõøÊç¢ÔºåÂ§¥Êñá‰ª∂ÁöÑÂØºÂÖ•„ÄÇ‰∏ãÈù¢Ëøô‰∫õ‰ª£Á†Å‰πü‰ºöÂú®ËøôÊ≠•Â§ÑÁêÜ„ÄÇ ‚Äú#define‚Äù ‚Äú#include‚Äù ‚Äú#indef‚Äù Ê≥®Èáä ‚Äú#pragma‚Äù È¢ÑÂ§ÑÁêÜÂÆåÊàêÂêéÂ∞±‰ºöËøõË°åËØçÊ≥ïÂàÜÊûêÔºåËøôÈáå‰ºöÊää‰ª£Á†ÅÂàáÊàê‰∏Ä‰∏™‰∏™ TokenÔºåÊØîÂ¶ÇÂ§ßÂ∞èÊã¨Âè∑ÔºåÁ≠â‰∫éÂè∑ËøòÊúâÂ≠óÁ¨¶‰∏≤Á≠â„ÄÇ 1clang -fmodules -fsyntax-only -Xclang -dump-tokens main.m ÁÑ∂ÂêéÊòØËØ≠Ê≥ïÂàÜÊûêÔºåÈ™åËØÅËØ≠Ê≥ïÊòØÂê¶Ê≠£Á°ÆÔºåÁÑ∂ÂêéÂ∞ÜÊâÄÊúâËäÇÁÇπÁªÑÊàêÊäΩË±°ËØ≠Ê≥ïÊ†ë AST „ÄÇ 1clang -fmodules -fsyntax-only -Xclang -ast-dump main.m ÂÆåÊàêËøô‰∫õÊ≠•È™§ÂêéÂ∞±ÂèØ‰ª•ÂºÄÂßãIR‰∏≠Èó¥‰ª£Á†ÅÁöÑÁîüÊàê‰∫ÜÔºåCodeGen ‰ºöË¥üË¥£Â∞ÜËØ≠Ê≥ïÊ†ëËá™È°∂Âêë‰∏ãÈÅçÂéÜÈÄêÊ≠•ÁøªËØëÊàê LLVM IRÔºåIR ÊòØÁºñËØëËøáÁ®ãÁöÑÂâçÁ´ØÁöÑËæìÂá∫ÂêéÁ´ØÁöÑËæìÂÖ•„ÄÇ 1clang -S -fobjc-arc -emit-llvm main.m -o main.ll ËøôÈáå LLVM ‰ºöÂéªÂÅö‰∫õ‰ºòÂåñÂ∑•‰ΩúÔºåÂú® Xcode ÁöÑÁºñËØëËÆæÁΩÆÈáå‰πüÂèØ‰ª•ËÆæÁΩÆ‰ºòÂåñÁ∫ßÂà´-01Ôºå-03Ôºå-0sÔºåËøòÂèØ‰ª•ÂÜô‰∫õËá™Â∑±ÁöÑ PassÔºåÂÆòÊñπÊúâÊØîËæÉÂÆåÊï¥ÁöÑ Pass ÊïôÁ®ãÔºö Writing an LLVM Pass ‚Äî LLVM 5 documentation „ÄÇ 1clang -O3 -S -fobjc-arc -emit-llvm main.m -o main.ll Pass ÊòØ LLVM ‰ºòÂåñÂ∑•‰ΩúÁöÑ‰∏Ä‰∏™ËäÇÁÇπÔºå‰∏Ä‰∏™ËäÇÁÇπÂÅö‰∫õ‰∫ãÔºå‰∏ÄËµ∑Âä†Ëµ∑Êù•Â∞±ÊûÑÊàê‰∫Ü LLVM ÂÆåÊï¥ÁöÑ‰ºòÂåñÂíåËΩ¨Âåñ„ÄÇ Â¶ÇÊûúÂºÄÂêØ‰∫Ü bitcode ËãπÊûú‰ºöÂÅöËøõ‰∏ÄÊ≠•ÁöÑ‰ºòÂåñÔºåÊúâÊñ∞ÁöÑÂêéÁ´ØÊû∂ÊûÑËøòÊòØÂèØ‰ª•Áî®Ëøô‰ªΩ‰ºòÂåñËøáÁöÑ bitcode ÂéªÁîüÊàê„ÄÇ 1clang -emit-llvm -c main.m -o main.bc ÁîüÊàêÊ±áÁºñ 1clang -S -fobjc-arc main.m -o main.s ÁîüÊàêÁõÆÊ†áÊñá‰ª∂ 1clang -fmodules -c main.m -o main.o ÁîüÊàêÂèØÊâßË°åÊñá‰ª∂ÔºåËøôÊ†∑Â∞±ËÉΩÂ§üÊâßË°åÁúãÂà∞ËæìÂá∫ÁªìÊûú 12345clang main.o -o mainÊâßË°å./mainËæìÂá∫starming rank 14 ‰∏ãÈù¢ÊòØÂÆåÊï¥Ê≠•È™§Ôºö ÁºñËØë‰ø°ÊÅØÂÜôÂÖ•ËæÖÂä©Êñá‰ª∂ÔºåÂàõÂª∫Êñá‰ª∂Êû∂ÊûÑ .app Êñá‰ª∂ Â§ÑÁêÜÊñá‰ª∂ÊâìÂåÖ‰ø°ÊÅØ ÊâßË°å CocoaPod ÁºñËØëÂâçËÑöÊú¨ÔºåcheckPods Manifest.lock ÁºñËØë.mÊñá‰ª∂Ôºå‰ΩøÁî® CompileC Âíå clang ÂëΩ‰ª§ ÈìæÊé•ÈúÄË¶ÅÁöÑ Framework ÁºñËØë xib Êã∑Ë¥ù xib ÔºåËµÑÊ∫êÊñá‰ª∂ ÁºñËØë ImageAssets Â§ÑÁêÜ info.plist ÊâßË°å CocoaPod ËÑöÊú¨ Êã∑Ë¥ùÊ†áÂáÜÂ∫ì ÂàõÂª∫ .app Êñá‰ª∂ÂíåÁ≠æÂêç Clang ÁºñËØë .m Êñá‰ª∂Âú® Xcode ÁºñËØëËøáÂêéÔºåÂèØ‰ª•ÈÄöËøá Show the report navigator ÈáåÂØπÂ∫î target ÁöÑ build ‰∏≠Êü•ÁúãÊØè‰∏™ .m Êñá‰ª∂ÁöÑ clang ÂèÇÊï∞‰ø°ÊÅØÔºåËøô‰∫õÂèÇÊï∞ÈÉΩÊòØÈÄöËøáBuild Setting„ÄÇ ÂÖ∑‰ΩìÊãøÁºñËØë AFSecurityPolicy.m ÁöÑ‰ø°ÊÅØÊù•ÁúãÁúã„ÄÇÈ¶ñÂÖàÂØπ‰ªªÂä°ËøõË°åÊèèËø∞„ÄÇ 1CompileC DerivedData path/AFSecurityPolicy.o AFNetworking/AFNetworking/AFSecurityPolicy.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler Êé•‰∏ãÊù•ÂØπ‰ºöÊõ¥Êñ∞Â∑•‰ΩúË∑ØÂæÑÔºåÂêåÊó∂ËÆæÁΩÆ PATH 123cd /Users/didi/Documents/Demo/GitHub/GCDFetchFeed/GCDFetchFeed/Pods export LANG=en_US.US-ASCII export PATH=‚Äú/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin‚Äù Êé•‰∏ãÊù•Â∞±ÊòØÂÆûÈôÖÁöÑÁºñËØëÂëΩ‰ª§ 1clang -x objective-c -arch x86_64 -fmessage-length=0 -fobjc-arc‚Ä¶ -Wno-missing-field-initializers ‚Ä¶ -DDEBUG=1 ‚Ä¶ -isysroot iPhoneSimulator10.1.sdk -fasm-blocks ‚Ä¶ -I -F -c AFSecurityPolicy.m -o AFSecurityPolicy.o clang ÂëΩ‰ª§ÂèÇÊï∞ 12345678910-x ÁºñËØëËØ≠Ë®ÄÊØîÂ¶Çobjective-c-arch ÁºñËØëÁöÑÊû∂ÊûÑÔºåÊØîÂ¶Çarm7-f ‰ª•-fÂºÄÂ§¥ÁöÑ„ÄÇ-W ‰ª•-WÂºÄÂ§¥ÁöÑÔºåÂèØ‰ª•ÈÄöËøáËøô‰∫õÂÆöÂà∂ÁºñËØëË≠¶Âëä-D ‰ª•-DÂºÄÂ§¥ÁöÑÔºåÊåáÁöÑÊòØÈ¢ÑÁºñËØëÂÆèÔºåÈÄöËøáËøô‰∫õÂÆèÂèØ‰ª•ÂÆûÁé∞Êù°‰ª∂ÁºñËØë-iPhoneSimulator10.1.sdk ÁºñËØëÈááÁî®ÁöÑiOS SDKÁâàÊú¨-I ÊääÁºñËØë‰ø°ÊÅØÂÜôÂÖ•ÊåáÂÆöÁöÑËæÖÂä©Êñá‰ª∂-F ÈúÄË¶ÅÁöÑFramework-c Ê†áËØÜÁ¨¶ÊåáÊòéÈúÄË¶ÅËøêË°åÈ¢ÑÂ§ÑÁêÜÂô®ÔºåËØ≠Ê≥ïÂàÜÊûêÔºåÁ±ªÂûãÊ£ÄÊü•ÔºåLLVMÁîüÊàê‰ºòÂåñ‰ª•ÂèäÊ±áÁºñ‰ª£Á†ÅÁîüÊàê.oÊñá‰ª∂-o ÁºñËØëÁªìÊûú ÊûÑÂª∫ TargetÁºñËØëÂ∑•Á®ã‰∏≠ÁöÑÁ¨¨‰∏âÊñπ‰æùËµñÂ∫ìÂêé‰ºöÊûÑÂª∫Êàë‰ª¨Á®ãÂ∫èÁöÑ targetÔºå‰ºöÊåâÈ°∫Â∫èËæìÂá∫Â¶Ç‰∏ãÁöÑ‰ø°ÊÅØÔºö 123456789101112131415Create product structureProcess product packagingRun custom shell script ‚ÄòCheck Pods Manifest.lock‚ÄôCompile ‚Ä¶ ÂêÑ‰∏™È°πÁõÆ‰∏≠ÁöÑ.mÊñá‰ª∂Link /Users/‚Ä¶ Ë∑ØÂæÑCopy ‚Ä¶ ÈùôÊÄÅÊñá‰ª∂Compile asset catalogsCompile Storyboard file ‚Ä¶Process info.plistLink StoryboardsRun custom shell script ‚ÄòEmbed Pods Frameworks‚ÄôRun custom shell script ‚ÄòCopy Pods Resources‚Äô‚Ä¶Touch GCDFetchFeed.appSign GCDFetchFeed.app ‰ªéËøô‰∫õ‰ø°ÊÅØÂèØ‰ª•ÁúãÂá∫Âú®Ëøô‰∫õÊ≠•È™§‰∏≠‰ºöÂàÜÂà´Ë∞ÉÁî®‰∏çÂêåÁöÑÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑Êù•ÊâßË°å„ÄÇ Target Âú® Build ËøáÁ®ãÁöÑÊéßÂà∂Âú® Xcode ÁöÑ Project editor ‰∏≠ÁöÑ Build SettingÔºåBuild Phases Âíå Build Rules ËÉΩÂ§üÊéßÂà∂ÁºñËØëÁöÑËøáÁ®ã„ÄÇ Build PhasesÊûÑÂª∫ÂèØÊâßË°åÊñá‰ª∂ÁöÑËßÑÂàô„ÄÇÊåáÂÆö target ÁöÑ‰æùËµñÈ°πÁõÆÔºåÂú® target build ‰πãÂâçÈúÄË¶ÅÂÖà build ÁöÑ‰æùËµñ„ÄÇÂú® Compile Source ‰∏≠ÊåáÂÆöÊâÄÊúâÂøÖÈ°ªÁºñËØëÁöÑÊñá‰ª∂ÔºåËøô‰∫õÊñá‰ª∂‰ºöÊ†πÊçÆ Build Setting Âíå Build Rules ÈáåÁöÑËÆæÁΩÆÊù•Â§ÑÁêÜ„ÄÇ Âú® Link Binary With Libraries Èáå‰ºöÂàóÂá∫ÊâÄÊúâÁöÑÈùôÊÄÅÂ∫ìÂíåÂä®ÊÄÅÂ∫ìÔºåÂÆÉ‰ª¨‰ºöÂíåÁºñËØëÁîüÊàêÁöÑÁõÆÊ†áÊñá‰ª∂ËøõË°åÈìæÊé•„ÄÇ build phase Ëøò‰ºöÊääÈùôÊÄÅËµÑÊ∫êÊã∑Ë¥ùÂà∞ bundle Èáå„ÄÇ ÂèØ‰ª•ÈÄöËøáÂú® build phases ÈáåÊ∑ªÂä†Ëá™ÂÆö‰πâËÑöÊú¨Êù•ÂÅö‰∫õ‰∫ãÊÉÖÔºåÊØîÂ¶ÇÂÉè CocoaPods ÊâÄÂÅöÁöÑÈÇ£Ê†∑„ÄÇ Build RulesÊåáÂÆö‰∏çÂêåÊñá‰ª∂Á±ªÂûãÂ¶Ç‰ΩïÁºñËØë„ÄÇÊØèÊù° build rule ÊåáÂÆö‰∫ÜËØ•Á±ªÂûãÂ¶Ç‰ΩïÂ§ÑÁêÜ‰ª•ÂèäËæìÂá∫Âú®Âì™„ÄÇÂèØ‰ª•Â¢ûÂä†‰∏ÄÊù°Êñ∞ËßÑÂàôÂØπÁâπÂÆöÊñá‰ª∂Á±ªÂûãÊ∑ªÂä†Â§ÑÁêÜÊñπÊ≥ï„ÄÇ Build SettingsÂú® build ÁöÑËøáÁ®ã‰∏≠ÂêÑ‰∏™Èò∂ÊÆµÁöÑÈÄâÈ°πÁöÑËÆæÁΩÆ„ÄÇ pbxprojÂ∑•Á®ãÊñá‰ª∂build ËøáÁ®ãÊéßÂà∂ÁöÑËøô‰∫õËÆæÁΩÆÈÉΩ‰ºöË¢´‰øùÂ≠òÂú®Â∑•Á®ãÊñá‰ª∂ .pbxproj Èáå„ÄÇÂú®Ëøô‰∏™Êñá‰ª∂‰∏≠ÂèØ‰ª•Êâæ rootObject ÁöÑ ID ÂÄº 1rootObject = 3EE311301C4E1F0800103FA3 /* Project object */; ÁÑ∂ÂêéÊ†πÊçÆËøô‰∏™ ID ÊâæÂà∞ main Â∑•Á®ãÁöÑÂÆö‰πâ„ÄÇ 12345/* Begin PBXProject section */ 3EE311301C4E1F0800103FA3 /* Project object */ = { isa = PBXProject; ‚Ä¶/* End PBXProject section */ Âú® targets Èáå‰ºöÊåáÂêëÂêÑ‰∏™ taget ÁöÑÂÆö‰πâ 12345targets = ( 3EE311371C4E1F0800103FA3 /* GCDFetchFeed */, 3EE311501C4E1F0800103FA3 /* GCDFetchFeedTests */, 3EE3115B1C4E1F0800103FA3 /* GCDFetchFeedUITests */,); È°∫ÁùÄËøô‰∫õ ID Â∞±ËÉΩÂ§üÊâæÂà∞Êõ¥ËØ¶ÁªÜÁöÑÂÆö‰πâÂú∞Êñπ„ÄÇÊØîÂ¶ÇÊàë‰ª¨ÈÄöËøá GCDFetchFeed Ëøô‰∏™ target ÁöÑ ID ÊâæÂà∞ÂÆö‰πâÂ¶Ç‰∏ãÔºö 12345678910111213141516171819203EE311371C4E1F0800103FA3 /* GCDFetchFeed */ = { isa = PBXNativeTarget; buildConfigurationList = 3EE311651C4E1F0800103FA3 /* configuration list for PBXNativeTarget ‚ÄúGCDFetchFeed‚Äù buildPhases = ( 9527AA01F4AAE11E18397E0C /* Check Pods st.lock */, 3EE311341C4E1F0800103FA3 /* Sources */, 3EE311351C4E1F0800103FA3 /* Frameworks */, 3EE311361C4E1F0800103FA3 /* Resources */, C3DDA7C46C0308459A18B7D9 /* Embed Pods Frameworks DD33A716222617FAB49F1472 /* Copy Pods Resources ); buildRules = ( ); dependencies = ( ); name = GCDFetchFeed; productName = GCDFetchFeed; productReference = 3EE311381C4E1F0800103FA3 /* chFeed.app */; productType = ‚Äúcom.apple.product-type.application‚Äù;}; Ëøô‰∏™ÈáåÈù¢ÂèàÊúâÊõ¥Â§öÁöÑ ID ÂèØ‰ª•ÂæóÂà∞Êõ¥Â§öÁöÑÂÆö‰πâÔºåÂÖ∂‰∏≠ buildConfigurationList ÊåáÂêë‰∫ÜÂèØÁî®ÁöÑÈÖçÁΩÆÈ°πÔºåÂåÖÂê´ Debug Âíå Release„ÄÇÂèØ‰ª•ÁúãÂà∞ËøòÊúâ buildPhasesÔºåbuildRules Âíå dependencies ÈÉΩËÉΩÂ§üÈÄöËøáËøôÈáåÁ¥¢ÂºïÊâæÂà∞Êõ¥ËØ¶ÁªÜÁöÑÂÆö‰πâ„ÄÇ Êé•‰∏ãÊù•ËØ¶ÁªÜÁöÑÁúãÁúã Clang ÊâÄÂÅöÁöÑ‰∫ãÊÉÖÂêß„ÄÇ Clang Static AnalyzerÈùôÊÄÅ‰ª£Á†ÅÂàÜÊûêÂèØ‰ª•Âú® llvm/clang/ Source Tree - Woboq Code Browser ‰∏äÊü•Áúã Clang ÁöÑ‰ª£Á†Å„ÄÇ Youtube‰∏ä‰∏Ä‰∏™ÊïôÁ®ãÔºöThe Clang AST - a Tutorial - YouTubeCMUÂÖ≥‰∫éllvmÁöÑÊïôÊ°à https://www.cs.cmu.edu/afs/cs.cmu.edu/academic/class/15745-s14/public/lectures/ ÈùôÊÄÅÂàÜÊûêÂâç‰ºöÂØπÊ∫ê‰ª£Á†ÅÂàÜËØçÊàê TokenÔºåËøô‰∏™ËøáÁ®ãÁß∞‰∏∫ËØçÊ≥ïÂàÜÊûêÔºàLexical AnalysisÔºâÔºåÂú® TokensKind.def ÈáåÊúâ Clang ÂÆö‰πâÁöÑÊâÄÊúâ Token„ÄÇToken ÂèØ‰ª•ÂàÜ‰∏∫‰ª•‰∏ãÂá†Á±ª ÂÖ≥ÈîÆÂ≠óÔºöËØ≠Ê≥ï‰∏≠ÁöÑÂÖ≥ÈîÆÂ≠óÔºåif else while for Á≠â„ÄÇ Ê†áËØÜÁ¨¶ÔºöÂèòÈáèÂêç Â≠óÈù¢ÈáèÔºöÂÄºÔºåÊï∞Â≠óÔºåÂ≠óÁ¨¶‰∏≤ ÁâπÊÆäÁ¨¶Âè∑ÔºöÂä†Âáè‰πòÈô§Á≠âÁ¨¶Âè∑ ÈÄöËøá‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂèØ‰ª•ËæìÂá∫ÊâÄÊúâ token ÂíåÊâÄÂú®Êñá‰ª∂ÂÖ∑‰Ωì‰ΩçÁΩÆ 123clang -fmodules -E -Xclang -dump-tokens main.m``` ÁªìÊûúÂ¶Ç‰∏ã annot_module_include ‚Äò#import &lt;Fo‚Äô Loc=main.m:2:1int ‚Äòint‚Äô [StartOfLine] Loc=main.m:5:1identifier ‚Äòmain‚Äô [LeadingSpace] Loc=main.m:5:5l_paren ‚Äò(‚Äò Loc=main.m:5:9r_paren ‚Äò)‚Äô Loc=main.m:5:10l_brace ‚Äò{‚Äò [LeadingSpace] Loc=main.m:5:12at ‚Äò@‚Äò [StartOfLine] [LeadingSpace] Loc=main.m:6:5identifier ‚Äòautoreleasepool‚Äô Loc=main.m:6:6l_brace ‚Äò{‚Äò [LeadingSpace] Loc=main.m:6:22identifier ‚ÄòNSString‚Äô [StartOfLine] [LeadingSpace] Loc=main.m:7:9star ‚Äò*‚Äô [LeadingSpace] Loc=main.m:7:18identifier ‚Äòa‚Äô Loc=main.m:7:19equal ‚Äò=‚Äò [LeadingSpace] Loc=main.m:7:21at ‚Äò@‚Äò [LeadingSpace] Loc=main.m:7:23string_literal ‚Äò‚Äùaaa‚Äù‚Äô Loc=main.m:7:24semi ‚Äò;‚Äô Loc=main.m:7:29identifier ‚ÄòNSLog‚Äô [StartOfLine] [LeadingSpace] Loc=main.m:8:9l_paren ‚Äò(‚Äò Loc=main.m:8:14at ‚Äò@‚Äò Loc=main.m:8:15string_literal ‚Äò‚Äùhi %@‚Äú‚Äô Loc=main.m:8:16comma ‚Äò,‚Äô Loc=main.m:8:23identifier ‚Äòa‚Äô Loc=main.m:8:24r_paren ‚Äò)‚Äô Loc=main.m:8:25semi ‚Äò;‚Äô Loc=main.m:8:26r_brace ‚Äò}‚Äô [StartOfLine] [LeadingSpace] Loc=main.m:9:5return ‚Äòreturn‚Äô [StartOfLine] [LeadingSpace] Loc=main.m:10:5numeric_constant ‚Äò0‚Äô [LeadingSpace] Loc=main.m:10:12semi ‚Äò;‚Äô Loc=main.m:10:13r_brace ‚Äò}‚Äô [StartOfLine] Loc=main.m:11:1eof ‚Äò‚Äô Loc=main.m:11:2 1234567ÂèØ‰ª•Ëé∑ÂæóÊØè‰∏™ token ÁöÑÁ±ªÂûãÔºåÂÄºËøòÊúâÁ±ª‰ºº StartOfLine ÁöÑ‰ΩçÁΩÆÁ±ªÂûãÂíå Loc=&lt;main.m:11:1&gt; Ëøô‰∏™Ê†∑ÁöÑÂÖ∑‰Ωì‰ΩçÁΩÆ„ÄÇÊé•ÁùÄËøõË°åËØ≠Ê≥ïÂàÜÊûêÔºàSemantic AnalysisÔºâÂ∞Ü token ÂÖàÊåâÁÖßËØ≠Ê≥ïÁªÑÂêàÊàêËØ≠‰πâÁîüÊàê VarDecl ËäÇÁÇπÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∫õËäÇÁÇπÊåâÁÖßÂ±ÇÁ∫ßÂÖ≥Á≥ªÊûÑÊàêÊäΩË±°ËØ≠Ê≥ïÊ†ë Abstract Syntax Tree (AST)„ÄÇÊâì‰∏™ÊØîÊñπÔºåÂ¶ÇÊûúÈÅáÂà∞ token ÊòØ = Á¨¶Âè∑ËøõË°åËµãÂÄºÁöÑÂ§ÑÁêÜÔºåÈÅáÂà∞Âä†Âáè‰πòÈô§Â∞±ÂÖàÂ§ÑÁêÜ‰πòÈô§ÔºåÁÑ∂ÂêéÂ§ÑÁêÜÂä†ÂáèÔºåËøô‰∫õÁªÑÂêàÁªèËøáÂµåÂ•óÂêé‰ºöÁîüÊàê‰∏Ä‰∏™ËØ≠Ê≥ïÊï∞ÁöÑÁªìÊûÑ„ÄÇËøô‰∏™ËøáÁ®ãÂÆåÊàêÂêé‰ºöËøõË°åËµãÂÄºÊìç‰ΩúÊó∂Á±ªÂûãÊòØ‰∏çÊòØÂåπÈÖçÁöÑÂ§ÑÁêÜ„ÄÇÊâìÂç∞ËØ≠Ê≥ïÊ†ëÁöÑÂëΩ‰ª§ clang -fmodules -fsyntax-only -Xclang -ast-dump main.m 1ËæìÂá∫ÁªìÊûú TranslationUnitDecl 0x7fa80f018ad0 &lt;&gt; |-TypedefDecl 0x7fa80f018fc8 &lt;&gt; implicit int128_t ‚Äòint128‚Äô| -BuiltinType 0x7fa80f018d20 ‚Äò__int128‚Äô |-TypedefDecl 0x7fa80f019028 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __uint128_t ‚Äòunsigned __int128‚Äô |-BuiltinType 0x7fa80f018d40 ‚Äòunsigned int128‚Äô|-TypedefDecl 0x7fa80f0190b8 &lt;&gt; implicit SEL ‚ÄòSEL *‚Äô| -PointerType 0x7fa80f019080 ‚ÄòSEL *‚Äô |-BuiltinType 0x7fa80f018f30 ‚ÄòSEL‚Äô|-TypedefDecl 0x7fa80f019198 &lt;&gt; implicit id ‚Äòid‚Äô| -ObjCObjectPointerType 0x7fa80f019140 ‚Äòid‚Äô imported |-ObjCObjectType 0x7fa80f019110 ‚Äòid‚Äô imported|-TypedefDecl 0x7fa80f019278 &lt;&gt; implicit Class ‚ÄòClass‚Äô| -ObjCObjectPointerType 0x7fa80f019220 ‚ÄòClass‚Äô |-ObjCObjectType 0x7fa80f0191f0 ‚ÄòClass‚Äô|-ObjCInterfaceDecl 0x7fa80f0192c8 &lt;&gt; implicit Protocol|-TypedefDecl 0x7fa80f019618 &lt;&gt; implicit __NSConstantString ‚Äòstruct __NSConstantString_tag‚Äô| -RecordType 0x7fa80f019430 ‚Äòstruct __NSConstantString_tag‚Äô |-Record 0x7fa80f019390 ‚ÄòNSConstantString_tag‚Äô|-TypedefDecl 0x7fa80f0196a8 &lt;&gt; implicit builtin_ms_va_list ‚Äòchar *‚Äô| -PointerType 0x7fa80f019670 ‚Äòchar *‚Äô |-BuiltinType 0x7fa80f018b60 ‚Äòchar‚Äô|-TypedefDecl 0x7fa80f047978 &lt;&gt; implicit __builtin_va_list ‚Äòstruct __va_list_tag [1]‚Äô| -ConstantArrayType 0x7fa80f047920 ‚Äòstruct __va_list_tag [1]‚Äô 1 |-RecordType 0x7fa80f0197a0 ‚Äòstruct __va_list_tag‚Äô| `-Record 0x7fa80f0196f8 ‚Äòva_list_tag‚Äô|-ImportDecl 0x7fa80f0486b0 main.m:2:1 col:1 implicit Foundation|-FunctionDecl 0x7fa80f048738 &lt;line:5:1, line:11:1&gt; line:5:5 main ‚Äòint ()‚Äô| -CompoundStmt 0x7fa80f393998 &lt;col:12, line:11:1&gt; | |-ObjCAutoreleasePoolStmt 0x7fa80f393950 &lt;line:6:5, line:9:5&gt; | |-CompoundStmt 0x7fa80f393928 &lt;line:6:22, line:9:5&gt;| | |-DeclStmt 0x7fa80f3a3b38 &lt;line:7:9, col:29&gt;| | | -VarDecl 0x7fa80f3a3580 &lt;col:9, col:24&gt; col:19 used a ‚ÄòNSString *‚Äô cinit | | |-ObjCStringLiteral 0x7fa80f3a3648 &lt;col:23, col:24&gt; ‚ÄòNSString ‚Äô| | | -StringLiteral 0x7fa80f3a3618 &lt;col:24&gt; ‚Äòchar [4]‚Äô lvalue ‚Äúaaa‚Äù | |-CallExpr 0x7fa80f3938c0 &lt;line:8:9, col:25&gt; ‚Äòvoid‚Äô| | |-ImplicitCastExpr 0x7fa80f3938a8 col:9 ‚Äòvoid ()(id, ‚Ä¶)‚Äô | | | -DeclRefExpr 0x7fa80f3a3b50 &lt;col:9&gt; ‚Äòvoid (id, ‚Ä¶)‚Äô Function 0x7fa80f3a3670 ‚ÄòNSLog‚Äô ‚Äòvoid (id, ‚Ä¶)‚Äô | | |-ImplicitCastExpr 0x7fa80f3938f8 &lt;col:15, col:16&gt; ‚Äòid‚Äô:‚Äôid‚Äô &lt;BitCast&gt; | | |-ObjCStringLiteral 0x7fa80f393800 &lt;col:15, col:16&gt; ‚ÄòNSString *‚Äô| | | -StringLiteral 0x7fa80f3a3bb8 &lt;col:16&gt; ‚Äòchar [6]‚Äô lvalue ‚Äúhi %@‚Äú | |-ImplicitCastExpr 0x7fa80f393910 col:24 ‚ÄòNSString *‚Äô | | -DeclRefExpr 0x7fa80f393820 &lt;col:24&gt; ‚ÄòNSString *‚Äô lvalue Var 0x7fa80f3a3580 ‚Äòa‚Äô ‚ÄòNSString *‚Äô |-ReturnStmt 0x7fa80f393980 &lt;line:10:5, col:12&gt;| -IntegerLiteral 0x7fa80f393960 &lt;col:12&gt; ‚Äòint‚Äô 0- 12345TranslationUnitDecl ÊòØÊ†πËäÇÁÇπÔºåË°®Á§∫‰∏Ä‰∏™Ê∫êÊñá‰ª∂„ÄÇDecl Ë°®Á§∫‰∏Ä‰∏™Â£∞ÊòéÔºåExpr Ë°®Á§∫Ë°®ËææÂºèÔºåLiteral Ë°®Á§∫Â≠óÈù¢ÈáèÊòØÁâπÊÆäÁöÑ ExprÔºåStmt Ë°®Á§∫ËØ≠Âè•„ÄÇclang ÈùôÊÄÅÂàÜÊûêÊòØÈÄöËøáÂª∫Á´ãÂàÜÊûêÂºïÊìéÂíå checkers ÊâÄÁªÑÊàêÁöÑÊû∂ÊûÑÔºåËøôÈÉ®ÂàÜÂäüËÉΩÂèØ‰ª•ÈÄöËøá clang ‚Äîanalyze ÂëΩ‰ª§ÊñπÂºèË∞ÉÁî®„ÄÇclang static analyzer ÂàÜ‰∏∫ analyzer core ÂàÜÊûêÂºïÊìéÂíå checkers ‰∏§ÈÉ®ÂàÜÔºåÊâÄÊúâ checker ÈÉΩÊòØÂü∫‰∫éÂ∫ïÂ±ÇÂàÜÊûêÂºïÊìé‰πã‰∏äÔºåÈÄöËøáÂàÜÊûêÂºïÊìéÊèê‰æõÁöÑÂäüËÉΩËÉΩÂ§üÁºñÂÜôÊñ∞ÁöÑ checker„ÄÇÂèØ‰ª•ÈÄöËøá clang ‚Äîanalyze -Xclang -analyzer-checker-help Êù•ÂàóÂá∫ÂΩìÂâç clang ÁâàÊú¨‰∏ãÊâÄÊúâ checker„ÄÇÂ¶ÇÊûúÊÉ≥ÁºñÂÜôËá™Â∑±ÁöÑ checkerÔºåÂèØ‰ª•Âú® clang È°πÁõÆÁöÑ lib / StaticAnalyzer / Checkers ÁõÆÂΩï‰∏ãÊâæÂà∞ÂÆû‰æãÂèÇËÄÉÔºåÊØîÂ¶Ç ObjCUnusedIVarsChecker.cpp Áî®Êù•Ê£ÄÊü•Êú™‰ΩøÁî®ÂÆö‰πâËøáÁöÑÂèòÈáè„ÄÇËøôÁßçÊñπÂºèËÉΩÂ§üÊñπ‰æøÁî®Êà∑Êâ©Â±ïÂØπ‰ª£Á†ÅÊ£ÄÊü•ËßÑÂàôÊàñËÄÖÂØπ bug Á±ªÂûãËøõË°åÊâ©Â±ïÔºå‰ΩÜÊòØËøôÁßçÊû∂ÊûÑ‰πüÊúâ‰∏çË∂≥ÔºåÊØèÊâßË°åÂÆå‰∏ÄÊù°ËØ≠Âè•ÂêéÔºåÂàÜÊûêÂºïÊìé‰ºöÈÅçÂéÜÊâÄÊúâ checker ‰∏≠ÁöÑÂõûË∞ÉÂáΩÊï∞ÔºåÊâÄ‰ª• checker Ë∂äÂ§öÔºåÈÄüÂ∫¶Ë∂äÊÖ¢„ÄÇÈÄöËøá clang -cc1 -analyzer-checker-help ÂèØ‰ª•ÂàóÂá∫ËÉΩË∞ÉÁî®ÁöÑ checkerÔºå‰∏ãÈù¢ÊòØÂ∏∏Áî® checker debug.ConfigDumper Dump config tabledebug.DumpCFG Display Control-Flow Graphsdebug.DumpCallGraph Display Call Graphdebug.DumpCalls Print calls as they are traversed by the enginedebug.DumpDominators Print the dominance tree for a given CFGdebug.DumpLiveVars Print results of live variable analysisdebug.DumpTraversal Print branch conditions as they are traversed by the enginedebug.ExprInspection Check the analyzer‚Äôs understanding of expressionsdebug.Stats Emit warnings with analyzer statisticsdebug.TaintTest Mark tainted symbols as such.debug.ViewCFG View Control-Flow Graphs using GraphVizdebug.ViewCallGraph View Call Graph using GraphVizdebug.ViewExplodedGraph View Exploded Graphs using GraphViz 1234567891011Ëøô‰∫õ checker ÈáåÊúÄÂ∏∏Áî®ÁöÑÊòØ DumpCFGÔºåDumpCallGraphÔºåDumpLiveVars Âíå DumpViewExplodedGraph„ÄÇclang static analyzer ÂºïÊìéÂ§ßËá¥ÂàÜ‰∏∫ CFGÔºåMemRegionÔºåSValBuilderÔºåConstraintManager Âíå ExplodedGraph Âá†‰∏™Ê®°Âùó„ÄÇclang static analyzer Êú¨Ë¥®‰∏äÂ∞±ÊòØ path-sensitive analysisÔºåË¶ÅÂæàÂ•ΩÁöÑÁêÜËß£ clang static analyzer ÂºïÊìéÂ∞±ÈúÄË¶ÅÂØπ Data Flow Analysis ÊúâÊâÄ‰∫ÜËß£ÔºåÂåÖÊã¨Ëø≠‰ª£Êï∞ÊçÆÊµÅÂàÜÊûêÔºåpath-sensitiveÔºåpath-insensitive Ôºåflow-sensitiveÁ≠â„ÄÇÁºñËØëÁöÑÊ¶ÇÂøµÔºàËØçÊ≥ï-&gt;ËØ≠Ê≥ï-&gt;ËØ≠‰πâ-&gt;IR-&gt;‰ºòÂåñ-&gt;CodeGenÔºâÂú® clang static analyzer ÈáåÂà∞Â§ÑÂèØËßÅÔºå‰æãÂ¶Ç Relaxed Live Variables Analysis ÂèØ‰ª•ÂáèÂ∞ëÂàÜÊûê‰∏≠ÁöÑÂÜÖÂ≠òÊ∂àËÄóÔºå‰ΩøÁî® mark-sweep ÂÆûÁé∞ Dead Symbols ÁöÑÂà†Èô§„ÄÇclang static analyzer Êèê‰æõ‰∫ÜÂæàÂ§öËæÖÂä©ÊñπÊ≥ïÔºåÊØîÂ¶Ç SVal.dump()ÔºåMemRegion.getString ‰ª•Âèä Stmt Âíå Dcel Êèê‰æõÁöÑ dump ÊñπÊ≥ï„ÄÇClang ÊäΩË±°ËØ≠Ê≥ïÊ†ë Clang AST Â∏∏ËßÅÁöÑ API Êúâ StmtÔºåDeclÔºåExpr Âíå QualType„ÄÇÂú®ÁºñÂÜô checker Êó∂‰ºöÈÅáÂà∞ AST ÁöÑÂ±ÇÁ∫ßÊ£ÄÊü•ÔºåËøôÊó∂Êúâ‰∏™ÂæàÂ•ΩÁöÑÊé•Âè£ StmtVisitorÔºåËøô‰∏™Êé•Âè£Á±ª‰ºº RecursiveASTVisitor„ÄÇÊï¥‰∏™ clang static analyzer ÁöÑÂÖ•Âè£ÊòØ AnalysisConsumerÔºåÊé•ÁùÄ‰ºöË∞É HandleTranslationUnit() ÊñπÊ≥ïËøõË°å AST Â±ÇÁ∫ßËøõË°åÂàÜÊûêÊàñËÄÖËøõË°å path-sensitive ÂàÜÊûê„ÄÇÈªòËÆ§‰ºöÊåâÁÖß inline ÁöÑ path-sensitive ÂàÜÊûêÔºåÊûÑÂª∫ CallGraphÔºå‰ªéÈ°∂Â±Ç caller ÊåâÁÖßË∞ÉÁî®ÁöÑÂÖ≥Á≥ªÊù•ÂàÜÊûêÔºåÂÖ∑‰ΩìÊòØ‰ΩøÁî®ÁöÑ WorkList ÁÆóÊ≥ïÔºå‰ªé EntryBlock ÂºÄÂßã‰∏ÄÊ≠•Ê≠•ÁöÑÊ®°ÊãüÔºåËøô‰∏™ËøáÁ®ãÂè´ÂÅö intra-procedural analysisÔºàIPAÔºâ„ÄÇËøô‰∏™Ê®°ÊãüËøáÁ®ãËøòÈúÄË¶ÅÂØπÂÜÖÂ≠òËøõË°åÊ®°ÊãüÔºåclang static analyzer ÁöÑÂÜÖÂ≠òÊ®°ÂûãÊòØÂü∫‰∫é„ÄäA Memory Model for Static Analysis of C Programs„ÄãËøôÁØáËÆ∫ÊñáËÄåÊù•ÔºåpdfÂú∞ÂùÄÔºöhttps://lcs.ios.ac.cn/~xuzb/canalyze/memmodel.pdf Âú®clangÈáåÁöÑÂÖ∑‰ΩìÂÆûÁé∞‰ª£Á†ÅÂèØ‰ª•Êü•ÁúãËøô‰∏§‰∏™Êñá‰ª∂ [MemRegion.h](https://code.woboq.org/llvm/clang/include/clang/StaticAnalyzer/Core/PathSensitive/MemRegion.h.html)Âíå [RegionStore.cpp](https://code.woboq.org/llvm/clang/lib/StaticAnalyzer/Core/RegionStore.cpp.html) „ÄÇ‰∏ãÈù¢‰∏æ‰∏™ÁÆÄÂçï‰æãÂ≠êÁúãÁúã clang static analyzer ÊòØÂ¶Ç‰ΩïÂØπÊ∫êÁ†ÅËøõË°åÊ®°ÊãüÁöÑ„ÄÇ int main(){ int a; int b = 10; a = b; return a;} 1ÂØπÂ∫îÁöÑ AST ‰ª•Âèä CFG #‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîAST‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî clang -cc1 -ast-dumpTranslationUnitDecl 0xc75b450 &lt;&gt; |-TypedefDecl 0xc75b740 &lt;&gt; implicit __builtin_va_list ‚Äòchar *‚Äô-FunctionDecl 0xc75b7b0 &lt;test.cpp:1:1, line:7:1&gt; line:1:5 main ‚Äòint (void)‚Äô-CompoundStmt 0xc75b978 &lt;line:2:1, line:7:1&gt; |-DeclStmt 0xc75b870 &lt;line:3:2, col:7&gt; | -VarDecl 0xc75b840 &lt;col:2, col:6&gt; col:6 used a ‚Äòint‚Äô |-DeclStmt 0xc75b8d8 &lt;line:4:2, col:12&gt; |-VarDecl 0xc75b890 &lt;col:2, col:10&gt; col:6 used b ‚Äòint‚Äô cinit | `-IntegerLiteral 0xc75b8c0 col:10 ‚Äòint‚Äô 10 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; a = b &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; |-BinaryOperator 0xc75b928 &lt;line:5:2, col:6&gt; ‚Äòint‚Äô lvalue ‚Äò=‚Äò | |-DeclRefExpr 0xc75b8e8 col:2 ‚Äòint‚Äô lvalue Var 0xc75b840 ‚Äòa‚Äô ‚Äòint‚Äô | -ImplicitCastExpr 0xc75b918 &lt;col:6&gt; ‚Äòint‚Äô &lt;LValueToRValue&gt; |-DeclRefExpr 0xc75b900 col:6 ‚Äòint‚Äô lvalue Var 0xc75b890 ‚Äòb‚Äô ‚Äòint‚Äô&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; `-ReturnStmt 0xc75b968 &lt;line:6:2, col:9&gt; `-ImplicitCastExpr 0xc75b958 &lt;col:9&gt; ‚Äòint‚Äô &lt;LValueToRValue&gt; `-DeclRefExpr 0xc75b940 &lt;col:9&gt; ‚Äòint‚Äô lvalue Var 0xc75b840 ‚Äòa‚Äô ‚Äòint‚Äô#‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîCFG‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî clang -cc1 -analyze -analyzer-checker=debug.DumpCFGint main() [B2 (ENTRY)] Succs (1): B1 [B1] 1: int a; 2: 10 3: int b = 10; 4: b 5: [B1.4] (ImplicitCastExpr, LValueToRValue, int) 6: a 7: [B1.6] = [B1.5] 8: a 9: [B1.8] (ImplicitCastExpr, LValueToRValue, int) 10: return [B1.9]; Preds (1): B2 Succs (1): B0 [B0 (EXIT)] Preds (1): B1 1234567891011121314151617181920212223242526272829303132CFG Â∞ÜÁ®ãÂ∫èÊãÜÂæóÊõ¥ÁªÜÔºåËÉΩÂ§üÂ∞ÜÊâßË°åÁöÑËøáÁ®ãË°®Áé∞ÁöÑÊõ¥Áõ¥ËßÇ‰∫õÔºå‰∏∫‰∫ÜÈÅøÂÖçË∑ØÂæÑÁàÜÁÇ∏ÔºåÂáΩÊï∞ inline ÁöÑÊù°‰ª∂‰ºöËÆæÁΩÆÁöÑÊØîËæÉ‰∏•Ê†ºÔºåÂáΩÊï∞ CFG ÂùóÂ§öÊó∂‰∏ç‰ºöËøõË°å inline ÂàÜÊûêÔºåÊ®°ÊãüÊ†àÊ∑±Â∫¶Ë∂ÖËøá‰∏ÄÂÆöÂÄº‰∏ç‰ºöËøõË°å inline ÂàÜÊûêÔºåËøô‰∏™ÈªòËÆ§ÊòØ5„ÄÇÂú®MRC‰ΩøÁî®ÁöÑÊòØCFGËøôÊ†∑ÁöÑÊâßË°åË∑ØÂæÑÊ®°ÊãüÔºåARCÂ∞±Ê≤°Êúâ‰∫ÜÔºå‰∏æ‰∏™‰æãÂ≠êÔºåÊ≤°ÊúâÂÖ®ÈÉ®Êù°‰ª∂ÈÉΩËøîÂõûÔºåCFGÂ∞±‰ºöÊä•ÈîôÔºåËÄåASTÂ∞±‰∏ç‰ºö„ÄÇÂÆòÊñπ AST Áõ∏ÂÖ≥ÊñáÊ°£* https://clang.llvm.org/docs/Tooling.html* https://clang.llvm.org/docs/IntroductionToTheClangAST.html* https://clang.llvm.org/docs/RAVFrontendAction.html* https://clang.llvm.org/docs/LibTooling.html* https://clang.llvm.org/docs/LibASTMatchers.htmlÈùôÊÄÅÊ£ÄÊü•ÁöÑ‰∏Ä‰∫õÂ∫ì‰ª•Âèä‰ΩøÁî®ÊñπÊ≥ï* [FauxPas_document_translation/README.md at master ¬∑ DeveloperLx/FauxPas_document_translation ¬∑ GitHub](https://github.com/DeveloperLx/FauxPas_document_translation/blob/master/README.md?from=timeline&amp;isappinstalled=0)# CodeGen ÁîüÊàê IR ‰ª£Á†ÅÂ∞ÜËØ≠Ê≥ïÊ†ëÁøªËØëÊàê LLVM IR ‰∏≠Èó¥‰ª£Á†ÅÔºåÂÅö‰∏∫ LLVM Backend ËæìÂÖ•ÁöÑÊ°•Êé•ËØ≠Ë®Ä„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂú®ÂâçË®ÄÈáå‰πüÊèêÂà∞‰∫ÜÔºåÊñπ‰æø LLVM Backend ÁªôÂ§öËØ≠Ë®ÄÂÅöÁõ∏ÂêåÁöÑ‰ºòÂåñÔºåÂÅöÂà∞ËØ≠Ë®ÄÊó†ÂÖ≥„ÄÇËøô‰∏™ËøáÁ®ã‰∏≠Ëøò‰ºöË∑ü runtime Ê°•Êé•„ÄÇ* ÂêÑÁßçÁ±ªÔºåÊñπÊ≥ïÔºåÊàêÂëòÂèòÈáèÁ≠âÁöÑÁªìÊûÑ‰ΩìÁöÑÁîüÊàêÔºåÂπ∂Â∞ÜÂÖ∂ÊîæÂà∞ÂØπÂ∫îÁöÑMach-OÁöÑsection‰∏≠„ÄÇ* Non-Fragile ABI ÂêàÊàê OBJC_IVAR_$_ ÂÅèÁßªÂÄºÂ∏∏Èáè„ÄÇ* ObjCMessageExpr ÁøªËØëÊàêÁõ∏Â∫îÁâàÊú¨ÁöÑ objc_msgSendÔºåsuper ÁøªËØëÊàê objc_msgSendSuper„ÄÇ* strongÔºåweakÔºåcopyÔºåatomic ÂêàÊàê @property Ëá™Âä®ÂÆûÁé∞ setter Âíå getter„ÄÇ* @synthesize ÁöÑÂ§ÑÁêÜ„ÄÇ* ÁîüÊàê block_layout Êï∞ÊçÆÁªìÊûÑ* __block Âíå __weak* _block_invoke* ARC Â§ÑÁêÜÔºåÊèíÂÖ• objc_storeStrong Âíå objc_storeWeak Á≠â ARC ‰ª£Á†Å„ÄÇObjCAutoreleasePoolStmt ËΩ¨ objc_autorealeasePoolPush / Pop„ÄÇËá™Âä®Ê∑ªÂä† [super dealloc]„ÄÇÁªôÊØè‰∏™ ivar ÁöÑÁ±ªÂêàÊàê .cxx_destructor ÊñπÊ≥ïËá™Âä®ÈáäÊîæÁ±ªÁöÑÊàêÂëòÂèòÈáè„ÄÇ‰∏çÁÆ°ÁºñËØëÁöÑËØ≠Ë®ÄÊó∂ Objective-C ËøòÊòØ Swift ‰πü‰∏çÁÆ°ÂØπÂ∫îÊú∫Âô®ÊòØ‰ªÄ‰πàÔºå‰∫¶ÊàñÊòØÂç≥Êó∂ÁºñËØëÔºåLLVM ÈáåÂîØ‰∏Ä‰∏çÂèòÁöÑÊòØ‰∏≠Èó¥ËØ≠Ë®Ä LLVM IR„ÄÇÈÇ£‰πàÊàë‰ª¨Â∞±Êù•ÁúãÁúãÂ¶Ç‰ΩïÁé© LLVM IR„ÄÇ## IR ÁªìÊûÑ‰∏ãÈù¢ÊòØÂàöÊâçÁîüÊàêÁöÑ main.ll ‰∏≠Èó¥‰ª£Á†ÅÊñá‰ª∂„ÄÇ ; ModuleID = ‚Äòmain.c‚Äôsource_filename = ‚Äúmain.c‚Äùtarget datalayout = ‚Äúe-m:o-i64:64-f80:128-n8:16:32:64-S128‚Äùtarget triple = ‚Äúx86_64-apple-macosx10.12.0‚Äù @.str = private unnamed_addr constant [16 x i8] c‚ÄùPlease input a:\\00‚Äù, align 1@.str.1 = private unnamed_addr constant [3 x i8] c‚Äù%d\\00‚Äù, align 1@.str.2 = private unnamed_addr constant [16 x i8] c‚ÄùPlease input b:\\00‚Äù, align 1@.str.3 = private unnamed_addr constant [32 x i8] c‚Äùa is:%d,b is :%d,count equal:%d\\00‚Äù, align 1 ; Function Attrs: nounwind ssp uwtabledefine i32 @main() #0 { %1 = alloca i32, align 4 %2 = alloca i32, align 4 %3 = bitcast i32* %1 to i8* call void @llvm.lifetime.start(i64 4, i8* %3) #3 %4 = bitcast i32* %2 to i8* call void @llvm.lifetime.start(i64 4, i8* %4) #3 %5 = tail call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([16 x i8], [16 x i8]* @.str, i64 0, i64 0)) %6 = call i32 (i8, ‚Ä¶) @scanf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32* nonnull %1) %7 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([16 x i8], [16 x i8]* @.str.2, i64 0, i64 0)) %8 = call i32 (i8, ‚Ä¶) @scanf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32* nonnull %2) %9 = load i32, i32* %1, align 4, !tbaa !2 %10 = load i32, i32* %2, align 4, !tbaa !2 %11 = add nsw i32 %10, %9 %12 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([32 x i8], [32 x i8]* @.str.3, i64 0, i64 0), i32 %9, i32 %10, i32 %11) call void @llvm.lifetime.end(i64 4, i8* %4) #3 call void @llvm.lifetime.end(i64 4, i8* %3) #3 ret i32 0} ; Function Attrs: argmemonly nounwinddeclare void @llvm.lifetime.start(i64, i8* nocapture) #1 ; Function Attrs: nounwinddeclare i32 @printf(i8* nocapture readonly, ‚Ä¶) #2 ; Function Attrs: nounwinddeclare i32 @scanf(i8* nocapture readonly, ‚Ä¶) #2 ; Function Attrs: argmemonly nounwinddeclare void @llvm.lifetime.end(i64, i8* nocapture) #1 attributes #0 = { nounwind ssp uwtable ‚Äúdisable-tail-calls‚Äù=‚Äúfalse‚Äù ‚Äúless-precise-fpmad‚Äù=‚Äúfalse‚Äù ‚Äúno-frame-pointer-elim‚Äù=‚Äútrue‚Äù ‚Äúno-frame-pointer-elim-non-leaf‚Äù ‚Äúno-infs-fp-math‚Äù=‚Äúfalse‚Äù ‚Äúno-nans-fp-math‚Äù=‚Äúfalse‚Äù ‚Äústack-protector-buffer-size‚Äù=‚Äú8‚Äù ‚Äútarget-cpu‚Äù=‚Äúpenryn‚Äù ‚Äútarget-features‚Äù=‚Äú+cx16,+fxsr,+mmx,+sse,+sse2,+sse3,+sse4.1,+ssse3‚Äù ‚Äúunsafe-fp-math‚Äù=‚Äúfalse‚Äù ‚Äúuse-soft-float‚Äù=‚Äúfalse‚Äù }attributes #1 = { argmemonly nounwind }attributes #2 = { nounwind ‚Äúdisable-tail-calls‚Äù=‚Äúfalse‚Äù ‚Äúless-precise-fpmad‚Äù=‚Äúfalse‚Äù ‚Äúno-frame-pointer-elim‚Äù=‚Äútrue‚Äù ‚Äúno-frame-pointer-elim-non-leaf‚Äù ‚Äúno-infs-fp-math‚Äù=‚Äúfalse‚Äù ‚Äúno-nans-fp-math‚Äù=‚Äúfalse‚Äù ‚Äústack-protector-buffer-size‚Äù=‚Äú8‚Äù ‚Äútarget-cpu‚Äù=‚Äúpenryn‚Äù ‚Äútarget-features‚Äù=‚Äú+cx16,+fxsr,+mmx,+sse,+sse2,+sse3,+sse4.1,+ssse3‚Äù ‚Äúunsafe-fp-math‚Äù=‚Äúfalse‚Äù ‚Äúuse-soft-float‚Äù=‚Äúfalse‚Äù }attributes #3 = { nounwind } !llvm.module.flags = !{!0}!llvm.ident = !{!1} !0 = !{i32 1, !‚ÄùPIC Level‚Äù, i32 2}!1 = !{!‚ÄùApple LLVM version 8.0.0 (clang-800.0.42.1)‚Äù}!2 = !{!3, !3, i64 0}!3 = !{!‚Äùint‚Äù, !4, i64 0}!4 = !{!‚Äùomnipotent char‚Äù, !5, i64 0}!5 = !{!‚ÄùSimple C/C++ TBAA‚Äù} 123456789101112131415161718LLVM IR Êúâ‰∏âÁßçË°®Á§∫Ê†ºÂºèÔºåÁ¨¨‰∏ÄÁßçÊòØ bitcode ËøôÊ†∑ÁöÑÂ≠òÂÇ®Ê†ºÂºèÔºå‰ª• .bc ÂÅöÂêéÁºÄÔºåÁ¨¨‰∫åÁßçÊòØÂèØËØªÁöÑ‰ª• .llÔºåÁ¨¨‰∏âÁßçÊòØÁî®‰∫éÂºÄÂèëÊó∂Êìç‰Ωú LLVM IR ÁöÑÂÜÖÂ≠òÊ†ºÂºè„ÄÇ‰∏Ä‰∏™ÁºñËØëÁöÑÂçïÂÖÉÂç≥‰∏Ä‰∏™Êñá‰ª∂Âú® IR ÈáåÂ∞±ÊòØ‰∏Ä‰∏™ ModuleÔºåModule ÈáåÊúâ Global Variable Âíå FunctionÔºåÂú® FunctionÈáåÊúâ Basic BlockÔºåBasic Block ÈáåÊúâ Êåá‰ª§ Instructions„ÄÇ‚ÄòÈÄöËøá‰∏ãÈù¢ÁöÑ IR ÁªìÊûÑÂõæËÉΩÂ§üÊõ¥Â•ΩÁöÑÁêÜËß£ IR ÁöÑÊï¥‰ΩìÁªìÊûÑ„ÄÇ![](https://github.com/ming1016/study/blob/master/pic/deeply-analyse-llvm08.png?raw=true)Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫ÊúÄÂ§ßÁöÑÊòØ ModuleÔºåÈáåÈù¢ÂåÖÂê´Â§ö‰∏™ FunctionÔºåÊØè‰∏™ Function ÂåÖÂê´Â§ö‰∏™ BasicBlockÔºåBasicBlock ÈáåÂê´Êúâ InstructionÔºå‰ª£Á†ÅÈùûÂ∏∏Ê∏ÖÊô∞ÔºåËøôÊ†∑Â¶ÇÊûúÊÉ≥ÂºÄÂèë‰∏Ä‰∏™Êñ∞ËØ≠Ë®ÄÂè™ÈúÄË¶ÅÂÆåÊàêËØ≠Ê≥ïËß£ÊûêÂêéÈÄöËøá LLVM Êèê‰æõÁöÑ‰∏∞ÂØåÊé•Âè£Âú®ÂÜÖÂ≠ò‰∏≠ÁîüÊàê IR Â∞±ÂèØ‰ª•Áõ¥Êé•ËøêË°åÂú®ÂêÑ‰∏™‰∏çÂêåÁöÑÂπ≥Âè∞„ÄÇIR ËØ≠Ë®ÄÊª°Ë∂≥ÈùôÊÄÅÂçïËµãÂÄºÔºåÂèØ‰ª•ÂæàÂ•ΩÁöÑÈôç‰ΩéÊï∞ÊçÆÊµÅÂàÜÊûêÂíåÊéßÂà∂ÊµÅÂàÜÊûêÁöÑÂ§çÊùÇÂ∫¶„ÄÇÂèäÂè™ËÉΩÂú®ÂÆö‰πâÊó∂ËµãÂÄºÔºåÂêéÈù¢‰∏çËÉΩÊõ¥Êîπ„ÄÇ‰ΩÜÊòØËøôÊ†∑Â∞±Ê≤°Ê≥ïÂÜôÁ®ãÂ∫è‰∫ÜÔºåËæìÂÖ•ËæìÂá∫ÈÉΩÊ≤°Ê≥ïÂºÑÔºåÊâÄ‰ª•ÂáΩÊï∞ÂºèÁºñÁ®ãÊâç‰ºöÊúâÁ±ª‰ºº Monad ËøôÊ†∑Êú∫Âà∂ÁöÑÂéüÂõ†„ÄÇ## LLVM IR ‰ºòÂåñ‰ΩøÁî® O2ÔºåO3 ËøôÊ†∑ÁöÑ‰ºòÂåñ‰ºöË∞ÉÁî®ÂØπÂ∫îÁöÑ Pass Êù•ËøõË°åÂ§ÑÁêÜÔºåÊúâÊØîÂ¶ÇÁ±ª‰ººÊ≠ª‰ª£Á†ÅÊ∏ÖÁêÜÔºåÂÜÖËÅîÂåñÔºåË°®ËææÂºèÈáçÁªÑÔºåÂæ™ÁéØÂèòÈáèÁßªÂä®ËøôÊ†∑ÁöÑ Pass„ÄÇÂèØ‰ª•ÈÄöËøá llvm-opt Ë∞ÉÁî® LLVM ‰ºòÂåñÁõ∏ÂÖ≥ÁöÑÂ∫ì„ÄÇÂèØËÉΩÁõ¥Êé•Ëøô‰πàËØ¥‰∏çÂ§™Áõ¥ËßÇÔºåÊàë‰ª¨ÂèØ‰ª•Êõ¥Êîπ‰∏ãÂéü c ‰ª£Á†Å‰∏æ‰∏™Â∞è‰æãÂ≠êÁúãÁúãËøô‰∫õ Pass ‰ºöÂÅöÂì™‰∫õ‰ºòÂåñ„ÄÇÂΩìÊàë‰ª¨Âä†‰∏ä int i = 0;while (i &lt; 10) { i++; printf(‚Äú%d‚Äù,i);} 1ÂØπÂ∫îÁöÑ IR ‰ª£Á†ÅÊòØ %call4 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 1) %call4.1 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 2) %call4.2 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 3) %call4.3 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 4) %call4.4 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 5) %call4.5 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 6) %call4.6 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 7) %call4.7 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 8) %call4.8 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 9) %call4.9 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 10) 123ÂèØ‰ª•ÁúãÂá∫Êù•Ëøô‰∏™ while Âú® IR ‰∏≠Â∞±ÊòØÈáçÂ§çÁöÑÊâìÂç∞‰∫Ü10Ê¨°ÔºåÈÇ£Ë¶ÅÊòØÊàëÊää10ÊîπÊàê100ÊòØ‰∏çÊòØ‰ºöÂèòÊàêÊâìÂç∞100Ê¨°Âë¢ÔºüÊàë‰ª¨ÊîπÊàê100ÂêéÔºåÂÜçÊ¨°ÁîüÊàê IR ÂèØ‰ª•ÁúãÂà∞ IR ÂèòÊàê‰∫ÜËøôÊ†∑Ôºö br label %while.body while.body: ; preds = %while.body, %entry %i.010 = phi i32 [ 0, %entry ], [ %inc, %while.body ] %inc = add nuw nsw i32 %i.010, 1 %call4 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([3 x i8], [3 x i8]* @.str.1, i64 0, i64 0), i32 %inc) %exitcond = icmp eq i32 %inc, 100 br i1 %exitcond, label %while.end, label %while.body while.end: ; preds = %while.body %2 = load i32, i32* %a, align 4, !tbaa !2 %3 = load i32, i32* %b, align 4, !tbaa !2 %add = add nsw i32 %3, %2 %call5 = call i32 (i8, ‚Ä¶) @printf(i8 getelementptr inbounds ([11 x i8], [11 x i8]* @.str.3, i64 0, i64 0), i32 %add) call void @llvm.lifetime.end(i64 4, i8* nonnull %1) #3 call void @llvm.lifetime.end(i64 4, i8* nonnull %0) #3 ret i32 0} 123456789101112ËøôÈáåÂØπ‰∏çÂêåÊù°‰ª∂ÁîüÊàêÁöÑ‰∏çÂêåÈÉΩÊòØ Pass ‰ºòÂåñÂô®ÂÅöÁöÑ‰∫ãÊÉÖ„ÄÇËß£ËØª‰∏äÈù¢ËøôÊÆµ IR ÈúÄË¶ÅÂÖà‰∫ÜËß£‰∏ã IR ËØ≠Ê≥ïÂÖ≥ÈîÆÂ≠óÔºåÂ¶Ç‰∏ãÔºö* @ - ‰ª£Ë°®ÂÖ®Â±ÄÂèòÈáè* % - ‰ª£Ë°®Â±ÄÈÉ®ÂèòÈáè* alloca - Êåá‰ª§Âú®ÂΩìÂâçÊâßË°åÁöÑÂáΩÊï∞ÁöÑÂ†ÜÊ†àÂ∏ß‰∏≠ÂàÜÈÖçÂÜÖÂ≠òÔºåÂΩìËØ•ÂáΩÊï∞ËøîÂõûÂà∞ÂÖ∂Ë∞ÉÁî®ËÄÖÊó∂ÔºåÂ∞ÜËá™Âä®ÈáäÊîæÂÜÖÂ≠ò„ÄÇ* i32Ôºö- i ÊòØÂá†Ëøô‰∏™Êï¥Êï∞Â∞±‰ºöÂç†Âá†‰ΩçÔºåi32Â∞±ÊòØ32‰Ωç4Â≠óËäÇ* align - ÂØπÈΩêÔºåÊØîÂ¶Ç‰∏Ä‰∏™ int,‰∏Ä‰∏™ char Âíå‰∏Ä‰∏™ int„ÄÇÂçï‰∏™ int Âç†4‰∏™Â≠óËäÇÔºå‰∏∫‰∫ÜÂØπÈΩêÂè™Âç†‰∏Ä‰∏™Â≠óËäÇÁöÑ charÈúÄË¶ÅÂêë4ÂØπÈΩêÂç†Áî®4Â≠óËäÇÁ©∫Èó¥„ÄÇ* Load - ËØªÂá∫Ôºåstore ÂÜôÂÖ•* icmp - ‰∏§‰∏™Êï¥Êï∞ÂÄºÊØîËæÉÔºåËøîÂõûÂ∏ÉÂ∞îÂÄº* br - ÈÄâÊã©ÂàÜÊîØÔºåÊ†πÊçÆ cond Êù•ËΩ¨Âêë labelÔºå‰∏çÊ†πÊçÆÊù°‰ª∂Ë∑≥ËΩ¨ÁöÑËØùÁ±ª‰ºº goto* indirectbr - Ê†πÊçÆÊù°‰ª∂Èó¥Êé•Ë∑≥ËΩ¨Âà∞‰∏Ä‰∏™ labelÔºåËÄåËøô‰∏™ label ‰∏ÄËà¨ÊòØÂú®‰∏Ä‰∏™Êï∞ÁªÑÈáåÔºåÊâÄ‰ª•Ë∑≥ËΩ¨ÁõÆÊ†áÊòØÂèØÂèòÁöÑÔºåÁî±ËøêË°åÊó∂ÂÜ≥ÂÆöÁöÑ* label - ‰ª£Á†ÅÊ†áÁ≠æ br label %while.body 1Â¶Ç‰∏äÈù¢Ë°®Ëø∞Ôºåbr ‰ºöÈÄâÊã©Ë∑≥Âêë while.body ÂÆö‰πâÁöÑËøô‰∏™Ê†áÁ≠æ„ÄÇËøô‰∏™Ê†áÁ≠æÈáåÂèØ‰ª•ÁúãÂà∞ %exitcond = icmp eq i32 %inc, 100 br i1 %exitcond, label %while.end, label %while.body 1234567ËøôÊÆµÔºåicmp ‰ºöÊØîËæÉÂΩìÂâçÁöÑ %inc ÂíåÂÆö‰πâÁöÑ‰∏¥ÁïåÂÄº 100ÔºåÊ†πÊçÆËøîÂõûÁöÑÂ∏ÉÂ∞îÂÄºÊù•ÂÜ≥ÂÆö br Ë∑≥ËΩ¨Âà∞ÈÇ£‰∏™‰ª£Á†ÅÊ†áÁ≠æÔºåÁúüÂ∞±Ë∑≥ËΩ¨Âà∞ while.end Ê†áÁ≠æÔºåÂê¶Â∞±Âú®ËøõÂÖ• while.body Ê†áÁ≠æ„ÄÇËøôÂ∞±ÊòØ while ÁöÑÈÄªËæë„ÄÇÈÄöËøábr Ë∑≥ËΩ¨Âíå label ËøôÁßçÊ†áÁ≠æÁöÑÊ¶ÇÂøµ‰ΩøÂæó IR ËØ≠Ë®ÄËÉΩÂ§üÊàê‰∏∫Êõ¥‰ΩéÁ∫ßÂÖºÂÆπÊÄßÊõ¥È´òÊõ¥Êñπ‰æøËΩ¨ÂêëÊõ¥‰ΩéÁ∫ßËØ≠Ë®ÄÁöÑËØ≠Ë®Ä„ÄÇ## SSALLVM IR ÊòØ SSA ÂΩ¢ÂºèÁöÑÔºåÁª¥Êä§ÂèåÂêë def-use ‰ø°ÊÅØÔºåuse-def ÊòØÈÄöËøáÊôÆÈÄöÊåáÈíàÂÆûÁé∞‰ø°ÊÅØÁª¥Êä§Ôºådef-use ÊòØÈÄöËøáÂÜÖÂ≠òË∑≥Ë°®ÂíåÈìæË°®Êù•ÂÆûÁé∞ÁöÑÔºå‰æø‰∫é forward dataflow analysis Âíå backward dataflow analysis„ÄÇÂèØ‰ª•ÈÄöËøá ADCE Ëøô‰∏™ Pass Êù•‰∫ÜËß£‰∏ã backward dataflowÔºåËøô‰∏™pass ÁöÑÊ∫êÊñá‰ª∂Âú® lib/Transforms/Scalar/ADCE.cpp ‰∏≠ÔºåADCE ÂÆûÁé∞‰∫Ü Aggressive Dead Code Elimination Pass„ÄÇËøô‰∏™ Pass ‰πêËßÇÂú∞ÂÅáËÆæÊâÄÊúâ instructions ÈÉΩÊòØ Dead Áõ¥Âà∞ËØÅÊòéÊòØÂê¶ÂÆöÁöÑÔºåÂÖÅËÆ∏ÂÆÉÊ∂àÈô§ÂÖ∂‰ªñ DCE Pass ÁöÑ Dead ËÆ°ÁÆó catchÔºåÁâπÂà´ÊòØÊ∂âÂèäÂæ™ÁéØËÆ°ÁÆó„ÄÇÂÖ∂ÂÆÉ DCE Áõ∏ÂÖ≥ÁöÑ Pass ÂèØ‰ª•Êü•ÁúãÂêåÁ∫ßÁõÆÂΩï‰∏ãÁöÑ BDCE.cpp Âíå DCE.cppÔºåÁõÆÂΩï‰∏ãÂÖ∂ÂÆÉÁöÑ Pass ÈÉΩÊòØÂíåÊï∞ÊçÆÊµÅÁõ∏ÂÖ≥ÁöÑÂàÜÊûêÂåÖÂê´‰∫ÜÂêÑÁßçÂàÜÊûêÁÆóÊ≥ïÂíåÊÄùË∑Ø„ÄÇÈÇ£‰πàÁúãÁúãÂä†Ê≥ïËøô‰∏™Êìç‰ΩúÁöÑÁõ∏ÂÖ≥ÁöÑ IR ‰ª£Á†Å %2 = load i32, i32* %a, align 4, !tbaa !2%3 = load i32, i32* %b, align 4, !tbaa !2%add = add nsw i32 %3, %2 12Âä†Ê≥ïÂØπÂ∫îÁöÑÊåá‰ª§ÊòØ BinaryOperator::CreateAdd(Value *V1, Value *V2, const Twine &amp;Name) 12‰∏§‰∏™ËæìÂÖ• V1 Âíå V2 ÁöÑ def-use ÊòØÂ¶Ç‰ΩïÁöÑÂë¢ÔºåÁúãÁúãÂ¶Ç‰∏ã‰ª£Á†Å class Value { void addUse(Use &amp;U) { U.addToList(&amp;UseList); } // ‚Ä¶}; class Use { Value Val; Use *Next; PointerIntPair&lt;Use *, 2, PrevPtrTag&gt; Prev; // ‚Ä¶}; void Use::set(Value V) { if (Val) removeFromList(); Val = V; if (V) V-&gt;addUse(this);} Value *Use::operator=(Value *RHS) { set(RHS); return RHS;} class User : public Value { template &lt;int Idx, typename U&gt; static Use &amp;OpFrom(const U that) { return Idx &lt; 0 ? OperandTraits::op_end(const_cast&lt;U&gt;(that))[Idx] : OperandTraits::op_begin(const_cast&lt;U*&gt;(that))[Idx]; } template Use &amp;Op() { return OpFrom(this); } template const Use &amp;Op() const { return OpFrom(this); } // ‚Ä¶}; class Instruction : public User, public ilist_node_with_parent&lt;Instruction, BasicBlock&gt; { // ‚Ä¶}; class BinaryOperator : public Instruction { /// Construct a binary instruction, given the opcode and the two /// operands. Optionally (if InstBefore is specified) insert the instruction /// into a BasicBlock right before the specified instruction. The specified /// Instruction is allowed to be a dereferenced end iterator. /// static BinaryOperator *Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name = Twine(), Instruction *InsertBefore = nullptr); // ‚Ä¶}; BinaryOperator::BinaryOperator(BinaryOps iType, Value *S1, Value *S2, Type *Ty, const Twine &amp;Name, Instruction *InsertBefore) : Instruction(Ty, iType, OperandTraits::op_begin(this), OperandTraits::operands(this), InsertBefore) { Op&lt;0&gt;() = S1; Op&lt;1&gt;() = S2; init(iType); setName(Name);} BinaryOperator *BinaryOperator::Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore) { assert(S1-&gt;getType() == S2-&gt;getType() &amp;&amp; ‚ÄúCannot create binary operator with two operands of differing type!‚Äù); return new BinaryOperator(Op, S1, S2, S1-&gt;getType(), Name, InsertBefore);} 1234567891011121314151617181920212223242526272829303132‰ªé‰ª£Á†ÅÈáåÂèØ‰ª•ÁúãÂá∫ÊòØ‰ΩøÁî®‰∫Ü Use ÂØπË±°Êù•Êää use Âíå def ËÅîÁ≥ªËµ∑Êù•ÁöÑ„ÄÇLLVM IR ÈÄöËøá mem2reg Ëøô‰∏™ Pass Êù•ÊääÂ±ÄÈÉ®ÂèòÈáèÊàê SSA ÂΩ¢Âºè„ÄÇËøô‰∏™ Pass ÁöÑ‰ª£Á†ÅÂú® lib/Transforms/Utils/Mem2Reg.cpp Èáå„ÄÇLLVMÈÄöËøá mem2reg Pass ËÉΩÂ§üËØÜÂà´ alloca Ê®°ÂºèÔºåÂ∞ÜÂÖ∂ËÆæÁΩÆ SSA value„ÄÇËøôÊó∂Â∞±‰∏çÂú®ÈúÄË¶Å allocaÔºåloadÂíåstore‰∫Ü„ÄÇmem2reg ÊòØÂØπ PromoteMemToReg ÂáΩÊï∞Ë∞ÉÁî®ÁöÑ‰∏Ä‰∏™ÁÆÄÂçïÂåÖË£ÖÔºåÁúüÊ≠£ÁöÑÁÆóÊ≥ïÂÆûÁé∞ÊòØÂú® PromoteMemToReg ÂáΩÊï∞ÈáåÔºåËøô‰∏™ÂáΩÊï∞Âú® lib/Transforms/Utils/PromoteMemoryToRegister.cpp Ëøô‰∏™Êñá‰ª∂Èáå„ÄÇËøô‰∏™ÁÆóÊ≥ï‰ºö‰Ωø alloca Ëøô‰∏™‰ªÖ‰ªÖ‰Ωú‰∏∫ load Âíå stores ÁöÑÁî®ÈÄîÁöÑÊåá‰ª§‰ΩøÁî®Ëø≠‰ª£ dominator ËæπÁïåËΩ¨Êç¢Êàê PHI ËäÇÁÇπÔºåÁÑ∂ÂêéÈÄöËøá‰ΩøÁî®Ê∑±Â∫¶‰ºòÂÖàÂáΩÊï∞ÊéíÂ∫èÈáçÂÜô loads Âíå stores„ÄÇËøôÁßçÁÆóÊ≥ïÂè´ÂÅö iterated dominance frontierÁÆóÊ≥ïÔºåÂÖ∑‰ΩìÂÆûÁé∞ÊñπÊ≥ïÂèØ‰ª•ÂèÇÁúã PromoteMemToReg ÂáΩÊï∞ÁöÑÂÆûÁé∞„ÄÇÂΩìÁÑ∂ÊääÂ§ö‰∏™Â≠óËäÇÁ†Å .bc ÂêàÊàê‰∏Ä‰∏™Êñá‰ª∂ÔºåÈìæÊé•Êó∂Ëøò‰ºö‰ºòÂåñÔºåIR ÁªìÊûÑÂú®‰ºòÂåñÂêé‰ºöÊúâÂèòÂåñÔºåËøôÊ†∑ËøòËÉΩÂ§üÂú®ÂèòÂåñÂêéÁöÑ IR ÁöÑÁªìÊûÑ‰∏äÂÜçËøõË°åÊõ¥Â§öÁöÑ‰ºòÂåñ„ÄÇËøôÈáåÂèØ‰ª•ËøõË°å lli Ëß£ÈáäÊâßË°å LLVM IR„ÄÇllc ÁºñËØëÂô®ÊòØ‰∏ìÈó®ÁºñËØë LLVM IR ÁöÑÁºñËØëÂô®Áî®Êù•ÁîüÊàêÊ±áÁºñÊñá‰ª∂„ÄÇË∞ÉÁî®Á≥ªÁªüÊ±áÁºñÂô®ÊØîÂ¶Ç GNU ÁöÑ as Êù•ÁºñËØëÁîüÊàê .o Object Êñá‰ª∂ÔºåÊé•‰∏ãÊù•Â∞±ÊòØÁî®ÈìæÊé•Âô®ÈìæÊé•Áõ∏ÂÖ≥Â∫ìÂíå .o Êñá‰ª∂‰∏ÄËµ∑ÁîüÊàêÂèØÊâßË°åÁöÑ .out ÊàñËÄÖ exe Êñá‰ª∂‰∫Ü„ÄÇllvm-mc ËøòÂèØ‰ª•Áõ¥Êé•ÁîüÊàê object Êñá‰ª∂„ÄÇ# Clang CFEÂä®ÊâãÁé©ËÇØÂÆö‰∏çËÉΩÂ∞ë‰∫Ü Clang ÁöÑÂâçÁ´ØÁªÑ‰ª∂ÂèäÂ∫ìÔºåÁÜüÊÇâËøô‰∫õÂ∫ì‰ª•ÂêéÂ∞±ËÉΩÂ§üËá™Â∑±Âä®ÊâãÁî®Ëøô‰∫õÂ∫ìÁºñÂÜôËá™Â∑±ÁöÑÁ®ãÂ∫è‰∫Ü„ÄÇ‰∏ãÈù¢ÊàëÂ∞±ÂØπËøô‰∫õÂ∫ìÂÅö‰∫õ‰ªãÁªçÔºåÁÑ∂ÂêéÂÜçÁùÄÈáçËØ¥ËØ¥ libclang Â∫ìÔºå‰ª•ÂèäÂ¶Ç‰ΩïÁî®ÂÆÉÊù•ÂÜôÂ∑•ÂÖ∑„ÄÇ* LLVM Support Library - LLVM libSupport Â∫ìÊèê‰æõ‰∫ÜËÆ∏Â§öÂ∫ïÂ±ÇÂ∫ìÂíåÊï∞ÊçÆÁªìÊûÑÔºåÂåÖÊã¨ÂëΩ‰ª§Ë°å option Â§ÑÁêÜÔºåÂêÑÁßçÂÆπÂô®ÂíåÁ≥ªÁªüÊäΩË±°Â±ÇÔºåÁî®‰∫éÊñá‰ª∂Á≥ªÁªüËÆøÈóÆ„ÄÇ* The Clang ‚ÄúBasic‚Äù Library - Êèê‰æõ‰∫ÜË∑üË∏™ÂíåÊìçÁ∫µ source buffersÔºåsource buffers ÁöÑ‰ΩçÁΩÆÔºådiagnosticsÔºåtokens,ÊäΩË±°ÁõÆÊ†á‰ª•ÂèäÁºñËØëËØ≠Ë®ÄÂ≠êÈõÜ‰ø°ÊÅØÁöÑ low-level ÂÆûÁî®Á®ãÂ∫è„ÄÇËøòÊúâÈÉ®ÂàÜÂèØ‰ª•Áî®Âú®ÂÖ∂‰ªñÁöÑÈùû c ËØ≠Ë®ÄÊØîÂ¶Ç SourceLocationÔºåSourceManagerÔºåDiagnositicsÔºåFileManager Á≠â„ÄÇÂÖ∂‰∏≠ Diagnositics Ëøô‰∏™Â≠êÁ≥ªÁªüÊòØÁºñËØëÂô®ÂíåÊôÆÈÄöÂÜô‰ª£Á†Å‰∫∫‰∫§ÊµÅÁöÑ‰∏ªË¶ÅÁªÑÊàêÈÉ®ÂàÜÔºåÂÆÉ‰ºöËØäÊñ≠ÂΩìÂâç‰ª£Á†ÅÂì™‰∫õ‰∏çÊ≠£Á°ÆÔºåÊåâÁÖß‰∏•ÈáçÁ®ãÂ∫¶ËÄå‰∫ßÁîü WARNING Êàñ ERRORÔºåÊØè‰∏™ËØäÊñ≠‰ºöÊúâÂîØ‰∏Ä ID Ôºå SourceLocation ‰ºöË¥üË¥£ÁÆ°ÁêÜ„ÄÇ* The Driver Library - Âíå Driver Áõ∏ÂÖ≥ÁöÑÂ∫ìÔºå‰∏äÈù¢Â∑≤ÁªèÂØπÂÖ∂ÂÅö‰∫ÜËØ¶ÁªÜÁöÑ‰ªãÁªç„ÄÇ* Precompiled Headers - Clang ÊîØÊåÅÈ¢ÑÁºñËØë headers ÁöÑ‰∏§‰∏™ÂÆûÁé∞„ÄÇ* The Frontend Library - Ëøô‰∏™Â∫ìÈáåÂåÖÂê´‰∫ÜÂú® Clang Â∫ì‰πã‰∏äÊûÑÂª∫ÁöÑÂäüËÉΩÔºåÊØîÂ¶ÇËæìÂá∫ diagnositics ÁöÑÂá†ÁßçÊñπÊ≥ï„ÄÇ* The Lexer and Preprocessor Library - ËØçÊ≥ïÂàÜÊûêÂíåÈ¢ÑÂ§ÑÁêÜÁöÑÂ∫ìÔºåÂåÖÂê´‰∫Ü TokenÔºåAnnotation TokensÔºåTokenLexerÔºåLexer Á≠âËØçÊ≥ïÁ±ªÔºåËøòÊúâ Parser Library Âíå AST ËØ≠Ê≥ïÊ†ëÁõ∏ÂÖ≥ÁöÑÊØîÂ¶Ç TypeÔºåASTContextÔºåQualTypeÔºåDeclarationNameÔºåDeclContext ‰ª•Âèä CFG Á±ª„ÄÇ* The Sema Library - Ëß£ÊûêÂô®Ë∞ÉÁî®Ê≠§Â∫ìÊó∂Ôºå‰ºöÂØπËæìÂÖ•ËøõË°åËØ≠‰πâÂàÜÊûê„ÄÇ ÂØπ‰∫éÊúâÊïàÁöÑÁ®ãÂ∫èÔºåSema ‰∏∫Ëß£ÊûêÊûÑÈÄ†‰∏Ä‰∏™ AST„ÄÇ* The CodeGen Library - CodeGen Áî® AST ‰Ωú‰∏∫ËæìÂÖ•ÔºåÂπ∂‰ªé‰∏≠ÁîüÊàê LLVM IR ‰ª£Á†Å„ÄÇ## libclanglibclang ‰ºöËÆ©‰Ω†ËßâÂæó clang ‰∏ç‰ªÖ‰ªÖÂè™ÊòØ‰∏Ä‰∏™‰ºüÂ§ßÁöÑÁºñËØëÂô®„ÄÇ‰∏ãÈù¢‰ªéËß£ÊûêÊ∫êÁ†ÅÊù•ËØ¥‰∏ãÂÖàÂÜô‰∏™ libclang ÁöÑÁ®ãÂ∫èÊù•Ëß£ÊûêÊ∫êÁ†Å int main(int argc, char *argv[]) { CXIndex Index = clang_createIndex(0, 0); CXTranslationUnit TU = clang_parseTranslationUnit(Index, 0, argv, argc, 0, 0, CXTranslationUnit_None); for (unsigned I = 0, N = clang_getNumDiagnostics(TU); I != N; ++I) { CXDiagnostic Diag = clang_getDiagnostic(TU, I); CXString String = clang_formatDiagnostic(Diag,clang_defaultDiagnosticDisplayOptions()); fprintf(stderr, ‚Äú%s\\n‚Äù, clang_getCString(String)); clang_disposeString(String); } clang_disposeTranslationUnit(TU); clang_disposeIndex(Index); return 0;} 12ÂÜçÂÜô‰∏™ÊúâÈóÆÈ¢òÁöÑ c Á®ãÂ∫è struct List { /*/ };int sum(union List *L) { / ‚Ä¶ */ } 1234567891011ËøêË°å‰∫ÜËØ≠Ê≥ïÊ£ÄÊü•Âêé‰ºöÂá∫Áé∞ÊèêÁ§∫‰ø°ÊÅØ```bashlist.c:2:9: error: use of &apos;List&apos; with tag type that does not match previous declarationint sum(union List *Node) {^~~~~structlist.c:1:8: note: previous use is herestruct List {^ ‰∏ãÈù¢Êàë‰ª¨ÁúãÁúãËØäÊñ≠ËøáÁ®ãÔºåÊòæÁ§∫Âá†‰∏™Ê†∏ÂøÉËØäÊñ≠ÊñπÊ≥ïËØäÊñ≠Âá∫ÈóÆÈ¢ò enum CXDiagnosticSeverity clang_getDiagnosticSeverity(CXDiagnostic Diag); CXSourceLocation clang_getDiagnosticLocation(CXDiagnostic Diag); CXString clang_getDiagnosticSpelling(CXDiagnostic Diag); Êé•ÁùÄËøõË°åÈ´ò‰∫ÆÊòæÁ§∫ÔºåÊúÄÂêéÊèê‰æõ‰∏§‰∏™ÊèêÁ§∫‰øÆÂ§çÁöÑÊñπÊ≥ï unsigned clang_getDiagnosticNumFixIts(CXDiagnostic Diag);* CXString clang_getDiagnosticFixIt(CXDiagnostic Diag, unsigned FixIt,CXSourceRange *ReplacementRange); Êàë‰ª¨ÂÖàÈÅçÂéÜËØ≠Ê≥ïÊ†ëÁöÑËäÇÁÇπ„ÄÇÊ∫ê c Á®ãÂ∫èÂ¶Ç‰∏ã 12345678910struct List { int Data; struct List *Next;};int sum(struct List *Node) { int result = 0; for (; Node; Node = Node-&gt;Next) result = result + Node-&gt;Data; return result;} ÂÖàÊâæÂá∫ÊâÄÊúâÁöÑÂ£∞ÊòéÔºåÊØîÂ¶Ç ListÔºåDataÔºåNextÔºåsumÔºåNode ‰ª•Âèä result Á≠â„ÄÇÂÜçÊâæÂá∫ÂºïÁî®ÔºåÊØîÂ¶Ç struct List *Next ÈáåÁöÑ List„ÄÇËøòÊúâÂ£∞ÊòéÂíåË°®ËææÂºèÔºåÊØîÂ¶Ç int result = 0; ËøòÊúâ for ËØ≠Âè•Á≠â„ÄÇËøòÊúâÂÆèÂÆö‰πâÂíåÂÆû‰æãÂåñÁ≠â„ÄÇ CXCursor ‰ºöÁªü‰∏Ä AST ÁöÑËäÇÁÇπÔºåËßÑËåÉÂåÖÂê´ÁöÑ‰ø°ÊÅØ ‰ª£Á†ÅÊâÄÂú®‰ΩçÁΩÆÂíåÈïøÂ∫¶ ÂêçÂ≠óÂíåÁ¨¶Âè∑Ëß£Êûê Á±ªÂûã Â≠êËäÇÁÇπ ‰∏æ‰∏™ CXCursor ÂàÜÊûê‰æãÂ≠ê 1234struct List { int Data; struct List *Next;}; CXCursor ÁöÑÂ§ÑÁêÜËøáÁ®ãÂ¶Ç‰∏ã 12345678910111213//Top-level cursor Cclang_getCursorKind(C) == CXCursor_StructDeclclang_getCursorSpelling(C) == &quot;List&quot; //Ëé∑ÂèñÂêçÂ≠óÂ≠óÁ¨¶‰∏≤clang_getCursorLocation(C) //‰ΩçÁΩÆclang_getCursorExtent(C) //ÈïøÂ∫¶clang_visitChildren(C, ...); //ËÆøÈóÆÂ≠êËäÇÁÇπ//Reference cursor Rclang_getCursorKind(R) == CXCursor_TypeRef clang_getCursorSpelling(R) == &quot;List&quot;clang_getCursorLocation(R)clang_getCursorExtent(R)clang_getCursorReferenced(R) == C //ÊåáÂêëC DriverÂä®ÊâãÁé©ÁöÑËØùÔºåÁâπÂà´ÊòØÊÉ≥Ë¶Å‰ΩøÁî®Ëøô‰∫õÂ∑•ÂÖ∑Èìæ‰πãÂâçÊúÄÂ•ΩÂÖà‰∫ÜËß£Êàë‰ª¨Âíå LLVM ‰∫§‰∫íÁöÑÂÆûÁé∞„ÄÇÈÇ£‰πàËøôÈÉ®ÂàÜÂ∞±‰ªãÁªç‰∏ã LLVM ÈáåÁöÑ Driver„ÄÇ Driver ÊòØ Clang Èù¢ÂØπÁî®Êà∑ÁöÑÊé•Âè£ÔºåÁî®Êù•Ëß£Êûê Option ËÆæÁΩÆÔºåÂà§Êñ≠ÂÜ≥ÂÆöË∞ÉÁî®ÁöÑÂ∑•ÂÖ∑ÈìæÔºåÊúÄÁªàÂÆåÊàêÊï¥‰∏™ÁºñËØëËøáÁ®ã„ÄÇ Áõ∏ÂÖ≥Ê∫ê‰ª£Á†ÅÂú®ËøôÈáåÔºöclang/tools/driver/driver.cpp Êï¥‰∏™ Driver Ê∫êÁ†ÅÁöÑÂÖ•Âè£ÂáΩÊï∞Â∞±ÊòØ driver.cpp ÈáåÁöÑ main() ÂáΩÊï∞„ÄÇ‰ªéËøôÈáåÂèØ‰ª•‰Ωú‰∏∫ÂÖ•Âè£ÁúãÁúãÊï¥‰∏™ driver ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºåËøôÊ†∑Êõ¥Âà©‰∫éÊàë‰ª¨‰ª•ÂêéËΩªÊùæÂä®ÊâãÈ©æÈ©≠ LLVM„ÄÇ 1234567891011121314151617181920212223242526272829303132int main(int argc_, const char **argv_) { llvm::sys::PrintStackTraceOnErrorSignal(argv_[0]); llvm::PrettyStackTraceProgram X(argc_, argv_); llvm::llvm_shutdown_obj Y; // Call llvm_shutdown() on exit. if (llvm::sys::Process::FixupStandardFileDescriptors()) return 1; SmallVector&lt;const char *, 256&gt; argv; llvm::SpecificBumpPtrAllocator&lt;char&gt; ArgAllocator; std::error_code EC = llvm::sys::Process::GetArgumentVector( argv, llvm::makeArrayRef(argv_, argc_), ArgAllocator); if (EC) { llvm::errs() &lt;&lt; &quot;error: couldn&apos;t get arguments: &quot; &lt;&lt; EC.message() &lt;&lt; &apos;\\n&apos;; return 1; } llvm::InitializeAllTargets(); std::string ProgName = argv[0]; std::pair&lt;std::string, std::string&gt; TargetAndMode = ToolChain::getTargetAndModeFromProgramName(ProgName); llvm::BumpPtrAllocator A; llvm::StringSaver Saver(A); //ÁúÅÁï• ... // If we have multiple failing commands, we return the result of the first // failing command. return Res;} Driver ÁöÑÂ∑•‰ΩúÊµÅÁ®ãÂõæÂú® driver.cpp ÁöÑ main ÂáΩÊï∞ÈáåÊúâ Driver ÁöÑÂàùÂßãÂåñ„ÄÇÊàë‰ª¨Êù•ÁúãÁúãÂíå driver Áõ∏ÂÖ≥ÁöÑ‰ª£Á†Å 1234567891011121314151617181920212223242526272829303132333435363738394041424344 Driver TheDriver(Path, llvm::sys::getDefaultTargetTriple(), Diags); SetInstallDir(argv, TheDriver, CanonicalPrefixes); insertTargetAndModeArgs(TargetAndMode.first, TargetAndMode.second, argv, SavedStrings); SetBackdoorDriverOutputsFromEnvVars(TheDriver); std::unique_ptr&lt;Compilation&gt; C(TheDriver.BuildCompilation(argv)); int Res = 0; SmallVector&lt;std::pair&lt;int, const Command *&gt;, 4&gt; FailingCommands; if (C.get()) Res = TheDriver.ExecuteCompilation(*C, FailingCommands); // Force a crash to test the diagnostics. if (::getenv(&quot;FORCE_CLANG_DIAGNOSTICS_CRASH&quot;)) { Diags.Report(diag::err_drv_force_crash) &lt;&lt; &quot;FORCE_CLANG_DIAGNOSTICS_CRASH&quot;; // Pretend that every command failed. FailingCommands.clear(); for (const auto &amp;J : C-&gt;getJobs()) if (const Command *C = dyn_cast&lt;Command&gt;(&amp;J)) FailingCommands.push_back(std::make_pair(-1, C)); } for (const auto &amp;P : FailingCommands) { int CommandRes = P.first; const Command *FailingCommand = P.second; if (!Res) Res = CommandRes; // If result status is &lt; 0, then the driver command signalled an error. // If result status is 70, then the driver command reported a fatal error. // On Windows, abort will return an exit code of 3. In these cases, // generate additional diagnostic information if possible. bool DiagnoseCrash = CommandRes &lt; 0 || CommandRes == 70;#ifdef LLVM_ON_WIN32 DiagnoseCrash |= CommandRes == 3;#endif if (DiagnoseCrash) { TheDriver.generateCompilationDiagnostics(*C, *FailingCommand); break; } } ÂèØ‰ª•ÁúãÂà∞ÂàùÂßãÂåñ Driver Âêé driver ‰ºöË∞ÉÁî® BuildCompilation ÁîüÊàê Compilation„ÄÇCompilation Â≠óÈù¢ÊÑèÊÄùÊòØÂêàÈõÜÁöÑÊÑèÊÄùÔºåÈÄöËøá driver.cpp ÁöÑ include ÂèØ‰ª•ÁúãÂà∞ 1#include &quot;clang/Driver/Compilation.h&quot; Ê†πÊçÆÊ≠§Ë∑ØÂæÑÂèØ‰ª•ÁªÜÁúã‰∏ã Compilation Ëøô‰∏™‰∏∫‰∫Ü driver ËÆæÁΩÆÁöÑ‰∏ÄÁªÑ‰ªªÂä°ÁöÑÁ±ª„ÄÇÈÄöËøáËøô‰∏™Á±ªÊàë‰ª¨ÊèêÂèñÈáåÈù¢Ëøô‰∏™Èò∂ÊÆµÊØîËæÉÂÖ≥ÈîÆÁöÑÂá†‰∏™‰ø°ÊÅØÂá∫Êù• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class Compilation { /// The original (untranslated) input argument list. llvm::opt::InputArgList *Args; /// The driver translated arguments. Note that toolchains may perform their /// own argument translation. llvm::opt::DerivedArgList *TranslatedArgs; /// The driver we were created by. const Driver &amp;TheDriver; /// The default tool chain. const ToolChain &amp;DefaultToolChain; ... /// The list of actions. This is maintained and modified by consumers, via /// getActions(). ActionList Actions; /// The root list of jobs. JobList Jobs; ...public: ... const Driver &amp;getDriver() const { return TheDriver; } const ToolChain &amp;getDefaultToolChain() const { return DefaultToolChain; } ... ActionList &amp;getActions() { return Actions; } const ActionList &amp;getActions() const { return Actions; } ... JobList &amp;getJobs() { return Jobs; } const JobList &amp;getJobs() const { return Jobs; } void addCommand(std::unique_ptr&lt;Command&gt; C) { Jobs.addJob(std::move(C)); } ... /// ExecuteCommand - Execute an actual command. /// /// \\param FailingCommand - For non-zero results, this will be set to the /// Command which failed, if any. /// \\return The result code of the subprocess. int ExecuteCommand(const Command &amp;C, const Command *&amp;FailingCommand) const; /// ExecuteJob - Execute a single job. /// /// \\param FailingCommands - For non-zero results, this will be a vector of /// failing commands and their associated result code. void ExecuteJobs( const JobList &amp;Jobs, SmallVectorImpl&lt;std::pair&lt;int, const Command *&gt;&gt; &amp;FailingCommands) const; ...}; ÈÄöËøáËøô‰∫õÂÖ≥ÈîÆÂÆö‰πâÂÜçÁªìÂêà BuildCompilation ÂáΩÊï∞ÁöÑÂÆûÁé∞ÂèØ‰ª•ÁúãÂá∫Ëøô‰∏™ Driver ÁöÑÊµÅÁ®ãÊòØÊåâÁÖß ArgList - Actions - Jobs Êù•ÁöÑÔºåÂÆåÊï¥ÁöÑÂõæÂ¶Ç‰∏ãÔºö ParseÁúãÂÆåÂÆåÊï¥ÁöÑ Driver ÊµÅÁ®ãÂêéÔºåÊàë‰ª¨Â∞±ÂÖà‰ªé Parse ÂºÄÂßãËØ¥Ëµ∑„ÄÇ Parse ÊòØËß£ÊûêÈÄâÈ°πÔºåÂØπÂ∫îÁöÑ‰ª£Á†ÅÂú® ParseArgStrings Ëøô‰∏™ÂáΩÊï∞Èáå„ÄÇ ‰∏ãÈù¢ÈÄöËøáÊâßË°å‰∏Ä‰∏™ËØïËØïÔºåÊØîÂ¶Ç clang -### main.c -ITheOptionWeAdd ËøôÈáåÁöÑ -I ÊòØ Clang ÊîØÊåÅÁöÑÔºåÂú® Clang ÈáåÊòØ Option Á±ªÔºåClang ‰ºöÂØπËøô‰∫õ Option ‰∏ìÈó®ÁöÑËøõË°åËß£ÊûêÔºå‰ΩøÁî®‰∏ÄÁßç DSL ËØ≠Ë®ÄÂ∞ÜÂÖ∂ËΩ¨Êàê .tb Êñá‰ª∂Âêé‰ΩøÁî® table-gen ËΩ¨Êàê C++ ËØ≠Ë®ÄÂíåÂÖ∂ÂÆÉ‰ª£Á†Å‰∏ÄËµ∑ËøõË°åÁºñËØë„ÄÇ Driver Â±Ç‰ºöËß£ÊûêÊàë‰ª¨‰º†ÂÖ•ÁöÑ -I Option ÂèÇÊï∞„ÄÇ -x ÂêéÂä†‰∏™ c Ë°®Á§∫ÊòØÂØπ c ËØ≠Ë®ÄËøõË°åÁºñËØëÔºåClang Driver ÈÄöËøáÊñá‰ª∂ÁöÑÂêéÁºÄ .c Êù•Ëá™Âä®Âä†‰∏äËøô‰∏™ ÂèÇÊï∞ÁöÑ„ÄÇÂ¶ÇÊûúÊòØ c++ ËØ≠Ë®ÄÔºå‰ªÖ‰ªÖÈÄöËøáÂú® -x ÂêéÊ∑ªÂä† cpp ÁºñËØëËøòÊòØ‰ºöÂá∫ÈîôÁöÑ„ÄÇ 1clang -x c++ main.cpp ÈÄöËøáÊä•Èîô‰ø°ÊÅØÂèØ‰ª•ÁúãÂá∫‰∏Ä‰∫õÈìæÊé•ÈîôËØØ Âõ†‰∏∫ÈúÄË¶ÅÈìæÊé• C++ Ê†áÂáÜÂ∫ìÔºåÊâÄ‰ª•Âä†‰∏äÂèÇÊï∞ -lc++ Â∞±ÂèØ‰ª•‰∫Ü 1clang -x c++ -lc++ main.cpp ÈÇ£‰πà clang++ Âíå clang ÂëΩ‰ª§ÁöÑÂå∫Âà´Â∞±Âú®‰∫é‰ºöÂä†ËΩΩ C++ Â∫ìÔºåÂÖ∂ÂÆû clang++ ÊúÄÁªàËøòÊòØ‰ºöË∞ÉÁî® ClangÔºåÈÇ£‰πàÊâãÂä®ÊåáÂÆöÂä†ËΩΩÂ∫ìÂ∞±Â•Ω‰∫Ü‰ΩïÂøÖËøòË¶ÅÂ§ö‰∏™ clang++ ÂëΩ‰ª§Âë¢ÔºåËøô‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜËÉΩÂ§üÂú®Ëøô‰∏™ÂëΩ‰ª§ÈáåÂéªÂä†ËΩΩÊõ¥Â§öÁöÑÂ∫ìÔºåÈô§‰∫ÜÊ†áÂáÜÂ∫ì‰ª•Â§ñÔºåËøòÊúâ‰∫õÈùû C++ Ê†áÂáÜÂ∫ìÔºåËæÖÂä©Â∫ìÁ≠âÁ≠â„ÄÇËøôÊ†∑Âè™Ë¶ÅÊòØ C++ ÁöÑÁ®ãÂ∫èÁî® clang++ Â§ü‰∫Ü„ÄÇ Âè™ÊúâÂä†‰∏ä -cc1 Ëøô‰∏™ option ÊâçËÉΩËøõÂÖ•Âà∞ Clang driver ÊØîÂ¶Ç emit-obj Ëøô‰∏™ option Â∞±ÈúÄË¶ÅÂÖàÂä†‰∏ä -cc1„ÄÇ ËøôÁÇπÂèØ‰ª•ÈÄöËøá driver.cpp Ê∫êÁ†ÅÊù•ÁúãÔºåÂú® main() ÂáΩÊï∞ÈáåÂèØ‰ª•ÁúãÂà∞Âú®ÂÅö‰∫Ü‰∫õÂ§öÂπ≥Âè∞ÁöÑÂÖºÂÆπÂ§ÑÁêÜÂêéÂ∞±ÂºÄÂßãËøõË°åÂØπÂÖ•ÂèÇÂà§Êñ≠Á¨¨‰∏Ä‰∏™ÊòØ‰∏çÊòØ -cc1„ÄÇ 123456789101112131415if (MarkEOLs &amp;&amp; argv.size() &gt; 1 &amp;&amp; StringRef(argv[1]).startswith(&quot;-cc1&quot;)) MarkEOLs = false; llvm::cl::ExpandResponseFiles(Saver, Tokenizer, argv, MarkEOLs); // Â§ÑÁêÜ -cc1 ÈõÜÊàêÂ∑•ÂÖ∑ auto FirstArg = std::find_if(argv.begin() + 1, argv.end(), [](const char *A) { return A != nullptr; }); if (FirstArg != argv.end() &amp;&amp; StringRef(*FirstArg).startswith(&quot;-cc1&quot;)) { // Â¶ÇÊûú -cc1 Êù•Ëá™ response file, ÁßªÈô§ EOL sentinels if (MarkEOLs) { auto newEnd = std::remove(argv.begin(), argv.end(), nullptr); argv.resize(newEnd - argv.begin()); } return ExecuteCC1Tool(argv, argv[1] + 4); } Â¶ÇÊûúÊòØ -cc1 ÁöÑËØù‰ºöË∞ÉÁî® ExecuteCC1Tool Ëøô‰∏™ÂáΩÊï∞ÔºåÂÖàÁúãÁúãËøô‰∏™ÂáΩÊï∞ 1234567891011static int ExecuteCC1Tool(ArrayRef&lt;const char *&gt; argv, StringRef Tool) { void *GetExecutablePathVP = (void *)(intptr_t) GetExecutablePath; if (Tool == &quot;&quot;) return cc1_main(argv.slice(2), argv[0], GetExecutablePathVP); if (Tool == &quot;as&quot;) return cc1as_main(argv.slice(2), argv[0], GetExecutablePathVP); // ÊãíÁªùÊú™Áü•Â∑•ÂÖ∑ llvm::errs() &lt;&lt; &quot;error: unknown integrated tool &apos;&quot; &lt;&lt; Tool &lt;&lt; &quot;&apos;\\n&quot;; return 1;} ÊúÄÁªàÁöÑÊâßË°å‰ºöÊâßË°å cc1-main ÊàñËÄÖ cc1as_main „ÄÇËøô‰∏§‰∏™ÂáΩÊï∞ÂàÜÂà´Âú® driver.cpp ÂêåÁ∫ßÁõÆÂΩïÈáåÁöÑ cc1_main.cpp Âíå cc1as_main.cpp ‰∏≠„ÄÇ ‰∏ãÈù¢ÁúãÁúãÊúâÂì™‰∫õËß£Êûê Args ÁöÑÊñπÊ≥ï ParseAnalyzerArgs - Ëß£ÊûêÂá∫ÈùôÊÄÅÂàÜÊûêÂô® option ParseMigratorArgs - Ëß£Êûê Migrator option ParseDependencyOutputArgs - Ëß£Êûê‰æùËµñËæìÂá∫ option ParseCommentArgs - Ëß£ÊûêÊ≥®Èáä option ParseFileSystemArgs - Ëß£ÊûêÊñá‰ª∂Á≥ªÁªü option ParseFrontendArgs - Ëß£ÊûêÂâçÁ´Ø option ParseTargetArgs - Ëß£ÊûêÁõÆÊ†á option ParseCodeGenArgs - Ëß£Êûê CodeGen Áõ∏ÂÖ≥ÁöÑ option ParseHeaderSearchArgs - Ëß£Êûê HeaderSearch ÂØπË±°Áõ∏ÂÖ≥ÂàùÂßãÂåñÁõ∏ÂÖ≥ÁöÑ option parseSanitizerKinds - Ëß£Êûê Sanitizer Kinds ParsePreprocessorArgs - Ëß£ÊûêÈ¢ÑÂ§ÑÁêÜÁöÑ option ParsePreprocessorOutputArgs - Ëß£ÊûêÈ¢ÑÂ§ÑÁêÜËæìÂá∫ÁöÑ option PipelinePipeline ËøôÈáåÂèØ‰ª•Ê∑ªÂä† -ccc-print-phases ÁúãÂà∞ËøõÂÖ• Pipeline ‰ª•ÂêéÁöÑ‰∫ãÊÉÖ„ÄÇ Ëøô‰∫õÂ¶Ç -ccc-print-phases ËøôÊ†∑ÁöÑ option Âú®ÁºñËØëÊó∂‰ºöÁîüÊàê.inc ËøôÊ†∑ÁöÑ C++ TableGen Êñá‰ª∂„ÄÇÂú® Options.td ÂèØ‰ª•ÁúãÂà∞ÂÖ®ÈÉ®ÁöÑ option ÂÆö‰πâ„ÄÇ Âú® Clang ÁöÑ Pipeline ‰∏≠ÂæàÂ§öÂÆûÈôÖË°å‰∏∫ÈÉΩÊúâÂØπÂ∫îÁöÑ ActionÔºåÊØîÂ¶Ç preprocessor Êó∂Êèê‰æõÊñá‰ª∂ÁöÑ InputAction ÂíåÁî®‰∫éÁªëÂÆöÊú∫Âô®Êû∂ÊûÑÁöÑ BindArchAction„ÄÇ ‰ΩøÁî® clang main.c -arch i386 -arch x86_64 -o main ÁÑ∂Âêé file main ËÉΩÂ§üÁúãÂà∞ËøôÊó∂ BindArchAction Ëøô‰∏™ Action Ëµ∑Âà∞‰∫Ü‰ΩúÁî®ÔºåÁºñËØëÈìæÊé•‰∫Ü‰∏§Ê¨°ÂêåÊó∂ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Â∫ìÊó¢ËÉΩÂ§üÊîØÊåÅ32‰Ωç‰πüËÉΩÂ§üÊîØÊåÅ64‰ΩçÁî® lipo ÊâìÂåÖ„ÄÇ Action12345678910111213141516/// BuildActions - Construct the list of actions to perform for the /// given arguments, which are only done for a single architecture. /// /// \\param C - The compilation that is being built. /// \\param Args - The input arguments. /// \\param Actions - The list to store the resulting actions onto. void BuildActions(Compilation &amp;C, llvm::opt::DerivedArgList &amp;Args, const InputList &amp;Inputs, ActionList &amp;Actions) const; /// BuildUniversalActions - Construct the list of actions to perform /// for the given arguments, which may require a universal build. /// /// \\param C - The compilation that is being built. /// \\param TC - The default host tool chain. void BuildUniversalActions(Compilation &amp;C, const ToolChain &amp;TC, const InputList &amp;BAInputs) const; ‰∏äÈù¢‰∏§‰∏™ÊñπÊ≥ï‰∏≠ BuildUniversalActions ÊúÄÂêé‰πü‰ºöËµ∞ BuildActions„ÄÇBuildActions ‰∫ÜÔºåËøõÂÖ•Ëøô‰∏™ÊñπÊ≥ï 1234567891011void Driver::BuildActions(Compilation &amp;C, DerivedArgList &amp;Args, const InputList &amp;Inputs, ActionList &amp;Actions) const { llvm::PrettyStackTraceString CrashInfo(&quot;Building compilation actions&quot;); if (!SuppressMissingInputWarning &amp;&amp; Inputs.empty()) { Diag(clang::diag::err_drv_no_input_files); return; } Arg *FinalPhaseArg; phases::ID FinalPhase = getFinalPhase(Args, &amp;FinalPhaseArg); Êé•ÁùÄË∑ü getFinalPhase Ëøô‰∏™ÊñπÊ≥ï„ÄÇ 123456789101112131415161718192021222324252627282930// -{E,EP,P,M,MM} only run the preprocessor. if (CCCIsCPP() || (PhaseArg = DAL.getLastArg(options::OPT_E)) || (PhaseArg = DAL.getLastArg(options::OPT__SLASH_EP)) || (PhaseArg = DAL.getLastArg(options::OPT_M, options::OPT_MM)) || (PhaseArg = DAL.getLastArg(options::OPT__SLASH_P))) { FinalPhase = phases::Preprocess; // -{fsyntax-only,-analyze,emit-ast} only run up to the compiler. } else if ((PhaseArg = DAL.getLastArg(options::OPT_fsyntax_only)) || (PhaseArg = DAL.getLastArg(options::OPT_module_file_info)) || (PhaseArg = DAL.getLastArg(options::OPT_verify_pch)) || (PhaseArg = DAL.getLastArg(options::OPT_rewrite_objc)) || (PhaseArg = DAL.getLastArg(options::OPT_rewrite_legacy_objc)) || (PhaseArg = DAL.getLastArg(options::OPT__migrate)) || (PhaseArg = DAL.getLastArg(options::OPT__analyze, options::OPT__analyze_auto)) || (PhaseArg = DAL.getLastArg(options::OPT_emit_ast))) { FinalPhase = phases::Compile; // -S only runs up to the backend. } else if ((PhaseArg = DAL.getLastArg(options::OPT_S))) { FinalPhase = phases::Backend; // -c compilation only runs up to the assembler. } else if ((PhaseArg = DAL.getLastArg(options::OPT_c))) { FinalPhase = phases::Assemble; // Otherwise do everything. } else FinalPhase = phases::Link; ÁúãÂÆåËøôÊÆµ‰ª£Á†ÅÂ∞±‰ºöÂèëÁé∞ÂÖ∂ÂÆûÊØèÊ¨°ÁöÑ option ÈÉΩ‰ºöÂÆåÊï¥ÁöÑËµ∞‰∏ÄÈÅç‰ªéÈ¢ÑÂ§ÑÁêÜÔºåÈùôÊÄÅÂàÜÊûêÔºåbackend ÂÜçÂà∞Ê±áÁºñÁöÑËøáÁ®ã„ÄÇ ‰∏ãÈù¢Âàó‰∏ã‰∏Ä‰∫õÁºñËØëÂô®ÁöÑÂâçÁ´Ø ActionÔºåÂ§ßÂÆ∂ÂèØ‰ª•‰∏Ä‰∏™‰∏™Áî®ÁùÄÁé©„ÄÇ InitOnlyAction - Âè™ÂÅöÂâçÁ´ØÂàùÂßãÂåñÔºåÁºñËØëÂô® option ÊòØ -init-only PreprocessOnlyAction - Âè™ÂÅöÈ¢ÑÂ§ÑÁêÜÔºå‰∏çËæìÂá∫ÔºåÁºñËØëÂô®ÁöÑ option ÊòØ -Eonly PrintPreprocessedAction - ÂÅöÈ¢ÑÂ§ÑÁêÜÔºåÂ≠êÈÄâÈ°πËøòÂåÖÊã¨-P„ÄÅ-C„ÄÅ-dM„ÄÅ-dD ÂÖ∑‰ΩìÂèØ‰ª•Êü•ÁúãPreprocessorOutputOptions Ëøô‰∏™Á±ªÔºåÁºñËØëÂô® option ÊòØ -E RewriteIncludesAction - È¢ÑÂ§ÑÁêÜ DumpTokensAction - ÊâìÂç∞tokenÔºåoption ÊòØ -dump-tokens DumpRawTokensAction - ËæìÂá∫ÂéüÂßãtokensÔºåÂåÖÊã¨Á©∫Ê†ºÁ¨¶Ôºåoption ÊòØ -dump-raw-tokens RewriteMacrosAction - Â§ÑÁêÜÂπ∂Êâ©Â±ïÂÆèÂÆö‰πâÔºåÂØπÂ∫îÁöÑ option ÊòØ -rewrite-macros HTMLPrintAction - ÁîüÊàêÈ´ò‰∫ÆÁöÑ‰ª£Á†ÅÁΩëÈ°µÔºåÂØπÂ∫îÁöÑ option ÊòØ -emit-html DeclContextPrintAction - ÊâìÂç∞Â£∞ÊòéÔºåoption ÂØπÂ∫îÁöÑÊòØ -print-decl-contexts ASTDeclListAction - ÊâìÂç∞ AST ËäÇÁÇπÔºåoption ÊòØ -ast-list ASTDumpAction - ÊâìÂç∞ AST ËØ¶ÁªÜ‰ø°ÊÅØÔºåÂØπÂ∫î option ÊòØ -ast-dump ASTViewAction - ÁîüÊàê AST dot Êñá‰ª∂ÔºåËÉΩÂ§üÈÄöËøá Graphviz Êù•Êü•ÁúãÂõæÂΩ¢ËØ≠Ê≥ïÊ†ë„ÄÇ option ÊòØ -ast-view AnalysisAction - ËøêË°åÈùôÊÄÅÂàÜÊûêÂºïÊìéÔºåoption ÊòØ -analyze EmitLLVMAction - ÁîüÊàêÂèØËØªÁöÑ IR ‰∏≠Èó¥ËØ≠Ë®ÄÊñá‰ª∂ÔºåÂØπÂ∫îÁöÑ option ÊòØ -emit-llvm EmitBCAction - ÁîüÊàê IR Bitcode Êñá‰ª∂Ôºåoption ÊòØ -emit-llvm-bc MigrateSourceAction - ‰ª£Á†ÅËøÅÁßªÔºåoption ÊòØ -migrate BindBind ‰∏ªË¶ÅÊòØ‰∏éÂ∑•ÂÖ∑Èìæ ToolChain ‰∫§‰∫íÊ†πÊçÆÂàõÂª∫ÁöÑÈÇ£‰∫õ ActionÔºåÂú® Action ÊâßË°åÊó∂ Bind Êù•Êèê‰æõ‰ΩøÁî®Âì™‰∫õÂ∑•ÂÖ∑ÔºåÊØîÂ¶ÇÁîüÊàêÊ±áÁºñÊó∂ÊòØ‰ΩøÁî®ÂÜÖÂµåÁöÑËøòÊòØ GNU ÁöÑÔºåËøòÊòØÂÖ∂ÂÆÉÁöÑÂë¢ÔºåËøô‰∏™Â∞±ÊòØÁî± Bind Êù•ÂÜ≥ÂÆöÁöÑÔºåÂÖ∑‰Ωì‰ΩøÁî®ÁöÑÂ∑•ÂÖ∑ÊúâÂêÑ‰∏™Êû∂ÊûÑÔºåÂπ≥Âè∞ÔºåÁ≥ªÁªüÁöÑ ToolChain Êù•ÂÜ≥ÂÆö„ÄÇ ÈÄöËøá clang -ccc-print-bindings main.c -o main Êù•ÁúãÁúã Bind ÁöÑÁªìÊûú ÂèØ‰ª•ÁúãÂà∞ÁºñËØëÈÄâÊã©ÁöÑÊòØ clangÔºåÈìæÊé•ÈÄâÊã©ÁöÑÊòØ darwin::LinkerÔºå‰ΩÜÊòØÂú®ÈìæÊé•Êó∂ÂâçÊ≤°ÊúâÊ±áÁºñÂô®ÁöÑËøáÁ®ãÔºåËøô‰∏™Â∞±ÊòØ Bind Ëµ∑‰∫Ü‰ΩúÁî®ÔºåÂÆÉ‰ºöÊ†πÊçÆ‰∏çÂêåÁöÑÂπ≥Âè∞Êù•ÂÜ≥ÂÆöÈÄâÊã©‰ªÄ‰πàÂ∑•ÂÖ∑ÔºåÂõ†‰∏∫ÊòØÂú® Mac Á≥ªÁªüÈáå Bind Â∞±‰ºöÂÜ≥ÂÆö‰ΩøÁî® integrated-as Ëøô‰∏™ÂÜÖÁΩÆÊ±áÁºñÂô®„ÄÇÈÇ£‰πàÂ¶Ç‰ΩïÂú®‰∏çÁî®ÂÜÖÁΩÆÊ±áÁºñÂô®Âë¢„ÄÇÂèØ‰ª•‰ΩøÁî® -fno-integrated-as Ëøô‰∏™ option„ÄÇ TranslateTranslate Â∞±ÊòØÊääÁõ∏ÂÖ≥ÁöÑÂèÇÊï∞ÂØπÂ∫îÂà∞‰∏çÂêåÂπ≥Âè∞‰∏ä‰∏çÂêåÁöÑÂ∑•ÂÖ∑„ÄÇ Jobs‰ªéÂàõÂª∫ Jobs ÁöÑÊñπÊ≥ï 12345678910/// BuildJobsForAction - Construct the jobs to perform for the action \\p A and /// return an InputInfo for the result of running \\p A. Will only construct /// jobs for a given (Action, ToolChain, BoundArch, DeviceKind) tuple once. InputInfo BuildJobsForAction(Compilation &amp;C, const Action *A, const ToolChain *TC, StringRef BoundArch, bool AtTopLevel, bool MultipleArchs, const char *LinkingOutput, std::map&lt;std::pair&lt;const Action *, std::string&gt;, InputInfo&gt; &amp;CachedResults, Action::OffloadKind TargetDeviceOffloadKind) const; ÂèØ‰ª•ÁúãÂá∫ Jobs ÈúÄË¶ÅÂâçÈù¢ÁöÑ CompilationÔºåActionÔºåToolChain Á≠âÔºåÈÇ£‰πà Jobs Â∞±ÊòØÂ∞ÜÂâçÈù¢Ëé∑ÂèñÁöÑ‰ø°ÊÅØËøõË°åÁªÑÂêàÂàÜÁªÑÁªôÂêéÈù¢ÁöÑ Execute ÂÅö‰∏áÂÖ®ÂáÜÂ§á„ÄÇ ExecuteÂú® driver.cpp ÁöÑ main ÂáΩÊï∞ÈáåÁöÑ ExecuteCompilation ÊñπÊ≥ïÈáåÂèØ‰ª•ÁúãÂà∞Â¶Ç‰∏ã‰ª£Á†ÅÔºö 12345// Set up response file names for each command, if necessary for (auto &amp;Job : C.getJobs()) setUpResponseFiles(C, Job); C.ExecuteJobs(C.getJobs(), FailingCommands); ËÉΩÂ§üÁúãÂà∞ Jobs ÂáÜÂ§áÂ•Ω‰∫ÜÂêéÂ∞±Ë¶ÅÂºÄÂßã Excute ‰ªñ‰ª¨„ÄÇ Execute Â∞±ÊòØÊâßË°åÊï¥‰∏™ÁöÑÁºñËØëËøáÁ®ãÁöÑ Jobs„ÄÇËøáÁ®ãÊâßË°åÁöÑÂÜÖÂÆπÂíåËÄóÊó∂ÂèØ‰ª•ÈÄöËøáÊ∑ªÂä† -ftime-report Ëøô‰∏™ option Êù•ÁúãÂà∞„ÄÇ Clang Attributes‰ª• attribute(xx) ÁöÑËØ≠Ê≥ïÊ†ºÂºèÂá∫Áé∞ÔºåÊòØ Clang Êèê‰æõÁöÑ‰∏Ä‰∫õËÉΩÂ§üËÆ©ÂºÄÂèëËÄÖÂú®ÁºñËØëËøáÁ®ã‰∏≠ÂèÇ‰∏é‰∏Ä‰∫õÊ∫êÁ†ÅÊéßÂà∂ÁöÑÊñπÊ≥ï„ÄÇ‰∏ãÈù¢Âàó‰∏Ä‰∫õ‰ºöÁî®Âà∞ÁöÑÁî®Ê≥ïÔºö attribute((format(NSString, F, A))) Ê†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤ÂèØ‰ª•Êü•Áúã NSLog ÁöÑÁî®Ê≥ï 12345678910FOUNDATION_EXPORT void NSLog(NSString *format, ‚Ä¶) NS_FORMAT_FUNCTION(1,2) NS_NO_TAIL_CALL;// Marks APIs which format strings by taking a format string and optional varargs as arguments#if !defined(NS_FORMAT_FUNCTION) #if (__GNUC__*10+__GNUC_MINOR__ &gt;= 42) &amp;&amp; (TARGET_OS_MAC || TARGET_OS_EMBEDDED) #define NS_FORMAT_FUNCTION(F,A) __attribute__((format(__NSString__, F, A))) #else #define NS_FORMAT_FUNCTION(F,A) #endif#endif attribute((deprecated(s))) ÁâàÊú¨ÂºÉÁî®ÊèêÁ§∫Âú®ÁºñËØëËøáÁ®ã‰∏≠ËÉΩÂ§üÊèêÁ§∫ÂºÄÂèëËÄÖËØ•ÊñπÊ≥ïÊàñËÄÖÂ±ûÊÄßÂ∑≤ÁªèË¢´ÂºÉÁî® 12- (void)preMethod:( NSString *)string __attribute__((deprecated(‚ÄúpreMethodÂ∑≤ÁªèË¢´ÂºÉÁî®ÔºåËØ∑‰ΩøÁî®newMethod‚Äù)));- (void)deprecatedMethod DEPRECATED_ATTRIBUTE; //‰πüÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®DEPRECATED_ATTRIBUTEËøô‰∏™Á≥ªÁªüÂÆö‰πâÁöÑÂÆè attribute((availability(os,introduced=m,deprecated=n, obsoleted=o,message=‚Äú‚Äù VA_ARGS))) ÊåáÊòé‰ΩøÁî®ÁâàÊú¨ËåÉÂõ¥os ÊåáÁ≥ªÁªüÁöÑÁâàÊú¨Ôºåm ÊåáÊòéÂºïÂÖ•ÁöÑÁâàÊú¨Ôºån ÊåáÊòéËøáÊó∂ÁöÑÁâàÊú¨Ôºåo ÊåáÂÆåÂÖ®‰∏çÁî®ÁöÑÁâàÊú¨Ôºåmessage ÂèØ‰ª•ÂÜôÂÖ•‰∫õÊèèËø∞‰ø°ÊÅØ„ÄÇ 1- (void)method __attribute__((availability(ios,introduced=3_0,deprecated=6_0,obsoleted=7_0,message=‚ÄúiOS3Âà∞iOS7ÁâàÊú¨ÂèØÁî®ÔºåiOS7‰∏çËÉΩÁî®‚Äù))); attribute((unavailable(‚Ä¶))) ÊñπÊ≥ï‰∏çÂèØÁî®ÊèêÁ§∫Ëøô‰∏™‰ºöÂú®ÁºñËØëËøáÁ®ã‰∏≠ÂëäÁü•ÊñπÊ≥ï‰∏çÂèØÁî®ÔºåÂ¶ÇÊûú‰ΩøÁî®‰∫ÜËøò‰ºöËÆ©ÁºñËØëÂ§±Ë¥•„ÄÇ attribute((unused))Ê≤°ÊúâË¢´‰ΩøÁî®‰πü‰∏çÊä•Ë≠¶Âëä attribute((warn_unused_result))‰∏ç‰ΩøÁî®ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÂ∞±‰ºöË≠¶ÂëäÔºåÁõÆÂâç swift3 Â∑≤ÁªèÊîØÊåÅËØ•ÁâπÊÄß‰∫Ü„ÄÇoc‰∏≠‰πüÂèØ‰ª•ÈÄöËøáÂÆö‰πâËøô‰∏™attributeÊù•ÊîØÊåÅ„ÄÇ attribute((availability(swift, unavailable, message=_msg)))OC ÁöÑÊñπÊ≥ï‰∏çËÉΩÂú® Swift ‰∏≠‰ΩøÁî®„ÄÇ attribute((cleanup(‚Ä¶))) ‰ΩúÁî®ÂüüÁªìÊùüÊó∂Ëá™Âä®ÊâßË°å‰∏Ä‰∏™ÊåáÂÆöÊñπÊ≥ï‰ΩúÁî®ÂüüÁªìÊùüÂåÖÊã¨Â§ßÊã¨Âè∑ÁªìÊùüÔºåreturnÔºågotoÔºåbreakÔºåexception Á≠âÊÉÖÂÜµ„ÄÇËøô‰∏™Âä®‰ΩúÊòØÂÖà‰∫éËøô‰∏™ÂØπË±°ÁöÑ dealloc Ë∞ÉÁî®ÁöÑ„ÄÇ Reactive Cocoa ‰∏≠Êúâ‰∏™ÊØîËæÉÂ•ΩÁöÑ‰ΩøÁî®ËåÉ‰æãÔºå@onExit Ëøô‰∏™ÂÆèÔºåÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234567#define onExit \\ rac_keywordify \\ __strong rac_cleanupBlock_t metamacro_concat(rac_exitBlock_, __LINE__) __attribute__((cleanup(rac_executeCleanupBlock), unused)) = ^static inline void rac_executeCleanupBlock (__strong rac_cleanupBlock_t *block) { (*block)();} ËøôÊ†∑ÂèØ‰ª•Âú®Â∞±ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÊääÈúÄË¶ÅÊàêÂØπÂá∫Áé∞ÁöÑ‰ª£Á†ÅÂÜôÂú®‰∏ÄËµ∑‰∫Ü„ÄÇÂêåÊ†∑ÂèØ‰ª•Âú® Reactive Cocoa ÁúãÂà∞ÂÖ∂‰ΩøÁî® 123456789101112131415if (property != NULL) { rac_propertyAttributes *attributes = rac_copyPropertyAttributes(property); if (attributes != NULL) { @onExit { free(attributes); }; BOOL isObject = attributes-&gt;objectClass != nil || strstr(attributes-&gt;type, @encode(id)) == attributes-&gt;type; BOOL isProtocol = attributes-&gt;objectClass == NSClassFromString(@‚ÄúProtocol‚Äù); BOOL isBlock = strcmp(attributes-&gt;type, @encode(void(^)())) == 0; BOOL isWeak = attributes-&gt;weak; shouldAddDeallocObserver = isObject &amp;&amp; isWeak &amp;&amp; !isBlock &amp;&amp; !isProtocol; } } ÂèØ‰ª•ÁúãÂá∫ attributes ÁöÑËÆæÁΩÆÂíåÈáäÊîæÈÉΩÂú®‰∏ÄËµ∑‰ΩøÂæó‰ª£Á†ÅÁöÑÂèØËØªÊÄßÂæóÂà∞‰∫ÜÊèêÈ´ò„ÄÇ attribute((overloadable)) ÊñπÊ≥ïÈáçËΩΩËÉΩÂ§üÂú® c ÁöÑÂáΩÊï∞‰∏äÂÆûÁé∞ÊñπÊ≥ïÈáçËΩΩ„ÄÇÂç≥ÂêåÊ†∑ÁöÑÂáΩÊï∞ÂêçÂáΩÊï∞ËÉΩÂ§üÂØπ‰∏çÂêåÂèÇÊï∞Âú®ÁºñËØëÊó∂ËÉΩÂ§üËá™Âä®Ê†πÊçÆÂèÇÊï∞Êù•ÈÄâÊã©ÂÆö‰πâÁöÑÂáΩÊï∞ 1234567891011__attribute__((overloadable)) void printArgument(int number){ NSLog(@‚ÄúAdd Int %i‚Äù, number);}__attribute__((overloadable)) void printArgument(NSString *number){ NSLog(@‚ÄúAdd NSString %@‚Äú, number);}__attribute__((overloadable)) void printArgument(NSNumber *number){ NSLog(@‚ÄúAdd NSNumber %@‚Äú, number);} attribute((objc_designated_initializer)) ÊåáÂÆöÂÜÖÈÉ®ÂÆûÁé∞ÁöÑÂàùÂßãÂåñÊñπÊ≥ï Â¶ÇÊûúÊòØ objc_designated_initializer ÂàùÂßãÂåñÁöÑÊñπÊ≥ïÂøÖÈ°ªË∞ÉÁî®Ë¶ÜÁõñÂÆûÁé∞ super ÁöÑ objc_designated_initializer ÊñπÊ≥ï„ÄÇ Â¶ÇÊûú‰∏çÊòØ objc_designated_initializer ÁöÑÂàùÂßãÂåñÊñπÊ≥ïÔºå‰ΩÜÊòØËØ•Á±ªÊúâ objc_designated_initializer ÁöÑÂàùÂßãÂåñÊñπÊ≥ïÔºåÈÇ£‰πàÂøÖÈ°ªË∞ÉÁî®ËØ•Á±ªÁöÑ objc_designated_initializer ÊñπÊ≥ïÊàñËÄÖÈùû objc_designated_initializer ÊñπÊ≥ïÔºåËÄå‰∏çËÉΩÂ§üË∞ÉÁî® super ÁöÑ‰ªª‰ΩïÂàùÂßãÂåñÊñπÊ≥ï„ÄÇ attribute((objc_subclassing_restricted)) ÊåáÂÆö‰∏çËÉΩÊúâÂ≠êÁ±ªÁõ∏ÂΩì‰∫é Java ÈáåÁöÑ final ÂÖ≥ÈîÆÂ≠óÔºåÂ¶ÇÊûúÊúâÂ≠êÁ±ªÁªßÊâøÂ∞±‰ºöÂá∫Èîô„ÄÇ attribute((objc_requires_super)) Â≠êÁ±ªÁªßÊâøÂøÖÈ°ªË∞ÉÁî® superÂ£∞ÊòéÂêéÂ≠êÁ±ªÂú®ÁªßÊâøËøô‰∏™ÊñπÊ≥ïÊó∂ÂøÖÈ°ªË¶ÅË∞ÉÁî® superÔºåÂê¶Âàô‰ºöÂá∫Áé∞ÁºñËØëË≠¶ÂëäÔºåËøô‰∏™ÂèØ‰ª•ÂÆö‰πâ‰∏Ä‰∫õÂøÖË¶ÅÊâßË°åÁöÑÊñπÊ≥ïÂú® super ÈáåÊèêÈÜí‰ΩøÁî®ËÄÖËøô‰∏™ÊñπÊ≥ïÁöÑÂÜÖÂÆπÊó∂ÂøÖË¶ÅÁöÑ„ÄÇ attribute((const)) ÈáçÂ§çË∞ÉÁî®Áõ∏ÂêåÊï∞ÂÄºÂèÇÊï∞‰ºòÂåñËøîÂõûÁî®‰∫éÊï∞ÂÄºÁ±ªÂûãÂèÇÊï∞ÁöÑÂáΩÊï∞ÔºåÂ§öÊ¨°Ë∞ÉÁî®Áõ∏ÂêåÁöÑÊï∞ÂÄºÂûãÂèÇÊï∞ÔºåËøîÂõûÊòØÁõ∏ÂêåÁöÑÔºåÂè™Âú®Á¨¨‰∏ÄÊ¨°ÊòØÈúÄË¶ÅËøõË°åËøêÁÆóÔºåÂêéÈù¢Âè™ËøîÂõûÁ¨¨‰∏ÄÊ¨°ÁöÑÁªìÊûúÔºåËøôÊó∂ÁºñËØëÂô®ÁöÑ‰∏ÄÁßç‰ºòÂåñÂ§ÑÁêÜÊñπÂºè„ÄÇ attribute((constructor(PRIORITY))) Âíå attribute((destructor(PRIORITY)))PRIORITY ÊòØÊåáÊâßË°åÁöÑ‰ºòÂÖàÁ∫ßÔºåmain ÂáΩÊï∞ÊâßË°å‰πãÂâç‰ºöÊâßË°å constructorÔºåmain ÂáΩÊï∞ÊâßË°åÂêé‰ºöÊâßË°å destructorÔºå+load ‰ºöÊØî constructor ÊâßË°åÁöÑÊõ¥Êó©ÁÇπÔºåÂõ†‰∏∫Âä®ÊÄÅÈìæÊé•Âô®Âä†ËΩΩ Mach-O Êñá‰ª∂Êó∂‰ºöÂÖàÂä†ËΩΩÊØè‰∏™Á±ªÔºåÈúÄË¶Å +load Ë∞ÉÁî®ÔºåÁÑ∂ÂêéÊâç‰ºöË∞ÉÁî®ÊâÄÊúâÁöÑ constructor ÊñπÊ≥ï„ÄÇ ÈÄöËøáËøô‰∏™ÁâπÊÄßÔºåÂèØ‰ª•ÂÅö‰∫õÊØîËæÉÂ•ΩÁé©ÁöÑ‰∫ãÊÉÖÔºåÊØîÂ¶ÇËØ¥Á±ªÂ∑≤Áªè load ÂÆå‰∫ÜÔºåÊòØ‰∏çÊòØÂèØ‰ª•Âú® constructor ‰∏≠ÂØπÊÉ≥ÊõøÊç¢ÁöÑÁ±ªËøõË°åÊõøÊç¢ÔºåËÄå‰∏çÁî®Âä†Âú®ÁâπÂÆöÁ±ªÁöÑ +load ÊñπÊ≥ïÈáå„ÄÇ Clang Ë≠¶ÂëäÂ§ÑÁêÜÂÖàÁúãÁúãËøô‰∏™ 1234#pragma clang diagnostic push#pragma clang diagnostic ignored ‚Äú-Wdeprecated-declarations‚Äù sizeLabel = [self sizeWithFont:font constrainedToSize:size lineBreakMode:NSLineBreakByWordWrapping];#pragma clang diagnostic pop Â¶ÇÊûúÊ≤°Êúâ#pragma clang Ëøô‰∫õÂÆö‰πâÔºå‰ºöÊä•Âá∫ sizeWithFont ÁöÑÊñπÊ≥ï‰ºöË¢´Â∫üÂºÉÁöÑË≠¶ÂëäÔºåËøô‰∏™Âä†‰∏äËøô‰∏™ÊñπÊ≥ïÂΩìÁÑ∂ÊòØ‰∏∫‰∫ÜÂÖºÂÆπËÄÅÁ≥ªÁªüÔºåÂä†‰∏ä ignored ‚Äú-Wdeprecated-declarations‚Äù ÁöÑ‰ΩúÁî®ÊòØÂøΩÁï•Ëøô‰∏™Ë≠¶Âëä„ÄÇÈÄöËøá clang diagnostic push/pop ÂèØ‰ª•ÁÅµÊ¥ªÁöÑÊéßÂà∂‰ª£Á†ÅÂùóÁöÑÁºñËØëÈÄâÈ°π„ÄÇ ‰ΩøÁî® libclang Êù•ËøõË°åËØ≠Ê≥ïÂàÜÊûê‰ΩøÁî® libclang ÈáåÈù¢Êèê‰æõÁöÑÊñπÊ≥ïÂØπÊ∫êÊñá‰ª∂ËøõË°åËØ≠Ê≥ïÂàÜÊûêÔºåÂàÜÊûêËØ≠Ê≥ïÊ†ëÔºåÈÅçÂéÜËØ≠Ê≥ïÊ†ë‰∏äÊØè‰∏™ËäÇÁÇπ„ÄÇ ‰ΩøÁî®Ëøô‰∏™Â∫ìÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® C ÁöÑ APIÔºåÂÆòÊñπ‰πüÊèê‰æõ‰∫Ü python binding„ÄÇËøòÊúâÂºÄÊ∫êÁöÑ node-js / ruby bindingÔºåËøòÊúâ Objective-CÁöÑÂºÄÊ∫êÂ∫ì GitHub - macmade/ClangKit: ClangKit provides an Objective-C frontend to LibClang. Source tokenization, diagnostics and fix-its are actually implemented. „ÄÇ ÂÜô‰∏™ python ËÑöÊú¨Êù•Ë∞ÉÁî® clang 12345678910111213141516171819202122232425262728pip install clang#!/usr/bin/python# vim: set fileencoding=utf-8import clang.cindeximport asciitreeimport sysdef node_children(node): return (c for c in node.get_children() if c.location.file == sys.argv[1])def print_node(node): text = node.spelling or node.displayname kind = str(node.kind)[str(node.kind).index(‚Äò.‚Äô)+1:] return ‚Äò{} {}‚Äô.format(kind, text)if len(sys.argv) != 2: print(‚ÄúUsage: dump_ast.py [header file name]‚Äù) sys.exit()clang.cindex.Config.set_library_file(‚Äò/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/libclang.dylib‚Äô)index = clang.cindex.Index.create()translation_unit = index.parse(sys.argv[1], [‚Äò-x‚Äô, ‚Äòobjective-c‚Äô])print asciitree.draw_tree(translation_unit.cursor, lambda n: list(n.get_children()), lambda n: ‚Äú%s (%s)‚Äù % (n.spelling or n.displayname, str(n.kind).split(‚Äú.‚Äù)[1])) Âü∫‰∫éËØ≠Ê≥ïÊ†ëÁöÑÂàÜÊûêËøòÂèØ‰ª•ÈíàÂØπÂ≠óÁ¨¶‰∏≤ÂÅöÂä†ÂØÜ„ÄÇ LibTooling ÂØπËØ≠Ê≥ïÊ†ëÂÆåÂÖ®ÁöÑÊéßÂà∂Âõ†‰∏∫ LibTooling ËÉΩÂ§üÂÆåÂÖ®ÊéßÂà∂ËØ≠Ê≥ïÊ†ëÔºåÈÇ£‰πàÂèØ‰ª•ÂÅöÁöÑ‰∫ãÊÉÖÂ∞±ÈùûÂ∏∏Â§ö‰∫Ü„ÄÇ ÂèØ‰ª•ÊîπÂèò clang ÁîüÊàê‰ª£Á†ÅÁöÑÊñπÂºè„ÄÇ Â¢ûÂä†Êõ¥Âº∫ÁöÑÁ±ªÂûãÊ£ÄÊü•„ÄÇ ÊåâÁÖßËá™Â∑±ÁöÑÂÆö‰πâËøõË°å‰ª£Á†ÅÁöÑÊ£ÄÊü•ÂàÜÊûê„ÄÇ ÂØπÊ∫êÁ†ÅÂÅö‰ªªÊÑèÁ±ªÂûãÂàÜÊûêÔºåÁîöËá≥ÈáçÂÜôÁ®ãÂ∫è„ÄÇ Áªô clang Ê∑ªÂä†‰∏Ä‰∫õËá™ÂÆö‰πâÁöÑÂàÜÊûêÔºåÂàõÂª∫Ëá™Â∑±ÁöÑÈáçÊûÑÂô®„ÄÇ Âü∫‰∫éÁé∞Êúâ‰ª£Á†ÅÂÅöÂá∫Â§ßÈáèÁöÑ‰øÆÊîπ„ÄÇ Âü∫‰∫éÂ∑•Á®ãÁîüÊàêÁõ∏ÂÖ≥ÂõæÂΩ¢ÊàñÊñáÊ°£„ÄÇ Ê£ÄÊü•ÂëΩÂêçÊòØÂê¶ËßÑËåÉÔºåËøòËÉΩÂ§üËøõË°åËØ≠Ë®ÄÁöÑËΩ¨Êç¢ÔºåÊØîÂ¶ÇÊää OC ËØ≠Ë®ÄËΩ¨ÊàêJSÊàñËÄÖ Swift „ÄÇ ÂÆòÊñπÊúâ‰∏™ÊñáÊ°£ÂºÄÂèëËÄÖÂèØ‰ª•ÊåâÁÖßËøô‰∏™ÈáåÈù¢ÁöÑËØ¥ÊòéÂéªÊûÑÈÄ† LLVMÔºåclang ÂíåÂÖ∂Â∑•ÂÖ∑Ôºö Tutorial for building tools using LibTooling and LibASTMatchers ‚Äî Clang 4.0 documentation ÊåâÁÖßËØ¥ÊòéÁºñËØëÂÆåÊàêÂêéËøõÂÖ• LLVM ÁöÑÁõÆÂΩï ~/llvm/tools/clang/tools/ Âú®Ëøô‰∫ÜÂèØ‰ª•ÂàõÂª∫Ëá™Â∑±ÁöÑ clang Â∑•ÂÖ∑„ÄÇËøôÈáåÊúâ‰∏™ËåÉ‰æãÔºö GitHub - objcio/issue-6-compiler-tool: Example code for a standalone clang/llvm tool. ÂèØ‰ª•Áõ¥Êé• make Êàê‰∏Ä‰∏™‰∫åËøõÂà∂Êñá‰ª∂„ÄÇ ‰∏ãÈù¢ÊòØÊ£ÄÊü• target ÂØπË±°‰∏≠ÊòØÂê¶ÊúâÂØπÂ∫îÁöÑ action ÊñπÊ≥ïÂ≠òÂú®Ê£ÄÊü•ÁöÑ‰∏Ä‰∏™‰æãÂ≠ê 123@interface Observer+ (instancetype)observerWithTarget:(id)target action:(SEL)selector;@end 123456789101112131415161718192021222324//Êü•ÊâæÊ∂àÊÅØË°®ËææÂºèÔºåobserver ‰Ωú‰∏∫Êé•ÂèóËÄÖÔºåobserverWithTarget:action: ‰Ωú‰∏∫ selectorÔºåÊ£ÄÊü• target ‰∏≠ÊòØÂê¶Â≠òÂú®Áõ∏Â∫îÁöÑÊñπÊ≥ï„ÄÇvirtual bool VisitObjCMessageExpr(ObjCMessageExpr *E) { if (E-&gt;getReceiverKind() == ObjCMessageExpr::Class) { QualType ReceiverType = E-&gt;getClassReceiver(); Selector Sel = E-&gt;getSelector(); string TypeName = ReceiverType.getAsString(); string SelName = Sel.getAsString(); if (TypeName == ‚ÄúObserver‚Äù &amp;&amp; SelName == ‚ÄúobserverWithTarget:action:‚Äù) { Expr *Receiver = E-&gt;getArg(0)-&gt;IgnoreParenCasts(); ObjCSelectorExpr* SelExpr = cast&lt;ObjCSelectorExpr&gt;(E-&gt;getArg(1)-&gt;IgnoreParenCasts()); Selector Sel = SelExpr-&gt;getSelector(); if (const ObjCObjectPointerType *OT = Receiver-&gt;getType()-&gt;getAs&lt;ObjCObjectPointerType&gt;()) { ObjCInterfaceDecl *decl = OT-&gt;getInterfaceDecl(); if (! decl-&gt;lookupInstanceMethod(Sel)) { errs() &lt;&lt; ‚ÄúWarning: class ‚Äú &lt;&lt; TypeName &lt;&lt; ‚Äú does not implement selector ‚Äú &lt;&lt; Sel.getAsString() &lt;&lt; ‚Äú\\n‚Äù; SourceLocation Loc = E-&gt;getExprLoc(); PresumedLoc PLoc = astContext-&gt;getSourceManager().getPresumedLoc(Loc); errs() &lt;&lt; ‚Äúin ‚Äú &lt;&lt; PLoc.getFilename() &lt;&lt; ‚Äú &lt;‚Äú &lt;&lt; PLoc.getLine() &lt;&lt; ‚Äú:‚Äù &lt;&lt; PLoc.getColumn() &lt;&lt; ‚Äú&gt;\\n‚Äù; } } } } return true;} Clang PluginÈÄöËøáËá™Â∑±ÂÜô‰∏™Êèí‰ª∂ÔºåÊØîÂ¶Ç‰∏äÈù¢ÂÜôÁöÑ LibTooling ÁöÑ clang Â∑•ÂÖ∑ÔºåÂèØ‰ª•Â∞ÜËøô‰∏™Êèí‰ª∂Âä®ÊÄÅÁöÑÂä†ËΩΩÂà∞ÁºñËØëÂô®‰∏≠ÔºåÂØπÁºñËØëËøõË°åÊéßÂà∂ÔºåÂèØ‰ª•Âú® LLVM ÁöÑËøô‰∏™ÁõÆÂΩï‰∏ãÊü•Áúã‰∏Ä‰∫õËåÉ‰æã llvm/tools/clang/tools Âä®ÊÄÅÂåñÊñπÊ°à DynamicCocoa ‰∏≠Â∞±ÊòØ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™Â∞Ü OC Ê∫êÁ†ÅËΩ¨ JS ÁöÑÊèí‰ª∂Êù•ËøõË°å‰ª£Á†ÅÁöÑËΩ¨Êç¢ÔºåËøôÈáåÊï¥ÁêÜ‰∫Ü‰∫õÂà©Áî® clang ËΩ¨ js ÁöÑÂ∫ì clangtojsËµÑÊ∫ê - Lmsgsendnilself ÔºåJSPatch ÊòØÁõ¥Êé•ÊâãÂÜô JS ËÄåÊ≤°ÊúâËΩ¨Êç¢ÁöÑËøáÁ®ãÔºåÊâÄ‰ª•‰πüÂ∞±Ê≤°ÊúâÂ§öÂá∫Ëøô‰∏ÄÊ≠•ÔºåËÄåÈπÖÂéÇÁöÑOCSÊõ¥ÁåõÔºåÁõ¥Êé•Âú®Á´ØÂÜÖÂÜô‰∫Ü‰∏™ÁºñËØëÂô®„ÄÇÂú® C ÂáΩÊï∞ÁöÑË∞ÉÁî®‰∏äÂ≠ôÊ∫êÊúâ‰∏™ slides ÂèØ‰ª•ÁúãÁúãÔºö Calling Conventions in Cocoa by sunnyxx bang ‰πüÊúâÁØáÊñáÁ´†Ôºö Â¶Ç‰ΩïÂä®ÊÄÅË∞ÉÁî® C ÂáΩÊï∞ ¬´ bang‚Äôs blog „ÄÇ Ëøô‰∏â‰∏™ÊñπÊ°à‰ΩúËÄÖÈÉΩÂàÜÂà´ÂÜô‰∫ÜÊñáÁ´†ËØ¶ÁªÜËØ¥ÊòéÂÖ∂ÂÆûÁé∞ÊñπÊ°à„ÄÇ JSPatchÂÆûÁé∞ÂéüÁêÜËØ¶Ëß£ ¬´ bang‚Äôs blog DynamicCocoaÔºöÊª¥Êª¥ iOS Âä®ÊÄÅÂåñÊñπÊ°àÁöÑËØûÁîü‰∏éËµ∑Ëà™ OCS‚Äî‚ÄîÂè≤‰∏äÊúÄÁñØÁãÇÁöÑiOSÂä®ÊÄÅÂåñÊñπÊ°à - ÁÆÄ‰π¶ Êª¥Êª¥ÁöÑÁéãÂ∫∑Âú®ÂÅöÁò¶Ë∫´Êó∂‰πüÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑ clang Êèí‰ª∂ÔºåÂÖ∑‰ΩìËá™ÂÆö‰πâÊèí‰ª∂ÁöÑÂÆûÁé∞ÂèØ‰ª•Êü•Áúã‰ªñÁöÑËøôÊñáÁ´† „ÄäÂü∫‰∫éclangÊèí‰ª∂ÁöÑ‰∏ÄÁßçiOSÂåÖÂ§ßÂ∞èÁò¶Ë∫´ÊñπÊ°à„Äã ÈÇ£‰πàÊàë‰ª¨Ë¶ÅËá™Â∑±Âä®ÊâãÂÅöÂ∫îËØ•ÊÄé‰πàÂÖ•Èó®Âë¢ÔºåÈô§‰∫ÜÊú¨Ë∫´Â∏¶ÁöÑËåÉ‰æãÂ§ñËøòÊúâ‰∫õÊïôÁ®ãÂèØ‰ª•ÁúãÁúã„ÄÇ ÂÆòÊñπ clang ÁöÑÊèí‰ª∂Ôºö External Clang Examples Êî∂ÈõÜ‰∏Ä‰∫õÂ¶Ç‰Ωï‰ΩøÁî® clang Â∫ìÁöÑ‰æãÂ≠êÔºöGitHub - loarabia/Clang-tutorial: A collection of code samples showing usage of clang and llvm as a library Âú® Xcode ‰∏≠Ê∑ªÂä† clang ÈùôÊÄÅÂàÜÊûêËá™ÂÆö‰πâ checksÔºö Running the analyzer within Xcode Â∞Ü LLVM C ÁöÑ API Áî® swift Êù•ÂåÖË£ÖÔºö GitHub - harlanhaskins/LLVMSwift: A Swifty wrapper for the LLVM C API version 3.9.1 LLVM BackendÈ¶ñÂÖàÈÄöËøá‰∏ãÂõæÁúãÁúã LLVM Backend Âú®Êï¥‰∏™ LLVM ÈáåÊâÄÂ§ÑÁöÑ‰ΩçÁΩÆÔºö Êé•‰∏ãÊù•ÊòØÊï¥‰∏™ LLVM Backend ÁöÑÊµÅÁ®ãÂõæÔºåÂêéÈù¢‰ºöÂØπÊØè‰∏™ËøáÁ®ãËØ¶ÁªÜËØ¥Êòé CodeGen Èò∂ÊÆµ Instruction Selection Êåá‰ª§ÈÄâÊã©ÔºöÂ∞ÜIRËΩ¨ÂåñÊàêÁõÆÊ†áÂπ≥Âè∞Êåá‰ª§ÁªÑÊàêÁöÑÂÆöÂêëÈùûÂæ™ÁéØÂõæ DAGÔºàDirected Acyclic GraphÔºâ Scheduling and Formation Ë∞ÉÂ∫¶‰∏éÊéíÂ∫èÔºöËØªÂèñ DAGÔºåÂ∞Ü DAG ÁöÑÊåá‰ª§ÊéíÊàê MachineInstr ÁöÑÈòüÂàó SSA ‰ºòÂåñÔºöÂ§ö‰∏™Âü∫‰∫é SSAÔºàStatic Single AssignmentÔºâ ÁöÑ Pass ÁªÑÊàê„ÄÇÊØîÂ¶Ç modulo-scheduling Âíå peephole optimization ÈÉΩÊòØÂú®Ëøô‰∏™Èò∂ÊÆµÂÆåÊàêÁöÑ Register allocation ÂØÑÂ≠òÂô®ÂàÜÈÖçÔºöÂ∞Ü Virtual Register Êò†Â∞ÑÂà∞ Physical Register ÊàñÂÜÖÂ≠ò‰∏äProlog / Epilog ÁîüÊàê Á°ÆÂÆöÊâÄÈúÄÂ†ÜÊ†àÂ§ßÂ∞èÔºöMachine Code ÊôöÊúü‰ºòÂåñÔºöÊúÄÂêé‰∏ÄÊ¨°‰ºòÂåñÊú∫‰ºö Code EmissionÔºöËæìÂá∫‰ª£Á†ÅÔºåÂèØ‰ª•ÈÄâÊã©Ê±áÁºñÊàñËÄÖ‰∫åËøõÂà∂Êú∫Âô®Á†Å„ÄÇ SelectionDAG ÊûÑÂª∫ÊúÄÂàùÁöÑ DAGÔºöÊää IR ÈáåÁöÑ add Êåá‰ª§ËΩ¨Êàê SelectionDAG ÁöÑ add ËäÇÁÇπ ‰ºòÂåñÊûÑÂª∫Â•ΩÁöÑ DAGÔºöÊää‰∏Ä‰∫õÂπ≥Âè∞ÊîØÊåÅÁöÑ meta instructions ÊØîÂ¶Ç RotatesÔºådiv / rem Êåá‰ª§ËØÜÂà´Âá∫ Legalization SelectionDAG Á±ªÂûãÔºöÊØîÂ¶ÇÊüê‰∫õÂπ≥Âè∞Âè™Êúâ64‰ΩçÊµÆÁÇπÂíå32‰ΩçÊï¥Êï∞ËøêÁÆóÊåá‰ª§ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÊääÊâÄÊúâ f32 ÈÉΩÊèêÂçáÂà∞ f64Ôºåi1/i8/i16 ÈÉΩÊèêÂçáÂà∞ i32ÔºåÂêåÊó∂ËøòË¶ÅÊää i64 ÊãÜÂàÜÊàê‰∏§‰∏™ i32 Êù•Â≠òÂÇ®ÔºåÊìç‰ΩúÁ¨¶ÁöÑÂêàÊ≥ïÂåñÔºåÊØîÂ¶Ç SDIV Âú® x86 ‰∏äÂõûËΩ¨Êàê SDIVREM„ÄÇËøô‰∏™ËøáÁ®ãÁªìÊûúÂèØ‰ª•ÈÄöËøá llc -view-dag-combine2-dags sum.ll ÁúãÂà∞ Êåá‰ª§ÈÄâÊã© instruction selectorÔºàISelÔºâÔºöÂ∞ÜÂπ≥Âè∞Êó†ÂÖ≥ÁöÑ DAG ÈÄöËøá TableGen ËØªÂÖ• .tb Êñá‰ª∂Âπ∂‰∏îÁîüÊàêÂØπÂ∫îÁöÑÊ®°ÂºèÂåπÈÖç‰ª£Á†Å‰ªéËÄåËΩ¨ÊàêÂπ≥Âè∞Áõ∏ÂÖ≥ÁöÑ DAG SelectionDAG Scheduling and FormationÔºöÂõ†‰∏∫ CPU ÊòØÊ≤°Ê≥ïÊâßË°å DAGÔºåÊâÄ‰ª•ÈúÄË¶ÅÂ∞ÜÊåá‰ª§‰ªé DAG ‰∏≠ÊèêÂèñ‰æùÊçÆ‰∏ÄÂÆöËßÑÂàôÊØîÂ¶Ç minimal register pressure ÊàñÈöêËóèÊåá‰ª§Âª∂ËøüÈáçÊéíÊàêÊåá‰ª§ÈòüÂàó„ÄÇÔºàDAG -&gt; linear listÔºàSSA formÔºâ -&gt; MachineInstr -&gt; MC Layer API MCInst MCStreamr -&gt; MCCodeEmitter -&gt; Binary InstrÔºâ ‰∏ãÂõæÊòØ llc -view-isel-dags Áä∂ÊÄÅ‰∏ãÁöÑ DAG ÂõæÔºö Êü•Áúã DAG ‰∏çÂêåÁä∂ÊÄÅÁöÑËØ¥ÊòéÂ¶Ç‰∏ãÔºö -view-dag-combine1-dagsÔºöÂèØ‰ª•ÊòæÁ§∫Ê≤°ÊúâË¢´‰ºòÂåñÁöÑ DAG -view-legalize-dagsÔºöÂêàÊ≥ïÂåñ‰πãÂâçÁöÑ DAG -view-dag-cmobine2-dagsÔºöÁ¨¨‰∫åÊ¨°‰ºòÂåñÂâç -view-isel-dagsÔºöÊòæÁ§∫Êåá‰ª§ÈÄâÊã©ÂâçÁöÑ DAG -view-sched-dagsÔºöÂú® Scheduler ‰πãÂâç ISel ‰πãÂêé -view-sunit-dagsÔºöÂèØ‰ª•ÊòæÁ§∫ Scheduler ÁöÑ‰æùËµñÂõæ Register Allocation ÂØÑÂ≠òÂô®ÂàÜÈÖçÂØÑÂ≠òÂô®Âú® LLVM ‰∏≠ÁöÑË°®ËææÁâ©ÁêÜÂØÑÂ≠òÂô®Âú® LLVM ÈáåÂùáÊúâ 1 - 1023 ËåÉÂõ¥ÂÜÖÁöÑÁºñÂè∑„ÄÇÂú® GenRegisterNames.inc ÈáåÊâæÂà∞ÔºåÊØîÂ¶Ç lib/Target/X86/X86GenRegisterInfo.inc ËôöÊãüÂØÑÂ≠òÂô®Âà∞Áâ©ÁêÜÂØÑÂ≠òÂô®ÁöÑÊò†Â∞ÑÁõ¥Êé•Êò†Â∞Ñ‰ΩøÁî® TargetRegisterInfo Âíå MachineOperand ‰∏≠ÁöÑ API„ÄÇÈó¥Êé•Êò†Â∞ÑÁöÑAPIÁî® VirtRegMap ‰ª•Ê≠£Á°ÆÊèíÂÖ•ËØªÂÜôÊåá‰ª§ÂÆûÁé∞ÂÜÖÂ≠òË∞ÉÂ∫¶ LLVM Ëá™Â∏¶ÁöÑÂØÑÂ≠òÂô®ÂàÜÈÖçÁÆóÊ≥ïllc -regalloc=Greedy add.bc -o ln.s Fast - debug ÈªòËÆ§ÔºåÂ∞ΩÂèØËÉΩ‰øùÂ≠òÂØÑÂ≠òÂô®„ÄÇ Basic - Â¢ûÈáèÂàÜÈÖç Greedy - LLVM ÈªòËÆ§ÂØÑÂ≠òÂô®ÂàÜÈÖçÁÆóÊ≥ïÔºåÂØπ Basic ÁÆóÊ≥ïÂèòÈáèÁîüÂ≠òÊúüËøõË°åÂàÜË£ÇËøõË°åÈ´òÂ∫¶‰ºòÂåñ PBQP - Â∞ÜÂØÑÂ≠òÂô®ÂàÜÈÖçÊèèËø∞ÊàêÂàÜÂå∫Â∏ÉÂ∞î‰∫åÊ¨°ËßÑÂàí Code Emission‰∏ãÂõæËØ¶ÁªÜË°®Ëææ‰∫ÜÊï¥‰∏™ Code Emission ÁöÑËøáÁ®ã Swift ÁºñËØëÊµÅSwift ÁºñËØëÊµÅÂíå Clang ‰∏ÄÊ†∑ÈÉΩÊòØÁºñËØëÂâçÁ´ØÔºåÂíå Clang ‰∏ÄÊ†∑‰ª£Á†Å‰ºöË¢´Ëß£ÊûêÊàêËØ≠Ê≥ïÊï∞ ASTÔºåÊé•‰∏ãÊù•‰ºöÊØî Clang Â§ö‰∏ÄÊ≠•ÔºåÈÄöËøá SILGen ÁîüÊàê SIL Ëøô‰∏ÄÊ¨°Êñπ‰æøÂÅö‰∫õ Swift ÁâπÂÆöÁöÑ‰ºòÂåñÔºåSIL ‰ºöË¢´‰º†ÈÄíÁªô IR ÁîüÊàêÈò∂ÊÆµÁîüÊàê LLVM IRÔºåÊúÄÂêéÁî± LLVM Ëß£ÂÜ≥‰Ωô‰∏ã‰∫ãÊÉÖ„ÄÇÁúãÂà∞ËøôÈáåÂ§ßÂÆ∂ËÇØÂÆö‰ºöÂ•ΩÂ•á swift ÊòØÂ¶Ç‰Ωï‰∏é C Âíå OC ‰∫§‰∫íÁöÑÊØîÂ¶ÇÁ≥ªÁªüÂ∫ïÂ±ÇÁöÑÊ®°ÂùóÔºåËøôÈáåÂ∞±Ë¶ÅÊèêÊèê swift ÁöÑÊ®°ÂùóÊò†Â∞Ñ‰∫ÜÔºàModule mapÔºâÔºåÂÆÉË∞ÉÁî® Clang ÁöÑÊ®°ÂùóÔºåÂ∞ÜÂÖ∂‰º†ÂÖ• Clang importer ‰∏≠ÁîüÊàê AST Êù•ÂàÜÊûêÊòØÁöÑ swift ËÉΩÂ§üÂíå C/OC ËøõË°å‰∫§‰∫í„ÄÇ ‰∏ãÈù¢ÈÄöËøá‰∏Ä‰∏™‰æãÂ≠êÁúãËØ¶ÁªÜ‰∫ÜËß£‰∏ã Swift ÁºñËØëÊµÅÂêß„ÄÇÂÖàÂàõÂª∫‰∏Ä‰∏™ toy.swift 1print(‚Äúhi!‚Äù) ÁîüÊàêÁ®ãÂ∫è 12swiftc toy.swift./toy ÁîüÊàêÊ£ÄÊü• AST 1swiftc -dump-ast toy.swift ÂèØ‰ª•ËøòÂéü‰πãÂâçÂáΩÊï∞Âêç 1swiftc -emit-silgen toy.swift | xcrun swift-demangle llvm ir ÂíåÊ±áÁºñÁöÑÁîüÊàê 12swiftc -emit-ir toy.swiftswiftc -emit-assembly toy.swift ÁîüÊàêÂèØÊâßË°åÁöÑËÑöÊú¨ 1xcrun -sdk macosx swiftc toy.swift -o toy ÁºñËØëÂêéÁîüÊàêÁöÑ‰∫åËøõÂà∂ÂÜÖÂÆπ Link Map FileÂú® Build Settings ÈáåËÆæÁΩÆ Write Link Map File ‰∏∫ Yes ÂêéÊØèÊ¨°ÁºñËØëÈÉΩ‰ºöÂú®ÊåáÂÆöÁõÆÂΩïÁîüÊàêËøôÊ†∑‰∏Ä‰∏™Êñá‰ª∂„ÄÇÊñá‰ª∂ÂÜÖÂÆπÂåÖÂê´ Object filesÔºåSectionsÔºåSymbols„ÄÇ‰∏ãÈù¢ÂàÜÂà´ËØ¥ËØ¥Ëøô‰∫õÂÜÖÂÆπ Object filesËøô‰∏™ÈÉ®ÂàÜÁöÑÂÜÖÂÆπÈÉΩÊòØ .m Êñá‰ª∂ÁºñËØëÂêéÁöÑ .o ÂíåÈúÄË¶Å link ÁöÑ .a Êñá‰ª∂„ÄÇÂâçÈù¢ÊòØÊñá‰ª∂ÁºñÂè∑ÔºåÂêéÈù¢ÊòØÊñá‰ª∂Ë∑ØÂæÑ„ÄÇ SectionsËøôÈáåÊèèËø∞ÁöÑÊòØÊØè‰∏™ Section Âú®ÂèØÊâßË°åÊñá‰ª∂‰∏≠ÁöÑ‰ΩçÁΩÆÂíåÂ§ßÂ∞è„ÄÇÊØè‰∏™ Section ÁöÑ Segment ÁöÑÁ±ªÂûãÂàÜ‰∏∫ __TEXT ‰ª£Á†ÅÊÆµÂíå __DATA Êï∞ÊçÆÊÆµ‰∏§Áßç„ÄÇ SymbolsSymbols ÊòØÂØπ Sections ËøõË°å‰∫ÜÂÜçÂàíÂàÜ„ÄÇËøôÈáå‰ºöÊèèËø∞ÊâÄÊúâÁöÑ methodsÔºåivar ÂíåÂ≠óÁ¨¶‰∏≤ÔºåÂèäÂÆÉ‰ª¨ÂØπÂ∫îÁöÑÂú∞ÂùÄÔºåÂ§ßÂ∞èÔºåÊñá‰ª∂ÁºñÂè∑‰ø°ÊÅØ„ÄÇ ÊØèÊ¨°ÁºñËØëÂêéÁîüÊàêÁöÑ dSYM Êñá‰ª∂Âú®ÊØèÊ¨°ÁºñËØëÂêéÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™ dSYM Êñá‰ª∂ÔºåÁ®ãÂ∫èÂú®ÊâßË°å‰∏≠ÈÄöËøáÂú∞ÂùÄÊù•Ë∞ÉÁî®ÊñπÊ≥ïÂáΩÊï∞ÔºåËÄå dSYM Êñá‰ª∂ÈáåÂ≠òÂÇ®‰∫ÜÂáΩÊï∞Âú∞ÂùÄÊò†Â∞ÑÔºåËøôÊ†∑Ë∞ÉÁî®Ê†àÈáåÁöÑÂú∞ÂùÄÂèØ‰ª•ÈÄöËøá dSYM Ëøô‰∏™Êò†Â∞ÑË°®ËÉΩÂ§üËé∑ÂæóÂÖ∑‰ΩìÂáΩÊï∞ÁöÑ‰ΩçÁΩÆ„ÄÇ‰∏ÄËà¨ÈÉΩ‰ºöÁî®Êù•Â§ÑÁêÜ crash Êó∂Ëé∑ÂèñÂà∞ÁöÑË∞ÉÁî®Ê†à .crash Êñá‰ª∂Â∞ÜÂÖ∂Á¨¶Âè∑Âåñ„ÄÇ ÂèØ‰ª•ÈÄöËøá Xcode ËøõË°åÁ¨¶Âè∑ÂåñÔºåÂ∞Ü .crash Êñá‰ª∂Ôºå.dSYM Âíå .app Êñá‰ª∂ÊîæÂà∞Âêå‰∏Ä‰∏™ÁõÆÂΩï‰∏ãÔºåÊâìÂºÄ Xcode ÁöÑ Window ËèúÂçï‰∏ãÁöÑ organizerÔºåÂÜçÁÇπÂáª Device tabÔºåÊúÄÂêéÈÄâ‰∏≠Â∑¶ËæπÁöÑ Device Logs„ÄÇÈÄâÊã© import Â∞Ü .crash Êñá‰ª∂ÂØºÂÖ•Â∞±ÂèØ‰ª•ÁúãÂà∞ crash ÁöÑËØ¶ÁªÜ log ‰∫Ü„ÄÇ ËøòÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ symbolicatecrash Êù•ÊâãÂä®Á¨¶Âè∑Âåñ crash log„ÄÇÂêåÊ†∑ÂÖàÂ∞Ü .crash Êñá‰ª∂Ôºå.dSYM Âíå .app Êñá‰ª∂ÊîæÂà∞Âêå‰∏Ä‰∏™ÁõÆÂΩï‰∏ãÔºåÁÑ∂ÂêéËæìÂÖ•‰∏ãÈù¢ÁöÑÂëΩ‰ª§ 12export DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developersymbolicatecrash appName.crash appName.app &gt; appName.log Mach-O Êñá‰ª∂ËÆ∞ÂΩïÁºñËØëÂêéÁöÑÂèØÊâßË°åÊñá‰ª∂ÔºåÂØπË±°‰ª£Á†ÅÔºåÂÖ±‰∫´Â∫ìÔºåÂä®ÊÄÅÂä†ËΩΩ‰ª£Á†ÅÂíåÂÜÖÂ≠òËΩ¨ÂÇ®ÁöÑÊñá‰ª∂Ê†ºÂºè„ÄÇ‰∏çÂêå‰∫é xml ËøôÊ†∑ÁöÑÊñá‰ª∂ÔºåÂÆÉÂè™ÊòØ‰∫åËøõÂà∂Â≠óËäÇÊµÅÔºåÈáåÈù¢Êúâ‰∏çÂêåÁöÑÂåÖÂê´ÂÖÉ‰ø°ÊÅØÁöÑÊï∞ÊçÆÂùóÔºåÊØîÂ¶ÇÂ≠óËäÇÈ°∫Â∫èÔºåcpu Á±ªÂûãÔºåÂùóÂ§ßÂ∞èÁ≠â„ÄÇÊñá‰ª∂ÂÜÖÂÆπÊòØ‰∏çÂèØ‰ª•‰øÆÊîπÁöÑÔºåÂõ†‰∏∫Âú® .app ÁõÆÂΩï‰∏≠Êúâ‰∏™ _CodeSignature ÁöÑÁõÆÂΩïÔºåÈáåÈù¢ÂåÖÂê´‰∫ÜÁ®ãÂ∫è‰ª£Á†ÅÁöÑÁ≠æÂêçÔºåËøô‰∏™Á≠æÂêçÁöÑ‰ΩúÁî®Â∞±ÊòØ‰øùËØÅÁ≠æÂêçÂêé .app ÈáåÁöÑÊñá‰ª∂ÔºåÂåÖÊã¨ËµÑÊ∫êÊñá‰ª∂ÔºåMach-O Êñá‰ª∂ÈÉΩ‰∏çËÉΩÂ§üÊõ¥Êîπ„ÄÇ Mach-O Êñá‰ª∂ÂåÖÂê´‰∏â‰∏™Âå∫Âüü Mach-O HeaderÔºöÂåÖÂê´Â≠óËäÇÈ°∫Â∫èÔºåmagicÔºåcpu Á±ªÂûãÔºåÂä†ËΩΩÊåá‰ª§ÁöÑÊï∞ÈáèÁ≠â Load CommandsÔºöÂåÖÂê´ÂæàÂ§öÂÜÖÂÆπÁöÑË°®ÔºåÂåÖÊã¨Âå∫ÂüüÁöÑ‰ΩçÁΩÆÔºåÁ¨¶Âè∑Ë°®ÔºåÂä®ÊÄÅÁ¨¶Âè∑Ë°®Á≠â„ÄÇÊØè‰∏™Âä†ËΩΩÊåá‰ª§ÂåÖÂê´‰∏Ä‰∏™ÂÖÉ‰ø°ÊÅØÔºåÊØîÂ¶ÇÊåá‰ª§Á±ªÂûãÔºåÂêçÁß∞ÔºåÂú®‰∫åËøõÂà∂‰∏≠ÁöÑ‰ΩçÁΩÆÁ≠â„ÄÇ DataÔºöÊúÄÂ§ßÁöÑÈÉ®ÂàÜÔºåÂåÖÂê´‰∫Ü‰ª£Á†ÅÔºåÊï∞ÊçÆÔºåÊØîÂ¶ÇÁ¨¶Âè∑Ë°®ÔºåÂä®ÊÄÅÁ¨¶Âè∑Ë°®Á≠â„ÄÇ Mach-O Êñá‰ª∂ÁöÑËß£ÊûêÂÜçÈÄöËøá‰∏Ä‰∏™‰æãÂ≠êÊù•ÂàÜÊûê‰∏ãÔºöËøôÊ¨°Áî® xcrun Êù• 1xcrun clang -v ÂÖàÂàõÂª∫‰∏Ä‰∏™test.cÁöÑÊñá‰ª∂ 1touch test.c ÁºñËæëÈáåÈù¢ÁöÑÂÜÖÂÆπ 12345678vi test.c#include &lt;stdio.h&gt;int main(int argc, char *argv[]){ printf(&quot;hi there!\\n&quot;); return 0;} ÁºñËØëËøêË°åÔºåÊ≤°ÊúâËµ∑ÂêçÈªòËÆ§‰∏∫ a.out 12xcrun clang test.c./a.out a.out Â∞±ÊòØÁºñËØëÁîüÊàêÁöÑ‰∫åËøõÂà∂Êñá‰ª∂Ôºå‰∏ãÈù¢ÁúãÁúãËøô‰∏™‰∫åËøõÂà∂Êñá‰ª∂Êó∂Â¶Ç‰ΩïÁîüÊàêÁöÑÊää„ÄÇÂÖàÁúãÁúãËæìÂá∫ÁöÑÊ±áÁºñ‰ª£Á†Å 1xcrun clang -S -o - test.c | open -f ËæìÂá∫ÁöÑÁªìÊûúÈáå . ÂºÄÂ§¥ÁöÑË°åÊòØÊ±áÁºñÊåá‰ª§‰∏çÊòØÊ±áÁºñ‰ª£Á†ÅÔºåÂÖ∂ÂÆÉÁöÑÈÉΩÊòØÊ±áÁºñ‰ª£Á†Å„ÄÇÂÖàÁúãÁúãÂâçÂá†Ë°å 1234.section __TEXT,__text,regular,pure_instructions.macosx_version_min 10, 12.globl _main.align 4, 0x90 .section Êåá‰ª§ÊåáÂÆöÊé•‰∏ãÊù•ÊâßË°åÂì™‰∏Ä‰∏™ÊÆµ„ÄÇ .globl Êåá‰ª§ËØ¥Êòé _main ÊòØ‰∏Ä‰∏™Â§ñÈÉ®Á¨¶Âè∑ÔºåÂõ†‰∏∫ main() ÂáΩÊï∞ÂØπ‰∫éÁ≥ªÁªüÊù•ËØ¥ÊòØÈúÄË¶ÅË∞ÉÁî®ÂÆÉÊù•ËøêË°åÊâßË°åÊñá‰ª∂ÁöÑ„ÄÇ .align ÊåáÂá∫ÂêéÈù¢‰ª£Á†ÅÁöÑÂØπÈΩêÊñπÂºèÔºå16(2^4) Â≠óËäÇÂØπÈΩêÔºå 0x90 Ë°•ÈΩê„ÄÇ ÁúãÁúãÊé•‰∏ãÊù•ÁöÑ main ÂáΩÊï∞Â§¥ÈÉ®ÈÉ®ÂàÜ 123456789101112_main: ## @main .cfi_startproc## BB#0: pushq %rbpLtmp0: .cfi_def_cfa_offset 16Ltmp1: .cfi_offset %rbp, -16 movq %rsp, %rbpLtmp2: .cfi_def_cfa_register %rbp subq $32, %rsp _main ÊòØÂáΩÊï∞ÂºÄÂßãÁöÑÂú∞ÂùÄÔºå‰∫åËøõÂà∂Êñá‰ª∂‰ºöÊúâËøô‰∏™‰ΩçÁΩÆÁöÑÂºïÁî®„ÄÇ .cfi_startproc Ëøô‰∏™Êåá‰ª§Áî®‰∫éÂáΩÊï∞ÁöÑÂºÄÂßãÔºåCFI ÊòØ Call Frame Infomation ÁöÑÁº©ÂÜôÊòØË∞ÉÁî®Â∏ß‰ø°ÊÅØÁöÑÊÑèÊÄùÔºåÂú®Áî® debugger Êó∂ÂÆûÈôÖ‰∏äÂ∞±ÊòØ stepping in / out ÁöÑ‰∏Ä‰∏™Ë∞ÉÁî®Â∏ß„ÄÇÂΩìÂá∫Áé∞ .cfi_endproc Êó∂Ë°®Á§∫ÂåπÂØπÁªìÊùüÊ†áËÆ∞Âá∫ main() ÂáΩÊï∞ÁªìÊùü„ÄÇ pushq %rbp ÊòØÊ±áÁºñ‰ª£Á†ÅÔºå## BB#0: Ëøô‰∏™ label ÈáåÁöÑ„ÄÇABI ‰ºöËÆ© rbp Ëøô‰∏™ÂØÑÂ≠òÂô®ÁöÑË¢´‰øùÊä§Ëµ∑Êù•ÔºåÂΩìÂáΩÊï∞Ë∞ÉÁî®ËøîÂõûÊó∂ËÆ© rbp ÂØÑÂ≠òÂô®ÁöÑÂÄºË∑ü‰ª•Ââç‰∏ÄÊ†∑„ÄÇ ABI ÊòØ application binary interface ÁöÑÁº©ÂÜôË°®Á§∫Â∫îÁî®‰∫åËøõÂà∂Êé•Âè£ÔºåÂÆÉÊåáÂÆö‰∫ÜÂáΩÊï∞Ë∞ÉÁî®ÊòØÂ¶Ç‰ΩïÂú®Ê±áÁºñ‰ª£Á†ÅÂ±ÇÈù¢‰∏äÂ∑•‰ΩúÁöÑ„ÄÇpushq %rbp Â∞Ü rbp ÁöÑÂÄº push Âà∞Ê†à‰∏≠„ÄÇ .cfi_def_cfa_offset 16 Âíå .cfi_offset %rbp, -16 ‰ºöËæìÂá∫‰∏Ä‰∫õÂ†ÜÊ†àÂíåË∞ÉËØï‰ø°ÊÅØÔºåÁ°Æ‰øùË∞ÉËØïÂô®Ë¶Å‰ΩøÁî®Ëøô‰∫õ‰ø°ÊÅØÊó∂ËÉΩÂ§üÊâæÂà∞„ÄÇ movq %rsp, %rbp ÊääÂ±ÄÈÉ®ÂèòÈáèÊîæÂà∞Ê†à‰∏ä„ÄÇ subq $32, %rsp ‰ºöÂ∞ÜÊ†àÊåáÈíàÁßªÂä® 32 ‰∏™Â≠óËäÇÔºåÂ∞±ÊòØÂáΩÊï∞Ë∞ÉÁî®ÁöÑ‰ΩçÁΩÆ„ÄÇÊóßÁöÑÊ†àÊåáÈíàÂ≠òÂú® rbp Èáå‰Ωú‰∏∫Â±ÄÈÉ®ÂèòÈáèÁöÑÂü∫ÂùÄÔºåÂÜçÊõ¥Êñ∞Â†ÜÊ†àÊåáÈíàÂà∞‰ºö‰ΩøÁî®ÁöÑ‰ΩçÁΩÆ„ÄÇ ÂÜçÁúãÁúã printf() 1234567leaq L_.str(%rip), %raxmovl $0, -4(%rbp)movl %edi, -8(%rbp)movq %rsi, -16(%rbp)movq %rax, %rdimovb $0, %alcallq _printf leap ‰ºöÂ∞Ü L_.str Ëøô‰∏™ÊåáÈíàÂä†ËΩΩÂà∞ rax ÂØÑÂ≠òÂô®Èáå„ÄÇÂèØ‰ª•ÁúãÁúã L_.str ÁöÑÂÆö‰πâ 12L_.str: ## @.str .asciz &quot;hi there\\n&quot; Ëøô‰∏™Â∞±ÊòØÊàë‰ª¨‰ª£Á†ÅÊñá‰ª∂ÈáåÂÆö‰πâÁöÑÈÇ£‰∏™Â≠óÁ¨¶‰∏≤„ÄÇ ËøôÈáåÂèØ‰ª•ÁúãÂà∞ÂáΩÊï∞ÁöÑ‰∏§‰∏™ÂèÇÊï∞ÂàÜÂà´‰øùÂ≠òÂú® edi Âíå rsi ÂØÑÂ≠òÂô®ÈáåÔºåÊ†πÊçÆÂáΩÊï∞Âú∞ÂùÄÂÅö‰∫Ü‰∏çÂêåÁöÑÂÅèÁßª„ÄÇ ÂΩìÁÑ∂‰πüÂèØ‰ª•ÁúãÂá∫Âú®Ëøô‰∏™Ê±áÁºñ‰ª£Á†ÅËøòÊúâËÉΩÂ§ü‰ºòÂåñÁöÑÂú∞ÊñπÔºåÂõ†‰∏∫Ëøô‰∏§‰∏™ÂÄºÂπ∂Ê≤°ÊúâÁî®ÔºåÂç¥ËøòÊòØË¢´ÂØÑÂ≠òÂô®Â≠òÂÇ®‰∫Ü„ÄÇ printf() ÊòØ‰∏™ÂèØÂèòÂèÇÊï∞ÁöÑÂáΩÊï∞ÔºåÊåâÁÖß ABI Ë∞ÉÁî®Á∫¶ÂÆöÂ≠òÂÇ®ÂèÇÊï∞ÁöÑÂØÑÂ≠òÂô®Êï∞ÈáèÂ≠òÂÇ®Âú®ÂØÑÂ≠òÂô® al ‰∏≠ÔºåÂèØÂèòÊâÄ‰ª•Êï∞ÈáèËÆæÁΩÆ‰∏∫0Ôºåcallq ‰ºöË∞ÉÁî® printf() ÂáΩÊï∞„ÄÇ Êé•‰∏ãÊù•ÁúãÁúãËøîÂõûÂíåÂáΩÊï∞ÁöÑÁªìÊùü 1234567xorl %ecx, %ecxmovl %eax, -20(%rbp) ## 4-byte Spillmovl %ecx, %eaxaddq $32, %rsppopq %rbpretq.cfi_endproc xorl %ecx, %ecx Áõ∏ÂΩì‰∫éÂ∞Ü ecx ÂØÑÂ≠òÂô®ËÆæÁΩÆ‰∏∫0„ÄÇABI Á∫¶ÂÆö eax ÂØÑÂ≠òÂô®Áî®Êù•‰øùÂ≠òÂáΩÊï∞ËøîÂõûÂÄºÔºåÊã∑Ë¥ù ecx Âà∞ eax ‰∏≠ÔºåËøôÊ†∑ main() ËøîÂõûÂÄºÂ∞±ÊòØ0„ÄÇ ÂáΩÊï∞ÊâßË°åÂÆå‰ºöÊÅ¢Â§çÂ†ÜÊ†àÊåáÈíàÔºåÂâçÈù¢ÊòØ subq 32 ÊòØÊää rsp ‰∏ãÁßª32Â≠óËäÇÔºåaddq Â∞±ÊòØ‰∏äÁßªÂΩí‰Ωç„ÄÇÁÑ∂ÂêéÊää rbp ÁöÑÂÄº‰ªéÊ†àÈáå pop Âá∫Êù•„ÄÇret ‰ºöËØªÂèñÂá∫Ê†àËøîÂõûÁöÑÂú∞ÂùÄÔºå.cfi_endproc Âíå .cfi_startproc ÈÖçÂØπÊ†áËÆ∞ÁªìÊùü„ÄÇ Êé•‰∏ãÊù•ÊòØÂ≠óÁ¨¶‰∏≤ËæìÂá∫ 12345 .section __TEXT,__cstring,cstring_literalsL_.str: ## @.str .asciz &quot;hi there\\n&quot;.subsections_via_symbols ÂêåÊ†∑ .section ÊåáÂá∫ËøõÂÖ•‰∏Ä‰∏™Êñ∞ÁöÑÊÆµ„ÄÇÊúÄÂêé .subsections_via_symbols ÊòØÈùôÊÄÅÈìæÊé•Âô®Áî®ÁöÑ„ÄÇ Êé•‰∏ãÊù•ÈÄöËøá size Â∑•ÂÖ∑Êù•ÁúãÁúã a.out ÈáåÁöÑ section„ÄÇ 1xcrun size -x -l -m a.out 1234567891011121314Segment __PAGEZERO: 0x100000000 (vmaddr 0x0 fileoff 0)Segment __TEXT: 0x1000 (vmaddr 0x100000000 fileoff 0) Section __text: 0x34 (addr 0x100000f50 offset 3920) Section __stubs: 0x6 (addr 0x100000f84 offset 3972) Section __stub_helper: 0x1a (addr 0x100000f8c offset 3980) Section __cstring: 0xa (addr 0x100000fa6 offset 4006) Section __unwind_info: 0x48 (addr 0x100000fb0 offset 4016) total 0xa6Segment __DATA: 0x1000 (vmaddr 0x100001000 fileoff 4096) Section __nl_symbol_ptr: 0x10 (addr 0x100001000 offset 4096) Section __la_symbol_ptr: 0x8 (addr 0x100001010 offset 4112) total 0x18Segment __LINKEDIT: 0x1000 (vmaddr 0x100002000 fileoff 8192)total 0x100003000 ÂèØ‰ª•ÁúãÂá∫ÊúâÂõõ‰∏™ segment ÂíåÂ§ö‰∏™section„ÄÇ Âú®ËøêË°åÊó∂ÔºåËôöÊãüÂÜÖÂ≠ò‰ºöÊää segment Êò†Â∞ÑÂà∞ËøõÁ®ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåËôöÊãüÂÜÖÂ≠ò‰ºöÈÅøÂÖçÂ∞ÜÂÖ®ÈÉ®ÊâßË°åÊñá‰ª∂ÂÖ®ÈÉ®Âä†ËΩΩÂà∞ÂÜÖÂ≠ò„ÄÇ __PAGEZERO segment ÁöÑÂ§ßÂ∞èÊòØ 4GBÔºå‰∏çÊòØÊñá‰ª∂ÁúüÂÆûÂ§ßÂ∞èÔºåÊòØËßÑÂÆöËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥Ââç 4GB Ë¢´Êò†Â∞Ñ‰∏∫‰∏çÂèØÊâßË°åÔºå‰∏çÂèØÂÜôÂíå‰∏çÂèØËØª„ÄÇ __TEXT segment ÂåÖÂê´Ë¢´ÊâßË°åÁöÑ‰ª£Á†Å‰ª•Âè™ËØªÂíåÂèØÊâßË°åÁöÑÊñπÂºèÊò†Â∞Ñ„ÄÇ __text section ÂåÖÂê´ÁºñËØëÂêéÁöÑÊú∫Âô®Á†Å„ÄÇ __stubs Âíå __stub_helper ÊòØÁªôÂä®ÊÄÅÈìæÊé•Âô® dyld ‰ΩøÁî®ÔºåÂèØ‰ª•ÂÖÅËÆ∏Âª∂ËøüÈìæÊé•„ÄÇ __cstring ÂèØÊâßË°åÊñá‰ª∂‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ __const ‰∏çÂèØÂèòÁöÑÂ∏∏Èáè„ÄÇ __DATA segment ‰ª•ÂèØËØªÂÜôÂíå‰∏çÂèØÊâßË°åÁöÑÊñπÂºèÊò†Â∞ÑÔºåÈáåÈù¢ÊòØ‰ºöË¢´Êõ¥ÊîπÁöÑÊï∞ÊçÆ„ÄÇ __nl_symbol_ptr ÈùûÂª∂ËøüÊåáÈíà„ÄÇÂèØÊâßË°åÊñá‰ª∂Âä†ËΩΩÂêåÊó∂Âä†ËΩΩ„ÄÇ __la_symbol_ptr Âª∂ËøüÁ¨¶Âè∑ÊåáÈíà„ÄÇÂª∂ËøüÁî®‰∫éÂèØÊâßË°åÊñá‰ª∂‰∏≠Ë∞ÉÁî®Êú™ÂÆö‰πâÁöÑÂáΩÊï∞ÔºåÂèØÊâßË°åÊñá‰ª∂ÈáåÊ≤°ÊúâÂåÖÂê´ÁöÑÂáΩÊï∞‰ºöÂª∂ËøüÂä†ËΩΩ„ÄÇ __const ÈúÄË¶ÅÈáçÂÆöÂêëÁöÑÂ∏∏ÈáèÔºå‰æãÂ¶Ç char * const c = ‚Äúfoo‚Äù; cÊåáÈíàÊåáÂêëÂèØÂèòÁöÑÊï∞ÊçÆ„ÄÇ __bss ‰∏çÁî®ÂàùÂßãÂåñÁöÑÈùôÊÄÅÂèòÈáèÔºå‰æãÂ¶Ç static int i; ANSI C Ê†áÂáÜËßÑÂÆöÈùôÊÄÅÂèòÈáèÂøÖÈ°ªËÆæÁΩÆ‰∏∫0„ÄÇËøêË°åÊó∂ÈùôÊÄÅÂèòÈáèÁöÑÂÄºÊòØÂèØ‰øÆÊîπÁöÑ„ÄÇ __common ÂåÖÂê´Â§ñÈÉ®ÂÖ®Â±ÄÂèòÈáè„ÄÇ‰æãÂ¶ÇÂú®ÂáΩÊï∞Â§ñÂÆö‰πâ int i; __dyld ÊòØsectionÂç†‰ΩçÁ¨¶ÔºåÁî®‰∫éÂä®ÊÄÅÈìæÊé•Âô®„ÄÇ Êõ¥Â§ö section Á±ªÂûã‰ªãÁªçÂèØ‰ª•Êü•ÁúãËãπÊûúÊñáÊ°£Ôºö OS X Assembler Reference Êé•‰∏ãÊù•Áî® otool Êü•Áúã‰∏ã section ÈáåÁöÑÂÜÖÂÆπÔºö 1xcrun otool -s __TEXT __text a.out 123456a.out:Contents of (__TEXT,__text) section0000000100000f50 55 48 89 e5 48 83 ec 20 48 8d 05 47 00 00 00 c7 0000000100000f60 45 fc 00 00 00 00 89 7d f8 48 89 75 f0 48 89 c7 0000000100000f70 b0 00 e8 0d 00 00 00 31 c9 89 45 ec 89 c8 48 83 0000000100000f80 c4 20 5d c3 Ëøô‰∏™ËøîÂõûÁöÑÂÜÖÂÆπÂæàÈöæËØªÔºåÂä†‰∏™ - v Â∞±ÂèØ‰ª•Êü•ÁúãÂèçÊ±áÁºñ‰ª£Á†Å‰∫ÜÔºå -s __TEXT __text Êúâ‰∏™Áº©ÂÜô -t 1xcrun otool -v -t a.out 12345678910111213141516171819a.out:(__TEXT,__text) section_main:0000000100000f50 pushq %rbp0000000100000f51 movq %rsp, %rbp0000000100000f54 subq $0x20, %rsp0000000100000f58 leaq 0x47(%rip), %rax0000000100000f5f movl $0x0, -0x4(%rbp)0000000100000f66 movl %edi, -0x8(%rbp)0000000100000f69 movq %rsi, -0x10(%rbp)0000000100000f6d movq %rax, %rdi0000000100000f70 movb $0x0, %al0000000100000f72 callq 0x100000f840000000100000f77 xorl %ecx, %ecx0000000100000f79 movl %eax, -0x14(%rbp)0000000100000f7c movl %ecx, %eax0000000100000f7e addq $0x20, %rsp0000000100000f82 popq %rbp0000000100000f83 retq ÁúãËµ∑Êù•ÊòØ‰∏çÊòØÂæàÁÜüÊÇâÔºåÂíåÂâçÈù¢ÁöÑÁºñËØëÊó∂Â∑Æ‰∏çÂ§öÔºå‰∏çÂêåÁöÑÂ∞±ÊòØÊ≤°ÊúâÊ±áÁºñÊåá‰ª§„ÄÇ Áé∞Âú®Êù•ÁúãÁúãÂèØÊâßË°åÊñá‰ª∂„ÄÇ ÈÄöËøá otool Êù•ÁúãÁúãÂèØÊâßË°åÊñá‰ª∂Â§¥ÈÉ®Ôºå ÈÄöËøá -h ÂèØ‰ª•ÊâìÂç∞Âá∫Â§¥ÈÉ®‰ø°ÊÅØÔºö 1otool -v -h a.out 123Mach header magic cputype cpusubtype caps filetype ncmds sizeofcmds flagsMH_MAGIC_64 X86_64 ALL LIB64 EXECUTE 15 1200 NOUNDEFS DYLDLINK TWOLEVEL PIE mach_header ÁªìÊûÑ‰Ωì 123456789struct mach_header { uint32_t magic; cpu_type_t cputype; cpu_subtype_t cpusubtype; uint32_t filetype; uint32_t ncmds; uint32_t sizeofcmds; uint32_t flags;}; cputype Âíå cpusubtype ËßÑÂÆöÂèØÊâßË°åÊñá‰ª∂ÂèØ‰ª•Âú®Âì™‰∫õÁõÆÊ†áÊû∂ÊûÑËøêË°å„ÄÇncmds Âíå sizeofcmds ÊòØÂä†ËΩΩÂëΩ‰ª§„ÄÇÈÄöËøá -l ÂèØ‰ª•Êü•ÁúãÂä†ËΩΩÂëΩ‰ª§ 1otool -v -l a.out | open -f Âä†ËΩΩÂëΩ‰ª§ÁªìÊûÑ‰Ωì 12345678910111213struct segment_command { uint32_t cmd; uint32_t cmdsize; char segname[16]; uint32_t vmaddr; uint32_t vmsize; uint32_t fileoff; uint32_t filesize; vm_prot_t maxprot; vm_prot_t initprot; uint32_t nsects; uint32_t flags;}; Êü•Áúã Load command 1 Ëøô‰∏™ÈÉ®ÂàÜÂèØ‰ª•ÊâæÂà∞ initprot r-x ÔºåË°®Á§∫Âè™ËØªÂíåÂèØÊâßË°å„ÄÇ Âú®Âä†ËΩΩÂëΩ‰ª§ÈáåËøòÊòØÁúãÁúã __TEXT __text ÁöÑsectionÁöÑÂÜÖÂÆπ 12345678910111213Section sectname __text segname __TEXT addr 0x0000000100000f50 size 0x0000000000000034 offset 3920 align 2^4 (16) reloff 0 nreloc 0 type S_REGULARattributes PURE_INSTRUCTIONS SOME_INSTRUCTIONS reserved1 0 reserved2 0 addr ÁöÑÂÄºË°®Á§∫‰ª£Á†ÅÁöÑ‰ΩçÁΩÆÂú∞ÂùÄÔºåÂú®‰∏äÈù¢ÂèçÊ±áÁºñÁöÑ‰ª£Á†ÅÈáåÂèØ‰ª•ÁúãÂà∞Âú∞ÂùÄÊòØ‰∏ÄÊ†∑ÁöÑÔºåoffset Ë°®Á§∫Âú®Êñá‰ª∂‰∏≠ÁöÑÂÅèÁßªÈáè„ÄÇ Âçï‰∏™Êñá‰ª∂ÁöÑÂ∞±ËøôÊ†∑‰∫ÜÔºå‰ΩÜÊòØÂ∑•Á®ãÈÉΩÊòØÂ§ö‰∏™Ê∫êÊñá‰ª∂ÁöÑÔºåÈÇ£‰πàÂ§ö‰∏™Êñá‰ª∂ÊòØÊÄé‰πàÂêàÊàê‰∏Ä‰∏™ÂèØÊâßË°åÊñá‰ª∂ÁöÑÂë¢ÔºüÈÇ£‰πàÂª∫Â§ö‰∏™Êñá‰ª∂Êù•ÁúãÁúãÂÖà„ÄÇFoo.h 1234567#import &lt;Foundation/Foundation.h&gt;@interface Foo : NSObject- (void)say;@end Foo.m 12345678910#import ‚ÄúFoo.h‚Äù@implementation Foo- (void)say{ NSLog(@‚Äúhi there again!\\n‚Äù);}@end SayHi.m 12345678910#import ‚ÄúFoo.h‚Äùint main(int argc, char *argv[]){ @autoreleasepool { Foo *foo = [[Foo alloc] init]; [foo say]; return 0; }} ÂÖàÁºñËØëÂ§ö‰∏™Êñá‰ª∂ 12xcrun clang -c Foo.mxcrun clang -c SayHi.m ÂÜçÂ∞ÜÁºñËØëÂêéÁöÑÊñá‰ª∂ÈìæÊé•Ëµ∑Êù•ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÁîüÊàê a.out ÂèØÊâßË°åÊñá‰ª∂‰∫Ü„ÄÇ 1xcrun clang SayHi.o Foo.o -Wl,`xcrun ‚Äîshow-sdk-path`/System/Library/Frameworks/Foundation.framework/Foundation ÈÄÜÂêë Mach-O Êñá‰ª∂ÈúÄË¶ÅÂÖàÂÆâË£Ö tweakÔºåÂÆâË£ÖË∂äÁã±ÂèØ‰ª•ÈÄöËøá cydiaÔºå‰∏çË∂äÁã±Áõ¥Êé•ÊâìÂåÖÊàê ipa ÂÆâË£ÖÂåÖ„ÄÇË∂äÁã±ÁöÑËØù‰ºöÂÆâË£Ö‰∏Ä‰∏™ mobilesubstrate ÁöÑÂä®ÊÄÅÂ∫ìÔºå‰ΩøÁî® theos ÂºÄÂèëÂ∑•ÂÖ∑ÔºåÈùûË∂äÁã±ÁöÑÁõ¥Êé•ÊääËøô‰∏™Â∫ìÊâìÂåÖËøõ ipa ‰∏≠ÊàñËÄÖÁõ¥Êé•‰øÆÊîπÊ±áÁºñ‰ª£Á†Å„ÄÇ Mobilesubstrate Êèê‰æõ‰∫Ü‰∏â‰∏™Ê®°ÂùóÊù•Êñπ‰æøÂºÄÂèë„ÄÇ MobileHookerÔºöÂà©Áî® method swizzling ÊäÄÊúØÂÆö‰πâ‰∏Ä‰∫õÂÆèÂíåÂáΩÊï∞Êù•ÊõøÊç¢Á≥ªÁªüÊàñËÄÖÁõÆÊ†áÂáΩÊï∞„ÄÇ MobileLoaderÔºöÂú®Á®ãÂ∫èÂêØÂä®Êó∂Â∞ÜÊàë‰ª¨ÂÜôÁöÑÁ†¥Ëß£Á®ãÂ∫èÁî®ÁöÑÁ¨¨‰∏âÊñπÂ∫ìÊ≥®ÂÖ•ËøõÂéª„ÄÇÊÄé‰πàÊ≥®ÂÖ•ÁöÑÂë¢ÔºåËøòËÆ∞ÂæóÂÖàÂâçËØ¥ÁöÑ clang attribute ÈáåÁöÑ‰∏Ä‰∏™ attribute((constructor)) ‰πàÔºåÂÆÉ‰ºöÂú® main ÊâßË°å‰πãÂâçÊâßË°åÔºåÊâÄ‰ª•ÊääÊàë‰ª¨ÁöÑ hook ÊîæÂú®ËøôÈáåÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ Safe modeÔºöÁ±ª‰ººÂÆâÂÖ®Ê®°ÂºèÔºå‰ºöÁ¶ÅÁî®ÁöÑÊîπÂä®„ÄÇ ÂÖàÂâçÊèêÂà∞ Mach-O ÁöÑÁªìÊûÑÊúâ HeaderÔºåLoad commands Âíå DataÔºåMobileloader ‰ºöÈÄöËøá‰øÆÊîπ‰∫åËøõÂà∂ÁöÑ loadCommands Êù•ÂÖàÊääËá™Â∑±Ê≥®ÂÖ•ÁÑ∂ÂêéÂÜçÊääÊàë‰ª¨ÂÜôÁöÑÁ¨¨‰∏âÊñπÂ∫ìÊ≥®ÂÖ•ËøõÂéªÔºåËøôÊ†∑Á†¥Ëß£Á®ãÂ∫èÂ∞±‰ºöÊîæÂú® Load commands ÊÆµÈáåÈù¢‰∫Ü„ÄÇ ÂΩìÁÑ∂Â¶ÇÊûúÊòØÊàë‰ª¨Ëá™Â∑±ÁöÑÁ®ãÂ∫èÊàë‰ª¨ÊòØÁü•ÈÅìË¶ÅÊõøÊç¢Âì™‰∫õÊñπÊ≥ïÁöÑÔºåÊó¢ÁÑ∂ÊòØÈÄÜÂêëËÇØÂÆöÊòØÂà´‰∫∫ÁöÑÁ®ãÂ∫è‰∫ÜÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅÂéªÂÖàÂàÜÊûê‰∏ãÊàë‰ª¨ÊÉ≥ÊõøÊç¢ÊñπÊ≥ïÊòØÂì™‰∏™ÔºåÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÂàÜÊûêÂèØ‰ª•Áî®Â∏∏Áî®ÈÇ£‰∫õÊäìÂåÖÂ∑•ÂÖ∑ÔºåÊØîÂ¶Ç CharlesÔºåWireShark Á≠âÔºåÈùôÊÄÅÁöÑÂèØ‰ª•ÈÄöËøáÁ†∏Â£≥ÔºåÂèçÊ±áÁºñÔºåclassdump Â§¥Êñá‰ª∂Êù•ÂàÜÊûê app ÁöÑÊû∂ÊûÑÔºåÂØπÂ∫îÁöÑÂ∏∏Áî®Â∑•ÂÖ∑dumpdecryptedÔºåhopper disassembler Âíå class_dump„ÄÇËøêË°åÊó∂ÁöÑÂàÜÊûêÂèØÁî®Â∑•ÂÖ∑ÊúâËøêË°åÊó∂ÊéßÂà∂Âè∞cycriptÔºåËøúÁ®ãÊñ≠ÁÇπË∞ÉËØïlldb+debugserverÔºålogify„ÄÇ ËøôÈáåÊúâ‰∏™ÂÆû‰æãÔºåËÆ≤Ëß£Â¶Ç‰ΩïÈÄöËøáÈÄÜÂêëÂÆûÁé∞ÂæÆ‰ø°Êä¢Á∫¢ÂåÖÁöÑÊèí‰ª∂Ôºö „ÄêDev Club ÂàÜ‰∫´Á¨¨‰∏âÊúü„ÄëiOS ÈªëÂÆ¢ÊäÄÊúØÂ§ßÊè≠Áßò - DEV CLUB ÂÖ•Èó®ÊñáÁ´†ÂèØ‰ª•ÁúãÁúãËøôÁØáÔºö MyArticles/iOSÂÜ∞‰∏éÁÅ´‰πãÊ≠å at master ¬∑ zhengmin1989/MyArticles ¬∑ GitHub Áé©Âá∫Êñ∞Ëä±Ê†∑Ôºö ÈªëÁßëÊäÄÔºöÊääÁ¨¨‰∏âÊñπ iOS Â∫îÁî®ËΩ¨ÊàêÂä®ÊÄÅÂ∫ì - Jun‚Äôs BlogÔºå‰ΩúËÄÖÂè¶‰∏ÄÁØáÊñáÁ´†Ôºö iOSÁ¨¶Âè∑Ë°®ÊÅ¢Â§ç&amp;ÈÄÜÂêëÊîØ‰ªòÂÆù - Jun‚Äôs Blog dyldÂä®ÊÄÅÈìæÊé•ÁîüÊàêÂèØÊâßË°åÊñá‰ª∂ÂêéÂ∞±ÊòØÂú®ÂêØÂä®Êó∂ËøõË°åÂä®ÊÄÅÈìæÊé•‰∫ÜÔºåËøõË°åÁ¨¶Âè∑ÂíåÂú∞ÂùÄÁöÑÁªëÂÆö„ÄÇÈ¶ñÂÖà‰ºöÂä†ËΩΩÊâÄ‰æùËµñÁöÑ dylibsÔºå‰øÆÊ≠£Âú∞ÂùÄÂÅèÁßªÔºåÂõ†‰∏∫ iOS ‰ºöÁî® ASLR Êù•ÂÅöÂú∞ÂùÄÂÅèÁßªÈÅøÂÖçÊîªÂáªÔºåÁ°ÆÂÆö Non-Lazy Pointer Âú∞ÂùÄËøõË°åÁ¨¶Âè∑Âú∞ÂùÄÁªëÂÆöÔºåÂä†ËΩΩÊâÄÊúâÁ±ªÔºåÊúÄÂêéÊâßË°å load ÊñπÊ≥ïÂíå clang attribute ÁöÑ constructor ‰øÆÈ•∞ÂáΩÊï∞„ÄÇ Áî®ÂÖàÂâç Mach-O Á´†ËäÇÁöÑ‰æãÂ≠êÁªßÁª≠ÂàÜÊûêÔºåÊØè‰∏™ÂáΩÊï∞ÔºåÂÖ®Â±ÄÂèòÈáèÂíåÁ±ªÈÉΩÊòØÈÄöËøáÁ¨¶Âè∑ÁöÑÂΩ¢ÂºèÊù•ÂÆö‰πâÂíå‰ΩøÁî®ÁöÑÔºåÂΩìÊääÁõÆÊ†áÊñá‰ª∂ÈìæÊé•Êàê‰∏Ä‰∏™ÊâßË°åÊñá‰ª∂Êó∂ÔºåÈìæÊé•Âô®Âú®ÁõÆÊ†áÊñá‰ª∂ÂíåÂä®ÊÄÅÂ∫ì‰πãÈó¥ÂØπÁ¨¶Âè∑ÂÅöËß£ÊûêÂ§ÑÁêÜ„ÄÇ Á¨¶Âè∑Ë°®‰ºöËßÑÂÆöÂÆÉ‰ª¨ÁöÑÁ¨¶Âè∑Ôºå‰ΩøÁî® nm Â∑•ÂÖ∑ÁúãÁúã 1xcrun nm -nm SayHi.o 12345 (undefined) external _OBJC_CLASS_$_Foo (undefined) external _objc_autoreleasePoolPop (undefined) external _objc_autoreleasePoolPush (undefined) external _objc_msgSend0000000000000000 (__TEXT,__text) external _main OBJC_CLASS$_Foo Ë°®Á§∫ Foo ÁöÑ OC Á¨¶Âè∑„ÄÇ (undefined) external Ë°®Á§∫Êú™ÂÆûÁé∞ÈùûÁßÅÊúâÔºåÂ¶ÇÊûúÊòØÁßÅÊúâÂ∞±ÊòØ non-external„ÄÇ external _main Ë°®Á§∫ main() ÂáΩÊï∞ÔºåÂ§ÑÁêÜ 0 Âú∞ÂùÄÔºåÂ∞ÜË¶ÅÂà∞ TEXT,text section ÂÜçÁúãÁúã Foo 1xcrun nm -nm Foo.o 1234567891011 (undefined) external _NSLog (undefined) external _OBJC_CLASS_$_NSObject (undefined) external _OBJC_METACLASS_$_NSObject (undefined) external ___CFConstantStringClassReference (undefined) external __objc_empty_cache0000000000000000 (__TEXT,__text) non-external -[Foo say]0000000000000060 (__DATA,__objc_const) non-external l_OBJC_METACLASS_RO_$_Foo00000000000000a8 (__DATA,__objc_const) non-external l_OBJC_$_INSTANCE_METHODS_Foo00000000000000c8 (__DATA,__objc_const) non-external l_OBJC_CLASS_RO_$_Foo0000000000000110 (__DATA,__objc_data) external _OBJC_METACLASS_$_Foo0000000000000138 (__DATA,__objc_data) external _OBJC_CLASS_$_Foo Âõ†‰∏∫ undefined Á¨¶Âè∑Ë°®Á§∫ËØ•Êñá‰ª∂Á±ªÊú™ÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•Âú®ÁõÆÊ†áÊñá‰ª∂Âíå Fundation framework Âä®ÊÄÅÂ∫ìÂÅöÈìæÊé•Â§ÑÁêÜÊó∂ÔºåÈìæÊé•Âô®‰ºöÂ∞ùËØïËß£ÊûêÊâÄÊúâÁöÑ undefined Á¨¶Âè∑„ÄÇ ÈìæÊé•Âô®ÈÄöËøáÂä®ÊÄÅÂ∫ìËß£ÊûêÊàêÁ¨¶Âè∑‰ºöËÆ∞ÂΩïÊòØÈÄöËøáÂì™‰∏™Âä®ÊÄÅÂ∫ìËß£ÊûêÁöÑÔºåË∑ØÂæÑ‰πü‰ºö‰∏ÄËµ∑ËÆ∞ÂΩï„ÄÇÂØπÊØî‰∏ã a.out Á¨¶Âè∑Ë°®ÁúãÁúãÊòØÊÄé‰πàËß£ÊûêÁ¨¶Âè∑ÁöÑ„ÄÇ 1xcrun nm -nm a.out 1234567891011121314 (undefined) external _NSLog (from Foundation) (undefined) external _OBJC_CLASS_$_NSObject (from CoreFoundation) (undefined) external _OBJC_METACLASS_$_NSObject (from CoreFoundation) (undefined) external ___CFConstantStringClassReference (from CoreFoundation) (undefined) external __objc_empty_cache (from libobjc) (undefined) external _objc_autoreleasePoolPop (from libobjc) (undefined) external _objc_autoreleasePoolPush (from libobjc) (undefined) external _objc_msgSend (from libobjc) (undefined) external dyld_stub_binder (from libSystem)0000000100000000 (__TEXT,__text) [referenced dynamically] external __mh_execute_header0000000100000e90 (__TEXT,__text) external _main0000000100000f10 (__TEXT,__text) non-external -[Foo say]0000000100001130 (__DATA,__objc_data) external _OBJC_METACLASS_$_Foo0000000100001158 (__DATA,__objc_data) external _OBJC_CLASS_$_Foo ÁúãÁúãÂì™‰∫õ undefined ÁöÑÁ¨¶Âè∑ÔºåÊúâ‰∫ÜÊõ¥Â§ö‰ø°ÊÅØÔºåÂèØ‰ª•Áü•ÈÅìÂú®Âì™‰∏™Âä®ÊÄÅÂ∫ìËÉΩÂ§üÊâæÂà∞„ÄÇ ÈÄöËøá otool ÂèØ‰ª•ÊâæÂà∞ÊâÄÈúÄÂ∫ìÂú®Âì™ 1xcrun otool -L a.out 12345a.out: /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 1349.25.0) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1238.0.0) /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1348.28.0) /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0) libSystem ÈáåÊúâÂæàÂ§öÊàë‰ª¨ÁÜüÊÇâÁöÑlib libdispatchÔºöGCD libsystem_cÔºöCËØ≠Ë®ÄÂ∫ì libsystem_blocksÔºöBlock libcommonCryptoÔºöÂä†ÂØÜÔºåÊØîÂ¶Çmd5 dylib ËøôÁßçÊ†ºÂºèÁöÑË°®Á§∫ÊòØÂä®ÊÄÅÈìæÊé•ÁöÑÔºåÁºñËØëÁöÑÊó∂ÂÄô‰∏ç‰ºöË¢´ÁºñËØëÂà∞ÊâßË°åÊñá‰ª∂‰∏≠ÔºåÂú®Á®ãÂ∫èÊâßË°åÁöÑÊó∂ÂÄôÊâç linkÔºåËøôÊ†∑Â∞±‰∏çÁî®ÁÆóÂà∞ÂåÖÁöÑÂ§ßÂ∞èÈáåÔºåËÄå‰∏î‰πüËÉΩÂ§ü‰∏çÊõ¥Êñ∞ÊâßË°åÁ®ãÂ∫èÂ∞±ËÉΩÂ§üÊõ¥Êñ∞Â∫ì„ÄÇ ÊâìÂç∞‰ªÄ‰πàÂ∫ìË¢´Âä†ËΩΩ‰∫Ü 1(export DYLD_PRINT_LIBRARIES=; ./a.out ) 12345dyld: loaded: /Users/didi/Downloads/./a.outdyld: loaded: /System/Library/Frameworks/Foundation.framework/Versions/C/Foundationdyld: loaded: /usr/lib/libSystem.B.dylibdyld: loaded: /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation‚Ä¶ Êï∞Êï∞ËøòÊå∫Â§öÁöÑÔºåÂõ†‰∏∫ Fundation Ëøò‰ºö‰æùËµñ‰∏Ä‰∫õÂÖ∂ÂÆÉÁöÑÂä®ÊÄÅÂ∫ìÔºåÂÖ∂ÂÆÉÁöÑÂ∫ìËøò‰ºöÂÜç‰æùËµñÊõ¥Â§öÁöÑÂ∫ìÔºåËøôÊ†∑Áõ∏‰∫í‰æùËµñÁöÑÁ¨¶Âè∑‰ºöÂæàÂ§öÔºåÈúÄË¶ÅÂ§ÑÁêÜÁöÑÊó∂Èó¥‰πü‰ºöÊØîËæÉÈïøÔºåËøôÈáåÁ≥ªÁªü‰∏äÁöÑÂä®ÊÄÅÈìæÊé•Âô®‰ºö‰ΩøÁî®ÂÖ±‰∫´ÁºìÂ≠òÔºåÂÖ±‰∫´ÁºìÂ≠òÂú® /var/db/dyld/„ÄÇÂΩìÂä†ËΩΩ Mach-O Êñá‰ª∂Êó∂Âä®ÊÄÅÈìæÊé•Âô®‰ºöÂÖàÊ£ÄÊü•ÂÖ±‰∫´ÂÜÖÂ≠òÊòØÂê¶Êúâ„ÄÇÊØè‰∏™ËøõÁ®ãÈÉΩ‰ºöÂú®Ëá™Â∑±Âú∞ÂùÄÁ©∫Èó¥Êò†Â∞ÑËøô‰∫õÂÖ±‰∫´ÁºìÂ≠òÔºåËøôÊ†∑ÂèØ‰ª•‰ºòÂåñÂêØÂä®ÈÄüÂ∫¶„ÄÇ Âä®ÊÄÅÈìæÊé•Âô®ÁöÑ‰ΩúÁî®È°∫Â∫èÊòØÊÄé‰πàÊ†∑ÁöÑÂë¢ÔºåÂèØ‰ª•ÂÖàÁúãÁúã Mike Ash ÂÜôÁöÑËøôÁØáÂÖ≥‰∫é dyld ÁöÑÂçöÂÆ¢Ôºö Dynamic Linking On OS X dyld ÂÅö‰∫Ü‰∫õ‰ªÄ‰πà‰∫ã kernel ÂÅöÂêØÂä®Á®ãÂ∫èÂàùÂßãÂáÜÂ§áÔºåÂºÄÂßãÁî±dyldË¥üË¥£„ÄÇ Âü∫‰∫éÈùûÂ∏∏ÁÆÄÂçïÁöÑÂéüÂßãÊ†à‰∏∫ kernel ËÆæÁΩÆËøõÁ®ãÊù•ÂêØÂä®Ëá™Ë∫´„ÄÇ ‰ΩøÁî®ÂÖ±‰∫´ÁºìÂ≠òÊù•Â§ÑÁêÜÈÄíÂΩí‰æùËµñÂ∏¶Êù•ÁöÑÊÄßËÉΩÈóÆÈ¢òÔºåImageLoader ‰ºöËØªÂèñ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÊàë‰ª¨ÁöÑÁ±ªÔºåÊñπÊ≥ïÁ≠âÂêÑÁßçÁ¨¶Âè∑„ÄÇ Á´ãÂç≥ÁªëÂÆö non-lazy ÁöÑÁ¨¶Âè∑Âπ∂ËÆæÁΩÆÁî®‰∫é lazy bind ÁöÑÂøÖË¶ÅË°®ÔºåÂ∞ÜËøô‰∫õÂ∫ì link Âà∞ÊâßË°åÊñá‰ª∂Èáå„ÄÇ ‰∏∫ÂèØÊâßË°åÊñá‰ª∂ËøêË°åÈùôÊÄÅÂàùÂßãÂåñ„ÄÇ ËÆæÁΩÆÂèÇÊï∞Âà∞ÂèØÊâßË°åÊñá‰ª∂ÁöÑ main ÂáΩÊï∞Âπ∂Ë∞ÉÁî®ÂÆÉ„ÄÇ Âú®ÊâßË°åÊúüÈó¥ÔºåÈÄöËøáÁªëÂÆöÁ¨¶Âè∑Â§ÑÁêÜÂØπ lazily-bound Á¨¶Âè∑Â≠òÊ†πÁöÑË∞ÉÁî®Êèê‰æõ runtime Âä®ÊÄÅÂä†ËΩΩÊúçÂä°ÔºàÈÄöËøá dl*() Ëøô‰∏™ API ÔºâÔºåÂπ∂‰∏∫gdbÂíåÂÖ∂ÂÆÉË∞ÉËØïÂô®Êèê‰æõÈí©Â≠ê‰ª•Ëé∑ÂæóÂÖ≥ÈîÆ‰ø°ÊÅØ„ÄÇruntime ‰ºöË∞ÉÁî® map_images ÂÅöËß£ÊûêÂíåÂ§ÑÁêÜÔºåload_images Êù•Ë∞ÉÁî® call_load_methods ÊñπÊ≥ïÈÅçÂéÜÊâÄÊúâÂä†ËΩΩ‰∫ÜÁöÑ ClassÔºåÊåâÁÖßÁªßÊâøÂ±ÇÁ∫ß‰æùÊ¨°Ë∞ÉÁî® +load ÊñπÊ≥ï„ÄÇ Âú® mian ÂáΩÊï∞ËøîÂõûÂêéËøêË°å static terminator„ÄÇ Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºå‰∏ÄÊó¶ main ÂáΩÊï∞ËøîÂõûÔºåÂ∞±ÈúÄË¶ÅË∞ÉÁî® libSystem ÁöÑ _exit„ÄÇ Êü•ÁúãËøêË°åÊó∂ÁöÑË∞ÉÁî® map_images Âíå Ë∞ÉÁî® +load ÊñπÊ≥ïÁöÑÁõ∏ÂÖ≥ runtime Â§ÑÁêÜÂèØ‰ª•ÈÄöËøá RetVal ÁöÑÂèØdebug ÁöÑ objc/runtime RetVal/objc-runtime: objc runtime 706 Êù•ËøõË°åÊñ≠ÁÇπÊü•ÁúãË∞ÉÁî®ÁöÑ runtime ÊñπÊ≥ïÂÖ∑‰ΩìÂÆûÁé∞„ÄÇÂú® debug-objc ‰∏ãÂàõÂª∫‰∏Ä‰∏™Á±ªÔºåÂú® +load ÊñπÊ≥ïÈáåÊñ≠ÁÇπÊü•ÁúãËµ∞Âà∞ËøôÈáåË∞ÉÁî®ÁöÑÂ†ÜÊ†àÂ¶Ç‰∏ãÔºö 1234560 +[someclass load]1 call_class_loads()2 ::call_load_methods3 ::load_images(const char *path __unused, const struct mach_header *mh)4 dyld::notifySingle(dyld_image_states, ImageLoader const*, ImageLoader::InitializerTimingList*)11 _dyld_start Âú® load_images ÊñπÊ≥ïÈáåÊñ≠ÁÇπ p path ÂèØ‰ª•ÊâìÂç∞Âá∫ÊâÄÊúâÂä†ËΩΩÁöÑÂä®ÊÄÅÈìæÊé•Â∫ìÔºåËøô‰∏™ÊñπÊ≥ïÁöÑ hasLoadMethods Áî®‰∫éÂø´ÈÄüÂà§Êñ≠ÊòØÂê¶Êúâ +load ÊñπÊ≥ï„ÄÇ prepare_load_methods Ëøô‰∏™ÊñπÊ≥ï‰ºöËé∑ÂèñÊâÄÊúâÁ±ªÁöÑÂàóË°®ÁÑ∂ÂêéÊî∂ÈõÜÂÖ∂‰∏≠ÁöÑ +load ÊñπÊ≥ïÔºåÂú®‰ª£Á†ÅÈáåÂèØ‰ª•ÂèëÁé∞ Class ÁöÑ +load ÊòØÂÖàÊâßË°åÁöÑÔºåÁÑ∂ÂêéÊâßË°å Category ÁöÑ„ÄÇ‰∏∫‰ªÄ‰πàËøôÊ†∑ÂÅöÔºåÂéüÂõ†ÂèØ‰ª•ÈÄöËøá prepare_load_methods Ëøô‰∏™ÊñπÊ≥ïÁúãÂá∫ÔºåÂú®ÈÅçÂéÜ Class ÁöÑ +load ÊñπÊ≥ïÊó∂‰ºöÊâßË°å schedule_class_load Ëøô‰∏™ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ï‰ºöÈÄíÂΩíÂà∞Ê†πËäÇÁÇπÊù•Êª°Ë∂≥ Class Êî∂ÈõÜÂÆåÊï¥ÂÖ≥Á≥ªÊ†ëÁöÑÈúÄÊ±Ç„ÄÇ ÊúÄÂêé call_load_methods ‰ºöÂàõÂª∫‰∏Ä‰∏™ autoreleasePool ‰ΩøÁî®ÂáΩÊï∞ÊåáÈíàÊù•Âä®ÊÄÅË∞ÉÁî®Á±ªÂíå Category ÁöÑ +load ÊñπÊ≥ï„ÄÇ Â¶ÇÊûúÊÉ≥‰∫ÜËß£ Cocoa ÁöÑ Fundation Â∫ìÂèØ‰ª•ÈÄöËøá GNUStep Ê∫êÁ†ÅÊù•Â≠¶‰π†„ÄÇÊØîÂ¶Ç NSNotificationCenter ÂèëÈÄÅÈÄöÁü•ÊòØÊåâ‰ªÄ‰πàÈ°∫Â∫èÂèëÈÄÅÁöÑÂèØ‰ª•Êü•Áúã NSNotificationCenter.m ÈáåÁöÑ addObserver ÊñπÊ≥ïÂíå postNotification ÊñπÊ≥ïÔºåÁúãÁúãËßÇÂØüËÄÖÊòØÊÄé‰πàÊ∑ªÂä†ÁöÑÂíåÊÄé‰πàË¢´ÈÅçÂéÜÈÄöÁü•Âà∞ÁöÑ„ÄÇ dyld ÊòØÂºÄÊ∫êÁöÑÔºö GitHub - opensource-apple/dyld ËøòÂèØ‰ª•ÁúãÁúãËãπÊûúÁöÑ WWDC ËßÜÈ¢ë WWDC 2016 Session 406 ÈáåËÆ≤Ëß£ÂØπÂêØÂä®ËøõË°å‰ºòÂåñ„ÄÇ ËøôÁØáÊñáÁ´†‰πü‰∏çÈîôÔºö Dynamic Linking of Imported Functions in Mach-O - CodeProject LLVM Â∑•ÂÖ∑ÈìæËé∑Âèñ LLVM12345678910111213141516#ÂÖà‰∏ãËΩΩ LLVMsvn co https://llvm.org/svn/llvm-project/llvm/trunk llvm#Âú® LLVM ÁöÑ tools ÁõÆÂΩï‰∏ã‰∏ãËΩΩ Clangcd llvm/toolssvn co https://llvm.org/svn/llvm-project/cfe/trunk clang#Âú® LLVM ÁöÑ projects ÁõÆÂΩï‰∏ã‰∏ãËΩΩ compiler-rtÔºålibcxxÔºålibcxxabicd ../projectssvn co https://llvm.org/svn/llvm-project/compiler-rt/trunk compiler-rtsvn co https://llvm.org/svn/llvm-project/libcxx/trunk libcxxsvn co https://llvm.org/svn/llvm-project/libcxxabi/trunk libcxxabi#Âú® Clang ÁöÑ tools ‰∏ãÂÆâË£Ö extra Â∑•ÂÖ∑cd ../tools/clang/toolssvn co https://llvm.org/svn/llvm-project/clang-tools-extra/trunk extra ÁºñËØë LLVM123456789brew install gccbrew install cmakemkdir buildcd buildcmake -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=ON -DLLVM_TARGETS_TO_BUILD=\"AArch64;X86\" -G \"Unix Makefiles\" ..make j8#ÂÆâË£Ömake install#Â¶ÇÊûúÊâæ‰∏çÂà∞Ê†áÂáÜÂ∫ìÔºåXcode ÈúÄË¶ÅÂÆâË£Ö xcode-select --install 1234#Â¶ÇÊûúÂ∏åÊúõÊòØ xcodeproject ÊñπÂºè build ÂèØ‰ª•‰ΩøÁî® -GXcodemkdir xcodeBuildcd xcodeBuildcmake -GXcode /path/to/llvm/source Âú® bin ‰∏ãÂ≠òÊîæÁùÄÂ∑•ÂÖ∑ÈìæÔºåÊúâ‰∫ÜËøô‰∫õÂ∑•ÂÖ∑ÈìæÂ∞±ËÉΩÂ§üÂÆåÊàêÊ∫êÁ†ÅÁºñËØë‰∫Ü„ÄÇ LLVM Ê∫êÁ†ÅÂ∑•Á®ãÁõÆÂΩï‰ªãÁªç llvm/examples/ - ‰ΩøÁî® LLVM IR Âíå JIT ÁöÑ‰æãÂ≠ê„ÄÇ llvm/include/ - ÂØºÂá∫ÁöÑÂ§¥Êñá‰ª∂„ÄÇ llvm/lib/ - ‰∏ªË¶ÅÊ∫êÊñá‰ª∂ÈÉΩÂú®ËøôÈáå„ÄÇ llvm/project/ - ÂàõÂª∫Ëá™Â∑±Âü∫‰∫é LLVM ÁöÑÈ°πÁõÆÁöÑÁõÆÂΩï„ÄÇ llvm/test/ - Âü∫‰∫é LLVM ÁöÑÂõûÂΩíÊµãËØïÔºåÂÅ•ÂÖ®Ê£ÄÂØü„ÄÇ llvm/suite/ - Ê≠£Á°ÆÊÄßÔºåÊÄßËÉΩÂíåÂü∫ÂáÜÊµãËØïÂ•ó‰ª∂„ÄÇ llvm/tools/ - Âü∫‰∫é lib ÊûÑÂª∫ÁöÑÂèØ‰ª•ÊâßË°åÊñá‰ª∂ÔºåÁî®Êà∑ÈÄöËøáËøô‰∫õÁ®ãÂ∫èËøõË°å‰∫§‰∫íÔºå-help ÂèØ‰ª•Êü•ÁúãÂêÑ‰∏™Â∑•ÂÖ∑ËØ¶ÁªÜ‰ΩøÁî®„ÄÇ llvm/utils/ - LLVM Ê∫ê‰ª£Á†ÅÁöÑÂÆûÁî®Â∑•ÂÖ∑ÔºåÊØîÂ¶ÇÔºåÊü•Êâæ LLC Âíå LLI ÁîüÊàê‰ª£Á†ÅÂ∑ÆÂºÇÂ∑•ÂÖ∑Ôºå Vim Êàñ Emacs ÁöÑËØ≠Ê≥ïÈ´ò‰∫ÆÂ∑•ÂÖ∑Á≠â„ÄÇ lib ÁõÆÂΩï‰ªãÁªç llvm/lib/IR/ - Ê†∏ÂøÉÁ±ªÊØîÂ¶Ç Instruction Âíå BasicBlock„ÄÇ llvm/lib/AsmParser/ - Ê±áÁºñËØ≠Ë®ÄËß£ÊûêÂô®„ÄÇ llvm/lib/Bitcode/ - ËØªÂèñÂíåÂÜôÂÖ•Â≠óËäÇÁ†Å llvm/lib/Analysis/ - ÂêÑÁßçÂØπÁ®ãÂ∫èÁöÑÂàÜÊûêÔºåÊØîÂ¶Ç Call GraphsÔºåInduction VariablesÔºåNatural Loop Identification Á≠âÁ≠â„ÄÇ llvm/lib/Transforms/ - IR-to-IR Á®ãÂ∫èÁöÑÂèòÊç¢„ÄÇ llvm/lib/Target/ - ÂØπÂÉè X86 ËøôÊ†∑Êú∫Âô®ÁöÑÊèèËø∞„ÄÇ llvm/lib/CodeGen/ - ‰∏ªË¶ÅÊòØ‰ª£Á†ÅÁîüÊàêÔºåÊåá‰ª§ÈÄâÊã©Âô®ÔºåÊåá‰ª§Ë∞ÉÂ∫¶ÂíåÂØÑÂ≠òÂô®ÂàÜÈÖç„ÄÇ llvm/lib/ExecutionEngine/ - Âú®Ëß£ÈáäÊâßË°åÂíåJITÁºñËØëÂú∫ÊôØËÉΩÂ§üÁõ¥Êé•Âú®ËøêË°åÊó∂ÊâßË°åÂ≠óËäÇÁ†ÅÁöÑÂ∫ì„ÄÇ Â∑•ÂÖ∑ÈìæÂëΩ‰ª§‰ªãÁªçÂü∫Êú¨ÂëΩ‰ª§ llvm-as - Ê±áÁºñÂô®ÔºåÂ∞Ü .ll Ê±áÁºñÊàêÂ≠óËäÇÁ†Å„ÄÇ llvm-dis - ÂèçÊ±áÁºñÂô®ÔºåÂ∞ÜÂ≠óËäÇÁ†ÅÁºñÊàêÂèØËØªÁöÑ .ll Êñá‰ª∂„ÄÇ opt - Â≠óËäÇÁ†Å‰ºòÂåñÂô®„ÄÇ llc - ÈùôÊÄÅÁºñËØëÂô®ÔºåÂ∞ÜÂ≠óËäÇÁ†ÅÁºñËØëÊàêÊ±áÁºñ‰ª£Á†Å„ÄÇ lli - Áõ¥Êé•ÊâßË°å LLVM Â≠óËäÇÁ†Å„ÄÇ llvm-link - Â≠óËäÇÁ†ÅÈìæÊé•Âô®ÔºåÂèØ‰ª•ÊääÂ§ö‰∏™Â≠óËäÇÁ†ÅÊñá‰ª∂ÈìæÊé•Êàê‰∏Ä‰∏™„ÄÇ llvm-ar - Â≠óËäÇÁ†ÅÊñá‰ª∂ÊâìÂåÖÂô®„ÄÇ llvm-lib - LLVM lib.exe ÂÖºÂÆπÂ∫ìÂ∑•ÂÖ∑„ÄÇ llvm-nm - ÂàóÂá∫Â≠óËäÇÁ†ÅÂíåÁ¨¶Âè∑Ë°®„ÄÇ llvm-config - ÊâìÂç∞ LLVM ÁºñËØëÈÄâÈ°π„ÄÇ llvm-diff - ÂØπ‰∏§‰∏™ËøõË°åÊØîËæÉ„ÄÇ llvm-cov - ËæìÂá∫ coverage infomation„ÄÇ llvm-profdata - Profile Êï∞ÊçÆÂ∑•ÂÖ∑„ÄÇ llvm-stress - ÁîüÊàêÈöèÊú∫ .ll Êñá‰ª∂„ÄÇ llvm-symbolizer - Âú∞ÂùÄÂØπÂ∫îÊ∫êÁ†Å‰ΩçÁΩÆÔºåÂÆö‰ΩçÈîôËØØ„ÄÇ llvm-dwarfdump - ÊâìÂç∞ DWARF„ÄÇ Ë∞ÉËØïÂ∑•ÂÖ∑ bugpoint - Ëá™Âä®ÊµãËØïÊ°à‰æãÂ∑•ÂÖ∑ llvm-extract - ‰ªé‰∏Ä‰∏™ LLVM ÁöÑÊ®°ÂùóÈáåÊèêÂèñ‰∏Ä‰∏™ÂáΩÊï∞„ÄÇ llvm-bcanalyzer - LLVM Â≠óËäÇÁ†ÅÂàÜÊûêÂô®„ÄÇ ÂºÄÂèëÂ∑•ÂÖ∑ FileCheck - ÁÅµÊ¥ªÁöÑÊ®°ÂºèÂåπÈÖçÊñá‰ª∂È™åËØÅÂô®„ÄÇ tblgen - C++ ‰ª£Á†ÅÁîüÊàêÂô®„ÄÇ lit - LLVM ÈõÜÊàêÊµãËØïÂô®„ÄÇ llvm-build - LLVM ÊûÑÂª∫Â∑•Á®ãÊó∂ÈúÄË¶ÅÁöÑÂ∑•ÂÖ∑„ÄÇ llvm-readobj - LLVM Object ÁªìÊûÑÊü•ÁúãÂô®„ÄÇ Swift ÁºñËØëÂÆòÁΩëÔºö GitHub - apple/swift: The Swift Programming Languageswift Áé∞Âú®ÊòØÂºÄÊ∫êÁöÑÔºåÂ¶ÇÊûúÂ∏åÊúõËÉΩÂ§ü‰∏∫ÂÆÉÂÅöË¥°ÁåÆÂèØ‰ª•ÂÖà‰∫ÜËß£‰∏ãÂÆòÊñπÁöÑ‰ªãÁªçËØ¥ÊòéÔºö Swift.org - Contributing 1234567891011121314151617181920212223242526#È¶ñÂÖàÂíå LLVM ‰∏ÄÊ†∑ÂÖàÂÆâË£Ö cmake Âíå ninja ÔºåÂÜçÂàõÂª∫ÁõÆÂΩïbrew install cmake ninjamkdir swiftsourcecd swiftsource#clone ‰∏ã swift Ê∫êÁ†Ågit clone https://github.com/apple/swift.git#checkout Áõ∏ÂÖ≥ÁºñËØëÁöÑ‰æùËµñÔºåÊØîÂ¶Ç llvmÔºåclangÔºållbuildÔºålldbÔºåninjaÔºåcmark Á≠âÁ≠âÔºåÁõÆÂâçÂ∑Æ‰∏çÂ§öÊúâ13‰∏™./swift/utils/update-checkout ‚Äîclone#Êü•ÁúãÊñá‰ª∂Â§πdu -h -d 1#build swiftÔºåËøôÈáåÁöÑ -x ÂèÇÊï∞‰ºöÁîüÊàê xcode ÁöÑÂ∑•Á®ãÊñá‰ª∂Êñπ‰æøÂú®xcodeÈáåÈòÖËØª„ÄÇ-R ‰ºö‰ΩøÁî® release Ê®°ÂºèÔºåÊØî debug Âø´„ÄÇ./swift/utils/build-script -x -R#Êõ¥Êñ∞./swift/utils/update-checkout./swift/utils/build-script -x -R#ÂàáÂà∞ÊåáÂÆötagÂíåÂàÜÊîØ#tag./swift/utils/update-checkout ‚Äîtag swift-3.0-RELEASE#ÁâπÂÆöÂàÜÊîØ./swift/utils/update-checkout ‚Äîscheme swift-3.0-branch swift ÁºñËØëÊòØÁî±Â§ö‰∏™‰ª£Á†Å‰ªìÂ∫ìÁªÑÂêàËÄåÊàêÁöÑÔºåÂêÑ‰∏™‰ª£Á†Å‰ªìÂ∫ìÁöÑ‰ªãÁªçËØ¥ÊòéÂèØ‰ª•Êü•ÁúãÂÆòÊñπËØ¥ÊòéÔºö Swift.org - Source Code ÂÖ∂ÂÆÉÁºñËØëÂ∑•ÂÖ∑jsÂÜôÁöÑC++Ëß£ÈáäÂô®JSCPPÈÄÇÂêàÂ≠¶ÁîüÂ≠¶‰π†Êó∂ËÉΩÂ§üÊñπ‰æøÁöÑÂú®ÊµèËßàÂô®ÈáåÁõ¥Êé•Áºñc++Á®ãÂ∫è„ÄÇÈ°πÁõÆÂú∞ÂùÄÔºöGitHub - felixhao28/JSCPP: A simple C++ interpreter written in JavaScript C-SMILE ‰∏ÄÂ•óÊîØÊåÅC/C++ JS JAVAÂõõÁßçËØ≠Ë®ÄÁöÑscripting languageÂú® web ‰∏≠Êúâ‰∏™ WebAssembly ÊòØ‰∏™Ê†áÂáÜÔºåÂèØ‰ª•‰ΩøÂæó web ËøêË°å C/C++ Êàê‰∏∫ÂèØËÉΩ„ÄÇÂΩìÁÑ∂ËøòÊúâÂÖ∂ÂÆÉÁöÑÊØîÂ¶ÇÔºöhttps://c-smile.sourceforge.net/ ËµÑÊñôÁΩëÂùÄ https://llvm.org https://clang.llvm.org/ https://www.aosabook.org/en/llvm.html GitHub - loarabia/Clang-tutorial: A collection of code samples showing usage of clang and llvm as a library Using an external Xcode Clang Static Analyzer binary, with additional checks - Stack Overflow LLVM Developers‚Äô Metting ming1016","link":"/ÁºñÁ®ã/Ô£ø/clang-llvm/"},{"title":"Èù†Ë∞±ÁöÑiOS","text":"ËØ¥ÊòéÔºöÈù¢ËØïÈ¢òÊù•Ê∫êÊòØÂæÆÂçö@ÊàëÂ∞±Âè´SunnyÊÄé‰πà‰∫ÜÁöÑËøôÁØáÂçöÊñáÔºö„ÄäÊãõËÅò‰∏Ä‰∏™Èù†Ë∞±ÁöÑ iOS„ÄãÔºåÂÖ∂‰∏≠ÂÖ±55È¢òÔºåÈô§Á¨¨‰∏ÄÈ¢ò‰∏∫Á∫†ÈîôÈ¢òÂ§ñÔºåÂÖ∂‰ªñ54ÈÅìÂùá‰∏∫ÁÆÄÁ≠îÈ¢ò„ÄÇ Âá∫È¢òËÄÖÁÆÄ‰ªãÔºö Â≠ôÊ∫êÔºàsunnyxxÔºâÔºåÁõÆÂâçÂ∞±ËÅå‰∫éÁôæÂ∫¶ÔºåË¥üË¥£ÁôæÂ∫¶Áü•ÈÅì iOS ÂÆ¢Êà∑Á´ØÁöÑÂºÄÂèëÂ∑•‰ΩúÔºåÂØπÊäÄÊúØÂñúÊ¨¢Âà®Ê†πÈóÆÂ∫ïÂíåÊÄªÁªìÊúÄ‰Ω≥ÂÆûË∑µÔºåÁÉ≠Áà±ÂàÜ‰∫´ÂíåÂºÄÊ∫êÔºåÁª¥Êä§‰∏Ä‰∏™Âè´ forkingdog ÁöÑÂºÄÊ∫êÂ∞èÁªÑ„ÄÇ Á≠îÊ°à‰∏∫ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÊï¥ÁêÜÔºåÊú™ÁªèÂá∫È¢òËÄÖÊ†°ÂØπÔºåÂ¶ÇÊúâÁ∫∞ÊºèÔºåËØ∑ÂêëÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÊåáÊ≠£„ÄÇ „ÄäÊãõËÅò‰∏Ä‰∏™Èù†Ë∞±ÁöÑiOS„ÄãÈù¢ËØïÈ¢òÂèÇËÄÉÁ≠îÊ°à È£éÊ†ºÁ∫†ÈîôÈ¢ò ‰ºòÂåñÈÉ®ÂàÜ Á°¨‰º§ÈÉ®ÂàÜ ‰ªÄ‰πàÊÉÖÂÜµ‰ΩøÁî® weak ÂÖ≥ÈîÆÂ≠óÔºåÁõ∏ÊØî assign Êúâ‰ªÄ‰πà‰∏çÂêåÔºü ÊÄé‰πàÁî® copy ÂÖ≥ÈîÆÂ≠óÔºü Ëøô‰∏™ÂÜôÊ≥ï‰ºöÂá∫‰ªÄ‰πàÈóÆÈ¢òÔºö @property (copy) NSMutableArray *array; Â¶Ç‰ΩïËÆ©Ëá™Â∑±ÁöÑÁ±ªÁî® copy ‰øÆÈ•∞Á¨¶ÔºüÂ¶Ç‰ΩïÈáçÂÜôÂ∏¶ copy ÂÖ≥ÈîÆÂ≠óÁöÑ setterÔºü @property ÁöÑÊú¨Ë¥®ÊòØ‰ªÄ‰πàÔºüivar„ÄÅgetter„ÄÅsetter ÊòØÂ¶Ç‰ΩïÁîüÊàêÂπ∂Ê∑ªÂä†Âà∞Ëøô‰∏™Á±ª‰∏≠ÁöÑ @protocol Âíå category ‰∏≠Â¶Ç‰Ωï‰ΩøÁî® @property runtime Â¶Ç‰ΩïÂÆûÁé∞ weak Â±ûÊÄß @property‰∏≠ÊúâÂì™‰∫õÂ±ûÊÄßÂÖ≥ÈîÆÂ≠óÔºü/ @property ÂêéÈù¢ÂèØ‰ª•ÊúâÂì™‰∫õ‰øÆÈ•∞Á¨¶Ôºü weakÂ±ûÊÄßÈúÄË¶ÅÂú®dealloc‰∏≠ÁΩÆnil‰πàÔºü @synthesizeÂíå@dynamicÂàÜÂà´Êúâ‰ªÄ‰πà‰ΩúÁî®Ôºü ARC‰∏ãÔºå‰∏çÊòæÂºèÊåáÂÆö‰ªª‰ΩïÂ±ûÊÄßÂÖ≥ÈîÆÂ≠óÊó∂ÔºåÈªòËÆ§ÁöÑÂÖ≥ÈîÆÂ≠óÈÉΩÊúâÂì™‰∫õÔºü Áî®@propertyÂ£∞ÊòéÁöÑNSStringÔºàÊàñNSArrayÔºåNSDictionaryÔºâÁªèÂ∏∏‰ΩøÁî®copyÂÖ≥ÈîÆÂ≠óÔºå‰∏∫‰ªÄ‰πàÔºüÂ¶ÇÊûúÊîπÁî®strongÂÖ≥ÈîÆÂ≠óÔºåÂèØËÉΩÈÄ†Êàê‰ªÄ‰πàÈóÆÈ¢òÔºü ÂØπÈùûÈõÜÂêàÁ±ªÂØπË±°ÁöÑcopyÊìç‰Ωú ÈõÜÂêàÁ±ªÂØπË±°ÁöÑcopy‰∏émutableCopy @synthesizeÂêàÊàêÂÆû‰æãÂèòÈáèÁöÑËßÑÂàôÊòØ‰ªÄ‰πàÔºüÂÅáÂ¶ÇpropertyÂêç‰∏∫fooÔºåÂ≠òÂú®‰∏Ä‰∏™Âêç‰∏∫_fooÁöÑÂÆû‰æãÂèòÈáèÔºåÈÇ£‰πàËøò‰ºöËá™Âä®ÂêàÊàêÊñ∞ÂèòÈáè‰πàÔºü Âú®Êúâ‰∫ÜËá™Âä®ÂêàÊàêÂ±ûÊÄßÂÆû‰æãÂèòÈáè‰πãÂêéÔºå@synthesizeËøòÊúâÂì™‰∫õ‰ΩøÁî®Âú∫ÊôØÔºü objc‰∏≠Âêë‰∏Ä‰∏™nilÂØπË±°ÂèëÈÄÅÊ∂àÊÅØÂ∞Ü‰ºöÂèëÁîü‰ªÄ‰πàÔºü objc‰∏≠Âêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅÊ∂àÊÅØ[obj foo]Âíåobjc_msgSend()ÂáΩÊï∞‰πãÈó¥Êúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºü ‰ªÄ‰πàÊó∂ÂÄô‰ºöÊä•unrecognized selectorÁöÑÂºÇÂ∏∏Ôºü ‰∏Ä‰∏™objcÂØπË±°Â¶Ç‰ΩïËøõË°åÂÜÖÂ≠òÂ∏ÉÂ±ÄÔºüÔºàËÄÉËôëÊúâÁà∂Á±ªÁöÑÊÉÖÂÜµÔºâ ‰∏Ä‰∏™objcÂØπË±°ÁöÑisaÁöÑÊåáÈíàÊåáÂêë‰ªÄ‰πàÔºüÊúâ‰ªÄ‰πà‰ΩúÁî®Ôºü ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅËæìÂá∫‰ªÄ‰πàÔºü 211234567891011@implementation Son : Father- (id)init{ self = [super init]; if (self) { NSLog(@&quot;%@&quot;, NSStringFromClass([self class])); NSLog(@&quot;%@&quot;, NSStringFromClass([super class])); } return self;}@end runtimeÂ¶Ç‰ΩïÈÄöËøáselectorÊâæÂà∞ÂØπÂ∫îÁöÑIMPÂú∞ÂùÄÔºüÔºàÂàÜÂà´ËÄÉËôëÁ±ªÊñπÊ≥ïÂíåÂÆû‰æãÊñπÊ≥ïÔºâ ‰ΩøÁî®runtime AssociateÊñπÊ≥ïÂÖ≥ËÅîÁöÑÂØπË±°ÔºåÈúÄË¶ÅÂú®‰∏ªÂØπË±°deallocÁöÑÊó∂ÂÄôÈáäÊîæ‰πàÔºü objc‰∏≠ÁöÑÁ±ªÊñπÊ≥ïÂíåÂÆû‰æãÊñπÊ≥ïÊúâ‰ªÄ‰πàÊú¨Ë¥®Âå∫Âà´ÂíåËÅîÁ≥ªÔºü _objc_msgForward ÂáΩÊï∞ÊòØÂÅö‰ªÄ‰πàÁöÑÔºåÁõ¥Êé•Ë∞ÉÁî®ÂÆÉÂ∞Ü‰ºöÂèëÁîü‰ªÄ‰πàÔºü runtimeÂ¶Ç‰ΩïÂÆûÁé∞weakÂèòÈáèÁöÑËá™Âä®ÁΩÆnilÔºü ËÉΩÂê¶ÂêëÁºñËØëÂêéÂæóÂà∞ÁöÑÁ±ª‰∏≠Â¢ûÂä†ÂÆû‰æãÂèòÈáèÔºüËÉΩÂê¶ÂêëËøêË°åÊó∂ÂàõÂª∫ÁöÑÁ±ª‰∏≠Ê∑ªÂä†ÂÆû‰æãÂèòÈáèÔºü‰∏∫‰ªÄ‰πàÔºü runloopÂíåÁ∫øÁ®ãÊúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºü runloopÁöÑmode‰ΩúÁî®ÊòØ‰ªÄ‰πàÔºü ‰ª•+ scheduledTimerWithTimeInterval‚Ä¶ÁöÑÊñπÂºèËß¶ÂèëÁöÑtimer ÁåúÊÉ≥runloopÂÜÖÈÉ®ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü objc‰ΩøÁî®‰ªÄ‰πàÊú∫Âà∂ÁÆ°ÁêÜÂØπË±°ÂÜÖÂ≠òÔºü ARCÈÄöËøá‰ªÄ‰πàÊñπÂºèÂ∏ÆÂä©ÂºÄÂèëËÄÖÁÆ°ÁêÜÂÜÖÂ≠òÔºü ‰∏Ä‰∏™autorealeseÂØπË±°Âú®‰ªÄ‰πàÊó∂ÂàªÈáäÊîæÔºü BAD_ACCESSÂú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÂá∫Áé∞Ôºü ËãπÊûúÊòØÂ¶Ç‰ΩïÂÆûÁé∞autoreleasepoolÁöÑÔºü ‰ΩøÁî®blockÊó∂‰ªÄ‰πàÊÉÖÂÜµ‰ºöÂèëÁîüÂºïÁî®Âæ™ÁéØÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü Âú®blockÂÜÖÂ¶Ç‰Ωï‰øÆÊîπblockÂ§ñÈÉ®ÂèòÈáèÔºü ‰ΩøÁî®Á≥ªÁªüÁöÑÊüê‰∫õblock apiÔºàÂ¶ÇUIViewÁöÑblockÁâàÊú¨ÂÜôÂä®ÁîªÊó∂ÔºâÔºåÊòØÂê¶‰πüËÄÉËôëÂºïÁî®Âæ™ÁéØÈóÆÈ¢òÔºü GCDÁöÑÈòüÂàóÔºàdispatch_queue_tÔºâÂàÜÂì™‰∏§ÁßçÁ±ªÂûãÔºü Â¶Ç‰ΩïÁî®GCDÂêåÊ≠•Ëã•Âπ≤‰∏™ÂºÇÊ≠•Ë∞ÉÁî®ÔºüÔºàÂ¶ÇÊ†πÊçÆËã•Âπ≤‰∏™urlÂºÇÊ≠•Âä†ËΩΩÂ§öÂº†ÂõæÁâáÔºåÁÑ∂ÂêéÂú®ÈÉΩ‰∏ãËΩΩÂÆåÊàêÂêéÂêàÊàê‰∏ÄÂº†Êï¥ÂõæÔºâ dispatch_barrier_asyncÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πàÔºü ËãπÊûú‰∏∫‰ªÄ‰πàË¶ÅÂ∫üÂºÉdispatch_get_current_queueÔºü ‰ª•‰∏ã‰ª£Á†ÅËøêË°åÁªìÊûúÂ¶Ç‰ΩïÔºü 44123456789- (void)viewDidLoad{ [super viewDidLoad]; NSLog(@&quot;1&quot;); dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;);} observer‰∏≠ÈúÄË¶ÅÂÆûÁé∞Âì™‰∏™ÊñπÊ≥ïÊâçËÉΩËé∑ÂæóKVOÂõûË∞ÉÔºü Â¶Ç‰ΩïÊâãÂä®Ëß¶Âèë‰∏Ä‰∏™valueÁöÑKVO Ëã•‰∏Ä‰∏™Á±ªÊúâÂÆû‰æãÂèòÈáè NSString *_foo ÔºåË∞ÉÁî®setValue:forKey:Êó∂ÔºåÂèØ‰ª•‰ª•fooËøòÊòØ _foo ‰Ωú‰∏∫keyÔºü KVCÁöÑkeyPath‰∏≠ÁöÑÈõÜÂêàËøêÁÆóÁ¨¶Â¶Ç‰Ωï‰ΩøÁî®Ôºü KVCÂíåKVOÁöÑkeyPath‰∏ÄÂÆöÊòØÂ±ûÊÄß‰πàÔºü Â¶Ç‰ΩïÂÖ≥Èó≠ÈªòËÆ§ÁöÑKVOÁöÑÈªòËÆ§ÂÆûÁé∞ÔºåÂπ∂ËøõÂÖ•Ëá™ÂÆö‰πâÁöÑKVOÂÆûÁé∞Ôºü appleÁî®‰ªÄ‰πàÊñπÂºèÂÆûÁé∞ÂØπ‰∏Ä‰∏™ÂØπË±°ÁöÑKVOÔºü IBOutletËøûÂá∫Êù•ÁöÑËßÜÂõæÂ±ûÊÄß‰∏∫‰ªÄ‰πàÂèØ‰ª•Ë¢´ËÆæÁΩÆÊàêweak? IB‰∏≠User Defined Runtime AttributesÂ¶Ç‰Ωï‰ΩøÁî®Ôºü Â¶Ç‰ΩïË∞ÉËØïBAD_ACCESSÈîôËØØ lldbÔºàgdbÔºâÂ∏∏Áî®ÁöÑË∞ÉËØïÂëΩ‰ª§Ôºü 1. È£éÊ†ºÁ∫†ÈîôÈ¢ò‰øÆÊîπÂÆåÁöÑ‰ª£Á†ÅÔºö ‰øÆÊîπÊñπÊ≥ïÊúâÂæàÂ§öÁßçÔºåÁé∞ÁªôÂá∫‰∏ÄÁßçÂÅöÁ§∫‰æãÔºö 1234567891011121314151617181920// .hÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ‰øÆÊîπÂÆåÁöÑ‰ª£Á†ÅÔºåËøôÊòØÁ¨¨‰∏ÄÁßç‰øÆÊîπÊñπÊ≥ïÔºåÂêéÈù¢‰ºöÁªôÂá∫Á¨¨‰∫åÁßç‰øÆÊîπÊñπÊ≥ïtypedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman};@interface CYLUser : NSObject&lt;NSCopying&gt;@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readonly, assign) CYLSex sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;@end ‰∏ãÈù¢ÂØπÂÖ∑‰Ωì‰øÆÊîπÁöÑÂú∞ÊñπÔºåÂàÜ‰∏§ÈÉ®ÂàÜÂÅö‰∏ã‰ªãÁªçÔºöÁ°¨‰º§ÈÉ®ÂàÜ Âíå ‰ºòÂåñÈÉ®ÂàÜ„ÄÇÂõ†‰∏∫Á°¨‰º§ÈÉ®ÂàÜÊ≤°‰ªÄ‰πàÊäÄÊúØÂê´ÈáèÔºå‰∏∫‰∫ÜËäÇÁúÅÂ§ßÂÆ∂Êó∂Èó¥ÔºåÊîæÂú®ÂêéÈù¢ËÆ≤ÔºåÂ§ßÁ•ûËØ∑Áõ¥Êé•Áúã‰ºòÂåñÈÉ®ÂàÜ„ÄÇ ‰ºòÂåñÈÉ®ÂàÜ enum Âª∫ËÆÆ‰ΩøÁî® NS_ENUM Âíå NS_OPTIONS ÂÆèÊù•ÂÆö‰πâÊûö‰∏æÁ±ªÂûãÔºåÂèÇËßÅÂÆòÊñπÁöÑ Adopting Modern Objective-C ‰∏ÄÊñáÔºö 12345//ÂÆö‰πâ‰∏Ä‰∏™Êûö‰∏æ typedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman }; Ôºà‰ªÖ‰ªÖËÆ©ÊÄßÂà´ÂåÖÂê´Áî∑ÂíåÂ•≥ÂèØËÉΩÂπ∂‰∏ç‰∏•Ë∞®ÔºåÊúÄ‰∏•Ë∞®ÁöÑÂÅöÊ≥ïÂèØ‰ª•ÂèÇËÄÉ ËøôÈáå „ÄÇÔºâ age Â±ûÊÄßÁöÑÁ±ªÂûãÔºöÂ∫îÈÅøÂÖç‰ΩøÁî®Âü∫Êú¨Á±ªÂûãÔºåÂª∫ËÆÆ‰ΩøÁî® Foundation Êï∞ÊçÆÁ±ªÂûãÔºåÂØπÂ∫îÂÖ≥Á≥ªÂ¶Ç‰∏ãÔºö 1234int -&gt; NSIntegerunsigned -&gt; NSUIntegerfloat -&gt; CGFloatÂä®ÁîªÊó∂Èó¥ -&gt; NSTimeInterval ÂêåÊó∂ËÄÉËôëÂà∞ age ÁöÑÁâπÁÇπÔºåÂ∫î‰ΩøÁî® NSUInteger ÔºåËÄåÈùû int „ÄÇËøôÊ†∑ÂÅöÁöÑÊòØÂü∫‰∫é64-bit ÈÄÇÈÖçËÄÉËôëÔºåËØ¶ÊÉÖÂèØÂèÇËÄÉÂá∫È¢òËÄÖÁöÑÂçöÊñá„Ää64-bit Tips„Äã„ÄÇ Â¶ÇÊûúÂ∑•Á®ãÈ°πÁõÆÈùûÂ∏∏Â∫ûÂ§ßÔºåÈúÄË¶ÅÊãÜÂàÜÊàê‰∏çÂêåÁöÑÊ®°ÂùóÔºåÂèØ‰ª•Âú®Á±ª„ÄÅtypedefÂÆèÂëΩÂêçÁöÑÊó∂ÂÄô‰ΩøÁî®ÂâçÁºÄ„ÄÇ doLogInÊñπÊ≥ï‰∏çÂ∫îÂÜôÂú®ËØ•Á±ª‰∏≠Ôºö ËôΩÁÑ∂LogInÁöÑÂëΩÂêç‰∏çÂ§™Ê∏ÖÊô∞Ôºå‰ΩÜÁ¨îËÄÖÁåúÊµãÊòØloginÁöÑÊÑèÊÄùÔºå ÔºàÂãòËØØÔºöLoginÊòØÂêçËØçÔºåLogIn ÊòØÂä®ËØçÔºåÈÉΩË°®Á§∫ÁôªÈôÜÁöÑÊÑèÊÄù„ÄÇËßÅÔºö Log in vs. login ÔºâÁôªÂΩïÊìç‰ΩúÂ±û‰∫é‰∏öÂä°ÈÄªËæëÔºåËßÇÂØüÁ±ªÂêç UserModel Ôºå‰ª•ÂèäÂ±ûÊÄßÁöÑÂëΩÂêçÊñπÂºèÔºåËØ•Á±ªÂ∫îËØ•ÊòØ‰∏Ä‰∏™ Model ËÄå‰∏çÊòØ‰∏Ä‰∏™‚Äú MVVM Ê®°Âºè‰∏ãÁöÑ ViewModel ‚ÄùÔºö Êó†ËÆ∫ÊòØ MVC Ê®°ÂºèËøòÊòØ MVVM Ê®°ÂºèÔºå‰∏öÂä°ÈÄªËæëÈÉΩ‰∏çÂ∫îÂΩìÂÜôÂú® Model ÈáåÔºöMVC Â∫îÂú® CÔºåMVVM Â∫îÂú® VM„ÄÇ ÔºàÂ¶ÇÊûúÊäõÂºÄÂëΩÂêçËßÑËåÉÔºåÂÅáËÆæËØ•Á±ªÁúüÁöÑÊòØ MVVM Ê®°ÂºèÈáåÁöÑ ViewModel ÔºåÈÇ£‰πà UserModel Ëøô‰∏™Á±ªÂèØËÉΩÂØπÂ∫îÁöÑÊòØÁî®Êà∑Ê≥®ÂÜåÈ°µÈù¢ÔºåÂ¶ÇÊûúÊúâÁâπÊÆäÁöÑ‰∏öÂä°ÈúÄÊ±ÇÔºåÊØîÂ¶ÇÔºö -logIn ÂØπÂ∫îÁöÑÂ∫îÂΩìÊòØÊ≥®ÂÜåÂπ∂ÁôªÂΩïÁöÑ‰∏Ä‰∏™ Button ÔºåÂá∫Áé∞ -logIn ÊñπÊ≥ï‰πüÂèØËÉΩÊòØÂêàÁêÜÁöÑ„ÄÇÔºâ doLogIn ÊñπÊ≥ïÂëΩÂêç‰∏çËßÑËåÉÔºöÊ∑ªÂä†‰∫ÜÂ§ö‰ΩôÁöÑÂä®ËØçÂâçÁºÄ„ÄÇËØ∑Áâ¢ËÆ∞Ôºö Â¶ÇÊûúÊñπÊ≥ïË°®Á§∫ËÆ©ÂØπË±°ÊâßË°å‰∏Ä‰∏™Âä®‰ΩúÔºå‰ΩøÁî®Âä®ËØçÊâìÂ§¥Êù•ÂëΩÂêçÔºåÊ≥®ÊÑè‰∏çË¶Å‰ΩøÁî® doÔºådoes ËøôÁßçÂ§ö‰ΩôÁöÑÂÖ≥ÈîÆÂ≠óÔºåÂä®ËØçÊú¨Ë∫´ÁöÑÊöóÁ§∫Â∞±Ë∂≥Â§ü‰∫Ü„ÄÇ Â∫î‰∏∫ -logIn ÔºàÊ≥®ÊÑèÔºö Login ÊòØÂêçËØçÔºå LogIn ÊòØÂä®ËØçÔºåÈÉΩË°®Á§∫ÁôªÈôÜ„ÄÇ ËßÅ Log in vs. login Ôºâ -(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;ÊñπÊ≥ï‰∏≠‰∏çË¶ÅÁî® with Êù•ËøûÊé•‰∏§‰∏™ÂèÇÊï∞: withAge: Â∫îÂΩìÊç¢‰∏∫age:Ôºåage: Â∑≤ÁªèË∂≥‰ª•Ê∏ÖÊô∞ËØ¥ÊòéÂèÇÊï∞ÁöÑ‰ΩúÁî®Ôºå‰πü‰∏çÂª∫ËÆÆÁî® andAge: ÔºöÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂç≥‰ΩøÊúâÁ±ª‰ºº withA:withB: ÁöÑÂëΩÂêçÈúÄÊ±ÇÔºå‰πüÈÄöÂ∏∏ÊòØ‰ΩøÁî®withA:andB: ËøôÁßçÂëΩÂêçÔºåÁî®Êù•Ë°®Á§∫ÊñπÊ≥ïÊâßË°å‰∫Ü‰∏§‰∏™Áõ∏ÂØπÁã¨Á´ãÁöÑÊìç‰ΩúÔºà‰ªéËÆæËÆ°‰∏äÊù•ËØ¥ÔºåËøôÊó∂ÂÄô‰πüÂèØ‰ª•ÊãÜÂàÜÊàê‰∏§‰∏™Áã¨Á´ãÁöÑÊñπÊ≥ïÔºâÔºåÂÆÉ‰∏çÂ∫îËØ•Áî®‰ΩúÈòêÊòéÊúâÂ§ö‰∏™ÂèÇÊï∞ÔºåÊØîÂ¶Ç‰∏ãÈù¢ÁöÑÔºö 123456//ÈîôËØØÔºå‰∏çË¶Å‰ΩøÁî®&quot;and&quot;Êù•ËøûÊé•ÂèÇÊï∞- (int)runModalForDirectory:(NSString *)path andFile:(NSString *)name andTypes:(NSArray *)fileTypes;//ÈîôËØØÔºå‰∏çË¶Å‰ΩøÁî®&quot;and&quot;Êù•ÈòêÊòéÊúâÂ§ö‰∏™ÂèÇÊï∞- (instancetype)initWithName:(CGFloat)width andAge:(CGFloat)height;//Ê≠£Á°ÆÔºå‰ΩøÁî®&quot;and&quot;Êù•Ë°®Á§∫‰∏§‰∏™Áõ∏ÂØπÁã¨Á´ãÁöÑÊìç‰Ωú- (BOOL)openFile:(NSString *)fullPath withApplication:(NSString *)appName andDeactivate:(BOOL)flag; Áî±‰∫éÂ≠óÁ¨¶‰∏≤ÂÄºÂèØËÉΩ‰ºöÊîπÂèòÔºåÊâÄ‰ª•Ë¶ÅÊääÁõ∏ÂÖ≥Â±ûÊÄßÁöÑ‚ÄúÂÜÖÂ≠òÁÆ°ÁêÜËØ≠‰πâ‚ÄùÂ£∞Êòé‰∏∫ copy „ÄÇ(ÂéüÂõ†Âú®‰∏ãÊñáÊúâËØ¶ÁªÜËÆ∫Ëø∞ÔºöÁî®@propertyÂ£∞ÊòéÁöÑNSStringÔºàÊàñNSArrayÔºåNSDictionaryÔºâÁªèÂ∏∏‰ΩøÁî®copyÂÖ≥ÈîÆÂ≠óÔºå‰∏∫‰ªÄ‰πàÔºü) ‚ÄúÊÄßÂà´‚Äù(sexÔºâÂ±ûÊÄßÁöÑÔºöËØ•Á±ª‰∏≠Âè™ÁªôÂá∫‰∫Ü‰∏ÄÁßç‚ÄúÂàùÂßãÂåñÊñπÊ≥ï‚Äù (initializer)Áî®‰∫éËÆæÁΩÆ‚ÄúÂßìÂêç‚Äù(Name)Âíå‚ÄúÂπ¥ÈæÑ‚Äù(Age)ÁöÑÂàùÂßãÂÄºÔºåÈÇ£Â¶Ç‰ΩïÂØπ‚ÄúÊÄßÂà´‚Äù(SexÔºâÂàùÂßãÂåñÔºü Objective-C Êúâ designated Âíå secondary ÂàùÂßãÂåñÊñπÊ≥ïÁöÑËßÇÂøµ„ÄÇ designated ÂàùÂßãÂåñÊñπÊ≥ïÊòØÊèê‰æõÊâÄÊúâÁöÑÂèÇÊï∞Ôºåsecondary ÂàùÂßãÂåñÊñπÊ≥ïÊòØ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÔºåÂπ∂‰∏îÊèê‰æõ‰∏Ä‰∏™ÊàñËÄÖÊõ¥Â§öÁöÑÈªòËÆ§ÂèÇÊï∞Êù•Ë∞ÉÁî® designated ÂàùÂßãÂåñÊñπÊ≥ïÁöÑÂàùÂßãÂåñÊñπÊ≥ï„ÄÇ‰∏æ‰æãËØ¥ÊòéÔºö 12345678910111213141516171819202122232425// .mÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong//@implementation CYLUser- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex { if(self = [super init]) { _name = [name copy]; _age = age; _sex = sex; } return self;}- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age { return [self initWithName:name age:age sex:nil];}@end ‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠initWithName:age:sex: Â∞±ÊòØ designated ÂàùÂßãÂåñÊñπÊ≥ïÔºåÂè¶Â§ñÁöÑÊòØ secondary ÂàùÂßãÂåñÊñπÊ≥ï„ÄÇÂõ†‰∏∫‰ªÖ‰ªÖÊòØË∞ÉÁî®Á±ªÂÆûÁé∞ÁöÑ designated ÂàùÂßãÂåñÊñπÊ≥ï„ÄÇ Âõ†‰∏∫Âá∫È¢òËÄÖÊ≤°ÊúâÁªôÂá∫ .m Êñá‰ª∂ÔºåÊâÄ‰ª•Êúâ‰∏§ÁßçÁåúÊµãÔºö1ÔºöÊú¨Êù•ÊâìÁÆóÂè™ËÆæËÆ°‰∏Ä‰∏™ designated ÂàùÂßãÂåñÊñπÊ≥ïÔºå‰ΩÜÊºèÊéâ‰∫Ü‚ÄúÊÄßÂà´‚Äù(sexÔºâÂ±ûÊÄß„ÄÇÈÇ£‰πàÊúÄÁªàÁöÑ‰øÆÊîπ‰ª£Á†ÅÂ∞±ÊòØ‰∏äÊñáÁªôÂá∫ÁöÑÁ¨¨‰∏ÄÁßç‰øÆÊîπÊñπÊ≥ï„ÄÇ2Ôºö‰∏çÊâìÁÆóÂàùÂßãÊó∂ÂàùÂßãÂåñ‚ÄúÊÄßÂà´‚Äù(sexÔºâÂ±ûÊÄßÔºåÊâìÁÆóÂêéÊúüÂÜç‰øÆÊîπÔºåÂ¶ÇÊûúÊòØËøôÁßçÊÉÖÂÜµÔºåÈÇ£‰πàÂ∫îËØ•Êää‚ÄúÊÄßÂà´‚Äù(sexÔºâÂ±ûÊÄßËÆæ‰∏∫ readwrite Â±ûÊÄßÔºåÊúÄÁªàÁªôÂá∫ÁöÑ‰øÆÊîπ‰ª£Á†ÅÂ∫îËØ•ÊòØÔºö 1234567891011121314151617181920212223// .hÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// Á¨¨‰∫åÁßç‰øÆÊîπÊñπÊ≥ïÔºàÂü∫‰∫éÁ¨¨‰∏ÄÁßç‰øÆÊîπÊñπÊ≥ïÁöÑÂü∫Á°Ä‰∏äÔºâtypedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman};@interface CYLUser : NSObject&lt;NSCopying&gt;@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readwrite, assign) CYLSex sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age;+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;@end .h ‰∏≠Êö¥Èú≤ designated ÂàùÂßãÂåñÊñπÊ≥ïÔºåÊòØ‰∏∫‰∫ÜÊñπ‰æøÂ≠êÁ±ªÂåñ ÔºàÊÉ≥‰∫ÜËß£Êõ¥Â§öÔºåËØ∑Êà≥‚Äì„Äã „ÄäÁ¶Ö‰∏é Objective-C ÁºñÁ®ãËâ∫ÊúØ ÔºàZen and the Art of the Objective-C Craftsmanship ‰∏≠ÊñáÁøªËØëÔºâ„Äã„ÄÇÔºâ ÊåâÁÖßÊé•Âè£ËÆæËÆ°ÁöÑÊÉØ‰æãÔºåÂ¶ÇÊûúËÆæËÆ°‰∫Ü‚ÄúÂàùÂßãÂåñÊñπÊ≥ï‚Äù (initializer)Ôºå‰πüÂ∫îÂΩìÊê≠ÈÖç‰∏Ä‰∏™Âø´Êç∑ÊûÑÈÄ†ÊñπÊ≥ï„ÄÇËÄåÂø´Êç∑ÊûÑÈÄ†ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÔºåÂª∫ËÆÆ‰∏∫ instancetypeÔºå‰∏∫‰øùÊåÅ‰∏ÄËá¥ÊÄßÔºåinit ÊñπÊ≥ïÂíåÂø´Êç∑ÊûÑÈÄ†ÊñπÊ≥ïÁöÑËøîÂõûÁ±ªÂûãÊúÄÂ•ΩÈÉΩÁî® instancetype„ÄÇ Â¶ÇÊûúÂü∫‰∫éÁ¨¨‰∏ÄÁßç‰øÆÊîπÊñπÊ≥ïÔºöÊó¢ÁÑ∂ËØ•Á±ª‰∏≠Â∑≤ÁªèÊúâ‰∏Ä‰∏™‚ÄúÂàùÂßãÂåñÊñπÊ≥ï‚Äù (initializer)ÔºåÁî®‰∫éËÆæÁΩÆ‚ÄúÂßìÂêç‚Äù(Name)„ÄÅ‚ÄúÂπ¥ÈæÑ‚Äù(Age)Âíå‚ÄúÊÄßÂà´‚Äù(SexÔºâÁöÑÂàùÂßãÂÄº:ÈÇ£‰πàÂú®ËÆæËÆ°ÂØπÂ∫î @property Êó∂Â∞±Â∫îËØ•Â∞ΩÈáè‰ΩøÁî®‰∏çÂèØÂèòÁöÑÂØπË±°ÔºöÂÖ∂‰∏â‰∏™Â±ûÊÄßÈÉΩÂ∫îËØ•ËÆæ‰∏∫‚ÄúÂè™ËØª‚Äù„ÄÇÁî®ÂàùÂßãÂåñÊñπÊ≥ïËÆæÁΩÆÂ•ΩÂ±ûÊÄßÂÄº‰πãÂêéÔºåÂ∞±‰∏çËÉΩÂÜçÊîπÂèò‰∫Ü„ÄÇÂú®Êú¨‰æã‰∏≠Ôºå‰ªçÈúÄÂ£∞ÊòéÂ±ûÊÄßÁöÑ‚ÄúÂÜÖÂ≠òÁÆ°ÁêÜËØ≠‰πâ‚Äù„ÄÇ‰∫éÊòØÂèØ‰ª•ÊääÂ±ûÊÄßÁöÑÂÆö‰πâÊîπÊàêËøôÊ†∑ 123@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readonly, assign) CYLSex sex; Áî±‰∫éÊòØÂè™ËØªÂ±ûÊÄßÔºåÊâÄ‰ª•ÁºñËØëÂô®‰∏ç‰ºö‰∏∫ÂÖ∂ÂàõÂª∫ÂØπÂ∫îÁöÑ‚ÄúËÆæÁΩÆÊñπÊ≥ï‚ÄùÔºåÂç≥‰æøÂ¶ÇÊ≠§ÔºåÊàë‰ª¨ËøòÊòØË¶ÅÂÜô‰∏äËøô‰∫õÂ±ûÊÄßÁöÑËØ≠‰πâÔºå‰ª•Ê≠§Ë°®ÊòéÂàùÂßãÂåñÊñπÊ≥ïÂú®ËÆæÁΩÆËøô‰∫õÂ±ûÊÄßÂÄºÊó∂ÊâÄÁî®ÁöÑÊñπÂºè„ÄÇË¶ÅÊòØ‰∏çÂÜôÊòéËØ≠‰πâÁöÑËØùÔºåËØ•Á±ªÁöÑË∞ÉÁî®ËÄÖÂ∞±‰∏çÁü•ÈÅìÂàùÂßãÂåñÊñπÊ≥ïÈáå‰ºöÊã∑Ë¥ùËøô‰∫õÂ±ûÊÄßÔºå‰ªñ‰ª¨ÊúâÂèØËÉΩ‰ºöÂú®Ë∞ÉÁî®ÂàùÂßãÂåñÊñπÊ≥ï‰πãÂâçËá™Ë°åÊã∑Ë¥ùÂ±ûÊÄßÂÄº„ÄÇËøôÁßçÊìç‰ΩúÂ§ö‰ΩôËÄå‰∏î‰ΩéÊïà„ÄÇ initUserModelWithUserName Â¶ÇÊûúÊîπ‰∏∫ initWithName ‰ºöÊõ¥Âä†ÁÆÄÊ¥ÅÔºåËÄå‰∏îË∂≥Â§üÊ∏ÖÊô∞„ÄÇ UserModel Â¶ÇÊûúÊîπ‰∏∫ User ‰ºöÊõ¥Âä†ÁÆÄÊ¥ÅÔºåËÄå‰∏îË∂≥Â§üÊ∏ÖÊô∞„ÄÇ UserSexÂ¶ÇÊûúÊîπ‰∏∫Sex ‰ºöÊõ¥Âä†ÁÆÄÊ¥ÅÔºåËÄå‰∏îË∂≥Â§üÊ∏ÖÊô∞„ÄÇ Á¨¨‰∫å‰∏™ @property ‰∏≠ assign Âíå nonatomic Ë∞ÉÊç¢‰ΩçÁΩÆ„ÄÇÊé®ËçêÊåâÁÖß‰∏ãÈù¢ÁöÑÊ†ºÂºèÊù•ÂÆö‰πâÂ±ûÊÄß 1@property (nonatomic, readwrite, copy) NSString *name; Â±ûÊÄßÁöÑÂèÇÊï∞Â∫îËØ•ÊåâÁÖß‰∏ãÈù¢ÁöÑÈ°∫Â∫èÊéíÂàóÔºö ÂéüÂ≠êÊÄßÔºåËØªÂÜô Âíå ÂÜÖÂ≠òÁÆ°ÁêÜ„ÄÇ ËøôÊ†∑ÂÅö‰Ω†ÁöÑÂ±ûÊÄßÊõ¥ÂÆπÊòì‰øÆÊîπÊ≠£Á°ÆÔºåÂπ∂‰∏îÊõ¥Â•ΩÈòÖËØª„ÄÇËøôÂú®„ÄäÁ¶Ö‰∏éObjective-CÁºñÁ®ãËâ∫ÊúØ &gt;„ÄãÈáåÊúâ‰ªãÁªç„ÄÇËÄå‰∏î‰π†ÊÉØ‰∏ä‰øÆÊîπÊüê‰∏™Â±ûÊÄßÁöÑ‰øÆÈ•∞Á¨¶Êó∂Ôºå‰∏ÄËà¨‰ªéÂ±ûÊÄßÂêç‰ªéÂè≥ÂêëÂ∑¶ÊêúÁ¥¢ÈúÄË¶Å‰øÆÂä®ÁöÑ‰øÆÈ•∞Á¨¶„ÄÇÊúÄÂèØËÉΩ‰ªéÊúÄÂè≥ËæπÂºÄÂßã‰øÆÊîπËøô‰∫õÂ±ûÊÄßÁöÑ‰øÆÈ•∞Á¨¶ÔºåÊ†πÊçÆÁªèÈ™åËøô‰∫õ‰øÆÈ•∞Á¨¶Ë¢´‰øÆÊîπÁöÑÂèØËÉΩÊÄß‰ªéÈ´òÂà∞Â∫ïÂ∫î‰∏∫ÔºöÂÜÖÂ≠òÁÆ°ÁêÜ &gt; ËØªÂÜôÊùÉÈôê &gt;ÂéüÂ≠êÊìç‰Ωú„ÄÇ Á°¨‰º§ÈÉ®ÂàÜ Âú®-Âíå(void)‰πãÈó¥Â∫îËØ•Êúâ‰∏Ä‰∏™Á©∫Ê†º enum ‰∏≠È©ºÂ≥∞ÂëΩÂêçÊ≥ïÂíå‰∏ãÂàíÁ∫øÂëΩÂêçÊ≥ïÊ∑∑Áî®ÈîôËØØÔºöÊûö‰∏æÁ±ªÂûãÁöÑÂëΩÂêçËßÑÂàôÂíåÂáΩÊï∞ÁöÑÂëΩÂêçËßÑÂàôÁõ∏ÂêåÔºöÂëΩÂêçÊó∂‰ΩøÁî®È©ºÂ≥∞ÂëΩÂêçÊ≥ïÔºåÂãø‰ΩøÁî®‰∏ãÂàíÁ∫øÂëΩÂêçÊ≥ï„ÄÇ enum Â∑¶Êã¨Âè∑ÂâçÂä†‰∏Ä‰∏™Á©∫Ê†ºÔºåÊàñËÄÖÂ∞ÜÂ∑¶Êã¨Âè∑Êç¢Âà∞‰∏ã‰∏ÄË°å enum Âè≥Êã¨Âè∑ÂêéÂä†‰∏Ä‰∏™Á©∫Ê†º UserModel :NSObject Â∫î‰∏∫UserModel : NSObjectÔºå‰πüÂ∞±ÊòØ:Âè≥‰æßÂ∞ë‰∫Ü‰∏Ä‰∏™Á©∫Ê†º„ÄÇ @interface ‰∏é @property Â±ûÊÄßÂ£∞Êòé‰∏≠Èó¥Â∫îÂΩìÈó¥Èöî‰∏ÄË°å„ÄÇ ‰∏§‰∏™ÊñπÊ≥ïÂÆö‰πâ‰πãÈó¥‰∏çÈúÄË¶ÅÊç¢Ë°åÔºåÊúâÊó∂‰∏∫‰∫ÜÂå∫ÂàÜÊñπÊ≥ïÁöÑÂäüËÉΩ‰πüÂèØÈó¥Èöî‰∏ÄË°åÔºå‰ΩÜÁ§∫‰æã‰ª£Á†Å‰∏≠Èó¥Èöî‰∫Ü‰∏§Ë°å„ÄÇ -(id)initUserModelWithUserName: (NSString*)name withAge:(int)age; ÊñπÊ≥ï‰∏≠ÊñπÊ≥ïÂêç‰∏éÂèÇÊï∞‰πãÈó¥Â§ö‰∫ÜÁ©∫Ê†º„ÄÇËÄå‰∏î - ‰∏é (id) ‰πãÈó¥Â∞ë‰∫ÜÁ©∫Ê†º„ÄÇ -(id)initUserModelWithUserName: (NSString*)name withAge:(int)age; ÊñπÊ≥ï‰∏≠ÊñπÊ≥ïÂêç‰∏éÂèÇÊï∞‰πãÈó¥Â§ö‰∫ÜÁ©∫Ê†ºÔºö(NSString*)name ÂâçÂ§ö‰∫ÜÁ©∫Ê†º„ÄÇ -(id)initUserModelWithUserName: (NSString*)name withAge:(int)age; ÊñπÊ≥ï‰∏≠ (NSString*)name,Â∫î‰∏∫ (NSString *)nameÔºåÂ∞ë‰∫ÜÁ©∫Ê†º„ÄÇ doLogInÊñπÊ≥ï‰∏≠ÁöÑ `LogIn` ÂëΩÂêç‰∏çÊ∏ÖÊô∞ÔºöÁ¨îËÄÖÁåúÊµãÊòØloginÁöÑÊÑèÊÄùÔºåÂ∫îËØ•ÊòØÁ≤óÂøÉÊâãËØØÈÄ†ÊàêÁöÑ„ÄÇ ÔºàÂãòËØØÔºö `Login` ÊòØÂêçËØçÔºå `LogIn` ÊòØÂä®ËØçÔºåÈÉΩË°®Á§∫ÁôªÈôÜÁöÑÊÑèÊÄù„ÄÇËßÅÔºö [ ***Log in vs. login*** ](https://grammarist.com/spelling/log-in-login/)Ôºâ 2. ‰ªÄ‰πàÊÉÖÂÜµ‰ΩøÁî® weak ÂÖ≥ÈîÆÂ≠óÔºåÁõ∏ÊØî assign Êúâ‰ªÄ‰πà‰∏çÂêåÔºü‰ªÄ‰πàÊÉÖÂÜµ‰ΩøÁî® weak ÂÖ≥ÈîÆÂ≠óÔºü Âú® ARC ‰∏≠,Âú®ÊúâÂèØËÉΩÂá∫Áé∞Âæ™ÁéØÂºïÁî®ÁöÑÊó∂ÂÄô,ÂæÄÂæÄË¶ÅÈÄöËøáËÆ©ÂÖ∂‰∏≠‰∏ÄÁ´Ø‰ΩøÁî® weak Êù•Ëß£ÂÜ≥,ÊØîÂ¶Ç: delegate ‰ª£ÁêÜÂ±ûÊÄß Ëá™Ë∫´Â∑≤ÁªèÂØπÂÆÉËøõË°å‰∏ÄÊ¨°Âº∫ÂºïÁî®,Ê≤°ÊúâÂøÖË¶ÅÂÜçÂº∫ÂºïÁî®‰∏ÄÊ¨°,Ê≠§Êó∂‰πü‰ºö‰ΩøÁî® weak,Ëá™ÂÆö‰πâ IBOutlet Êéß‰ª∂Â±ûÊÄß‰∏ÄËà¨‰πü‰ΩøÁî® weakÔºõÂΩìÁÑ∂Ôºå‰πüÂèØ‰ª•‰ΩøÁî®strong„ÄÇÂú®‰∏ãÊñá‰πüÊúâËÆ∫Ëø∞Ôºö„ÄäIBOutletËøûÂá∫Êù•ÁöÑËßÜÂõæÂ±ûÊÄß‰∏∫‰ªÄ‰πàÂèØ‰ª•Ë¢´ËÆæÁΩÆÊàêweak?„Äã ‰∏çÂêåÁÇπÔºö weak Ê≠§ÁâπË¥®Ë°®ÊòéËØ•Â±ûÊÄßÂÆö‰πâ‰∫Ü‰∏ÄÁßç‚ÄúÈùûÊã•ÊúâÂÖ≥Á≥ª‚Äù (nonowning relationship)„ÄÇ‰∏∫ËøôÁßçÂ±ûÊÄßËÆæÁΩÆÊñ∞ÂÄºÊó∂ÔºåËÆæÁΩÆÊñπÊ≥ïÊó¢‰∏ç‰øùÁïôÊñ∞ÂÄºÔºå‰πü‰∏çÈáäÊîæÊóßÂÄº„ÄÇÊ≠§ÁâπË¥®ÂêåassignÁ±ª‰ººÔºåÁÑ∂ËÄåÂú®Â±ûÊÄßÊâÄÊåáÁöÑÂØπË±°ÈÅ≠Âà∞ÊëßÊØÅÊó∂ÔºåÂ±ûÊÄßÂÄº‰πü‰ºöÊ∏ÖÁ©∫(nil out)„ÄÇËÄå assign ÁöÑ‚ÄúËÆæÁΩÆÊñπÊ≥ï‚ÄùÂè™‰ºöÊâßË°åÈíàÂØπ‚ÄúÁ∫ØÈáèÁ±ªÂûã‚Äù (scalar typeÔºå‰æãÂ¶Ç CGFloat ÊàñNSlnteger Á≠â)ÁöÑÁÆÄÂçïËµãÂÄºÊìç‰Ωú„ÄÇ assign ÂèØ‰ª•Áî®Èùû OC ÂØπË±°,ËÄå weak ÂøÖÈ°ªÁî®‰∫é OC ÂØπË±° 3. ÊÄé‰πàÁî® copy ÂÖ≥ÈîÆÂ≠óÔºüÁî®ÈÄîÔºö NSString„ÄÅNSArray„ÄÅNSDictionary Á≠âÁ≠âÁªèÂ∏∏‰ΩøÁî®copyÂÖ≥ÈîÆÂ≠óÔºåÊòØÂõ†‰∏∫‰ªñ‰ª¨ÊúâÂØπÂ∫îÁöÑÂèØÂèòÁ±ªÂûãÔºöNSMutableString„ÄÅNSMutableArray„ÄÅNSMutableDictionaryÔºõ block ‰πüÁªèÂ∏∏‰ΩøÁî® copy ÂÖ≥ÈîÆÂ≠óÔºåÂÖ∑‰ΩìÂéüÂõ†ËßÅÂÆòÊñπÊñáÊ°£ÔºöObjects Use Properties to Keep Track of BlocksÔºö block ‰ΩøÁî® copy ÊòØ‰ªé MRC ÈÅóÁïô‰∏ãÊù•ÁöÑ‚Äú‰º†Áªü‚Äù,Âú® MRC ‰∏≠,ÊñπÊ≥ïÂÜÖÈÉ®ÁöÑ block ÊòØÂú®Ê†àÂå∫ÁöÑ,‰ΩøÁî® copy ÂèØ‰ª•ÊääÂÆÉÊîæÂà∞Â†ÜÂå∫.Âú® ARC ‰∏≠ÂÜô‰∏çÂÜôÈÉΩË°åÔºöÂØπ‰∫é block ‰ΩøÁî® copy ËøòÊòØ strong ÊïàÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÂÜô‰∏ä copy ‰πüÊó†‰º§Â§ßÈõÖÔºåËøòËÉΩÊó∂ÂàªÊèêÈÜíÊàë‰ª¨ÔºöÁºñËØëÂô®Ëá™Âä®ÂØπ block ËøõË°å‰∫Ü copy Êìç‰Ωú„ÄÇÂ¶ÇÊûú‰∏çÂÜô copy ÔºåËØ•Á±ªÁöÑË∞ÉÁî®ËÄÖÊúâÂèØËÉΩ‰ºöÂøòËÆ∞ÊàñËÄÖÊ†πÊú¨‰∏çÁü•ÈÅì‚ÄúÁºñËØëÂô®‰ºöËá™Âä®ÂØπ block ËøõË°å‰∫Ü copy Êìç‰Ωú‚ÄùÔºå‰ªñ‰ª¨ÊúâÂèØËÉΩ‰ºöÂú®Ë∞ÉÁî®‰πãÂâçËá™Ë°åÊã∑Ë¥ùÂ±ûÊÄßÂÄº„ÄÇËøôÁßçÊìç‰ΩúÂ§ö‰ΩôËÄå‰ΩéÊïà„ÄÇ‰Ω†‰πüËÆ∏‰ºöÊÑüËßâÊàëËøôÁßçÂÅöÊ≥ïÊúâ‰∫õÊÄ™ÂºÇÔºå‰∏çÈúÄË¶ÅÂÜô‰æùÁÑ∂ÂÜô„ÄÇÂ¶ÇÊûú‰Ω†ËøôÊ†∑ÊÉ≥ÔºåÂÖ∂ÂÆûÊòØ‰Ω†‚ÄúÊó•Áî®ËÄå‰∏çÁü•‚ÄùÔºå‰Ω†Âπ≥Êó∂ÂºÄÂèë‰∏≠ÊòØÁªèÂ∏∏Âú®Áî®ÊàëËØ¥ÁöÑËøôÁßçÂÅöÊ≥ïÁöÑÔºåÊØîÂ¶Ç‰∏ãÈù¢ÁöÑÂ±ûÊÄß‰∏çÂÜôcopy‰πüË°åÔºå‰ΩÜÊòØ‰Ω†‰ºöÈÄâÊã©ÂÜôËøòÊòØ‰∏çÂÜôÂë¢Ôºü 12345678910@property (nonatomic, copy) NSString *userId;- (instancetype)initWithUserId:(NSString *)userId { self = [super init]; if (!self) { return nil; } _userId = [userId copy]; return self;} ‰∏ãÈù¢ÂÅö‰∏ãËß£ÈáäÔºö copy Ê≠§ÁâπË¥®ÊâÄË°®ËææÁöÑÊâÄÂ±ûÂÖ≥Á≥ª‰∏é strong Á±ª‰ºº„ÄÇÁÑ∂ËÄåËÆæÁΩÆÊñπÊ≥ïÂπ∂‰∏ç‰øùÁïôÊñ∞ÂÄºÔºåËÄåÊòØÂ∞ÜÂÖ∂‚ÄúÊã∑Ë¥ù‚Äù (copy)„ÄÇÂΩìÂ±ûÊÄßÁ±ªÂûã‰∏∫ NSString Êó∂ÔºåÁªèÂ∏∏Áî®Ê≠§ÁâπË¥®Êù•‰øùÊä§ÂÖ∂Â∞ÅË£ÖÊÄßÔºåÂõ†‰∏∫‰º†ÈÄíÁªôËÆæÁΩÆÊñπÊ≥ïÁöÑÊñ∞ÂÄºÊúâÂèØËÉΩÊåáÂêë‰∏Ä‰∏™ NSMutableString Á±ªÁöÑÂÆû‰æã„ÄÇËøô‰∏™Á±ªÊòØ NSString ÁöÑÂ≠êÁ±ªÔºåË°®Á§∫‰∏ÄÁßçÂèØ‰øÆÊîπÂÖ∂ÂÄºÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÊ≠§Êó∂Ëã•ÊòØ‰∏çÊã∑Ë¥ùÂ≠óÁ¨¶‰∏≤ÔºåÈÇ£‰πàËÆæÁΩÆÂÆåÂ±ûÊÄß‰πãÂêéÔºåÂ≠óÁ¨¶‰∏≤ÁöÑÂÄºÂ∞±ÂèØËÉΩ‰ºöÂú®ÂØπË±°‰∏çÁü•ÊÉÖÁöÑÊÉÖÂÜµ‰∏ãÈÅ≠‰∫∫Êõ¥Êîπ„ÄÇÊâÄ‰ª•ÔºåËøôÊó∂Â∞±Ë¶ÅÊã∑Ë¥ù‰∏Ä‰ªΩ‚Äú‰∏çÂèØÂèò‚Äù (immutable)ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÁ°Æ‰øùÂØπË±°‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÂÄº‰∏ç‰ºöÊó†ÊÑèÈó¥ÂèòÂä®„ÄÇÂè™Ë¶ÅÂÆûÁé∞Â±ûÊÄßÊâÄÁî®ÁöÑÂØπË±°ÊòØ‚ÄúÂèØÂèòÁöÑ‚Äù (mutable)ÔºåÂ∞±Â∫îËØ•Âú®ËÆæÁΩÆÊñ∞Â±ûÊÄßÂÄºÊó∂Êã∑Ë¥ù‰∏Ä‰ªΩ„ÄÇ Áî® @property Â£∞Êòé NSString„ÄÅNSArray„ÄÅNSDictionary ÁªèÂ∏∏‰ΩøÁî® copy ÂÖ≥ÈîÆÂ≠óÔºåÊòØÂõ†‰∏∫‰ªñ‰ª¨ÊúâÂØπÂ∫îÁöÑÂèØÂèòÁ±ªÂûãÔºöNSMutableString„ÄÅNSMutableArray„ÄÅNSMutableDictionaryÔºå‰ªñ‰ª¨‰πãÈó¥ÂèØËÉΩËøõË°åËµãÂÄºÊìç‰ΩúÔºå‰∏∫Á°Æ‰øùÂØπË±°‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÂÄº‰∏ç‰ºöÊó†ÊÑèÈó¥ÂèòÂä®ÔºåÂ∫îËØ•Âú®ËÆæÁΩÆÊñ∞Â±ûÊÄßÂÄºÊó∂Êã∑Ë¥ù‰∏Ä‰ªΩ„ÄÇ ËØ•ÈóÆÈ¢òÂú®‰∏ãÊñá‰∏≠‰πüÊúâËÆ∫Ëø∞ÔºöÁî®@propertyÂ£∞ÊòéÁöÑNSStringÔºàÊàñNSArrayÔºåNSDictionaryÔºâÁªèÂ∏∏‰ΩøÁî®copyÂÖ≥ÈîÆÂ≠óÔºå‰∏∫‰ªÄ‰πàÔºüÂ¶ÇÊûúÊîπÁî®strongÂÖ≥ÈîÆÂ≠óÔºåÂèØËÉΩÈÄ†Êàê‰ªÄ‰πàÈóÆÈ¢òÔºü 4. Ëøô‰∏™ÂÜôÊ≥ï‰ºöÂá∫‰ªÄ‰πàÈóÆÈ¢òÔºö @property (copy) NSMutableArray *array;‰∏§‰∏™ÈóÆÈ¢òÔºö1„ÄÅÊ∑ªÂä†,Âà†Èô§,‰øÆÊîπÊï∞ÁªÑÂÜÖÁöÑÂÖÉÁ¥†ÁöÑÊó∂ÂÄô,Á®ãÂ∫è‰ºöÂõ†‰∏∫Êâæ‰∏çÂà∞ÂØπÂ∫îÁöÑÊñπÊ≥ïËÄåÂ¥©Ê∫É.Âõ†‰∏∫ copy Â∞±ÊòØÂ§çÂà∂‰∏Ä‰∏™‰∏çÂèØÂèò NSArray ÁöÑÂØπË±°Ôºõ2„ÄÅ‰ΩøÁî®‰∫Ü atomic Â±ûÊÄß‰ºö‰∏•ÈáçÂΩ±ÂìçÊÄßËÉΩ Ôºõ Á¨¨1Êù°ÁöÑÁõ∏ÂÖ≥ÂéüÂõ†Âú®‰∏ãÊñá‰∏≠ÊúâËÆ∫Ëø∞„ÄäÁî®@propertyÂ£∞ÊòéÁöÑNSStringÔºàÊàñNSArrayÔºåNSDictionaryÔºâÁªèÂ∏∏‰ΩøÁî® copy ÂÖ≥ÈîÆÂ≠óÔºå‰∏∫‰ªÄ‰πàÔºüÂ¶ÇÊûúÊîπÁî®strongÂÖ≥ÈîÆÂ≠óÔºåÂèØËÉΩÈÄ†Êàê‰ªÄ‰πàÈóÆÈ¢òÔºü„Äã ‰ª•Âèä‰∏äÊñá„ÄäÊÄé‰πàÁî® copy ÂÖ≥ÈîÆÂ≠óÔºü„Äã‰πüÊúâËÆ∫Ëø∞„ÄÇ ÊØîÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂ∞±‰ºöÂèëÁîüÂ¥©Ê∫É 123456// .hÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂ∞±‰ºöÂèëÁîüÂ¥©Ê∫É@property (nonatomic, copy) NSMutableArray *mutableArray; 12345678// .mÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂ∞±‰ºöÂèëÁîüÂ¥©Ê∫ÉNSMutableArray *array = [NSMutableArray arrayWithObjects:@1,@2,nil];self.mutableArray = array;[self.mutableArray removeObjectAtIndex:0]; Êé•‰∏ãÊù•Â∞±‰ºöÂ•îÊ∫ÉÔºö 1-[__NSArrayI removeObjectAtIndex:]: unrecognized selector sent to instance 0x7fcd1bc30460 Á¨¨2Êù°ÂéüÂõ†ÔºåÂ¶Ç‰∏ãÔºö ËØ•Â±ûÊÄß‰ΩøÁî®‰∫ÜËá™ÊóãÈîÅÔºå‰ºöÂú®ÂàõÂª∫Êó∂ÁîüÊàê‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰ª£Á†ÅÁî®‰∫éÂ∏ÆÂä©ÁºñÂÜôÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÔºåËøô‰ºöÂ∏¶Êù•ÊÄßËÉΩÈóÆÈ¢òÔºåÈÄöËøáÂ£∞Êòé nonatomic ÂèØ‰ª•ËäÇÁúÅËøô‰∫õËôΩÁÑ∂ÂæàÂ∞è‰ΩÜÊòØ‰∏çÂøÖË¶ÅÈ¢ùÂ§ñÂºÄÈîÄ„ÄÇ Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÁî±ÁºñËØëÂô®ÊâÄÂêàÊàêÁöÑÊñπÊ≥ï‰ºöÈÄöËøáÈîÅÂÆöÊú∫Âà∂Á°Æ‰øùÂÖ∂ÂéüÂ≠êÊÄß(atomicity)„ÄÇÂ¶ÇÊûúÂ±ûÊÄßÂÖ∑Â§á nonatomic ÁâπË¥®ÔºåÂàô‰∏ç‰ΩøÁî®Ëá™ÊóãÈîÅ„ÄÇËØ∑Ê≥®ÊÑèÔºåÂ∞ΩÁÆ°Ê≤°ÊúâÂêç‰∏∫‚Äúatomic‚ÄùÁöÑÁâπË¥®(Â¶ÇÊûúÊüêÂ±ûÊÄß‰∏çÂÖ∑Â§á nonatomic ÁâπË¥®ÔºåÈÇ£ÂÆÉÂ∞±ÊòØ‚ÄúÂéüÂ≠êÁöÑ‚Äù(atomic))„ÄÇ Âú®iOSÂºÄÂèë‰∏≠Ôºå‰Ω†‰ºöÂèëÁé∞ÔºåÂá†‰πéÊâÄÊúâÂ±ûÊÄßÈÉΩÂ£∞Êòé‰∏∫ nonatomic„ÄÇ ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÂπ∂‰∏çË¶ÅÊ±ÇÂ±ûÊÄßÂøÖÈ°ªÊòØ‚ÄúÂéüÂ≠êÁöÑ‚ÄùÔºåÂõ†‰∏∫ËøôÂπ∂‰∏çËÉΩ‰øùËØÅ‚ÄúÁ∫øÁ®ãÂÆâÂÖ®‚Äù ( thread safety)ÔºåËã•Ë¶ÅÂÆûÁé∞‚ÄúÁ∫øÁ®ãÂÆâÂÖ®‚ÄùÁöÑÊìç‰ΩúÔºåËøòÈúÄÈááÁî®Êõ¥‰∏∫Ê∑±Â±ÇÁöÑÈîÅÂÆöÊú∫Âà∂ÊâçË°å„ÄÇ‰æãÂ¶ÇÔºå‰∏Ä‰∏™Á∫øÁ®ãÂú®ËøûÁª≠Â§öÊ¨°ËØªÂèñÊüêÂ±ûÊÄßÂÄºÁöÑËøáÁ®ã‰∏≠ÊúâÂà´ÁöÑÁ∫øÁ®ãÂú®ÂêåÊó∂ÊîπÂÜôËØ•ÂÄºÔºåÈÇ£‰πàÂç≥‰æøÂ∞ÜÂ±ûÊÄßÂ£∞Êòé‰∏∫ atomicÔºå‰πüËøòÊòØ‰ºöËØªÂà∞‰∏çÂêåÁöÑÂ±ûÊÄßÂÄº„ÄÇ Âõ†Ê≠§ÔºåÂºÄÂèëiOSÁ®ãÂ∫èÊó∂‰∏ÄËà¨ÈÉΩ‰ºö‰ΩøÁî® nonatomic Â±ûÊÄß„ÄÇ‰ΩÜÊòØÂú®ÂºÄÂèë Mac OS X Á®ãÂ∫èÊó∂Ôºå‰ΩøÁî® atomic Â±ûÊÄßÈÄöÂ∏∏ÈÉΩ‰∏ç‰ºöÊúâÊÄßËÉΩÁì∂È¢à„ÄÇ 5. Â¶Ç‰ΩïËÆ©Ëá™Â∑±ÁöÑÁ±ªÁî® copy ‰øÆÈ•∞Á¨¶ÔºüÂ¶Ç‰ΩïÈáçÂÜôÂ∏¶ copy ÂÖ≥ÈîÆÂ≠óÁöÑ setterÔºü Ëã•ÊÉ≥‰ª§Ëá™Â∑±ÊâÄÂÜôÁöÑÂØπË±°ÂÖ∑ÊúâÊã∑Ë¥ùÂäüËÉΩÔºåÂàôÈúÄÂÆûÁé∞ NSCopying ÂçèËÆÆ„ÄÇÂ¶ÇÊûúËá™ÂÆö‰πâÁöÑÂØπË±°ÂàÜ‰∏∫ÂèØÂèòÁâàÊú¨‰∏é‰∏çÂèØÂèòÁâàÊú¨ÔºåÈÇ£‰πàÂ∞±Ë¶ÅÂêåÊó∂ÂÆûÁé∞ NSCopying ‰∏é NSMutableCopying ÂçèËÆÆ„ÄÇ ÂÖ∑‰ΩìÊ≠•È™§Ôºö ÈúÄÂ£∞ÊòéËØ•Á±ªÈÅµ‰ªé NSCopying ÂçèËÆÆ ÂÆûÁé∞ NSCopying ÂçèËÆÆ„ÄÇËØ•ÂçèËÆÆÂè™Êúâ‰∏Ä‰∏™ÊñπÊ≥ï: 1- (id)copyWithZone:(NSZone *)zone; Ê≥®ÊÑèÔºö‰∏ÄÊèêÂà∞ËÆ©Ëá™Â∑±ÁöÑÁ±ªÁî® copy ‰øÆÈ•∞Á¨¶ÔºåÊàë‰ª¨ÊÄªÊòØÊÉ≥Ë¶ÜÂÜôcopyÊñπÊ≥ïÔºåÂÖ∂ÂÆûÁúüÊ≠£ÈúÄË¶ÅÂÆûÁé∞ÁöÑÂç¥ÊòØ ‚ÄúcopyWithZone‚Äù ÊñπÊ≥ï„ÄÇ ‰ª•Á¨¨‰∏ÄÈ¢òÁöÑ‰ª£Á†Å‰∏∫‰æãÔºö 1234567891011121314151617181920// .hÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ‰øÆÊîπÂÆåÁöÑ‰ª£Á†Åtypedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman};@interface CYLUser : NSObject&lt;NSCopying&gt;@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readonly, assign) CYLSex sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;@end ÁÑ∂ÂêéÂÆûÁé∞ÂçèËÆÆ‰∏≠ËßÑÂÆöÁöÑÊñπÊ≥ïÔºö 1234567- (id)copyWithZone:(NSZone *)zone { CYLUser *copy = [[[self class] allocWithZone:zone] initWithName:_name age:_age sex:_sex]; return copy;} ‰ΩÜÂú®ÂÆûÈôÖÁöÑÈ°πÁõÆ‰∏≠Ôºå‰∏çÂèØËÉΩËøô‰πàÁÆÄÂçïÔºåÈÅáÂà∞Êõ¥Â§çÊùÇ‰∏ÄÁÇπÔºåÊØîÂ¶ÇÁ±ªÂØπË±°‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑÂèØËÉΩÂπ∂Êú™Âú®ÂàùÂßãÂåñÊñπÊ≥ï‰∏≠ËÆæÁΩÆÂ•ΩÔºåÈúÄË¶ÅÂè¶Ë°åËÆæÁΩÆ„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºåÂÅáÂ¶Ç CYLUser ‰∏≠Âê´Êúâ‰∏Ä‰∏™Êï∞ÁªÑÔºå‰∏éÂÖ∂‰ªñ CYLUser ÂØπË±°Âª∫Á´ãÊàñËß£Èô§ÊúãÂèãÂÖ≥Á≥ªÁöÑÈÇ£‰∫õÊñπÊ≥ïÈÉΩÈúÄË¶ÅÊìç‰ΩúËøô‰∏™Êï∞ÁªÑ„ÄÇÈÇ£‰πàÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂæóÊääËøô‰∏™ÂåÖÂê´ÊúãÂèãÂØπË±°ÁöÑÊï∞ÁªÑ‰πü‰∏ÄÂπ∂Êã∑Ë¥ùËøáÊù•„ÄÇ‰∏ãÈù¢ÂàóÂá∫‰∫ÜÂÆûÁé∞Ê≠§ÂäüËÉΩÊâÄÈúÄÁöÑÂÖ®ÈÉ®‰ª£Á†Å: 12345678910111213141516171819202122// .hÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// ‰ª•Á¨¨‰∏ÄÈ¢ò„ÄäÈ£éÊ†ºÁ∫†ÈîôÈ¢ò„ÄãÈáåÁöÑ‰ª£Á†Å‰∏∫‰æãtypedef NS_ENUM(NSInteger, CYLSex) { CYLSexMan, CYLSexWoman};@interface CYLUser : NSObject&lt;NSCopying&gt;@property (nonatomic, readonly, copy) NSString *name;@property (nonatomic, readonly, assign) NSUInteger age;@property (nonatomic, readonly, assign) CYLSex sex;- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;- (void)addFriend:(CYLUser *)user;- (void)removeFriend:(CYLUser *)user;@end // .mÊñá‰ª∂ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253// .mÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong//@implementation CYLUser { NSMutableSet *_friends;}- (void)setName:(NSString *)name { _name = [name copy];}- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex { if(self = [super init]) { _name = [name copy]; _age = age; _sex = sex; _friends = [[NSMutableSet alloc] init]; } return self;}- (void)addFriend:(CYLUser *)user { [_friends addObject:user];}- (void)removeFriend:(CYLUser *)user { [_friends removeObject:user];}- (id)copyWithZone:(NSZone *)zone { CYLUser *copy = [[[self class] allocWithZone:zone] initWithName:_name age:_age sex:_sex]; copy-&gt;_friends = [_friends mutableCopy]; return copy;}- (id)deepCopy { CYLUser *copy = [[[self class] alloc] initWithName:_name age:_age sex:_sex]; copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends copyItems:YES]; return copy;}@end ‰ª•‰∏äÂÅöÊ≥ïËÉΩÊª°Ë∂≥Âü∫Êú¨ÁöÑÈúÄÊ±ÇÔºå‰ΩÜÊòØ‰πüÊúâÁº∫Èô∑Ôºö Â¶ÇÊûú‰Ω†ÊâÄÂÜôÁöÑÂØπË±°ÈúÄË¶ÅÊ∑±Êã∑Ë¥ùÔºåÈÇ£‰πàÂèØËÄÉËôëÊñ∞Â¢û‰∏Ä‰∏™‰∏ìÈó®ÊâßË°åÊ∑±Êã∑Ë¥ùÁöÑÊñπÊ≥ï„ÄÇ „ÄêÊ≥®ÔºöÊ∑±ÊµÖÊã∑Ë¥ùÁöÑÊ¶ÇÂøµÔºåÂú®‰∏ãÊñá‰∏≠Êúâ‰ªãÁªçÔºåËØ¶ËßÅ‰∏ãÊñáÁöÑÔºöÁî®@propertyÂ£∞ÊòéÁöÑ NSStringÔºàÊàñNSArrayÔºåNSDictionaryÔºâÁªèÂ∏∏‰ΩøÁî® copy ÂÖ≥ÈîÆÂ≠óÔºå‰∏∫‰ªÄ‰πàÔºüÂ¶ÇÊûúÊîπÁî® strong ÂÖ≥ÈîÆÂ≠óÔºåÂèØËÉΩÈÄ†Êàê‰ªÄ‰πàÈóÆÈ¢òÔºü„Äë Âú®‰æãÂ≠ê‰∏≠ÔºåÂ≠òÊîæÊúãÂèãÂØπË±°ÁöÑ set ÊòØÁî® ‚ÄúcopyWithZone:‚Äù ÊñπÊ≥ïÊù•Êã∑Ë¥ùÁöÑÔºåËøôÁßçÊµÖÊã∑Ë¥ùÊñπÂºè‰∏ç‰ºöÈÄê‰∏™Â§çÂà∂ set ‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇËã•ÈúÄË¶ÅÊ∑±Êã∑Ë¥ùÁöÑËØùÔºåÂàôÂèØÂÉè‰∏ãÈù¢ËøôÊ†∑ÔºåÁºñÂÜô‰∏Ä‰∏™‰∏ì‰æõÊ∑±Êã∑Ë¥ùÊâÄÁî®ÁöÑÊñπÊ≥ï: 123456789- (id)deepCopy { CYLUser *copy = [[[self class] alloc] initWithName:_name age:_age sex:_sex]; copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends copyItems:YES]; return copy;} Ëá≥‰∫éÂ¶Ç‰ΩïÈáçÂÜôÂ∏¶ copy ÂÖ≥ÈîÆÂ≠óÁöÑ setterËøô‰∏™ÈóÆÈ¢òÔºå Â¶ÇÊûúÊäõÂºÄÊú¨‰æãÊù•ÂõûÁ≠îÁöÑËØùÔºåÂ¶Ç‰∏ãÔºö 1234- (void)setName:(NSString *)name { //[_name release]; _name = [name copy];} ‰∏çËøá‰πüÊúâ‰∫âËÆÆÔºåÊúâ‰∫∫ËØ¥‚ÄúËãπÊûúÂ¶ÇÊûúÂÉè‰∏ãÈù¢ËøôÊ†∑Âπ≤ÔºåÊòØ‰∏çÊòØÊïàÁéá‰ºöÈ´ò‰∏Ä‰∫õÔºü‚Äù 123456- (void)setName:(NSString *)name { if (_name != name) { //[_name release];//MRC _name = [name copy]; }} ËøôÊ†∑ÁúüÂæóÈ´òÊïàÂêóÔºü‰∏çËßÅÂæóÔºÅËøôÁßçÂÜôÊ≥ï‚ÄúÁúã‰∏äÂéªÂæàÁæé„ÄÅÂæàÂêàÁêÜ‚ÄùÔºå‰ΩÜÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÔºåÂÆÉÊõ¥ÂÉè‰∏ãÂõæÈáåÁöÑÂÅöÊ≥ïÔºö ÂÖãÂº∫ÊÄªÁêÜËøôÊ†∑ËØÑ‰ª∑‰Ω†ÁöÑ‰ª£Á†ÅÈ£éÊ†ºÔºö ÊàëÂíåÊÄªÁêÜÁöÑÊÑèËßÅÂü∫Êú¨‰∏ÄËá¥Ôºö ËÄÅÁôæÂßì copy ‰∏Ä‰∏ãÔºåÂíãÂ∞±Ëøô‰πàÈöæÔºü ‰Ω†ÂèØËÉΩ‰ºöËØ¥Ôºö ‰πãÊâÄ‰ª•Âú®ËøôÈáåÂÅöifÂà§Êñ≠ Ëøô‰∏™Êìç‰ΩúÔºöÊòØÂõ†‰∏∫‰∏Ä‰∏™ if ÂèØËÉΩÈÅøÂÖç‰∏Ä‰∏™ËÄóÊó∂ÁöÑcopyÔºåËøòÊòØÂæàÂàíÁÆóÁöÑ„ÄÇ(Âú®ÂàöÂàöËÆ≤ÁöÑÔºö„ÄäÂ¶Ç‰ΩïËÆ©Ëá™Â∑±ÁöÑÁ±ªÁî® copy ‰øÆÈ•∞Á¨¶Ôºü„ÄãÈáåÁöÑÈÇ£ÁßçÂ§çÊùÇÁöÑcopyÔºåÊàë‰ª¨ÂèØ‰ª•Áß∞‰πã‰∏∫ ‚ÄúËÄóÊó∂ÁöÑcopy‚ÄùÔºå‰ΩÜÊòØÂØπ NSString ÁöÑ copy ËøòÁß∞‰∏ç‰∏ä„ÄÇ) ‰ΩÜÊòØ‰Ω†ÊúâÊ≤°ÊúâËÄÉËôëËøá‰ª£‰ª∑Ôºö ‰Ω†ÊØèÊ¨°Ë∞ÉÁî® setX: ÈÉΩ‰ºöÂÅö if Âà§Êñ≠ÔºåËøô‰ºöËÆ© setX: ÂèòÊÖ¢ÔºåÂ¶ÇÊûú‰Ω†Âú® setX:ÂÜô‰∫Ü‰∏Ä‰∏≤Â§çÊùÇÁöÑ if+elseif+elseif+... Âà§Êñ≠ÔºåÂ∞Ü‰ºöÊõ¥ÊÖ¢„ÄÇ Ë¶ÅÂõûÁ≠î‚ÄúÂì™‰∏™ÊïàÁéá‰ºöÈ´ò‰∏Ä‰∫õÔºü‚ÄùËøô‰∏™ÈóÆÈ¢òÔºå‰∏çËÉΩËÑ±Á¶ªÂÆûÈôÖÂºÄÂèëÔºåÂ∞±ÁÆó copy Êìç‰ΩúÂçÅÂàÜËÄóÊó∂Ôºåif Âà§Êñ≠‰πü‰∏çËßÅÂæó‰∏ÄÂÆö‰ºöÊõ¥Âø´ÔºåÈô§Èùû‰Ω†Êää‰∏Ä‰∏™‚Äú @property‰ªñÂΩìÂâçÁöÑÂÄº ‚ÄùËµãÁªô‰∫Ü‰ªñËá™Â∑±Ôºå‰ª£Á†ÅÁúãËµ∑Êù•Â∞±ÂÉèÔºö 12[a setX:x1];[a setX:x1]; //‰Ω†Á°ÆÂÆö‰Ω†Ë¶ÅËøô‰πàÂπ≤Ôºü‰∏éÂÖ∂Âú®setter‰∏≠Âà§Êñ≠Ôºå‰∏∫‰ªÄ‰πà‰∏çÊää‰ª£Á†ÅÂÜôÂ•ΩÔºü ÊàñËÄÖ 1[a setX:[a x]]; //ÈòüÂèãÂíÜÂìÆÈÅìÔºö‰Ω†Âú®Âπ≤ÂòõÔºüÔºÅÔºÅ ‰∏çË¶ÅÂú® setter ÈáåËøõË°åÂÉè if(_obj != newObj) ËøôÊ†∑ÁöÑÂà§Êñ≠„ÄÇÔºàËØ•ËßÇÁÇπÂèÇËÄÉÈìæÊé•Ôºö How To Write Cocoa Object SettersÔºö Principle 3: Only Optimize After You Measure Ôºâ ‰ªÄ‰πàÊÉÖÂÜµ‰ºöÂú® copy setter ÈáåÂÅö if Âà§Êñ≠Ôºü‰æãÂ¶ÇÔºåËΩ¶ÈÄüÂèØËÉΩÂ∞±ÊúâÊúÄÈ´òÈÄüÁöÑÈôêÂà∂ÔºåËΩ¶ÈÄü‰πü‰∏çÂèØËÉΩÂá∫Áé∞Ë¥üÂÄºÔºåÂ¶ÇÊûúËΩ¶Â≠êÁöÑÊúÄÈ´òÈÄü‰∏∫300ÔºåÂàô setter ÁöÑÊñπÊ≥ïÂ∞±Ë¶ÅÊîπÂÜôÊàêËøôÊ†∑Ôºö 12345-(void)setSpeed:(int)_speed{ if(_speed &lt; 0) speed = 0; if(_speed &gt; 300) speed = 300; _speed = speed;} ÂõûÂà∞Ëøô‰∏™È¢òÁõÆÔºåÂ¶ÇÊûúÂçïÂçïÂ∞±‰∏äÊñáÁöÑ‰ª£Á†ÅËÄåË®ÄÔºåÊàë‰ª¨‰∏çÈúÄË¶Å‰πü‰∏çËÉΩÈáçÂÜô name ÁöÑ setter ÔºöÁî±‰∫éÊòØ name ÊòØÂè™ËØªÂ±ûÊÄßÔºåÊâÄ‰ª•ÁºñËØëÂô®‰∏ç‰ºö‰∏∫ÂÖ∂ÂàõÂª∫ÂØπÂ∫îÁöÑ‚ÄúËÆæÁΩÆÊñπÊ≥ï‚ÄùÔºåÁî®ÂàùÂßãÂåñÊñπÊ≥ïËÆæÁΩÆÂ•ΩÂ±ûÊÄßÂÄº‰πãÂêéÔºåÂ∞±‰∏çËÉΩÂÜçÊîπÂèò‰∫Ü„ÄÇÔºà Âú®Êú¨‰æã‰∏≠Ôºå‰πãÊâÄ‰ª•ËøòË¶ÅÂ£∞ÊòéÂ±ûÊÄßÁöÑ‚ÄúÂÜÖÂ≠òÁÆ°ÁêÜËØ≠‰πâ‚Äù‚ÄìcopyÔºåÊòØÂõ†‰∏∫ÔºöÂ¶ÇÊûú‰∏çÂÜô copyÔºåËØ•Á±ªÁöÑË∞ÉÁî®ËÄÖÂ∞±‰∏çÁü•ÈÅìÂàùÂßãÂåñÊñπÊ≥ïÈáå‰ºöÊã∑Ë¥ùËøô‰∫õÂ±ûÊÄßÔºå‰ªñ‰ª¨ÊúâÂèØËÉΩ‰ºöÂú®Ë∞ÉÁî®ÂàùÂßãÂåñÊñπÊ≥ï‰πãÂâçËá™Ë°åÊã∑Ë¥ùÂ±ûÊÄßÂÄº„ÄÇËøôÁßçÊìç‰ΩúÂ§ö‰ΩôËÄå‰ΩéÊïàÔºâ„ÄÇ ÈÇ£Â¶Ç‰ΩïÁ°Æ‰øù name Ë¢´ copyÔºüÂú®ÂàùÂßãÂåñÊñπÊ≥ï(initializer)‰∏≠ÂÅöÔºö 1234567891011- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex { if(self = [super init]) { _name = [name copy]; _age = age; _sex = sex; _friends = [[NSMutableSet alloc] init]; } return self;} 6. @property ÁöÑÊú¨Ë¥®ÊòØ‰ªÄ‰πàÔºüivar„ÄÅgetter„ÄÅsetter ÊòØÂ¶Ç‰ΩïÁîüÊàêÂπ∂Ê∑ªÂä†Âà∞Ëøô‰∏™Á±ª‰∏≠ÁöÑ@property ÁöÑÊú¨Ë¥®ÊòØ‰ªÄ‰πàÔºü @property = ivar + getter + setter; ‰∏ãÈù¢Ëß£Èáä‰∏ãÔºö ‚ÄúÂ±ûÊÄß‚Äù (property)Êúâ‰∏§Â§ßÊ¶ÇÂøµÔºöivarÔºàÂÆû‰æãÂèòÈáèÔºâ„ÄÅÂ≠òÂèñÊñπÊ≥ïÔºàaccess method Ôºù getter + setterÔºâ„ÄÇ ‚ÄúÂ±ûÊÄß‚Äù (property)‰Ωú‰∏∫ Objective-C ÁöÑ‰∏ÄÈ°πÁâπÊÄßÔºå‰∏ªË¶ÅÁöÑ‰ΩúÁî®Â∞±Âú®‰∫éÂ∞ÅË£ÖÂØπË±°‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ Objective-C ÂØπË±°ÈÄöÂ∏∏‰ºöÊääÂÖ∂ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆ‰øùÂ≠ò‰∏∫ÂêÑÁßçÂÆû‰æãÂèòÈáè„ÄÇÂÆû‰æãÂèòÈáè‰∏ÄËà¨ÈÄöËøá‚ÄúÂ≠òÂèñÊñπÊ≥ï‚Äù(access method)Êù•ËÆøÈóÆ„ÄÇÂÖ∂‰∏≠Ôºå‚ÄúËé∑ÂèñÊñπÊ≥ï‚Äù (getter)Áî®‰∫éËØªÂèñÂèòÈáèÂÄºÔºåËÄå‚ÄúËÆæÁΩÆÊñπÊ≥ï‚Äù (setter)Áî®‰∫éÂÜôÂÖ•ÂèòÈáèÂÄº„ÄÇËøô‰∏™Ê¶ÇÂøµÂ∑≤ÁªèÂÆöÂûãÔºåÂπ∂‰∏îÁªèÁî±‚ÄúÂ±ûÊÄß‚ÄùËøô‰∏ÄÁâπÊÄßËÄåÊàê‰∏∫ Objective-C 2.0 ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇËÄåÂú®Ê≠£ËßÑÁöÑ Objective-C ÁºñÁ†ÅÈ£éÊ†º‰∏≠ÔºåÂ≠òÂèñÊñπÊ≥ïÊúâÁùÄ‰∏•Ê†ºÁöÑÂëΩÂêçËßÑËåÉ„ÄÇÊ≠£Âõ†‰∏∫Êúâ‰∫ÜËøôÁßç‰∏•Ê†ºÁöÑÂëΩÂêçËßÑËåÉÔºåÊâÄ‰ª• Objective-C ËøôÈó®ËØ≠Ë®ÄÊâçËÉΩÊ†πÊçÆÂêçÁß∞Ëá™Âä®ÂàõÂª∫Âá∫Â≠òÂèñÊñπÊ≥ï„ÄÇÂÖ∂ÂÆû‰πüÂèØ‰ª•ÊääÂ±ûÊÄßÂΩìÂÅö‰∏ÄÁßçÂÖ≥ÈîÆÂ≠óÔºåÂÖ∂Ë°®Á§∫: ÁºñËØëÂô®‰ºöËá™Âä®ÂÜôÂá∫‰∏ÄÂ•óÂ≠òÂèñÊñπÊ≥ïÔºåÁî®‰ª•ËÆøÈóÆÁªôÂÆöÁ±ªÂûã‰∏≠ÂÖ∑ÊúâÁªôÂÆöÂêçÁß∞ÁöÑÂèòÈáè„ÄÇÊâÄ‰ª•‰Ω†‰πüÂèØ‰ª•Ëøô‰πàËØ¥Ôºö @property = getter + setter; ‰æãÂ¶Ç‰∏ãÈù¢Ëøô‰∏™Á±ªÔºö 1234@interface Person : NSObject@property NSString *firstName;@property NSString *lastName;@end ‰∏äËø∞‰ª£Á†ÅÂÜôÂá∫Êù•ÁöÑÁ±ª‰∏é‰∏ãÈù¢ËøôÁßçÂÜôÊ≥ïÁ≠âÊïàÔºö 123456@interface Person : NSObject- (NSString *)firstName;- (void)setFirstName:(NSString *)firstName;- (NSString *)lastName;- (void)setLastName:(NSString *)lastName;@end Êõ¥Êñ∞Ôºö propertyÂú®runtime‰∏≠ÊòØobjc_property_tÂÆö‰πâÂ¶Ç‰∏ã: 1typedef struct objc_property *objc_property_t; ËÄåobjc_propertyÊòØ‰∏Ä‰∏™ÁªìÊûÑ‰ΩìÔºåÂåÖÊã¨nameÂíåattributesÔºåÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234struct property_t { const char *name; const char *attributes;}; ËÄåattributesÊú¨Ë¥®ÊòØobjc_property_attribute_tÔºåÂÆö‰πâ‰∫ÜpropertyÁöÑ‰∏Ä‰∫õÂ±ûÊÄßÔºåÂÆö‰πâÂ¶Ç‰∏ãÔºö 12345/// Defines a property attributetypedef struct { const char *name; /**&lt; The name of the attribute */ const char *value; /**&lt; The value of the attribute (usually empty) */} objc_property_attribute_t; ËÄåattributesÁöÑÂÖ∑‰ΩìÂÜÖÂÆπÊòØ‰ªÄ‰πàÂë¢ÔºüÂÖ∂ÂÆûÔºåÂåÖÊã¨ÔºöÁ±ªÂûãÔºåÂéüÂ≠êÊÄßÔºåÂÜÖÂ≠òËØ≠‰πâÂíåÂØπÂ∫îÁöÑÂÆû‰æãÂèòÈáè„ÄÇ ‰æãÂ¶ÇÔºöÊàë‰ª¨ÂÆö‰πâ‰∏Ä‰∏™stringÁöÑproperty@property (nonatomic, copy) NSString *string;ÔºåÈÄöËøá property_getAttributes(property)Ëé∑ÂèñÂà∞attributesÂπ∂ÊâìÂç∞Âá∫Êù•‰πãÂêéÁöÑÁªìÊûú‰∏∫T@&quot;NSString&quot;,C,N,V_string ÂÖ∂‰∏≠TÂ∞±‰ª£Ë°®Á±ªÂûãÔºåÂèØÂèÇÈòÖType EncodingsÔºåCÂ∞±‰ª£Ë°®CopyÔºåN‰ª£Ë°®nonatomicÔºåVÂ∞±‰ª£Ë°®ÂØπÂ∫îÁöÑÂÆû‰æãÂèòÈáè„ÄÇ ivar„ÄÅgetter„ÄÅsetter ÊòØÂ¶Ç‰ΩïÁîüÊàêÂπ∂Ê∑ªÂä†Âà∞Ëøô‰∏™Á±ª‰∏≠ÁöÑ? ‚ÄúËá™Âä®ÂêàÊàê‚Äù( autosynthesis) ÂÆåÊàêÂ±ûÊÄßÂÆö‰πâÂêéÔºåÁºñËØëÂô®‰ºöËá™Âä®ÁºñÂÜôËÆøÈóÆËøô‰∫õÂ±ûÊÄßÊâÄÈúÄÁöÑÊñπÊ≥ïÔºåÊ≠§ËøáÁ®ãÂè´ÂÅö‚ÄúËá™Âä®ÂêàÊàê‚Äù(autosynthesis)„ÄÇÈúÄË¶ÅÂº∫Ë∞ÉÁöÑÊòØÔºåËøô‰∏™ËøáÁ®ãÁî±ÁºñËØëÂô®Âú®ÁºñËØëÊúüÊâßË°åÔºåÊâÄ‰ª•ÁºñËæëÂô®ÈáåÁúã‰∏çÂà∞Ëøô‰∫õ‚ÄúÂêàÊàêÊñπÊ≥ï‚Äù(synthesized method)ÁöÑÊ∫ê‰ª£Á†Å„ÄÇÈô§‰∫ÜÁîüÊàêÊñπÊ≥ï‰ª£Á†Å getter„ÄÅsetter ‰πãÂ§ñÔºåÁºñËØëÂô®ËøòË¶ÅËá™Âä®ÂêëÁ±ª‰∏≠Ê∑ªÂä†ÈÄÇÂΩìÁ±ªÂûãÁöÑÂÆû‰æãÂèòÈáèÔºåÂπ∂‰∏îÂú®Â±ûÊÄßÂêçÂâçÈù¢Âä†‰∏ãÂàíÁ∫øÔºå‰ª•Ê≠§‰Ωú‰∏∫ÂÆû‰æãÂèòÈáèÁöÑÂêçÂ≠ó„ÄÇÂú®Ââç‰æã‰∏≠Ôºå‰ºöÁîüÊàê‰∏§‰∏™ÂÆû‰æãÂèòÈáèÔºåÂÖ∂ÂêçÁß∞ÂàÜÂà´‰∏∫ _firstName ‰∏é _lastName„ÄÇ‰πüÂèØ‰ª•Âú®Á±ªÁöÑÂÆûÁé∞‰ª£Á†ÅÈáåÈÄöËøá @synthesize ËØ≠Ê≥ïÊù•ÊåáÂÆöÂÆû‰æãÂèòÈáèÁöÑÂêçÂ≠ó. 1234@implementation Person@synthesize firstName = _myFirstName;@synthesize lastName = _myLastName;@end Êàë‰∏∫‰∫ÜÊêûÊ∏ÖÂ±ûÊÄßÊòØÊÄé‰πàÂÆûÁé∞ÁöÑ,ÊõæÁªèÂèçÁºñËØëËøáÁõ∏ÂÖ≥ÁöÑ‰ª£Á†Å,‰ªñÂ§ßËá¥ÁîüÊàê‰∫Ü‰∫î‰∏™‰∏úË•ø OBJC_IVAR_$Á±ªÂêç$Â±ûÊÄßÂêçÁß∞ ÔºöËØ•Â±ûÊÄßÁöÑ‚ÄúÂÅèÁßªÈáè‚Äù (offset)ÔºåËøô‰∏™ÂÅèÁßªÈáèÊòØ‚ÄúÁ°¨ÁºñÁ†Å‚Äù (hardcode)ÔºåË°®Á§∫ËØ•ÂèòÈáèË∑ùÁ¶ªÂ≠òÊîæÂØπË±°ÁöÑÂÜÖÂ≠òÂå∫ÂüüÁöÑËµ∑ÂßãÂú∞ÂùÄÊúâÂ§öËøú„ÄÇ setter ‰∏é getter ÊñπÊ≥ïÂØπÂ∫îÁöÑÂÆûÁé∞ÂáΩÊï∞ ivar_list ÔºöÊàêÂëòÂèòÈáèÂàóË°® method_list ÔºöÊñπÊ≥ïÂàóË°® prop_list ÔºöÂ±ûÊÄßÂàóË°® ‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÊØèÊ¨°Âú®Â¢ûÂä†‰∏Ä‰∏™Â±ûÊÄß,Á≥ªÁªüÈÉΩ‰ºöÂú® ivar_list ‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ÊàêÂëòÂèòÈáèÁöÑÊèèËø∞,Âú® method_list ‰∏≠Â¢ûÂä† setter ‰∏é getter ÊñπÊ≥ïÁöÑÊèèËø∞,Âú®Â±ûÊÄßÂàóË°®‰∏≠Â¢ûÂä†‰∏Ä‰∏™Â±ûÊÄßÁöÑÊèèËø∞,ÁÑ∂ÂêéËÆ°ÁÆóËØ•Â±ûÊÄßÂú®ÂØπË±°‰∏≠ÁöÑÂÅèÁßªÈáè,ÁÑ∂ÂêéÁªôÂá∫ setter ‰∏é getter ÊñπÊ≥ïÂØπÂ∫îÁöÑÂÆûÁé∞,Âú® setter ÊñπÊ≥ï‰∏≠‰ªéÂÅèÁßªÈáèÁöÑ‰ΩçÁΩÆÂºÄÂßãËµãÂÄº,Âú® getter ÊñπÊ≥ï‰∏≠‰ªéÂÅèÁßªÈáèÂºÄÂßãÂèñÂÄº,‰∏∫‰∫ÜËÉΩÂ§üËØªÂèñÊ≠£Á°ÆÂ≠óËäÇÊï∞,Á≥ªÁªüÂØπË±°ÂÅèÁßªÈáèÁöÑÊåáÈíàÁ±ªÂûãËøõË°å‰∫ÜÁ±ªÂûãÂº∫ËΩ¨. 7. @protocol Âíå category ‰∏≠Â¶Ç‰Ωï‰ΩøÁî® @property Âú® protocol ‰∏≠‰ΩøÁî® property Âè™‰ºöÁîüÊàê setter Âíå getter ÊñπÊ≥ïÂ£∞Êòé,Êàë‰ª¨‰ΩøÁî®Â±ûÊÄßÁöÑÁõÆÁöÑ,ÊòØÂ∏åÊúõÈÅµÂÆàÊàëÂçèËÆÆÁöÑÂØπË±°ËÉΩÂÆûÁé∞ËØ•Â±ûÊÄß category ‰ΩøÁî® @property ‰πüÊòØÂè™‰ºöÁîüÊàê setter Âíå getter ÊñπÊ≥ïÁöÑÂ£∞Êòé,Â¶ÇÊûúÊàë‰ª¨ÁúüÁöÑÈúÄË¶ÅÁªô category Â¢ûÂä†Â±ûÊÄßÁöÑÂÆûÁé∞,ÈúÄË¶ÅÂÄüÂä©‰∫éËøêË°åÊó∂ÁöÑ‰∏§‰∏™ÂáΩÊï∞Ôºö objc_setAssociatedObject objc_getAssociatedObject 8. runtime Â¶Ç‰ΩïÂÆûÁé∞ weak Â±ûÊÄßË¶ÅÂÆûÁé∞ weak Â±ûÊÄßÔºåÈ¶ñÂÖàË¶ÅÊêûÊ∏ÖÊ•ö weak Â±ûÊÄßÁöÑÁâπÁÇπÔºö weak Ê≠§ÁâπË¥®Ë°®ÊòéËØ•Â±ûÊÄßÂÆö‰πâ‰∫Ü‰∏ÄÁßç‚ÄúÈùûÊã•ÊúâÂÖ≥Á≥ª‚Äù (nonowning relationship)„ÄÇ‰∏∫ËøôÁßçÂ±ûÊÄßËÆæÁΩÆÊñ∞ÂÄºÊó∂ÔºåËÆæÁΩÆÊñπÊ≥ïÊó¢‰∏ç‰øùÁïôÊñ∞ÂÄºÔºå‰πü‰∏çÈáäÊîæÊóßÂÄº„ÄÇÊ≠§ÁâπË¥®Âêå assign Á±ª‰ººÔºå ÁÑ∂ËÄåÂú®Â±ûÊÄßÊâÄÊåáÁöÑÂØπË±°ÈÅ≠Âà∞ÊëßÊØÅÊó∂ÔºåÂ±ûÊÄßÂÄº‰πü‰ºöÊ∏ÖÁ©∫(nil out)„ÄÇ ÈÇ£‰πà runtime Â¶Ç‰ΩïÂÆûÁé∞ weak ÂèòÈáèÁöÑËá™Âä®ÁΩÆnilÔºü runtime ÂØπÊ≥®ÂÜåÁöÑÁ±ªÔºå ‰ºöËøõË°åÂ∏ÉÂ±ÄÔºåÂØπ‰∫é weak ÂØπË±°‰ºöÊîæÂÖ•‰∏Ä‰∏™ hash Ë°®‰∏≠„ÄÇ Áî® weak ÊåáÂêëÁöÑÂØπË±°ÂÜÖÂ≠òÂú∞ÂùÄ‰Ωú‰∏∫ keyÔºåÂΩìÊ≠§ÂØπË±°ÁöÑÂºïÁî®ËÆ°Êï∞‰∏∫0ÁöÑÊó∂ÂÄô‰ºö deallocÔºåÂÅáÂ¶Ç weak ÊåáÂêëÁöÑÂØπË±°ÂÜÖÂ≠òÂú∞ÂùÄÊòØaÔºåÈÇ£‰πàÂ∞±‰ºö‰ª•a‰∏∫ÈîÆÔºå Âú®Ëøô‰∏™ weak Ë°®‰∏≠ÊêúÁ¥¢ÔºåÊâæÂà∞ÊâÄÊúâ‰ª•a‰∏∫ÈîÆÁöÑ weak ÂØπË±°Ôºå‰ªéËÄåËÆæÁΩÆ‰∏∫ nil„ÄÇ ÔºàÊ≥®ÔºöÂú®‰∏ãÊñáÁöÑ„Ää‰ΩøÁî®runtime AssociateÊñπÊ≥ïÂÖ≥ËÅîÁöÑÂØπË±°ÔºåÈúÄË¶ÅÂú®‰∏ªÂØπË±°deallocÁöÑÊó∂ÂÄôÈáäÊîæ‰πàÔºü„ÄãÈáåÁªôÂá∫ÁöÑ‚ÄúÂØπË±°ÁöÑÂÜÖÂ≠òÈîÄÊØÅÊó∂Èó¥Ë°®‚Äù‰πüÊèêÂà∞__weakÂºïÁî®ÁöÑËß£Èô§Êó∂Èó¥„ÄÇÔºâ ÂÖàÁúã‰∏ã runtime ÈáåÊ∫êÁ†ÅÁöÑÂÆûÁé∞Ôºö 12345678910111213141516171819202122232425262728293031323334/** * The internal structure stored in the weak references table. * It maintains and stores * a hash set of weak references pointing to an object. * If out_of_line==0, the set is instead a small inline array. */#define WEAK_INLINE_COUNT 4struct weak_entry_t { DisguisedPtr&lt;objc_object&gt; referent; union { struct { weak_referrer_t *referrers; uintptr_t out_of_line : 1; uintptr_t num_refs : PTR_MINUS_1; uintptr_t mask; uintptr_t max_hash_displacement; }; struct { // out_of_line=0 is LSB of one of these (don&apos;t care which) weak_referrer_t inline_referrers[WEAK_INLINE_COUNT]; }; };};/** * The global weak references table. Stores object ids as keys, * and weak_entry_t structs as their values. */struct weak_table_t { weak_entry_t *weak_entries; size_t num_entries; uintptr_t mask; uintptr_t max_hash_displacement;}; ÂÖ∑‰ΩìÂÆåÊï¥ÂÆûÁé∞ÂèÇÁÖß objc/objc-weak.h „ÄÇ Êàë‰ª¨ÂèØ‰ª•ËÆæËÆ°‰∏Ä‰∏™ÂáΩÊï∞Ôºà‰º™‰ª£Á†ÅÔºâÊù•Ë°®Á§∫‰∏äËø∞Êú∫Âà∂Ôºö objc_storeWeak(&amp;a, b)ÂáΩÊï∞Ôºö objc_storeWeakÂáΩÊï∞ÊääÁ¨¨‰∫å‰∏™ÂèÇÊï∞‚ÄìËµãÂÄºÂØπË±°ÔºàbÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄ‰Ωú‰∏∫ÈîÆÂÄºkeyÔºåÂ∞ÜÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‚Äìweak‰øÆÈ•∞ÁöÑÂ±ûÊÄßÂèòÈáèÔºàaÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºà&amp;aÔºâ‰Ωú‰∏∫valueÔºåÊ≥®ÂÜåÂà∞ weak Ë°®‰∏≠„ÄÇÂ¶ÇÊûúÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºàbÔºâ‰∏∫0ÔºànilÔºâÔºåÈÇ£‰πàÊääÂèòÈáèÔºàaÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºà&amp;aÔºâ‰ªéweakË°®‰∏≠Âà†Èô§Ôºå ‰Ω†ÂèØ‰ª•Êääobjc_storeWeak(&amp;a, b)ÁêÜËß£‰∏∫Ôºöobjc_storeWeak(value, key)ÔºåÂπ∂‰∏îÂΩìkeyÂèònilÔºåÂ∞ÜvalueÁΩÆnil„ÄÇ Âú®bÈùûnilÊó∂ÔºåaÂíåbÊåáÂêëÂêå‰∏Ä‰∏™ÂÜÖÂ≠òÂú∞ÂùÄÔºåÂú®bÂèònilÊó∂ÔºåaÂèònil„ÄÇÊ≠§Êó∂ÂêëaÂèëÈÄÅÊ∂àÊÅØ‰∏ç‰ºöÂ¥©Ê∫ÉÔºöÂú®Objective-C‰∏≠ÂêënilÂèëÈÄÅÊ∂àÊÅØÊòØÂÆâÂÖ®ÁöÑ„ÄÇ ËÄåÂ¶ÇÊûúaÊòØÁî± assign ‰øÆÈ•∞ÁöÑÔºåÂàôÔºöÂú® b Èùû nil Êó∂Ôºåa Âíå b ÊåáÂêëÂêå‰∏Ä‰∏™ÂÜÖÂ≠òÂú∞ÂùÄÔºåÂú® b Âèò nil Êó∂Ôºåa ËøòÊòØÊåáÂêëËØ•ÂÜÖÂ≠òÂú∞ÂùÄÔºåÂèòÈáéÊåáÈíà„ÄÇÊ≠§Êó∂Âêë a ÂèëÈÄÅÊ∂àÊÅØÊûÅÊòìÂ¥©Ê∫É„ÄÇ ‰∏ãÈù¢Êàë‰ª¨Â∞ÜÂü∫‰∫éobjc_storeWeak(&amp;a, b)ÂáΩÊï∞Ôºå‰ΩøÁî®‰º™‰ª£Á†ÅÊ®°Êãü‚ÄúruntimeÂ¶Ç‰ΩïÂÆûÁé∞weakÂ±ûÊÄß‚ÄùÔºö 12345678// ‰ΩøÁî®‰º™‰ª£Á†ÅÊ®°ÊãüÔºöruntimeÂ¶Ç‰ΩïÂÆûÁé∞weakÂ±ûÊÄß// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong id obj1; objc_initWeak(&amp;obj1, obj);/*objÂºïÁî®ËÆ°Êï∞Âèò‰∏∫0ÔºåÂèòÈáè‰ΩúÁî®ÂüüÁªìÊùü*/ objc_destroyWeak(&amp;obj1); ‰∏ãÈù¢ÂØπÁî®Âà∞ÁöÑ‰∏§‰∏™ÊñπÊ≥ïobjc_initWeakÂíåobjc_destroyWeakÂÅö‰∏ãËß£ÈáäÔºö ÊÄª‰ΩìËØ¥Êù•Ôºå‰ΩúÁî®ÊòØÔºöÈÄöËøáobjc_initWeakÂáΩÊï∞ÂàùÂßãÂåñ‚ÄúÈôÑÊúâweak‰øÆÈ•∞Á¨¶ÁöÑÂèòÈáèÔºàobj1Ôºâ‚ÄùÔºåÂú®ÂèòÈáè‰ΩúÁî®ÂüüÁªìÊùüÊó∂ÈÄöËøáobjc_destoryWeakÂáΩÊï∞ÈáäÊîæËØ•ÂèòÈáèÔºàobj1Ôºâ„ÄÇ ‰∏ãÈù¢ÂàÜÂà´‰ªãÁªç‰∏ãÊñπÊ≥ïÁöÑÂÜÖÈÉ®ÂÆûÁé∞Ôºö objc_initWeakÂáΩÊï∞ÁöÑÂÆûÁé∞ÊòØËøôÊ†∑ÁöÑÔºöÂú®Â∞Ü‚ÄúÈôÑÊúâweak‰øÆÈ•∞Á¨¶ÁöÑÂèòÈáèÔºàobj1Ôºâ‚ÄùÂàùÂßãÂåñ‰∏∫0ÔºànilÔºâÂêéÔºå‰ºöÂ∞Ü‚ÄúËµãÂÄºÂØπË±°‚ÄùÔºàobjÔºâ‰Ωú‰∏∫ÂèÇÊï∞ÔºåË∞ÉÁî®objc_storeWeakÂáΩÊï∞„ÄÇ 12obj1 = 0Ôºõobj_storeWeak(&amp;obj1, obj); ‰πüÂ∞±ÊòØËØ¥Ôºö weak ‰øÆÈ•∞ÁöÑÊåáÈíàÈªòËÆ§ÂÄºÊòØ nil ÔºàÂú®Objective-C‰∏≠ÂêënilÂèëÈÄÅÊ∂àÊÅØÊòØÂÆâÂÖ®ÁöÑÔºâ ÁÑ∂Âêéobj_destroyWeakÂáΩÊï∞Â∞Ü0ÔºànilÔºâ‰Ωú‰∏∫ÂèÇÊï∞ÔºåË∞ÉÁî®objc_storeWeakÂáΩÊï∞„ÄÇ objc_storeWeak(&amp;obj1, 0); ÂâçÈù¢ÁöÑÊ∫ê‰ª£Á†Å‰∏é‰∏ãÂàóÊ∫ê‰ª£Á†ÅÁõ∏Âêå„ÄÇ 123456789// ‰ΩøÁî®‰º™‰ª£Á†ÅÊ®°ÊãüÔºöruntimeÂ¶Ç‰ΩïÂÆûÁé∞weakÂ±ûÊÄß// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilongid obj1;obj1 = 0;objc_storeWeak(&amp;obj1, obj);/* ... objÁöÑÂºïÁî®ËÆ°Êï∞Âèò‰∏∫0ÔºåË¢´ÁΩÆnil ... */objc_storeWeak(&amp;obj1, 0); objc_storeWeak ÂáΩÊï∞ÊääÁ¨¨‰∫å‰∏™ÂèÇÊï∞‚ÄìËµãÂÄºÂØπË±°ÔºàobjÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄ‰Ωú‰∏∫ÈîÆÂÄºÔºåÂ∞ÜÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‚Äìweak‰øÆÈ•∞ÁöÑÂ±ûÊÄßÂèòÈáèÔºàobj1ÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊ≥®ÂÜåÂà∞ weak Ë°®‰∏≠„ÄÇÂ¶ÇÊûúÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºàobjÔºâ‰∏∫0ÔºànilÔºâÔºåÈÇ£‰πàÊääÂèòÈáèÔºàobj1ÔºâÁöÑÂú∞ÂùÄ‰ªé weak Ë°®‰∏≠Âà†Èô§ÔºåÂú®ÂêéÈù¢ÁöÑÁõ∏ÂÖ≥‰∏ÄÈ¢ò‰ºöËØ¶Ëß£„ÄÇ ‰ΩøÁî®‰º™‰ª£Á†ÅÊòØ‰∏∫‰∫ÜÊñπ‰æøÁêÜËß£Ôºå‰∏ãÈù¢Êàë‰ª¨‚ÄúÁúüÊû™ÂÆûÂºπ‚ÄùÂú∞ÂÆûÁé∞‰∏ãÔºö Â¶Ç‰ΩïËÆ©‰∏ç‰ΩøÁî®weak‰øÆÈ•∞ÁöÑ@propertyÔºåÊã•ÊúâweakÁöÑÊïàÊûú„ÄÇ Êàë‰ª¨‰ªésetterÊñπÊ≥ïÂÖ•ÊâãÔºö ÔºàÊ≥®ÊÑè‰ª•‰∏ãÁöÑ cyl_runAtDealloc ÊñπÊ≥ïÂÆûÁé∞‰ªÖ‰ªÖÁî®‰∫éÊ®°ÊãüÂéüÁêÜÔºåÂ¶ÇÊûúÊÉ≥Áî®‰∫éÈ°πÁõÆ‰∏≠ÔºåËøòÈúÄË¶ÅËÄÉËôëÊõ¥Â§çÊùÇÁöÑÂú∫ÊôØÔºåÊÉ≥Âú®ÂÆûÈôÖÈ°πÁõÆ‰ΩøÁî®ÁöÑËØùÔºåÂèØ‰ª•‰ΩøÁî®ÊàëÂÜôÁöÑ‰∏Ä‰∏™Â∞èÂ∫ìÔºåÂèØ‰ª•‰ΩøÁî® CocoaPods Âú®È°πÁõÆ‰∏≠‰ΩøÁî®Ôºö CYLDeallocBlockExecutor Ôºâ 1234567- (void)setObject:(NSObject *)object{ objc_setAssociatedObject(self, &quot;object&quot;, object, OBJC_ASSOCIATION_ASSIGN); [object cyl_runAtDealloc:^{ _object = nil; }];} ‰πüÂ∞±ÊòØÊúâ‰∏§‰∏™Ê≠•È™§Ôºö Âú®setterÊñπÊ≥ï‰∏≠ÂÅöÂ¶Ç‰∏ãËÆæÁΩÆÔºö 1objc_setAssociatedObject(self, &quot;object&quot;, object, OBJC_ASSOCIATION_ASSIGN); Âú®Â±ûÊÄßÊâÄÊåáÁöÑÂØπË±°ÈÅ≠Âà∞ÊëßÊØÅÊó∂ÔºåÂ±ûÊÄßÂÄº‰πü‰ºöÊ∏ÖÁ©∫(nil out)„ÄÇÂÅöÂà∞ËøôÁÇπÔºåÂêåÊ†∑Ë¶ÅÂÄüÂä© runtimeÔºö 12345678//Ë¶ÅÈîÄÊØÅÁöÑÁõÆÊ†áÂØπË±°id objectToBeDeallocated;//ÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™‚Äú‰∫ã‰ª∂‚ÄùÔºöÂΩì‰∏äÈù¢ÁöÑÁõÆÊ†áÂØπË±°ÈîÄÊØÅÊó∂ÔºåÂêåÊó∂Ë¶ÅÂèëÁîüÁöÑ‚Äú‰∫ã‰ª∂‚Äù„ÄÇid objectWeWantToBeReleasedWhenThatHappens;objc_setAssociatedObject(objectToBeDeallocted, someUniqueKey, objectWeWantToBeReleasedWhenThatHappens, OBJC_ASSOCIATION_RETAIN); Áü•ÈÅì‰∫ÜÊÄùË∑ØÔºåÊàë‰ª¨Â∞±ÂºÄÂßãÂÆûÁé∞ cyl_runAtDealloc ÊñπÊ≥ïÔºåÂÆûÁé∞ËøáÁ®ãÂàÜ‰∏§ÈÉ®ÂàÜÔºö Á¨¨‰∏ÄÈÉ®ÂàÜÔºöÂàõÂª∫‰∏Ä‰∏™Á±ªÔºåÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™‚Äú‰∫ã‰ª∂‚ÄùÔºöÂΩìÁõÆÊ†áÂØπË±°ÈîÄÊØÅÊó∂ÔºåÂêåÊó∂Ë¶ÅÂèëÁîüÁöÑ‚Äú‰∫ã‰ª∂‚Äù„ÄÇÂÄüÂä© block ÊâßË°å‚Äú‰∫ã‰ª∂‚Äù„ÄÇ // .hÊñá‰ª∂ 123456789101112// .hÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// Ëøô‰∏™Á±ªÔºåÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™‚Äú‰∫ã‰ª∂‚ÄùÔºöÂΩìÁõÆÊ†áÂØπË±°ÈîÄÊØÅÊó∂ÔºåÂêåÊó∂Ë¶ÅÂèëÁîüÁöÑ‚Äú‰∫ã‰ª∂‚Äù„ÄÇÂÄüÂä©blockÊâßË°å‚Äú‰∫ã‰ª∂‚Äù„ÄÇtypedef void (^voidBlock)(void);@interface CYLBlockExecutor : NSObject- (id)initWithBlock:(voidBlock)block;@end // .mÊñá‰ª∂ 1234567891011121314151617181920212223242526272829// .mÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// Ëøô‰∏™Á±ªÔºåÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™‚Äú‰∫ã‰ª∂‚ÄùÔºöÂΩìÁõÆÊ†áÂØπË±°ÈîÄÊØÅÊó∂ÔºåÂêåÊó∂Ë¶ÅÂèëÁîüÁöÑ‚Äú‰∫ã‰ª∂‚Äù„ÄÇÂÄüÂä©blockÊâßË°å‚Äú‰∫ã‰ª∂‚Äù„ÄÇ#import &quot;CYLBlockExecutor.h&quot;@interface CYLBlockExecutor() { voidBlock _block;}@implementation CYLBlockExecutor- (id)initWithBlock:(voidBlock)aBlock{ self = [super init]; if (self) { _block = [aBlock copy]; } return self;}- (void)dealloc{ _block ? _block() : nil;}@end Á¨¨‰∫åÈÉ®ÂàÜÔºöÊ†∏ÂøÉ‰ª£Á†ÅÔºöÂà©Áî®runtimeÂÆûÁé∞cyl_runAtDeallocÊñπÊ≥ï 123456789101112131415161718192021222324252627282930313233343536373839// CYLNSObject+RunAtDealloc.hÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// Âà©Áî®runtimeÂÆûÁé∞cyl_runAtDeallocÊñπÊ≥ï#import &quot;CYLBlockExecutor.h&quot;const void *runAtDeallocBlockKey = &amp;runAtDeallocBlockKey;@interface NSObject (CYLRunAtDealloc)- (void)cyl_runAtDealloc:(voidBlock)block;@end// CYLNSObject+RunAtDealloc.mÊñá‰ª∂// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// Âà©Áî®runtimeÂÆûÁé∞cyl_runAtDeallocÊñπÊ≥ï#import &quot;CYLNSObject+RunAtDealloc.h&quot;#import &quot;CYLBlockExecutor.h&quot;@implementation NSObject (CYLRunAtDealloc)- (void)cyl_runAtDealloc:(voidBlock)block{ if (block) { CYLBlockExecutor *executor = [[CYLBlockExecutor alloc] initWithBlock:block]; objc_setAssociatedObject(self, runAtDeallocBlockKey, executor, OBJC_ASSOCIATION_RETAIN); }}@end ‰ΩøÁî®ÊñπÊ≥ïÔºöÂØºÂÖ• 1#import &quot;CYLNSObject+RunAtDealloc.h&quot; ÁÑ∂ÂêéÂ∞±ÂèØ‰ª•‰ΩøÁî®‰∫ÜÔºö 12345NSObject *foo = [[NSObject alloc] init];[foo cyl_runAtDealloc:^{ NSLog(@&quot;Ê≠£Âú®ÈáäÊîæfoo!&quot;);}]; Â¶ÇÊûúÂØπ cyl_runAtDealloc ÁöÑÂÆûÁé∞ÂéüÁêÜÊúâÂÖ¥Ë∂£ÔºåÂèØ‰ª•Áúã‰∏ãÊàëÂÜôÁöÑ‰∏Ä‰∏™Â∞èÂ∫ìÔºåÂèØ‰ª•‰ΩøÁî® CocoaPods Âú®È°πÁõÆ‰∏≠‰ΩøÁî®Ôºö CYLDeallocBlockExecutor ÂèÇËÄÉÂçöÊñáÔºö Fun With the Objective-C Runtime: Run Code at Deallocation of Any Object 9. @property‰∏≠ÊúâÂì™‰∫õÂ±ûÊÄßÂÖ≥ÈîÆÂ≠óÔºü/ @property ÂêéÈù¢ÂèØ‰ª•ÊúâÂì™‰∫õ‰øÆÈ•∞Á¨¶ÔºüÂ±ûÊÄßÂèØ‰ª•Êã•ÊúâÁöÑÁâπË¥®ÂàÜ‰∏∫ÂõõÁ±ª: ÂéüÂ≠êÊÄß‚Äî nonatomic ÁâπË¥® Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÁî±ÁºñËØëÂô®ÂêàÊàêÁöÑÊñπÊ≥ï‰ºöÈÄöËøáÈîÅÂÆöÊú∫Âà∂Á°Æ‰øùÂÖ∂ÂéüÂ≠êÊÄß(atomicity)„ÄÇÂ¶ÇÊûúÂ±ûÊÄßÂÖ∑Â§á nonatomic ÁâπË¥®ÔºåÂàô‰∏ç‰ΩøÁî®Ëá™ÊóãÈîÅ„ÄÇËØ∑Ê≥®ÊÑèÔºåÂ∞ΩÁÆ°Ê≤°ÊúâÂêç‰∏∫‚Äúatomic‚ÄùÁöÑÁâπË¥®(Â¶ÇÊûúÊüêÂ±ûÊÄß‰∏çÂÖ∑Â§á nonatomic ÁâπË¥®ÔºåÈÇ£ÂÆÉÂ∞±ÊòØ‚ÄúÂéüÂ≠êÁöÑ‚Äù ( atomic) )Ôºå‰ΩÜÊòØ‰ªçÁÑ∂ÂèØ‰ª•Âú®Â±ûÊÄßÁâπË¥®‰∏≠ÂÜôÊòéËøô‰∏ÄÁÇπÔºåÁºñËØëÂô®‰∏ç‰ºöÊä•Èîô„ÄÇËã•ÊòØËá™Â∑±ÂÆö‰πâÂ≠òÂèñÊñπÊ≥ïÔºåÈÇ£‰πàÂ∞±Â∫îËØ•ÈÅµ‰ªé‰∏éÂ±ûÊÄßÁâπË¥®Áõ∏Á¨¶ÁöÑÂéüÂ≠êÊÄß„ÄÇ ËØª/ÂÜôÊùÉÈôê‚Äîreadwrite(ËØªÂÜô)„ÄÅreadonly (Âè™ËØª) ÂÜÖÂ≠òÁÆ°ÁêÜËØ≠‰πâ‚Äîassign„ÄÅstrong„ÄÅ weak„ÄÅunsafe_unretained„ÄÅcopy ÊñπÊ≥ïÂêç‚Äîgetter=&lt;name&gt; „ÄÅsetter=&lt;name&gt; getter=&lt;name&gt;ÁöÑÊ†∑ÂºèÔºö 1@property (nonatomic, getter=isOn) BOOL on; Ôºà `setter=`ËøôÁßç‰∏çÂ∏∏Áî®Ôºå‰πü‰∏çÊé®Ëçê‰ΩøÁî®„ÄÇÊïÖ‰∏çÂú®ËøôÈáåÁªôÂá∫ÂÜôÊ≥ï„ÄÇÔºâ setter=&lt;name&gt;‰∏ÄËà¨Áî®Âú®ÁâπÊÆäÁöÑÊÉÖÂ¢É‰∏ãÔºåÊØîÂ¶ÇÔºö Âú®Êï∞ÊçÆÂèçÂ∫èÂàóÂåñ„ÄÅËΩ¨Ê®°ÂûãÁöÑËøáÁ®ã‰∏≠ÔºåÊúçÂä°Âô®ËøîÂõûÁöÑÂ≠óÊÆµÂ¶ÇÊûú‰ª• init ÂºÄÂ§¥ÔºåÊâÄ‰ª•‰Ω†ÈúÄË¶ÅÂÆö‰πâ‰∏Ä‰∏™ init ÂºÄÂ§¥ÁöÑÂ±ûÊÄßÔºå‰ΩÜÈªòËÆ§ÁîüÊàêÁöÑ setter ‰∏é getter ÊñπÊ≥ï‰πü‰ºö‰ª• init ÂºÄÂ§¥ÔºåËÄåÁºñËØëÂô®‰ºöÊääÊâÄÊúâ‰ª• init ÂºÄÂ§¥ÁöÑÊñπÊ≥ïÂΩìÊàêÂàùÂßãÂåñÊñπÊ≥ïÔºåËÄåÂàùÂßãÂåñÊñπÊ≥ïÂè™ËÉΩËøîÂõû self Á±ªÂûãÔºåÂõ†Ê≠§ÁºñËØëÂô®‰ºöÊä•Èîô„ÄÇ ËøôÊó∂‰Ω†Â∞±ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊñπÂºèÊù•ÈÅøÂÖçÁºñËØëÂô®Êä•ÈîôÔºö 1@property(nonatomic, strong, getter=p_initBy, setter=setP_initBy:)NSString *initBy; Âè¶Â§ñ‰πüÂèØ‰ª•Áî®ÂÖ≥ÈîÆÂ≠óËøõË°åÁâπÊÆäËØ¥ÊòéÔºåÊù•ÈÅøÂÖçÁºñËØëÂô®Êä•ÈîôÔºö 12@property(nonatomic, readwrite, copy, null_resettable) NSString *initBy;- (NSString *)initBy __attribute__((objc_method_family(none))); ‰∏çÂ∏∏Áî®ÁöÑÔºönonnull,null_resettable,nullable Ê≥®ÊÑèÔºöÂæàÂ§ö‰∫∫‰ºöËÆ§‰∏∫Â¶ÇÊûúÂ±ûÊÄßÂÖ∑Â§á nonatomic ÁâπË¥®ÔºåÂàô‰∏ç‰ΩøÁî®‚ÄúÂêåÊ≠•ÈîÅ‚Äù„ÄÇÂÖ∂ÂÆûÂú®Â±ûÊÄßËÆæÁΩÆÊñπÊ≥ï‰∏≠‰ΩøÁî®ÁöÑÊòØËá™ÊóãÈîÅÔºåËá™ÊóãÈîÅÁõ∏ÂÖ≥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839static inline void reallySetProperty(id self, SEL _cmd, id newValue, ptrdiff_t offset, bool atomic, bool copy, bool mutableCopy){ if (offset == 0) { object_setClass(self, newValue); return; } id oldValue; id *slot = (id*) ((char*)self + offset); if (copy) { newValue = [newValue copyWithZone:nil]; } else if (mutableCopy) { newValue = [newValue mutableCopyWithZone:nil]; } else { if (*slot == newValue) return; newValue = objc_retain(newValue); } if (!atomic) { oldValue = *slot; *slot = newValue; } else { spinlock_t&amp; slotlock = PropertyLocks[slot]; slotlock.lock(); oldValue = *slot; *slot = newValue; slotlock.unlock(); } objc_release(oldValue);}void objc_setProperty(id self, SEL _cmd, ptrdiff_t offset, id newValue, BOOL atomic, signed char shouldCopy) { bool copy = (shouldCopy &amp;&amp; shouldCopy != MUTABLE_COPY); bool mutableCopy = (shouldCopy == MUTABLE_COPY); reallySetProperty(self, _cmd, newValue, offset, atomic, copy, mutableCopy);} 10. weakÂ±ûÊÄßÈúÄË¶ÅÂú®dealloc‰∏≠ÁΩÆnil‰πàÔºü‰∏çÈúÄË¶Å„ÄÇ Âú®ARCÁéØÂ¢ÉÊó†ËÆ∫ÊòØÂº∫ÊåáÈíàËøòÊòØÂº±ÊåáÈíàÈÉΩÊó†ÈúÄÂú® dealloc ËÆæÁΩÆ‰∏∫ nil Ôºå ARC ‰ºöËá™Âä®Â∏ÆÊàë‰ª¨Â§ÑÁêÜ Âç≥‰æøÊòØÁºñËØëÂô®‰∏çÂ∏ÆÊàë‰ª¨ÂÅöËøô‰∫õÔºåweak‰πü‰∏çÈúÄË¶ÅÂú® dealloc ‰∏≠ÁΩÆnilÔºö Ê≠£Â¶Ç‰∏äÊñáÁöÑÔºöruntime Â¶Ç‰ΩïÂÆûÁé∞ weak Â±ûÊÄß ‰∏≠ÊèêÂà∞ÁöÑÔºö Êàë‰ª¨Ê®°Êãü‰∏ã weak ÁöÑ setter ÊñπÊ≥ïÔºåÂ∫îËØ•Â¶Ç‰∏ãÔºö 1234567- (void)setObject:(NSObject *)object{ objc_setAssociatedObject(self, &quot;object&quot;, object, OBJC_ASSOCIATION_ASSIGN); [object cyl_runAtDealloc:^{ _object = nil; }];} Â¶ÇÊûúÂØπ cyl_runAtDealloc ÁöÑÂÆûÁé∞ÂéüÁêÜÊúâÂÖ¥Ë∂£ÔºåÂèØ‰ª•Áúã‰∏ãÊàëÂÜôÁöÑ‰∏Ä‰∏™Â∞èÂ∫ìÔºåÂèØ‰ª•‰ΩøÁî® CocoaPods Âú®È°πÁõÆ‰∏≠‰ΩøÁî®Ôºö CYLDeallocBlockExecutor ‰πüÂç≥: Âú®Â±ûÊÄßÊâÄÊåáÁöÑÂØπË±°ÈÅ≠Âà∞ÊëßÊØÅÊó∂ÔºåÂ±ûÊÄßÂÄº‰πü‰ºöÊ∏ÖÁ©∫(nil out)„ÄÇ 11. @synthesizeÂíå@dynamicÂàÜÂà´Êúâ‰ªÄ‰πà‰ΩúÁî®Ôºü @propertyÊúâ‰∏§‰∏™ÂØπÂ∫îÁöÑËØçÔºå‰∏Ä‰∏™ÊòØ @synthesizeÔºå‰∏Ä‰∏™ÊòØ @dynamic„ÄÇÂ¶ÇÊûú @synthesizeÂíå @dynamicÈÉΩÊ≤°ÂÜôÔºåÈÇ£‰πàÈªòËÆ§ÁöÑÂ∞±ÊòØ@syntheszie var = _var; @synthesize ÁöÑËØ≠‰πâÊòØÂ¶ÇÊûú‰Ω†Ê≤°ÊúâÊâãÂä®ÂÆûÁé∞ setter ÊñπÊ≥ïÂíå getter ÊñπÊ≥ïÔºåÈÇ£‰πàÁºñËØëÂô®‰ºöËá™Âä®‰∏∫‰Ω†Âä†‰∏äËøô‰∏§‰∏™ÊñπÊ≥ï„ÄÇ @dynamic ÂëäËØâÁºñËØëÂô®ÔºöÂ±ûÊÄßÁöÑ setter ‰∏é getter ÊñπÊ≥ïÁî±Áî®Êà∑Ëá™Â∑±ÂÆûÁé∞Ôºå‰∏çËá™Âä®ÁîüÊàê„ÄÇÔºàÂΩìÁÑ∂ÂØπ‰∫é readonly ÁöÑÂ±ûÊÄßÂè™ÈúÄÊèê‰æõ getter Âç≥ÂèØÔºâ„ÄÇÂÅáÂ¶Ç‰∏Ä‰∏™Â±ûÊÄßË¢´Â£∞Êòé‰∏∫ @dynamic varÔºåÁÑ∂Âêé‰Ω†Ê≤°ÊúâÊèê‰æõ @setterÊñπÊ≥ïÂíå @getter ÊñπÊ≥ïÔºåÁºñËØëÁöÑÊó∂ÂÄôÊ≤°ÈóÆÈ¢òÔºå‰ΩÜÊòØÂΩìÁ®ãÂ∫èËøêË°åÂà∞ instance.var = someVarÔºåÁî±‰∫éÁº∫ setter ÊñπÊ≥ï‰ºöÂØºËá¥Á®ãÂ∫èÂ¥©Ê∫ÉÔºõÊàñËÄÖÂΩìËøêË°åÂà∞ someVar = var Êó∂ÔºåÁî±‰∫éÁº∫ getter ÊñπÊ≥ïÂêåÊ†∑‰ºöÂØºËá¥Â¥©Ê∫É„ÄÇÁºñËØëÊó∂Ê≤°ÈóÆÈ¢òÔºåËøêË°åÊó∂ÊâçÊâßË°åÁõ∏Â∫îÁöÑÊñπÊ≥ïÔºåËøôÂ∞±ÊòØÊâÄË∞ìÁöÑÂä®ÊÄÅÁªëÂÆö„ÄÇ 12. ARC‰∏ãÔºå‰∏çÊòæÂºèÊåáÂÆö‰ªª‰ΩïÂ±ûÊÄßÂÖ≥ÈîÆÂ≠óÊó∂ÔºåÈªòËÆ§ÁöÑÂÖ≥ÈîÆÂ≠óÈÉΩÊúâÂì™‰∫õÔºü ÂØπÂ∫îÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÈªòËÆ§ÂÖ≥ÈîÆÂ≠óÊòØ atomic,readwrite,assign ÂØπ‰∫éÊôÆÈÄöÁöÑ Objective-C ÂØπË±° atomic,readwrite,strong ÂèÇËÄÉÈìæÊé•Ôºö Objective-C ARC: strong vs retain and weak vs assign Variable property attributes or Modifiers in iOS 13. Áî®@propertyÂ£∞ÊòéÁöÑNSStringÔºàÊàñNSArrayÔºåNSDictionaryÔºâÁªèÂ∏∏‰ΩøÁî®copyÂÖ≥ÈîÆÂ≠óÔºå‰∏∫‰ªÄ‰πàÔºüÂ¶ÇÊûúÊîπÁî®strongÂÖ≥ÈîÆÂ≠óÔºåÂèØËÉΩÈÄ†Êàê‰ªÄ‰πàÈóÆÈ¢òÔºü Âõ†‰∏∫Áà∂Á±ªÊåáÈíàÂèØ‰ª•ÊåáÂêëÂ≠êÁ±ªÂØπË±°,‰ΩøÁî® copy ÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜËÆ©Êú¨ÂØπË±°ÁöÑÂ±ûÊÄß‰∏çÂèóÂ§ñÁïåÂΩ±Âìç,‰ΩøÁî® copy Êó†ËÆ∫ÁªôÊàë‰º†ÂÖ•ÊòØ‰∏Ä‰∏™ÂèØÂèòÂØπË±°ËøòÊòØ‰∏çÂèØÂØπË±°,ÊàëÊú¨Ë∫´ÊåÅÊúâÁöÑÂ∞±ÊòØ‰∏Ä‰∏™‰∏çÂèØÂèòÁöÑÂâØÊú¨. Â¶ÇÊûúÊàë‰ª¨‰ΩøÁî®ÊòØ strong ,ÈÇ£‰πàËøô‰∏™Â±ûÊÄßÂ∞±ÊúâÂèØËÉΩÊåáÂêë‰∏Ä‰∏™ÂèØÂèòÂØπË±°,Â¶ÇÊûúËøô‰∏™ÂèØÂèòÂØπË±°Âú®Â§ñÈÉ®Ë¢´‰øÆÊîπ‰∫Ü,ÈÇ£‰πà‰ºöÂΩ±ÂìçËØ•Â±ûÊÄß. copy Ê≠§ÁâπË¥®ÊâÄË°®ËææÁöÑÊâÄÂ±ûÂÖ≥Á≥ª‰∏é strong Á±ª‰ºº„ÄÇÁÑ∂ËÄåËÆæÁΩÆÊñπÊ≥ïÂπ∂‰∏ç‰øùÁïôÊñ∞ÂÄºÔºåËÄåÊòØÂ∞ÜÂÖ∂‚ÄúÊã∑Ë¥ù‚Äù (copy)„ÄÇÂΩìÂ±ûÊÄßÁ±ªÂûã‰∏∫ NSString Êó∂ÔºåÁªèÂ∏∏Áî®Ê≠§ÁâπË¥®Êù•‰øùÊä§ÂÖ∂Â∞ÅË£ÖÊÄßÔºåÂõ†‰∏∫‰º†ÈÄíÁªôËÆæÁΩÆÊñπÊ≥ïÁöÑÊñ∞ÂÄºÊúâÂèØËÉΩÊåáÂêë‰∏Ä‰∏™ NSMutableString Á±ªÁöÑÂÆû‰æã„ÄÇËøô‰∏™Á±ªÊòØ NSString ÁöÑÂ≠êÁ±ªÔºåË°®Á§∫‰∏ÄÁßçÂèØ‰øÆÊîπÂÖ∂ÂÄºÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÊ≠§Êó∂Ëã•ÊòØ‰∏çÊã∑Ë¥ùÂ≠óÁ¨¶‰∏≤ÔºåÈÇ£‰πàËÆæÁΩÆÂÆåÂ±ûÊÄß‰πãÂêéÔºåÂ≠óÁ¨¶‰∏≤ÁöÑÂÄºÂ∞±ÂèØËÉΩ‰ºöÂú®ÂØπË±°‰∏çÁü•ÊÉÖÁöÑÊÉÖÂÜµ‰∏ãÈÅ≠‰∫∫Êõ¥Êîπ„ÄÇÊâÄ‰ª•ÔºåËøôÊó∂Â∞±Ë¶ÅÊã∑Ë¥ù‰∏Ä‰ªΩ‚Äú‰∏çÂèØÂèò‚Äù (immutable)ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÁ°Æ‰øùÂØπË±°‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÂÄº‰∏ç‰ºöÊó†ÊÑèÈó¥ÂèòÂä®„ÄÇÂè™Ë¶ÅÂÆûÁé∞Â±ûÊÄßÊâÄÁî®ÁöÑÂØπË±°ÊòØ‚ÄúÂèØÂèòÁöÑ‚Äù (mutable)ÔºåÂ∞±Â∫îËØ•Âú®ËÆæÁΩÆÊñ∞Â±ûÊÄßÂÄºÊó∂Êã∑Ë¥ù‰∏Ä‰ªΩ„ÄÇ ‰∏æ‰æãËØ¥ÊòéÔºö ÂÆö‰πâ‰∏Ä‰∏™‰ª• strong ‰øÆÈ•∞ÁöÑ arrayÔºö 1@property (nonatomic ,readwrite, strong) NSArray *array; ÁÑ∂ÂêéËøõË°å‰∏ãÈù¢ÁöÑÊìç‰ΩúÔºö 1234567891011NSArray *array = @[ @1, @2, @3, @4 ];NSMutableArray *mutableArray = [NSMutableArray arrayWithArray:array];self.array = mutableArray;[mutableArray removeAllObjects];;NSLog(@&quot;%@&quot;,self.array);[mutableArray addObjectsFromArray:array];self.array = [mutableArray copy];[mutableArray removeAllObjects];;NSLog(@&quot;%@&quot;,self.array); ÊâìÂç∞ÁªìÊûúÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 123456782015-09-27 19:10:32.523 CYLArrayCopyDmo[10681:713670] ()2015-09-27 19:10:32.524 CYLArrayCopyDmo[10681:713670] ( 1, 2, 3, 4) ÔºàËØ¶ËßÅ‰ªìÂ∫ìÂÜÖÈôÑÂΩïÁöÑ Demo„ÄÇÔºâ ‰∏∫‰∫ÜÁêÜËß£ËøôÁßçÂÅöÊ≥ïÔºåÈ¶ñÂÖàË¶ÅÁü•ÈÅìÔºå‰∏§ÁßçÊÉÖÂÜµÔºö ÂØπÈùûÈõÜÂêàÁ±ªÂØπË±°ÁöÑ copy ‰∏é mutableCopy Êìç‰ΩúÔºõ ÂØπÈõÜÂêàÁ±ªÂØπË±°ÁöÑ copy ‰∏é mutableCopy Êìç‰Ωú„ÄÇ 1. ÂØπÈùûÈõÜÂêàÁ±ªÂØπË±°ÁöÑcopyÊìç‰ΩúÔºöÂú®ÈùûÈõÜÂêàÁ±ªÂØπË±°‰∏≠ÔºöÂØπ immutable ÂØπË±°ËøõË°å copy Êìç‰ΩúÔºåÊòØÊåáÈíàÂ§çÂà∂ÔºåmutableCopy Êìç‰ΩúÊó∂ÂÜÖÂÆπÂ§çÂà∂ÔºõÂØπ mutable ÂØπË±°ËøõË°å copy Âíå mutableCopy ÈÉΩÊòØÂÜÖÂÆπÂ§çÂà∂„ÄÇÁî®‰ª£Á†ÅÁÆÄÂçïË°®Á§∫Â¶Ç‰∏ãÔºö [immutableObject copy] // ÊµÖÂ§çÂà∂ [immutableObject mutableCopy] //Ê∑±Â§çÂà∂ [mutableObject copy] //Ê∑±Â§çÂà∂ [mutableObject mutableCopy] //Ê∑±Â§çÂà∂ ÊØîÂ¶Ç‰ª•‰∏ã‰ª£Á†ÅÔºö 12NSMutableString *string = [NSMutableString stringWithString:@&quot;origin&quot;];//copyNSString *stringCopy = [string copy]; Êü•ÁúãÂÜÖÂ≠òÔºå‰ºöÂèëÁé∞ string„ÄÅstringCopy ÂÜÖÂ≠òÂú∞ÂùÄÈÉΩ‰∏ç‰∏ÄÊ†∑ÔºåËØ¥ÊòéÊ≠§Êó∂ÈÉΩÊòØÂÅöÂÜÖÂÆπÊã∑Ë¥ù„ÄÅÊ∑±Êã∑Ë¥ù„ÄÇÂç≥‰Ωø‰Ω†ËøõË°åÂ¶Ç‰∏ãÊìç‰ΩúÔºö 1[string appendString:@&quot;origion!&quot;] stringCopy ÁöÑÂÄº‰πü‰∏ç‰ºöÂõ†Ê≠§ÊîπÂèòÔºå‰ΩÜÊòØÂ¶ÇÊûú‰∏ç‰ΩøÁî® copyÔºåstringCopy ÁöÑÂÄºÂ∞±‰ºöË¢´ÊîπÂèò„ÄÇ ÈõÜÂêàÁ±ªÂØπË±°‰ª•Ê≠§Á±ªÊé®„ÄÇÊâÄ‰ª•Ôºå Áî® @property Â£∞Êòé NSString„ÄÅNSArray„ÄÅNSDictionary ÁªèÂ∏∏‰ΩøÁî® copy ÂÖ≥ÈîÆÂ≠óÔºåÊòØÂõ†‰∏∫‰ªñ‰ª¨ÊúâÂØπÂ∫îÁöÑÂèØÂèòÁ±ªÂûãÔºöNSMutableString„ÄÅNSMutableArray„ÄÅNSMutableDictionaryÔºå‰ªñ‰ª¨‰πãÈó¥ÂèØËÉΩËøõË°åËµãÂÄºÊìç‰ΩúÔºå‰∏∫Á°Æ‰øùÂØπË±°‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÂÄº‰∏ç‰ºöÊó†ÊÑèÈó¥ÂèòÂä®ÔºåÂ∫îËØ•Âú®ËÆæÁΩÆÊñ∞Â±ûÊÄßÂÄºÊó∂Êã∑Ë¥ù‰∏Ä‰ªΩ„ÄÇ 2„ÄÅÈõÜÂêàÁ±ªÂØπË±°ÁöÑcopy‰∏émutableCopyÈõÜÂêàÁ±ªÂØπË±°ÊòØÊåá NSArray„ÄÅNSDictionary„ÄÅNSSet ‚Ä¶ ‰πãÁ±ªÁöÑÂØπË±°„ÄÇ‰∏ãÈù¢ÂÖàÁúãÈõÜÂêàÁ±ªimmutableÂØπË±°‰ΩøÁî® copy Âíå mutableCopy ÁöÑ‰∏Ä‰∏™‰æãÂ≠êÔºö 123NSArray *array = @[@[@&quot;a&quot;, @&quot;b&quot;], @[@&quot;c&quot;, @&quot;d&quot;]];NSArray *copyArray = [array copy];NSMutableArray *mCopyArray = [array mutableCopy]; Êü•ÁúãÂÜÖÂÆπÔºåÂèØ‰ª•ÁúãÂà∞ copyArray Âíå array ÁöÑÂú∞ÂùÄÊòØ‰∏ÄÊ†∑ÁöÑÔºåËÄå mCopyArray Âíå array ÁöÑÂú∞ÂùÄÊòØ‰∏çÂêåÁöÑ„ÄÇËØ¥Êòé copy Êìç‰ΩúËøõË°å‰∫ÜÊåáÈíàÊã∑Ë¥ùÔºåmutableCopy ËøõË°å‰∫ÜÂÜÖÂÆπÊã∑Ë¥ù„ÄÇ‰ΩÜÈúÄË¶ÅÂº∫Ë∞ÉÁöÑÊòØÔºöÊ≠§Â§ÑÁöÑÂÜÖÂÆπÊã∑Ë¥ùÔºå‰ªÖ‰ªÖÊòØÊã∑Ë¥ù array Ëøô‰∏™ÂØπË±°Ôºåarray ÈõÜÂêàÂÜÖÈÉ®ÁöÑÂÖÉÁ¥†‰ªçÁÑ∂ÊòØÊåáÈíàÊã∑Ë¥ù„ÄÇËøôÂíå‰∏äÈù¢ÁöÑÈùûÈõÜÂêà immutable ÂØπË±°ÁöÑÊã∑Ë¥ùËøòÊòØÊå∫Áõ∏‰ººÁöÑÔºåÈÇ£‰πàmutableÂØπË±°ÁöÑÊã∑Ë¥ù‰ºö‰∏ç‰ºöÁ±ª‰ººÂë¢ÔºüÊàë‰ª¨ÁªßÁª≠ÂæÄ‰∏ãÔºåÁúã mutable ÂØπË±°Êã∑Ë¥ùÁöÑ‰æãÂ≠êÔºö 123NSMutableArray *array = [NSMutableArray arrayWithObjects:[NSMutableString stringWithString:@&quot;a&quot;],@&quot;b&quot;,@&quot;c&quot;,nil];NSArray *copyArray = [array copy];NSMutableArray *mCopyArray = [array mutableCopy]; Êü•ÁúãÂÜÖÂ≠òÔºåÂ¶ÇÊàë‰ª¨ÊâÄÊñôÔºåcopyArray„ÄÅmCopyArrayÂíå array ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÈÉΩ‰∏ç‰∏ÄÊ†∑ÔºåËØ¥Êòé copyArray„ÄÅmCopyArray ÈÉΩÂØπ array ËøõË°å‰∫ÜÂÜÖÂÆπÊã∑Ë¥ù„ÄÇÂêåÊ†∑ÔºåÊàë‰ª¨ÂèØ‰ª•ÂæóÂá∫ÁªìËÆ∫Ôºö Âú®ÈõÜÂêàÁ±ªÂØπË±°‰∏≠ÔºåÂØπ immutable ÂØπË±°ËøõË°å copyÔºåÊòØÊåáÈíàÂ§çÂà∂Ôºå mutableCopy ÊòØÂÜÖÂÆπÂ§çÂà∂ÔºõÂØπ mutable ÂØπË±°ËøõË°å copy Âíå mutableCopy ÈÉΩÊòØÂÜÖÂÆπÂ§çÂà∂„ÄÇ‰ΩÜÊòØÔºöÈõÜÂêàÂØπË±°ÁöÑÂÜÖÂÆπÂ§çÂà∂‰ªÖÈôê‰∫éÂØπË±°Êú¨Ë∫´ÔºåÂØπË±°ÂÖÉÁ¥†‰ªçÁÑ∂ÊòØÊåáÈíàÂ§çÂà∂„ÄÇÁî®‰ª£Á†ÅÁÆÄÂçïË°®Á§∫Â¶Ç‰∏ãÔºö 1234[immutableObject copy] // ÊµÖÂ§çÂà∂[immutableObject mutableCopy] //ÂçïÂ±ÇÊ∑±Â§çÂà∂[mutableObject copy] //ÂçïÂ±ÇÊ∑±Â§çÂà∂[mutableObject mutableCopy] //ÂçïÂ±ÇÊ∑±Â§çÂà∂ Ëøô‰∏™‰ª£Á†ÅÁªìËÆ∫ÂíåÈùûÈõÜÂêàÁ±ªÁöÑÈùûÂ∏∏Áõ∏‰ºº„ÄÇ ÂèÇËÄÉÈìæÊé•ÔºöiOS ÈõÜÂêàÁöÑÊ∑±Â§çÂà∂‰∏éÊµÖÂ§çÂà∂ 14. @synthesizeÂêàÊàêÂÆû‰æãÂèòÈáèÁöÑËßÑÂàôÊòØ‰ªÄ‰πàÔºüÂÅáÂ¶ÇpropertyÂêç‰∏∫fooÔºåÂ≠òÂú®‰∏Ä‰∏™Âêç‰∏∫_fooÁöÑÂÆû‰æãÂèòÈáèÔºåÈÇ£‰πàËøò‰ºöËá™Âä®ÂêàÊàêÊñ∞ÂèòÈáè‰πàÔºüÂú®ÂõûÁ≠î‰πãÂâçÂÖàËØ¥Êòé‰∏ã‰∏Ä‰∏™Ê¶ÇÂøµÔºö ÂÆû‰æãÂèòÈáè = ÊàêÂëòÂèòÈáè Ôºù ivar Ëøô‰∫õËØ¥Ê≥ïÔºåÁ¨îËÄÖ‰∏ãÊñá‰∏≠ÔºåÂèØËÉΩÈÉΩ‰ºöÁî®Âà∞ÔºåÊåáÁöÑÊòØ‰∏Ä‰∏™‰∏úË•ø„ÄÇ Ê≠£Â¶ÇAppleÂÆòÊñπÊñáÊ°£ You Can Customize Synthesized Instance Variable Names ÊâÄËØ¥Ôºö Â¶ÇÊûú‰ΩøÁî®‰∫ÜÂ±ûÊÄßÁöÑËØùÔºåÈÇ£‰πàÁºñËØëÂô®Â∞±‰ºöËá™Âä®ÁºñÂÜôËÆøÈóÆÂ±ûÊÄßÊâÄÈúÄÁöÑÊñπÊ≥ïÔºåÊ≠§ËøáÁ®ãÂè´ÂÅö‚ÄúËá™Âä®ÂêàÊàê‚Äù( auto synthesis)„ÄÇÈúÄË¶ÅÂº∫Ë∞ÉÁöÑÊòØÔºåËøô‰∏™ËøáÁ®ãÁî±ÁºñËØëÂô®Âú®ÁºñËØëÊúüÊâßË°åÔºåÊâÄ‰ª•ÁºñËæëÂô®ÈáåÁúã‰∏çÂà∞Ëøô‰∫õ‚ÄúÂêàÊàêÊñπÊ≥ï‚Äù (synthesized method)ÁöÑÊ∫ê‰ª£Á†Å„ÄÇÈô§‰∫ÜÁîüÊàêÊñπÊ≥ï‰ª£Á†Å‰πãÂ§ñÔºåÁºñËØëÂô®ËøòË¶ÅËá™Âä®ÂêëÁ±ª‰∏≠Ê∑ªÂä†ÈÄÇÂΩìÁ±ªÂûãÁöÑÂÆû‰æãÂèòÈáèÔºåÂπ∂‰∏îÂú®Â±ûÊÄßÂêçÂâçÈù¢Âä†‰∏ãÂàíÁ∫øÔºå‰ª•Ê≠§‰Ωú‰∏∫ÂÆû‰æãÂèòÈáèÁöÑÂêçÂ≠ó„ÄÇ 1234@interface CYLPerson : NSObject @property NSString *firstName; @property NSString *lastName; @end Âú®‰∏ä‰æã‰∏≠Ôºå‰ºöÁîüÊàê‰∏§‰∏™ÂÆû‰æãÂèòÈáèÔºåÂÖ∂ÂêçÁß∞ÂàÜÂà´‰∏∫ _firstName ‰∏é _lastName„ÄÇ‰πüÂèØ‰ª•Âú®Á±ªÁöÑÂÆûÁé∞‰ª£Á†ÅÈáåÈÄöËøá @synthesize ËØ≠Ê≥ïÊù•ÊåáÂÆöÂÆû‰æãÂèòÈáèÁöÑÂêçÂ≠ó: 1234@implementation CYLPerson @synthesize firstName = _myFirstName; @synthesize lastName = _myLastName; @end ‰∏äËø∞ËØ≠Ê≥ï‰ºöÂ∞ÜÁîüÊàêÁöÑÂÆû‰æãÂèòÈáèÂëΩÂêç‰∏∫ _myFirstName ‰∏é _myLastName ÔºåËÄå‰∏çÂÜç‰ΩøÁî®ÈªòËÆ§ÁöÑÂêçÂ≠ó„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊó†È°ª‰øÆÊîπÈªòËÆ§ÁöÑÂÆû‰æãÂèòÈáèÂêçÔºå‰ΩÜÊòØÂ¶ÇÊûú‰Ω†‰∏çÂñúÊ¨¢‰ª•‰∏ãÂàíÁ∫øÊù•ÂëΩÂêçÂÆû‰æãÂèòÈáèÔºåÈÇ£‰πàÂèØ‰ª•Áî®Ëøô‰∏™ÂäûÊ≥ïÂ∞ÜÂÖ∂Êîπ‰∏∫Ëá™Â∑±ÊÉ≥Ë¶ÅÁöÑÂêçÂ≠ó„ÄÇÁ¨îËÄÖËøòÊòØÊé®Ëçê‰ΩøÁî®ÈªòËÆ§ÁöÑÂëΩÂêçÊñπÊ°àÔºåÂõ†‰∏∫Â¶ÇÊûúÊâÄÊúâ‰∫∫ÈÉΩÂùöÊåÅËøôÂ•óÊñπÊ°àÔºåÈÇ£‰πàÂÜôÂá∫Êù•ÁöÑ‰ª£Á†ÅÂ§ßÂÆ∂ÈÉΩËÉΩÁúãÂæóÊáÇ„ÄÇ ÊÄªÁªì‰∏ã @synthesize ÂêàÊàêÂÆû‰æãÂèòÈáèÁöÑËßÑÂàôÔºåÊúâ‰ª•‰∏ãÂá†ÁÇπÔºö Â¶ÇÊûúÊåáÂÆö‰∫ÜÊàêÂëòÂèòÈáèÁöÑÂêçÁß∞,‰ºöÁîüÊàê‰∏Ä‰∏™ÊåáÂÆöÁöÑÂêçÁß∞ÁöÑÊàêÂëòÂèòÈáè, Â¶ÇÊûúËøô‰∏™ÊàêÂëòÂ∑≤ÁªèÂ≠òÂú®‰∫ÜÂ∞±‰∏çÂÜçÁîüÊàê‰∫Ü. Â¶ÇÊûúÊòØ @synthesize foo; Ëøò‰ºöÁîüÊàê‰∏Ä‰∏™ÂêçÁß∞‰∏∫fooÁöÑÊàêÂëòÂèòÈáèÔºå‰πüÂ∞±ÊòØËØ¥Ôºö Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÊàêÂëòÂèòÈáèÁöÑÂêçÁß∞‰ºöËá™Âä®ÁîüÊàê‰∏Ä‰∏™Â±ûÊÄßÂêåÂêçÁöÑÊàêÂëòÂèòÈáè, Â¶ÇÊûúÊòØ @synthesize foo = _foo; Â∞±‰∏ç‰ºöÁîüÊàêÊàêÂëòÂèòÈáè‰∫Ü. ÂÅáÂ¶Ç property Âêç‰∏∫ fooÔºåÂ≠òÂú®‰∏Ä‰∏™Âêç‰∏∫ _foo ÁöÑÂÆû‰æãÂèòÈáèÔºåÈÇ£‰πàËøò‰ºöËá™Âä®ÂêàÊàêÊñ∞ÂèòÈáè‰πàÔºü‰∏ç‰ºö„ÄÇÂ¶Ç‰∏ãÂõæÔºö 15. Âú®Êúâ‰∫ÜËá™Âä®ÂêàÊàêÂ±ûÊÄßÂÆû‰æãÂèòÈáè‰πãÂêéÔºå@synthesizeËøòÊúâÂì™‰∫õ‰ΩøÁî®Âú∫ÊôØÔºüÂõûÁ≠îËøô‰∏™ÈóÆÈ¢òÂâçÔºåÊàë‰ª¨Ë¶ÅÊêûÊ∏ÖÊ•ö‰∏Ä‰∏™ÈóÆÈ¢òÔºå‰ªÄ‰πàÊÉÖÂÜµ‰∏ã‰∏ç‰ºöautosynthesisÔºàËá™Âä®ÂêàÊàêÔºâÔºü ÂêåÊó∂ÈáçÂÜô‰∫Ü setter Âíå getter Êó∂ ÈáçÂÜô‰∫ÜÂè™ËØªÂ±ûÊÄßÁöÑ getter Êó∂ ‰ΩøÁî®‰∫Ü @dynamic Êó∂ Âú® @protocol ‰∏≠ÂÆö‰πâÁöÑÊâÄÊúâÂ±ûÊÄß Âú® category ‰∏≠ÂÆö‰πâÁöÑÊâÄÊúâÂ±ûÊÄß ÈáçËΩΩÁöÑÂ±ûÊÄß ÂΩì‰Ω†Âú®Â≠êÁ±ª‰∏≠ÈáçËΩΩ‰∫ÜÁà∂Á±ª‰∏≠ÁöÑÂ±ûÊÄßÔºå‰Ω†ÂøÖÈ°ª ‰ΩøÁî® @synthesize Êù•ÊâãÂä®ÂêàÊàêivar„ÄÇ Èô§‰∫ÜÂêé‰∏âÊù°ÔºåÂØπÂÖ∂‰ªñÂá†‰∏™Êàë‰ª¨ÂèØ‰ª•ÊÄªÁªìÂá∫‰∏Ä‰∏™ËßÑÂæãÔºöÂΩì‰Ω†ÊÉ≥ÊâãÂä®ÁÆ°ÁêÜ @property ÁöÑÊâÄÊúâÂÜÖÂÆπÊó∂Ôºå‰Ω†Â∞±‰ºöÂ∞ùËØïÈÄöËøáÂÆûÁé∞ @property ÁöÑÊâÄÊúâ‚ÄúÂ≠òÂèñÊñπÊ≥ï‚ÄùÔºàthe accessor methodsÔºâÊàñËÄÖ‰ΩøÁî® @dynamic Êù•ËææÂà∞Ëøô‰∏™ÁõÆÁöÑÔºåËøôÊó∂ÁºñËØëÂô®Â∞±‰ºöËÆ§‰∏∫‰Ω†ÊâìÁÆóÊâãÂä®ÁÆ°ÁêÜ @propertyÔºå‰∫éÊòØÁºñËØëÂô®Â∞±Á¶ÅÁî®‰∫Ü autosynthesisÔºàËá™Âä®ÂêàÊàêÔºâ„ÄÇ Âõ†‰∏∫Êúâ‰∫Ü autosynthesisÔºàËá™Âä®ÂêàÊàêÔºâÔºåÂ§ßÈÉ®ÂàÜÂºÄÂèëËÄÖÂ∑≤Áªè‰π†ÊÉØ‰∏çÂéªÊâãÂä®ÂÆö‰πâivarÔºåËÄåÊòØ‰æùËµñ‰∫é autosynthesisÔºàËá™Âä®ÂêàÊàêÔºâÔºå‰ΩÜÊòØ‰∏ÄÊó¶‰Ω†ÈúÄË¶Å‰ΩøÁî®ivarÔºåËÄå autosynthesisÔºàËá™Âä®ÂêàÊàêÔºâÂèàÂ§±Êïà‰∫ÜÔºåÂ¶ÇÊûú‰∏çÂéªÊâãÂä®ÂÆö‰πâivarÔºåÈÇ£‰πà‰Ω†Â∞±ÂæóÂÄüÂä© @synthesize Êù•ÊâãÂä®ÂêàÊàê ivar„ÄÇ ÂÖ∂ÂÆûÔºå@synthesize ËØ≠Ê≥ïËøòÊúâ‰∏Ä‰∏™Â∫îÁî®Âú∫ÊôØÔºå‰ΩÜÊòØ‰∏çÂ§™Âª∫ËÆÆÂ§ßÂÆ∂‰ΩøÁî®Ôºö ÂèØ‰ª•Âú®Á±ªÁöÑÂÆûÁé∞‰ª£Á†ÅÈáåÈÄöËøá @synthesize ËØ≠Ê≥ïÊù•ÊåáÂÆöÂÆû‰æãÂèòÈáèÁöÑÂêçÂ≠ó: 1234@implementation CYLPerson @synthesize firstName = _myFirstName; @synthesize lastName = _myLastName; @end ‰∏äËø∞ËØ≠Ê≥ï‰ºöÂ∞ÜÁîüÊàêÁöÑÂÆû‰æãÂèòÈáèÂëΩÂêç‰∏∫ _myFirstName ‰∏é _myLastNameÔºåËÄå‰∏çÂÜç‰ΩøÁî®ÈªòËÆ§ÁöÑÂêçÂ≠ó„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊó†È°ª‰øÆÊîπÈªòËÆ§ÁöÑÂÆû‰æãÂèòÈáèÂêçÔºå‰ΩÜÊòØÂ¶ÇÊûú‰Ω†‰∏çÂñúÊ¨¢‰ª•‰∏ãÂàíÁ∫øÊù•ÂëΩÂêçÂÆû‰æãÂèòÈáèÔºåÈÇ£‰πàÂèØ‰ª•Áî®Ëøô‰∏™ÂäûÊ≥ïÂ∞ÜÂÖ∂Êîπ‰∏∫Ëá™Â∑±ÊÉ≥Ë¶ÅÁöÑÂêçÂ≠ó„ÄÇÁ¨îËÄÖËøòÊòØÊé®Ëçê‰ΩøÁî®ÈªòËÆ§ÁöÑÂëΩÂêçÊñπÊ°àÔºåÂõ†‰∏∫Â¶ÇÊûúÊâÄÊúâ‰∫∫ÈÉΩÂùöÊåÅËøôÂ•óÊñπÊ°àÔºåÈÇ£‰πàÂÜôÂá∫Êù•ÁöÑ‰ª£Á†ÅÂ§ßÂÆ∂ÈÉΩËÉΩÁúãÂæóÊáÇ„ÄÇ ‰∏æ‰æãËØ¥ÊòéÔºöÂ∫îÁî®Âú∫ÊôØÔºö 12345678910111213141516171819202122232425262728293031323334353637//// .mÊñá‰ª∂// https://weibo.com/luohanchenyilong/ (ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å)// https://github.com/ChenYilong// ÊâìÂºÄÁ¨¨14Ë°åÂíåÁ¨¨17Ë°å‰∏≠‰ªªÊÑè‰∏ÄË°åÔºåÂ∞±ÂèØÁºñËØëÊàêÂäü@import Foundation;@interface CYLObject : NSObject@property (nonatomic, copy) NSString *title;@end@implementation CYLObject { // NSString *_title;}//@synthesize title = _title;- (instancetype)init{ self = [super init]; if (self) { _title = @&quot;ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å&quot;; } return self;}- (NSString *)title { return _title;}- (void)setTitle:(NSString *)title { _title = [title copy];}@end ÁªìÊûúÁºñËØëÂô®Êä•ÈîôÔºö ÂΩì‰Ω†ÂêåÊó∂ÈáçÂÜô‰∫Ü setter Âíå getter Êó∂ÔºåÁ≥ªÁªüÂ∞±‰∏ç‰ºöÁîüÊàê ivarÔºàÂÆû‰æãÂèòÈáè/ÊàêÂëòÂèòÈáèÔºâ„ÄÇËøôÊó∂ÂÄôÊúâ‰∏§ÁßçÈÄâÊã©Ôºö Ë¶Å‰πàÂ¶ÇÁ¨¨14Ë°åÔºöÊâãÂä®ÂàõÂª∫ ivar Ë¶Å‰πàÂ¶ÇÁ¨¨17Ë°åÔºö‰ΩøÁî®@synthesize foo = _foo; ÔºåÂÖ≥ËÅî @property ‰∏é ivar„ÄÇ Êõ¥Â§ö‰ø°ÊÅØÔºåËØ∑Êà≥- „Äã When should I use @synthesize explicitly? 16. objc‰∏≠Âêë‰∏Ä‰∏™nilÂØπË±°ÂèëÈÄÅÊ∂àÊÅØÂ∞Ü‰ºöÂèëÁîü‰ªÄ‰πàÔºüÂú® Objective-C ‰∏≠Âêë nil ÂèëÈÄÅÊ∂àÊÅØÊòØÂÆåÂÖ®ÊúâÊïàÁöÑ‚Äî‚ÄîÂè™ÊòØÂú®ËøêË°åÊó∂‰∏ç‰ºöÊúâ‰ªª‰Ωï‰ΩúÁî®: Â¶ÇÊûú‰∏Ä‰∏™ÊñπÊ≥ïËøîÂõûÂÄºÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÈÇ£‰πàÂèëÈÄÅÁªônilÁöÑÊ∂àÊÅØÂ∞ÜËøîÂõû0(nil)„ÄÇ‰æãÂ¶ÇÔºö 1Person * motherInlaw = [[aPerson spouse] mother]; Â¶ÇÊûú spouse ÂØπË±°‰∏∫ nilÔºåÈÇ£‰πàÂèëÈÄÅÁªô nil ÁöÑÊ∂àÊÅØ mother ‰πüÂ∞ÜËøîÂõû nil„ÄÇ Â¶ÇÊûúÊñπÊ≥ïËøîÂõûÂÄº‰∏∫ÊåáÈíàÁ±ªÂûãÔºåÂÖ∂ÊåáÈíàÂ§ßÂ∞è‰∏∫Â∞è‰∫éÊàñËÄÖÁ≠â‰∫ésizeof(void*)ÔºåfloatÔºådoubleÔºålong double ÊàñËÄÖ long long ÁöÑÊï¥ÂûãÊ†áÈáèÔºåÂèëÈÄÅÁªô nil ÁöÑÊ∂àÊÅØÂ∞ÜËøîÂõû0„ÄÇ Â¶ÇÊûúÊñπÊ≥ïËøîÂõûÂÄº‰∏∫ÁªìÊûÑ‰Ωì,ÂèëÈÄÅÁªô nil ÁöÑÊ∂àÊÅØÂ∞ÜËøîÂõû0„ÄÇÁªìÊûÑ‰Ωì‰∏≠ÂêÑ‰∏™Â≠óÊÆµÁöÑÂÄºÂ∞ÜÈÉΩÊòØ0„ÄÇ Â¶ÇÊûúÊñπÊ≥ïÁöÑËøîÂõûÂÄº‰∏çÊòØ‰∏äËø∞ÊèêÂà∞ÁöÑÂá†ÁßçÊÉÖÂÜµÔºåÈÇ£‰πàÂèëÈÄÅÁªô nil ÁöÑÊ∂àÊÅØÁöÑËøîÂõûÂÄºÂ∞ÜÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇ ÂÖ∑‰ΩìÂéüÂõ†Â¶Ç‰∏ãÔºö objcÊòØÂä®ÊÄÅËØ≠Ë®ÄÔºåÊØè‰∏™ÊñπÊ≥ïÂú®ËøêË°åÊó∂‰ºöË¢´Âä®ÊÄÅËΩ¨‰∏∫Ê∂àÊÅØÂèëÈÄÅÔºåÂç≥Ôºöobjc_msgSend(receiver, selector)„ÄÇ ÈÇ£‰πàÔºå‰∏∫‰∫ÜÊñπ‰æøÁêÜËß£Ëøô‰∏™ÂÜÖÂÆπÔºåËøòÊòØË¥¥‰∏Ä‰∏™objcÁöÑÊ∫ê‰ª£Á†ÅÔºö 123456789101112131415161718// runtime.hÔºàÁ±ªÂú®runtime‰∏≠ÁöÑÂÆö‰πâÔºâ// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilongstruct objc_class { Class isa OBJC_ISA_AVAILABILITY; //isaÊåáÈíàÊåáÂêëMeta ClassÔºåÂõ†‰∏∫ObjcÁöÑÁ±ªÁöÑÊú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™ObjectÔºå‰∏∫‰∫ÜÂ§ÑÁêÜËøô‰∏™ÂÖ≥Á≥ªÔºåruntimeÂ∞±ÂàõÈÄ†‰∫ÜMeta ClassÔºåÂΩìÁªôÁ±ªÂèëÈÄÅ[NSObject alloc]ËøôÊ†∑Ê∂àÊÅØÊó∂ÔºåÂÆûÈôÖ‰∏äÊòØÊääËøô‰∏™Ê∂àÊÅØÂèëÁªô‰∫ÜClass Object #if !__OBJC2__ Class super_class OBJC2_UNAVAILABLE; // Áà∂Á±ª const char *name OBJC2_UNAVAILABLE; // Á±ªÂêç long version OBJC2_UNAVAILABLE; // Á±ªÁöÑÁâàÊú¨‰ø°ÊÅØÔºåÈªòËÆ§‰∏∫0 long info OBJC2_UNAVAILABLE; // Á±ª‰ø°ÊÅØÔºå‰æõËøêË°åÊúü‰ΩøÁî®ÁöÑ‰∏Ä‰∫õ‰ΩçÊ†áËØÜ long instance_size OBJC2_UNAVAILABLE; // ËØ•Á±ªÁöÑÂÆû‰æãÂèòÈáèÂ§ßÂ∞è struct objc_ivar_list *ivars OBJC2_UNAVAILABLE; // ËØ•Á±ªÁöÑÊàêÂëòÂèòÈáèÈìæË°® struct objc_method_list **methodLists OBJC2_UNAVAILABLE; // ÊñπÊ≥ïÂÆö‰πâÁöÑÈìæË°® struct objc_cache *cache OBJC2_UNAVAILABLE; // ÊñπÊ≥ïÁºìÂ≠òÔºåÂØπË±°Êé•Âà∞‰∏Ä‰∏™Ê∂àÊÅØ‰ºöÊ†πÊçÆisaÊåáÈíàÊü•ÊâæÊ∂àÊÅØÂØπË±°ÔºåËøôÊó∂‰ºöÂú®method Lists‰∏≠ÈÅçÂéÜÔºåÂ¶ÇÊûúcache‰∫ÜÔºåÂ∏∏Áî®ÁöÑÊñπÊ≥ïË∞ÉÁî®Êó∂Â∞±ËÉΩÂ§üÊèêÈ´òË∞ÉÁî®ÁöÑÊïàÁéá„ÄÇ struct objc_protocol_list *protocols OBJC2_UNAVAILABLE; // ÂçèËÆÆÈìæË°® #endif } OBJC2_UNAVAILABLE; objcÂú®Âêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅÊ∂àÊÅØÊó∂ÔºåruntimeÂ∫ì‰ºöÊ†πÊçÆÂØπË±°ÁöÑisaÊåáÈíàÊâæÂà∞ËØ•ÂØπË±°ÂÆûÈôÖÊâÄÂ±ûÁöÑÁ±ªÔºåÁÑ∂ÂêéÂú®ËØ•Á±ª‰∏≠ÁöÑÊñπÊ≥ïÂàóË°®‰ª•ÂèäÂÖ∂Áà∂Á±ªÊñπÊ≥ïÂàóË°®‰∏≠ÂØªÊâæÊñπÊ≥ïËøêË°åÔºåÁÑ∂ÂêéÂú®ÂèëÈÄÅÊ∂àÊÅØÁöÑÊó∂ÂÄôÔºåobjc_msgSendÊñπÊ≥ï‰∏ç‰ºöËøîÂõûÂÄºÔºåÊâÄË∞ìÁöÑËøîÂõûÂÜÖÂÆπÈÉΩÊòØÂÖ∑‰ΩìË∞ÉÁî®Êó∂ÊâßË°åÁöÑ„ÄÇÈÇ£‰πàÔºåÂõûÂà∞Êú¨È¢òÔºåÂ¶ÇÊûúÂêë‰∏Ä‰∏™nilÂØπË±°ÂèëÈÄÅÊ∂àÊÅØÔºåÈ¶ñÂÖàÂú®ÂØªÊâæÂØπË±°ÁöÑisaÊåáÈíàÊó∂Â∞±ÊòØ0Âú∞ÂùÄËøîÂõû‰∫ÜÔºåÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞‰ªª‰ΩïÈîôËØØ„ÄÇ 17. objc‰∏≠Âêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅÊ∂àÊÅØ[obj foo]Âíåobjc_msgSend()ÂáΩÊï∞‰πãÈó¥Êúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºüÂÖ∑‰ΩìÂéüÂõ†Âêå‰∏äÈ¢òÔºöËØ•ÊñπÊ≥ïÁºñËØë‰πãÂêéÂ∞±ÊòØobjc_msgSend()ÂáΩÊï∞Ë∞ÉÁî®. Êàë‰ª¨Áî® clang ÂàÜÊûê‰∏ãÔºåclang Êèê‰æõ‰∏Ä‰∏™ÂëΩ‰ª§ÔºåÂèØ‰ª•Â∞ÜObjective-CÁöÑÊ∫êÁ†ÅÊîπÂÜôÊàêC++ËØ≠Ë®ÄÔºåÂÄüÊ≠§ÂèØ‰ª•Á†îÁ©∂‰∏ã[obj foo]Âíåobjc_msgSend()ÂáΩÊï∞‰πãÈó¥Êúâ‰ªÄ‰πàÂÖ≥Á≥ª„ÄÇ ‰ª•‰∏ãÈù¢ÁöÑ‰ª£Á†Å‰∏∫‰æãÔºåÁî±‰∫é clang ÂêéÁöÑ‰ª£Á†ÅËææÂà∞‰∫Ü10‰∏áÂ§öË°åÔºå‰∏∫‰∫Ü‰æø‰∫éÂå∫ÂàÜÔºåÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™Âè´ iOSinit ÊñπÊ≥ïÔºå 1234567891011121314151617//// main.m// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong// Copyright (c) 2015Âπ¥ ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å. All rights reserved.//#import &quot;CYLTest.h&quot;int main(int argc, char * argv[]) { @autoreleasepool { CYLTest *test = [[CYLTest alloc] init]; [test performSelector:(@selector(iOSinit))]; return 0; }} Âú®ÁªàÁ´Ø‰∏≠ËæìÂÖ• 1clang -rewrite-objc main.m Â∞±ÂèØ‰ª•ÁîüÊàê‰∏Ä‰∏™main.cppÁöÑÊñá‰ª∂ÔºåÂú®ÊúÄ‰ΩéÁ´ØÔºà10‰∏á4ÂçÉË°åÂ∑¶Âè≥Ôºâ Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Â§ßÊ¶ÇÊòØËøôÊ†∑ÁöÑÔºö 1((void ()(id, SEL))(void )objc_msgSend)((id)obj, sel_registerName(&quot;foo&quot;)); ‰πüÂ∞±ÊòØËØ¥Ôºö [obj foo];Âú®objcÁºñËØëÊó∂Ôºå‰ºöË¢´ËΩ¨ÊÑè‰∏∫Ôºöobjc_msgSend(obj, @selector(foo));„ÄÇ 18. ‰ªÄ‰πàÊó∂ÂÄô‰ºöÊä•unrecognized selectorÁöÑÂºÇÂ∏∏ÔºüÁÆÄÂçïÊù•ËØ¥Ôºö ÂΩìË∞ÉÁî®ËØ•ÂØπË±°‰∏äÊüê‰∏™ÊñπÊ≥ï,ËÄåËØ•ÂØπË±°‰∏äÊ≤°ÊúâÂÆûÁé∞Ëøô‰∏™ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•ÈÄöËøá‚ÄúÊ∂àÊÅØËΩ¨Âèë‚ÄùËøõË°åËß£ÂÜ≥„ÄÇ ÁÆÄÂçïÁöÑÊµÅÁ®ãÂ¶Ç‰∏ãÔºåÂú®‰∏ä‰∏ÄÈ¢ò‰∏≠‰πüÊèêÂà∞ËøáÔºö objcÊòØÂä®ÊÄÅËØ≠Ë®ÄÔºåÊØè‰∏™ÊñπÊ≥ïÂú®ËøêË°åÊó∂‰ºöË¢´Âä®ÊÄÅËΩ¨‰∏∫Ê∂àÊÅØÂèëÈÄÅÔºåÂç≥Ôºöobjc_msgSend(receiver, selector)„ÄÇ objcÂú®Âêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅÊ∂àÊÅØÊó∂ÔºåruntimeÂ∫ì‰ºöÊ†πÊçÆÂØπË±°ÁöÑisaÊåáÈíàÊâæÂà∞ËØ•ÂØπË±°ÂÆûÈôÖÊâÄÂ±ûÁöÑÁ±ªÔºåÁÑ∂ÂêéÂú®ËØ•Á±ª‰∏≠ÁöÑÊñπÊ≥ïÂàóË°®‰ª•ÂèäÂÖ∂Áà∂Á±ªÊñπÊ≥ïÂàóË°®‰∏≠ÂØªÊâæÊñπÊ≥ïËøêË°åÔºåÂ¶ÇÊûúÔºåÂú®ÊúÄÈ°∂Â±ÇÁöÑÁà∂Á±ª‰∏≠‰æùÁÑ∂Êâæ‰∏çÂà∞Áõ∏Â∫îÁöÑÊñπÊ≥ïÊó∂ÔºåÁ®ãÂ∫èÂú®ËøêË°åÊó∂‰ºöÊåÇÊéâÂπ∂ÊäõÂá∫ÂºÇÂ∏∏unrecognized selector sent to XXX „ÄÇ‰ΩÜÊòØÂú®Ëøô‰πãÂâçÔºåobjcÁöÑËøêË°åÊó∂‰ºöÁªôÂá∫‰∏âÊ¨°ÊãØÊïëÁ®ãÂ∫èÂ¥©Ê∫ÉÁöÑÊú∫‰ºöÔºö Method resolution objcËøêË°åÊó∂‰ºöË∞ÉÁî®+resolveInstanceMethod:ÊàñËÄÖ +resolveClassMethod:ÔºåËÆ©‰Ω†ÊúâÊú∫‰ºöÊèê‰æõ‰∏Ä‰∏™ÂáΩÊï∞ÂÆûÁé∞„ÄÇÂ¶ÇÊûú‰Ω†Ê∑ªÂä†‰∫ÜÂáΩÊï∞ÔºåÈÇ£ËøêË°åÊó∂Á≥ªÁªüÂ∞±‰ºöÈáçÊñ∞ÂêØÂä®‰∏ÄÊ¨°Ê∂àÊÅØÂèëÈÄÅÁöÑËøáÁ®ãÔºåÂê¶Âàô ÔºåËøêË°åÊó∂Â∞±‰ºöÁßªÂà∞‰∏ã‰∏ÄÊ≠•ÔºåÊ∂àÊÅØËΩ¨ÂèëÔºàMessage ForwardingÔºâ„ÄÇ Fast forwarding Â¶ÇÊûúÁõÆÊ†áÂØπË±°ÂÆûÁé∞‰∫Ü-forwardingTargetForSelector:ÔºåRuntime ËøôÊó∂Â∞±‰ºöË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ïÔºåÁªô‰Ω†ÊääËøô‰∏™Ê∂àÊÅØËΩ¨ÂèëÁªôÂÖ∂‰ªñÂØπË±°ÁöÑÊú∫‰ºö„ÄÇÂè™Ë¶ÅËøô‰∏™ÊñπÊ≥ïËøîÂõûÁöÑ‰∏çÊòØnilÂíåselfÔºåÊï¥‰∏™Ê∂àÊÅØÂèëÈÄÅÁöÑËøáÁ®ãÂ∞±‰ºöË¢´ÈáçÂêØÔºåÂΩìÁÑ∂ÂèëÈÄÅÁöÑÂØπË±°‰ºöÂèòÊàê‰Ω†ËøîÂõûÁöÑÈÇ£‰∏™ÂØπË±°„ÄÇÂê¶ÂàôÔºåÂ∞±‰ºöÁªßÁª≠Normal Fowarding„ÄÇËøôÈáåÂè´FastÔºåÂè™ÊòØ‰∏∫‰∫ÜÂå∫Âà´‰∏ã‰∏ÄÊ≠•ÁöÑËΩ¨ÂèëÊú∫Âà∂„ÄÇÂõ†‰∏∫Ëøô‰∏ÄÊ≠•‰∏ç‰ºöÂàõÂª∫‰ªª‰ΩïÊñ∞ÁöÑÂØπË±°Ôºå‰ΩÜ‰∏ã‰∏ÄÊ≠•ËΩ¨Âèë‰ºöÂàõÂª∫‰∏Ä‰∏™NSInvocationÂØπË±°ÔºåÊâÄ‰ª•Áõ∏ÂØπÊõ¥Âø´ÁÇπ„ÄÇ Normal forwarding Ëøô‰∏ÄÊ≠•ÊòØRuntimeÊúÄÂêé‰∏ÄÊ¨°Áªô‰Ω†ÊåΩÊïëÁöÑÊú∫‰ºö„ÄÇÈ¶ñÂÖàÂÆÉ‰ºöÂèëÈÄÅ-methodSignatureForSelector:Ê∂àÊÅØËé∑ÂæóÂáΩÊï∞ÁöÑÂèÇÊï∞ÂíåËøîÂõûÂÄºÁ±ªÂûã„ÄÇÂ¶ÇÊûú-methodSignatureForSelector:ËøîÂõûnilÔºåRuntimeÂàô‰ºöÂèëÂá∫-doesNotRecognizeSelector:Ê∂àÊÅØÔºåÁ®ãÂ∫èËøôÊó∂‰πüÂ∞±ÊåÇÊéâ‰∫Ü„ÄÇÂ¶ÇÊûúËøîÂõû‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞Á≠æÂêçÔºåRuntimeÂ∞±‰ºöÂàõÂª∫‰∏Ä‰∏™NSInvocationÂØπË±°Âπ∂ÂèëÈÄÅ-forwardInvocation:Ê∂àÊÅØÁªôÁõÆÊ†áÂØπË±°„ÄÇ ‰∏∫‰∫ÜËÉΩÊõ¥Ê∏ÖÊô∞Âú∞ÁêÜËß£Ëøô‰∫õÊñπÊ≥ïÁöÑ‰ΩúÁî®Ôºågit‰ªìÂ∫ìÈáå‰πüÁªôÂá∫‰∫Ü‰∏Ä‰∏™DemoÔºåÂêçÁß∞Âè´‚Äú _objc_msgForward_demo ‚Äù,ÂèØËøêË°åËµ∑Êù•ÁúãÁúã„ÄÇ 19. ‰∏Ä‰∏™objcÂØπË±°Â¶Ç‰ΩïËøõË°åÂÜÖÂ≠òÂ∏ÉÂ±ÄÔºüÔºàËÄÉËôëÊúâÁà∂Á±ªÁöÑÊÉÖÂÜµÔºâ ÊâÄÊúâÁà∂Á±ªÁöÑÊàêÂëòÂèòÈáèÂíåËá™Â∑±ÁöÑÊàêÂëòÂèòÈáèÈÉΩ‰ºöÂ≠òÊîæÂú®ËØ•ÂØπË±°ÊâÄÂØπÂ∫îÁöÑÂ≠òÂÇ®Á©∫Èó¥‰∏≠. ÊØè‰∏Ä‰∏™ÂØπË±°ÂÜÖÈÉ®ÈÉΩÊúâ‰∏Ä‰∏™isaÊåáÈíà,ÊåáÂêë‰ªñÁöÑÁ±ªÂØπË±°,Á±ªÂØπË±°‰∏≠Â≠òÊîæÁùÄÊú¨ÂØπË±°ÁöÑ ÂØπË±°ÊñπÊ≥ïÂàóË°®ÔºàÂØπË±°ËÉΩÂ§üÊé•Êî∂ÁöÑÊ∂àÊÅØÂàóË°®Ôºå‰øùÂ≠òÂú®ÂÆÉÊâÄÂØπÂ∫îÁöÑÁ±ªÂØπË±°‰∏≠Ôºâ ÊàêÂëòÂèòÈáèÁöÑÂàóË°®, Â±ûÊÄßÂàóË°®, ÂÆÉÂÜÖÈÉ®‰πüÊúâ‰∏Ä‰∏™isaÊåáÈíàÊåáÂêëÂÖÉÂØπË±°(meta class),ÂÖÉÂØπË±°ÂÜÖÈÉ®Â≠òÊîæÁöÑÊòØÁ±ªÊñπÊ≥ïÂàóË°®,Á±ªÂØπË±°ÂÜÖÈÉ®ËøòÊúâ‰∏Ä‰∏™superclassÁöÑÊåáÈíà,ÊåáÂêë‰ªñÁöÑÁà∂Á±ªÂØπË±°„ÄÇ ÊØè‰∏™ Objective-C ÂØπË±°ÈÉΩÊúâÁõ∏ÂêåÁöÑÁªìÊûÑÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÁøªËØëËøáÊù•Â∞±ÊòØ Objective-C ÂØπË±°ÁöÑÁªìÊûÑÂõæ ISAÊåáÈíà Ê†πÁ±ªÁöÑÂÆû‰æãÂèòÈáè ÂÄíÊï∞Á¨¨‰∫åÂ±ÇÁà∂Á±ªÁöÑÂÆû‰æãÂèòÈáè ‚Ä¶ Áà∂Á±ªÁöÑÂÆû‰æãÂèòÈáè Á±ªÁöÑÂÆû‰æãÂèòÈáè Ê†πÂØπË±°Â∞±ÊòØNSObjectÔºåÂÆÉÁöÑsuperclassÊåáÈíàÊåáÂêënil Á±ªÂØπË±°Êó¢ÁÑ∂Áß∞‰∏∫ÂØπË±°ÔºåÈÇ£ÂÆÉ‰πüÊòØ‰∏Ä‰∏™ÂÆû‰æã„ÄÇÁ±ªÂØπË±°‰∏≠‰πüÊúâ‰∏Ä‰∏™isaÊåáÈíàÊåáÂêëÂÆÉÁöÑÂÖÉÁ±ª(meta class)ÔºåÂç≥Á±ªÂØπË±°ÊòØÂÖÉÁ±ªÁöÑÂÆû‰æã„ÄÇÂÖÉÁ±ªÂÜÖÈÉ®Â≠òÊîæÁöÑÊòØÁ±ªÊñπÊ≥ïÂàóË°®ÔºåÊ†πÂÖÉÁ±ªÁöÑisaÊåáÈíàÊåáÂêëËá™Â∑±ÔºåsuperclassÊåáÈíàÊåáÂêëNSObjectÁ±ª„ÄÇ Â¶ÇÂõæ: 20. ‰∏Ä‰∏™objcÂØπË±°ÁöÑisaÁöÑÊåáÈíàÊåáÂêë‰ªÄ‰πàÔºüÊúâ‰ªÄ‰πà‰ΩúÁî®ÔºüÊåáÂêë‰ªñÁöÑÁ±ªÂØπË±°,‰ªéËÄåÂèØ‰ª•ÊâæÂà∞ÂØπË±°‰∏äÁöÑÊñπÊ≥ï 21. ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅËæìÂá∫‰ªÄ‰πàÔºü 1234567891011@implementation Son : Father- (id)init{ self = [super init]; if (self) { NSLog(@&quot;%@&quot;, NSStringFromClass([self class])); NSLog(@&quot;%@&quot;, NSStringFromClass([super class])); } return self;}@end Á≠îÊ°àÔºö ÈÉΩËæìÂá∫ Son NSStringFromClass([self class]) = Son NSStringFromClass([super class]) = SonËøô‰∏™È¢òÁõÆ‰∏ªË¶ÅÊòØËÄÉÂØüÂÖ≥‰∫é Objective-C ‰∏≠ÂØπ self Âíå super ÁöÑÁêÜËß£„ÄÇ Êàë‰ª¨ÈÉΩÁü•ÈÅìÔºöself ÊòØÁ±ªÁöÑÈöêËóèÂèÇÊï∞ÔºåÊåáÂêëÂΩìÂâçË∞ÉÁî®ÊñπÊ≥ïÁöÑËøô‰∏™Á±ªÁöÑÂÆû‰æã„ÄÇÈÇ£ super Âë¢Ôºü ÂæàÂ§ö‰∫∫‰ºöÊÉ≥ÂΩìÁÑ∂ÁöÑËÆ§‰∏∫‚Äú super Âíå self Á±ª‰ººÔºåÂ∫îËØ•ÊòØÊåáÂêëÁà∂Á±ªÁöÑÊåáÈíàÂêßÔºÅ‚Äù„ÄÇËøôÊòØÂæàÊôÆÈÅçÁöÑ‰∏Ä‰∏™ËØØÂå∫„ÄÇÂÖ∂ÂÆû super ÊòØ‰∏Ä‰∏™ Magic KeywordÔºå ÂÆÉÊú¨Ë¥®ÊòØ‰∏Ä‰∏™ÁºñËØëÂô®Ê†áÁ§∫Á¨¶ÔºåÂíå self ÊòØÊåáÂêëÁöÑÂêå‰∏Ä‰∏™Ê∂àÊÅØÊé•ÂèóËÄÖÔºÅ‰ªñ‰ª¨‰∏§‰∏™ÁöÑ‰∏çÂêåÁÇπÂú®‰∫éÔºösuper ‰ºöÂëäËØâÁºñËØëÂô®ÔºåË∞ÉÁî® class Ëøô‰∏™ÊñπÊ≥ïÊó∂ÔºåË¶ÅÂéªÁà∂Á±ªÁöÑÊñπÊ≥ïÔºåËÄå‰∏çÊòØÊú¨Á±ªÈáåÁöÑ„ÄÇ ‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏çÁÆ°Ë∞ÉÁî®[self class]ËøòÊòØ[super class]ÔºåÊé•ÂèóÊ∂àÊÅØÁöÑÂØπË±°ÈÉΩÊòØÂΩìÂâç Son Ôºäxxx Ëøô‰∏™ÂØπË±°„ÄÇ ÂΩì‰ΩøÁî® self Ë∞ÉÁî®ÊñπÊ≥ïÊó∂Ôºå‰ºö‰ªéÂΩìÂâçÁ±ªÁöÑÊñπÊ≥ïÂàóË°®‰∏≠ÂºÄÂßãÊâæÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±‰ªéÁà∂Á±ª‰∏≠ÂÜçÊâæÔºõËÄåÂΩì‰ΩøÁî® super Êó∂ÔºåÂàô‰ªéÁà∂Á±ªÁöÑÊñπÊ≥ïÂàóË°®‰∏≠ÂºÄÂßãÊâæ„ÄÇÁÑ∂ÂêéË∞ÉÁî®Áà∂Á±ªÁöÑËøô‰∏™ÊñπÊ≥ï„ÄÇ Ëøô‰πüÂ∞±ÊòØ‰∏∫‰ªÄ‰πàËØ¥‚Äú‰∏çÊé®ËçêÂú® init ÊñπÊ≥ï‰∏≠‰ΩøÁî®ÁÇπËØ≠Ê≥ï‚ÄùÔºåÂ¶ÇÊûúÊÉ≥ËÆøÈóÆÂÆû‰æãÂèòÈáè iVar Â∫îËØ•‰ΩøÁî®‰∏ãÂàíÁ∫øÔºà _iVar ÔºâÔºåËÄåÈùûÁÇπËØ≠Ê≥ïÔºà self.iVar Ôºâ„ÄÇ ÁÇπËØ≠Ê≥ïÔºà self.iVar ÔºâÁöÑÂùèÂ§ÑÂ∞±ÊòØÂ≠êÁ±ªÊúâÂèØËÉΩË¶ÜÂÜô setter „ÄÇÂÅáËÆæ Person Êúâ‰∏Ä‰∏™Â≠êÁ±ªÂè´ ChenPersonÔºåËøô‰∏™Â≠êÁ±ª‰∏ìÈó®Ë°®Á§∫ÈÇ£‰∫õÂßì‚ÄúÈôà‚ÄùÁöÑ‰∫∫„ÄÇËØ•Â≠êÁ±ªÂèØËÉΩ‰ºöË¶ÜÂÜô lastName Â±ûÊÄßÊâÄÂØπÂ∫îÁöÑËÆæÁΩÆÊñπÊ≥ïÔºö 12345678910111213141516171819202122232425262728293031323334353637383940//// ChenPerson.m// //// Created by https://github.com/ChenYilong on 15/8/30.// Copyright (c) 2015Âπ¥ https://weibo.com/luohanchenyilong/ ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å. All rights reserved.//#import &quot;ChenPerson.h&quot;@implementation ChenPerson@synthesize lastName = _lastName;- (instancetype)init{ self = [super init]; if (self) { NSLog(@&quot;üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö%sÔºàÂú®Á¨¨%dË°åÔºâÔºåÊèèËø∞Ôºö%@&quot;, __PRETTY_FUNCTION__, __LINE__, NSStringFromClass([self class])); NSLog(@&quot;üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö%sÔºàÂú®Á¨¨%dË°åÔºâÔºåÊèèËø∞Ôºö%@&quot;, __PRETTY_FUNCTION__, __LINE__, NSStringFromClass([super class])); } return self;}- (void)setLastName:(NSString*)lastName{ //ËÆæÁΩÆÊñπÊ≥ï‰∏ÄÔºöÂ¶ÇÊûúsetterÈááÁî®ÊòØËøôÁßçÊñπÂºèÔºåÂ∞±ÂèØËÉΩÂºïËµ∑Â¥©Ê∫É// if (![lastName isEqualToString:@&quot;Èôà&quot;])// {// [NSException raise:NSInvalidArgumentException format:@&quot;Âßì‰∏çÊòØÈôà&quot;];// }// _lastName = lastName; //ËÆæÁΩÆÊñπÊ≥ï‰∫åÔºöÂ¶ÇÊûúsetterÈááÁî®ÊòØËøôÁßçÊñπÂºèÔºåÂ∞±ÂèØËÉΩÂºïËµ∑Â¥©Ê∫É _lastName = @&quot;Èôà&quot;; NSLog(@&quot;üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö%sÔºàÂú®Á¨¨%dË°åÔºâÔºåÊèèËø∞Ôºö%@&quot;, __PRETTY_FUNCTION__, __LINE__, @&quot;‰ºöË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï,ÊÉ≥‰∏Ä‰∏ã‰∏∫‰ªÄ‰πàÔºü&quot;);}@end Âú®Âü∫Á±ª Person ÁöÑÈªòËÆ§ÂàùÂßãÂåñÊñπÊ≥ï‰∏≠ÔºåÂèØËÉΩ‰ºöÂ∞ÜÂßìÊ∞èËÆæ‰∏∫Á©∫Â≠óÁ¨¶‰∏≤„ÄÇÊ≠§Êó∂Ëã•‰ΩøÁî®ÁÇπËØ≠Ê≥ïÔºà self.lastName Ôºâ‰πüÂç≥ setter ËÆæÁΩÆÊñπÊ≥ïÔºåÈÇ£‰πàË∞ÉÁî®Â∞Ü‰ºöÊòØÂ≠êÁ±ªÁöÑËÆæÁΩÆÊñπÊ≥ïÔºåÂ¶ÇÊûúÂú®ÂàöÂàöÁöÑ setter ‰ª£Á†Å‰∏≠ÈááÁî®ËÆæÁΩÆÊñπÊ≥ï‰∏ÄÔºåÈÇ£‰πàÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏Ôºå ‰∏∫‰∫ÜÊñπ‰æøÈááÁî®ÊâìÂç∞ÁöÑÊñπÂºèÂ±ïÁ§∫ÔºåÁ©∂Á´üÂèëÁîü‰∫Ü‰ªÄ‰πàÔºåÊàë‰ª¨‰ΩøÁî®ËÆæÁΩÆÊñπÊ≥ï‰∫å„ÄÇ Â¶ÇÊûúÂü∫Á±ªÁöÑ‰ª£Á†ÅÊòØËøôÊ†∑ÁöÑÔºö 123456789101112131415161718192021222324252627282930//// Person.m// nilÂØπË±°Ë∞ÉÁî®ÁÇπËØ≠Ê≥ï//// Created by https://github.com/ChenYilong on 15/8/29.// Copyright (c) 2015Âπ¥ https://weibo.com/luohanchenyilong/ ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å. All rights reserved.// #import &quot;Person.h&quot;@implementation Person- (instancetype)init{ self = [super init]; if (self) { self.lastName = @&quot;&quot;; //NSLog(@&quot;üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö%sÔºàÂú®Á¨¨%dË°åÔºâÔºåÊèèËø∞Ôºö%@&quot;, __PRETTY_FUNCTION__, __LINE__, NSStringFromClass([self class])); //NSLog(@&quot;üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö%sÔºàÂú®Á¨¨%dË°åÔºâÔºåÊèèËø∞Ôºö%@&quot;, __PRETTY_FUNCTION__, __LINE__, self.lastName); } return self;}- (void)setLastName:(NSString*)lastName{ NSLog(@&quot;üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö%sÔºàÂú®Á¨¨%dË°åÔºâÔºåÊèèËø∞Ôºö%@&quot;, __PRETTY_FUNCTION__, __LINE__, @&quot;Ê†πÊú¨‰∏ç‰ºöË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï&quot;); _lastName = @&quot;ÁÇéÈªÑ&quot;;}@end ÈÇ£‰πàÊâìÂç∞ÁªìÊûúÂ∞Ü‰ºöÊòØËøôÊ†∑ÁöÑÔºö 123üî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[ChenPerson setLastName:]ÔºàÂú®Á¨¨36Ë°åÔºâÔºåÊèèËø∞Ôºö‰ºöË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï,ÊÉ≥‰∏Ä‰∏ã‰∏∫‰ªÄ‰πàÔºüüî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[ChenPerson init]ÔºàÂú®Á¨¨19Ë°åÔºâÔºåÊèèËø∞ÔºöChenPersonüî¥Á±ªÂêç‰∏éÊñπÊ≥ïÂêçÔºö-[ChenPerson init]ÔºàÂú®Á¨¨20Ë°åÔºâÔºåÊèèËø∞ÔºöChenPerson ÊàëÂú®‰ªìÂ∫ìÈáå‰πüÁªôÂá∫‰∫Ü‰∏Ä‰∏™Áõ∏Â∫îÁöÑ DemoÔºàÂêçÂ≠óÂè´ÔºöDemo_21È¢ò_‰∏ãÈù¢ÁöÑ‰ª£Á†ÅËæìÂá∫‰ªÄ‰πàÔºâ„ÄÇÊúâÂÖ¥Ë∂£ÂèØ‰ª•Ë∑ëËµ∑Êù•Áúã‰∏Ä‰∏ãÔºå‰∏ªË¶ÅÁúã‰∏ã‰ªñÊòØÊÄé‰πàÊâìÂç∞ÁöÑÔºåÊÄùËÄÉ‰∏ã‰∏∫‰ªÄ‰πàËøô‰πàÊâìÂç∞„ÄÇ Êé•‰∏ãÊù•ËÆ©Êàë‰ª¨Âà©Áî® runtime ÁöÑÁõ∏ÂÖ≥Áü•ËØÜÊù•È™åËØÅ‰∏Ä‰∏ã super ÂÖ≥ÈîÆÂ≠óÁöÑÊú¨Ë¥®Ôºå‰ΩøÁî®clangÈáçÂÜôÂëΩ‰ª§: 1$ clang -rewrite-objc test.m Â∞ÜËøôÈÅìÈ¢òÁõÆ‰∏≠ÁªôÂá∫ÁöÑ‰ª£Á†ÅË¢´ËΩ¨Âåñ‰∏∫: 123NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gm_0jk35cwn1d3326x0061qym280000gn_T_main_a5cecc_mi_0, NSStringFromClass(((Class (*)(id, SEL))(void *)objc_msgSend)((id)self, sel_registerName(&quot;class&quot;))));NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gm_0jk35cwn1d3326x0061qym280000gn_T_main_a5cecc_mi_1, NSStringFromClass(((Class (*)(__rw_objc_super *, SEL))(void *)objc_msgSendSuper)((__rw_objc_super){ (id)self, (id)class_getSuperclass(objc_getClass(&quot;Son&quot;)) }, sel_registerName(&quot;class&quot;)))); ‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÂèëÁé∞Âú®Ë∞ÉÁî® [self class] Êó∂Ôºå‰ºöËΩ¨ÂåñÊàê objc_msgSendÂáΩÊï∞„ÄÇÁúã‰∏ãÂáΩÊï∞ÂÆö‰πâÔºö 1id objc_msgSend(id self, SEL op, ...) Êàë‰ª¨Êää self ÂÅö‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰º†ÈÄíËøõÂéª„ÄÇ ËÄåÂú®Ë∞ÉÁî® [super class]Êó∂Ôºå‰ºöËΩ¨ÂåñÊàê objc_msgSendSuperÂáΩÊï∞„ÄÇÁúã‰∏ãÂáΩÊï∞ÂÆö‰πâ: 1id objc_msgSendSuper(struct objc_super *super, SEL op, ...) Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ objc_super ËøôÊ†∑‰∏Ä‰∏™ÁªìÊûÑ‰ΩìÔºåÂÖ∂ÂÆö‰πâÂ¶Ç‰∏ã: 1234struct objc_super { __unsafe_unretained id receiver; __unsafe_unretained Class super_class;}; ÁªìÊûÑ‰ΩìÊúâ‰∏§‰∏™ÊàêÂëòÔºåÁ¨¨‰∏Ä‰∏™ÊàêÂëòÊòØ receiver, Á±ª‰ºº‰∫é‰∏äÈù¢ÁöÑ objc_msgSendÂáΩÊï∞Á¨¨‰∏Ä‰∏™ÂèÇÊï∞self „ÄÇÁ¨¨‰∫å‰∏™ÊàêÂëòÊòØËÆ∞ÂΩïÂΩìÂâçÁ±ªÁöÑÁà∂Á±ªÊòØ‰ªÄ‰πà„ÄÇ ÊâÄ‰ª•ÔºåÂΩìË∞ÉÁî® Ôºªself class] Êó∂ÔºåÂÆûÈôÖÂÖàË∞ÉÁî®ÁöÑÊòØ objc_msgSendÂáΩÊï∞ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ SonÂΩìÂâçÁöÑËøô‰∏™ÂÆû‰æãÔºåÁÑ∂ÂêéÂú® Son Ëøô‰∏™Á±ªÈáåÈù¢ÂéªÊâæ - (Class)classËøô‰∏™ÊñπÊ≥ïÔºåÊ≤°ÊúâÔºåÂéªÁà∂Á±ª FatherÈáåÊâæÔºå‰πüÊ≤°ÊúâÔºåÊúÄÂêéÂú® NSObjectÁ±ª‰∏≠ÂèëÁé∞Ëøô‰∏™ÊñπÊ≥ï„ÄÇËÄå - (Class)classÁöÑÂÆûÁé∞Â∞±ÊòØËøîÂõûselfÁöÑÁ±ªÂà´ÔºåÊïÖ‰∏äËø∞ËæìÂá∫ÁªìÊûú‰∏∫ Son„ÄÇ objc RuntimeÂºÄÊ∫ê‰ª£Á†ÅÂØπ- (Class)classÊñπÊ≥ïÁöÑÂÆûÁé∞: 123- (Class)class { return object_getClass(self);} ËÄåÂΩìË∞ÉÁî® [super class]Êó∂Ôºå‰ºöËΩ¨Êç¢Êàêobjc_msgSendSuperÂáΩÊï∞„ÄÇÁ¨¨‰∏ÄÊ≠•ÂÖàÊûÑÈÄ† objc_super ÁªìÊûÑ‰ΩìÔºåÁªìÊûÑ‰ΩìÁ¨¨‰∏Ä‰∏™ÊàêÂëòÂ∞±ÊòØ self „ÄÇÁ¨¨‰∫å‰∏™ÊàêÂëòÊòØ (id)class_getSuperclass(objc_getClass(‚ÄúSon‚Äù)) , ÂÆûÈôÖËØ•ÂáΩÊï∞ËæìÂá∫ÁªìÊûú‰∏∫ Father„ÄÇ Á¨¨‰∫åÊ≠•ÊòØÂéª FatherËøô‰∏™Á±ªÈáåÂéªÊâæ - (Class)classÔºåÊ≤°ÊúâÔºåÁÑ∂ÂêéÂéªNSObjectÁ±ªÂéªÊâæÔºåÊâæÂà∞‰∫Ü„ÄÇÊúÄÂêéÂÜÖÈÉ®ÊòØ‰ΩøÁî® objc_msgSend(objc_super-&gt;receiver, @selector(class))ÂéªË∞ÉÁî®Ôºå Ê≠§Êó∂Â∑≤ÁªèÂíå[self class]Ë∞ÉÁî®Áõ∏Âêå‰∫ÜÔºåÊïÖ‰∏äËø∞ËæìÂá∫ÁªìÊûú‰ªçÁÑ∂ËøîÂõû Son„ÄÇ ÂèÇËÄÉÈìæÊé•ÔºöÂæÆÂçö@Chun_iOSÁöÑÂçöÊñáÂà®Ê†πÈóÆÂ∫ïObjectiveÔºçC RuntimeÔºà1ÔºâÔºç Self &amp; Super 22. runtimeÂ¶Ç‰ΩïÈÄöËøáselectorÊâæÂà∞ÂØπÂ∫îÁöÑIMPÂú∞ÂùÄÔºüÔºàÂàÜÂà´ËÄÉËôëÁ±ªÊñπÊ≥ïÂíåÂÆû‰æãÊñπÊ≥ïÔºâÊØè‰∏Ä‰∏™Á±ªÂØπË±°‰∏≠ÈÉΩ‰∏Ä‰∏™ÊñπÊ≥ïÂàóË°®,ÊñπÊ≥ïÂàóË°®‰∏≠ËÆ∞ÂΩïÁùÄÊñπÊ≥ïÁöÑÂêçÁß∞,ÊñπÊ≥ïÂÆûÁé∞,‰ª•ÂèäÂèÇÊï∞Á±ªÂûã,ÂÖ∂ÂÆûselectorÊú¨Ë¥®Â∞±ÊòØÊñπÊ≥ïÂêçÁß∞,ÈÄöËøáËøô‰∏™ÊñπÊ≥ïÂêçÁß∞Â∞±ÂèØ‰ª•Âú®ÊñπÊ≥ïÂàóË°®‰∏≠ÊâæÂà∞ÂØπÂ∫îÁöÑÊñπÊ≥ïÂÆûÁé∞. 23. ‰ΩøÁî®runtime AssociateÊñπÊ≥ïÂÖ≥ËÅîÁöÑÂØπË±°ÔºåÈúÄË¶ÅÂú®‰∏ªÂØπË±°deallocÁöÑÊó∂ÂÄôÈáäÊîæ‰πàÔºü Âú®ARC‰∏ã‰∏çÈúÄË¶Å„ÄÇ Âú®MRC‰∏≠,ÂØπ‰∫é‰ΩøÁî®retainÊàñcopyÁ≠ñÁï•ÁöÑÈúÄË¶Å „ÄÇÂú®MRC‰∏ã‰πü‰∏çÈúÄË¶Å Êó†ËÆ∫Âú®MRC‰∏ãËøòÊòØARC‰∏ãÂùá‰∏çÈúÄË¶Å„ÄÇ 2011Âπ¥ÁâàÊú¨ÁöÑApple API ÂÆòÊñπÊñáÊ°£ - Associative References ‰∏ÄËäÇ‰∏≠Êúâ‰∏Ä‰∏™MRCÁéØÂ¢É‰∏ãÁöÑ‰æãÂ≠êÔºö 12345678910111213141516171819202122232425// Âú®MRC‰∏ãÔºå‰ΩøÁî®runtime AssociateÊñπÊ≥ïÂÖ≥ËÅîÁöÑÂØπË±°Ôºå‰∏çÈúÄË¶ÅÂú®‰∏ªÂØπË±°deallocÁöÑÊó∂ÂÄôÈáäÊîæ// https://weibo.com/luohanchenyilong/ (ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å)// https://github.com/ChenYilong// ÊëòËá™2011Âπ¥ÁâàÊú¨ÁöÑApple API ÂÆòÊñπÊñáÊ°£ - Associative References static char overviewKey; NSArray *array = [[NSArray alloc] initWithObjects:@&quot;One&quot;, @&quot;Two&quot;, @&quot;Three&quot;, nil];// For the purposes of illustration, use initWithFormat: to ensure// the string can be deallocatedNSString *overview = [[NSString alloc] initWithFormat:@&quot;%@&quot;, @&quot;First three numbers&quot;]; objc_setAssociatedObject ( array, &amp;overviewKey, overview, OBJC_ASSOCIATION_RETAIN); [overview release];// (1) overview valid[array release];// (2) overview invalid ÊñáÊ°£ÊåáÂá∫ At point 1, the string overview is still valid because the OBJC_ASSOCIATION_RETAIN policy specifies that the array retains the associated object. When the array is deallocated, however (at point 2), overview is released and so in this case also deallocated. Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®[array release];‰πãÂêéÔºåoverviewÂ∞±‰ºöË¢´releaseÈáäÊîæÊéâ‰∫Ü„ÄÇ Êó¢ÁÑ∂‰ºöË¢´ÈîÄÊØÅÔºåÈÇ£‰πàÂÖ∑‰ΩìÂú®‰ªÄ‰πàÊó∂Èó¥ÁÇπÔºü Ê†πÊçÆ WWDC 2011, Session 322 (Á¨¨36ÂàÜ22Áßí) ‰∏≠ÂèëÂ∏ÉÁöÑÂÜÖÂ≠òÈîÄÊØÅÊó∂Èó¥Ë°®ÔºåË¢´ÂÖ≥ËÅîÁöÑÂØπË±°Âú®ÁîüÂëΩÂë®ÊúüÂÜÖË¶ÅÊØîÂØπË±°Êú¨Ë∫´ÈáäÊîæÁöÑÊôöÂæàÂ§ö„ÄÇÂÆÉ‰ª¨‰ºöÂú®Ë¢´ NSObject -dealloc Ë∞ÉÁî®ÁöÑ object_dispose() ÊñπÊ≥ï‰∏≠ÈáäÊîæ„ÄÇ ÂØπË±°ÁöÑÂÜÖÂ≠òÈîÄÊØÅÊó∂Èó¥Ë°®ÔºåÂàÜÂõõ‰∏™Ê≠•È™§Ôºö // ÂØπË±°ÁöÑÂÜÖÂ≠òÈîÄÊØÅÊó∂Èó¥Ë°® // https://weibo.com/luohanchenyilong/ (ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å) // https://github.com/ChenYilong // Ê†πÊçÆ WWDC 2011, Session 322 (36ÂàÜ22Áßí)‰∏≠ÂèëÂ∏ÉÁöÑÂÜÖÂ≠òÈîÄÊØÅÊó∂Èó¥Ë°® 1. Ë∞ÉÁî® -release ÔºöÂºïÁî®ËÆ°Êï∞Âèò‰∏∫Èõ∂ * ÂØπË±°Ê≠£Âú®Ë¢´ÈîÄÊØÅÔºåÁîüÂëΩÂë®ÊúüÂç≥Â∞ÜÁªìÊùü. * ‰∏çËÉΩÂÜçÊúâÊñ∞ÁöÑ __weak Âº±ÂºïÁî®Ôºå Âê¶ÂàôÂ∞ÜÊåáÂêë nil. * Ë∞ÉÁî® [self dealloc] 2. Â≠êÁ±ª Ë∞ÉÁî® -dealloc * ÁªßÊâøÂÖ≥Á≥ª‰∏≠ÊúÄÂ∫ïÂ±ÇÁöÑÂ≠êÁ±ª Âú®Ë∞ÉÁî® -dealloc * Â¶ÇÊûúÊòØ MRC ‰ª£Á†Å Âàô‰ºöÊâãÂä®ÈáäÊîæÂÆû‰æãÂèòÈáè‰ª¨ÔºàiVarsÔºâ * ÁªßÊâøÂÖ≥Á≥ª‰∏≠ÊØè‰∏ÄÂ±ÇÁöÑÁà∂Á±ª ÈÉΩÂú®Ë∞ÉÁî® -dealloc 3. NSObject Ë∞É -dealloc * Âè™ÂÅö‰∏Ä‰ª∂‰∫ãÔºöË∞ÉÁî® Objective-C runtime ‰∏≠ÁöÑ object_dispose() ÊñπÊ≥ï 4. Ë∞ÉÁî® object_dispose() * ‰∏∫ C++ ÁöÑÂÆû‰æãÂèòÈáè‰ª¨ÔºàiVarsÔºâË∞ÉÁî® destructors * ‰∏∫ ARC Áä∂ÊÄÅ‰∏ãÁöÑ ÂÆû‰æãÂèòÈáè‰ª¨ÔºàiVarsÔºâ Ë∞ÉÁî® -release * Ëß£Èô§ÊâÄÊúâ‰ΩøÁî® runtime AssociateÊñπÊ≥ïÂÖ≥ËÅîÁöÑÂØπË±° * Ëß£Èô§ÊâÄÊúâ __weak ÂºïÁî® * Ë∞ÉÁî® free()ÂØπË±°ÁöÑÂÜÖÂ≠òÈîÄÊØÅÊó∂Èó¥Ë°®ÔºöÂèÇËÄÉÈìæÊé•„ÄÇ 24. objc‰∏≠ÁöÑÁ±ªÊñπÊ≥ïÂíåÂÆû‰æãÊñπÊ≥ïÊúâ‰ªÄ‰πàÊú¨Ë¥®Âå∫Âà´ÂíåËÅîÁ≥ªÔºüÁ±ªÊñπÊ≥ïÔºö Á±ªÊñπÊ≥ïÊòØÂ±û‰∫éÁ±ªÂØπË±°ÁöÑ Á±ªÊñπÊ≥ïÂè™ËÉΩÈÄöËøáÁ±ªÂØπË±°Ë∞ÉÁî® Á±ªÊñπÊ≥ï‰∏≠ÁöÑselfÊòØÁ±ªÂØπË±° Á±ªÊñπÊ≥ïÂèØ‰ª•Ë∞ÉÁî®ÂÖ∂‰ªñÁöÑÁ±ªÊñπÊ≥ï Á±ªÊñπÊ≥ï‰∏≠‰∏çËÉΩËÆøÈóÆÊàêÂëòÂèòÈáè Á±ªÊñπÊ≥ï‰∏≠‰∏çËÉΩÁõ¥Êé•Ë∞ÉÁî®ÂØπË±°ÊñπÊ≥ï ÂÆû‰æãÊñπÊ≥ïÔºö ÂÆû‰æãÊñπÊ≥ïÊòØÂ±û‰∫éÂÆû‰æãÂØπË±°ÁöÑ ÂÆû‰æãÊñπÊ≥ïÂè™ËÉΩÈÄöËøáÂÆû‰æãÂØπË±°Ë∞ÉÁî® ÂÆû‰æãÊñπÊ≥ï‰∏≠ÁöÑselfÊòØÂÆû‰æãÂØπË±° ÂÆû‰æãÊñπÊ≥ï‰∏≠ÂèØ‰ª•ËÆøÈóÆÊàêÂëòÂèòÈáè ÂÆû‰æãÊñπÊ≥ï‰∏≠Áõ¥Êé•Ë∞ÉÁî®ÂÆû‰æãÊñπÊ≥ï ÂÆû‰æãÊñπÊ≥ï‰∏≠‰πüÂèØ‰ª•Ë∞ÉÁî®Á±ªÊñπÊ≥ï(ÈÄöËøáÁ±ªÂêç) 25. _objc_msgForwardÂáΩÊï∞ÊòØÂÅö‰ªÄ‰πàÁöÑÔºåÁõ¥Êé•Ë∞ÉÁî®ÂÆÉÂ∞Ü‰ºöÂèëÁîü‰ªÄ‰πàÔºü _objc_msgForwardÊòØ IMP Á±ªÂûãÔºåÁî®‰∫éÊ∂àÊÅØËΩ¨ÂèëÁöÑÔºöÂΩìÂêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØÔºå‰ΩÜÂÆÉÂπ∂Ê≤°ÊúâÂÆûÁé∞ÁöÑÊó∂ÂÄôÔºå_objc_msgForward‰ºöÂ∞ùËØïÂÅöÊ∂àÊÅØËΩ¨Âèë„ÄÇ Êàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÂàõÂª∫‰∏Ä‰∏™_objc_msgForwardÂØπË±°Ôºö IMP msgForwardIMP = _objc_msgForward;Âú®‰∏äÁØá‰∏≠ÁöÑ„Ääobjc‰∏≠Âêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅÊ∂àÊÅØ[obj foo]Âíåobjc_msgSend()ÂáΩÊï∞‰πãÈó¥Êúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºü„ÄãÊõæÊèêÂà∞objc_msgSendÂú®‚ÄúÊ∂àÊÅØ‰º†ÈÄí‚Äù‰∏≠ÁöÑ‰ΩúÁî®„ÄÇÂú®‚ÄúÊ∂àÊÅØ‰º†ÈÄí‚ÄùËøáÁ®ã‰∏≠Ôºåobjc_msgSendÁöÑÂä®‰ΩúÊØîËæÉÊ∏ÖÊô∞ÔºöÈ¶ñÂÖàÂú® Class ‰∏≠ÁöÑÁºìÂ≠òÊü•Êâæ IMP ÔºàÊ≤°ÁºìÂ≠òÂàôÂàùÂßãÂåñÁºìÂ≠òÔºâÔºåÂ¶ÇÊûúÊ≤°ÊâæÂà∞ÔºåÂàôÂêëÁà∂Á±ªÁöÑ Class Êü•Êâæ„ÄÇÂ¶ÇÊûú‰∏ÄÁõ¥Êü•ÊâæÂà∞Ê†πÁ±ª‰ªçÊóßÊ≤°ÊúâÂÆûÁé∞ÔºåÂàôÁî®_objc_msgForwardÂáΩÊï∞ÊåáÈíà‰ª£Êõø IMP „ÄÇÊúÄÂêéÔºåÊâßË°åËøô‰∏™ IMP „ÄÇ Objective-CËøêË°åÊó∂ÊòØÂºÄÊ∫êÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÂÆÉÁöÑÂÆûÁé∞„ÄÇÊâìÂºÄ Apple Open Source ÈáåMac‰ª£Á†ÅÈáåÁöÑobjÂåÖ ‰∏ãËΩΩ‰∏Ä‰∏™ÊúÄÊñ∞ÁâàÊú¨ÔºåÊâæÂà∞ objc-runtime-new.mmÔºåËøõÂÖ•‰πãÂêéÊêúÁ¥¢_objc_msgForward„ÄÇ ÈáåÈù¢ÊúâÂØπ_objc_msgForwardÁöÑÂäüËÉΩËß£ÈáäÔºö 123456789101112/************************************************************************ lookUpImpOrForward.* The standard IMP lookup. * initialize==NO tries to avoid +initialize (but sometimes fails)* cache==NO skips optimistic unlocked lookup (but uses cache elsewhere)* Most callers should use initialize==YES and cache==YES.* inst is an instance of cls or a subclass thereof, or nil if none is known. * If cls is an un-initialized metaclass then a non-nil inst is faster.* May return _objc_msgForward_impcache. IMPs destined for external use * must be converted to _objc_msgForward or _objc_msgForward_stret.* If you don&apos;t want forwarding at all, use lookUpImpOrNil() instead.**********************************************************************/ ÂØπ objc-runtime-new.mmÊñá‰ª∂Èáå‰∏é_objc_msgForwardÊúâÂÖ≥ÁöÑ‰∏â‰∏™ÂáΩÊï∞‰ΩøÁî®‰º™‰ª£Á†ÅÂ±ïÁ§∫‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435// objc-runtime-new.mm Êñá‰ª∂Èáå‰∏é _objc_msgForward ÊúâÂÖ≥ÁöÑ‰∏â‰∏™ÂáΩÊï∞‰ΩøÁî®‰º™‰ª£Á†ÅÂ±ïÁ§∫// Created by https://github.com/ChenYilong// Copyright (c) ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å(https://weibo.com/luohanchenyilong/). All rights reserved.// ÂêåÊó∂ÔºåËøô‰πüÊòØ obj_msgSend ÁöÑÂÆûÁé∞ËøáÁ®ãid objc_msgSend(id self, SEL op, ...) { if (!self) return nil; IMP imp = class_getMethodImplementation(self-&gt;isa, SEL op); imp(self, op, ...); //Ë∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞Ôºå‰º™‰ª£Á†Å...} //Êü•ÊâæIMPIMP class_getMethodImplementation(Class cls, SEL sel) { if (!cls || !sel) return nil; IMP imp = lookUpImpOrNil(cls, sel); if (!imp) return _objc_msgForward; //_objc_msgForward Áî®‰∫éÊ∂àÊÅØËΩ¨Âèë return imp;} IMP lookUpImpOrNil(Class cls, SEL sel) { if (!cls-&gt;initialize()) { _class_initialize(cls); } Class curClass = cls; IMP imp = nil; do { //ÂÖàÊü•ÁºìÂ≠ò,ÁºìÂ≠òÊ≤°ÊúâÊó∂ÈáçÂª∫,‰ªçÊóßÊ≤°ÊúâÂàôÂêëÁà∂Á±ªÊü•ËØ¢ if (!curClass) break; if (!curClass-&gt;cache) fill_cache(cls, curClass); imp = cache_getImp(curClass, sel); if (imp) break; } while (curClass = curClass-&gt;superclass); return imp;} ËôΩÁÑ∂AppleÊ≤°ÊúâÂÖ¨ÂºÄ_objc_msgForwardÁöÑÂÆûÁé∞Ê∫êÁ†ÅÔºå‰ΩÜÊòØÊàë‰ª¨ËøòÊòØËÉΩÂæóÂá∫ÁªìËÆ∫Ôºö _objc_msgForwardÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊåáÈíàÔºàÂíå IMP ÁöÑÁ±ªÂûã‰∏ÄÊ†∑ÔºâÔºåÊòØÁî®‰∫éÊ∂àÊÅØËΩ¨ÂèëÁöÑÔºöÂΩìÂêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØÔºå‰ΩÜÂÆÉÂπ∂Ê≤°ÊúâÂÆûÁé∞ÁöÑÊó∂ÂÄôÔºå_objc_msgForward‰ºöÂ∞ùËØïÂÅöÊ∂àÊÅØËΩ¨Âèë„ÄÇ Âú®‰∏äÁØá‰∏≠ÁöÑ„Ääobjc‰∏≠Âêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅÊ∂àÊÅØ[obj foo]Âíåobjc_msgSend()ÂáΩÊï∞‰πãÈó¥Êúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºü„ÄãÊõæÊèêÂà∞objc_msgSendÂú®‚ÄúÊ∂àÊÅØ‰º†ÈÄí‚Äù‰∏≠ÁöÑ‰ΩúÁî®„ÄÇÂú®‚ÄúÊ∂àÊÅØ‰º†ÈÄí‚ÄùËøáÁ®ã‰∏≠Ôºåobjc_msgSendÁöÑÂä®‰ΩúÊØîËæÉÊ∏ÖÊô∞ÔºöÈ¶ñÂÖàÂú® Class ‰∏≠ÁöÑÁºìÂ≠òÊü•Êâæ IMP ÔºàÊ≤°ÁºìÂ≠òÂàôÂàùÂßãÂåñÁºìÂ≠òÔºâÔºåÂ¶ÇÊûúÊ≤°ÊâæÂà∞ÔºåÂàôÂêëÁà∂Á±ªÁöÑ Class Êü•Êâæ„ÄÇÂ¶ÇÊûú‰∏ÄÁõ¥Êü•ÊâæÂà∞Ê†πÁ±ª‰ªçÊóßÊ≤°ÊúâÂÆûÁé∞ÔºåÂàôÁî®_objc_msgForwardÂáΩÊï∞ÊåáÈíà‰ª£Êõø IMP „ÄÇÊúÄÂêéÔºåÊâßË°åËøô‰∏™ IMP „ÄÇ ‰∏∫‰∫ÜÂ±ïÁ§∫Ê∂àÊÅØËΩ¨ÂèëÁöÑÂÖ∑‰ΩìÂä®‰ΩúÔºåËøôÈáåÂ∞ùËØïÂêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅ‰∏ÄÊù°ÈîôËØØÁöÑÊ∂àÊÅØÔºåÂπ∂Êü•Áúã‰∏Ä‰∏ã_objc_msgForwardÊòØÂ¶Ç‰ΩïËøõË°åËΩ¨ÂèëÁöÑ„ÄÇ È¶ñÂÖàÂºÄÂêØË∞ÉËØïÊ®°Âºè„ÄÅÊâìÂç∞Âá∫ÊâÄÊúâËøêË°åÊó∂ÂèëÈÄÅÁöÑÊ∂àÊÅØÔºöÂèØ‰ª•Âú®‰ª£Á†ÅÈáåÊâßË°å‰∏ãÈù¢ÁöÑÊñπÊ≥ïÔºö 1(void)instrumentObjcMessageSends(YES); Âõ†‰∏∫ËØ•ÂáΩÊï∞Â§Ñ‰∫é objc-internal.h ÂÜÖÔºåËÄåËØ•Êñá‰ª∂Âπ∂‰∏çÂºÄÊîæÔºåÊâÄ‰ª•Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÂÖàÂ£∞ÊòéÔºåÁõÆÁöÑÊòØÂëäËØâÁºñËØëÂô®Á®ãÂ∫èÁõÆÊ†áÊñá‰ª∂ÂåÖÂê´ËØ•ÊñπÊ≥ïÂ≠òÂú®ÔºåËÆ©ÁºñËØëÈÄöËøá 123OBJC_EXPORT voidinstrumentObjcMessageSends(BOOL flag)OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); ÊàñËÄÖÊñ≠ÁÇπÊöÇÂÅúÁ®ãÂ∫èËøêË°åÔºåÂπ∂Âú® gdb ‰∏≠ËæìÂÖ•‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ôºö 1call (void)instrumentObjcMessageSends(YES) ‰ª•Á¨¨‰∫åÁßç‰∏∫‰æãÔºåÊìç‰ΩúÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö ‰πãÂêéÔºåËøêË°åÊó∂ÂèëÈÄÅÁöÑÊâÄÊúâÊ∂àÊÅØÈÉΩ‰ºöÊâìÂç∞Âà∞/tmp/msgSend-xxxxÊñá‰ª∂Èáå‰∫Ü„ÄÇ ÁªàÁ´Ø‰∏≠ËæìÂÖ•ÂëΩ‰ª§ÂâçÂæÄÔºö 1open /private/tmp ÂèØËÉΩÁúãÂà∞ÊúâÂ§öÊù°ÔºåÊâæÂà∞ÊúÄÊñ∞ÁîüÊàêÁöÑÔºåÂèåÂáªÊâìÂºÄ Âú®Ê®°ÊãüÂô®‰∏äÊâßË°åÊâßË°å‰ª•‰∏ãËØ≠Âè•ÔºàËøô‰∏ÄÂ•óË∞ÉËØïÊñπÊ°à‰ªÖÈÄÇÁî®‰∫éÊ®°ÊãüÂô®ÔºåÁúüÊú∫‰∏çÂèØÁî®ÔºåÂÖ≥‰∫éËØ•Ë∞ÉËØïÊñπÊ°àÁöÑÊãìÂ±ïÈìæÊé•Ôºö Can the messages sent to an object in Objective-C be monitored or printed out? ÔºâÔºåÂêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅ‰∏ÄÊù°ÈîôËØØÁöÑÊ∂àÊÅØÔºö 12345678910111213141516171819//// main.m// CYLObjcMsgForwardTest//// Created by https://weibo.com/luohanchenyilong/.// Copyright (c) 2015Âπ¥ ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å. All rights reserved.//#import &lt;UIKit/UIKit.h&gt;#import &quot;AppDelegate.h&quot;#import &quot;CYLTest.h&quot;int main(int argc, char * argv[]) { @autoreleasepool { CYLTest *test = [[CYLTest alloc] init]; [test performSelector:(@selector(iOSÁ®ãÂ∫èÁä≠Ë¢Å))]; return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); }} ‰Ω†ÂèØ‰ª•Âú®/tmp/msgSend-xxxxÔºàÊàëËøô‰∏ÄÊ¨°ÊòØ/tmp/msgSend-9805ÔºâÊñá‰ª∂ÈáåÔºåÁúãÂà∞ÊâìÂç∞Âá∫Êù•Ôºö 1234567891011121314+ CYLTest NSObject initialize+ CYLTest NSObject alloc- CYLTest NSObject init- CYLTest NSObject performSelector:+ CYLTest NSObject resolveInstanceMethod:+ CYLTest NSObject resolveInstanceMethod:- CYLTest NSObject forwardingTargetForSelector:- CYLTest NSObject forwardingTargetForSelector:- CYLTest NSObject methodSignatureForSelector:- CYLTest NSObject methodSignatureForSelector:- CYLTest NSObject class- CYLTest NSObject doesNotRecognizeSelector:- CYLTest NSObject doesNotRecognizeSelector:- CYLTest NSObject class ÁªìÂêà„ÄäNSObjectÂÆòÊñπÊñáÊ°£„ÄãÔºåÊéíÈô§Êéâ NSObject ÂÅöÁöÑ‰∫ãÔºåÂâ©‰∏ãÁöÑÂ∞±ÊòØ_objc_msgForwardÊ∂àÊÅØËΩ¨ÂèëÂÅöÁöÑÂá†‰ª∂‰∫ãÔºö Ë∞ÉÁî®resolveInstanceMethod:ÊñπÊ≥ï (Êàñ resolveClassMethod:)„ÄÇÂÖÅËÆ∏Áî®Êà∑Âú®Ê≠§Êó∂‰∏∫ËØ• Class Âä®ÊÄÅÊ∑ªÂä†ÂÆûÁé∞„ÄÇÂ¶ÇÊûúÊúâÂÆûÁé∞‰∫ÜÔºåÂàôË∞ÉÁî®Âπ∂ËøîÂõûYESÔºåÈÇ£‰πàÈáçÊñ∞ÂºÄÂßãobjc_msgSendÊµÅÁ®ã„ÄÇËøô‰∏ÄÊ¨°ÂØπË±°‰ºöÂìçÂ∫îËøô‰∏™ÈÄâÊã©Âô®Ôºå‰∏ÄËà¨ÊòØÂõ†‰∏∫ÂÆÉÂ∑≤ÁªèË∞ÉÁî®Ëøáclass_addMethod„ÄÇÂ¶ÇÊûú‰ªçÊ≤°ÂÆûÁé∞ÔºåÁªßÁª≠‰∏ãÈù¢ÁöÑÂä®‰Ωú„ÄÇ Ë∞ÉÁî®forwardingTargetForSelector:ÊñπÊ≥ïÔºåÂ∞ùËØïÊâæÂà∞‰∏Ä‰∏™ËÉΩÂìçÂ∫îËØ•Ê∂àÊÅØÁöÑÂØπË±°„ÄÇÂ¶ÇÊûúËé∑ÂèñÂà∞ÔºåÂàôÁõ¥Êé•ÊääÊ∂àÊÅØËΩ¨ÂèëÁªôÂÆÉÔºåËøîÂõûÈùû nil ÂØπË±°„ÄÇÂê¶ÂàôËøîÂõû nil ÔºåÁªßÁª≠‰∏ãÈù¢ÁöÑÂä®‰Ωú„ÄÇÊ≥®ÊÑèÔºåËøôÈáå‰∏çË¶ÅËøîÂõû self ÔºåÂê¶Âàô‰ºöÂΩ¢ÊàêÊ≠ªÂæ™ÁéØ„ÄÇ Ë∞ÉÁî®methodSignatureForSelector:ÊñπÊ≥ïÔºåÂ∞ùËØïËé∑Âæó‰∏Ä‰∏™ÊñπÊ≥ïÁ≠æÂêç„ÄÇÂ¶ÇÊûúËé∑Âèñ‰∏çÂà∞ÔºåÂàôÁõ¥Êé•Ë∞ÉÁî®doesNotRecognizeSelectorÊäõÂá∫ÂºÇÂ∏∏„ÄÇÂ¶ÇÊûúËÉΩËé∑ÂèñÔºåÂàôËøîÂõûÈùûnilÔºöÂàõÂª∫‰∏Ä‰∏™ NSlnvocation Âπ∂‰º†ÁªôforwardInvocation:„ÄÇ Ë∞ÉÁî®forwardInvocation:ÊñπÊ≥ïÔºåÂ∞ÜÁ¨¨3Ê≠•Ëé∑ÂèñÂà∞ÁöÑÊñπÊ≥ïÁ≠æÂêçÂåÖË£ÖÊàê Invocation ‰º†ÂÖ•ÔºåÂ¶Ç‰ΩïÂ§ÑÁêÜÂ∞±Âú®ËøôÈáåÈù¢‰∫ÜÔºåÂπ∂ËøîÂõûÈùûnil„ÄÇ Ë∞ÉÁî®doesNotRecognizeSelector: ÔºåÈªòËÆ§ÁöÑÂÆûÁé∞ÊòØÊäõÂá∫ÂºÇÂ∏∏„ÄÇÂ¶ÇÊûúÁ¨¨3Ê≠•Ê≤°ËÉΩËé∑Âæó‰∏Ä‰∏™ÊñπÊ≥ïÁ≠æÂêçÔºåÊâßË°åËØ•Ê≠•È™§„ÄÇ ‰∏äÈù¢Ââç4‰∏™ÊñπÊ≥ïÂùáÊòØÊ®°ÊùøÊñπÊ≥ïÔºåÂºÄÂèëËÄÖÂèØ‰ª•overrideÔºåÁî± runtime Êù•Ë∞ÉÁî®„ÄÇÊúÄÂ∏∏ËßÅÁöÑÂÆûÁé∞Ê∂àÊÅØËΩ¨ÂèëÔºöÂ∞±ÊòØÈáçÂÜôÊñπÊ≥ï3Âíå4ÔºåÂêûÊéâ‰∏Ä‰∏™Ê∂àÊÅØÊàñËÄÖ‰ª£ÁêÜÁªôÂÖ∂‰ªñÂØπË±°ÈÉΩÊòØÊ≤°ÈóÆÈ¢òÁöÑ ‰πüÂ∞±ÊòØËØ¥_objc_msgForwardÂú®ËøõË°åÊ∂àÊÅØËΩ¨ÂèëÁöÑËøáÁ®ã‰∏≠‰ºöÊ∂âÂèä‰ª•‰∏ãËøôÂá†‰∏™ÊñπÊ≥ïÔºö resolveInstanceMethod:ÊñπÊ≥ï (Êàñ resolveClassMethod:)„ÄÇ forwardingTargetForSelector:ÊñπÊ≥ï methodSignatureForSelector:ÊñπÊ≥ï forwardInvocation:ÊñπÊ≥ï doesNotRecognizeSelector: ÊñπÊ≥ï ‰∏∫‰∫ÜËÉΩÊõ¥Ê∏ÖÊô∞Âú∞ÁêÜËß£Ëøô‰∫õÊñπÊ≥ïÁöÑ‰ΩúÁî®Ôºågit‰ªìÂ∫ìÈáå‰πüÁªôÂá∫‰∫Ü‰∏Ä‰∏™DemoÔºåÂêçÁß∞Âè´‚Äú _objc_msgForward_demo ‚Äù,ÂèØËøêË°åËµ∑Êù•ÁúãÁúã„ÄÇ ‰∏ãÈù¢ÂõûÁ≠î‰∏ãÁ¨¨‰∫å‰∏™ÈóÆÈ¢ò‚ÄúÁõ¥Êé•_objc_msgForwardË∞ÉÁî®ÂÆÉÂ∞Ü‰ºöÂèëÁîü‰ªÄ‰πàÔºü‚Äù Áõ¥Êé•Ë∞ÉÁî®_objc_msgForwardÊòØÈùûÂ∏∏Âç±Èô©ÁöÑ‰∫ãÔºåÂ¶ÇÊûúÁî®‰∏çÂ•Ω‰ºöÁõ¥Êé•ÂØºËá¥Á®ãÂ∫èCrashÔºå‰ΩÜÊòØÂ¶ÇÊûúÁî®ÂæóÂ•ΩÔºåËÉΩÂÅöÂæàÂ§öÈùûÂ∏∏ÈÖ∑ÁöÑ‰∫ã„ÄÇ Â∞±Â•ΩÂÉèË∑ëÈÖ∑ÔºåÂπ≤ÂæóÂ•ΩÔºåÂè´‚ÄúËÄçÈÖ∑‚ÄùÔºåÂπ≤‰∏çÂ•ΩÂ∞±Âè´‚Äú‰ΩúÊ≠ª‚Äù„ÄÇ Ê≠£Â¶ÇÂâçÊñáÊâÄËØ¥Ôºö _objc_msgForwardÊòØ IMP Á±ªÂûãÔºåÁî®‰∫éÊ∂àÊÅØËΩ¨ÂèëÁöÑÔºöÂΩìÂêë‰∏Ä‰∏™ÂØπË±°ÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØÔºå‰ΩÜÂÆÉÂπ∂Ê≤°ÊúâÂÆûÁé∞ÁöÑÊó∂ÂÄôÔºå_objc_msgForward‰ºöÂ∞ùËØïÂÅöÊ∂àÊÅØËΩ¨Âèë„ÄÇ Â¶Ç‰ΩïË∞ÉÁî®_objc_msgForwardÔºü_objc_msgForwardÈö∂Â±û C ËØ≠Ë®ÄÔºåÊúâ‰∏â‰∏™ÂèÇÊï∞ Ôºö ‚Äì _objc_msgForwardÂèÇÊï∞ Á±ªÂûã 1. ÊâÄÂ±ûÂØπË±° idÁ±ªÂûã 2. ÊñπÊ≥ïÂêç SELÁ±ªÂûã 3. ÂèØÂèòÂèÇÊï∞ ÂèØÂèòÂèÇÊï∞Á±ªÂûã È¶ñÂÖà‰∫ÜËß£‰∏ãÂ¶Ç‰ΩïË∞ÉÁî® IMP Á±ªÂûãÁöÑÊñπÊ≥ïÔºåIMPÁ±ªÂûãÊòØÂ¶Ç‰∏ãÊ†ºÂºèÔºö ‰∏∫‰∫ÜÁõ¥ËßÇÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂ¶Ç‰∏ãÊñπÂºèÂÆö‰πâ‰∏Ä‰∏™ IMPÁ±ªÂûã Ôºö 1typedef void (*voidIMP)(id, SEL, ...) ‰∏ÄÊó¶Ë∞ÉÁî®_objc_msgForwardÔºåÂ∞ÜË∑≥ËøáÊü•Êâæ IMP ÁöÑËøáÁ®ãÔºåÁõ¥Êé•Ëß¶Âèë‚ÄúÊ∂àÊÅØËΩ¨Âèë‚ÄùÔºå Â¶ÇÊûúË∞ÉÁî®‰∫Ü_objc_msgForwardÔºåÂç≥‰ΩøËøô‰∏™ÂØπË±°Á°ÆÂÆûÂ∑≤ÁªèÂÆûÁé∞‰∫ÜËøô‰∏™ÊñπÊ≥ïÔºå‰Ω†‰πü‰ºöÂëäËØâobjc_msgSendÔºö ‚ÄúÊàëÊ≤°ÊúâÂú®Ëøô‰∏™ÂØπË±°ÈáåÊâæÂà∞Ëøô‰∏™ÊñπÊ≥ïÁöÑÂÆûÁé∞‚Äù ÊÉ≥Ë±°‰∏ãobjc_msgSend‰ºöÊÄé‰πàÂÅöÔºüÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºå‰∏ãÈù¢ËøôÂº†ÂõæÂ∞±ÊòØ‰Ω†Ê≠£Â∏∏Ëµ∞objc_msgSendËøáÁ®ãÔºåÂíåÁõ¥Êé•Ë∞ÉÁî®_objc_msgForwardÁöÑÂâçÂêéÂ∑ÆÂà´Ôºö ÊúâÂì™‰∫õÂú∫ÊôØÈúÄË¶ÅÁõ¥Êé•Ë∞ÉÁî®_objc_msgForwardÔºüÊúÄÂ∏∏ËßÅÁöÑÂú∫ÊôØÊòØÔºö‰Ω†ÊÉ≥Ëé∑ÂèñÊüêÊñπÊ≥ïÊâÄÂØπÂ∫îÁöÑNSInvocationÂØπË±°„ÄÇ‰∏æ‰æãËØ¥ÊòéÔºö JSPatch ÔºàGithub ÈìæÊé•ÔºâÂ∞±ÊòØÁõ¥Êé•Ë∞ÉÁî®_objc_msgForwardÊù•ÂÆûÁé∞ÂÖ∂Ê†∏ÂøÉÂäüËÉΩÁöÑÔºö JSPatch ‰ª•Â∞èÂ∑ßÁöÑ‰ΩìÁßØÂÅöÂà∞‰∫ÜËÆ©JSË∞ÉÁî®/ÊõøÊç¢‰ªªÊÑèOCÊñπÊ≥ïÔºåËÆ©iOS APPÂÖ∑Â§áÁÉ≠Êõ¥Êñ∞ÁöÑËÉΩÂäõ„ÄÇ ‰ΩúËÄÖÁöÑÂçöÊñá„ÄäJSPatchÂÆûÁé∞ÂéüÁêÜËØ¶Ëß£„ÄãËØ¶ÁªÜËÆ∞ÂΩï‰∫ÜÂÆûÁé∞ÂéüÁêÜÔºåÊúâÂÖ¥Ë∂£ÂèØ‰ª•Áúã‰∏ã„ÄÇ ÂêåÊó∂ RAC(ReactiveCocoa) Ê∫êÁ†Å‰∏≠‰πüÁî®Âà∞‰∫ÜËØ•ÊñπÊ≥ï„ÄÇ 26. runtimeÂ¶Ç‰ΩïÂÆûÁé∞weakÂèòÈáèÁöÑËá™Âä®ÁΩÆnilÔºü runtime ÂØπÊ≥®ÂÜåÁöÑÁ±ªÔºå ‰ºöËøõË°åÂ∏ÉÂ±ÄÔºåÂØπ‰∫é weak ÂØπË±°‰ºöÊîæÂÖ•‰∏Ä‰∏™ hash Ë°®‰∏≠„ÄÇ Áî® weak ÊåáÂêëÁöÑÂØπË±°ÂÜÖÂ≠òÂú∞ÂùÄ‰Ωú‰∏∫ keyÔºåÂΩìÊ≠§ÂØπË±°ÁöÑÂºïÁî®ËÆ°Êï∞‰∏∫0ÁöÑÊó∂ÂÄô‰ºö deallocÔºåÂÅáÂ¶Ç weak ÊåáÂêëÁöÑÂØπË±°ÂÜÖÂ≠òÂú∞ÂùÄÊòØaÔºåÈÇ£‰πàÂ∞±‰ºö‰ª•a‰∏∫ÈîÆÔºå Âú®Ëøô‰∏™ weak Ë°®‰∏≠ÊêúÁ¥¢ÔºåÊâæÂà∞ÊâÄÊúâ‰ª•a‰∏∫ÈîÆÁöÑ weak ÂØπË±°Ôºå‰ªéËÄåËÆæÁΩÆ‰∏∫ nil„ÄÇ Âú®‰∏äÁØá‰∏≠ÁöÑ„Ääruntime Â¶Ç‰ΩïÂÆûÁé∞ weak Â±ûÊÄß„ÄãÊúâËÆ∫Ëø∞„ÄÇÔºàÊ≥®ÔºöÂú®‰∏äÁØáÁöÑ„Ää‰ΩøÁî®runtime AssociateÊñπÊ≥ïÂÖ≥ËÅîÁöÑÂØπË±°ÔºåÈúÄË¶ÅÂú®‰∏ªÂØπË±°deallocÁöÑÊó∂ÂÄôÈáäÊîæ‰πàÔºü„ÄãÈáåÁªôÂá∫ÁöÑ‚ÄúÂØπË±°ÁöÑÂÜÖÂ≠òÈîÄÊØÅÊó∂Èó¥Ë°®‚Äù‰πüÊèêÂà∞__weakÂºïÁî®ÁöÑËß£Èô§Êó∂Èó¥„ÄÇÔºâ Êàë‰ª¨ÂèØ‰ª•ËÆæËÆ°‰∏Ä‰∏™ÂáΩÊï∞Ôºà‰º™‰ª£Á†ÅÔºâÊù•Ë°®Á§∫‰∏äËø∞Êú∫Âà∂Ôºö objc_storeWeak(&amp;a, b)ÂáΩÊï∞Ôºö objc_storeWeakÂáΩÊï∞ÊääÁ¨¨‰∫å‰∏™ÂèÇÊï∞‚ÄìËµãÂÄºÂØπË±°ÔºàbÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄ‰Ωú‰∏∫ÈîÆÂÄºkeyÔºåÂ∞ÜÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‚Äìweak‰øÆÈ•∞ÁöÑÂ±ûÊÄßÂèòÈáèÔºàaÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºà&amp;aÔºâ‰Ωú‰∏∫valueÔºåÊ≥®ÂÜåÂà∞ weak Ë°®‰∏≠„ÄÇÂ¶ÇÊûúÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºàbÔºâ‰∏∫0ÔºànilÔºâÔºåÈÇ£‰πàÊääÂèòÈáèÔºàaÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºà&amp;aÔºâ‰ªéweakË°®‰∏≠Âà†Èô§Ôºå ‰Ω†ÂèØ‰ª•Êääobjc_storeWeak(&amp;a, b)ÁêÜËß£‰∏∫Ôºöobjc_storeWeak(value, key)ÔºåÂπ∂‰∏îÂΩìkeyÂèònilÔºåÂ∞ÜvalueÁΩÆnil„ÄÇ Âú®bÈùûnilÊó∂ÔºåaÂíåbÊåáÂêëÂêå‰∏Ä‰∏™ÂÜÖÂ≠òÂú∞ÂùÄÔºåÂú®bÂèònilÊó∂ÔºåaÂèònil„ÄÇÊ≠§Êó∂ÂêëaÂèëÈÄÅÊ∂àÊÅØ‰∏ç‰ºöÂ¥©Ê∫ÉÔºöÂú®Objective-C‰∏≠ÂêënilÂèëÈÄÅÊ∂àÊÅØÊòØÂÆâÂÖ®ÁöÑ„ÄÇ ËÄåÂ¶ÇÊûúaÊòØÁî±assign‰øÆÈ•∞ÁöÑÔºåÂàôÔºöÂú®bÈùûnilÊó∂ÔºåaÂíåbÊåáÂêëÂêå‰∏Ä‰∏™ÂÜÖÂ≠òÂú∞ÂùÄÔºåÂú®bÂèònilÊó∂ÔºåaËøòÊòØÊåáÂêëËØ•ÂÜÖÂ≠òÂú∞ÂùÄÔºåÂèòÈáéÊåáÈíà„ÄÇÊ≠§Êó∂ÂêëaÂèëÈÄÅÊ∂àÊÅØÊûÅÊòìÂ¥©Ê∫É„ÄÇ ‰∏ãÈù¢Êàë‰ª¨Â∞ÜÂü∫‰∫éobjc_storeWeak(&amp;a, b)ÂáΩÊï∞Ôºå‰ΩøÁî®‰º™‰ª£Á†ÅÊ®°Êãü‚ÄúruntimeÂ¶Ç‰ΩïÂÆûÁé∞weakÂ±ûÊÄß‚ÄùÔºö 12345678// ‰ΩøÁî®‰º™‰ª£Á†ÅÊ®°ÊãüÔºöruntimeÂ¶Ç‰ΩïÂÆûÁé∞weakÂ±ûÊÄß// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilong id obj1; objc_initWeak(&amp;obj1, obj);/*objÂºïÁî®ËÆ°Êï∞Âèò‰∏∫0ÔºåÂèòÈáè‰ΩúÁî®ÂüüÁªìÊùü*/ objc_destroyWeak(&amp;obj1); ‰∏ãÈù¢ÂØπÁî®Âà∞ÁöÑ‰∏§‰∏™ÊñπÊ≥ïobjc_initWeakÂíåobjc_destroyWeakÂÅö‰∏ãËß£ÈáäÔºö ÊÄª‰ΩìËØ¥Êù•Ôºå‰ΩúÁî®ÊòØÔºöÈÄöËøáobjc_initWeakÂáΩÊï∞ÂàùÂßãÂåñ‚ÄúÈôÑÊúâweak‰øÆÈ•∞Á¨¶ÁöÑÂèòÈáèÔºàobj1Ôºâ‚ÄùÔºåÂú®ÂèòÈáè‰ΩúÁî®ÂüüÁªìÊùüÊó∂ÈÄöËøáobjc_destoryWeakÂáΩÊï∞ÈáäÊîæËØ•ÂèòÈáèÔºàobj1Ôºâ„ÄÇ ‰∏ãÈù¢ÂàÜÂà´‰ªãÁªç‰∏ãÊñπÊ≥ïÁöÑÂÜÖÈÉ®ÂÆûÁé∞Ôºö objc_initWeakÂáΩÊï∞ÁöÑÂÆûÁé∞ÊòØËøôÊ†∑ÁöÑÔºöÂú®Â∞Ü‚ÄúÈôÑÊúâweak‰øÆÈ•∞Á¨¶ÁöÑÂèòÈáèÔºàobj1Ôºâ‚ÄùÂàùÂßãÂåñ‰∏∫0ÔºànilÔºâÂêéÔºå‰ºöÂ∞Ü‚ÄúËµãÂÄºÂØπË±°‚ÄùÔºàobjÔºâ‰Ωú‰∏∫ÂèÇÊï∞ÔºåË∞ÉÁî®objc_storeWeakÂáΩÊï∞„ÄÇ 12obj1 = 0Ôºõobj_storeWeak(&amp;obj1, obj); ‰πüÂ∞±ÊòØËØ¥Ôºö weak ‰øÆÈ•∞ÁöÑÊåáÈíàÈªòËÆ§ÂÄºÊòØ nil ÔºàÂú®Objective-C‰∏≠ÂêënilÂèëÈÄÅÊ∂àÊÅØÊòØÂÆâÂÖ®ÁöÑÔºâ ÁÑ∂Âêéobj_destroyWeakÂáΩÊï∞Â∞Ü0ÔºànilÔºâ‰Ωú‰∏∫ÂèÇÊï∞ÔºåË∞ÉÁî®objc_storeWeakÂáΩÊï∞„ÄÇ objc_storeWeak(&amp;obj1, 0); ÂâçÈù¢ÁöÑÊ∫ê‰ª£Á†Å‰∏é‰∏ãÂàóÊ∫ê‰ª£Á†ÅÁõ∏Âêå„ÄÇ 123456789// ‰ΩøÁî®‰º™‰ª£Á†ÅÊ®°ÊãüÔºöruntimeÂ¶Ç‰ΩïÂÆûÁé∞weakÂ±ûÊÄß// https://weibo.com/luohanchenyilong/// https://github.com/ChenYilongid obj1;obj1 = 0;objc_storeWeak(&amp;obj1, obj);/* ... objÁöÑÂºïÁî®ËÆ°Êï∞Âèò‰∏∫0ÔºåË¢´ÁΩÆnil ... */objc_storeWeak(&amp;obj1, 0); objc_storeWeakÂáΩÊï∞ÊääÁ¨¨‰∫å‰∏™ÂèÇÊï∞‚ÄìËµãÂÄºÂØπË±°ÔºàobjÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄ‰Ωú‰∏∫ÈîÆÂÄºÔºåÂ∞ÜÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‚Äìweak‰øÆÈ•∞ÁöÑÂ±ûÊÄßÂèòÈáèÔºàobj1ÔºâÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊ≥®ÂÜåÂà∞ weak Ë°®‰∏≠„ÄÇÂ¶ÇÊûúÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºàobjÔºâ‰∏∫0ÔºànilÔºâÔºåÈÇ£‰πàÊääÂèòÈáèÔºàobj1ÔºâÁöÑÂú∞ÂùÄ‰ªéweakË°®‰∏≠Âà†Èô§„ÄÇ 27. ËÉΩÂê¶ÂêëÁºñËØëÂêéÂæóÂà∞ÁöÑÁ±ª‰∏≠Â¢ûÂä†ÂÆû‰æãÂèòÈáèÔºüËÉΩÂê¶ÂêëËøêË°åÊó∂ÂàõÂª∫ÁöÑÁ±ª‰∏≠Ê∑ªÂä†ÂÆû‰æãÂèòÈáèÔºü‰∏∫‰ªÄ‰πàÔºü ‰∏çËÉΩÂêëÁºñËØëÂêéÂæóÂà∞ÁöÑÁ±ª‰∏≠Â¢ûÂä†ÂÆû‰æãÂèòÈáèÔºõ ËÉΩÂêëËøêË°åÊó∂ÂàõÂª∫ÁöÑÁ±ª‰∏≠Ê∑ªÂä†ÂÆû‰æãÂèòÈáèÔºõ Ëß£Èáä‰∏ãÔºö Âõ†‰∏∫ÁºñËØëÂêéÁöÑÁ±ªÂ∑≤ÁªèÊ≥®ÂÜåÂú® runtime ‰∏≠ÔºåÁ±ªÁªìÊûÑ‰Ωì‰∏≠ÁöÑ objc_ivar_list ÂÆû‰æãÂèòÈáèÁöÑÈìæË°® Âíå instance_size ÂÆû‰æãÂèòÈáèÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÂ∑≤ÁªèÁ°ÆÂÆöÔºåÂêåÊó∂runtime ‰ºöË∞ÉÁî® class_setIvarLayout Êàñ class_setWeakIvarLayout Êù•Â§ÑÁêÜ strong weak ÂºïÁî®„ÄÇÊâÄ‰ª•‰∏çËÉΩÂêëÂ≠òÂú®ÁöÑÁ±ª‰∏≠Ê∑ªÂä†ÂÆû‰æãÂèòÈáèÔºõ ËøêË°åÊó∂ÂàõÂª∫ÁöÑÁ±ªÊòØÂèØ‰ª•Ê∑ªÂä†ÂÆû‰æãÂèòÈáèÔºåË∞ÉÁî® class_addIvar ÂáΩÊï∞„ÄÇ‰ΩÜÊòØÂæóÂú®Ë∞ÉÁî® objc_allocateClassPair ‰πãÂêéÔºåobjc_registerClassPair ‰πãÂâçÔºåÂéüÂõ†Âêå‰∏ä„ÄÇ 28. runloopÂíåÁ∫øÁ®ãÊúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºüÊÄªÁöÑËØ¥Êù•ÔºåRun loopÔºåÊ≠£Â¶ÇÂÖ∂ÂêçÔºåloopË°®Á§∫ÊüêÁßçÂæ™ÁéØÔºåÂíårunÊîæÂú®‰∏ÄËµ∑Â∞±Ë°®Á§∫‰∏ÄÁõ¥Âú®ËøêË°åÁùÄÁöÑÂæ™ÁéØ„ÄÇÂÆûÈôÖ‰∏äÔºårun loopÂíåÁ∫øÁ®ãÊòØÁ¥ßÂØÜÁõ∏ËøûÁöÑÔºåÂèØ‰ª•ËøôÊ†∑ËØ¥run loopÊòØ‰∏∫‰∫ÜÁ∫øÁ®ãËÄåÁîüÔºåÊ≤°ÊúâÁ∫øÁ®ãÔºåÂÆÉÂ∞±Ê≤°ÊúâÂ≠òÂú®ÁöÑÂøÖË¶Å„ÄÇRun loopsÊòØÁ∫øÁ®ãÁöÑÂü∫Á°ÄÊû∂ÊûÑÈÉ®ÂàÜÔºå Cocoa Âíå CoreFundation ÈÉΩÊèê‰æõ‰∫Ü run loop ÂØπË±°Êñπ‰æøÈÖçÁΩÆÂíåÁÆ°ÁêÜÁ∫øÁ®ãÁöÑ run loop Ôºà‰ª•‰∏ãÈÉΩ‰ª• Cocoa ‰∏∫‰æãÔºâ„ÄÇÊØè‰∏™Á∫øÁ®ãÔºåÂåÖÊã¨Á®ãÂ∫èÁöÑ‰∏ªÁ∫øÁ®ãÔºà main thread ÔºâÈÉΩÊúâ‰∏é‰πãÁõ∏Â∫îÁöÑ run loop ÂØπË±°„ÄÇ runloop ÂíåÁ∫øÁ®ãÁöÑÂÖ≥Á≥ªÔºö ‰∏ªÁ∫øÁ®ãÁöÑrun loopÈªòËÆ§ÊòØÂêØÂä®ÁöÑ„ÄÇ iOSÁöÑÂ∫îÁî®Á®ãÂ∫èÈáåÈù¢ÔºåÁ®ãÂ∫èÂêØÂä®Âêé‰ºöÊúâ‰∏Ä‰∏™Â¶Ç‰∏ãÁöÑmain()ÂáΩÊï∞ 12345int main(int argc, char * argv[]) { @autoreleasepool { return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); }} ÈáçÁÇπÊòØUIApplicationMain()ÂáΩÊï∞ÔºåËøô‰∏™ÊñπÊ≥ï‰ºö‰∏∫main threadËÆæÁΩÆ‰∏Ä‰∏™NSRunLoopÂØπË±°ÔºåËøôÂ∞±Ëß£Èáä‰∫ÜÔºö‰∏∫‰ªÄ‰πàÊàë‰ª¨ÁöÑÂ∫îÁî®ÂèØ‰ª•Âú®Êó†‰∫∫Êìç‰ΩúÁöÑÊó∂ÂÄô‰ºëÊÅØÔºåÈúÄË¶ÅËÆ©ÂÆÉÂπ≤Ê¥ªÁöÑÊó∂ÂÄôÂèàËÉΩÁ´ãÈ©¨ÂìçÂ∫î„ÄÇ ÂØπÂÖ∂ÂÆÉÁ∫øÁ®ãÊù•ËØ¥Ôºårun loopÈªòËÆ§ÊòØÊ≤°ÊúâÂêØÂä®ÁöÑÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥Â§öÁöÑÁ∫øÁ®ã‰∫§‰∫íÂàôÂèØ‰ª•ÊâãÂä®ÈÖçÁΩÆÂíåÂêØÂä®ÔºåÂ¶ÇÊûúÁ∫øÁ®ãÂè™ÊòØÂéªÊâßË°å‰∏Ä‰∏™ÈïøÊó∂Èó¥ÁöÑÂ∑≤Á°ÆÂÆöÁöÑ‰ªªÂä°Âàô‰∏çÈúÄË¶Å„ÄÇ Âú®‰ªª‰Ωï‰∏Ä‰∏™ Cocoa Á®ãÂ∫èÁöÑÁ∫øÁ®ã‰∏≠ÔºåÈÉΩÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã‰ª£Á†ÅÊù•Ëé∑ÂèñÂà∞ÂΩìÂâçÁ∫øÁ®ãÁöÑ run loop „ÄÇ 1NSRunLoop *runloop = [NSRunLoop currentRunLoop]; ÂèÇËÄÉÈìæÊé•Ôºö„ÄäObjective-C‰πãrun loopËØ¶Ëß£„Äã„ÄÇ 29. runloopÁöÑmode‰ΩúÁî®ÊòØ‰ªÄ‰πàÔºümodel ‰∏ªË¶ÅÊòØÁî®Êù•ÊåáÂÆö‰∫ã‰ª∂Âú®ËøêË°åÂæ™ÁéØ‰∏≠ÁöÑ‰ºòÂÖàÁ∫ßÁöÑÔºåÂàÜ‰∏∫Ôºö NSDefaultRunLoopModeÔºàkCFRunLoopDefaultModeÔºâÔºöÈªòËÆ§ÔºåÁ©∫Èó≤Áä∂ÊÄÅ UITrackingRunLoopModeÔºöScrollViewÊªëÂä®Êó∂ UIInitializationRunLoopModeÔºöÂêØÂä®Êó∂ NSRunLoopCommonModesÔºàkCFRunLoopCommonModesÔºâÔºöModeÈõÜÂêà ËãπÊûúÂÖ¨ÂºÄÊèê‰æõÁöÑ Mode Êúâ‰∏§‰∏™Ôºö NSDefaultRunLoopModeÔºàkCFRunLoopDefaultModeÔºâ NSRunLoopCommonModesÔºàkCFRunLoopCommonModesÔºâ 30. ‰ª•+ scheduledTimerWithTimeInterval‚Ä¶ÁöÑÊñπÂºèËß¶ÂèëÁöÑtimerÔºåÂú®ÊªëÂä®È°µÈù¢‰∏äÁöÑÂàóË°®Êó∂Ôºåtimer‰ºöÊöÇÂÆöÂõûË∞ÉÔºå‰∏∫‰ªÄ‰πàÔºüÂ¶Ç‰ΩïËß£ÂÜ≥ÔºüRunLoopÂè™ËÉΩËøêË°åÂú®‰∏ÄÁßçmode‰∏ãÔºåÂ¶ÇÊûúË¶ÅÊç¢modeÔºåÂΩìÂâçÁöÑloop‰πüÈúÄË¶ÅÂÅú‰∏ãÈáçÂêØÊàêÊñ∞ÁöÑ„ÄÇÂà©Áî®Ëøô‰∏™Êú∫Âà∂ÔºåScrollViewÊªöÂä®ËøáÁ®ã‰∏≠NSDefaultRunLoopModeÔºàkCFRunLoopDefaultModeÔºâÁöÑmode‰ºöÂàáÊç¢Âà∞UITrackingRunLoopModeÊù•‰øùËØÅScrollViewÁöÑÊµÅÁïÖÊªëÂä®ÔºöÂè™ËÉΩÂú®NSDefaultRunLoopModeÊ®°Âºè‰∏ãÂ§ÑÁêÜÁöÑ‰∫ã‰ª∂‰ºöÂΩ±ÂìçScrollViewÁöÑÊªëÂä®„ÄÇ Â¶ÇÊûúÊàë‰ª¨Êää‰∏Ä‰∏™NSTimerÂØπË±°‰ª•NSDefaultRunLoopModeÔºàkCFRunLoopDefaultModeÔºâÊ∑ªÂä†Âà∞‰∏ªËøêË°åÂæ™ÁéØ‰∏≠ÁöÑÊó∂ÂÄô,ScrollViewÊªöÂä®ËøáÁ®ã‰∏≠‰ºöÂõ†‰∏∫modeÁöÑÂàáÊç¢ÔºåËÄåÂØºËá¥NSTimerÂ∞Ü‰∏çÂÜçË¢´Ë∞ÉÂ∫¶„ÄÇ ÂêåÊó∂Âõ†‰∏∫modeËøòÊòØÂèØÂÆöÂà∂ÁöÑÔºåÊâÄ‰ª•Ôºö TimerËÆ°Êó∂‰ºöË¢´scrollViewÁöÑÊªëÂä®ÂΩ±ÂìçÁöÑÈóÆÈ¢òÂèØ‰ª•ÈÄöËøáÂ∞ÜtimerÊ∑ªÂä†Âà∞NSRunLoopCommonModesÔºàkCFRunLoopCommonModesÔºâÊù•Ëß£ÂÜ≥„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617// // https://weibo.com/luohanchenyilong/ (ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å)// https://github.com/ChenYilong//Â∞ÜtimerÊ∑ªÂä†Âà∞NSDefaultRunLoopMode‰∏≠[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];//ÁÑ∂ÂêéÂÜçÊ∑ªÂä†Âà∞NSRunLoopCommonModesÈáåNSTimer *timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 31. ÁåúÊÉ≥runloopÂÜÖÈÉ®ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü ‰∏ÄËà¨Êù•ËÆ≤Ôºå‰∏Ä‰∏™Á∫øÁ®ã‰∏ÄÊ¨°Âè™ËÉΩÊâßË°å‰∏Ä‰∏™‰ªªÂä°ÔºåÊâßË°åÂÆåÊàêÂêéÁ∫øÁ®ãÂ∞±‰ºöÈÄÄÂá∫„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™Êú∫Âà∂ÔºåËÆ©Á∫øÁ®ãËÉΩÈöèÊó∂Â§ÑÁêÜ‰∫ã‰ª∂‰ΩÜÂπ∂‰∏çÈÄÄÂá∫ÔºåÈÄöÂ∏∏ÁöÑ‰ª£Á†ÅÈÄªËæëÊòØËøôÊ†∑ÁöÑÔºö function loop() { initialize(); do { var message = get_next_message(); process_message(message); } while (message != quit); }Êàñ‰ΩøÁî®‰º™‰ª£Á†ÅÊù•Â±ïÁ§∫‰∏ã: // // https://weibo.com/luohanchenyilong/ (ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å) // https://github.com/ChenYilong int main(int argc, char * argv[]) { //Á®ãÂ∫è‰∏ÄÁõ¥ËøêË°åÁä∂ÊÄÅ while (AppIsRunning) { //Áù°Áú†Áä∂ÊÄÅÔºåÁ≠âÂæÖÂî§ÈÜí‰∫ã‰ª∂ id whoWakesMe = SleepForWakingUp(); //ÂæóÂà∞Âî§ÈÜí‰∫ã‰ª∂ id event = GetEvent(whoWakesMe); //ÂºÄÂßãÂ§ÑÁêÜ‰∫ã‰ª∂ HandleEvent(event); } return 0; }ÂèÇËÄÉÈìæÊé•Ôºö „ÄäÊ∑±ÂÖ•ÁêÜËß£RunLoop„Äã ÊëòËá™ÂçöÊñáCFRunLoopÔºåÂéü‰ΩúËÄÖÊòØÂæÆÂçö@ÊàëÂ∞±Âè´SunnyÊÄé‰πà‰∫Ü 32. objc‰ΩøÁî®‰ªÄ‰πàÊú∫Âà∂ÁÆ°ÁêÜÂØπË±°ÂÜÖÂ≠òÔºüÈÄöËøá retainCount ÁöÑÊú∫Âà∂Êù•ÂÜ≥ÂÆöÂØπË±°ÊòØÂê¶ÈúÄË¶ÅÈáäÊîæ„ÄÇÊØèÊ¨° runloop ÁöÑÊó∂ÂÄôÔºåÈÉΩ‰ºöÊ£ÄÊü•ÂØπË±°ÁöÑ retainCountÔºåÂ¶ÇÊûúretainCount ‰∏∫ 0ÔºåËØ¥ÊòéËØ•ÂØπË±°Ê≤°ÊúâÂú∞ÊñπÈúÄË¶ÅÁªßÁª≠‰ΩøÁî®‰∫ÜÔºåÂèØ‰ª•ÈáäÊîæÊéâ‰∫Ü„ÄÇ 33. ARCÈÄöËøá‰ªÄ‰πàÊñπÂºèÂ∏ÆÂä©ÂºÄÂèëËÄÖÁÆ°ÁêÜÂÜÖÂ≠òÔºü ÁºñËØëÊó∂Ê†πÊçÆ‰ª£Á†Å‰∏ä‰∏ãÊñáÔºåÊèíÂÖ• retain/release ARCÁõ∏ÂØπ‰∫éMRCÔºå‰∏çÊòØÂú®ÁºñËØëÊó∂Ê∑ªÂä†retain/release/autoreleaseËøô‰πàÁÆÄÂçï„ÄÇÂ∫îËØ•ÊòØÁºñËØëÊúüÂíåËøêË°åÊúü‰∏§ÈÉ®ÂàÜÂÖ±ÂêåÂ∏ÆÂä©ÂºÄÂèëËÄÖÁÆ°ÁêÜÂÜÖÂ≠ò„ÄÇ Âú®ÁºñËØëÊúüÔºåARCÁî®ÁöÑÊòØÊõ¥Â∫ïÂ±ÇÁöÑCÊé•Âè£ÂÆûÁé∞ÁöÑretain/release/autoreleaseÔºåËøôÊ†∑ÂÅöÊÄßËÉΩÊõ¥Â•ΩÔºå‰πüÊòØ‰∏∫‰ªÄ‰πà‰∏çËÉΩÂú®ARCÁéØÂ¢É‰∏ãÊâãÂä®retain/release/autoreleaseÔºåÂêåÊó∂ÂØπÂêå‰∏Ä‰∏ä‰∏ãÊñáÁöÑÂêå‰∏ÄÂØπË±°ÁöÑÊàêÂØπretain/releaseÊìç‰ΩúËøõË°å‰ºòÂåñÔºàÂç≥ÂøΩÁï•Êéâ‰∏çÂøÖË¶ÅÁöÑÊìç‰ΩúÔºâÔºõARC‰πüÂåÖÂê´ËøêË°åÊúüÁªÑ‰ª∂ÔºåËøô‰∏™Âú∞ÊñπÂÅöÁöÑ‰ºòÂåñÊØîËæÉÂ§çÊùÇÔºå‰ΩÜ‰πü‰∏çËÉΩË¢´ÂøΩÁï•„ÄÇ„ÄêTODO:ÂêéÁª≠Êõ¥Êñ∞‰ºöËØ¶ÁªÜÊèèËø∞‰∏ã„Äë 34. ‰∏çÊâãÂä®ÊåáÂÆöautoreleasepoolÁöÑÂâçÊèê‰∏ãÔºå‰∏Ä‰∏™autorealeseÂØπË±°Âú®‰ªÄ‰πàÊó∂ÂàªÈáäÊîæÔºüÔºàÊØîÂ¶ÇÂú®‰∏Ä‰∏™vcÁöÑviewDidLoad‰∏≠ÂàõÂª∫ÔºâÂàÜ‰∏§ÁßçÊÉÖÂÜµÔºöÊâãÂä®Âπ≤È¢ÑÈáäÊîæÊó∂Êú∫„ÄÅÁ≥ªÁªüËá™Âä®ÂéªÈáäÊîæ„ÄÇ ÊâãÂä®Âπ≤È¢ÑÈáäÊîæÊó∂Êú∫‚ÄìÊåáÂÆöautoreleasepoolÂ∞±ÊòØÊâÄË∞ìÁöÑÔºöÂΩìÂâç‰ΩúÁî®ÂüüÂ§ßÊã¨Âè∑ÁªìÊùüÊó∂ÈáäÊîæ„ÄÇ Á≥ªÁªüËá™Âä®ÂéªÈáäÊîæ‚Äì‰∏çÊâãÂä®ÊåáÂÆöautoreleasepool AutoreleaseÂØπË±°Âá∫‰∫Ü‰ΩúÁî®Âüü‰πãÂêéÔºå‰ºöË¢´Ê∑ªÂä†Âà∞ÊúÄËøë‰∏ÄÊ¨°ÂàõÂª∫ÁöÑËá™Âä®ÈáäÊîæÊ±†‰∏≠ÔºåÂπ∂‰ºöÂú®ÂΩìÂâçÁöÑ runloop Ëø≠‰ª£ÁªìÊùüÊó∂ÈáäÊîæ„ÄÇ ÈáäÊîæÁöÑÊó∂Êú∫ÊÄªÁªìËµ∑Êù•ÔºåÂèØ‰ª•Áî®‰∏ãÂõæÊù•Ë°®Á§∫Ôºö ‰∏ãÈù¢ÂØπËøôÂº†ÂõæËøõË°åËØ¶ÁªÜÁöÑËß£ÈáäÔºö ‰ªéÁ®ãÂ∫èÂêØÂä®Âà∞Âä†ËΩΩÂÆåÊàêÊòØ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑËøêË°åÂæ™ÁéØÔºåÁÑ∂Âêé‰ºöÂÅú‰∏ãÊù•ÔºåÁ≠âÂæÖÁî®Êà∑‰∫§‰∫íÔºåÁî®Êà∑ÁöÑÊØè‰∏ÄÊ¨°‰∫§‰∫íÈÉΩ‰ºöÂêØÂä®‰∏ÄÊ¨°ËøêË°åÂæ™ÁéØÔºåÊù•Â§ÑÁêÜÁî®Êà∑ÊâÄÊúâÁöÑÁÇπÂáª‰∫ã‰ª∂„ÄÅËß¶Êë∏‰∫ã‰ª∂„ÄÇ Êàë‰ª¨ÈÉΩÁü•ÈÅìÔºöÊâÄÊúâ autorelease ÁöÑÂØπË±°ÔºåÂú®Âá∫‰∫Ü‰ΩúÁî®Âüü‰πãÂêéÔºå‰ºöË¢´Ëá™Âä®Ê∑ªÂä†Âà∞ÊúÄËøëÂàõÂª∫ÁöÑËá™Âä®ÈáäÊîæÊ±†‰∏≠„ÄÇ ‰ΩÜÊòØÂ¶ÇÊûúÊØèÊ¨°ÈÉΩÊîæËøõÂ∫îÁî®Á®ãÂ∫èÁöÑ main.m ‰∏≠ÁöÑ autoreleasepool ‰∏≠ÔºåËøüÊó©ÊúâË¢´ÊíëÊª°ÁöÑ‰∏ÄÂàª„ÄÇËøô‰∏™ËøáÁ®ã‰∏≠ÂøÖÂÆöÊúâ‰∏Ä‰∏™ÈáäÊîæÁöÑÂä®‰Ωú„ÄÇ‰ΩïÊó∂Ôºü Âú®‰∏ÄÊ¨°ÂÆåÊï¥ÁöÑËøêË°åÂæ™ÁéØÁªìÊùü‰πãÂâçÔºå‰ºöË¢´ÈîÄÊØÅ„ÄÇ ÈÇ£‰ªÄ‰πàÊó∂Èó¥‰ºöÂàõÂª∫Ëá™Âä®ÈáäÊîæÊ±†ÔºüËøêË°åÂæ™ÁéØÊ£ÄÊµãÂà∞‰∫ã‰ª∂Âπ∂ÂêØÂä®ÂêéÔºåÂ∞±‰ºöÂàõÂª∫Ëá™Âä®ÈáäÊîæÊ±†„ÄÇ ‰ªé RunLoop Ê∫ê‰ª£Á†Å‰∏≠ÂèØÁü•ÔºåÂ≠êÁ∫øÁ®ãÈªòËÆ§ÊòØÊ≤°Êúâ RunLoop ÁöÑÔºåÂ¶ÇÊûúÈúÄË¶ÅÂú®Â≠êÁ∫øÁ®ãÂºÄÂêØ RunLoop ÔºåÂàôÈúÄË¶ÅË∞ÉÁî® [NSRunLoop CurrentRunLoop] ÊñπÊ≥ïÔºåÂÆÉÂÜÖÈÉ®ÂÆûÁé∞ÊòØÂÖàÊ£ÄÊü•Á∫øÁ®ãÔºåÂ¶ÇÊûúÂèëÁé∞ÊòØÂ≠êÁ∫øÁ®ãÔºå‰ª•ÊáíÂä†ËΩΩÁöÑÂΩ¢Âºè ÂàõÂª∫‰∏Ä‰∏™Â≠êÁ∫øÁ®ãÁöÑ RunLoop„ÄÇÂπ∂Â≠òÂÇ®Âú®‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑ ÂèØÂèòÂ≠óÂÖ∏Èáå„ÄÇÁºñÁ®ã‰∫∫ÂëòÂú®Ë∞ÉÁî® [NSRunLoop CurrentRunLoop] Êó∂ÔºåÊòØËá™Âä®ÂàõÂª∫ RunLoop ÁöÑÔºåËÄåÊ≤°Ê≥ïÊâãÂä®ÂàõÂª∫„ÄÇ Ëá™ÂÆö‰πâÁöÑ NSOperation Âíå NSThread ÈúÄË¶ÅÊâãÂä®ÂàõÂª∫Ëá™Âä®ÈáäÊîæÊ±†„ÄÇÊØîÂ¶ÇÔºö Ëá™ÂÆö‰πâÁöÑ NSOperation Á±ª‰∏≠ÁöÑ main ÊñπÊ≥ïÈáåÂ∞±ÂøÖÈ°ªÊ∑ªÂä†Ëá™Âä®ÈáäÊîæÊ±†„ÄÇÂê¶ÂàôÂá∫‰∫Ü‰ΩúÁî®ÂüüÂêéÔºåËá™Âä®ÈáäÊîæÂØπË±°‰ºöÂõ†‰∏∫Ê≤°ÊúâËá™Âä®ÈáäÊîæÊ±†ÂéªÂ§ÑÁêÜÂÆÉÔºåËÄåÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇ ‰ΩÜÂØπ‰∫é blockOperation Âíå invocationOperation ËøôÁßçÈªòËÆ§ÁöÑOperation ÔºåÁ≥ªÁªüÂ∑≤ÁªèÂ∏ÆÊàë‰ª¨Â∞ÅË£ÖÂ•Ω‰∫ÜÔºå‰∏çÈúÄË¶ÅÊâãÂä®ÂàõÂª∫Ëá™Âä®ÈáäÊîæÊ±†„ÄÇ @autoreleasepool ÂΩìËá™Âä®ÈáäÊîæÊ±†Ë¢´ÈîÄÊØÅÊàñËÄÖËÄóÂ∞ΩÊó∂Ôºå‰ºöÂêëËá™Âä®ÈáäÊîæÊ±†‰∏≠ÁöÑÊâÄÊúâÂØπË±°ÂèëÈÄÅ release Ê∂àÊÅØÔºåÈáäÊîæËá™Âä®ÈáäÊîæÊ±†‰∏≠ÁöÑÊâÄÊúâÂØπË±°„ÄÇ Â¶ÇÊûúÂú®‰∏Ä‰∏™vcÁöÑviewDidLoad‰∏≠ÂàõÂª∫‰∏Ä‰∏™ AutoreleaseÂØπË±°ÔºåÈÇ£‰πàËØ•ÂØπË±°‰ºöÂú® viewDidAppear ÊñπÊ≥ïÊâßË°åÂâçÂ∞±Ë¢´ÈîÄÊØÅ‰∫Ü„ÄÇ ÂèÇËÄÉÈìæÊé•Ôºö„ÄäÈªëÂπïËÉåÂêéÁöÑAutorelease„Äã 35. BAD_ACCESSÂú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÂá∫Áé∞ÔºüËÆøÈóÆ‰∫ÜÊÇ¨ÂûÇÊåáÈíàÔºåÊØîÂ¶ÇÂØπ‰∏Ä‰∏™Â∑≤ÁªèÈáäÊîæÁöÑÂØπË±°ÊâßË°å‰∫Ürelease„ÄÅËÆøÈóÆÂ∑≤ÁªèÈáäÊîæÂØπË±°ÁöÑÊàêÂëòÂèòÈáèÊàñËÄÖÂèëÊ∂àÊÅØ„ÄÇÊ≠ªÂæ™ÁéØ 36. ËãπÊûúÊòØÂ¶Ç‰ΩïÂÆûÁé∞autoreleasepoolÁöÑÔºüautoreleasepool ‰ª•‰∏Ä‰∏™ÈòüÂàóÊï∞ÁªÑÁöÑÂΩ¢ÂºèÂÆûÁé∞,‰∏ªË¶ÅÈÄöËøá‰∏ãÂàó‰∏â‰∏™ÂáΩÊï∞ÂÆåÊàê. objc_autoreleasepoolPush objc_autoreleasepoolPop objc_autorelease ÁúãÂáΩÊï∞ÂêçÂ∞±ÂèØ‰ª•Áü•ÈÅìÔºåÂØπ autorelease ÂàÜÂà´ÊâßË°å pushÔºåÂíå pop Êìç‰Ωú„ÄÇÈîÄÊØÅÂØπË±°Êó∂ÊâßË°åreleaseÊìç‰Ωú„ÄÇ ‰∏æ‰æãËØ¥ÊòéÔºöÊàë‰ª¨ÈÉΩÁü•ÈÅìÁî®Á±ªÊñπÊ≥ïÂàõÂª∫ÁöÑÂØπË±°ÈÉΩÊòØ Autorelease ÁöÑÔºåÈÇ£‰πà‰∏ÄÊó¶ Person Âá∫‰∫Ü‰ΩúÁî®ÂüüÔºåÂΩìÂú® Person ÁöÑ dealloc ÊñπÊ≥ï‰∏≠Êâì‰∏äÊñ≠ÁÇπÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÁúãÂà∞ËøôÊ†∑ÁöÑË∞ÉÁî®Â†ÜÊ†à‰ø°ÊÅØÔºö 37. ‰ΩøÁî®blockÊó∂‰ªÄ‰πàÊÉÖÂÜµ‰ºöÂèëÁîüÂºïÁî®Âæ™ÁéØÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü‰∏Ä‰∏™ÂØπË±°‰∏≠Âº∫ÂºïÁî®‰∫ÜblockÔºåÂú®block‰∏≠ÂèàÂº∫ÂºïÁî®‰∫ÜËØ•ÂØπË±°ÔºåÂ∞±‰ºöÂèëÂ∞ÑÂæ™ÁéØÂºïÁî®„ÄÇ Ëß£ÂÜ≥ÊñπÊ≥ïÊòØÂ∞ÜËØ•ÂØπË±°‰ΩøÁî®weakÊàñËÄÖblock‰øÆÈ•∞Á¨¶‰øÆÈ•∞‰πãÂêéÂÜçÂú®block‰∏≠‰ΩøÁî®„ÄÇ id weak weakSelf = self;ÊàñËÄÖ weak __typeof(&amp;*self)weakSelf = selfËØ•ÊñπÊ≥ïÂèØ‰ª•ËÆæÁΩÆÂÆè id __block weakSelf = self; ÊàñËÄÖÂ∞ÜÂÖ∂‰∏≠‰∏ÄÊñπÂº∫Âà∂Âà∂Á©∫ xxx = nil„ÄÇ Ê£ÄÊµã‰ª£Á†Å‰∏≠ÊòØÂê¶Â≠òÂú®Âæ™ÁéØÂºïÁî®ÈóÆÈ¢òÔºåÂèØ‰ΩøÁî® Facebook ÂºÄÊ∫êÁöÑ‰∏Ä‰∏™Ê£ÄÊµãÂ∑•ÂÖ∑ FBRetainCycleDetector „ÄÇ 38. Âú®blockÂÜÖÂ¶Ç‰Ωï‰øÆÊîπblockÂ§ñÈÉ®ÂèòÈáèÔºüÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂú®block‰∏≠ËÆøÈóÆÁöÑÂ§ñÈÉ®ÂèòÈáèÊòØÂ§çÂà∂ËøáÂéªÁöÑÔºåÂç≥ÔºöÂÜôÊìç‰Ωú‰∏çÂØπÂéüÂèòÈáèÁîüÊïà„ÄÇ‰ΩÜÊòØ‰Ω†ÂèØ‰ª•Âä†‰∏ä __block Êù•ËÆ©ÂÖ∂ÂÜôÊìç‰ΩúÁîüÊïàÔºåÁ§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ã: 123456__block int a = 0;void (^foo)(void) = ^{ a = 1; };foo(); //ËøôÈáåÔºåaÁöÑÂÄºË¢´‰øÆÊîπ‰∏∫1 ËøôÊòØ ÂæÆÂçö@ÂîêÂ∑ß_boyÁöÑ„ÄäiOSÂºÄÂèëËøõÈò∂„Äã‰∏≠ÁöÑÁ¨¨11.2.3Á´†ËäÇ‰∏≠ÁöÑÊèèËø∞„ÄÇ‰Ω†ÂêåÊ†∑ÂèØ‰ª•Âú®Èù¢ËØï‰∏≠ËøôÊ†∑ÂõûÁ≠îÔºå‰ΩÜ‰Ω†Âπ∂Ê≤°ÊúâÁ≠îÂà∞‚ÄúÁÇπÂ≠ê‰∏ä‚Äù„ÄÇÁúüÊ≠£ÁöÑÂéüÂõ†ÔºåÂπ∂Ê≤°Êúâ‰π¶ËøôÊú¨‰π¶ÈáåÂÜôÁöÑËøô‰πà‚ÄúÁ•ûÂ•á‚ÄùÔºåËÄå‰∏îËøôÁßçËØ¥Ê≥ï‰πüÊúâÁÇπÁâµÂº∫„ÄÇÈù¢ËØïÂÆòËÇØÂÆö‰ºöËøΩÈóÆ‚Äú‰∏∫‰ªÄ‰πàÂÜôÊìç‰ΩúÂ∞±ÁîüÊïà‰∫ÜÔºü‚ÄùÁúüÊ≠£ÁöÑÂéüÂõ†ÊòØËøôÊ†∑ÁöÑÔºö Êàë‰ª¨ÈÉΩÁü•ÈÅìÔºöBlock‰∏çÂÖÅËÆ∏‰øÆÊîπÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄºÔºåËøôÈáåÊâÄËØ¥ÁöÑÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄºÔºåÊåáÁöÑÊòØÊ†à‰∏≠ÊåáÈíàÁöÑÂÜÖÂ≠òÂú∞ÂùÄ„ÄÇ__block ÊâÄËµ∑Âà∞ÁöÑ‰ΩúÁî®Â∞±ÊòØÂè™Ë¶ÅËßÇÂØüÂà∞ËØ•ÂèòÈáèË¢´ block ÊâÄÊåÅÊúâÔºåÂ∞±Â∞Ü‚ÄúÂ§ñÈÉ®ÂèòÈáè‚ÄùÂú®Ê†à‰∏≠ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊîæÂà∞‰∫ÜÂ†Ü‰∏≠„ÄÇËøõËÄåÂú®blockÂÜÖÈÉ®‰πüÂèØ‰ª•‰øÆÊîπÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄº„ÄÇ Block‰∏çÂÖÅËÆ∏‰øÆÊîπÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄº„ÄÇAppleËøôÊ†∑ËÆæËÆ°ÔºåÂ∫îËØ•ÊòØËÄÉËôëÂà∞‰∫ÜblockÁöÑÁâπÊÆäÊÄßÔºåblock‰πüÂ±û‰∫é‚ÄúÂáΩÊï∞‚ÄùÁöÑËåÉÁï¥ÔºåÂèòÈáèËøõÂÖ•blockÔºåÂÆûÈôÖÂ∞±ÊòØÂ∑≤ÁªèÊîπÂèò‰∫Ü‰ΩúÁî®Âüü„ÄÇÂú®Âá†‰∏™‰ΩúÁî®Âüü‰πãÈó¥ËøõË°åÂàáÊç¢Êó∂ÔºåÂ¶ÇÊûú‰∏çÂä†‰∏äËøôÊ†∑ÁöÑÈôêÂà∂ÔºåÂèòÈáèÁöÑÂèØÁª¥Êä§ÊÄßÂ∞ÜÂ§ßÂ§ßÈôç‰Ωé„ÄÇÂèàÊØîÂ¶ÇÊàëÊÉ≥Âú®blockÂÜÖÂ£∞Êòé‰∫Ü‰∏Ä‰∏™‰∏éÂ§ñÈÉ®ÂêåÂêçÁöÑÂèòÈáèÔºåÊ≠§Êó∂ÊòØÂÖÅËÆ∏Âë¢ËøòÊòØ‰∏çÂÖÅËÆ∏Âë¢ÔºüÂè™ÊúâÂä†‰∏ä‰∫ÜËøôÊ†∑ÁöÑÈôêÂà∂ÔºåËøôÊ†∑ÁöÑÊÉÖÊôØÊâçËÉΩÂÆûÁé∞„ÄÇ‰∫éÊòØÊ†àÂå∫ÂèòÊàê‰∫ÜÁ∫¢ÁÅØÂå∫ÔºåÂ†ÜÂå∫ÂèòÊàê‰∫ÜÁªøÁÅØÂå∫„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÊâìÂç∞‰∏ãÂÜÖÂ≠òÂú∞ÂùÄÊù•ËøõË°åÈ™åËØÅÔºö 12345678__block int a = 0;NSLog(@&quot;ÂÆö‰πâÂâçÔºö%p&quot;, &amp;a); //Ê†àÂå∫void (^foo)(void) = ^{ a = 1; NSLog(@&quot;blockÂÜÖÈÉ®Ôºö%p&quot;, &amp;a); //Â†ÜÂå∫};NSLog(@&quot;ÂÆö‰πâÂêéÔºö%p&quot;, &amp;a); //Â†ÜÂå∫foo(); 1232016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] ÂÆö‰πâÂâçÔºö0x16fda86f82016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] ÂÆö‰πâÂêéÔºö0x155b22fc82016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] blockÂÜÖÈÉ®Ôºö 0x155b22fc8 ‚ÄúÂÆö‰πâÂêé‚ÄùÂíå‚ÄúblockÂÜÖÈÉ®‚Äù‰∏§ËÄÖÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊàë‰ª¨ÈÉΩÁü•ÈÅì block ÂÜÖÈÉ®ÁöÑÂèòÈáè‰ºöË¢´ copy Âà∞Â†ÜÂå∫Ôºå‚ÄúblockÂÜÖÈÉ®‚ÄùÊâìÂç∞ÁöÑÊòØÂ†ÜÂú∞ÂùÄÔºåÂõ†ËÄå‰πüÂ∞±ÂèØ‰ª•Áü•ÈÅìÔºå‚ÄúÂÆö‰πâÂêé‚ÄùÊâìÂç∞ÁöÑ‰πüÊòØÂ†ÜÁöÑÂú∞ÂùÄ„ÄÇ ÈÇ£‰πàÂ¶Ç‰ΩïËØÅÊòé‚ÄúblockÂÜÖÈÉ®‚ÄùÊâìÂç∞ÁöÑÊòØÂ†ÜÂú∞ÂùÄÔºü Êää‰∏â‰∏™16ËøõÂà∂ÁöÑÂÜÖÂ≠òÂú∞ÂùÄËΩ¨Êàê10ËøõÂà∂Â∞±ÊòØÔºö ÂÆö‰πâÂêéÂâçÔºö6171559672 blockÂÜÖÈÉ®Ôºö5732708296 ÂÆö‰πâÂêéÂêéÔºö5732708296 ‰∏≠Èó¥Áõ∏Â∑Æ438851376‰∏™Â≠óËäÇÔºå‰πüÂ∞±ÊòØ 418.5M ÁöÑÁ©∫Èó¥ÔºåÂõ†‰∏∫Â†ÜÂú∞ÂùÄË¶ÅÂ∞è‰∫éÊ†àÂú∞ÂùÄÔºåÂèàÂõ†‰∏∫iOS‰∏≠‰∏Ä‰∏™ËøõÁ®ãÁöÑÊ†àÂå∫ÂÜÖÂ≠òÂè™Êúâ1MÔºåMac‰πüÂè™Êúâ8MÔºåÊòæÁÑ∂aÂ∑≤ÁªèÊòØÂú®Â†ÜÂå∫‰∫Ü„ÄÇ Ëøô‰πüËØÅÂÆû‰∫ÜÔºöa Âú®ÂÆö‰πâÂâçÊòØÊ†àÂå∫Ôºå‰ΩÜÂè™Ë¶ÅËøõÂÖ•‰∫Ü block Âå∫ÂüüÔºåÂ∞±ÂèòÊàê‰∫ÜÂ†ÜÂå∫„ÄÇËøôÊâçÊòØ __block ÂÖ≥ÈîÆÂ≠óÁöÑÁúüÊ≠£‰ΩúÁî®„ÄÇ __block ÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÂêéÔºåintÁ±ªÂûã‰πü‰ªé4Â≠óËäÇÂèòÊàê‰∫Ü32Â≠óËäÇÔºåËøôÊòØ Foundation Ê°ÜÊû∂ malloc Âá∫Êù•ÁöÑ„ÄÇËøô‰πüÂêåÊ†∑ËÉΩËØÅÂÆû‰∏äÈù¢ÁöÑÁªìËÆ∫„ÄÇÔºàPSÔºöÂ±ÖÁÑ∂ÊØî NSObject alloc Âá∫Êù•ÁöÑ 16 Â≠óËäÇË¶ÅÂ§ö‰∏ÄÂÄçÔºâ„ÄÇ ÁêÜËß£Âà∞ËøôÊòØÂõ†‰∏∫Â†ÜÊ†àÂú∞ÂùÄÁöÑÂèòÊõ¥ÔºåËÄåÈùûÊâÄË∞ìÁöÑ‚ÄúÂÜôÊìç‰ΩúÁîüÊïà‚ÄùÔºåËøô‰∏ÄÁÇπËá≥ÂÖ≥ÈáçË¶ÅÔºåË¶Å‰∏çÁÑ∂‰Ω†Â¶Ç‰ΩïËß£Èáä‰∏ãÈù¢Ëøô‰∏™Áé∞Ë±°Ôºö ‰ª•‰∏ã‰ª£Á†ÅÁºñËØëÂèØ‰ª•ÈÄöËøáÔºåÂπ∂‰∏îÂú®block‰∏≠ÊàêÂäüÂ∞ÜaÁöÑ‰ªéTom‰øÆÊîπ‰∏∫Jerry„ÄÇ 123456789101112NSMutableString *a = [NSMutableString stringWithString:@&quot;Tom&quot;];NSLog(@&quot;\\n ÂÆö‰ª•ÂâçÔºö------------------------------------\\n\\ aÊåáÂêëÁöÑÂ†Ü‰∏≠Âú∞ÂùÄÔºö%pÔºõaÂú®Ê†à‰∏≠ÁöÑÊåáÈíàÂú∞ÂùÄÔºö%p&quot;, a, &amp;a); //aÂú®Ê†àÂå∫void (^foo)(void) = ^{ a.string = @&quot;Jerry&quot;; NSLog(@&quot;\\n blockÂÜÖÈÉ®Ôºö------------------------------------\\n\\ aÊåáÂêëÁöÑÂ†Ü‰∏≠Âú∞ÂùÄÔºö%pÔºõaÂú®Ê†à‰∏≠ÁöÑÊåáÈíàÂú∞ÂùÄÔºö%p&quot;, a, &amp;a); //aÂú®Ê†àÂå∫ a = [NSMutableString stringWithString:@&quot;William&quot;];};foo();NSLog(@&quot;\\n ÂÆö‰ª•ÂêéÔºö------------------------------------\\n\\ aÊåáÂêëÁöÑÂ†Ü‰∏≠Âú∞ÂùÄÔºö%pÔºõaÂú®Ê†à‰∏≠ÁöÑÊåáÈíàÂú∞ÂùÄÔºö%p&quot;, a, &amp;a); //aÂú®Ê†àÂå∫ ËøôÈáåÁöÑaÂ∑≤ÁªèÁî±Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåÂèòÊàê‰∫ÜÂØπË±°Á±ªÂûã„ÄÇblock‰ºöÂØπÂØπË±°Á±ªÂûãÁöÑÊåáÈíàËøõË°åcopyÔºåcopyÂà∞Â†Ü‰∏≠Ôºå‰ΩÜÂπ∂‰∏ç‰ºöÊîπÂèòËØ•ÊåáÈíàÊâÄÊåáÂêëÁöÑÂ†Ü‰∏≠ÁöÑÂú∞ÂùÄÔºåÊâÄ‰ª•Âú®‰∏äÈù¢ÁöÑÁ§∫‰æã‰ª£Á†Å‰∏≠Ôºåblock‰ΩìÂÜÖ‰øÆÊîπÁöÑÂÆûÈôÖÊòØaÊåáÂêëÁöÑÂ†Ü‰∏≠ÁöÑÂÜÖÂÆπ„ÄÇ ‰ΩÜÂ¶ÇÊûúÊàë‰ª¨Â∞ùËØïÂÉè‰∏äÈù¢ÂõæÁâá‰∏≠ÁöÑ65Ë°åÈÇ£Ê†∑ÂÅöÔºåÁªìÊûú‰ºöÁºñËØë‰∏çÈÄöËøáÔºåÈÇ£ÊòØÂõ†‰∏∫Ê≠§Êó∂‰Ω†Âú®‰øÆÊîπÁöÑÂ∞±‰∏çÊòØÂ†Ü‰∏≠ÁöÑÂÜÖÂÆπÔºåËÄåÊòØÊ†à‰∏≠ÁöÑÂÜÖÂÆπ„ÄÇ ‰∏äÊñáÂ∑≤ÁªèËØ¥ËøáÔºöBlock‰∏çÂÖÅËÆ∏‰øÆÊîπÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄºÔºåËøôÈáåÊâÄËØ¥ÁöÑÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄºÔºåÊåáÁöÑÊòØÊ†à‰∏≠ÊåáÈíàÁöÑÂÜÖÂ≠òÂú∞ÂùÄ„ÄÇÊ†àÂå∫ÊòØÁ∫¢ÁÅØÂå∫ÔºåÂ†ÜÂå∫ÊâçÊòØÁªøÁÅØÂå∫„ÄÇ 39. ‰ΩøÁî®Á≥ªÁªüÁöÑÊüê‰∫õblock apiÔºàÂ¶ÇUIViewÁöÑblockÁâàÊú¨ÂÜôÂä®ÁîªÊó∂ÔºâÔºåÊòØÂê¶‰πüËÄÉËôëÂºïÁî®Âæ™ÁéØÈóÆÈ¢òÔºüÁ≥ªÁªüÁöÑÊüê‰∫õblock api‰∏≠ÔºåUIViewÁöÑblockÁâàÊú¨ÂÜôÂä®ÁîªÊó∂‰∏çÈúÄË¶ÅËÄÉËôëÔºå‰ΩÜ‰πüÊúâ‰∏Ä‰∫õapi ÈúÄË¶ÅËÄÉËôëÔºö ÊâÄË∞ì‚ÄúÂºïÁî®Âæ™ÁéØ‚ÄùÊòØÊåáÂèåÂêëÁöÑÂº∫ÂºïÁî®ÔºåÊâÄ‰ª•ÈÇ£‰∫õ‚ÄúÂçïÂêëÁöÑÂº∫ÂºïÁî®‚ÄùÔºàblock Âº∫ÂºïÁî® self ÔºâÊ≤°ÊúâÈóÆÈ¢òÔºåÊØîÂ¶ÇËøô‰∫õÔºö 1[UIView animateWithDuration:duration animations:^{ [self.superview layoutIfNeeded]; }]; 1[[NSOperationQueue mainQueue] addOperationWithBlock:^{ self.someProperty = xyz; }]; 12345[[NSNotificationCenter defaultCenter] addObserverForName:@&quot;someNotification&quot; object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification * notification) { self.someProperty = xyz; }]; Ëøô‰∫õÊÉÖÂÜµ‰∏çÈúÄË¶ÅËÄÉËôë‚ÄúÂºïÁî®Âæ™ÁéØ‚Äù„ÄÇ ‰ΩÜÂ¶ÇÊûú‰Ω†‰ΩøÁî®‰∏Ä‰∫õÂèÇÊï∞‰∏≠ÂèØËÉΩÂê´Êúâ ivar ÁöÑÁ≥ªÁªü api ÔºåÂ¶Ç GCD „ÄÅNSNotificationCenterÂ∞±Ë¶ÅÂ∞èÂøÉ‰∏ÄÁÇπÔºöÊØîÂ¶ÇGCD ÂÜÖÈÉ®Â¶ÇÊûúÂºïÁî®‰∫Ü selfÔºåËÄå‰∏î GCD ÁöÑÂÖ∂‰ªñÂèÇÊï∞ÊòØ ivarÔºåÂàôË¶ÅËÄÉËôëÂà∞Âæ™ÁéØÂºïÁî®Ôºö 1234567__weak __typeof__(self) weakSelf = self;dispatch_group_async(_operationsGroup, _operationsQueue, ^{__typeof__(self) strongSelf = weakSelf;[strongSelf doSomething];[strongSelf doSomethingElse];} ); Á±ª‰ººÁöÑÔºö 12345678__weak __typeof__(self) weakSelf = self;_observer = [[NSNotificationCenter defaultCenter] addObserverForName:@&quot;testKey&quot; object:nil queue:nil usingBlock:^(NSNotification *note) { __typeof__(self) strongSelf = weakSelf; [strongSelf dismissModalViewControllerAnimated:YES];}]; self ‚Äì&gt; _observer ‚Äì&gt; block ‚Äì&gt; self ÊòæÁÑ∂Ëøô‰πüÊòØ‰∏Ä‰∏™Âæ™ÁéØÂºïÁî®„ÄÇ Ê£ÄÊµã‰ª£Á†Å‰∏≠ÊòØÂê¶Â≠òÂú®Âæ™ÁéØÂºïÁî®ÈóÆÈ¢òÔºåÂèØ‰ΩøÁî® Facebook ÂºÄÊ∫êÁöÑ‰∏Ä‰∏™Ê£ÄÊµãÂ∑•ÂÖ∑ FBRetainCycleDetector „ÄÇ 40. GCDÁöÑÈòüÂàóÔºàdispatch_queue_tÔºâÂàÜÂì™‰∏§ÁßçÁ±ªÂûãÔºü ‰∏≤Ë°åÈòüÂàóSerial Dispatch Queue Âπ∂Ë°åÈòüÂàóConcurrent Dispatch Queue 41. Â¶Ç‰ΩïÁî®GCDÂêåÊ≠•Ëã•Âπ≤‰∏™ÂºÇÊ≠•Ë∞ÉÁî®ÔºüÔºàÂ¶ÇÊ†πÊçÆËã•Âπ≤‰∏™urlÂºÇÊ≠•Âä†ËΩΩÂ§öÂº†ÂõæÁâáÔºåÁÑ∂ÂêéÂú®ÈÉΩ‰∏ãËΩΩÂÆåÊàêÂêéÂêàÊàê‰∏ÄÂº†Êï¥ÂõæÔºâ‰ΩøÁî®Dispatch GroupËøΩÂä†blockÂà∞Global Group Queue,Ëøô‰∫õblockÂ¶ÇÊûúÂÖ®ÈÉ®ÊâßË°åÂÆåÊØïÔºåÂ∞±‰ºöÊâßË°åMain Dispatch Queue‰∏≠ÁöÑÁªìÊùüÂ§ÑÁêÜÁöÑblock„ÄÇ 12345678dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);dispatch_group_t group = dispatch_group_create();dispatch_group_async(group, queue, ^{ /*Âä†ËΩΩÂõæÁâá1 */ });dispatch_group_async(group, queue, ^{ /*Âä†ËΩΩÂõæÁâá2 */ });dispatch_group_async(group, queue, ^{ /*Âä†ËΩΩÂõæÁâá3 */ }); dispatch_group_notify(group, dispatch_get_main_queue(), ^{ // ÂêàÂπ∂ÂõæÁâá}); 42. dispatch_barrier_asyncÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πàÔºü Âú®Âπ∂Ë°åÈòüÂàó‰∏≠Ôºå‰∏∫‰∫Ü‰øùÊåÅÊüê‰∫õ‰ªªÂä°ÁöÑÈ°∫Â∫èÔºåÈúÄË¶ÅÁ≠âÂæÖ‰∏Ä‰∫õ‰ªªÂä°ÂÆåÊàêÂêéÊâçËÉΩÁªßÁª≠ËøõË°åÔºå‰ΩøÁî® barrier Êù•Á≠âÂæÖ‰πãÂâç‰ªªÂä°ÂÆåÊàêÔºåÈÅøÂÖçÊï∞ÊçÆÁ´û‰∫âÁ≠âÈóÆÈ¢ò„ÄÇ dispatch_barrier_async ÂáΩÊï∞‰ºöÁ≠âÂæÖËøΩÂä†Âà∞Concurrent Dispatch QueueÂπ∂Ë°åÈòüÂàó‰∏≠ÁöÑÊìç‰ΩúÂÖ®ÈÉ®ÊâßË°åÂÆå‰πãÂêéÔºåÁÑ∂ÂêéÂÜçÊâßË°å dispatch_barrier_async ÂáΩÊï∞ËøΩÂä†ÁöÑÂ§ÑÁêÜÔºåÁ≠â dispatch_barrier_async ËøΩÂä†ÁöÑÂ§ÑÁêÜÊâßË°åÁªìÊùü‰πãÂêéÔºåConcurrent Dispatch QueueÊâçÊÅ¢Â§ç‰πãÂâçÁöÑÂä®‰ΩúÁªßÁª≠ÊâßË°å„ÄÇ Êâì‰∏™ÊØîÊñπÔºöÊØîÂ¶Ç‰Ω†‰ª¨ÂÖ¨Âè∏Âë®Êú´Ë∑üÂõ¢ÊóÖÊ∏∏ÔºåÈ´òÈÄü‰ºëÊÅØÁ´ô‰∏äÔºåÂè∏Êú∫ËØ¥ÔºöÂ§ßÂÆ∂ÈÉΩÂéª‰∏äÂéïÊâÄÔºåÈÄüÊàòÈÄüÂÜ≥Ôºå‰∏äÂÆåÂéïÊâÄÂ∞±‰∏äÈ´òÈÄü„ÄÇË∂ÖÂ§ßÁöÑÂÖ¨ÂÖ±ÂéïÊâÄÔºåÂ§ßÂÆ∂ÂêåÊó∂ÂéªÔºåÁ®ãÂ∫èÁåøÂæàÂø´Â∞±ÁªìÊùü‰∫ÜÔºå‰ΩÜÁ®ãÂ∫èÂ™õÂ∞±ÂèØËÉΩ‰ºöÊÖ¢‰∏Ä‰∫õÔºåÂç≥‰Ωø‰Ω†Á¨¨‰∏Ä‰∏™ÂõûÊù•ÔºåÂè∏Êú∫‰πü‰∏ç‰ºöÂá∫ÂèëÔºåÂè∏Êú∫Ë¶ÅÁ≠âÂæÖÊâÄÊúâ‰∫∫ÈÉΩÂõûÊù•ÂêéÔºåÊâçËÉΩÂá∫Âèë„ÄÇ dispatch_barrier_async ÂáΩÊï∞ËøΩÂä†ÁöÑÂÜÖÂÆπÂ∞±Â¶ÇÂêå ‚Äú‰∏äÂÆåÂéïÊâÄÂ∞±‰∏äÈ´òÈÄü‚ÄùËøô‰∏™Âä®‰Ωú„ÄÇ ÔºàÊ≥®ÊÑèÔºö‰ΩøÁî® dispatch_barrier_async ÔºåËØ•ÂáΩÊï∞Âè™ËÉΩÊê≠ÈÖçËá™ÂÆö‰πâÂπ∂Ë°åÈòüÂàó dispatch_queue_t ‰ΩøÁî®„ÄÇ‰∏çËÉΩ‰ΩøÁî®Ôºö dispatch_get_global_queue ÔºåÂê¶Âàô dispatch_barrier_async ÁöÑ‰ΩúÁî®‰ºöÂíå dispatch_async ÁöÑ‰ΩúÁî®‰∏ÄÊ®°‰∏ÄÊ†∑„ÄÇ Ôºâ 43. ËãπÊûú‰∏∫‰ªÄ‰πàË¶ÅÂ∫üÂºÉdispatch_get_current_queueÔºüdispatch_get_current_queueÂáΩÊï∞ÁöÑË°å‰∏∫Â∏∏Â∏∏‰∏éÂºÄÂèëËÄÖÊâÄÈ¢ÑÊúüÁöÑ‰∏çÂêå„ÄÇÁî±‰∫éÊ¥æÂèëÈòüÂàóÊòØÊåâÂ±ÇÁ∫ßÊù•ÁªÑÁªáÁöÑÔºåËøôÊÑèÂë≥ÁùÄÊéíÂú®ÊüêÊù°ÈòüÂàó‰∏≠ÁöÑÂùó‰ºöÂú®ÂÖ∂‰∏äÁ∫ßÈòüÂàóÈáåÊâßË°å„ÄÇÈòüÂàóÈó¥ÁöÑÂ±ÇÁ∫ßÂÖ≥Á≥ª‰ºöÂØºËá¥Ê£ÄÊü•ÂΩìÂâçÈòüÂàóÊòØÂê¶‰∏∫ÊâßË°åÂêåÊ≠•Ê¥æÂèëÊâÄÁî®ÁöÑÈòüÂàóËøôÁßçÊñπÊ≥ïÂπ∂‰∏çÊÄªÊòØÂ•èÊïà„ÄÇdispatch_get_current_queueÂáΩÊï∞ÈÄöÂ∏∏‰ºöË¢´Áî®‰∫éËß£ÂÜ≥Áî±‰∏çÂèØ‰ª•ÈáçÂÖ•ÁöÑ‰ª£Á†ÅÊâÄÂºïÂèëÁöÑÊ≠ªÈîÅÔºåÁÑ∂ÂêéËÉΩÁî®Ê≠§ÂáΩÊï∞Ëß£ÂÜ≥ÁöÑÈóÆÈ¢òÔºåÈÄöÂ∏∏‰πüÂèØ‰ª•Áî®‚ÄùÈòüÂàóÁâπÂÆöÊï∞ÊçÆ‚ÄùÊù•Ëß£ÂÜ≥„ÄÇ 44. ‰ª•‰∏ã‰ª£Á†ÅËøêË°åÁªìÊûúÂ¶Ç‰ΩïÔºü- (void)viewDidLoad { [super viewDidLoad]; NSLog(@&quot;1&quot;); dispatch_sync(dispatch_get_main_queue(), ^{ NSLog(@&quot;2&quot;); }); NSLog(@&quot;3&quot;); }Âè™ËæìÂá∫Ôºö1 „ÄÇÂèëÁîü‰∏ªÁ∫øÁ®ãÈîÅÊ≠ª„ÄÇ 45. addObserver:forKeyPath:options:context:ÂêÑ‰∏™ÂèÇÊï∞ÁöÑ‰ΩúÁî®ÂàÜÂà´ÊòØ‰ªÄ‰πàÔºåobserver‰∏≠ÈúÄË¶ÅÂÆûÁé∞Âì™‰∏™ÊñπÊ≥ïÊâçËÉΩËé∑ÂæóKVOÂõûË∞ÉÔºü12345678// Ê∑ªÂä†ÈîÆÂÄºËßÇÂØü/*1 ËßÇÂØüËÄÖÔºåË¥üË¥£Â§ÑÁêÜÁõëÂê¨‰∫ã‰ª∂ÁöÑÂØπË±°2 ËßÇÂØüÁöÑÂ±ûÊÄß3 ËßÇÂØüÁöÑÈÄâÈ°π4 ‰∏ä‰∏ãÊñá*/[self.person addObserver:self forKeyPath:@&quot;name&quot; options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:@&quot;Person Name&quot;]; observer‰∏≠ÈúÄË¶ÅÂÆûÁé∞‰∏Ä‰∏ãÊñπÊ≥ïÔºö 12345678// ÊâÄÊúâÁöÑ kvo ÁõëÂê¨Âà∞‰∫ã‰ª∂ÔºåÈÉΩ‰ºöË∞ÉÁî®Ê≠§ÊñπÊ≥ï/* 1. ËßÇÂØüÁöÑÂ±ûÊÄß 2. ËßÇÂØüÁöÑÂØπË±° 3. change Â±ûÊÄßÂèòÂåñÂ≠óÂÖ∏ÔºàÊñ∞ÔºèÊóßÔºâ 4. ‰∏ä‰∏ãÊñáÔºå‰∏éÁõëÂê¨ÁöÑÊó∂ÂÄô‰º†ÈÄíÁöÑ‰∏ÄËá¥ */- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context; 46. Â¶Ç‰ΩïÊâãÂä®Ëß¶Âèë‰∏Ä‰∏™valueÁöÑKVOÊâÄË∞ìÁöÑ‚ÄúÊâãÂä®Ëß¶Âèë‚ÄùÊòØÂå∫Âà´‰∫é‚ÄúËá™Âä®Ëß¶Âèë‚ÄùÔºö Ëá™Âä®Ëß¶ÂèëÊòØÊåáÁ±ª‰ººËøôÁßçÂú∫ÊôØÔºöÂú®Ê≥®ÂÜå KVO ‰πãÂâçËÆæÁΩÆ‰∏Ä‰∏™ÂàùÂßãÂÄºÔºåÊ≥®ÂÜå‰πãÂêéÔºåËÆæÁΩÆ‰∏Ä‰∏™‰∏ç‰∏ÄÊ†∑ÁöÑÂÄºÔºåÂ∞±ÂèØ‰ª•Ëß¶Âèë‰∫Ü„ÄÇ ÊÉ≥Áü•ÈÅìÂ¶Ç‰ΩïÊâãÂä®Ëß¶ÂèëÔºåÂøÖÈ°ªÁü•ÈÅìËá™Âä®Ëß¶Âèë KVO ÁöÑÂéüÁêÜÔºö ÈîÆÂÄºËßÇÂØüÈÄöÁü•‰æùËµñ‰∫é NSObject ÁöÑ‰∏§‰∏™ÊñπÊ≥ï: willChangeValueForKey: Âíå didChangevlueForKey: „ÄÇÂú®‰∏Ä‰∏™Ë¢´ËßÇÂØüÂ±ûÊÄßÂèëÁîüÊîπÂèò‰πãÂâçÔºå willChangeValueForKey: ‰∏ÄÂÆö‰ºöË¢´Ë∞ÉÁî®ÔºåËøôÂ∞±‰ºöËÆ∞ÂΩïÊóßÁöÑÂÄº„ÄÇËÄåÂΩìÊîπÂèòÂèëÁîüÂêéÔºå observeValueForKey:ofObject:change:context: ‰ºöË¢´Ë∞ÉÁî®ÔºåÁªßËÄå didChangeValueForKey: ‰πü‰ºöË¢´Ë∞ÉÁî®„ÄÇÂ¶ÇÊûúÂèØ‰ª•ÊâãÂä®ÂÆûÁé∞Ëøô‰∫õË∞ÉÁî®ÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞‚ÄúÊâãÂä®Ëß¶Âèë‚Äù‰∫Ü„ÄÇ ÈÇ£‰πà‚ÄúÊâãÂä®Ëß¶Âèë‚ÄùÁöÑ‰ΩøÁî®Âú∫ÊôØÊòØ‰ªÄ‰πàÔºü‰∏ÄËà¨Êàë‰ª¨Âè™Âú®Â∏åÊúõËÉΩÊéßÂà∂‚ÄúÂõûË∞ÉÁöÑË∞ÉÁî®Êó∂Êú∫‚ÄùÊó∂Êâç‰ºöËøô‰πàÂÅö„ÄÇ ÂÖ∑‰ΩìÂÅöÊ≥ïÂ¶Ç‰∏ãÔºö Â¶ÇÊûúËøô‰∏™ value ÊòØ Ë°®Á§∫Êó∂Èó¥ÁöÑ self.now ÔºåÈÇ£‰πà‰ª£Á†ÅÂ¶Ç‰∏ãÔºöÊúÄÂêé‰∏§Ë°å‰ª£Á†ÅÁº∫‰∏Ä‰∏çÂèØ„ÄÇ Áõ∏ÂÖ≥‰ª£Á†ÅÂ∑≤ÊîæÂú®‰ªìÂ∫ìÈáå„ÄÇ 12345678910111213141516// .mÊñá‰ª∂// Created by https://github.com/ChenYilong// ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢Å(https://weibo.com/luohanchenyilong/).// ÊâãÂä®Ëß¶Âèë value ÁöÑKVOÔºåÊúÄÂêé‰∏§Ë°å‰ª£Á†ÅÁº∫‰∏Ä‰∏çÂèØ„ÄÇ//@property (nonatomic, strong) NSDate *now;- (void)viewDidLoad { [super viewDidLoad]; _now = [NSDate date]; [self addObserver:self forKeyPath:@&quot;now&quot; options:NSKeyValueObservingOptionNew context:nil]; NSLog(@&quot;1&quot;); [self willChangeValueForKey:@&quot;now&quot;]; // ‚ÄúÊâãÂä®Ëß¶Âèëself.nowÁöÑKVO‚ÄùÔºåÂøÖÂÜô„ÄÇ NSLog(@&quot;2&quot;); [self didChangeValueForKey:@&quot;now&quot;]; // ‚ÄúÊâãÂä®Ëß¶Âèëself.nowÁöÑKVO‚ÄùÔºåÂøÖÂÜô„ÄÇ NSLog(@&quot;4&quot;);} ‰ΩÜÊòØÂπ≥Êó∂Êàë‰ª¨‰∏ÄËà¨‰∏ç‰ºöËøô‰πàÂπ≤ÔºåÊàë‰ª¨ÈÉΩÊòØÁ≠âÁ≥ªÁªüÂéª‚ÄúËá™Âä®Ëß¶Âèë‚Äù„ÄÇ‚ÄúËá™Âä®Ëß¶Âèë‚ÄùÁöÑÂÆûÁé∞ÂéüÁêÜÔºö ÊØîÂ¶ÇË∞ÉÁî® setNow: Êó∂ÔºåÁ≥ªÁªüËøò‰ºö‰ª•ÊüêÁßçÊñπÂºèÂú®‰∏≠Èó¥ÊèíÂÖ• wilChangeValueForKey: „ÄÅ didChangeValueForKey: Âíå observeValueForKeyPath:ofObject:change:context: ÁöÑË∞ÉÁî®„ÄÇ Â§ßÂÆ∂ÂèØËÉΩ‰ª•‰∏∫ËøôÊòØÂõ†‰∏∫ setNow: ÊòØÂêàÊàêÊñπÊ≥ïÔºåÊúâÊó∂ÂÄôÊàë‰ª¨‰πüËÉΩÁúãÂà∞Êúâ‰∫∫Ëøô‰πàÂÜô‰ª£Á†Å: 12345- (void)setNow:(NSDate *)aDate { [self willChangeValueForKey:@&quot;now&quot;]; // Ê≤°ÊúâÂøÖË¶Å _now = aDate; [self didChangeValueForKey:@&quot;now&quot;];// Ê≤°ÊúâÂøÖË¶Å} ËøôÂÆåÂÖ®Ê≤°ÊúâÂøÖË¶ÅÔºå‰∏çË¶ÅËøô‰πàÂÅöÔºåËøôÊ†∑ÁöÑËØùÔºåKVO‰ª£Á†Å‰ºöË¢´Ë∞ÉÁî®‰∏§Ê¨°„ÄÇKVOÂú®Ë∞ÉÁî®Â≠òÂèñÊñπÊ≥ï‰πãÂâçÊÄªÊòØË∞ÉÁî® willChangeValueForKey: Ôºå‰πãÂêéÊÄªÊòØË∞ÉÁî® didChangeValueForkey: „ÄÇÊÄé‰πàÂÅöÂà∞ÁöÑÂë¢?Á≠îÊ°àÊòØÈÄöËøá isa Ê∑∑ÂÜôÔºàisa-swizzlingÔºâ„ÄÇ‰∏ãÊñá„ÄäappleÁî®‰ªÄ‰πàÊñπÂºèÂÆûÁé∞ÂØπ‰∏Ä‰∏™ÂØπË±°ÁöÑKVOÔºü„Äã‰ºöÊúâËØ¶Ëø∞„ÄÇ ÂèÇËÄÉÈìæÊé•Ôºö Manual Change Notification‚ÄîApple ÂÆòÊñπÊñáÊ°£ 47. Ëã•‰∏Ä‰∏™Á±ªÊúâÂÆû‰æãÂèòÈáè NSString *_foo ÔºåË∞ÉÁî®setValue:forKey:Êó∂ÔºåÂèØ‰ª•‰ª•fooËøòÊòØ _foo ‰Ωú‰∏∫keyÔºüÈÉΩÂèØ‰ª•„ÄÇ 48. KVCÁöÑkeyPath‰∏≠ÁöÑÈõÜÂêàËøêÁÆóÁ¨¶Â¶Ç‰Ωï‰ΩøÁî®Ôºü ÂøÖÈ°ªÁî®Âú®ÈõÜÂêàÂØπË±°‰∏äÊàñÊôÆÈÄöÂØπË±°ÁöÑÈõÜÂêàÂ±ûÊÄß‰∏ä ÁÆÄÂçïÈõÜÂêàËøêÁÆóÁ¨¶Êúâ@avgÔºå @count Ôºå @max Ôºå @min Ôºå@sumÔºå Ê†ºÂºè @‚Äù@sum.age‚ÄùÊàñ @‚ÄùÈõÜÂêàÂ±ûÊÄß.@max.age‚Äú 49. KVCÂíåKVOÁöÑkeyPath‰∏ÄÂÆöÊòØÂ±ûÊÄß‰πàÔºüKVC ÊîØÊåÅÂÆû‰æãÂèòÈáèÔºåKVO Âè™ËÉΩÊâãÂä®ÊîØÊåÅÊâãÂä®ËÆæÂÆöÂÆû‰æãÂèòÈáèÁöÑKVOÂÆûÁé∞ÁõëÂê¨ 50. Â¶Ç‰ΩïÂÖ≥Èó≠ÈªòËÆ§ÁöÑKVOÁöÑÈªòËÆ§ÂÆûÁé∞ÔºåÂπ∂ËøõÂÖ•Ëá™ÂÆö‰πâÁöÑKVOÂÆûÁé∞ÔºüËØ∑ÂèÇËÄÉÔºö „ÄäÂ¶Ç‰ΩïËá™Â∑±Âä®ÊâãÂÆûÁé∞ KVO„Äã KVO for manually implemented properties 51. appleÁî®‰ªÄ‰πàÊñπÂºèÂÆûÁé∞ÂØπ‰∏Ä‰∏™ÂØπË±°ÁöÑKVOÔºüApple ÁöÑÊñáÊ°£ÂØπ KVO ÂÆûÁé∞ÁöÑÊèèËø∞Ôºö Automatic key-value observing is implemented using a technique called isa-swizzling‚Ä¶ When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class ‚Ä¶ ‰ªéApple ÁöÑÊñáÊ°£ÂèØ‰ª•ÁúãÂá∫ÔºöApple Âπ∂‰∏çÂ∏åÊúõËøáÂ§öÊö¥Èú≤ KVO ÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇ‰∏çËøáÔºåË¶ÅÊòØÂÄüÂä© runtime Êèê‰æõÁöÑÊñπÊ≥ïÂéªÊ∑±ÂÖ•ÊåñÊéòÔºåÊâÄÊúâË¢´Êé©ÁõñÁöÑÁªÜËäÇÈÉΩ‰ºöÂéüÂΩ¢ÊØïÈú≤Ôºö ÂΩì‰Ω†ËßÇÂØü‰∏Ä‰∏™ÂØπË±°Êó∂Ôºå‰∏Ä‰∏™Êñ∞ÁöÑÁ±ª‰ºöË¢´Âä®ÊÄÅÂàõÂª∫„ÄÇËøô‰∏™Á±ªÁªßÊâøËá™ËØ•ÂØπË±°ÁöÑÂéüÊú¨ÁöÑÁ±ªÔºåÂπ∂ÈáçÂÜô‰∫ÜË¢´ËßÇÂØüÂ±ûÊÄßÁöÑ setter ÊñπÊ≥ï„ÄÇÈáçÂÜôÁöÑ setter ÊñπÊ≥ï‰ºöË¥üË¥£Âú®Ë∞ÉÁî®Âéü setter ÊñπÊ≥ï‰πãÂâçÂíå‰πãÂêéÔºåÈÄöÁü•ÊâÄÊúâËßÇÂØüÂØπË±°ÔºöÂÄºÁöÑÊõ¥Êîπ„ÄÇÊúÄÂêéÈÄöËøá isa Ê∑∑ÂÜôÔºàisa-swizzlingÔºâ ÊääËøô‰∏™ÂØπË±°ÁöÑ isa ÊåáÈíà ( isa ÊåáÈíàÂëäËØâ Runtime Á≥ªÁªüËøô‰∏™ÂØπË±°ÁöÑÁ±ªÊòØ‰ªÄ‰πà ) ÊåáÂêëËøô‰∏™Êñ∞ÂàõÂª∫ÁöÑÂ≠êÁ±ªÔºåÂØπË±°Â∞±Á•ûÂ•áÁöÑÂèòÊàê‰∫ÜÊñ∞ÂàõÂª∫ÁöÑÂ≠êÁ±ªÁöÑÂÆû‰æã„ÄÇÊàëÁîª‰∫Ü‰∏ÄÂº†Á§∫ÊÑèÂõæÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö KVO Á°ÆÂÆûÊúâÁÇπÈªëÈ≠îÊ≥ïÔºö Apple ‰ΩøÁî®‰∫Ü isa Ê∑∑ÂÜôÔºàisa-swizzlingÔºâÊù•ÂÆûÁé∞ KVO „ÄÇ ‰∏ãÈù¢ÂÅö‰∏ãËØ¶ÁªÜËß£ÈáäÔºö ÈîÆÂÄºËßÇÂØüÈÄöÁü•‰æùËµñ‰∫é NSObject ÁöÑ‰∏§‰∏™ÊñπÊ≥ï: willChangeValueForKey: Âíå didChangevlueForKey: „ÄÇÂú®‰∏Ä‰∏™Ë¢´ËßÇÂØüÂ±ûÊÄßÂèëÁîüÊîπÂèò‰πãÂâçÔºå willChangeValueForKey: ‰∏ÄÂÆö‰ºöË¢´Ë∞ÉÁî®ÔºåËøôÂ∞±‰ºöËÆ∞ÂΩïÊóßÁöÑÂÄº„ÄÇËÄåÂΩìÊîπÂèòÂèëÁîüÂêéÔºå observeValueForKey:ofObject:change:context: ‰ºöË¢´Ë∞ÉÁî®ÔºåÁªßËÄå didChangeValueForKey: ‰πü‰ºöË¢´Ë∞ÉÁî®„ÄÇÂèØ‰ª•ÊâãÂä®ÂÆûÁé∞Ëøô‰∫õË∞ÉÁî®Ôºå‰ΩÜÂæàÂ∞ëÊúâ‰∫∫Ëøô‰πàÂÅö„ÄÇ‰∏ÄËà¨Êàë‰ª¨Âè™Âú®Â∏åÊúõËÉΩÊéßÂà∂ÂõûË∞ÉÁöÑË∞ÉÁî®Êó∂Êú∫Êó∂Êâç‰ºöËøô‰πàÂÅö„ÄÇÂ§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÔºåÊîπÂèòÈÄöÁü•‰ºöËá™Âä®Ë∞ÉÁî®„ÄÇ ÊØîÂ¶ÇË∞ÉÁî® setNow: Êó∂ÔºåÁ≥ªÁªüËøò‰ºö‰ª•ÊüêÁßçÊñπÂºèÂú®‰∏≠Èó¥ÊèíÂÖ• wilChangeValueForKey: „ÄÅ didChangeValueForKey: Âíå observeValueForKeyPath:ofObject:change:context: ÁöÑË∞ÉÁî®„ÄÇÂ§ßÂÆ∂ÂèØËÉΩ‰ª•‰∏∫ËøôÊòØÂõ†‰∏∫ setNow: ÊòØÂêàÊàêÊñπÊ≥ïÔºåÊúâÊó∂ÂÄôÊàë‰ª¨‰πüËÉΩÁúãÂà∞Êúâ‰∫∫Ëøô‰πàÂÜô‰ª£Á†Å: 12345- (void)setNow:(NSDate *)aDate { [self willChangeValueForKey:@&quot;now&quot;]; // Ê≤°ÊúâÂøÖË¶Å _now = aDate; [self didChangeValueForKey:@&quot;now&quot;];// Ê≤°ÊúâÂøÖË¶Å} ËøôÂÆåÂÖ®Ê≤°ÊúâÂøÖË¶ÅÔºå‰∏çË¶ÅËøô‰πàÂÅöÔºåËøôÊ†∑ÁöÑËØùÔºåKVO‰ª£Á†Å‰ºöË¢´Ë∞ÉÁî®‰∏§Ê¨°„ÄÇKVOÂú®Ë∞ÉÁî®Â≠òÂèñÊñπÊ≥ï‰πãÂâçÊÄªÊòØË∞ÉÁî® willChangeValueForKey: Ôºå‰πãÂêéÊÄªÊòØË∞ÉÁî® didChangeValueForkey: „ÄÇÊÄé‰πàÂÅöÂà∞ÁöÑÂë¢?Á≠îÊ°àÊòØÈÄöËøá isa Ê∑∑ÂÜôÔºàisa-swizzlingÔºâ„ÄÇÁ¨¨‰∏ÄÊ¨°ÂØπ‰∏Ä‰∏™ÂØπË±°Ë∞ÉÁî® addObserver:forKeyPath:options:context: Êó∂ÔºåÊ°ÜÊû∂‰ºöÂàõÂª∫Ëøô‰∏™Á±ªÁöÑÊñ∞ÁöÑ KVO Â≠êÁ±ªÔºåÂπ∂Â∞ÜË¢´ËßÇÂØüÂØπË±°ËΩ¨Êç¢‰∏∫Êñ∞Â≠êÁ±ªÁöÑÂØπË±°„ÄÇÂú®Ëøô‰∏™ KVO ÁâπÊÆäÂ≠êÁ±ª‰∏≠Ôºå Cocoa ÂàõÂª∫ËßÇÂØüÂ±ûÊÄßÁöÑ setter ÔºåÂ§ßËá¥Â∑•‰ΩúÂéüÁêÜÂ¶Ç‰∏ã: 12345- (void)setNow:(NSDate *)aDate { [self willChangeValueForKey:@&quot;now&quot;]; [super setValue:aDate forKey:@&quot;now&quot;]; [self didChangeValueForKey:@&quot;now&quot;];} ËøôÁßçÁªßÊâøÂíåÊñπÊ≥ïÊ≥®ÂÖ•ÊòØÂú®ËøêË°åÊó∂ËÄå‰∏çÊòØÁºñËØëÊó∂ÂÆûÁé∞ÁöÑ„ÄÇËøôÂ∞±ÊòØÊ≠£Á°ÆÂëΩÂêçÂ¶ÇÊ≠§ÈáçË¶ÅÁöÑÂéüÂõ†„ÄÇÂè™ÊúâÂú®‰ΩøÁî®KVCÂëΩÂêçÁ∫¶ÂÆöÊó∂ÔºåKVOÊâçËÉΩÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇ KVO Âú®ÂÆûÁé∞‰∏≠ÈÄöËøá isa Ê∑∑ÂÜôÔºàisa-swizzlingÔºâ ÊääËøô‰∏™ÂØπË±°ÁöÑ isa ÊåáÈíà ( isa ÊåáÈíàÂëäËØâ Runtime Á≥ªÁªüËøô‰∏™ÂØπË±°ÁöÑÁ±ªÊòØ‰ªÄ‰πà ) ÊåáÂêëËøô‰∏™Êñ∞ÂàõÂª∫ÁöÑÂ≠êÁ±ªÔºåÂØπË±°Â∞±Á•ûÂ•áÁöÑÂèòÊàê‰∫ÜÊñ∞ÂàõÂª∫ÁöÑÂ≠êÁ±ªÁöÑÂÆû‰æã„ÄÇËøôÂú®Apple ÁöÑÊñáÊ°£ÂèØ‰ª•ÂæóÂà∞Âç∞ËØÅÔºö Automatic key-value observing is implemented using a technique called isa-swizzling‚Ä¶ When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class ‚Ä¶ ÁÑ∂ËÄå KVO Âú®ÂÆûÁé∞‰∏≠‰ΩøÁî®‰∫Ü isa Ê∑∑ÂÜôÔºà isa-swizzlingÔºâ ÔºåËøô‰∏™ÁöÑÁ°Æ‰∏çÊòØÂæàÂÆπÊòìÂèëÁé∞ÔºöApple ËøòÈáçÂÜô„ÄÅË¶ÜÁõñ‰∫Ü -class ÊñπÊ≥ïÂπ∂ËøîÂõûÂéüÊù•ÁöÑÁ±ª„ÄÇ ‰ºÅÂõæÊ¨∫È™óÊàë‰ª¨ÔºöËøô‰∏™Á±ªÊ≤°ÊúâÂèòÔºåÂ∞±ÊòØÂéüÊú¨ÈÇ£‰∏™Á±ª„ÄÇ„ÄÇ„ÄÇ ‰ΩÜÊòØÔºåÂÅáËÆæ‚ÄúË¢´ÁõëÂê¨ÁöÑÂØπË±°‚ÄùÁöÑÁ±ªÂØπË±°ÊòØ MYClass ÔºåÊúâÊó∂ÂÄôÊàë‰ª¨ËÉΩÁúãÂà∞ÂØπ NSKVONotifying_MYClass ÁöÑÂºïÁî®ËÄå‰∏çÊòØÂØπ MYClass ÁöÑÂºïÁî®„ÄÇÂÄüÊ≠§Êàë‰ª¨Âæó‰ª•Áü•ÈÅì Apple ‰ΩøÁî®‰∫Ü isa Ê∑∑ÂÜôÔºàisa-swizzlingÔºâ„ÄÇÂÖ∑‰ΩìÊé¢Á©∂ËøáÁ®ãÂèØÂèÇËÄÉ ËøôÁØáÂçöÊñá „ÄÇ ÈÇ£‰πà wilChangeValueForKey: „ÄÅ didChangeValueForKey: Âíå observeValueForKeyPath:ofObject:change:context: Ëøô‰∏â‰∏™ÊñπÊ≥ïÁöÑÊâßË°åÈ°∫Â∫èÊòØÊÄéÊ†∑ÁöÑÂë¢Ôºü wilChangeValueForKey: „ÄÅ didChangeValueForKey: ÂæàÂ•ΩÁêÜËß£ÔºåobserveValueForKeyPath:ofObject:change:context: ÁöÑÊâßË°åÊó∂Êú∫ÊòØ‰ªÄ‰πàÊó∂ÂÄôÂë¢Ôºü ÂÖàÁúã‰∏Ä‰∏™‰æãÂ≠êÔºö ‰ª£Á†ÅÂ∑≤ÊîæÂú®‰ªìÂ∫ìÈáå„ÄÇ 12345678910111213- (void)viewDidLoad { [super viewDidLoad]; [self addObserver:self forKeyPath:@&quot;now&quot; options:NSKeyValueObservingOptionNew context:nil]; NSLog(@&quot;1&quot;); [self willChangeValueForKey:@&quot;now&quot;]; // ‚ÄúÊâãÂä®Ëß¶Âèëself.nowÁöÑKVO‚ÄùÔºåÂøÖÂÜô„ÄÇ NSLog(@&quot;2&quot;); [self didChangeValueForKey:@&quot;now&quot;]; // ‚ÄúÊâãÂä®Ëß¶Âèëself.nowÁöÑKVO‚ÄùÔºåÂøÖÂÜô„ÄÇ NSLog(@&quot;4&quot;);}- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context { NSLog(@&quot;3&quot;);} Â¶ÇÊûúÂçïÂçï‰ªé‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÁöÑÊâìÂç∞‰∏äÔºå È°∫Â∫è‰ºº‰πéÊòØ wilChangeValueForKey: „ÄÅ observeValueForKeyPath:ofObject:change:context: „ÄÅ didChangeValueForKey: „ÄÇ ÂÖ∂ÂÆû‰∏çÁÑ∂ÔºåËøôÈáåÊúâ‰∏Ä‰∏™ observeValueForKeyPath:ofObject:change:context: , Âíå didChangeValueForKey: Âà∞Â∫ïË∞ÅÂÖàË∞ÉÁî®ÁöÑÈóÆÈ¢òÔºöÂ¶ÇÊûú observeValueForKeyPath:ofObject:change:context: ÊòØÂú® didChangeValueForKey: ÂÜÖÈÉ®Ëß¶ÂèëÁöÑÊìç‰ΩúÂë¢Ôºü ÈÇ£‰πàÈ°∫Â∫èÂ∞±ÊòØÔºö wilChangeValueForKey: „ÄÅ didChangeValueForKey: Âíå observeValueForKeyPath:ofObject:change:context: ‰∏ç‰ø°‰Ω†Êää didChangeValueForKey: Ê≥®ËßÜÊéâÔºåÁúã‰∏ã observeValueForKeyPath:ofObject:change:context: ‰ºö‰∏ç‰ºöÊâßË°å„ÄÇ ‰∫ÜËß£Âà∞Ëøô‰∏ÄÁÇπÂæàÈáçË¶ÅÔºåÊ≠£Â¶Ç 46. Â¶Ç‰ΩïÊâãÂä®Ëß¶Âèë‰∏Ä‰∏™valueÁöÑKVO ÊâÄËØ¥ÁöÑÔºö ‚ÄúÊâãÂä®Ëß¶Âèë‚ÄùÁöÑ‰ΩøÁî®Âú∫ÊôØÊòØ‰ªÄ‰πàÔºü‰∏ÄËà¨Êàë‰ª¨Âè™Âú®Â∏åÊúõËÉΩÊéßÂà∂‚ÄúÂõûË∞ÉÁöÑË∞ÉÁî®Êó∂Êú∫‚ÄùÊó∂Êâç‰ºöËøô‰πàÂÅö„ÄÇ ËÄå‚ÄúÂõûË∞ÉÁöÑË∞ÉÁî®Êó∂Êú∫‚ÄùÂ∞±ÊòØÂú®‰Ω†Ë∞ÉÁî® didChangeValueForKey: ÊñπÊ≥ïÊó∂„ÄÇ 52. IBOutletËøûÂá∫Êù•ÁöÑËßÜÂõæÂ±ûÊÄß‰∏∫‰ªÄ‰πàÂèØ‰ª•Ë¢´ËÆæÁΩÆÊàêweak?ÂèÇËÄÉÈìæÊé•Ôºö Should IBOutlets be strong or weak under ARC? ÊñáÁ´†ÂëäËØâÊàë‰ª¨Ôºö Âõ†‰∏∫Êó¢ÁÑ∂ÊúâÂ§ñÈìæÈÇ£‰πàËßÜÂõæÂú®xibÊàñËÄÖstoryboard‰∏≠ËÇØÂÆöÂ≠òÂú®ÔºåËßÜÂõæÂ∑≤ÁªèÂØπÂÆÉÊúâ‰∏Ä‰∏™Âº∫ÂºïÁî®‰∫Ü„ÄÇ ‰∏çËøáËøô‰∏™ÂõûÁ≠îÊºè‰∫Ü‰∏™ÈáçË¶ÅÁü•ËØÜÔºå‰ΩøÁî®storyboardÔºàxib‰∏çË°åÔºâÂàõÂª∫ÁöÑvcÔºå‰ºöÊúâ‰∏Ä‰∏™Âè´_topLevelObjectsToKeepAliveFromStoryboardÁöÑÁßÅÊúâÊï∞ÁªÑÂº∫ÂºïÁî®ÊâÄÊúâtop levelÁöÑÂØπË±°ÔºåÊâÄ‰ª•ËøôÊó∂Âç≥‰æøoutletÂ£∞ÊòéÊàêweak‰πüÊ≤°ÂÖ≥Á≥ª 53. IB‰∏≠User Defined Runtime AttributesÂ¶Ç‰Ωï‰ΩøÁî®ÔºüÂÆÉËÉΩÂ§üÈÄöËøáKVCÁöÑÊñπÂºèÈÖçÁΩÆ‰∏Ä‰∫õ‰Ω†Âú®interface builder ‰∏≠‰∏çËÉΩÈÖçÁΩÆÁöÑÂ±ûÊÄß„ÄÇÂΩì‰Ω†Â∏åÊúõÂú®IB‰∏≠‰ΩúÂ∞ΩÂèØËÉΩÂ§öÂæó‰∫ãÊÉÖÔºåËøô‰∏™ÁâπÊÄßËÉΩÂ§üÂ∏ÆÂä©‰Ω†ÁºñÂÜôÊõ¥Âä†ËΩªÈáèÁ∫ßÁöÑviewcontroller 54. Â¶Ç‰ΩïË∞ÉËØïBAD_ACCESSÈîôËØØ ÈáçÂÜôobjectÁöÑrespondsToSelectorÊñπÊ≥ïÔºåÁé∞ÂÆûÂá∫Áé∞EXEC_BAD_ACCESSÂâçËÆøÈóÆÁöÑÊúÄÂêé‰∏Ä‰∏™object ÈÄöËøá Zombie ËÆæÁΩÆÂÖ®Â±ÄÊñ≠ÁÇπÂø´ÈÄüÂÆö‰ΩçÈóÆÈ¢ò‰ª£Á†ÅÊâÄÂú®Ë°å Xcode 7 Â∑≤ÁªèÈõÜÊàê‰∫ÜBAD_ACCESSÊçïËé∑ÂäüËÉΩÔºöAddress Sanitizer„ÄÇÁî®Ê≥ïÂ¶Ç‰∏ãÔºöÂú®ÈÖçÁΩÆ‰∏≠ÂãæÈÄâ‚úÖEnable Address Sanitizer 55. lldbÔºàgdbÔºâÂ∏∏Áî®ÁöÑË∞ÉËØïÂëΩ‰ª§Ôºü breakpoint ËÆæÁΩÆÊñ≠ÁÇπÂÆö‰ΩçÂà∞Êüê‰∏Ä‰∏™ÂáΩÊï∞ n Êñ≠ÁÇπÊåáÈíà‰∏ã‰∏ÄÊ≠• poÊâìÂç∞ÂØπË±° Êõ¥Â§ö lldbÔºàgdbÔºâ Ë∞ÉËØïÂëΩ‰ª§ÂèØÊü•Áúã The LLDB Debugger Ôºõ ËãπÊûúÂÆòÊñπÊñáÊ°£Ôºö iOS Debugging Magic „ÄÇ Posted by ÂæÆÂçö@iOSÁ®ãÂ∫èÁä≠Ë¢ÅÂéüÂàõÊñáÁ´†ÔºåÁâàÊùÉÂ£∞ÊòéÔºöËá™Áî±ËΩ¨ËΩΩ-ÈùûÂïÜÁî®-ÈùûË°çÁîü-‰øùÊåÅÁΩ≤Âêç | Creative Commons BY-NC-ND 3.0 ÂÖ∂‰ªñÈ¢òÁõÆ import‚Äù‚Äù, import&lt;&gt;, ÁöÑÂå∫Âà´1¬∑ #importÂíå#includeÁöÑÂå∫Âà´Ôºöimport‰∏ç‰ºöÂºïÂèë‰∫§ÂèâÁºñËØëÔºåinclude‰ºö #import&lt;&gt;Âíå#import‚Äú‚ÄùÁöÑÂå∫Âà´Ôºöimport&lt;&gt;ÂºïÁî®Á≥ªÁªüÊñá‰ª∂ÔºåÂØπ‰∫éÁ≥ªÁªüËá™Â∏¶Â§¥Êñá‰ª∂ÁöÑÈ•ÆÁî®import‚Äú‚ÄùÂºïÁî®Ëá™ÂÆö‰πâÊñá‰ª∂ÔºåÈ¶ñÂÖà‰ºöÂú®Áî®Êà∑ÁõÆÂΩï‰∏ãÊü•ÊâæËßÜÂõæÁõ∏ÂÖ≥1¬∑ Ê≤°ÊúânavigationControllerÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ªé‰∏Ä‰∏™viewControllerÂàáÊç¢Âà∞Âè¶‰∏Ä‰∏™viewControllerÁöÑÊñπÊ≥ïÊòØÔºö[self presentModalViewController:nextViewController animated:YES]pushViewControllerÈúÄË¶ÅÊúânavigationController2¬∑ UISplitViewControllerÊéßÂà∂Âô®ÂèØ‰ª•ÂëàÁé∞Â±èÂπïÂàÜÊ†èËßÜÂõæÁöÑÊïàÊûúÔºåMasterViewÂç†Êúâ320ÁÇπÁöÑÂõ∫ÂÆöÂ§ßÂ∞è„ÄÇÊ≠£Á°ÆÁ≠îÊ°à: BA ÊòØB Âê¶Ëß£ÈáäÔºöios8 sdk ‰∏≠ ÔºåUISplitViewController ÂèØ‰ª•Âú® iphone ‰∏≠ ‰ΩøÁî® ‰∫ÜÔºåmasterView ÁöÑ ÂÆΩÂ∫¶ ÊòØ Êï¥‰∏™ Â±èÂπïÁöÑ ÂÆΩÂ∫¶ÔºåÊâÄ‰ª• ‰∏çÊòØ Âõ∫ÂÆöÁöÑ Â§ßÂ∞è 3203¬∑ iOS‰∏≠ÂØºËà™ËÆæËÆ°Ê®°ÂºèÊúâÂá†ÁßçÔºüÊ≠£Á°ÆÁ≠îÊ°à: A B C ‰Ω†ÁöÑÁ≠îÊ°à: A B C D (ÈîôËØØ)A Âπ≥Èì∫ÂØºËà™B Ê†áÁ≠æÂØºËà™C Ê†ëÂΩ¢ÂØºËà™D Ê®°ÊÄÅËßÜÂõæÂØºËà™Ëß£ÈáäÔºöÊàë‰ª¨ÁªèÂ∏∏‰ºöÈÅáÂà∞Âú®Êüê‰∏™Ë∑ØÂæÑ‰∏≠ÊªëÂá∫‰∏Ä‰∏™ÂçïÂ±è„ÄÅËøõË°åÁºñËæë„ÄÅÊü•Áúã‰ø°ÊÅØ„ÄÅÊìç‰ΩúÁïåÈù¢ÁöÑ‰∏äÁöÑÂÜÖÂÆπÁöÑÊÉÖÂÜµÂèëÁîü„ÄÇËøôÊòØ‰∏ÄÁßçÂ∫îÁî®Ë°å‰∏∫ÁöÑÁâπÂÆöÂΩ¢ÊÄÅÔºå‰∏ÄËà¨Â∏¶ÊúâÊµÅÁ®ãÁöÑÁïåÈù¢ÂèòÊõ¥ÁöÑÊÉÖÂÜµÂèëÁîüÔºåÊØîÂ¶Ç‰∏ÄÂº†È°µÈù¢‰∏¥Êó∂Âèñ‰ª£‰∫ÜÊï¥‰∏™Â∫îÁî®Á®ãÂ∫èÁöÑÊòæÁ§∫Â±èÔºåÊàë‰ª¨Áß∞ËøôÁßçÂ§ÑÁêÜÊñπÂºè‰∏∫‚ÄúÊ®°ÊÄÅËßÜÂõæ‚Äù„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊ®°ÂºèËßÜÂõæ‰ªéÂ±èÂπïÂ∫ïÈÉ®ËæπÁºòÊªë‰∏äÊù•Âàá‰∏ÄÂçäË¶ÜÁõñ‰∫ÜÂΩìÂâçÊï¥‰∏™Â±èÂπï,Ê®°ÊÄÅËßÜÂõæÂÆåÊàêÂíåÁ®ãÂ∫è‰∏ªÂäüËÉΩÊúâÂÖ≥Á≥ªÁöÑÁã¨Á´ã‰ªªÂä°ÔºåÂ∞§ÂÖ∂ÈÄÇÂêà‰∫é‰∏ªÂäüËÉΩÁïåÈù¢‰∏≠Ê¨†Áº∫ÁöÑÂ§öÁ∫ßÂ≠ê‰ªªÂä°„ÄÇËøôÁßçÊìç‰Ωú‰ºöÊöÇÊó∂ÁªïÂºÄÂ∫îÁî®ÁöÑÊ≠£Â∏∏Êìç‰Ωú„ÄÇÊ®°ÊÄÅËßÜÂõæÂ∏∏Â∏∏Ë¢´Áî®Êù•ÁºñËæëÊàñÊ∑ªÂä†ÂÜÖÂÆπÔºåÂΩì‰Ω†ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊ®°ÊÄÅËßÜÂõæ‰∏ÄËà¨‰ªéÂ±èÂπïÂ∫ïÈÉ®ÊªëÂá∫ËÄåÂêéÈÅÆÁõñÂÖàÂâçÁöÑÈ°µÈù¢ÔºåÂΩì‰Ω†ÂÆåÊàê‰ªªÂä°ÂêéÊªëÂá∫ÁöÑÈ°µÈù¢‰πü‰ºöÁõ∏Â∫îÁöÑÁº©ÂõûÂéªÔºåÁÑ∂ÂêéÂèØ‰ª•ÁªßÁª≠‰πãÂâçÁöÑÊµÅÁ®ã„ÄÇÊúâ‰∫õÊéß‰ª∂ÂíåÁïåÈù¢ÂÖÉÁ¥†Âè™Âú®Ê¨°Ë¶Å‰ªªÂä°‰∏≠Ë¢´ÂÅ∂Â∞îÁî®Âà∞ÔºåÊ®°ÊÄÅËßÜÂõæÂæàÂ•ΩÁöÑÊää‰ªñ‰ª¨ÊöÇÊó∂ÈöêËóè‰∫ÜÔºåÂπ∂‰∏îÂΩìÈúÄË¶ÅÁöÑÊó∂ÂÄôÂá∫Áé∞ÔºåÊúâÊïàÁöÑËäÇÁ∫¶‰∫ÜÂ±èÂπïÁ©∫Èó¥„ÄÇÊ®°ÊÄÅËßÜÂõæÊúâÁÇπÂÉèÊòØÂØºËà™‰∏≠ÁöÑÊ≠ªËÉ°ÂêåÔºå‰∏∫‰∫ÜËÉΩÂ§üËÆ©Áî®Êà∑‰πüÂèØ‰ª•ÂêåÊ†∑Êñπ‰æøÁöÑÂõûÂà∞Ê≠£Â∏∏ÁöÑÊµÅÁ®ã‰∏≠ÂéªÔºåÊ®°ÊÄÅËßÜÂõæÈô§‰∫ÜÊ≠£Â∏∏ÁöÑÊìç‰Ωú‰πãÂ§ñ‰∏ÄËà¨ËøòÊúâÂä†‰∏ä‰∏Ä‰∏™‚ÄúÂÆåÊàê‚ÄùÊåâÈíÆÔºåÊàñËÄÖ‚ÄúÂèñÊ∂à‚ÄùÊåâÈíÆ„ÄÇ4¬∑ Ê®°ÊÄÅËßÜÂõæ‰∏ìÁî®Â±ûÊÄßÊúâÂì™‰∫õÔºüÊ≠£Á°ÆÁ≠îÊ°à: A B C DA UIModalPresentationFullScreenÔºåÂÖ®Â±èÁä∂ÊÄÅÔºåÊòØÈªòËÆ§ÂëàÁé∞Ê†∑ÂºèÔºåiPhoneÂè™ËÉΩÂÖ®Â±èÂëàÁé∞„ÄÇB UIModalPresentationPageSheetÔºåÂÆÉÁöÑÂÆΩÂ∫¶ÊòØÂõ∫ÂÆöÁöÑ768ÁÇπÔºåÂú®iPadÁ´ñÂ±èÊÉÖÂÜµ‰∏ãÂàôÂÖ®Â±èÂëàÁé∞„ÄÇC UIModalPresentationFormSheetÔºåÂÆÉÁöÑÊòØÂõ∫ÂÆöÁöÑ540x620ÁÇπÔºåÊó†ËÆ∫ÊòØÊ®™Â±èËøòÊòØÁ´ñÂ±èÊÉÖÂÜµ‰∏ãÂëàÁé∞Â∞∫ÂØ∏ÈÉΩ‰∏ç‰ºöÂèòÂåñ„ÄÇD UIModalPresentationCurrentContextÔºåÂÆÉ‰∏éÁà∂ËßÜÂõæÊéßÂà∂Âô®ÊúâÁõ∏ÂêåÁöÑÂëàÁé∞ÊñπÂºè„ÄÇËß£ÈáäÔºö‰ΩúÁî®Ôºö‰∏¥Êó∂‰∏≠Êñ≠ÂΩìÂâçÂ∑•‰ΩúÊµÅÁ®ãÔºåÊòæÁ§∫‰∏Ä‰∏™Êñ∞ÁöÑËßÜÂõæÂ±ÇÊ¨°ÁªìÊûÑ„ÄÇÁî®ÈÄîÔºöÁ´ãÂç≥‰ªéÁî®Êà∑ÈÇ£ÈáåÊî∂ÈõÜ‰ø°ÊÅØÔºõ‰∏¥Êó∂ÊòæÁ§∫‰∏Ä‰∫õÂÜÖÂÆπÔºõ‰∏¥Êó∂ÊîπÂèòÂ∑•‰ΩúÊ®°ÂºèÔºõ‰∏∫‰∏çÂêåÁöÑËÆæÂ§áÊñπÂêëÂÆûÁé∞ÂèØÊõø‰ª£ÁöÑÁïåÈù¢Ôºõ‰ΩøÁî®ÊåáÂÆöÁ±ªÂûãÁöÑËøáÊ∏°Âä®ÁîªÊù•ÊòæÁ§∫‰∏Ä‰∏™Êñ∞ÁöÑËßÜÂõæÁªìÊûÑÔºõÊ®°ÊÄÅËßÜÂõæÁöÑÊòæÁ§∫È£éÊ†ºÔºöÈÄöËøáËÆæÁΩÆÂ±ûÊÄßmodalpresentationStyleUIModalPresentationFullScreen;UIModalPresentationPageSheet;UIModalPresentationFormSheet;Ê®°ÊÄÅËßÜÂõæÁöÑËøáÊ∏°È£éÊ†ºÔºöÈÄöËøáËÆæÁΩÆÂ±ûÊÄßmodalTransitionStyleUIModalTransitionStyleCoverVertical;UIModalTransitionStyleFlipHorizontal;UIModalTransitionStyleCrossDissolve;Ê≠•È™§ÔºöÂàõÂª∫‰∏Ä‰∏™Ë¶ÅÂ±ïÁ§∫ÁöÑËßÜÂõæÊéß‰ª∂ÔºõÂú®ÈÄÇÂΩìÁöÑÂú∞ÊñπÂàÜÈÖç‰∏Ä‰∏™ÂßîÊâòÂØπË±°ÔºõË∞ÉÁî®ÂΩìÂâçËßÜÂõæÊéßÂà∂ÂâçÁöÑpresentModalViewController:animated:ÊñπÊ≥ïÔºå‰º†ÈÄí‰Ω†Ë¶ÅÊ®°ÊÄÅÊòæÁ§∫ÁöÑËßÜÂõæÊéßÂà∂Âô®ÔºõÂ§öÁ∫øÁ®ãÁõ∏ÂÖ≥1¬∑ ÂÆûÁé∞Â§öÁ∫øÁ®ãÈÉΩÊúâÂì™Âá†ÁßçÊñπÊ≥ïÔºüÊ≠£Á°ÆÁ≠îÊ°à: B CA ‰ΩøÁî®@synchronized(self)B ‰ΩøÁî®GCDC ‰ΩøÁî®NSOperationQueueD ‰ΩøÁî®@threadËß£ÈáäÔºö@thredÊòØÂÆâÂçìÁöÑÂÖ≥ÈîÆÂ≠ó2¬∑ ÂÖ≥‰∫éNSOperation queueÁöÑËØ¥Ê≥ïÔºåÊ≠£Á°ÆÁöÑÊòØÔºüÊ≠£Á°ÆÁ≠îÊ°à: A C DA ‰∏ªË¶ÅÁî®‰∫éÂ§öÁ∫øÁ®ãÂπ∂ÂèëÂ§ÑÁêÜB ÂÆÉÊòØ‰∏Ä‰∏™ÈòüÂàóÔºåÊúâ‰∏•Ê†ºÁöÑÂÖàËøõÂÖàÂá∫C ÂÆÉ‰∏ç‰ºöÈÅµÂÆà‰∏•Ê†ºÁöÑÂÖàËøõÂÖàÂá∫D NSOperationQueueÂèØ‰ª•ÈÄöËøáË∞ÉÊï¥ÊùÉÈáçÊù•Ë∞ÉÊï¥ÈòüÂàóÁöÑÊâßË°åÈ°∫Â∫èËß£ÈáäÔºöÈ¶ñÂÖàNSOperationQueueÊòØÂ±û‰∫éÂ§öÁ∫øÁ®ãÂπ∂ÂèëÂ§ÑÁêÜËøô‰∏ÄÈÉ®ÂàÜÔºåÂÆÉ‰∏ªË¶ÅÁî®Êù•Êèê‰æõ‰∏Ä‰∏™ÂèØÊ∑ªÂä†ÁöÑÊìç‰ΩúÈòüÂàóÔºåÂ∞Ü‰∏ÄÁ≥ªÂàóÊìç‰ΩúÊ∑ªÂä†Âà∞ÈòüÂàó‰∏≠ÔºåÁÑ∂ÂêéÊ†πÊçÆÊìç‰ΩúÁöÑ‰ºòÂÖàÁ∫ßÂíåÂÜÖÈÉ®Êìç‰Ωú‰æùËµñÊù•ÂÜ≥ÂÆöÊìç‰ΩúÊâßË°åÁöÑÈ°∫Â∫è„ÄÇÈ´ò‰ºòÂÖàÁ∫ßÁöÑÊìç‰ΩúÂÖà‰∫é‰Ωé‰ºòÂÖàÁ∫ßÊâßË°å„ÄÇ‰∏Ä‰∏™Êìç‰ΩúÊâÄ‰æùËµñÁöÑÊìç‰ΩúÂÖ®ÈÉ®ÊâßË°åÂÆåÊØïÂêéÊâçËÉΩÊâßË°å„ÄÇÊâÄ‰ª•A,C,DÊ≠£Á°ÆÂÜÖÂ≠òÁõ∏ÂÖ≥1¬∑ ‰∏éallocÁõ∏ÂèçÔºå‰∏éretainÁõ∏ÂèçÔºå‰∏éallocÈÖçÂØπÁöÑÂàÜÂà´ÊòØ:dealloc, release, releaseÊ≠£Á°ÆÁ≠îÊ°à: BA dealloc release deallocB dealloc release releaseC dealloc dealloc deallocD release release releaseËß£Èáä:allocÂÖ∂ÂÆûÁõ∏ÂΩì‰∫éc++‰∏≠ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºådeallocÁõ∏ÂΩì‰∫éÊûêÊûÑÂáΩÊï∞ÔºõretainÁõ∏ÂèçÁöÑÊòØreleaseÔºåËøô‰∏™Â∫îËØ•Ê≤°ÂºÇËÆÆÔºåallocÈÖçÂØπ‰ΩøÁî®ÁöÑ‰πüÊòØreleaseÔºåalloc‰ºö‰ΩøÂØπË±°ÁöÑretainCount=1ÔºåÊâÄ‰ª•ÈÖçÂØπÁöÑÊòØrelease„ÄÇ2¬∑ ‰∏ãÂàóÁ®ãÂ∫èËæìÂá∫ÊòØÔºö 1234567891011NSMutableArray* ary = [[NSMutableArray array] retain];NSString *str = [NSString stringWithFormat:@&quot;test&quot;];[str retain];[ary addObject:str];NSLog(@&quot;%@%d&quot;,str,[str retainCount]);[str retain];[str release];[str release];NSLog(@&quot;%@%d&quot;,str,[str retainCount]);[ary removeAllObjects];NSLog(@&quot;%@%d&quot;,str,[str retainCount]); Á≠îÊ°àÔºö -1, -1, -1Ëß£ÈáäÔºöNSString *str = [NSString stringWithFormat:@‚Äùtest‚Äù];ÂΩì‰∏≠stringWithFormatÊòØÁ±ªÊñπÊ≥ïÔºåÂÜÖÂ≠òÁÆ°ÁêÜ‰∏äÊòØautoreleaseÁöÑÔºåÂõ†Ê≠§ÂÜÖÂ≠òÁÆ°ÁêÜÊòØ-13¬∑ ‰∏ãÈù¢ÂÖ≥‰∫é Objective-C ÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÊèèËø∞ÈîôËØØÁöÑÊòØÊ≠£Á°ÆÁ≠îÊ°à: A C ‰Ω†ÁöÑÁ≠îÊ°à: A B C (ÈîôËØØ)A ÂΩì‰ΩøÁî®ARCÊù•ÁÆ°ÁêÜÂÜÖÂ≠òÊó∂Ôºå‰ª£Á†Å‰∏≠ÂèØ‰ª•Âá∫Áé∞autoreleaseB autoreleasepollÂú®drainÁöÑÊó∂ÂÄô‰ºöÈáäÊîæÂú®ÂÖ∂‰∏≠ÂàÜÈÖçÁöÑÂØπË±°C ÂΩì‰ΩøÁî®ARCÊù•ÁÆ°ÁêÜÂÜÖÂ≠òÊó∂ÔºåÂú®Á∫øÁ®ã‰∏≠Â§ßÈáèÂàÜÈÖçÂØπË±°ËÄå‰∏çÁî®autoreleasepoolÂàôÂèØËÉΩ‰ºöÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÈú≤4¬∑ ÂÖ≥‰∫éÂÜÖÂ≠òÁÆ°ÁêÜÔºå‰∏ãÂàóËØ¥Ê≥ïÈîôËØØÁöÑÊòØÊ≠£Á°ÆÁ≠îÊ°à: CA Ë∞ÅÁî≥ËØ∑ÔºåË∞ÅÈáäÊîæB ÂÜÖÂ≠òÁÆ°ÁêÜ‰∏ªË¶ÅË¶ÅÈÅøÂÖç‚ÄúËøáÊó©ÈáäÊîæ‚ÄùÂíå‚ÄúÂÜÖÂ≠òÊ≥ÑÊºè‚ÄùÔºåÂØπ‰∫é‚ÄúËøáÊó©ÈáäÊîæ‚ÄùÈúÄË¶ÅÊ≥®ÊÑè@propertyËÆæÁΩÆÁâπÊÄßÊó∂Ôºå‰∏ÄÂÆöË¶ÅÁî®ÂØπÁâπÊÄßÂÖ≥ÈîÆÂ≠óÔºåÂØπ‰∫é‚ÄúÂÜÖÂ≠òÊ≥ÑÊºè‚ÄùÔºå‰∏ÄÂÆöË¶ÅÁî≥ËØ∑‰∫ÜË¶ÅË¥üË¥£ÈáäÊîæ„ÄÇC ÂÖ≥ÈîÆÂ≠óalloc Êàñnew ÁîüÊàêÁöÑÂØπË±°ÂèØ‰ª•Ëá™Âä®ÈáäÊîæÔºõD ËÆæÁΩÆÊ≠£Á°ÆÁöÑpropertyÂ±ûÊÄßÔºåÂØπ‰∫éretainÈúÄË¶ÅÂú®ÂêàÈÄÇÁöÑÂú∞ÊñπÈáäÊîæÔºåËß£Èáä:allocÊàñnewÁîüÊàêÁöÑÂØπË±°‰∏ç‰ºöËá™Âä®ÈáäÊîæÔºåË¶ÅËá™Âä®ÈáäÊîæÈúÄË¶ÅË∞ÉÁî®autoreleaseÊñπÊ≥ï„ÄÇË∞ÅÁî≥ËØ∑ÔºåË∞ÅÈáäÊîæ„ÄÇ‰πü‰∏çÊòØÂæàÂØπÔºåÂú®non-ARC‰∏≠ÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÂáΩÊï∞Ë¶ÅËøîÂõû‰∏Ä‰∏™Âú®Â†Ü‰∏äallocÁöÑÂØπË±°ÔºåÂú®ËøîÂõûÁöÑÊó∂ÂÄôÈúÄË¶ÅË∞ÉÁî®autoreleaseÊñπÊ≥ï„ÄÇÂÆûÈôÖ‰∏äÊòØ‰Ω†Áî≥ËØ∑‰∫ÜÔºå‰ΩÜÈáäÊîæ‰∫§Áªô‰∫ÜNSAutoReleasePool„ÄÇRunLoopÁõ∏ÂÖ≥1¬∑ ÈÄâCNSRunLoopÁöÑ‰ª•‰∏ãÊèèËø∞ÈîôËØØÁöÑÊòØÔºàÔºâ 1/1A RunloopÂπ∂‰∏çÊòØÁî±Á≥ªÁªüËá™Âä®ÊéßÂà∂ÁöÑB Êúâ3Á±ªÂØπË±°ÂèØ‰ª•Ë¢´run loopÁõëÊéßÔºösourcesÔºåtimersÔºåobserversC Á∫øÁ®ãÊòØÈªòËÆ§ÂêØÂä®run loopÁöÑD NSTimerÂèØÊâãÂä®Ê∑ªÂä†Âà∞Êñ∞Âª∫ÁöÑNSRunLoop‰∏≠Ëß£ÈáäÔºöA:RunloopÁöÑ‰ΩúÁî®Âú®‰∫éÂΩìÊúâ‰∫ãÊÉÖË¶ÅÂÅöÊó∂ÂÆÉ‰ΩøÂΩìÂâçÁöÑthreadÂ∑•‰ΩúÔºåÊ≤°Êúâ‰∫ãÊÉÖÂÅöÊó∂Âèà‰Ωøthread ‰ºëÁú†sleep„ÄÇRunloopÂπ∂‰∏çÊòØÁî±Á≥ªÁªüËá™Âä®ÊéßÂà∂ÁöÑÔºåÂ∞§ÂÖ∂ÊòØÂØπÈÇ£‰∫õÊñ∞Âª∫ÁöÑÊ¨°Á∫øÁ®ãÈúÄË¶ÅÂØπÂÖ∂ËøõË°åÊòæÁ§∫ÁöÑÊéßÂà∂„ÄÇBÔºöÊúâ3Á±ªÂØπË±°ÂèØ‰ª•Ë¢´run loopÁõëÊéßÔºösources„ÄÅtimers„ÄÅobservers„ÄÇÂΩìËøô‰∫õÂØπË±°ÈúÄË¶ÅÂ§ÑÁêÜÁöÑÊó∂ÂÄôÔºå‰∏∫‰∫ÜÊé•Êî∂ÂõûË∞ÉÔºåÈ¶ñÂÖàÂøÖÈ°ªÈÄöËøá CFRunLoopAddSource ,CFRunLoopAddTimer ÊàñËÄÖ CFRunLoopAddObserver ÊääËøô‰∫õÂØπË±°ÊîæÂÖ•run loop„ÄÇ Ë¶ÅÂÅúÊ≠¢Êé•Êî∂ÂÆÉÁöÑÂõûË∞ÉÔºåÂèØ‰ª•ÈÄöËøáCFRunLoopRemoveSource‰ªérun loop‰∏≠ÁßªÈô§Êüê‰∏™ÂØπË±°„ÄÇCÔºöÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑrunloop, ‰∏ªÁ∫øÁ®ãÊòØÈªòËÆ§ÂºÄÂêØÁöÑÔºåÂàõÂª∫ÁöÑÂ≠êÁ∫øÁ®ãË¶ÅÊâãÂä®ÂºÄÂêØÔºåÂõ†‰∏∫NSApplication Âè™ÂêØÂä®main applicaiton thread„ÄÇDÔºöNSTimerÈªòËÆ§Ê∑ªÂä†Âà∞ÂΩìÂâçNSRunLoop‰∏≠Ôºå‰πüÂèØ‰ª•ÊâãÂä®Âà∂ÂÆöÊ∑ªÂä†Âà∞Ëá™Â∑±Êñ∞Âª∫ÁöÑNSRunLoopÁöÑ‰∏≠„ÄÇ2¬∑ ÂØπ‰∏ãËø∞‰ª£Á†ÅÈîôËØØÊèèËø∞Ê≠£Á°ÆÁöÑÊòØ( )NSTimer *myTimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(doSomeThing:) userInfo:nil repeats:YES];[myTimer fire]Ê≠£Á°ÆÁ≠îÊ°à: AA Ê≤°ÊúâÂ∞ÜtimerÂä†ÂÖ•runloopB doSomeThingÁº∫Â∞ëÂèÇÊï∞C ÂøòËÆ∞‰º†ÈÄíÊï∞ÊçÆÁªôuserInfoD myTimerÂØπË±°Êú™ÈÄöËøá[[myTimer alloc] init]ÊñπÊ≥ïÂàùÂßãÂåñËß£ÈáäÔºöNSTimerÊúâ‰∏§ÁßçÂàùÂßãÂåñÊñπÊ≥ïÔºöÂàùÂßãÂåñÊñπÊ≥ï‰∏ÄÔºö scheduledTimerWithTimeInterval:target:selector:userInfo:repeats: ÊñπÊ≥ï+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)seconds target:(id)target selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)repeats seconds ÔºöÈúÄË¶ÅË∞ÉÁî®ÁöÑÊØ´ÁßíÊï∞target ÔºöË∞ÉÁî®ÊñπÊ≥ïÈúÄË¶ÅÂèëÈÄÅÁöÑÂØπË±°„ÄÇÂç≥ÔºöÂèëÁªôË∞ÅuserInfo ÔºöÂèëÈÄÅÁöÑÂèÇÊï∞repeats ÔºöÊåáÂÆöÂÆöÊó∂Âô®ÊòØÂê¶ÈáçÂ§çË∞ÉÁî®ÁõÆÊ†áÊñπÊ≥ï Áé∞Âú®ÂÅö‰∏™ÊØîÂñªÔºöÂèØ‰ª•ÊääË∞ÉÂ∫¶‰∏Ä‰∏™ËÆ°Êó∂Âô®‰∏éÂêØÂä®Ê±ΩËΩ¶ÁöÑÂºïÊìéÁõ∏ÊØîËæÉ„ÄÇË¢´Ë∞ÉÂ∫¶ÁöÑËÆ°Êó∂Âô®Â∞±ÊòØËøêË°å‰∏≠ÁöÑÂºïÊìé„ÄÇÊ≤°ÊúâË¢´Ë∞ÉÂ∫¶ÁöÑËÆ°Êó∂Âô®Â∞±ÊòØ‰∏Ä‰∏™Â∑≤ÁªèÂáÜÂ§áÂ•ΩÂêØÂä®‰ΩÜÊòØËøòÊ≤°ÊúâËøêË°åÁöÑÂºïÊìé„ÄÇÊàë‰ª¨Âú®Á®ãÂ∫èÈáåÈù¢ , Êó†ËÆ∫‰ΩïÊó∂ , ÈÉΩÂèØ‰ª•Ë∞ÉÂ∫¶ÂíåÂèñÊ∂àË∞ÉÂ∫¶ËÆ°Êó∂Âô® , Â∞±ÂÉèÊ†πÊçÆÊàë‰ª¨ÊâÄÂ§ÑÁöÑÁéØÂ¢É , ÂÜ≥ÂÆöÊ±ΩËΩ¶ÁöÑÂºïÊìéÊòØÂêØÂä®ËøòÊòØÂÅúÊ≠¢„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Ë¶ÅÂú®Á®ãÂ∫è‰∏≠ , ÊâãÂä®ÁöÑÂú®Êüê‰∏Ä‰∏™Á°ÆÂÆöÊó∂Èó¥ÁÇπË∞ÉÂ∫¶ËÆ°Êó∂Âô® , ÂèØ‰ª•‰ΩøÁî® NSTimer ÁöÑÁ±ªÊñπÊ≥ï timerWithTimeInterval:target:selector:userInfo:repeats: ÊñπÊ≥ï„ÄÇÂàùÂßãÂåñÊñπÊ≥ï‰∫åÔºöÂ¶ÇÊûúÔºåÊàë‰ª¨ÊÉ≥Âú®‰ªª‰ΩïÊó∂ÂÄôÈÉΩËÉΩÂ§üÈöèÂøÉÊâÄÊ¨≤ÁöÑ ÂêØÂä® / ÂÅúÊ≠¢ÂÆöÊó∂Âô®„ÄÇÂíãÂäûÔºü‰∏çÁî®ÊÄ•ÔºåËøòÊúâ NSTimer ÁöÑÂè¶‰∏ÄÁßçÂàùÂßãÂåñÊñπÊ≥ïÔºåËÉΩÂ§üÊª°Ë∂≥Êàë‰ª¨ÁöÑË¶ÅÊ±ÇÔºö 12345678910// ‰ΩøÁî® timerWithTimeInterval ÊñπÊ≥ïÊù•ÂÆû‰æãÂåñ‰∏Ä‰∏™ NSTimer, ËøôÊó∂ÂÄô NSTimer ÊòØ‰∏ç‰ºöÂêØÂä®ÁöÑself.paintingTimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(paint:) userInfo:nil repeats:YES]; // ÂΩìÈúÄË¶ÅË∞ÉÁî®Êó∂ , ÂèØ‰ª•ÊääËÆ°Êó∂Âô®Ê∑ªÂä†Âà∞‰∫ã‰ª∂Â§ÑÁêÜÂæ™ÁéØ‰∏≠ [[NSRunLoop currentRunLoop] addTimer:self.paintingTimer forMode:NSDefaultRunLoopMode]; ÊÄªÁªìÔºö scheduledÂºÄÂ§¥ÁöÑÊñπÊ≥ïÂàùÂßãÂåñÁöÑÔºå‰ºöÂ∞ÜËøô‰∏™timerË∞ÉÂ∫¶Âà∞ÂΩìÂâçËøêË°åÁöÑloop‰∏≠; timerÂíåinitÂºÄÂ§¥ÁöÑÂàùÂßãÂåñÊñπÊ≥ïÔºåÂè™ÊòØÂàõÂª∫ÔºåÂπ∂Ê≤°ÊúâË∞ÉÂ∫¶Âà∞loop‰∏≠ÔºåÈúÄË¶ÅÊâãÂä®addTimer„ÄÇ3¬∑NSString *str = @‚Äúlanou‚Äù;[str retain];NSLog(@‚Äú%lu‚Äù,str.retainCount);Ê≠§Â§ÑÊâìÂç∞Âá∫Êù•ÁöÑÂÄºÊòØÂ§öÂ∞ë().Ê≠£Á°ÆÁ≠îÊ°à: DA 1B 2C -1D ULONG_MAXËß£ÈáäÔºöËøôÊòØ‰∏Ä‰∏™ÊîæÂú®Â∏∏ÈáèÂå∫ÁöÑÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÔºåËøîÂõûÁöÑÁªìÊûúÊòØUINT_MAXÂÄº Êúâ‰∫õÂú∞ÊñπÁöÑÂõûÁ≠îTableViewÁõ∏ÂÖ≥1¬∑ ‰ª•‰∏ãÂÖ≥‰∫étableViewÁºñËæëÁöÑÊñπÊ≥ï‰∏≠Âì™‰∏™‰∏çÂ±û‰∫é‰ª£ÁêÜÊñπÊ≥ïÔºüAA -(void)setEditing:(BOOL)editing animated:(BOOL)animatedB -(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPathC -(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPathD -(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPathËß£ÈáäÔºö AÊòØtableViewËá™Â∑±ÁöÑÊñπÊ≥ïÔºå‰∏çÊòØ‰ª£ÁêÜ2¬∑ ‰∏ãÈù¢Âì™‰∫õÂ±û‰∫éUITableViewDelegateÂçèËÆÆÁöÑÊñπÊ≥ïÔºüÊ≠£Á°ÆÁ≠îÊ°à: CA tableView:cellForRowAtIndexPath:B tableView:numberOfRowsInSection:C tableView:didSelectRowAtIndexPath:D numberOfSectionsInTableView:Ëß£ÈáäÔºö‰ª£ÁêÜÁöÑ‰ΩúÁî®ÊòØÁî®Êù•ÂÆåÊàêÊåáÂÆöÁöÑÊüêÁßçÂä®‰ΩúÔºåÊâÄ‰ª•ÂøÖÈ°ªÊòØÂä®‰ΩúÊÄßÁöÑÊìç‰ΩúËÄå‰∏çÊòØÊï∞ÊçÆÊÄßÁöÑÊìç‰ΩúpropertyÁõ∏ÂÖ≥1¬∑ ÂÖ≥‰∫éreadwrite, readonly, assign, automaticÁöÑËØ¥Ê≥ïÔºå‰∏ãÂàóËØ¥Ê≥ïÈîôËØØÁöÑÊòØA readwrite ÊòØÂèØËØªÂèØÂÜôÁâπÊÄßÔºõÈúÄË¶ÅÁîüÊàêgetterÊñπÊ≥ïÂíåsetterÊñπÊ≥ïÊó∂B readonly ÊòØÂè™ËØªÁâπÊÄß Âè™‰ºöÁîüÊàêgetterÊñπÊ≥ï ‰∏ç‰ºöÁîüÊàêsetterÊñπÊ≥ï ;‰∏çÂ∏åÊúõÂ±ûÊÄßÂú®Á±ªÂ§ñÊîπÂèòC assign ÊòØËµãÂÄºÁâπÊÄßÔºåsetterÊñπÊ≥ïÂ∞Ü‰º†ÂÖ•ÂèÇÊï∞ËµãÂÄºÁªôÂÆû‰æãÂèòÈáèÔºõ‰ªÖËÆæÁΩÆÂèòÈáèÊó∂ÔºõD nonatomic ÈùûÂéüÂ≠êÊìç‰ΩúÔºåÂÜ≥ÂÆöÁºñËØëÂô®ÁîüÊàêÁöÑsetter getterÊòØÂê¶ÊòØÂéüÂ≠êÊìç‰ΩúÔºõnonatomicË°®Á§∫Â§öÁ∫øÁ®ãÂÆâÂÖ®Ôºõ‰∏ÄËà¨‰ΩøÁî®atomicËß£ÈáäÔºöDÈ°πËØ¥‰∏ÄËà¨‰ΩøÁî®atomicÊòØ‰∏çÂØπÁöÑÔºå‰∏ÄËà¨‰ΩøÁî®nonatomic„ÄÇreadonly, readwriteÔºöÊòØÊéßÂà∂Â±ûÊÄßÁöÑËÆøÈóÆÊùÉÈôêÔºåreadonlyÂè™ÁîüÊàêgetterÊñπÊ≥ïÔºåÂÖ∂‰ªñÁ±ªÊòØÊó†Ê≥ï‰øÆÊîπÂÖ∂ÂÄºÁöÑ„ÄÇreadwriteÊòØ‰ºöÂêåÊó∂ÁîüÊàêgetterÂíåsetterÊñπÊ≥ïÔºåÂÖ∂‰ªñÁ±ªÂèØ‰ª•‰øÆÊîπÂÖ∂ÂÄº„ÄÇassign, retain, weak, strong, copy, unsafe_unretainedÔºöÂú®non-ARC‰∏≠ÔºåassignÂíåretainÊòØ‰∏ÄÁªÑÔºåassignÁöÑÂØπË±°Â±ûÊÄßÂºïÁî®ËÆ°Êï∞‰∏çÂèòÔºåËÄåretain‰ºöË¢´+1„ÄÇÂØπÂ∫îÁöÑÂú®ARC‰∏≠ÔºåweakÂíåstrongÊòØ‰∏ÄÁªÑÔºåweakÁöÑÂØπË±°Â±ûÊÄßÂºïÁî®ËÆ°Êï∞‰∏çÂèòÔºåËÄåstrong‰ºöË¢´+1„ÄÇassignËøòÁî®Êù•ËµãÂÄºÈùûÂØπË±°Â±ûÊÄßÔºå‰æãÂ¶ÇÔºåintÔºådoubleÔºåBOOLÔºåcharÁ≠â„ÄÇcopyÁî®Êù•ËÆæÁΩÆ‰∏çÂèØÂèòÁöÑÂØπË±°Â±ûÊÄßÔºå‰æãÂ¶ÇÔºåNSStringÔºåNSArrayÔºåNSDictionaryÁ≠â„ÄÇÂú®ARC‰∏≠Ôºå‰∏Ä‰∏™Â±ûÊÄßË¢´ËÆæÁΩÆ‰∏∫weakÔºåÂΩìÂá∫‰∫Ü‰ΩúÁî®ÂüüÔºåÂÖ∂ÂÄº‰ºöË¢´ËÆæÁΩÆÊàênil„ÄÇ‰∏éÂÖ∂Áõ∏ÂØπÂ∫îÁöÑÊòØunsafe_unretainedÔºåunsafe_unretained‰∏ç‰ºöÊîπÂèòÂØπË±°Â±ûÊÄßÁöÑÂºïÁî®ËÆ°Êï∞ÔºåÂêåÊó∂Âá∫‰∫Ü‰ΩúÁî®ÂüüÁöÑÊó∂ÂÄôÔºåÂÖ∂ÂÄº‰πü‰∏ç‰ºöË¢´ËÆæÁΩÆÊàênil„ÄÇunsafe_unretainedÁõ∏ÂΩì‰∫énon-ARC‰∏≠ÁöÑassign„ÄÇatomic, nonatomic: atomicÊòØÂéüÂ≠êÊìç‰ΩúÔºånonatomicÊòØÈùûÂéüÂ≠êÊìç‰ΩúÔºå‰∏ÄËà¨Â∏∏Áî®ÁöÑÊòØnonatomic„ÄÇ2¬∑ ËÆæÁΩÆ‰ª£ÁêÜ‰∏∫Â±ûÊÄßÊ≠£Á°ÆÁöÑÊòØÔºàÔºâÊ≠£Á°ÆÁ≠îÊ°à: AA @property(nonatomic,assign)B @property(atomic,copy)C @property(nonatomic,copy)D @property(nonatomic,retain)Ëß£ÈáäÔºöÁî®weakÊõ¥Â•ΩÔºå‰ΩÜÊòØAÊúÄÊé•Ëøë3¬∑ ÂÖ≥‰∫éObjective-C‰∏≠Â±ûÊÄßÁöÑËØ¥ÊòéÔºå‰ª•‰∏ãÈîôËØØÁöÑÊòØÔºàÔºâÊ≠£Á°ÆÁ≠îÊ°à: DA readwriteÊòØÂèØËØªÂèØÂÜôÁâπÊÄßÔºåÈúÄË¶ÅÁîüÊàêgetterÊñπÊ≥ïÂíåsetterÊñπÊ≥ïB readonlyÊòØÂè™ËØªÁâπÊÄßÔºåÂè™ÊúâgetterÊñπÊ≥ïÔºåÊ≤°ÊúâsetterÊñπÊ≥ïC assignÊòØËµãÂÄºÂ±ûÊÄßÔºåsetterÊñπÊ≥ïÂ∞Ü‰º†ÂÖ•ÂèÇÊï∞ËµãÂÄºÁªôÂÆû‰æãÂèòÈáèD retainË°®Á§∫ÊåÅÊúâÁâπÊÄßÔºåcopyÂ±ûÊÄßË°®Á§∫Êã∑Ë¥ùÂ±ûÊÄßÔºåÈÉΩ‰ºöÂª∫Á´ã‰∏Ä‰∏™Áõ∏ÂêåÁöÑÂØπË±°Ëß£ÈáäÔºö copyÊòØÁõ¥Êé•ÂàõÂª∫‰∏Ä‰∏™„ÄÇÊï∞ÁªÑ„ÄÅÂ≠óÂÖ∏Á≠âÁõ∏ÂÖ≥1¬∑ ‰ª•‰∏ãÂì™‰∏ÄÊÆµ‰ª£Á†Å‰∏ç‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºàÔºâ CA NSArray array=@[1Ôºå2Ôºå3];NSNumber * number=array[3];B NSDictionary *dict=@{@‚Äùkey‚Äù:nil};C NSString *str=nil;NSString *str2=[str substringFromIndex:3];D NSString *str=@‚Äùhi‚Äù;NSString *str2=[str substringFromIndex:3];Ëß£ÈáäÔºöA Êï∞ÁªÑË∂äÁïåB Â≠óÂÖ∏ÁöÑKey‰∏çËÉΩ‰∏∫nilD Êï∞ÁªÑ‰∏ãÊ†áË∂äÁïå2¬∑ ÂÖ≥‰∫é‰∏ãÂàóÁ®ãÂ∫èÔºåËæìÂá∫ÊòØNSMutableArray ary = [[NSMutableArray array] retain];NSString str = [NSString stringWithFormat:@‚Äùtest‚Äù];[str retain];[ary addObject:str];NSLog(@‚Äù%@%d‚Äù,str,[str retainCount]);[str retain];[str release];[str release];NSLog(@‚Äù%@%d‚Äù,str,[str retainCount]);[aryremoveAllObjects];NSLog(@‚Äù%@%d‚Äù,str,[str retainCount]);Ê≠£Á°ÆÁ≠îÊ°à: DA 2Ôºå3Ôºå1B 3Ôºå2Ôºå1C 1Ôºå2Ôºå3D -1Ôºå-1Ôºå-1Ëß£ÈáäÔºöobjective-C: NSStringÂ∫îËØ•Áî®initWithFormat? ËøòÊòØ stringWithFormat?‰ªäÂ§©Âú®Áúã‰π¶‰∏äÁöÑ‰∏ÄÊÆµ‰ª£Á†ÅÊó∂ÔºåÂèëÁé∞NSStringÂÆû‰æãÂåñÊó∂ÔºåÊúâÊó∂Áî®ÁöÑÊòØinitWithFormatÊñπÊ≥ïÔºåÊúâÊó∂Áî®ÁöÑÊòØstringWithFormatÔºåÂà∞Â∫ïÂ∫îËØ•Â¶Ç‰ΩïÈÄâÊã©Âë¢ÔºüÂå∫Âà´Ôºö1„ÄÅinitWithFormatÊòØÂÆû‰æãÊñπÊ≥ïÂè™ËÉΩÈÄöËøá NSString str = [[NSString alloc] initWithFormat:@‚Äù%@‚Äù,@‚ÄùHello World‚Äù] Ë∞ÉÁî®Ôºå‰ΩÜÊòØÂøÖÈ°ªÊâãÂä®releaseÊù•ÈáäÊîæÂÜÖÂ≠òËµÑÊ∫ê2„ÄÅstringWithFormatÊòØÁ±ªÊñπÊ≥ïÂèØ‰ª•Áõ¥Êé•Áî® NSString* str = [NSString stringWithFormat:@‚Äù%@‚Äù,@‚ÄùHello World‚Äù] Ë∞ÉÁî®ÔºåÂÜÖÂ≠òÁÆ°ÁêÜ‰∏äÊòØautoreleaseÁöÑÔºå‰∏çÁî®ÊâãÂä®ÊòæÂºèrelease„ÄÇÁΩëÁªúÁõ∏ÂÖ≥1¬∑ NSURLConnectionDelegateÂçèËÆÆ‰∏≠ÁöÑÊñπÊ≥ïÊúâÂì™‰∫õÔºüÊ≠£Á°ÆÁ≠îÊ°à: A B DA connection:didReceiveData:B connection:didFailWithError:C initWithRequest:delegate:D connectionDidFinishLoading:Ëß£ÈáäÔºöÂçï Áúã NSURLConnectionDelegate ÔºåÁ≠îÊ°àÂè™Êúâ B ÔºåËÄå A Âíå D Â±û‰∫é NSURLConnectionDataDelegate „ÄÇ‰ªî ÁªÜ Áúã NSURLConnectionDataDelegate ÁöÑÂ£∞ÊòéÔºö@protocol NSURLConnectionDataDelegate CÊòØÊñπÊ≥ïÔºå‰∏çÊòØ‰ª£ÁêÜ2¬∑ NSURLConnectionÁ±ªÁöÑÂêåÊ≠•ËØ∑Ê±ÇÊñπÊ≥ïÊòØÔºüÊ≠£Á°ÆÁ≠îÊ°à: AA + sendSynchronousRequest:returningResponse:error:B ‚Äì initWithRequest:delegate:C ‚Äì initWithRequest:delegate:startImmediately:Ëß£ÈáäÔºöBÂíåCÈÉΩÊòØÂºÇÊ≠•ÊñπÊ≥ïÔºåÈúÄË¶ÅËÆæÁΩÆdelegateÂ±ûÊÄß„ÄÇ3¬∑ NSURLÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊúâÔºüÊ≠£Á°ÆÁ≠îÊ°à: C D requestWithURL:‚Äì initWithURL: URLWithString:‚Äì initWithString:Ëß£ÈáäÔºö[NSURL URLWithString:@‚Äùhttps://a.com&quot;];[[NSURL alloc] initWithString:@‚Äùhttps://a.com&quot;];Êï∞ÊçÆÊåÅ‰πÖÂåñÁõ∏ÂÖ≥1¬∑ iOS‰∏≠ÊåÅ‰πÖÂåñÊñπÂºèÊúâÂì™‰∫õÔºüÊ≠£Á°ÆÁ≠îÊ°à: A B C DA Â±ûÊÄßÂàóË°®Êñá‰ª∂B ÂØπË±°ÂΩíÊ°£C SQLiteÊï∞ÊçÆÂ∫ìD CoreDataËß£ÈáäÔºöA ÔºöÂ±ûÊÄßÂàóË°®Êñá‰ª∂ //NSUserDefaults ÁöÑÂ≠òÂÇ®ÔºåÂÆûÈôÖÊòØÊú¨Âú∞ÁîüÊàê‰∏Ä‰∏™ plist Êñá‰ª∂ÔºåÂ∞ÜÊâÄÈúÄÂ±ûÊÄßÂ≠òÂÇ®Âú® plist Êñá‰ª∂‰∏≠B ÔºöÂØπË±°ÂΩíÊ°£ // Êú¨Âú∞ÂàõÂª∫Êñá‰ª∂Âπ∂ÂÜôÂÖ•Êï∞ÊçÆÔºåÊñá‰ª∂Á±ªÂûã‰∏çÈôêC Ôºö SQLite Êï∞ÊçÆÂ∫ì // Êú¨Âú∞ÂàõÂª∫Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÔºåËøõË°åÊï∞ÊçÆÂ§ÑÁêÜD Ôºö CoreData // ÂêåÊï∞ÊçÆÂ∫ìÂ§ÑÁêÜÊÄùÊÉ≥Áõ∏ÂêåÔºå‰ΩÜÂÆûÁé∞ÊñπÂºè‰∏çÂêåÊüê‰∫õÊÉÖÂÜµ‰∏ãÔºåBÁîüÊàêÁöÑÊñá‰ª∂‰πüÂèØ‰ª•ÊòØÊï∞ÊçÆÂ∫ìÊñá‰ª∂Ôºå‰ΩÜÊòØÂØπÊï∞ÊçÆÁöÑÂ§ÑÁêÜÊñπÂºèËÇØÂÆöÊòØ‰∏çÂêåÁöÑÊâÄ‰ª•ÔºåABCDÈÉΩÂ±û‰∫éÊú¨Âú∞ÊåÅ‰πÖÂåñÁöÑÊñπÂºè2¬∑ ‰ª•‰∏ãÈÄÇÂêàÂú®ÂÆ¢Êà∑Á´ØÂÅöÊï∞ÊçÆÊåÅ‰πÖÂåñÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÁöÑÊúâÊ≠£Á°ÆÁ≠îÊ°à: B DA redisB localStorageC sessionStorageD userDataËß£ÈáäÔºöredisÊòØ‰∏Ä‰∏™ÂºÄÊ∫ê‰ΩøÁî®ANSI CËØ≠Ë®ÄÁºñÂÜô„ÄÅÊîØÊåÅÁΩëÁªú„ÄÅÂèØÂü∫‰∫éÂÜÖÂ≠ò‰∫¶ÂèØÊåÅ‰πÖÂåñÁöÑÊó•ÂøóÂûã„ÄÅKey-ValueÊï∞ÊçÆÂ∫ì„ÄÇÊâÄ‰ª•AÈÄâÈ°π‰∏≠redisÊï∞ÊçÆÂ∞±ÊòØ‰∏Ä‰∏™Âπ≤Êâ∞È°πÔºåÁõ¥Êé•ÊéíÈô§„ÄÇlocalStorageÂíåsessionStorage‰∏ÄÊ†∑ÈÉΩÊòØÁî®Êù•Â≠òÂÇ®ÂÆ¢Êà∑Á´Ø‰∏¥Êó∂‰ø°ÊÅØÁöÑÂØπË±°„ÄÇ‰∏çÂêåÔºölocalStorageÁîüÂëΩÂë®ÊúüÊòØÊ∞∏‰πÖÔºåËøôÊÑèÂë≥ÁùÄÈô§ÈùûÁî®Êà∑ÊòæÁ§∫Âú®ÊµèËßàÂô®Êèê‰æõÁöÑUI‰∏äÊ∏ÖÈô§localStorage‰ø°ÊÅØÔºåÂê¶ÂàôËøô‰∫õ‰ø°ÊÅØÂ∞ÜÊ∞∏ËøúÂ≠òÂú®„ÄÇsessionStorageÁîüÂëΩÂë®Êúü‰∏∫ÂΩìÂâçÁ™óÂè£ÊàñÊ†áÁ≠æÈ°µÔºå‰∏ÄÊó¶Á™óÂè£ÊàñÊ†áÁ≠æÈ°µË¢´Ê∞∏‰πÖÂÖ≥Èó≠‰∫ÜÔºåÈÇ£‰πàÊâÄÊúâÈÄöËøásessionStorageÂ≠òÂÇ®ÁöÑÊï∞ÊçÆ‰πüÂ∞±Ë¢´Ê∏ÖÁ©∫‰∫Ü„ÄÇÊâÄ‰ª•ÈÄâB‰∏çÈÄâCDÈÄâÈ°πÁî®Êà∑Êï∞ÊçÆÂΩìÁÑ∂ÈÄÇÂêàÂÅöÊåÅ‰πÖÂåñÂ≠òÂÇ®ÔºåÂÖçÁôªÈôÜÂ∞±ÊòØËé∑Âèñ‰πãÂâçÂ≠òÂÇ®ÁöÑÁî®Êà∑Êï∞ÊçÆÊù•ÂÆûÁé∞ÁöÑ„ÄÇÊåáÈíàÁõ∏ÂÖ≥1¬∑ ÂÖ≥‰∫éÊµÖÂ§çÂà∂ÂíåÊ∑±Â§çÂà∂ÁöÑËØ¥Ê≥ïÔºå‰∏ãÂàóËØ¥Ê≥ïÊ≠£Á°ÆÁöÑÊòØÊ≠£Á°ÆÁ≠îÊ°à: A B DA ÊµÖÂ±ÇÂ§çÂà∂ÔºöÂè™Â§çÂà∂ÊåáÂêëÂØπË±°ÁöÑÊåáÈíàÔºåËÄå‰∏çÂ§çÂà∂ÂºïÁî®ÂØπË±°Êú¨Ë∫´„ÄÇB Ê∑±Â±ÇÂ§çÂà∂ÔºöÂ§çÂà∂ÂºïÁî®ÂØπË±°Êú¨Ë∫´„ÄÇC Â¶ÇÊûúÊòØÊµÖÂ§çÂà∂ÔºåËã•Á±ª‰∏≠Â≠òÂú®ÊàêÂëòÂèòÈáèÊåáÈíàÔºå‰øÆÊîπ‰∏Ä‰∏™ÂØπË±°‰∏ÄÂÆö‰ºöÂΩ±ÂìçÂè¶Â§ñ‰∏Ä‰∏™ÂØπË±°D Â¶ÇÊûúÊòØÊ∑±Êã∑Ë¥ùÔºå‰øÆÊîπ‰∏Ä‰∏™ÂØπË±°‰∏ç‰ºöÂΩ±ÂìçÂà∞Âè¶Â§ñ‰∏Ä‰∏™ÂØπË±°Ëß£ÈáäÔºöÊàëËÆ§‰∏∫ÊµÖÊã∑Ë¥ùÊòØ‰∏Ä‰∏™‰∏çÂñúÊ¨¢ÊÄùËÄÉÁöÑÊáíÊ±âÔºåËÄåÊ∑±Êã∑Ë¥ùÂàôÊòØ‰∏Ä‰∏™ÊÄùÁª¥‰∏•Ë∞®ÔºåÂñúÊ¨¢ÊÄùËÄÉÁöÑ‰∫∫„ÄÇÂØπ‰∫éÊáíÊ±âÊù•ËØ¥ÔºåËôΩÁÑ∂Áªô‰∫Ü‰ªñ‰ªªÂä°Ôºå‰ΩÜÊòØ‰ªñÊÄªÊòØÊÉ≥Â∞ΩÈáèÁöÑÂ∞ëÂÅö‰∏Ä‰∫õ‰∫ãÊÉÖÔºåÊâÄ‰ª•ÂæàÂ§öÊó∂ÂÄôÂÅöÂá∫Êù•ÁöÑ‰∏úË•øÂ∞±ÊòØÂè™ÁúãÂà∞‰∫ÜË°®Èù¢Ôºå‰∏ç‰ºöÂéªÊÄùËÄÉÂØπ‰∏çÂØπ„ÄÇstructX{intx;inty;};ÂØπ‰∫éÊáíÊ±âÊù•ËØ¥Ôºå‰ªñÂæàÁõ¥ÁôΩÁöÑÁúãÂà∞‰∫ÜxÔºåÁúãÂà∞‰∫ÜyÔºåÁÑ∂ÂêéÂ∞±Êã∑Ë¥ùxÂíåyÔºåÁÑ∂ÂêéÂ∞±‰∏çÁÆ°‰∫ÜÔºåÂèçÊ≠£ÊàëÂÆåÊàêÊàëÁöÑÊã∑Ë¥ù‰∫ÜÔºåËá≥‰∫éÂØπ‰∏çÂØπÔºåÊàë‰∏çÁÆ°„ÄÇËÄå‰∏ÄÊó¶Êúâ‰∫ÜÂºïÁî®ÊàñËÄÖÊåáÈíàÔºå‰∫ãÊÉÖÂ∞±‰∏ç‰∏ÄÊ†∑‰∫ÜstructX{intx;inty;intp;};ÊáíÊ±â‰æùÁÑ∂Âè™ÊòØÁõ¥Êé•Ë°®Èù¢Á∫ßÂà´ÁöÑÊã∑Ë¥ùÔºå‰∫éÊòØÊã∑Ë¥ùx, y , pÔºå‰ΩÜÊòØ‰ªñÊ≤°ÊúâÊÄùËÄÉÊé•‰∏ãÊù•ÁöÑ‰∫ãÊÉÖÂØπ‰∏çÂØπ„ÄÇÂØπ‰∫éÊåáÈíàÊàñËÄÖÂºïÁî®Êù•ËØ¥ÔºåËã•ÊòØÂè™ÊòØÊã∑Ë¥ùË°®Èù¢ÔºåÈÇ£‰πàÊã∑Ë¥ùÂêéÁöÑÁâ©‰ΩìÁöÑÊåáÈíà‰πüÂíåÂéüÊù•ÁöÑÊåáÈíàÊåáÂêëÁöÑÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÔºåÊâÄ‰ª•ËôΩÁÑ∂ÁõÆÁöÑÊÉ≥ÂÆåÊàê‰∏Ä‰∏™ÂÆåÁæéÁöÑÂÖãÈöÜ‰ΩìÔºå‰ΩÜÊòØÂç¥ÂèëÁé∞ÂÖãÈöÜ‰ΩìÂíåÂéüÊù•ÁöÑÁâ©‰Ωì‰∏≠Èó¥ËøòÊúâ‰∏ÄÊ†πÁ∫øËøûÁùÄÔºåÊ≤°ÊúâÂÆåÁæéÁöÑÂàÜÁ¶ª„ÄÇintp=newint(47);int*q=p;Â¶Çq‰∏épÈÉΩÊòØÊåáÂêë‰∏Ä‰∏™Áâ©‰Ωì‰∏ÄÊ†∑„ÄÇÈÇ£‰πàÂ¶ÇÊûúÂéüÊù•ÁöÑÁâ©‰ΩìÈîÄÊØÅ‰∫ÜÔºå‰ΩÜÊòØÁé∞Âú®Êã∑Ë¥ùÁöÑÁâ©‰ΩìËøòÂú®ÔºåÈÇ£‰πàËøôÊó∂ÂÄô‰Ω†Êã∑Ë¥ùÂêéÁöÑÁâ©‰ΩìÁöÑÊàêÂëòÊåáÈíàÂ∞±ÊòØ‰∏Ä‰∏™ÊÇ¨ÊåÇÊåáÈíàÔºåÊåáÂêë‰∫Ü‰∏çÂÜçÂ≠òÂú®ÁöÑÁâ©‰ΩìÔºåÈÇ£‰πà‰Ω†ËÆøÈóÆÁöÑËØùÔºåÈÇ£Â∞±‰∏çÁü•ÈÅì‰ºöÂèëÁîü‰ªÄ‰πà‰∫Ü„ÄÇËÄåÂØπ‰∫éÊ∑±Êã∑Ë¥ùÔºåËøô‰∏Ä‰∏™Âã§Â•ãÁöÑ‰∫∫Ôºå‰ªñ‰∏ç‰ºöÂè™ÂÅöË°®Èù¢Ôºå‰ªñ‰ºöÊääÊØè‰∏Ä‰∏™ÁªÜËäÇÈÉΩÁÖßÈ°æÂ•Ω„ÄÇ‰∫éÊòØÔºåÂΩì‰ªñÈÅáÂà∞ÊåáÈíàÁöÑÊó∂ÂÄôÔºå‰ªñ‰ºöÁü•ÈÅìnewÂá∫Êù•‰∏ÄÂùóÊñ∞ÁöÑÂÜÖÂ≠òÔºåÁÑ∂ÂêéÊääÂéüÊù•ÊåáÈíàÊåáÂêëÁöÑÂÄºÊãøËøáÊù•ÔºåËøôÊ†∑ÊâçÊòØÁúüÊ≠£ÁöÑÂÆåÊàê‰∫ÜÂÖãÈöÜ‰ΩìÂíåÂéüÊù•ÁöÑÁâ©‰ΩìÁöÑÂÆåÁæéÂàÜÁ¶ªÔºåÂ¶ÇÊûúÁâ©‰ΩìÊØî‰Ωú‰∫∫ÁöÑËØùÔºåÈÇ£‰πàÂéüÊù•ÁöÑ‰∫∫ÁöÑÊØè‰∏ÄÊ†πÊØõÁªÜË°ÄÁÆ°ÈÉΩË¢´ÂÆåÁæéÁöÑÊã∑Ë¥ù‰∫ÜËøáÊù•ÔºåËÄåÁªùÈùûÂè™ÊòØË°®Èù¢„ÄÇÊâÄ‰ª•ÔºåËøôÊ†∑ÁöÑ‰ª£‰ª∑‰ºöÊØîÊµÖÊã∑Ë¥ùËÄóË¥πÁöÑÁ≤æÂäõÊõ¥Â§ßÔºå‰ªòÂá∫ÁöÑÂä™ÂäõÊõ¥Â§öÔºå‰ΩÜÊòØÊòØÂÄºÂæóÁöÑ„ÄÇÂΩìÂéüÊù•ÁöÑÁâ©‰ΩìÈîÄÊØÅÂêéÔºåÂÖãÈöÜ‰Ωì‰πüÂèØ‰ª•Ê¥ªÁöÑÂæàÂ•Ω„ÄÇÁÑ∂ËÄå‰∫ãÂÆû‰∏äÊòØËøô‰∏™‰∏ñÁïå‰∏äÂ§ßÂ§öÈÉΩÊòØÊáíÊ±âÔºåÂåÖÊã¨ÁºñÁ®ãÁöÑ‰∫∫ÔºåÁºñËØëÂô®Á≠âÔºåÊâÄ‰ª•ÈªòËÆ§ÁöÑË°å‰∏∫ÈÉΩÊòØÊµÖÊã∑Ë¥ùÔºå‰∫éÊòØÊúâÊó∂ÂÄô‰Ω†ÈúÄË¶ÅÂÅö‰∏Ä‰∏™Âã§Â•ãÁöÑ‰∫∫ÔºåËÆ©‰∫ãÊÉÖÂÅöÊ≠£Á°ÆÔºåËá™Â∑±ÂéªÂÆåÊàêÊ∑±Êã∑Ë¥ùÊâÄÈúÄË¶ÅÁöÑ‰∫ãÊÉÖ„ÄÇdelegate„ÄÅprotocolÁõ∏ÂÖ≥1¬∑ ‰ΩøÁî®protocolÊó∂ÔºåÂ£∞Êòé‰∏ÄÁªÑÂèØÈÄâÊã©ÂÆûÁé∞‰∏éÂê¶ÁöÑÂáΩÊï∞ÔºåÈúÄË¶ÅÂú®Â£∞ÊòéÁöÑÂâç‰∏ÄË°åÂä†‰∏äÔºöÊ≠£Á°ÆÁ≠îÊ°à: BA @requiredB @optionalC @interfaceD @protocolËß£ÈáäÔºö ÈªòËÆ§ÊòØ@required,ÂèØ‰ª•ÈÄâÊã©ÂÆûÁé∞‰∏éÂê¶Â∞±ÊòØ@optionalÂÜÖÁúÅÁõ∏ÂÖ≥ÂÜÖÁúÅÔºàIntrospectionÔºâÊòØÈù¢ÂêëÂØπË±°ËØ≠Ë®ÄÂíåÁéØÂ¢ÉÁöÑ‰∏Ä‰∏™Âº∫Â§ßÁâπÊÄßÔºåObjective-CÂíåCocoaÂú®Ëøô‰∏™ÊñπÈù¢Â∞§ÂÖ∂ÁöÑ‰∏∞ÂØå„ÄÇÂÜÖÁúÅÊòØÂØπË±°Êè≠Á§∫Ëá™Â∑±‰Ωú‰∏∫‰∏Ä‰∏™ËøêË°åÊó∂ÂØπË±°ÁöÑËØ¶ÁªÜ‰ø°ÊÅØÁöÑ‰∏ÄÁßçËÉΩÂäõ„ÄÇËøô‰∫õËØ¶ÁªÜ‰ø°ÊÅØÂåÖÊã¨ÂØπË±°Âú®ÁªßÊâøÊ†ë‰∏äÁöÑ‰ΩçÁΩÆÔºåÂØπË±°ÊòØÂê¶ÈÅµÂæ™ÁâπÂÆöÁöÑÂçèËÆÆÔºå‰ª•ÂèäÊòØÂê¶ÂèØ‰ª•ÂìçÂ∫îÁâπÂÆöÁöÑÊ∂àÊÅØ„ÄÇNSObjectÂçèËÆÆÂíåÁ±ªÂÆö‰πâ‰∫ÜÂæàÂ§öÂÜÖÁúÅÊñπÊ≥ïÔºåÁî®‰∫éÊü•ËØ¢ËøêË°åÊó∂‰ø°ÊÅØÔºå‰ª•‰æøÊ†πÊçÆÂØπË±°ÁöÑÁâπÂæÅËøõË°åËØÜÂà´„ÄÇÊòéÊô∫Âú∞‰ΩøÁî®ÂÜÖÁúÅÂèØ‰ª•‰ΩøÈù¢ÂêëÂØπË±°ÁöÑÁ®ãÂ∫èÊõ¥Âä†È´òÊïàÂíåÂº∫Â£Æ„ÄÇÂÆÉÊúâÂä©‰∫éÈÅøÂÖçÈîôËØØÂú∞ËøõË°åÊ∂àÊÅØÊ¥æÂèë„ÄÅÈîôËØØÂú∞ÂÅáËÆæÂØπË±°Áõ∏Á≠â„ÄÅ‰ª•ÂèäÁ±ª‰ººÁöÑÈóÆÈ¢ò„ÄÇ1¬∑ ‰∏ãÈù¢Âì™‰∏™ÊñπÊ≥ï‰∏çÂ±û‰∫éNSObjectÁöÑÂÜÖÁúÅ(Introspection)ÊñπÊ≥ïÊ≠£Á°ÆÁ≠îÊ°à: CA isMemberOfClassB responseToSelectorC initD isKindOfClassËß£Èáä:ÂÜÖÁúÅÊòØÊåáËÉΩÂ§üÊè≠Á§∫Ëá™Â∑±‰Ωú‰∏∫‰∏Ä‰∏™ËøêË°åÊó∂ÂØπË±°ÊâÄÂÖ∑ÊúâÁöÑ‰ø°ÊÅØÁöÑËÉΩÂäõ„ÄÇÂØπ‰∫éNSObjectÂØπË±°Êù•ËØ¥ÔºåÂÜÖÁúÅËÉΩÂäõÊúâÔºåÊè≠Á§∫ÂØπË±°ÁöÑÁªßÊâøÂÖ≥Á≥ª(isMemberOfClass,isKindOfClass)ÔºåÊòØÂê¶ÈÅµÂÆàÊüê‰∏™ÂçèËÆÆ(confirmsToProtocol)ÔºåÊòØÂê¶ÂÆûÁé∞Êüê‰∏™ÊñπÊ≥ï(respondsToSelector)mainÂáΩÊï∞Áõ∏ÂÖ≥1¬∑ ios Â∫îÁî®Á®ãÂ∫è‰∏≠Ôºå main ÂáΩÊï∞Âú®ÊúÄÂ§ßÁ®ãÂ∫¶‰∏äË¢´‰ΩøÁî®ÔºåÂ∫îÁî®Á®ãÂ∫èËøêË°åÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜÂ∑•‰ΩúÁî± AppMain ÂáΩÊï∞Êù•Â§ÑÁêÜÔºåÊòØÂê¶Ê≠£Á°ÆÔºüÊ≠£Á°ÆÁ≠îÊ°à: BA ÂØπB ÈîôËß£ÈáäÔºöÂú®iOSÂ∫îÁî®Á®ãÂ∫èÔºåmainÂáΩÊï∞ÁöÑ‰ΩúÁî®ÊòØÂæàÂ∞ëÁöÑ„ÄÇÂÆÉÁöÑ‰∏ªË¶ÅÂ∑•‰ΩúÊòØÊéßÂà∂UIKit framework„ÄÇÂú®iPhoneÁöÑÂ∫îÁî®Á®ãÂ∫è‰∏≠,mainÂáΩÊï∞‰ªÖÂú®ÊúÄÂ∞èÁ®ãÂ∫¶‰∏äË¢´‰ΩøÁî®,Â∫îÁî®Á®ãÂ∫èËøêË°åÊâÄÈúÄÁöÑÂ§ßÂ§öÊï∞ÂÆûÈôÖÂ∑•‰ΩúÁî±UIApplicationMainÂáΩÊï∞Êù•Â§ÑÁêÜ„ÄÇmain‰æãÁ®ãÂè™ÂÅö‰∏â‰ª∂‰∫ã: 1.ÂàõÂª∫‰∏Ä‰∏Ä‰∏™Ëá™Âä®ÈáäÊîæÊ±†,2.Ë∞ÉÁî®UIApplicationMainÂáΩÊï∞,3.ÈáäÊîæËá™Âä®ÈáäÊîæÊ±†„ÄÇÊµãËØïÁõ∏ÂÖ≥1¬∑ iOSÂçïÂÖÉÊµãËØïÊ°ÜÊû∂ÊúâÂì™‰∫õÔºüÊ≠£Á°ÆÁ≠îÊ°à: A B CA OCUnitB GHUnitC OCMockD 0NSXMLËß£ÈáäÔºöOCUnitÂíåXCTestÈÉΩÊòØÂÆòÊñπÁöÑÊµãËØïÊ°ÜÊû∂ÔºåOCUnitÂ∑≤ÁªèËøáÊó∂Ë¢´XCTestÊâÄÂèñ‰ª£„ÄÇGHUnitÂíåOCMockÈÉΩÊòØÁ¨¨‰∏âÊñπÁöÑÊµãËØïÊ°ÜÊû∂ÔºåÂÖ∂ÂÆòÊñπÂú∞ÂùÄÂàÜÂà´‰∏∫Ôºöhttps://github.com/gh-unit/gh-unithttps://github.com/erikdoe/ocmockÊ≠£ÂàôË°®ËææÂºèÁõ∏ÂÖ≥1¬∑ ‰∏ãÂàóÊ≠£ÂàôË°®ËææÂºè‰∏çËÉΩÂåπÈÖç‚Äùwww.innotechx.com‚ÄùÁöÑÊòØÔºöÊ≠£Á°ÆÁ≠îÊ°à: A DA ^w+.w+.w+$B [w]{0,3}.[a-z].[a-z]+C ^w.*com$D [w]{3}.[a-z]{11}.[a-z]Ëß£ÈáäÔºöÈ¶ñÂÖàÊù•ÁúãAÈÄâÈ°πÔºå^Ë°®Á§∫ÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÁöÑÂºÄÂßãÔºåËÄå w Âíå . ÊòØÊ≤°ÊúâÁâπÊÆäÊÑè‰πâÁöÑÔºåÂçÉ‰∏á‰∏çË¶ÅÁúãÈîôÊàêÊòØ‚Äú\\wÔºàÂåπÈÖçÂ≠óÊØçÊàñÊï∞Â≠óÊàñ‰∏ãÂàíÁ∫øÊàñÊ±âÂ≠óÔºâ‚Äù‰∫ÜÔºå+ Ë°®Á§∫ÈáçÂ§ç‰∏ÄÊ¨°ÊàñËÄÖÂ§öÊ¨°Ôºå$ÊòØÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÁöÑÁªìÊùü„ÄÇÊâÄ‰ª•ËØ•ÈÄâÈ°π‰ºöÂåπÈÖç www.www.wwwÔºàÂÖ∂‰∏≠wÂèØÈáçÂ§ç‰∏ÄÊ¨°‰ª•‰∏äÔºâ„ÄÇBÈÄâÈ°πÔºå[w]{0,3}ÈôêÂÆöÁ¨¶ÔºåË°®Á§∫Â∞ÜwÈáçÂ§ç0Âà∞3Ê¨°Ôºå ‚Äú . ‚ÄùÊó†ÁâπÊÆäÊÑè‰πâÔºå Ë°®Á§∫ÈáçÂ§ç‰ªªÊÑèÊ¨°ÔºåÂåÖÊã¨Èõ∂Ê¨°Ôºå[a-z]Ë°®Á§∫ÂåπÈÖçaÂà∞zÁöÑÂ≠óÊØçÔºåÊâÄ‰ª•Â∞±ÊòØÂåπÈÖçaÂà∞z‰∏≠ÁöÑÊüê‰∏ÄÂ≠óÊØç‰ªªÊÑèÊ¨°ÈáçÂ§ç„ÄÇÂêéÈù¢Ëøô‰∏™Áõ∏ÂêåÊÑèÊÄùÔºåÂ∞±ÊòØ+Âè∑ÊòØÈáçÂ§ç‰∏ÄÊ¨°‰ª•‰∏ä„ÄÇËøûËµ∑Êù•ÁúãÔºåÊòØÂèØ‰ª•ÂåπÈÖçÈÄâÈ°πÁöÑ„ÄÇCÈÄâÈ°πÔºå‰∏é‰∏äËø∞ÈÄâÈ°πÁõ∏ÂêåÔºå^ÂÖàÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÂºÄÂßãÔºåÁÑ∂ÂêéÂåÖÂê´‰∏Ä‰∏™ w ÔºåÂíå ‚Äú . ‚ÄúÈáçÂ§ç‰ªªÊÑèÊ¨°ÔºåÊúÄÂêé‰ª•comÁªìÂ∞æ„ÄÇËøô‰∏™Ê≠£Âàô‰ºöÂåπÈÖçÂåÖÂê´‰∫Ü ‚Äúwcom‚ÄùÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØwË¶ÅÊòØÂºÄÂ§¥ÔºåcomË¶ÅÊòØÁªìÂ∞æÔºåÊâÄ‰ª•ÂèØ‰ª•ÂåπÈÖçÈÄâÈ°πÔºåÂ§ßÂÆ∂ÂèØ‰ª•Ëá™Â∑±ËØïËØïÁúã„ÄÇDÈÄâÈ°πÔºåÈáçÂ§ç‰∏âÊ¨°wÔºåÁÑ∂Âêé‰∏Ä‰∏™‚Äù . ‚Äú,‰ΩÜÊòØÂêéÈù¢ËøôÈáåË¶ÅÈáçÂ§ç11Ê¨°aÂà∞z‰∏≠ÁöÑÊüê‰∏ÄÂ≠óÊØçÔºåÊï∞‰∫Ü‰∏ãÈ¢òÁõÆ‰∏≠ÈÄâÈ°πÂè™Êúâ9‰∏™Â≠óÊØçÔºåÂêéÈù¢Â∞±‰∏çË¶ÅÁúãÂï¶ÔºåÂ∑≤ÁªèÈîôÂï¶~ÂõæÁâáÁõ∏ÂÖ≥1¬∑ ‰ΩøÁî®imageNamedÊñπÊ≥ïÂàõÂª∫UIImageÂØπË±°Êó∂Ôºå‰∏éÊôÆÈÄöÁöÑinitÊñπÊ≥ïÊúâ‰ªÄ‰πàÂå∫Âà´ÔºüÊ≠£Á°ÆÁ≠îÊ°à: CA Ê≤°ÊúâÂå∫Âà´ÔºåÂè™ÊòØ‰∏∫‰∫ÜÊñπ‰æøB imageNamedÊñπÊ≥ïÂè™ÊòØÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÊåáÈíàÔºåÊ≤°ÊúâÂàÜÈÖçÂÖ∂‰ªñÂÜÖÂ≠òC imageNamedÊñπÊ≥ïÂ∞ÜÂõæÁâáÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠Âêé‰∏çÂÜçÈáäÊîæD imageNamedÊñπÊ≥ïÂ∞Ü‰ΩøÁî®ÂÆåÂõæÁâáÂêéÁ´ãÂç≥ÈáäÊîæËß£ÈáäÔºö imageNamedÊòØ‰ºöÊääËØªÂèñÂà∞ÁöÑimageÂ≠òÂú®Êüê‰∏™ÁºìÂ≠òÈáåÈù¢ÔºåÁ¨¨‰∫åÊ¨°ËØªÂèñÁõ∏ÂêåÂõæÁâáÁöÑËØùÁ≥ªÁªüÂ∞±‰ºöÁõ¥Êé•‰ªéÈÇ£‰∏™ÁºìÂ≠ò‰∏≠Ëé∑ÂèñÔºå‰ªéÊüêÁßçÊÑè‰πâ‰∏äÂ•ΩÂÉè‰∏ÄÁßç‰ºòÂåñÔºå‰ΩÜÊòØimageNamedËØªÂèñÂà∞ÁöÑÈÇ£‰∏™ÂõæÁâá‰ºº‰πé‰∏ç‰ºöÂõ†‰∏∫Memory WarningËÄåÈáäÊîæÔºåÊâÄ‰ª•Áî®Ëøô‰∏™‰ºöÂØºËá¥Âú® ÂÜÖÂ≠ò‰∏çË∂≥ ÁöÑÊó∂ÂÄôÈó™ÈÄÄ„ÄÇÁÆÄÂçïÁöÑËØ¥imageNamedÈááÁî®‰∫ÜÁºìÂ≠òÊú∫Âà∂ÔºåÂ¶ÇÊûúÁºìÂ≠ò‰∏≠Â∑≤Âä†ËΩΩ‰∫ÜÂõæÁâáÔºåÁõ¥Êé•‰ªéÁºìÂ≠òËØªÂ∞±Ë°å‰∫ÜÔºåÊØèÊ¨°Â∞±‰∏çÁî®ÂÜçÂéªËØªÊñá‰ª∂‰∫ÜÔºåÊïàÁéá‰ºöÊõ¥È´ò„ÄÇ1.KVOÂÆûÁé∞ÂéüÁêÜÔºüKVOÂú®Apple‰∏≠ÁöÑAPIÊñáÊ°£Â¶Ç‰∏ãÔºö Automatic key-value observing is implemented using a technique called isa-swizzling‚Ä¶ When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class ‚Ä¶KVOÂü∫Êú¨ÂéüÁêÜÔºö1.KVOÊòØÂü∫‰∫éruntimeÊú∫Âà∂ÂÆûÁé∞ÁöÑ2.ÂΩìÊüê‰∏™Á±ªÁöÑÂ±ûÊÄßÂØπË±°Á¨¨‰∏ÄÊ¨°Ë¢´ËßÇÂØüÊó∂ÔºåÁ≥ªÁªüÂ∞±‰ºöÂú®ËøêË°åÊúüÂä®ÊÄÅÂú∞ÂàõÂª∫ËØ•Á±ªÁöÑ‰∏Ä‰∏™Ê¥æÁîüÁ±ªÔºåÂú®Ëøô‰∏™Ê¥æÁîüÁ±ª‰∏≠ÈáçÂÜôÂü∫Á±ª‰∏≠‰ªª‰ΩïË¢´ËßÇÂØüÂ±ûÊÄßÁöÑsetter ÊñπÊ≥ï„ÄÇÊ¥æÁîüÁ±ªÂú®Ë¢´ÈáçÂÜôÁöÑsetterÊñπÊ≥ïÂÜÖÂÆûÁé∞ÁúüÊ≠£ÁöÑÈÄöÁü•Êú∫Âà∂3.Â¶ÇÊûúÂéüÁ±ª‰∏∫PersonÔºåÈÇ£‰πàÁîüÊàêÁöÑÊ¥æÁîüÁ±ªÂêç‰∏∫NSKVONotifying_Person4.ÊØè‰∏™Á±ªÂØπË±°‰∏≠ÈÉΩÊúâ‰∏Ä‰∏™isaÊåáÈíàÊåáÂêëÂΩìÂâçÁ±ªÔºåÂΩì‰∏Ä‰∏™Á±ªÂØπË±°ÁöÑÁ¨¨‰∏ÄÊ¨°Ë¢´ËßÇÂØüÔºåÈÇ£‰πàÁ≥ªÁªü‰ºöÂÅ∑ÂÅ∑Â∞ÜisaÊåáÈíàÊåáÂêëÂä®ÊÄÅÁîüÊàêÁöÑÊ¥æÁîüÁ±ªÔºå‰ªéËÄåÂú®ÁªôË¢´ÁõëÊéßÂ±ûÊÄßËµãÂÄºÊó∂ÊâßË°åÁöÑÊòØÊ¥æÁîüÁ±ªÁöÑsetterÊñπÊ≥ï5.ÈîÆÂÄºËßÇÂØüÈÄöÁü•‰æùËµñ‰∫éNSObject ÁöÑ‰∏§‰∏™ÊñπÊ≥ï: willChangeValueForKey: Âíå didChangevlueForKey:ÔºõÂú®‰∏Ä‰∏™Ë¢´ËßÇÂØüÂ±ûÊÄßÂèëÁîüÊîπÂèò‰πãÂâçÔºå willChangeValueForKey:‰∏ÄÂÆö‰ºöË¢´Ë∞ÉÁî®ÔºåËøôÂ∞± ‰ºöËÆ∞ÂΩïÊóßÁöÑÂÄº„ÄÇËÄåÂΩìÊîπÂèòÂèëÁîüÂêéÔºådidChangeValueForKey:‰ºöË¢´Ë∞ÉÁî®ÔºåÁªßËÄå observeValueForKey:ofObject:change:context: ‰πü‰ºöË¢´Ë∞ÉÁî®„ÄÇKVOÊ∑±ÂÖ•ÂéüÁêÜÔºö1.Apple ‰ΩøÁî®‰∫Ü isa Ê∑∑ÂÜôÔºàisa-swizzlingÔºâÊù•ÂÆûÁé∞ KVO „ÄÇÂΩìËßÇÂØüÂØπË±°AÊó∂ÔºåKVOÊú∫Âà∂Âä®ÊÄÅÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂêç‰∏∫Ôºö NSKVONotifying_AÁöÑÊñ∞Á±ªÔºåËØ•Á±ªÁªßÊâøËá™ÂØπË±°AÁöÑÊú¨Á±ªÔºå‰∏îKVO‰∏∫NSKVONotifying_AÈáçÂÜôËßÇÂØüÂ±ûÊÄßÁöÑsetter ÊñπÊ≥ïÔºåsetter ÊñπÊ≥ï‰ºöË¥üË¥£Âú®Ë∞ÉÁî®Âéü setter ÊñπÊ≥ï‰πãÂâçÂíå‰πãÂêéÔºåÈÄöÁü•ÊâÄÊúâËßÇÂØüÂØπË±°Â±ûÊÄßÂÄºÁöÑÊõ¥ÊîπÊÉÖÂÜµ„ÄÇ2.NSKVONotifying_AÁ±ªÂâñÊûêÔºöÂú®Ëøô‰∏™ËøáÁ®ãÔºåË¢´ËßÇÂØüÂØπË±°ÁöÑ isa ÊåáÈíà‰ªéÊåáÂêëÂéüÊù•ÁöÑAÁ±ªÔºåË¢´KVOÊú∫Âà∂‰øÆÊîπ‰∏∫ÊåáÂêëÁ≥ªÁªüÊñ∞ÂàõÂª∫ÁöÑÂ≠êÁ±ª NSKVONotifying_AÁ±ªÔºåÊù•ÂÆûÁé∞ÂΩìÂâçÁ±ªÂ±ûÊÄßÂÄºÊîπÂèòÁöÑÁõëÂê¨Ôºõ3.ÊâÄ‰ª•ÂΩìÊàë‰ª¨‰ªéÂ∫îÁî®Â±ÇÈù¢‰∏äÁúãÊù•ÔºåÂÆåÂÖ®Ê≤°ÊúâÊÑèËØÜÂà∞ÊúâÊñ∞ÁöÑÁ±ªÂá∫Áé∞ÔºåËøôÊòØÁ≥ªÁªü‚ÄúÈöêÁûí‚Äù‰∫ÜÂØπKVOÁöÑÂ∫ïÂ±ÇÂÆûÁé∞ËøáÁ®ãÔºåËÆ©Êàë‰ª¨ËØØ‰ª•‰∏∫ËøòÊòØÂéüÊù•ÁöÑÁ±ª„ÄÇ‰ΩÜÊòØÊ≠§Êó∂Â¶ÇÊûúÊàë‰ª¨ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂêç‰∏∫‚ÄúNSKVONotifying_A‚ÄùÁöÑÁ±ª()ÔºåÂ∞±‰ºöÂèëÁé∞Á≥ªÁªüËøêË°åÂà∞Ê≥®ÂÜåKVOÁöÑÈÇ£ÊÆµ‰ª£Á†ÅÊó∂Á®ãÂ∫èÂ∞±Â¥©Ê∫ÉÔºåÂõ†‰∏∫Á≥ªÁªüÂú®Ê≥®ÂÜåÁõëÂê¨ÁöÑÊó∂ÂÄôÂä®ÊÄÅÂàõÂª∫‰∫ÜÂêç‰∏∫NSKVONotifying_AÁöÑ‰∏≠Èó¥Á±ªÔºåÂπ∂ÊåáÂêëËøô‰∏™‰∏≠Èó¥Á±ª‰∫Ü„ÄÇ4.Ôºàisa ÊåáÈíàÁöÑ‰ΩúÁî®ÔºöÊØè‰∏™ÂØπË±°ÈÉΩÊúâisa ÊåáÈíàÔºåÊåáÂêëËØ•ÂØπË±°ÁöÑÁ±ªÔºåÂÆÉÂëäËØâ Runtime Á≥ªÁªüËøô‰∏™ÂØπË±°ÁöÑÁ±ªÊòØ‰ªÄ‰πà„ÄÇÊâÄ‰ª•ÂØπË±°Ê≥®ÂÜå‰∏∫ËßÇÂØüËÄÖÊó∂ÔºåisaÊåáÈíàÊåáÂêëÊñ∞Â≠êÁ±ªÔºåÈÇ£‰πàËøô‰∏™Ë¢´ËßÇÂØüÁöÑÂØπË±°Â∞±Á•ûÂ•áÂú∞ÂèòÊàêÊñ∞Â≠êÁ±ªÁöÑÂØπË±°ÔºàÊàñÂÆû‰æãÔºâ‰∫Ü„ÄÇÔºâ Âõ†ËÄåÂú®ËØ•ÂØπË±°‰∏äÂØπ setter ÁöÑË∞ÉÁî®Â∞±‰ºöË∞ÉÁî®Â∑≤ÈáçÂÜôÁöÑ setterÔºå‰ªéËÄåÊøÄÊ¥ªÈîÆÂÄºÈÄöÁü•Êú∫Âà∂„ÄÇ5.Â≠êÁ±ªsetterÊñπÊ≥ïÂâñÊûêÔºöKVOÁöÑÈîÆÂÄºËßÇÂØüÈÄöÁü•‰æùËµñ‰∫é NSObject ÁöÑ‰∏§‰∏™ÊñπÊ≥ï:willChangeValueForKey:Âíå didChangevlueForKey:ÔºåÂú®Â≠òÂèñÊï∞ÂÄºÁöÑÂâçÂêéÂàÜÂà´Ë∞ÉÁî®2‰∏™ÊñπÊ≥ïÔºö Ë¢´ËßÇÂØüÂ±ûÊÄßÂèëÁîüÊîπÂèò‰πãÂâçÔºåwillChangeValueForKey:Ë¢´Ë∞ÉÁî®ÔºåÈÄöÁü•Á≥ªÁªüËØ• keyPath ÁöÑÂ±ûÊÄßÂÄºÂç≥Â∞ÜÂèòÊõ¥ÔºõÂΩìÊîπÂèòÂèëÁîüÂêéÔºå didChangeValueForKey: Ë¢´Ë∞ÉÁî®ÔºåÈÄöÁü•Á≥ªÁªüËØ• keyPath ÁöÑÂ±ûÊÄßÂÄºÂ∑≤ÁªèÂèòÊõ¥Ôºõ‰πãÂêéÔºå observeValueForKey:ofObject:change:context: ‰πü‰ºöË¢´Ë∞ÉÁî®„ÄÇ‰∏îÈáçÂÜôËßÇÂØüÂ±ûÊÄßÁöÑsetter ÊñπÊ≥ïËøôÁßçÁªßÊâøÊñπÂºèÁöÑÊ≥®ÂÖ•ÊòØÂú®ËøêË°åÊó∂ËÄå‰∏çÊòØÁºñËØëÊó∂ÂÆûÁé∞ÁöÑ„ÄÇKVOÂéüÁêÜÂõæ 2.ËØ¥ËØ¥‰Ω†ÁêÜËß£ÁöÑÂüãÁÇπÔºü‰ª•‰∏ãÂá†ÁØáÊñáÁ´†ÂÜôÁöÑÁõ∏ÂΩì‰∏çÈîôÔºåÂèØ‰ª•ÈÄÇÂΩìÂÄüÈâ¥‰∏ãÔºÅ iOSÊó†ÂüãÁÇπÊï∞ÊçÆSDKÂÆûË∑µ‰πãË∑Ø iOSÊó†ÂüãÁÇπÊï∞ÊçÆSDKÁöÑÊï¥‰ΩìËÆæËÆ°‰∏éÊäÄÊúØÂÆûÁé∞ iOSÊó†ÂüãÁÇπSDK ‰πã RNÈ°µÈù¢ÁöÑÊï∞ÊçÆÊî∂ÈõÜ 3.Ê∂àÊÅØËΩ¨ÂèëÊú∫Âà∂ÂéüÁêÜÔºüÊ∂àÊÅØËΩ¨ÂèëÊú∫Âà∂Âü∫Êú¨ÂàÜ‰∏∫‰∏â‰∏™Ê≠•È™§Ôºö 1„ÄÅÂä®ÊÄÅÊñπÊ≥ïËß£Êûê 2„ÄÅÂ§áÁî®Êé•ÂèóËÄÖ 3„ÄÅÂÆåÊï¥ËΩ¨Âèë ËΩ¨ÂèëÊú∫Âà∂ÂéüÁêÜÊñ∞Âª∫‰∏Ä‰∏™HelloClassÁöÑÁ±ªÔºåÂÆö‰πâ‰∏§‰∏™ÊñπÊ≥ïÔºö 123@interfaceHelloClass:NSObject- (void)hello;+ (HelloClass *)hi;@end Âä®ÊÄÅÊñπÊ≥ïËß£ÊûêÂØπË±°Âú®Êé•Êî∂Âà∞Êú™Áü•ÁöÑÊ∂àÊÅØÊó∂ÔºåÈ¶ñÂÖà‰ºöË∞ÉÁî®ÊâÄÂ±ûÁ±ªÁöÑÁ±ªÊñπÊ≥ï+resolveInstanceMethod:(ÂÆû‰æãÊñπÊ≥ï)ÊàñËÄÖ+resolveClassMethod:(Á±ªÊñπÊ≥ï)„ÄÇÂú®Ëøô‰∏™ÊñπÊ≥ï‰∏≠ÔºåÊàë‰ª¨ÊúâÊú∫‰ºö‰∏∫ËØ•Êú™Áü•Ê∂àÊÅØÊñ∞Â¢û‰∏Ä‰∏™‚ÄùÂ§ÑÁêÜÊñπÊ≥ï‚Äù‚Äú„ÄÇ‰∏çËøá‰ΩøÁî®ËØ•ÊñπÊ≥ïÁöÑÂâçÊèêÊòØÊàë‰ª¨Â∑≤ÁªèÂÆûÁé∞‰∫ÜËØ•‚ÄùÂ§ÑÁêÜÊñπÊ≥ï‚ÄùÔºåÂè™ÈúÄË¶ÅÂú®ËøêË°åÊó∂ÈÄöËøáclass_addMethodÂáΩÊï∞Âä®ÊÄÅÊ∑ªÂä†Âà∞Á±ªÈáåÈù¢Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ 123456789101112131415161718192021222324252627282930313233void functionForMethod(id self, SEL _cmd){ NSLog(@&quot;Hello!&quot;);}Class functionForClassMethod(id self, SEL _cmd){ NSLog(@&quot;Hi!&quot;); return [HelloClass class];}#pragma mark - 1„ÄÅÂä®ÊÄÅÊñπÊ≥ïËß£Êûê+ (BOOL)resolveClassMethod:(SEL)sel{ NSLog(@&quot;resolveClassMethod&quot;); NSString *selString = NSStringFromSelector(sel); if ([selString isEqualToString:@&quot;hi&quot;]) { Class metaClass = objc_getMetaClass(&quot;HelloClass&quot;); class_addMethod(metaClass, @selector(hi), (IMP)functionForClassMethod, &quot;v@:&quot;); return YES; } return [super resolveClassMethod:sel];}+ (BOOL)resolveInstanceMethod:(SEL)sel{ NSLog(@&quot;resolveInstanceMethod&quot;); NSString *selString = NSStringFromSelector(sel); if ([selString isEqualToString:@&quot;hello&quot;]) { class_addMethod(self, @selector(hello), (IMP)functionForMethod, &quot;v@:&quot;); return YES; } return [super resolveInstanceMethod:sel];} Â§áÁî®Êé•ÂèóËÄÖÂä®ÊÄÅÊñπÊ≥ïËß£ÊûêÊó†Ê≥ïÂ§ÑÁêÜÊ∂àÊÅØÔºåÂàô‰ºöËµ∞Â§áÁî®Êé•ÂèóËÄÖ„ÄÇËøô‰∏™Â§áÁî®Êé•ÂèóËÄÖÂè™ËÉΩÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°Ôºå‰∏çËÉΩÊòØselfÊú¨Ë∫´ÔºåÂê¶ÂàôÂ∞±‰ºöÂá∫Áé∞Êó†ÈôêÂæ™ÁéØ„ÄÇÂ¶ÇÊûúÊàë‰ª¨Ê≤°ÊúâÊåáÂÆöÁõ∏Â∫îÁöÑÂØπË±°Êù•Â§ÑÁêÜaSelectorÔºåÂàôÂ∫îËØ•Ë∞ÉÁî®Áà∂Á±ªÁöÑÂÆûÁé∞Êù•ËøîÂõûÁªìÊûú„ÄÇ 12345678910111213141516171819202122232425262728293031#pragma mark - 2„ÄÅÂ§áÁî®Êé•Êî∂ËÄÖ- (id)forwardingTargetForSelector:(SEL)aSelector{ NSLog(@&quot;forwardingTargetForSelector&quot;); NSString *selectorString = NSStringFromSelector(aSelector); // Â∞ÜÊ∂àÊÅØ‰∫§Áªô_helperÊù•Â§ÑÁêÜ if ([selectorString isEqualToString:@&quot;hello&quot;]) { return _helper; } return [super forwardingTargetForSelector:aSelector];}Âú®Êú¨Á±ª‰∏≠ÈúÄË¶ÅÂÆûÁé∞Ëøô‰∏™Êñ∞ÁöÑÊé•ÂèóÂØπË±°@interfaceHelloClass(){ RuntimeMethodHelper *_helper;}@end@implementationHelloClass- (instancetype)init{ self = [super init]; if (self) { _helper = [RuntimeMethodHelper new]; } return self;}RuntimeMethodHelper Á±ªÈúÄË¶ÅÂÆûÁé∞Ëøô‰∏™ÈúÄË¶ÅËΩ¨ÂèëÁöÑÊñπÊ≥ïÔºö#import&quot;RuntimeMethodHelper.h&quot;@implementationRuntimeMethodHelper- (void)hello{ NSLog(@&quot;%@, %p&quot;, self, _cmd);}@end ÂÆåÊï¥Ê∂àÊÅØËΩ¨ÂèëÂ¶ÇÊûúÂä®ÊÄÅÊñπÊ≥ïËß£ÊûêÂíåÂ§áÁî®Êé•ÂèóËÄÖÈÉΩÊ≤°ÊúâÂ§ÑÁêÜËøô‰∏™Ê∂àÊÅØÔºåÈÇ£‰πàÂ∞±‰ºöËµ∞ÂÆåÊï¥Ê∂àÊÅØËΩ¨ÂèëÔºö 123456789101112131415161718192021#pragma mark - 3„ÄÅÂÆåÊï¥Ê∂àÊÅØËΩ¨Âèë- (void)forwardInvocation:(NSInvocation *)anInvocation{ NSLog(@&quot;forwardInvocation&quot;); if ([RuntimeMethodHelper instancesRespondToSelector:anInvocation.selector]) { [anInvocation invokeWithTarget:_helper]; }}/*ÂøÖÈ°ªÈáçÊñ∞Ëøô‰∏™ÊñπÊ≥ïÔºåÊ∂àÊÅØËΩ¨ÂèëÊú∫Âà∂‰ΩøÁî®‰ªéËøô‰∏™ÊñπÊ≥ï‰∏≠Ëé∑ÂèñÁöÑ‰ø°ÊÅØÊù•ÂàõÂª∫NSInvocationÂØπË±°*/- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector{ NSMethodSignature *signature = [super methodSignatureForSelector:aSelector]; if (!signature) { if ([RuntimeMethodHelper instancesRespondToSelector:aSelector]) { signature = [RuntimeMethodHelper instanceMethodSignatureForSelector:aSelector]; } } return signature;} 4.ËØ¥ËØ¥‰Ω†ÁêÜËß£weakÂ±ûÊÄßÔºüweakÂÆûÁé∞ÂéüÁêÜÔºöRuntimeÁª¥Êä§‰∫Ü‰∏Ä‰∏™weakË°®ÔºåÁî®‰∫éÂ≠òÂÇ®ÊåáÂêëÊüê‰∏™ÂØπË±°ÁöÑÊâÄÊúâweakÊåáÈíà„ÄÇweakË°®ÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™hashÔºàÂìàÂ∏åÔºâË°®ÔºåKeyÊòØÊâÄÊåáÂØπË±°ÁöÑÂú∞ÂùÄÔºåValueÊòØweakÊåáÈíàÁöÑÂú∞ÂùÄÔºàËøô‰∏™Âú∞ÂùÄÁöÑÂÄºÊòØÊâÄÊåáÂØπË±°ÁöÑÂú∞ÂùÄÔºâÊï∞ÁªÑ„ÄÇ1„ÄÅÂàùÂßãÂåñÊó∂Ôºöruntime‰ºöË∞ÉÁî®objc_initWeakÂáΩÊï∞ÔºåÂàùÂßãÂåñ‰∏Ä‰∏™Êñ∞ÁöÑweakÊåáÈíàÊåáÂêëÂØπË±°ÁöÑÂú∞ÂùÄ„ÄÇ2„ÄÅÊ∑ªÂä†ÂºïÁî®Êó∂Ôºöobjc_initWeakÂáΩÊï∞‰ºöË∞ÉÁî® objc_storeWeak() ÂáΩÊï∞Ôºå objc_storeWeak() ÁöÑ‰ΩúÁî®ÊòØÊõ¥Êñ∞ÊåáÈíàÊåáÂêëÔºåÂàõÂª∫ÂØπÂ∫îÁöÑÂº±ÂºïÁî®Ë°®„ÄÇ3„ÄÅÈáäÊîæÊó∂ÔºåË∞ÉÁî®clearDeallocatingÂáΩÊï∞„ÄÇclearDeallocatingÂáΩÊï∞È¶ñÂÖàÊ†πÊçÆÂØπË±°Âú∞ÂùÄËé∑ÂèñÊâÄÊúâweakÊåáÈíàÂú∞ÂùÄÁöÑÊï∞ÁªÑÔºåÁÑ∂ÂêéÈÅçÂéÜËøô‰∏™Êï∞ÁªÑÊääÂÖ∂‰∏≠ÁöÑÊï∞ÊçÆËÆæ‰∏∫nilÔºåÊúÄÂêéÊääËøô‰∏™entry‰ªéweakË°®‰∏≠Âà†Èô§ÔºåÊúÄÂêéÊ∏ÖÁêÜÂØπË±°ÁöÑËÆ∞ÂΩï„ÄÇËøΩÈóÆÁöÑÈóÆÈ¢ò‰∏ÄÔºö1.ÂÆûÁé∞weakÂêéÔºå‰∏∫‰ªÄ‰πàÂØπË±°ÈáäÊîæÂêé‰ºöËá™Âä®‰∏∫nilÔºüruntime ÂØπÊ≥®ÂÜåÁöÑÁ±ªÔºå ‰ºöËøõË°åÂ∏ÉÂ±ÄÔºåÂØπ‰∫é weak ÂØπË±°‰ºöÊîæÂÖ•‰∏Ä‰∏™ hash Ë°®‰∏≠„ÄÇ Áî® weak ÊåáÂêëÁöÑÂØπË±°ÂÜÖÂ≠òÂú∞ÂùÄ‰Ωú‰∏∫ keyÔºåÂΩìÊ≠§ÂØπË±°ÁöÑÂºïÁî®ËÆ°Êï∞‰∏∫ 0 ÁöÑÊó∂ÂÄô‰ºö deallocÔºåÂÅáÂ¶Ç weak ÊåáÂêëÁöÑÂØπË±°ÂÜÖÂ≠òÂú∞ÂùÄÊòØ a ÔºåÈÇ£‰πàÂ∞±‰ºö‰ª• a ‰∏∫ÈîÆÔºå Âú®Ëøô‰∏™ weak Ë°®‰∏≠ÊêúÁ¥¢ÔºåÊâæÂà∞ÊâÄÊúâ‰ª• a ‰∏∫ÈîÆÁöÑ weak ÂØπË±°Ôºå‰ªéËÄåËÆæÁΩÆ‰∏∫ nil „ÄÇËøΩÈóÆÁöÑÈóÆÈ¢ò‰∫åÔºö2.ÂΩìweakÂºïÁî®ÊåáÂêëÁöÑÂØπË±°Ë¢´ÈáäÊîæÊó∂ÔºåÂèàÊòØÂ¶Ç‰ΩïÂéªÂ§ÑÁêÜweakÊåáÈíàÁöÑÂë¢Ôºü1„ÄÅË∞ÉÁî®objc_release2„ÄÅÂõ†‰∏∫ÂØπË±°ÁöÑÂºïÁî®ËÆ°Êï∞‰∏∫0ÔºåÊâÄ‰ª•ÊâßË°ådealloc3„ÄÅÂú®dealloc‰∏≠ÔºåË∞ÉÁî®‰∫Ü_objc_rootDeallocÂáΩÊï∞4„ÄÅÂú®_objc_rootDealloc‰∏≠ÔºåË∞ÉÁî®‰∫Üobject_disposeÂáΩÊï∞5„ÄÅË∞ÉÁî®objc_destructInstance6„ÄÅÊúÄÂêéË∞ÉÁî®objc_clear_deallocating,ËØ¶ÁªÜËøáÁ®ãÂ¶Ç‰∏ãÔºöa. ‰ªéweakË°®‰∏≠Ëé∑ÂèñÂ∫üÂºÉÂØπË±°ÁöÑÂú∞ÂùÄ‰∏∫ÈîÆÂÄºÁöÑËÆ∞ÂΩïb. Â∞ÜÂåÖÂê´Âú®ËÆ∞ÂΩï‰∏≠ÁöÑÊâÄÊúâÈôÑÊúâ weak‰øÆÈ•∞Á¨¶ÂèòÈáèÁöÑÂú∞ÂùÄÔºåËµãÂÄº‰∏∫ nilc. Â∞ÜweakË°®‰∏≠ËØ•ËÆ∞ÂΩïÂà†Èô§d. ‰ªéÂºïÁî®ËÆ°Êï∞Ë°®‰∏≠Âà†Èô§Â∫üÂºÉÂØπË±°ÁöÑÂú∞ÂùÄ‰∏∫ÈîÆÂÄºÁöÑËÆ∞ÂΩï5.ÂÅáÂ¶ÇControllerÂ§™ËáÉËÇøÔºåÂ¶Ç‰Ωï‰ºòÂåñÔºü1.Â∞ÜÁΩëÁªúËØ∑Ê±ÇÊäΩË±°Âà∞ÂçïÁã¨ÁöÑÁ±ª‰∏≠Êñπ‰æøÂú®Âü∫Á±ª‰∏≠Â§ÑÁêÜÂÖ¨ÂÖ±ÈÄªËæëÔºõÊñπ‰æøÂú®Âü∫Á±ª‰∏≠Â§ÑÁêÜÁºìÂ≠òÈÄªËæëÔºå‰ª•ÂèäÂÖ∂ÂÆÉ‰∏Ä‰∫õÂÖ¨ÂÖ±ÈÄªËæëÔºõÊñπ‰æøÂÅöÂØπË±°ÁöÑÊåÅ‰πÖÂåñ„ÄÇ2.Â∞ÜÁïåÈù¢ÁöÑÂ∞ÅË£ÖÊäΩË±°Âà∞‰∏ìÈó®ÁöÑÁ±ª‰∏≠ÊûÑÈÄ†‰∏ìÈó®ÁöÑ UIView ÁöÑÂ≠êÁ±ªÔºåÊù•Ë¥üË¥£Ëøô‰∫õÊéß‰ª∂ÁöÑÊãºË£Ö„ÄÇËøôÊòØÊúÄÂΩªÂ∫ïÂíå‰ºòÈõÖÁöÑÊñπÂºèÔºå‰∏çËøáÁ®çÂæÆÈ∫ªÁÉ¶‰∏Ä‰∫õÁöÑÊòØÔºå‰Ω†ÈúÄË¶ÅÊääËøô‰∫õÊéß‰ª∂ÁöÑ‰∫ã‰ª∂ÂõûË∞ÉÂÖàÊé•ÁÆ°ÔºåÂÜçÈÉΩ‰∏Ä‰∏ÄÊö¥Èú≤Âõû Controller„ÄÇ3.ÊûÑÈÄ† ViewModelÂÄüÈâ¥MVVM„ÄÇÂÖ∑‰ΩìÂÅöÊ≥ïÂ∞±ÊòØÂ∞Ü ViewController Áªô View ‰º†ÈÄíÊï∞ÊçÆËøô‰∏™ËøáÁ®ãÔºåÊäΩË±°ÊàêÊûÑÈÄ† ViewModel ÁöÑËøáÁ®ã„ÄÇ4.‰∏ìÈó®ÊûÑÈÄ†Â≠òÂÇ®Á±ª‰∏ìÈó®Êù•Â§ÑÁêÜÊú¨Âú∞Êï∞ÊçÆÁöÑÂ≠òÂèñ„ÄÇ5.Êï¥ÂêàÂ∏∏Èáè6.È°πÁõÆ‰∏≠ÁΩëÁªúÂ±ÇÂ¶Ç‰ΩïÂÅöÂÆâÂÖ®Â§ÑÁêÜÔºü 1„ÄÅÂ∞ΩÈáè‰ΩøÁî®httpshttpsÂèØ‰ª•ËøáÊª§ÊéâÂ§ßÈÉ®ÂàÜÁöÑÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇhttpsÂú®ËØÅ‰π¶Áî≥ËØ∑ÔºåÊúçÂä°Âô®ÈÖçÁΩÆÔºåÊÄßËÉΩ‰ºòÂåñÔºåÂÆ¢Êà∑Á´ØÈÖçÁΩÆ‰∏äÈÉΩÈúÄË¶ÅÊäïÂÖ•Á≤æÂäõÔºåÊâÄ‰ª•Áº∫‰πèÂÆâÂÖ®ÊÑèËØÜÁöÑÂºÄÂèë‰∫∫ÂëòÂÆπÊòìË∑≥ËøáhttpsÔºåÊàñËÄÖÊãñÂà∞‰ª•ÂêéÈÅáÂà∞ÈóÆÈ¢òÂÜç‰ºòÂåñ„ÄÇhttpsÈô§‰∫ÜÊÄßËÉΩ‰ºòÂåñÈ∫ªÁÉ¶‰∏Ä‰∫õ‰ª•Â§ñÂÖ∂‰ªñÈÉΩÊØîÊÉ≥Ë±°‰∏≠ÁöÑÁÆÄÂçïÔºåÂ¶ÇÊûúÊ≤°Á≤æÂäõ‰ºòÂåñÊÄßËÉΩÔºåËá≥Â∞ëÂú®Ê≥®ÂÜåÁôªÂΩïÊ®°ÂùóÈúÄË¶ÅÂêØÁî®httpsÔºåËøôÈÉ®ÂàÜ‰∏öÂä°ÂØπÊÄßËÉΩË¶ÅÊ±ÇÊØîËæÉ‰Ωé„ÄÇ2„ÄÅ‰∏çË¶Å‰º†ËæìÊòéÊñáÂØÜÁ†Å‰∏çÁü•ÈÅìÁé∞Âú®ËøòÊúâÂ§öÂ∞ëappÂêéÂè∞ÊòØÊòéÊñáÂ≠òÂÇ®ÂØÜÁ†ÅÁöÑ„ÄÇÊó†ËÆ∫ÂÆ¢Êà∑Á´ØÔºåserverËøòÊòØÁΩëÁªú‰º†ËæìÈÉΩË¶ÅÈÅøÂÖçÊòéÊñáÂØÜÁ†ÅÔºåË¶Å‰ΩøÁî®hashÂÄº„ÄÇÂÆ¢Êà∑Á´Ø‰∏çË¶ÅÂÅö‰ªª‰ΩïÂØÜÁ†ÅÁõ∏ÂÖ≥ÁöÑÂ≠òÂÇ®ÔºåhashÂÄº‰πü‰∏çË°å„ÄÇÂ≠òÂÇ®tokenËøõË°å‰∏ã‰∏ÄÊ¨°ÁöÑËÆ§ËØÅÔºåËÄå‰∏îtokenÈúÄË¶ÅËÆæÁΩÆÊúâÊïàÊúüÔºå‰ΩøÁî®refreshtokenÂéªÁî≥ËØ∑Êñ∞ÁöÑtoken„ÄÇ3„ÄÅPostÂπ∂‰∏çÊØîGetÂÆâÂÖ®‰∫ãÂÆû‰∏äÔºåPostÂíåGet‰∏ÄÊ†∑‰∏çÂÆâÂÖ®ÔºåÈÉΩÊòØÊòéÊñá„ÄÇÂèÇÊï∞ÊîæÂú®QueryStringÊàñËÄÖBodyÊ≤°‰ªª‰ΩïÂÆâÂÖ®‰∏äÁöÑÂ∑ÆÂà´„ÄÇÂú®HttpÁöÑÁéØÂ¢É‰∏ãÔºå‰ΩøÁî®PostÊàñËÄÖGetÈÉΩÈúÄË¶ÅÂÅöÂä†ÂØÜÂíåÁ≠æÂêçÂ§ÑÁêÜ„ÄÇ4„ÄÅ‰∏çË¶Å‰ΩøÁî®301Ë∑≥ËΩ¨301Ë∑≥ËΩ¨ÂæàÂÆπÊòìË¢´HttpÂä´ÊåÅÊîªÂáª„ÄÇÁßªÂä®Á´Øhttp‰ΩøÁî®301ÊØîÊ°åÈù¢Á´ØÊõ¥Âç±Èô©ÔºåÁî®Êà∑Áúã‰∏çÂà∞ÊµèËßàÂô®Âú∞ÂùÄÔºåÊó†Ê≥ïÂØüËßâÂà∞Ë¢´ÈáçÂÆöÂêëÂà∞‰∫ÜÂÖ∂‰ªñÂú∞ÂùÄ„ÄÇÂ¶ÇÊûú‰∏ÄÂÆöË¶Å‰ΩøÁî®ÔºåÁ°Æ‰øùË∑≥ËΩ¨ÂèëÁîüÂú®httpsÁöÑÁéØÂ¢É‰∏ãÔºåËÄå‰∏îhttpsÂÅö‰∫ÜËØÅ‰π¶ÁªëÂÆöÊ†°È™å„ÄÇ5„ÄÅhttpËØ∑Ê±ÇÈÉΩÂ∏¶‰∏äMACÊâÄÊúâÂÆ¢Êà∑Á´ØÂèëÂá∫ÁöÑËØ∑Ê±ÇÔºåÊó†ËÆ∫ÊòØÊü•ËØ¢ËøòÊòØÂÜôÊìç‰ΩúÔºåÈÉΩÂ∏¶‰∏äMACÔºàMessage AuthenticationCodeÔºâ„ÄÇMAC‰∏ç‰ΩÜËÉΩ‰øùËØÅËØ∑Ê±ÇÊ≤°ÊúâË¢´ÁØ°ÊîπÔºàIntegrityÔºâÔºåËøòËÉΩ‰øùËØÅËØ∑Ê±ÇÁ°ÆÂÆûÊù•Ëá™‰Ω†ÁöÑÂêàÊ≥ïÂÆ¢Êà∑Á´ØÔºàSigningÔºâ„ÄÇÂΩìÁÑ∂ÂâçÊèêÊòØ‰Ω†ÂÆ¢Êà∑Á´ØÁöÑkeyÊ≤°ÊúâË¢´Ê≥ÑÊºèÔºåÂ¶Ç‰Ωï‰øùËØÅÂÆ¢Êà∑Á´ØkeyÁöÑÂÆâÂÖ®ÊòØÂè¶‰∏Ä‰∏™ËØùÈ¢ò„ÄÇMACÂÄºÁöÑËÆ°ÁÆóÂèØ‰ª•ÁÆÄÂçïÁöÑÂ§ÑÁêÜ‰∏∫hashÔºàrequestparamsÔºãkeyÔºâ„ÄÇÂ∏¶‰∏äMAC‰πãÂêéÔºåÊúçÂä°Âô®Â∞±ÂèØ‰ª•ËøáÊª§ÊéâÁªùÂ§ßÈÉ®ÂàÜÁöÑÈùûÊ≥ïËØ∑Ê±Ç„ÄÇMACËôΩÁÑ∂Â∏¶ÊúâÁ≠æÂêçÁöÑÂäüËÉΩÔºåÂíåRSAËØÅ‰π¶ÁöÑÁîµÂ≠êÁ≠æÂêçÊñπÂºèÂç¥‰∏ç‰∏ÄÊ†∑ÔºåÂéüÂõ†ÊòØMACÁ≠æÂêçÂíåÁ≠æÂêçÈ™åËØÅ‰ΩøÁî®ÁöÑÊòØÂêå‰∏Ä‰∏™keyÔºåËÄåRSAÊòØ‰ΩøÁî®ÁßÅÈí•Á≠æÂêçÔºåÂÖ¨Èí•È™åËØÅÔºåMACÁöÑÁ≠æÂêçÂπ∂‰∏çÂÖ∑Â§áÊ≥ïÂæãÊïàÂ∫î„ÄÇ6„ÄÅhttpËØ∑Ê±Ç‰ΩøÁî®‰∏¥Êó∂ÂØÜÈí•È´òÂª∂ËøüÁöÑÁΩëÁªúÁéØÂ¢É‰∏ãÔºå‰∏çÁªè‰ºòÂåñhttpsÁöÑ‰ΩìÈ™åÁ°ÆÂÆû‰ºöÊòéÊòæ‰∏çÂ¶Çhttp„ÄÇÂú®‰∏çÂÖ∑Â§áhttpsÊù°‰ª∂ÊàñÂØπÁΩëÁªúÊÄßËÉΩË¶ÅÊ±ÇËæÉÈ´ò‰∏îÁº∫‰πèhttps‰ºòÂåñÁªèÈ™åÁöÑÂú∫ÊôØ‰∏ãÔºåhttpÁöÑÊµÅÈáè‰πüÂ∫îËØ•‰ΩøÁî®AESËøõË°åÂä†ÂØÜ„ÄÇAESÁöÑÂØÜÈí•ÂèØ‰ª•Áî±ÂÆ¢Êà∑Á´ØÊù•‰∏¥Êó∂ÁîüÊàêÔºå‰∏çËøáËøô‰∏™‰∏¥Êó∂ÁöÑAESkeyÈúÄË¶Å‰ΩøÁî®ÊúçÂä°Âô®ÁöÑÂÖ¨Èí•ËøõË°åÂä†ÂØÜÔºåÁ°Æ‰øùÂè™ÊúâËá™Â∑±ÁöÑÊúçÂä°Âô®ÊâçËÉΩËß£ÂºÄËøô‰∏™ËØ∑Ê±ÇÁöÑ‰ø°ÊÅØÔºåÂΩìÁÑ∂ÊúçÂä°Âô®ÁöÑresponse‰πüÈúÄË¶Å‰ΩøÁî®ÂêåÊ†∑ÁöÑAESkeyËøõË°åÂä†ÂØÜ„ÄÇÁî±‰∫éhttpÁöÑÂ∫îÁî®Âú∫ÊôØÈÉΩÊòØÁî±ÂÆ¢Êà∑Á´ØÂèëËµ∑ÔºåÊúçÂä°Âô®ÂìçÂ∫îÔºåÊâÄ‰ª•ËøôÁßçÁî±ÂÆ¢Êà∑Á´ØÂçïÊñπÁîüÊàêÂØÜÈí•ÁöÑÊñπÂºèÂèØ‰ª•‰∏ÄÂÆöÁ®ãÂ∫¶‰∏ä‰æøÊç∑ÁöÑ‰øùËØÅÈÄö‰ø°ÂÆâÂÖ®„ÄÇ7„ÄÅAES‰ΩøÁî®CBCÊ®°Âºè‰∏çË¶Å‰ΩøÁî®ECBÊ®°ÂºèÔºåËÆ∞ÂæóËÆæÁΩÆÂàùÂßãÂåñÂêëÈáèÔºåÊØè‰∏™blockÂä†ÂØÜ‰πãÂâçË¶ÅÂíå‰∏ä‰∏™blockÁöÑÁßòÊñáËøõË°åËøêÁÆó„ÄÇ7.main()‰πãÂâçÁöÑËøáÁ®ãÊúâÂì™‰∫õÔºü1„ÄÅmain‰πãÂâçÁöÑÂä†ËΩΩËøáÁ®ã1Ôºâdyld ÂºÄÂßãÂ∞ÜÁ®ãÂ∫è‰∫åËøõÂà∂Êñá‰ª∂ÂàùÂßãÂåñ2Ôºâ‰∫§Áî±ImageLoader ËØªÂèñ imageÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÊàë‰ª¨ÁöÑÁ±ªÔºåÊñπÊ≥ïÁ≠âÂêÑÁßçÁ¨¶Âè∑ÔºàClass„ÄÅProtocol „ÄÅSelector„ÄÅ IMPÔºâ3ÔºâÁî±‰∫éruntime Âêëdyld ÁªëÂÆö‰∫ÜÂõûË∞ÉÔºåÂΩìimageÂä†ËΩΩÂà∞ÂÜÖÂ≠òÂêéÔºådyld‰ºöÈÄöÁü•runtimeËøõË°åÂ§ÑÁêÜ4Ôºâruntime Êé•ÊâãÂêéË∞ÉÁî®map_imagesÂÅöËß£ÊûêÂíåÂ§ÑÁêÜ5ÔºâÊé•‰∏ãÊù•load_images ‰∏≠Ë∞ÉÁî®call_load_methodsÊñπÊ≥ïÔºåÈÅçÂéÜÊâÄÊúâÂä†ËΩΩËøõÊù•ÁöÑClassÔºåÊåâÁªßÊâøÂ±ÇÊ¨°‰æùÊ¨°Ë∞ÉÁî®ClassÁöÑ+loadÂíåÂÖ∂‰ªñCategoryÁöÑ+loadÊñπÊ≥ï6ÔºâËá≥Ê≠§ ÊâÄÊúâÁöÑ‰ø°ÊÅØÈÉΩË¢´Âä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠7ÔºâÊúÄÂêédyldË∞ÉÁî®ÁúüÊ≠£ÁöÑmainÂáΩÊï∞Ê≥®ÊÑèÔºödyld‰ºöÁºìÂ≠ò‰∏ä‰∏ÄÊ¨°Ê≥®ÊÑèÔºödyld‰ºöÁºìÂ≠ò‰∏ä‰∏ÄÊ¨°Ê≥®ÊÑèÔºödyld‰ºöÁºìÂ≠ò‰∏ä‰∏Ä Ê¶ÇÂøµÈÉ®ÂàÜstructÂíåclassÁöÑÂå∫Âà´Ôºü struct‰∏≠‰∏çËÉΩÂÆö‰πâÂáΩÊï∞ÔºàÈíàÂØπÈù¢ÂêëËøáÁ®ãËØ≠Ë®ÄÔºå‰æãÂ¶ÇCÔºâ// ÂèØ‰∏çÁî® ‰ΩøÁî®Â§ßÊã¨Âè∑ËøõË°åÂàùÂßãÂåñ classÂíåstructÂ¶ÇÊûúÂÆö‰πâ‰∫ÜÊûÑÈÄ†ÂáΩÊï∞ÔºåÂ∞±‰∏çËÉΩÁî®Â§ßÊã¨Âè∑ÂàùÂßãÂåñÔºåËã•Ê≤°ÊúâÔºåÂàôstructÂèØ‰ª•ÔºåclassÂè™ÊúâÂú®ÊâÄÊúâÊàêÂëòÂèòÈáèÂùá‰∏∫publicÊó∂ÊâçË°å„ÄÇ // ÂèØ‰∏çÁî® ÈªòËÆ§ËÆøÈóÆÊùÉÈôê classÈªòËÆ§ÊàêÂëòËÆøÈóÆÊùÉÈôê‰∏∫privateÔºõstructÈªòËÆ§ËÆøÈóÆ‰Ω†ÊùÉÈôê‰∏∫public„ÄÇ // ÈáçÁÇπ ÁªßÊâøÊñπÂºè classÈªòËÆ§privateÔºõstructÈªòËÆ§public„ÄÇ // ÈáçÁÇπ ËØ¥Âá∫‰ª•‰∏ãÊåáÈíàÁöÑÂê´‰πâÔºö1234int **a : ÊåáÂêë‰∏Ä‰∏™ÊåáÈíàÁöÑÊåáÈíàÔºåËØ•ÊåáÈíàÊåáÂêë‰∏Ä‰∏™Êï¥Êï∞„ÄÇint *a[10] : ÊåáÂêë‰∏Ä‰∏™Êúâ10‰∏™ÊåáÈíàÁöÑÊï∞ÁªÑÔºåÊØè‰∏™ÊåáÈíàÊåáÂêë‰∏Ä‰∏™Êï¥Êï∞„ÄÇint (*a)[10] : ÊåáÂêë‰∏Ä‰∏™Êúâ10‰∏™Êï¥Êï∞Êï∞ÁªÑÁöÑÊåáÈíà„ÄÇint (*a)(int) : ÊåáÂêë‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÊåáÈíàÔºåËØ•ÂáΩÊï∞Êúâ‰∏Ä‰∏™Êï¥Êï∞ÂèÇÊï∞ÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™Êï¥Êï∞„ÄÇ int Âíå NSInterger ÁöÑÂå∫Âà´Ôºö ‰ª•CËØ≠Ë®Ä‰∏æ‰æãÔºåintÂíålongÁöÑÂ≠óËäÇÊï∞ÂíåÂΩìÂâçÊìç‰ΩúÁ≥ªÁªü‰∏≠ÁöÑÊåáÈíàÊâÄÂç†‰ΩçÊï∞ÊòØÁõ∏Á≠âÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÔºålongÁöÑÈïøÂ∫¶Ê∞∏Ëøú ‚â• intÔºåÂπ∂‰∏îÊàë‰ª¨ÈúÄË¶ÅÂéªËÄÉËôëÊ≠§Êó∂ÊòØ‰ΩøÁî®intËøòÊòØlongÊØîËæÉÂêàÈÄÇÔºå‰ºö‰∏ç‰ºöÂõ†‰∏∫‰∏ÄÊó∂ÁñèÂøΩÈÄâÊã©‰∫ÜintËÄåÂØºËá¥‰ΩçÊï∞‰∏çÂ§üÈÄ†ÊàêÊ∫¢Âá∫„ÄÇ ËÄåÂú®OC‰∏≠‰ΩøÁî® NSInterger ÔºåËãπÊûúÂØπÂÖ∂ËøõË°å‰∫Ü‰∏Ä‰∏™ÂÆèÂÆö‰πâÁöÑÂà§Êñ≠Ôºàcmd+Èº†Ê†áÂ∑¶ÈîÆËøõÂéªÁúãÂêßÔºâÔºåËøô‰∏™ÂÆèÂÆö‰πâ‰ºöËá™Âä®Âà§Êñ≠ÂΩìÂâçAppËøêË°åÁöÑÁ°¨‰ª∂ÁéØÂ¢ÉÔºåÂà∞Â∫ïÊòØ32‰ΩçÊú∫ËøòÊòØ64‰ΩçÊú∫Á≠âÁ≠âÔºå‰ªéËÄåËá™Âä®ËøîÂõûÊúÄÂ§ßÁöÑÁ±ªÂûãÔºåËÄå‰∏çÁî®Êàë‰ª¨ÂéªÊÄùËÄÉÊ≠§Êó∂Âà∞Â∫ïÂ∫îËØ•ÊòØÁî®intËøòÊòØlong„ÄÇ Ê∑±Êã∑Ë¥ùÂíåÊµÖÊã∑Ë¥ùÁöÑÂå∫Âà´Ôºö ÊµÖÊã∑Ë¥ùÔºöÂèàÁß∞‚ÄúÊåáÈíàÊã∑Ë¥ù‚Äù„ÄÇ‰∏çÂ¢ûÂä†Êñ∞ÂÜÖÂ≠òÔºåÂè™Â¢ûÂä†‰∏Ä‰∏™ÊåáÈíàÊåáÂêëÂéüÊù•ÁöÑÂÜÖÂ≠òÂå∫Âüü„ÄÇ Ê∑±Êã∑Ë¥ùÔºöÂèàÁß∞‚ÄúÂÜÖÂÆπÊã∑Ë¥ù‚Äù„ÄÇÂêåÊó∂Êã∑Ë¥ùÊåáÊ≠£ÂíåÊåáÈíàÊâÄÊåáÂêëÁöÑÂÜÖÂ≠òÔºåÊñ∞Â¢ûÊåáÈíàÊåáÂêëÊñ∞Â¢ûÂÜÖÂ≠ò„ÄÇ // ÂèØÂØπOC‰∏≠ÁöÑÂèØÂèòÂØπË±°Âíå‰∏çÂèØÂèòÂØπË±°ÂÅöÊãìÂ±ïÔºåÊ≠§ÈóÆÈ¢òÂè™ÊòØÂçïÁ∫ØÁöÑÊ¶ÇÂøµ„ÄÇ ÂÜÖÂ≠ò‰∏≠ÁöÑÂå∫ÂüüÊòØÊÄé‰πàÂàíÂàÜÁöÑÔºü Áî®‰πãÂâçÂÅöÁöÑ‰∏ÄÂº†ÂõæËøõË°åÊèèËø∞Ôºö ËØ≠Ë®ÄÈÉ®ÂàÜnil„ÄÅNil„ÄÅNULLÂíåNSNULLÁöÑÂå∫Âà´Ôºö nilÔºö ÊääÂØπË±°ÁΩÆÁ©∫ÔºåÁΩÆÁ©∫ÂêéÊòØ‰∏Ä‰∏™Á©∫ÂØπË±°‰∏îÂÆåÂÖ®‰ªéÂÜÖÂ≠ò‰∏≠ÈáäÊîæÔºõ NilÔºö Áî®nilÁöÑÂú∞ÊñπÂùáÂèØÁî®NilÊõøÊç¢ÔºåNilË°®Á§∫ÁΩÆÁ©∫‰∏Ä‰∏™Á±ªÔºõ NULLÔºö Ë°®Á§∫Êää‰∏Ä‰∏™ÊåáÈíàÁΩÆÁ©∫„ÄÇÔºàÁ©∫ÊåáÈíàÔºâ NSNULLÔºö Êää‰∏Ä‰∏™OCÂØπË±°ÁΩÆÁ©∫Ôºå‰ΩÜÊÉ≥‰øùÁïôÂÖ∂ÂÆπÂô®ÔºàÂ§ßÂ∞èÔºâ„ÄÇ categoryÂíåextensionÁöÑÂå∫Âà´Ôºö categoryÔºö‰∏∫Â∑≤Áü•Á±ªÂ¢ûÂä†Êñ∞ÊñπÊ≥ï„ÄÇ Êñ∞Â¢ûÊñπÊ≥ïË¢´Â≠êÁ±ªÈõÜÊàêÔºõ Êñ∞Â¢ûÁöÑÊñπÊ≥ïÊØîÂéüÊúâÁ±ªÂÖ∑Â§áÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ßÔºå‰∏î‰∏çÂèØÈáçÂêçÔºåÈò≤Ê≠¢Ë¢´Ë¶ÜÁõñÔºõ ‰∏çËÉΩÂ¢ûÂä†ÊàêÂëòÂèòÈáè„ÄÇ extensionÔºö ‰∏∫ÂΩìÂâçÁ±ªÂ¢ûÂä†ÁßÅÊúâÂèòÈáèÂíåÁßÅÊúâÊñπÊ≥ïÔºåÊ∑ªÂä†ÁöÑÊñπÊ≥ïÊòØÂøÖÈ°ªÂÆûÁé∞ÁöÑ„ÄÇ @PropertyÂÖ≥ÈîÆËØçÂèäÂÖ∂Áõ∏ÂÖ≥ÂÖ≥ÈîÆÂ≠óÁöÑÁêÜËß£Ôºö Ê†πÊçÆË¢´‰øÆÊîπÁöÑÂèØËÉΩÊÄßÔºå„ÄÅ@Property‰∏≠ÂÖ≥ÈîÆÂ≠óÁöÑÊéíÂàóÊé®Ëçê‰∏∫ÔºöÂéüÂ≠êÊÄß„ÄÅËØªÂÜôÊÄß„ÄÅÂÜÖÂ≠òÁÆ°ÁêÜÁâπÊÄßÔºõ ÂéüÂ≠êÊÄßÔºö automaticÂíånonautomatic„ÄÇÂÜ≥ÂÆö‰∫ÜËØ•Â±ûÊÄßÊòØÂê¶‰∏∫ÂéüÂ≠êÊÄßÁöÑÔºåÂç≥Âú®Â§öÁ∫øÁ®ãÁöÑÊìç‰Ωú‰∏≠Ôºå‰∏çËÉΩË¢´ÂÖ∂ÂÆÉÁ∫øÁ®ãÊâìÊñ≠ÁöÑÁâπÊÄßÔºå‰∏ÄÊó¶‰ΩøÁî®‰∫ÜËØ•ÂèòÈáèÁöÑÊìç‰Ωú‰∏çËÉΩË¢´ÂÆåÊï¥ÊâßË°åÊó∂ÔºåÂ∞Ü‰ºöÂõûÂà∞ËØ•ÂèòÈáèÊìç‰Ωú‰πãÂâçÁöÑÁä∂ÊÄÅÔºå‰ΩÜÂéüÂ≠êÊÄßÂç≥automaticÂõ†‰∏∫ÊòØÂéüËØ≠Êìç‰ΩúÔºà‰øùËØÅsetter/getterÁöÑÂéüËØ≠ÊâßË°åÔºâÔºå‰ºöÊçüËÄóÊÄßËÉΩÔºåÂú®iOSÂºÄÂèë‰∏≠‰∏ÄËà¨‰∏çÁî®ÔºåËÄåÂú®macOSÂºÄÂèë‰∏≠ÈöèÊÑè„ÄÇ ËØªÂÜôÊÄßÔºö readOnlyÂíåreadWrite„ÄÇÈªòËÆ§‰∏∫readWriteÔºåÁºñËØëÂô®‰ºöÂ∏ÆÂä©ÁîüÊàêserter/getterÊñπÊ≥ïÔºåËÄåreadOnlyÂè™‰ºöÂ∏ÆÂä©ÁîüÊàêgetterÊñπÊ≥ï„ÄÇ // Ê≠§Â§ÑÂèØÊãìÂ±ïÔºåÈùûË¶Å‰øÆÊîπreadOnly‰øÆÈ•∞ÁöÑÂèòÈáèÊÄé‰πàÂäûÔºåÂèØÁî®KVCÔºåÂèàÂèØÁªßÁª≠ÊãìÂ±ïKVCÁõ∏ÂÖ≥Áü•ËØÜ„ÄÇ ÂÜÖÂ≠òÁÆ°ÁêÜÁâπÊÄßÔºö assign„ÄÅweak„ÄÅstrong„ÄÅunsafe_unretained„ÄÇ assignÔºö‰∏ÄËà¨Áî®‰∫éÂÄºÁ±ªÂûãÔºåÊØîÂ¶Çint„ÄÅBOOLÁ≠âÔºàËøòÂèØÁî®‰∫é‰øÆÈ•∞OCÂØπË±°Ôºõ weakÔºöÁî®‰∫é‰øÆÈ•∞ÂºïÁî®Á±ªÂûãÔºàÂº±ÂºïÁî®ÔºåÂè™ËÉΩ‰øÆÈ•∞OCÂØπË±°ÔºâÔºõ strongÔºöÁî®‰∫é‰øÆÈ•∞ÂºïÁî®Á±ªÂûãÔºàÂº∫ÂºïÁî®ÔºâÔºõ unsafeunretainedÔºöÂè™Áî®‰∫é‰øÆÈ•∞ÂºïÁî®Á±ªÂûãÔºàÂº±ÂºïÁî®ÔºâÔºå‰∏éweakÁöÑÂå∫Âà´Âú®‰∫éÔºåË¢´unsafeunretained‰øÆÈ•∞ÁöÑÂØπË±°Ë¢´ÈîÄÊØÅÂêéÔºåÂÖ∂ÊåáÈíàÂπ∂‰∏ç‰ºöË¢´Ëá™Âä®ÁΩÆÁ©∫ÔºåÊ≠§Êó∂ÊåáÂêë‰∫Ü‰∏Ä‰∏™ÈáéÂú∞ÂùÄ„ÄÇ OC‰∏≠Â¶Ç‰ΩïÂÆö‰πâ‰∏Ä‰∏™Êûö‰∏æÔºüÂú®OC‰∏≠ÂÆö‰πâ‰∏Ä‰∏™Êûö‰∏æÊúâ‰∏âÁßçÂÅöÊ≥ïÔºö Âõ†‰∏∫OCÊòØÂÖºÂÆπCÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•‰ΩøÁî®CËØ≠Ë®ÄÈ£éÊ†ºÁöÑenumËøõË°åÂÆö‰πâ„ÄÇ ‰ΩøÁî®NS_ENUMÂÆèËøõË°åÂÆö‰πâÔºõ ‰ΩøÁî®NS_OPTIONSÂÆèËøõË°åÂÆö‰πâÔºõ NS_ENUM‰∏∫ÂÆö‰πâÈÄöÁî®ÊÄßÊûö‰∏æÔºåÂè™ËÉΩÂçïÈÄâÔºåNS_OPTIONS‰∏∫ÂÆö‰πâ‰ΩçÁßªÊûö‰∏æÔºåÂèØÂ§öÈÄâ„ÄÇ // Êûö‰∏æ‰∏∫Âï•Ë¶ÅËøô‰πàÂàÜÔºüÂõ†‰∏∫Ê∂âÂèäÂà∞ÊòØÂê¶‰ΩøÁî®C++Ê®°ÂºèËøõË°åÁºñËØëÊúâÂÖ≥„ÄÇ BlockÂíåÂáΩÊï∞ÁöÑÂÖ≥Á≥ªÔºàÂØπBlockÁöÑÁêÜËß£ÔºâÔºü Block‰∏éÂáΩÊï∞ÊåáÈíàÈùûÂ∏∏Á±ª‰ººÔºå‰ΩÜBlockËÉΩÂ§üËÆøÈóÆÂáΩÊï∞‰ª•Â§ñ„ÄÅËØçÊ≥ï‰ΩúÁî®Âüü‰ª•Â§ñÁöÑÂ§ñÈÉ®ÂèòÈáèÁöÑÂÄºÔºõ Block‰∏ç‰ªÖÂÆûÁé∞‰∫ÜÂáΩÊï∞ÁöÑÂäüËÉΩÔºåËøòÊê∫Â∏¶‰∫ÜÂáΩÊï∞ÁöÑÊâßË°åÁéØÂ¢ÉÔºõ BlockÂÆûÈôÖ‰∏äÊòØÊåáÂêëÁªìÊûÑ‰ΩìÁöÑÊåáÈíàÔºõÔºàÂèØÂèÇËÄÉËøôÁØáÊñáÁ´†Ôºâ Block‰ºöÊääËøõÂÖ•ÂÖ∂ÂÜÖÈÉ®ÁöÑÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂèòÈáèÂΩìÂÅöÂ∏∏ÈáèÂ§ÑÁêÜ„ÄÇ„Äë BlockÊâßË°åÁöÑÊòØ‰∏Ä‰∏™ÂõûË∞ÉÔºåÂπ∂‰∏çÁü•ÈÅìÂÖ∂‰∏≠ÁöÑÂØπË±°ÂêàÈÄÇË¢´ÈáäÊîæÔºåÊâÄ‰ª•‰∏∫‰∫ÜÈò≤Ê≠¢Âú®‰ΩøÁî®ÂØπË±°‰πãÂâçÂ∞±Ë¢´ÈáäÊîæÊéâ‰∫ÜÔºå‰ºöËá™Âä®ÁªôÂÖ∂ÂÜÖÈÉ®ÊâÄ‰ΩøÁî®ÁöÑÂØπË±°ËøõË°åretain‰∏ÄÊ¨°„ÄÇ Block‰ΩøÁî®copy‰øÆÈ•∞Á¨¶ËøõË°å‰øÆÈ•∞Ôºå‰∏î‰∏çËÉΩ‰ΩøÁî®retainËøõË°å‰øÆÈ•∞ÔºåÂõ†‰∏∫retainÂè™ÊòØËøõË°å‰∫Ü‰∏ÄÊ¨°ÂõûË∞ÉÔºå‰ΩÜblockÁöÑÂÜÖÂ≠òËøòÊòØÊîæÂú®‰∫ÜÊ†àÁ©∫Èó¥‰∏≠ÔºåÂú®Ê†à‰∏äÁöÑÂèòÈáèÈöèÊó∂‰ºöË¢´Á≥ªÁªüÂõûÊî∂Ôºå‰∏îBlockÂú®ÂàõÂª∫ÁöÑÊó∂ÂÄôÂÜÖÂ≠òÈªòËÆ§Â∞±Â∑≤ÁªèÂàÜÈÖçÂú®Ê†àÁ©∫Èó¥‰∏≠ÔºåÂÖ∂Êú¨Ë∫´ÁöÑ‰ΩúÁî®ÂüüÈôê‰∫éÂÖ∂ÂàõÂª∫Êó∂Ôºå‰∏ÄÊó¶Âú®Ë∂ÖÂá∫ÂÖ∂ÂàõÂª∫Êó∂ÁöÑ‰ΩúÁî®Âüü‰πãÂ§ñ‰ΩøÁî®ÔºåÂàô‰ºöÂØºËá¥Á®ãÂ∫èÁöÑÂ¥©Ê∫ÉÔºåÊïÖ‰ΩøÁî®copy‰øÆÈ•∞Ôºå‰ΩøÂÖ∂Êã∑Ë¥ùÂà∞Â†ÜÁ©∫Èó¥‰∏≠ÔºåblockÊúâÊó∂Ëøò‰ºöÁî®Âà∞‰∏Ä‰∫õÊú¨Âú∞ÂèòÈáèÔºåÂè™ÊúâÂ∞ÜÂÖ∂copyÂà∞Â†ÜÁ©∫Èó¥‰∏≠ÔºåÊâçËÉΩ‰ΩøÁî®Ëøô‰∫õÂèòÈáè„ÄÇ deletegateÈúÄË¶Åweak‰øÆÈ•∞ÁöÑÂéüÂõ†Ôºü‰ª•ÂõæËØ¥ÊòéÔºåÂõæ‰∏≠ÊâÄË°®Á§∫ÁöÑÊòØVCÂØπtableViewÁöÑÊåÅÊúâÔºåÂ¶ÇÊûúÊ≠§Êó∂ÁöÑtableView.deletegateÂØπVC‰πüÊòØÂº∫ÂºïÁî®Ôºå‰ºöÂØºËá¥Âæ™ÁéØÂºïÁî®ÔºåÂêåÊó∂‰πüÁªô‰∫ÜÊàë‰ª¨Êï≤‰∫ÜË≠¶ÈíüÔºåÂΩìÂá∫Áé∞‰∏§‰∏™ÂØπË±°ÈÉΩÊòØÂº∫ÂºïÁî®Êó∂Ôºå‰∏áÂàÜÂ∞èÂøÉÔºÅ Ëß£Èáä‰∏Ä‰∏ãËøôÊÆµ‰ª£Á†ÅÁöÑËæìÂá∫Ôºö ÁÆÄÂÜôÔºö 123456789Computer : NSObjectMac : Computer@implementation MacNSLog(@&quot;%@&quot;, [self class]);NSLog(@&quot;%@&quot;, [super class])@end ‰∫åËÄÖÈÉΩ‰ºöËæìÂá∫Mac„ÄÇ [self class]ÔºöÂΩì‰ΩøÁî®selfË∞ÉÁî®ÊñπÊ≥ïÊó∂Ôºå‰ªéÂΩìÂâçÁ±ªÊñπÊ≥ïÂàóË°®‰∏≠ÊâæÔºåËã•Ê≤°ÊúâÂàôÂÜçÂéªÁà∂Á±ª‰∏≠Êâæ„ÄÇË∞ÉÁî®[self class]Êó∂Ôºå‰ºöËΩ¨ÂåñÊàêobjc_msgSendÂáΩÊï∞ÔºåÂÖ∂ÂÆö‰πâ‰∏∫id objc_msgSend(id self, SEL op, ‚Ä¶)ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØMacÂÆû‰æãÔºå‰ΩÜÂÖ∂Âπ∂Êó†-(Class)classÊñπÊ≥ïÔºåÊ≠§Êó∂ÂéªÁà∂Á±ªComputer‰∏≠ÂØªÊâæÔºåÂèëÁé∞‰πüÊ≤°ÊúâÔºåÂÜçÂéªÂÖ∂Áà∂Á±ªNSObject‰∏≠ÊâæÔºåÊâæÂà∞‰∫ÜÔºÅËøîÂõûÁöÑÂ∞±ÊòØselfÂÖ∂Êú¨Ë∫´ÔºåÂèØÁåúÊµãÂÖ∂ÊñπÊ≥ïÂÆûÁé∞Â¶Ç‰∏ãÔºö 123- (Class)class {return object_getClass(self);} [super class]Ôºö‰ªéÁà∂Á±ªÊñπÊ≥ïÂàóË°®‰∏≠ÂºÄÂßãÊâæÔºåË∞ÉÁî®Áà∂Á±ªÊñπÊ≥ï„ÄÇÂΩìË∞ÉÁî®[super class]Êó∂ÔºåËΩ¨Êç¢Êàêobjc_msgSendSuperÂáΩÊï∞ÔºåÂÖ∂ÂÆö‰πâ‰∏∫id objc_msgSendSuper(struct objc_super *super, SEL op, ‚Ä¶)ÔºåËÄåstruct objc_superÁªìÊûÑ‰ΩìÁöÑÂÆö‰πâ‰∏∫Ôºö 1234struct objc_super {__unsafe_unretained id receiver;__unsafe_unretained Class super_class;} ÊâÄ‰ª•ËΩ¨Êç¢Êàêobjc_msgSendSuperÂáΩÊï∞ÂêéÔºåÁ¨¨‰∏ÄÊ≠•Ë¶ÅÂÖàÂéªÊûÑÈÄ†objc_superÁªìÊûÑ‰ΩìÔºåÁªìÊûÑÁöÑÁ¨¨‰∏Ä‰∏™ÊàêÂëòreceiverÂ∞±ÊòØselfÔºåÁ¨¨‰∫å‰∏™ÊàêÂëòÊòØ(id)class_getSuperclass(object_getClass(‚ÄúMac‚Äù))ÔºåËØ•ÂáΩÊï∞ËæìÂá∫ÁöÑÁªìÊûú‰∏∫super_classÂÄºÔºåÂç≥ComputerÔºåÁ¨¨‰∫åÊ≠•ÔºåÂàôÂéªComputerÁ±ª‰∏≠ÂéªÊâæ- (Class)classÔºåÂèëÁé∞Âπ∂Êú™ÊâæÂà∞ÔºåÊé•ÁùÄÂéªNSObject‰∏≠ÊâæÔºåÊâæÂà∞‰∫ÜÔºÅÊúÄÂêéÊòØ‰ΩøÁî®‰∫Üobjc_msgSend(objc_super-&gt;receiver, @selector(class))ÂéªË∞ÉÁî®‰∫ÜÔºåËøô‰∏™Êó∂ÂÄôÂ∑≤ÁªèË∑ü‰πãÂâçÁöÑ[self class]Ë∞ÉÁî®ËæìÂá∫ÁªìÊûúÈáçÂ§ç‰∫ÜÔºåËøîÂõûÁªìÊûúËøòÊòØMac„ÄÇ iOSÈÉ®ÂàÜUITableViewÊÄßËÉΩË∞É‰ºòÁöÑÊñπÊ≥ïÔºö CellÈáçÁî®Ôºö Êï∞ÊçÆÊ∫êÊñπÊ≥ï‰ºòÂåñÔºöÂàõÂª∫‰∏Ä‰∏™ÈùôÊÄÅÂèòÈáèÈáçÁî®IDÔºå‰æãÂ¶ÇÔºöstatic NSString *cellID = @&quot;cellID&quot;;Èò≤Ê≠¢Âõ†‰∏∫Ë∞ÉÁî®Ê¨°Êï∞ËøáÂ§öÔºåstatic‰øùËØÅÂè™ÂàõÂª∫‰∏ÄÊ¨°ÔºåÊèêÈ´òÊÄßËÉΩÔºàÊÑüËßâÊÄßËÉΩÁöÑÊèêÂçáÂèØ‰ª•ÂøΩÁï•‰∏çËÆ∞emmmÔºâ ÁºìÂ≠òÊ±†Ëé∑ÂèñÂèØÈáçÁî®CellÁöÑ‰∏§‰∏™ÊñπÊ≥ïÔºö dequeueReusableCellWithIdentifier:(NSString *)ID‰ºöÊü•ËØ¢ÂèØÈáçÁî®CellÔºåËã•Ê≥®ÂÜå‰∫ÜÂéüÂûãCellÂàôËÉΩÂ§üÊü•ËØ¢Âà∞ÔºåÂê¶Âàô‰∏∫nilÔºåÊïÖÈúÄË¶ÅÂÖàÂà§Êñ≠if(cell == nil) dequeueReusableCellWithIdentifier:(NSString *)ID indexPath:(NSIndexPath *)indexPathÔºå‰ΩøÁî®‰πãÂâçÂøÖÈ°ªÈÄöËøáSB/classËøõË°åÂèØÈáçÁî®CellÁöÑÊ≥®ÂÜåÔºàregisterNib/registerClassÔºâÔºå‰∏çÈúÄË¶ÅÂà§Êñ≠nilÔºå‰∏ÄÂÆö‰ºöËøîÂõûcellÔºåËã•ÁºìÂÜ≤Âå∫Cell‰∏çÂ≠òÂú®Ôºå‰ºö‰ΩøÁî®ÂéüÂûãCellÈáçÊñ∞ÂÆû‰æãÂåñ‰∏Ä‰∏™Êñ∞Cell„ÄÇ Â∞ΩÈáè‰ΩøÁî®‰∏ÄÁßçÁ±ªÂûãÁöÑCellÔºöËÉΩÂ§üÂáèÂ∞ë‰ª£Á†ÅÈáèÔºåÂáèÂ∞èNibÊñá‰ª∂ÁöÑÊï∞ÈáèÔºõ‰øùËØÅÂè™Êúâ‰∏ÄÁßçÁ±ªÂûãÁöÑCellÔºåÂÆûÈôÖ‰∏äAppËøêÂêéÂè™ÊúâN‰∏™CellÔºå‰ΩÜËã•ÊúâMÁßçCellÔºåÂàôÂÆûÈôÖ‰∏äËøêË°åÊúÄÂ§öÂç¥ÂèØËÉΩ‰ºöÊòØMxN ‰∏™„ÄÇ ÂñÑÁî®hiddenÈöêËóèsubviewÔºöÊääÊâÄÊúâ‰∏çÂêåÁ±ªÂûãÁöÑviewÈÉΩÂÆö‰πâÂ•ΩÔºåÈÄöËøácellÁöÑÊûö‰∏æÁ±ªÂûãÂèòÈáèÂèähiddenÊòæÁ§∫/ÈöêËóè‰∏çÂêåÁ±ªÂûãÁöÑÂÜÖÂÆπÔºåÂõ†‰∏∫Âú®ÂÆûÈôÖÂø´ÈÄüÊªëÂä®‰∏≠ÔºåÂçïÁ∫ØÁöÑÊòæÁ§∫/ÈöêËóèsubviewÊØîÂÆûÊó∂ÂàõÂª∫Âø´ÂæóÂ§ö„ÄÇ ÊèêÂâçËÆ°ÁÆóÂπ∂ÁºìÂ≠òCellÁöÑÈ´òÂ∫¶„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰∏çÈ¢Ñ‰º∞Ë°åÈ´òÔºåÂàô‰ºòÂÖàË∞ÉÁî®heightForRowAtIndexPathËé∑ÂèñÊØè‰∏™CellÂç≥Â∞ÜÊòæÁ§∫ÁöÑÈ´òÂ∫¶ÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØË¶ÅÁ°ÆÂÆöÊÄªÁöÑtableView.contenSizeÔºåÊúÄÂêéÊâçÂèàÊé•ÁùÄË∞ÉÁî®cellForRowAtIndexPathÔºåÂèØ‰ª•Âª∫‰∏Ä‰∏™frameÊ®°ÂûãÔºå‰øùÂ≠ò‰∏ãÊèêÂâçËÆ°ÁÆóÂ•ΩÁöÑcellÈ´òÂ∫¶„ÄÇ ÂºÇÊ≠•ÁªòÂà∂ÔºöËøôÊòØÁõÆÂâçÊúÄÁÅ´ÁöÑtableViewÊÄßËÉΩË∞É‰ºòÊñπÊ≥ïÔºåÊñ∞Êµ™ÂæÆÂçöÊòØËøô‰πàÂÅöÁöÑÔºåÂèØ‰ª•‰ΩøÁî®ASDKËøô‰∏™Â∫ìËøõË°å„ÄÇ tableViewÊªëÂä®Êó∂ÔºåÊåâÈúÄÂä†ËΩΩÔºöËØÜÂà´tableViewÈùôÊ≠¢ÊàñÂáèÈÄüÊªëÂä®ÁªìÊùüÂêéÔºåÂºÇÊ≠•Âä†ËΩΩÔºåÂú®Âø´ÈÄüÊªëÂä®ËøáÁ®ã‰∏≠ÔºåÂè™ÊåâÈúÄÂä†ËΩΩÁõÆÊ†áÊñπ‰ΩçÂÜÖÁöÑCell„ÄÇ ÈÅøÂÖçÂ§ßÈáè‰ΩøÁî®ÂõæÁâáÁº©Êîæ„ÄÅÈ¢úËâ≤Ê∏êÂèò„ÄÅÈÄèÊòéÂõæÂ±Ç„ÄÅCALayerÁâπÊïàÔºàÈò¥ÂΩ±ÔºâÁ≠âÊìç‰ΩúÔºåÂ∞ΩÈáèÊòæÁ§∫Â§ßÂ∞èÂàöÂ•ΩÂêàÈÄÇÁöÑÂõæÁâáËµÑÊ∫ê„ÄÇ ÂÜÖÂ≠ò‰ºòÂåñÊñπÊ°àÔºö È¶ñÂÖàARC„ÄÇ‰ΩÜË¶ÅÊ≥®ÊÑèÈò≤Ê≠¢Âæ™ÁéØÂºïÁî®ÔºåÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÈú≤Ôºõ ÊáíÂä†ËΩΩ„ÄÇÂª∂ËøüÂàõÂª∫ÂØπË±°ÔºåÁî®Êó∂ÂÜçÂàõÂª∫Ôºõ Â§çÁî®„ÄÇÊØîÂ¶ÇtableView„ÄÅcollectionViewÂçïÂÖÉÊ†ºÁöÑÂ§çÁî®Ôºõ Â∑ßÂ¶ô‰ΩøÁî®Âçï‰æãÔºåËÄå‰∏çÊòØÂÖ®ÈÉΩ‰ΩøÁî®Âçï‰æãÔºÅ Âçï‰æãÁöÑÂÜôÊ≥ïÔºü12345678910111213141516171819static User *user;+ (User *)shareInstance { if (user == nil) { @synchronized(self) { // Âä†ÈîÅ user = [User alloc] init]; } } return user;}+ (User *)shareInstance { static dispatch_onec_t onecToken; dispatch_onece(&amp;onceToken, ^{ user = [User alloc] init; }) return user;} iOSÁöÑËøúÁ®ãÊé®ÈÄÅËøáÁ®ãÔºü‰ª•ÂõæËÆ≤Ëß£Ôºö iOS‰∏≠Â§öÁ∫øÁ®ãÁöÑÊ¶ÇÂøµÔºöÔºàÂçïÈóÆÊ¶ÇÂøµÔºâ Â§öÁ∫øÁ®ã‰ºòÁÇπÔºöÊèêÈ´òÁ®ãÂ∫èÊâßË°åÊïàÁéá„ÄÇÁº∫ÁÇπÔºöÂºÄÂêØÁ∫øÁ®ãÈúÄË¶Å‰∏ÄÂÆöÁöÑÂÜÖÂ≠òÊéß‰ª∂„ÄÇ ÂêåÊ≠•ÂíåÂºÇÊ≠•ÔºöÂÜ≥ÂÆö‰∫ÜË¶Å‰∏çË¶ÅÂºÄÂêØÊñ∞ÁöÑÁ∫øÁ®ã„ÄÇÂêåÊ≠•ÔºöÂú®ÂΩìÂâçÁ∫øÁ®ã‰∏≠ÊâßË°å‰ªªÂä°Ôºå‰∏çÂÖ∑Â§áÂºÄÂêØÊñ∞Á∫øÁ®ãËÉΩÂäõÔºõÂºÇÊ≠•ÔºöÂú®Êñ∞Á∫øÁ®ã‰∏≠ÊâßË°å‰ªªÂä°ÔºåÂÖ∑Â§áÂºÄÂêØÊñ∞Á∫øÁ®ãÁöÑËÉΩÂäõ„ÄÇ Âπ∂Ë°åÂíå‰∏≤Ë°åÔºöÂÜ≥ÂÆö‰∫Ü‰ªªÂä°ÁöÑÊâßË°åÊñπÂºè„ÄÇÂπ∂Ë°åÔºöÂ§ö‰∏™‰ªªÂä°Âπ∂ÂèëÔºàÂêåÊó∂ÔºâÊâßË°åÔºåÁ±ª‰ººËøÖÈõ∑Â§ö‰ªªÂä°ÂêåÊó∂‰∏ãËΩΩÔºõ‰∏≤Ë°åÔºö‰∏Ä‰∏™‰ªªÂä°ÊâßË°åÂÆåÊØïÂêéÔºåÂÜçÊâßË°å‰∏ã‰∏Ä‰∏™‰ªªÂä°ÔºåÁ±ª‰ºº‰∏Ä‰∏™‰∏Ä‰∏™‰∏ãËΩΩ„ÄÇ ÈáçÁÇπÔºö ÂøÖÈ°ªË¶ÅÊòéÁ°ÆiOS‰∏≠Âè™Êúâ‰∏Ä‰∏™‰∏ªÁ∫øÁ®ã‚Äî‚ÄîUIÁ∫øÁ®ãÔºå‰∏î‰∏çÂèØÂ∞ÜËÄóÊó∂‰ªªÂä°ÊîæÂú®‰∏ªÁ∫øÁ®ãÊâßË°åÔºåÂê¶Âàô‰ºöÈÄ†ÊàêÂç°È°ø„ÄÇ","link":"/ÁºñÁ®ã/Ô£ø/kaopu/"},{"title":"Ê∑±ÂÖ•ÂâñÊûê-WebKit","text":"HTML Ê†áÂáÜHTML HTML DOM Ê†ëÁöÑÊèíÂÖ•Áä∂ÊÄÅËßÑËåÉ https://html.spec.whatwg.org/multipage/parsing.html#the-insertion-mode HTML Tokenize ËßÑËåÉ https://html.spec.whatwg.org/multipage/parsing.html#tokenization https://dev.w3.org/html5/spec-preview/tokenization.html HTMLElement Â†ÜÊ†àËßÑËåÉ https://html.spec.whatwg.org/multipage/parsing.html#the-stack-of-open-elements ÊµèËßàÂô®ÂéÜÂè≤1990Âπ¥ Berners-Lee ÂèëÊòé‰∫Ü WorldWideWeb ÊµèËßàÂô®ÔºåÂêéÊîπÂêç NexusÔºåÂú®1991Âπ¥ÂÖ¨Â∏É‰∫ÜÊ∫êÁ†Å„ÄÇ 1993Âπ¥ Marc Andreessen ÁöÑÂõ¢ÈòüÂºÄÂèë‰∫Ü MosaicÔºå1994Âπ¥Êé®Âá∫Êàë‰ª¨ÁÜüÊÇâÁöÑ Netscape Navigator ÁΩëÊôØÊµèËßàÂô®ÔºåÂú®ÊúÄÁÅ´ÁàÜÁöÑÊó∂ÂÄôÊõæÂç†ÊòØÁªùÂ§ßÂ§öÊï∞‰∫∫ÁöÑÈÄâÊã©„ÄÇÂêåÊó∂‰ªñËøòÊàêÁ´ã‰∫ÜÁΩëÊôØÂÖ¨Âè∏„ÄÇ 1995Âπ¥ÂæÆËΩØÊé®Âá∫‰∫Ü Internet Explorer ÊµèËßàÂô®ÔºåÁÆÄÁß∞ IEÔºåÈÄöËøáÂÖçË¥πÁªëÂÆöËøõ Windows 95 Á≥ªÁªüÊúÄÁªàÊõø‰ª£‰∫Ü NetscapeÔºåËµ¢Âæó‰∫ÜÊµèËßàÂô®Â§ßÊàò„ÄÇ 1998Âπ¥ÁΩëÊôØÂÖ¨Âè∏ÊàêÁ´ã‰∫Ü Mozilla Âü∫Èáë‰ºöÁªÑÁªáÔºåÂêåÊó∂ÂºÄÊ∫êÊµèËßàÂô®‰ª£Á†ÅÔºå2004Âπ¥Êé®Âá∫ÊúâÂ§öÊ†áÁ≠æÂíåÊîØÊåÅÊâ©Â±ïÁöÑ Firefox ÁÅ´ÁãêÊµèËßàÂô®ÂºÄÂßãÊÖ¢ÊÖ¢ÁöÑÂç†È¢ÜÂ∏ÇÂú∫‰ªΩÈ¢ù„ÄÇ 2003Âπ¥ËãπÊûúÂèëÂ∏É‰∫Ü Safari ÊµèËßàÂô®Ôºå2005Âπ¥ÊîæÂá∫‰∫ÜÊ†∏ÂøÉÊ∫êÁ†Å WebKit„ÄÇ 2008Âπ¥ Google ‰ª•ËãπÊûúÁöÑ WebKit ‰∏∫ÂÜÖÊ†∏ÔºåÂª∫Á´ã‰∫ÜÊñ∞ÁöÑÈ°πÁõÆ ChromiumÔºåÂú®Ê≠§Âü∫Á°Ä‰∏äÂºÄÂèë‰∫ÜËá™Â∑±ÊµèËßàÂô® Chrome„ÄÇ 2012Âπ¥ WHATWG Âíå W3C Êé®Âá∫ HTML5 ÊäÄÊúØËßÑËåÉ„ÄÇHTML5 ÂåÖÂê´‰∫Ü10Â§ßÁ±ªÂà´Ôºåoffline Á¶ªÁ∫øÔºåstorage Â≠òÂÇ®Ôºåconnectivity ËøûÊé•Ôºåfile access Êñá‰ª∂ËÆøÈóÆÔºåsemantics ËØ≠‰πâÔºåaudio / video Èü≥È¢ëËßÜÈ¢ëÔºå3D/graphics 3DÂíåÂõæÂΩ¢Ôºåpresentation Â±ïÁ§∫Ôºåperformance ÊÄßËÉΩÂíå Nuts and bolts ÂÖ∂ÂÆÉ„ÄÇ ÂÆåÊï¥ÁöÑÊµèËßàÂô®ÂèëÂ±ïÂè≤ÂèØ‰ª•Âú®ËøôÈáåÁúãÔºöhttps://en.wikipedia.org/wiki/Timeline_of_web_browsers WebKit ÂÖ®Ë≤åÊû∂ÊûÑÂèØ‰ª•ÁúãÂà∞ÊµèËßàÂô®ÊäÄÊúØÁöÑÂèëÂ±ïÂà∞‰∫ÜÂêéÊúüÂü∫Êú¨ÈÉΩÊòØÂü∫‰∫é WebKit ÂºÄÂèëÁöÑÔºåÈÇ£‰πàÊàë‰ª¨Â∞±Êù•‰∫ÜËß£‰∏ã WebKit Âêß„ÄÇÂÖàÁúãÁúãÂÆÉÁöÑÂÖ®Ë≤å„ÄÇÂÖàÁúãÁúãÂÆÉÁöÑÂ§ßÊ®°ÂùóÔºöWebKit ‰∏∫‰∫ÜËÉΩÂ§üÂÖ∑Êúâ Chromium ÈÇ£Ê†∑ÁöÑÂ§öËøõÁ®ã‰ºòÁÇπËÄåÊé®Âá∫‰∫Ü WebKit2 ÊäΩË±°Âá∫‰∏ÄÁªÑÊñ∞ÁöÑÁºñÁ®ãÊé•Âè£Ôºå‰∏ãÈù¢ÊòØ WebKit2 ÁöÑËøõÁ®ãÁªìÊûÑÊ®°ÂûãÔºöÊï¥‰∏™ WebKit Êû∂ÊûÑÔºåÂ¶Ç‰∏ãÔºöÂÆûÁ∫øÈÉ®ÂàÜÊòØÂÖ±‰∫´ÁöÑÔºåËôöÁ∫øÈÉ®ÂàÜ‰ºöÊ†πÊçÆ‰∏çÂêåÁöÑÂπ≥Âè∞Êúâ‰∏çÂêåÁöÑÂÆûÁé∞„ÄÇ ‰∏ãÈù¢ÊòØ WebKit ÊúÄÊ†∏ÂøÉÊúÄÂ§çÊùÇÁöÑÊéíÁâàÂºïÊìé WebCore ÁöÑÁªìÊûÑÂõæÔºö Ëß£ÊûêÂêé‰ºö‰∫ßÁîü DOM TreeÔºåËß£Êûê CSS ‰ºö‰∫ßÁîü CSS Rule TreeÔºåJavascript ‰ºöÈÄöËøá DOM API Âíå CSS Object ModelÔºàCSSOMÔºâ API Êù•Êìç‰Ωú DOM Tree Âíå CSS Rule Tree„ÄÇ DOM Tree‰ªéÁΩëÈ°µ URL Âà∞ÊûÑÂª∫ÂÆå DOM Ê†ëÁöÑËøáÁ®ãÂ¶ÇÂõæ CSS Rule Tree ÈÄöËøá‰∏äÈù¢ÁöÑ‰∏§‰∏™Êï∞ÊûÑÈÄ†ÁöÑ Style Context Tree ÊµèËßàÂô®ÂºïÊìéÊúÄÂêé‰ºö ÈÄöËøá DOM Tree Âíå CSS Rule Tree Êù•ÊûÑÈÄ† Rendering Tree„ÄÇËøô‰∏™ËøáÁ®ãÂ¶Ç‰∏ãÔºö ËÆ°ÁÆóÊØè‰∏™ Node ÁöÑ‰ΩçÁΩÆÔºåÊâßË°å Layout ËøáÁ®ã Compute style ÊòØËÆ°ÁÆó CSS Ê†∑ÂºèÔºålayout ÊòØÂÆö‰ΩçÂùêÊ†áÂíåÂ§ßÂ∞èÔºåÂêÑÁßç positionÔºåoverflowÔºåz-index Á≠â„ÄÇËøô‰∫õÁÆ≠Â§¥Ë°®Á§∫Âä®ÊÄÅ‰øÆÊîπ‰∫Ü DOM Â±ûÊÄßÂíå CSS Â±ûÊÄß‰ºöÂØºËá¥ Layout ÊâßË°å„ÄÇ WebKit Ê∫ê‰ª£Á†ÅÁªìÊûÑËØ¥Êòé JavaScriptCoreÔºöÈªòËÆ§ JavaScript ÂºïÊìéÔºåGoogle Â∑≤Áªè‰ΩøÁî®‰∫Ü V8 ‰Ωú‰∏∫ÂÖ∂ Chromium ÁöÑ JS ÂºïÊìé„ÄÇ WebCoreÔºöÊµèËßàÂô®Ê∏≤ÊüìÂºïÊìéÔºåÂåÖÂê´‰∫ÜÂêÑ‰∏™Ê†∏ÂøÉÊ®°Âùó„ÄÇ WebCore/cssÔºöCSS Ëß£ÈáäÂô®ÔºåCSS ËßÑÂàôÁ≠â„ÄÇ WebCore/domÔºöÂêÑÁßç DOM ÂÖÉÁ¥†Âíå DOM Tree ÁªìÊûÑÁõ∏ÂÖ≥ÁöÑÁ±ª„ÄÇ WebCore/htmlÔºöHTML Ëß£ÈáäÂô®ÂíåÂêÑÁßç HTML ÂÖÉÁ¥†Á≠âÁõ∏ÂÖ≥ÂÜÖÂÆπ„ÄÇ WebCore/renderingÔºöRender Object Áõ∏ÂÖ≥ÔºåËøòÊúâÈ°µÈù¢Ê∏≤ÊüìÁöÑÊ†∑ÂºèÂíåÂ∏ÉÂ±ÄÁ≠â„ÄÇ WebCore/inspectorÔºöÁΩëÈ°µË∞ÉËØïÂ∑•ÂÖ∑„ÄÇ WebCore/loaderÔºö‰∏ªËµÑÊ∫êÂíåÊ¥æÁîüËµÑÊ∫êÁöÑÂä†ËΩΩÁõ∏ÂÖ≥ÂÆûÁé∞ÔºåËøòÊúâÊ¥æÁîüËµÑÊ∫êÁöÑ Memory Cache Á≠â„ÄÇ WebCore/pageÔºöÈ°µÈù¢Áõ∏ÂÖ≥ÁöÑÊìç‰ΩúÔºåÈ°µÈù¢ÁªìÊûÑÂíå‰∫§‰∫í‰∫ã‰ª∂Á≠â„ÄÇ WebCore/platformÔºöÂêÑ‰∏™Âπ≥Âè∞Áõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÔºåÊØîÂ¶Ç iOSÔºåMac Á≠â WebCore/storageÔºöÂ≠òÂÇ®Áõ∏ÂÖ≥ÔºåÊØîÂ¶Ç WebStorageÔºåIndex DB Á≠âÊé•Âè£ÁöÑÂÆûÁé∞„ÄÇ WebCore/workersÔºöWorker Á∫øÁ®ãÂ∞ÅË£ÖÔºåÊèê‰æõ JS Â§öÁ∫øÁ®ãÊâßË°åÁéØÂ¢É„ÄÇ WebCore/xmlÔºöXML Áõ∏ÂÖ≥ÊØîÂ¶Ç XML ParserÔºåXPathÔºåXSLT Á≠â„ÄÇ WebCore/accessibilityÔºöÂõæÂΩ¢Êéß‰ª∂ËÆøÈóÆÊé•Âè£„ÄÇ WebCore/bindingsÔºöDOM ÂÖÉÁ¥†Âíå JS ÁªëÂÆöÁöÑÊé•Âè£„ÄÇ WebCore/bridgeÔºöCÔºåJavaScript Âíå Objective-C ÁöÑÊ°•Êé•„ÄÇ WebCore/editingÔºöÈ°µÈù¢ÁºñËæëÁõ∏ÂÖ≥ÔºåÊØîÂ¶Ç DOM ‰øÆÊîπÔºåÊãºÂÜôÊ£ÄÊü•Á≠â„ÄÇ WebCore/historyÔºöPage Cache ÂÆûÁé∞ÂâçËøõÂêéÈÄÄÊµèËßàËÆ∞ÂΩïÁ≠â„ÄÇ WebCore/mathmlÔºöÊï∞Â≠¶Ë°®ËææÂºèÂú®ÁΩëÈ°µ‰∏≠ÁöÑËßÑËåÉ‰ª£Á†ÅÂÆûÁé∞„ÄÇ WebCore/pluginsÔºöNPPlugin ÁöÑÊîØÊåÅÊé•Âè£ WebCore/svgÔºöÁü¢ÈáèÂõæÂΩ¢ÁöÑÊîØÊåÅ„ÄÇ WebKitÔºöÂπ≥Âè∞Áõ∏ÂÖ≥ÁöÑÊé•Âè£ÔºåÊØè‰∏™ÁõÆÂΩïÈÉΩÊòØ‰∏çÂêåÁöÑÂπ≥Âè∞Êé•Âè£ÂÆûÁé∞„ÄÇ WTFÔºöÂü∫Á°ÄÁ±ªÂ∫ìÔºåÁ±ª‰ºº C++ ÁöÑ STL Â∫ìÔºåÊúâÊØîÂ¶ÇÂ≠óÁ¨¶‰∏≤Êìç‰ΩúÔºåÊô∫ËÉΩÊåáÈíàÔºåÁ∫øÁ®ãÁ≠â„ÄÇ DumpRenderTreeÔºöÁî®‰∫éÁîüÊàê RenderTree TestWebKitAPIÔºöÊµãËØï WebKit ÁöÑ API ÁöÑÊµãËØï‰ª£Á†Å WebKit ‰ª£Á†ÅÈ£éÊ†º ÂÜÖÂ≠òÁÆ°ÁêÜÔºö‰ΩøÁî®ÁöÑÂºïÁî®ËÆ°Êï∞ÔºåÂú® RefCounted Ê®°ÊùøÁ±ªÈáåÊúâ ref() Âä†Âíå unref() ÂáèÊù•ËøõË°åÊéßÂà∂ÔºåÂæàÂ§öÁ±ªÈÉΩÊòØÁªßÊâø‰∫ÜËøô‰∏™Ê®°ÊùøÁ±ª„ÄÇÂêéÊúüÂä†ÂÖ•‰∫Ü RefPtr Âíå PassRefPtr Êô∫ËÉΩÊåáÈíàÊ®°ÊùøÁ±ªÔºåÈááÁî®ÁöÑÊòØÈáçËΩΩËµãÂÄºÊìç‰ΩúÁ¨¶ÁöÑÊñπÂºèËÉΩÂ§üËá™Âä®ÂÆåÊàêËÆ°Êï∞Âä†ÂáèÔºåËøôÊ†∑Âü∫Êú¨Ê≤°ÊúâÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÂèØËÉΩ„ÄÇ ‰ª£Á†ÅËá™Âä®ÁîüÊàêÔºöC++ ÂØπË±°Âà∞ JS ÂØπË±°ÁöÑ Binding ÂÆûÁé∞‰ΩøÁî®ÁöÑÊòØ‰ª£Á†ÅËá™Âä®ÁîüÊàêÔºåÁî® Perl ËÑöÊú¨ Ê†πÊçÆ IDL Êé•Âè£ÊèèËø∞Êñá‰ª∂ÂÆåÊàê‰ª£Á†ÅËá™Âä®ÁîüÊàê„ÄÇËøòÊúâÈÉ®ÂàÜ CSS Âíå HTML Ëß£Êûê‰πüÁî®Âà∞‰∫ÜÔºåËøôÊ†∑ CSS Â±ûÊÄßÂÄºÂíå HTML Ê†áÁ≠æÂ±ûÊÄßÁöÑÊ∑ªÂä†‰πüÂ§üËäÇÁúÅÂ§ßÈáèÊó∂Èó¥ÔºåÈúÄË¶Å‰øÆÊîπ .in ÈÖçÁΩÆÊñá‰ª∂Âç≥ÂèØ„ÄÇ ‰ª£Á†ÅÁºñÂÜôÈ£éÊ†ºÔºöÂèØ‰ª•Âú®ÂÆòÁΩëÊü•ÁúãÂà∞Ôºöhttps://webkit.org/code-style-guidelines/ ÊÉ≥Áªô WebKit ÂÅöË¥°ÁåÆÁöÑÂêåÂ≠¶‰ª¨ÂèØ‰ª•Â•ΩÂ•ΩÁúãÁúã‰∫Ü„ÄÇ WebKit ÁöÑËÆæËÆ°Ê®°Âºè‰∏ãÈù¢ÂèØ‰ª•ÁúãÁúãÂú® WebKit Èáå‰ΩøÁî®‰∫ÜÂì™‰∫õËÆæËÆ°Ê®°ÂºèÔºåÊòØÂ¶Ç‰Ωï‰ΩøÁî®ÁöÑ„ÄÇ Âçï‰æãÔºöWebKit ÈáåÁöÑ Loader ÁÆ°ÁêÜ CacheResource Â∞±ÊòØÂçï‰æãÊ®°Âºè„ÄÇ Â∑•ÂéÇÊ®°ÂºèÔºöÂèØ‰ª•Âú® WebKit Ê∫êÁ†ÅÈáåÊêúÁ¥¢ÁªìÂ∞æÊòØ Factory ÁöÑ‰ª£Á†ÅÔºåÂÆÉ‰ª¨‰∏ÄËà¨ÈÉΩÊòØÁî®ÁöÑÂ∑•ÂéÇÊ®°Âºè„ÄÇ ËßÇÂØüËÄÖÊ®°ÂºèÔºöÂêçÁß∞ÁªìÂ∞æÊòØ Client ÈÉΩÊòØËßÇÂØüËÄÖÊ®°ÂºèÔºåÊØîÂ¶Ç FrameLoaderClient ÂèØ‰ª•ÁúãÊàêÊòØËßÇÂØüËÄÖÁ±ªÔºåË¢´ËßÇÂØüËÄÖ FrameLoader ‰ºöÂêë Client ËßÇÂØüËÄÖÁ±ªÈÄöÁü•Ëá™Ë∫´Áä∂ÊÄÅÁöÑÂèòÂåñ„ÄÇ ÁªÑÂêàÊ®°ÂºèÔºöÁî®‰∫éÊ†ëÁä∂ÁªìÊûÑÂØπË±°ÔºåÊØîÂ¶Ç DOM TreeÔºåRender TreeÔºåÁªÑÊàêÂÆÉ‰ª¨ÁöÑÁ±ª ContainerNode Âíå RenderObject ÂèØ‰ª•ÁúãÊàêÁªÑÂêàÊ®°Âºè„ÄÇ ÂëΩ‰ª§Ê®°ÂºèÔºöDOM Ê®°ÂùóÁöÑ Event Á±ªÂíå Editing Ê®°ÂùóÁöÑ Command Á±ªÈÉΩÊòØÂëΩ‰ª§Ê®°Âºè„ÄÇ ‰∏ªË¶ÅÁ±ªÊï¥‰Ωì FrameÔºö‰∏≠ÂøÉÁ±ªÔºåÈÄöËøáÂÆÉÊâæÂÖ∂ÂÆÉÁ±ª FrameLoaderÔºöÂä†ËΩΩËµÑÊ∫êÁî®ÁöÑ DocumentÔºöÂÖ∑‰ΩìÂÆûÁé∞ÊòØ HTMLDocument PageÔºöÁ™óÂè£ÁöÑÊìç‰Ωú EventHandlerÔºöËæìÂÖ•‰∫ã‰ª∂ÁöÑÂ§ÑÁêÜÔºåÊØîÂ¶ÇÈîÆÁõòÔºåÈº†Ê†áÔºåËß¶Â±èÁ≠â WebCore::Frame FrameTreeÔºöÁÆ°ÁêÜÁà∂ Frame ÂíåÂ≠ê Frame ÁöÑÂÖ≥Á≥ªÔºåÊØîÂ¶Ç main frame ÈáåÁöÑ iframe„ÄÇ FrameLoaderÔºöframe ÁöÑÂä†ËΩΩ NavigationSchedulerÔºö‰∏ªË¶ÅÁî®Êù•ÁÆ°ÁêÜÈ°µÈù¢Ë∑≥ËΩ¨ÔºåÊØîÂ¶ÇÈáçÂÆöÂêëÔºåmeta refresh Á≠â„ÄÇ DOMWindowÔºöÁÆ°ÁêÜ DOM Áõ∏ÂÖ≥ÁöÑ‰∫ã‰ª∂ÔºåÂ±ûÊÄßÂíåÊ∂àÊÅØ„ÄÇ FrameViewÔºöFrame ÁöÑÊéíÁâà„ÄÇ DocumentÔºöÁî®Êù•ÁÆ°ÁêÜ DOM ÈáåÁöÑ nodeÔºåÊØè‰∏™ tag ÈÉΩ‰ºöÊúâÂØπÂ∫îÁöÑ DOM node ÂÖ≥ËÅî„ÄÇ ScriptControllerÔºöÁÆ°ÁêÜ js ËÑöÊú¨„ÄÇ EditorÔºöÁÆ°ÁêÜÈ°µÈù¢ÊØîÂ¶Ç copyÔºåpasteÂíåËæìÂÖ•Á≠âÁºñËæëÊìç‰Ωú„ÄÇ SelectionControllerÔºöÁÆ°ÁêÜ Frame ÈáåÁöÑÈÄâÊã©Êìç‰Ωú„ÄÇ AnimationControlleÔºöÂä®ÁîªÊéßÂà∂„ÄÇ EventHandlerÔºöÂ§ÑÁêÜ‰∫ã‰ª∂ÊØîÂ¶ÇÈº†Ê†áÔºåÊåâÈîÆÔºåÊªöÂä®Âíå resize Á≠â‰∫ã‰ª∂„ÄÇ Ê∏≤ÊüìÂºïÊìé‰∏äÂõæÂèØ‰ª•ÁúãÂà∞Ê∏≤ÊüìÂºïÊìéÂ§Ñ‰∫éÊµèËßàÂô®‰∏âÂ±ÇÁªìÊûÑÁöÑÊúÄ‰∏äÂ±Ç„ÄÇ‰∏ãÈù¢ÊòØÊ∏≤ÊüìÁöÑËøáÁ®ãÔºö Frame ÁöÑ‰∏ªË¶ÅÊé•Âè£Create123456Ref&lt;Frame&gt; Frame::create(Page* page, HTMLFrameOwnerElement* ownerElement, FrameLoaderClient* client){ ASSERT(page); ASSERT(client); return adoptRef(*new Frame(*page, ownerElement, *client));} Frame::create Èáå‰ºöË∞ÉÁî®Âà∞ Frame ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÂàõÂª∫ Frame ÂØπË±°„ÄÇÂàùÂßãË∞ÉÁî®È°∫Â∫è 123456webPage::setViewwebPage::setViewportSizewebPage::mainFramewebPagePrivate::createMainFramewebFrameData::webFrameDataFrame::create Ëß£Êûê‰∏≠ÂèëÁé∞ iframe Êó∂ÁöÑË∞ÉÁî®È°∫Â∫è 12345678FrameLoader::finishedLoadingHTMLDocumentParser::appendHTMLTreeBuilder::processTokenHTMLElementBase::openURLSubFrameLoader::requestFrameFrameLoaderClient::creatFramewebFrameData::webFrameDataFrame::create createView12345c++void Frame::createView(const IntSize&amp; viewportSize, const Color&amp; backgroundColor, bool transparent, const IntSize&amp; fixedLayoutSize, const IntRect&amp; fixedVisibleContentRect, bool useFixedLayout, ScrollbarMode horizontalScrollbarMode, bool horizontalLock, ScrollbarMode verticalScrollbarMode, bool verticalLock) ‰ºöÂàõÂª∫Âá∫Áî®‰∫éÊéíÁâàÁöÑ FrameView ÂØπË±°„ÄÇÈúÄË¶Å‰∏Ä‰∫õÂíåÊéíÁâàÁõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶ÇÂàùÂßã viewport ÁöÑÂ§ßÂ∞èÔºåËÉåÊôØËâ≤ÔºåÊªöÂä®Êù°Ê®°ÂºèÁ≠âÔºåÂÆåÊàêÂàõÂª∫Ë∞ÉÁî® Frame::setView ËÆæÁΩÆ‰∏∫ÂΩìÂâç FrameView„ÄÇË∞ÉÁî®È°∫Â∫è 12345c++FrameLoader::commitProvisionalLoadFrameLoader::transitionToCommittedFrameLoaderClient::transitionToCommittedForNewPageFrame::createView setDocument12c++void Frame::setDocument(RefPtr&lt;Document&gt;&amp;&amp; newDocument) Áî®Êù•ÂÖ≥ËÅî Frame Âíå Document ÂØπË±°Frame ÂàùÂßãÂåñË∞ÉÁî®È°∫Â∫è 1234567c++WebFrame::webFramewebFramePrivate::initFrame::initFrameLoader::initDocumentWriter::beginFrame::setDocument js ËÑöÊú¨Êõ¥ÊîπÊï∞ÊçÆÊó∂ÁöÑË∞ÉÁî®È°∫Â∫è 1234567891011c++DocumentLoader::receivedDataDocumentLoader::commitLoadFrameLoaderClient::committedLoadDocumentLoader::commitDataDocumentWriter::setEncodingDocumentWriter::willSetEncodingFrameLoader::receivedFirstDataDocumentWriter::beginFrameLoader::clearFrame::setDocument WTFÂÖ®Áß∞ÊòØ Web Template LibraryÔºåÊòØ WebKit ÁöÑÂü∫Á°ÄÂ∫ìÔºåÂÆûÁé∞‰∫ÜÊô∫ËÉΩÊåáÈíàÔºåÂ≠óÁ¨¶‰∏≤Âíå ContainerÔºåÊèê‰æõË∑®Âπ≥Âè∞ÂéüÂ≠êÊìç‰ΩúÔºåÊó∂Èó¥ÂíåÁ∫øÁ®ãÁöÑÂ∞ÅË£ÖÔºåËÉΩÂ§üÈ´òÊïàÁöÑÂØπÂÜÖÂ≠òËøõË°åÁÆ°ÁêÜ„ÄÇWebCore ÈáåÈÉΩÊòØ WTF ÁöÑ‰ª£Á†ÅËÄåÊ≤°Êúâ STL„ÄÇ Smart ptr Êô∫ËÉΩÊåáÈíàÂØπÂéüÁîüÊåáÈíàÁöÑÂ∞ÅË£ÖÔºåËøôÊ†∑ C++ ÂèØ‰ª•Ëá™Âä®ÂåñÁöÑÂÆûÁé∞ËµÑÊ∫êÁÆ°ÁêÜÂíåÊåáÈíàË°çÁîüÊìç‰ΩúÊØîÂ¶ÇÊã∑Ë¥ùÔºåÂºïÁî®ËÆ°Êï∞ÔºåautoLocker Âíå Lazy evaluation Á≠â„ÄÇ Êô∫ËÉΩÊåáÈíà‰∏ªË¶ÅÂ∞±ÊòØÂÆûÁé∞Âä®ÊÄÅÂàÜÈÖçÂØπË±°ÁöÑÂÜÖÂ≠òÂπ∂‰∏îËÉΩËá™Âä®ÂõûÊî∂ÔºåÂéüÁêÜÂ∞±ÊòØÊô∫ËÉΩÊåáÈíàÁöÑÂØπË±°‰ºö‰Ωú‰∏∫Ê†à‰∏äÂàÜÈÖçÁöÑËá™Âä®ÂèòÈáèÂú®ÈÄÄÂá∫‰ΩúÁî®ÂüüÊó∂Ë¢´Ëá™Âä®ÊûêÊûÑ„ÄÇ Êô∫ËÉΩÊåáÈíàÁöÑÂÆûÁé∞ÊñπÂºèÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243template &lt;typename T&gt;class SmartPtr { public: typedef T ValueType; typedef ValueType *PtrType; //ÊûÑÈÄ†ÊûêÊûÑÂáΩÊï∞ SmartPtr() :m_ptr(NULL) {} SmartPtr(PtrType ptr) :m_ptr(ptr) {} ~SmartPtr() { if(m_ptr) delete m_ptr; } //Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ SmartPtr(const SmartPtr&lt;T&gt;&amp; o); //Â†Ü‰∏äÂàÜÈÖçÁöÑÂØπË±° template&lt;typename U&gt; SmartPtr(const SmartPtr&lt;U&gt;&amp; o); //Êã∑Ë¥ùËµãÂÄºËøêÁÆóÁ¨¶ template&lt;typename U&gt; SmartPtr&amp; operator = (const SmartPtr&lt;U&gt;&amp; o); //ÊåáÈíàËøêÁÆóÔºåÊòØ‰∏∫‰∫ÜËÆ©Êô∫ËÉΩÊåáÈíàÂú®Ë°å‰∏∫‰∏äÊõ¥Á±ª‰ººÂéüÁîüÊåáÈíà ValueType&amp; operator*() const { return *m_ptr; } PtrType operator-&gt;() const { return m_ptr; } //ÈÄªËæëËøêÁÆóÁ¨¶ÈáçËΩΩ //ÂØπÊåáÈíàÊòØÂê¶‰∏∫Á©∫ÁöÑÁÆÄÊ¥ÅÂà§Êñ≠ if(!ptr)ÔºåÂ¶ÇÊûúÂÆö‰πâ‰∫Ü operator!() Êô∫ËÉΩÊåáÈíàÂ∞±ÂèØ‰ª•Áî® if(!SmartPtr) bool operator!() const { return !m_ptr; } //ËΩ¨Êàê raw ptr operator PtrType() { return m_ptr; } private: PtrType m_ptr;}//ÂàõÂª∫Êô∫ËÉΩÊåáÈíàÂØπË±°Ê†ºÂºèSmartPtr(new ValueType()); RefPtrRefPtr ÈúÄË¶ÅÊìç‰ΩúÂØπË±°Êù•ÂºïÁî®ËÆ°Êï∞ÔºåÂåÖÂê´ ref() Âíå deref() ÊñπÊ≥ïÁöÑÁ±ªÂØπË±°ÊâçÂèØ‰ª•Áî± RefPtr ÂºïÁî®„ÄÇ‰∏∫‰∫Ü‰∏çËÆ© RefPtr ÂºïÁî®ÁöÑÁ±ªÈÉΩÁî®ÊâãÂ∑•ÂéªÊ∑ªÂä† ref() Âíå deref() WTF Êèê‰æõ‰∫Ü RefCounted Á±ªÊ®°ÊùøÔºåÂú® WTF/Source/wtf/RefCounted.h Èáå„ÄÇÁ±ªÊ®°ÊùøÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106class RefCountedBase {public: void ref() const {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT_WITH_SECURITY_IMPLICATION(!m_deletionHasBegun); ASSERT(!m_adoptionIsRequired);#endif ++m_refCount; } bool hasOneRef() const {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT(!m_deletionHasBegun);#endif return m_refCount == 1; } unsigned refCount() const { return m_refCount; } void relaxAdoptionRequirement() {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT_WITH_SECURITY_IMPLICATION(!m_deletionHasBegun); ASSERT(m_adoptionIsRequired); m_adoptionIsRequired = false;#endif }protected: RefCountedBase() : m_refCount(1)#if CHECK_REF_COUNTED_LIFECYCLE , m_deletionHasBegun(false) , m_adoptionIsRequired(true)#endif { } ~RefCountedBase() {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT(m_deletionHasBegun); ASSERT(!m_adoptionIsRequired);#endif } // Returns whether the pointer should be freed or not. bool derefBase() const {#if CHECK_REF_COUNTED_LIFECYCLE ASSERT_WITH_SECURITY_IMPLICATION(!m_deletionHasBegun); ASSERT(!m_adoptionIsRequired);#endif ASSERT(m_refCount); unsigned tempRefCount = m_refCount - 1; if (!tempRefCount) {#if CHECK_REF_COUNTED_LIFECYCLE m_deletionHasBegun = true;#endif return true; } m_refCount = tempRefCount; return false; }#if CHECK_REF_COUNTED_LIFECYCLE bool deletionHasBegun() const { return m_deletionHasBegun; }#endifprivate:#if CHECK_REF_COUNTED_LIFECYCLE friend void adopted(RefCountedBase*);#endif mutable unsigned m_refCount;#if CHECK_REF_COUNTED_LIFECYCLE mutable bool m_deletionHasBegun; mutable bool m_adoptionIsRequired;#endif};template&lt;typename T&gt; class RefCounted : public RefCountedBase { WTF_MAKE_NONCOPYABLE(RefCounted); WTF_MAKE_FAST_ALLOCATED;public: void deref() const { if (derefBase()) delete static_cast&lt;const T*&gt;(this); }protected: RefCounted() { } ~RefCounted() { }}; ‰∏äÈù¢ÂèØ‰ª•ÁúãÂà∞ RefCounted Á±ªÂÆö‰πâÊúâ RefCountedBase Á±ªÂíå RefCounted Á±ªÔºåRefCounted Á±ª‰ºöË¢´Â§ßÈáèÁªßÊâøÔºå‰ªª‰ΩïÁ±ªÂ¶ÇÊûúÊÉ≥Ë¢´ RefPtr ÂºïÁî®Âè™ÈúÄË¶ÅÁªßÊâø RefCountedÂç≥ÂèØ„ÄÇÂú® RefPtr.h ÈáåÂèØ‰ª•ÁúãÂà∞ refIfNotNull Âíå derefIfNotNull ÂÆö‰πâ‰∫ÜËÆ°Êï∞ÁöÑÂ¢ûÂä†ÂíåÂáèÂ∞ë„ÄÇ Assert Êñ≠Ë®ÄÁöÑÂÆûÁé∞ÂíåÂ∫îÁî®Êñ≠Ë®ÄÂú® WTF ÈáåÊòØËøôÊ†∑ÂÆö‰πâÁöÑ 1234567891011121314151617181920212223242526272829303132333435 c++#define ASSERT(assertion) do { \\ if (!(assertion)) { \\ //ÊâìÂç∞Áî® WTFReportAssertionFailure(__FILE__, __LINE__, WTF_PRETTY_FUNCTION, #assertion); \\ //ÈáçÁÇπ CRASH(); \\ } \\} while (0)#ifndef CRASH#if defined(NDEBUG) &amp;&amp; OS(DARWIN)// Crash with a SIGTRAP i.e EXC_BREAKPOINT.// We are not using __builtin_trap because it is only guaranteed to abort, but not necessarily// trigger a SIGTRAP. Instead, we use inline asm to ensure that we trigger the SIGTRAP.#define CRASH() do { \\ //Áõ¥Êé• inline Ê±áÁºñ‰ª£Á†Å WTFBreakpointTrap(); \\ __builtin_unreachable(); \\} while (0)#else#define CRASH() WTFCrash()#endif#endif // !defined(CRASH)//Ê†πÊçÆ‰∏çÂêå CPU ÂÆö‰πâ‰∏çÂêåÁöÑ WTFBreakpointTrap() Ê±áÁºñÂÆè#if CPU(X86_64) || CPU(X86)#define WTFBreakpointTrap() __asm__ volatile (&quot;int3&quot;)#elif CPU(ARM_THUMB2)#define WTFBreakpointTrap() __asm__ volatile (&quot;bkpt #0&quot;)#elif CPU(ARM64)#define WTFBreakpointTrap() __asm__ volatile (&quot;brk #0&quot;)#else#define WTFBreakpointTrap() WTFCrash() // Not implemented.#endif ÂÜÖÂ≠òÁÆ°ÁêÜWTF Êèê‰æõÁöÑÂÜÖÂ≠òÁÆ°ÁêÜÂíå STL Á±ª‰ººÔºå‰∏∫ÂÆπÂô®ÂíåÂ∫îÁî®Êèê‰æõÂÜÖÂ≠òÂàÜÈÖçÊé•Âè£„ÄÇÂÖàÁúã WTF_MAKE_FAST_ALLOCATED Ëøô‰∏™ÂÆè 1234567891011121314151617181920212223242526272829303132 c++#define WTF_MAKE_FAST_ALLOCATED \\public: \\ void* operator new(size_t, void* p) { return p; } \\ void* operator new[](size_t, void* p) { return p; } \\ \\ void* operator new(size_t size) \\ { \\ return ::WTF::fastMalloc(size); \\ } \\ \\ void operator delete(void* p) \\ { \\ ::WTF::fastFree(p); \\ } \\ \\ void* operator new[](size_t size) \\ { \\ return ::WTF::fastMalloc(size); \\ } \\ \\ void operator delete[](void* p) \\ { \\ ::WTF::fastFree(p); \\ } \\ void* operator new(size_t, NotNullTag, void* location) \\ { \\ ASSERT(location); \\ return location; \\ } \\private: \\typedef int __thisIsHereToForceASemicolonAfterThisMacro Ëøô‰∏™ÂÆèÂÆö‰πâ‰∫Ü operator new Âíå operator delete„ÄÇoperator new ÊòØÁõ¥Êé•Ë∞ÉÁî® fastMalloc ÂÆåÊàêÂÜÖÂ≠òÂàÜÈÖçÔºå‰∏ãÈù¢ÁúãÁúã fastMalloc ÁöÑÂÆûÁé∞Ôºö 12345void* fastMalloc(size_t size){ ASSERT_IS_WITHIN_LIMIT(size); return bmalloc::api::malloc(size);} ÂèØ‰ª•ÁúãÂà∞ WTF ‰ΩøÁî®‰∫Ü bmalloc Êù• mallocÔºåËøô‰∏™ bmalloc Ë¢´ËãπÊûúÂè∑Áß∞Âú®ÊÄßËÉΩ‰∏äË¶ÅËøúË∂Ö‰∫é TCMalloc Âíå STL ÈáåÂú® malloc ‰πã‰∏äÂÆûÁé∞‰∏Ä‰∏™ÂÜÖÂ≠òÊ±†ÁöÑÁöÑÊÄùË∑Ø‰πüÂÆåÂÖ®‰∏ç‰∏ÄÊ†∑„ÄÇÂÖ≥‰∫é TCMalloc ÁöÑÂÆûÁé∞ÂíåÂéüÁêÜÂèØ‰ª•ÂèÇÁúãÔºöhttps://goog-perftools.sourceforge.net/doc/tcmalloc.html „ÄÇÂÖ≥‰∫é STL ÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÂÆûÁé∞ÂèØ‰ª•Âú® „ÄäSTL Ê∫êÁ†ÅÂàÜÊûê„ÄãÁ¨¨‰∫åÁ´†ÈáåÊúâËØ¶ÁªÜËØ¥Êòé„ÄÇ ÂÆπÂô®Á±ªWTF ÈáåÂæàÂ§öÁöÑÂÆπÂô®ÔºåÊØîÂ¶Ç BlockStackÔºåDequeÔºåVector Âíå HashTable„ÄÇ Vector Âä®ÊÄÅÊï∞ÁªÑWTF ÈáåÁöÑ Vector Âíå STL ÈáåÁöÑ Vector ‰∏ÄÊ†∑‰πüÊòØ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÁõ∏ÂΩì‰∫éÂä®ÊÄÅÊï∞ÁªÑÔºåÂΩì‰∏çÁü•ÈÅìÈúÄË¶ÅÁöÑÊï∞ÁªÑËßÑÊ®°Â§öÂ§ßÊó∂ÂèØ‰ª•ËææÂà∞ÊúÄÂ§ßËäÇÁ∫¶Á©∫Èó¥ÁöÑÁõÆÁöÑÔºåÈÇ£‰πàÁúãÁúã WTF ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ Vector ÁöÑÂêßÔºåÂÖ≥ÈîÆÂú∞ÊñπÊàëÂú®‰ª£Á†ÅÈáåÂÅö‰∫ÜÊ≥®ÈáäËØ¥Êòé„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246 c++template&lt;typename T, size_t inlineCapacity = 0, typename OverflowHandler = CrashOnOverflow, size_t minCapacity = 16, typename Malloc = FastMalloc&gt;class Vector : private VectorBuffer&lt;T, inlineCapacity, Malloc&gt; { WTF_MAKE_FAST_ALLOCATED;private: //VectorBuffer ÊòØÂÜÖÈÉ®Â≠òÂÇ®Êï∞ÊçÆÁöÑÂÆπÂô® typedef VectorBuffer&lt;T, inlineCapacity, Malloc&gt; Base; //Vector ÈáåÂÖÉÁ¥†ÁöÑÂàùÂßãÂåñÔºåÂ§çÂà∂ÂíåÁßªÂä®Ëøô‰∫õÊìç‰ΩúÈÉΩÂú® VectorTypeOperations Èáå typedef VectorTypeOperations&lt;T&gt; TypeOperations;public: typedef T ValueType; //iterator Áõ¥Êé•‰ΩøÁî®ÁöÑÂéüÁîüÊåáÈíà typedef T* iterator; typedef const T* const_iterator; typedef std::reverse_iterator&lt;iterator&gt; reverse_iterator; typedef std::reverse_iterator&lt;const_iterator&gt; const_reverse_iterator; Vector() { } // Unlike in std::vector, this constructor does not initialize POD types. explicit Vector(size_t size) : Base(size, size) { asanSetInitialBufferSizeTo(size); if (begin()) TypeOperations::initialize(begin(), end()); } Vector(size_t size, const T&amp; val) : Base(size, size) { asanSetInitialBufferSizeTo(size); if (begin()) TypeOperations::uninitializedFill(begin(), end(), val); } Vector(std::initializer_list&lt;T&gt; initializerList) { reserveInitialCapacity(initializerList.size()); asanSetInitialBufferSizeTo(initializerList.size()); for (const auto&amp; element : initializerList) uncheckedAppend(element); } ~Vector() { if (m_size) TypeOperations::destruct(begin(), end()); asanSetBufferSizeToFullCapacity(0); } Vector(const Vector&amp;); template&lt;size_t otherCapacity, typename otherOverflowBehaviour, size_t otherMinimumCapacity, typename OtherMalloc&gt; explicit Vector(const Vector&lt;T, otherCapacity, otherOverflowBehaviour, otherMinimumCapacity, OtherMalloc&gt;&amp;); Vector&amp; operator=(const Vector&amp;); template&lt;size_t otherCapacity, typename otherOverflowBehaviour, size_t otherMinimumCapacity, typename OtherMalloc&gt; Vector&amp; operator=(const Vector&lt;T, otherCapacity, otherOverflowBehaviour, otherMinimumCapacity, OtherMalloc&gt;&amp;); Vector(Vector&amp;&amp;); Vector&amp; operator=(Vector&amp;&amp;); //ËøîÂõû Vector ÈáåÂÖÉÁ¥†‰∏™Êï∞ size_t size() const { return m_size; } static ptrdiff_t sizeMemoryOffset() { return OBJECT_OFFSETOF(Vector, m_size); } //ËøîÂõûÁöÑÊòØ Vector ‰∏≠ÁöÑÂÆπÈáèÔºåÂÆπÈáèÈöèÁùÄÂÖÉÁ¥†Â¢ûÂä†ÂíåÂà†Èô§ËÄåÂèòÂåñ size_t capacity() const { return Base::capacity(); } bool isEmpty() const { return !size(); } //ËøôÈáåÊèê‰æõÁöÑÊòØÊï∞ÁªÑÁöÑËÆøÈóÆÂäüËÉΩ T&amp; at(size_t i) { if (UNLIKELY(i &gt;= size())) OverflowHandler::overflowed(); return Base::buffer()[i]; } const T&amp; at(size_t i) const { if (UNLIKELY(i &gt;= size())) OverflowHandler::overflowed(); return Base::buffer()[i]; } T&amp; at(Checked&lt;size_t&gt; i) { RELEASE_ASSERT(i &lt; size()); return Base::buffer()[i]; } const T&amp; at(Checked&lt;size_t&gt; i) const { RELEASE_ASSERT(i &lt; size()); return Base::buffer()[i]; } //ËøîÂõûÊï∞ÁªÑ‰∏≠Á¨¨Âá†‰∏™ÂÖÉÁ¥† T&amp; operator[](size_t i) { return at(i); } const T&amp; operator[](size_t i) const { return at(i); } T&amp; operator[](Checked&lt;size_t&gt; i) { return at(i); } const T&amp; operator[](Checked&lt;size_t&gt; i) const { return at(i); } T* data() { return Base::buffer(); } const T* data() const { return Base::buffer(); } static ptrdiff_t dataMemoryOffset() { return Base::bufferMemoryOffset(); } //Ëø≠‰ª£ÂäüËÉΩÁöÑÂÆûÁé∞ÔºåËé∑Âèñ begin Âíå endÔºåVector ÂÖÉÁ¥†Êúâ‰∫ÜÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÈÉΩÈúÄË¶ÅÈáçÊñ∞ begin Âíå end„ÄÇ iterator begin() { return data(); } iterator end() { return begin() + m_size; } const_iterator begin() const { return data(); } const_iterator end() const { return begin() + m_size; } reverse_iterator rbegin() { return reverse_iterator(end()); } reverse_iterator rend() { return reverse_iterator(begin()); } const_reverse_iterator rbegin() const { return const_reverse_iterator(end()); } const_reverse_iterator rend() const { return const_reverse_iterator(begin()); } T&amp; first() { return at(0); } const T&amp; first() const { return at(0); } T&amp; last() { return at(size() - 1); } const T&amp; last() const { return at(size() - 1); } T takeLast() { T result = WTFMove(last()); removeLast(); return result; } //O(n) ÈÅçÂéÜÊü•ÊâæÁöÑÊìç‰ΩúÔºåÊâÄ‰ª•Êï∞ÊçÆÈáèÂ§ßÊó∂Êü•ÊâæÁî® hashtable ÊïàÊûú‰ºöÊõ¥Â•Ω template&lt;typename U&gt; bool contains(const U&amp;) const; template&lt;typename U&gt; size_t find(const U&amp;) const; template&lt;typename MatchFunction&gt; size_t findMatching(const MatchFunction&amp;) const; template&lt;typename U&gt; size_t reverseFind(const U&amp;) const; template&lt;typename U&gt; bool appendIfNotContains(const U&amp;); //ÂÆûÁé∞ STL ÈáåÁöÑÊñπÊ≥ïÔºåËøôÈáåÁöÑ insertÔºåappend Âíå resize Á≠âÊìç‰ΩúÁöÑÊó∂ÂÄô‰ºöÈÄöËøá reserveCapacity Êàñ tryReserveCapacity Êù•ËøõË°åÁ©∫Èó¥Êâ©Â±ïËææÂà∞Âä®ÊÄÅÊï∞ÁªÑÁöÑËÉΩÂäõ void shrink(size_t size); void grow(size_t size); void resize(size_t size); void resizeToFit(size_t size); void reserveCapacity(size_t newCapacity); bool tryReserveCapacity(size_t newCapacity); void reserveInitialCapacity(size_t initialCapacity); void shrinkCapacity(size_t newCapacity); void shrinkToFit() { shrinkCapacity(size()); } void clear() { shrinkCapacity(0); } void append(ValueType&amp;&amp; value) { append&lt;ValueType&gt;(std::forward&lt;ValueType&gt;(value)); } template&lt;typename U&gt; void append(U&amp;&amp;); template&lt;typename... Args&gt; void constructAndAppend(Args&amp;&amp;...); template&lt;typename... Args&gt; bool tryConstructAndAppend(Args&amp;&amp;...); void uncheckedAppend(ValueType&amp;&amp; value) { uncheckedAppend&lt;ValueType&gt;(std::forward&lt;ValueType&gt;(value)); } template&lt;typename U&gt; void uncheckedAppend(U&amp;&amp;); template&lt;typename U&gt; void append(const U*, size_t); template&lt;typename U, size_t otherCapacity&gt; void appendVector(const Vector&lt;U, otherCapacity&gt;&amp;); template&lt;typename U&gt; bool tryAppend(const U*, size_t); template&lt;typename U&gt; void insert(size_t position, const U*, size_t); template&lt;typename U&gt; void insert(size_t position, U&amp;&amp;); template&lt;typename U, size_t c&gt; void insertVector(size_t position, const Vector&lt;U, c&gt;&amp;); void remove(size_t position); void remove(size_t position, size_t length); template&lt;typename U&gt; bool removeFirst(const U&amp;); template&lt;typename MatchFunction&gt; bool removeFirstMatching(const MatchFunction&amp;, size_t startIndex = 0); template&lt;typename U&gt; unsigned removeAll(const U&amp;); template&lt;typename MatchFunction&gt; unsigned removeAllMatching(const MatchFunction&amp;, size_t startIndex = 0); void removeLast() { if (UNLIKELY(isEmpty())) OverflowHandler::overflowed(); shrink(size() - 1); } void fill(const T&amp;, size_t); void fill(const T&amp; val) { fill(val, size()); } template&lt;typename Iterator&gt; void appendRange(Iterator start, Iterator end); MallocPtr&lt;T&gt; releaseBuffer(); void swap(Vector&lt;T, inlineCapacity, OverflowHandler, minCapacity&gt;&amp; other) {#if ASAN_ENABLED if (this == std::addressof(other)) // ASan will crash if we try to restrict access to the same buffer twice. return;#endif // Make it possible to copy inline buffers. asanSetBufferSizeToFullCapacity(); other.asanSetBufferSizeToFullCapacity(); Base::swap(other, m_size, other.m_size); std::swap(m_size, other.m_size); asanSetInitialBufferSizeTo(m_size); other.asanSetInitialBufferSizeTo(other.m_size); } void reverse(); void checkConsistency(); template&lt;typename MapFunction, typename R = typename std::result_of&lt;MapFunction(const T&amp;)&gt;::type&gt; Vector&lt;R&gt; map(MapFunction) const;private: void expandCapacity(size_t newMinCapacity); T* expandCapacity(size_t newMinCapacity, T*); bool tryExpandCapacity(size_t newMinCapacity); const T* tryExpandCapacity(size_t newMinCapacity, const T*); template&lt;typename U&gt; U* expandCapacity(size_t newMinCapacity, U*); template&lt;typename U&gt; void appendSlowCase(U&amp;&amp;); template&lt;typename... Args&gt; void constructAndAppendSlowCase(Args&amp;&amp;...); template&lt;typename... Args&gt; bool tryConstructAndAppendSlowCase(Args&amp;&amp;...); void asanSetInitialBufferSizeTo(size_t); void asanSetBufferSizeToFullCapacity(size_t); void asanSetBufferSizeToFullCapacity() { asanSetBufferSizeToFullCapacity(size()); } void asanBufferSizeWillChangeTo(size_t); using Base::m_size; using Base::buffer; using Base::capacity; using Base::swap; using Base::allocateBuffer; using Base::deallocateBuffer; using Base::tryAllocateBuffer; using Base::shouldReallocateBuffer; using Base::reallocateBuffer; using Base::restoreInlineBufferIfNeeded; using Base::releaseBuffer;#if ASAN_ENABLED using Base::endOfBuffer;#endif}; HashTable ÂìàÂ∏åË°®HashTable ÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206 c++ template&lt;typename Key, typename Value, typename Extractor, typename HashFunctions, typename Traits, typename KeyTraits&gt; class HashTable { public: typedef HashTableIterator&lt;Key, Value, Extractor, HashFunctions, Traits, KeyTraits&gt; iterator; typedef HashTableConstIterator&lt;Key, Value, Extractor, HashFunctions, Traits, KeyTraits&gt; const_iterator; typedef Traits ValueTraits; typedef Key KeyType; typedef Value ValueType; typedef IdentityHashTranslator&lt;ValueTraits, HashFunctions&gt; IdentityTranslatorType; typedef HashTableAddResult&lt;iterator&gt; AddResult;#if DUMP_HASHTABLE_STATS_PER_TABLE struct Stats { Stats() : numAccesses(0) , numRehashes(0) , numRemoves(0) , numReinserts(0) , maxCollisions(0) , numCollisions(0) , collisionGraph() { } unsigned numAccesses; unsigned numRehashes; unsigned numRemoves; unsigned numReinserts; unsigned maxCollisions; unsigned numCollisions; unsigned collisionGraph[4096]; void recordCollisionAtCount(unsigned count) { if (count &gt; maxCollisions) maxCollisions = count; numCollisions++; collisionGraph[count]++; } void dumpStats() { dataLogF(&quot;\\nWTF::HashTable::Stats dump\\n\\n&quot;); dataLogF(&quot;%d accesses\\n&quot;, numAccesses); dataLogF(&quot;%d total collisions, average %.2f probes per access\\n&quot;, numCollisions, 1.0 * (numAccesses + numCollisions) / numAccesses); dataLogF(&quot;longest collision chain: %d\\n&quot;, maxCollisions); for (unsigned i = 1; i &lt;= maxCollisions; i++) { dataLogF(&quot; %d lookups with exactly %d collisions (%.2f%% , %.2f%% with this many or more)\\n&quot;, collisionGraph[i], i, 100.0 * (collisionGraph[i] - collisionGraph[i+1]) / numAccesses, 100.0 * collisionGraph[i] / numAccesses); } dataLogF(&quot;%d rehashes\\n&quot;, numRehashes); dataLogF(&quot;%d reinserts\\n&quot;, numReinserts); } };#endif HashTable(); ~HashTable() { invalidateIterators(); if (m_table) deallocateTable(m_table, m_tableSize);#if CHECK_HASHTABLE_USE_AFTER_DESTRUCTION m_table = (ValueType*)(uintptr_t)0xbbadbeef;#endif } HashTable(const HashTable&amp;); void swap(HashTable&amp;); HashTable&amp; operator=(const HashTable&amp;); HashTable(HashTable&amp;&amp;); HashTable&amp; operator=(HashTable&amp;&amp;); // When the hash table is empty, just return the same iterator for end as for begin. // This is more efficient because we don&apos;t have to skip all the empty and deleted // buckets, and iterating an empty table is a common case that&apos;s worth optimizing. iterator begin() { return isEmpty() ? end() : makeIterator(m_table); } iterator end() { return makeKnownGoodIterator(m_table + m_tableSize); } const_iterator begin() const { return isEmpty() ? end() : makeConstIterator(m_table); } const_iterator end() const { return makeKnownGoodConstIterator(m_table + m_tableSize); } unsigned size() const { return m_keyCount; } unsigned capacity() const { return m_tableSize; } bool isEmpty() const { return !m_keyCount; } AddResult add(const ValueType&amp; value) { return add&lt;IdentityTranslatorType&gt;(Extractor::extract(value), value); } AddResult add(ValueType&amp;&amp; value) { return add&lt;IdentityTranslatorType&gt;(Extractor::extract(value), WTFMove(value)); } // A special version of add() that finds the object by hashing and comparing // with some other type, to avoid the cost of type conversion if the object is already // in the table. template&lt;typename HashTranslator, typename T, typename Extra&gt; AddResult add(T&amp;&amp; key, Extra&amp;&amp;); template&lt;typename HashTranslator, typename T, typename Extra&gt; AddResult addPassingHashCode(T&amp;&amp; key, Extra&amp;&amp;); iterator find(const KeyType&amp; key) { return find&lt;IdentityTranslatorType&gt;(key); } const_iterator find(const KeyType&amp; key) const { return find&lt;IdentityTranslatorType&gt;(key); } bool contains(const KeyType&amp; key) const { return contains&lt;IdentityTranslatorType&gt;(key); } template&lt;typename HashTranslator, typename T&gt; iterator find(const T&amp;); template&lt;typename HashTranslator, typename T&gt; const_iterator find(const T&amp;) const; template&lt;typename HashTranslator, typename T&gt; bool contains(const T&amp;) const; void remove(const KeyType&amp;); void remove(iterator); void removeWithoutEntryConsistencyCheck(iterator); void removeWithoutEntryConsistencyCheck(const_iterator); template&lt;typename Functor&gt; void removeIf(const Functor&amp;); void clear(); static bool isEmptyBucket(const ValueType&amp; value) { return isHashTraitsEmptyValue&lt;KeyTraits&gt;(Extractor::extract(value)); } static bool isDeletedBucket(const ValueType&amp; value) { return KeyTraits::isDeletedValue(Extractor::extract(value)); } static bool isEmptyOrDeletedBucket(const ValueType&amp; value) { return isEmptyBucket(value) || isDeletedBucket(value); } ValueType* lookup(const Key&amp; key) { return lookup&lt;IdentityTranslatorType&gt;(key); } template&lt;typename HashTranslator, typename T&gt; ValueType* lookup(const T&amp;); template&lt;typename HashTranslator, typename T&gt; ValueType* inlineLookup(const T&amp;);#if !ASSERT_DISABLED void checkTableConsistency() const;#else static void checkTableConsistency() { }#endif#if CHECK_HASHTABLE_CONSISTENCY void internalCheckTableConsistency() const { checkTableConsistency(); } void internalCheckTableConsistencyExceptSize() const { checkTableConsistencyExceptSize(); }#else static void internalCheckTableConsistencyExceptSize() { } static void internalCheckTableConsistency() { }#endif private: static ValueType* allocateTable(unsigned size); static void deallocateTable(ValueType* table, unsigned size); typedef std::pair&lt;ValueType*, bool&gt; LookupType; typedef std::pair&lt;LookupType, unsigned&gt; FullLookupType; LookupType lookupForWriting(const Key&amp; key) { return lookupForWriting&lt;IdentityTranslatorType&gt;(key); }; template&lt;typename HashTranslator, typename T&gt; FullLookupType fullLookupForWriting(const T&amp;); template&lt;typename HashTranslator, typename T&gt; LookupType lookupForWriting(const T&amp;); template&lt;typename HashTranslator, typename T, typename Extra&gt; void addUniqueForInitialization(T&amp;&amp; key, Extra&amp;&amp;); template&lt;typename HashTranslator, typename T&gt; void checkKey(const T&amp;); void removeAndInvalidateWithoutEntryConsistencyCheck(ValueType*); void removeAndInvalidate(ValueType*); void remove(ValueType*); bool shouldExpand() const { return (m_keyCount + m_deletedCount) * m_maxLoad &gt;= m_tableSize; } bool mustRehashInPlace() const { return m_keyCount * m_minLoad &lt; m_tableSize * 2; } bool shouldShrink() const { return m_keyCount * m_minLoad &lt; m_tableSize &amp;&amp; m_tableSize &gt; KeyTraits::minimumTableSize; } ValueType* expand(ValueType* entry = nullptr); void shrink() { rehash(m_tableSize / 2, nullptr); } ValueType* rehash(unsigned newTableSize, ValueType* entry); ValueType* reinsert(ValueType&amp;&amp;); static void initializeBucket(ValueType&amp; bucket); static void deleteBucket(ValueType&amp; bucket) { hashTraitsDeleteBucket&lt;Traits&gt;(bucket); } FullLookupType makeLookupResult(ValueType* position, bool found, unsigned hash) { return FullLookupType(LookupType(position, found), hash); } iterator makeIterator(ValueType* pos) { return iterator(this, pos, m_table + m_tableSize); } const_iterator makeConstIterator(ValueType* pos) const { return const_iterator(this, pos, m_table + m_tableSize); } iterator makeKnownGoodIterator(ValueType* pos) { return iterator(this, pos, m_table + m_tableSize, HashItemKnownGood); } const_iterator makeKnownGoodConstIterator(ValueType* pos) const { return const_iterator(this, pos, m_table + m_tableSize, HashItemKnownGood); }#if !ASSERT_DISABLED void checkTableConsistencyExceptSize() const;#else static void checkTableConsistencyExceptSize() { }#endif#if CHECK_HASHTABLE_ITERATORS void invalidateIterators();#else static void invalidateIterators() { }#endif static const unsigned m_maxLoad = 2; static const unsigned m_minLoad = 6; ValueType* m_table; unsigned m_tableSize; unsigned m_tableSizeMask; unsigned m_keyCount; unsigned m_deletedCount;#if CHECK_HASHTABLE_ITERATORS public: // All access to m_iterators should be guarded with m_mutex. mutable const_iterator* m_iterators; // Use std::unique_ptr so HashTable can still be memmove&apos;d or memcpy&apos;ed. mutable std::unique_ptr&lt;Lock&gt; m_mutex;#endif#if DUMP_HASHTABLE_STATS_PER_TABLE public: mutable std::unique_ptr&lt;Stats&gt; m_stats;#endif }; ÂÆåÊï¥ÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÂèØ‰ª•Êü•Áúã WTF/Source/wtf/HashTable.h„ÄÇËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØ HashTable ÊòØÁ∫øÊÄßÂ≠òÂÇ®Á©∫Èó¥ÁöÑËµ∑ÂßãÂú∞ÂùÄÊòØ bengin Âíå end Êù•Ë°®Á§∫ÁöÑÔºåcapacity Â≠òÂÇ®Á©∫Èó¥‰∏çË∂≥Êó∂‰ºö‰ΩøÁî® doubleHash ÁöÑÊñπÊ≥ïÊù•Êâ©ÂÆπÔºåÂ∞ÜÂéüÁ©∫Èó¥Â§ßÂ∞èÂèòÊàê‰∏§ÂÄç„ÄÇË∞ÉÁî® begin Êàñ end Êó∂‰ºöÂàõÂª∫ HashTable ÁöÑ const_iteratorÔºåÂÆÉÁª¥ÊåÅ‰∫Ü‰∏Ä‰∏™ÊåáÂêë value_type ÁöÑÊåáÈíàÔºåÊâÄ‰ª• iterator ÁöÑËá™Â¢ûÂíåËá™ÂáèÂ∞±ÊòØÊåáÈíàÁöÑËá™Â¢ûËá™ÂáèÔºåËøôÁÇπÊØî STL ÁöÑ HashMap ÈááÁî®Êï∞ÁªÑÂä†ÈìæË°®ÂÆûÁé∞Ë¶ÅÁÆÄÂçï„ÄÇ Á∫øÁ®ãWebKit ÂØπÁ∫øÁ®ãÁöÑÂ§ÑÁêÜÂ∞±ÊòØÂú®‰∏Ä‰∏™ loop Âæ™ÁéØÈáåÂ§ÑÁêÜÊ∂àÊÅØÈòüÂàóÔºåÂú® WTF/Source/wtf/MessageQueue.h ÈáåÊúâÂØπÊ∂àÊÅØÈòüÂàóÁöÑÂÆö‰πâÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243 c++// The queue takes ownership of messages and transfer it to the new owner// when messages are fetched from the queue.// Essentially, MessageQueue acts as a queue of std::unique_ptr&lt;DataType&gt;.template&lt;typename DataType&gt;class MessageQueue { WTF_MAKE_NONCOPYABLE(MessageQueue);public: MessageQueue() : m_killed(false) { } ~MessageQueue(); void append(std::unique_ptr&lt;DataType&gt;); void appendAndKill(std::unique_ptr&lt;DataType&gt;); bool appendAndCheckEmpty(std::unique_ptr&lt;DataType&gt;); void prepend(std::unique_ptr&lt;DataType&gt;); std::unique_ptr&lt;DataType&gt; waitForMessage(); std::unique_ptr&lt;DataType&gt; tryGetMessage(); Deque&lt;std::unique_ptr&lt;DataType&gt;&gt; takeAllMessages(); std::unique_ptr&lt;DataType&gt; tryGetMessageIgnoringKilled(); template&lt;typename Predicate&gt; std::unique_ptr&lt;DataType&gt; waitForMessageFilteredWithTimeout(MessageQueueWaitResult&amp;, Predicate&amp;&amp;, WallTime absoluteTime); template&lt;typename Predicate&gt; void removeIf(Predicate&amp;&amp;); void kill(); bool killed() const; // The result of isEmpty() is only valid if no other thread is manipulating the queue at the same time. bool isEmpty();private: //m_mutex ÊòØËÆøÈóÆ Deque ÁöÑ‰∫íÊñ•ÈîÅÔºåÊòØÂØπ pthread_mutex_t Á±ªÂûãÁöÑ‰∏Ä‰∏™Â∞ÅË£Ö mutable Lock m_mutex; //Condition ÊòØÂØπ pthread_cond_t Á±ªÂûãÁöÑÂ∞ÅË£ÖÔºåm_condition Êèê‰æõ‰∫ÜÊåÇËµ∑Á∫øÁ®ã Condition m_condition; //ÂÜÖÈÉ®‰∏ªË¶ÅÂ≠òÂÇ®ÁªìÊûÑ Deque&lt;std::unique_ptr&lt;DataType&gt;&gt; m_queue; bool m_killed;}; ÂèØ‰ª•ÁúãÂá∫ MessageQueue ÊòØÈÄöËøá pthread_mutex_t Êù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇWebKit Âú®ËøêË°åÊó∂‰ºöÊúâÂæàÂ§öÁ∫øÁ®ãÔºåÊúâÁΩëÁªúËµÑÊ∫êÂä†ËΩΩÁöÑÁ∫øÁ®ãÔºåËß£ÊûêÈ°µÈù¢Â∏ÉÂ±ÄÁöÑÁ∫øÁ®ãÔºåÁªòÂà∂Á∫øÁ®ãÔºåI/O Á∫øÁ®ãÔºåËß£Á†ÅÁ∫øÁ®ãÁ≠âÁ∫øÁ®ã„ÄÇÊúÄÊ†∏ÂøÉÁöÑÊòØËß£ÊûêÈ°µÈù¢Â∏ÉÂ±ÄÁ∫øÁ®ãÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãÈÉΩÁî±ÂÆÉËß¶ÂèëÔºåÊâÄ‰ª•ÂèØ‰ª•Áß∞‰∏∫‰∏ªÁ∫øÁ®ãÔºåËøô‰∏™Á∫øÁ®ãÂú® Mac Á´ØÊòØ MainThread ÂÆö‰πâÂíåÂÆûÁé∞ÁöÑÔºåÂú® iOS Á´ØÊòØ WebCoreThread ÂÆö‰πâÂÆûÁé∞ÁöÑ„ÄÇËøô‰∫õÂÆö‰πâÊØîÂ¶Ç callOnMainThread Â∞±ÊòØÂÖ∂ÂÆÉÂºÇÊ≠•Á∫øÁ®ãÂÅöÂõûË∞ÉÊó∂Ë∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇ Loader‰∏ªË¶Å‰ΩúÁî®Â∞±ÊòØÂä†ËΩΩËµÑÊ∫êÔºåÊúâ MainResourceLoader Âíå SubResourceLoader„ÄÇÂä†ËΩΩÁöÑËµÑÊ∫êÊúâÊù•Ëá™ÁΩëÁªúÔºåÊú¨Âú∞ÊàñËÄÖÁºìÂ≠òÁöÑ„ÄÇLoader Ê®°ÂùóÊú¨Ë∫´ÊòØÂπ≥Âè∞Êó†ÂÖ≥ÁöÑÔºåÂè™ÊòØÂ∞ÜÈúÄË¶ÅËé∑ÂæóËµÑÊ∫êÁöÑËØ∑Ê±Ç‰º†ÁªôÂπ≥Âè∞Áõ∏ÂÖ≥ÁöÑÁΩëÁªúÊ®°ÂùóÔºåÊé•ÂèóÁΩëÁªúÊ®°ÂùóËøîÂõûËµÑÊ∫ê„ÄÇÂπ≥Âè∞Áõ∏ÂÖ≥ÁöÑÁΩëÁªúÊ®°ÂùóÂú® WebCore/platform/network Èáå„ÄÇÂ¶ÇÊûúÊòØ iOS Â∞±Âú® WebCore/platform/network/iOS ÈáåÔºåÂ¶ÇÊûú Mac Â∞±Âú® WebCore/platform/network/mac Èáå„ÄÇ Loader ÁöÑËµÑÊ∫êÁΩëÈ°µÊú¨Ë∫´Â∞±ÊòØ‰∏ÄÁßçËµÑÊ∫êÔºåÂêåÊó∂ÁΩëÈ°µËøòÈúÄË¶ÅÂÖ∂ÂÆÉÁöÑ‰∏Ä‰∫õËµÑÊ∫êÔºåÊØîÂ¶ÇÂõæÁâáÔºåËßÜÈ¢ëÔºåjs ‰ª£Á†ÅÁ≠â„ÄÇ‰∏ãÈù¢ÊòØ‰∏ªË¶ÅËµÑÊ∫êÁöÑÁ±ªÂûãÔºö HTMLÔºöÈ°µÈù¢‰∏ªÊñá‰ª∂ JavaScriptÔºöÂçïÁã¨ÁöÑÊñá‰ª∂ÂêéËÄÖÁõ¥Êé•Âú® HTML ‰ª£Á†ÅÈáå CSSÔºöÂêå JavaScript ‰∏ÄÊ†∑ÂèØ‰ª•ÊòØÂçïÁã¨Êñá‰ª∂‰πüÂèØ‰ª•Áõ¥Êé•ÂÜôÂú® HTML ‰ª£Á†ÅÈáå ÂõæÁâáÔºöÂêÑÁßçÁºñÁ†ÅÂõæÁâáÊØîÂ¶Ç jpg Âíå png SVGÔºöÁü¢ÈáèÂõæÁâá CSS ShaderÔºö‰∏∫ CSS Â∏¶Êù• 3D ÂõæÂΩ¢ÁâπÊÄß Èü≥È¢ëËßÜÈ¢ëÔºöÂ§öÂ™í‰ΩìËµÑÊ∫ê‰ª•ÂèäËßÜÈ¢ëÂ≠óÂπï Â≠ó‰ΩìÔºöËá™ÂÆö‰πâÁöÑÂ≠ó‰Ωì XSLÔºöÂØπ XSLT ËØ≠Ë®ÄÁºñÂÜôÁöÑÊñá‰ª∂ÊîØÊåÅ WebKit Èáå‰ºöÊúâ‰∏çÂêåÁöÑÁ±ªÊù•Ë°®Á§∫Ëøô‰∫õËµÑÊ∫êÔºåÂÆÉ‰ª¨ÈÉΩ‰ºöÊúâ‰∏™ÂÖ±ÂêåÁöÑÂü∫Á±ª CachedResource„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåÂÖ∂‰∏≠ HTML ÁöÑËµÑÊ∫êÁ±ªÂûãÊòØ CachedRawResource Á±ªÔºåÁ±ªÂûãÂè´ MainResource Á±ª„ÄÇ FrameLoaderÂä†ËΩΩÁöÑÂÖ•Âè£ÔºåÊúÄÁªà‰ºöË∞ÉÂà∞ÂºÇÊ≠• load ËøáÁ®ã„ÄÇ‰∏ªË¶ÅÊòØÊèê‰æõ‰∏Ä‰∏™‰∏ãËΩΩ‰∏Ä‰∏™ Frame ÁöÑ‰∏Ä‰∫õÊé•Âè£„ÄÇ‰ªª‰Ωï‰∏Ä‰∏™È°µÈù¢ÈÉΩÈúÄË¶ÅËá≥Â∞ë‰∏Ä‰∏™ mainframeÔºåÂõ†Ê≠§ load ‰∏ÄËà¨ÈÉΩÊòØ‰ªé load ‰∏Ä‰∏™ mainframe ÂºÄÂßã„ÄÇ MainResourceLoaderÔºöÂä†ËΩΩËµÑÊ∫êÔºåhtml ‰πüÊòØËµÑÊ∫êÔºåËøòÊúâ cssÔºåjavascript Âíå image Á≠âËøô‰∫õÊòØ SubresourceLoader Êù•ÁÆ°ÁêÜÁöÑ„ÄÇ CacheResourceLoaderÔºöÁºìÂ≠òËµÑÊ∫êËØªÂèñ„ÄÇ ËµÑÊ∫êÂä†ËΩΩÂíåÁºìÂ≠òÊòØÁî± ResourceLoader Âíå Cache Ëøô‰∏§‰∏™Áã¨Á´ãÊÄßÈ´òÁöÑÊ®°ÂùóÊù•ÂÆûÁé∞„ÄÇ DocumentWriterÔºöËæÖÂä©Á±ªÔºåÂ∞ÜËé∑ÂèñÁöÑÊï∞ÊçÆÂÜôÂà∞ writer ÈáåÔºå‰ºöÂàõÂª∫ DOM Ê†ëÁöÑÊ†πËäÇÁÇπ HTMLDocument ÂØπË±°Ôºå‰Ωú‰∏∫‰∏Ä‰∏™ÁºìÂÜ≤Âå∫ËøõË°å DocumentParser Ëß£ÊûêÊìç‰ΩúÔºåÂêåÊó∂ËØ•Á±ªËøòÂåÖÂê´‰∫ÜÊñáÊ°£Â≠óÁ¨¶Ëß£Á†ÅÁ±ªÂíå HTMLDocumentParser Á±ª„ÄÇ Âä†ËΩΩËøáÁ®ã Ëß£ÊûêÂâç‰ºöÂàõÂª∫‰∏çÂêåÁöÑ DcoumentÔºåDocumentLoader ÁöÑ commitData Á¨¨‰∏ÄÊ¨°Êî∂Âà∞Êï∞ÊçÆÊó∂‰ºöË∞É DcumentWriter ÁöÑ beginÔºåËøô‰∏™ begin ‰ºöË∞ÉÁî® DocumentWriter::createDocument ÂàõÂª∫‰∏Ä‰∏™ Document ÂØπË±°„ÄÇ ËøôÈáåÂàõÂª∫ÁöÑÂØπË±°‰ºöÊ†πÊçÆ URL Êù•ÂàõÂª∫‰∏çÂêåÁöÑ DocumentÔºåËøôÈáåÊúâ HTMLDocument ÔºåËØ¶ÁªÜÂÆûÁé∞ÂèØ‰ª•ÁúãÁúã DOMImplementation::createDocument ÁöÑÂÆûÁé∞„ÄÇ Êï¥‰∏™ËµÑÊ∫êÂä†ËΩΩËøáÁ®ãÔºåËøôÁØáÊñáÁ´†ÊúâËØ¶ÁªÜÁöÑ‰ªãÁªçÔºöhttps://hacks.mozilla.org/2017/09/building-the-dom-faster-speculative-parsing-async-defer-and-preload/ Á±ªÂÖ≥Á≥ª Frame Âíå FrameLoaderClientÔºöÂú® Frame ÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ë∞ÉÁî® FrameLoader ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÈúÄË¶Å‰º†ÂÖ• Frame ÊåáÈíàÂíå FrameLoaderClient ÊåáÈíà„ÄÇ‰∏ÄËà¨‰Ωú‰∏∫‰∏çÂêåÂπ≥Âè∞ÈÄÇÈÖç‰ª£Á†ÅÔºåÊéßÂà∂ WebKit ÁöÑ‰ΩøÁî®ÈÄªËæë„ÄÇFrameLoader ‰ºöÊääÂä†ËΩΩËøáÁ®ãÁöÑÁä∂ÊÄÅÔºåËøòÊúâÁªìÊûúÁ≠â‰ø°ÊÅØ‰º†ÈÄíÁªô FrameLoaderClientÔºåËøôÊ†∑ÁöÑËØù FrameLoaderClient Â∞±ËÉΩÂ§üÊéåÊéß FrameLoader ÁöÑÂä®‰Ωú„ÄÇ SubFrameLoaderÔºöÁª¥Êä§Â≠ê Frame„ÄÇ DocumentWriterÔºöÊúâ‰∏Ä‰∏™ m_writer ÂØπË±°Âú® Frame ÁöÑÊï∞ÊçÆ load ÂÆåÊàêÊó∂ËøõË°å‰∏ã‰∏ÄÊ≠•ÊØîÂ¶ÇËß£Á†ÅÂ§ÑÁêÜ„ÄÇ DocumentLoaderÔºöFrameLoader ‰ºöÁª¥Êä§‰∏â‰∏™ DocumentLoader„ÄÇm_policyDocumentLoader ÊòØ policy check ÁöÑÈò∂ÊÆµ„ÄÇm_provisionalDocumentLoader ‰ºöË¥üË¥£ startLoadingMainResource ÁöÑË∞ÉÁî®„ÄÇm_documentLoader ÊòØÊï∞ÊçÆÂà∞‰∫ÜÂêé‰ΩøÁî®ÁöÑÔºåÂâç‰∏Ä‰∏™ Frame ÁöÑ DocumentLoader ‰∏çËÉΩÂÜçÁî®„ÄÇ HistoryControllerÔºöÁÆ°ÁêÜÂéÜÂè≤ËÆ∞ÂΩïÔºå‰øùÂ≠òÂíåÊÅ¢Â§ç Document Âíå Page ÁöÑÁä∂ÊÄÅÂà∞ HistoryItemÔºåÁª¥Êä§ÊµèËßàÈ°µÈù¢ÁöÑÂâçËøõÂêéÈÄÄÈòüÂàóÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÂÆûÁé∞ÂâçËøõÂíåÂêéÈÄÄÁ≠âÊìç‰Ωú„ÄÇFrameLoader ÈÄöËøá HistoryController Êù•Êìç‰Ωú m_backForwardController ÂØπË±°„ÄÇ ResourceLoadNotifierÔºöÂΩì ResourceLoader ÊúâÂèòÂåñÊó∂Êù•ÈÄöÁü• FrameLoaderÔºåÁî®‰∫éÂÆÉ‰ª¨‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇ SubframeLoaderÔºöÁî®Êù•ÊéßÂà∂ MainFrame ÈáåÁöÑ iframe ÁöÑÂä†ËΩΩ„ÄÇ FrameLoaderStateMachineÔºöÊèèËø∞ FrameLoader Â§ÑÁêÜ DocumentLoader ÁöÑËäÇÁÇπÁöÑÁä∂ÊÄÅÔºåÁúãÊòØÂú®ÂàõÂª∫Áä∂ÊÄÅËøòÊòØÊòæÁ§∫Áä∂ÊÄÅ„ÄÇ PolicyCheckerÔºöÂØπ FrameLoader ÂÅöÊ†°È™åÔºåÊúâ‰∏âÁßçÔºåÁ¨¨‰∏ÄÁßç NewWindow PolicyÔºåÊåáÂØπÊñ∞ÂºÄ tab Êàñ window Êó∂Ê†°È™å„ÄÇÁ¨¨‰∫åÁßç NavigationPolicy ÊòØÂØπÈ°µÈù¢ËØ∑Ê±ÇÁöÑÊ†°È™å„ÄÇÁ¨¨‰∏âÁßç ContentPolicy ÊòØÂØπËØ∑Ê±ÇÊî∂Âà∞ÁöÑÊï∞ÊçÆÂà§Êñ≠ Mime type Á≠âÁöÑÊ†°È™å„ÄÇPolicyChecker ‰ºöÊèê‰æõÂØπÂ∫îÂá†Âè£ÔºåÁî± FrameLoaderClient Êù•ÂØπËøô‰∫õËØ∑Ê±ÇÊ†°È™åÁ°ÆÂÆöÊòØÂê¶ÁªßÁª≠Âä†ËΩΩÊàñËÄÖÂÅöÂÖ∂ÂÆÉÊìç‰Ωú„ÄÇ FrameLoader ÁöÑ‰∏ªË¶ÅÊé•Âè£Frame::initFrameLoader Ëá™Ë∫´ÁöÑÂàùÂßãÂåñ„ÄÇÂàùÂßãÂåñÁöÑË∞ÉÁî®È°∫Â∫è 1234WebFrame::WebFrame(webPage* parent,WebFrameData *frameData)WebFramePrivate::init(WebFrame* webframe,WebFrameData* frameData)Frame::init()FrameLoader::init() FrameLoader::commitProvisionalLoadÊèê‰∫§ provisional Èò∂ÊÆµÊó∂‰∏ãËΩΩÁöÑÊï∞ÊçÆÂÆåÊàê Document loading ÁöÑË∞ÉÁî®È°∫Â∫è 123DocumentLoader::finishLoadingDocumentLoader::commitIfReadyFrameLoader::commitProvisionalLoad ËµÑÊ∫êÊï∞ÊçÆÊé•ÂèóÊèê‰∫§Ë∞ÉÁî®È°∫Â∫è 123456ResourceLoader::didReceiveDataMainResourceLoader::addDataDocumentLoader::receiveDataDocumentLoader::commitLoadDocumentLoader::commitIfReadyDocumentLoader::commitProvisionalLoad Frame::finishedLoadingÁΩëÁªúÂä†ËΩΩÂÆåÊàêÁöÑÊé•Âè£Ôºå‰ΩúÁî®ÊòØÈÄöÁü• DocumentLoader Âíå DocumentWriter Â∑≤ÁªèÂÆåÊàêÔºåÂèØ‰ª•ËøõË°åÂêéÈù¢ÁöÑÊèê‰∫§Êï∞ÊçÆÂíåËß£ÊûêÂ∑•‰Ωú„ÄÇÂáΩÊï∞ÁöÑË∞ÉÁî®È°∫Â∫è 1234ResourceLoader::didFinishLoadingMainResourceLoader::didFinishLoadingFrameLoader::finishedLoadingFrameLoader::init() FrameLoader::finishedParsingÂÆåÊàêËß£ÊûêÊó∂Ë∞ÉÁî®ÁöÑÊé•Âè£Ë∞ÉÁî®È°∫Â∫è 1234DocumentWritter::endDocument::finishParsingDocument::finishedParsingFrameLoader::finishedParsing FrameLoader::load(FrameLoadRequest&amp;&amp; request)Âä†ËΩΩËØ∑Ê±ÇÔºåÂ∞Ü Frame Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÂ∞ÅË£ÖÊàê ResourceRequest ‰Ωú‰∏∫ÂèÇÊï∞Â∏¶ÂÖ•ÔºåËøô‰∏™Êé•Âè£‰ºöÂàõÂª∫Âá∫ DocumentLoader„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210 c++//ÂàõÂª∫ DocumentLoadervoid FrameLoader::load(FrameLoadRequest&amp;&amp; request){ if (m_inStopAllLoaders) return; if (!request.frameName().isEmpty()) { Frame* frame = findFrameForNavigation(request.frameName()); if (frame) { request.setShouldCheckNewWindowPolicy(false); if (&amp;frame-&gt;loader() != this) { frame-&gt;loader().load(WTFMove(request)); return; } } } if (request.shouldCheckNewWindowPolicy()) { NavigationAction action { request.requester(), request.resourceRequest(), InitiatedByMainFrame::Unknown, NavigationType::Other, request.shouldOpenExternalURLsPolicy() }; policyChecker().checkNewWindowPolicy(WTFMove(action), request.resourceRequest(), nullptr, request.frameName(), [this] (const ResourceRequest&amp; request, FormState* formState, const String&amp; frameName, const NavigationAction&amp; action, bool shouldContinue) { continueLoadAfterNewWindowPolicy(request, formState, frameName, action, shouldContinue, AllowNavigationToInvalidURL::Yes, NewFrameOpenerPolicy::Suppress); }); return; } if (!request.hasSubstituteData()) request.setSubstituteData(defaultSubstituteDataForURL(request.resourceRequest().url())); //FrameLoader ‰ΩøÁî®Á©∫ SubStituteData Êù•ÂàõÂª∫ DocumentLoader ÂÆåÊàê MainResource ÁöÑÂä†ËΩΩ„ÄÇ Ref&lt;DocumentLoader&gt; loader = m_client.createDocumentLoader(request.resourceRequest(), request.substituteData()); applyShouldOpenExternalURLsPolicyToNewDocumentLoader(m_frame, loader, request); load(loader.ptr());}//ÂÆåÂñÑ request ‰ø°ÊÅØvoid FrameLoader::load(DocumentLoader* newDocumentLoader){ ResourceRequest&amp; r = newDocumentLoader-&gt;request(); //ResourceRequest ÂåÖÂê´‰∫Ü HTTP Header ÁöÑÂÜÖÂÆπÔºåaddExtraFieldsToMainResourceRequest Ëøô‰∏™ÊñπÊ≥ï‰ºöÊ∑ªÂä†‰∏Ä‰∫õÁ±ª‰ºº Cookie Á≠ñÁï•ÔºåUser AgentÔºåCache-ControlÔºåContent-type Á≠â‰ø°ÊÅØ„ÄÇ addExtraFieldsToMainResourceRequest(r); FrameLoadType type; if (shouldTreatURLAsSameAsCurrent(newDocumentLoader-&gt;originalRequest().url())) { r.setCachePolicy(ReloadIgnoringCacheData); type = FrameLoadType::Same; } else if (shouldTreatURLAsSameAsCurrent(newDocumentLoader-&gt;unreachableURL()) &amp;&amp; m_loadType == FrameLoadType::Reload) type = FrameLoadType::Reload; else if (m_loadType == FrameLoadType::RedirectWithLockedBackForwardList &amp;&amp; !newDocumentLoader-&gt;unreachableURL().isEmpty() &amp;&amp; newDocumentLoader-&gt;substituteData().isValid()) type = FrameLoadType::RedirectWithLockedBackForwardList; else type = FrameLoadType::Standard; if (m_documentLoader) newDocumentLoader-&gt;setOverrideEncoding(m_documentLoader-&gt;overrideEncoding()); if (shouldReloadToHandleUnreachableURL(newDocumentLoader)) { history().saveDocumentAndScrollState(); ASSERT(type == FrameLoadType::Standard); type = FrameLoadType::Reload; } loadWithDocumentLoader(newDocumentLoader, type, 0, AllowNavigationToInvalidURL::Yes);}//Ê†°È™åÊ£ÄÊü•void FrameLoader::loadWithDocumentLoader(DocumentLoader* loader, FrameLoadType type, FormState* formState, AllowNavigationToInvalidURL allowNavigationToInvalidURL){ // Retain because dispatchBeforeLoadEvent may release the last reference to it. Ref&lt;Frame&gt; protect(m_frame); ASSERT(m_client.hasWebView()); ASSERT(m_frame.view()); if (!isNavigationAllowed()) return; if (m_frame.document()) m_previousURL = m_frame.document()-&gt;url(); const URL&amp; newURL = loader-&gt;request().url(); // Log main frame navigation types. if (m_frame.isMainFrame()) { if (auto* page = m_frame.page()) page-&gt;mainFrameLoadStarted(newURL, type);static_cast&lt;MainFrame&amp;&gt;(m_frame).performanceLogging().didReachPointOfInterest(PerformanceLogging::MainFrameLoadStarted); } policyChecker().setLoadType(type); bool isFormSubmission = formState; const String&amp; httpMethod = loader-&gt;request().httpMethod(); if (shouldPerformFragmentNavigation(isFormSubmission, httpMethod, policyChecker().loadType(), newURL)) { RefPtr&lt;DocumentLoader&gt; oldDocumentLoader = m_documentLoader; NavigationAction action { *m_frame.document(), loader-&gt;request(), InitiatedByMainFrame::Unknown, policyChecker().loadType(), isFormSubmission }; oldDocumentLoader-&gt;setTriggeringAction(action); oldDocumentLoader-&gt;setLastCheckedRequest(ResourceRequest()); policyChecker().stopCheck(); policyChecker().checkNavigationPolicy(loader-&gt;request(), false /* didReceiveRedirectResponse */, oldDocumentLoader.get(), formState, [this] (const ResourceRequest&amp; request, FormState*, bool shouldContinue) { continueFragmentScrollAfterNavigationPolicy(request, shouldContinue); }); return; } if (Frame* parent = m_frame.tree().parent()) loader-&gt;setOverrideEncoding(parent-&gt;loader().documentLoader()-&gt;overrideEncoding()); policyChecker().stopCheck(); //Êää DocumentLoader ËµãÁªô m_policyDocumentLoader setPolicyDocumentLoader(loader); //Â∞ÜËØ∑Ê±Ç‰ø°ÊÅØËÆ∞Âú® loader.m_triggeringAction ‰∏≠ if (loader-&gt;triggeringAction().isEmpty()) loader-&gt;setTriggeringAction({ *m_frame.document(), loader-&gt;request(), InitiatedByMainFrame::Unknown, policyChecker().loadType(), isFormSubmission }); if (Element* ownerElement = m_frame.ownerElement()) { if (!m_stateMachine.committedFirstRealDocumentLoad() &amp;&amp; !ownerElement-&gt;dispatchBeforeLoadEvent(loader-&gt;request().url().string())) { continueLoadAfterNavigationPolicy(loader-&gt;request(), formState, false, allowNavigationToInvalidURL); return; } } //‰ΩøÁî® loader.m_triggeringAction ÂÅöÊ†°È™åÔºåÂ§ÑÁêÜÁ©∫ÁôΩÁ≠âÔºåÁî®Êù•ÂÜ≥ÂÆöÊÄé‰πàÂ§ÑÁêÜËØ∑Ê±Ç policyChecker().checkNavigationPolicy(loader-&gt;request(), false /* didReceiveRedirectResponse */, loader, formState, [this, allowNavigationToInvalidURL] (const ResourceRequest&amp; request, FormState* formState, bool shouldContinue) { //shouldContinue ÁöÑ‰∏çÂêåÊµÅÁ®ã‰ºö‰∏çÂêåÔºåformState ÊòØÁî®Êù•Âà§Êñ≠ HTMLFormElement Ë°®Âçï FormSubmissionTrigger Êûö‰∏æÁä∂ÊÄÅÁöÑÔºåËøôÊ†∑‰πü‰ºöÊúâ‰∏çÂêåÁöÑÊµÅÁ®ãÔºåÊé•‰∏ãÊù•ÁúãÁúã continueLoadAfterNavigationPolicy ‰ºöÊÄé‰πàÂéªÂ§ÑÁêÜËøô‰∫õÂèÇÊï∞‰∏çÂêåÁöÑÂÄºÂêß„ÄÇ continueLoadAfterNavigationPolicy(request, formState, shouldContinue, allowNavigationToInvalidURL); });}//void FrameLoader::continueLoadAfterNavigationPolicy(const ResourceRequest&amp; request, FormState* formState, bool shouldContinue, AllowNavigationToInvalidURL allowNavigationToInvalidURL){ // If we loaded an alternate page to replace an unreachableURL, we&apos;ll get in here with a // nil policyDataSource because loading the alternate page will have passed // through this method already, nested; otherwise, policyDataSource should still be set. ASSERT(m_policyDocumentLoader || !m_provisionalDocumentLoader-&gt;unreachableURL().isEmpty()); bool isTargetItem = history().provisionalItem() ? history().provisionalItem()-&gt;isTargetItem() : false; bool urlIsDisallowed = allowNavigationToInvalidURL == AllowNavigationToInvalidURL::No &amp;&amp; !request.url().isValid(); // Three reasons we can&apos;t continue: // 1) Navigation policy delegate said we can&apos;t so request is nil. A primary case of this // is the user responding Cancel to the form repost nag sheet. // 2) User responded Cancel to an alert popped up by the before unload event handler. // 3) The request&apos;s URL is invalid and navigation to invalid URLs is disallowed. bool canContinue = shouldContinue &amp;&amp; shouldClose() &amp;&amp; !urlIsDisallowed; if (!canContinue) { // If we were waiting for a quick redirect, but the policy delegate decided to ignore it, then we // need to report that the client redirect was cancelled. // FIXME: The client should be told about ignored non-quick redirects, too. if (m_quickRedirectComing) clientRedirectCancelledOrFinished(false); setPolicyDocumentLoader(nullptr); // If the navigation request came from the back/forward menu, and we punt on it, we have the // problem that we have optimistically moved the b/f cursor already, so move it back. For sanity, // we only do this when punting a navigation for the target frame or top-level frame. if ((isTargetItem || m_frame.isMainFrame()) &amp;&amp; isBackForwardLoadType(policyChecker().loadType())) { if (Page* page = m_frame.page()) { if (HistoryItem* resetItem = m_frame.mainFrame().loader().history().currentItem()) { page-&gt;backForward().setCurrentItem(resetItem); m_frame.loader().client().updateGlobalHistoryItemForPage(); } } } return; } FrameLoadType type = policyChecker().loadType(); // A new navigation is in progress, so don&apos;t clear the history&apos;s provisional item. stopAllLoaders(ShouldNotClearProvisionalItem); // &lt;rdar://problem/6250856&gt; - In certain circumstances on pages with multiple frames, stopAllLoaders() // might detach the current FrameLoader, in which case we should bail on this newly defunct load. if (!m_frame.page()) return; //Êää DocumentLoader ËµãÂÄºÁªô m_provisionalDocumentLoader setProvisionalDocumentLoader(m_policyDocumentLoader.get()); m_loadType = type; //ËÆæÁΩÆ FrameLoader Áä∂ÊÄÅ‰∏∫ Provisional setState(FrameStateProvisional); setPolicyDocumentLoader(nullptr); if (isBackForwardLoadType(type)) { auto&amp; diagnosticLoggingClient = m_frame.page()-&gt;diagnosticLoggingClient(); if (history().provisionalItem()-&gt;isInPageCache()) { diagnosticLoggingClient.logDiagnosticMessageWithResult(DiagnosticLoggingKeys::pageCacheKey(), DiagnosticLoggingKeys::retrievalKey(), DiagnosticLoggingResultPass, ShouldSample::Yes); loadProvisionalItemFromCachedPage(); return; } diagnosticLoggingClient.logDiagnosticMessageWithResult(DiagnosticLoggingKeys::pageCacheKey(), DiagnosticLoggingKeys::retrievalKey(), DiagnosticLoggingResultFail, ShouldSample::Yes); } if (!formState) { continueLoadAfterWillSubmitForm(); return; } m_client.dispatchWillSubmitForm(*formState, [this] (PolicyAction action) { policyChecker().continueLoadAfterWillSubmitForm(action); });} Êé•ÁùÄÂú® continueLoadAfterWillSubmitForm() ÊñπÊ≥ïÈáå m_provisionalDocumentLoader ‰ºöÂÅö‰∫õÂáÜÂ§áÂ∑•‰ΩúÂπ∂Â∞ÜÁä∂ÊÄÅËÆæÁΩÆÊàêÊ≠£Âú®Âä†ËΩΩËµÑÊ∫êÁöÑÁä∂ÊÄÅ„ÄÇÂú® prepareForLoadStart ‰∏≠ÊäõÂá∫Âä†ËΩΩÁä∂ÊÄÅÔºåÂõûË∞ÉÁªô FrameLoaderClientÔºåË∞ÉÁî® DocumentLoader ÁöÑ startLoadingMainResource„ÄÇ WebKit ÁΩëÁªúÂ§ÑÁêÜWebKit ËµÑÊ∫êÁöÑÂä†ËΩΩÈÉΩÊòØÁî±ÂÖ∂ÁßªÊ§çÊñπÂÆûÁé∞ÁöÑÔºåÁΩëÁªúÈÉ®ÂàÜ‰ª£Á†ÅÈÉΩÂú® WebCore/platform/network ÈáåÔºåÈáåÈù¢ÂåÖÂê´‰∫Ü HTTP HeaderÔºåMIMEÔºåÁä∂ÊÄÅÁ†ÅÁ≠â‰ø°ÊÅØÁöÑÂ§ÑÁêÜ„ÄÇ ResourceHandle ÁöÑÁõ∏ÂÖ≥Á±ª ResouceHandleClientÔºöË∑üÁΩëÁªú‰º†ËæìËøáÁ®ãÁõ∏ÂÖ≥ÔºåÊòØÁΩëÁªú‰∫ã‰ª∂ÂØπÂ∫îÁöÑÂõûË∞É„ÄÇ MainResourceLoaderÔºö‰∏ªËµÑÊ∫êÔºåÊåáÁöÑ HTML È°µÈù¢Ôºå‰ºöÁ´ãÂàªÂèëËµ∑Ôºå‰∏ãËΩΩÂ§±Ë¥•‰ºöÂêëÁî®Êà∑Êä•Èîô„ÄÇÊ≤°ÊúâÁºìÂ≠ò SubResourceLoaderÔºöÊ¥æÁîüËµÑÊ∫êÔºåHTML È°µÈù¢ÈáåÂÜÖÂµåÁöÑÂõæÁâáÂíåËÑöÊú¨ÈìæÊé•Á≠âÔºå‰ºöÈÄöËøá ResourceScheduler Ëøô‰∏™Á±ªÊù•ÁÆ°ÁêÜËµÑÊ∫êÂä†ËΩΩË∞ÉÂ∫¶„ÄÇ‰∏ãËΩΩÂ§±Ë¥•‰∏çÂêëÁî®Êà∑Êä•Èîô„ÄÇÊúâÁºìÂ≠òÊú∫Âà∂ÔºåÈÄöËøá ResourceCach ‰øùÂ≠ò CSS JS Á≠âËµÑÊ∫êÂéüÂßãÊï∞ÊçÆ‰ª•ÂèäËß£Á†ÅÂêéÁöÑÂõæÁâáÊï∞ÊçÆÔºå‰∏ÄÊñπÈù¢ÂèØ‰ª•ËäÇÁúÅÊµÅÈáè‰∏ÄÊñπÈù¢ÂèØ‰ª•ËäÇÁúÅËß£Á†ÅÊó∂Èó¥„ÄÇ ResourceLoaderÔºöÊòØ‰∏ªËµÑÊ∫êÂíåÊ¥æÁîüËµÑÊ∫êÂä†ËΩΩÂô®ÁöÑÂü∫Á±ªÔºå‰ºöÈÄöËøá ResourceNotifier Â∞ÜÂõûË∞É‰º†Áªô FrameLoaderClient„ÄÇ ResourceHandleClientResourceHandleClient ÂÆö‰πâ‰∫Ü‰∏Ä‰∫õÂØπÂ∫îÁΩëÁªúÂä†ËΩΩ‰∫ã‰ª∂ÂõûË∞ÉÂ§ÑÁêÜÁöÑËôöÂáΩÊï∞„ÄÇ‰∏ãÈù¢Â∞±ÊòØ ResourceHandleClient ÁöÑÂÆö‰πâ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566class ResourceHandleClient {public: WEBCORE_EXPORT ResourceHandleClient(); WEBCORE_EXPORT virtual ~ResourceHandleClient(); WEBCORE_EXPORT virtual ResourceRequest willSendRequest(ResourceHandle*, ResourceRequest&amp;&amp;, ResourceResponse&amp;&amp;); virtual void didSendData(ResourceHandle*, unsigned long long /*bytesSent*/, unsigned long long /*totalBytesToBeSent*/) { } //Êî∂Âà∞ÊúçÂä°Âô®Á´ØÁ¨¨‰∏Ä‰∏™ÂìçÂ∫îÂåÖÔºåÈÄöËøáÈáåÈù¢ÁöÑ HTTP Header ÂèØ‰ª•Âà§Êñ≠ÊòØÂê¶ÊàêÂäü virtual void didReceiveResponse(ResourceHandle*, ResourceResponse&amp;&amp;) { } //Êî∂Âà∞ÊúçÂä°Âô®Á´ØÂåÖÂê´ËØ∑Ê±ÇÊï∞ÊçÆÁöÑÂìçÂ∫îÂåÖ virtual void didReceiveData(ResourceHandle*, const char*, unsigned, int /*encodedDataLength*/) { } WEBCORE_EXPORT virtual void didReceiveBuffer(ResourceHandle*, Ref&lt;SharedBuffer&gt;&amp;&amp;, int encodedDataLength); //Êé•ÂèóËøáÁ®ãÁªìÊùü virtual void didFinishLoading(ResourceHandle*) { } //Êé•ÂèóÂ§±Ë¥• virtual void didFail(ResourceHandle*, const ResourceError&amp;) { } virtual void wasBlocked(ResourceHandle*) { } virtual void cannotShowURL(ResourceHandle*) { } virtual bool usesAsyncCallbacks() { return false; } virtual bool loadingSynchronousXHR() { return false; } // Client will pass an updated request using ResourceHandle::continueWillSendRequest() when ready. WEBCORE_EXPORT virtual void willSendRequestAsync(ResourceHandle*, ResourceRequest&amp;&amp;, ResourceResponse&amp;&amp;); // Client will call ResourceHandle::continueDidReceiveResponse() when ready. WEBCORE_EXPORT virtual void didReceiveResponseAsync(ResourceHandle*, ResourceResponse&amp;&amp;);#if USE(PROTECTION_SPACE_AUTH_CALLBACK) // Client will pass an updated request using ResourceHandle::continueCanAuthenticateAgainstProtectionSpace() when ready. WEBCORE_EXPORT virtual void canAuthenticateAgainstProtectionSpaceAsync(ResourceHandle*, const ProtectionSpace&amp;);#endif // Client will pass an updated request using ResourceHandle::continueWillCacheResponse() when ready.#if USE(CFURLCONNECTION) WEBCORE_EXPORT virtual void willCacheResponseAsync(ResourceHandle*, CFCachedURLResponseRef);#elif PLATFORM(COCOA) WEBCORE_EXPORT virtual void willCacheResponseAsync(ResourceHandle*, NSCachedURLResponse *);#endif#if USE(SOUP) virtual char* getOrCreateReadBuffer(size_t /*requestedLength*/, size_t&amp; /*actualLength*/) { return 0; }#endif virtual bool shouldUseCredentialStorage(ResourceHandle*) { return false; } virtual void didReceiveAuthenticationChallenge(ResourceHandle*, const AuthenticationChallenge&amp;) { }#if USE(PROTECTION_SPACE_AUTH_CALLBACK) virtual bool canAuthenticateAgainstProtectionSpace(ResourceHandle*, const ProtectionSpace&amp;) { return false; }#endif virtual void receivedCancellation(ResourceHandle*, const AuthenticationChallenge&amp;) { }#if PLATFORM(IOS) || USE(CFURLCONNECTION) virtual RetainPtr&lt;CFDictionaryRef&gt; connectionProperties(ResourceHandle*) { return nullptr; }#endif#if USE(CFURLCONNECTION) virtual CFCachedURLResponseRef willCacheResponse(ResourceHandle*, CFCachedURLResponseRef response) { return response; }#if PLATFORM(WIN) virtual bool shouldCacheResponse(ResourceHandle*, CFCachedURLResponseRef) { return true; }#endif // PLATFORM(WIN)#elif PLATFORM(COCOA) virtual NSCachedURLResponse *willCacheResponse(ResourceHandle*, NSCachedURLResponse *response) { return response; }#endif}; ‰∏é ResourceHandleClient Áõ∏ÂÖ≥ÁöÑÁ±ªÂ¶Ç‰∏ã Âä†ËΩΩÊµÅÁ®ã MainResourceLoader ÁöÑÂä†ËΩΩÈ°∫Â∫èMainResourceLoader Âä†ËΩΩÁöÑÊòØ html ÊñáÊú¨ËµÑÊ∫ê„ÄÇ 12345678910111213141516171819202122232425262728293031 c++MainResourceLoader::loadMainResourceLoader::loadNowMainResourceLoader::willSendRequestResourceLoader::willSendRequest //Âü∫Á±ª ResourceLoader ‰ºöÂ∞ÜÂõûË∞ÉÈÄöËøá ResourceNotifier ‰º†Áªô FrameLoaderClient ËøôÊ†∑ÂèØ‰ª•Êìç‰Ωú ResourceRequest Êù•ÂÅö‰∫õËÆæÁΩÆ request header ÁöÑÊìç‰Ωú„ÄÇPolicyChecker::checkNavigationPolicy //Ê£ÄÊü• NavigationPolicy ÂèØ‰ª•ËøáÊª§‰∏Ä‰∫õÈáçÂ§çÁöÑËØ∑Ê±ÇResourceHandle::create ÂºÄÂßãÂèëÁΩëÁªúËØ∑Ê±ÇMainResourceLoader::didReceiveResponse //‰∏ªËµÑÊ∫êÊî∂Âà∞Á¨¨‰∏Ä‰∏™ HTTP ÁöÑÂìçÂ∫îÂõûË∞ÉÔºåÂ§ÑÁêÜ HTTP headerPolicyChecker:: checkContentPolicy //ËøõË°å ContentPolicy ÁöÑÊ£ÄÊü•ÔºåÈÄöËøá dispatchDecidePolicyForMIMEType Êù•Âà§Êñ≠ÊòØÂê¶ÊòØ‰∏ãËΩΩÁöÑËØ∑Ê±ÇMainResourceLoader::continueAfterContentPolicy //ÁúãÁúã ContentPolicy Ê£ÄÊü•ÂêéÊòØÂê¶ÊúâÈîôËØØResourceLoader::didReceiveResponse //Âü∫Á±ª ResourceLoader ‰ºöÂ∞ÜÂõûË∞ÉÈÄöËøá ResourceNotifier ‰º†Áªô FrameLoaderClientMainResourceLoader::didReceiveData //‰∏ªËµÑÊ∫êÂºÄÂßãÊé•Âèó body Êï∞ÊçÆResourceLoader::didReceiveData //Âü∫Á±ª ResourceLoader ‰ºöÂ∞ÜÂõûË∞ÉÈÄöËøá ResourceNotifier ‰º†Áªô FrameLoaderClientMainResourceLoader::addDataDocumentLoader::receivedDataDocumentLoader::commitLoadFrameLoader::commitProvisionalLoad //‰ªé provisional Áä∂ÊÄÅÂà∞ Committed Áä∂ÊÄÅFrameLoaderClientQt::committedLoadDocumentLoader::commitDataDocumentWriter::setEncodingDocumentWriter::addDataDocumentParser::appendByteDecodedDataDocumentParser::appendBytes //ÁºñÁ†ÅÂ§ÑÁêÜHTMLDocumentParser::append //Ëß£Êûê HTMLMainResourceLoader::didFinishLoadingFrameLoader::finishedLoadingDocumentLoader::finishedLoadingFrameLoader::finishedLoadingDocumentDocumentWriter::endDocument::finishParsingHTMLDocumentParser::finish Âú®Êî∂Âà∞Á¨¨‰∏Ä‰∏™ÂìçÂ∫îÂåÖÂêé‰ºöÂõûË∞ÉÁªô MainResourceLoader ÁöÑ didReceiveResponse ÂáΩÊï∞Â§ÑÁêÜ Header ‰ΩøÁî® PolicyChecker ÁöÑ checkContentPolicy ÂÅöÊ†°È™åÔºåÂΩì PolicyAction ‰∏∫ PolicyUse ÂõûË∞ÉÁªô MainResourceLoader ÁöÑ continueAfterContentPolicy„ÄÇÁªìÊûú ResourceResponse ‰ºöÈÄöËøá ResourceNotifier ÈÄöÁü•ÁªôÂ§ñÈÉ®Êé•ÂèóÂõûË∞ÉÁöÑ‰∏çÂêåÂπ≥Âè∞ÁöÑ FrameLoaderClient„ÄÇ Âú®Êî∂Âà∞ÂêéÈù¢ÁöÑÂ∏¶Êï∞ÊçÆÁöÑÂìçÂ∫îÂåÖ‰ºöÂõûË∞ÉÁªô MainResourceLoader ÁöÑ didReceiveDataÔºåÈÄöËøá ResourceLoader ÁöÑ addDataOrBuffer ÊääÊî∂Âà∞ÁöÑÊï∞ÊçÆÂ≠òÂà∞ m_resourceData Èáå„ÄÇ‰∏ãÈù¢ÊòØ addDataOrBuffer ÊñπÊ≥ïÁöÑÂÆûÁé∞‰ª£Á†ÅÔºö 12345678910111213141516171819 c++void ResourceLoader::addDataOrBuffer(const char* data, unsigned length, SharedBuffer* buffer, DataPayloadType dataPayloadType){ if (m_options.dataBufferingPolicy == DoNotBufferData) return; if (!m_resourceData || dataPayloadType == DataPayloadWholeResource) { if (buffer) m_resourceData = buffer; else m_resourceData = SharedBuffer::create(data, length); return; } if (buffer) m_resourceData-&gt;append(*buffer); else m_resourceData-&gt;append(data, length);} Êé•Êî∂Âà∞ÁöÑ receiveData ‰ºöËøõÂÖ•Âà∞ DocumentLoader ÁöÑ commitLoad Èáå 12345678910111213141516171819202122 c++void DocumentLoader::commitLoad(const char* data, int length){ // Both unloading the old page and parsing the new page may execute JavaScript which destroys the datasource // by starting a new load, so retain temporarily. RefPtr&lt;Frame&gt; protectedFrame(m_frame); Ref&lt;DocumentLoader&gt; protectedThis(*this); commitIfReady(); FrameLoader* frameLoader = DocumentLoader::frameLoader(); if (!frameLoader) return;#if ENABLE(WEB_ARCHIVE) || ENABLE(MHTML) if (ArchiveFactory::isArchiveMimeType(response().mimeType())) return;#endif //FrameLoader ÈÄöËøá transitionToCommitted ‰ªé Provisional ÁöÑÁä∂ÊÄÅÂèò‰∏∫ Committed Áä∂ÊÄÅ frameLoader-&gt;client().committedLoad(this, data, length); if (isMultipartReplacingLoad()) frameLoader-&gt;client().didReplaceMultipartContent();} ÈöèÂêé DocumentLoader ÊâßË°å commitData Â∞ÜÂâçÈù¢ÁöÑÂÜÖÂÆπËøõË°åÁºñÁ†Å encodingÔºåËøô‰∫õÊï∞ÊçÆ‰ºöÈÄöËøá DocumentParser Êù•Ëß£Á†ÅÔºåËß£Á†ÅÂêéÁöÑÊï∞ÊçÆ ‰ºöÂàõÂª∫ HTMLDocument Âíå Document ÂØπË±°ÔºåÂêéÈÄöËøá DocumentWriter ‰º†Áªô DocumentParser„ÄÇËøô‰∏™ËøáÁ®ã‰ºöÂú® DocumentWriter ÁöÑ begin ÊñπÊ≥ïÈáåÂÆåÊàêÔºåÂÖ∑‰ΩìÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172 c++void DocumentWriter::begin(const URL&amp; urlReference, bool dispatch, Document* ownerDocument){ // We grab a local copy of the URL because it&apos;s easy for callers to supply // a URL that will be deallocated during the execution of this function. // For example, see &lt;https://bugs.webkit.org/show_bug.cgi?id=66360&gt;. URL url = urlReference; // Create a new document before clearing the frame, because it may need to // inherit an aliased security context. //ÂàõÂª∫‰∫Ü Document ÂØπË±° Ref&lt;Document&gt; document = createDocument(url); // If the new document is for a Plugin but we&apos;re supposed to be sandboxed from Plugins, // then replace the document with one whose parser will ignore the incoming data (bug 39323) if (document-&gt;isPluginDocument() &amp;&amp; document-&gt;isSandboxed(SandboxPlugins)) document = SinkDocument::create(m_frame, url); // FIXME: Do we need to consult the content security policy here about blocked plug-ins? bool shouldReuseDefaultView = m_frame-&gt;loader().stateMachine().isDisplayingInitialEmptyDocument() &amp;&amp; m_frame-&gt;document()-&gt;isSecureTransitionTo(url); if (shouldReuseDefaultView) document-&gt;takeDOMWindowFrom(m_frame-&gt;document()); else document-&gt;createDOMWindow(); // Per &lt;https://www.w3.org/TR/upgrade-insecure-requests/&gt;, we need to retain an ongoing set of upgraded // requests in new navigation contexts. Although this information is present when we construct the // Document object, it is discard in the subsequent &apos;clear&apos; statements below. So, we must capture it // so we can restore it. HashSet&lt;RefPtr&lt;SecurityOrigin&gt;&gt; insecureNavigationRequestsToUpgrade; if (auto* existingDocument = m_frame-&gt;document()) insecureNavigationRequestsToUpgrade = existingDocument-&gt;contentSecurityPolicy()-&gt;takeNavigationRequestsToUpgrade(); m_frame-&gt;loader().clear(document.ptr(), !shouldReuseDefaultView, !shouldReuseDefaultView); clear(); // m_frame-&gt;loader().clear() might fire unload event which could remove the view of the document. // Bail out if document has no view. if (!document-&gt;view()) return; if (!shouldReuseDefaultView) m_frame-&gt;script().updatePlatformScriptObjects(); m_frame-&gt;loader().setOutgoingReferrer(url); m_frame-&gt;setDocument(document.copyRef()); document-&gt;contentSecurityPolicy()-&gt;setInsecureNavigationRequestsToUpgrade(WTFMove(insecureNavigationRequestsToUpgrade)); if (m_decoder) document-&gt;setDecoder(m_decoder.get()); if (ownerDocument) { document-&gt;setCookieURL(ownerDocument-&gt;cookieURL()); document-&gt;setSecurityOriginPolicy(ownerDocument-&gt;securityOriginPolicy()); document-&gt;setStrictMixedContentMode(ownerDocument-&gt;isStrictMixedContentMode()); } m_frame-&gt;loader().didBeginDocument(dispatch); document-&gt;implicitOpen(); // We grab a reference to the parser so that we&apos;ll always send data to the // original parser, even if the document acquires a new parser (e.g., via // document.open). m_parser = document-&gt;parser(); if (m_frame-&gt;view() &amp;&amp; m_frame-&gt;loader().client().hasHTMLView()) m_frame-&gt;view()-&gt;setContentsSize(IntSize()); m_state = StartedWritingState;} Document ÂØπË±°Êó∂ DOM Ê†ëÁöÑÊ†πËäÇÁÇπÔºåm_writer Âú® addData Êó∂‰ºöÁî® DocumentParser Êù•Ëß£Á†ÅÔºåËøô‰∏™Ëß£Á†ÅÊòØÂú® DecodedDataDocumentParser ÁöÑ appendBytes ÈáåÂÅöÁöÑ„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314 c++void DecodedDataDocumentParser::appendBytes(DocumentWriter&amp; writer, const char* data, size_t length){ if (!length) return; //Ëß£Á†Å Loader Ê®°Âùó‰º†Êù•ÁöÑÂ≠óËäÇÊµÅÔºåËß£Á†ÅÂêéÁöÑ String ‰ºöË¢´ HTMLDocumentParser ÁöÑ HTMLInputStream ÊâÄÊåÅÊúâ„ÄÇ String decoded = writer.createDecoderIfNeeded()-&gt;decode(data, length); if (decoded.isEmpty()) return; //Ëß£Á†ÅÊàêÂäü‰ºö‰∫§Áªô Parser Â§ÑÁêÜÁîüÊàê DOM TreeÔºåÂΩ¢Êàê Parser Âíå MainResourceLoader ÂêåÊ≠• writer.reportDataReceived(); append(decoded.releaseImpl());} Êï∞ÊçÆÊé•Êî∂ÂÆåÊØï‰ºöÂõûË∞É MainResourceLoader ÁöÑ didFinishLoading„ÄÇÊé•‰∏ãÊù•ÂÜçË∞ÉÁî® FrameLoader ÁöÑ finishedLoading Âíå finishedLoadingDocumentÔºåË∞ÉÁî® DocumentWriter ÁöÑ end„ÄÇÊúÄÂêéË∞ÉÁî® Document ÁöÑ finishParsingÔºåËøôÊ†∑ MainResource ÁöÑÂä†ËΩΩÂÆåÊàê„ÄÇ ‰∏ãÈù¢ÁúãÁúãËß£Á†ÅÁöÑÊµÅÁ®ãÔºödecoder ÁöÑÁ±ªÂõæÂ¶Ç‰∏ã: SubResourceLoader ÁöÑÂä†ËΩΩÈ°∫Â∫èSubResourceLoader Âä†ËΩΩÁöÑÈÉΩÊòØÊ¥æÁîüËµÑÊ∫êÔºåÂä†ËΩΩÊ¥æÁîüËµÑÊ∫êÁöÑÊó∂Â∫èÂõæÂ¶Ç‰∏ãÔºö ‰ºöÂú®ÂàõÂª∫ HTMLElement ËÆæÁΩÆ src Â±ûÊÄßÊó∂‰ºöÂà§Êñ≠ tagName ÊòØÂê¶ÊòØ imgÔºåÊòØÁöÑËØùÂ∞±‰ºöËß¶Âèë SubResourceLoader„ÄÇËÆæÁΩÆÂ±ûÊÄßÂíåÂà§Êñ≠ÁöÑ‰ª£Á†ÅÂú® HTMLConstructionSite Ëøô‰∏™Á±ªÈáåÔºåÂÖ∑‰ΩìÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243 c++RefPtr&lt;Element&gt; HTMLConstructionSite::createHTMLElementOrFindCustomElementInterface(AtomicHTMLToken&amp; token, JSCustomElementInterface** customElementInterface){ auto&amp; localName = token.name(); // FIXME: This can&apos;t use HTMLConstructionSite::createElement because we // have to pass the current form element. We should rework form association // to occur after construction to allow better code sharing here. // https://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#create-an-element-for-the-token Document&amp; ownerDocument = ownerDocumentForCurrentNode(); bool insideTemplateElement = !ownerDocument.frame(); //Â∞Ü tagName ÂíåËäÇÁÇπÊûÑÈÄ†ÂàõÂª∫Êàê HTMLImageElement RefPtr&lt;Element&gt; element = HTMLElementFactory::createKnownElement(localName, ownerDocument, insideTemplateElement ? nullptr : form(), true); if (UNLIKELY(!element)) { auto* window = ownerDocument.domWindow(); if (customElementInterface &amp;&amp; window) { auto* registry = window-&gt;customElementRegistry(); if (UNLIKELY(registry)) { if (auto* elementInterface = registry-&gt;findInterface(localName)) { *customElementInterface = elementInterface; return nullptr; } } } QualifiedName qualifiedName(nullAtom(), localName, xhtmlNamespaceURI); if (Document::validateCustomElementName(localName) == CustomElementNameValidationStatus::Valid) { element = HTMLElement::create(qualifiedName, ownerDocument); element-&gt;setIsCustomElementUpgradeCandidate(); } else element = HTMLUnknownElement::create(qualifiedName, ownerDocument); } ASSERT(element); // FIXME: This is a hack to connect images to pictures before the image has // been inserted into the document. It can be removed once asynchronous image // loading is working. if (is&lt;HTMLPictureElement&gt;(currentNode()) &amp;&amp; is&lt;HTMLImageElement&gt;(*element)) downcast&lt;HTMLImageElement&gt;(*element).setPictureElement(&amp;downcast&lt;HTMLPictureElement&gt;(currentNode())); //ËÆæÁΩÆÂ±ûÊÄßÔºåËøôÈáå‰ºöÂà§Êñ≠ÊòØÂê¶ÊòØ srcÔºåÂ¶ÇÊûú element ÁöÑ tagName ÊòØ img Â∞±‰ºöËß¶ÂèëÊ¥æÁîüËµÑÊ∫ê‰∏ãËΩΩ setAttributes(*element, token, m_parserContentPolicy); ASSERT(element-&gt;isHTMLElement()); return element;} Âú® HTMLImageElement Ëøô‰∏™Á±ªÈáå‰ºöÁî® parseAttribute ÊñπÊ≥ïÂ§ÑÁêÜÔºåÂú®Ëøô‰∏™ÊñπÊ≥ïÈáåÂà§Êñ≠Âà∞Â±ûÊÄßÊòØ srcAttr Êó∂‰ºöËß¶Âèë selectImageSource ÊñπÊ≥ïÔºåÊñπÊ≥ïÂÆûÁé∞Â¶Ç‰∏ãÔºö 1234567891011121314 c++void HTMLImageElement::selectImageSource(){ // First look for the best fit source from our &lt;picture&gt; parent if we have one. ImageCandidate candidate = bestFitSourceFromPictureElement(); if (candidate.isEmpty()) { // If we don&apos;t have a &lt;picture&gt; or didn&apos;t find a source, then we use our own attributes. auto sourceSize = SizesAttributeParser(attributeWithoutSynchronization(sizesAttr).string(), document()).length(); candidate = bestFitSourceForImageAttributes(document().deviceScaleFactor(), attributeWithoutSynchronization(srcAttr), attributeWithoutSynchronization(srcsetAttr), sourceSize); } setBestFitURLAndDPRFromImageCandidate(candidate); //updateFromElementIgnoringPreviousError ÊòØ ImageLoader Á±ªÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂÆÉ‰ºöË∞ÉÁî® updateFromElement ÊñπÊ≥ïÊù•Âà§Êñ≠ËµÑÊ∫êÊù•Ê∫ê m_imageLoader.updateFromElementIgnoringPreviousError();} SubResourceLoader ‰∏ªË¶ÅÊòØËΩ¨Áªô SubResourceLoaderClient Á±ªÊù•ÂÆåÊàêÔºåÂ¶Ç‰∏ãÂõæÔºö ResourceLoadScheduler ‰ºöÂØπ SubResourceLoader ËøõË°åË∞ÉÂ∫¶ÁÆ°ÁêÜ DocumentÔºö‰ºöÂàõÂª∫Êã•Êúâ‰∏Ä‰∏™ CachedResourceLoader Á±ªÁöÑÂØπË±°ÂÆû‰æã m_cachedResourceLoaderÔºåËøô‰∏™Á±ªÊúâËÆøÈóÆÊ¥æÁîüËµÑÊ∫êÁöÑÊé•Âè£ÔºåÊØîÂ¶Ç requestImageÔºårequestCSSStyleSheetÔºårequestUserCSSStyleSheetÔºårequestScriptÔºårequestFontÔºårequestXSLStyleSheetÔºårequestLinkPrefetch Á≠â„ÄÇËøôÈáå requestImage ÊúâÊù°‰ª∂Âà§Êñ≠ÔºåËøôÊ†∑Â§ñÈÉ®ÂÆûÁé∞Êé•Âè£Â∞±ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆ‰∏çÂä†ËΩΩÂõæÁâáÔºåËææÂà∞ÂæàÂ§öÊµèËßàÂô®ÈáåÊèê‰æõÈÇ£ÁßçÊó†ÂõæÊ®°Âºè‰∫Ü„ÄÇ CacheResourceLoaderÔºö‰ºöÂàõÂª∫ CachedResourceRequest ÂØπË±°ÂèëËØ∑Ê±Ç„ÄÇÂú®ÂÆÉÁöÑÊûÑÈÄ†ÂáΩÊï∞Èáå‰ºö‰º†ÂÖ•‰∏Ä‰∏™ CachedResource ÂØπË±°‰Ωú‰∏∫ÂèÇÊï∞„ÄÇËøò‰ºöÈÄöËøá m_requests Êù•ËÆ∞ÂΩïËµÑÊ∫êËØ∑Ê±ÇÊï∞ÈáèÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊääÂä†ËΩΩÁä∂ÊÄÅÂõûË∞ÉÂá∫Âéª‰∫Ü„ÄÇ MemoryCacheÔºö‰ºöÁª¥Êä§‰∏Ä‰∏™ HashMap ÔºåÈáåÈù¢ÁöÑ value Â≠òÂÇ® CachedResource Á±ªÁºìÂ≠òÁöÑÂÜÖÂÆπ„ÄÇHashMap ÂÆö‰πâ‰∏∫ HashMap &lt;String,CachedResource&gt; m_resources; Âú® CachedResourceLoader Èáå‰ºöÈÄöËøá resourceForUrl Âú® Memory Cache ÈáåÊâæÂØπÂ∫î url ÂØπÂ∫îÁöÑÁºìÂ≠òËµÑÊ∫êÔºådetermineRevalidationPolicy ‰ºöËøîÂõû‰∏Ä‰∏™Êûö‰∏æÂÄºÁî®Êù•Á°ÆÂÆöÁî®Âì™ÁßçÊñπÂºèÂä†ËΩΩËµÑÊ∫êÔºö 12enum RevalidationPolicy { Use, Revalidate, Reload, Load }; RevalidationPolicy determineRevalidationPolicy(CachedResource::Type, CachedResourceRequest&amp;, CachedResource* existingResource, ForPreload, DeferOption) const; ÂèØ‰ª•ÁúãÂà∞ RevalidationPolicy ÊúâÂõõÁßçÔºåUseÔºåRevalidateÔºåReload Âíå Load„ÄÇUse Ë°®Á§∫ËµÑÊ∫êÂ∑≤ÁªèÂú®ÁºìÂ≠òÈáåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®„ÄÇRevalidate Ë°®Á§∫ÁºìÂ≠òËµÑÊ∫êÂ∑≤Â§±ÊïàÔºåÈúÄÂà†Èô§ÊóßËµÑÊ∫êÔºåÈáçÊñ∞Âú®ÁºìÂ≠òÈáåÂä†Êñ∞ËµÑÊ∫ê„ÄÇReload Ë°®Á§∫Â∑≤ÁºìÂ≠ò‰ΩÜÁî±‰∫éËµÑÊ∫êÁ±ªÂûã‰∏çÂêåÊàñËÄÖ Cache-control:no-cache ËÆæÁΩÆ‰∏çÁî® Cache ÁöÑÊÉÖÂÜµÈúÄË¶ÅÈáçÊñ∞Âä†ËΩΩ„ÄÇLoad Ë°®Á§∫ÁºìÂ≠òÈáåÊ≤°ÊúâÔºåÈúÄÁõ¥Êé•Âä†ËΩΩ„ÄÇËøôÊÆµÈÄªËæëÂ§ÑÁêÜÂú® CachedResourceLoader ÈáåÁöÑ requestResource ÈáåÊúâÂÆûÁé∞ÔºåÂÖ∑‰Ωì‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748 c++RevalidationPolicy policy = determineRevalidationPolicy(type, request, resource.get(), forPreload, defer);switch (policy) {case Reload: memoryCache.remove(*resource); FALLTHROUGH;case Load: if (resource) logMemoryCacheResourceRequest(frame(), DiagnosticLoggingKeys::memoryCacheEntryDecisionKey(), DiagnosticLoggingKeys::unusedKey()); resource = loadResource(type, WTFMove(request)); break;case Revalidate: if (resource) logMemoryCacheResourceRequest(frame(), DiagnosticLoggingKeys::memoryCacheEntryDecisionKey(), DiagnosticLoggingKeys::revalidatingKey()); resource = revalidateResource(WTFMove(request), *resource); break;case Use: ASSERT(resource); if (shouldUpdateCachedResourceWithCurrentRequest(*resource, request)) { resource = updateCachedResourceWithCurrentRequest(*resource, WTFMove(request)); if (resource-&gt;status() != CachedResource::Status::Cached) policy = Load; } else { ResourceError error; if (!shouldContinueAfterNotifyingLoadedFromMemoryCache(request, *resource, error)) return makeUnexpected(WTFMove(error)); logMemoryCacheResourceRequest(frame(), DiagnosticLoggingKeys::memoryCacheEntryDecisionKey(), DiagnosticLoggingKeys::usedKey()); loadTiming.setResponseEnd(MonotonicTime::now()); memoryCache.resourceAccessed(*resource); if (RuntimeEnabledFeatures::sharedFeatures().resourceTimingEnabled() &amp;&amp; document() &amp;&amp; !resource-&gt;isLoading()) { auto resourceTiming = ResourceTiming::fromCache(url, request.initiatorName(), loadTiming, resource-&gt;response(), *request.origin()); if (initiatorContext == InitiatorContext::Worker) { ASSERT(is&lt;CachedRawResource&gt;(resource.get())); downcast&lt;CachedRawResource&gt;(resource.get())-&gt;finishedTimingForWorkerLoad(WTFMove(resourceTiming)); } else { ASSERT(initiatorContext == InitiatorContext::Document); m_resourceTimingInfo.storeResourceTimingInitiatorInformation(resource, request.initiatorName(), frame()); m_resourceTimingInfo.addResourceTiming(*resource.get(), *document(), WTFMove(resourceTiming)); } } if (forPreload == ForPreload::No) resource-&gt;setLoadPriority(request.priority()); } break;} Âú® CachedResourceLoader ÁöÑ loadResource ÊñπÊ≥ïÈáå‰ºöÈÄöËøáÂ∑•ÂéÇÊñπÊ≥ï createResource Êù•ÂàõÂª∫‰∏çÂêåÁöÑ CacheResource„ÄÇ CachedResource Âä†ËΩΩCachedResource ÂÆûÁé∞‰∫Ü RFC2616 https://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html ÁöÑ w3c ÁºìÂ≠òÊ†áÂáÜÔºåÊ†πÊçÆËµÑÊ∫êÁ±ªÂûãËøòÊ¥æÁîüÂá∫‰∏çÂêåÁöÑÂ≠êÁ±ªÂ¶ÇÂõæÊâÄÁ§∫Ôºö ‰ºöÊúâ‰∏Ä‰∏™ CachedResourceClient ÁöÑÈõÜÂêà m_clients Êù•ËÆ∞ÂΩïÊâÄÊúâÁöÑ CachedResourceÔºåÂêåÊó∂ CachedResourceClientWalker Ëøô‰∏™Êé•Âè£ÂèØ‰ª•ÈÅçÂéÜËøô‰∏™ÈõÜÂêà„ÄÇ CacheResource ‰ºöÈÄöËøá CachedResourceClient::notifyFinished Êé•Âè£Êù•Âú®Êï∞ÊçÆÈÉΩÂà∞‰ΩçÂêéÊù•ËøõË°åÈÄöÁü•„ÄÇ Âú® CachedResource Èáå type Êûö‰∏æÂÆö‰πâ‰∫ÜÊ¥æÁîüËµÑÊ∫êÁöÑÁ±ªÂûãÔºåÈÄöËøá defaultPriorityForResourceType ÂáΩÊï∞ÊñπÊ≥ïÁöÑËøîÂõûÂèØ‰ª•ÁúãÂà∞ÂêÑËµÑÊ∫êÂä†ËΩΩÁöÑ‰ºòÂÖàÁ∫ßÂÖ∑‰ΩìÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041 c++ResourceLoadPriority CachedResource::defaultPriorityForResourceType(Type type){ switch (type) { case CachedResource::MainResource: return ResourceLoadPriority::VeryHigh; case CachedResource::CSSStyleSheet: case CachedResource::Script: return ResourceLoadPriority::High;#if ENABLE(SVG_FONTS) case CachedResource::SVGFontResource:#endif case CachedResource::MediaResource: case CachedResource::FontResource: case CachedResource::RawResource: case CachedResource::Icon: return ResourceLoadPriority::Medium; case CachedResource::ImageResource: return ResourceLoadPriority::Low;#if ENABLE(XSLT) case CachedResource::XSLStyleSheet: return ResourceLoadPriority::High;#endif case CachedResource::SVGDocumentResource: return ResourceLoadPriority::Low; case CachedResource::Beacon: return ResourceLoadPriority::VeryLow;#if ENABLE(LINK_PREFETCH) case CachedResource::LinkPrefetch: return ResourceLoadPriority::VeryLow; case CachedResource::LinkSubresource: return ResourceLoadPriority::VeryLow;#endif#if ENABLE(VIDEO_TRACK) case CachedResource::TextTrackResource: return ResourceLoadPriority::Low;#endif } ASSERT_NOT_REACHED(); return ResourceLoadPriority::Low;} Êï¥‰∏™Âä†ËΩΩÁöÑÂÆâÊéíÊòØÈÄöËøá WebResourceLoadScheduler ÈáåÁöÑ scheduleLoad ÈÄöËøá‰∏äÈù¢ËøîÂõûÁöÑ‰ºòÂÖàÁ∫ßÊù•ÁöÑ„ÄÇÂΩìÁÑ∂Ëøô‰∫õÂÆûÁé∞ÂíåÂπ≥Âè∞ÊòØÁõ∏ÂÖ≥ÁöÑ‰ºöÊ†πÊçÆ‰∏çÂêåÂπ≥Âè∞Êúâ‰∏çÂêåÁöÑÂ§ÑÁêÜÔºåÂÖ∑‰ΩìÂ§ÑÁêÜÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960 c++void WebResourceLoadScheduler::scheduleLoad(ResourceLoader* resourceLoader){ ASSERT(resourceLoader);#if PLATFORM(IOS) // If there&apos;s a web archive resource for this URL, we don&apos;t need to schedule the load since it will never touch the network. if (!isSuspendingPendingRequests() &amp;&amp; resourceLoader-&gt;documentLoader()-&gt;archiveResourceForURL(resourceLoader-&gt;iOSOriginalRequest().url())) { resourceLoader-&gt;startLoading(); return; }#else if (resourceLoader-&gt;documentLoader()-&gt;archiveResourceForURL(resourceLoader-&gt;request().url())) { resourceLoader-&gt;start(); return; }#endif//Ê†πÊçÆ url ÂàõÂª∫ hostÔºåÁÑ∂ÂêéÂä†Âà∞ ResourceLoadSchedule ÁöÑ m_hosts Â±ûÊÄßÈáå#if PLATFORM(IOS) HostInformation* host = hostForURL(resourceLoader-&gt;iOSOriginalRequest().url(), CreateIfNotFound);#else HostInformation* host = hostForURL(resourceLoader-&gt;url(), CreateIfNotFound);#endif ResourceLoadPriority priority = resourceLoader-&gt;request().priority(); bool hadRequests = host-&gt;hasRequests(); //Êää‰ºòÂÖàÁ∫ßÂ≠òÊîæÂà∞ host ÁöÑ m_requestsPending Â±ûÊÄßÈáå host-&gt;schedule(resourceLoader, priority);#if PLATFORM(COCOA) || USE(CFURLCONNECTION) if (ResourceRequest::resourcePrioritiesEnabled() &amp;&amp; !isSuspendingPendingRequests()) { // Serve all requests at once to keep the pipeline full at the network layer. // FIXME: Does this code do anything useful, given that we also set maxRequestsInFlightPerHost to effectively unlimited on these platforms? servePendingRequests(host, ResourceLoadPriority::VeryLow); return; }#endif//ËøôÈáåÂ∞±ÊòØÂ¶Ç‰ΩïÊ†πÊçÆ‰ºòÂÖàÁ∫ßÊù•ËøõË°åÂÆâÊéíÁöÑ#if PLATFORM(IOS) if ((priority &gt; ResourceLoadPriority::Low || !resourceLoader-&gt;iOSOriginalRequest().url().protocolIsInHTTPFamily() || (priority == ResourceLoadPriority::Low &amp;&amp; !hadRequests)) &amp;&amp; !isSuspendingPendingRequests()) { //ÈáçË¶ÅËµÑÊ∫êÁ´ãÂàªËøõË°å servePendingRequests(host, priority); return; }#else if (priority &gt; ResourceLoadPriority::Low || !resourceLoader-&gt;url().protocolIsInHTTPFamily() || (priority == ResourceLoadPriority::Low &amp;&amp; !hadRequests)) { //ÈáçË¶ÅËµÑÊ∫êÁ´ãÂàªËøõË°å servePendingRequests(host, priority); return; }#endif // Handle asynchronously so early low priority requests don&apos;t // get scheduled before later high priority ones. //‰∏çÈáçË¶ÅÁöÑÂ∞±Âª∂ËøüËøõË°åÔºåÁÑ∂ÂêéÊ†πÊçÆ‰ºòÂÖàÁ∫ßÔºåÁî±È´òÂà∞‰Ωé‰æùÊ¨°Âä†ËΩΩ scheduleServePendingRequests();} servePendingRequests Êúâ‰∏§‰∏™ÈáçËΩΩÂÆûÁé∞ÔºåÁ¨¨‰∏Ä‰∏™‰ºöÊ†πÊçÆ host Êù•ÈÅçÂéÜÔºåÁÑ∂ÂêéÁî±Á¨¨‰∫å‰∏™ÈáçËΩΩÊù•ÂÖ∑‰ΩìÂÆûÁé∞ÔºåÂÖ∑‰Ωì‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233 c++void WebResourceLoadScheduler::servePendingRequests(HostInformation* host, ResourceLoadPriority minimumPriority){ auto priority = ResourceLoadPriority::Highest; while (true) { auto&amp; requestsPending = host-&gt;requestsPending(priority); while (!requestsPending.isEmpty()) { RefPtr&lt;ResourceLoader&gt; resourceLoader = requestsPending.first(); // For named hosts - which are only http(s) hosts - we should always enforce the connection limit. // For non-named hosts - everything but http(s) - we should only enforce the limit if the document isn&apos;t done parsing // and we don&apos;t know all stylesheets yet. Document* document = resourceLoader-&gt;frameLoader() ? resourceLoader-&gt;frameLoader()-&gt;frame().document() : 0; bool shouldLimitRequests = !host-&gt;name().isNull() || (document &amp;&amp; (document-&gt;parsing() || !document-&gt;haveStylesheetsLoaded())); if (shouldLimitRequests &amp;&amp; host-&gt;limitRequests(priority)) return; requestsPending.removeFirst(); host-&gt;addLoadInProgress(resourceLoader.get());#if PLATFORM(IOS) if (!IOSApplication::isWebProcess()) { resourceLoader-&gt;startLoading(); return; }#endif //Âú®Ëøô‰∏™ÂáΩÊï∞ÈáåÂàõÂª∫‰∫Ü ResourceHandle resourceLoader-&gt;start(); } if (priority == minimumPriority) return; --priority; }} Âä†ËΩΩÂÆåÊï∞ÊçÆÂêéÔºåÂ§ÑÁêÜËøáÁ®ãÂíå MainResource Á±ª‰ººÔºåSubResourceLoader ‰ºö‰Ωú‰∏∫ ResourceHandle ÁöÑÊé•ÂèóËÄÖÔºå‰ºöÊé•Âèó ResourceHandle ÁöÑÂõûË∞ÉÔºåÂíå MainResource ‰∏çÂêåÁöÑÂè™ÊòØ Memeory Cache ÈÉ®ÂàÜÔºåËøôÈÉ®ÂàÜÁöÑÂÆûÁé∞ÊòØÂú® SubResourceLoader ÁöÑ didReceiveData Èáå„ÄÇÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324 c++void SubresourceLoader::didReceiveDataOrBuffer(const char* data, int length, RefPtr&lt;SharedBuffer&gt;&amp;&amp; buffer, long long encodedDataLength, DataPayloadType dataPayloadType){ ASSERT(m_resource); if (m_resource-&gt;response().httpStatusCode() &gt;= 400 &amp;&amp; !m_resource-&gt;shouldIgnoreHTTPStatusCodeErrors()) return; ASSERT(!m_resource-&gt;resourceToRevalidate()); ASSERT(!m_resource-&gt;errorOccurred()); ASSERT(m_state == Initialized); // Reference the object in this method since the additional processing can do // anything including removing the last reference to this object; one example of this is 3266216. Ref&lt;SubresourceLoader&gt; protectedThis(*this); //ResourceLoader Èáå‰ºöÊéâ addDataOrBuffer ‰ºöÊääÊï∞ÊçÆÂ≠òÂú® SubResourceLoader ÁöÑ m_resourceData Èáå ResourceLoader::didReceiveDataOrBuffer(data, length, buffer.copyRef(), encodedDataLength, dataPayloadType); if (!m_loadingMultipartContent) { if (auto* resourceData = this-&gt;resourceData()) m_resource-&gt;addDataBuffer(*resourceData); else m_resource-&gt;addData(buffer ? buffer-&gt;data() : data, buffer ? buffer-&gt;size() : length); }} ‰ª• image ‰∏∫‰æãÂ¶ÇÂõæÊâÄÁ§∫Ôºö ‰∏æ‰∏™‰æãÂ≠ê image Âä†ËΩΩÁöÑÈ°∫Â∫è„ÄÇDocLoader ÊòØË¥üË¥£Â≠êËµÑÊ∫êÁöÑÂä†ËΩΩÔºåË¶ÅÂä†ËΩΩ‰∏Ä‰∏™ÂõæÂÉèÔºåÈ¶ñÂÖà DocLoader Ë¶ÅÊ£ÄÊü• Cache ‰∏≠ÊòØÂê¶ÊúâÂØπÂ∫îÁöÑ CacheImage ÂØπË±°ÔºåÂ¶ÇÊûúÊúâÂ∞±‰∏çÁî®ÂÜçÊ¨°‰∏ãËΩΩÂíåËß£Á†ÅÁõ¥Êé•Áî®‰πã„ÄÇ‰∏çÂú®‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ CacheImage ÂØπË±°ÔºåËøô‰∏™ CacheImage ‰ºöË¶ÅÊ±Ç Loader ÂØπË±°ÂàõÂª∫ SubresourceLoader Êù•ÂêØÂä®ÁΩëÁªúËØ∑Ê±Ç„ÄÇ CacheImage ÁöÑÂä†ËΩΩËøáÁ®ãÂ¶Ç‰∏ãÂõæÔºö ÂÖ∑‰ΩìË∞ÉÁî®ÊñπÊ≥ïÈ°∫Â∫èÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132 c++HTMLImageElement::create //Ëß£ÊûêÂà∞ img Ê†áÁ≠æ ‰ºöÂàõÂª∫ HTMLImageElement ÂØπË±°ÔºåÈáåÈù¢ÂåÖÂê´ HTMLImageLoader ÂØπË±°ImageLoader::updateFromElementIgnoringPreviousError //Ëß£ÊûêÂà∞ img ÁöÑ href Â±ûÊÄßImageLoader::updateFromElementCachedResourceLoader::requestImageCachedResourceLoader::requestResource //Âà§Êñ≠ÊòØÂê¶‰ªéÁºìÂ≠òËØªÂèñÔºåËøòÊòØÁΩëÁªúËé∑ÂèñCachedResourceLoader::loadResource //ÂàõÂª∫‰∏çÂêåÁ±ªÂûãÁöÑ CachedResourceÔºåËøôÈáåÊòØ CachedImageMemoryCache::add //ÂàõÂª∫ÂØπÂ∫îÁöÑ cache È°πÁõÆCachedImage::loadCachedResource::loadCachedResourceLoader::loadCachedResourceRequest::loadResourceLoaderScheduler::scheduleSubresourceLoadSubresourceLoader::createResourceLoadScheduler::requestTimerFiredResourceLoader::startResourceHandle::createResourceLoader::didReceiveResponse //Êî∂Âà∞ HTTP Header ÁöÑ responseSubresourceLoader::didiReceiveResponseCachedResourceRequest::didReceiveResponse //Â§ÑÁêÜÂìçÂ∫îResourceLoader::didReceiveResponseResourceLoader::didReceiveData //Êî∂Âà∞ body Êï∞ÊçÆSubresourceLoader::didReceiveDataResourceLoader::didReceiveDataResourceLoader::addDataCachedResourceRequest::didReceiveDataResourceLoader::didFinishLoading //Êï∞ÊçÆËØªÂèñÂÆåÊàêSubresourceLoader::didFinishLoadingCachedResourceRequest::didFinishLoadingCachedResource::finishCachedResourceLoader::loadDoneCachedImage::data //ÂàõÂª∫ Image ÂØπË±°ÔºåËøõË°åËß£Á†Å ÂèØ‰ª•Áî®‰∏ãÂõæÊ¶ÇÊã¨‰∏ãÔºö‰∏ÄËà¨ÁöÑËµÑÊ∫êÂä†ËΩΩÈÉΩÊòØÂºÇÊ≠•ÊâßË°åÔºå‰ΩÜÊòØÁ¢∞Âà∞ JavaScript Êñá‰ª∂Âä†ËΩΩÊó∂‰ºöÈòªÁ¢ç‰∏ªÁ∫øÁ®ãÁöÑÊ∏≤ÊüìÔºåËøôÊó∂ WebKit ‰ºöÂú®ÈòªÁ¢çÊó∂ÂéªÂêéÈù¢Êî∂ÈõÜÂÖ∂ÂÆÉËµÑÊ∫êÁöÑ URL ÂèëÂπ∂ÂèëËØ∑Ê±ÇÔºåËøôÊ†∑ÂØπÂä†ËΩΩÈÄüÂ∫¶‰ºöÊúâ‰∏ÄÂÆöÁöÑ‰ºòÂåñ„ÄÇ ËµÑÊ∫êÁöÑÁîüÂëΩÂë®ÊúüËµÑÊ∫êÊ±†ÈááÁî®ÁöÑÊòØ Least Recent Used ÊúÄÂ∞ë‰ΩøÁî®ÁÆóÊ≥ï LRU„ÄÇÈÄöËøá HTTP ÂçèËÆÆËßÑËåÉ‰∏≠Êõ¥Êñ∞ËßÑËåÉÊù•Á°ÆÂÆö‰∏ãÊ¨°ÊòØÂê¶ÈúÄË¶ÅÊõ¥Êñ∞ËµÑÊ∫ê„ÄÇÂÖ∑‰ΩìÂÅöÊ≥ïÊòØÂÖàÂà§Êñ≠ËµÑÊ∫êÊòØÂê¶Âú®ËµÑÊ∫êÊ±†ÈáåÔºåÂú®ÁöÑËØùÂ∞±Âèë‰∏Ä‰∏™ HTTP ËØ∑Ê±ÇÂ∏¶‰∏ä‰∏Ä‰∫õ‰ø°ÊÅØÊØîÂ¶ÇËµÑÊ∫êÁöÑ‰øÆÊîπÊó∂Èó¥ÔºåÁÑ∂ÂêéÊúçÂä°Âô®Ê†πÊçÆËøô‰∏™‰ø°ÊÅØÂà§Êñ≠ÊòØÂê¶ÊúâÊõ¥Êñ∞ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊõ¥Êñ∞Â∞±ËøîÂõû 304 Áä∂ÊÄÅÁ†ÅÔºåËøôÊ†∑Â∞±Áõ¥Êé•‰ΩøÁî®ËµÑÊ∫êÊ±†ÁöÑÂéüËµÑÊ∫êÔºå‰∏çÁÑ∂Â∞±‰∏ãËΩΩÊúÄÊñ∞ËµÑÊ∫ê„ÄÇ WebKit ÁöÑ CacheWebKit ‰∏ªË¶ÅÊúâ‰∏âÁßç Cache„ÄÇ Page CacheÂØπÊµèËßàÈ°µÈù¢ÁöÑÁºìÂ≠òÁî®Êù•‰ΩøÈ°µÈù¢ÂéÜÂè≤Êìç‰ΩúÂä†ÈÄü„ÄÇÂçï‰æãÊ®°ÂºèÔºå‰ºöÊúâÈ°µÈù¢‰∏äÈôêÔºå‰ºöÁºìÂ≠ò DOM TreeÔºåRender Tree„ÄÇÂú®ÊâìÂºÄ‰∏Ä‰∏™Êñ∞È°µÈù¢ÁöÑÊó∂ÂÄô‰ºöÂú® FrameLoader ÁöÑ commitProvisionalLoad ÊñπÊ≥ïÈáåÊääÂâç‰∏Ä‰∏™È°µÈù¢Âä†ÂÖ• Page Cache„ÄÇÊà™ÂèñÁõ∏ÂÖ≥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678 c++if (!m_frame.tree().parent() &amp;&amp; history().currentItem()) { // Check to see if we need to cache the page we are navigating away from into the back/forward cache. // We are doing this here because we know for sure that a new page is about to be loaded. PageCache::singleton().addIfCacheable(*history().currentItem(), m_frame.page()); WebCore::jettisonExpensiveObjectsOnTopLevelNavigation();} PageCache ÁöÑ addIfCacheable ‰ºöÂØπÁºìÂ≠òËøõË°åÁÆ°ÁêÜÔºåÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243 c++void PageCache::addIfCacheable(HistoryItem&amp; item, Page* page){ if (item.isInPageCache()) return; if (!page || !canCache(*page)) return; ASSERT_WITH_MESSAGE(!page-&gt;isUtilityPage(), &quot;Utility pages such as SVGImage pages should never go into PageCache&quot;); setPageCacheState(*page, Document::AboutToEnterPageCache); // Focus the main frame, defocusing a focused subframe (if we have one). We do this here, // before the page enters the page cache, while we still can dispatch DOM blur/focus events. if (page-&gt;focusController().focusedFrame()) page-&gt;focusController().setFocusedFrame(&amp;page-&gt;mainFrame()); // Fire the pagehide event in all frames. firePageHideEventRecursively(page-&gt;mainFrame()); // Check that the page is still page-cacheable after firing the pagehide event. The JS event handlers // could have altered the page in a way that could prevent caching. if (!canCache(*page)) { setPageCacheState(*page, Document::NotInPageCache); return; } destroyRenderTree(page-&gt;mainFrame()); setPageCacheState(*page, Document::InPageCache); // Make sure we no longer fire any JS events past this point. NoEventDispatchAssertion assertNoEventDispatch; //ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ CachedPage Â≠òÊîæÂà∞ HistoryItem Èáå item.m_cachedPage = std::make_unique&lt;CachedPage&gt;(*page); item.m_pruningReason = PruningReason::None; //Â∞Ü HistoryItem Ê∑ªÂä†Âà∞ m_items ÂàóË°®‰∏≠ m_items.add(&amp;item); //Ê£ÄÊü•ÊòØÂê¶ÊúâË∂ÖËøáÂõûÊî∂ÁöÑÈôêÂà∂ÔºåËøõË°åËµÑÊ∫êÂõûÊî∂ prune(PruningReason::ReachedMaxSize);} ÂΩì Page ÁöÑ goBack ÊñπÊ≥ïË∞ÉÁî®Êó∂‰ºöË∞ÉÁî® FrameLoader ÁöÑ loadDifferentDocumentItemÔºåÂêåÊó∂Âä†ËΩΩÁ±ªÂûãËÆæÁΩÆ‰∏∫ FrameLoadTypeBackÔºåÁÑ∂ÂêéÈ°µÈù¢Â∞Ü‰ºö‰ªé Page Cache ÈáåÊÅ¢Â§ç„ÄÇ Memory Cache‰ΩøÂæóÁõ∏Âêå url ÁöÑËµÑÊ∫êËÉΩÂ§üÂø´ÈÄüËé∑Âæó„ÄÇÂçï‰æãÊ®°ÂºèÔºåÂú®ÊµèËßàÂô®ÊâìÂºÄÊó∂ÂàõÂª∫ÔºåÂÖ≥Èó≠Êó∂ÈáäÊîæ„ÄÇÂÖ≥ËÅîÁ±ªÁªìÊûÑÂõæÂ¶Ç‰∏ãÔºöMemory Cache Êúâ‰∏â‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÂ±ûÊÄß„ÄÇ m_resourcesÔºöÁ±ªÂûãÊòØ HashMapÔºåkey ÊòØ urlÔºåÂÄºÊòØ CacheResource„ÄÇ m_allResourcesÔºöÈááÁî®ÁöÑÊòØ LRU ÁÆóÊ≥ïÔºåÁ±ªÂûãÊòØ Vector&lt;LRUList,32&gt; Êúâ 32 ‰∏™ÂêëÈáèÔºåÂÖ∑‰ΩìÂÆûÁé∞ÊòØÂú® MemeoryCache ÁöÑ lruListFor„ÄÇÂõûÊî∂ËµÑÊ∫êÊòØÈÄöËøá MemoryCache ÈáåÁöÑ prune Êù•ÁöÑÔºå‰ºö‰ªéÈìæË°®Â∞æÂºÄÂßãËøõË°åÂõûÊî∂Áõ¥Âà∞Á©∫Èó¥Â§ßÂ∞èËææÊ†á‰∏∫Ê≠¢„ÄÇ m_liveDecodedResourceÔºöÁ±ªÂûã‰∏∫ LRUListÔºåËß£Á†ÅÂêéÁöÑÊï∞ÊçÆ‰ºöËÆ∞ÂΩïÂú®ÈáåÈù¢„ÄÇ Disk CacheÊ†πÊçÆ HTTP ÁöÑÂ§¥‰ø°ÊÅØÊù•ËÆæÁΩÆÁºìÂ≠ò„ÄÇÂ±û‰∫éÊåÅ‰πÖÂåñÁºìÂ≠òÂ≠òÂÇ®ÔºåÈáçÊñ∞ÊâìÂºÄÊµèËßàÂô®ËøòËÉΩËäÇÁúÅ‰∏ãËΩΩÁöÑÊµÅÈáèÂíåÊó∂Èó¥Êµ™Ë¥π„ÄÇ‰ΩøÁî®ÁöÑ‰πüÊòØ LRU ÁÆóÊ≥ïÊù•ÊéßÂà∂ÁºìÂ≠òÁ£ÅÁõòÁ©∫Èó¥Â§ßÂ∞è„ÄÇÂÖ∑‰ΩìÂÆûÁé∞ÊòØÁî±Âπ≥Âè∞Áõ∏ÂÖ≥‰ª£Á†ÅÊù•ÂÆåÊàê„ÄÇ HTML ËØçÊ≥ïËß£ÊûêÔºåÂ≠óÁ¨¶‰∏≤Ëß£ÊûêÊàê Tag ‰∏∫Âçï‰ΩçÁöÑ HTML TokenËß£ÊûêÊàê HTML Token ÁöÑÁÆóÊ≥ïÂàùÂßãÁä∂ÊÄÅÊòØ Data stateÔºåÁ¢∞Âà∞ &lt; Â≠óÁ¨¶Áä∂ÊÄÅÂèò‰∏∫ Tag open stateÔºå‰∏ã‰∏™Â≠óÁ¨¶‰∏∫Â≠óÊØçÊó∂Â∞±ÂàõÂª∫ Start tag tokenÔºåÁä∂ÊÄÅÂèòÊàê Tag name stateÔºåÂà∞ &gt; Â≠óÁ¨¶Áä∂ÊÄÅÂèòÊàê Data stateÔºå‰∏≠Èó¥ÁöÑÂ≠óÁ¨¶ÈÉΩ‰ºöË¢´Âä†Âà∞ token name Èáå„ÄÇ Âú® Tag open state Áä∂ÊÄÅÊó∂Â¶ÇÊûúÁ¢∞Âà∞ / Â≠óÁ¨¶ÈÇ£‰πàÂ∞±‰ºöÂàõÂª∫ End tag tokenÔºåÂêåÊó∂Áä∂ÊÄÅÂèòÊàê Tag name state„ÄÇ Âú® WebKit ‰∏≠Êúâ‰∏§‰∏™Á±ªÊòØ‰∏ìÈó®ÂÅöËØçÊ≥ïÂàÜÊûêÁöÑÔºå‰∏Ä‰∏™ÊòØÂÅöÊ†áËÆ∞ÁöÑ HTMLTokenÔºåÂè¶‰∏Ä‰∏™ÊòØËØçÊ≥ïËß£ÊûêÂô® HTMLTokenizer Á±ªÔºåËß£Êûê‰ªªÂä°Â∞±ÊòØË¶ÅÊääÂ≠óËäÇÊµÅËß£ÊûêÊàê‰∏Ä‰∏™‰∏™ HTMLToken ÁªôËØ≠Ê≥ïËß£ÊûêÂô®ÂàÜÊûê„ÄÇÂú® html Ëß£Êûê‰∏≠‰∏Ä‰∏™ element ÂØπÂ∫î ‰∏â‰∏™ HTMLTokenÔºå‰∏Ä‰∏™ÊòØËµ∑ÂßãÊ†áÁ≠æÔºå‰∏Ä‰∏™ÊòØ element ÂÜÖÂÆπÔºå‰∏Ä‰∏™ÊòØÁªìÊùüÊ†áÁ≠æ HTMLToken„ÄÇÂú® DOM Ê†ë‰∏äËµ∑ÂßãÁªìÊùüÊ†áÁ≠æÂØπÂ∫î‰∏Ä‰∏™ element nodeÔºåÂÜÖÂÆπÊòØÂè¶‰∏Ä‰∏™ node„ÄÇ HTMLToken ÁöÑÊâÄÊúâÁ±ªÂûãÂÆö‰πâÂú® HTMLToken.h Èáå 12345678910 c++enum Type { Uninitialized, //ÈªòËÆ§Á±ªÂûã DOCTYPE, //ÊñáÊ°£Á±ªÂûã StartTag, //Ëµ∑ÂßãÊ†áÁ≠æ EndTag, //ÁªìÊùüÊ†áÁ≠æ Comment, //Ê≥®Èáä Character, //ÂÖÉÁ¥†ÂÜÖÂÆπ EndOfFile, //ÊñáÊ°£ÁªìÊùü}; Êé•‰∏ãÊù•ÁúãÁúã HTMLToken ÁöÑÊàêÂëòÂèòÈáèÔºåHTMLTokenizer Á±ª‰ºöËß£ÊûêÂá∫ÁöÑËøôÊ†∑ÁöÑÁªìÊûÑ‰Ωì„ÄÇ 1234567891011121314151617 c++private: Type m_type; //ÈÇ£ÁßçÁ±ªÂûã DataVector m_data; //Ê†πÊçÆÁ±ªÂûãÊù•Ôºå‰∏çÂêåÁ±ªÂûãÂÜÖÂÆπ‰∏ç‰∏ÄÊ†∑ UChar m_data8BitCheck; // For StartTag and EndTag bool m_selfClosing; //ÊòØÂê¶ÊòØËá™Â∞ÅÈó≠ AttributeList m_attributes; //Â±ûÊÄßÂàóË°® Attribute* m_currentAttribute; //ÂΩìÂâçÂ±ûÊÄß // For DOCTYPE std::unique_ptr&lt;DoctypeData&gt; m_doctypeData; unsigned m_attributeBaseOffset { 0 }; // Changes across document.write() boundaries.}; Âú®ËØ¥ HTMLTokenizer ÂÖ∑‰ΩìËß£ÊûêÂÆûÁé∞‰πãÂâçÊàë‰ª¨ÂÖà‰∫ÜËß£‰∏ãÊúâÈôêÁä∂ÊÄÅÊú∫„ÄÇÂÖàÁúãÁúãÊï∞Â≠¶Ê®°Âûã HTMLTokenizer ÈáåÁöÑ processToken ÊñπÊ≥ïÂÖ∑‰ΩìÂÆûÁé∞‰∫ÜÊï¥‰∏™Áä∂ÊÄÅÊú∫ÔºåÂÆûÁé∞‰∏ªË¶ÅÊòØÊ†πÊçÆ w3c ÁöÑ tokenization Ê†áÂáÜÊù•ÂÆûÁé∞ÁöÑÔºöhttps://dev.w3.org/html5/spec-preview/tokenization.html „ÄÇhtml ÁöÑÂ≠óÁ¨¶ÈõÜÂêàÂ∞±ÊòØÊï∞Â≠¶Ê®°ÂûãÈáåÁöÑÂ≠óÊØçË°®ÔºåÁä∂ÊÄÅÁöÑÈùûÁ©∫ÈõÜÂêàÈÉΩÂÆö‰πâÂú® HTMLTokenizer.h ÁöÑ state Êûö‰∏æÈáå„ÄÇstate Êûö‰∏æÂÄº DataState Ë°®Á§∫ÂàùÂßãÁä∂ÊÄÅ„ÄÇprocessToken ÈáåÂØπ‰∏çÂêå state ÊâÄÂÅöÁöÑ case Â§ÑÁêÜÂ∞±ÊòØÁä∂ÊÄÅËΩ¨ÁßªÂáΩÊï∞„ÄÇ‰∏ãÈù¢ÊòØ HTMLTokenizer ÈáåÁöÑ state Êûö‰∏æÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485 c++//HTML ÊúâÈôêÁä∂ÊÄÅÊú∫ÁöÑÁä∂ÊÄÅÈùûÁ©∫ÈõÜÂêàenum State { DataState, //ÂàùÂßãÁä∂ÊÄÅÔºå‰∏ÄËà¨ÊúÄÂºÄÂßãÂíåÂÖ∂ÂÆÉÂú∞ÊñπÁ¢∞Âà∞ &gt; Á¨¶Âè∑‰∏∫Êà™Ê≠¢ÂÜçÊ¨°ËøõÂÖ•Ëøô‰∏™Áä∂ÊÄÅ„ÄÇÁ¢∞Âà∞Â≠óÊØçÈúÄË¶ÅËÆæÁΩÆ HTMLToken ÁöÑ type ‰∏∫ character CharacterReferenceInDataState, RCDATAState, CharacterReferenceInRCDATAState, RAWTEXTState, ScriptDataState, PLAINTEXTState, TagOpenState, //Á¢∞Âà∞ &lt; Á¨¶Âè∑„ÄÇÂ¶ÇÊûúÂâçÈù¢ÁöÑ DataState ÊúâÂÄºÈúÄË¶ÅÊèêÂèñÂÄºÂà∞ HTMLToken ÁöÑ m_data Èáå EndTagOpenState, //TagOpenState Áä∂ÊÄÅÁ¢∞ËßÅ / ËøõÂÖ•„ÄÇHTMLToken ÁöÑ type ‰∏∫ endTag TagNameState, //Âú® TagOpenState Êàñ EndTagOpenState Áä∂ÊÄÅÁ¢∞Âà∞Â≠óÊØç„ÄÇHTMLToken ÁöÑ type ‰∏∫ StartTag RCDATALessThanSignState, RCDATAEndTagOpenState, RCDATAEndTagNameState, RAWTEXTLessThanSignState, RAWTEXTEndTagOpenState, RAWTEXTEndTagNameState, ScriptDataLessThanSignState, ScriptDataEndTagOpenState, ScriptDataEndTagNameState, ScriptDataEscapeStartState, ScriptDataEscapeStartDashState, ScriptDataEscapedState, ScriptDataEscapedDashState, ScriptDataEscapedDashDashState, ScriptDataEscapedLessThanSignState, ScriptDataEscapedEndTagOpenState, ScriptDataEscapedEndTagNameState, ScriptDataDoubleEscapeStartState, ScriptDataDoubleEscapedState, ScriptDataDoubleEscapedDashState, ScriptDataDoubleEscapedDashDashState, ScriptDataDoubleEscapedLessThanSignState, ScriptDataDoubleEscapeEndState, BeforeAttributeNameState, //TagNameState Á¢∞Âà∞Á©∫Ê†º„ÄÇHTMLToken ÁöÑ m_data ‰ºöËÆ∞ÂΩïÂâçÈù¢ÁöÑ tagname AttributeNameState, //BeforeAttributeNameState Á¢∞ËßÅÂ≠óÊØçËøõÂÖ• AfterAttributeNameState, BeforeAttributeValueState, //AttributeNameState Áä∂ÊÄÅÁ¢∞Âà∞ = ‰ºöËøõÂÖ•ÔºåÂêåÊó∂‰ºöÂú® HTMLToken Â±ûÊÄßÂàóË°®ÈáåÂ¢ûÂä†‰∏Ä‰∏™Â±ûÊÄßÔºåÂ±ûÊÄßÂêç‰∏∫ÂâçÈù¢Áä∂ÊÄÅËÆ∞ÂΩïÁöÑ AttributeValueDoubleQuotedState, //BeforeAttributeValueState Á¢∞Âà∞ &quot; Á¨¶Âè∑ AttributeValueSingleQuotedState, //BeforeAttributeValueState Á¢∞Âà∞ &apos; Á¨¶Âè∑ AttributeValueUnquotedState, CharacterReferenceInAttributeValueState, AfterAttributeValueQuotedState, // ÂÜçÊ¨°Á¢∞Âà∞ &quot; Êàñ &apos; Á¨¶Âè∑„ÄÇHTMLToken ËÆ∞ÂΩïÂ±ûÊÄßÁöÑÂÄº SelfClosingStartTagState, BogusCommentState, ContinueBogusCommentState, // Not in the HTML spec, used internally to track whether we started the bogus comment token. MarkupDeclarationOpenState, //TagOpenState ÂêéÈÅáÂà∞! ÊØîÂ¶Ç&lt;! //Ëß£Êûêcomment CommentStartState, //MarkupDeclarationOpenState Áä∂ÊÄÅÂêéË∑ü‰∫Ü‰∏§‰∏™ - ÊØîÂ¶Ç &lt;!-- „ÄÇHTMLToken ÁöÑ type ‰∏∫ COMMENT CommentStartDashState, CommentState, //CommentStartState Á¢∞Âà∞Â≠óÊØçËøõÂÖ•Ëøô‰∏™Áä∂ÊÄÅ CommentEndDashState, //Âú® CommentState Áä∂ÊÄÅÁ¢∞ËßÅ - ËøõÂÖ•„ÄÇHTMLToken ÁöÑ m_data ‰∏∫ ÂâçÈù¢ËÆ∞ÂΩïÁöÑ comment ÂÜÖÂÆπ CommentEndState, //Âú® CommentEndDashState Áä∂ÊÄÅÁ¢∞ËßÅ - ËøõÂÖ• CommentEndBangState, //Ëß£Êûê &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt; ËøôÁßçÊ†áÁ≠æ DOCTYPEState, //ÂåπÈÖçÂà∞ DOCTYPEÔºå&lt;!DOCTYPE BeforeDOCTYPENameState, //DOCTYPE Áä∂ÊÄÅÂêéÈÅáÂà∞Á©∫Ê†º DOCTYPENameState, //BeforeDOCTYPENameState Áä∂ÊÄÅÈÅáÂà∞Â≠óÊØçÔºåÊèêÂèñ html„ÄÇHTMLToken ÁöÑ m_data ‰∏∫ html AfterDOCTYPENameState, //DOCTYPENameState ÈÅáÂà∞Á©∫Ê†º &lt;!DOCTYPE html AfterDOCTYPEPublicKeywordState, //AfterDOCTYPENameState ÂêéÂåπÈÖçÂà∞ public„ÄÇ&lt;!DOCTYPE html PUBLIC BeforeDOCTYPEPublicIdentifierState, //AfterDOCTYPEPublicKeywordState Áä∂ÊÄÅÂêéÁ¢∞Âà∞Á©∫Ê†º DOCTYPEPublicIdentifierDoubleQuotedState, //BeforeDOCTYPEPublicIdentifierState Áä∂ÊÄÅÁ¢∞Âà∞ &quot; ËøõÂÖ• DOCTYPEPublicIdentifierSingleQuotedState, //BeforeDOCTYPEPublicIdentifierState Áä∂ÊÄÅÁ¢∞Âà∞ &apos; ËøõÂÖ• AfterDOCTYPEPublicIdentifierState, //ÂÜçÊ¨°ÈÅáÂà∞ &quot; Êàñ &apos; „ÄÇÂèØÂ∞Ü HTMLToken ÁöÑ m_publicIdentifier Á°ÆÂÆö BetweenDOCTYPEPublicAndSystemIdentifiersState, AfterDOCTYPESystemKeywordState, BeforeDOCTYPESystemIdentifierState, DOCTYPESystemIdentifierDoubleQuotedState, DOCTYPESystemIdentifierSingleQuotedState, AfterDOCTYPESystemIdentifierState, BogusDOCTYPEState, CDATASectionState, // These CDATA states are not in the HTML5 spec, but we use them internally. CDATASectionRightSquareBracketState, CDATASectionDoubleRightSquareBracketState,}; ËØçÊ≥ïËß£Êûê‰∏ªË¶ÅÊé•Âè£ÊòØ nextToken ÂáΩÊï∞Ôºå‰∏ãÂõæÂ±ïÁ§∫‰∫Ü HTMLTokenizer ÁöÑ‰∏ªË¶ÅÂ∑•‰ΩúÊµÅÁ®ãÔºö HTML ËØ≠Ê≥ïËß£ÊûêHTML ÁöÑËØ≠Ê≥ïÂÆö‰πâHTML ÁöÑËØ≠Ê≥ïËßÑËåÉÊòØÁî± w3c ÁªÑÁªáÂàõÂª∫ÂíåÂÆö‰πâÁöÑ„ÄÇËØ≠Ê≥ïËØ≠Âè•ÂèØ‰ª•‰ΩøÁî®Ê≠£ÂºèÁöÑÊØîÂ¶Ç BNF Êù•ÂÆö‰πâÔºå‰∏çËøáÂØπ‰∫é html ËøôÁßç‰ºöÂú®ÂàõÂª∫ÂêéÂÖÅËÆ∏ÂÜçÊèíÂÖ•‰ª£Á†ÅÁöÑËØ≠Ë®Ä w3c ‰ΩøÁî®‰∫Ü DTD Êù•ÂÆö‰πâ HTMLÔºåÂÆö‰πâÁöÑÊñá‰ª∂ÂèØ‰ª•Âú®ËøôÈáåÔºöhttps://www.w3.org/TR/html4/strict.dtd Áõ∏ÂÖ≥Á±ªÂÖ≥Á≥ªÂõæ Document Âíå DocumentParser Áõ∏‰∫íÂºïÁî® HTMLDocumentParser Áà∂Á±ªÊòØ ScriptableDocumentParserÔºåDecodedDataDocumentParserÔºàÂ≠óÁ¨¶Ëß£Á†ÅÂäüËÉΩÔºâ ÊúÄÂêéÊòØ DocumentParser„ÄÇ HTMLInputStreamÔºöËß£Á†ÅÂêéÁöÑÂ≠óÁ¨¶ÊµÅÁöÑ‰øùÂ≠òÔºå‰Ωú‰∏∫ÁºìÂÜ≤Âå∫„ÄÇ HTMLTokenizerÔºöÂØπÂ≠óÁ¨¶ÊµÅËøõË°åËß£ÊûêÔºåÂ∞ÜËß£ÊûêÂêéÁöÑ‰ø°ÊÅØÊØîÂ¶Ç tag ÂêçÂ±ûÊÄßÂàóË°®ÔºåÊ≥®ÈáäÔºåDoc Â£∞ÊòéÔºåÁªìÊùü tagÔºåÊñáÊú¨ÈÉΩÂ≠òÂú® HTMLToken Á±ª‰∏≠„ÄÇ HTMLTreeBuilderÔºöÁîüÊàê DOM TreeÔºåËøôÈáå‰ºöÂÅö‰∫õËØ≠‰πâ‰∏äÁöÑÊ£ÄÊü•ÔºåÊØîÂ¶Ç head tag Èáå‰∏çËÉΩÂåÖÂê´ body tag„ÄÇ HTMLTokenÔºöHTMLTokenizer ÁîüÊàêÔºåHTMLTreeBuilder Êù•‰ΩøÁî® HTMLConstructionSiteÔºöÂàõÂª∫ÂêÑÁßç HTMLElementÔºåÂÜçÂÆåÊàê DOM TreeÔºåÂÖ≥ÈîÆÊ†áÁ≠æÊØîÂ¶Ç bodyÔºåhead Âíå html ‰ª•Â§ñÈÉΩÊòØÈÄöËøá HTMLElementFactory Êù•ÂÆûÁé∞„ÄÇÂ±ûÊÄß‰ΩøÁî®ÁîüÊàêÁöÑ Element ÈáåÂØπÂ∫îÁöÑÂáΩÊï∞Êù•ÂÆûÁé∞„ÄÇ HTMLPreloadScannerÔºö‰∏ìÈó®Áî®Êù•Êü•ÊâæÁ±ª‰ºº srcÔºålink ËøôÊ†∑ÁöÑÂ±ûÊÄßÔºåËé∑ÂèñÂ§ñÈÉ®ËµÑÊ∫êÔºåÈÄöËøá CachedResourceLoader Ëøô‰∏™Á±ªËøõË°åÂä†ËΩΩ„ÄÇ Ëß£ÊûêËøáÁ®ã DocumentWriter Ë∞ÉÁî® DocumentParser::appendBytes Â∞ÜÁªìÊûúÂ≠òÂÖ• HTMLInputStream ‰∏≠„ÄÇ HTMLDocumentParser::pumpTokenizer ÂáΩÊï∞ÈáåÁöÑ nextToken ‰ºöÊääÂ≠óÁ¨¶ÊµÅËß£ÊûêÊàê HTMLToken„ÄÇ Êää HTMLToken ÂØπË±°‰∫§Áªô HTMLTreeBuildÔºåÈÄöËøá HTMLTreeBuild::processToken Êù•ÂàÜÊûêÊ†áÁ≠æÊòØÂê¶ OKÔºåÂÜçÁî® HTMLConstructionSite ÁöÑ insertHTMLElementÔºåinsertHTMLHeadElement Êù•ÊèíÂÖ•Âà∞ HTMLConstructionSite ÈáåÔºåÂéüÁêÜÊòØ stack of open elements Ê†àÁöÑÊñπÂºèÊûÑÈÄ†ÔºåÂÖ∑‰ΩìÂèØ‰ª•ÁúãËøôÈáåÔºöhttps://html.spec.whatwg.org/multipage/parsing.html#the-stack-of-open-elements„ÄÇHTMLConstructionSite ÈÄöËøá HTMLElementFactory ÈáåÁöÑ createHTMLElement Êù•ÂàõÂª∫ HTMLElement ÂØπË±°„ÄÇElement ÁöÑ parserSetAttributes ÂáΩÊï∞Áî®Êù•Ëß£ÊûêÂ±ûÊÄß„ÄÇÂàõÂª∫ÂÆå‰∏Ä‰∏™ Element ‰ºöË¢´Âä†Âà∞ÂΩìÂâç Node ÈáåÔºåÈÄöËøá HTMLConstructionSite ÁöÑ attachLater ÂáΩÊï∞ÂºÇÊ≠•ÂÆåÊàê„ÄÇ ÁÑ∂Âêé HTMLToken ÂØπË±°Ëøò‰ºö‰∫§Áªô HTMLPreloadScannerÔºåÂÆÉ‰ºöÂÖàË∞ÉÁî® scan ÂáΩÊï∞ÔºåÁîüÊàê‰∏Ä‰∏™ PreloadTaskÔºåË∞ÉÁî® preload ÂáΩÊï∞Êàñ CachedResourceLoader ÁöÑ preload ËøõË°åËµÑÊ∫êÈ¢ÑÂä†ËΩΩ„ÄÇÂú® CachedResourceLoader ÈáåÁöÑËµÑÊ∫êÊòØ‰ª• url ‰Ωú‰∏∫ keyÔºåÈÄöËøá url Êù•Ëé∑ÂèñËµÑÊ∫ê„ÄÇÂÖ∑‰ΩìÂÆûÁé∞ÂèØ‰ª•Áúã HTMLPreloadScanner::processToken„ÄÇ Element Â±ûÊÄßËÆæÁΩÆÊòØÈÄöËøá Element::parserSetAttributes Êù•ËÆæÁΩÆÁöÑ 123456789101112131415161718192021 c++void Element::parserSetAttributes(const Vector&lt;Attribute&gt;&amp; attributeVector){ ASSERT(!isConnected()); ASSERT(!parentNode()); ASSERT(!m_elementData); if (!attributeVector.isEmpty()) { if (document().sharedObjectPool()) m_elementData = document().sharedObjectPool()-&gt;cachedShareableElementDataWithAttributes(attributeVector); else m_elementData = ShareableElementData::createWithAttributes(attributeVector); } parserDidSetAttributes(); // Use attributeVector instead of m_elementData because attributeChanged might modify m_elementData. for (const auto&amp; attribute : attributeVector) attributeChanged(attribute.name(), nullAtom(), attribute.value(), ModifiedDirectly);} m_attributeData Â≠òÂÇ®Â±ûÊÄßÁöÑÂØπË±°ÔºåattributeChange ÂáΩÊï∞‰ºöË∞ÉÁî® parseAttribute ÂáΩÊï∞Ôºå‰ΩúÁî®ÊòØËÆ© Element ËÉΩÂ§üÂ§ÑÁêÜ src ËøôÊ†∑ÁöÑÂ±ûÊÄßÂä†ËΩΩÂõæÁâá ËµÑÊ∫êÂä†ËΩΩHTMLPreloadScanner Ë∞ÉÁî® CachedResourceLoader Êù•Âä†ËΩΩÁöÑ„ÄÇ ÊûÑÂª∫ DOM TreeÊûÑÂª∫ DOM Tree ÈúÄË¶ÅÁªèËøáÁöÑÂõõ‰∏™Èò∂ÊÆµÔºåÂàÜÂà´ÊòØËß£Á†ÅÔºåÂàÜËØçÔºåËß£ÊûêÔºàÂàõÂª∫‰∏é Tag Áõ∏ÂØπÂ∫îÁöÑ NodeÔºâÔºåÂàõÂª∫Ê†ëÔºàÊúâ DOM TreeÔºåRender TreeÔºåRenderLayer TreeÔºâÁõ∏ÂÖ≥Á±ªÊµÅÁ®ãÂõæÔºö Ââç‰∏â‰∏™Èò∂ÊÆµÂâçÈù¢Â∑≤Áªè‰ªãÁªçÔºå‰∏ãÈù¢‰∏ªË¶Å‰ªãÁªç‰∏ãÂàõÂª∫ DOM Ê†ë DOM Ê†áÂáÜËßÑËåÉDocument Object Model ÁÆÄÁß∞ DOMÔºåÂÖ®Áß∞ÊñáÊ°£ÂØπË±°Ê®°ÂûãÔºåÂèØ‰ª•ÊòØ HTMLÔºåXML Âíå XHTMLÔºåDOM ÊòØ‰ª•Èù¢ÂêëÂØπË±°ÁöÑÊñπÂºèÊù•ÊèèËø∞ÊñáÊ°£ÁöÑÔºåËøôÊ†∑ÂèØ‰ª•ÈÄöËøá JavaScript ÊàñÂÖ∂ÂÆÉÈù¢ÂêëÂØπË±°ÁöÑËØ≠Ë®ÄËøõË°åËÆøÈóÆÔºåÂàõÂª∫ÔºåÂà†Èô§Âíå‰øÆÊîπ DOM ÁªìÊûÑ„ÄÇDOM ÁöÑÊé•Âè£‰∏éÂπ≥Âè∞ÂíåËØ≠Ë®ÄÊó†ÂÖ≥„ÄÇW3C ÂÆö‰πâ‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑ DOM Êé•Âè£ÔºåÁõÆÂâçÂ∑≤ÁªèÊúâ‰∫ÜÂõõ‰∏™ level Ê†áÂáÜÔºåÊØè‰∏™Ê†áÂáÜÈÉΩÊòØÂü∫‰∫é‰∏ä‰∏™Ê†áÂáÜÂü∫Á°Ä‰∏äËøõË°åÁöÑËø≠‰ª£ÔºåÂ¶Ç‰∏ãÂõæÊòØ DOM ËßÑËåÉÁöÑÊºîËøõËøáÁ®ãÔºö‰∏ãÈù¢ÂØπÂêÑ‰∏™ level ËøõË°åËØ¥ÊòéDOM level 1 CoreÔºöÂ∫ïÂ±ÇÊé•Âè£ÔºåÊé•Âè£ÊîØÊåÅ XML Á≠â‰ªª‰ΩïÁªìÊûÑÂåñÊñáÊ°£„ÄÇ HTMLÔºöÊää HTML ÂÜÖÂÆπÂÆö‰πâ‰∏∫ Document ÊñáÊ°£ÔºåNode ËäÇÁÇπÔºåAttribute Â±ûÊÄßÔºåElement ÂÖÉÁ¥†ÔºåText ÊñáÊú¨„ÄÇ DOM level 2 CoreÔºöÂØπ level 1 ÁöÑ Core ÈÉ®ÂàÜËøõË°åÊâ©Â±ïÔºåÊØîÂ¶Ç getElementByIdÔºåËøòÊúâ namespace ÁöÑÊé•Âè£„ÄÇ HTMLÔºöÂÖÅËÆ∏Âä®ÊÄÅËÆøÈóÆ‰øÆÊîπÊñáÊ°£„ÄÇ ViewsÔºöÊñáÊ°£ÁöÑÂêÑÁßçËßÜÂõæ„ÄÇ EventsÔºöÈº†Ê†á‰∫ã‰ª∂Á≠â„ÄÇ StyleÔºöÂèØ‰ª•‰øÆÊîπ HTML Ê†∑ÂºèÁöÑ‰∏Ä‰∏™Â±ûÊÄß„ÄÇ Traveral and rangeÔºöNodeIterator Âíå TreeWalker ÈÅçÂéÜÊ†ëÂØπÊñáÊ°£‰øÆÊîπÔºåÂà†Èô§Á≠âÊìç‰Ωú„ÄÇ ËäÇÁÇπDOM level 3 CoreÔºöÂä†ÂÖ•‰∫ÜÊñ∞Êé•Âè£ adoptNode Âíå textContent„ÄÇ Load and SaveÔºöÂä†ËΩΩ XML ËΩ¨Êàê DOM Ë°®Á§∫ÁöÑÊñáÊ°£ÁªìÊûÑ„ÄÇ ValidationÔºöÈ™åËØÅÊñáÊ°£ÊúâÊïàÊÄß„ÄÇ EventsÔºöÂä†ÂÖ•ÈîÆÁõòÊîØÊåÅ„ÄÇ XPathÔºö‰∏ÄÁßçÁÆÄÂçïÁõ¥ËßÇÊ£ÄÁ¥¢ DOM ËäÇÁÇπÁöÑÊñπÂºè„ÄÇ DOM ÁªìÊûÑÊûÑÊàêÁöÑÂü∫Êú¨Ë¶ÅÁ¥†ÊòØËäÇÁÇπÔºåËäÇÁÇπÊ¶ÇÂøµÊØîËæÉÂ§ßÔºåDocument ‰πüÊòØ‰∏Ä‰∏™ËäÇÁÇπÔºåÂè´ Document ËäÇÁÇπÔºåHTML ÈáåÁöÑ Tag ‰πüÊòØ‰∏ÄÁßçËäÇÁÇπÔºåÂè´ Element ËäÇÁÇπÔºåËøòÊúâÂ±ûÊÄßËäÇÁÇπÔºåEntity ËäÇÁÇπÔºåProcessingIntruction ËäÇÁÇπÔºåCDataSection ËäÇÁÇπÔºåComment ËäÇÁÇπ„ÄÇ‰∏ãÈù¢ÁúãÁúã Document ËäÇÁÇπÊèê‰æõÁöÑÊé•Âè£ÔºåËøô‰∏™Êé•Âè£ÁöÑÊèèËø∞Êñá‰ª∂Ë∑ØÂæÑÊòØÂú® WebCore/dom/Document.idl Êñá‰ª∂Èáå 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171interface Document : Node { readonly attribute DOMImplementation implementation; // FIXME: Should be [SameObject]. [ImplementedAs=urlForBindings] readonly attribute USVString URL; [ImplementedAs=urlForBindings] readonly attribute USVString documentURI; readonly attribute USVString origin; readonly attribute DOMString compatMode; [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString characterSet; [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString charset; // Historical alias of .characterSet, [ImplementedAs=characterSetWithUTF8Fallback] readonly attribute DOMString inputEncoding; // Historical alias of .characterSet. readonly attribute DOMString contentType; readonly attribute DocumentType? doctype; [DOMJIT=Getter] readonly attribute Element? documentElement; HTMLCollection getElementsByTagName(DOMString qualifiedName); HTMLCollection getElementsByTagNameNS(DOMString? namespaceURI, DOMString localName); HTMLCollection getElementsByClassName(DOMString classNames); [NewObject, MayThrowException, ImplementedAs=createElementForBindings] Element createElement(DOMString localName); // FIXME: missing options parameter. [NewObject, MayThrowException] Element createElementNS(DOMString? namespaceURI, DOMString qualifiedName); // FIXME: missing options parameter. [NewObject] DocumentFragment createDocumentFragment(); [NewObject] Text createTextNode(DOMString data); [NewObject, MayThrowException] CDATASection createCDATASection(DOMString data); [NewObject] Comment createComment(DOMString data); [NewObject, MayThrowException] ProcessingInstruction createProcessingInstruction(DOMString target, DOMString data); [CEReactions, MayThrowException, NewObject] Node importNode(Node node, optional boolean deep = false); [CEReactions, MayThrowException] Node adoptNode(Node node); [NewObject, MayThrowException] Attr createAttribute(DOMString localName); [NewObject, MayThrowException] Attr createAttributeNS(DOMString? namespaceURI, DOMString qualifiedName); [MayThrowException, NewObject] Event createEvent(DOMString type); [NewObject] Range createRange(); // NodeFilter.SHOW_ALL = 0xFFFFFFFF. [NewObject] NodeIterator createNodeIterator(Node root, optional unsigned long whatToShow = 0xFFFFFFFF, optional NodeFilter? filter = null); [NewObject] TreeWalker createTreeWalker(Node root, optional unsigned long whatToShow = 0xFFFFFFFF, optional NodeFilter? filter = null); // Extensions from HTML specification (https://html.spec.whatwg.org/#the-document-object). [PutForwards=href, Unforgeable] readonly attribute Location? location; [SetterMayThrowException] attribute USVString domain; readonly attribute USVString referrer; [GetterMayThrowException, SetterMayThrowException] attribute USVString cookie; readonly attribute DOMString lastModified; readonly attribute DocumentReadyState readyState; // DOM tree accessors. [CEReactions] attribute DOMString title; [CEReactions] attribute DOMString dir; [CEReactions, DOMJIT=Getter, ImplementedAs=bodyOrFrameset, SetterMayThrowException] attribute HTMLElement? body; readonly attribute HTMLHeadElement? head; readonly attribute HTMLCollection images; // Should be [SameObject]. readonly attribute HTMLCollection embeds; // Should be [SameObject]. readonly attribute HTMLCollection plugins; // Should be [SameObject]. readonly attribute HTMLCollection links; // Should be [SameObject]. readonly attribute HTMLCollection forms; // Should be [SameObject]. readonly attribute HTMLCollection scripts; // Should be [SameObject]. NodeList getElementsByName([AtomicString] DOMString elementName); readonly attribute HTMLScriptElement? currentScript; // FIXME: Should return a HTMLOrSVGScriptElement. // dynamic markup insertion // FIXME: The HTML spec says this should consult the &quot;responsible document&quot;. We should ensure // that the caller document matches those semantics. It is possible we should replace it with // the existing &apos;incumbent document&apos; concept. [CEReactions, CallWith=ResponsibleDocument, ImplementedAs=openForBindings, MayThrowException] Document open(optional DOMString type = &quot;text/html&quot;, optional DOMString replace = &quot;&quot;); [CallWith=ActiveWindow&amp;FirstWindow, ImplementedAs=openForBindings, MayThrowException] DOMWindow open(USVString url, DOMString name, DOMString features); [CEReactions, ImplementedAs=closeForBindings, MayThrowException] void close(); [CEReactions, CallWith=ResponsibleDocument, MayThrowException] void write(DOMString... text); [CEReactions, CallWith=ResponsibleDocument, MayThrowException] void writeln(DOMString... text); // User interaction. readonly attribute DOMWindow? defaultView; boolean hasFocus(); [CEReactions] attribute DOMString designMode; [CEReactions] boolean execCommand(DOMString commandId, optional boolean showUI = false, optional DOMString? value = null); // FIXME: value should not be nullable. boolean queryCommandEnabled(DOMString commandId); boolean queryCommandIndeterm(DOMString commandId); boolean queryCommandState(DOMString commandId); boolean queryCommandSupported(DOMString commandId); DOMString queryCommandValue(DOMString commandId); // Special event handler IDL attributes that only apply to Document objects. [LenientThis] attribute EventHandler onreadystatechange; // Extensions from the CSSOM specification (https://drafts.csswg.org/cssom/#extensions-to-the-document-interface). // FIXME: Should likely be moved to DocumentOrShadowRoot. readonly attribute StyleSheetList styleSheets; // FIXME: Should be [SameObject]. // Extensions from the CSSOM-View specification (https://drafts.csswg.org/cssom-view/#extensions-to-the-document-interface). readonly attribute Element? scrollingElement; // Extensions from Selection API (https://www.w3.org/TR/selection-api/#extensions-to-document-interface). // FIXME: Should likely be moved to DocumentOrShadowRoot. DOMSelection? getSelection(); // XPath extensions (https://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator). [MayThrowException] XPathExpression createExpression(optional DOMString expression = &quot;undefined&quot;, optional XPathNSResolver? resolver); // FIXME: Using &quot;undefined&quot; as default parameter value is wrong. XPathNSResolver createNSResolver(Node? nodeResolver); [MayThrowException] XPathResult evaluate(optional DOMString expression = &quot;undefined&quot;, optional Node? contextNode, optional XPathNSResolver? resolver, optional unsigned short type = 0, optional XPathResult? inResult); // FIXME: Using &quot;undefined&quot; as default parameter value is wrong. // Extensions from FullScreen API (https://fullscreen.spec.whatwg.org/#api). // FIXME: Should probably be unprefixed. [Conditional=FULLSCREEN_API] readonly attribute boolean webkitFullscreenEnabled; [Conditional=FULLSCREEN_API, ImplementedAs=webkitFullscreenElementForBindings] readonly attribute Element? webkitFullscreenElement; [Conditional=FULLSCREEN_API] void webkitExitFullscreen(); [Conditional=FULLSCREEN_API] readonly attribute boolean webkitIsFullScreen; // Mozilla version. [Conditional=FULLSCREEN_API] readonly attribute boolean webkitFullScreenKeyboardInputAllowed; // Mozilla version. [Conditional=FULLSCREEN_API, ImplementedAs=webkitCurrentFullScreenElementForBindings] readonly attribute Element webkitCurrentFullScreenElement; // Mozilla version. [Conditional=FULLSCREEN_API] void webkitCancelFullScreen(); // Mozilla version. [NotEnumerable, Conditional=FULLSCREEN_API] attribute EventHandler onwebkitfullscreenchange; [NotEnumerable, Conditional=FULLSCREEN_API] attribute EventHandler onwebkitfullscreenerror; // Extensions from Pointer Lock API (https://www.w3.org/TR/pointerlock/#extensions-to-the-document-interface). [NotEnumerable, Conditional=POINTER_LOCK] attribute EventHandler onpointerlockchange; // FIXME: Should be enumerable. [NotEnumerable, Conditional=POINTER_LOCK] attribute EventHandler onpointerlockerror; // FIXME: Should be enumerable. [Conditional=POINTER_LOCK] void exitPointerLock(); // Extensions from CSS Font Loading API (https://drafts.csswg.org/css-font-loading/#font-face-source). // FIXME: Should be in a separate FontFaceSource interface. readonly attribute FontFaceSet fonts; // Extensions from Page visibility API (https://www.w3.org/TR/page-visibility/#sec-document-interface). readonly attribute boolean hidden; readonly attribute VisibilityState visibilityState; attribute EventHandler onvisibilitychange; // FIXME: Those were dropped from the CSSOM specification. readonly attribute DOMString? preferredStylesheetSet; attribute DOMString? selectedStylesheetSet; // FIXME: Those have been dropped from the DOM specification. readonly attribute DOMString? xmlEncoding; [SetterMayThrowException] attribute DOMString? xmlVersion; attribute boolean xmlStandalone; // FIXME: Blink has already dropped this (https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/s3ezjTuC8ig). CSSStyleDeclaration getOverrideStyle(optional Element? element = null, optional DOMString pseudoElement = &quot;undefined&quot;); // FIXME: Should be moved to GlobalEventHandlers (https://w3c.github.io/selection-api/#extensions-to-globaleventhandlers). [NotEnumerable] attribute EventHandler onselectstart; // FIXME: Should be enumerable. [NotEnumerable] attribute EventHandler onselectionchange; // FIXME: Should be enumerable. // Non standard: It has been superseeded by caretPositionFromPoint which we do not implement yet. Range caretRangeFromPoint(optional long x = 0, optional long y = 0); // FIXME: This is not standard and has been dropped from Blink already. RenderingContext? getCSSCanvasContext(DOMString contextId, DOMString name, long width, long height); // Non standard (https://developer.apple.com/reference/webkitjs/document/1633863-webkitgetnamedflows). [Conditional=CSS_REGIONS] DOMNamedFlowCollection webkitGetNamedFlows(); // Obsolete features from https://html.spec.whatwg.org/multipage/obsolete.html [CEReactions] attribute [TreatNullAs=EmptyString] DOMString fgColor; [CEReactions, ImplementedAs=linkColorForBindings] attribute [TreatNullAs=EmptyString] DOMString linkColor; [CEReactions] attribute [TreatNullAs=EmptyString] DOMString vlinkColor; [CEReactions] attribute [TreatNullAs=EmptyString] DOMString alinkColor; [CEReactions] attribute [TreatNullAs=EmptyString] DOMString bgColor; readonly attribute HTMLCollection anchors; /* [SameObject] */ readonly attribute HTMLCollection applets; /* [SameObject] */ void clear(); void captureEvents(); void releaseEvents(); [Replaceable] readonly attribute HTMLAllCollection all; /* [SameObject] */}; DOM Tree Token ÁöÑÊûÑÈÄ†ÁÆóÊ≥ïËøô‰∏™ÁÆóÊ≥ïË¢´ÊèèËø∞‰∏∫‰∏Ä‰∏™ state machineÔºåstate ‰∏∫ÊèíÂÖ•Ê®°ÂºèÔºàinsertion modesÔºâ„ÄÇÂÆåÊï¥ÁÆóÊ≥ïÂèØ‰ª•ÂèÇÁúã w3c ÁöÑÂÆö‰πâÔºöhttps://www.w3.org/TR/html5/syntax.html#html-parser ÂΩì parser ÂàõÂª∫Âêé‰πü‰ºöÂàõÂª∫‰∏Ä‰∏™ Document ÂØπË±°„ÄÇÂú® tree construction ÁöÑÈò∂ÊÆµÔºåDocument ‰ºöÂÅö‰∏∫ root ÁöÑ element Ê∑ªÂä†ËøõÊù•„ÄÇtree constructor ‰ºöÂ§ÑÁêÜÊØè‰∏™ tokenizer ÁîüÊàêÁöÑ node„ÄÇÊØè‰∏™ token ‰ºöÂØπÂ∫î‰∏Ä‰∏™ DOM element„ÄÇÊØè‰∏™ element ‰∏çÂÖâ‰ºöË¢´Ê∑ªÂä†Âà∞ DOM treeÔºåËøò‰ºöÊ∑ªÂä†Âà∞ stack of open elementsÈáå„ÄÇËøô‰∏™ stack Áî®‰∫éÊ£ÄÊü•ÂµåÂ•óÈîôËØØÂíåÊú™ÂÖ≥Èó≠ÁöÑ tag„ÄÇ ÂÖ∑‰ΩìËøáÁ®ãÊòØÔºåÂú® tree construction Èò∂ÊÆµÁöÑËæìÂÖ•ÊòØÊù•Ëá™ tokenization ÁöÑ tokens ÊéíÂ∫èÁöÑÈò∂ÊÆµ„ÄÇÊúÄÂºÄÂßãÁöÑÁä∂ÊÄÅÊòØ initial mode„ÄÇÊé•Êî∂ html token ‰ºöÂèòÊàê before html modeÔºåÂπ∂‰∏îÂú®ÈÇ£‰∏™Ê®°ÂºèÈáåÈáçÊñ∞Â§ÑÁêÜ token„ÄÇËøô‰ºöÂàõÂª∫‰∏Ä‰∏™ HTMLHtmlElement ÂÖÉÁ¥†Ê∑ªÂä†Âà∞ Document ÂØπË±°ÁöÑ root ‰∏ä„ÄÇ Êé•‰∏ãÊù•Áä∂ÊÄÅ‰ºöÂèòÊàê before head„ÄÇÁÑ∂ÂêéÂàõÂª∫ HTMLHeadElementÔºåÂ¶ÇÊûú head ÈáåÊúâ token Â∞±‰ºöË¢´Ê∑ªÂä†Âà∞Ëøô‰∏™ tree Èáå„ÄÇÁä∂ÊÄÅ‰ºöÊúâ in head Âíå after head„ÄÇ ÂÜçÂêéÈù¢‰ºöÂàõÂª∫ HTMLBodyElementÔºåÊ∑ªÂä†Âà∞Ê†ë‰∏≠ÔºåÁä∂ÊÄÅËΩ¨Êàê in bodyÔºåÈáåÈù¢ÁöÑ html token ‰ºöË¢´ËΩ¨ÊàêÂØπÂ∫îÁöÑ DOM element Ë¢´Ê∑ªÂä†Âà∞ body ÁöÑ node ‰∏≠„ÄÇÂΩìÊî∂Âà∞ body end token ‰ºöËÆ©Áä∂ÊÄÅÂàáÊç¢Êàê after body„ÄÇÊé•ÁùÄÂ∞±ÊòØÊî∂Âà∞ html end tagÔºåËΩ¨Êàê after after body Áä∂ÊÄÅÔºåÊé•Âà∞ end of file token ‰ºöÁªìÊùü parsing„ÄÇ ÂÖ≥ÈîÆÁ±ªÊûÑÂª∫ DOM ÁöÑÂá†‰∏™ÂÖ≥ÈîÆÁöÑÁ±ª HTMLDocumentParserÔºöÁÆ°ÁêÜÁ±ªÔºåËß£Êûê html ÊñáÊú¨‰ΩøÁî®ËØçÊ≥ïÂàÜÊûêÂô®Êàê HTMLTokenizer Á±ªÔºåÊúÄÂêéËæìÂá∫Âà∞ HTMLTreeBuilder„ÄÇ HTMLTreeBuilderÔºöË¥üË¥£ DOM Ê†ëÁöÑÂª∫Á´ãÔºåÂØπ tokens ÂàÜÁ±ªÂ§ÑÁêÜÔºåÂàõÂª∫‰∏Ä‰∏™‰∏™ËäÇÁÇπÂØπË±°Ôºå‰ΩøÁî® HTMLConstructionSite Á±ªÂ∞ÜËøô‰∫õÂàõÂª∫Â•ΩÁöÑËäÇÁÇπÊûÑÂª∫‰∏∫ DOM Ê†ë„ÄÇ HTMLConstructionSiteÔºö‰∏çÂêåÁöÑÊ†áÁ≠æÁ±ªÂûãÂú®‰∏çÂêå‰ΩçÁΩÆ‰ºöÊúâ‰∏çÂêåÁöÑÂáΩÊï∞Êù•ÊûÑÂª∫ DOM Ê†ë„ÄÇm_document ‰ª£Ë°®Ê†πËäÇÁÇπÔºåÂç≥ javascript ÈáåÁöÑ window.document ÂØπË±°„ÄÇ HTMLElementFactoryÔºö‰∏Ä‰∏™Â∑•ÂéÇÁ±ªÂØπ‰∏çÂêåÁ±ªÂûãÁöÑÊ†áÁ≠æÂàõÂª∫‰∏çÂêåÁöÑ html ÂÖÉÁ¥†ÔºåÂêåÊó∂Âª∫Á´ãÁà∂Â≠êÂÖÑÂºüÂÖ≥Á≥ª„ÄÇ ÊûÑÂª∫ DOM Ê†ëÁöÑËøáÁ®ãÂ¶Ç‰∏ãÂõæÔºö ‰∏æ‰∏™‰æãÂ≠êÔºö 12345678&lt;html&gt; &lt;body&gt; &lt;p&gt; Hello World &lt;/p&gt; &lt;div&gt; &lt;img src=\"example.png\"/&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ËΩ¨Êàê DOM Tree Â¶Ç‰∏ãÔºö Âä†ËΩΩÈÄöËøá DocumentLoader Ëøô‰∏™Á±ªÈáåÁöÑ startLoadingMainResource Âä†ËΩΩ url 1234FetchRequest fetchRequest(m_request, FetchInitiatorTypeNames::document, mainResourceLoadOptions); m_mainResource = RawResource::fetchMainResource(fetchRequest, fetcher(), m_substituteData); DocumentLoader ÁöÑ commitData ‰ºöÂéªÂ§ÑÁêÜ dataReceived ÁöÑÊï∞ÊçÆÂùó 1234567891011void DocumentLoader::commitData(const char* bytes, size_t length) { ensureWriter(m_response.mimeType()); //‰ºöÂàùÂßãÂåñ HTMLDocumentParser ÂÆû‰æãÂåñ document ÂØπË±° if (length) m_dataReceived = true; m_writer-&gt;addData(bytes, length); //Áªô Parser Ëß£ÊûêÔºåËøôÈáåÁöÑbytesÂ∞±ÊòØËøîÂõûÊù•ÁöÑ html ÊñáÊú¨‰ª£Á†Å}//ensureWriter ÈáåÊúâ‰∏™Âà§Êñ≠ÔºåÂ¶ÇÊûú m_writer Â∑≤ÁªèÂàùÂßãÂåñÂ∞±‰∏çÂ§ÑÁêÜÔºåÊâÄ‰ª• parser Âè™‰ºöÂàùÂßãÂåñ‰∏ÄÊ¨°void DocumentLoader::ensureWriter(const AtomicString&amp; mimeType, const KURL&amp; overridingURL) { if (m_writer) return;} DOM TreeDOM Tree Â∑≤ÁªèË¢´ W3 Ê†áÂáÜÂåñ‰∫Ü Document Object Model (DOM) Technical Reports Âú® DOM Level 3 Èáå IDL ÁöÑÂÆö‰πâÂú® IDL Definitions Node ËäÇÁÇπNode ÊòØ DOM Ê®°ÂûãÁöÑÂü∫Á°ÄÁ±ªÔºåÊ†πÊçÆÊ†áÁ≠æÁöÑ‰∏çÂêåÂèØ‰ª•ÂàÜÊàêÂ§ö‰∏™Á±ªÔºåËØ¶ÁªÜÁöÑÂÆö‰πâÂèØ‰ª•Áúã NodeTypeÔºåÊúÄ‰∏ªË¶ÅÁöÑÊòØ DocumentÔºåElement Âíå Text ‰∏âÁ±ª„ÄÇ‰∏ãÂõæÂàóÂá∫‰∫Ü Node ËäÇÁÇπÁõ∏ÂÖ≥ÁªßÊâøÂÖ≥Á≥ªÂõæÔºö Âú®ÊûÑÂª∫Ê†ëÊó∂ÊòØÁî± Insertion Mode Êù•ÊéßÂà∂ÔºåËøô‰∏™ËßÑÂàôÊòØÂÆåÂÖ®ÊåâÁÖß w3c ÊåáÂÆöÔºåÂèØ‰ª•ÂèÇÁúãÔºöhttps://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html#the-insertion-mode „ÄÇÊûÑÂª∫Ê†ëÁ∫ßÂà´Êó∂ÊòØÊ†πÊçÆÂ†ÜÊ†àÊù•ÁöÑÔºåÁ¢∞Âà∞ StartTag ÁöÑ token Â∞±‰ºöÂú® m_opnElements ÈáåÂéãÊ†àÔºåÁ¢∞Âà∞ EndTag ÁöÑ token Â∞±‰ºöÂá∫Ê†à„ÄÇ w3c ÂØπ‰∫é Element ÁöÑÂ†ÜÊ†à‰πüÊúâËßÑËåÉÔºöhttps://html.spec.whatwg.org/multipage/parsing.html#the-stack-of-open-elements „ÄÇÈÄöËøá ContainerNode::parserAddChild Êé•Âè£Ê∑ªÂä† Node Âà∞ DOM Tree ‰∏≠„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÊúâ‰∫õÊ†áÁ≠æÂ±û‰∫é Format Ê†áÁ≠æ‰∏çÂèÇ‰∏éÂµåÂ•óÂÖ≥Á≥ªÂ±û‰∫éÂπ≥Á∫ßÔºåÊòØ‰∏ç‰ºöË¢´Âä†ÂÖ•Âà∞ m_openElements Èáå„ÄÇËøô‰∫õÊ†áÁ≠æÁöÑÂÆö‰πâÂèØ‰ª•ÂèÇÁúãÔºöhttps://html.spec.whatwg.org/multipage/parsing.html#list-of-active-formatting-elements DOM Node ÁöÑÊï∞ÊçÆÁªìÊûÑ HTMLElementÁî± HTMLElementFactory Á±ªÁöÑ createHTMLElement Êù•ÂàõÂª∫ÔºåÁÑ∂ÂêéÈÄöËøá Hash map Êù•ËÆ∞ÂΩïÔºåkey ‰∏∫ tag nameÔºåvalue ‰∏∫ÂØπÂ∫îÁöÑ element„ÄÇ‰∏çÂêå tag Êúâ‰∏çÂêåÁöÑ HTMLElement Ê¥æÁîüÁ±ªÔºåÁ±ªÁªßÊâøÂõæÂ¶Ç‰∏ãÔºö ÊûÑÂª∫ DOM Tree‰ªé Token ÁöÑÊûÑÂª∫ËäÇÁÇπ„ÄÇÊòØ HTMLDocumentParser Á±ªË∞ÉÁî®‰∫Ü HTMLTreeBuilder Á±ªÁöÑ processToken ÂáΩÊï∞Êù•Â§ÑÁêÜÁöÑÔºåËØ•ÂáΩÊï∞Âú® WebCore/html/parser/HTMLTreeBuilder.cpp Êñá‰ª∂Èáå„ÄÇconstructtreefromToken 12345678910111213141516171819202122232425262728293031void HTMLTreeBuilder::processToken(AtomicHTMLToken&amp;&amp; token){ switch (token.type()) { case HTMLToken::Uninitialized: ASSERT_NOT_REACHED(); break; case HTMLToken::DOCTYPE: m_shouldSkipLeadingNewline = false; processDoctypeToken(WTFMove(token)); break; case HTMLToken::StartTag: m_shouldSkipLeadingNewline = false; processStartTag(WTFMove(token)); break; case HTMLToken::EndTag: m_shouldSkipLeadingNewline = false; processEndTag(WTFMove(token)); break; case HTMLToken::Comment: m_shouldSkipLeadingNewline = false; processComment(WTFMove(token)); return; case HTMLToken::Character: processCharacter(WTFMove(token)); break; case HTMLToken::EndOfFile: m_shouldSkipLeadingNewline = false; processEndOfFile(WTFMove(token)); break; }} Â∞ÜËäÇÁÇπÊûÑÂª∫Êàê DOM TreeÔºåËøòÊúâÁªô Tree ÁöÑÂÖÉÁ¥†ËäÇÁÇπÂàõÂª∫Â±ûÊÄßËäÇÁÇπÈÉΩÊòØ HTMLConstructionSite Ëøô‰∏™Á±ªÊù•ÂÅöÁöÑÔºåÂÆÉ‰ºöÈÄöËøá insert Á±ªÂáΩÊï∞‰∏ÄÊ¨°Â∞Ü Token Á±ªÂûãÂàõÂª∫ÁöÑ HTMLElement ÂØπË±°Âä†ÂÖ•Âà∞ DOM Tree„ÄÇËøô‰∏™Á±ª‰ºö‰ºöÂÖàÂàõÂª∫‰∏Ä‰∏™ html Ê†πËäÇÁÇπ HTMLDocument ÂØπË±°Âíå‰∏Ä‰∏™Ê†à HTMLElementStack ÂèòÈáèÔºåÊ†àÈáåÂ≠òÊîæÊ≤°ÊúâÈÅáÂà∞ EndTag ÁöÑ ÊâÄÊúâ StartTag„ÄÇÊ†πÊçÆËøô‰∏™Ê†àÊù•Âª∫Á´ãÁà∂Â≠êÂÖ≥Á≥ª„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839void HTMLConstructionSite::insertHTMLHtmlStartTagBeforeHTML(AtomicHTMLToken* token) { HTMLHtmlElement* element = HTMLHtmlElement::create(*m_document); attachLater(m_attachmentRoot, element); m_openElements.pushHTMLHtmlElement(HTMLStackItem::create(element, token)); //push Âà∞ HTMLStackItem Ê†àÈáå executeQueuedTasks();}//ÈÄöËøá attachLater ÂàõÂª∫ taskvoid HTMLConstructionSite::attachLater(ContainerNode* parent, Node* child, bool selfClosing) { HTMLConstructionSiteTask task(HTMLConstructionSiteTask::Insert); task.parent = parent; task.child = child; task.selfClosing = selfClosing; //Âà§Êñ≠ÊòØÂê¶Âà∞ËææÊúÄÊ∑±Ôºå512ÊòØÊúÄÊ∑± if (m_openElements.stackDepth() &gt; maximumHTMLParserDOMTreeDepth &amp;&amp; task.parent-&gt;parentNode()) task.parent = task.parent-&gt;parentNode(); queueTask(task);}//executeQueued Ê∑ªÂä†Â≠êËäÇÁÇπvoid ContainerNode::parserAppendChild(Node* newChild) { if (!checkParserAcceptChild(*newChild)) return; AdoptAndAppendChild()(*this, *newChild, nullptr); } notifyNodeInserted(*newChild, ChildrenChangeSourceParser);}//Ê∑ªÂä†Ââç‰ºöÂÖàÊ£ÄÊü•ÊòØÂê¶ÊîØÊåÅÂ≠êÂÖÉÁ¥†void ContainerNode::appendChildCommon(Node&amp; child) { child.setParentOrShadowHostNode(this); if (m_lastChild) { child.setPreviousSibling(m_lastChild); m_lastChild-&gt;setNextSibling(&amp;child); } else { setFirstChild(&amp;child); } setLastChild(&amp;child);} Èó≠Ê†áÁ≠æ‰ºöÊääÂÖÉÁ¥† pop Âá∫Êù• 1m_tree.openElements()-&gt;popUntilPopped(token-&gt;name()); ÂØπÈîôËØØÁöÑÂ§ÑÁêÜparser ‰∏Ä‰∏™ html ‰ª£Á†ÅÁöÑÊó∂ÂÄôÂ¶ÇÊûúÊòØÁ¨¶ÂêàËßÑËåÉÁöÑÈÇ£‰πàÂ∞±ÈÉΩÂ•ΩËØ¥Ôºå‰∏çÂπ∏ÁöÑÊòØÂæàÂ§ö html ‰ª£Á†ÅÈÉΩ‰∏çËßÑËåÉÔºåÊâÄ‰ª• parser ÈúÄË¶ÅÂÅö‰∫õÂÆπÈîô„ÄÇ‰∏ãÈù¢ÂàóÂá∫‰∏Ä‰∫õ WebKit ÂÆπÈîôÁöÑ‰æãÂ≠ê ÈóÆÈ¢ò‰∏Ä‰∫õÁΩëÁ´ô‰ºöÁî® Êõø‰ª£ ÔºåÂ§ÑÁêÜÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234if (t-&gt;isCloseTag(brTag) &amp;&amp; m_document-&gt;inCompatMode()) { reportError(MalformedBRError); t-&gt;beginTag = true;} stray tablestray table ÊòØ‰∏Ä‰∏™ table ÂåÖÂê´‰∫Ü‰∏Ä‰∏™‰∏çÂú® table cell ÁöÑ table„ÄÇ 123456&lt;table&gt; &lt;table&gt; &lt;tr&gt;&lt;td&gt;inner table&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; &lt;tr&gt;&lt;td&gt;outer table&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; WebKit ÁöÑÂ§ÑÁêÜ 12if (m_inStrayTableContent &amp;&amp; localName == tableTag) popBlock(tableTag); ËøôÊ†∑‰ºöÂ§ÑÁêÜÊàê‰∏§‰∏™ÂêåÁ∫ß table 123456&lt;table&gt; &lt;tr&gt;&lt;td&gt;outer table&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;table&gt; &lt;tr&gt;&lt;td&gt;inner table&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; ÂµåÂ•ó formÂ∞Ü‰∏Ä‰∏™ form ÊîæÂà∞Âè¶‰∏Ä‰∏™ form Èáå„ÄÇÈÇ£‰πàÁ¨¨‰∫å‰∏™ form ‰ºöË¢´ÂøΩÁï• 123if (!m_currentFormElement) { m_currentFormElement = new HTMLFormElement(formTag, m_document);} ËøáÊ∑±ÁöÑÂ±ÇÁ∫ßÂêå‰∏Ä‰∏™Á±ªÂûãÈáåÂè™ÂÖÅËÆ∏ÂµåÂ•ó 20 ‰∏™ tag„ÄÇ 12345678bool HTMLParser::allowNestedRedundantTag(const AtomicString&amp; tagName){unsigned i = 0;for (HTMLStackElem* curr = m_blockStack; i &lt; cMaxRedundantTagDepth &amp;&amp; curr &amp;&amp; curr-&gt;tagName == tagName; curr = curr-&gt;next, i++) { }return i != cMaxRedundantTagDepth;} html Êàñ body ÁöÑ end tags Áº∫Â§±Ëøô‰∫õÈÉΩ‰ºöÂú® end() ÊòØË∞ÉÁî® 12if (t-&gt;tagName == htmlTag || t-&gt;tagName == bodyTag ) return; CSSCSS ËØ≠Ê≥ïÁÆÄ‰ªãÊâÄÊúâÁöÑ CSS ÈÉΩÊòØÁî± CSSStyleSheet ÈõÜÂêàÁªÑÊàêÔºåCSSStyleSheet ÊòØÊúâÂ§ö‰∏™ CSSRule ÁªÑÊàêÔºåÊØè‰∏™ CSSRule Áî± CSSStyleSelector ÈÄâÊã©Âô®Âíå CSSStyleDeclaration Â£∞ÊòéÁªÑÊàê„ÄÇCSSStyleDeclaration ÊòØ CSS Â±ûÊÄßÁöÑÈîÆÂÄºÈõÜÂêà„ÄÇ CSS declarationsÂú®ËøôÈáåÂèØ‰ª•ÊâæÂà∞ CSS ÁöÑ‰∏çÂêåÁöÑÂ±ûÊÄß„ÄÇ CSS declaration blocks‰ΩøÁî®Â§ßÊã¨Âè∑ÂåÖËµ∑Êù•„ÄÇ CSS selectors and rulesÂú® CSS declarations block ÂâçÂä†‰∏ä selector Êù•ÂåπÈÖçÈ°µÈù¢‰∏äÁöÑÂÖÉÁ¥†„ÄÇselector Âíå declarations block Âú®‰∏ÄËµ∑Ë¢´Áß∞‰Ωú rulesetÔºåÁÆÄÁß∞ rule„ÄÇ selector ÂèØ‰ª•ÂàÜ‰∏∫‰ª•‰∏ãÁ±ªÂà´ Simple selectorsÔºöÁÆÄÂçïÈÄâÊã©Âô®ÔºåÈÄöËøá class Êàñ id Á±ªÂåπÈÖç‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÖÉÁ¥†„ÄÇ Attribute selectorsÔºöÂ±ûÊÄßÈÄâÊã©Âô®ÔºåÈÄöËøáÂ±ûÊÄßÂåπÈÖç„ÄÇ Pseudo-classesÔºö‰º™Á±ªÔºåÂåπÈÖçÁ°ÆÂÆöÁä∂ÊÄÅÁöÑÊØîÂ¶ÇÈº†Ê†áÊÇ¨ÂÅúÂÖÉÁ¥†ÔºåÂΩìÂâçÈÄâ‰∏≠ÊàñÊú™ÈÄâ‰∏≠ÁöÑÂ§çÈÄâÊ°ÜÔºå DOM Ê†ë‰∏≠‰∏ÄÁà∂ËäÇÁÇπÁöÑÁ¨¨‰∏Ä‰∏™Â≠êËäÇÁÇπÁöÑÂÖÉÁ¥†„ÄÇÊØîÂ¶Ç a:visited Ë°®Á§∫ËÆøÈóÆËøáÁöÑÈìæÊé•Ôºå a:hover Ë°®Á§∫Èº†Ê†áÂú®‰∏äÈù¢ÁöÑÈìæÊé•„ÄÇ Pseudo-elementsÔºö‰º™ÂÖÉÁ¥†ÔºåÂåπÈÖçÂ§Ñ‰∫éÁ°ÆÂÆö‰ΩçÁΩÆÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÖÉÁ¥†ÔºåÊØîÂ¶ÇÊØè‰∏™ÊÆµËêΩÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÔºåÊüê‰∏™ÂÖÉÁ¥†‰πãÂâçÁîüÊàêÁöÑÂÜÖÂÆπ„ÄÇÊØîÂ¶Ç [href^=http]::after { content: ‚Äò-&gt;‚Äô} Ë°®Á§∫Â±ûÊÄßÊòØ herf ÂÄºÁöÑÂºÄÂ§¥ÊòØ http ÁöÑÂÖÉÁ¥†ÂÜÖÂÆπÂêéÈù¢Ê∑ªÂä† -&gt; Á¨¶Âè∑„ÄÇ CombinatorsÔºöÁªÑÂêàÂô®ÔºåÁªÑÂêàÂ§ö‰∏™ÈÄâÊã©Âô®Áî®‰∫éÁâπÂÆöÁöÑÈÄâÊã©ÁöÑÊñπÊ≥ï„ÄÇÊØîÂ¶ÇÂè™ÈÄâÊã© div ÁöÑÁõ¥Á≥ªÂ≠êËäÇÁÇπÊÆµËêΩ„ÄÇÊØîÂ¶Ç A &gt; B ÈÇ£‰πà B ÊòØ A ÁöÑÁõ¥Êé•Â≠êËäÇÁÇπ„ÄÇ Multiple selectorsÔºöÂ§öÁî®ÈÄâÊã©Âô®ÔºåÂ∞Ü‰∏ÄÁªÑÂ£∞ÊòéÂ∫îÁî®‰∫éÁî±Â§ö‰∏™ÈÄâÊã©Âô®ÈÄâÊã©ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ Attribute selectors Â±ûÊÄßÈÄâÊã©Âô®ÊòØÈíàÂØπ data-* ËøôÊ†∑ÁöÑÊï∞ÊçÆÂ±ûÊÄßËøõË°åÈÄâÊã©ÁöÑÔºåÂ∞ùËØïÂåπÈÖçÁ≤æÁ°ÆÂ±ûÊÄßÂÄºÁöÑ Presence and value attribute selector ÂàÜ‰∏∫‰∏ãÈù¢Âá†Áßç [attr]Ôºö‰∏çËÆ∫ÂÄºÊòØ‰ªÄ‰πàÈÄâÊã©ÊâÄÊúâ attr Â±ûÊÄßÁöÑÂÖÉÁ¥†„ÄÇ [attr=val]ÔºöÊåâÁÖß attr Â±ûÊÄßÁöÑÂÄº‰∏∫ val ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ [attr~=val]Ôºöattr Â±ûÊÄßÁöÑÂÄºÂåÖÂê´ val ÂÄºÁöÑÊâÄÊúâÂÖÉÁ¥†Ôºåval ‰ª•Á©∫Ê†ºÈó¥ÈöîÂ§ö‰∏™ÂÄº„ÄÇ ËøòÊúâ Substring value attribute selector ËøôÊ†∑ÁöÑ‰º™Ê≠£ÂàôÈÄâÊã©Âô®Ôºö [attr|=val]ÔºöÂåπÈÖçÈÄâÊã©‰ª• val Êàñ val- ÂºÄÂ§¥ÁöÑÂÖÉÁ¥†Ôºå-‰∏ÄËà¨Áî®Êù•Â§ÑÁêÜËØ≠Ë®ÄÁºñÁ†Å„ÄÇ [attr^=val]ÔºöÂåπÈÖçÈÄâÊã©‰ª• val ÂºÄÂ§¥ÁöÑÂÖÉÁ¥†„ÄÇ [attr$=val]ÔºöÂåπÈÖçÈÄâÊã©‰ª• val ÁªìÂ∞æÁöÑÂÖÉÁ¥†„ÄÇ [attr*=val]ÔºöÂåπÈÖçÈÄâÊã©ÂåÖÂê´ val ÁöÑÂÖÉÁ¥†„ÄÇ Combinators ÁªÑÂêàÂô®Êúâ‰ª•‰∏ãÂá†Áßç A,BÔºö ÂåπÈÖç A B ÁöÑ‰ªªÊÑèÂÖÉÁ¥†„ÄÇ A BÔºöB ÊòØ A ÁöÑÂêé‰ª£ËäÇÁÇπÔºåÂèØ‰ª•ÊòØÁõ¥Êé•ÁöÑÂ≠êËäÇÁÇπÊàñËÄÖÊòØÂ≠êËäÇÁÇπÁöÑÂ≠êËäÇÁÇπ„ÄÇ A &gt; BÔºöB ÊòØ A ÁöÑÁõ¥Êé•Â≠êËäÇÁÇπ„ÄÇ A + BÔºöB ÊòØ A ÁöÑÂÖÑÂºüËäÇÁÇπ„ÄÇ A ~ BÔºöB ÊòØ A ÂÖÑÂºüËäÇÁÇπ‰∏≠ÁöÑ‰ªªÊÑè‰∏Ä‰∏™„ÄÇ CSS statementsCSS rule Âè™ÊòØ CSS statements ÁöÑ‰∏ÄÁßç„ÄÇÂÖ∂ÂÆÉÁ±ªÂûãÊòØ @-ËßÑÂàôÔºåÂú® CSS Èáå‰ΩøÁî® @-ËßÑÂàôÊù•‰º†ÈÄíÂÖÉÊï∞ÊçÆÔºåÊù°‰ª∂‰ø°ÊÅØÊàñÂÖ∂ÂÆÉÊèèËø∞‰ø°ÊÅØ„ÄÇ@ Á¨¶Âè∑ÂêéÈù¢Ë∑ü‰∏Ä‰∏™ÊèèËø∞Á¨¶Êù•Ë°®ÊòéÁî®Âì™ÁßçËßÑÂàôÔºåÂÜçÂêéÈù¢ÊòØ CSS declarations blockÔºåÁªìÊùüÊòØ ; Á¨¶Âè∑„ÄÇ @charsetÔºöÂÖÉÊï∞ÊçÆ @importÔºöÂÖÉÊï∞ÊçÆ @mediaÔºöÂµåÂ•óËØ≠Âè•ÔºåÂè™Âú®ËøêË°åÊµèËßàÂô®ÁöÑËÆæÂ§áÂåπÈÖçÊù°‰ª∂Êó∂Êâç‰ºöËøêÁî® @-ËßÑÂàôÈáåÁöÑÂÜÖÂÆπ„ÄÇ @supportsÔºöÂµåÂ•óËØ≠Âè•ÔºåÂè™ÊúâÊµèËßàÂô®Á°ÆÂÆûÊîØÊåÅÈááÁî®Â∫îÁî® @-ËßÑÂàôÈáåÁöÑÂÜÖÂÆπ„ÄÇ @documentÔºöÂµåÂ•óËØ≠Âè•ÔºåÂè™ÊúâÂΩìÂâçÈ°µÈù¢ÂåπÈÖçÊù°‰ª∂ÈááÁî®ËøêÁî® @-ËßÑÂàôÁöÑÂÜÖÂÆπ„ÄÇ @font-faceÔºöÊèèËø∞ÊÄß‰ø°ÊÅØ ÊØîÂ¶Ç 1@import &apos;starming.css&apos;; Ë°®Á§∫ÂêëÂΩìÂâçÁöÑ CSS ÂØºÂÖ•‰∫Ü starming.css Êñá‰ª∂„ÄÇÂÜç‰∏æ‰∏™‰æãÂ≠êÔºö 123456@media (min-width: 801px) { body { margin:0 auto; width:800px; }} Ëøô‰∏™Ë°®Á§∫È°µÈù¢ÂÆΩÂ∫¶Ë∂ÖËøá801ÂÉèÁ¥†Êó∂Êâç‰ºöËøêÁî® @-ËßÑÂàôÈáåÁöÑÂÜÖÂÆπ„ÄÇ ShorthandÊúâ‰∫õÂ±ûÊÄßÊòØ Shorthand Â±ûÊÄßÔºåÊØîÂ¶Ç fontÔºåbackgroundÔºåpaddingÔºåborderÂíå margin„ÄÇ‰ªñ‰ª¨ÂÖÅËÆ∏‰∏ÄË°åÈáåËÆæÁΩÆÂ§ö‰∏™Â±ûÊÄß„ÄÇÊØîÂ¶Ç 1maring: 20px 10px 10px 20px; Á≠âÊïà‰∫é 1234margin-top: 20px;margin-right: 10px;margin-bottom: 10px;margin-left: 20px; ÂÜçÊØîÂ¶Ç background Â±ûÊÄß 1background: black url(starming-bg.png) 20px 20px repeat-x fixed; Âíå‰∏ãÈù¢ÁöÑÂ±ûÊÄßËÆæÁΩÆÁ≠âÊïà 12345background-color: black;background-image: url(starming-bg.png);background-position: 20px 20px;background-repeat: repeat-x;background-scroll: fixed; Value and unit absolute units ÁªùÂØπÂçï‰ΩçÔºöpxÔºåmmÔºåcmÔºåinÔºöpixel ÂÉèÁ¥†Ôºåmillimeters ÊØ´Á±≥Ôºåcentimeters ÂéòÁ±≥Ôºåinches Ëã±ÂØ∏„ÄÇptÔºåpcÔºöPoints (1/72 of an inch) ÁÇπÔºåpicas (12 points.) ÂçÅ‰∫åÁÇπÊ¥ªÂ≠ó„ÄÇ Áõ∏ÂØπÂçï‰ΩçÔºöemÔºö1em ÁöÑËÆ°ÁÆóÂÄºÈªòËÆ§‰∏∫ 16px„ÄÇ‰ΩÜÊòØË¶ÅÊ≥®ÊÑè em Âçï‰Ωç‰ºöÁªßÊâøÁà∂ÂÖÉÁ¥†ÁöÑÂ≠ó‰ΩìÂ§ßÂ∞è„ÄÇexÔºåchÔºöÊîØÊåÅÁöÑ‰∏çÊòØÂæàÂ•Ω„ÄÇremÔºöREM(root em)ÔºåË∑ü em Â∑•‰ΩúÊñπÂºè‰∏ÄÊ†∑Ôºå‰∏çÂêåÁöÑÊòØÊÄªÊòØÁ≠â‰∫éÈªòËÆ§Âü∫Á°ÄÂ≠ó‰ΩìÂ§ßÂ∞è„ÄÇvwÔºåvhÔºöËßÜÂõæÂÆΩÂ∫¶ÁöÑ 1/100 ÂíåËßÜÂõæÈ´òÂ∫¶ÁöÑ 1/100Ôºå‰ΩÜÊòØÊîØÊåÅÊ≤°Êúâ rem ÈÇ£‰πàÂ•Ω„ÄÇ Êó†Âçï‰ΩçÁöÑÂÄºÔºöÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÊó†Âçï‰ΩçÁöÑÂÄºÊòØÂèØ‰ª•Â≠òÂú®ÁöÑÔºåÊØîÂ¶ÇËÆæÁΩÆ margin: 0; Â∞±ÊòØÂèØ‰ª•ÁöÑÔºåËøòÊúâ p { line-height: 1.5 } ËøôÈáåÁöÑÂÄºÁ±ª‰ºº‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰πòÊ≥ïÂõ†Â≠êÔºåÊØîÂ¶Ç font-size ‰∏∫16pxÁöÑËØùÔºåË°åÈ´òÂ∞±‰∏∫24px„ÄÇ ÁôæÂàÜÊØîÔºöÁõ∏ÂØπ‰∫éÁà∂ÂÆπÂô®ÊâÄÂç†ÁöÑÁôæÂàÜÊØîÔºåÊ≥®ÊÑèÂ¶ÇÊûú font-size ‰ΩøÁî®ÁôæÂàÜÊØîÊòØÊåáÊñ∞ÁöÑÂ§ßÂ∞èÁõ∏ÂØπ‰∫éÁà∂ÂÆπÂô®ÁöÑÂ≠ó‰ΩìÂ§ßÂ∞èÔºåÂíå em Á±ª‰ººÔºåÊâÄ‰ª• 200% Âíå 2em Á±ª‰ºº„ÄÇ È¢úËâ≤ÔºöÊúâ165‰∏™‰∏çÂêåÂÖ≥ÈîÆÂ≠óÂèØÁî®ÔºåÂÖ∑‰ΩìËßÅ https://developer.mozilla.org/en-US/docs/Web/CSS/color_value#Color_keywords ÔºåËøòÂèØ‰ª•‰ΩøÁî®Á±ª‰ºº background-color: #0000ff; ËøôÊ†∑ÁöÑÂçÅÂÖ≠ËøõÂà∂Ë°®Á§∫È¢úËâ≤ÔºåËøòÊúâ RGB Ë°®Á§∫ background-color: rgb(0,0,255); „ÄÇËøòÊîØÊåÅbackground-color: hsl(240,100%,50%); ËøôÁßç HSL ÁöÑË°®Á§∫ÔºåÂÄº‰æùÊ¨°ÊòØËâ≤Ë∞ÉÔºåÂÄºËåÉÂõ¥ÊòØ0Âà∞360ÔºåÈ•±ÂíåÂ∫¶0Ë°®Á§∫Ê≤°ÊúâÈ¢úËâ≤ÔºåÊòéÂ∫¶Èáå0Ë°®Á§∫ÂÖ®ÈªëÔºå100%Ë°®Á§∫ÂÖ®ÁôΩ„ÄÇHSL ÊòØÈááÁî®ÂúÜÊü±‰ΩìÂèØËßÜÂåñÈ¢úËâ≤ÁöÑÂ∑•‰ΩúÊñπÂºèÔºåWikipedia ‰∏äÊúâËØ¶ÁªÜËØ¥ÊòéÔºöhttps://en.wikipedia.org/wiki/HSL_and_HSV#Basic_principle ÈÄèÊòéÂ∫¶ÔºöÂèØ‰ª•ÈÄöËøá rgba Âíå hsla Êù•Ë°®Á§∫ÔºåÊØîÂ¶Ç background-color: hsla(240,100%,50%,0.5); „ÄÇËøòÂèØ‰ª•ÈÄöËøá CSS Â±ûÊÄß opacity Êù•ÊåáÂÆöÈÄèÊòéÂ∫¶„ÄÇ ÂáΩÊï∞ÔºöÂè™Ë¶ÅÊòØ‰∏Ä‰∏™ÂêçÂ≠óÂêéÈù¢Áî®Êã¨Âè∑ÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÄº‰πãÈó¥Áî®ÈÄóÂè∑ÂàÜÈöîÂ∞±ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÊØîÂ¶Ç background-color: rgba(255,0,0,0.5); transform: translate(50px, 60px); background-image: url(‚Äòmyimage.png‚Äô); È™åËØÅ CSS ËØ≠Ê≥ïÊ≠£Á°ÆÊÄßÂèØ‰ª•ÈÄöËøá w3c Êèê‰æõÁöÑÊúçÂä° https://jigsaw.w3.org/css-validator/ Êù•È™åËØÅÔºåw3c ËøòÊèê‰æõ‰∫Ü html ÁöÑÈ™åËØÅÊúçÂä° https://validator.w3.org/#validate_by_uri CSS BNFCSS ËØ≠Ê≥ï BNF 123456789101112131415161718192021222324ruleset : selector [ &apos;,&apos; S* selector ]* &apos;{&apos; S* declaration [ &apos;;&apos; S* declaration ]* &apos;}&apos; S* ;selector : simple_selector [ combinator selector | S+ [ combinator selector ] ] ;simple_selector : element_name [ HASH | class | attrib | pseudo ]* | [ HASH | class | attrib | pseudo ]+ ;class : &apos;.&apos; IDENT ;element_name : IDENT | &apos;*&apos; ;attrib : &apos;[&apos; S* IDENT S* [ [ &apos;=&apos; | INCLUDES | DASHMATCH ] S* [ IDENT | STRING ] S* ] &apos;]&apos; ;pseudo : &apos;:&apos; [ IDENT | FUNCTION S* [IDENT S*] &apos;)&apos; ] ; WebKit ‰ºö‰ΩøÁî® Flex Âíå Bison Êù•Ëß£ÊûêËøô‰∏™ BNF Êñá‰ª∂„ÄÇCSS Êñá‰ª∂‰ºöË¢´Ëß£ÊûêÊàê StyleSheet objectÔºåÊØè‰∏™ object ÂåÖÂê´ CSS rules objectÔºåËøô‰∫õ object ÂåÖÂê´ selector Âíå declaration ËøòË¶ÅÂÖ∂ÂÆÉÂØπÂ∫î‰∫é CSS ËØ≠Ê≥ïÁöÑ object„ÄÇÊé•‰∏ãÊù•ËøõË°å‰ºöËøõË°å CSSRule ÁöÑÂåπÈÖçËøáÁ®ãÔºåÂéªÊâæËÉΩÂ§üÂíå CSSRule Selector ÈÉ®ÂàÜÂåπÈÖçÁöÑ HTML ÂÖÉÁ¥†„ÄÇ CSS ‰∏ªË¶ÅÁ±ª‰∏éÂÖ≥Á≥ª‰∏äÂõæÁúãÂá∫ Document ÈáåÂåÖÂê´‰∫Ü‰∏Ä‰∏™ DocumentStyleSheetCollection Á±ªÂíå‰∏Ä‰∏™ StyleSheetResolver Á±ªÔºåDocumentStyleSheetCollection ÂåÖÂê´‰∫ÜÊâÄÊúâÁöÑ StyleSheetÔºåStyleSheet ÈáåÂåÖÂê´‰∫Ü CSS ÁöÑ hrefÔºåÁ±ªÂûãÔºåÂÜÖÂÆπÁ≠â‰ø°ÊÅØÔºåËøô‰∫õÂÜÖÂÆπÂ∞±ÊòØ StyleSheetContentsÔºåÂåÖÂê´‰∫Ü StyleRuleBase„ÄÇ StyleSheetResolver Ë¥üË¥£ÁªÑÁªáÁî®Êù•‰∏∫ DOM ÈáåÁöÑÂÖÉÁ¥†ÂåπÈÖçÁöÑËßÑÂàôÔºåÈáåÈù¢ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ DocumentRuleSets ÁöÑÁ±ªÔºåËøô‰∏™Á±ªÊòØÁî®Êù•Ë°®Á§∫Â§ö‰∏™ RuleSet ÁöÑ„ÄÇ CSS ÊñáÊ°£ÁªìÊûÑÁöÑÁ±ªÂõæÂ¶Ç‰∏ãÔºö StyleRuleBase Á±ªÁöÑÁªßÊâøÂÖ≥Á≥ªRuleSet ÊúâÂæàÂ§öÁ±ªÂûãÔºå‰∏ãÂõæÊòØ StyleRuleBase Áõ∏ÂÖ≥ÁªßÊâøÂÖ≥Á≥ªÊàë‰ª¨Êù•ÁúãÁúãËøô‰∫õÂ≠êÁ±ªÁ±ªÂûãÈÉΩÊòØÂØπÂ∫î CSS ÈáåÁöÑ‰ªÄ‰πà StyleRuleÔºöÂ∏∏Áî®ÁöÑÈÉΩÊòØËøô‰∏™Á±ªÂûã StyleRuleImportÔºöÂØπÂ∫îÁöÑÊòØ @import StyleRuleMediaÔºöÂØπÂ∫îÁöÑÊòØ @media StyleRuleFontFaceÔºöÂØπÂ∫îÁöÑ @font-face StyleRulePageÔºöÂØπÂ∫îÁöÑ @page StyleRuleKeyFramesÔºöÂØπÂ∫îÁöÑ @-webkit-key-frames StyleRuleRegionÔºöÂàÜÂå∫ÂüüÊéíÁâà StyleRule Á±ªÁöÑÁªìÊûÑ Ëß£Êûê CSSWebKit Ëß£ÊûêÁöÑÂÖ•Âè£ÂáΩÊï∞ÊòØ CSSParser::parseSheet„ÄÇËß£ÊûêËøáÁ®ãÂ¶Ç‰∏ãÂõæÔºö Â≠óÁ¨¶‰∏≤ËΩ¨ tokens Â∞Ü tokens ËΩ¨Êàê styleRule„ÄÇÊØè‰∏™ styleRule ÂåÖÂê´ selectors Âíå properties„ÄÇÂÆö‰πâ matchType 1234567891011121314151617enum MatchType { Unknown, Tag, //ÊØîÂ¶Ç div Id, // #id Class, // .class PseudoClass, // :nth-child(2) PseudoElement, // ::first-line PagePseudoClass, // AttributeExact, // E[attr=&quot;value&quot;] AttributeSet, // E[attr] AttributeHyphen, // E[attr|=&quot;value&quot;] AttributeList, // E[attr~=&quot;value&quot;] AttributeContain, // E[attr*=&quot;value&quot;] AttributeBegin, // E[attr^=&quot;value&quot;] AttributeEnd, // E[attr$=&quot;value&quot;] FirstAttributeSelectorMatch = AttributeExact,}; ÂÆö‰πâ selectors ÁöÑ Relation Á±ªÂûã 123456789101112enum RelationType { SubSelector, // No combinator Descendant, // &quot;Space&quot; combinator Child, // &gt; combinator DirectAdjacent, // + combinator IndirectAdjacent, // ~ combinator // Special cases for shadow DOM related selectors. ShadowPiercingDescendant, // &gt;&gt;&gt; combinator ShadowDeep, // /deep/ combinator ShadowPseudo, // ::shadow pseudo element ShadowSlot // ::slotted() pseudo element}; CSS ÁöÑÂ±ûÊÄßÊòØ id Êù•Ê†áËØÜÁöÑ 12345678enum CSSPropertyID { CSSPropertyColor = 15, CSSPropertyWidth = 316, CSSPropertyMarginLeft = 145, CSSPropertyMarginRight = 146, CSSPropertyMarginTop = 147, CSSPropertyMarkerEnd = 148,} ÈªòËÆ§Ê†∑ÂºèÔºåBlink uaÂÖ®ÈÉ® CSS Ê†∑ÂºèÔºöhttps://yincheng.site/html/chrome-ua-css.html „ÄÇw3c ÁöÑÈªòËÆ§Ê†∑ÂºèÊòØÔºöhttps://www.w3.org/TR/CSS2/sample.html Êé•ÁùÄ‰ºöÁîüÊàê hash mapÔºåÂàÜÊàêÂõõ‰∏™Á±ªÂûã 1234CompactRuleMap m_idRules; //idCompactRuleMap m_classRules; //classCompactRuleMap m_tagRules; //Ê†áÁ≠æCompactRuleMap m_shadowPseudoElementRules; //‰º™Á±ªÈÄâÊã©Âô® CSS Ëß£ÊûêÂÆå‰ºöËß¶Âèë layout tree Ôºå‰ºöÁªôÊØè‰∏™ÂèØËßÜ Node ÂàõÂª∫‰∏Ä‰∏™ layout ËäÇÁÇπÔºåÂàõÂª∫Êó∂ÈúÄË¶ÅËÆ°ÁÆó styleÔºåËøô‰∏™ËøáÁ®ãÂåÖÊã¨ÊâæÂà∞ selector Âíå ËÆæÁΩÆ style„ÄÇ layout ‰ºöÊõ¥Êñ∞ÈÄíÂΩíÊâÄÊúâ DOM ÂÖÉÁ¥† 123456void ContainerNode::attachLayoutTree(const AttachContext&amp; context) { for (Node* child = firstChild(); child; child = child-&gt;nextSibling()) { if (child-&gt;needsAttach()) child-&gt;attachLayoutTree(childrenContext); }} ÁÑ∂ÂêéÂØπÊØè‰∏™ node ÈÉΩ‰ºöÊåâÁÖß idÔºåclassÔºå‰º™ÂÖÉÁ¥†ÂíåÊ†áÁ≠æÈ°∫Â∫èÂèñÂá∫ÊâÄÊúâÂØπÂ∫îÁöÑ selector 1234567891011121314151617181920//idif (element.hasID()) collectMatchingRulesForList( matchRequest.ruleSet-&gt;idRules(element.idForStyleResolution()), cascadeOrder, matchRequest);//classif (element.isStyledElement() &amp;&amp; element.hasClass()) { for (size_t i = 0; i &lt; element.classNames().size(); ++i) collectMatchingRulesForList( matchRequest.ruleSet-&gt;classRules(element.classNames()[i]), cascadeOrder, matchRequest);}//‰º™Á±ª...//tag Âíå selectorcollectMatchingRulesForList( matchRequest.ruleSet-&gt;tagRules(element.localNameForSelectorMatching()), cascadeOrder, matchRequest);//ÈÄöÈÖçÁ¨¶... ÂèØ‰ª•ÁúãÂà∞ id ÊòØÂîØ‰∏ÄÁöÑÔºåÂÆπÊòìÁõ¥Êé•ÂèñÂà∞Ôºåclass Â∞±ÈúÄË¶ÅÈÅçÂéÜÊï∞ÁªÑÊù•ËÆæÁΩÆ style„ÄÇ Âú® classRules Èáå‰ºöËøõË°åÊ£ÄÈ™å 12345678910111213141516if (!checkOne(context, subResult)) return SelectorFailsLocally;if (context.selector-&gt;isLastInTagHistory()) { return SelectorMatches;}//checkOne ÁöÑÂÆûÁé∞switch (selector.match()) { case CSSSelector::Tag: return matchesTagName(element, selector.tagQName()); case CSSSelector::Class: return element.hasClass() &amp;&amp; element.classNames().contains(selector.value()); case CSSSelector::Id: return element.hasID() &amp;&amp; element.idForStyleResolution() == selector.value();} Â¶ÇÊûú Relation Á±ªÂûãÊòØ Descendant Ë°®Á§∫ÊòØÂêé‰ª£ÔºåÂ∞±ÈúÄË¶ÅÂú® checkOne ÂêéÂ§ÑÁêÜ relation„ÄÇ 1234567891011121314switch (relation) { case CSSSelector::Descendant: for (nextContext.element = parentElement(context); nextContext.element; nextContext.element = parentElement(nextContext)) { MatchStatus match = matchSelector(nextContext, result); if (match == SelectorMatches || match == SelectorFailsCompletely) return match; if (nextSelectorExceedsScope(nextContext)) return SelectorFailsCompletely; } return SelectorFailsCompletely; case CSSSelector::Child: //...} ÂèØ‰ª•ÁúãÂà∞Ëøô‰∏™Â∞±ÊòØ selector ‰ªéÂè≥Âà∞Â∑¶Ëß£ÈáäÁöÑÂÆûÁé∞ÔºåÂÆÉ‰ºöÈÄíÂΩíÊâÄÊúâÁà∂ËäÇÁÇπÔºåÂÜçÊ¨°ÊâßË°å checkOne ÔºåËøôÊ†∑Áõ¥Âà∞ÊâæÂà∞ÈúÄË¶ÅÁöÑÁà∂ËäÇÁÇπ‰ª•ÂèäÂ¶ÇÊûúÈúÄË¶ÅÁöÑÁà∂ËäÇÁÇπÁöÑÁà∂ËäÇÁÇπÊâç‰ºöÂÅúÊ≠¢ÈÄíÂΩí„ÄÇÊâÄ‰ª•ÈÄâÊã©Âô®‰∏çË¶ÅÂÜôÂ§™ÈïøÔºå‰ºöÂΩ±ÂìçÊïàÁéá„ÄÇ CSS ËßÑÂàôÂåπÈÖçCSS Ëß£ÊûêÂÆåÔºåËäÇÁÇπ‰ºöË∞ÉÁî® CSSStyleSelector ÁöÑ styleForElement Êù•ÁªôËäÇÁÇπÂàõÂª∫ RenderStyle ÂÆû‰æã„ÄÇRenderObject ÈúÄË¶Å RenderStyle ÁöÑÊéíÁâà‰ø°ÊÅØ„ÄÇ CSSStyleSelector ‰ºö‰ªé CSSRuleList ÈáåÂ∞ÜÂåπÈÖçÁöÑÊ†∑ÂºèÂ±ûÊÄßÂèñÂá∫ËøõË°åËßÑÂàôÂåπÈÖçÔºåÁõ∏ÂÖ≥Á±ªÂõæÂ¶Ç‰∏ãÔºöÂåπÈÖçÁöÑÊµÅÁ®ãÂõæÂ¶Ç‰∏ãÔºö ËÆæÁΩÆ styleËÆæÁΩÆÁöÑÈ°∫Â∫èÊòØÂÖàËÆæÁΩÆÁà∂ËäÇÁÇπÔºåÂú®‰ΩøÁî®ÈªòËÆ§ÁöÑ UA ÁöÑ styleÔºåÊúÄÂêéÂÜç‰ΩøÁî® Author ÁöÑ style„ÄÇ 123style-&gt;inheritFrom(*state.parentStyle())matchUARules(collector);matchAuthorRules(*state.element(), collector); Âú®ÊâßË°åÊØè‰∏ÄÊ≠•Êó∂Â¶ÇÊúâ‰∏Ä‰∏™ styleRule ÂåπÈÖçÁöÑËØùÈÉΩ‰ºöÊîæÂà∞ÂΩìÂâçÂÖÉÁ¥†ÁöÑ m_matchedRule ÈáåÔºåÁÑ∂ÂêéËÆ°ÁÆó‰ºòÂÖàÁ∫ßÔºå‰ºòÂÖàÁ∫ßÁÆóÊ≥ïÂ∞±ÊòØ‰ªéÂè≥Âà∞Â∑¶ÂèñÊØè‰∏™ selector ‰ºòÂÖàÁ∫ß‰πãÂíåÔºåÂÆûÁé∞Â¶Ç‰∏ã 12345for (const CSSSelector* selector = this; selector; selector = selector-&gt;tagHistory()) { temp = total + selector-&gt;specificityForOneSelector();}return total; ÊØè‰∏™‰∏çÂêåÁ±ªÂûãÁöÑ selector ÁöÑ‰ºòÂÖàÁ∫ßÂ¶Ç‰∏ã 12345678910111213141516171819202122switch (m_match) { case Id: return 0x010000; case PseudoClass: return 0x000100; case Class: case PseudoElement: case AttributeExact: case AttributeSet: case AttributeList: case AttributeHyphen: case AttributeContain: case AttributeBegin: case AttributeEnd: return 0x000100; case Tag: return 0x000001; case Unknown: return 0; } return 0;} ÂèØ‰ª•ÁúãÂá∫ id ÁöÑ‰ºòÂÖàÁ∫ßÊúÄÂ§ßÊòØ 0x010000 = 65536ÔºåÁ±ªÔºåÂ±ûÊÄßÔºå‰º™Á±ª‰ºòÂÖàÁ∫ßÊòØ 0x000100 = 256ÔºåÊ†áÁ≠æÊòØ 0x000001 = 1 ‰∏æ‰∏™‰ºòÂÖàÁ∫ßËÆ°ÁÆóÁöÑ‰æãÂ≠ê 12345678/*‰ºòÂÖàÁ∫ß‰∏∫257 = 265 + 1*/.text h1{ font-size: 8em;}/*‰ºòÂÖàÁ∫ß‰∏∫65537 = 65536 + 1*/#my-text h1{ font-size: 16em;} Â∞ÜÊâÄÊúâ CSS ËßÑÂàôÊîæÂà∞ collector ÁöÑ m_matchedRules ÈáåÔºåÂÜçÊ†πÊçÆ‰ºòÂÖàÁ∫ß‰ªéÂ∞èÂà∞Â§ßÊéíÂ∫èÔºåËøôÊ†∑ÔºåË∂äÊâßË°åÂà∞ÂêéÈù¢‰ºòÂÖàÁ∫ßË∂äÈ´òÔºåÂèØ‰ª•Ë¶ÜÁõñÂâçÈù¢ÁöÑ„ÄÇ ÁõÆÂâç‰ºòÂÖàÁ∫ßÊòØ ID ÈÄâÊã©Âô®Â§ß‰∫éÁ±ªÂûãÈÄâÊã©Âô®ÔºåÂ§ß‰∫éÊ†áÁ≠æÈÄâÊã©Âô®ÔºåÂ§ß‰∫éÁõ∏ÈÇªÈÄâÊã©Âô®ÔºåÂ§ß‰∫éÂ≠êÈÄâÊã©Âô®ÔºåÂ§ß‰∫éÂêé‰ª£ÈÄâÊã©Âô®„ÄÇ ÊéíÂ∫èËßÑÂàô 123456789static inline bool compareRules(const MatchedRule&amp; matchedRule1, const MatchedRule&amp; matchedRule2) { unsigned specificity1 = matchedRule1.specificity(); unsigned specificity2 = matchedRule2.specificity(); if (specificity1 != specificity2) return specificity1 &lt; specificity2; return matchedRule1.position() &lt; matchedRule2.position();} ËßÑÂàôÂíå‰ºòÂÖàÁ∫ßÂÆåÂêéÂ∞±ÂºÄÂßãËÆæÁΩÆÂÖÉÁ¥†ÁöÑ style ‰∫ÜÔºö 123456789applyMatchedPropertiesAndCustomPropertyAnimations( state, collector.matchedResult(), element);applyMatchedProperties&lt;HighPropertyPriority, CheckNeedsApplyPass&gt;( state, matchResult.allRules(), false, applyInheritedOnly, needsApplyPass); for (auto range : ImportantAuthorRanges(matchResult)) { applyMatchedProperties&lt;HighPropertyPriority, CheckNeedsApplyPass&gt;( state, range, true, applyInheritedOnly, needsApplyPass); } ÊúÄÂêéÁöÑ style ÊòØ‰ªÄ‰πàÊ†∑ÁöÑÔºåstyle ‰ºöÁîüÊàê‰∏Ä‰∏™ ComputedStyle ÂØπË±°„ÄÇÂØπË±°ÁªìÊûÑÂ¶Ç‰∏ãÔºö CSS Object Model (CSSOM)CSS ÂØπË±°Ê®°Âûã CSSOM Êèê‰æõ‰∫Ü‰æø‰∫é JavaScript Êìç‰Ωú CSS ÁöÑÊé•Âè£ CSSStyleSheet„ÄÇÈÄöËøáËøô‰∏™Êé•Âè£Êàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìËé∑Âèñ CSS ÁöÑ hrefÔºåcssRule ËøôÊ†∑ÁöÑ‰ø°ÊÅØ„ÄÇ W3C ËøòÂÆö‰πâ‰∫Ü CSSOM ViewÔºåÂ¢ûÂä†‰∫Ü WindowÔºåDocumentÔºåElementÔºåHTMLElement Âíå MouseEvent ÁöÑÊé•Âè£„ÄÇÊØîÂ¶Ç Window ÂØπ CSSOM View ÁöÑÊîØÊåÅÂ∞±ÂèØ‰ª•Âú® WebCore/page/DOMWindow.idl ÈáåÊü•ÁúãÂà∞ÔºåÊàëÊëòÂá∫Âíå CSSOM View Áõ∏ÂÖ≥ÁöÑËßÑËåÉÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132// Extensions from the CSSOM-View specification (https://drafts.csswg.org/cssom-view/#extensions-to-the-window-interface).[NewObject] MediaQueryList matchMedia(CSSOMString query);[Replaceable] readonly attribute Screen screen; // FIXME: Should be [SameObject].// Browsing context (CSSOM-View).void moveTo(optional unrestricted float x = NaN, optional unrestricted float y = NaN); // FIXME: Parameters should be mandatory and of type long.void moveBy(optional unrestricted float x = NaN, optional unrestricted float y = NaN); // FIXME: Parameters should be mandatory and of type long.void resizeTo(optional unrestricted float width = NaN, optional unrestricted float height = NaN); // Parameters should be mandatory and of type long.void resizeBy(optional unrestricted float x = NaN, optional unrestricted float y = NaN); // FIXME: Parameters should be mandatory and of type long.// Viewport (CSSOM-View).[Replaceable] readonly attribute long innerHeight;[Replaceable] readonly attribute long innerWidth;// Viewport scrolling (CSSOM-View).[Replaceable] readonly attribute double scrollX;[Replaceable, ImplementedAs=scrollX] readonly attribute double pageXOffset;[Replaceable] readonly attribute double scrollY;[Replaceable, ImplementedAs=scrollY] readonly attribute double pageYOffset;[ImplementedAs=scrollTo] void scroll(optional ScrollToOptions options);[ImplementedAs=scrollTo] void scroll(unrestricted double x, unrestricted double y);void scrollTo(optional ScrollToOptions options);void scrollTo(unrestricted double x, unrestricted double y);void scrollBy(optional ScrollToOptions option);void scrollBy(unrestricted double x, unrestricted double y);// Client (CSSOM-View).[Replaceable] readonly attribute long screenX;[Replaceable] readonly attribute long screenY;[Replaceable] readonly attribute long outerWidth;[Replaceable] readonly attribute long outerHeight;[Replaceable] readonly attribute double devicePixelRatio; ÂèØ‰ª•ÁúãÂá∫ CSSOM View ÂÆö‰πâ‰∫Ü Window ÁöÑÂ§ßÂ∞èÔºåÊªöÂä®Ôºå‰ΩçÁΩÆÁ≠âÂêÑÁßç‰ø°ÊÅØ„ÄÇ RenderObject TreeÂΩì DOM tree ÊûÑÂª∫ËøáÁ®ã‰∏≠ÔºåÂú® HTMLConstruction ÁöÑ attachToCurrent ÊñπÊ≥ïÈáå‰ºöÈÄöËøá createRendererIfNeeded ÊñπÊ≥ïÊûÑÂª∫ÁöÑÂè¶Â§ñ‰∏Ä‰∏™ treeÔºåÂè´ Render tree„ÄÇÊûÑÊàêËøô‰∏™ tree ÁöÑÂÖÉÁ¥†ÈÉΩÊòØ RenderObject„ÄÇRenderObject ‰ºöËÆ∞ÂΩïÂêÑ‰∏™ node ÁöÑ render ‰ø°ÊÅØÔºåÊØîÂ¶Ç RenderStyleÔºåNode Âíå RenderLayer Á≠â„ÄÇÂΩì WebKit ÂàõÂª∫ DOM Tree ÁöÑÂêåÊó∂‰πü‰ºöÂàõÂª∫ RenderObject ÂØπË±°ÔºåDOM Tree Âä®ÊÄÅÂä†ÂÖ•‰∏Ä‰∏™Êñ∞ËäÇÁÇπÊó∂‰πü‰ºöÂàõÂª∫Áõ∏Â∫îÁöÑ RenderObject ÂØπË±°„ÄÇ Êï¥‰∏™ tree ÁöÑÂàõÂª∫ËøáÁ®ãÈÉΩÊòØÁî± NodeRenderingContext Á±ªÊù•ÂÆåÊàê„ÄÇ‰∏ãÂõæÊòØÂ¶Ç‰ΩïÂàõÂª∫ RenderObject ÂØπË±°ÂíåÊûÑÂª∫ RenderObject Tree ÁöÑ„ÄÇ‰∏äÂõæÊâÄÁ§∫ÔºåWebKit ‰ºöÂÖàÊ£ÄÊü• DOM ËäÇÁÇπÊòØÂê¶ÈúÄË¶ÅÊñ∞ÁöÑ RenderObject ÂØπË±°ÔºåÈúÄË¶ÅÁöÑËØù‰ºöÂàõÂª∫ÊàñËÄÖËé∑Âèñ‰∏Ä‰∏™ NodeRenderingContext ÂØπË±°Êù•ÂàõÂª∫ RenderObject ÂØπË±°„ÄÇNodeRenderingContext ÁöÑ‰ΩúÁî®ÊòØÂàÜÊûêËÆæÁΩÆ RenderObject ÂØπË±°Áà∂ÁªìÁÇπÔºåÂÖÑÂºüËäÇÁÇπÁ≠â‰ø°ÊÅØÁÑ∂ÂêéÂÆåÊàêÊèíÂÖ• RenderObject Ê†ë„ÄÇ RenderObjectRenderObject ÈúÄË¶ÅÁü•ÈÅì CSS Áõ∏ÂÖ≥Â±ûÊÄßÔºå‰ºöÂºïÁî®Âú® CSS Ëß£ÊûêËøáÁ®ã‰∏≠ÁîüÊàêÁöÑ CSSStyleSelector Êèê‰æõÁöÑ RenderStyle„ÄÇRenderObject ÁöÑÂàõÂª∫ËøáÁ®ãÂ¶Ç‰∏ãÔºö RenderObject Ë¢´ÂàõÂª∫Êó∂ÂàõÂª∫Êó∂Áõ∏ÂÖ≥ÁöÑÁ±ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºöElement ÂØπË±°‰ºöÈÄíÂΩíË∞ÉÁî® attach ÂáΩÊï∞Ôºå‰ºöÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ RenderObject„ÄÇÈúÄË¶ÅÂàõÂª∫ÁöÑËØù‰ºö‰ΩøÁî® NodeRenderingContext Á±ªÊù•ÂàõÂª∫‰∏çÂêå DOM ËäÇÁÇπÁ±ªÂûãÁöÑ RenderObject„ÄÇattach ÁöÑÂÖ∑‰ΩìËøáÁ®ãÊòØÂú®ÂΩìÂâçÁöÑ Render ËäÇÁÇπÁöÑÁà∂ËäÇÁÇπ‰ºöÂ∞ÜÂΩìÂâçÁöÑ Render ËäÇÁÇπÊèíÂÖ•Âà∞ÂêàÈÄÇ‰ΩçÁΩÆÔºåÁà∂ËäÇÁÇπÂÜçËÆæÁΩÆÂΩìÂâçËäÇÁÇπÁöÑÂÖÑÂºüËäÇÁÇπ„ÄÇattach ËøáÁ®ãËßÅ‰∏ãÂõæÔºö RenderObject Ê†ëÂíå DOM Ê†ë‰∏ÄÊ†∑‰πüÊúâÂæàÂ§öÁ±ªÂûãÔºå‰∏ãÈù¢ÊòØ RenderObject Âü∫Á±ªÂíåÂ≠êÁ±ªÁ§∫ÊÑèÂõæÔºö RenderObject Ê†∏ÂøÉÂØπË±°ÂÖ≥Á≥ªÂõæÂ¶Ç‰∏ãÔºö RenderBox Á±ªÊòØ Box Ê®°ÂûãÁöÑÁ±ªÔºåÂåÖÂê´‰∫ÜÂ§ñËæπË∑ùÔºåÂÜÖËæπË∑ùÔºåËæπÊ°ÜÁ≠â‰ø°ÊÅØ„ÄÇ RenderObject ÁöÑÁªßÊâøÂÖ≥Á≥ªÂõæÂ¶Ç‰∏ãÔºö RenderObject ÁöÑ‰∏Ä‰∫õ‰∏ªË¶ÅËôöÂáΩÊï∞ parent()ÔºåfirstChild()ÔºånextSibling()ÔºåpreviousSibling()ÔºåaddChild()ÔºåremoveChild() Ëøô‰∫õÈÅçÂéÜÂíå‰øÆÊîπ RenderObject Ê†ëÁöÑÂáΩÊï∞„ÄÇ layout()Ôºåstyle()ÔºåenclosingBox() Ëøô‰∫õËÆ°ÁÆóÂíåËé∑ÂèñÂ∏ÉÂ±ÄÁöÑÂáΩÊï∞„ÄÇ isASubClass Á±ª‰ººËøôÊ†∑Âà§Êñ≠ÈÇ£ÁßçÂ≠êÁ±ªÁ±ªÂûãÁöÑÂáΩÊï∞„ÄÇ paint()Ôºårepaint() ËøôÊ†∑ËÆ≤ÂÜÖÂÆπÁªòÂà∂‰º†ÂÖ•ÁªòÂà∂ÁªìÊûúÂØπË±°ÁöÑÂùêÊ†áÂíåÁªòÂõæÂáΩÊï∞„ÄÇ RenderObject Áî®Êù•ÊûÑÂª∫ Render Tree ÁöÑÁõ∏ÂÖ≥ÊñπÊ≥ï 1234567891011121314151617181920RenderElement* parent() const { return m_parent; }bool isDescendantOf(const RenderObject*) const;RenderObject* previousSibling() const { return m_previous; }RenderObject* nextSibling() const { return m_next; }// Use RenderElement versions instead.virtual RenderObject* firstChildSlow() const { return nullptr; }virtual RenderObject* lastChildSlow() const { return nullptr; }RenderObject* nextInPreOrder() const;RenderObject* nextInPreOrder(const RenderObject* stayWithin) const;RenderObject* nextInPreOrderAfterChildren() const;RenderObject* nextInPreOrderAfterChildren(const RenderObject* stayWithin) const;RenderObject* previousInPreOrder() const;RenderObject* previousInPreOrder(const RenderObject* stayWithin) const;WEBCORE_EXPORT RenderObject* childAt(unsigned) const;RenderObject* firstLeafChild() const;RenderObject* lastLeafChild() const; RenderObject Áî®Êù•Â∏ÉÂ±ÄÁõ∏ÂÖ≥ÁöÑÊñπÊ≥ï 1234567891011121314151617bool needsLayout() const{ return m_bitfields.needsLayout() || m_bitfields.normalChildNeedsLayout() || m_bitfields.posChildNeedsLayout() || m_bitfields.needsSimplifiedNormalFlowLayout() || m_bitfields.needsPositionedMovementLayout();}bool selfNeedsLayout() const { return m_bitfields.needsLayout(); }bool needsPositionedMovementLayout() const { return m_bitfields.needsPositionedMovementLayout(); }bool needsPositionedMovementLayoutOnly() const{ return m_bitfields.needsPositionedMovementLayout() &amp;&amp; !m_bitfields.needsLayout() &amp;&amp; !m_bitfields.normalChildNeedsLayout() &amp;&amp; !m_bitfields.posChildNeedsLayout() &amp;&amp; !m_bitfields.needsSimplifiedNormalFlowLayout();}bool posChildNeedsLayout() const { return m_bitfields.posChildNeedsLayout(); }bool needsSimplifiedNormalFlowLayout() const { return m_bitfields.needsSimplifiedNormalFlowLayout(); }bool normalChildNeedsLayout() const { return m_bitfields.normalChildNeedsLayout(); } RenderBoxModelObject ÊòØ RenderObject ÁöÑÂ≠êÁ±ªÔºåÊòØÂØπ CSS Box ÁöÑÂ∞ÅË£ÖÔºåÈáåÈù¢ÂÆö‰πâ‰∫Ü CSS Box ÁöÑÂêÑ‰∏™Êé•Âè£„ÄÇ RenderBox ÊòØ RenderBoxModelObject ÁöÑÂ≠êÁ±ªÔºå‰ºöÈáçËΩΩ RenderObject Âíå RenderBoxModelObject ÁöÑ‰∏Ä‰∫õÊñπÊ≥ï„ÄÇ RenderBlock ÊòØ RenderBox ÁöÑÂ≠êÁ±ªÔºåÂ∞ÅË£Ö CSS Èáå Block ÁöÑÂÖÉÁ¥†ÔºåÈáåÈù¢ÊúâÂ∏ÉÂ±Ä InlineÔºåblockÔºåÂíåÂÆö‰ΩçÁõ∏ÂÖ≥ÁöÑÊñπÊ≥ïÔºåÊúâÂà†Èô§ÔºåÊèíÂÖ• Float ÊµÆÂä®ËäÇÁÇπËøòÊúâËÆ°ÁÆóÊµÆÂä®ËäÇÁÇπ‰ΩçÁΩÆÁ≠âÊñπÊ≥ïÔºåÁªòÂà∂Áõ∏ÂÖ≥ÁöÑÊØîÂ¶ÇÁªòÂà∂ Float ËäÇÁÇπÔºåÁªòÂà∂ outlineÔºåÁªòÂà∂ÈÄâÊã©Âå∫Á≠âÊñπÊ≥ï„ÄÇ RenderView ÁªßÊâøËá™ RenderBlockÔºåRender Tree ÁöÑÊ†πËäÇÁÇπÔºåÊòØ Tree Â∏ÉÂ±ÄÂíåÊ∏≤ÊüìÁöÑÂÖ•Âè£„ÄÇ RenderInlineBox ÊòØ RenderBoxModelObject ÁöÑÂ≠êÁ±ªÔºå‰ºöÂ∞ÅË£Ö CSS ÈáåÁöÑ Inline ÂÖÉÁ¥†„ÄÇÈáåÈù¢ÁöÑÊñπÊ≥ï‰∏ªË¶ÅÂ§ÑÁêÜ Inline ÁöÑËá™Âä®Êç¢Â§öË°åÊÉÖÂÜµ„ÄÇÂØπÂ§öË°åÁöÑÂ§ÑÁêÜ RenderInlineBox ‰ºöÊúâ‰∏™ RenderInlineBoxList Á±ªÁöÑ m_lineBoxes ÊåÅÊúâÊúâÂ§ö‰∏™ InlineBox ÁöÑË°åÂÖÉÁ¥†„ÄÇRenderBox Âíå InlineBox ÁöÑÂÖ≥Á≥ªÁ±ªÂõæÂ¶Ç‰∏ãÔºöRenderStyle ‰ºö‰øùÂ≠ò CSS Ëß£ÊûêÁªìÊûúÔºåËøô‰∫õ CSS Â±ûÊÄß‰ºö‰øùÂ≠òÂú® InheritedFlags Âíå NonInheritedFlags ÈáåÔºåInheritedFlags ‰øùÂ≠òÁöÑÈÉΩÊòØÊñáÊú¨ÊñπÂêëÂíåÊñáÊú¨ÂØπÈΩêÁ≠âÂ±ûÊÄßÔºåNonInheritedFlags Èáå‰øùÂ≠ò‰∫ÜÊµÆÂä®ÔºåÂÆö‰ΩçÔºåoverflow Á≠âÂ±ûÊÄßÔºåËøòÊúâÂ§ßÈáèÁöÑËÆøÈóÆÂíåËÆæÁΩÆ CSS Â±ûÊÄßÁöÑÊñπÊ≥ï„ÄÇ RenderText ÁªßÊâø RenderObjectÔºåÊèê‰æõÂ§ÑÁêÜÊñáÂ≠óÁõ∏ÂÖ≥ÂäüËÉΩ„ÄÇÁõ∏ÂÖ≥ÁöÑÁ±ªÂõæÂ¶Ç‰∏ãÔºö StyleResolverRenderStyle Êù•Ëá™ CSSÔºå‰øùÂ≠ò‰∫Ü Render Tree ÁªòÂà∂ÈúÄË¶ÅÁöÑÊâÄÊúâÂÜÖÂÆπÔºåStyleResolver Â∞±ÊòØË¥üË¥£Â∞Ü CSS ËΩ¨Êàê RenderStyle„ÄÇStyleResolver Á±ªÊ†πÊçÆÂÖÉÁ¥†ÁöÑ‰ø°ÊÅØÔºå‰æãÂ¶ÇÊ†áÁ≠æÂêçÂíåÁ±ªÂà´Á≠âÔºå‰øùÂ≠òÂà∞Êñ∞Âª∫ÁöÑ RenderStyle ÂØπË±°‰∏≠ÔºåÂÆÉ‰ª¨ÊúÄÂêéË¢´ RenderObject Á±ªÊâÄÁÆ°ÁêÜÂíå‰ΩøÁî®„ÄÇ ËßÑÂàôÁöÑÂåπÈÖçÊòØÁî± ElementRuleCollector Á±ªËÆ°ÁÆóËé∑ÂæóÔºåÊ†πÊçÆÂÖÉÁ¥†Â±ûÊÄß‰ø°ÊÅØÔºå‰ªé DocumentRuleSets Á±ªÈáåËé∑ÂæóËßÑÂàôÈõÜÂêàÊåâÁÖß IDÔºåClassÔºåTag Á≠â‰ø°ÊÅØËé∑ÂæóÂÖÉÁ¥†ÁöÑÊ†∑ÂºèÔºåÂÖ∑‰ΩìÁöÑËøáÁ®ãÂ¶Ç‰∏ãÔºöÂàõÂª∫ RenderObject Á±ªÊó∂ StyleResolver ‰ºöÊî∂ÈõÜÊ†∑Âºè‰ø°ÊÅØÁªô RenderStyle ÂØπË±°ÔºåËøôÊ†∑ RenderStyle ÂØπË±°ÂåÖÂê´‰∫ÜÂÆåÊï¥ÁöÑÊ†∑Âºè‰ø°ÊÅØ„ÄÇ 1234567891011PassRefPtr&lt;RenderStyle&gt; styleForElement(Element*, RenderStyle* parentStyle = 0, StyleSharingBehavior = AllowStyleSharing, RuleMatchingBehavior = MatchAllRules, RenderRegion* regionForStyling = 0); ...... PassRefPtr&lt;RenderStyle&gt; pseudoStyleForElement(PseudoId, Element*, RenderStyle* parentStyle); PassRefPtr&lt;RenderStyle&gt; styleForPage(int pageIndex); PassRefPtr&lt;RenderStyle&gt; defaultStyleForElement(); PassRefPtr&lt;RenderStyle&gt; styleForText(Text*); static PassRefPtr&lt;RenderStyle&gt; styleForDocument(Document*, CSSFontSelector* = 0); StyleResolver ÊòØ Document ÁöÑÂ≠êÂØπË±°„ÄÇÂΩì CSS ÂèëÁîüÂèòÂåñÔºàstyle ÂèëÁîüÂèòÂåñÔºâÂ∞±‰ºöË∞ÉÁî® recalcStyleÔºårecalcStyle Ë∞ÉÁî® Element::StyleForRenderÔºåElement::StyleForRender Ë∞ÉÁî® styleForElement„ÄÇ styleForElement ËøõË°å CSS ÈÄâÊã©ÂíåÂåπÈÖçÂÖ∑‰Ωì‰ª£Á†ÅÂÆûÁé∞Â¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425//‰øùÂ≠ò elementinitElement(element);initForStyleResolve(element, defaultParent); .... //ËßÑÂàôÂåπÈÖç MatchResult matchResult; if (matchingBehavior == MatchOnlyUserAgentRules) matchUARules(matchResult); else matchAllRules(matchResult, matchingBehavior != MatchAllRulesExcludingSMIL); //Â∞ÜËßÑÂàôÂíå element ÂÅöÊò†Â∞ÑapplyMatchedProperties(matchResult, element);//matchUARulesvoid StyleResolver::matchUARules(MatchResult&amp; result, RuleSet* rules) { m_matchedRules.clear(); result.ranges.lastUARule = result.matchedProperties.size() - 1; //Êî∂ÈõÜÂåπÈÖçËßÑÂàô collectMatchingRules(rules, result.ranges.firstUARule, result.ranges.lastUARule, false); //ËßÑÂàôÊéíÂ∫è sortAndTransferMatchedRules(result); } RuleSetmatchUARules ÁöÑ RuleSet ‰ª£Ë°® CSS ËßÑÂàôÔºåÊØîÂ¶Ç 1p { background : red; } RuleSet ÁöÑÊàêÂëòÂèòÈáè 12345678class RuleSet ... {.....AtomRuleMap m_idRules;AtomRuleMap m_classRules;AtomRuleMap m_tagRules;AtomRuleMap m_shadowPseudoElementRules;...}; sortAndTransferMatchedRules ÊòØ‰∏∫‰∫Ü‰øùËØÅÊ≠£Á°ÆÁöÑÂåπÈÖçÈ°∫Â∫è„ÄÇ RuleSet Êù•Ëá™ÊµèËßàÂô®ÂÆö‰πâÁöÑÈªòËÆ§ RuleSetÔºå‰πüÂèØÊù•Ëá™ÂÜôÈ°µÈù¢ÂÆö‰πâÁöÑ Author RuleSetÔºåÂØπ‰∫é Element ËøòÊúâËá™Ë∫´ÁöÑËßÑÂàô„ÄÇÂè™ÊúâÁªßÊâø StyledElement ÁöÑÂÜÖËÅî CSS ÁöÑ Element ÊâçËÉΩÂ§üÊúâ RuleSet„ÄÇÂÆûÁé∞ÊòØÂú® StyledElement::rebuildPresentationAttributeStyle ÈáåÂÆûÁé∞ÁöÑ„ÄÇ 1234567891011121314151617181920212223void StyledElement::rebuildPresentationAttributeStyle() { ..... RefPtr&lt;StylePropertySet&gt; style; if (cacheHash &amp;&amp; cacheIterator-&gt;value) { style = cacheIterator-&gt;value-&gt;value; presentationAttributeCacheCleaner().didHitPresentationAttributeCache(); } else { style = StylePropertySet::create(isSVGElement() ? SVGAttributeMode : CSSQuirksMode); unsigned size = attributeCount(); for (unsigned i = 0; i &lt; size; ++i) { const Attribute* attribute = attributeItem(i); collectStyleForPresentationAttribute(*attribute, style.get()); } } // ImmutableElementAttributeData doesn&apos;t store presentation attribute style, so make sure we have a MutableElementAttributeData. ElementAttributeData* attributeData = mutableAttributeData(); attributeData-&gt;m_presentationAttributeStyleIsDirty = false; attributeData-&gt;setPresentationAttributeStyle(style-&gt;isEmpty() ? 0 : style); .... ÂÖ≥‰∫é AuthorStyle Áî® StyleResolver::m_authorStyle Êù•‰øùÂ≠ò html ÈáåÊâÄÊúâ style tag Âíå link ÁöÑÂ§ñÈÉ® css„ÄÇÂΩì CSS Ë¢´ÊîπÂèòÊàñËÄÖÈ°µÈù¢Â§ßÂ∞èÂèòÂåñÊó∂‰ºöË∞ÉÁî® Document::styleResolverChanged ÂáΩÊï∞ÔºåÊé•ÁùÄË∞ÉÁî® DocumentStyleCollection::updateActiveStyleSheetsÔºåÊúÄÂêéË∞ÉÁî® StyleResolver::appendAuthorStyleSheets„ÄÇ Render tree Âíå DOM tree ÂÅöÂØπÂ∫îÂÖ∂ÂÆûÂπ∂‰∏çÊòØ‰∏Ä‰∏ÄÂØπÂ∫îÁöÑÔºåÊØîÂ¶ÇËØ¥ head Ê†áÁ≠æÊàñËÄÖ display Â±ûÊÄß‰∏∫ none ÁöÑÂ∞±‰∏ç‰ºöÂú® Render tree ‰∏≠„ÄÇ Êúâ‰∫õ render object ÊúâÂØπÂ∫îÁöÑ DOM nodeÔºå‰ΩÜÊòØ‰∏çÂú® tree ÁöÑÁõ∏Âêå‰ΩçÁΩÆÔºåÊØîÂ¶Ç floats Âíå absolutely position ÁöÑÂÖÉÁ¥†Ôºå‰ªñ‰ª¨‰ºöÊîæÂú® tree ÁöÑÂÖ∂ÂÆÉÂú∞ÊñπÔºå‰ºöÊò†Ê†πÊçÆËÆæÁΩÆÁöÑ frame Áõ¥Êé•Â∞ÑÂà∞ÂØπÂ∫îÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶Ç‰∏ãÂõæÔºåËôöÁ∫øË°®Á§∫‰ªñ‰ª¨ËÉΩÂ§üÂØπÂ∫îÁöÑÔºö ‰∏äÂõæÂèØ‰ª•ÁúãÂà∞‰∏ÄËà¨ÁöÑ Element ÊØîÂ¶Ç HTMLBodyElement Âíå HTMLDivElement ÂØπÂ∫îÁöÑÈÉΩÊòØ RenderBlock„ÄÇ ÊûÑÂª∫ Render Tree ÁöÑÊµÅÁ®ãËß£ÂÜ≥Ê†∑ÂºèÂíåÂàõÂª∫‰∏Ä‰∏™ renderer Áß∞‰Ωú attachmentÔºåÊØè‰∏™ Element Êúâ‰∏Ä‰∏™ attach ÊñπÊ≥ïÔºåRender Tree ÁöÑÂàõÂª∫Â∞±ÊòØ‰ªéËøôÈáåÂºÄÂßãÔºåattachment ÊòØÂêåÊ≠•ÁöÑÔºåElement ËäÇÁÇπÊèíÂÖ• DOM tree ‰ºöË∞ÉÁî®Êñ∞ node ÁöÑ attach ÊñπÊ≥ï„ÄÇÂú®Â§ÑÁêÜ html Âíå body Ê†áÁ≠æÊó∂‰ºöÂàõÂª∫ Render Tree ÁöÑ root„ÄÇroot Render Object ÂØπÂ∫î‰∫Ü CSS ÈáåÁöÑ containing blockÔºåtop block ‰ºöÂåÖÂê´ÊâÄÊúâÁöÑÂÖ∂ÂÆÉ block„ÄÇRender Object ÈÄöËøá RenderObject::CreateObject ÈùôÊÄÅÊñπÊ≥ïÂàõÂª∫ÔºåÂàõÂª∫Êó∂‰ºöËÆ°ÁÆóÂá∫ Element ÁöÑ CSSStyle„ÄÇ ÊµèËßàÂô® window ÊòæÁ§∫Âå∫Âüü viewportÔºåÂú® WebKit ÈáåÂè´ÂÅö RenderView„ÄÇ RenderLayer TreeRenderLayer Tree ÊòØÂü∫‰∫é RenderObject Tree Âª∫Á´ãÁöÑÔºåÂÆÉ‰ª¨ÊòØÂ§ö‰∏™ RenderObject ÂØπÂ∫î‰∏Ä‰∏™ RenderLayer ÁöÑÂÖ≥Á≥ª„ÄÇÂú®ÂàõÂª∫ÂÆå RenderObject Tree WebKit Ëøò‰ºöÂàõÂª∫ RenderLayer TreeÔºåÊ†πËäÇÁÇπÊòØ RenderView ÂÆû‰æãÔºåÊ†πÊçÆ‰∏Ä‰∫õÊù°‰ª∂Êù•Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ RenderLayer ÂØπË±°ÔºåÂÜçËÆæÁΩÆ RenderLayer ÂØπË±°ÁöÑÁà∂ÂØπË±°ÂíåÂÖÑÂºüÂØπË±°„ÄÇRenderLayer ÈúÄË¶ÅÊª°Ë∂≥‰∏ÄÂÆöÊù°‰ª∂Êâç‰ºöÂàõÂª∫Ôºå‰∏ãÈù¢ÊòØÈÇ£‰∫õÈúÄË¶ÅÂàõÂª∫Êñ∞ RenderLayer ÂØπË±°ÁöÑÊù°‰ª∂Ôºö HTMLElement ËäÇÁÇπÂØπÂ∫îÁöÑ RenderBlock ËäÇÁÇπ„ÄÇ ÊúâËÆæÁΩÆ relativeÔºåabsoluteÔºåtransform ÁöÑ CSS position Â±ûÊÄßÁöÑ„ÄÇ ÈÄèÊòéÊïàÊûúÁöÑ RenderObject ËäÇÁÇπ„ÄÇ ËäÇÁÇπÊúâ overflowÔºå apha mask ÊàñÂèçÂ∞ÑÊïàÊûúÁöÑ RenderObject ËäÇÁÇπ„ÄÇ ËÆæÁΩÆ‰∫Ü CSS filter Â±ûÊÄßÁöÑËäÇÁÇπ„ÄÇ ‰ΩøÁî® Canvas Êàñ WebGL ÁöÑ RenderObject ËäÇÁÇπ„ÄÇ Video ËäÇÁÇπÂØπÂ∫îÁöÑ RenderObject ËäÇÁÇπ„ÄÇ RenderObject Tree Âíå RenderLayer Tree ÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæÔºöÊé•‰∏ãÊù•ÁúãÁúã RenderObject Tree Âíå RenderLayer Tree ÁöÑÂ∏ÉÂ±Ä‰ø°ÊÅØÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö style ËÆ°ÁÆóÊûÑÂª∫ render tree ÈúÄË¶ÅËÆ°ÁÆóÊØè‰∏™ render object ÁöÑËßÜËßâÁâπÊÄß„ÄÇÊòØÈÄöËøáËÆ°ÁÆóÊØè‰∏™ element ÁöÑ style Â±ûÊÄßÊù•ÂÅöÂà∞ÁöÑ„ÄÇ Ëøô‰∏™Ê†∑ÂºèÂåÖÂê´‰∫ÜÂêÑÁßçÊù•Ê∫êÁöÑ style sheetsÔºåÊúâ inline style element Âíå html ÈáåËßÜËßâÂ±ûÊÄßËÆæÁΩÆÊØîÂ¶Ç bgcolor ËøôÊ†∑ÁöÑÂ±ûÊÄßÔºåÂêéÈù¢Ëøô‰∫õÈÉΩ‰ºöËΩ¨‰∏∫ CSS style ÁöÑÂ±ûÊÄß„ÄÇÊù•Ê∫êËøòÊúâÊµèËßàÂô®ÈªòËÆ§ÁöÑ style sheetsÔºåËøô‰∏™ style sheets ÂèØ‰ª•ÊòØÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ„ÄÇ Êàë‰ª¨ÂÖàÁúãÁúã style ËÆ°ÁÆóÂèØËÉΩ‰ºöÊúâ‰∏Ä‰∫õ‰ªÄ‰πàÊ†∑ÈóÆÈ¢ò Style ÁöÑÊï∞ÊçÆÊòØ‰∏™ÈùûÂ∏∏Â§ßÁöÑÁªìÊûÑÔºåÂõ†‰∏∫ÈáåÈù¢ÊúâÂ§ßÈáèÁöÑ style Â±ûÊÄßËøôÊ†∑‰ºöÊúâÂÜÖÂ≠òÈóÆÈ¢ò„ÄÇ Â¶ÇÊûúÊ≤°Êúâ‰ºòÂåñ‰∏∫ÊØè‰∏™ element Êü•ÊâæÂêàÈÄÇÁöÑËßÑÂàô‰ºöÂØºËá¥ÊÄßËÉΩÈóÆÈ¢ò„ÄÇ‰∏∫ÊØè‰∏™ element Âà∞Êï¥‰∏™ËßÑÂàôÂàóË°®Êü•ÊâæÂêàÈÄÇÁöÑËßÑÂàôÊòØ‰∏™Â∑®Â§ßÊ∂àËÄó„ÄÇSelectors ÂèØËÉΩ‰ºöÊúâ‰∏™ÂæàÂ§çÊùÇÁöÑÁªìÊûÑÔºåÊØîÂ¶Ç div div div div {‚Ä¶} ËøôÊ†∑ÁöÑËØùÂåπÈÖçÊó∂‰ºöÊúâÂæàÂ§öÈÅçÂéÜÊù•ÂåπÈÖç„ÄÇ Â∫îÁî®ËßÑÂàôÊ∂âÂèäÂà∞ÊØîËæÉÂ§çÊùÇÁöÑÂ±ÇÁ∫ßËßÑÂàô„ÄÇ ‰∏ãÈù¢Êù•ËØ¥‰∏ãÂ¶Ç‰ΩïËß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢ò ÂÖ±‰∫´ style Êï∞ÊçÆWebKit ÁöÑ nodes ÊòØ style objectsÔºàRenderStyleÔºâÔºåËøô‰∫õ objects ÂèØ‰ª•Ë¢´ nodes Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÂÖ±‰∫´ÔºåËøô‰∫õ nodes ÂèØ‰ª•ÊòØÂÖÑÂºüËäÇÁÇπÊàñË°®ÂÖÑÂºüËäÇÁÇπ„ÄÇÊúâ‰∏ãÈù¢Ëøô‰∫õÊÉÖÂÜµÊòØÂèØ‰ª• style ÂÖ±‰∫´ÁöÑ element ÂøÖÈ°ªÊúâÁõ∏ÂêåÁöÑÈº†Ê†áÁä∂ÊÄÅ ÈÉΩÊ≤°Êúâ id tag ÂêçËÉΩÂåπÈÖç‰∏ä class Â±ûÊÄßËÉΩÂåπÈÖç‰∏ä ‰∏ÄÁªÑÊò†Â∞ÑÁöÑÂ±ûÊÄßÊòØÁõ∏ÂêåÁöÑ ÈìæÊé•Áä∂ÊÄÅËÉΩÂåπÈÖç‰∏ä focus Áä∂ÊÄÅËÉΩÂåπÈÖç‰∏ä ‰ªª‰Ωï element ÈÉΩ‰∏ç‰ºöË¢´Â±ûÊÄß selectors ÂΩ±Âìç elements ‰∏çËÉΩÊúâ inline style Â±ûÊÄß ‰∏çË¶Å‰ΩøÁî®ÂÖÑÂºü selectors Rule treeWebKit ‰ºöÊää style objects Âíå DOM ÁöÑ node Áõ∏ÂÖ≥ËÅî„ÄÇÈÄöËøáÊ≠£Á°ÆÁöÑÈ°∫Â∫èÂ∞ÜÊâÄÊúâÈÄªËæëËßÑÂàôÂÄºËΩ¨ÊàêËÆ°ÁÆóÂÄºÔºåÊØîÂ¶ÇÁôæÂàÜÊØî‰ºöË¢´ËΩ¨Êç¢ÊàêÁªùÂØπÂçï‰ΩçÔºårule tree ÂèØ‰ª•‰ΩøËäÇÁÇπ‰πãÈó¥ÂÖ±‰∫´Ëøô‰∫õÂÄºÔºåÈÅøÂÖçÂ§öÊ¨°ËÆ°ÁÆóÔºåÂêåÊó∂ËäÇÁúÅÂÜÖÂ≠ò„ÄÇÊâÄÊúâÂåπÈÖçÁöÑËßÑÂàôÈÉΩ‰ºöÂ≠òÂú®‰∏Ä‰∏™ tree Èáå„ÄÇtree ÁöÑÊúÄ‰∏ãÈù¢ÁöÑ node ÊúâÁùÄÊúÄÈ´òÁöÑ‰ºòÂÖàÁ∫ß„ÄÇRule tree ÊòØÂΩì node style ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊâç‰ºöÂéªÊ†πÊçÆËßÑÂàôËÆ°ÁÆóÁöÑ„ÄÇ ÈÄöËøá‰∏äÂõæÁúãÁúãËÆæÁΩÆ rule tree ÁöÑÂ•ΩÂ§ÑÂêßÔºåÂ¶ÇÊûúÊàë‰ª¨Ë¶ÅÊâæÂà∞ B - E - I ÁöÑËßÑÂàôÊàë‰ª¨ËÉΩÂ§üÁúÅÊéâÂæàÂ§öÂ∑•‰ΩúÔºåÂõ†‰∏∫Êàë‰ª¨Â∑≤ÁªèËÆ°ÁÆó‰∫Ü A - B - E - I„ÄÇ ÂèØÁ°ÆÂÆöÊ†∑ÂºèÂàÜÂà∞ÂêÑ‰∏™ structs Èáå‰∏Ä‰∫õÊ†∑ÂºèÁöÑ‰ø°ÊÅØÊòØÂèØ‰ª•‰∏ÄÂºÄÂßãÂ∞±Á°ÆÂÆöÁöÑÔºåÊØîÂ¶Ç border Âíå color„ÄÇÊâÄÊúâÂ±ûÊÄßÂàÜ‰∏∫ÂèØÁªßÊâøÂíå‰∏çÂèØÁªßÊâø‰∏§ÁßçÔºåÂ¶ÇÊûúÊòØÈúÄË¶ÅÁªßÊâøÈúÄË¶ÅÁâπÂà´ÊåáÂÆöÔºåÈªòËÆ§ÈÉΩÊòØ‰∏çÂèØÁªßÊâøÁöÑ„ÄÇ rule tree Â∏ÆÁùÄÊàë‰ª¨ÁºìÂ≠òÂÖ®ÈÉ®ÁöÑ structsÔºåËøôÊ†∑ÁöÑÂ•ΩÂ§ÑÊòØÂ¶ÇÊûú‰∏ãÈù¢ÁöÑ node Ê≤°ÊúâÂèØÁî®ÁöÑ structÔºåÈÇ£‰πàÂèØ‰ª•‰ΩøÁî®‰∏ä‰∏ÄÁ∫ß node ÁöÑÁºìÂ≠òÈáåÁöÑÊù•Áî®„ÄÇ ‰ΩøÁî® rule tree ËÆ°ÁÆó style contextsÂΩìÁ°ÆÂÆöË¶Å‰∏∫Êüê‰∏™ element ËÆ°ÁÆó style context Êó∂ÔºåÊàë‰ª¨È¶ñÂÖàËÆ°ÁÆó rule tree ÁöÑË∑ØÂæÑÊàñËÄÖ‰ΩøÁî®‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑ„ÄÇÊé•ÁùÄÊàë‰ª¨ÂºÄÂßãÂú®Êàë‰ª¨Êñ∞ÁöÑ style context ÈáåÂ∫îÁî®Ë∑ØÂæÑÈáåÁöÑËßÑÂàôÂéªÂ°´ÂÖÖ structs„ÄÇ ‰ªéË∑ØÂæÑ‰∏ãÈù¢ÁöÑ node ÂºÄÂßãÔºåÁÑ∂ÂêéÂæÄ‰∏äÁõ¥Âà∞ struct ÂÆåÊàê„ÄÇÂ¶ÇÊûú struct Ê≤°ÊúâÁ¨¶ÂêàÁöÑ rule nodeÔºåÈÇ£‰πàÂæÄ rule tree ‰∏äÈù¢ node ÊâæÔºåÁü•ÈÅìÊâæÂà∞Â∞±ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÔºåËøôÊ†∑Â∞±ÊòØË¢´‰ºòÂåñ‰∫ÜÔºåÊï¥‰∏™ struct ÈÉΩÊòØÂÖ±‰∫´ÁöÑ„ÄÇ Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞‰∏Ä‰∏™‰∏∫Ëøô‰∏™ struct ÁöÑ rule node ÂÆö‰πâÔºåÈÇ£‰πàÂÖàÊ£ÄÊü•ÊòØÂê¶ÊòØÂèØÁªßÊâøÁöÑÔºåÂ¶ÇÊûúÊòØÂ∞±‰ΩøÁî®Áà∂ struct ÁöÑ context„ÄÇÂ¶ÇÊûúËøô‰∏™Êù°‰ª∂‰πüÊ≤°Êª°Ë∂≥ÈÇ£‰πàÂ∞±‰ΩøÁî®ÈªòËÆ§ÁöÑÂÄº„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™ element ÊúâÂÖÑÂºüËäÇÁÇπÊåáÂêëÁõ∏ÂêåÁöÑ tree nodeÔºåÈÇ£‰πàÂÖ®ÈÉ® style context ÂèØ‰ª•Ë¢´ÂÖ±‰∫´„ÄÇ Áúã‰∏™‰æãÂ≠ê 123456789101112&lt;html&gt; &lt;body&gt; &lt;div class=\"err\" id=\"div1\"&gt; &lt;p&gt; this is a &lt;span class=\"big\"&gt; big error &lt;/span&gt; this is also a &lt;span class=\"big\"&gt; very big error&lt;/span&gt; error &lt;/p&gt; &lt;/div&gt; &lt;div class=\"err\" id=\"div2\"&gt;another error&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ‰∏ãÈù¢ÊòØ CSS ÁöÑÂÆö‰πâ 123456div {margin:5px;color:black}.err {color:red}.big {margin-top:3px}div span {margin-bottom:4px}#div1 {color:blue}#div2 {color:green} ËøôÈáåÊúâ‰∏§‰∏™ structs ÈúÄË¶ÅÂ°´ÂÖÖÔºå color struct Âíå margin struct„ÄÇcolor struct Âè™ÂåÖÂê´‰∏Ä‰∏™ÂÄºÔºå margin struct ÊúâÂõõ‰∏™„ÄÇ‰∏ãÈù¢ÊòØ rule tree context treeÔºö ÂÅáËÆæÂà∞Á¨¨‰∫å‰∏™ div Ê†áÁ≠æÊó∂ÔºåÊàë‰ª¨‰ºöÂàõÂª∫‰∏Ä‰∏™ style context ÁªôËøô‰∏™ node Âπ∂‰∏îÂ°´ÂÖÖ style struct„ÄÇÊàë‰ª¨ÊâæÂà∞ 1Ôºå2Âíå6Ëøô‰∏™ rule ÊòØÊª°Ë∂≥ÁöÑÔºåËÄå‰∏îÂú® rule tree ÈáåÂ∑≤ÁªèÂ≠òÂú®‰∫Ü‰∏Ä‰∏™ËøôÊ†∑ÁöÑË∑ØÂæÑÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊää F Ê∑ªÂä†Âà∞Ëøô‰∏™ node Èáå„ÄÇËøôÊ†∑ÂΩ¢Êàê‰∏Ä‰∏™ context tree Êù•‰øùÂ≠òËøô‰∫õÂØπÂ∫îÂÖ≥Á≥ª„ÄÇ Áé∞Âú®ÈúÄË¶ÅÂ°´ÂÖÖ style structÔºåÂÖà‰ªé margin struct ÂºÄÂßãÔºåÊØîÂ¶Ç rule tree ÈáåÊúÄÂêé node F Ê≤°ÊúâÊ∑ªÂä†Âà∞ margin struct ÈáåÔºåÊàë‰ª¨ÂèØ‰ª•ÂæÄ rule tree ÁöÑ‰∏äÈù¢ÊâæÔºåÊâæÂà∞Âπ∂‰∏î‰ΩøÁî®‰πãÔºåÊúÄÂêéÊàë‰ª¨ÊâæÂà∞ node B Ëøô‰∏™ÊòØÊúÄËøëÁöÑ‰∏Ä‰∏™Êúâ margin struct ÁöÑ node„ÄÇ Â∑≤ÁªèÂÆö‰πâ‰∫Ü color structÔºåÈÇ£‰πàÂ∞±‰∏çËÉΩ‰ΩøÁî®ÁºìÂ≠òÁöÑ structÔºåËøôÊ†∑Â∞±‰∏çÁî®ÂæÄ rule tree ‰∏äÁ∫ß node ÂéªÊâæÔºåÊé•ÁùÄÂ∞±ÊääÂÄºËΩ¨Êàê RGB ‰ªÄ‰πàÁöÑÂπ∂‰∏îÁºìÂ≠òÂà∞Ëøô‰∏™ node Èáå„ÄÇ ÂØπ‰∫éÁ¨¨‰∫å‰∏™ span elementÔºåÂÆÉ‰ºöÊåáÂêë rule GÔºåÂ∞±ÂÉèÂâç‰∏Ä‰∏™ span ‰∏ÄÊ†∑„ÄÇÂ¶ÇÊûúÂÖÑÂºü node ÈÉΩÊòØÊåáÂêëÂêå‰∏Ä‰∏™ rule nodeÔºåÈÇ£‰πàÂÆÉ‰ª¨ÊòØÂèØ‰ª•ÂÖ±‰∫´Êï¥‰∏™ style context ÁöÑ„ÄÇ Â¶ÇÊûúÊòØÁªßÊâøÁöÑ struct ‰ºöÂú® context tree ‰∏äËøõË°åÁºìÂ≠òÔºåcolor Â±ûÊÄßÊòØÂèØÁªßÊâøÁöÑ„ÄÇ ÊØîËæÉÂÆπÊòìÂåπÈÖçÁöÑ rules‰∏ãÈù¢ÊòØ‰∏çÂêåÁöÑ style rules ÁöÑÊù•Ê∫êÔºö CSS rulesÔºåÊù•Ëá™‰∫é style sheets ÊàñËÄÖÂú® style elements Èáå 1p {color:blue} Inline style Â±ûÊÄß 1&lt;p style=\"color:blue\" /&gt; HTML ËßÜËßâÂ±ûÊÄß 1&lt;p bgcolor=\"blue\"&gt; ÂêéÈù¢‰∏§‰∏™Â±û‰∫éÂÆπÊòìÂåπÈÖç elementÔºåÂèØ‰ª•‰ΩøÁî® element ‰Ωú‰∏∫ map ÁöÑ key„ÄÇËß£Êûê style sheet ÂêéÔºåÈÄöËøá selector rules ‰ºöÊ∑ªÂä†‰∏Ä‰∫õ has maps„ÄÇÊúâ id ÁöÑ mapÔºåÊúâ class name ÁöÑ mapÔºåËøòÊúâ tag name ÁöÑ map„ÄÇÂ¶ÇÊûú selector ÊòØ id ÈÇ£‰πà rule ‰ºöÊ∑ªÂä†Âà∞ id map Èáå„ÄÇ Â¶ÇÊûúÊòØ class name ÈÇ£‰πà‰ºöÊ∑ªÂä†Âà∞ class map Èáå„ÄÇ Ëøô‰∏™Êìç‰ΩúÊõ¥ÂÆπÊòìÂåπÈÖç rule„ÄÇÂÆåÂÖ®Ê≤°ÂøÖË¶ÅÂéªÊü•ÊâæÊØè‰∏™Â£∞ÊòéÔºåÊàë‰ª¨ÂèØ‰ª•‰ªéÂØπÂ∫îÁöÑ element ÁöÑ map ÈáåÊèêÂèñÁõ∏ÂÖ≥ÁöÑ rule„ÄÇ ‰∏ãÈù¢‰∏æ‰∏™‰æãÂ≠ê 123p.error {color:red}#messageDiv {height:50px}div {margin:5px} Á¨¨‰∏Ä‰∏™ rule ‰ºöË¢´Âä†Âà∞ class map Èáå„ÄÇÁ¨¨‰∫å‰∏™‰ºöÂä†ÂÖ•Âà∞ id map ÈáåÔºåÁ¨¨‰∏â‰∏™‰ºöË¢´Ê∑ªÂä†Âà∞ tag map Èáå„ÄÇ ÂØπ‰∫é‰∏ãÈù¢ÁöÑ HTML 12&lt;p class=\"error\"&gt;an error occurred &lt;/p&gt;&lt;div id=\" messageDiv\"&gt;this is a message&lt;/div&gt; Êàë‰ª¨‰ºöÂÖàËØïÁùÄÊâæ p Ëøô‰∏™ element ÁöÑ rulesÔºåÂú® class map ÈáåËÉΩÊâæÂà∞ error Ëøô‰∏™ key ÈáåÊúâ rule p.error„ÄÇdiv Ëøô‰∏™ element ÂèØ‰ª•Âú® id map Âíå tag map ÈáåÊâæÂà∞„ÄÇ‰∏ãÈù¢ÁúãÁúã div ÁöÑËøô‰∏™ rule 1table div {margin:5px} selector ÈÉΩÊòØ‰ªéÂè≥Âà∞Â∑¶Êù•Êü•ÊâæÁöÑÔºåÂÖàÂú® tag map ÈáåÊâæ divÔºåÁÑ∂ÂêéÂÜçÁúãÁúãÂ∑¶ËæπÊòØ table tagÔºåÊâÄ‰ª•‰∏çÂêªÂêà„ÄÇ Style sheet ÁöÑ cascade ÊéíÂ∫è‰∏Ä‰∏™ style Â±ûÊÄßÂèØ‰ª•Ë¢´ÂÆö‰πâÂú®Â§ö‰∏™ style sheets ÈáåÔºåÈÇ£‰πàÂ∫îÁî® rules ÁöÑÈ°∫Â∫èÂ∞±ÊòæÂæóÈùûÂ∏∏ÁöÑÈáçË¶ÅÔºåÂú® CSS ÁöÑÂÆö‰πâÈáåÊääËøô‰∏™È°∫Â∫èÂè´ÂÅö cascade ÊéíÂ∫èÔºåÊÑèÊÄùÊòØ‰ªé‰ΩéÂà∞È´ò„ÄÇ ÊµèËßàÂô®ÁöÑËÆæÁΩÆ Áî®Êà∑ÁöÑËÆæÁΩÆ ÁΩëÈ°µÈáåÊôÆÈÄöÁöÑËÆæÁΩÆ ÁΩëÈ°µÈáåÈáçË¶ÅÁöÑËÆæÁΩÆ Áî®Êà∑ÈáçË¶ÅÁöÑËÆæÁΩÆ CSS specificationselector ÁöÑ specifity Âú® w3c ÈáåÊúâÂÆö‰πâ https://www.w3.org/TR/CSS2/cascade.html#specificity ËÆ°ÁÆóÊñπÊ≥ïÂ¶Ç‰∏ã style attribute Êï∞Èáè =a ID attribute Êï∞Èáè =b ÂÖ∂ÂÆÉÁöÑ attribute Âíå pseudo-classes Êï∞Èáè =c element names Âíå pseudo-element Êï∞Èáè =d ‰∏æ‰∏™‰æãÂ≠ê 12345678910111213141516171819 * {} /* a=0 b=0 c=0 d=0 -&gt; specificity = 0,0,0,0 */ li {} /* a=0 b=0 c=0 d=1 -&gt; specificity = 0,0,0,1 */ li:first-line {} /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */ ul li {} /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */ ul ol+li {} /* a=0 b=0 c=0 d=3 -&gt; specificity = 0,0,0,3 */ h1 + *[rel=up]{} /* a=0 b=0 c=1 d=1 -&gt; specificity = 0,0,1,1 */ ul ol li.red {} /* a=0 b=0 c=1 d=3 -&gt; specificity = 0,0,1,3 */ li.red.level {} /* a=0 b=0 c=2 d=1 -&gt; specificity = 0,0,2,1 */ #x34y {} /* a=0 b=1 c=0 d=0 -&gt; specificity = 0,1,0,0 */ style=\"\" /* a=1 b=0 c=0 d=0 -&gt; specificity = 1,0,0,0 */&lt;HEAD&gt;&lt;STYLE type=\"text/css\"&gt; #x97z { color: red }&lt;/STYLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;P ID=x97z style=\"color: green\"&gt;&lt;/BODY&gt; ‰ªé‰æãÂ≠êÂèØ‰ª•ÁúãÂá∫ p element ÁöÑ color ‰ºöÊòØ greenÔºåÂõ†‰∏∫ style attribute ‰ºöË¶ÜÁõñ Style element ÈáåÁöÑËÆæÁΩÆÔºåÂõ†‰∏∫ÂÆÉÊúâÊõ¥È´òÁöÑ specificity„ÄÇ Rules ÊéíÂ∫èËøô‰∫õ rules ÂåπÈÖçÂêéÂ∞±ÈúÄË¶ÅÂØπÂÖ∂ÊéíÂ∫è‰∫ÜÔºåWebKit ‰ΩøÁî®ÁöÑÊòØÂÜíÊ≥°ÊéíÂ∫èÔºåÈÄöËøáÈáçÂÜô &gt; Êìç‰ΩúÁ¨¶ 123456static bool operator &gt;(CSSRuleData&amp; r1, CSSRuleData&amp; r2){ int spec1 = r1.selector()-&gt;specificity(); int spec2 = r2.selector()-&gt;specificity(); return (spec1 == spec2) : r1.position() &gt; r2.position() : spec1 &gt; spec2; } Layout Â∏ÉÂ±ÄÂΩì renderer ÂàõÂª∫ÂÆåÂπ∂Ê∑ªÂä†Âà∞ tree ÈáåÊó∂ÊòØÊ≤°Êúâ‰ΩçÁΩÆÂíåÈ´òËøô‰∫õ‰ø°ÊÅØÁöÑÔºåÈúÄË¶ÅËÆ°ÁÆóÔºåWebKit ËÆ°ÁÆó‰ΩçÁΩÆÂ§ßÂ∞èÁ≠â‰ø°ÊÅØÁöÑËøáÁ®ãÁß∞‰∏∫Â∏ÉÂ±ÄËÆ°ÁÆó„ÄÇ HTML ‰ΩøÁî®ÁöÑÊòØÊµÅÂºèÂ∏ÉÂ±ÄÊ®°ÂûãÔºåÈÇ£‰πàÂ∞±Ë°®Á§∫Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ÄÊ¨°Â∞±ÂèØ‰ª•ÊåâÁÖß‰ªéÂ∑¶Âà∞Âè≥‰ªéÈ°∂Âà∞Â∫ïÁÆóÂá∫Â∏ÉÂ±ÄÈúÄË¶ÅÁöÑÂÄº„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØ HTML tables ÈúÄË¶ÅÁöÑÊ¨°Êï∞ÂèØËÉΩ‰∏ç‰ªÖ‰∏ÄÊ¨°„ÄÇ Layout ÊòØ‰∏™ÈÄíÂΩíÁöÑËøáÁ®ãÔºå‰ª• FrameView::layout ‰∏∫Ëµ∑ÂßãÔºåË∞ÉÁî® Render Tree Ê†πËäÇÁÇπÁöÑ layoutÔºåÂØπÂ∫î HTML ÈáåÁöÑ elementÔºåLayout ÊåÅÁª≠ÈÄíÂΩí frame hierarchy ËÆ°ÁÆóÊØè‰∏™ renderer ÁöÑÂá†‰Ωï‰ø°ÊÅØ„ÄÇroot ÁöÑ position ÊòØ0,0ÔºåÊääÊµèËßàÂô®ÈáåÂèØËßÅÁöÑÈÉ®ÂàÜÂ∞∫ÂØ∏Âè´ÂÅö viewport„ÄÇÊØè‰∏™ renderer ÈÉΩÊúâ layout Êàñ reflow ÊñπÊ≥ïÔºåÊØè‰∏™ renderer ÈÉΩ‰ºöÂéªË∞ÉÁî®Â≠êËßÜÂõæÁöÑ layout ÊñπÊ≥ï„ÄÇFrameView::layout ÂèØ‰ª•Ë¢´Â∏ÉÂ±Ä WebViewCore::layout ÊñπÊ≥ïËß¶Âèë„ÄÇ Layout Â§ÑÁêÜËøáÁ®ãÂÆåÊàê‰∏äÈù¢ÈÇ£‰∫õËøáÁ®ãÂêéÂ∞±‰ºöÂºÄÂßãÂ∏ÉÂ±ÄÔºå‰∏äÈù¢ÁöÑËøáÁ®ãËææÂà∞ÂºÄÂßãÂ∏ÉÂ±Ä FrameView::layout ÁöÑÊñπÊ≥ïÂ†ÜÊ†àÂ¶Ç‰∏ã 12345678910111213141516FrameView:: layout( bool allowSubtree) // Ê†à È°∂ Document:: implicitClose() FrameLoader:: checkCallImplicitClose() FrameLoader:: checkCompleted() FrameLoader:: finishedParsing() Document:: finishedParsing() HTMLParser:: finished() HTMLTokenizer:: end() HTMLTokenizer:: finish() Document:: finishParsing() FrameLoader:: endIfNotLoadingMainResource() FrameLoader:: end() DocumentLoader:: finishedLoading() FrameLoader:: finishedLoading() MainResourceLoader:: didFinishLoading() ResourceLoader:: didFinishLoading( WebCore:: ResourceHandle * h) layout ‰ºöÂÖàÊöÇÂÅú layout ÂÆöÊó∂Âô®ÁöÑÂÆûÁé∞ÔºåÁÑ∂ÂêéÊõ¥Êñ∞Ê†∑ÂºèÔºåËé∑ÂèñÂà∞ RenderView ÁÑ∂ÂêéË∞ÉÁî®ÂÆÉÁöÑ layout ÊñπÊ≥ïÂºÄÂßãÂ∏ÉÂ±ÄÔºåÂÖ∑‰ΩìÁõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313void FrameView::layout(bool allowSubtree){ ASSERT_WITH_SECURITY_IMPLICATION(!frame().document()-&gt;inRenderTreeUpdate()); LOG(Layout, &quot;FrameView %p (%dx%d) layout, main frameview %d, allowSubtree=%d&quot;, this, size().width(), size().height(), frame().isMainFrame(), allowSubtree); //Âà§Êñ≠ÊòØÂê¶Â∑≤Âú® layout ËøáÁ®ã‰∏≠ÔºåÈÅøÂÖçÂ§öÊ¨° layout if (isInRenderTreeLayout()) { LOG(Layout, &quot; in layout, bailing&quot;); return; } if (layoutDisallowed()) { LOG(Layout, &quot; layout is disallowed, bailing&quot;); return; } // Protect the view from being deleted during layout (in recalcStyle). Ref&lt;FrameView&gt; protectedThis(*this); // Many of the tasks performed during layout can cause this function to be re-entered, // so save the layout phase now and restore it on exit. SetForScope&lt;LayoutPhase&gt; layoutPhaseRestorer(m_layoutPhase, InPreLayout); // Every scroll that happens during layout is programmatic. SetForScope&lt;bool&gt; changeInProgrammaticScroll(m_inProgrammaticScroll, true); bool inChildFrameLayoutWithFrameFlattening = isInChildFrameWithFrameFlattening(); if (inChildFrameLayoutWithFrameFlattening) { if (!m_frameFlatteningViewSizeForMediaQuery) { LOG_WITH_STREAM(MediaQueries, stream &lt;&lt; &quot;FrameView &quot; &lt;&lt; this &lt;&lt; &quot; snapshotting size &quot; &lt;&lt; ScrollView::layoutSize() &lt;&lt; &quot; for media queries&quot;); m_frameFlatteningViewSizeForMediaQuery = ScrollView::layoutSize(); } startLayoutAtMainFrameViewIfNeeded(allowSubtree); //Ëé∑Âèñ root„ÄÇËøô‰∏™ root Â∞±ÊòØ RenderView ÂØπË±° RenderElement* root = m_layoutRoot ? m_layoutRoot : frame().document()-&gt;renderView(); if (!root || !root-&gt;needsLayout()) return; } TraceScope tracingScope(LayoutStart, LayoutEnd);#if PLATFORM(IOS) if (updateFixedPositionLayoutRect()) allowSubtree = false;#endif //‰πüÊòØÈÅøÂÖçÂ§öÊ¨°Ëß¶ÂèëÔºå‰ºöÊää layoutTimer ÂÖàÂÅúÊ≠¢ m_layoutTimer.stop(); m_delayedLayout = false; m_setNeedsLayoutWasDeferred = false; //Êàë‰ª¨‰∏çÂ∫îËØ•Âú® painting Êó∂ËøõÂÖ• layout ASSERT(!isPainting()); if (isPainting()) return; InspectorInstrumentationCookie cookie = InspectorInstrumentation::willLayout(frame()); AnimationUpdateBlock animationUpdateBlock(&amp;frame().animation()); if (!allowSubtree &amp;&amp; m_layoutRoot) convertSubtreeLayoutToFullLayout(); ASSERT(frame().view() == this); ASSERT(frame().document()); Document&amp; document = *frame().document(); ASSERT(document.pageCacheState() == Document::NotInPageCache); //ÂØπÊ†∑ÂºèÂÖàËøõË°åÊõ¥Êñ∞ { SetForScope&lt;bool&gt; changeSchedulingEnabled(m_layoutSchedulingEnabled, false); if (!m_nestedLayoutCount &amp;&amp; !m_inSynchronousPostLayout &amp;&amp; m_postLayoutTasksTimer.isActive() &amp;&amp; !inChildFrameLayoutWithFrameFlattening) { // This is a new top-level layout. If there are any remaining tasks from the previous // layout, finish them now. SetForScope&lt;bool&gt; inSynchronousPostLayoutChange(m_inSynchronousPostLayout, true); performPostLayoutTasks(); } m_layoutPhase = InPreLayoutStyleUpdate; // Viewport-dependent media queries may cause us to need completely different style information. auto* styleResolver = document.styleScope().resolverIfExists(); if (!styleResolver || styleResolver-&gt;hasMediaQueriesAffectedByViewportChange()) { LOG(Layout, &quot; hasMediaQueriesAffectedByViewportChange, enqueueing style recalc&quot;); document.styleScope().didChangeStyleSheetEnvironment(); // FIXME: This instrumentation event is not strictly accurate since cached media query results do not persist across StyleResolver rebuilds. InspectorInstrumentation::mediaQueryResultChanged(document); } document.evaluateMediaQueryList(); // If there is any pagination to apply, it will affect the RenderView&apos;s style, so we should // take care of that now. applyPaginationToViewport(); // Always ensure our style info is up-to-date. This can happen in situations where // the layout beats any sort of style recalc update that needs to occur. document.updateStyleIfNeeded(); // If there is only one ref to this view left, then its going to be destroyed as soon as we exit, // so there&apos;s no point to continuing to layout if (hasOneRef()) return; // Close block here so we can set up the font cache purge preventer, which we will still // want in scope even after we want m_layoutSchedulingEnabled to be restored again. // The next block sets m_layoutSchedulingEnabled back to false once again. } m_layoutPhase = InPreLayout; RenderLayer* layer = nullptr; bool subtree = false; RenderElement* root = nullptr; ++m_nestedLayoutCount; { SetForScope&lt;bool&gt; changeSchedulingEnabled(m_layoutSchedulingEnabled, false); autoSizeIfEnabled(); //ÈáçÊñ∞ËÆæÁΩÆ RenderView ÂØπË±°ÔºåÂáÜÂ§áÂºÄÂßã layout root = m_layoutRoot ? m_layoutRoot : document.renderView(); if (!root) return; subtree = m_layoutRoot; if (!m_layoutRoot) { auto* body = document.bodyOrFrameset(); if (body &amp;&amp; body-&gt;renderer()) { if (is&lt;HTMLFrameSetElement&gt;(*body) &amp;&amp; !frameFlatteningEnabled()) { body-&gt;renderer()-&gt;setChildNeedsLayout(); } else if (is&lt;HTMLBodyElement&gt;(*body)) { if (!m_firstLayout &amp;&amp; m_size.height() != layoutHeight() &amp;&amp; body-&gt;renderer()-&gt;enclosingBox().stretchesToViewport()) body-&gt;renderer()-&gt;setChildNeedsLayout(); } }#if !LOG_DISABLED if (m_firstLayout &amp;&amp; !frame().ownerElement()) LOG(Layout, &quot;FrameView %p elapsed time before first layout: %.3fs\\n&quot;, this, document.timeSinceDocumentCreation().value());#endif } m_needsFullRepaint = !subtree &amp;&amp; (m_firstLayout || downcast&lt;RenderView&gt;(*root).printing()); if (!subtree) { ScrollbarMode hMode; ScrollbarMode vMode; calculateScrollbarModesForLayout(hMode, vMode); if (m_firstLayout || (hMode != horizontalScrollbarMode() || vMode != verticalScrollbarMode())) { if (m_firstLayout) { setScrollbarsSuppressed(true); m_firstLayout = false; m_firstLayoutCallbackPending = true; m_lastViewportSize = sizeForResizeEvent(); m_lastZoomFactor = root-&gt;style().zoom(); // Set the initial vMode to AlwaysOn if we&apos;re auto. if (vMode == ScrollbarAuto) setVerticalScrollbarMode(ScrollbarAlwaysOn); // This causes a vertical scrollbar to appear. // Set the initial hMode to AlwaysOff if we&apos;re auto. if (hMode == ScrollbarAuto) setHorizontalScrollbarMode(ScrollbarAlwaysOff); // This causes a horizontal scrollbar to disappear. Page* page = frame().page(); if (page &amp;&amp; page-&gt;expectsWheelEventTriggers()) scrollAnimator().setWheelEventTestTrigger(page-&gt;testTrigger()); setScrollbarModes(hMode, vMode); setScrollbarsSuppressed(false, true); } else setScrollbarModes(hMode, vMode); } LayoutSize oldSize = m_size; m_size = layoutSize(); if (oldSize != m_size) { LOG(Layout, &quot; layout size changed from %.3fx%.3f to %.3fx%.3f&quot;, oldSize.width().toFloat(), oldSize.height().toFloat(), m_size.width().toFloat(), m_size.height().toFloat()); m_needsFullRepaint = true; if (!m_firstLayout) { RenderBox* rootRenderer = document.documentElement() ? document.documentElement()-&gt;renderBox() : nullptr; auto* body = document.bodyOrFrameset(); RenderBox* bodyRenderer = rootRenderer &amp;&amp; body ? body-&gt;renderBox() : nullptr; if (bodyRenderer &amp;&amp; bodyRenderer-&gt;stretchesToViewport()) bodyRenderer-&gt;setChildNeedsLayout(); else if (rootRenderer &amp;&amp; rootRenderer-&gt;stretchesToViewport()) rootRenderer-&gt;setChildNeedsLayout(); } } m_layoutPhase = InPreLayout; } layer = root-&gt;enclosingLayer(); SubtreeLayoutStateMaintainer subtreeLayoutStateMaintainer(m_layoutRoot); RenderView::RepaintRegionAccumulator repaintRegionAccumulator(&amp;root-&gt;view()); ASSERT(m_layoutPhase == InPreLayout); m_layoutPhase = InRenderTreeLayout; forceLayoutParentViewIfNeeded(); ASSERT(m_layoutPhase == InRenderTreeLayout);#ifndef NDEBUG RenderTreeNeedsLayoutChecker checker(*root);#endif //‰ªé RenderView Ëøô‰∏™Ê†πÁ∫ßÂºÄÂßãËøõË°å layout„ÄÇ root-&gt;layout(); ASSERT(!root-&gt;view().renderTreeIsBeingMutatedInternally());#if ENABLE(TEXT_AUTOSIZING) if (frame().settings().textAutosizingEnabled() &amp;&amp; !root-&gt;view().printing()) { float minimumZoomFontSize = frame().settings().minimumZoomFontSize(); float textAutosizingWidth = frame().page() ? frame().page()-&gt;textAutosizingWidth() : 0; if (int overrideWidth = frame().settings().textAutosizingWindowSizeOverride().width()) textAutosizingWidth = overrideWidth; LOG(TextAutosizing, &quot;Text Autosizing: minimumZoomFontSize=%.2f textAutosizingWidth=%.2f&quot;, minimumZoomFontSize, textAutosizingWidth); if (minimumZoomFontSize &amp;&amp; textAutosizingWidth) { root-&gt;adjustComputedFontSizesOnBlocks(minimumZoomFontSize, textAutosizingWidth); if (root-&gt;needsLayout()) root-&gt;layout(); } }#endif ASSERT(m_layoutPhase == InRenderTreeLayout); m_layoutRoot = nullptr; // Close block here to end the scope of changeSchedulingEnabled and SubtreeLayoutStateMaintainer. } m_layoutPhase = InViewSizeAdjust; bool neededFullRepaint = m_needsFullRepaint; if (!subtree &amp;&amp; !downcast&lt;RenderView&gt;(*root).printing()) { adjustViewSize(); // FIXME: Firing media query callbacks synchronously on nested frames could produced a detached FrameView here by // navigating away from the current document (see webkit.org/b/173329). if (hasOneRef()) return; } m_layoutPhase = InPostLayout; m_needsFullRepaint = neededFullRepaint; // Now update the positions of all layers. if (m_needsFullRepaint) root-&gt;view().repaintRootContents(); root-&gt;view().releaseProtectedRenderWidgets(); ASSERT(!root-&gt;needsLayout()); layer-&gt;updateLayerPositionsAfterLayout(renderView()-&gt;layer(), updateLayerPositionFlags(layer, subtree, m_needsFullRepaint)); updateCompositingLayersAfterLayout(); m_layoutPhase = InPostLayerPositionsUpdatedAfterLayout; m_layoutCount++;#if PLATFORM(COCOA) || PLATFORM(WIN) || PLATFORM(GTK) if (AXObjectCache* cache = root-&gt;document().existingAXObjectCache()) cache-&gt;postNotification(root, AXObjectCache::AXLayoutComplete);#endif#if ENABLE(DASHBOARD_SUPPORT) updateAnnotatedRegions();#endif#if ENABLE(IOS_TOUCH_EVENTS) document.setTouchEventRegionsNeedUpdate();#endif updateCanBlitOnScrollRecursively(); handleDeferredScrollUpdateAfterContentSizeChange(); handleDeferredScrollbarsUpdateAfterDirectionChange(); if (document.hasListenerType(Document::OVERFLOWCHANGED_LISTENER)) updateOverflowStatus(layoutWidth() &lt; contentsWidth(), layoutHeight() &lt; contentsHeight()); frame().document()-&gt;markers().invalidateRectsForAllMarkers(); if (!m_postLayoutTasksTimer.isActive()) { if (!m_inSynchronousPostLayout) { if (inChildFrameLayoutWithFrameFlattening) updateWidgetPositions(); else { SetForScope&lt;bool&gt; inSynchronousPostLayoutChange(m_inSynchronousPostLayout, true); performPostLayoutTasks(); // Calls resumeScheduledEvents(). } } if (!m_postLayoutTasksTimer.isActive() &amp;&amp; (needsLayout() || m_inSynchronousPostLayout || inChildFrameLayoutWithFrameFlattening)) { // If we need layout or are already in a synchronous call to postLayoutTasks(), // defer widget updates and event dispatch until after we return. postLayoutTasks() // can make us need to update again, and we can get stuck in a nasty cycle unless // we call it through the timer here. m_postLayoutTasksTimer.startOneShot(0_s); } if (needsLayout()) layout(); } InspectorInstrumentation::didLayout(cookie, *root); DebugPageOverlays::didLayout(frame()); --m_nestedLayoutCount;} RenderView ÁöÑ layout Èáå‰ºöË∞ÉÁî® layoutContent ÊñπÊ≥ï„ÄÇËøô‰∏™ÊñπÊ≥ïÁöÑÂÆûÁé∞Â¶Ç‰∏ãÔºö 123456789101112void RenderView::layoutContent(const LayoutState&amp; state){ UNUSED_PARAM(state); ASSERT(needsLayout()); RenderBlockFlow::layout(); if (hasRenderNamedFlowThreads()) flowThreadController().layoutRenderNamedFlowThreads();#ifndef NDEBUG checkLayoutState(state);#endif} ÂèØ‰ª•ÂèëÁé∞Ëøô‰∏™ÊñπÊ≥ïÂÆûÁé∞ÂæàÁÆÄÂçïÔºåÈáåÈù¢‰∏ªË¶ÅÊòØÈÄöËøá RenderBlockFlow Êù•ËøõË°å layout ÁöÑ„ÄÇRenderBlockFlow ÊòØ RenderBlock ÁöÑÂ≠êÁ±ªÔºålayout ÊñπÊ≥ïÊòØÂú® RenderBlock ÈáåÂÆûÁé∞ÔºåÈáåÈù¢Áõ¥Êé•Ë∞É‰∫Ü layoutBlock ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÊòØÂú® RenderBlockFlow ÈáåÈáçËΩΩÂÆûÁé∞ÁöÑ„ÄÇ‰∏ãÈù¢ÁúãÁúã RenderBlockFlow ÁöÑÂÆûÁé∞ÂêßÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157void RenderBlockFlow::layoutBlock(bool relayoutChildren, LayoutUnit pageLogicalHeight){ ASSERT(needsLayout()); //ÂΩì‰∏çÈúÄË¶ÅÂ∏ÉÂ±ÄÂ≠êËäÇÁÇπÂêåÊó∂ËÉΩ simplifiedLayout ÈáçÊñ∞Â∏ÉÂ±ÄÊàêÂäü if (!relayoutChildren &amp;&amp; simplifiedLayout()) return; LayoutRepainter repainter(*this, checkForRepaintDuringLayout()); //ÈáçÊñ∞ËÆ°ÁÆóÈÄªËæëÂÆΩÂ∫¶ if (recomputeLogicalWidthAndColumnWidth()) relayoutChildren = true; rebuildFloatingObjectSetFromIntrudingFloats(); //ÂÖà‰øùÁïô‰∏Ä‰ªΩ‰ª•ÂâçÁöÑÈ´òÂ∫¶‰∏∫ÂêéÈù¢ÂÅöÂØπÊØîÁî® LayoutUnit previousHeight = logicalHeight(); // FIXME: should this start out as borderAndPaddingLogicalHeight() + scrollbarLogicalHeight(), // for consistency with other render classes? //ÁÑ∂ÂêéÂ∞Ü logicalHeight ËÆæÁΩÆ‰∏∫ 0ÔºåÈÅøÂÖçÁ¥ØÂä†‰ª•ÂâçÁöÑ„ÄÇ setLogicalHeight(0); bool pageLogicalHeightChanged = false; checkForPaginationLogicalHeightChange(relayoutChildren, pageLogicalHeight, pageLogicalHeightChanged); const RenderStyle&amp; styleToUse = style(); LayoutStateMaintainer statePusher(view(), *this, locationOffset(), hasTransform() || hasReflection() || styleToUse.isFlippedBlocksWritingMode(), pageLogicalHeight, pageLogicalHeightChanged); preparePaginationBeforeBlockLayout(relayoutChildren); if (!relayoutChildren) relayoutChildren = namedFlowFragmentNeedsUpdate(); // We use four values, maxTopPos, maxTopNeg, maxBottomPos, and maxBottomNeg, to track // our current maximal positive and negative margins. These values are used when we // are collapsed with adjacent blocks, so for example, if you have block A and B // collapsing together, then you&apos;d take the maximal positive margin from both A and B // and subtract it from the maximal negative margin from both A and B to get the // true collapsed margin. This algorithm is recursive, so when we finish layout() // our block knows its current maximal positive/negative values. // // Start out by setting our margin values to our current margins. Table cells have // no margins, so we don&apos;t fill in the values for table cells. bool isCell = isTableCell(); if (!isCell) { initMaxMarginValues(); setHasMarginBeforeQuirk(styleToUse.hasMarginBeforeQuirk()); setHasMarginAfterQuirk(styleToUse.hasMarginAfterQuirk()); setPaginationStrut(0); } LayoutUnit repaintLogicalTop = 0; LayoutUnit repaintLogicalBottom = 0; LayoutUnit maxFloatLogicalBottom = 0; if (!firstChild() &amp;&amp; !isAnonymousBlock()) setChildrenInline(true); //Inline Âíå Block ÁöÑ‰∏çÂêåÂ∏ÉÂ±ÄÂ§ÑÁêÜ if (childrenInline()) layoutInlineChildren(relayoutChildren, repaintLogicalTop, repaintLogicalBottom); else layoutBlockChildren(relayoutChildren, maxFloatLogicalBottom); // Expand our intrinsic height to encompass floats. LayoutUnit toAdd = borderAndPaddingAfter() + scrollbarLogicalHeight(); if (lowestFloatLogicalBottom() &gt; (logicalHeight() - toAdd) &amp;&amp; createsNewFormattingContext()) setLogicalHeight(lowestFloatLogicalBottom() + toAdd); if (relayoutForPagination(statePusher) || relayoutToAvoidWidows(statePusher)) { ASSERT(!shouldBreakAtLineToAvoidWidow()); return; } // Calculate our new height. ËÆ°ÁÆóÊñ∞È´ò LayoutUnit oldHeight = logicalHeight(); LayoutUnit oldClientAfterEdge = clientLogicalBottom(); // Before updating the final size of the flow thread make sure a forced break is applied after the content. // This ensures the size information is correctly computed for the last auto-height region receiving content. if (is&lt;RenderFlowThread&gt;(*this)) downcast&lt;RenderFlowThread&gt;(*this).applyBreakAfterContent(oldClientAfterEdge); updateLogicalHeight(); LayoutUnit newHeight = logicalHeight(); if (oldHeight != newHeight) { if (oldHeight &gt; newHeight &amp;&amp; maxFloatLogicalBottom &gt; newHeight &amp;&amp; !childrenInline()) { // One of our children&apos;s floats may have become an overhanging float for us. We need to look for it. for (auto&amp; blockFlow : childrenOfType&lt;RenderBlockFlow&gt;(*this)) { if (blockFlow.isFloatingOrOutOfFlowPositioned()) continue; if (blockFlow.lowestFloatLogicalBottom() + blockFlow.logicalTop() &gt; newHeight) addOverhangingFloats(blockFlow, false); } } } //ÂâçÈù¢‰øùÁïôÁöÑÂÖàÂâçÈ´òÂ∫¶ÂíåÈáçÊñ∞ËÆ°ÁÆóÂêéÁöÑÈ´òÂ∫¶ÊØîËæÉÊúâÂèòÂåñÂ∞±ÈáçÊñ∞Â∏ÉÂ±ÄÂ≠êÁªìÁÇπ bool heightChanged = (previousHeight != newHeight); if (heightChanged) relayoutChildren = true; layoutPositionedObjects(relayoutChildren || isDocumentElementRenderer()); //Add overflow from children (unless we&apos;re multi-column, since in that case all our child overflow is clipped anyway). computeOverflow(oldClientAfterEdge); statePusher.pop(); fitBorderToLinesIfNeeded(); if (view().layoutState()-&gt;m_pageLogicalHeight) setPageLogicalOffset(view().layoutState()-&gt;pageLogicalOffset(this, logicalTop())); updateLayerTransform(); // Update our scroll information if we&apos;re overflow:auto/scroll/hidden now that we know if // we overflow or not. updateScrollInfoAfterLayout(); // FIXME: This repaint logic should be moved into a separate helper function! // Repaint with our new bounds if they are different from our old bounds. bool didFullRepaint = repainter.repaintAfterLayout(); if (!didFullRepaint &amp;&amp; repaintLogicalTop != repaintLogicalBottom &amp;&amp; (styleToUse.visibility() == VISIBLE || enclosingLayer()-&gt;hasVisibleContent())) { // FIXME: We could tighten up the left and right invalidation points if we let layoutInlineChildren fill them in based off the particular lines // it had to lay out. We wouldn&apos;t need the hasOverflowClip() hack in that case either. LayoutUnit repaintLogicalLeft = logicalLeftVisualOverflow(); LayoutUnit repaintLogicalRight = logicalRightVisualOverflow(); if (hasOverflowClip()) { // If we have clipped overflow, we should use layout overflow as well, since visual overflow from lines didn&apos;t propagate to our block&apos;s overflow. // Note the old code did this as well but even for overflow:visible. The addition of hasOverflowClip() at least tightens up the hack a bit. // layoutInlineChildren should be patched to compute the entire repaint rect. repaintLogicalLeft = std::min(repaintLogicalLeft, logicalLeftLayoutOverflow()); repaintLogicalRight = std::max(repaintLogicalRight, logicalRightLayoutOverflow()); } LayoutRect repaintRect; if (isHorizontalWritingMode()) repaintRect = LayoutRect(repaintLogicalLeft, repaintLogicalTop, repaintLogicalRight - repaintLogicalLeft, repaintLogicalBottom - repaintLogicalTop); else repaintRect = LayoutRect(repaintLogicalTop, repaintLogicalLeft, repaintLogicalBottom - repaintLogicalTop, repaintLogicalRight - repaintLogicalLeft); if (hasOverflowClip()) { // Adjust repaint rect for scroll offset repaintRect.moveBy(-scrollPosition()); // Don&apos;t allow this rect to spill out of our overflow box. repaintRect.intersect(LayoutRect(LayoutPoint(), size())); } // Make sure the rect is still non-empty after intersecting for overflow above if (!repaintRect.isEmpty()) { repaintRectangle(repaintRect); // We need to do a partial repaint of our content. if (hasReflection()) repaintRectangle(reflectedRect(repaintRect)); } } clearNeedsLayout();} ‰ª•‰∏äÊñπÊ≥ïÈáåÊúâ‰∏§‰∏™ÂàÜÊîØÔºå‰∏Ä‰∏™ÊòØ layoutInlineChildren ‰∏Ä‰∏™ÊòØ layoutBlockChildren„ÄÇÁî±‰∫é Inline Â±û‰∫éÂä®ÊÄÅË∞ÉÊï¥È´òÂ∫¶ÊâÄ‰ª•ÊØî Block ÁöÑÂÆûÁé∞Ë¶ÅË¥üË¥£ÂæàÂ§öÔºålayoutInlineChildren ÊñπÂºèÊòØ Inline Â∏ÉÂ±ÄÁöÑÂÖ•Âè£„ÄÇ Layout Tree ÂàõÂª∫Parsing ÂÆåÊàê‰ºöËß¶Âèë Layout Tree„ÄÇLayout Tree ÁöÑÁõÆÁöÑÂ∞±ÊòØÂ≠òÂÇ®ÈúÄË¶ÅÁªòÂà∂ÁöÑÊï∞ÊçÆÔºåLayout Â∞±ÊòØÂ§ÑÁêÜ Nodes Âú®È°µÈù¢‰∏äÁöÑÂ§ßÂ∞èÂíå‰ΩçÁΩÆ„ÄÇChromeÔºåfirefoxÂíå android ‰ΩøÁî®ÁöÑÊòØSkia ÂºÄÊ∫ê 2D ÂõæÂΩ¢Â∫ìÂÅöÂ∫ïÂ±Ç Paint ÂºïÊìé„ÄÇ 123void Document::finishedParsing() { updateStyleAndLayoutTree();} ÊØè‰∏™ Node ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™ LayoutObjectÔºå 12LayoutObject* newLayoutObject = m_node-&gt;createLayoutObject(style);parentLayoutObject-&gt;addChild(newLayoutObject, nextLayoutObject); Layout ÂÄºÁöÑËÆ°ÁÆóLayout Tree ÂàõÂª∫ÂÆåÊàêÂ∞±ÂºÄÂßãËÆ°ÁÆó layout ÁöÑÂÄºÔºåÊØîÂ¶ÇÂÆΩÔºåmargin Á≠â„ÄÇBlock Á±ªÂûãËäÇÁÇπÁöÑ‰ΩçÁΩÆËÆ°ÁÆóÂÆûÁé∞ÊòØÂú® RenderBlock ÈáåÁöÑ layoutBlockChild ÊñπÊ≥ïÈáåÂÆûÁé∞ÁöÑÔºåËØ•ÊñπÊ≥ï‰∏ªË¶ÅÊòØÂÖàÁ°ÆÂÆöËäÇÁÇπÁöÑ top ÂùêÊ†áÔºåÁÑ∂ÂêéËÆ°ÁÆóÂ∏ÉÂ±ÄÂèòÂåñÂêé marginÔºåfloat Âíå ÂàÜÈ°µÁ≠âÂØπ top ÂÄºÁöÑÂΩ±ÂìçÁ°ÆÂÆöÂΩ±ÂìçÂêéÁöÑ top ÂùêÊ†áÔºåÊúÄÂêé‰ΩøÁî® determineLogicalLeftPositionForChild ÂæóÂà∞ left ÂùêÊ†á„ÄÇÂÖ∑‰ΩìÂÆûÁé∞Â¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149void RenderBlockFlow::layoutBlockChild(RenderBox&amp; child, MarginInfo&amp; marginInfo, LayoutUnit&amp; previousFloatLogicalBottom, LayoutUnit&amp; maxFloatLogicalBottom){ LayoutUnit oldPosMarginBefore = maxPositiveMarginBefore(); LayoutUnit oldNegMarginBefore = maxNegativeMarginBefore(); // The child is a normal flow object. Compute the margins we will use for collapsing now. child.computeAndSetBlockDirectionMargins(*this); // Try to guess our correct logical top position. In most cases this guess will // be correct. Only if we&apos;re wrong (when we compute the real logical top position) // will we have to potentially relayout. LayoutUnit estimateWithoutPagination; //‰º∞ÁÆó top ÂùêÊ†áÔºåestimateLogicalTopPosition ‰ºöÂÖàËé∑Âèñ RenderBlock ÁöÑÈ´òÊù•‰Ωú‰∏∫ÂàùÂßãÁöÑ topÔºåÂÜçÊ†πÊçÆ margin ÂàÜÈ°µÂíå float Êù•Ë∞ÉÊï¥ top ÂùêÊ†á LayoutUnit logicalTopEstimate = estimateLogicalTopPosition(child, marginInfo, estimateWithoutPagination); // Cache our old rect so that we can dirty the proper repaint rects if the child moves. LayoutRect oldRect = child.frameRect(); LayoutUnit oldLogicalTop = logicalTopForChild(child);#if !ASSERT_DISABLED LayoutSize oldLayoutDelta = view().layoutDelta();#endif // Position the child as though it didn&apos;t collapse with the top. //ÂÖàËÆæÁΩÆÂ∏ÉÂ±ÄÂâç top ÂùêÊ†á setLogicalTopForChild(child, logicalTopEstimate, ApplyLayoutDelta); estimateRegionRangeForBoxChild(child); RenderBlockFlow* childBlockFlow = is&lt;RenderBlockFlow&gt;(child) ? &amp;downcast&lt;RenderBlockFlow&gt;(child) : nullptr; bool markDescendantsWithFloats = false; if (logicalTopEstimate != oldLogicalTop &amp;&amp; !child.avoidsFloats() &amp;&amp; childBlockFlow &amp;&amp; childBlockFlow-&gt;containsFloats()) markDescendantsWithFloats = true; else if (UNLIKELY(logicalTopEstimate.mightBeSaturated())) // logicalTopEstimate, returned by estimateLogicalTopPosition, might be saturated for // very large elements. If it does the comparison with oldLogicalTop might yield a // false negative as adding and removing margins, borders etc from a saturated number // might yield incorrect results. If this is the case always mark for layout. markDescendantsWithFloats = true; else if (!child.avoidsFloats() || child.shrinkToAvoidFloats()) { // If an element might be affected by the presence of floats, then always mark it for // layout. LayoutUnit fb = std::max(previousFloatLogicalBottom, lowestFloatLogicalBottom()); if (fb &gt; logicalTopEstimate) markDescendantsWithFloats = true; } if (childBlockFlow) { if (markDescendantsWithFloats) childBlockFlow-&gt;markAllDescendantsWithFloatsForLayout(); if (!child.isWritingModeRoot()) previousFloatLogicalBottom = std::max(previousFloatLogicalBottom, oldLogicalTop + childBlockFlow-&gt;lowestFloatLogicalBottom()); } child.markForPaginationRelayoutIfNeeded(); bool childHadLayout = child.everHadLayout(); //ÂØπÂ≠êËäÇÁÇπËøõË°åÂ∏ÉÂ±Ä bool childNeededLayout = child.needsLayout(); if (childNeededLayout) child.layout(); // Cache if we are at the top of the block right now. bool atBeforeSideOfBlock = marginInfo.atBeforeSideOfBlock(); //‰øùËØÅ top ÂùêÊ†áÂíåÂ≠êËäÇÁÇπÂ∏ÉÂ±ÄÂêéËÉΩÂ§üÂêåÊ≠• // Now determine the correct ypos based off examination of collapsing margin // values. LayoutUnit logicalTopBeforeClear = collapseMargins(child, marginInfo); // Now check for clear. LayoutUnit logicalTopAfterClear = clearFloatsIfNeeded(child, marginInfo, oldPosMarginBefore, oldNegMarginBefore, logicalTopBeforeClear); bool paginated = view().layoutState()-&gt;isPaginated(); if (paginated) logicalTopAfterClear = adjustBlockChildForPagination(logicalTopAfterClear, estimateWithoutPagination, child, atBeforeSideOfBlock &amp;&amp; logicalTopBeforeClear == logicalTopAfterClear); //ÁªèËøá‰∏äÈù¢ÁöÑÂ≠êËäÇÁÇπÂ∏ÉÂ±ÄÂÆåÂêéÈáçÊñ∞ËÆ°ÁÆóÂæóÂà∞Êñ∞È´ò setLogicalTopForChild(child, logicalTopAfterClear, ApplyLayoutDelta); // Now we have a final top position. See if it really does end up being different from our estimate. // clearFloatsIfNeeded can also mark the child as needing a layout even though we didn&apos;t move. This happens // when collapseMargins dynamically adds overhanging floats because of a child with negative margins. if (logicalTopAfterClear != logicalTopEstimate || child.needsLayout() || (paginated &amp;&amp; childBlockFlow &amp;&amp; childBlockFlow-&gt;shouldBreakAtLineToAvoidWidow())) { if (child.shrinkToAvoidFloats()) { // The child&apos;s width depends on the line width. When the child shifts to clear an item, its width can // change (because it has more available line width). So mark the item as dirty. child.setChildNeedsLayout(MarkOnlyThis); } if (childBlockFlow) { if (!child.avoidsFloats() &amp;&amp; childBlockFlow-&gt;containsFloats()) childBlockFlow-&gt;markAllDescendantsWithFloatsForLayout(); child.markForPaginationRelayoutIfNeeded(); } } if (updateRegionRangeForBoxChild(child)) child.setNeedsLayout(MarkOnlyThis); // In case our guess was wrong, relayout the child. child.layoutIfNeeded(); // We are no longer at the top of the block if we encounter a non-empty child. // This has to be done after checking for clear, so that margins can be reset if a clear occurred. if (marginInfo.atBeforeSideOfBlock() &amp;&amp; !child.isSelfCollapsingBlock()) marginInfo.setAtBeforeSideOfBlock(false); // Now place the child in the correct left position //ËÆ°ÁÆóËé∑Âæó left ÂùêÊ†á„ÄÇdetermineLogicalLeftPositionForChild ‰ºöÂÖàÂéªËÆ°ÁÆó border-left Âíå padding-left ÁÑ∂ÂêéËÆ°ÁÆó margin-left Êù•Á°ÆÂÆö left ÂùêÊ†á„ÄÇÊúÄÂêéÈÄöËøá setLogicalLeftForChild Â∞ÜÁ°ÆËÆ§ÁöÑ left ÂùêÊ†áËÆ∞ÂΩï‰∏ã„ÄÇ determineLogicalLeftPositionForChild(child, ApplyLayoutDelta); // Update our height now that the child has been placed in the correct position. setLogicalHeight(logicalHeight() + logicalHeightForChildForFragmentation(child)); if (mustSeparateMarginAfterForChild(child)) { setLogicalHeight(logicalHeight() + marginAfterForChild(child)); marginInfo.clearMargin(); } // If the child has overhanging floats that intrude into following siblings (or possibly out // of this block), then the parent gets notified of the floats now. if (childBlockFlow &amp;&amp; childBlockFlow-&gt;containsFloats()) maxFloatLogicalBottom = std::max(maxFloatLogicalBottom, addOverhangingFloats(*childBlockFlow, !childNeededLayout)); LayoutSize childOffset = child.location() - oldRect.location(); if (childOffset.width() || childOffset.height()) { view().addLayoutDelta(childOffset); // If the child moved, we have to repaint it as well as any floating/positioned // descendants. An exception is if we need a layout. In this case, we know we&apos;re going to // repaint ourselves (and the child) anyway. if (childHadLayout &amp;&amp; !selfNeedsLayout() &amp;&amp; child.checkForRepaintDuringLayout()) child.repaintDuringLayoutIfMoved(oldRect); } //Ê∏≤Êüì if (!childHadLayout &amp;&amp; child.checkForRepaintDuringLayout()) { child.repaint(); child.repaintOverhangingFloats(true); } if (paginated) { if (RenderFlowThread* flowThread = flowThreadContainingBlock()) flowThread-&gt;flowThreadDescendantBoxLaidOut(&amp;child); // Check for an after page/column break. LayoutUnit newHeight = applyAfterBreak(child, logicalHeight(), marginInfo); if (newHeight != height()) setLogicalHeight(newHeight); } ASSERT(view().layoutDeltaMatches(oldLayoutDelta));} Âà§Êñ≠ÂÄºÁöÑÁ±ªÂûãÊòØÂõ∫ÂÆöÂÄºËøòÊòØÁôæÂàÜÊØîÁöÑÊñπÊ≥ï 12345678switch (length.type()) { case Fixed: return LayoutUnit(length.value()); //ËøîÂõû LayoutUnit Â∞ÅË£ÖÁöÑÊï∞ÊçÆ 1px = 1 &lt;&lt; 6 = 64 unit case Percent: //maximumValue ÊòØ‰º†ËøõÊù•ÁöÑÊúÄÂ§ßÂÄº return LayoutUnit( static_cast&lt;float&gt;(maximumValue * length.percent() / 100.0f));} ËÆ°ÁÆó margin ÁöÑÂÄº 123456789101112// CSS 2.1: &quot;If both &apos;margin-left&apos; and &apos;margin-right&apos; are &apos;auto&apos;, their used// values are equal. This horizontally centers the element with respect to// the edges of the containing block.&quot;const ComputedStyle&amp; containingBlockStyle = containingBlock-&gt;styleRef();if (marginStartLength.isAuto() &amp;&amp; marginEndLength.isAuto()) { LayoutUnit centeredMarginBoxStart = std::max( LayoutUnit(), (availableWidth - childWidth) / 2); marginStart = centeredMarginBoxStart; marginEnd = availableWidth - childWidth - marginStart; return;} Box Model Èáå 12m_frameRect.setWidth(width);m_marginBox.setStart(marginLeft); ÁªèËøáËÆ°ÁÆóÂêéÁöÑ Render Tree ÂÖ∑ÊúâÂ∏ÉÂ±Ä‰ø°ÊÅØÔºåÊØîÂ¶Ç‰∏ãÈù¢ÁöÑ html ‰ª£Á†ÅÔºö 12345&lt;html&gt;&lt;body&gt;&lt;p&gt;First line.&lt;br&gt;Second one.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; Â∏ÉÂ±ÄËÆ°ÁÆóÂêéÂ∏¶Â∏ÉÂ±Ä‰ø°ÊÅØÁöÑ Render Tree Â¶Ç‰∏ãÔºö 123456RenderBlock {HTML} at (0, 0) size 640x480 |‚Äî‚Äî RenderBody {BODY} at (0, 80) size 640x480 [bgcolor=# FFFFFF] | |‚Äî‚Äî RenderBlock {P} at (0, 0) size 640x80 | | |‚Äî‚Äî RenderText {#text} at (0, 0) size 48x24 &quot;First line.&quot; | | |‚Äî‚Äî RenderBR {BR} at (20, 20) size 0x0 | | |‚Äî‚Äî RenderText {#text} at (0, 24) size 48x24 &quot;Second one.&quot; Box Model Êï∞ÊçÆÁªìÊûÑÊâÄÊúâÁöÑ elements ÈÉΩÊúâ display Â±ûÊÄßÁî®Êù•Á°ÆÂÆöÊòæÁ§∫Á±ªÂûã„ÄÇÂ±ûÊÄßÂÄºÊúâ blockÔºöÁîüÊàê‰∏Ä‰∏™ block box inlineÔºöÁîüÊàê‰∏Ä‰∏™ÊàñÂ§ö‰∏™ inline boxes noneÔºö‰∏çÁîüÊàê box ÈªòËÆ§ÊòØ inline ÁöÑÔºå‰ΩÜÊòØÊµèËßàÂô®‰ºöËÆæÁΩÆÂÖ∂ÂÆÉÈªòËÆ§ÂÄºÔºåÊØîÂ¶ÇËØ¥ div Â∞±ÊòØ block ÁöÑÔºåÂÆåÊï¥ÁöÑÂÆö‰πâÂèØ‰ª•ÂèÇÁúã w3c ÂÆö‰πâÁöÑÔºöhttps://www.w3.org/TR/CSS2/sample.html ÂÆö‰ΩçÁöÑÊñπÊ°àÊúâ‰∏âÁßçÊñπÊ°à NormalÔºöÁî± render tree Êù•ÂÜ≥ÂÆöÁöÑ‰ΩçÁΩÆ„ÄÇ FloatÔºö‰ºöÂÖàÊåâÁÖßÊ≠£Â∏∏ÊµÅÁ®ãÊù•ÊéíÂàóÔºåÁÑ∂ÂêéÂÜçÂ∞ΩÂèØËÉΩÁöÑÂæÄÂ∑¶ÊàñÂæÄÂè≥ÁßªÂä®„ÄÇ AbsoluteÔºöËÆ©ÂÖ∂Âú® render tree ÁöÑ‰ΩçÁΩÆÂíå DOM tree ‰∏ç‰∏ÄÊ†∑ ÂÆö‰ΩçÊñπÊ°àÊòØÊ†πÊçÆ position Â±ûÊÄßÂíå float Â±ûÊÄßÊù•ÂÜ≥ÂÆöÁöÑÔºåstatic Âíå relative Â∞±ÊòØÊ≠£Â∏∏ÁöÑÊéíÂàóÔºå absolute Âíå fixed Â∞±ÊòØ absolute ÂÆö‰Ωç„ÄÇ ÂØπ‰∫é float ÁöÑÂ§ÑÁêÜÔºåÈ¶ñÂÖàÈúÄË¶ÅÂà§Êñ≠ÂÆΩÂ∫¶ÊòØÂê¶ÈúÄË¶Å fit content 123456bool LayoutBox::sizesLogicalWidthToFitContent( const Length&amp; logicalWidth) const { if (isFloating() || isInlineBlockOrInlineTable()) return true; ...} Â¶ÇÊûúÊòØ float ÊàñËÄÖ inline-block ÔºåÂÆΩÂ∫¶Èù†ÂÜÖÂÆπÊù•ÊíëÔºåË°åÂÜÖÁöÑÂÜÖÂÆπ‰ºöÂ∞ÜÈó¥ÈöîÊéßÂà∂Êàê‰∏Ä‰∏™Á©∫Ê†ºÔºåÂâçÂêéÁ©∫Ê†ºÂíåÂ§ö‰ΩôÁ©∫Ê†ºÈÉΩ‰ºöÂøΩÁï•„ÄÇ ÂØπ‰∫é float:left ÁöÑËÆ°ÁÆó 12345678910111213141516//logicalRightOffsetForPositioningFloat Ââ©‰ΩôÁ©∫Èó¥Â¶ÇÊûú‰∏çÂ∞è‰∫é floatLogicalLeft Êó∂Âæ™ÁéØÁªìÊùüwhile (logicalRightOffsetForPositioningFloat( logicalTopOffset, logicalRightOffset, &amp;heightRemainingRight) - floatLogicalLeft &lt; floatLogicalWidth) { //‰∏ãÁßª logicalTopOffset += std::min&lt;LayoutUnit&gt;(heightRemainingLeft, heightRemainingRight); //Êñ∞ÁöÑ floatLogicalLeft floatLogicalLeft = logicalLeftOffsetForPositioningFloat( logicalTopOffset, logicalLeftOffset, &amp;heightRemainingLeft); }}//ÁúãÁúã floatLogicalLeft ÊòØÂê¶Â§ß‰∫é left ÁöÑ offset Âíå padding left ÁöÑÂ∑ÆÂÄºfloatLogicalLeft = std::max( logicalLeftOffset - borderAndPaddingLogicalLeft(), floatLogicalLeft); Box Á±ªÂûãBlock boxÔºöÂú®ÊµèËßàÂô®ÁöÑ window ÈáåÊúâËá™Â∑±ÁöÑÁü©ÂΩ¢ Inline boxÔºöÊ≤°ÊúâËá™Â∑±ÁöÑ blockÔºå‰ΩÜÊòØ‰ºöÂú®‰∏Ä‰∏™ block Èáå Block ÊòØÊåâÁÖßÂûÇÁõ¥ÊéíÂàóÔºåInline ÊòØÊåâÁÖßÊ∞¥Âπ≥Êù•ÊéíÂàó Inline boxes ‰ºöË¢´ÂåÖÂê´Âú® line boxes ÈáåÔºålines ÁöÑÈ´òÂ∫¶Ëá≥Â∞ëÂíåÊúÄÈ´òÁöÑ box ‰∏ÄÊ†∑ÔºåÁîöËá≥Êõ¥È´òÔºåÂΩì boxes Áî®ÁöÑÊòØ baselineÔºåËøôÊÑèÂë≥ÁùÄÂ§ö‰∏™ÂÖÉÁ¥†Â∫ïÈÉ®ÂØπÈΩê„ÄÇÂ¶ÇÊûúÂÆπÂô®ÂÆΩÂ∫¶‰∏çÂ§üÔºåinline ‰ºöÂèòÊàêÂ§ö lines„ÄÇ ‰∏ãÈù¢‰∏æ‰∏™‰æãÂ≠êÁúãÁúã Inline Á±ªÂûãÁöÑ‰æãÂ≠êÔºåÊØîÂ¶ÇÊúâÂ¶Ç‰∏ãÁöÑ htmlÔºö 1&lt;p&gt;First line.&lt;br&gt;Second one.&lt;/p&gt; ËøôÊÆµ html ÁöÑ Render Tree Â¶Ç‰∏ãÔºö Position Á±ªÂûãRelativeÔºöÁõ∏ÂØπÂÆö‰ΩçÔºåÂÖàÊåâÁÖßÊ≠£Â∏∏ÁöÑÂÆö‰ΩçÁÑ∂ÂêéÊ†πÊçÆËÆæÁΩÆÁöÑÂÄºÂÜçÁßªÂä®„ÄÇ FloatÔºö‰ºöË¢´ÁßªÂä®Âà∞Â∑¶ËæπÊàñÂè≥Ëæπ‰æß Absolute Âíå fixedÔºö‰∏ç‰ºöÂèÇ‰∏é normal flowÔºåÂè™ÊåâÁÖßÁ≤æÁ°ÆÂÆö‰ΩçÔºåÂ∞∫ÂØ∏ÂÄºÁõ∏ÂØπ‰∫éÂÆπÂô®ÔºåÂØπ‰∫é fixed Êù•ËØ¥ÔºåÊòØÁõ∏ÂØπ‰∫é view port ÁöÑ„ÄÇfixed box ‰∏ç‰ºöÈöèÁùÄ document ÁöÑÊªöÂä®ËÄåÁßªÂä®„ÄÇ ÂàÜÂ±ÇÂàÜÂ±ÇÂèØ‰ª•ÈÄöËøáÊåáÂÆö CSS ÁöÑ z-index Â±ûÊÄß„ÄÇÂÆÉË°®Á§∫‰∫Ü box ÁöÑÁ¨¨‰∏â‰∏™Áª¥Â∫¶Ôºå‰ΩçÁΩÆÊåâÁÖß z ËΩ¥Êù•„ÄÇËøô‰∫õ box ‰ºöË¢´ÂàÜÊàê stacksÔºåÂè´ÂÅö stacking contextsÔºåÊØè‰∏™Ê†àÈ°∂ÁöÑ box Êõ¥Èù†ËøëÁî®Êà∑„ÄÇstack Ê†πÊçÆ z-index ÁöÑÂ±ûÊÄßÊéíÂ∫è„ÄÇ 1234567891011&lt;STYLE type=\"text/css\"&gt; div { position: absolute; left: 2in; top: 2in; }&lt;/STYLE&gt;&lt;P&gt;&lt;DIV style=\"z-index: 3;background-color:red; width: 1in; height: 1in; \"&gt;&lt;/DIV&gt;&lt;DIV style=\"z-index: 1;background-color:green;width: 2in; height: 2in;\"&gt;&lt;/DIV&gt;&lt;/p&gt; ÊïàÊûúÂ¶Ç‰∏ãÔºö ÂèØ‰ª•ÁúãÂà∞Â±ÇÁ∫ßÊòØÊåâÁÖß z-index Êù•ÊéíÁöÑ„ÄÇ Â§ßÂ∞èÁöÑËÆ°ÁÆóborder Âèä‰ª•ÂÜÖÂå∫Âüü‰ΩøÁî® m_frameRect ÂØπË±°Ë°®Á§∫„ÄÇ‰∏çÂêåÊñπÊ≥ïÈÄöËøá‰∏çÂêåÁöÑËÆ°ÁÆóËÉΩÂ§üËé∑ÂèñÂà∞‰∏çÂêåÁöÑÂÄºÊØîÂ¶Ç clientWidth ÁöÑËÆ°ÁÆóÊñπÊ≥ïÊòØ 123456// More IE extensions. clientWidth and clientHeight represent the interior of// an object excluding border and scrollbar.LayoutUnit LayoutBox::clientWidth() const { return m_frameRect.width() - borderLeft() - borderRight() - verticalScrollbarWidth();} offsetWidth ÊòØ frameRect ÁöÑÂÆΩÂ∫¶ 123// IE extensions. Used to calculate offsetWidth/Height.LayoutUnit offsetWidth() const override { return m_frameRect.width(); }LayoutUnit offsetHeight() const override { return m_frameRect.height(); } Margin Âå∫ÂüüÊòØÁî® LayoutRectOutsets 1234LayoutUnit m_top;LayoutUnit m_right;LayoutUnit m_bottom;LayoutUnit m_left; ‰ΩçÁΩÆ‰ΩçÁΩÆÁöÑËÆ°ÁÆóÔºåÂç≥ x Âíå y ÊòØÈÄöËøá‰∏ãÈù¢‰∏§‰∏™ÂáΩÊï∞ËÆ°ÁÆóÂæóÂà∞ 123456// Ê†πÊçÆ margin ÂæóÂà∞ y ÂÄºLayoutUnit logicalTopBeforeClear = collapseMargins(child, layoutInfo, childIsSelfCollapsing, childDiscardMarginBefore, childDiscardMarginAfter);// ÂæóÂà∞ x ÂÄºdetermineLogicalLeftPositionForChild(child); ËÆ°ÁÆóÊòØ‰∏™ÈÄíÂΩíËøáÁ®ãÔºåÁî±Â≠êÂÖÉÁ¥†Âà∞Áà∂ÂÖÉÁ¥†„ÄÇËøôÊ†∑ÂÅöÁöÑÂéüÂõ†ÊòØÊúâÁöÑÁà∂ÂÖÉÁ¥†ÁöÑÈ´òÊòØÁî±Â≠êÂÖÉÁ¥†ÊíëËµ∑ÁöÑÔºåÈúÄË¶ÅÂÖàÁü•ÈÅìÂ≠êÂÖÉÁ¥†ÊâçËÉΩÂ§üÊé®Âá∫Áà∂ÂÖÉÁ¥†„ÄÇ ming1016","link":"/ÁºñÁ®ã/Ô£ø/webkit/"}],"tags":[{"name":"Hexo","slug":"Hexo","link":"/tags/Hexo/"},{"name":"Ô£ø","slug":"Ô£ø","link":"/tags/Ô£ø/"},{"name":"Node.js","slug":"Node-js","link":"/tags/Node-js/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"git","slug":"git","link":"/tags/git/"},{"name":"Django","slug":"Django","link":"/tags/Django/"},{"name":"Python","slug":"Python","link":"/tags/Python/"},{"name":"Markdown","slug":"Markdown","link":"/tags/Markdown/"}],"categories":[{"name":"ÂçöÂÆ¢","slug":"ÂçöÂÆ¢","link":"/categories/ÂçöÂÆ¢/"},{"name":"ÁîüÊ¥ª","slug":"ÁîüÊ¥ª","link":"/categories/ÁîüÊ¥ª/"},{"name":"ËÆ∞ÂΩï","slug":"ËÆ∞ÂΩï","link":"/categories/ËÆ∞ÂΩï/"},{"name":"ËµÑËÆØ","slug":"ËµÑËÆØ","link":"/categories/ËµÑËÆØ/"},{"name":"ÁºñÁ®ã","slug":"ÁºñÁ®ã","link":"/categories/ÁºñÁ®ã/"}]}